# ğŸ” é¡µé¢ç©ºç™½é—®é¢˜è¯Šæ–­ä¸ä¿®å¤æŠ¥å‘Š

## âŒ é—®é¢˜ç°è±¡
è®¿é—®æ³°æ‹‰ç‘äºšç®¡ç†é¢æ¿æ—¶ï¼Œé¡µé¢å®Œå…¨ç©ºç™½ï¼Œæ²¡æœ‰ä»»ä½•æ•°æ®æ˜¾ç¤ºã€‚

## ğŸ¯ æ ¹æœ¬åŸå› 

### é—®é¢˜åˆ†æ
ç»è¿‡æ·±å…¥æ’æŸ¥ï¼Œå‘ç°äº†**API åŸºç¡€è·¯å¾„ä¸åŒ¹é…**çš„å…³é”®é—®é¢˜ï¼š

1. **å‰ç«¯ API é…ç½®ä¸ä¸€è‡´**
   - `web/src/utils/api.ts` ä½¿ç”¨ baseURL: `/api`
   - `web/src/axios/request.ts` ä½¿ç”¨ baseURL: `/api/v1`
   - ä¸¤ä¸ª axios å®ä¾‹é…ç½®ä¸åŒ

2. **åç«¯è·¯ç”±é…ç½®**
   - æ‰€æœ‰ API è·¯ç”±éƒ½åœ¨ `/api/v1` ä¸‹ï¼ˆè§ `internal/api/routes.go`ï¼‰
   - ä¾‹å¦‚ï¼š`/api/v1/server/status`ã€`/api/v1/players/` ç­‰

3. **å½±å“èŒƒå›´**
   - Dashboard é¡µé¢ï¼ˆ`/terraria/dashboard`ï¼‰ä½¿ç”¨ `web/src/utils/api.ts`
   - è°ƒç”¨ `getServerStatus()`ã€`getOnlinePlayers()`ã€`getSystemStats()` ç­‰ API
   - æ‰€æœ‰è¯·æ±‚å‘é€åˆ°é”™è¯¯çš„è·¯å¾„ `/api/xxx` è€Œä¸æ˜¯ `/api/v1/xxx`
   - å¯¼è‡´æ‰€æœ‰ API è¿”å› 404ï¼Œé¡µé¢æ— æ³•åŠ è½½æ•°æ®

## âœ… ä¿®å¤æ–¹æ¡ˆ

### ä¿®æ”¹å†…å®¹
ä¿®æ”¹ `web/src/utils/api.ts` ç¬¬ 8 è¡Œï¼š

```typescript
// ä¿®æ”¹å‰
baseURL: import.meta.env.VITE_API_BASE_URL || '/api',

// ä¿®æ”¹å
baseURL: import.meta.env.VITE_API_BASE_URL || '/api/v1',
```

### æ‰§è¡Œæ­¥éª¤
1. âœ… ä¿®æ”¹ `web/src/utils/api.ts` ä¸­çš„ baseURL
2. âœ… é‡æ–°æ„å»ºå‰ç«¯ï¼š`npm run build`
3. âœ… å¤åˆ¶æ„å»ºäº§ç‰©åˆ° `cmd/dist/`
4. âœ… é‡æ–°ç¼–è¯‘åç«¯ï¼ˆåµŒå…¥æ–°çš„å‰ç«¯æ–‡ä»¶ï¼‰
5. â³ é‡å¯æœåŠ¡å™¨å¹¶æµ‹è¯•

## ğŸ“‹ éªŒè¯æ¸…å•

### å‰ç«¯éªŒè¯
- [x] å‰ç«¯æ„å»ºæˆåŠŸï¼ˆweb/dist ç›®å½•å­˜åœ¨ï¼‰
- [x] API åŸºç¡€è·¯å¾„å·²ç»Ÿä¸€ä¸º `/api/v1`
- [x] ç¯å¢ƒå˜é‡é…ç½®æ­£ç¡®ï¼ˆdev.env å’Œ prod.envï¼‰

### åç«¯éªŒè¯
- [x] å‰ç«¯æ–‡ä»¶å·²å¤åˆ¶åˆ° `cmd/dist/`
- [x] åç«¯ç¨‹åºå·²é‡æ–°ç¼–è¯‘
- [ ] æœåŠ¡å™¨å¯åŠ¨æ—¶æ˜¾ç¤º `[OK] Frontend assets embedded`
- [ ] è®¿é—® Dashboard é¡µé¢èƒ½çœ‹åˆ°æ•°æ®

### API æµ‹è¯•
å¯åŠ¨æœåŠ¡å™¨åï¼Œæµ‹è¯•ä»¥ä¸‹ APIï¼š
```bash
# æµ‹è¯•æœåŠ¡å™¨çŠ¶æ€ API
curl http://localhost:8080/api/v1/server/status

# æµ‹è¯•åœ¨çº¿ç©å®¶ API
curl http://localhost:8080/api/v1/players/online

# æµ‹è¯•ç³»ç»Ÿç»Ÿè®¡ API
curl http://localhost:8080/api/v1/system/metrics
```

## ğŸš€ å¯åŠ¨æœåŠ¡å™¨

```bash
# Windows
.\terraria-panel.exe

# æˆ–ä½¿ç”¨æµ‹è¯•ç‰ˆæœ¬
.\terraria-panel-test.exe

# Linux
./terraria-panel-linux
```

è®¿é—®åœ°å€ï¼š`http://localhost:8080`

## ğŸ“ å…¶ä»–å‘ç°

### é¡¹ç›®ä¸­å­˜åœ¨çš„ axios å®ä¾‹
1. **`web/src/utils/api.ts`** - ç”¨äº terraria APIï¼ˆå·²ä¿®å¤ï¼‰
2. **`web/src/axios/request.ts`** - ç”¨äºè®¤è¯ APIï¼ˆé…ç½®æ­£ç¡®ï¼‰

### å»ºè®®ä¼˜åŒ–
- è€ƒè™‘ç»Ÿä¸€ä½¿ç”¨ä¸€ä¸ª axios å®ä¾‹ï¼Œé¿å…é…ç½®ä¸ä¸€è‡´
- æˆ–è€…åœ¨é¡¹ç›®æ–‡æ¡£ä¸­æ˜ç¡®è¯´æ˜ä¸¤ä¸ªå®ä¾‹çš„ä½¿ç”¨åœºæ™¯

## ğŸ”§ å¦‚ä½•é¿å…ç±»ä¼¼é—®é¢˜

1. **ç»Ÿä¸€ API é…ç½®**ï¼šä½¿ç”¨å•ä¸€çš„ axios å®ä¾‹æˆ–é…ç½®æ–‡ä»¶
2. **æ·»åŠ  API æµ‹è¯•**ï¼šç¡®ä¿å‰åç«¯è·¯ç”±åŒ¹é…
3. **é”™è¯¯æ—¥å¿—ç›‘æ§**ï¼šåœ¨å¼€å‘ç¯å¢ƒæ˜¾ç¤ºè¯¦ç»†çš„ API é”™è¯¯ä¿¡æ¯
4. **æ–‡æ¡£ç»´æŠ¤**ï¼šè®°å½•æ‰€æœ‰ API è·¯å¾„è§„èŒƒ

---

**ä¿®å¤æ—¥æœŸ**ï¼š2025-10-03
**ä¿®å¤äººå‘˜**ï¼šAI Assistant
**é—®é¢˜çº§åˆ«**ï¼šä¸¥é‡ï¼ˆå¯¼è‡´é¡µé¢å®Œå…¨æ— æ³•ä½¿ç”¨ï¼‰

