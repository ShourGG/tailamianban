# 🔍 页面空白问题 - 完整诊断清单

## 1️⃣ 首先确认：页面"空白"的具体表现

请打开浏览器开发者工具（按 F12）并回答：

### A. 页面完全是白色的，什么都没有？
- [ ] 是 → 可能是前端文件加载失败
- [ ] 否 → 继续下一步

### B. 能看到登录页面吗？
- [ ] 能看到 → 说明前端加载正常
- [ ] 看不到 → 前端文件可能有问题

### C. 查看浏览器控制台（Console 标签）
**有红色错误信息吗？请截图或复制错误信息**
```
常见错误：
- Failed to load module
- 404 Not Found
- Unauthorized
- Cannot read property of undefined
```

### D. 查看网络请求（Network 标签）
刷新页面后，检查：
- [ ] `index.html` 是否成功加载（状态码 200）？
- [ ] `js/index-xxx.js` 等 JS 文件是否成功加载？
- [ ] 是否有 API 请求失败（状态码 404 或 401）？

---

## 2️⃣ 可能的原因分析

### 原因A：前端文件未正确嵌入后端 ❌
**症状**：
- 访问 `http://localhost:8080` 显示空白或 404
- 浏览器控制台显示 JS/CSS 文件 404

**检查方法**：
后端启动时，查看是否有这行日志：
```
[OK] Frontend assets embedded (index.html: xxx bytes)
```

### 原因B：API 路径不匹配 ❌（我已修复）
**症状**：
- 页面能加载，但是没有数据
- 浏览器 Network 显示 `/api/server/status` 等请求 404
- 控制台可能有 API 错误

**修复状态**：✅ 已修改 `web/src/utils/api.ts`

### 原因C：未登录/认证失败 🔒
**症状**：
- 页面自动跳转到 `/login`
- 如果登录页也空白，可能是原因A

**检查方法**：
访问 `http://localhost:8080/login`，能看到登录界面吗？

### 原因D：动态路由初始化失败 ⚙️
**症状**：
- 登录成功后，页面空白或一直加载
- 控制台有 "动态路由初始化失败" 错误

**可能原因**：
- 后端未启动或无法访问
- 菜单 API 返回错误数据

---

## 3️⃣ 分步排查流程

### 步骤1：确认后端是否正常运行
```bash
# 启动后端（如果还没启动）
.\terraria-panel-test.exe

# 检查后端健康状态
curl http://localhost:8080/api/v1/auth/check-init
# 应该返回 JSON 数据，例如：{"initialized": false}
```

### 步骤2：确认前端文件是否可访问
在浏览器访问以下 URL：
- `http://localhost:8080/` - 应该显示页面（可能跳转到 /login）
- `http://localhost:8080/index.html` - 应该返回 HTML
- `http://localhost:8080/js/` - 查看是否有 JS 文件

### 步骤3：检查浏览器控制台错误
按 F12 打开开发者工具，切换到 Console 标签，刷新页面，**复制所有红色错误信息**

### 步骤4：检查网络请求
按 F12 → Network 标签 → 勾选 "Preserve log" → 刷新页面
查看哪些请求失败了（红色），**特别关注**：
- API 请求（/api/v1/...）
- 静态资源（.js, .css）

---

## 4️⃣ 快速测试：访问这些页面

依次在浏览器中访问以下 URL，告诉我结果：

1. `http://localhost:8080/` 
   - [ ] 看到登录页
   - [ ] 看到空白页
   - [ ] 看到其他内容

2. `http://localhost:8080/login`
   - [ ] 看到登录页
   - [ ] 看到空白页
   - [ ] 404 错误

3. `http://localhost:8080/api/v1/auth/check-init`
   - [ ] 看到 JSON 数据
   - [ ] 看到空白页
   - [ ] 404 错误

4. 打开浏览器开发者工具 (F12)
   - Console 标签有什么**红色错误**？
   - Network 标签哪些请求是**红色（失败）**的？

---

## 5️⃣ 根据您的回答，我会提供对应的解决方案

**请回复以上检查结果，特别是：**
1. 后端启动日志（特别是 `[OK] Frontend assets embedded` 这行）
2. 浏览器控制台的错误信息（截图或文字）
3. Network 标签中失败的请求列表

这样我才能准确判断问题所在！

