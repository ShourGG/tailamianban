import{u as R}from"./index-ClRVJH89.js";import{n as _}from"./d_menu-CvqaH7AJ.js";import{k as C,ac as A,ag as T,r as x,c as k,w as U,o as b,n as g,Z as J,P as N,J as v}from"./vue-vendor-DIhTWhib.js";import{R as Z}from"./ui-vendor-qucRfopV.js";const G=C({__name:"index",props:{data:{},mode:{default:"vertical"},collapsed:{type:Boolean,default:!1},collapsedWidth:{default:64},collapsedIconSize:{default:22},inverted:{type:Boolean,default:!1}},setup(c){const m=A(),S=T(),z=R(),B={placement:"right-start",trigger:"hover",arrowStyle:{color:"var(--n-color)"}},l=c,i=x(null),K=k(()=>m.path),p=x([]),E=k(()=>_(l.data)),$=k(()=>z.themeOverrides.Menu||{}),f=t=>t.reduce((n,e)=>[...n,e,...e.children?f(e.children):[]],[]),M=t=>{const n=f(l.data).find(e=>{const o=e.path||"/home";return(o.startsWith("/")?o:`/${o}`)===t});n?.path&&S.push(n.path)},y=(t,n,e=[])=>{for(const o of t)if(o.children?.length){const r=[...e];if(o.path){const s=o.path.startsWith("/")?o.path:`/${o.path}`;r.push(s)}if(o.children.some(s=>(s.path||"")===n||s.children?.length&&y(s.children,n,r).length>0))return r;const a=y(o.children,n,r);if(a.length>0)return a}return[]},O=()=>{const t=m.path.split("/").filter(Boolean),n=new Set;let e="";t.forEach(r=>{e+=`/${r}`;const h=f(l.data).find(a=>(a.path||"")===e);if(h){const a=h.path||"",s=a.startsWith("/")?a:`/${a}`;n.add(s)}}),y(l.data,m.path).forEach(r=>n.add(r)),p.value=Array.from(n)},W=t=>p.value=t,I=()=>{i.value&&i.value.showOption(K.value)};return U(()=>m.path,t=>{const n=t.split("/").filter(Boolean),e=new Set;let o="";n.forEach(d=>{o+=`/${d}`;const P=f(l.data).find(u=>(u.path||"")===o);if(P){const u=P.path||"",w=u.startsWith("/")?u:`/${u}`;e.add(w)}}),y(l.data,t).forEach(d=>e.add(d));const h=t.split("/").filter(Boolean);let a="";h.forEach(d=>{a+=`/${d}`,e.add(a)});const s=new Set([...p.value,...Array.from(e)]);p.value=Array.from(s),g(()=>{i.value&&i.value.showOption(t)})},{immediate:!0}),b(()=>{g(()=>{O(),I()})}),(t,n)=>{const e=Z;return N(),J(e,{ref_key:"menuRef",ref:i,options:v(E),"expanded-keys":v(p),value:v(K),mode:c.mode,collapsed:c.collapsed,"collapsed-width":c.collapsedWidth,"collapsed-icon-size":c.collapsedIconSize,inverted:c.inverted,"theme-overrides":v($),"dropdown-props":B,indent:24,"root-indent":16,style:{"--primary-color":"var(--n-color-primary)","--n-item-color-active":"var(--primary-color)"},"onUpdate:value":M,"onUpdate:expandedKeys":W},null,8,["options","expanded-keys","value","mode","collapsed","collapsed-width","collapsed-icon-size","inverted","theme-overrides"])}}});export{G as _};
