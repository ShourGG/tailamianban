import{K,M as L,ag as O,L as R,ap as Y,$ as H,V as J,a1 as P,a0 as Q}from"./ui-vendor-qucRfopV.js";import{k as U,i as W,c as i,O as p,P as r,X,S as o,J as t,Q as a,R as n,j as u,_,F as Z,W as q,Z as I,H as h,a6 as ee}from"./vue-vendor-DIhTWhib.js";import{_ as te}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ne=Symbol("dynamicFormState"),se={class:"c-form-dynamic"},ae={key:0,class:"dynamic-controls"},oe={class:"max-fields-config"},le={class:"dynamic-stats"},ie={key:1,class:"dynamic-controls-fallback"},de={class:"dynamic-form-items"},me=U({__name:"index",props:{formItems:{},layoutConfig:{default:()=>({})},options:{default:()=>[]},dynamicFormState:{default:null}},emits:["field-add","field-remove","fields-clear"],setup(F,{expose:D}){const m=F,$=W(ne,null),s=i(()=>m.dynamicFormState||$),f=i(()=>!!s.value),y=i(()=>m.layoutConfig?.dynamic?.grid?.cols??24),C=i(()=>m.layoutConfig?.dynamic?.grid?.gutter??16),N=i(()=>m.layoutConfig?.dynamic?.controls?.showControls!==!1),b=i(()=>s.value?.state.config.maxFields??m.layoutConfig?.dynamic?.dynamic?.maxFields??50),c=i(()=>s.value?.dynamicFieldsCount.value??0),z=i(()=>s.value?.canAddMoreFields.value??!1),A=i(()=>m.formItems.length),B=(d,e)=>d.key?.toString()||d.props?.path||`dynamic-item-${e}`,M=d=>{const e=m.options?.[d]?.layout?.span;return typeof e=="number"&&e>0&&e<=y.value?e:Math.min(12,y.value)},V=d=>{if(!s.value)return!1;const e=d.props?.path||d.key?.toString()||"";return s.value.state.dynamicFields.some(v=>v.prop===e)};return D({addField:()=>s.value?.addField(),removeField:()=>s.value?.removeField(),clearAllDynamic:()=>s.value?.clearDynamicFields(),isDynamicStateAvailable:f,dynamicState:s}),(d,e)=>{const v=Y,g=L,x=K,j=O,S=R,k=H,T=J,E=P,G=Q;return r(),p("div",se,[t(N)&&t(f)?(r(),p("div",ae,[a(k,{size:"small",title:"动态表单控制",bordered:!1},{"header-extra":n(()=>[a(v,{value:t(c),type:"warning"},{default:n(()=>[...e[4]||(e[4]=[o("div",{class:"i-mdi:layers text-16px"},null,-1)])]),_:1},8,["value"])]),default:n(()=>[a(x,{justify:"space-between",align:"center"},{default:n(()=>[a(x,null,{default:n(()=>[a(g,{size:"small",type:"primary",disabled:!t(z),onClick:e[0]||(e[0]=l=>t(s).addField())},{icon:n(()=>[...e[5]||(e[5]=[o("div",{class:"i-mdi:plus text-14px"},null,-1)])]),default:n(()=>[u(" 添加字段 ("+_(t(c))+"/"+_(t(b))+") ",1)]),_:1},8,["disabled"]),a(g,{size:"small",type:"warning",disabled:t(c)===0,onClick:e[1]||(e[1]=l=>t(s).removeField())},{icon:n(()=>[...e[6]||(e[6]=[o("div",{class:"i-mdi:minus text-14px"},null,-1)])]),default:n(()=>[e[7]||(e[7]=u(" 移除字段 ",-1))]),_:1},8,["disabled"]),a(g,{size:"small",type:"error",disabled:t(c)===0,onClick:e[2]||(e[2]=l=>t(s).clearDynamicFields())},{icon:n(()=>[...e[8]||(e[8]=[o("div",{class:"i-mdi:delete-sweep text-14px"},null,-1)])]),default:n(()=>[e[9]||(e[9]=u(" 清空动态 ",-1))]),_:1},8,["disabled"])]),_:1}),o("div",oe,[e[10]||(e[10]=o("span",null,"最大字段数:",-1)),a(j,{value:t(b),"onUpdate:value":e[3]||(e[3]=l=>l&&t(s).updateConfig({maxFields:l})),min:5,max:50,size:"small",style:{width:"100px"}},null,8,["value"])])]),_:1}),o("div",le,[a(x,null,{default:n(()=>[a(S,{type:"info"},{default:n(()=>[u("总字段: "+_(t(A)),1)]),_:1}),a(S,{type:"warning"},{default:n(()=>[u("动态: "+_(t(c)),1)]),_:1})]),_:1})])]),_:1})])):t(N)&&!t(f)?(r(),p("div",ie,[a(k,{size:"small",title:"动态表单控制 (静态模式)",bordered:!1},{default:n(()=>[a(T,{type:"info","show-icon":""},{icon:n(()=>[...e[11]||(e[11]=[o("div",{class:"i-mdi:information-outline text-16px"},null,-1)])]),default:n(()=>[e[12]||(e[12]=u(" 当前为静态模式，如需动态功能请在父组件中提供动态表单状态。 ",-1))]),_:1})]),_:1})])):X("",!0),o("div",de,[a(G,{cols:t(y),"x-gap":t(C),"y-gap":t(C)},{default:n(()=>[(r(!0),p(Z,null,q(F.formItems,(l,w)=>(r(),I(E,{key:B(l,w),span:M(w)},{default:n(()=>[o("div",{class:h(["dynamic-item-wrapper",{"is-dynamic-field":V(l)}])},[(r(),I(ee(l)))],2)]),_:2},1032,["span"]))),128))]),_:1},8,["cols","x-gap","y-gap"])])])}}}),pe=te(me,[["__scopeId","data-v-a091ca6c"]]);export{pe as default};
