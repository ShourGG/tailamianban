import k from"./index-B7tUa73I.js";import B from"./index-DIqz961w.js";import C from"./index-CoPw-yiD.js";import{k as P,r as R,c as i,w as y,O as T,P as h,Z as A,s as L,J as u,a6 as E}from"./vue-vendor-DIhTWhib.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./charts-vendor-XI8Sg87J.js";import"./ui-vendor-qucRfopV.js";import"./exportUtils-pIheTlXt.js";const M={class:"c-antv-container"},j=P({__name:"index",props:{type:{},data:{},width:{default:"100%"},height:{default:"600px"},readonly:{type:Boolean,default:!1},showToolbar:{type:Boolean,default:!0},theme:{default:"light"}},emits:["ready","data-change"],setup(f,{expose:g,emit:_}){const a=f,d=_,s=R(),w={er:k,bpmn:B,uml:C},x=i(()=>w[a.type]),b=i(()=>{const e={width:a.width,height:a.height,readonly:a.readonly,showToolbar:a.showToolbar,theme:a.theme};let n=a.data;if(a.type==="bpmn"&&a.data){const o=a.data;o&&typeof o=="object"&&"nodes"in o&&"edges"in o&&(n=[...(o.nodes||[]).map(t=>({...t,shape:t.type||t.shape||"rect",x:t.x??0,y:t.y??0})),...(o.edges||[]).map(t=>({...t,shape:"edge",x:0,y:0}))])}return{...e,data:n}}),D=e=>{d("ready",e)},v=e=>{let n;if(a.type==="bpmn"&&Array.isArray(e)){const r=e.filter(t=>t.shape!=="edge").map(t=>{const{shape:p,x:m,y:l,...c}=t;return{...c,type:p==="rect"?"task":p,x:m||0,y:l||0}}),o=e.filter(t=>t.shape==="edge").map(t=>{const{shape:p,x:m,y:l,...c}=t;return c});n={nodes:r,edges:o,flows:[]}}else n=e;d("data-change",n)};return y(()=>a.type,(e,n)=>{},{immediate:!0}),y(()=>a.data,e=>{},{deep:!0}),g({getGraph:()=>s.value?.getGraph?.(),getData:()=>{const e=s.value?.getData?.();if(a.type==="bpmn"&&Array.isArray(e)){const n=e.filter(o=>o.shape!=="edge"),r=e.filter(o=>o.shape==="edge");return{nodes:n,edges:r,flows:[]}}return e}}),(e,n)=>(h(),T("div",M,[(h(),A(E(u(x)),L(u(b),{onReady:D,onDataChange:v,ref_key:"layoutRef",ref:s}),null,16))]))}}),F=G(j,[["__scopeId","data-v-a991cead"]]);export{F as default};
