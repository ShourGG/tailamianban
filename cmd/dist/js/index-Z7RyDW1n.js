import{k as P,r as v,c as _,w as R,o as V,E as J,O as u,P as c,X as g,S as n,Q as i,J as t,H as h,_ as w,Z as $,R as o,j as S,L as U,z as W,a2 as I}from"./vue-vendor-DIhTWhib.js";import{a as K}from"./index-ClRVJH89.js";import"./editor-vendor-CUlQiixb.js";import{M as O,a9 as Q,aa as X,ab as A,ac as D}from"./ui-vendor-qucRfopV.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./spline-vendor-BYERog9l.js";import"./charts-vendor-XI8Sg87J.js";const Y={class:"c-code-wrapper"},Z={key:0,class:"c-code-header"},ee={class:"c-code-title"},ae={class:"c-code-actions"},te={class:"c-code-content"},ne={key:0,class:"floating-copy-btn"},oe={key:0,class:"c-code-loading"},le={class:"ml-2"},ie={class:"fullscreen-content"},se={class:"fullscreen-header"},re={class:"fullscreen-title"},de={class:"fullscreen-body"},ce=P({__name:"index",props:{code:{default:""},language:{default:"text"},title:{},showHeader:{type:Boolean,default:!0},showLineNumbers:{type:Boolean,default:!0},wordWrap:{type:Boolean,default:!1},trim:{type:Boolean,default:!0},showFullscreen:{type:Boolean,default:!1},maxHeight:{},autoLoadLanguage:{type:Boolean,default:!0}},emits:["copy","click","fullscreen"],setup(e,{expose:z,emit:T}){const s=e,k=T,x=K(),d=v(!1),r=v(!1),b=v(!1),L=v(!1),H=_(()=>x.getHljs()),f=_(()=>({javascript:"i-mdi:language-javascript",typescript:"i-mdi:language-typescript",python:"i-mdi:language-python",html:"i-mdi:language-html5",css:"i-mdi:language-css3",vue:"i-mdi:vuejs",react:"i-mdi:react",json:"i-mdi:code-json",java:"i-mdi:language-java",cpp:"i-mdi:language-cpp",go:"i-mdi:language-go",rust:"i-mdi:language-rust",php:"i-mdi:language-php",csharp:"i-mdi:language-csharp",sql:"i-mdi:database",yaml:"i-mdi:file-code",xml:"i-mdi:xml",markdown:"i-mdi:language-markdown",bash:"i-mdi:bash",shell:"i-mdi:console",powershell:"i-mdi:powershell",swift:"i-mdi:language-swift",kotlin:"i-mdi:language-kotlin",ruby:"i-mdi:language-ruby"})[s.language.toLowerCase()]||"i-mdi:code-braces"),q=_(()=>s.maxHeight?{maxHeight:typeof s.maxHeight=="number"?`${s.maxHeight}px`:s.maxHeight}:{});R(()=>s.language,async l=>{if(!(!s.autoLoadLanguage||l==="text"||x.getLoadedLanguages().includes(l))){b.value=!0;try{await x.loadLanguage(l)}catch{}finally{b.value=!1}}},{immediate:!0});async function C(){if(!d.value){d.value=!0;try{await navigator.clipboard.writeText(s.code),k("copy",s.code)}catch{}finally{d.value=!1}}}function y(){r.value=!r.value,k("fullscreen",r.value)}function N(l){return{javascript:"JavaScript",typescript:"TypeScript",python:"Python",java:"Java",cpp:"C++",csharp:"C#",php:"PHP",go:"Go",rust:"Rust",html:"HTML",css:"CSS",json:"JSON",bash:"Bash",shell:"Shell",yaml:"YAML",xml:"XML",markdown:"Markdown",sql:"SQL",powershell:"PowerShell",swift:"Swift",kotlin:"Kotlin",ruby:"Ruby",vue:"Vue",react:"React"}[l.toLowerCase()]||l.toUpperCase()}function B(l){l.key==="Escape"&&r.value&&y()}return V(()=>{document.addEventListener("keydown",B)}),J(()=>{document.removeEventListener("keydown",B)}),z({copyCode:C,toggleFullscreen:y}),(l,a)=>{const m=O,j=Q,M=X,E=A,F=D;return c(),u("div",Y,[e.showHeader?(c(),u("div",Z,[n("div",ee,[t(f)?(c(),u("div",{key:0,class:h([t(f),"mr-2 text-16px"])},null,2)):g("",!0),n("span",null,w(e.title||N(e.language)),1)]),n("div",ae,[i(j,{trigger:"hover"},{trigger:o(()=>[i(m,{size:"tiny",quaternary:"",onClick:C,loading:t(d)},{icon:o(()=>[n("div",{class:h(t(d)?"i-mdi:loading animate-spin":"i-mdi:content-copy")},null,2)]),_:1},8,["loading"])]),default:o(()=>[a[4]||(a[4]=S(" 复制代码 ",-1))]),_:1}),e.showFullscreen?(c(),$(j,{key:0,trigger:"hover"},{trigger:o(()=>[i(m,{size:"tiny",quaternary:"",onClick:y},{icon:o(()=>[n("div",{class:h(t(r)?"i-mdi:fullscreen-exit":"i-mdi:fullscreen")},null,2)]),_:1})]),default:o(()=>[S(" "+w(t(r)?"退出全屏":"全屏查看"),1)]),_:1})):g("",!0)])])):g("",!0),n("div",te,[n("div",{class:"code-wrapper",onMouseenter:a[1]||(a[1]=p=>L.value=!0),onMouseleave:a[2]||(a[2]=p=>L.value=!1)},[i(M,{code:e.code,language:e.language,hljs:t(H),"show-line-numbers":e.showLineNumbers,"word-wrap":e.wordWrap,trim:e.trim,style:U(t(q)),onClick:a[0]||(a[0]=p=>k("click",p))},null,8,["code","language","hljs","show-line-numbers","word-wrap","trim","style"]),i(W,{name:"fade"},{default:o(()=>[t(L)&&!e.showHeader?(c(),u("div",ne,[i(j,{trigger:"hover"},{trigger:o(()=>[i(m,{size:"small",quaternary:"",onClick:C,loading:t(d),class:"copy-floating"},{icon:o(()=>[n("div",{class:h(t(d)?"i-mdi:loading animate-spin":"i-mdi:content-copy")},null,2)]),_:1},8,["loading"])]),default:o(()=>[a[5]||(a[5]=S(" 复制代码 ",-1))]),_:1})])):g("",!0)]),_:1})],32),t(b)?(c(),u("div",oe,[i(E,{size:"small"}),n("span",le,"正在加载 "+w(e.language)+" 语言包...",1)])):g("",!0)]),i(F,{show:t(r),"onUpdate:show":a[3]||(a[3]=p=>I(r)?r.value=p:null),"mask-closable":!1,"show-icon":!1,bordered:!1,style:{width:"100vw",height:"100vh",margin:"0",padding:"0"}},{default:o(()=>[n("div",ie,[n("div",se,[n("div",re,[t(f)?(c(),u("div",{key:0,class:h([t(f),"mr-2 text-16px"])},null,2)):g("",!0),n("span",null,w(e.title||N(e.language)),1)]),i(m,{size:"small",quaternary:"",onClick:y},{icon:o(()=>[...a[6]||(a[6]=[n("div",{class:"i-mdi:close"},null,-1)])]),_:1})]),n("div",de,[i(M,{code:e.code,language:e.language,hljs:t(H),"show-line-numbers":e.showLineNumbers,"word-wrap":e.wordWrap,trim:e.trim},null,8,["code","language","hljs","show-line-numbers","word-wrap","trim"])])])]),_:1},8,["show"])])}}}),ve=G(ce,[["__scopeId","data-v-b45e0a24"]]);export{ve as default};
