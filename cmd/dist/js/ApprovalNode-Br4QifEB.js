import{k as A,i as h,c as i,O as a,P as o,S as e,H as M,X as p,_ as n,F as N,W as w,Q as B}from"./vue-vendor-DIhTWhib.js";import{ax as F}from"./ui-vendor-qucRfopV.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";const P={class:"approval-node"},V={class:"node-header"},z={class:"node-title"},I={key:0,class:"node-badge"},R={key:1,class:"approval-mode-badge"},S={class:"node-content"},T={key:0,class:"approvers-list"},j={class:"approver-info"},q={class:"approver-avatar"},E={class:"approver-details"},H={class:"approver-name"},L={class:"approver-dept"},O={class:"approver-role"},Q={key:0,class:"more-count"},U={key:1,class:"placeholder"},W=A({__name:"ApprovalNode",props:{id:{},data:{}},setup(l){const r=l,u=h("showAddMenu"),v=h("deleteNode"),m=i(()=>r.data.approvers??[]),c=i(()=>m.value.length),g=i(()=>m.value.slice(0,3)),_=i(()=>Math.max(0,c.value-3)),k=s=>({any:"或签",all:"会签",sequence:"顺序"})[s]||"",f=s=>`https://ui-avatars.com/api/?name=${encodeURIComponent(s)}&background=random`,x=s=>{},y=s=>{s.stopPropagation();const t=s.currentTarget.getBoundingClientRect();u&&u({x:t.left+t.width/2,y:t.bottom+10},r.id)},C=s=>{s.stopPropagation(),v&&v(r.id)};return(s,t)=>{const b=F;return o(),a("div",P,[e("div",{class:M(["status-indicator",l.data.status])},null,2),e("div",{class:"delete-btn",onClick:C,title:"删除节点"},[...t[0]||(t[0]=[e("div",{class:"i-mdi:close w-3 h-3"},null,-1)])]),e("div",{class:"node-card",onClick:x},[e("div",V,[t[1]||(t[1]=e("div",{class:"node-icon"},[e("i",{class:"i-mdi:account text-white text-12px"})],-1)),e("span",z,n(l.data.title),1),c.value>0?(o(),a("div",I,n(c.value),1)):p("",!0),l.data.approvalMode?(o(),a("div",R,n(k(l.data.approvalMode)),1)):p("",!0)]),e("div",S,[c.value>0?(o(),a("div",T,[(o(!0),a(N,null,w(g.value,d=>(o(),a("div",{key:d.id,class:"approver-tag"},[e("div",j,[e("div",q,[B(b,{src:d.avatar,"fallback-src":f(d.name),size:"small"},null,8,["src","fallback-src"])]),e("div",E,[e("span",H,n(d.name),1),e("span",L,n(d.department),1),e("span",O,n(d.role),1)])])]))),128)),_.value>0?(o(),a("div",Q,"+"+n(_.value),1)):p("",!0)])):(o(),a("div",U,[...t[2]||(t[2]=[e("i",{class:"i-mdi:account-plus text-24px text-gray-400"},null,-1),e("span",null,"请设置审批人",-1)])]))])]),e("div",{class:"add-node-btn",onClick:y,title:"添加下一个节点"},[...t[3]||(t[3]=[e("i",{class:"i-mdi:plus text-16px font-bold"},null,-1)])])])}}}),J=D(W,[["__scopeId","data-v-5c89c162"]]);export{J as default};
