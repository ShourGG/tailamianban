import{H as P,aJ as F,a0 as X,M as W,X as K,aA as Q}from"./ui-vendor-Dblj447Y.js";import{r as $,c as I,k as Z,e as q,P as b,Q as x,R as u,U as e,Z as G,X as z,S as l,j as g,a2 as L,J as o,_ as v,F as A,M,H as Y}from"./vue-vendor-DgJqRHrX.js";import{_ as tt}from"./_plugin-vue_export-helper-DlAUqK2U.js";const et=()=>{const n="clipboard"in navigator,d=n&&"writeText"in navigator.clipboard,y=n&&"readText"in navigator.clipboard,p=window.isSecureContext||location.protocol==="https:"||location.hostname==="localhost"||location.hostname==="127.0.0.1";return{hasClipboard:n,hasWriteText:d,hasReadText:y,isSecureContext:p,isSupported:d&&p}},H={text:n=>String(n),url:n=>{const d=String(n).trim();return d?/^https?:\/\//i.test(d)?d:`https://${d}`:""},email:n=>String(n).trim(),phone:n=>{const d=String(n).replace(/[^\d+\-\s()]/g,"");return/^\d{11}$/.test(d.replace(/\D/g,""))?d.replace(/\D/g,"").replace(/(\d{3})(\d{4})(\d{4})/,"$1-$2-$3"):d},json:n=>{try{return typeof n=="string"?(JSON.parse(n),n):JSON.stringify(n,null,2)}catch{return String(n)}},html:n=>typeof n=="object"?`<pre><code>${JSON.stringify(n,null,2).replace(/</g,"&lt;").replace(/>/g,"&gt;")}</code></pre>`:String(n),markdown:n=>{if(typeof n=="object")return`\`\`\`json
${JSON.stringify(n,null,2)}
\`\`\``;const d=String(n);return/[`*_[\]()#+-]/.test(d)?`\`${d}\``:d},csv:n=>{if(Array.isArray(n)&&n.length>0){const d=new Set;n.forEach(f=>{typeof f=="object"&&f!==null&&Object.keys(f).forEach(h=>d.add(h))});const y=Array.from(d),p=y.map(f=>`"${f}"`).join(","),k=n.map(f=>y.map(h=>{const E=f&&typeof f=="object"?f[h]:"";return`"${String(E||"").replace(/"/g,'""')}"`}).join(","));return[p,...k].join(`
`)}return String(n)},code:n=>typeof n=="object"?JSON.stringify(n,null,2):String(n).trim()};function ot(n={}){const d=P(),y=et(),p=$({loading:!1,lastCopied:"",copyCount:0,lastCopyTime:null,isSupported:y.isSupported}),k=I(()=>p.value.isSupported||typeof document<"u"&&document.execCommand),f=I(()=>p.value.lastCopyTime?Date.now()-p.value.lastCopyTime.getTime()<2e3:!1),h=(s,i)=>{if(i.formatter)return i.formatter(s);if(i.dataType&&i.formatData!==!1){const a=H[i.dataType];return a?a(s):String(s)}return String(s)},E=(s,i,a)=>{if(a.showMessage===!1)return;const r={success:a.successTip||`复制成功: ${i.slice(0,30)}${i.length>30?"...":""}`,error:a.errorTip||"复制失败，请重试"};d[s](r[s])},J=s=>{p.value.lastCopied=s,p.value.copyCount++,p.value.lastCopyTime=new Date},m=async s=>{try{return await navigator.clipboard.writeText(s),{success:!0,text:s,method:"native-api"}}catch(i){if(i instanceof DOMException){if(i.name==="NotAllowedError")throw new Error("复制功能被浏览器阻止，请检查权限设置");if(i.name==="NotSupportedError")throw new Error("当前浏览器不支持复制功能")}throw new Error(`复制失败: ${i.message}`)}},N=async s=>new Promise((i,a)=>{try{const r=document.createElement("textarea");r.value=s,Object.assign(r.style,{position:"fixed",left:"-9999px",top:"-9999px",opacity:"0",pointerEvents:"none"}),document.body.appendChild(r),r.focus(),r.select(),r.setSelectionRange(0,s.length);const j=document.execCommand("copy");document.body.removeChild(r),j?i({success:!0,text:s,method:"legacy-fallback"}):a(new Error("execCommand 复制失败"))}catch(r){a(new Error(`降级复制失败: ${r.message}`))}}),C=async(s,i={})=>{if(!k.value){const a=new Error("当前环境不支持复制功能");throw i.onError?.(a),a}p.value.loading=!0;try{const a={...n,...i},r=h(s,a);let j;if(y.isSupported)try{j=await m(r)}catch{j=await N(r)}else j=await N(r);return J(r),E("success",r,a),a.onSuccess?.(r),j}catch(a){const r=a;return E("error",r.message,i),i.onError?.(r),{success:!1,text:"",error:r.message,method:p.value.isSupported?"native-api":"legacy-fallback"}}finally{p.value.loading=!1}},_=async(s,i)=>C(s,{dataType:"text",successTip:i}),O=async(s,i=!0)=>C(s,{dataType:"json",formatData:i,successTip:"JSON 数据复制成功"}),S=async s=>C(s,{dataType:"url",successTip:"链接复制成功"}),D=async(s,i)=>C(s,{dataType:"code",successTip:`${i||""}代码复制成功`}),R=async()=>{if(!y.hasReadText)throw new Error("当前浏览器不支持读取剪贴板");try{return await navigator.clipboard.readText()}catch(s){throw s instanceof DOMException&&s.name==="NotAllowedError"?new Error("读取剪贴板权限被拒绝"):new Error(`读取剪贴板失败: ${s.message}`)}},B=async(s,i)=>{if(!y.isSupported)return _(i||s.replace(/<[^>]*>/g,""));try{const a=new ClipboardItem({"text/html":new Blob([s],{type:"text/html"}),"text/plain":new Blob([i||s.replace(/<[^>]*>/g,"")],{type:"text/plain"})});return await navigator.clipboard.write([a]),J(s),{success:!0,text:s,method:"native-api"}}catch(a){throw new Error(`富文本复制失败: ${a.message}`)}},w=()=>{p.value.lastCopied="",p.value.copyCount=0,p.value.lastCopyTime=null},t=()=>y;return{state:I(()=>p.value),canCopy:k,recentlyCopied:f,copy:C,copyText:_,copyJSON:O,copyURL:S,copyCode:D,readClipboard:R,copyRichText:B,clearHistory:w,checkSupport:t,formatters:H}}const U="这是一段演示文本，用于测试复制功能。",st=["https://www.github.com","www.google.com","localhost:3000","https://api.example.com/users"],nt=[{label:"用户信息",data:{id:1,name:"张三",email:"zhangsan@example.com",roles:["user","admin"]}},{label:"配置对象",data:{theme:"dark",language:"zh-CN",notifications:!0,features:{darkMode:!0,animations:!1}}},{label:"数组数据",data:[{id:1,name:"商品A",price:99.99},{id:2,name:"商品B",price:149.99},{id:3,name:"商品C",price:199.99}]}],at=[{language:"JavaScript",content:`const useCopy = () => {
  const copy = async (text) => {
    await navigator.clipboard.writeText(text)
    console.log('复制成功')
  }
  return { copy }
}`},{language:"CSS",content:`.copy-button {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 12px 16px;
  background: #007bff;
  color: white;
  border: none;
  border-radius: 6px;
  cursor: pointer;
}`},{language:"Vue",content:`<template>
  <NButton @click="handleCopy">
    <template #icon>
      <i class="i-mdi:content-copy" />
    </template>
    复制内容
  </NButton>
</template>`}],V=[{id:1,name:"张三",age:25,department:"技术部",salary:8e3},{id:2,name:"李四",age:30,department:"产品部",salary:9e3},{id:3,name:"王五",age:28,department:"设计部",salary:7500},{id:4,name:"赵六",age:32,department:"运营部",salary:8500}],lt=[{title:"ID",key:"id",width:60},{title:"姓名",key:"name",width:100},{title:"年龄",key:"age",width:80},{title:"部门",key:"department",width:120},{title:"薪资",key:"salary",width:100}],it=[{type:"email",label:"邮箱地址",value:"contact@example.com",icon:"i-mdi:email"},{type:"phone",label:"联系电话",value:"13800138000",icon:"i-mdi:phone"},{type:"address",label:"公司地址",value:"北京市朝阳区某某大厦1008室",icon:"i-mdi:map-marker"}],rt={class:"copy-demo-container"},ct={class:"copy-examples"},dt={class:"copy-item"},ut={class:"copy-item"},pt={class:"copy-content"},mt={class:"copy-examples"},yt={class:"copy-item"},ft={class:"url-examples"},gt={class:"url-text"},vt={class:"json-section"},Ct={class:"json-input-area"},St={class:"json-actions"},wt={class:"json-examples"},xt={class:"json-label"},bt={class:"json-preview"},_t={class:"code-examples"},Tt={class:"code-header"},kt={class:"code-language"},Nt={class:"code-content"},jt={class:"csv-section"},ht={class:"csv-actions"},Et={class:"contact-examples"},Ot={class:"contact-info"},$t={class:"contact-details"},Jt={class:"contact-label"},Dt={class:"contact-value"},At={class:"advanced-features"},Mt={class:"feature-item"},Rt={key:0,class:"clipboard-result"},Bt={class:"result-content"},It={class:"feature-item"},Lt={class:"last-copied"},Vt={class:"last-copied-content"},zt={class:"last-copied-meta"},Ht=Z({__name:"index",setup(n){const{state:d,copy:y,copyText:p,copyJSON:k,copyURL:f,copyCode:h,readClipboard:E,clearHistory:J}=ot({showMessage:!0}),m=q({}),N=$("Hello, World!"),C=$("www.example.com"),_=$('{"name": "张三", "age": 25, "city": "北京"}'),O=$(""),S=async(w,t)=>{if(!(t.includes("text")&&!N.value.trim())&&!(t.includes("url")&&!C.value.trim())){m[t]=!0;try{await w()}finally{m[t]=!1}}},D=async(w,t)=>{if(_.value.trim()){m[t]=!0;try{const s=JSON.parse(_.value);await k(s,w)}catch{await p(_.value,"JSON 文本复制成功")}finally{m[t]=!1}}},R=async()=>{m.readClipboard=!0;try{const w=await E();O.value=w}catch{}finally{m.readClipboard=!1}},B=w=>w.toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"});return(w,t)=>{const s=F,i=X,a=W,r=K,j=Q;return x(),b("div",rt,[u(s,{class:"demo-title"},{default:l(()=>[...t[10]||(t[10]=[g(" 复制 Text - [useCopy] 场景示例 ",-1)])]),_:1}),t[40]||(t[40]=e("p",{class:"mb-20px"}," 基于原生 Clipboard API 封装的 useCopy Hook 演示 ",-1)),u(r,{class:"demo-section",title:"基础文本复制"},{default:l(()=>[e("div",ct,[e("div",dt,[u(i,{value:o(N),"onUpdate:value":t[0]||(t[0]=c=>L(N)?N.value=c:null),placeholder:"输入要复制的文本",class:"copy-input"},null,8,["value"]),u(a,{type:"primary",loading:o(m).text,onClick:t[1]||(t[1]=()=>S(()=>o(p)(o(N),"自定义文本复制成功！"),"text"))},{icon:l(()=>[...t[11]||(t[11]=[e("i",{class:"i-mdi:content-copy"},null,-1)])]),default:l(()=>[t[12]||(t[12]=g(" 复制文本 ",-1))]),_:1},8,["loading"])]),e("div",ut,[e("div",pt,v(o(U)),1),u(a,{type:"default",loading:o(m).demoText,onClick:t[2]||(t[2]=()=>S(()=>o(p)(o(U),"示例文本复制成功！"),"demoText"))},{icon:l(()=>[...t[13]||(t[13]=[e("i",{class:"i-mdi:text"},null,-1)])]),default:l(()=>[t[14]||(t[14]=g(" 复制示例文本 ",-1))]),_:1},8,["loading"])])])]),_:1}),u(r,{class:"demo-section",title:"URL 链接复制"},{default:l(()=>[e("div",mt,[e("div",yt,[u(i,{value:o(C),"onUpdate:value":t[3]||(t[3]=c=>L(C)?C.value=c:null),placeholder:"输入网址（自动添加协议）",class:"copy-input"},null,8,["value"]),u(a,{type:"info",loading:o(m).url,onClick:t[4]||(t[4]=()=>S(()=>o(f)(o(C)),"url"))},{icon:l(()=>[...t[15]||(t[15]=[e("i",{class:"i-mdi:link"},null,-1)])]),default:l(()=>[t[16]||(t[16]=g(" 复制链接 ",-1))]),_:1},8,["loading"])]),e("div",ft,[(x(!0),b(A,null,M(o(st),c=>(x(),b("div",{key:c,class:"url-item"},[e("span",gt,v(c),1),u(a,{size:"small",type:"info",loading:o(m)[`url-${c}`],onClick:()=>S(()=>o(f)(c),`url-${c}`)},{icon:l(()=>[...t[17]||(t[17]=[e("i",{class:"i-mdi:link-variant"},null,-1)])]),_:1},8,["loading","onClick"])]))),128))])])]),_:1}),u(r,{class:"demo-section",title:"JSON 数据复制"},{default:l(()=>[e("div",vt,[e("div",Ct,[u(i,{value:o(_),"onUpdate:value":t[5]||(t[5]=c=>L(_)?_.value=c:null),type:"textarea",placeholder:"输入 JSON 数据",rows:6,class:"json-textarea"},null,8,["value"]),e("div",St,[u(a,{type:"success",loading:o(m).jsonFormatted,onClick:t[6]||(t[6]=()=>D(!0,"jsonFormatted"))},{icon:l(()=>[...t[18]||(t[18]=[e("i",{class:"i-mdi:code-json"},null,-1)])]),default:l(()=>[t[19]||(t[19]=g(" 复制格式化 JSON ",-1))]),_:1},8,["loading"]),u(a,{type:"default",loading:o(m).jsonCompressed,onClick:t[7]||(t[7]=()=>D(!1,"jsonCompressed"))},{icon:l(()=>[...t[20]||(t[20]=[e("i",{class:"i-mdi:code-braces"},null,-1)])]),default:l(()=>[t[21]||(t[21]=g(" 复制压缩 JSON ",-1))]),_:1},8,["loading"])])]),e("div",wt,[t[24]||(t[24]=e("h4",null,"预设示例：",-1)),(x(!0),b(A,null,M(o(nt),(c,T)=>(x(),b("div",{key:T,class:"json-example"},[e("div",xt,v(c.label),1),e("pre",bt,v(JSON.stringify(c.data,null,2)),1),u(a,{size:"small",type:"success",loading:o(m)[`json-${T}`],onClick:()=>S(()=>o(k)(c.data),`json-${T}`)},{icon:l(()=>[...t[22]||(t[22]=[e("i",{class:"i-mdi:content-copy"},null,-1)])]),default:l(()=>[t[23]||(t[23]=g(" 复制 ",-1))]),_:1},8,["loading","onClick"])]))),128))])])]),_:1}),u(r,{class:"demo-section",title:"代码片段复制"},{default:l(()=>[e("div",_t,[(x(!0),b(A,null,M(o(at),(c,T)=>(x(),b("div",{key:c.language,class:"code-example"},[e("div",Tt,[e("span",kt,v(c.language),1),u(a,{size:"small",type:"primary",loading:o(m)[`code-${T}`],onClick:()=>S(()=>o(h)(c.content,c.language),`code-${T}`)},{icon:l(()=>[...t[25]||(t[25]=[e("i",{class:"i-mdi:code-tags"},null,-1)])]),default:l(()=>[t[26]||(t[26]=g(" 复制代码 ",-1))]),_:1},8,["loading","onClick"])]),e("pre",Nt,v(c.content),1)]))),128))])]),_:1}),u(r,{class:"demo-section",title:"CSV 数据复制"},{default:l(()=>[e("div",jt,[u(j,{columns:o(lt),data:o(V),pagination:!1,size:"small",class:"csv-table"},null,8,["columns","data"]),e("div",ht,[u(a,{type:"warning",loading:o(m).csv,onClick:t[8]||(t[8]=()=>S(()=>o(y)(o(V),{dataType:"csv",successTip:"CSV 数据复制成功！"}),"csv"))},{icon:l(()=>[...t[27]||(t[27]=[e("i",{class:"i-mdi:file-delimited"},null,-1)])]),default:l(()=>[t[28]||(t[28]=g(" 复制为 CSV ",-1))]),_:1},8,["loading"]),u(a,{type:"info",loading:o(m).csvJson,onClick:t[9]||(t[9]=()=>S(()=>o(k)(o(V)),"csvJson"))},{icon:l(()=>[...t[29]||(t[29]=[e("i",{class:"i-mdi:code-json"},null,-1)])]),default:l(()=>[t[30]||(t[30]=g(" 复制为 JSON ",-1))]),_:1},8,["loading"])])])]),_:1}),u(r,{class:"demo-section",title:"联系信息复制"},{default:l(()=>[e("div",Et,[(x(!0),b(A,null,M(o(it),(c,T)=>(x(),b("div",{key:c.type,class:"contact-item"},[e("div",Ot,[e("i",{class:Y([c.icon,"contact-icon"])},null,2),e("div",$t,[e("div",Jt,v(c.label),1),e("div",Dt,v(c.value),1)])]),u(a,{type:c.type==="email"?"success":"info",size:"small",loading:o(m)[`contact-${T}`],onClick:()=>S(()=>o(y)(c.value,{dataType:c.type,successTip:`${c.label}复制成功！`}),`contact-${T}`)},{icon:l(()=>[...t[31]||(t[31]=[e("i",{class:"i-mdi:content-copy"},null,-1)])]),default:l(()=>[t[32]||(t[32]=g(" 复制 ",-1))]),_:1},8,["type","loading","onClick"])]))),128))])]),_:1}),u(r,{class:"demo-section",title:"高级功能"},{default:l(()=>[e("div",At,[e("div",Mt,[t[35]||(t[35]=e("div",{class:"feature-info"},[e("h4",null,"读取剪贴板"),e("p",null,"读取当前剪贴板中的内容（需要用户授权）")],-1)),u(a,{type:"default",loading:o(m).readClipboard,onClick:R},{icon:l(()=>[...t[33]||(t[33]=[e("i",{class:"i-mdi:clipboard-text"},null,-1)])]),default:l(()=>[t[34]||(t[34]=g(" 读取剪贴板 ",-1))]),_:1},8,["loading"])]),o(O)?(x(),b("div",Rt,[t[36]||(t[36]=e("div",{class:"result-label"},"剪贴板内容：",-1)),e("div",Bt,v(o(O)),1)])):z("",!0),e("div",It,[t[39]||(t[39]=e("div",{class:"feature-info"},[e("h4",null,"清除复制历史"),e("p",null,"清除当前会话的复制历史记录")],-1)),u(a,{type:"error",onClick:o(J)},{icon:l(()=>[...t[37]||(t[37]=[e("i",{class:"i-mdi:delete"},null,-1)])]),default:l(()=>[t[38]||(t[38]=g(" 清除历史 ",-1))]),_:1},8,["onClick"])])])]),_:1}),o(d).lastCopied?(x(),G(r,{key:0,class:"demo-section",title:"最后复制的内容"},{default:l(()=>[e("div",Lt,[e("div",Vt,v(o(d).lastCopied.slice(0,200))+" "+v(o(d).lastCopied.length>200?"...":""),1),e("div",zt," 复制时间："+v(B(o(d).lastCopyTime)),1)])]),_:1})):z("",!0)])}}}),Xt=tt(Ht,[["__scopeId","data-v-ff4cf1e4"]]);export{Xt as default};
