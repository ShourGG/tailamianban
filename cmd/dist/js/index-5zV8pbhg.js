import{k as X,r as h,c as f,o as Z,O as d,P as l,Z as p,X as m,S as s,J as n,R as i,Q as r,a2 as P,_ as b,j as I,F as M,W as S,a6 as j,l as Y,v as ee,H as k,L as te}from"./vue-vendor-DIhTWhib.js";import{am as se,an as oe,a4 as ne,a5 as le,$ as ae,ao as ie,ap as re,M as ce}from"./ui-vendor-qucRfopV.js";import{_ as ue}from"./_plugin-vue_export-helper-DlAUqK2U.js";const de={class:"c-form-card"},fe={class:"config-controls"},pe={class:"config-item"},me={class:"flex items-center gap-2"},_e={class:"text-xs min-w-12"},ve={class:"config-item"},ge={class:"config-item"},ye={class:"config-item"},he={class:"flex items-center gap-3"},ke={key:0,class:"i-mdi-form-select text-lg text-blue-500"},we={class:"card-header"},xe={class:"header-info"},Ce={class:"header-text"},Ne={key:0},be={class:"header-actions"},ze={class:"field-stats"},Pe={class:"card-content"},De={key:0,class:"progress-section"},Be={class:"action-content"},Fe={class:"status-summary"},Ge={class:"status-item"},Ie={class:"progress-display"},Me={class:"text-sm min-w-12"},Se={class:"action-buttons"},$e=X({__name:"index",props:{formItems:{},layoutConfig:{default:()=>({})},options:{default:()=>[]},formData:{default:()=>({})}},setup($){const a=$,w=h(20),_=h(!0),v=h(!0),A=h(!0),x=h("vertical"),c=h({}),g=f(()=>a.layoutConfig?.card?.groups||[]),C=f(()=>g.value.length>0),O=f(()=>a.layoutConfig?.card?.showLayoutConfig??!0),W=f(()=>a.layoutConfig?.card?.showActionPanel??!0),q=f(()=>C.value?`layout-${x.value}`:"layout-single"),H=f(()=>{if(!C.value)return[];const t=new Map;return g.value.forEach(e=>{t.set(e.key,[])}),a.formItems.forEach((e,u)=>{const y=a.options?.[u]?.layout?.group||g.value[0]?.key||"default";t.has(y)||t.set(y,[]),t.get(y).push(e)}),g.value.map(e=>({config:e,items:t.get(e.key)||[]})).filter(e=>e.items.length>0)}),D=f(()=>{const t=Object.keys(c.value);return t.length>0&&t.every(e=>c.value[e])}),B=f(()=>{if(!a.options||a.options.length===0)return 0;const t=a.options.filter(e=>{const u=a.formData?.[e.prop||""];return E(u)}).length;return Math.round(t/a.options.length*100)}),E=t=>t==null?!1:Array.isArray(t)?t.length>0:typeof t=="string"?t.trim()!=="":!0,F=t=>a.options?a.options.filter(u=>u.layout?.group===t.config.key).filter(u=>{const N=a.formData?.[u.prop||""];return E(N)}).length:0,L=t=>{if(t.items.length===0)return 0;const e=F(t);return Math.round(e/t.items.length*100)},J=t=>{const e={basic:"i-mdi-account",contact:"i-mdi-phone",preferences:"i-mdi-cog",settings:"i-mdi-cog",info:"i-mdi-information",default:"i-mdi-form-select"};return e[t]||e.default},K=t=>{c.value[t]=!c.value[t]},Q=()=>{const t=!D.value;g.value.forEach(e=>{c.value[e.key]=t})};return Z(()=>{const t=a.layoutConfig?.card;t?.direction&&(x.value=t.direction),t?.showProgress!==void 0&&(A.value=t.showProgress),g.value.forEach(e=>{c.value[e.key]=!1})}),(t,e)=>{const u=se,N=oe,y=le,T=ne,z=ae,R=re,U=ce,V=ie;return l(),d("div",de,[n(C)&&n(O)?(l(),p(z,{key:0,class:"layout-config-panel",bordered:!1},{header:i(()=>[...e[4]||(e[4]=[s("div",{class:"flex items-center gap-2"},[s("div",{class:"i-mdi-cog text-lg"}),s("span",null,"布局配置")],-1)])]),default:i(()=>[s("div",fe,[s("div",pe,[e[5]||(e[5]=s("span",null,"卡片间距",-1)),s("div",me,[r(u,{value:n(w),"onUpdate:value":e[0]||(e[0]=o=>P(w)?w.value=o:null),min:12,max:32,step:4,class:"w-24"},null,8,["value"]),s("span",_e,b(n(w))+"px",1)])]),s("div",ve,[e[6]||(e[6]=s("span",null,"显示图标",-1)),r(N,{value:n(_),"onUpdate:value":e[1]||(e[1]=o=>P(_)?_.value=o:null),size:"small"},null,8,["value"])]),s("div",ge,[e[7]||(e[7]=s("span",null,"可折叠",-1)),r(N,{value:n(v),"onUpdate:value":e[2]||(e[2]=o=>P(v)?v.value=o:null),size:"small"},null,8,["value"])]),s("div",ye,[e[10]||(e[10]=s("span",null,"布局方向",-1)),r(T,{value:n(x),"onUpdate:value":e[3]||(e[3]=o=>P(x)?x.value=o:null),size:"small"},{default:i(()=>[r(y,{value:"vertical"},{default:i(()=>[...e[8]||(e[8]=[I("垂直",-1)])]),_:1}),r(y,{value:"horizontal"},{default:i(()=>[...e[9]||(e[9]=[I("水平",-1)])]),_:1})]),_:1},8,["value"])])])]),_:1})):m("",!0),s("div",{class:k(["form-content",n(q)]),style:te({gap:`${n(w)}px`})},[n(C)?(l(!0),d(M,{key:1},S(n(H),o=>(l(),p(z,{key:o.config.key,class:k(["group-card",[`${o.config.key}-card`,{collapsed:n(v)&&n(c)[o.config.key]}]]),hoverable:""},{header:i(()=>[s("div",we,[s("div",xe,[n(_)&&o.config.icon?(l(),d("div",{key:0,class:k([o.config.icon,"card-icon"])},null,2)):n(_)?(l(),d("div",{key:1,class:k([J(o.config.key),"card-icon"])},null,2)):m("",!0),s("div",Ce,[s("h3",null,b(o.config.title),1),o.config.description?(l(),d("p",Ne,b(o.config.description),1)):m("",!0)])]),s("div",be,[s("div",ze,[r(R,{value:o.items.length,type:"info","show-zero":""},null,8,["value"]),r(R,{value:`${F(o)}/${o.items.length}`,type:F(o)===o.items.length?"success":"warning"},null,8,["value","type"])]),n(v)?(l(),p(U,{key:0,quaternary:"",circle:"",size:"small",onClick:G=>K(o.config.key)},{icon:i(()=>[s("div",{class:k(n(c)[o.config.key]?"i-mdi-chevron-down":"i-mdi-chevron-up")},null,2)]),_:2},1032,["onClick"])):m("",!0)])])]),default:i(()=>[Y(s("div",Pe,[n(A)?(l(),d("div",De,[r(V,{percentage:L(o),color:L(o)===100?"#52c41a":"#1890ff","show-indicator":!1,class:"mb-4"},null,8,["percentage","color"])])):m("",!0),(l(!0),d(M,null,S(o.items,G=>(l(),p(j(G),{key:G.key}))),128))],512),[[ee,!n(c)[o.config.key]]])]),_:2},1032,["class"]))),128)):(l(),p(z,{key:0,class:"single-card",hoverable:""},{header:i(()=>[s("div",he,[n(_)?(l(),d("div",ke)):m("",!0),e[11]||(e[11]=s("span",null,"表单信息",-1))])]),default:i(()=>[(l(!0),d(M,null,S($.formItems,o=>(l(),p(j(o),{key:o.key}))),128))]),_:1}))],6),n(C)&&n(W)?(l(),p(z,{key:1,class:"action-panel",bordered:!1},{default:i(()=>[s("div",Be,[s("div",Fe,[s("div",Ge,[e[12]||(e[12]=s("span",{class:"label"},"完成进度:",-1)),s("div",Ie,[r(V,{percentage:n(B),"show-indicator":!1,color:n(B)===100?"#52c41a":"#1890ff",class:"flex-1"},null,8,["percentage","color"]),s("span",Me,b(n(B))+"%",1)])])]),s("div",Se,[n(v)?(l(),p(U,{key:0,onClick:Q},{icon:i(()=>[s("div",{class:k(n(D)?"i-mdi-unfold-more-horizontal":"i-mdi-unfold-less-horizontal")},null,2)]),default:i(()=>[I(" "+b(n(D)?"展开全部":"折叠全部"),1)]),_:1})):m("",!0)])])]),_:1})):m("",!0)])}}}),Re=ue($e,[["__scopeId","data-v-452942ac"]]);export{Re as default};
