import{k as L,r as T,e as X,c as n,w as A,y as J,P as d,Q as r,Z as m,X as N,R as K,J as p,S as f,U as i,F as b,M as k,_ as w,a6 as I,s as C,j as S}from"./vue-vendor-DgJqRHrX.js";import{X as M,a4 as O,a5 as Q,a3 as R}from"./ui-vendor-Dblj447Y.js";import{_ as Z}from"./_plugin-vue_export-helper-DlAUqK2U.js";const q={class:"c-grid-layout"},H={class:"config-controls"},W={class:"config-label"},Y={class:"item-wrapper"},ee=L({__name:"index",props:{formItems:{},layoutConfig:{default:()=>({})},options:{default:()=>[]}},setup(x,{expose:G}){const u=x,_=T(!1),t=X({cols:24,gutter:16,responsive:!0}),c=n(()=>u.layoutConfig?.grid||{}),g=n(()=>c.value.showConfigPanel),P=n(()=>c.value.showStats),o=n(()=>({cols:g.value?t.cols:c.value.cols??24,gutter:g.value?t.gutter:c.value.gutter??16,responsive:g.value?t.responsive:c.value.responsive??!0})),z=n(()=>({cols:o.value.cols,xGap:o.value.gutter,yGap:o.value.gutter,responsive:o.value.responsive?"screen":"self"})),B=n(()=>[{key:"cols",label:"列数",component:"NInputNumber",value:n({get:()=>t.cols,set:e=>t.cols=e}),props:{min:1,max:48,size:"small"}},{key:"gutter",label:"间距",component:"NInputNumber",value:n({get:()=>t.gutter,set:e=>t.gutter=e}),props:{min:0,max:48,size:"small"}},{key:"responsive",label:"响应式",component:"NSwitch",value:n({get:()=>t.responsive,set:e=>t.responsive=e}),props:{size:"small"}}]),V=n(()=>`列数: ${o.value.cols} | 间距: ${o.value.gutter}px | 项目: ${u.formItems.length}个`),$=(e,s)=>String(e.key)||e.props?.path||`grid-item-${s}`,y=(e,s)=>{const a=u.options?.[e]?.layout;return a?.[s]??a?.grid?.[s]},D=()=>{const{cols:e}=o.value;return e<=12?e:e<=24?12:8},U=e=>{const s=y(e,"span"),a=y(e,"offset"),h=y(e,"suffix");return{span:typeof s=="number"&&s>0&&s<=o.value.cols?s:D(),offset:typeof a=="number"&&a>=0&&a<o.value.cols?a:0,suffix:!!h}},j=()=>{_.value};return A(c,e=>{e.cols!==void 0&&(t.cols=e.cols),e.gutter!==void 0&&(t.gutter=e.gutter),e.responsive!==void 0&&(t.responsive=e.responsive)},{immediate:!0}),_.value&&J(()=>{u.options.length,u.formItems.length}),G({updateGridConfig:e=>Object.assign(t,e),getCurrentConfig:()=>({...o.value}),getGridInfo:()=>({...o.value,itemCount:u.formItems.length})}),(e,s)=>{const a=M,h=O,E=Q,F=R;return r(),d("div",q,[p(g)?(r(),m(a,{key:0,size:"small",bordered:!1,class:"config-panel"},{header:f(()=>[...s[0]||(s[0]=[i("div",{class:"config-header"},[i("span",{class:"i-mdi-view-grid"}),i("span",null,"网格配置")],-1)])]),default:f(()=>[i("div",H,[(r(!0),d(b,null,k(p(B),l=>(r(),d("div",{key:l.key,class:"config-item"},[i("span",W,w(l.label)+":",1),(r(),m(I(l.component),C({value:l.value,"onUpdate:value":v=>l.value=v},{ref_for:!0},l.props,{"onUpdate:value":j}),null,16,["value","onUpdate:value"]))]))),128))])]),_:1})):N("",!0),K(E,C(p(z),{class:"grid-container"}),{default:f(()=>[(r(!0),d(b,null,k(x.formItems,(l,v)=>(r(),m(h,C({key:$(l,v)},{ref_for:!0},U(v),{class:"grid-item"}),{default:f(()=>[i("div",Y,[(r(),m(I(l)))])]),_:2},1040))),128))]),_:1},16),p(P)&&p(_)?(r(),m(F,{key:1,type:"info","show-icon":!1,size:"small",class:"grid-stats"},{header:f(()=>[...s[1]||(s[1]=[i("span",{class:"i-mdi-information-outline"},null,-1),S(" 网格信息 ",-1)])]),default:f(()=>[S(" "+w(p(V)),1)]),_:1})):N("",!0)])}}}),ne=Z(ee,[["__scopeId","data-v-c1db6e6c"]]);export{ne as default};
