# ğŸ”§ ç™»å½•åä¸»é¡µç©ºç™½é—®é¢˜ä¿®å¤æŠ¥å‘Š - v1.2.0.15

## âŒ é—®é¢˜æè¿°
- **ç—‡çŠ¶**: ç™»å½•é¡µé¢æ­£å¸¸,ç™»å½•æˆåŠŸåè·³è½¬åˆ°ä¸»é¡µæ—¶é¡µé¢å®Œå…¨ç©ºç™½
- **å½±å“èŒƒå›´**: æ‰€æœ‰ç”¨æˆ·ç™»å½•åæ— æ³•ä½¿ç”¨ç³»ç»Ÿ
- **ä¸¥é‡ç¨‹åº¦**: ğŸ”´ ä¸¥é‡ - ç³»ç»Ÿæ ¸å¿ƒåŠŸèƒ½å®Œå…¨ä¸å¯ç”¨

## ğŸ” æ ¹æœ¬åŸå› 

### æ ¸å¿ƒé—®é¢˜: é”™è¯¯çš„è·¯ç”±é‡å®šå‘è·¯å¾„

**é—®é¢˜1**: `web/src/router/permission.ts` ç¬¬109è¡Œ
```typescript
// âŒ é”™è¯¯: é‡å®šå‘åˆ°ä¸å­˜åœ¨çš„è·¯ç”±
return '/home'
```

**é—®é¢˜2**: `web/src/views/login/index.vue` ç¬¬342è¡Œå’Œç¬¬400è¡Œ
```typescript
// âŒ é”™è¯¯: ç™»å½•æˆåŠŸåè·³è½¬åˆ°ä¸å­˜åœ¨çš„è·¯ç”±
router.push('/home')
```

### æ ¹æºåˆ†æ

æ ¹æ®é¡¹ç›®çš„åŠ¨æ€è·¯ç”±é…ç½® (`web/src/assets/data/dynamicRouter.json`):

1. **å®é™…çš„é¦–é¡µè·¯å¾„æ˜¯**: `/terraria/dashboard`
2. **ä¸å­˜åœ¨** `/home` è·¯ç”±
3. ç™»å½•æˆåŠŸå:
   - åŠ¨æ€è·¯ç”±åˆå§‹åŒ–æˆåŠŸ
   - å°è¯•è·³è½¬åˆ° `/home`
   - Vue Router æ‰¾ä¸åˆ°åŒ¹é…çš„è·¯ç”±
   - è§¦å‘ 404 fallback æˆ–æ¸²æŸ“ç©ºç™½é¡µ

## âœ… ä¿®å¤æ–¹æ¡ˆ

### ä¿®æ”¹ 1: ä¿®å¤è·¯ç”±å®ˆå«é‡å®šå‘

**æ–‡ä»¶**: `web/src/router/permission.ts`
**è¡Œå·**: 106-110

```typescript
// ä¿®æ”¹å‰
if (to.path === LOGIN_PATH) {
  return '/home'
}

// ä¿®æ”¹å
if (to.path === LOGIN_PATH) {
  return '/terraria/dashboard'
}
```

### ä¿®æ”¹ 2: ä¿®å¤ç™»å½•æˆåŠŸè·³è½¬

**æ–‡ä»¶**: `web/src/views/login/index.vue`
**è¡Œå·**: 342 å’Œ 400

```typescript
// ä¿®æ”¹å‰ (ç¬¬342è¡Œ)
router.push('/home')

// ä¿®æ”¹å
router.push('/terraria/dashboard')

// ä¿®æ”¹å‰ (ç¬¬400è¡Œ)
router.push('/home')

// ä¿®æ”¹å
router.push('/terraria/dashboard')
```

## ğŸ“‹ ä¿®å¤æ–‡ä»¶æ¸…å•

1. âœ… `web/src/router/permission.ts` - ä¿®å¤å·²ç™»å½•ç”¨æˆ·è®¿é—®ç™»å½•é¡µçš„é‡å®šå‘é€»è¾‘
2. âœ… `web/src/views/login/index.vue` - ä¿®å¤ç™»å½•å’Œæ³¨å†ŒæˆåŠŸåçš„è·³è½¬è·¯å¾„

## ğŸš€ éƒ¨ç½²æ­¥éª¤

### æ­¥éª¤ 1: é‡æ–°æ„å»ºå‰ç«¯
```bash
cd web
npm run build
```

### æ­¥éª¤ 2: å¤åˆ¶æ„å»ºäº§ç‰©
```bash
# Windows PowerShell
Copy-Item -Recurse -Force web\dist\* cmd\dist\

# Linux/Mac
cp -r web/dist/* cmd/dist/
```

### æ­¥éª¤ 3: é‡æ–°ç¼–è¯‘åç«¯
```bash
# Windows
go build -o terraria-panel.exe ./cmd/main.go

# Linux
go build -o terraria-panel-linux ./cmd/main.go
```

### æ­¥éª¤ 4: é‡å¯æœåŠ¡å™¨
```bash
# Windows
.\terraria-panel.exe

# Linux
./terraria-panel-linux
```

## âœ”ï¸ éªŒè¯æ¸…å•

- [ ] å‰ç«¯æ„å»ºæˆåŠŸ (`web/dist/` ç›®å½•å·²ç”Ÿæˆ)
- [ ] æ„å»ºäº§ç‰©å·²å¤åˆ¶åˆ° `cmd/dist/`
- [ ] åç«¯ç¨‹åºå·²é‡æ–°ç¼–è¯‘
- [ ] æœåŠ¡å™¨å¯åŠ¨æˆåŠŸ
- [ ] èƒ½æ­£å¸¸è®¿é—®ç™»å½•é¡µ `http://localhost:8080/login`
- [ ] ç™»å½•æˆåŠŸå**èƒ½æ­£å¸¸æ˜¾ç¤ºä¸»é¡µ**
- [ ] ä¸»é¡µæ˜¾ç¤ºæ³°æ‹‰ç‘äºšæœåŠ¡å™¨ç®¡ç†é¢æ¿
- [ ] ä¾§è¾¹æ èœå•æ­£å¸¸æ˜¾ç¤º

## ğŸ§ª æµ‹è¯•åœºæ™¯

### åœºæ™¯ 1: é¦–æ¬¡ç™»å½•
1. è®¿é—® `http://localhost:8080`
2. åº”è‡ªåŠ¨è·³è½¬åˆ° `/login`
3. è¾“å…¥ç”¨æˆ·åå’Œå¯†ç 
4. å®ŒæˆäººæœºéªŒè¯
5. ç‚¹å‡»ç™»å½•
6. âœ… **åº”æˆåŠŸè·³è½¬åˆ° `/terraria/dashboard` å¹¶æ˜¾ç¤ºä»ªè¡¨æ¿**

### åœºæ™¯ 2: å·²ç™»å½•çŠ¶æ€è®¿é—®ç™»å½•é¡µ
1. åœ¨å·²ç™»å½•çŠ¶æ€ä¸‹è®¿é—® `http://localhost:8080/login`
2. âœ… **åº”è‡ªåŠ¨é‡å®šå‘åˆ° `/terraria/dashboard`**

### åœºæ™¯ 3: ç›´æ¥è®¿é—®é¦–é¡µ
1. åœ¨å·²ç™»å½•çŠ¶æ€ä¸‹è®¿é—® `http://localhost:8080/`
2. âœ… **åº”æ­£å¸¸æ˜¾ç¤ºä»ªè¡¨æ¿,ä¸å†ç©ºç™½**

## ğŸ“Š å½±å“åˆ†æ

### å—å½±å“çš„åŠŸèƒ½
- âœ… ç”¨æˆ·ç™»å½•æµç¨‹
- âœ… ç”¨æˆ·æ³¨å†Œæµç¨‹
- âœ… å·²ç™»å½•ç”¨æˆ·çš„è·¯ç”±è®¿é—®

### ä¸å—å½±å“çš„åŠŸèƒ½
- âœ… API æ¥å£
- âœ… åç«¯æœåŠ¡é€»è¾‘
- âœ… æ•°æ®åº“æ“ä½œ
- âœ… WebSocket è¿æ¥

## ğŸ”’ é¢„é˜²æªæ–½

### å»ºè®®çš„æ”¹è¿›

1. **è·¯ç”±é…ç½®é›†ä¸­ç®¡ç†**
   ```typescript
   // å»ºè®®åœ¨ src/config/routes.ts ä¸­å®šä¹‰
   export const ROUTE_PATHS = {
     LOGIN: '/login',
     HOME: '/terraria/dashboard',
     DASHBOARD: '/terraria/dashboard'
   } as const
   ```

2. **æ·»åŠ è·¯ç”±å•å…ƒæµ‹è¯•**
   - æµ‹è¯•ç™»å½•åçš„é‡å®šå‘é€»è¾‘
   - æµ‹è¯•åŠ¨æ€è·¯ç”±åˆå§‹åŒ–
   - æµ‹è¯•æ‰€æœ‰è·¯ç”±è·¯å¾„æ˜¯å¦å­˜åœ¨

3. **æ·»åŠ è·¯ç”±ç›‘æ§**
   - åœ¨å¼€å‘ç¯å¢ƒè¾“å‡ºè¯¦ç»†çš„è·¯ç”±æ—¥å¿—
   - ç›‘æ§ 404 é”™è¯¯

## ğŸ“ ç‰ˆæœ¬ä¿¡æ¯

- **ä¿®å¤ç‰ˆæœ¬**: v1.2.0.15
- **ä¿®å¤æ—¥æœŸ**: 2025-10-03
- **ä¿®å¤ç±»å‹**: Bug Fix (Critical)
- **å½±å“èŒƒå›´**: å‰ç«¯è·¯ç”±ç³»ç»Ÿ

## ğŸ¯ éªŒè¯ç»“æœ

ä¿®å¤å,ç³»ç»Ÿåº”å…·å¤‡ä»¥ä¸‹è¡Œä¸º:

1. âœ… ç™»å½•æˆåŠŸåç«‹å³æ˜¾ç¤ºä¸»é¡µå†…å®¹
2. âœ… ä¸»é¡µæ˜¾ç¤ºå®Œæ•´çš„æ³°æ‹‰ç‘äºšç®¡ç†ç•Œé¢
3. âœ… ä¾§è¾¹æ èœå•å¯æ­£å¸¸å¯¼èˆª
4. âœ… æ‰€æœ‰è·¯ç”±è·³è½¬æ­£å¸¸å·¥ä½œ
5. âœ… ä¸å†å‡ºç°ç©ºç™½é¡µé¢

---

**ä¿®å¤å®Œæˆåè¯·æ‰§è¡Œå®Œæ•´çš„å›å½’æµ‹è¯•,ç¡®ä¿æ‰€æœ‰åŠŸèƒ½æ­£å¸¸è¿è¡Œã€‚**