import{k as b,i as h,c as i,Q as a,R as o,V as e,I as A,Y as p,$ as n,F as M,N as w,S as B}from"./vue-vendor-Bom1XEVO.js";import{a8 as F}from"./ui-vendor-D9aA433m.js";import{_ as V}from"./_plugin-vue_export-helper-DlAUqK2U.js";const D={class:"approval-node"},I={class:"node-header"},R={class:"node-title"},z={key:0,class:"node-badge"},P={key:1,class:"approval-mode-badge"},S={class:"node-content"},T={key:0,class:"approvers-list"},$={class:"approver-info"},j={class:"approver-avatar"},q={class:"approver-details"},E={class:"approver-name"},L={class:"approver-dept"},Q={class:"approver-role"},U={key:0,class:"more-count"},Y={key:1,class:"placeholder"},G=b({__name:"ApprovalNode",props:{id:{},data:{}},setup(l){const r=l,u=h("showAddMenu"),v=h("deleteNode"),m=i(()=>r.data.approvers??[]),c=i(()=>m.value.length),g=i(()=>m.value.slice(0,3)),_=i(()=>Math.max(0,c.value-3)),k=s=>({any:"或签",all:"会签",sequence:"顺序"})[s]||"",f=s=>`https://ui-avatars.com/api/?name=${encodeURIComponent(s)}&background=random`,x=s=>{},y=s=>{s.stopPropagation();const t=s.currentTarget.getBoundingClientRect();u&&u({x:t.left+t.width/2,y:t.bottom+10},r.id)},C=s=>{s.stopPropagation(),v&&v(r.id)};return(s,t)=>{const N=F;return o(),a("div",D,[e("div",{class:A(["status-indicator",l.data.status])},null,2),e("div",{class:"delete-btn",onClick:C,title:"删除节点"},[...t[0]||(t[0]=[e("div",{class:"i-mdi:close w-3 h-3"},null,-1)])]),e("div",{class:"node-card",onClick:x},[e("div",I,[t[1]||(t[1]=e("div",{class:"node-icon"},[e("i",{class:"i-mdi:account text-white text-12px"})],-1)),e("span",R,n(l.data.title),1),c.value>0?(o(),a("div",z,n(c.value),1)):p("",!0),l.data.approvalMode?(o(),a("div",P,n(k(l.data.approvalMode)),1)):p("",!0)]),e("div",S,[c.value>0?(o(),a("div",T,[(o(!0),a(M,null,w(g.value,d=>(o(),a("div",{key:d.id,class:"approver-tag"},[e("div",$,[e("div",j,[B(N,{src:d.avatar,"fallback-src":f(d.name),size:"small"},null,8,["src","fallback-src"])]),e("div",q,[e("span",E,n(d.name),1),e("span",L,n(d.department),1),e("span",Q,n(d.role),1)])])]))),128)),_.value>0?(o(),a("div",U,"+"+n(_.value),1)):p("",!0)])):(o(),a("div",Y,[...t[2]||(t[2]=[e("i",{class:"i-mdi:account-plus text-24px text-gray-400"},null,-1),e("span",null,"请设置审批人",-1)])]))])]),e("div",{class:"add-node-btn",onClick:y,title:"添加下一个节点"},[...t[3]||(t[3]=[e("i",{class:"i-mdi:plus text-16px font-bold"},null,-1)])])])}}}),O=V(G,[["__scopeId","data-v-5c89c162"]]);export{O as default};
