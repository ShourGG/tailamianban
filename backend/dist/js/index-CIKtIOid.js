import g from"./index-gzm7A0xy.js";import{e as A}from"./index-DecMlK-y.js";import{u as E}from"./useTableData-Yf8um1-S.js";import{m as d,k as B,e as M,r as K,Q as U,R as C,S as i,U as n,j as o,K as t,_ as h,Y as S}from"./vue-vendor-Bom1XEVO.js";import{S as q,aO as P,L as T,U as V,ah as G,J as H,K as Q,Q as X,P as D,an as J}from"./ui-vendor-D9aA433m.js";import"./charts-vendor-PiKWrtPe.js";import"./index-DP8QyUpt.js";import"./iconify-W0kOH8CK.js";import"./index-Chx56wke.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./TableEditModal-Dtq4AZzf.js";import"./index.vue_vue_type_script_setup_true_lang-BnsbD_S9.js";import"./index-ikUMOiiF.js";import"./editor-vendor-CufumsHQ.js";import"./spline-vendor-C3Tmx0e7.js";import"./data-Cv884YeX.js";const O=r=>A("/employees/expandList",{params:r}),Y={enableSelection:!0,enableChildSelection:!0,parentChildLinkMode:"loose"},k={project:[{type:"index",title:"序号",width:50},{key:"project",title:"项目名称",width:150},{key:"progress",title:"进度",width:100},{key:"status",title:"状态",width:100}],requirement:[{type:"index",title:"序号",width:50},{key:"requirement",title:"需求名称",width:150},{key:"priority",title:"优先级",width:100},{key:"status",title:"状态",width:100}],service:[{type:"index",title:"序号",width:50},{key:"service",title:"服务名称",width:150},{key:"version",title:"版本",width:100},{key:"status",title:"状态",width:100}]},F=r=>"project"in r?k.project:"requirement"in r?k.requirement:"service"in r?k.service:k.project,I=[{type:"index",title:"序号",width:50},{type:"selection"},{type:"expand"},{key:"name",title:"姓名",width:120},{key:"department",title:"部门",width:120},{key:"role",title:"角色",width:150},{key:"status",title:"状态",width:100,render:r=>{const l=r;return d(q,{type:l.status==="在职"?"success":"error",size:"small"},()=>l.status)}}],W={class:"p-6 min-h-screen bg-gray-1"},ke=B({__name:"index",setup(r){const l=M({...Y}),u=K(),{tableData:v,loading:b,refresh:x}=E(O),z=s=>s.id,L=s=>s.hasChildren,N=s=>s.status==="在职",R=async s=>{try{return await new Promise(e=>setTimeout(e,300)),s.childData||[]}catch{return[]}},$=(s,e,_)=>{const c=s;if(_)return d("div",{class:"flex justify-center items-center py-4"},[d(J,{size:"small"}),d("span",{class:"ml-2"},"加载中...")]);if(!e?.length)return d("div",{class:"text-center py-4 text-gray-4"},"暂无数据");const f=F(e[0]);return d("div",{class:"p-4 bg-gray-50"},[d("div",{class:"mb-2 text-sm text-gray-6"},`${c.name} 的详细信息 (${e.length} 条)`),d(g,{data:e,columns:f,size:"small",striped:!0,rowKey:p=>p.id,enableSelection:l.enableChildSelection,showRowActions:!1,pagination:!1,scrollX:400})])};return(s,e)=>{const _=P,c=G,f=Q,p=V,j=H,y=T,m=D,w=X;return C(),U("div",W,[i(_,null,{default:n(()=>[...e[8]||(e[8]=[o("嵌套表格场景示例",-1)])]),_:1}),i(p,{vertical:"",size:"large"},{default:n(()=>[i(y,{title:"功能配置",size:"small",class:"shadow-md"},{default:n(()=>[i(p,null,{default:n(()=>[i(c,{checked:t(l).enableSelection,"onUpdate:checked":e[0]||(e[0]=a=>t(l).enableSelection=a)},{default:n(()=>[...e[9]||(e[9]=[o(" 启用父表格选择 ",-1)])]),_:1},8,["checked"]),i(c,{checked:t(l).enableChildSelection,"onUpdate:checked":e[1]||(e[1]=a=>t(l).enableChildSelection=a)},{default:n(()=>[...e[10]||(e[10]=[o(" 启用子表格选择 ",-1)])]),_:1},8,["checked"]),i(j,{value:t(l).parentChildLinkMode,"onUpdate:value":e[2]||(e[2]=a=>t(l).parentChildLinkMode=a),disabled:!t(l).enableSelection||!t(l).enableChildSelection},{default:n(()=>[i(p,null,{default:n(()=>[i(f,{value:"strict"},{default:n(()=>[...e[11]||(e[11]=[o("严格模式（子表格全选才选中父行）",-1)])]),_:1}),i(f,{value:"loose"},{default:n(()=>[...e[12]||(e[12]=[o("宽松模式（子表格有选中就选中父行）",-1)])]),_:1})]),_:1})]),_:1},8,["value","disabled"])]),_:1})]),_:1}),i(y,{title:"批量操作",size:"small",class:"shadow-md"},{default:n(()=>[i(p,null,{default:n(()=>[i(w,null,{default:n(()=>[i(m,{onClick:e[3]||(e[3]=a=>t(u)?.expandAll()),type:"primary",size:"small"},{default:n(()=>[...e[13]||(e[13]=[o(" 全部展开 ",-1)])]),_:1}),i(m,{onClick:e[4]||(e[4]=a=>t(u)?.collapseAll()),size:"small"},{default:n(()=>[...e[14]||(e[14]=[o(" 全部折叠 ",-1)])]),_:1})]),_:1}),t(l).enableSelection?(C(),h(w,{key:0},{default:n(()=>[i(m,{onClick:e[5]||(e[5]=a=>t(u)?.selectAll()),type:"success",size:"small"},{default:n(()=>[...e[15]||(e[15]=[o(" 父表格全选 ",-1)])]),_:1}),i(m,{onClick:e[6]||(e[6]=a=>t(u)?.clearSelection()),size:"small"},{default:n(()=>[...e[16]||(e[16]=[o(" 父表格清空 ",-1)])]),_:1})]),_:1})):S("",!0),t(l).enableSelection||t(l).enableChildSelection?(C(),h(m,{key:1,onClick:e[7]||(e[7]=a=>t(u)?.clearAllSelections()),type:"error",size:"small"},{default:n(()=>[...e[17]||(e[17]=[o(" 清空所有选择 ",-1)])]),_:1})):S("",!0),i(m,{onClick:t(x),type:"info",size:"small",loading:t(b)},{default:n(()=>[...e[18]||(e[18]=[o(" 刷新数据 ",-1)])]),_:1},8,["onClick","loading"])]),_:1})]),_:1}),i(y,{title:"主数据表格",class:"shadow-md"},{default:n(()=>[i(g,{ref_key:"tableRef",ref:u,columns:t(I),data:t(v),rowKey:z,loading:t(b),size:"small",striped:"",expandable:"",enableSelection:t(l).enableSelection,enableChildSelection:t(l).enableChildSelection,enableParentChildLink:t(l).enableSelection&&t(l).enableChildSelection,parentChildLinkMode:t(l).parentChildLinkMode,onLoadExpandData:R,renderExpandContent:$,rowExpandable:L,rowCheckable:N,showRowActions:!1,scrollX:600},null,8,["columns","data","loading","enableSelection","enableChildSelection","enableParentChildLink","parentChildLinkMode"])]),_:1})]),_:1})])}}});export{ke as default};
