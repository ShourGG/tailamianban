import{k as C,r as g,c as m,w as A,Q as v,R as p,S as T,V as N,s as h,K as r,a3 as S}from"./vue-vendor-Bom1XEVO.js";import{aw as V}from"./ui-vendor-D9aA433m.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";const I={class:"c-time-wrapper"},K={key:0,class:"time-range-container"},Q={key:1,class:"time-single-container"},j=C({__name:"index",props:{mode:{default:"range"},startPlaceholder:{default:"请选择开始时间"},endPlaceholder:{default:"请选择结束时间"},placeholder:{default:"请选择时间"},format:{default:"HH:mm"},useHours:{type:Boolean,default:!0},useMinutes:{type:Boolean,default:!0},useSeconds:{type:Boolean,default:!1},hourStep:{default:1},minuteStep:{default:30},secondStep:{default:1},startTimeProps:{default:()=>({})},endTimeProps:{default:()=>({})},attrs:{default:()=>({})},defaultStartTime:{default:null},defaultEndTime:{default:null},defaultSingleTime:{default:null},enableTimeRestriction:{type:Boolean,default:!1}},emits:["change-range","change-single","change-start","change-end"],setup(u,{expose:b,emit:E}){const t=u,d=E,a=g(t.defaultStartTime),s=g(t.defaultEndTime),i=g(t.defaultSingleTime),c=m(()=>t.useSeconds?t.format.includes("ss")?t.format:"HH:mm:ss":t.format),D=m(()=>t.mode==="range"&&!a.value),_=m(()=>({...t.attrs,...t.startTimeProps})),w=m(()=>({...t.attrs,...t.endTimeProps})),H=m(()=>({...t.attrs})),P=e=>{a.value=e,e?t.enableTimeRestriction&&s.value&&s.value<=e&&(s.value=null):s.value=null,d("change-start",e),t.mode==="range"&&d("change-range",e,s.value)},B=e=>{if(!a.value)return!1;const l=new Date(a.value).getHours();return e<l},R=(e,n)=>{if(!a.value||n===null)return!1;const l=new Date(a.value),o=l.getHours(),f=l.getMinutes();return n===o?e<f:!1},k=(e,n,l)=>{if(!a.value||!t.useSeconds||l===null||n===null)return!1;const o=new Date(a.value),f=o.getHours(),x=o.getMinutes(),M=o.getSeconds();return l===f&&n===x?e<=M:!1},y=e=>{s.value=e,d("change-end",e),t.mode==="range"&&d("change-range",a.value,e)},U=e=>{i.value=e,d("change-single",e)};return A(()=>t.mode,()=>{a.value=t.defaultStartTime,s.value=t.defaultEndTime,i.value=t.defaultSingleTime}),b({reset:()=>{a.value=null,s.value=null,i.value=null},setStartTime:e=>{a.value=e},setEndTime:e=>{s.value=e},setSingleTime:e=>{i.value=e},getStartTime:()=>a.value,getEndTime:()=>s.value,getSingleTime:()=>i.value}),(e,n)=>{const l=V;return p(),v("div",I,[u.mode==="range"?(p(),v("div",K,[T(l,h({value:r(a),"onUpdate:value":n[0]||(n[0]=o=>S(a)?a.value=o:null),placeholder:u.startPlaceholder,format:r(c),actions:["now","confirm"]},r(_),{"onUpdate:value":P}),null,16,["value","placeholder","format"]),n[3]||(n[3]=N("span",{class:"range-separator"},"至",-1)),T(l,h({value:r(s),"onUpdate:value":n[1]||(n[1]=o=>S(s)?s.value=o:null),placeholder:u.endPlaceholder,format:r(c),actions:["now","confirm"],"is-hour-disabled":t.enableTimeRestriction?B:void 0,"is-minute-disabled":t.enableTimeRestriction?R:void 0,"is-second-disabled":t.enableTimeRestriction?k:void 0,disabled:r(D)},r(w),{"onUpdate:value":y}),null,16,["value","placeholder","format","is-hour-disabled","is-minute-disabled","is-second-disabled","disabled"])])):(p(),v("div",Q,[T(l,h({value:r(i),"onUpdate:value":n[2]||(n[2]=o=>S(i)?i.value=o:null),placeholder:u.placeholder,format:r(c),actions:["now","confirm"]},r(H),{"onUpdate:value":U}),null,16,["value","placeholder","format"])]))])}}}),$=F(j,[["__scopeId","data-v-8de4bec6"]]);export{$ as default};
