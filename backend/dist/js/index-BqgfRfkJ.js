import{k as F,r as K,e as T,c as n,w as Y,y as A,Q as d,R as r,_ as m,Y as x,S as O,K as p,U as f,V as i,F as b,N as k,$ as w,a7 as I,s as C,j as S}from"./vue-vendor-Bom1XEVO.js";import{L as Q,X as R,Y as W,W as X}from"./ui-vendor-lRdd6BJd.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";const H={class:"c-grid-layout"},J={class:"config-controls"},M={class:"config-label"},Z={class:"item-wrapper"},ee=F({__name:"index",props:{formItems:{},layoutConfig:{default:()=>({})},options:{default:()=>[]}},setup(N,{expose:G}){const u=N,_=K(!1),t=T({cols:24,gutter:16,responsive:!0}),c=n(()=>u.layoutConfig?.grid||{}),g=n(()=>c.value.showConfigPanel),V=n(()=>c.value.showStats),o=n(()=>({cols:g.value?t.cols:c.value.cols??24,gutter:g.value?t.gutter:c.value.gutter??16,responsive:g.value?t.responsive:c.value.responsive??!0})),$=n(()=>({cols:o.value.cols,xGap:o.value.gutter,yGap:o.value.gutter,responsive:o.value.responsive?"screen":"self"})),z=n(()=>[{key:"cols",label:"列数",component:"NInputNumber",value:n({get:()=>t.cols,set:e=>t.cols=e}),props:{min:1,max:48,size:"small"}},{key:"gutter",label:"间距",component:"NInputNumber",value:n({get:()=>t.gutter,set:e=>t.gutter=e}),props:{min:0,max:48,size:"small"}},{key:"responsive",label:"响应式",component:"NSwitch",value:n({get:()=>t.responsive,set:e=>t.responsive=e}),props:{size:"small"}}]),B=n(()=>`列数: ${o.value.cols} | 间距: ${o.value.gutter}px | 项目: ${u.formItems.length}个`),P=(e,s)=>String(e.key)||e.props?.path||`grid-item-${s}`,y=(e,s)=>{const a=u.options?.[e]?.layout;return a?.[s]??a?.grid?.[s]},D=()=>{const{cols:e}=o.value;return e<=12?e:e<=24?12:8},U=e=>{const s=y(e,"span"),a=y(e,"offset"),h=y(e,"suffix");return{span:typeof s=="number"&&s>0&&s<=o.value.cols?s:D(),offset:typeof a=="number"&&a>=0&&a<o.value.cols?a:0,suffix:!!h}},L=()=>{_.value};return Y(c,e=>{e.cols!==void 0&&(t.cols=e.cols),e.gutter!==void 0&&(t.gutter=e.gutter),e.responsive!==void 0&&(t.responsive=e.responsive)},{immediate:!0}),_.value&&A(()=>{u.options.length,u.formItems.length}),G({updateGridConfig:e=>Object.assign(t,e),getCurrentConfig:()=>({...o.value}),getGridInfo:()=>({...o.value,itemCount:u.formItems.length})}),(e,s)=>{const a=Q,h=R,j=W,E=X;return r(),d("div",H,[p(g)?(r(),m(a,{key:0,size:"small",bordered:!1,class:"config-panel"},{header:f(()=>[...s[0]||(s[0]=[i("div",{class:"config-header"},[i("span",{class:"i-mdi-view-grid"}),i("span",null,"网格配置")],-1)])]),default:f(()=>[i("div",J,[(r(!0),d(b,null,k(p(z),l=>(r(),d("div",{key:l.key,class:"config-item"},[i("span",M,w(l.label)+":",1),(r(),m(I(l.component),C({value:l.value,"onUpdate:value":v=>l.value=v},{ref_for:!0},l.props,{"onUpdate:value":L}),null,16,["value","onUpdate:value"]))]))),128))])]),_:1})):x("",!0),O(j,C(p($),{class:"grid-container"}),{default:f(()=>[(r(!0),d(b,null,k(N.formItems,(l,v)=>(r(),m(h,C({key:P(l,v)},{ref_for:!0},U(v),{class:"grid-item"}),{default:f(()=>[i("div",Z,[(r(),m(I(l)))])]),_:2},1040))),128))]),_:1},16),p(V)&&p(_)?(r(),m(E,{key:1,type:"info","show-icon":!1,size:"small",class:"grid-stats"},{header:f(()=>[...s[1]||(s[1]=[i("span",{class:"i-mdi-information-outline"},null,-1),S(" 网格信息 ",-1)])]),default:f(()=>[S(" "+w(p(B)),1)]),_:1})):x("",!0)])}}}),ne=q(ee,[["__scopeId","data-v-c1db6e6c"]]);export{ne as default};
