import{P as i,R as N,_ as ne}from"./index.vue_vue_type_script_setup_true_lang-BnkEbK8L.js";import{u as se}from"./index-BZTNXJGj.js";import{aA as ue,U as ie,P as de,S as ce,L as pe,a1 as me,a0 as fe,T as ye}from"./ui-vendor-lRdd6BJd.js";import{k as he,aJ as $,aK as be,r as P,L as ge,c as V,o as ve,Q as R,R as k,S as o,_ as w,Y as _e,K as l,U as t,j as y,$ as v,V as j,F as Me,N as ke}from"./vue-vendor-Bom1XEVO.js";import{u as Fe}from"./index-COuCnG4I.js";import{_ as De}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-C3XsA_P_.js";import"./charts-vendor-CvHUaZlk.js";import"./editor-vendor-D83MfH0r.js";import"./index-CkMMG6vV.js";import"./spline-vendor-Cs6wJgUK.js";const q=[{type:"input",prop:"employeeId",label:"员工编号",placeholder:"请输入员工编号",rules:[i.required("员工编号"),i.pattern("员工编号",/^EMP\d{6}$/,"格式: EMP123456")],layout:{group:"basic"}},{type:"input",prop:"fullName",label:"姓名",placeholder:"请输入真实姓名",rules:N.username("姓名"),layout:{group:"basic"}},{type:"select",prop:"gender",label:"性别",placeholder:"请选择性别",rules:[i.required("性别")],children:[{value:"male",label:"男"},{value:"female",label:"女"}],layout:{group:"basic"}},{type:"datePicker",prop:"birthDate",label:"出生日期",placeholder:"请选择出生日期",rules:[i.required("出生日期")],layout:{group:"basic"}},{type:"input",prop:"phone",label:"手机号码",placeholder:"请输入手机号码",rules:N.mobile("手机号码"),layout:{group:"contact"}},{type:"input",prop:"email",label:"邮箱地址",placeholder:"请输入邮箱地址",rules:N.email("邮箱地址"),layout:{group:"contact"}},{type:"textarea",prop:"address",label:"居住地址",placeholder:"请输入详细地址",rules:[i.required("居住地址"),i.length("居住地址",10,200)],attrs:{rows:3},layout:{group:"contact"}},{type:"select",prop:"department",label:"所属部门",placeholder:"请选择部门",rules:[i.required("所属部门")],children:[{value:"tech",label:"技术部"},{value:"product",label:"产品部"},{value:"design",label:"设计部"},{value:"marketing",label:"市场部"},{value:"hr",label:"人事部"}],layout:{group:"job"}},{type:"select",prop:"position",label:"职位",placeholder:"请选择职位",rules:[i.required("职位")],children:[{value:"frontend",label:"前端工程师"},{value:"backend",label:"后端工程师"},{value:"fullstack",label:"全栈工程师"},{value:"ui",label:"UI设计师"},{value:"pm",label:"产品经理"}],layout:{group:"job"}},{type:"datePicker",prop:"joinDate",label:"入职日期",placeholder:"请选择入职日期",rules:[i.required("入职日期")],layout:{group:"job"}},{type:"inputNumber",prop:"salary",label:"薪资",placeholder:"请输入薪资",rules:[i.required("薪资"),i.range("薪资",3e3,5e4)],attrs:{min:3e3,max:5e4,precision:0},layout:{group:"job"}},{type:"checkbox",prop:"skills",label:"技能标签",rules:[i.required("技能标签")],children:[{value:"vue",label:"Vue.js"},{value:"react",label:"React"},{value:"node",label:"Node.js"},{value:"python",label:"Python"},{value:"java",label:"Java"},{value:"design",label:"设计能力"}],value:[],layout:{group:"other"}},{type:"rate",prop:"performance",label:"绩效评分",rules:[i.required("绩效评分")],attrs:{allowHalf:!0,count:5},value:0,layout:{group:"other"}},{type:"switch",prop:"isActive",label:"在职状态",value:!0,layout:{group:"other"}},{type:"textarea",prop:"remarks",label:"备注信息",placeholder:"请输入备注信息",attrs:{rows:4},layout:{group:"other"}}],L={employeeId:()=>`EMP${String(Math.floor(Math.random()*999999)).padStart(6,"0")}`,fullName:()=>["张三","李四","王五","赵六","钱七"][Math.floor(Math.random()*5)],gender:()=>Math.random()>.5?"male":"female",birthDate:()=>{const p=1990+Math.floor(Math.random()*10),m=Math.floor(Math.random()*12)+1,f=Math.floor(Math.random()*28)+1;return new Date(p,m-1,f).getTime()},phone:()=>`138${String(Math.floor(Math.random()*99999999)).padStart(8,"0")}`,email:()=>`user${Math.floor(Math.random()*9999)}@company.com`,address:()=>["北京市朝阳区某某街道123号","上海市浦东新区某某路456号","深圳市南山区某某大道789号"][Math.floor(Math.random()*3)],department:()=>["tech","product","design","marketing","hr"][Math.floor(Math.random()*5)],position:()=>["frontend","backend","fullstack","ui","pm"][Math.floor(Math.random()*5)],joinDate:()=>{const p=2020+Math.floor(Math.random()*5),m=Math.floor(Math.random()*12)+1,f=Math.floor(Math.random()*28)+1;return new Date(p,m-1,f).getTime()},salary:()=>Math.floor(Math.random()*47e3)+3e3,skills:()=>["vue","react","node"].slice(0,Math.floor(Math.random()*3)+1),performance:()=>Math.round((Math.random()*4+1)*2)/2,isActive:()=>Math.random()>.2,remarks:()=>"技术能力强，工作认真负责，团队合作能力佳。"},Se=p=>{const m={};return p.forEach(f=>{if(f.prop&&f.prop in L){const F=L[f.prop];m[f.prop]=typeof F=="function"?F():F}}),m},we=async p=>(await new Promise(m=>setTimeout(m,1500)),{code:"0",message:"员工信息提交成功",data:{id:Date.now(),employeeId:p.employeeId,status:"active",createdAt:new Date().toISOString()}}),je={class:"custom-layout-demo"},Ce={class:"json-display"},Oe={class:"json-display"},Ne=he({__name:"index",props:$({labelPlacement:{default:"top"},validateOnChange:{type:Boolean,default:!0}},{modelValue:{required:!0},modelModifiers:{}}),emits:$(["submit","validate-success","validate-error","fields-change"],["update:modelValue"]),setup(p,{expose:m,emit:f}){const F=p,D=f,h=be(p,"modelValue"),r=P(),n=ue(),d=P([]),{labelPlacement:U,validateOnChange:A}=ge(F),B=Fe(e=>{d.value=e,D("fields-change",e),e.length>0&&n.info(`字段更新: ${e.length} 个字段`)},200),I=e=>{B(e)},z=e=>{Object.assign(h.value,e)},J=e=>{D("validate-success",e),n.success("表单验证通过")},H=e=>{D("validate-error",e),n.error("表单验证失败，请检查填写内容")},K=e=>{D("submit",e)},C=()=>{if(r.value?.getModel&&typeof r.value.getModel=="function"){const e=r.value.getModel();if(e&&Object.keys(e).length>0)return e}return h.value},x=e=>{const s=C()[e];return!(s==null||s===""||Array.isArray(s)&&s.length===0)},c=V(()=>d.value.length>0),S=V(()=>{if(!c.value)return!1;const e=C();return Object.values(e).some(a=>a!=null&&a!==""&&!(Array.isArray(a)&&a.length===0))}),_=V(()=>{const e={};if(!c.value)return e;const a=C();return d.value.forEach(s=>{s.prop in a&&a[s.prop]!==void 0&&(e[s.prop]=a[s.prop])}),e}),{loading:Q,createSubmit:Y}=se(),G=Y(we,{successCode:"0",successMsg:"🎉 员工信息提交成功！"}),W=()=>{const e={fields:d.value.length,data:Object.keys(_.value).length,formRef:!!r.value};n.info(`字段: ${e.fields}个，数据: ${e.data}个`)},E=()=>{if(!c.value){n.warning("请先在设计模式中添加字段");return}const e=Se(d.value);if(Object.keys(e).length===0){n.warning("没有找到可填充的字段");return}r.value?.setFieldsValue?r.value.setFieldsValue(e):Object.assign(h.value,e),setTimeout(()=>{n.success(`已为 ${Object.keys(e).length} 个字段填充测试数据`)},300)},X=()=>{if(!c.value){n.warning("请先在设计模式中添加字段");return}h.value={},r.value?.resetFields&&r.value.resetFields(),n.info("表单已清空")},Z=async()=>{if(!r.value||!c.value){n.warning("表单不可用或无字段");return}try{await r.value.validate()}catch{}},ee=async()=>{if(!r.value||!c.value){n.warning("表单不可用或无字段");return}const e=_.value;if(Object.keys(e).length===0){n.warning("没有可提交的数据");return}const a={form:r.value,model:e};await G(a)},ae=()=>{if(!c.value){n.warning("请先在设计模式中添加字段");return}const e={metadata:{exportTime:new Date().toISOString(),fieldCount:d.value.length,configuredFields:d.value.map(b=>({prop:b.prop,label:b.label,type:b.type}))},data:_.value},a=JSON.stringify(e,null,2),s=new Blob([a],{type:"application/json"}),M=URL.createObjectURL(s),u=document.createElement("a");u.href=M,u.download=`employee-data-${Date.now()}.json`,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(M),n.success(`已导出 ${d.value.length} 个字段的数据 ${Object.keys(_.value).length>0?"(含数据)":"(仅结构)"}`)},te=async()=>r.value?.validate(),le=()=>{r.value?.resetFields()};return ve(()=>{D("fields-change",q)}),m({validate:te,resetFields:le,formRef:r}),(e,a)=>{const s=ne,M=ce,u=de,b=ie,T=pe,O=fe,oe=me,re=ye;return k(),R("div",je,[o(s,{ref_key:"formRef",ref:r,options:l(q),"layout-type":"custom",modelValue:h.value,"onUpdate:modelValue":[a[0]||(a[0]=g=>h.value=g),z],"label-placement":l(U),"validate-on-value-change":l(A),"show-default-actions":!1,onValidateSuccess:J,onValidateError:H,onFieldsChange:I,onSubmit:K},null,8,["options","modelValue","label-placement","validate-on-value-change"]),o(T,{title:"🔧 演示操作",class:"demo-actions"},{"header-extra":t(()=>[o(b,{size:"small"},{default:t(()=>[o(M,{size:"small",type:l(d).length>0?"success":"default"},{default:t(()=>[y(" 字段: "+v(l(d).length),1)]),_:1},8,["type"]),o(M,{size:"small",type:l(S)?"success":"default"},{default:t(()=>[y(" 数据: "+v(l(S)?"有":"无"),1)]),_:1},8,["type"]),o(u,{size:"tiny",onClick:W,secondary:"",type:"info"},{default:t(()=>[...a[1]||(a[1]=[y(" 🔍 调试状态 ",-1)])]),_:1})]),_:1})]),default:t(()=>[o(b,null,{default:t(()=>[o(u,{onClick:E,type:"primary",secondary:""},{default:t(()=>[...a[2]||(a[2]=[y(" 🔄 填充测试数据 ",-1)])]),_:1}),o(u,{onClick:X,secondary:"",disabled:!l(c)},{default:t(()=>[...a[3]||(a[3]=[y(" 🗑️ 清空表单 ",-1)])]),_:1},8,["disabled"]),o(u,{onClick:Z,type:"success",secondary:"",disabled:!l(c)},{default:t(()=>[...a[4]||(a[4]=[y(" ✅ 验证表单 ",-1)])]),_:1},8,["disabled"]),o(u,{onClick:ee,type:"primary",loading:l(Q),disabled:!l(c)||!l(S)},{default:t(()=>[...a[5]||(a[5]=[y(" 🚀 提交表单 ",-1)])]),_:1},8,["loading","disabled"]),o(u,{onClick:ae,secondary:"",disabled:!l(c)},{default:t(()=>[...a[6]||(a[6]=[y(" 📤 导出数据 ",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1}),l(c)?(k(),w(T,{key:0,title:"📊 实时数据预览",class:"demo-preview"},{default:t(()=>[l(S)||Object.keys(l(_)).length>0?(k(),w(oe,{key:0,type:"segment"},{default:t(()=>[o(O,{name:"current",tab:"当前数据"},{default:t(()=>[j("pre",Ce,v(JSON.stringify(l(_),null,2)),1)]),_:1}),o(O,{name:"raw",tab:"原始数据"},{default:t(()=>[j("pre",Oe,v(JSON.stringify(h.value,null,2)),1)]),_:1}),o(O,{name:"fields",tab:"字段状态"},{default:t(()=>[o(b,{vertical:"",size:"small"},{default:t(()=>[j("div",null,[j("strong",null,"实际字段 ("+v(l(d).length)+"个):",1)]),(k(!0),R(Me,null,ke(l(d),g=>(k(),w(M,{key:g.prop,type:x(g.prop)?"success":"default",size:"small"},{default:t(()=>[y(v(g.label||g.prop)+" "+v(x(g.prop)?"✓":"○"),1)]),_:2},1032,["type"]))),128))]),_:1})]),_:1})]),_:1})):(k(),w(re,{key:1,description:"暂无表单数据",size:"small"},{extra:t(()=>[o(u,{onClick:E,size:"small",type:"primary"},{default:t(()=>[...a[7]||(a[7]=[y(" 填充测试数据 ",-1)])]),_:1})]),_:1}))]),_:1})):_e("",!0)])}}}),Be=De(Ne,[["__scopeId","data-v-25c2da7a"]]);export{Be as default};
