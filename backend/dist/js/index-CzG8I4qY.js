import{I as z}from"./iconify-W0kOH8CK.js";import{k as D,aE as P,r as C,o as R,aM as E,Q as m,R as p,V as t,l as F,S as n,j as d,U as o,Y as y,F as j,N as O,_ as w,$ as l,m as k}from"./vue-vendor-Bom1XEVO.js";import{d as Q,r as Y,g as q,s as G,a as H}from"./terraria-jE6tX64O.js";import{aA as J,P as K,U as W,S as X,a3 as Z,L as ss}from"./ui-vendor-lRdd6BJd.js";import{_ as ts}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-DdVua9dR.js";import"./spline-vendor-Cs6wJgUK.js";import"./charts-vendor-CvHUaZlk.js";import"./editor-vendor-D83MfH0r.js";const es={class:"terraria-server-list"},as={class:"page-header"},os={class:"page-title"},ns={class:"action-bar"},is={class:"server-grid"},rs={class:"server-header"},ls={class:"server-info"},ds={class:"server-name"},cs={class:"server-actions"},ps={class:"server-details"},us={class:"detail-row"},_s={class:"value"},ms={class:"detail-row"},vs={class:"value"},gs={class:"detail-row"},fs={class:"value"},ys={class:"detail-row"},ws={class:"value"},ks={class:"detail-row"},hs={class:"value"},Ss={class:"detail-row"},Cs={class:"value"},bs={key:0,class:"empty-state"},$s=D({name:"TerrariaServerList",__name:"index",setup(xs){const v=P(),r=J(),g=C([]),_=C(!1),b=e=>({running:"success",stopped:"default",error:"error"})[e]||"default",$=e=>({running:"运行中",stopped:"已停止",error:"错误"})[e]||"未知",x=e=>[{label:"编辑配置",key:`edit-${e.id}`,icon:()=>k(Icon,{icon:"mdi:pencil"})},{label:"重启服务器",key:`restart-${e.id}`,icon:()=>k(Icon,{icon:"mdi:restart"})},{label:"删除服务器",key:`delete-${e.id}`,icon:()=>k(Icon,{icon:"mdi:delete"})}],N=async e=>{const[s,c]=e.split("-"),i=parseInt(c);try{switch(s){case"edit":v.push(`/server/config?id=${i}`);break;case"restart":await Y(i),r.success("服务器重启中..."),await u();break;case"delete":await Q(i),r.success("服务器删除成功"),await u();break}}catch{r.error("操作失败，请重试")}},u=async()=>{try{_.value=!0;const e=await q();e.code==="0"?g.value=e.data:r.error(e.message||"获取服务器列表失败")}catch{r.error("获取服务器列表失败")}finally{_.value=!1}},h=()=>{v.push("/server/create")},A=async()=>{await u(),r.success("刷新成功")},I=async e=>{try{await G(e),r.success("服务器启动中..."),await u()}catch{r.error("启动失败，请重试")}},L=async e=>{try{await H(e),r.warning("服务器停止中..."),await u()}catch{r.error("停止失败，请重试")}},M=e=>{v.push(`/server/logs?id=${e}`)};return R(()=>{u()}),(e,s)=>{const c=z,i=K,f=W,B=X,V=Z,T=ss,U=E("loading");return p(),m("div",es,[t("div",as,[t("h2",os,[n(c,{icon:"mdi:server-network",class:"title-icon"}),s[0]||(s[0]=d(" 泰拉瑞亚服务器列表 ",-1))]),s[1]||(s[1]=t("p",{class:"page-desc"},"管理和监控所有泰拉瑞亚服务器实例",-1))]),t("div",ns,[n(f,null,{default:o(()=>[n(i,{type:"primary",onClick:h},{icon:o(()=>[n(c,{icon:"mdi:server-plus"})]),default:o(()=>[s[2]||(s[2]=d(" 创建服务器 ",-1))]),_:1}),n(i,{onClick:A,loading:_.value},{icon:o(()=>[n(c,{icon:"mdi:refresh"})]),default:o(()=>[s[3]||(s[3]=d(" 刷新 ",-1))]),_:1},8,["loading"])]),_:1})]),F((p(),m("div",is,[(p(!0),m(j,null,O(g.value,a=>(p(),w(T,{key:a.id,class:"server-card",hoverable:""},{header:o(()=>[t("div",rs,[t("div",ls,[t("h3",ds,l(a.name),1),n(B,{type:b(a.status),size:"small",round:""},{default:o(()=>[d(l($(a.status)),1)]),_:2},1032,["type"])]),t("div",cs,[n(V,{options:x(a),onSelect:N},{default:o(()=>[n(i,{text:""},{default:o(()=>[n(c,{icon:"mdi:dots-vertical"})]),_:1})]),_:1},8,["options"])])])]),action:o(()=>[n(f,null,{default:o(()=>[a.status==="stopped"?(p(),w(i,{key:0,type:"success",size:"small",onClick:S=>I(a.id)},{default:o(()=>[...s[10]||(s[10]=[d(" 启动 ",-1)])]),_:1},8,["onClick"])):y("",!0),a.status==="running"?(p(),w(i,{key:1,type:"warning",size:"small",onClick:S=>L(a.id)},{default:o(()=>[...s[11]||(s[11]=[d(" 停止 ",-1)])]),_:1},8,["onClick"])):y("",!0),n(i,{size:"small",onClick:S=>M(a.id)},{default:o(()=>[...s[12]||(s[12]=[d(" 查看日志 ",-1)])]),_:1},8,["onClick"])]),_:2},1024)]),default:o(()=>[t("div",ps,[t("div",us,[s[4]||(s[4]=t("span",{class:"label"},"端口:",-1)),t("span",_s,l(a.port),1)]),t("div",ms,[s[5]||(s[5]=t("span",{class:"label"},"世界:",-1)),t("span",vs,l(a.world||"未设置"),1)]),t("div",gs,[s[6]||(s[6]=t("span",{class:"label"},"在线玩家:",-1)),t("span",fs,l(a.onlinePlayers)+"/"+l(a.maxPlayers),1)]),t("div",ys,[s[7]||(s[7]=t("span",{class:"label"},"运行时间:",-1)),t("span",ws,l(a.uptime||"未运行"),1)]),t("div",ks,[s[8]||(s[8]=t("span",{class:"label"},"CPU使用率:",-1)),t("span",hs,l(a.cpuUsage),1)]),t("div",Ss,[s[9]||(s[9]=t("span",{class:"label"},"内存使用:",-1)),t("span",Cs,l(a.memoryUsage),1)])])]),_:2},1024))),128)),g.value.length===0?(p(),m("div",bs,[n(c,{icon:"mdi:server-off",class:"empty-icon"}),s[14]||(s[14]=t("h3",null,"暂无服务器",-1)),s[15]||(s[15]=t("p",null,'点击"创建服务器"开始您的泰拉瑞亚之旅',-1)),n(i,{type:"primary",onClick:h},{default:o(()=>[...s[13]||(s[13]=[d(" 创建第一个服务器 ",-1)])]),_:1})])):y("",!0)])),[[U,_.value]])])}}}),zs=ts($s,[["__scopeId","data-v-5832670e"]]);export{zs as default};
