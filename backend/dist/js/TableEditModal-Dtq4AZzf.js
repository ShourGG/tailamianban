import{_ as V}from"./index.vue_vue_type_script_setup_true_lang-BnsbD_S9.js";import{ao as B,U as R,P as S}from"./ui-vendor-D9aA433m.js";import{k as T,r as m,c as U,w as y,a as j,_ as g,R as b,K as r,a3 as w,U as s,Y as E,S as c,j as k}from"./vue-vendor-Bom1XEVO.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-ikUMOiiF.js";import"./charts-vendor-PiKWrtPe.js";import"./editor-vendor-CufumsHQ.js";import"./index-DecMlK-y.js";import"./spline-vendor-C3Tmx0e7.js";const K=T({__name:"TableEditModal",props:{visible:{type:Boolean},title:{default:"编辑数据"},width:{default:600},formOptions:{},editingData:{},formKey:{}},emits:["update:visible","update:editingData","save","cancel"],setup(o,{expose:h,emit:N}){const f=o,d=N,n=m(),i=m(!1),a=m({}),l=U({get:()=>f.visible,set:e=>d("update:visible",e)});y(()=>f.editingData,e=>{e&&Object.keys(e).length>0&&(a.value=JSON.parse(JSON.stringify(e)))},{immediate:!0,deep:!0}),y(l,e=>{e||setTimeout(()=>{a.value={}},300)});const p=async()=>{if(n.value){i.value=!0;try{await n.value.validate(),d("save",a.value)}catch{}finally{i.value=!1}}},v=()=>{a.value={},d("cancel")};return h({formRef:n,submitLoading:j(i),save:p,cancel:v}),(e,t)=>{const x=V,_=S,C=R,O=B;return b(),g(O,{show:r(l),"onUpdate:show":t[1]||(t[1]=u=>w(l)?l.value=u:null),title:o.title,width:o.width,preset:"card","mask-closable":!1,"close-on-esc":!1,class:"w60%",closable:!1},{action:s(()=>[c(C,{justify:"end"},{default:s(()=>[c(_,{onClick:v},{default:s(()=>[...t[2]||(t[2]=[k("取消",-1)])]),_:1}),c(_,{type:"primary",loading:r(i),onClick:p},{default:s(()=>[...t[3]||(t[3]=[k(" 保存 ",-1)])]),_:1},8,["loading"])]),_:1})]),default:s(()=>[r(l)&&o.formOptions.length?(b(),g(x,{ref_key:"cFormRef",ref:n,key:o.formKey,modelValue:r(a),"onUpdate:modelValue":t[0]||(t[0]=u=>w(a)?a.value=u:null),options:o.formOptions,"layout-type":"grid","layout-config":{grid:{cols:2,xGap:16,yGap:16}},"show-default-actions":!1},null,8,["modelValue","options"])):E("",!0)]),_:1},8,["show","title","width"])}}}),q=F(K,[["__scopeId","data-v-d446a4a3"]]);export{q as default};
