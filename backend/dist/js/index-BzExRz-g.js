import Y from"./index-CiISHxvF.js";import{e as q}from"./index-DMzwf6y-.js";import{u as J}from"./useTableData-Yf8um1-S.js";import{aA as X,aO as Z,W as ee,U as te,P as ae,L as ne,S as oe,aW as se,T as le}from"./ui-vendor-D9aA433m.js";import{k as re,r as p,c as ie,o as de,Q as $,R as h,S as r,U as o,j as y,V as i,_ as C,Y as N,K as s,a3 as me,M as ce,$ as k,F as ue,N as pe}from"./vue-vendor-Bom1XEVO.js";import"./charts-vendor-PiKWrtPe.js";import"./index-DP8QyUpt.js";import"./iconify-W0kOH8CK.js";import"./index-Chx56wke.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./TableEditModal-Bk1QZc1R.js";import"./index.vue_vue_type_script_setup_true_lang-BYfZxNJP.js";import"./index-DP7nhEPh.js";import"./editor-vendor-CufumsHQ.js";import"./spline-vendor-C3Tmx0e7.js";import"./data-Cv884YeX.js";const ye=a=>q("/employees/dynamicList",{params:a}),fe=[{key:"name",title:"ÂßìÂêç",width:100,editable:!0,editType:"input"},{key:"age",title:"Âπ¥ÈæÑ",width:80,editable:!0,editType:"number"},{key:"email",title:"ÈÇÆÁÆ±",width:200,editable:!0,editType:"email"},{key:"department",title:"ÈÉ®Èó®",width:100,editable:!0,editType:"select",editProps:{options:[{label:"ÊäÄÊúØÈÉ®",value:"ÊäÄÊúØÈÉ®"},{label:"‰∫ßÂìÅÈÉ®",value:"‰∫ßÂìÅÈÉ®"},{label:"ËÆæËÆ°ÈÉ®",value:"ËÆæËÆ°ÈÉ®"},{label:"ËøêËê•ÈÉ®",value:"ËøêËê•ÈÉ®"}]}},{key:"role",title:"ËßíËâ≤",width:120,editable:!0,editType:"input"},{key:"salary",title:"Ëñ™ËµÑ",width:100,editable:!0,editType:"number",render:a=>`¬•${a.salary.toLocaleString()}`},{key:"status",title:"Áä∂ÊÄÅ",width:80,editable:!0,editType:"select",editProps:{options:[{label:"Âú®ËÅå",value:"Âú®ËÅå"},{label:"Á¶ªËÅå",value:"Á¶ªËÅå"}]},render:a=>a.status==="Âú®ËÅå"?"üü¢ Âú®ËÅå":"üî¥ Á¶ªËÅå"}],ge=a=>({add:"success",delete:"error",edit:"warning",select:"info"})[a]||"default",be=()=>({id:Date.now(),name:"Êñ∞ÂëòÂ∑•",age:25,email:"",department:"ÊäÄÊúØÈÉ®",role:"ÂÆû‰π†Áîü",salary:8e3,status:"Âú®ËÅå",hasChildren:!1,childData:[]}),he=()=>{const a=["ËµµÂÖ≠","Èí±‰∏É","Â≠ôÂÖ´","Êùé‰πù","Âë®ÂçÅ","Âê¥ÂçÅ‰∏Ä"],n=["ÊäÄÊúØÈÉ®","‰∫ßÂìÅÈÉ®","ËÆæËÆ°ÈÉ®","ËøêËê•ÈÉ®"],f=["ÂâçÁ´ØÂ∑•Á®ãÂ∏à","ÂêéÁ´ØÂ∑•Á®ãÂ∏à","‰∫ßÂìÅÁªèÁêÜ","UIËÆæËÆ°Â∏à","ËøêËê•‰∏ìÂëò","ÊµãËØïÂ∑•Á®ãÂ∏à"];return{id:Date.now(),name:a[Math.floor(Math.random()*a.length)],age:Math.floor(Math.random()*20)+23,email:`user${Date.now()}@example.com`,department:n[Math.floor(Math.random()*n.length)],role:f[Math.floor(Math.random()*f.length)],salary:Math.floor(Math.random()*15e3)+8e3,status:"Âú®ËÅå",hasChildren:!1,childData:[]}},_e={class:"p-6 min-h-screen"},we={class:"flex justify-between items-center"},ve={class:"flex justify-between items-center"},xe={class:"space-y-2"},ke={class:"flex-1"},We=re({__name:"index",setup(a){const n=X(),f=p(),A=p(),L=p(),d=p(null),m=p([]),{tableData:_,loading:z,refresh:E}=J(ye),T=p(""),P=()=>{const t="Robot Admin",c="rgba(100, 100, 100, 0.25)",v=document.createElement("canvas").getContext("2d");v.font="16px Arial";const b=v.measureText(t).width,x=16,u=-45*Math.PI/180,M=Math.abs(b*Math.cos(u))+Math.abs(x*Math.sin(u)),l=Math.abs(b*Math.sin(u))+Math.abs(x*Math.cos(u)),R=Math.max(M+50,180),S=Math.max(l+30,100),F=`
    <svg xmlns="http://www.w3.org/2000/svg" width="${R}" height="${S}">
      <text
        x="50%"
        y="50%"
        text-anchor="middle"
        dominant-baseline="middle"
        font-family="Arial"
        font-size="16"
        fill="${c}"
        transform="rotate(-45 ${R/2} ${S/2})"
      >${t}</text>
    </svg>
  `,K=new Blob([F],{type:"image/svg+xml"}),Q=URL.createObjectURL(K);T.value=`
    background-image: url("${Q}");
    background-repeat: repeat;
    background-position: 0 0;
  `},B=ie(()=>({detail:async t=>(await new Promise(e=>setTimeout(e,200)),{data:t}),edit:async t=>(await new Promise(e=>setTimeout(e,300)),{success:!0,data:t}),delete:async()=>(await new Promise(t=>setTimeout(t,200)),{success:!0})})),U={dynamicRows:{enableRadioSelection:!0,enableAdd:!0,enableInsert:!0,enableDelete:!0,enableCopy:!0,enableMove:!0,enablePrint:!0,printTargetSelector:".c-table-wrapper",printOptions:{watermark:{text:"Robot Admin",position:"repeat",textSize:16,textColor:"rgba(100, 100, 100, 0.25)",xGap:200,yGap:120,rotate:-45}},onRowChange:t=>{},defaultRowData:be},edit:{enabled:!0,mode:"modal",showRowActions:!0,modalTitle:"ÁºñËæëÂëòÂ∑•‰ø°ÊÅØ",modalWidth:700}},g=(t,e)=>{m.value.unshift({type:t,message:e,time:new Date().toISOString()}),m.value.length>20&&m.value.splice(20)},V=t=>{const e=t;n.info(`Êü•Áúã ${e.name} ÁöÑËØ¶ÁªÜ‰ø°ÊÅØ`),g("select",`Êü•Áúã‰∫Ü ${e.name} ÁöÑËØ¶ÊÉÖ`)},W=t=>{g("add",`Ê∑ªÂä†‰∫ÜÊñ∞ÂëòÂ∑•Ôºö${t.name}`)},j=(...t)=>{const[e]=t,c=e;g("delete",`Âà†Èô§‰∫ÜÂëòÂ∑•Ôºö${c.name}`),d.value?.id===c.id&&(d.value=null)},G=t=>{const e=t;n.success(`‰øùÂ≠òÊàêÂäüÔºö${e.name}`),g("edit",`ÁºñËæë‰∫ÜÂëòÂ∑• ${e.name} ÁöÑ‰ø°ÊÅØ`)},H=()=>{E(),m.value=[],d.value=null,n.success("Êï∞ÊçÆÂ∑≤ÈáçÁΩÆ")},I=()=>{const t=he();_.value.push(t),n.success(`Ê∑ªÂä†ÂëòÂ∑•Ôºö${t.name}`),g("add",`ÊâãÂä®Ê∑ªÂä†‰∫ÜÂëòÂ∑•Ôºö${t.name}`)},O=()=>{d.value=null,f.value?.clearRowSelection(),n.info("Â∑≤Ê∏ÖÁ©∫ÈÄâÊã©")};return de(()=>{P()}),(t,e)=>{const c=Z,w=ae,D=te,v=ee,b=ne,x=oe,u=se,M=le;return h(),$("div",_e,[r(c,null,{default:o(()=>[...e[2]||(e[2]=[y("Âä®ÊÄÅË°®Ê†ºÂú∫ÊôØÁ§∫‰æã",-1)])]),_:1}),r(b,{class:"shadow-md mb-6"},{header:o(()=>[i("div",we,[e[5]||(e[5]=i("h3",{class:"text-lg font-semibold"},"ÂëòÂ∑•‰ø°ÊÅØÁÆ°ÁêÜÔºà‰æãÔºâ",-1)),r(D,null,{default:o(()=>[r(w,{onClick:H},{default:o(()=>[...e[3]||(e[3]=[y("ÈáçÁΩÆÊï∞ÊçÆ",-1)])]),_:1}),r(w,{type:"primary",onClick:I},{default:o(()=>[...e[4]||(e[4]=[y("Ê∑ªÂä†ÂëòÂ∑•",-1)])]),_:1})]),_:1})])]),default:o(()=>[i("div",{ref_key:"tableContainer",ref:A,class:"c-table-wrapper relative"},[r(Y,{ref_key:"tableRef",ref:f,data:s(_),"onUpdate:data":e[0]||(e[0]=l=>me(_)?_.value=l:null),columns:s(fe),actions:s(B),preset:U,loading:s(z),onRowAdd:W,onRowDelete:j,onSave:G,onViewDetail:V},null,8,["data","columns","actions","loading"]),i("div",{ref_key:"watermarkLayer",ref:L,class:"auto-watermark absolute inset-0 pointer-events-none",style:ce(s(T))},null,4)],512),s(d)?(h(),C(v,{key:0,type:"info",class:"mt-4",closable:"",onClose:O},{default:o(()=>[e[6]||(e[6]=i("strong",null,"Â∑≤ÈÄâ‰∏≠Ôºö",-1)),y(k(s(d).name)+" - "+k(s(d).department),1)]),_:1})):N("",!0)]),_:1}),r(b,{class:"shadow-md"},{header:o(()=>[i("div",ve,[e[8]||(e[8]=i("h3",{class:"text-lg font-semibold"},"Êìç‰ΩúÊó•Âøó",-1)),r(w,{size:"small",onClick:e[1]||(e[1]=l=>m.value=[])},{default:o(()=>[...e[7]||(e[7]=[y("Ê∏ÖÁ©∫",-1)])]),_:1})])]),default:o(()=>[i("div",xe,[(h(!0),$(ue,null,pe(s(m).slice(0,6),l=>(h(),$("div",{key:l.time,class:"flex items-center gap-3 p-2 rounded bg-gray-50"},[r(x,{type:s(ge)(l.type),size:"small"},{default:o(()=>[y(k(l.type),1)]),_:2},1032,["type"]),i("span",ke,k(l.message),1),r(u,{time:new Date(l.time),type:"relative",class:"text-sm text-gray-5"},null,8,["time"])]))),128)),s(m).length===0?(h(),C(M,{key:0,description:"ÊöÇÊó†Êìç‰ΩúËÆ∞ÂΩï"})):N("",!0)])]),_:1})])}}});export{We as default};
