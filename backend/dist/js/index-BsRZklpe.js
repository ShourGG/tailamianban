import ne from"./index-C1VqZ0OG.js";import oe from"./index-DEX6AgwE.js";import ie from"./index-DP8QyUpt.js";import{P as S}from"./index.vue_vue_type_script_setup_true_lang-BnkEbK8L.js";import{e as q,f as se,p as re}from"./index-CkMMG6vV.js";import{u as de}from"./useTableData-CAwZYh5d.js";import{aA as ue,aG as pe,aO as ce,U as me,L as ve,J as ye,aj as fe,P as be,I as ge,W as _e}from"./ui-vendor-lRdd6BJd.js";import{k as we,r as p,c as h,Q as R,R as D,S as n,U as o,j as f,V as c,a3 as C,K as a,F as M,N as ke,_ as he,$ as w,Y as De,n as B}from"./vue-vendor-Bom1XEVO.js";import{_ as Ce}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./charts-vendor-CvHUaZlk.js";import"./TableEditModal-DOxcbbuo.js";import"./index-C3XsA_P_.js";import"./editor-vendor-D83MfH0r.js";import"./spline-vendor-Cs6wJgUK.js";import"./data-rvGkdoyf.js";import"./iconify-W0kOH8CK.js";import"./index-Chx56wke.js";const Te=[{value:"row",label:"仅行编辑",icon:"mdi:table-row"},{value:"cell",label:"仅单元格编辑",icon:"mdi:table-cell"},{value:"both",label:"混合模式",icon:"mdi:table-edit"},{value:"modal",label:"模态框编辑",icon:"mdi:window-maximize"},{value:"none",label:"禁用编辑",icon:"mdi:lock"}],xe={row:{title:"行内编辑模式",description:'点击右侧操作列的"编辑"按钮，整行进入编辑状态。适合需要同时编辑多个字段的场景。',alertType:"success"},cell:{title:"单元格编辑模式",description:"鼠标悬停在单元格上会显示编辑图标，点击编辑图标进入编辑状态。适合快速修改单个字段。",alertType:"info"},both:{title:"混合编辑模式",description:"同时支持行编辑和单元格编辑两种方式。提供最大的编辑灵活性。",alertType:"warning"},modal:{title:"模态框编辑模式",description:"使用模态框表单进行编辑，表单验证、防抖、加载状态、错误处理全部自动化。代码简洁，功能强大。",alertType:"success"},none:{title:"只读模式",description:"所有编辑功能均被禁用，表格处于只读状态。",alertType:"error"}},Ne=[{label:"技术部",value:"tech"},{label:"人事部",value:"hr"},{label:"市场部",value:"market"},{label:"财务部",value:"finance"}],Pe=[{label:"在职",value:"active"},{label:"离职",value:"inactive"},{label:"试用期",value:"probation"}],$e=[{label:"男",value:"male"},{label:"女",value:"female"}],Ee=t=>t==="male"?"男":t==="female"?"女":t,Se=t=>t?new Date(t).toLocaleDateString():"-",Re=t=>({tech:"技术部",hr:"人事部",market:"市场部",finance:"财务部"})[t]||t,ze=t=>({active:"在职",inactive:"离职",probation:"试用期"})[t]||t,Ie=t=>t?t.length>30?t.substring(0,30)+"...":t:"暂无描述",Me=()=>[{key:"name",title:"姓名",width:120,editable:!0,required:!0,editType:"input",editProps:{rules:[S.length("姓名",2,20)],placeholder:"请输入姓名"}},{key:"age",title:"年龄",width:100,editable:!0,required:!0,editType:"number",editProps:{min:18,max:65,step:1,showButton:!1,placeholder:"请输入年龄"}},{key:"gender",title:"性别",width:100,editable:!0,required:!0,editType:"select",editProps:{options:$e,placeholder:"请选择性别"},render:t=>Ee(t.gender)},{key:"email",title:"邮箱",width:200,editable:!0,required:!0,editType:"email",editProps:{rules:[S.email("邮箱")],placeholder:"请输入邮箱地址"}},{key:"department",title:"部门",width:120,editable:!0,required:!0,editType:"select",editProps:{options:Ne,placeholder:"请选择部门"},render:t=>Re(t.department)},{key:"joinDate",title:"入职日期",width:140,editable:!0,required:!0,editType:"date",editProps:{type:"date",format:"yyyy-MM-dd",valueFormat:"timestamp",placeholder:"请选择入职日期"},render:t=>Se(t.joinDate)},{key:"status",title:"状态",width:100,editable:!0,required:!1,editType:"select",editProps:{options:Pe,placeholder:"请选择状态"},render:t=>ze(t.status)},{key:"description",title:"描述",width:200,editable:!0,required:!1,editType:"textarea",editProps:{type:"textarea",rows:3,placeholder:"请输入员工描述信息",rules:[S.length("描述",0,200)]},render:t=>Ie(t.description)}],Be=()=>({id:Date.now(),name:`新员工_${Math.floor(Math.random()*1e3)}`,age:25,gender:"male",email:`user${Date.now()}@example.com`,department:"tech",joinDate:Date.now(),status:"probation",description:"新入职员工，待完善信息"}),qe=t=>q("/employees/list",{params:t}),Ae=t=>q(`/employees/${t}`),Ve=(t,i)=>re(`/employees/${t}`,i),Oe=t=>se(`/employees/${t}`),Ue={class:"table-demo-page"},je={class:"controls-row"},Le={class:"mode-selection"},Fe={class:"pagination-status"},Ge=we({__name:"index",setup(t){const i=ue(),A=pe(),{tableData:s,loading:T,refresh:V}=de(qe),x=p(),u=p("modal"),m=p(!0),g=p(10),v=p(1),b=p(null),k=p(!1),N=p(""),P=p(null),O={sections:[{title:"基本信息",columns:2,items:[{label:"员工ID",key:"id",type:"number"},{label:"姓名",key:"name",type:"text"},{label:"年龄",key:"age",type:"number",formatter:l=>`${l}岁`},{label:"性别",key:"gender",type:"tag",tagType:"info",formatter:l=>l==="male"?"男":l==="female"?"女":l}]},{title:"工作信息",columns:2,items:[{label:"部门",key:"department",type:"tag",tagType:"success"},{label:"状态",key:"status",type:"tag",tagType:"success"},{label:"入职日期",key:"joinDate",type:"date"},{label:"邮箱",key:"email",type:"email"}]},{title:"其他信息",columns:1,items:[{label:"描述",key:"description",type:"text",span:2,formatter:l=>l||"暂无描述信息"}]}]},$=h(()=>xe[u.value]),U=h(()=>Me()),j=h(()=>m.value?{enabled:!0,page:v.value,pageSize:g.value,showSizePicker:!0,showQuickJumper:!0,pageSizes:[10,20,50,100],simple:!1,size:"medium"}:!1),L=l=>{const e=l;P.value=e,N.value=`员工详情 - ${e.name}`,k.value=!0},F=(l,e)=>{const d=l,y={...d,id:Date.now(),name:`${d.name}_副本`},_=m.value?(v.value-1)*g.value+e+1:e+1;s.value.splice(_,0,y),i.success("复制成功")},G=l=>{const e=l;A.info({title:"员工授权",content:`正在为员工 "${e.name}" 配置系统权限...`,positiveText:"确定",onPositiveClick:()=>{i.success("授权配置完成")}})},H=h(()=>({edit:l=>Ve(l.id,l),delete:l=>Oe(l.id),detail:l=>Ae(l.id),custom:[{key:"copy",label:"复制",icon:"mdi:content-copy",type:"default",onClick:F},{key:"authorize",label:"授权",icon:"mdi:shield-key",type:"warning",onClick:G}]})),J=(...l)=>{const[e]=l;s.value=s.value.filter(d=>d.id!==e.id)},Q=(...l)=>{const[e,d]=l;v.value=e,d!==g.value&&(g.value=d);const y=s.value.length,_=(e-1)*d+1,E=Math.min(e*d,y);i.info(`已切换到第 ${e} 页，显示第 ${_}-${E} 条记录，共 ${y} 条`)},K=()=>{const l=Be();u.value==="modal"?(b.value=l.id,s.value.unshift(l),m.value&&v.value!==1&&(v.value=1),B(()=>{x.value?.startEdit(l.id)}),i.info("请填写新员工信息后保存")):(s.value.unshift(l),m.value&&v.value!==1&&(v.value=1),B(()=>{["row","both"].includes(u.value)&&x.value?.startEdit(l.id)}))},W=async l=>{try{const e=l;b.value&&e.id===b.value?(b.value=null,i.success("新员工信息保存成功")):i.success("员工信息更新成功")}catch(e){throw i.error("保存失败，请重试"),e}},Y=()=>{if(b.value){const l=s.value.findIndex(e=>e.id===b.value);l!==-1&&s.value.splice(l,1),b.value=null,i.info("已取消新增")}else i.info("已取消编辑")},X=()=>{P.value=null,N.value=""};return(l,e)=>{const d=ce,y=ie,_=fe,E=ye,z=be,Z=ge,I=ve,ee=_e,te=oe,le=me,ae=ne;return D(),R("div",Ue,[n(d,null,{default:o(()=>[...e[4]||(e[4]=[f("表格组件场景示例",-1)])]),_:1}),n(I,null,{default:o(()=>[n(le,{vertical:"",size:20},{default:o(()=>[n(I,{title:"编辑模式选择",size:"small",class:"controls-section"},{default:o(()=>[c("div",je,[c("div",Le,[n(E,{value:a(u),"onUpdate:value":e[0]||(e[0]=r=>C(u)?u.value=r:null)},{default:o(()=>[(D(!0),R(M,null,ke(a(Te),r=>(D(),he(_,{key:r.value,value:r.value},{icon:o(()=>[n(y,{name:r.icon},null,8,["name"])]),default:o(()=>[f(" "+w(r.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),e[10]||(e[10]=c("div",{class:"elegant-divider"},null,-1)),n(z,{onClick:K,type:"primary",disabled:a(u)==="none",class:"action-button",size:"medium"},{icon:o(()=>[n(y,{name:"mdi:plus"})]),default:o(()=>[e[5]||(e[5]=f(" 添加新行 ",-1))]),_:1},8,["disabled"]),e[11]||(e[11]=c("div",{class:"elegant-divider"},null,-1)),c("div",Fe,[e[8]||(e[8]=c("span",{class:"status-label"},"分页状态：",-1)),n(Z,{value:a(m),"onUpdate:value":e[1]||(e[1]=r=>C(m)?m.value=r:null),size:"medium"},{checked:o(()=>[...e[6]||(e[6]=[f(" 开启 ",-1)])]),unchecked:o(()=>[...e[7]||(e[7]=[f(" 关闭 ",-1)])]),_:1},8,["value"])]),e[12]||(e[12]=c("div",{class:"elegant-divider"},null,-1)),n(z,{onClick:a(V),type:"info",size:"medium",loading:a(T)},{icon:o(()=>[n(y,{name:"mdi:refresh"})]),default:o(()=>[e[9]||(e[9]=f(" 刷新数据 ",-1))]),_:1},8,["onClick","loading"])])]),_:1}),n(ee,{type:a($).alertType,title:a($).title},{default:o(()=>[f(w(a($).description)+" ",1),a(m)?(D(),R(M,{key:0},[e[13]||(e[13]=c("br",null,null,-1)),e[14]||(e[14]=c("strong",null,"分页功能已启用",-1)),f(" - 当前显示第 "+w(a(v))+" 页，每页 "+w(a(g))+" 条，总共 "+w(a(s).length)+" 条记录 ",1)],64)):De("",!0)]),_:1},8,["type","title"]),n(te,{ref_key:"tableRef",ref:x,data:a(s),"onUpdate:data":e[2]||(e[2]=r=>C(s)?s.value=r:null),columns:a(U),loading:a(T),"edit-mode":a(u),editable:a(u)!=="none","modal-title":"编辑员工信息","modal-width":700,actions:a(H),pagination:a(j),onSave:W,onCancel:Y,onPaginationChange:Q,onRowDelete:J,onViewDetail:L},null,8,["data","columns","loading","edit-mode","editable","actions","pagination"])]),_:1})]),_:1}),n(ae,{visible:a(k),"onUpdate:visible":e[3]||(e[3]=r=>C(k)?k.value=r:null),data:a(P)||{},config:O,title:a(N),loading:a(T),onClose:X},null,8,["visible","data","title","loading"])])}}}),dt=Ce(Ge,[["__scopeId","data-v-5bd46438"]]);export{dt as default};
