import{k as fn,P as mut,E as yut,Q as Yi,R as gi,S as fh,q as Cf,U as ZL,V as wf,K as ne,g as Jb,r as ln,w as xi,c as ke,W as qq,i as Dv,X as Kq,d as but,o as vd,F as _l,N as vH,M as Ku,n as yh,b as Zq,Y as Cl,Z as _ut,_ as Np,x as Zw,t as xn,I as Py,$ as JL,e as Cut,a0 as ow,p as Wp,a1 as Jq,m as Si,a2 as Ne,a3 as mH,L as wut,a4 as xut,a5 as Sut,s as Qq,a6 as Aut,a as Tut,a7 as Mut,j as Rut,H as N0}from"./vue-vendor-Bom1XEVO.js";import{s as Put,c as BT,i as d0,a as Oa,u as RN,l as But,b as Uh,d as tK,e as sn,f as kut,m as zn,g as eK,h as Lut,j as Eut,k as PN,n as bh,o as Dut,p as iK,q as Iut,r as BN,t as Out,v as Z_,w as QL,x as kN,y as Hut}from"./ui-vendor-lRdd6BJd.js";var J_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yH(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Aoe(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var t=n.default;if(typeof t=="function"){var e=function i(){var r=!1;try{r=this instanceof i}catch{}return r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(e,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}),e}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var tE=function(n,t){return tE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])},tE(n,t)};function et(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");tE(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var zut=(function(){function n(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return n})(),Fut=(function(){function n(){this.browser=new zut,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"}return n})(),ce=new Fut;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(ce.wxa=!0,ce.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?ce.worker=!0:!ce.hasGlobalWindow||"Deno"in window?(ce.node=!0,ce.svgSupported=!0):Nut(navigator.userAgent,ce);function Nut(n,t){var e=t.browser,i=n.match(/Firefox\/([\d.]+)/),r=n.match(/MSIE\s([\d.]+)/)||n.match(/Trident\/.+?rv:(([\d.]+))/),o=n.match(/Edge?\/([\d.]+)/),a=/micromessenger/i.test(n);i&&(e.firefox=!0,e.version=i[1]),r&&(e.ie=!0,e.version=r[1]),o&&(e.edge=!0,e.version=o[1],e.newEdge=+o[1].split(".")[0]>18),a&&(e.weChat=!0),t.svgSupported=typeof SVGRect<"u",t.touchEventsSupported="ontouchstart"in window&&!e.ie&&!e.edge,t.pointerEventsSupported="onpointerdown"in window&&(e.edge||e.ie&&+e.version>=11),t.domSupported=typeof document<"u";var s=document.documentElement.style;t.transform3dSupported=(e.ie&&"transition"in s||e.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in s)&&!("OTransition"in s),t.transformSupported=t.transform3dSupported||e.ie&&+e.version>=9}var bH=12,nK="sans-serif",Zu=bH+"px "+nK,Wut=20,Vut=100,Gut="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function $ut(n){var t={};if(typeof JSON>"u")return t;for(var e=0;e<n.length;e++){var i=String.fromCharCode(e+32),r=(n.charCodeAt(e)-Wut)/Vut;t[i]=r}return t}var jut=$ut(Gut),Ju={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:(function(){var n,t;return function(e,i){if(!n){var r=Ju.createCanvas();n=r&&r.getContext("2d")}if(n)return t!==i&&(t=n.font=i||Zu),n.measureText(e);e=e||"",i=i||Zu;var o=/((?:\d+)?\.?\d*)px/.exec(i),a=o&&+o[1]||bH,s=0;if(i.indexOf("mono")>=0)s=a*e.length;else for(var l=0;l<e.length;l++){var h=jut[e[l]];s+=h==null?a:h*a}return{width:s}}})(),loadImage:function(n,t,e){var i=new Image;return i.onload=t,i.onerror=e,i.src=n,i}},rK=wl(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(n,t){return n["[object "+t+"]"]=!0,n},{}),oK=wl(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(n,t){return n["[object "+t+"Array]"]=!0,n},{}),Iv=Object.prototype.toString,kT=Array.prototype,Uut=kT.forEach,Yut=kT.filter,_H=kT.slice,Xut=kT.map,LN=(function(){}).constructor,Q_=LN?LN.prototype:null,CH="__proto__",qut=2311;function aK(){return qut++}function wH(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t]}function zt(n){if(n==null||typeof n!="object")return n;var t=n,e=Iv.call(n);if(e==="[object Array]"){if(!W0(n)){t=[];for(var i=0,r=n.length;i<r;i++)t[i]=zt(n[i])}}else if(oK[e]){if(!W0(n)){var o=n.constructor;if(o.from)t=o.from(n);else{t=new o(n.length);for(var i=0,r=n.length;i<r;i++)t[i]=n[i]}}}else if(!rK[e]&&!W0(n)&&!Vp(n)){t={};for(var a in n)n.hasOwnProperty(a)&&a!==CH&&(t[a]=zt(n[a]))}return t}function Zt(n,t,e){if(!Ht(t)||!Ht(n))return e?zt(t):n;for(var i in t)if(t.hasOwnProperty(i)&&i!==CH){var r=n[i],o=t[i];Ht(o)&&Ht(r)&&!ut(o)&&!ut(r)&&!Vp(o)&&!Vp(r)&&!EN(o)&&!EN(r)&&!W0(o)&&!W0(r)?Zt(r,o,e):(e||!(i in n))&&(n[i]=zt(t[i]))}return n}function xH(n,t){for(var e=n[0],i=1,r=n.length;i<r;i++)e=Zt(e,n[i],t);return e}function ht(n,t){if(Object.assign)Object.assign(n,t);else for(var e in t)t.hasOwnProperty(e)&&e!==CH&&(n[e]=t[e]);return n}function Ot(n,t,e){for(var i=pe(t),r=0,o=i.length;r<o;r++){var a=i[r];(e?t[a]!=null:n[a]==null)&&(n[a]=t[a])}return n}function ee(n,t){if(n){if(n.indexOf)return n.indexOf(t);for(var e=0,i=n.length;e<i;e++)if(n[e]===t)return e}return-1}function Kut(n,t){var e=n.prototype;function i(){}i.prototype=t.prototype,n.prototype=new i;for(var r in e)e.hasOwnProperty(r)&&(n.prototype[r]=e[r]);n.prototype.constructor=n,n.superClass=t}function In(n,t,e){if(n="prototype"in n?n.prototype:n,t="prototype"in t?t.prototype:t,Object.getOwnPropertyNames)for(var i=Object.getOwnPropertyNames(t),r=0;r<i.length;r++){var o=i[r];o!=="constructor"&&(e?t[o]!=null:n[o]==null)&&(n[o]=t[o])}else Ot(n,t,e)}function Wr(n){return!n||typeof n=="string"?!1:typeof n.length=="number"}function z(n,t,e){if(n&&t)if(n.forEach&&n.forEach===Uut)n.forEach(t,e);else if(n.length===+n.length)for(var i=0,r=n.length;i<r;i++)t.call(e,n[i],i,n);else for(var o in n)n.hasOwnProperty(o)&&t.call(e,n[o],o,n)}function ct(n,t,e){if(!n)return[];if(!t)return SH(n);if(n.map&&n.map===Xut)return n.map(t,e);for(var i=[],r=0,o=n.length;r<o;r++)i.push(t.call(e,n[r],r,n));return i}function wl(n,t,e,i){if(n&&t){for(var r=0,o=n.length;r<o;r++)e=t.call(i,e,n[r],r,n);return e}}function Ge(n,t,e){if(!n)return[];if(!t)return SH(n);if(n.filter&&n.filter===Yut)return n.filter(t,e);for(var i=[],r=0,o=n.length;r<o;r++)t.call(e,n[r],r,n)&&i.push(n[r]);return i}function Zut(n,t,e){if(n&&t){for(var i=0,r=n.length;i<r;i++)if(t.call(e,n[i],i,n))return n[i]}}function pe(n){if(!n)return[];if(Object.keys)return Object.keys(n);var t=[];for(var e in n)n.hasOwnProperty(e)&&t.push(e);return t}function Jut(n,t){for(var e=[],i=2;i<arguments.length;i++)e[i-2]=arguments[i];return function(){return n.apply(t,e.concat(_H.call(arguments)))}}var xt=Q_&&Dt(Q_.bind)?Q_.call.bind(Q_.bind):Jut;function qt(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return function(){return n.apply(this,t.concat(_H.call(arguments)))}}function ut(n){return Array.isArray?Array.isArray(n):Iv.call(n)==="[object Array]"}function Dt(n){return typeof n=="function"}function Ct(n){return typeof n=="string"}function eE(n){return Iv.call(n)==="[object String]"}function Le(n){return typeof n=="number"}function Ht(n){var t=typeof n;return t==="function"||!!n&&t==="object"}function EN(n){return!!rK[Iv.call(n)]}function Ro(n){return!!oK[Iv.call(n)]}function Vp(n){return typeof n=="object"&&typeof n.nodeType=="number"&&typeof n.ownerDocument=="object"}function LT(n){return n.colorStops!=null}function Qut(n){return n.image!=null}function tdt(n){return Iv.call(n)==="[object RegExp]"}function By(n){return n!==n}function rr(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];for(var e=0,i=n.length;e<i;e++)if(n[e]!=null)return n[e]}function Yt(n,t){return n??t}function pl(n,t,e){return n??t??e}function SH(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return _H.apply(n,t)}function AH(n){if(typeof n=="number")return[n,n,n,n];var t=n.length;return t===2?[n[0],n[1],n[0],n[1]]:t===3?[n[0],n[1],n[2],n[1]]:n}function so(n,t){if(!n)throw new Error(t)}function ps(n){return n==null?null:typeof n.trim=="function"?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var sK="__ec_primitive__";function Jw(n){n[sK]=!0}function W0(n){return n[sK]}var edt=(function(){function n(){this.data={}}return n.prototype.delete=function(t){var e=this.has(t);return e&&delete this.data[t],e},n.prototype.has=function(t){return this.data.hasOwnProperty(t)},n.prototype.get=function(t){return this.data[t]},n.prototype.set=function(t,e){return this.data[t]=e,this},n.prototype.keys=function(){return pe(this.data)},n.prototype.forEach=function(t){var e=this.data;for(var i in e)e.hasOwnProperty(i)&&t(e[i],i)},n})(),lK=typeof Map=="function";function idt(){return lK?new Map:new edt}var ndt=(function(){function n(t){var e=ut(t);this.data=idt();var i=this;t instanceof n?t.each(r):t&&z(t,r);function r(o,a){e?i.set(o,a):i.set(a,o)}}return n.prototype.hasKey=function(t){return this.data.has(t)},n.prototype.get=function(t){return this.data.get(t)},n.prototype.set=function(t,e){return this.data.set(t,e),e},n.prototype.each=function(t,e){this.data.forEach(function(i,r){t.call(e,i,r)})},n.prototype.keys=function(){var t=this.data.keys();return lK?Array.from(t):t},n.prototype.removeKey=function(t){this.data.delete(t)},n})();function Pt(n){return new ndt(n)}function ky(n,t){for(var e=new n.constructor(n.length+t.length),i=0;i<n.length;i++)e[i]=n[i];for(var r=n.length,i=0;i<t.length;i++)e[i+r]=t[i];return e}function ET(n,t){var e;if(Object.create)e=Object.create(n);else{var i=function(){};i.prototype=n,e=new i}return t&&ht(e,t),e}function hK(n){var t=n.style;t.webkitUserSelect="none",t.userSelect="none",t.webkitTapHighlightColor="rgba(0,0,0,0)",t["-webkit-touch-callout"]="none"}function At(n,t){return n.hasOwnProperty(t)}function dn(){}var aw=180/Math.PI;function Xf(n,t){return n==null&&(n=0),t==null&&(t=0),[n,t]}function Xr(n,t){return n[0]=t[0],n[1]=t[1],n}function _h(n){return[n[0],n[1]]}function rdt(n,t,e){return n[0]=t,n[1]=e,n}function DN(n,t,e){return n[0]=t[0]+e[0],n[1]=t[1]+e[1],n}function iE(n,t,e,i){return n[0]=t[0]+e[0]*i,n[1]=t[1]+e[1]*i,n}function Ec(n,t,e){return n[0]=t[0]-e[0],n[1]=t[1]-e[1],n}function nE(n){return Math.sqrt(odt(n))}function odt(n){return n[0]*n[0]+n[1]*n[1]}function sw(n,t,e){return n[0]=t[0]*e,n[1]=t[1]*e,n}function Ov(n,t){var e=nE(t);return e===0?(n[0]=0,n[1]=0):(n[0]=t[0]/e,n[1]=t[1]/e),n}function rE(n,t){return Math.sqrt((n[0]-t[0])*(n[0]-t[0])+(n[1]-t[1])*(n[1]-t[1]))}var Ru=rE;function adt(n,t){return(n[0]-t[0])*(n[0]-t[0])+(n[1]-t[1])*(n[1]-t[1])}var ef=adt;function lw(n,t,e,i){return n[0]=t[0]+i*(e[0]-t[0]),n[1]=t[1]+i*(e[1]-t[1]),n}function Sr(n,t,e){var i=t[0],r=t[1];return n[0]=e[0]*i+e[2]*r+e[4],n[1]=e[1]*i+e[3]*r+e[5],n}function Pu(n,t,e){return n[0]=Math.min(t[0],e[0]),n[1]=Math.min(t[1],e[1]),n}function Bu(n,t,e){return n[0]=Math.max(t[0],e[0]),n[1]=Math.max(t[1],e[1]),n}var lg=(function(){function n(t,e){this.target=t,this.topTarget=e&&e.topTarget}return n})(),sdt=(function(){function n(t){this.handler=t,t.on("mousedown",this._dragStart,this),t.on("mousemove",this._drag,this),t.on("mouseup",this._dragEnd,this)}return n.prototype._dragStart=function(t){for(var e=t.target;e&&!e.draggable;)e=e.parent||e.__hostTarget;e&&(this._draggingTarget=e,e.dragging=!0,this._x=t.offsetX,this._y=t.offsetY,this.handler.dispatchToElement(new lg(e,t),"dragstart",t.event))},n.prototype._drag=function(t){var e=this._draggingTarget;if(e){var i=t.offsetX,r=t.offsetY,o=i-this._x,a=r-this._y;this._x=i,this._y=r,e.drift(o,a,t),this.handler.dispatchToElement(new lg(e,t),"drag",t.event);var s=this.handler.findHover(i,r,e).target,l=this._dropTarget;this._dropTarget=s,e!==s&&(l&&s!==l&&this.handler.dispatchToElement(new lg(l,t),"dragleave",t.event),s&&s!==l&&this.handler.dispatchToElement(new lg(s,t),"dragenter",t.event))}},n.prototype._dragEnd=function(t){var e=this._draggingTarget;e&&(e.dragging=!1),this.handler.dispatchToElement(new lg(e,t),"dragend",t.event),this._dropTarget&&this.handler.dispatchToElement(new lg(this._dropTarget,t),"drop",t.event),this._draggingTarget=null,this._dropTarget=null},n})(),Ya=(function(){function n(t){t&&(this._$eventProcessor=t)}return n.prototype.on=function(t,e,i,r){this._$handlers||(this._$handlers={});var o=this._$handlers;if(typeof e=="function"&&(r=i,i=e,e=null),!i||!t)return this;var a=this._$eventProcessor;e!=null&&a&&a.normalizeQuery&&(e=a.normalizeQuery(e)),o[t]||(o[t]=[]);for(var s=0;s<o[t].length;s++)if(o[t][s].h===i)return this;var l={h:i,query:e,ctx:r||this,callAtLast:i.zrEventfulCallAtLast},h=o[t].length-1,u=o[t][h];return u&&u.callAtLast?o[t].splice(h,0,l):o[t].push(l),this},n.prototype.isSilent=function(t){var e=this._$handlers;return!e||!e[t]||!e[t].length},n.prototype.off=function(t,e){var i=this._$handlers;if(!i)return this;if(!t)return this._$handlers={},this;if(e){if(i[t]){for(var r=[],o=0,a=i[t].length;o<a;o++)i[t][o].h!==e&&r.push(i[t][o]);i[t]=r}i[t]&&i[t].length===0&&delete i[t]}else delete i[t];return this},n.prototype.trigger=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(!this._$handlers)return this;var r=this._$handlers[t],o=this._$eventProcessor;if(r)for(var a=e.length,s=r.length,l=0;l<s;l++){var h=r[l];if(!(o&&o.filter&&h.query!=null&&!o.filter(t,h.query)))switch(a){case 0:h.h.call(h.ctx);break;case 1:h.h.call(h.ctx,e[0]);break;case 2:h.h.call(h.ctx,e[0],e[1]);break;default:h.h.apply(h.ctx,e);break}}return o&&o.afterTrigger&&o.afterTrigger(t),this},n.prototype.triggerWithContext=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(!this._$handlers)return this;var r=this._$handlers[t],o=this._$eventProcessor;if(r)for(var a=e.length,s=e[a-1],l=r.length,h=0;h<l;h++){var u=r[h];if(!(o&&o.filter&&u.query!=null&&!o.filter(t,u.query)))switch(a){case 0:u.h.call(s);break;case 1:u.h.call(s,e[0]);break;case 2:u.h.call(s,e[0],e[1]);break;default:u.h.apply(s,e.slice(1,a-1));break}}return o&&o.afterTrigger&&o.afterTrigger(t),this},n})(),ldt=Math.log(2);function oE(n,t,e,i,r,o){var a=i+"-"+r,s=n.length;if(o.hasOwnProperty(a))return o[a];if(t===1){var l=Math.round(Math.log((1<<s)-1&~r)/ldt);return n[e][l]}for(var h=i|1<<e,u=e+1;i&1<<u;)u++;for(var d=0,c=0,f=0;c<s;c++){var g=1<<c;g&r||(d+=(f%2?-1:1)*n[e][c]*oE(n,t-1,u,h,r|g,o),f++)}return o[a]=d,d}function IN(n,t){var e=[[n[0],n[1],1,0,0,0,-t[0]*n[0],-t[0]*n[1]],[0,0,0,n[0],n[1],1,-t[1]*n[0],-t[1]*n[1]],[n[2],n[3],1,0,0,0,-t[2]*n[2],-t[2]*n[3]],[0,0,0,n[2],n[3],1,-t[3]*n[2],-t[3]*n[3]],[n[4],n[5],1,0,0,0,-t[4]*n[4],-t[4]*n[5]],[0,0,0,n[4],n[5],1,-t[5]*n[4],-t[5]*n[5]],[n[6],n[7],1,0,0,0,-t[6]*n[6],-t[6]*n[7]],[0,0,0,n[6],n[7],1,-t[7]*n[6],-t[7]*n[7]]],i={},r=oE(e,8,0,0,0,i);if(r!==0){for(var o=[],a=0;a<8;a++)for(var s=0;s<8;s++)o[s]==null&&(o[s]=0),o[s]+=((a+s)%2?-1:1)*oE(e,7,a===0?1:0,1<<a,1<<s,i)/r*t[a];return function(l,h,u){var d=h*o[6]+u*o[7]+1;l[0]=(h*o[0]+u*o[1]+o[2])/d,l[1]=(h*o[3]+u*o[4]+o[5])/d}}}var ON="___zrEVENTSAVED",rR=[];function hdt(n,t,e,i,r){return aE(rR,t,i,r,!0)&&aE(n,e,rR[0],rR[1])}function aE(n,t,e,i,r){if(t.getBoundingClientRect&&ce.domSupported&&!uK(t)){var o=t[ON]||(t[ON]={}),a=udt(t,o),s=ddt(a,o,r);if(s)return s(n,e,i),!0}return!1}function udt(n,t){var e=t.markers;if(e)return e;e=t.markers=[];for(var i=["left","right"],r=["top","bottom"],o=0;o<4;o++){var a=document.createElement("div"),s=a.style,l=o%2,h=(o>>1)%2;s.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",i[l]+":0",r[h]+":0",i[1-l]+":auto",r[1-h]+":auto",""].join("!important;"),n.appendChild(a),e.push(a)}return e}function ddt(n,t,e){for(var i=e?"invTrans":"trans",r=t[i],o=t.srcCoords,a=[],s=[],l=!0,h=0;h<4;h++){var u=n[h].getBoundingClientRect(),d=2*h,c=u.left,f=u.top;a.push(c,f),l=l&&o&&c===o[d]&&f===o[d+1],s.push(n[h].offsetLeft,n[h].offsetTop)}return l&&r?r:(t.srcCoords=a,t[i]=e?IN(s,a):IN(a,s))}function uK(n){return n.nodeName.toUpperCase()==="CANVAS"}var cdt=/([&<>"'])/g,fdt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Qr(n){return n==null?"":(n+"").replace(cdt,function(t,e){return fdt[e]})}var gdt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,oR=[],pdt=ce.browser.firefox&&+ce.browser.version.split(".")[0]<39;function sE(n,t,e,i){return e=e||{},i?HN(n,t,e):pdt&&t.layerX!=null&&t.layerX!==t.offsetX?(e.zrX=t.layerX,e.zrY=t.layerY):t.offsetX!=null?(e.zrX=t.offsetX,e.zrY=t.offsetY):HN(n,t,e),e}function HN(n,t,e){if(ce.domSupported&&n.getBoundingClientRect){var i=t.clientX,r=t.clientY;if(uK(n)){var o=n.getBoundingClientRect();e.zrX=i-o.left,e.zrY=r-o.top;return}else if(aE(oR,n,i,r)){e.zrX=oR[0],e.zrY=oR[1];return}}e.zrX=e.zrY=0}function TH(n){return n||window.event}function pa(n,t,e){if(t=TH(t),t.zrX!=null)return t;var i=t.type,r=i&&i.indexOf("touch")>=0;if(r){var a=i!=="touchend"?t.targetTouches[0]:t.changedTouches[0];a&&sE(n,a,t,e)}else{sE(n,t,t,e);var o=vdt(t);t.zrDelta=o?o/120:-(t.detail||0)/3}var s=t.button;return t.which==null&&s!==void 0&&gdt.test(t.type)&&(t.which=s&1?1:s&2?3:s&4?2:0),t}function vdt(n){var t=n.wheelDelta;if(t)return t;var e=n.deltaX,i=n.deltaY;if(e==null||i==null)return t;var r=Math.abs(i!==0?i:e),o=i>0?-1:i<0?1:e>0?-1:1;return 3*r*o}function lE(n,t,e,i){n.addEventListener(t,e,i)}function mdt(n,t,e,i){n.removeEventListener(t,e,i)}var Bh=function(n){n.preventDefault(),n.stopPropagation(),n.cancelBubble=!0};function zN(n){return n.which===2||n.which===3}var ydt=(function(){function n(){this._track=[]}return n.prototype.recognize=function(t,e,i){return this._doTrack(t,e,i),this._recognize(t)},n.prototype.clear=function(){return this._track.length=0,this},n.prototype._doTrack=function(t,e,i){var r=t.touches;if(r){for(var o={points:[],touches:[],target:e,event:t},a=0,s=r.length;a<s;a++){var l=r[a],h=sE(i,l,{});o.points.push([h.zrX,h.zrY]),o.touches.push(l)}this._track.push(o)}},n.prototype._recognize=function(t){for(var e in aR)if(aR.hasOwnProperty(e)){var i=aR[e](this._track,t);if(i)return i}},n})();function FN(n){var t=n[1][0]-n[0][0],e=n[1][1]-n[0][1];return Math.sqrt(t*t+e*e)}function bdt(n){return[(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2]}var aR={pinch:function(n,t){var e=n.length;if(e){var i=(n[e-1]||{}).points,r=(n[e-2]||{}).points||i;if(r&&r.length>1&&i&&i.length>1){var o=FN(i)/FN(r);!isFinite(o)&&(o=1),t.pinchScale=o;var a=bdt(i);return t.pinchX=a[0],t.pinchY=a[1],{type:"pinch",target:n[0].target,event:t}}}}};function Xo(){return[1,0,0,1,0,0]}function DT(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=1,n[4]=0,n[5]=0,n}function MH(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n}function Ch(n,t,e){var i=t[0]*e[0]+t[2]*e[1],r=t[1]*e[0]+t[3]*e[1],o=t[0]*e[2]+t[2]*e[3],a=t[1]*e[2]+t[3]*e[3],s=t[0]*e[4]+t[2]*e[5]+t[4],l=t[1]*e[4]+t[3]*e[5]+t[5];return n[0]=i,n[1]=r,n[2]=o,n[3]=a,n[4]=s,n[5]=l,n}function xl(n,t,e){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4]+e[0],n[5]=t[5]+e[1],n}function qf(n,t,e,i){i===void 0&&(i=[0,0]);var r=t[0],o=t[2],a=t[4],s=t[1],l=t[3],h=t[5],u=Math.sin(e),d=Math.cos(e);return n[0]=r*d+s*u,n[1]=-r*u+s*d,n[2]=o*d+l*u,n[3]=-o*u+d*l,n[4]=d*(a-i[0])+u*(h-i[1])+i[0],n[5]=d*(h-i[1])-u*(a-i[0])+i[1],n}function RH(n,t,e){var i=e[0],r=e[1];return n[0]=t[0]*i,n[1]=t[1]*r,n[2]=t[2]*i,n[3]=t[3]*r,n[4]=t[4]*i,n[5]=t[5]*r,n}function Hv(n,t){var e=t[0],i=t[2],r=t[4],o=t[1],a=t[3],s=t[5],l=e*a-o*i;return l?(l=1/l,n[0]=a*l,n[1]=-o*l,n[2]=-i*l,n[3]=e*l,n[4]=(i*s-a*r)*l,n[5]=(o*r-e*s)*l,n):null}function _dt(n){var t=Xo();return MH(t,n),t}var Jt=(function(){function n(t,e){this.x=t||0,this.y=e||0}return n.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},n.prototype.clone=function(){return new n(this.x,this.y)},n.prototype.set=function(t,e){return this.x=t,this.y=e,this},n.prototype.equal=function(t){return t.x===this.x&&t.y===this.y},n.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},n.prototype.scale=function(t){this.x*=t,this.y*=t},n.prototype.scaleAndAdd=function(t,e){this.x+=t.x*e,this.y+=t.y*e},n.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},n.prototype.dot=function(t){return this.x*t.x+this.y*t.y},n.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},n.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},n.prototype.normalize=function(){var t=this.len();return this.x/=t,this.y/=t,this},n.prototype.distance=function(t){var e=this.x-t.x,i=this.y-t.y;return Math.sqrt(e*e+i*i)},n.prototype.distanceSquare=function(t){var e=this.x-t.x,i=this.y-t.y;return e*e+i*i},n.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},n.prototype.transform=function(t){if(t){var e=this.x,i=this.y;return this.x=t[0]*e+t[2]*i+t[4],this.y=t[1]*e+t[3]*i+t[5],this}},n.prototype.toArray=function(t){return t[0]=this.x,t[1]=this.y,t},n.prototype.fromArray=function(t){this.x=t[0],this.y=t[1]},n.set=function(t,e,i){t.x=e,t.y=i},n.copy=function(t,e){t.x=e.x,t.y=e.y},n.len=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},n.lenSquare=function(t){return t.x*t.x+t.y*t.y},n.dot=function(t,e){return t.x*e.x+t.y*e.y},n.add=function(t,e,i){t.x=e.x+i.x,t.y=e.y+i.y},n.sub=function(t,e,i){t.x=e.x-i.x,t.y=e.y-i.y},n.scale=function(t,e,i){t.x=e.x*i,t.y=e.y*i},n.scaleAndAdd=function(t,e,i,r){t.x=e.x+i.x*r,t.y=e.y+i.y*r},n.lerp=function(t,e,i,r){var o=1-r;t.x=o*e.x+r*i.x,t.y=o*e.y+r*i.y},n})(),tC=Math.min,eC=Math.max,Md=new Jt,Rd=new Jt,Pd=new Jt,Bd=new Jt,vm=new Jt,mm=new Jt,te=(function(){function n(t,e,i,r){i<0&&(t=t+i,i=-i),r<0&&(e=e+r,r=-r),this.x=t,this.y=e,this.width=i,this.height=r}return n.prototype.union=function(t){var e=tC(t.x,this.x),i=tC(t.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=eC(t.x+t.width,this.x+this.width)-e:this.width=t.width,isFinite(this.y)&&isFinite(this.height)?this.height=eC(t.y+t.height,this.y+this.height)-i:this.height=t.height,this.x=e,this.y=i},n.prototype.applyTransform=function(t){n.applyTransform(this,this,t)},n.prototype.calculateTransform=function(t){var e=this,i=t.width/e.width,r=t.height/e.height,o=Xo();return xl(o,o,[-e.x,-e.y]),RH(o,o,[i,r]),xl(o,o,[t.x,t.y]),o},n.prototype.intersect=function(t,e){if(!t)return!1;t instanceof n||(t=n.create(t));var i=this,r=i.x,o=i.x+i.width,a=i.y,s=i.y+i.height,l=t.x,h=t.x+t.width,u=t.y,d=t.y+t.height,c=!(o<l||h<r||s<u||d<a);if(e){var f=1/0,g=0,p=Math.abs(o-l),v=Math.abs(h-r),m=Math.abs(s-u),y=Math.abs(d-a),b=Math.min(p,v),_=Math.min(m,y);o<l||h<r?b>g&&(g=b,p<v?Jt.set(mm,-p,0):Jt.set(mm,v,0)):b<f&&(f=b,p<v?Jt.set(vm,p,0):Jt.set(vm,-v,0)),s<u||d<a?_>g&&(g=_,m<y?Jt.set(mm,0,-m):Jt.set(mm,0,y)):b<f&&(f=b,m<y?Jt.set(vm,0,m):Jt.set(vm,0,-y))}return e&&Jt.copy(e,c?vm:mm),c},n.prototype.contain=function(t,e){var i=this;return t>=i.x&&t<=i.x+i.width&&e>=i.y&&e<=i.y+i.height},n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height)},n.prototype.copy=function(t){n.copy(this,t)},n.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},n.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},n.prototype.isZero=function(){return this.width===0||this.height===0},n.create=function(t){return new n(t.x,t.y,t.width,t.height)},n.copy=function(t,e){t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height},n.applyTransform=function(t,e,i){if(!i){t!==e&&n.copy(t,e);return}if(i[1]<1e-5&&i[1]>-1e-5&&i[2]<1e-5&&i[2]>-1e-5){var r=i[0],o=i[3],a=i[4],s=i[5];t.x=e.x*r+a,t.y=e.y*o+s,t.width=e.width*r,t.height=e.height*o,t.width<0&&(t.x+=t.width,t.width=-t.width),t.height<0&&(t.y+=t.height,t.height=-t.height);return}Md.x=Pd.x=e.x,Md.y=Bd.y=e.y,Rd.x=Bd.x=e.x+e.width,Rd.y=Pd.y=e.y+e.height,Md.transform(i),Bd.transform(i),Rd.transform(i),Pd.transform(i),t.x=tC(Md.x,Rd.x,Pd.x,Bd.x),t.y=tC(Md.y,Rd.y,Pd.y,Bd.y);var l=eC(Md.x,Rd.x,Pd.x,Bd.x),h=eC(Md.y,Rd.y,Pd.y,Bd.y);t.width=l-t.x,t.height=h-t.y},n})(),dK="silent";function Cdt(n,t,e){return{type:n,event:e,target:t.target,topTarget:t.topTarget,cancelBubble:!1,offsetX:e.zrX,offsetY:e.zrY,gestureEvent:e.gestureEvent,pinchX:e.pinchX,pinchY:e.pinchY,pinchScale:e.pinchScale,wheelDelta:e.zrDelta,zrByTouch:e.zrByTouch,which:e.which,stop:wdt}}function wdt(){Bh(this.event)}var xdt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.handler=null,e}return t.prototype.dispose=function(){},t.prototype.setCursor=function(){},t})(Ya),ym=(function(){function n(t,e){this.x=t,this.y=e}return n})(),Sdt=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],sR=new te(0,0,0,0),cK=(function(n){et(t,n);function t(e,i,r,o,a){var s=n.call(this)||this;return s._hovered=new ym(0,0),s.storage=e,s.painter=i,s.painterRoot=o,s._pointerSize=a,r=r||new xdt,s.proxy=null,s.setHandlerProxy(r),s._draggingMgr=new sdt(s),s}return t.prototype.setHandlerProxy=function(e){this.proxy&&this.proxy.dispose(),e&&(z(Sdt,function(i){e.on&&e.on(i,this[i],this)},this),e.handler=this),this.proxy=e},t.prototype.mousemove=function(e){var i=e.zrX,r=e.zrY,o=fK(this,i,r),a=this._hovered,s=a.target;s&&!s.__zr&&(a=this.findHover(a.x,a.y),s=a.target);var l=this._hovered=o?new ym(i,r):this.findHover(i,r),h=l.target,u=this.proxy;u.setCursor&&u.setCursor(h?h.cursor:"default"),s&&h!==s&&this.dispatchToElement(a,"mouseout",e),this.dispatchToElement(l,"mousemove",e),h&&h!==s&&this.dispatchToElement(l,"mouseover",e)},t.prototype.mouseout=function(e){var i=e.zrEventControl;i!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",e),i!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:e})},t.prototype.resize=function(){this._hovered=new ym(0,0)},t.prototype.dispatch=function(e,i){var r=this[e];r&&r.call(this,i)},t.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},t.prototype.setCursorStyle=function(e){var i=this.proxy;i.setCursor&&i.setCursor(e)},t.prototype.dispatchToElement=function(e,i,r){e=e||{};var o=e.target;if(!(o&&o.silent)){for(var a="on"+i,s=Cdt(i,e,r);o&&(o[a]&&(s.cancelBubble=!!o[a].call(o,s)),o.trigger(i,s),o=o.__hostTarget?o.__hostTarget:o.parent,!s.cancelBubble););s.cancelBubble||(this.trigger(i,s),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(l){typeof l[a]=="function"&&l[a].call(l,s),l.trigger&&l.trigger(i,s)}))}},t.prototype.findHover=function(e,i,r){var o=this.storage.getDisplayList(),a=new ym(e,i);if(NN(o,a,e,i,r),this._pointerSize&&!a.target){for(var s=[],l=this._pointerSize,h=l/2,u=new te(e-h,i-h,l,l),d=o.length-1;d>=0;d--){var c=o[d];c!==r&&!c.ignore&&!c.ignoreCoarsePointer&&(!c.parent||!c.parent.ignoreCoarsePointer)&&(sR.copy(c.getBoundingRect()),c.transform&&sR.applyTransform(c.transform),sR.intersect(u)&&s.push(c))}if(s.length)for(var f=4,g=Math.PI/12,p=Math.PI*2,v=0;v<h;v+=f)for(var m=0;m<p;m+=g){var y=e+v*Math.cos(m),b=i+v*Math.sin(m);if(NN(s,a,y,b,r),a.target)return a}}return a},t.prototype.processGesture=function(e,i){this._gestureMgr||(this._gestureMgr=new ydt);var r=this._gestureMgr;i==="start"&&r.clear();var o=r.recognize(e,this.findHover(e.zrX,e.zrY,null).target,this.proxy.dom);if(i==="end"&&r.clear(),o){var a=o.type;e.gestureEvent=a;var s=new ym;s.target=o.target,this.dispatchToElement(s,a,o.event)}},t})(Ya);z(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(n){cK.prototype[n]=function(t){var e=t.zrX,i=t.zrY,r=fK(this,e,i),o,a;if((n!=="mouseup"||!r)&&(o=this.findHover(e,i),a=o.target),n==="mousedown")this._downEl=a,this._downPoint=[t.zrX,t.zrY],this._upEl=a;else if(n==="mouseup")this._upEl=a;else if(n==="click"){if(this._downEl!==this._upEl||!this._downPoint||Ru(this._downPoint,[t.zrX,t.zrY])>4)return;this._downPoint=null}this.dispatchToElement(o,n,t)}});function Adt(n,t,e){if(n[n.rectHover?"rectContain":"contain"](t,e)){for(var i=n,r=void 0,o=!1;i;){if(i.ignoreClip&&(o=!0),!o){var a=i.getClipPath();if(a&&!a.contain(t,e))return!1}i.silent&&(r=!0);var s=i.__hostTarget;i=s||i.parent}return r?dK:!0}return!1}function NN(n,t,e,i,r){for(var o=n.length-1;o>=0;o--){var a=n[o],s=void 0;if(a!==r&&!a.ignore&&(s=Adt(a,e,i))&&(!t.topTarget&&(t.topTarget=a),s!==dK)){t.target=a;break}}}function fK(n,t,e){var i=n.painter;return t<0||t>i.getWidth()||e<0||e>i.getHeight()}var gK=32,bm=7;function Tdt(n){for(var t=0;n>=gK;)t|=n&1,n>>=1;return n+t}function WN(n,t,e,i){var r=t+1;if(r===e)return 1;if(i(n[r++],n[t])<0){for(;r<e&&i(n[r],n[r-1])<0;)r++;Mdt(n,t,r)}else for(;r<e&&i(n[r],n[r-1])>=0;)r++;return r-t}function Mdt(n,t,e){for(e--;t<e;){var i=n[t];n[t++]=n[e],n[e--]=i}}function VN(n,t,e,i,r){for(i===t&&i++;i<e;i++){for(var o=n[i],a=t,s=i,l;a<s;)l=a+s>>>1,r(o,n[l])<0?s=l:a=l+1;var h=i-a;switch(h){case 3:n[a+3]=n[a+2];case 2:n[a+2]=n[a+1];case 1:n[a+1]=n[a];break;default:for(;h>0;)n[a+h]=n[a+h-1],h--}n[a]=o}}function lR(n,t,e,i,r,o){var a=0,s=0,l=1;if(o(n,t[e+r])>0){for(s=i-r;l<s&&o(n,t[e+r+l])>0;)a=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s),a+=r,l+=r}else{for(s=r+1;l<s&&o(n,t[e+r-l])<=0;)a=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s);var h=a;a=r-l,l=r-h}for(a++;a<l;){var u=a+(l-a>>>1);o(n,t[e+u])>0?a=u+1:l=u}return l}function hR(n,t,e,i,r,o){var a=0,s=0,l=1;if(o(n,t[e+r])<0){for(s=r+1;l<s&&o(n,t[e+r-l])<0;)a=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s);var h=a;a=r-l,l=r-h}else{for(s=i-r;l<s&&o(n,t[e+r+l])>=0;)a=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s),a+=r,l+=r}for(a++;a<l;){var u=a+(l-a>>>1);o(n,t[e+u])<0?l=u:a=u+1}return l}function Rdt(n,t){var e=bm,i,r,o=0,a=[];i=[],r=[];function s(f,g){i[o]=f,r[o]=g,o+=1}function l(){for(;o>1;){var f=o-2;if(f>=1&&r[f-1]<=r[f]+r[f+1]||f>=2&&r[f-2]<=r[f]+r[f-1])r[f-1]<r[f+1]&&f--;else if(r[f]>r[f+1])break;u(f)}}function h(){for(;o>1;){var f=o-2;f>0&&r[f-1]<r[f+1]&&f--,u(f)}}function u(f){var g=i[f],p=r[f],v=i[f+1],m=r[f+1];r[f]=p+m,f===o-3&&(i[f+1]=i[f+2],r[f+1]=r[f+2]),o--;var y=hR(n[v],n,g,p,0,t);g+=y,p-=y,p!==0&&(m=lR(n[g+p-1],n,v,m,m-1,t),m!==0&&(p<=m?d(g,p,v,m):c(g,p,v,m)))}function d(f,g,p,v){var m=0;for(m=0;m<g;m++)a[m]=n[f+m];var y=0,b=p,_=f;if(n[_++]=n[b++],--v===0){for(m=0;m<g;m++)n[_+m]=a[y+m];return}if(g===1){for(m=0;m<v;m++)n[_+m]=n[b+m];n[_+v]=a[y];return}for(var w=e,C,x,S;;){C=0,x=0,S=!1;do if(t(n[b],a[y])<0){if(n[_++]=n[b++],x++,C=0,--v===0){S=!0;break}}else if(n[_++]=a[y++],C++,x=0,--g===1){S=!0;break}while((C|x)<w);if(S)break;do{if(C=hR(n[b],a,y,g,0,t),C!==0){for(m=0;m<C;m++)n[_+m]=a[y+m];if(_+=C,y+=C,g-=C,g<=1){S=!0;break}}if(n[_++]=n[b++],--v===0){S=!0;break}if(x=lR(a[y],n,b,v,0,t),x!==0){for(m=0;m<x;m++)n[_+m]=n[b+m];if(_+=x,b+=x,v-=x,v===0){S=!0;break}}if(n[_++]=a[y++],--g===1){S=!0;break}w--}while(C>=bm||x>=bm);if(S)break;w<0&&(w=0),w+=2}if(e=w,e<1&&(e=1),g===1){for(m=0;m<v;m++)n[_+m]=n[b+m];n[_+v]=a[y]}else{if(g===0)throw new Error;for(m=0;m<g;m++)n[_+m]=a[y+m]}}function c(f,g,p,v){var m=0;for(m=0;m<v;m++)a[m]=n[p+m];var y=f+g-1,b=v-1,_=p+v-1,w=0,C=0;if(n[_--]=n[y--],--g===0){for(w=_-(v-1),m=0;m<v;m++)n[w+m]=a[m];return}if(v===1){for(_-=g,y-=g,C=_+1,w=y+1,m=g-1;m>=0;m--)n[C+m]=n[w+m];n[_]=a[b];return}for(var x=e;;){var S=0,A=0,T=!1;do if(t(a[b],n[y])<0){if(n[_--]=n[y--],S++,A=0,--g===0){T=!0;break}}else if(n[_--]=a[b--],A++,S=0,--v===1){T=!0;break}while((S|A)<x);if(T)break;do{if(S=g-hR(a[b],n,f,g,g-1,t),S!==0){for(_-=S,y-=S,g-=S,C=_+1,w=y+1,m=S-1;m>=0;m--)n[C+m]=n[w+m];if(g===0){T=!0;break}}if(n[_--]=a[b--],--v===1){T=!0;break}if(A=v-lR(n[y],a,0,v,v-1,t),A!==0){for(_-=A,b-=A,v-=A,C=_+1,w=b+1,m=0;m<A;m++)n[C+m]=a[w+m];if(v<=1){T=!0;break}}if(n[_--]=n[y--],--g===0){T=!0;break}x--}while(S>=bm||A>=bm);if(T)break;x<0&&(x=0),x+=2}if(e=x,e<1&&(e=1),v===1){for(_-=g,y-=g,C=_+1,w=y+1,m=g-1;m>=0;m--)n[C+m]=n[w+m];n[_]=a[b]}else{if(v===0)throw new Error;for(w=_-(v-1),m=0;m<v;m++)n[w+m]=a[m]}}return{mergeRuns:l,forceMergeRuns:h,pushRun:s}}function hw(n,t,e,i){e||(e=0),i||(i=n.length);var r=i-e;if(!(r<2)){var o=0;if(r<gK){o=WN(n,e,i,t),VN(n,e,i,e+o,t);return}var a=Rdt(n,t),s=Tdt(r);do{if(o=WN(n,e,i,t),o<s){var l=r;l>s&&(l=s),VN(n,e,e+l,e+o,t),o=l}a.pushRun(e,o),a.mergeRuns(),r-=o,e+=o}while(r!==0);a.forceMergeRuns()}}var $o=1,c0=2,Xg=4,GN=!1;function uR(){GN||(GN=!0)}function $N(n,t){return n.zlevel===t.zlevel?n.z===t.z?n.z2-t.z2:n.z-t.z:n.zlevel-t.zlevel}var Pdt=(function(){function n(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=$N}return n.prototype.traverse=function(t,e){for(var i=0;i<this._roots.length;i++)this._roots[i].traverse(t,e)},n.prototype.getDisplayList=function(t,e){e=e||!1;var i=this._displayList;return(t||!i.length)&&this.updateDisplayList(e),i},n.prototype.updateDisplayList=function(t){this._displayListLen=0;for(var e=this._roots,i=this._displayList,r=0,o=e.length;r<o;r++)this._updateAndAddDisplayable(e[r],null,t);i.length=this._displayListLen,hw(i,$N)},n.prototype._updateAndAddDisplayable=function(t,e,i){if(!(t.ignore&&!i)){t.beforeUpdate(),t.update(),t.afterUpdate();var r=t.getClipPath();if(t.ignoreClip)e=null;else if(r){e?e=e.slice():e=[];for(var o=r,a=t;o;)o.parent=a,o.updateTransform(),e.push(o),a=o,o=o.getClipPath()}if(t.childrenRef){for(var s=t.childrenRef(),l=0;l<s.length;l++){var h=s[l];t.__dirty&&(h.__dirty|=$o),this._updateAndAddDisplayable(h,e,i)}t.__dirty=0}else{var u=t;e&&e.length?u.__clipPaths=e:u.__clipPaths&&u.__clipPaths.length>0&&(u.__clipPaths=[]),isNaN(u.z)&&(uR(),u.z=0),isNaN(u.z2)&&(uR(),u.z2=0),isNaN(u.zlevel)&&(uR(),u.zlevel=0),this._displayList[this._displayListLen++]=u}var d=t.getDecalElement&&t.getDecalElement();d&&this._updateAndAddDisplayable(d,e,i);var c=t.getTextGuideLine();c&&this._updateAndAddDisplayable(c,e,i);var f=t.getTextContent();f&&this._updateAndAddDisplayable(f,e,i)}},n.prototype.addRoot=function(t){t.__zr&&t.__zr.storage===this||this._roots.push(t)},n.prototype.delRoot=function(t){if(t instanceof Array){for(var e=0,i=t.length;e<i;e++)this.delRoot(t[e]);return}var r=ee(this._roots,t);r>=0&&this._roots.splice(r,1)},n.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},n.prototype.getRoots=function(){return this._roots},n.prototype.dispose=function(){this._displayList=null,this._roots=null},n})(),Qw;Qw=ce.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(n){return setTimeout(n,16)};var V0={linear:function(n){return n},quadraticIn:function(n){return n*n},quadraticOut:function(n){return n*(2-n)},quadraticInOut:function(n){return(n*=2)<1?.5*n*n:-.5*(--n*(n-2)-1)},cubicIn:function(n){return n*n*n},cubicOut:function(n){return--n*n*n+1},cubicInOut:function(n){return(n*=2)<1?.5*n*n*n:.5*((n-=2)*n*n+2)},quarticIn:function(n){return n*n*n*n},quarticOut:function(n){return 1- --n*n*n*n},quarticInOut:function(n){return(n*=2)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2)},quinticIn:function(n){return n*n*n*n*n},quinticOut:function(n){return--n*n*n*n*n+1},quinticInOut:function(n){return(n*=2)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)},sinusoidalIn:function(n){return 1-Math.cos(n*Math.PI/2)},sinusoidalOut:function(n){return Math.sin(n*Math.PI/2)},sinusoidalInOut:function(n){return .5*(1-Math.cos(Math.PI*n))},exponentialIn:function(n){return n===0?0:Math.pow(1024,n-1)},exponentialOut:function(n){return n===1?1:1-Math.pow(2,-10*n)},exponentialInOut:function(n){return n===0?0:n===1?1:(n*=2)<1?.5*Math.pow(1024,n-1):.5*(-Math.pow(2,-10*(n-1))+2)},circularIn:function(n){return 1-Math.sqrt(1-n*n)},circularOut:function(n){return Math.sqrt(1- --n*n)},circularInOut:function(n){return(n*=2)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)},elasticIn:function(n){var t,e=.1,i=.4;return n===0?0:n===1?1:(!e||e<1?(e=1,t=i/4):t=i*Math.asin(1/e)/(2*Math.PI),-(e*Math.pow(2,10*(n-=1))*Math.sin((n-t)*(2*Math.PI)/i)))},elasticOut:function(n){var t,e=.1,i=.4;return n===0?0:n===1?1:(!e||e<1?(e=1,t=i/4):t=i*Math.asin(1/e)/(2*Math.PI),e*Math.pow(2,-10*n)*Math.sin((n-t)*(2*Math.PI)/i)+1)},elasticInOut:function(n){var t,e=.1,i=.4;return n===0?0:n===1?1:(!e||e<1?(e=1,t=i/4):t=i*Math.asin(1/e)/(2*Math.PI),(n*=2)<1?-.5*(e*Math.pow(2,10*(n-=1))*Math.sin((n-t)*(2*Math.PI)/i)):e*Math.pow(2,-10*(n-=1))*Math.sin((n-t)*(2*Math.PI)/i)*.5+1)},backIn:function(n){var t=1.70158;return n*n*((t+1)*n-t)},backOut:function(n){var t=1.70158;return--n*n*((t+1)*n+t)+1},backInOut:function(n){var t=2.5949095;return(n*=2)<1?.5*(n*n*((t+1)*n-t)):.5*((n-=2)*n*((t+1)*n+t)+2)},bounceIn:function(n){return 1-V0.bounceOut(1-n)},bounceOut:function(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},bounceInOut:function(n){return n<.5?V0.bounceIn(n*2)*.5:V0.bounceOut(n*2-1)*.5+.5}},iC=Math.pow,$u=Math.sqrt,tx=1e-8,pK=1e-4,jN=$u(3),nC=1/3,il=Xf(),Pa=Xf(),fp=Xf();function ku(n){return n>-tx&&n<tx}function vK(n){return n>tx||n<-tx}function jn(n,t,e,i,r){var o=1-r;return o*o*(o*n+3*r*t)+r*r*(r*i+3*o*e)}function UN(n,t,e,i,r){var o=1-r;return 3*(((t-n)*o+2*(e-t)*r)*o+(i-e)*r*r)}function ex(n,t,e,i,r,o){var a=i+3*(t-e)-n,s=3*(e-t*2+n),l=3*(t-n),h=n-r,u=s*s-3*a*l,d=s*l-9*a*h,c=l*l-3*s*h,f=0;if(ku(u)&&ku(d))if(ku(s))o[0]=0;else{var g=-l/s;g>=0&&g<=1&&(o[f++]=g)}else{var p=d*d-4*u*c;if(ku(p)){var v=d/u,g=-s/a+v,m=-v/2;g>=0&&g<=1&&(o[f++]=g),m>=0&&m<=1&&(o[f++]=m)}else if(p>0){var y=$u(p),b=u*s+1.5*a*(-d+y),_=u*s+1.5*a*(-d-y);b<0?b=-iC(-b,nC):b=iC(b,nC),_<0?_=-iC(-_,nC):_=iC(_,nC);var g=(-s-(b+_))/(3*a);g>=0&&g<=1&&(o[f++]=g)}else{var w=(2*u*s-3*a*d)/(2*$u(u*u*u)),C=Math.acos(w)/3,x=$u(u),S=Math.cos(C),g=(-s-2*x*S)/(3*a),m=(-s+x*(S+jN*Math.sin(C)))/(3*a),A=(-s+x*(S-jN*Math.sin(C)))/(3*a);g>=0&&g<=1&&(o[f++]=g),m>=0&&m<=1&&(o[f++]=m),A>=0&&A<=1&&(o[f++]=A)}}return f}function mK(n,t,e,i,r){var o=6*e-12*t+6*n,a=9*t+3*i-3*n-9*e,s=3*t-3*n,l=0;if(ku(a)){if(vK(o)){var h=-s/o;h>=0&&h<=1&&(r[l++]=h)}}else{var u=o*o-4*a*s;if(ku(u))r[0]=-o/(2*a);else if(u>0){var d=$u(u),h=(-o+d)/(2*a),c=(-o-d)/(2*a);h>=0&&h<=1&&(r[l++]=h),c>=0&&c<=1&&(r[l++]=c)}}return l}function Qu(n,t,e,i,r,o){var a=(t-n)*r+n,s=(e-t)*r+t,l=(i-e)*r+e,h=(s-a)*r+a,u=(l-s)*r+s,d=(u-h)*r+h;o[0]=n,o[1]=a,o[2]=h,o[3]=d,o[4]=d,o[5]=u,o[6]=l,o[7]=i}function yK(n,t,e,i,r,o,a,s,l,h,u){var d,c=.005,f=1/0,g,p,v,m;il[0]=l,il[1]=h;for(var y=0;y<1;y+=.05)Pa[0]=jn(n,e,r,a,y),Pa[1]=jn(t,i,o,s,y),v=ef(il,Pa),v<f&&(d=y,f=v);f=1/0;for(var b=0;b<32&&!(c<pK);b++)g=d-c,p=d+c,Pa[0]=jn(n,e,r,a,g),Pa[1]=jn(t,i,o,s,g),v=ef(Pa,il),g>=0&&v<f?(d=g,f=v):(fp[0]=jn(n,e,r,a,p),fp[1]=jn(t,i,o,s,p),m=ef(fp,il),p<=1&&m<f?(d=p,f=m):c*=.5);return u&&(u[0]=jn(n,e,r,a,d),u[1]=jn(t,i,o,s,d)),$u(f)}function Bdt(n,t,e,i,r,o,a,s,l){for(var h=n,u=t,d=0,c=1/l,f=1;f<=l;f++){var g=f*c,p=jn(n,e,r,a,g),v=jn(t,i,o,s,g),m=p-h,y=v-u;d+=Math.sqrt(m*m+y*y),h=p,u=v}return d}function ir(n,t,e,i){var r=1-i;return r*(r*n+2*i*t)+i*i*e}function hE(n,t,e,i){return 2*((1-i)*(t-n)+i*(e-t))}function kdt(n,t,e,i,r){var o=n-2*t+e,a=2*(t-n),s=n-i,l=0;if(ku(o)){if(vK(a)){var h=-s/a;h>=0&&h<=1&&(r[l++]=h)}}else{var u=a*a-4*o*s;if(ku(u)){var h=-a/(2*o);h>=0&&h<=1&&(r[l++]=h)}else if(u>0){var d=$u(u),h=(-a+d)/(2*o),c=(-a-d)/(2*o);h>=0&&h<=1&&(r[l++]=h),c>=0&&c<=1&&(r[l++]=c)}}return l}function bK(n,t,e){var i=n+e-2*t;return i===0?.5:(n-t)/i}function Ly(n,t,e,i,r){var o=(t-n)*i+n,a=(e-t)*i+t,s=(a-o)*i+o;r[0]=n,r[1]=o,r[2]=s,r[3]=s,r[4]=a,r[5]=e}function _K(n,t,e,i,r,o,a,s,l){var h,u=.005,d=1/0;il[0]=a,il[1]=s;for(var c=0;c<1;c+=.05){Pa[0]=ir(n,e,r,c),Pa[1]=ir(t,i,o,c);var f=ef(il,Pa);f<d&&(h=c,d=f)}d=1/0;for(var g=0;g<32&&!(u<pK);g++){var p=h-u,v=h+u;Pa[0]=ir(n,e,r,p),Pa[1]=ir(t,i,o,p);var f=ef(Pa,il);if(p>=0&&f<d)h=p,d=f;else{fp[0]=ir(n,e,r,v),fp[1]=ir(t,i,o,v);var m=ef(fp,il);v<=1&&m<d?(h=v,d=m):u*=.5}}return l&&(l[0]=ir(n,e,r,h),l[1]=ir(t,i,o,h)),$u(d)}function Ldt(n,t,e,i,r,o,a){for(var s=n,l=t,h=0,u=1/a,d=1;d<=a;d++){var c=d*u,f=ir(n,e,r,c),g=ir(t,i,o,c),p=f-s,v=g-l;h+=Math.sqrt(p*p+v*v),s=f,l=g}return h}var Edt=/cubic-bezier\(([0-9,\.e ]+)\)/;function PH(n){var t=n&&Edt.exec(n);if(t){var e=t[1].split(","),i=+ps(e[0]),r=+ps(e[1]),o=+ps(e[2]),a=+ps(e[3]);if(isNaN(i+r+o+a))return;var s=[];return function(l){return l<=0?0:l>=1?1:ex(0,i,o,1,l,s)&&jn(0,r,a,1,s[0])}}}var Ddt=(function(){function n(t){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=t.life||1e3,this._delay=t.delay||0,this.loop=t.loop||!1,this.onframe=t.onframe||dn,this.ondestroy=t.ondestroy||dn,this.onrestart=t.onrestart||dn,t.easing&&this.setEasing(t.easing)}return n.prototype.step=function(t,e){if(this._inited||(this._startTime=t+this._delay,this._inited=!0),this._paused){this._pausedTime+=e;return}var i=this._life,r=t-this._startTime-this._pausedTime,o=r/i;o<0&&(o=0),o=Math.min(o,1);var a=this.easingFunc,s=a?a(o):o;if(this.onframe(s),o===1)if(this.loop){var l=r%i;this._startTime=t-l,this._pausedTime=0,this.onrestart()}else return!0;return!1},n.prototype.pause=function(){this._paused=!0},n.prototype.resume=function(){this._paused=!1},n.prototype.setEasing=function(t){this.easing=t,this.easingFunc=Dt(t)?t:V0[t]||PH(t)},n})(),CK=(function(){function n(t){this.value=t}return n})(),Idt=(function(){function n(){this._len=0}return n.prototype.insert=function(t){var e=new CK(t);return this.insertEntry(e),e},n.prototype.insertEntry=function(t){this.head?(this.tail.next=t,t.prev=this.tail,t.next=null,this.tail=t):this.head=this.tail=t,this._len++},n.prototype.remove=function(t){var e=t.prev,i=t.next;e?e.next=i:this.head=i,i?i.prev=e:this.tail=e,t.next=t.prev=null,this._len--},n.prototype.len=function(){return this._len},n.prototype.clear=function(){this.head=this.tail=null,this._len=0},n})(),Qb=(function(){function n(t){this._list=new Idt,this._maxSize=10,this._map={},this._maxSize=t}return n.prototype.put=function(t,e){var i=this._list,r=this._map,o=null;if(r[t]==null){var a=i.len(),s=this._lastRemovedEntry;if(a>=this._maxSize&&a>0){var l=i.head;i.remove(l),delete r[l.key],o=l.value,this._lastRemovedEntry=l}s?s.value=e:s=new CK(e),s.key=t,i.insertEntry(s),r[t]=s}return o},n.prototype.get=function(t){var e=this._map[t],i=this._list;if(e!=null)return e!==i.tail&&(i.remove(e),i.insertEntry(e)),e.value},n.prototype.clear=function(){this._list.clear(),this._map={}},n.prototype.len=function(){return this._list.len()},n})(),YN={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function ys(n){return n=Math.round(n),n<0?0:n>255?255:n}function Odt(n){return n=Math.round(n),n<0?0:n>360?360:n}function Ey(n){return n<0?0:n>1?1:n}function dR(n){var t=n;return t.length&&t.charAt(t.length-1)==="%"?ys(parseFloat(t)/100*255):ys(parseInt(t,10))}function nf(n){var t=n;return t.length&&t.charAt(t.length-1)==="%"?Ey(parseFloat(t)/100):Ey(parseFloat(t))}function cR(n,t,e){return e<0?e+=1:e>1&&(e-=1),e*6<1?n+(t-n)*e*6:e*2<1?t:e*3<2?n+(t-n)*(2/3-e)*6:n}function Lu(n,t,e){return n+(t-n)*e}function fa(n,t,e,i,r){return n[0]=t,n[1]=e,n[2]=i,n[3]=r,n}function uE(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n}var wK=new Qb(20),rC=null;function hg(n,t){rC&&uE(rC,t),rC=wK.put(n,rC||t.slice())}function qo(n,t){if(n){t=t||[];var e=wK.get(n);if(e)return uE(t,e);n=n+"";var i=n.replace(/ /g,"").toLowerCase();if(i in YN)return uE(t,YN[i]),hg(n,t),t;var r=i.length;if(i.charAt(0)==="#"){if(r===4||r===5){var o=parseInt(i.slice(1,4),16);if(!(o>=0&&o<=4095)){fa(t,0,0,0,1);return}return fa(t,(o&3840)>>4|(o&3840)>>8,o&240|(o&240)>>4,o&15|(o&15)<<4,r===5?parseInt(i.slice(4),16)/15:1),hg(n,t),t}else if(r===7||r===9){var o=parseInt(i.slice(1,7),16);if(!(o>=0&&o<=16777215)){fa(t,0,0,0,1);return}return fa(t,(o&16711680)>>16,(o&65280)>>8,o&255,r===9?parseInt(i.slice(7),16)/255:1),hg(n,t),t}return}var a=i.indexOf("("),s=i.indexOf(")");if(a!==-1&&s+1===r){var l=i.substr(0,a),h=i.substr(a+1,s-(a+1)).split(","),u=1;switch(l){case"rgba":if(h.length!==4)return h.length===3?fa(t,+h[0],+h[1],+h[2],1):fa(t,0,0,0,1);u=nf(h.pop());case"rgb":if(h.length>=3)return fa(t,dR(h[0]),dR(h[1]),dR(h[2]),h.length===3?u:nf(h[3])),hg(n,t),t;fa(t,0,0,0,1);return;case"hsla":if(h.length!==4){fa(t,0,0,0,1);return}return h[3]=nf(h[3]),dE(h,t),hg(n,t),t;case"hsl":if(h.length!==3){fa(t,0,0,0,1);return}return dE(h,t),hg(n,t),t;default:return}}fa(t,0,0,0,1)}}function dE(n,t){var e=(parseFloat(n[0])%360+360)%360/360,i=nf(n[1]),r=nf(n[2]),o=r<=.5?r*(i+1):r+i-r*i,a=r*2-o;return t=t||[],fa(t,ys(cR(a,o,e+1/3)*255),ys(cR(a,o,e)*255),ys(cR(a,o,e-1/3)*255),1),n.length===4&&(t[3]=n[3]),t}function Hdt(n){if(n){var t=n[0]/255,e=n[1]/255,i=n[2]/255,r=Math.min(t,e,i),o=Math.max(t,e,i),a=o-r,s=(o+r)/2,l,h;if(a===0)l=0,h=0;else{s<.5?h=a/(o+r):h=a/(2-o-r);var u=((o-t)/6+a/2)/a,d=((o-e)/6+a/2)/a,c=((o-i)/6+a/2)/a;t===o?l=c-d:e===o?l=1/3+u-c:i===o&&(l=2/3+d-u),l<0&&(l+=1),l>1&&(l-=1)}var f=[l*360,h,s];return n[3]!=null&&f.push(n[3]),f}}function cE(n,t){var e=qo(n);if(e){for(var i=0;i<3;i++)t<0?e[i]=e[i]*(1-t)|0:e[i]=(255-e[i])*t+e[i]|0,e[i]>255?e[i]=255:e[i]<0&&(e[i]=0);return wh(e,e.length===4?"rgba":"rgb")}}function fR(n,t,e){if(!(!(t&&t.length)||!(n>=0&&n<=1))){e=e||[];var i=n*(t.length-1),r=Math.floor(i),o=Math.ceil(i),a=t[r],s=t[o],l=i-r;return e[0]=ys(Lu(a[0],s[0],l)),e[1]=ys(Lu(a[1],s[1],l)),e[2]=ys(Lu(a[2],s[2],l)),e[3]=Ey(Lu(a[3],s[3],l)),e}}function zdt(n,t,e){if(!(!(t&&t.length)||!(n>=0&&n<=1))){var i=n*(t.length-1),r=Math.floor(i),o=Math.ceil(i),a=qo(t[r]),s=qo(t[o]),l=i-r,h=wh([ys(Lu(a[0],s[0],l)),ys(Lu(a[1],s[1],l)),ys(Lu(a[2],s[2],l)),Ey(Lu(a[3],s[3],l))],"rgba");return e?{color:h,leftIndex:r,rightIndex:o,value:i}:h}}function G0(n,t,e,i){var r=qo(n);if(n)return r=Hdt(r),t!=null&&(r[0]=Odt(t)),e!=null&&(r[1]=nf(e)),i!=null&&(r[2]=nf(i)),wh(dE(r),"rgba")}function ix(n,t){var e=qo(n);if(e&&t!=null)return e[3]=Ey(t),wh(e,"rgba")}function wh(n,t){if(!(!n||!n.length)){var e=n[0]+","+n[1]+","+n[2];return(t==="rgba"||t==="hsva"||t==="hsla")&&(e+=","+n[3]),t+"("+e+")"}}function nx(n,t){var e=qo(n);return e?(.299*e[0]+.587*e[1]+.114*e[2])*e[3]/255+(1-e[3])*t:0}var XN=new Qb(100);function fE(n){if(Ct(n)){var t=XN.get(n);return t||(t=cE(n,-.1),XN.put(n,t)),t}else if(LT(n)){var e=ht({},n);return e.colorStops=ct(n.colorStops,function(i){return{offset:i.offset,color:cE(i.color,-.1)}}),e}return n}var rx=Math.round;function Dy(n){var t;if(!n||n==="transparent")n="none";else if(typeof n=="string"&&n.indexOf("rgba")>-1){var e=qo(n);e&&(n="rgb("+e[0]+","+e[1]+","+e[2]+")",t=e[3])}return{color:n,opacity:t??1}}var qN=1e-4;function Eu(n){return n<qN&&n>-qN}function oC(n){return rx(n*1e3)/1e3}function gE(n){return rx(n*1e4)/1e4}function Fdt(n){return"matrix("+oC(n[0])+","+oC(n[1])+","+oC(n[2])+","+oC(n[3])+","+gE(n[4])+","+gE(n[5])+")"}var Ndt={left:"start",right:"end",center:"middle",middle:"middle"};function Wdt(n,t,e){return e==="top"?n+=t/2:e==="bottom"&&(n-=t/2),n}function Vdt(n){return n&&(n.shadowBlur||n.shadowOffsetX||n.shadowOffsetY)}function Gdt(n){var t=n.style,e=n.getGlobalScale();return[t.shadowColor,(t.shadowBlur||0).toFixed(2),(t.shadowOffsetX||0).toFixed(2),(t.shadowOffsetY||0).toFixed(2),e[0],e[1]].join(",")}function xK(n){return n&&!!n.image}function $dt(n){return n&&!!n.svgElement}function BH(n){return xK(n)||$dt(n)}function SK(n){return n.type==="linear"}function AK(n){return n.type==="radial"}function TK(n){return n&&(n.type==="linear"||n.type==="radial")}function IT(n){return"url(#"+n+")"}function MK(n){var t=n.getGlobalScale(),e=Math.max(t[0],t[1]);return Math.max(Math.ceil(Math.log(e)/Math.log(10)),1)}function RK(n){var t=n.x||0,e=n.y||0,i=(n.rotation||0)*aw,r=Yt(n.scaleX,1),o=Yt(n.scaleY,1),a=n.skewX||0,s=n.skewY||0,l=[];return(t||e)&&l.push("translate("+t+"px,"+e+"px)"),i&&l.push("rotate("+i+")"),(r!==1||o!==1)&&l.push("scale("+r+","+o+")"),(a||s)&&l.push("skew("+rx(a*aw)+"deg, "+rx(s*aw)+"deg)"),l.join(" ")}var jdt=(function(){return ce.hasGlobalWindow&&Dt(window.btoa)?function(n){return window.btoa(unescape(encodeURIComponent(n)))}:typeof Buffer<"u"?function(n){return Buffer.from(n).toString("base64")}:function(n){return null}})(),pE=Array.prototype.slice;function oh(n,t,e){return(t-n)*e+n}function gR(n,t,e,i){for(var r=t.length,o=0;o<r;o++)n[o]=oh(t[o],e[o],i);return n}function Udt(n,t,e,i){for(var r=t.length,o=r&&t[0].length,a=0;a<r;a++){n[a]||(n[a]=[]);for(var s=0;s<o;s++)n[a][s]=oh(t[a][s],e[a][s],i)}return n}function aC(n,t,e,i){for(var r=t.length,o=0;o<r;o++)n[o]=t[o]+e[o]*i;return n}function KN(n,t,e,i){for(var r=t.length,o=r&&t[0].length,a=0;a<r;a++){n[a]||(n[a]=[]);for(var s=0;s<o;s++)n[a][s]=t[a][s]+e[a][s]*i}return n}function Ydt(n,t){for(var e=n.length,i=t.length,r=e>i?t:n,o=Math.min(e,i),a=r[o-1]||{color:[0,0,0,0],offset:0},s=o;s<Math.max(e,i);s++)r.push({offset:a.offset,color:a.color.slice()})}function Xdt(n,t,e){var i=n,r=t;if(!(!i.push||!r.push)){var o=i.length,a=r.length;if(o!==a){var s=o>a;if(s)i.length=a;else for(var l=o;l<a;l++)i.push(e===1?r[l]:pE.call(r[l]))}for(var h=i[0]&&i[0].length,l=0;l<i.length;l++)if(e===1)isNaN(i[l])&&(i[l]=r[l]);else for(var u=0;u<h;u++)isNaN(i[l][u])&&(i[l][u]=r[l][u])}}function $0(n){if(Wr(n)){var t=n.length;if(Wr(n[0])){for(var e=[],i=0;i<t;i++)e.push(pE.call(n[i]));return e}return pE.call(n)}return n}function uw(n){return n[0]=Math.floor(n[0])||0,n[1]=Math.floor(n[1])||0,n[2]=Math.floor(n[2])||0,n[3]=n[3]==null?1:n[3],"rgba("+n.join(",")+")"}function qdt(n){return Wr(n&&n[0])?2:1}var sC=0,dw=1,PK=2,f0=3,vE=4,mE=5,ZN=6;function JN(n){return n===vE||n===mE}function lC(n){return n===dw||n===PK}var _m=[0,0,0,0],Kdt=(function(){function n(t){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=t}return n.prototype.isFinished=function(){return this._finished},n.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},n.prototype.needsAnimate=function(){return this.keyframes.length>=1},n.prototype.getAdditiveTrack=function(){return this._additiveTrack},n.prototype.addKeyframe=function(t,e,i){this._needsSort=!0;var r=this.keyframes,o=r.length,a=!1,s=ZN,l=e;if(Wr(e)){var h=qdt(e);s=h,(h===1&&!Le(e[0])||h===2&&!Le(e[0][0]))&&(a=!0)}else if(Le(e)&&!By(e))s=sC;else if(Ct(e))if(!isNaN(+e))s=sC;else{var u=qo(e);u&&(l=u,s=f0)}else if(LT(e)){var d=ht({},l);d.colorStops=ct(e.colorStops,function(f){return{offset:f.offset,color:qo(f.color)}}),SK(e)?s=vE:AK(e)&&(s=mE),l=d}o===0?this.valType=s:(s!==this.valType||s===ZN)&&(a=!0),this.discrete=this.discrete||a;var c={time:t,value:l,rawValue:e,percent:0};return i&&(c.easing=i,c.easingFunc=Dt(i)?i:V0[i]||PH(i)),r.push(c),c},n.prototype.prepare=function(t,e){var i=this.keyframes;this._needsSort&&i.sort(function(p,v){return p.time-v.time});for(var r=this.valType,o=i.length,a=i[o-1],s=this.discrete,l=lC(r),h=JN(r),u=0;u<o;u++){var d=i[u],c=d.value,f=a.value;d.percent=d.time/t,s||(l&&u!==o-1?Xdt(c,f,r):h&&Ydt(c.colorStops,f.colorStops))}if(!s&&r!==mE&&e&&this.needsAnimate()&&e.needsAnimate()&&r===e.valType&&!e._finished){this._additiveTrack=e;for(var g=i[0].value,u=0;u<o;u++)r===sC?i[u].additiveValue=i[u].value-g:r===f0?i[u].additiveValue=aC([],i[u].value,g,-1):lC(r)&&(i[u].additiveValue=r===dw?aC([],i[u].value,g,-1):KN([],i[u].value,g,-1))}},n.prototype.step=function(t,e){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var i=this._additiveTrack!=null,r=i?"additiveValue":"value",o=this.valType,a=this.keyframes,s=a.length,l=this.propName,h=o===f0,u,d=this._lastFr,c=Math.min,f,g;if(s===1)f=g=a[0];else{if(e<0)u=0;else if(e<this._lastFrP){var p=c(d+1,s-1);for(u=p;u>=0&&!(a[u].percent<=e);u--);u=c(u,s-2)}else{for(u=d;u<s&&!(a[u].percent>e);u++);u=c(u-1,s-2)}g=a[u+1],f=a[u]}if(f&&g){this._lastFr=u,this._lastFrP=e;var v=g.percent-f.percent,m=v===0?1:c((e-f.percent)/v,1);g.easingFunc&&(m=g.easingFunc(m));var y=i?this._additiveValue:h?_m:t[l];if((lC(o)||h)&&!y&&(y=this._additiveValue=[]),this.discrete)t[l]=m<1?f.rawValue:g.rawValue;else if(lC(o))o===dw?gR(y,f[r],g[r],m):Udt(y,f[r],g[r],m);else if(JN(o)){var b=f[r],_=g[r],w=o===vE;t[l]={type:w?"linear":"radial",x:oh(b.x,_.x,m),y:oh(b.y,_.y,m),colorStops:ct(b.colorStops,function(x,S){var A=_.colorStops[S];return{offset:oh(x.offset,A.offset,m),color:uw(gR([],x.color,A.color,m))}}),global:_.global},w?(t[l].x2=oh(b.x2,_.x2,m),t[l].y2=oh(b.y2,_.y2,m)):t[l].r=oh(b.r,_.r,m)}else if(h)gR(y,f[r],g[r],m),i||(t[l]=uw(y));else{var C=oh(f[r],g[r],m);i?this._additiveValue=C:t[l]=C}i&&this._addToTarget(t)}}},n.prototype._addToTarget=function(t){var e=this.valType,i=this.propName,r=this._additiveValue;e===sC?t[i]=t[i]+r:e===f0?(qo(t[i],_m),aC(_m,_m,r,1),t[i]=uw(_m)):e===dw?aC(t[i],t[i],r,1):e===PK&&KN(t[i],t[i],r,1)},n})(),kH=(function(){function n(t,e,i,r){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=t,this._loop=e,e&&r){wH("Can' use additive animation on looped animation.");return}this._additiveAnimators=r,this._allowDiscrete=i}return n.prototype.getMaxTime=function(){return this._maxTime},n.prototype.getDelay=function(){return this._delay},n.prototype.getLoop=function(){return this._loop},n.prototype.getTarget=function(){return this._target},n.prototype.changeTarget=function(t){this._target=t},n.prototype.when=function(t,e,i){return this.whenWithKeys(t,e,pe(e),i)},n.prototype.whenWithKeys=function(t,e,i,r){for(var o=this._tracks,a=0;a<i.length;a++){var s=i[a],l=o[s];if(!l){l=o[s]=new Kdt(s);var h=void 0,u=this._getAdditiveTrack(s);if(u){var d=u.keyframes,c=d[d.length-1];h=c&&c.value,u.valType===f0&&h&&(h=uw(h))}else h=this._target[s];if(h==null)continue;t>0&&l.addKeyframe(0,$0(h),r),this._trackKeys.push(s)}l.addKeyframe(t,$0(e[s]),r)}return this._maxTime=Math.max(this._maxTime,t),this},n.prototype.pause=function(){this._clip.pause(),this._paused=!0},n.prototype.resume=function(){this._clip.resume(),this._paused=!1},n.prototype.isPaused=function(){return!!this._paused},n.prototype.duration=function(t){return this._maxTime=t,this._force=!0,this},n.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var t=this._doneCbs;if(t)for(var e=t.length,i=0;i<e;i++)t[i].call(this)},n.prototype._abortedCallback=function(){this._setTracksFinished();var t=this.animation,e=this._abortedCbs;if(t&&t.removeClip(this._clip),this._clip=null,e)for(var i=0;i<e.length;i++)e[i].call(this)},n.prototype._setTracksFinished=function(){for(var t=this._tracks,e=this._trackKeys,i=0;i<e.length;i++)t[e[i]].setFinished()},n.prototype._getAdditiveTrack=function(t){var e,i=this._additiveAnimators;if(i)for(var r=0;r<i.length;r++){var o=i[r].getTrack(t);o&&(e=o)}return e},n.prototype.start=function(t){if(!(this._started>0)){this._started=1;for(var e=this,i=[],r=this._maxTime||0,o=0;o<this._trackKeys.length;o++){var a=this._trackKeys[o],s=this._tracks[a],l=this._getAdditiveTrack(a),h=s.keyframes,u=h.length;if(s.prepare(r,l),s.needsAnimate())if(!this._allowDiscrete&&s.discrete){var d=h[u-1];d&&(e._target[s.propName]=d.rawValue),s.setFinished()}else i.push(s)}if(i.length||this._force){var c=new Ddt({life:r,loop:this._loop,delay:this._delay||0,onframe:function(f){e._started=2;var g=e._additiveAnimators;if(g){for(var p=!1,v=0;v<g.length;v++)if(g[v]._clip){p=!0;break}p||(e._additiveAnimators=null)}for(var v=0;v<i.length;v++)i[v].step(e._target,f);var m=e._onframeCbs;if(m)for(var v=0;v<m.length;v++)m[v](e._target,f)},ondestroy:function(){e._doneCallback()}});this._clip=c,this.animation&&this.animation.addClip(c),t&&c.setEasing(t)}else this._doneCallback();return this}},n.prototype.stop=function(t){if(this._clip){var e=this._clip;t&&e.onframe(1),this._abortedCallback()}},n.prototype.delay=function(t){return this._delay=t,this},n.prototype.during=function(t){return t&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(t)),this},n.prototype.done=function(t){return t&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(t)),this},n.prototype.aborted=function(t){return t&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(t)),this},n.prototype.getClip=function(){return this._clip},n.prototype.getTrack=function(t){return this._tracks[t]},n.prototype.getTracks=function(){var t=this;return ct(this._trackKeys,function(e){return t._tracks[e]})},n.prototype.stopTracks=function(t,e){if(!t.length||!this._clip)return!0;for(var i=this._tracks,r=this._trackKeys,o=0;o<t.length;o++){var a=i[t[o]];a&&!a.isFinished()&&(e?a.step(this._target,1):this._started===1&&a.step(this._target,0),a.setFinished())}for(var s=!0,o=0;o<r.length;o++)if(!i[r[o]].isFinished()){s=!1;break}return s&&this._abortedCallback(),s},n.prototype.saveTo=function(t,e,i){if(t){e=e||this._trackKeys;for(var r=0;r<e.length;r++){var o=e[r],a=this._tracks[o];if(!(!a||a.isFinished())){var s=a.keyframes,l=s[i?0:s.length-1];l&&(t[o]=$0(l.rawValue))}}}},n.prototype.__changeFinalValue=function(t,e){e=e||pe(t);for(var i=0;i<e.length;i++){var r=e[i],o=this._tracks[r];if(o){var a=o.keyframes;if(a.length>1){var s=a.pop();o.addKeyframe(s.time,t[r]),o.prepare(this._maxTime,o.getAdditiveTrack())}}}},n})();function ip(){return new Date().getTime()}var Zdt=(function(n){et(t,n);function t(e){var i=n.call(this)||this;return i._running=!1,i._time=0,i._pausedTime=0,i._pauseStart=0,i._paused=!1,e=e||{},i.stage=e.stage||{},i}return t.prototype.addClip=function(e){e.animation&&this.removeClip(e),this._head?(this._tail.next=e,e.prev=this._tail,e.next=null,this._tail=e):this._head=this._tail=e,e.animation=this},t.prototype.addAnimator=function(e){e.animation=this;var i=e.getClip();i&&this.addClip(i)},t.prototype.removeClip=function(e){if(e.animation){var i=e.prev,r=e.next;i?i.next=r:this._head=r,r?r.prev=i:this._tail=i,e.next=e.prev=e.animation=null}},t.prototype.removeAnimator=function(e){var i=e.getClip();i&&this.removeClip(i),e.animation=null},t.prototype.update=function(e){for(var i=ip()-this._pausedTime,r=i-this._time,o=this._head;o;){var a=o.next,s=o.step(i,r);s&&(o.ondestroy(),this.removeClip(o)),o=a}this._time=i,e||(this.trigger("frame",r),this.stage.update&&this.stage.update())},t.prototype._startLoop=function(){var e=this;this._running=!0;function i(){e._running&&(Qw(i),!e._paused&&e.update())}Qw(i)},t.prototype.start=function(){this._running||(this._time=ip(),this._pausedTime=0,this._startLoop())},t.prototype.stop=function(){this._running=!1},t.prototype.pause=function(){this._paused||(this._pauseStart=ip(),this._paused=!0)},t.prototype.resume=function(){this._paused&&(this._pausedTime+=ip()-this._pauseStart,this._paused=!1)},t.prototype.clear=function(){for(var e=this._head;e;){var i=e.next;e.prev=e.next=e.animation=null,e=i}this._head=this._tail=null},t.prototype.isFinished=function(){return this._head==null},t.prototype.animate=function(e,i){i=i||{},this.start();var r=new kH(e,i.loop);return this.addAnimator(r),r},t})(Ya),Jdt=300,pR=ce.domSupported,vR=(function(){var n=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],t=["touchstart","touchend","touchmove"],e={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},i=ct(n,function(r){var o=r.replace("mouse","pointer");return e.hasOwnProperty(o)?o:r});return{mouse:n,touch:t,pointer:i}})(),QN={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},t5=!1;function yE(n){var t=n.pointerType;return t==="pen"||t==="touch"}function Qdt(n){n.touching=!0,n.touchTimer!=null&&(clearTimeout(n.touchTimer),n.touchTimer=null),n.touchTimer=setTimeout(function(){n.touching=!1,n.touchTimer=null},700)}function mR(n){n&&(n.zrByTouch=!0)}function tct(n,t){return pa(n.dom,new ect(n,t),!0)}function BK(n,t){for(var e=t,i=!1;e&&e.nodeType!==9&&!(i=e.domBelongToZr||e!==t&&e===n.painterRoot);)e=e.parentNode;return i}var ect=(function(){function n(t,e){this.stopPropagation=dn,this.stopImmediatePropagation=dn,this.preventDefault=dn,this.type=e.type,this.target=this.currentTarget=t.dom,this.pointerType=e.pointerType,this.clientX=e.clientX,this.clientY=e.clientY}return n})(),ns={mousedown:function(n){n=pa(this.dom,n),this.__mayPointerCapture=[n.zrX,n.zrY],this.trigger("mousedown",n)},mousemove:function(n){n=pa(this.dom,n);var t=this.__mayPointerCapture;t&&(n.zrX!==t[0]||n.zrY!==t[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",n)},mouseup:function(n){n=pa(this.dom,n),this.__togglePointerCapture(!1),this.trigger("mouseup",n)},mouseout:function(n){n=pa(this.dom,n);var t=n.toElement||n.relatedTarget;BK(this,t)||(this.__pointerCapturing&&(n.zrEventControl="no_globalout"),this.trigger("mouseout",n))},wheel:function(n){t5=!0,n=pa(this.dom,n),this.trigger("mousewheel",n)},mousewheel:function(n){t5||(n=pa(this.dom,n),this.trigger("mousewheel",n))},touchstart:function(n){n=pa(this.dom,n),mR(n),this.__lastTouchMoment=new Date,this.handler.processGesture(n,"start"),ns.mousemove.call(this,n),ns.mousedown.call(this,n)},touchmove:function(n){n=pa(this.dom,n),mR(n),this.handler.processGesture(n,"change"),ns.mousemove.call(this,n)},touchend:function(n){n=pa(this.dom,n),mR(n),this.handler.processGesture(n,"end"),ns.mouseup.call(this,n),+new Date-+this.__lastTouchMoment<Jdt&&ns.click.call(this,n)},pointerdown:function(n){ns.mousedown.call(this,n)},pointermove:function(n){yE(n)||ns.mousemove.call(this,n)},pointerup:function(n){ns.mouseup.call(this,n)},pointerout:function(n){yE(n)||ns.mouseout.call(this,n)}};z(["click","dblclick","contextmenu"],function(n){ns[n]=function(t){t=pa(this.dom,t),this.trigger(n,t)}});var bE={pointermove:function(n){yE(n)||bE.mousemove.call(this,n)},pointerup:function(n){bE.mouseup.call(this,n)},mousemove:function(n){this.trigger("mousemove",n)},mouseup:function(n){var t=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",n),t&&(n.zrEventControl="only_globalout",this.trigger("mouseout",n))}};function ict(n,t){var e=t.domHandlers;ce.pointerEventsSupported?z(vR.pointer,function(i){cw(t,i,function(r){e[i].call(n,r)})}):(ce.touchEventsSupported&&z(vR.touch,function(i){cw(t,i,function(r){e[i].call(n,r),Qdt(t)})}),z(vR.mouse,function(i){cw(t,i,function(r){r=TH(r),t.touching||e[i].call(n,r)})}))}function nct(n,t){ce.pointerEventsSupported?z(QN.pointer,e):ce.touchEventsSupported||z(QN.mouse,e);function e(i){function r(o){o=TH(o),BK(n,o.target)||(o=tct(n,o),t.domHandlers[i].call(n,o))}cw(t,i,r,{capture:!0})}}function cw(n,t,e,i){n.mounted[t]=e,n.listenerOpts[t]=i,lE(n.domTarget,t,e,i)}function yR(n){var t=n.mounted;for(var e in t)t.hasOwnProperty(e)&&mdt(n.domTarget,e,t[e],n.listenerOpts[e]);n.mounted={}}var e5=(function(){function n(t,e){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=t,this.domHandlers=e}return n})(),rct=(function(n){et(t,n);function t(e,i){var r=n.call(this)||this;return r.__pointerCapturing=!1,r.dom=e,r.painterRoot=i,r._localHandlerScope=new e5(e,ns),pR&&(r._globalHandlerScope=new e5(document,bE)),ict(r,r._localHandlerScope),r}return t.prototype.dispose=function(){yR(this._localHandlerScope),pR&&yR(this._globalHandlerScope)},t.prototype.setCursor=function(e){this.dom.style&&(this.dom.style.cursor=e||"default")},t.prototype.__togglePointerCapture=function(e){if(this.__mayPointerCapture=null,pR&&+this.__pointerCapturing^+e){this.__pointerCapturing=e;var i=this._globalHandlerScope;e?nct(this,i):yR(i)}},t})(Ya),kK=1;ce.hasGlobalWindow&&(kK=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var ox=kK,_E=.4,CE="#333",wE="#ccc",oct="#eee",i5=DT,n5=5e-5;function kd(n){return n>n5||n<-n5}var Ld=[],ug=[],bR=Xo(),_R=Math.abs,gh=(function(){function n(){}return n.prototype.getLocalTransform=function(t){return n.getLocalTransform(this,t)},n.prototype.setPosition=function(t){this.x=t[0],this.y=t[1]},n.prototype.setScale=function(t){this.scaleX=t[0],this.scaleY=t[1]},n.prototype.setSkew=function(t){this.skewX=t[0],this.skewY=t[1]},n.prototype.setOrigin=function(t){this.originX=t[0],this.originY=t[1]},n.prototype.needLocalTransform=function(){return kd(this.rotation)||kd(this.x)||kd(this.y)||kd(this.scaleX-1)||kd(this.scaleY-1)||kd(this.skewX)||kd(this.skewY)},n.prototype.updateTransform=function(){var t=this.parent&&this.parent.transform,e=this.needLocalTransform(),i=this.transform;if(!(e||t)){i&&(i5(i),this.invTransform=null);return}i=i||Xo(),e?this.getLocalTransform(i):i5(i),t&&(e?Ch(i,t,i):MH(i,t)),this.transform=i,this._resolveGlobalScaleRatio(i)},n.prototype._resolveGlobalScaleRatio=function(t){var e=this.globalScaleRatio;if(e!=null&&e!==1){this.getGlobalScale(Ld);var i=Ld[0]<0?-1:1,r=Ld[1]<0?-1:1,o=((Ld[0]-i)*e+i)/Ld[0]||0,a=((Ld[1]-r)*e+r)/Ld[1]||0;t[0]*=o,t[1]*=o,t[2]*=a,t[3]*=a}this.invTransform=this.invTransform||Xo(),Hv(this.invTransform,t)},n.prototype.getComputedTransform=function(){for(var t=this,e=[];t;)e.push(t),t=t.parent;for(;t=e.pop();)t.updateTransform();return this.transform},n.prototype.setLocalTransform=function(t){if(t){var e=t[0]*t[0]+t[1]*t[1],i=t[2]*t[2]+t[3]*t[3],r=Math.atan2(t[1],t[0]),o=Math.PI/2+r-Math.atan2(t[3],t[2]);i=Math.sqrt(i)*Math.cos(o),e=Math.sqrt(e),this.skewX=o,this.skewY=0,this.rotation=-r,this.x=+t[4],this.y=+t[5],this.scaleX=e,this.scaleY=i,this.originX=0,this.originY=0}},n.prototype.decomposeTransform=function(){if(this.transform){var t=this.parent,e=this.transform;t&&t.transform&&(t.invTransform=t.invTransform||Xo(),Ch(ug,t.invTransform,e),e=ug);var i=this.originX,r=this.originY;(i||r)&&(bR[4]=i,bR[5]=r,Ch(ug,e,bR),ug[4]-=i,ug[5]-=r,e=ug),this.setLocalTransform(e)}},n.prototype.getGlobalScale=function(t){var e=this.transform;return t=t||[],e?(t[0]=Math.sqrt(e[0]*e[0]+e[1]*e[1]),t[1]=Math.sqrt(e[2]*e[2]+e[3]*e[3]),e[0]<0&&(t[0]=-t[0]),e[3]<0&&(t[1]=-t[1]),t):(t[0]=1,t[1]=1,t)},n.prototype.transformCoordToLocal=function(t,e){var i=[t,e],r=this.invTransform;return r&&Sr(i,i,r),i},n.prototype.transformCoordToGlobal=function(t,e){var i=[t,e],r=this.transform;return r&&Sr(i,i,r),i},n.prototype.getLineScale=function(){var t=this.transform;return t&&_R(t[0]-1)>1e-10&&_R(t[3]-1)>1e-10?Math.sqrt(_R(t[0]*t[3]-t[2]*t[1])):1},n.prototype.copyTransform=function(t){LK(this,t)},n.getLocalTransform=function(t,e){e=e||[];var i=t.originX||0,r=t.originY||0,o=t.scaleX,a=t.scaleY,s=t.anchorX,l=t.anchorY,h=t.rotation||0,u=t.x,d=t.y,c=t.skewX?Math.tan(t.skewX):0,f=t.skewY?Math.tan(-t.skewY):0;if(i||r||s||l){var g=i+s,p=r+l;e[4]=-g*o-c*p*a,e[5]=-p*a-f*g*o}else e[4]=e[5]=0;return e[0]=o,e[3]=a,e[1]=f*o,e[2]=c*a,h&&qf(e,e,h),e[4]+=i+u,e[5]+=r+d,e},n.initDefaultProps=(function(){var t=n.prototype;t.scaleX=t.scaleY=t.globalScaleRatio=1,t.x=t.y=t.originX=t.originY=t.skewX=t.skewY=t.rotation=t.anchorX=t.anchorY=0})(),n})(),Sl=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function LK(n,t){for(var e=0;e<Sl.length;e++){var i=Sl[e];n[i]=t[i]}}var r5={};function Ko(n,t){t=t||Zu;var e=r5[t];e||(e=r5[t]=new Qb(500));var i=e.get(n);return i==null&&(i=Ju.measureText(n,t).width,e.put(n,i)),i}function o5(n,t,e,i){var r=Ko(n,t),o=OT(t),a=g0(0,r,e),s=qg(0,o,i),l=new te(a,s,r,o);return l}function t_(n,t,e,i){var r=((n||"")+"").split(`
`),o=r.length;if(o===1)return o5(r[0],t,e,i);for(var a=new te(0,0,0,0),s=0;s<r.length;s++){var l=o5(r[s],t,e,i);s===0?a.copy(l):a.union(l)}return a}function g0(n,t,e){return e==="right"?n-=t:e==="center"&&(n-=t/2),n}function qg(n,t,e){return e==="middle"?n-=t/2:e==="bottom"&&(n-=t),n}function OT(n){return Ko("",n)}function Ss(n,t){return typeof n=="string"?n.lastIndexOf("%")>=0?parseFloat(n)/100*t:parseFloat(n):n}function ax(n,t,e){var i=t.position||"inside",r=t.distance!=null?t.distance:5,o=e.height,a=e.width,s=o/2,l=e.x,h=e.y,u="left",d="top";if(i instanceof Array)l+=Ss(i[0],e.width),h+=Ss(i[1],e.height),u=null,d=null;else switch(i){case"left":l-=r,h+=s,u="right",d="middle";break;case"right":l+=r+a,h+=s,d="middle";break;case"top":l+=a/2,h-=r,u="center",d="bottom";break;case"bottom":l+=a/2,h+=o+r,u="center";break;case"inside":l+=a/2,h+=s,u="center",d="middle";break;case"insideLeft":l+=r,h+=s,d="middle";break;case"insideRight":l+=a-r,h+=s,u="right",d="middle";break;case"insideTop":l+=a/2,h+=r,u="center";break;case"insideBottom":l+=a/2,h+=o-r,u="center",d="bottom";break;case"insideTopLeft":l+=r,h+=r;break;case"insideTopRight":l+=a-r,h+=r,u="right";break;case"insideBottomLeft":l+=r,h+=o-r,d="bottom";break;case"insideBottomRight":l+=a-r,h+=o-r,u="right",d="bottom";break}return n=n||{},n.x=l,n.y=h,n.align=u,n.verticalAlign=d,n}var CR="__zr_normal__",wR=Sl.concat(["ignore"]),act=wl(Sl,function(n,t){return n[t]=!0,n},{ignore:!1}),dg={},sct=new te(0,0,0,0),HT=(function(){function n(t){this.id=aK(),this.animators=[],this.currentStates=[],this.states={},this._init(t)}return n.prototype._init=function(t){this.attr(t)},n.prototype.drift=function(t,e,i){switch(this.draggable){case"horizontal":e=0;break;case"vertical":t=0;break}var r=this.transform;r||(r=this.transform=[1,0,0,1,0,0]),r[4]+=t,r[5]+=e,this.decomposeTransform(),this.markRedraw()},n.prototype.beforeUpdate=function(){},n.prototype.afterUpdate=function(){},n.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},n.prototype.updateInnerText=function(t){var e=this._textContent;if(e&&(!e.ignore||t)){this.textConfig||(this.textConfig={});var i=this.textConfig,r=i.local,o=e.innerTransformable,a=void 0,s=void 0,l=!1;o.parent=r?this:null;var h=!1;if(o.copyTransform(e),i.position!=null){var u=sct;i.layoutRect?u.copy(i.layoutRect):u.copy(this.getBoundingRect()),r||u.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(dg,i,u):ax(dg,i,u),o.x=dg.x,o.y=dg.y,a=dg.align,s=dg.verticalAlign;var d=i.origin;if(d&&i.rotation!=null){var c=void 0,f=void 0;d==="center"?(c=u.width*.5,f=u.height*.5):(c=Ss(d[0],u.width),f=Ss(d[1],u.height)),h=!0,o.originX=-o.x+c+(r?0:u.x),o.originY=-o.y+f+(r?0:u.y)}}i.rotation!=null&&(o.rotation=i.rotation);var g=i.offset;g&&(o.x+=g[0],o.y+=g[1],h||(o.originX=-g[0],o.originY=-g[1]));var p=i.inside==null?typeof i.position=="string"&&i.position.indexOf("inside")>=0:i.inside,v=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),m=void 0,y=void 0,b=void 0;p&&this.canBeInsideText()?(m=i.insideFill,y=i.insideStroke,(m==null||m==="auto")&&(m=this.getInsideTextFill()),(y==null||y==="auto")&&(y=this.getInsideTextStroke(m),b=!0)):(m=i.outsideFill,y=i.outsideStroke,(m==null||m==="auto")&&(m=this.getOutsideFill()),(y==null||y==="auto")&&(y=this.getOutsideStroke(m),b=!0)),m=m||"#000",(m!==v.fill||y!==v.stroke||b!==v.autoStroke||a!==v.align||s!==v.verticalAlign)&&(l=!0,v.fill=m,v.stroke=y,v.autoStroke=b,v.align=a,v.verticalAlign=s,e.setDefaultTextStyle(v)),e.__dirty|=$o,l&&e.dirtyStyle(!0)}},n.prototype.canBeInsideText=function(){return!0},n.prototype.getInsideTextFill=function(){return"#fff"},n.prototype.getInsideTextStroke=function(t){return"#000"},n.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?wE:CE},n.prototype.getOutsideStroke=function(t){var e=this.__zr&&this.__zr.getBackgroundColor(),i=typeof e=="string"&&qo(e);i||(i=[255,255,255,1]);for(var r=i[3],o=this.__zr.isDarkMode(),a=0;a<3;a++)i[a]=i[a]*r+(o?0:255)*(1-r);return i[3]=1,wh(i,"rgba")},n.prototype.traverse=function(t,e){},n.prototype.attrKV=function(t,e){t==="textConfig"?this.setTextConfig(e):t==="textContent"?this.setTextContent(e):t==="clipPath"?this.setClipPath(e):t==="extra"?(this.extra=this.extra||{},ht(this.extra,e)):this[t]=e},n.prototype.hide=function(){this.ignore=!0,this.markRedraw()},n.prototype.show=function(){this.ignore=!1,this.markRedraw()},n.prototype.attr=function(t,e){if(typeof t=="string")this.attrKV(t,e);else if(Ht(t))for(var i=t,r=pe(i),o=0;o<r.length;o++){var a=r[o];this.attrKV(a,t[a])}return this.markRedraw(),this},n.prototype.saveCurrentToNormalState=function(t){this._innerSaveToNormal(t);for(var e=this._normalState,i=0;i<this.animators.length;i++){var r=this.animators[i],o=r.__fromStateTransition;if(!(r.getLoop()||o&&o!==CR)){var a=r.targetName,s=a?e[a]:e;r.saveTo(s)}}},n.prototype._innerSaveToNormal=function(t){var e=this._normalState;e||(e=this._normalState={}),t.textConfig&&!e.textConfig&&(e.textConfig=this.textConfig),this._savePrimaryToNormal(t,e,wR)},n.prototype._savePrimaryToNormal=function(t,e,i){for(var r=0;r<i.length;r++){var o=i[r];t[o]!=null&&!(o in e)&&(e[o]=this[o])}},n.prototype.hasState=function(){return this.currentStates.length>0},n.prototype.getState=function(t){return this.states[t]},n.prototype.ensureState=function(t){var e=this.states;return e[t]||(e[t]={}),e[t]},n.prototype.clearStates=function(t){this.useState(CR,!1,t)},n.prototype.useState=function(t,e,i,r){var o=t===CR,a=this.hasState();if(!(!a&&o)){var s=this.currentStates,l=this.stateTransition;if(!(ee(s,t)>=0&&(e||s.length===1))){var h;if(this.stateProxy&&!o&&(h=this.stateProxy(t)),h||(h=this.states&&this.states[t]),!h&&!o){wH("State "+t+" not exists.");return}o||this.saveCurrentToNormalState(h);var u=!!(h&&h.hoverLayer||r);u&&this._toggleHoverLayerFlag(!0),this._applyStateObj(t,h,this._normalState,e,!i&&!this.__inHover&&l&&l.duration>0,l);var d=this._textContent,c=this._textGuide;return d&&d.useState(t,e,i,u),c&&c.useState(t,e,i,u),o?(this.currentStates=[],this._normalState={}):e?this.currentStates.push(t):this.currentStates=[t],this._updateAnimationTargets(),this.markRedraw(),!u&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~$o),h}}},n.prototype.useStates=function(t,e,i){if(!t.length)this.clearStates();else{var r=[],o=this.currentStates,a=t.length,s=a===o.length;if(s){for(var l=0;l<a;l++)if(t[l]!==o[l]){s=!1;break}}if(s)return;for(var l=0;l<a;l++){var h=t[l],u=void 0;this.stateProxy&&(u=this.stateProxy(h,t)),u||(u=this.states[h]),u&&r.push(u)}var d=r[a-1],c=!!(d&&d.hoverLayer||i);c&&this._toggleHoverLayerFlag(!0);var f=this._mergeStates(r),g=this.stateTransition;this.saveCurrentToNormalState(f),this._applyStateObj(t.join(","),f,this._normalState,!1,!e&&!this.__inHover&&g&&g.duration>0,g);var p=this._textContent,v=this._textGuide;p&&p.useStates(t,e,c),v&&v.useStates(t,e,c),this._updateAnimationTargets(),this.currentStates=t.slice(),this.markRedraw(),!c&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~$o)}},n.prototype.isSilent=function(){for(var t=this.silent,e=this.parent;!t&&e;){if(e.silent){t=!0;break}e=e.parent}return t},n.prototype._updateAnimationTargets=function(){for(var t=0;t<this.animators.length;t++){var e=this.animators[t];e.targetName&&e.changeTarget(this[e.targetName])}},n.prototype.removeState=function(t){var e=ee(this.currentStates,t);if(e>=0){var i=this.currentStates.slice();i.splice(e,1),this.useStates(i)}},n.prototype.replaceState=function(t,e,i){var r=this.currentStates.slice(),o=ee(r,t),a=ee(r,e)>=0;o>=0?a?r.splice(o,1):r[o]=e:i&&!a&&r.push(e),this.useStates(r)},n.prototype.toggleState=function(t,e){e?this.useState(t,!0):this.removeState(t)},n.prototype._mergeStates=function(t){for(var e={},i,r=0;r<t.length;r++){var o=t[r];ht(e,o),o.textConfig&&(i=i||{},ht(i,o.textConfig))}return i&&(e.textConfig=i),e},n.prototype._applyStateObj=function(t,e,i,r,o,a){var s=!(e&&r);e&&e.textConfig?(this.textConfig=ht({},r?this.textConfig:i.textConfig),ht(this.textConfig,e.textConfig)):s&&i.textConfig&&(this.textConfig=i.textConfig);for(var l={},h=!1,u=0;u<wR.length;u++){var d=wR[u],c=o&&act[d];e&&e[d]!=null?c?(h=!0,l[d]=e[d]):this[d]=e[d]:s&&i[d]!=null&&(c?(h=!0,l[d]=i[d]):this[d]=i[d])}if(!o)for(var u=0;u<this.animators.length;u++){var f=this.animators[u],g=f.targetName;f.getLoop()||f.__changeFinalValue(g?(e||i)[g]:e||i)}h&&this._transitionState(t,l,a)},n.prototype._attachComponent=function(t){if(!(t.__zr&&!t.__hostTarget)&&t!==this){var e=this.__zr;e&&t.addSelfToZr(e),t.__zr=e,t.__hostTarget=this}},n.prototype._detachComponent=function(t){t.__zr&&t.removeSelfFromZr(t.__zr),t.__zr=null,t.__hostTarget=null},n.prototype.getClipPath=function(){return this._clipPath},n.prototype.setClipPath=function(t){this._clipPath&&this._clipPath!==t&&this.removeClipPath(),this._attachComponent(t),this._clipPath=t,this.markRedraw()},n.prototype.removeClipPath=function(){var t=this._clipPath;t&&(this._detachComponent(t),this._clipPath=null,this.markRedraw())},n.prototype.getTextContent=function(){return this._textContent},n.prototype.setTextContent=function(t){var e=this._textContent;e!==t&&(e&&e!==t&&this.removeTextContent(),t.innerTransformable=new gh,this._attachComponent(t),this._textContent=t,this.markRedraw())},n.prototype.setTextConfig=function(t){this.textConfig||(this.textConfig={}),ht(this.textConfig,t),this.markRedraw()},n.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},n.prototype.removeTextContent=function(){var t=this._textContent;t&&(t.innerTransformable=null,this._detachComponent(t),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},n.prototype.getTextGuideLine=function(){return this._textGuide},n.prototype.setTextGuideLine=function(t){this._textGuide&&this._textGuide!==t&&this.removeTextGuideLine(),this._attachComponent(t),this._textGuide=t,this.markRedraw()},n.prototype.removeTextGuideLine=function(){var t=this._textGuide;t&&(this._detachComponent(t),this._textGuide=null,this.markRedraw())},n.prototype.markRedraw=function(){this.__dirty|=$o;var t=this.__zr;t&&(this.__inHover?t.refreshHover():t.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},n.prototype.dirty=function(){this.markRedraw()},n.prototype._toggleHoverLayerFlag=function(t){this.__inHover=t;var e=this._textContent,i=this._textGuide;e&&(e.__inHover=t),i&&(i.__inHover=t)},n.prototype.addSelfToZr=function(t){if(this.__zr!==t){this.__zr=t;var e=this.animators;if(e)for(var i=0;i<e.length;i++)t.animation.addAnimator(e[i]);this._clipPath&&this._clipPath.addSelfToZr(t),this._textContent&&this._textContent.addSelfToZr(t),this._textGuide&&this._textGuide.addSelfToZr(t)}},n.prototype.removeSelfFromZr=function(t){if(this.__zr){this.__zr=null;var e=this.animators;if(e)for(var i=0;i<e.length;i++)t.animation.removeAnimator(e[i]);this._clipPath&&this._clipPath.removeSelfFromZr(t),this._textContent&&this._textContent.removeSelfFromZr(t),this._textGuide&&this._textGuide.removeSelfFromZr(t)}},n.prototype.animate=function(t,e,i){var r=t?this[t]:this,o=new kH(r,e,i);return t&&(o.targetName=t),this.addAnimator(o,t),o},n.prototype.addAnimator=function(t,e){var i=this.__zr,r=this;t.during(function(){r.updateDuringAnimation(e)}).done(function(){var o=r.animators,a=ee(o,t);a>=0&&o.splice(a,1)}),this.animators.push(t),i&&i.animation.addAnimator(t),i&&i.wakeUp()},n.prototype.updateDuringAnimation=function(t){this.markRedraw()},n.prototype.stopAnimation=function(t,e){for(var i=this.animators,r=i.length,o=[],a=0;a<r;a++){var s=i[a];!t||t===s.scope?s.stop(e):o.push(s)}return this.animators=o,this},n.prototype.animateTo=function(t,e,i){xR(this,t,e,i)},n.prototype.animateFrom=function(t,e,i){xR(this,t,e,i,!0)},n.prototype._transitionState=function(t,e,i,r){for(var o=xR(this,e,i,r),a=0;a<o.length;a++)o[a].__fromStateTransition=t},n.prototype.getBoundingRect=function(){return null},n.prototype.getPaintRect=function(){return null},n.initDefaultProps=(function(){var t=n.prototype;t.type="element",t.name="",t.ignore=t.silent=t.isGroup=t.draggable=t.dragging=t.ignoreClip=t.__inHover=!1,t.__dirty=$o;function e(i,r,o,a){Object.defineProperty(t,i,{get:function(){if(!this[r]){var l=this[r]=[];s(this,l)}return this[r]},set:function(l){this[o]=l[0],this[a]=l[1],this[r]=l,s(this,l)}});function s(l,h){Object.defineProperty(h,0,{get:function(){return l[o]},set:function(u){l[o]=u}}),Object.defineProperty(h,1,{get:function(){return l[a]},set:function(u){l[a]=u}})}}Object.defineProperty&&(e("position","_legacyPos","x","y"),e("scale","_legacyScale","scaleX","scaleY"),e("origin","_legacyOrigin","originX","originY"))})(),n})();In(HT,Ya);In(HT,gh);function xR(n,t,e,i,r){e=e||{};var o=[];EK(n,"",n,t,e,i,o,r);var a=o.length,s=!1,l=e.done,h=e.aborted,u=function(){s=!0,a--,a<=0&&(s?l&&l():h&&h())},d=function(){a--,a<=0&&(s?l&&l():h&&h())};a||l&&l(),o.length>0&&e.during&&o[0].during(function(g,p){e.during(p)});for(var c=0;c<o.length;c++){var f=o[c];u&&f.done(u),d&&f.aborted(d),e.force&&f.duration(e.duration),f.start(e.easing)}return o}function SR(n,t,e){for(var i=0;i<e;i++)n[i]=t[i]}function lct(n){return Wr(n[0])}function hct(n,t,e){if(Wr(t[e]))if(Wr(n[e])||(n[e]=[]),Ro(t[e])){var i=t[e].length;n[e].length!==i&&(n[e]=new t[e].constructor(i),SR(n[e],t[e],i))}else{var r=t[e],o=n[e],a=r.length;if(lct(r))for(var s=r[0].length,l=0;l<a;l++)o[l]?SR(o[l],r[l],s):o[l]=Array.prototype.slice.call(r[l]);else SR(o,r,a);o.length=r.length}else n[e]=t[e]}function uct(n,t){return n===t||Wr(n)&&Wr(t)&&dct(n,t)}function dct(n,t){var e=n.length;if(e!==t.length)return!1;for(var i=0;i<e;i++)if(n[i]!==t[i])return!1;return!0}function EK(n,t,e,i,r,o,a,s){for(var l=pe(i),h=r.duration,u=r.delay,d=r.additive,c=r.setToFinal,f=!Ht(o),g=n.animators,p=[],v=0;v<l.length;v++){var m=l[v],y=i[m];if(y!=null&&e[m]!=null&&(f||o[m]))if(Ht(y)&&!Wr(y)&&!LT(y)){if(t){s||(e[m]=y,n.updateDuringAnimation(t));continue}EK(n,m,e[m],y,r,o&&o[m],a,s)}else p.push(m);else s||(e[m]=y,n.updateDuringAnimation(t),p.push(m))}var b=p.length;if(!d&&b)for(var _=0;_<g.length;_++){var w=g[_];if(w.targetName===t){var C=w.stopTracks(p);if(C){var x=ee(g,w);g.splice(x,1)}}}if(r.force||(p=Ge(p,function(M){return!uct(i[M],e[M])}),b=p.length),b>0||r.force&&!a.length){var S=void 0,A=void 0,T=void 0;if(s){A={},c&&(S={});for(var _=0;_<b;_++){var m=p[_];A[m]=e[m],c?S[m]=i[m]:e[m]=i[m]}}else if(c){T={};for(var _=0;_<b;_++){var m=p[_];T[m]=$0(e[m]),hct(e,i,m)}}var w=new kH(e,!1,!1,d?Ge(g,function(R){return R.targetName===t}):null);w.targetName=t,r.scope&&(w.scope=r.scope),c&&S&&w.whenWithKeys(0,S,p),T&&w.whenWithKeys(0,T,p),w.whenWithKeys(h??500,s?A:i,p).delay(u||0),n.addAnimator(w,t),a.push(w)}}var Ft=(function(n){et(t,n);function t(e){var i=n.call(this)||this;return i.isGroup=!0,i._children=[],i.attr(e),i}return t.prototype.childrenRef=function(){return this._children},t.prototype.children=function(){return this._children.slice()},t.prototype.childAt=function(e){return this._children[e]},t.prototype.childOfName=function(e){for(var i=this._children,r=0;r<i.length;r++)if(i[r].name===e)return i[r]},t.prototype.childCount=function(){return this._children.length},t.prototype.add=function(e){return e&&e!==this&&e.parent!==this&&(this._children.push(e),this._doAdd(e)),this},t.prototype.addBefore=function(e,i){if(e&&e!==this&&e.parent!==this&&i&&i.parent===this){var r=this._children,o=r.indexOf(i);o>=0&&(r.splice(o,0,e),this._doAdd(e))}return this},t.prototype.replace=function(e,i){var r=ee(this._children,e);return r>=0&&this.replaceAt(i,r),this},t.prototype.replaceAt=function(e,i){var r=this._children,o=r[i];if(e&&e!==this&&e.parent!==this&&e!==o){r[i]=e,o.parent=null;var a=this.__zr;a&&o.removeSelfFromZr(a),this._doAdd(e)}return this},t.prototype._doAdd=function(e){e.parent&&e.parent.remove(e),e.parent=this;var i=this.__zr;i&&i!==e.__zr&&e.addSelfToZr(i),i&&i.refresh()},t.prototype.remove=function(e){var i=this.__zr,r=this._children,o=ee(r,e);return o<0?this:(r.splice(o,1),e.parent=null,i&&e.removeSelfFromZr(i),i&&i.refresh(),this)},t.prototype.removeAll=function(){for(var e=this._children,i=this.__zr,r=0;r<e.length;r++){var o=e[r];i&&o.removeSelfFromZr(i),o.parent=null}return e.length=0,this},t.prototype.eachChild=function(e,i){for(var r=this._children,o=0;o<r.length;o++){var a=r[o];e.call(i,a,o)}return this},t.prototype.traverse=function(e,i){for(var r=0;r<this._children.length;r++){var o=this._children[r],a=e.call(i,o);o.isGroup&&!a&&o.traverse(e,i)}return this},t.prototype.addSelfToZr=function(e){n.prototype.addSelfToZr.call(this,e);for(var i=0;i<this._children.length;i++){var r=this._children[i];r.addSelfToZr(e)}},t.prototype.removeSelfFromZr=function(e){n.prototype.removeSelfFromZr.call(this,e);for(var i=0;i<this._children.length;i++){var r=this._children[i];r.removeSelfFromZr(e)}},t.prototype.getBoundingRect=function(e){for(var i=new te(0,0,0,0),r=e||this._children,o=[],a=null,s=0;s<r.length;s++){var l=r[s];if(!(l.ignore||l.invisible)){var h=l.getBoundingRect(),u=l.getLocalTransform(o);u?(te.applyTransform(i,h,u),a=a||i.clone(),a.union(i)):(a=a||h.clone(),a.union(h))}}return a||i},t})(HT);Ft.prototype.type="group";/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var fw={},DK={};function cct(n){delete DK[n]}function fct(n){if(!n)return!1;if(typeof n=="string")return nx(n,1)<_E;if(n.colorStops){for(var t=n.colorStops,e=0,i=t.length,r=0;r<i;r++)e+=nx(t[r].color,1);return e/=i,e<_E}return!1}var gct=(function(){function n(t,e,i){var r=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,i=i||{},this.dom=e,this.id=t;var o=new Pdt,a=i.renderer||"canvas";fw[a]||(a=pe(fw)[0]),i.useDirtyRect=i.useDirtyRect==null?!1:i.useDirtyRect;var s=new fw[a](e,o,i,t),l=i.ssr||s.ssrOnly;this.storage=o,this.painter=s;var h=!ce.node&&!ce.worker&&!l?new rct(s.getViewportRoot(),s.root):null,u=i.useCoarsePointer,d=u==null||u==="auto"?ce.touchEventsSupported:!!u,c=44,f;d&&(f=Yt(i.pointerSize,c)),this.handler=new cK(o,s,h,s.root,f),this.animation=new Zdt({stage:{update:l?null:function(){return r._flush(!0)}}}),l||this.animation.start()}return n.prototype.add=function(t){this._disposed||!t||(this.storage.addRoot(t),t.addSelfToZr(this),this.refresh())},n.prototype.remove=function(t){this._disposed||!t||(this.storage.delRoot(t),t.removeSelfFromZr(this),this.refresh())},n.prototype.configLayer=function(t,e){this._disposed||(this.painter.configLayer&&this.painter.configLayer(t,e),this.refresh())},n.prototype.setBackgroundColor=function(t){this._disposed||(this.painter.setBackgroundColor&&this.painter.setBackgroundColor(t),this.refresh(),this._backgroundColor=t,this._darkMode=fct(t))},n.prototype.getBackgroundColor=function(){return this._backgroundColor},n.prototype.setDarkMode=function(t){this._darkMode=t},n.prototype.isDarkMode=function(){return this._darkMode},n.prototype.refreshImmediately=function(t){this._disposed||(t||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1)},n.prototype.refresh=function(){this._disposed||(this._needsRefresh=!0,this.animation.start())},n.prototype.flush=function(){this._disposed||this._flush(!1)},n.prototype._flush=function(t){var e,i=ip();this._needsRefresh&&(e=!0,this.refreshImmediately(t)),this._needsRefreshHover&&(e=!0,this.refreshHoverImmediately());var r=ip();e?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:r-i})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},n.prototype.setSleepAfterStill=function(t){this._sleepAfterStill=t},n.prototype.wakeUp=function(){this._disposed||(this.animation.start(),this._stillFrameAccum=0)},n.prototype.refreshHover=function(){this._needsRefreshHover=!0},n.prototype.refreshHoverImmediately=function(){this._disposed||(this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover())},n.prototype.resize=function(t){this._disposed||(t=t||{},this.painter.resize(t.width,t.height),this.handler.resize())},n.prototype.clearAnimation=function(){this._disposed||this.animation.clear()},n.prototype.getWidth=function(){if(!this._disposed)return this.painter.getWidth()},n.prototype.getHeight=function(){if(!this._disposed)return this.painter.getHeight()},n.prototype.setCursorStyle=function(t){this._disposed||this.handler.setCursorStyle(t)},n.prototype.findHover=function(t,e){if(!this._disposed)return this.handler.findHover(t,e)},n.prototype.on=function(t,e,i){return this._disposed||this.handler.on(t,e,i),this},n.prototype.off=function(t,e){this._disposed||this.handler.off(t,e)},n.prototype.trigger=function(t,e){this._disposed||this.handler.trigger(t,e)},n.prototype.clear=function(){if(!this._disposed){for(var t=this.storage.getRoots(),e=0;e<t.length;e++)t[e]instanceof Ft&&t[e].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()}},n.prototype.dispose=function(){this._disposed||(this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,this._disposed=!0,cct(this.id))},n})();function a5(n,t){var e=new gct(aK(),n,t);return DK[e.id]=e,e}function pct(n,t){fw[n]=t}var xE;function vct(n){if(typeof xE=="function")return xE(n)}function mct(n){xE=n}var s5=1e-4,IK=20;function yct(n){return n.replace(/^\s+|\s+$/g,"")}function qe(n,t,e,i){var r=t[0],o=t[1],a=e[0],s=e[1],l=o-r,h=s-a;if(l===0)return h===0?a:(a+s)/2;if(i)if(l>0){if(n<=r)return a;if(n>=o)return s}else{if(n>=r)return a;if(n<=o)return s}else{if(n===r)return a;if(n===o)return s}return(n-r)/l*h+a}function mt(n,t){switch(n){case"center":case"middle":n="50%";break;case"left":case"top":n="0%";break;case"right":case"bottom":n="100%";break}return Ct(n)?yct(n).match(/%$/)?parseFloat(n)/100*t:parseFloat(n):n==null?NaN:+n}function Ji(n,t,e){return t==null&&(t=10),t=Math.min(Math.max(0,t),IK),n=(+n).toFixed(t),e?n:+n}function Ha(n){return n.sort(function(t,e){return t-e}),n}function ll(n){if(n=+n,isNaN(n))return 0;if(n>1e-14){for(var t=1,e=0;e<15;e++,t*=10)if(Math.round(n*t)/t===n)return e}return bct(n)}function bct(n){var t=n.toString().toLowerCase(),e=t.indexOf("e"),i=e>0?+t.slice(e+1):0,r=e>0?e:t.length,o=t.indexOf("."),a=o<0?0:r-1-o;return Math.max(0,a-i)}function OK(n,t){var e=Math.log,i=Math.LN10,r=Math.floor(e(n[1]-n[0])/i),o=Math.round(e(Math.abs(t[1]-t[0]))/i),a=Math.min(Math.max(-r+o,0),20);return isFinite(a)?a:20}function _ct(n,t){var e=wl(n,function(f,g){return f+(isNaN(g)?0:g)},0);if(e===0)return[];for(var i=Math.pow(10,t),r=ct(n,function(f){return(isNaN(f)?0:f)/e*i*100}),o=i*100,a=ct(r,function(f){return Math.floor(f)}),s=wl(a,function(f,g){return f+g},0),l=ct(r,function(f,g){return f-a[g]});s<o;){for(var h=Number.NEGATIVE_INFINITY,u=null,d=0,c=l.length;d<c;++d)l[d]>h&&(h=l[d],u=d);++a[u],l[u]=0,++s}return ct(a,function(f){return f/i})}function Cct(n,t){var e=Math.max(ll(n),ll(t)),i=n+t;return e>IK?i:Ji(i,e)}var l5=9007199254740991;function HK(n){var t=Math.PI*2;return(n%t+t)%t}function Iy(n){return n>-s5&&n<s5}var wct=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function Al(n){if(n instanceof Date)return n;if(Ct(n)){var t=wct.exec(n);if(!t)return new Date(NaN);if(t[8]){var e=+t[4]||0;return t[8].toUpperCase()!=="Z"&&(e-=+t[8].slice(0,3)),new Date(Date.UTC(+t[1],+(t[2]||1)-1,+t[3]||1,e,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0))}else return new Date(+t[1],+(t[2]||1)-1,+t[3]||1,+t[4]||0,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0)}else if(n==null)return new Date(NaN);return new Date(Math.round(n))}function xct(n){return Math.pow(10,LH(n))}function LH(n){if(n===0)return 0;var t=Math.floor(Math.log(n)/Math.LN10);return n/Math.pow(10,t)>=10&&t++,t}function zK(n,t){var e=LH(n),i=Math.pow(10,e),r=n/i,o;return r<1.5?o=1:r<2.5?o=2:r<4?o=3:r<7?o=5:o=10,n=o*i,e>=-20?+n.toFixed(e<0?-e:0):n}function AR(n,t){var e=(n.length-1)*t+1,i=Math.floor(e),r=+n[i-1],o=e-i;return o?r+o*(n[i]-r):r}function h5(n){n.sort(function(l,h){return s(l,h,0)?-1:1});for(var t=-1/0,e=1,i=0;i<n.length;){for(var r=n[i].interval,o=n[i].close,a=0;a<2;a++)r[a]<=t&&(r[a]=t,o[a]=a?1:1-e),t=r[a],e=o[a];r[0]===r[1]&&o[0]*o[1]!==1?n.splice(i,1):i++}return n;function s(l,h,u){return l.interval[u]<h.interval[u]||l.interval[u]===h.interval[u]&&(l.close[u]-h.close[u]===(u?-1:1)||!u&&s(l,h,1))}}function kh(n){var t=parseFloat(n);return t==n&&(t!==0||!Ct(n)||n.indexOf("x")<=0)?t:NaN}function FK(n){return!isNaN(kh(n))}function NK(){return Math.round(Math.random()*9)}function WK(n,t){return t===0?n:WK(t,n%t)}function u5(n,t){return n==null?t:t==null?n:n*t/WK(n,t)}function Ve(n){throw new Error(n)}function d5(n,t,e){return(t-n)*e+n}var VK="series\0",GK="\0_ec_\0";function li(n){return n instanceof Array?n:n==null?[]:[n]}function xf(n,t,e){if(n){n[t]=n[t]||{},n.emphasis=n.emphasis||{},n.emphasis[t]=n.emphasis[t]||{};for(var i=0,r=e.length;i<r;i++){var o=e[i];!n.emphasis[t].hasOwnProperty(o)&&n[t].hasOwnProperty(o)&&(n.emphasis[t][o]=n[t][o])}}}var c5=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function zv(n){return Ht(n)&&!ut(n)&&!(n instanceof Date)?n.value:n}function Sct(n){return Ht(n)&&!(n instanceof Array)}function $K(n,t,e){var i=e==="normalMerge",r=e==="replaceMerge",o=e==="replaceAll";n=n||[],t=(t||[]).slice();var a=Pt();z(t,function(l,h){if(!Ht(l)){t[h]=null;return}});var s=Act(n,a,e);return(i||r)&&Tct(s,n,a,t),i&&Mct(s,t),i||r?Rct(s,t,r):o&&Pct(s,t),Bct(s),s}function Act(n,t,e){var i=[];if(e==="replaceAll")return i;for(var r=0;r<n.length;r++){var o=n[r];o&&o.id!=null&&t.set(o.id,r),i.push({existing:e==="replaceMerge"||Oy(o)?null:o,newOption:null,keyInfo:null,brandNew:null})}return i}function Tct(n,t,e,i){z(i,function(r,o){if(!(!r||r.id==null)){var a=j0(r.id),s=e.get(a);if(s!=null){var l=n[s];so(!l.newOption,'Duplicated option on id "'+a+'".'),l.newOption=r,l.existing=t[s],i[o]=null}}})}function Mct(n,t){z(t,function(e,i){if(!(!e||e.name==null))for(var r=0;r<n.length;r++){var o=n[r].existing;if(!n[r].newOption&&o&&(o.id==null||e.id==null)&&!Oy(e)&&!Oy(o)&&jK("name",o,e)){n[r].newOption=e,t[i]=null;return}}})}function Rct(n,t,e){z(t,function(i){if(i){for(var r,o=0;(r=n[o])&&(r.newOption||Oy(r.existing)||r.existing&&i.id!=null&&!jK("id",i,r.existing));)o++;r?(r.newOption=i,r.brandNew=e):n.push({newOption:i,brandNew:e,existing:null,keyInfo:null}),o++}})}function Pct(n,t){z(t,function(e){n.push({newOption:e,brandNew:!0,existing:null,keyInfo:null})})}function Bct(n){var t=Pt();z(n,function(e){var i=e.existing;i&&t.set(i.id,e)}),z(n,function(e){var i=e.newOption;so(!i||i.id==null||!t.get(i.id)||t.get(i.id)===e,"id duplicates: "+(i&&i.id)),i&&i.id!=null&&t.set(i.id,e),!e.keyInfo&&(e.keyInfo={})}),z(n,function(e,i){var r=e.existing,o=e.newOption,a=e.keyInfo;if(Ht(o)){if(a.name=o.name!=null?j0(o.name):r?r.name:VK+i,r)a.id=j0(r.id);else if(o.id!=null)a.id=j0(o.id);else{var s=0;do a.id="\0"+a.name+"\0"+s++;while(t.get(a.id))}t.set(a.id,e)}})}function jK(n,t,e){var i=Fn(t[n],null),r=Fn(e[n],null);return i!=null&&r!=null&&i===r}function j0(n){return Fn(n,"")}function Fn(n,t){return n==null?t:Ct(n)?n:Le(n)||eE(n)?n+"":t}function EH(n){var t=n.name;return!!(t&&t.indexOf(VK))}function Oy(n){return n&&n.id!=null&&j0(n.id).indexOf(GK)===0}function kct(n){return GK+n}function Lct(n,t,e){z(n,function(i){var r=i.newOption;Ht(r)&&(i.keyInfo.mainType=t,i.keyInfo.subType=Ect(t,r,i.existing,e))})}function Ect(n,t,e,i){var r=t.type?t.type:e?e.subType:i.determineSubType(n,t);return r}function Dct(n,t){var e={},i={};return r(n||[],e),r(t||[],i,e),[o(e),o(i)];function r(a,s,l){for(var h=0,u=a.length;h<u;h++){var d=Fn(a[h].seriesId,null);if(d==null)return;for(var c=li(a[h].dataIndex),f=l&&l[d],g=0,p=c.length;g<p;g++){var v=c[g];f&&f[v]?f[v]=null:(s[d]||(s[d]={}))[v]=1}}}function o(a,s){var l=[];for(var h in a)if(a.hasOwnProperty(h)&&a[h]!=null)if(s)l.push(+h);else{var u=o(a[h],!0);u.length&&l.push({seriesId:h,dataIndex:u})}return l}}function Sf(n,t){if(t.dataIndexInside!=null)return t.dataIndexInside;if(t.dataIndex!=null)return ut(t.dataIndex)?ct(t.dataIndex,function(e){return n.indexOfRawIndex(e)}):n.indexOfRawIndex(t.dataIndex);if(t.name!=null)return ut(t.name)?ct(t.name,function(e){return n.indexOfName(e)}):n.indexOfName(t.name)}function Te(){var n="__ec_inner_"+Ict++;return function(t){return t[n]||(t[n]={})}}var Ict=NK();function U0(n,t,e){var i=DH(t,e),r=i.mainTypeSpecified,o=i.queryOptionMap,a=i.others,s=a,l=e?e.defaultMainType:null;return!r&&l&&o.set(l,{}),o.each(function(h,u){var d=e_(n,u,h,{useDefault:l===u,enableAll:e&&e.enableAll!=null?e.enableAll:!0,enableNone:e&&e.enableNone!=null?e.enableNone:!0});s[u+"Models"]=d.models,s[u+"Model"]=d.models[0]}),s}function DH(n,t){var e;if(Ct(n)){var i={};i[n+"Index"]=0,e=i}else e=n;var r=Pt(),o={},a=!1;return z(e,function(s,l){if(l==="dataIndex"||l==="dataIndexInside"){o[l]=s;return}var h=l.match(/^(\w+)(Index|Id|Name)$/)||[],u=h[1],d=(h[2]||"").toLowerCase();if(!(!u||!d||t&&t.includeMainTypes&&ee(t.includeMainTypes,u)<0)){a=a||!!u;var c=r.get(u)||r.set(u,{});c[d]=s}}),{mainTypeSpecified:a,queryOptionMap:r,others:o}}var Mn={useDefault:!0,enableAll:!1,enableNone:!1},Oct={useDefault:!1,enableAll:!0,enableNone:!0};function e_(n,t,e,i){i=i||Mn;var r=e.index,o=e.id,a=e.name,s={models:null,specified:r!=null||o!=null||a!=null};if(!s.specified){var l=void 0;return s.models=i.useDefault&&(l=n.getComponent(t))?[l]:[],s}return r==="none"||r===!1?(so(i.enableNone,'`"none"` or `false` is not a valid value on index option.'),s.models=[],s):(r==="all"&&(so(i.enableAll,'`"all"` is not a valid value on index option.'),r=o=a=null),s.models=n.queryComponents({mainType:t,index:r,id:o,name:a}),s)}function UK(n,t,e){n.setAttribute?n.setAttribute(t,e):n[t]=e}function Hct(n,t){return n.getAttribute?n.getAttribute(t):n[t]}function zct(n){return n==="auto"?ce.domSupported?"html":"richText":n||"html"}function SE(n,t){var e=Pt(),i=[];return z(n,function(r){var o=t(r);(e.get(o)||(i.push(o),e.set(o,[]))).push(r)}),{keys:i,buckets:e}}function YK(n,t,e,i,r){var o=t==null||t==="auto";if(i==null)return i;if(Le(i)){var a=d5(e||0,i,r);return Ji(a,o?Math.max(ll(e||0),ll(i)):t)}else{if(Ct(i))return r<1?e:i;for(var s=[],l=e,h=i,u=Math.max(l?l.length:0,h.length),d=0;d<u;++d){var c=n.getDimensionInfo(d);if(c&&c.type==="ordinal")s[d]=(r<1&&l?l:h)[d];else{var f=l&&l[d]?l[d]:0,g=h[d],a=d5(f,g,r);s[d]=Ji(a,o?Math.max(ll(f),ll(g)):t)}}return s}}var Fct=".",Ed="___EC__COMPONENT__CONTAINER___",XK="___EC__EXTENDED_CLASS___";function hl(n){var t={main:"",sub:""};if(n){var e=n.split(Fct);t.main=e[0]||"",t.sub=e[1]||""}return t}function Nct(n){so(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(n),'componentType "'+n+'" illegal')}function Wct(n){return!!(n&&n[XK])}function IH(n,t){n.$constructor=n,n.extend=function(e){var i=this,r;return Vct(i)?r=(function(o){et(a,o);function a(){return o.apply(this,arguments)||this}return a})(i):(r=function(){(e.$constructor||i).apply(this,arguments)},Kut(r,this)),ht(r.prototype,e),r[XK]=!0,r.extend=this.extend,r.superCall=jct,r.superApply=Uct,r.superClass=i,r}}function Vct(n){return Dt(n)&&/^class\s/.test(Function.prototype.toString.call(n))}function qK(n,t){n.extend=t.extend}var Gct=Math.round(Math.random()*10);function $ct(n){var t=["__\0is_clz",Gct++].join("_");n.prototype[t]=!0,n.isInstance=function(e){return!!(e&&e[t])}}function jct(n,t){for(var e=[],i=2;i<arguments.length;i++)e[i-2]=arguments[i];return this.superClass.prototype[t].apply(n,e)}function Uct(n,t,e){return this.superClass.prototype[t].apply(n,e)}function zT(n){var t={};n.registerClass=function(i){var r=i.type||i.prototype.type;if(r){Nct(r),i.prototype.type=r;var o=hl(r);if(!o.sub)t[o.main]=i;else if(o.sub!==Ed){var a=e(o);a[o.sub]=i}}return i},n.getClass=function(i,r,o){var a=t[i];if(a&&a[Ed]&&(a=r?a[r]:null),o&&!a)throw new Error(r?"Component "+i+"."+(r||"")+" is used but not imported.":i+".type should be specified.");return a},n.getClassesByMainType=function(i){var r=hl(i),o=[],a=t[r.main];return a&&a[Ed]?z(a,function(s,l){l!==Ed&&o.push(s)}):o.push(a),o},n.hasClass=function(i){var r=hl(i);return!!t[r.main]},n.getAllClassMainTypes=function(){var i=[];return z(t,function(r,o){i.push(o)}),i},n.hasSubTypes=function(i){var r=hl(i),o=t[r.main];return o&&o[Ed]};function e(i){var r=t[i.main];return(!r||!r[Ed])&&(r=t[i.main]={},r[Ed]=!0),r}}function Af(n,t){for(var e=0;e<n.length;e++)n[e][1]||(n[e][1]=n[e][0]);return t=t||!1,function(i,r,o){for(var a={},s=0;s<n.length;s++){var l=n[s][1];if(!(r&&ee(r,l)>=0||o&&ee(o,l)<0)){var h=i.getShallow(l,t);h!=null&&(a[n[s][0]]=h)}}return a}}var Yct=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],Xct=Af(Yct),qct=(function(){function n(){}return n.prototype.getAreaStyle=function(t,e){return Xct(this,t,e)},n})(),AE=new Qb(50);function Kct(n){if(typeof n=="string"){var t=AE.get(n);return t&&t.image}else return n}function OH(n,t,e,i,r){if(n)if(typeof n=="string"){if(t&&t.__zrImageSrc===n||!e)return t;var o=AE.get(n),a={hostEl:e,cb:i,cbPayload:r};return o?(t=o.image,!FT(t)&&o.pending.push(a)):(t=Ju.loadImage(n,f5,f5),t.__zrImageSrc=n,AE.put(n,t.__cachedImgObj={image:t,pending:[a]})),t}else return n;else return t}function f5(){var n=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var t=0;t<n.pending.length;t++){var e=n.pending[t],i=e.cb;i&&i(this,e.cbPayload),e.hostEl.dirty()}n.pending.length=0}function FT(n){return n&&n.width&&n.height}var TR=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function Zct(n,t,e,i,r,o){if(!e){n.text="",n.isTruncated=!1;return}var a=(t+"").split(`
`);o=KK(e,i,r,o);for(var s=!1,l={},h=0,u=a.length;h<u;h++)ZK(l,a[h],o),a[h]=l.textLine,s=s||l.isTruncated;n.text=a.join(`
`),n.isTruncated=s}function KK(n,t,e,i){i=i||{};var r=ht({},i);r.font=t,e=Yt(e,"..."),r.maxIterations=Yt(i.maxIterations,2);var o=r.minChar=Yt(i.minChar,0);r.cnCharWidth=Ko("",t);var a=r.ascCharWidth=Ko("a",t);r.placeholder=Yt(i.placeholder,"");for(var s=n=Math.max(0,n-1),l=0;l<o&&s>=a;l++)s-=a;var h=Ko(e,t);return h>s&&(e="",h=0),s=n-h,r.ellipsis=e,r.ellipsisWidth=h,r.contentWidth=s,r.containerWidth=n,r}function ZK(n,t,e){var i=e.containerWidth,r=e.font,o=e.contentWidth;if(!i){n.textLine="",n.isTruncated=!1;return}var a=Ko(t,r);if(a<=i){n.textLine=t,n.isTruncated=!1;return}for(var s=0;;s++){if(a<=o||s>=e.maxIterations){t+=e.ellipsis;break}var l=s===0?Jct(t,o,e.ascCharWidth,e.cnCharWidth):a>0?Math.floor(t.length*o/a):0;t=t.substr(0,l),a=Ko(t,r)}t===""&&(t=e.placeholder),n.textLine=t,n.isTruncated=!0}function Jct(n,t,e,i){for(var r=0,o=0,a=n.length;o<a&&r<t;o++){var s=n.charCodeAt(o);r+=0<=s&&s<=127?e:i}return o}function Qct(n,t){n!=null&&(n+="");var e=t.overflow,i=t.padding,r=t.font,o=e==="truncate",a=OT(r),s=Yt(t.lineHeight,a),l=!!t.backgroundColor,h=t.lineOverflow==="truncate",u=!1,d=t.width,c;d!=null&&(e==="break"||e==="breakAll")?c=n?JK(n,t.font,d,e==="breakAll",0).lines:[]:c=n?n.split(`
`):[];var f=c.length*s,g=Yt(t.height,f);if(f>g&&h){var p=Math.floor(g/s);u=u||c.length>p,c=c.slice(0,p)}if(n&&o&&d!=null)for(var v=KK(d,r,t.ellipsis,{minChar:t.truncateMinChar,placeholder:t.placeholder}),m={},y=0;y<c.length;y++)ZK(m,c[y],v),c[y]=m.textLine,u=u||m.isTruncated;for(var b=g,_=0,y=0;y<c.length;y++)_=Math.max(Ko(c[y],r),_);d==null&&(d=_);var w=_;return i&&(b+=i[0]+i[2],w+=i[1]+i[3],d+=i[1]+i[3]),l&&(w=d),{lines:c,height:g,outerWidth:w,outerHeight:b,lineHeight:s,calculatedLineHeight:a,contentWidth:_,contentHeight:f,width:d,isTruncated:u}}var tft=(function(){function n(){}return n})(),g5=(function(){function n(t){this.tokens=[],t&&(this.tokens=t)}return n})(),eft=(function(){function n(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[],this.isTruncated=!1}return n})();function ift(n,t){var e=new eft;if(n!=null&&(n+=""),!n)return e;for(var i=t.width,r=t.height,o=t.overflow,a=(o==="break"||o==="breakAll")&&i!=null?{width:i,accumWidth:0,breakAll:o==="breakAll"}:null,s=TR.lastIndex=0,l;(l=TR.exec(n))!=null;){var h=l.index;h>s&&MR(e,n.substring(s,h),t,a),MR(e,l[2],t,a,l[1]),s=TR.lastIndex}s<n.length&&MR(e,n.substring(s,n.length),t,a);var u=[],d=0,c=0,f=t.padding,g=o==="truncate",p=t.lineOverflow==="truncate",v={};function m(O,H,F){O.width=H,O.lineHeight=F,d+=F,c=Math.max(c,H)}t:for(var y=0;y<e.lines.length;y++){for(var b=e.lines[y],_=0,w=0,C=0;C<b.tokens.length;C++){var x=b.tokens[C],S=x.styleName&&t.rich[x.styleName]||{},A=x.textPadding=S.padding,T=A?A[1]+A[3]:0,M=x.font=S.font||t.font;x.contentHeight=OT(M);var R=Yt(S.height,x.contentHeight);if(x.innerHeight=R,A&&(R+=A[0]+A[2]),x.height=R,x.lineHeight=pl(S.lineHeight,t.lineHeight,R),x.align=S&&S.align||t.align,x.verticalAlign=S&&S.verticalAlign||"middle",p&&r!=null&&d+x.lineHeight>r){var L=e.lines.length;C>0?(b.tokens=b.tokens.slice(0,C),m(b,w,_),e.lines=e.lines.slice(0,y+1)):e.lines=e.lines.slice(0,y),e.isTruncated=e.isTruncated||e.lines.length<L;break t}var B=S.width,P=B==null||B==="auto";if(typeof B=="string"&&B.charAt(B.length-1)==="%")x.percentWidth=B,u.push(x),x.contentWidth=Ko(x.text,M);else{if(P){var k=S.backgroundColor,E=k&&k.image;E&&(E=Kct(E),FT(E)&&(x.width=Math.max(x.width,E.width*R/E.height)))}var D=g&&i!=null?i-w:null;D!=null&&D<x.width?!P||D<T?(x.text="",x.width=x.contentWidth=0):(Zct(v,x.text,D-T,M,t.ellipsis,{minChar:t.truncateMinChar}),x.text=v.text,e.isTruncated=e.isTruncated||v.isTruncated,x.width=x.contentWidth=Ko(x.text,M)):x.contentWidth=Ko(x.text,M)}x.width+=T,w+=x.width,S&&(_=Math.max(_,x.lineHeight))}m(b,w,_)}e.outerWidth=e.width=Yt(i,c),e.outerHeight=e.height=Yt(r,d),e.contentHeight=d,e.contentWidth=c,f&&(e.outerWidth+=f[1]+f[3],e.outerHeight+=f[0]+f[2]);for(var y=0;y<u.length;y++){var x=u[y],I=x.percentWidth;x.width=parseInt(I,10)/100*e.width}return e}function MR(n,t,e,i,r){var o=t==="",a=r&&e.rich[r]||{},s=n.lines,l=a.font||e.font,h=!1,u,d;if(i){var c=a.padding,f=c?c[1]+c[3]:0;if(a.width!=null&&a.width!=="auto"){var g=Ss(a.width,i.width)+f;s.length>0&&g+i.accumWidth>i.width&&(u=t.split(`
`),h=!0),i.accumWidth=g}else{var p=JK(t,l,i.width,i.breakAll,i.accumWidth);i.accumWidth=p.accumWidth+f,d=p.linesWidths,u=p.lines}}else u=t.split(`
`);for(var v=0;v<u.length;v++){var m=u[v],y=new tft;if(y.styleName=r,y.text=m,y.isLineHolder=!m&&!o,typeof a.width=="number"?y.width=a.width:y.width=d?d[v]:Ko(m,l),!v&&!h){var b=(s[s.length-1]||(s[0]=new g5)).tokens,_=b.length;_===1&&b[0].isLineHolder?b[0]=y:(m||!_||o)&&b.push(y)}else s.push(new g5([y]))}}function nft(n){var t=n.charCodeAt(0);return t>=32&&t<=591||t>=880&&t<=4351||t>=4608&&t<=5119||t>=7680&&t<=8303}var rft=wl(",&?/;] ".split(""),function(n,t){return n[t]=!0,n},{});function oft(n){return nft(n)?!!rft[n]:!0}function JK(n,t,e,i,r){for(var o=[],a=[],s="",l="",h=0,u=0,d=0;d<n.length;d++){var c=n.charAt(d);if(c===`
`){l&&(s+=l,u+=h),o.push(s),a.push(u),s="",l="",h=0,u=0;continue}var f=Ko(c,t),g=i?!1:!oft(c);if(o.length?u+f>e:r+u+f>e){u?(s||l)&&(g?(s||(s=l,l="",h=0,u=h),o.push(s),a.push(u-h),l+=c,h+=f,s="",u=h):(l&&(s+=l,l="",h=0),o.push(s),a.push(u),s=c,u=f)):g?(o.push(l),a.push(h),l=c,h=f):(o.push(c),a.push(f));continue}u+=f,g?(l+=c,h+=f):(l&&(s+=l,l="",h=0),s+=c)}return!o.length&&!s&&(s=n,l="",h=0),l&&(s+=l),s&&(o.push(s),a.push(u)),o.length===1&&(u+=r),{accumWidth:u,lines:o,linesWidths:a}}var TE="__zr_style_"+Math.round(Math.random()*10),rf={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},NT={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};rf[TE]=!0;var p5=["z","z2","invisible"],aft=["invisible"],Ua=(function(n){et(t,n);function t(e){return n.call(this,e)||this}return t.prototype._init=function(e){for(var i=pe(e),r=0;r<i.length;r++){var o=i[r];o==="style"?this.useStyle(e[o]):n.prototype.attrKV.call(this,o,e[o])}this.style||this.useStyle({})},t.prototype.beforeBrush=function(){},t.prototype.afterBrush=function(){},t.prototype.innerBeforeBrush=function(){},t.prototype.innerAfterBrush=function(){},t.prototype.shouldBePainted=function(e,i,r,o){var a=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&sft(this,e,i)||a&&!a[0]&&!a[3])return!1;if(r&&this.__clipPaths){for(var s=0;s<this.__clipPaths.length;++s)if(this.__clipPaths[s].isZeroArea())return!1}if(o&&this.parent)for(var l=this.parent;l;){if(l.ignore)return!1;l=l.parent}return!0},t.prototype.contain=function(e,i){return this.rectContain(e,i)},t.prototype.traverse=function(e,i){e.call(i,this)},t.prototype.rectContain=function(e,i){var r=this.transformCoordToLocal(e,i),o=this.getBoundingRect();return o.contain(r[0],r[1])},t.prototype.getPaintRect=function(){var e=this._paintRect;if(!this._paintRect||this.__dirty){var i=this.transform,r=this.getBoundingRect(),o=this.style,a=o.shadowBlur||0,s=o.shadowOffsetX||0,l=o.shadowOffsetY||0;e=this._paintRect||(this._paintRect=new te(0,0,0,0)),i?te.applyTransform(e,r,i):e.copy(r),(a||s||l)&&(e.width+=a*2+Math.abs(s),e.height+=a*2+Math.abs(l),e.x=Math.min(e.x,e.x+s-a),e.y=Math.min(e.y,e.y+l-a));var h=this.dirtyRectTolerance;e.isZero()||(e.x=Math.floor(e.x-h),e.y=Math.floor(e.y-h),e.width=Math.ceil(e.width+1+h*2),e.height=Math.ceil(e.height+1+h*2))}return e},t.prototype.setPrevPaintRect=function(e){e?(this._prevPaintRect=this._prevPaintRect||new te(0,0,0,0),this._prevPaintRect.copy(e)):this._prevPaintRect=null},t.prototype.getPrevPaintRect=function(){return this._prevPaintRect},t.prototype.animateStyle=function(e){return this.animate("style",e)},t.prototype.updateDuringAnimation=function(e){e==="style"?this.dirtyStyle():this.markRedraw()},t.prototype.attrKV=function(e,i){e!=="style"?n.prototype.attrKV.call(this,e,i):this.style?this.setStyle(i):this.useStyle(i)},t.prototype.setStyle=function(e,i){return typeof e=="string"?this.style[e]=i:ht(this.style,e),this.dirtyStyle(),this},t.prototype.dirtyStyle=function(e){e||this.markRedraw(),this.__dirty|=c0,this._rect&&(this._rect=null)},t.prototype.dirty=function(){this.dirtyStyle()},t.prototype.styleChanged=function(){return!!(this.__dirty&c0)},t.prototype.styleUpdated=function(){this.__dirty&=~c0},t.prototype.createStyle=function(e){return ET(rf,e)},t.prototype.useStyle=function(e){e[TE]||(e=this.createStyle(e)),this.__inHover?this.__hoverStyle=e:this.style=e,this.dirtyStyle()},t.prototype.isStyleObject=function(e){return e[TE]},t.prototype._innerSaveToNormal=function(e){n.prototype._innerSaveToNormal.call(this,e);var i=this._normalState;e.style&&!i.style&&(i.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(e,i,p5)},t.prototype._applyStateObj=function(e,i,r,o,a,s){n.prototype._applyStateObj.call(this,e,i,r,o,a,s);var l=!(i&&o),h;if(i&&i.style?a?o?h=i.style:(h=this._mergeStyle(this.createStyle(),r.style),this._mergeStyle(h,i.style)):(h=this._mergeStyle(this.createStyle(),o?this.style:r.style),this._mergeStyle(h,i.style)):l&&(h=r.style),h)if(a){var u=this.style;if(this.style=this.createStyle(l?{}:u),l)for(var d=pe(u),c=0;c<d.length;c++){var f=d[c];f in h&&(h[f]=h[f],this.style[f]=u[f])}for(var g=pe(h),c=0;c<g.length;c++){var f=g[c];this.style[f]=this.style[f]}this._transitionState(e,{style:h},s,this.getAnimationStyleProps())}else this.useStyle(h);for(var p=this.__inHover?aft:p5,c=0;c<p.length;c++){var f=p[c];i&&i[f]!=null?this[f]=i[f]:l&&r[f]!=null&&(this[f]=r[f])}},t.prototype._mergeStates=function(e){for(var i=n.prototype._mergeStates.call(this,e),r,o=0;o<e.length;o++){var a=e[o];a.style&&(r=r||{},this._mergeStyle(r,a.style))}return r&&(i.style=r),i},t.prototype._mergeStyle=function(e,i){return ht(e,i),e},t.prototype.getAnimationStyleProps=function(){return NT},t.initDefaultProps=(function(){var e=t.prototype;e.type="displayable",e.invisible=!1,e.z=0,e.z2=0,e.zlevel=0,e.culling=!1,e.cursor="pointer",e.rectHover=!1,e.incremental=!1,e._rect=null,e.dirtyRectTolerance=0,e.__dirty=$o|c0})(),t})(HT),RR=new te(0,0,0,0),PR=new te(0,0,0,0);function sft(n,t,e){return RR.copy(n.getBoundingRect()),n.transform&&RR.applyTransform(n.transform),PR.width=t,PR.height=e,!RR.intersect(PR)}var _o=Math.min,Co=Math.max,BR=Math.sin,kR=Math.cos,Dd=Math.PI*2,hC=Xf(),uC=Xf(),dC=Xf();function WT(n,t,e){if(n.length!==0){for(var i=n[0],r=i[0],o=i[0],a=i[1],s=i[1],l=1;l<n.length;l++)i=n[l],r=_o(r,i[0]),o=Co(o,i[0]),a=_o(a,i[1]),s=Co(s,i[1]);t[0]=r,t[1]=a,e[0]=o,e[1]=s}}function v5(n,t,e,i,r,o){r[0]=_o(n,e),r[1]=_o(t,i),o[0]=Co(n,e),o[1]=Co(t,i)}var m5=[],y5=[];function lft(n,t,e,i,r,o,a,s,l,h){var u=mK,d=jn,c=u(n,e,r,a,m5);l[0]=1/0,l[1]=1/0,h[0]=-1/0,h[1]=-1/0;for(var f=0;f<c;f++){var g=d(n,e,r,a,m5[f]);l[0]=_o(g,l[0]),h[0]=Co(g,h[0])}c=u(t,i,o,s,y5);for(var f=0;f<c;f++){var p=d(t,i,o,s,y5[f]);l[1]=_o(p,l[1]),h[1]=Co(p,h[1])}l[0]=_o(n,l[0]),h[0]=Co(n,h[0]),l[0]=_o(a,l[0]),h[0]=Co(a,h[0]),l[1]=_o(t,l[1]),h[1]=Co(t,h[1]),l[1]=_o(s,l[1]),h[1]=Co(s,h[1])}function hft(n,t,e,i,r,o,a,s){var l=bK,h=ir,u=Co(_o(l(n,e,r),1),0),d=Co(_o(l(t,i,o),1),0),c=h(n,e,r,u),f=h(t,i,o,d);a[0]=_o(n,r,c),a[1]=_o(t,o,f),s[0]=Co(n,r,c),s[1]=Co(t,o,f)}function uft(n,t,e,i,r,o,a,s,l){var h=Pu,u=Bu,d=Math.abs(r-o);if(d%Dd<1e-4&&d>1e-4){s[0]=n-e,s[1]=t-i,l[0]=n+e,l[1]=t+i;return}if(hC[0]=kR(r)*e+n,hC[1]=BR(r)*i+t,uC[0]=kR(o)*e+n,uC[1]=BR(o)*i+t,h(s,hC,uC),u(l,hC,uC),r=r%Dd,r<0&&(r=r+Dd),o=o%Dd,o<0&&(o=o+Dd),r>o&&!a?o+=Dd:r<o&&a&&(r+=Dd),a){var c=o;o=r,r=c}for(var f=0;f<o;f+=Math.PI/2)f>r&&(dC[0]=kR(f)*e+n,dC[1]=BR(f)*i+t,h(s,dC,s),u(l,dC,l))}var ui={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},Id=[],Od=[],Ns=[],Qh=[],Ws=[],Vs=[],LR=Math.min,ER=Math.max,Hd=Math.cos,zd=Math.sin,Wl=Math.abs,ME=Math.PI,gu=ME*2,DR=typeof Float32Array<"u",Cm=[];function IR(n){var t=Math.round(n/ME*1e8)/1e8;return t%2*ME}function HH(n,t){var e=IR(n[0]);e<0&&(e+=gu);var i=e-n[0],r=n[1];r+=i,!t&&r-e>=gu?r=e+gu:t&&e-r>=gu?r=e-gu:!t&&e>r?r=e+(gu-IR(e-r)):t&&e<r&&(r=e-(gu-IR(r-e))),n[0]=e,n[1]=r}var Tl=(function(){function n(t){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,t&&(this._saveData=!1),this._saveData&&(this.data=[])}return n.prototype.increaseVersion=function(){this._version++},n.prototype.getVersion=function(){return this._version},n.prototype.setScale=function(t,e,i){i=i||0,i>0&&(this._ux=Wl(i/ox/t)||0,this._uy=Wl(i/ox/e)||0)},n.prototype.setDPR=function(t){this.dpr=t},n.prototype.setContext=function(t){this._ctx=t},n.prototype.getContext=function(){return this._ctx},n.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},n.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},n.prototype.moveTo=function(t,e){return this._drawPendingPt(),this.addData(ui.M,t,e),this._ctx&&this._ctx.moveTo(t,e),this._x0=t,this._y0=e,this._xi=t,this._yi=e,this},n.prototype.lineTo=function(t,e){var i=Wl(t-this._xi),r=Wl(e-this._yi),o=i>this._ux||r>this._uy;if(this.addData(ui.L,t,e),this._ctx&&o&&this._ctx.lineTo(t,e),o)this._xi=t,this._yi=e,this._pendingPtDist=0;else{var a=i*i+r*r;a>this._pendingPtDist&&(this._pendingPtX=t,this._pendingPtY=e,this._pendingPtDist=a)}return this},n.prototype.bezierCurveTo=function(t,e,i,r,o,a){return this._drawPendingPt(),this.addData(ui.C,t,e,i,r,o,a),this._ctx&&this._ctx.bezierCurveTo(t,e,i,r,o,a),this._xi=o,this._yi=a,this},n.prototype.quadraticCurveTo=function(t,e,i,r){return this._drawPendingPt(),this.addData(ui.Q,t,e,i,r),this._ctx&&this._ctx.quadraticCurveTo(t,e,i,r),this._xi=i,this._yi=r,this},n.prototype.arc=function(t,e,i,r,o,a){this._drawPendingPt(),Cm[0]=r,Cm[1]=o,HH(Cm,a),r=Cm[0],o=Cm[1];var s=o-r;return this.addData(ui.A,t,e,i,i,r,s,0,a?0:1),this._ctx&&this._ctx.arc(t,e,i,r,o,a),this._xi=Hd(o)*i+t,this._yi=zd(o)*i+e,this},n.prototype.arcTo=function(t,e,i,r,o){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(t,e,i,r,o),this},n.prototype.rect=function(t,e,i,r){return this._drawPendingPt(),this._ctx&&this._ctx.rect(t,e,i,r),this.addData(ui.R,t,e,i,r),this},n.prototype.closePath=function(){this._drawPendingPt(),this.addData(ui.Z);var t=this._ctx,e=this._x0,i=this._y0;return t&&t.closePath(),this._xi=e,this._yi=i,this},n.prototype.fill=function(t){t&&t.fill(),this.toStatic()},n.prototype.stroke=function(t){t&&t.stroke(),this.toStatic()},n.prototype.len=function(){return this._len},n.prototype.setData=function(t){var e=t.length;!(this.data&&this.data.length===e)&&DR&&(this.data=new Float32Array(e));for(var i=0;i<e;i++)this.data[i]=t[i];this._len=e},n.prototype.appendPath=function(t){t instanceof Array||(t=[t]);for(var e=t.length,i=0,r=this._len,o=0;o<e;o++)i+=t[o].len();DR&&this.data instanceof Float32Array&&(this.data=new Float32Array(r+i));for(var o=0;o<e;o++)for(var a=t[o].data,s=0;s<a.length;s++)this.data[r++]=a[s];this._len=r},n.prototype.addData=function(t,e,i,r,o,a,s,l,h){if(this._saveData){var u=this.data;this._len+arguments.length>u.length&&(this._expandData(),u=this.data);for(var d=0;d<arguments.length;d++)u[this._len++]=arguments[d]}},n.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},n.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var t=[],e=0;e<this._len;e++)t[e]=this.data[e];this.data=t}},n.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var t=this.data;t instanceof Array&&(t.length=this._len,DR&&this._len>11&&(this.data=new Float32Array(t)))}},n.prototype.getBoundingRect=function(){Ns[0]=Ns[1]=Ws[0]=Ws[1]=Number.MAX_VALUE,Qh[0]=Qh[1]=Vs[0]=Vs[1]=-Number.MAX_VALUE;var t=this.data,e=0,i=0,r=0,o=0,a;for(a=0;a<this._len;){var s=t[a++],l=a===1;switch(l&&(e=t[a],i=t[a+1],r=e,o=i),s){case ui.M:e=r=t[a++],i=o=t[a++],Ws[0]=r,Ws[1]=o,Vs[0]=r,Vs[1]=o;break;case ui.L:v5(e,i,t[a],t[a+1],Ws,Vs),e=t[a++],i=t[a++];break;case ui.C:lft(e,i,t[a++],t[a++],t[a++],t[a++],t[a],t[a+1],Ws,Vs),e=t[a++],i=t[a++];break;case ui.Q:hft(e,i,t[a++],t[a++],t[a],t[a+1],Ws,Vs),e=t[a++],i=t[a++];break;case ui.A:var h=t[a++],u=t[a++],d=t[a++],c=t[a++],f=t[a++],g=t[a++]+f;a+=1;var p=!t[a++];l&&(r=Hd(f)*d+h,o=zd(f)*c+u),uft(h,u,d,c,f,g,p,Ws,Vs),e=Hd(g)*d+h,i=zd(g)*c+u;break;case ui.R:r=e=t[a++],o=i=t[a++];var v=t[a++],m=t[a++];v5(r,o,r+v,o+m,Ws,Vs);break;case ui.Z:e=r,i=o;break}Pu(Ns,Ns,Ws),Bu(Qh,Qh,Vs)}return a===0&&(Ns[0]=Ns[1]=Qh[0]=Qh[1]=0),new te(Ns[0],Ns[1],Qh[0]-Ns[0],Qh[1]-Ns[1])},n.prototype._calculateLength=function(){var t=this.data,e=this._len,i=this._ux,r=this._uy,o=0,a=0,s=0,l=0;this._pathSegLen||(this._pathSegLen=[]);for(var h=this._pathSegLen,u=0,d=0,c=0;c<e;){var f=t[c++],g=c===1;g&&(o=t[c],a=t[c+1],s=o,l=a);var p=-1;switch(f){case ui.M:o=s=t[c++],a=l=t[c++];break;case ui.L:{var v=t[c++],m=t[c++],y=v-o,b=m-a;(Wl(y)>i||Wl(b)>r||c===e-1)&&(p=Math.sqrt(y*y+b*b),o=v,a=m);break}case ui.C:{var _=t[c++],w=t[c++],v=t[c++],m=t[c++],C=t[c++],x=t[c++];p=Bdt(o,a,_,w,v,m,C,x,10),o=C,a=x;break}case ui.Q:{var _=t[c++],w=t[c++],v=t[c++],m=t[c++];p=Ldt(o,a,_,w,v,m,10),o=v,a=m;break}case ui.A:var S=t[c++],A=t[c++],T=t[c++],M=t[c++],R=t[c++],L=t[c++],B=L+R;c+=1,g&&(s=Hd(R)*T+S,l=zd(R)*M+A),p=ER(T,M)*LR(gu,Math.abs(L)),o=Hd(B)*T+S,a=zd(B)*M+A;break;case ui.R:{s=o=t[c++],l=a=t[c++];var P=t[c++],k=t[c++];p=P*2+k*2;break}case ui.Z:{var y=s-o,b=l-a;p=Math.sqrt(y*y+b*b),o=s,a=l;break}}p>=0&&(h[d++]=p,u+=p)}return this._pathLen=u,u},n.prototype.rebuildPath=function(t,e){var i=this.data,r=this._ux,o=this._uy,a=this._len,s,l,h,u,d,c,f=e<1,g,p,v=0,m=0,y,b=0,_,w;if(!(f&&(this._pathSegLen||this._calculateLength(),g=this._pathSegLen,p=this._pathLen,y=e*p,!y)))t:for(var C=0;C<a;){var x=i[C++],S=C===1;switch(S&&(h=i[C],u=i[C+1],s=h,l=u),x!==ui.L&&b>0&&(t.lineTo(_,w),b=0),x){case ui.M:s=h=i[C++],l=u=i[C++],t.moveTo(h,u);break;case ui.L:{d=i[C++],c=i[C++];var A=Wl(d-h),T=Wl(c-u);if(A>r||T>o){if(f){var M=g[m++];if(v+M>y){var R=(y-v)/M;t.lineTo(h*(1-R)+d*R,u*(1-R)+c*R);break t}v+=M}t.lineTo(d,c),h=d,u=c,b=0}else{var L=A*A+T*T;L>b&&(_=d,w=c,b=L)}break}case ui.C:{var B=i[C++],P=i[C++],k=i[C++],E=i[C++],D=i[C++],I=i[C++];if(f){var M=g[m++];if(v+M>y){var R=(y-v)/M;Qu(h,B,k,D,R,Id),Qu(u,P,E,I,R,Od),t.bezierCurveTo(Id[1],Od[1],Id[2],Od[2],Id[3],Od[3]);break t}v+=M}t.bezierCurveTo(B,P,k,E,D,I),h=D,u=I;break}case ui.Q:{var B=i[C++],P=i[C++],k=i[C++],E=i[C++];if(f){var M=g[m++];if(v+M>y){var R=(y-v)/M;Ly(h,B,k,R,Id),Ly(u,P,E,R,Od),t.quadraticCurveTo(Id[1],Od[1],Id[2],Od[2]);break t}v+=M}t.quadraticCurveTo(B,P,k,E),h=k,u=E;break}case ui.A:var O=i[C++],H=i[C++],F=i[C++],N=i[C++],$=i[C++],V=i[C++],X=i[C++],Z=!i[C++],tt=F>N?F:N,K=Wl(F-N)>.001,rt=$+V,q=!1;if(f){var M=g[m++];v+M>y&&(rt=$+V*(y-v)/M,q=!0),v+=M}if(K&&t.ellipse?t.ellipse(O,H,F,N,X,$,rt,Z):t.arc(O,H,tt,$,rt,Z),q)break t;S&&(s=Hd($)*F+O,l=zd($)*N+H),h=Hd(rt)*F+O,u=zd(rt)*N+H;break;case ui.R:s=h=i[C],l=u=i[C+1],d=i[C++],c=i[C++];var it=i[C++],nt=i[C++];if(f){var M=g[m++];if(v+M>y){var W=y-v;t.moveTo(d,c),t.lineTo(d+LR(W,it),c),W-=it,W>0&&t.lineTo(d+it,c+LR(W,nt)),W-=nt,W>0&&t.lineTo(d+ER(it-W,0),c+nt),W-=it,W>0&&t.lineTo(d,c+ER(nt-W,0));break t}v+=M}t.rect(d,c,it,nt);break;case ui.Z:if(f){var M=g[m++];if(v+M>y){var R=(y-v)/M;t.lineTo(h*(1-R)+s*R,u*(1-R)+l*R);break t}v+=M}t.closePath(),h=s,u=l}}},n.prototype.clone=function(){var t=new n,e=this.data;return t.data=e.slice?e.slice():Array.prototype.slice.call(e),t._len=this._len,t},n.CMD=ui,n.initDefaultProps=(function(){var t=n.prototype;t._saveData=!0,t._ux=0,t._uy=0,t._pendingPtDist=0,t._version=0})(),n})();function yu(n,t,e,i,r,o,a){if(r===0)return!1;var s=r,l=0,h=n;if(a>t+s&&a>i+s||a<t-s&&a<i-s||o>n+s&&o>e+s||o<n-s&&o<e-s)return!1;if(n!==e)l=(t-i)/(n-e),h=(n*i-e*t)/(n-e);else return Math.abs(o-n)<=s/2;var u=l*o-a+h,d=u*u/(l*l+1);return d<=s/2*s/2}function dft(n,t,e,i,r,o,a,s,l,h,u){if(l===0)return!1;var d=l;if(u>t+d&&u>i+d&&u>o+d&&u>s+d||u<t-d&&u<i-d&&u<o-d&&u<s-d||h>n+d&&h>e+d&&h>r+d&&h>a+d||h<n-d&&h<e-d&&h<r-d&&h<a-d)return!1;var c=yK(n,t,e,i,r,o,a,s,h,u,null);return c<=d/2}function QK(n,t,e,i,r,o,a,s,l){if(a===0)return!1;var h=a;if(l>t+h&&l>i+h&&l>o+h||l<t-h&&l<i-h&&l<o-h||s>n+h&&s>e+h&&s>r+h||s<n-h&&s<e-h&&s<r-h)return!1;var u=_K(n,t,e,i,r,o,s,l,null);return u<=h/2}var b5=Math.PI*2;function jo(n){return n%=b5,n<0&&(n+=b5),n}var wm=Math.PI*2;function cft(n,t,e,i,r,o,a,s,l){if(a===0)return!1;var h=a;s-=n,l-=t;var u=Math.sqrt(s*s+l*l);if(u-h>e||u+h<e)return!1;if(Math.abs(i-r)%wm<1e-4)return!0;if(o){var d=i;i=jo(r),r=jo(d)}else i=jo(i),r=jo(r);i>r&&(r+=wm);var c=Math.atan2(l,s);return c<0&&(c+=wm),c>=i&&c<=r||c+wm>=i&&c+wm<=r}function ah(n,t,e,i,r,o){if(o>t&&o>i||o<t&&o<i||i===t)return 0;var a=(o-t)/(i-t),s=i<t?1:-1;(a===1||a===0)&&(s=i<t?.5:-.5);var l=a*(e-n)+n;return l===r?1/0:l>r?s:0}var tu=Tl.CMD,Fd=Math.PI*2,fft=1e-4;function gft(n,t){return Math.abs(n-t)<fft}var qr=[-1,-1,-1],Ca=[-1,-1];function pft(){var n=Ca[0];Ca[0]=Ca[1],Ca[1]=n}function vft(n,t,e,i,r,o,a,s,l,h){if(h>t&&h>i&&h>o&&h>s||h<t&&h<i&&h<o&&h<s)return 0;var u=ex(t,i,o,s,h,qr);if(u===0)return 0;for(var d=0,c=-1,f=void 0,g=void 0,p=0;p<u;p++){var v=qr[p],m=v===0||v===1?.5:1,y=jn(n,e,r,a,v);y<l||(c<0&&(c=mK(t,i,o,s,Ca),Ca[1]<Ca[0]&&c>1&&pft(),f=jn(t,i,o,s,Ca[0]),c>1&&(g=jn(t,i,o,s,Ca[1]))),c===2?v<Ca[0]?d+=f<t?m:-m:v<Ca[1]?d+=g<f?m:-m:d+=s<g?m:-m:v<Ca[0]?d+=f<t?m:-m:d+=s<f?m:-m)}return d}function mft(n,t,e,i,r,o,a,s){if(s>t&&s>i&&s>o||s<t&&s<i&&s<o)return 0;var l=kdt(t,i,o,s,qr);if(l===0)return 0;var h=bK(t,i,o);if(h>=0&&h<=1){for(var u=0,d=ir(t,i,o,h),c=0;c<l;c++){var f=qr[c]===0||qr[c]===1?.5:1,g=ir(n,e,r,qr[c]);g<a||(qr[c]<h?u+=d<t?f:-f:u+=o<d?f:-f)}return u}else{var f=qr[0]===0||qr[0]===1?.5:1,g=ir(n,e,r,qr[0]);return g<a?0:o<t?f:-f}}function yft(n,t,e,i,r,o,a,s){if(s-=t,s>e||s<-e)return 0;var l=Math.sqrt(e*e-s*s);qr[0]=-l,qr[1]=l;var h=Math.abs(i-r);if(h<1e-4)return 0;if(h>=Fd-1e-4){i=0,r=Fd;var u=o?1:-1;return a>=qr[0]+n&&a<=qr[1]+n?u:0}if(i>r){var d=i;i=r,r=d}i<0&&(i+=Fd,r+=Fd);for(var c=0,f=0;f<2;f++){var g=qr[f];if(g+n>a){var p=Math.atan2(s,g),u=o?1:-1;p<0&&(p=Fd+p),(p>=i&&p<=r||p+Fd>=i&&p+Fd<=r)&&(p>Math.PI/2&&p<Math.PI*1.5&&(u=-u),c+=u)}}return c}function tZ(n,t,e,i,r){for(var o=n.data,a=n.len(),s=0,l=0,h=0,u=0,d=0,c,f,g=0;g<a;){var p=o[g++],v=g===1;switch(p===tu.M&&g>1&&(e||(s+=ah(l,h,u,d,i,r))),v&&(l=o[g],h=o[g+1],u=l,d=h),p){case tu.M:u=o[g++],d=o[g++],l=u,h=d;break;case tu.L:if(e){if(yu(l,h,o[g],o[g+1],t,i,r))return!0}else s+=ah(l,h,o[g],o[g+1],i,r)||0;l=o[g++],h=o[g++];break;case tu.C:if(e){if(dft(l,h,o[g++],o[g++],o[g++],o[g++],o[g],o[g+1],t,i,r))return!0}else s+=vft(l,h,o[g++],o[g++],o[g++],o[g++],o[g],o[g+1],i,r)||0;l=o[g++],h=o[g++];break;case tu.Q:if(e){if(QK(l,h,o[g++],o[g++],o[g],o[g+1],t,i,r))return!0}else s+=mft(l,h,o[g++],o[g++],o[g],o[g+1],i,r)||0;l=o[g++],h=o[g++];break;case tu.A:var m=o[g++],y=o[g++],b=o[g++],_=o[g++],w=o[g++],C=o[g++];g+=1;var x=!!(1-o[g++]);c=Math.cos(w)*b+m,f=Math.sin(w)*_+y,v?(u=c,d=f):s+=ah(l,h,c,f,i,r);var S=(i-m)*_/b+m;if(e){if(cft(m,y,_,w,w+C,x,t,S,r))return!0}else s+=yft(m,y,_,w,w+C,x,S,r);l=Math.cos(w+C)*b+m,h=Math.sin(w+C)*_+y;break;case tu.R:u=l=o[g++],d=h=o[g++];var A=o[g++],T=o[g++];if(c=u+A,f=d+T,e){if(yu(u,d,c,d,t,i,r)||yu(c,d,c,f,t,i,r)||yu(c,f,u,f,t,i,r)||yu(u,f,u,d,t,i,r))return!0}else s+=ah(c,d,c,f,i,r),s+=ah(u,f,u,d,i,r);break;case tu.Z:if(e){if(yu(l,h,u,d,t,i,r))return!0}else s+=ah(l,h,u,d,i,r);l=u,h=d;break}}return!e&&!gft(h,d)&&(s+=ah(l,h,u,d,i,r)||0),s!==0}function bft(n,t,e){return tZ(n,0,!1,t,e)}function _ft(n,t,e,i){return tZ(n,t,!0,e,i)}var sx=Ot({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},rf),Cft={style:Ot({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},NT.style)},OR=Sl.concat(["invisible","culling","z","z2","zlevel","parent"]),ue=(function(n){et(t,n);function t(e){return n.call(this,e)||this}return t.prototype.update=function(){var e=this;n.prototype.update.call(this);var i=this.style;if(i.decal){var r=this._decalEl=this._decalEl||new t;r.buildPath===t.prototype.buildPath&&(r.buildPath=function(l){e.buildPath(l,e.shape)}),r.silent=!0;var o=r.style;for(var a in i)o[a]!==i[a]&&(o[a]=i[a]);o.fill=i.fill?i.decal:null,o.decal=null,o.shadowColor=null,i.strokeFirst&&(o.stroke=null);for(var s=0;s<OR.length;++s)r[OR[s]]=this[OR[s]];r.__dirty|=$o}else this._decalEl&&(this._decalEl=null)},t.prototype.getDecalElement=function(){return this._decalEl},t.prototype._init=function(e){var i=pe(e);this.shape=this.getDefaultShape();var r=this.getDefaultStyle();r&&this.useStyle(r);for(var o=0;o<i.length;o++){var a=i[o],s=e[a];a==="style"?this.style?ht(this.style,s):this.useStyle(s):a==="shape"?ht(this.shape,s):n.prototype.attrKV.call(this,a,s)}this.style||this.useStyle({})},t.prototype.getDefaultStyle=function(){return null},t.prototype.getDefaultShape=function(){return{}},t.prototype.canBeInsideText=function(){return this.hasFill()},t.prototype.getInsideTextFill=function(){var e=this.style.fill;if(e!=="none"){if(Ct(e)){var i=nx(e,0);return i>.5?CE:i>.2?oct:wE}else if(e)return wE}return CE},t.prototype.getInsideTextStroke=function(e){var i=this.style.fill;if(Ct(i)){var r=this.__zr,o=!!(r&&r.isDarkMode()),a=nx(e,0)<_E;if(o===a)return i}},t.prototype.buildPath=function(e,i,r){},t.prototype.pathUpdated=function(){this.__dirty&=~Xg},t.prototype.getUpdatedPathProxy=function(e){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,e),this.path},t.prototype.createPathProxy=function(){this.path=new Tl(!1)},t.prototype.hasStroke=function(){var e=this.style,i=e.stroke;return!(i==null||i==="none"||!(e.lineWidth>0))},t.prototype.hasFill=function(){var e=this.style,i=e.fill;return i!=null&&i!=="none"},t.prototype.getBoundingRect=function(){var e=this._rect,i=this.style,r=!e;if(r){var o=!1;this.path||(o=!0,this.createPathProxy());var a=this.path;(o||this.__dirty&Xg)&&(a.beginPath(),this.buildPath(a,this.shape,!1),this.pathUpdated()),e=a.getBoundingRect()}if(this._rect=e,this.hasStroke()&&this.path&&this.path.len()>0){var s=this._rectStroke||(this._rectStroke=e.clone());if(this.__dirty||r){s.copy(e);var l=i.strokeNoScale?this.getLineScale():1,h=i.lineWidth;if(!this.hasFill()){var u=this.strokeContainThreshold;h=Math.max(h,u??4)}l>1e-10&&(s.width+=h/l,s.height+=h/l,s.x-=h/l/2,s.y-=h/l/2)}return s}return e},t.prototype.contain=function(e,i){var r=this.transformCoordToLocal(e,i),o=this.getBoundingRect(),a=this.style;if(e=r[0],i=r[1],o.contain(e,i)){var s=this.path;if(this.hasStroke()){var l=a.lineWidth,h=a.strokeNoScale?this.getLineScale():1;if(h>1e-10&&(this.hasFill()||(l=Math.max(l,this.strokeContainThreshold)),_ft(s,l/h,e,i)))return!0}if(this.hasFill())return bft(s,e,i)}return!1},t.prototype.dirtyShape=function(){this.__dirty|=Xg,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},t.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},t.prototype.animateShape=function(e){return this.animate("shape",e)},t.prototype.updateDuringAnimation=function(e){e==="style"?this.dirtyStyle():e==="shape"?this.dirtyShape():this.markRedraw()},t.prototype.attrKV=function(e,i){e==="shape"?this.setShape(i):n.prototype.attrKV.call(this,e,i)},t.prototype.setShape=function(e,i){var r=this.shape;return r||(r=this.shape={}),typeof e=="string"?r[e]=i:ht(r,e),this.dirtyShape(),this},t.prototype.shapeChanged=function(){return!!(this.__dirty&Xg)},t.prototype.createStyle=function(e){return ET(sx,e)},t.prototype._innerSaveToNormal=function(e){n.prototype._innerSaveToNormal.call(this,e);var i=this._normalState;e.shape&&!i.shape&&(i.shape=ht({},this.shape))},t.prototype._applyStateObj=function(e,i,r,o,a,s){n.prototype._applyStateObj.call(this,e,i,r,o,a,s);var l=!(i&&o),h;if(i&&i.shape?a?o?h=i.shape:(h=ht({},r.shape),ht(h,i.shape)):(h=ht({},o?this.shape:r.shape),ht(h,i.shape)):l&&(h=r.shape),h)if(a){this.shape=ht({},this.shape);for(var u={},d=pe(h),c=0;c<d.length;c++){var f=d[c];typeof h[f]=="object"?this.shape[f]=h[f]:u[f]=h[f]}this._transitionState(e,{shape:u},s)}else this.shape=h,this.dirtyShape()},t.prototype._mergeStates=function(e){for(var i=n.prototype._mergeStates.call(this,e),r,o=0;o<e.length;o++){var a=e[o];a.shape&&(r=r||{},this._mergeStyle(r,a.shape))}return r&&(i.shape=r),i},t.prototype.getAnimationStyleProps=function(){return Cft},t.prototype.isZeroArea=function(){return!1},t.extend=function(e){var i=(function(o){et(a,o);function a(s){var l=o.call(this,s)||this;return e.init&&e.init.call(l,s),l}return a.prototype.getDefaultStyle=function(){return zt(e.style)},a.prototype.getDefaultShape=function(){return zt(e.shape)},a})(t);for(var r in e)typeof e[r]=="function"&&(i.prototype[r]=e[r]);return i},t.initDefaultProps=(function(){var e=t.prototype;e.type="path",e.strokeContainThreshold=5,e.segmentIgnoreThreshold=0,e.subPixelOptimize=!1,e.autoBatch=!1,e.__dirty=$o|c0|Xg})(),t})(Ua),wft=Ot({strokeFirst:!0,font:Zu,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},sx),Gp=(function(n){et(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.hasStroke=function(){var e=this.style,i=e.stroke;return i!=null&&i!=="none"&&e.lineWidth>0},t.prototype.hasFill=function(){var e=this.style,i=e.fill;return i!=null&&i!=="none"},t.prototype.createStyle=function(e){return ET(wft,e)},t.prototype.setBoundingRect=function(e){this._rect=e},t.prototype.getBoundingRect=function(){var e=this.style;if(!this._rect){var i=e.text;i!=null?i+="":i="";var r=t_(i,e.font,e.textAlign,e.textBaseline);if(r.x+=e.x||0,r.y+=e.y||0,this.hasStroke()){var o=e.lineWidth;r.x-=o/2,r.y-=o/2,r.width+=o,r.height+=o}this._rect=r}return this._rect},t.initDefaultProps=(function(){var e=t.prototype;e.dirtyRectTolerance=10})(),t})(Ua);Gp.prototype.type="tspan";var xft=Ot({x:0,y:0},rf),Sft={style:Ot({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},NT.style)};function Aft(n){return!!(n&&typeof n!="string"&&n.width&&n.height)}var hr=(function(n){et(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.createStyle=function(e){return ET(xft,e)},t.prototype._getSize=function(e){var i=this.style,r=i[e];if(r!=null)return r;var o=Aft(i.image)?i.image:this.__image;if(!o)return 0;var a=e==="width"?"height":"width",s=i[a];return s==null?o[e]:o[e]/o[a]*s},t.prototype.getWidth=function(){return this._getSize("width")},t.prototype.getHeight=function(){return this._getSize("height")},t.prototype.getAnimationStyleProps=function(){return Sft},t.prototype.getBoundingRect=function(){var e=this.style;return this._rect||(this._rect=new te(e.x||0,e.y||0,this.getWidth(),this.getHeight())),this._rect},t})(Ua);hr.prototype.type="image";function Tft(n,t){var e=t.x,i=t.y,r=t.width,o=t.height,a=t.r,s,l,h,u;r<0&&(e=e+r,r=-r),o<0&&(i=i+o,o=-o),typeof a=="number"?s=l=h=u=a:a instanceof Array?a.length===1?s=l=h=u=a[0]:a.length===2?(s=h=a[0],l=u=a[1]):a.length===3?(s=a[0],l=u=a[1],h=a[2]):(s=a[0],l=a[1],h=a[2],u=a[3]):s=l=h=u=0;var d;s+l>r&&(d=s+l,s*=r/d,l*=r/d),h+u>r&&(d=h+u,h*=r/d,u*=r/d),l+h>o&&(d=l+h,l*=o/d,h*=o/d),s+u>o&&(d=s+u,s*=o/d,u*=o/d),n.moveTo(e+s,i),n.lineTo(e+r-l,i),l!==0&&n.arc(e+r-l,i+l,l,-Math.PI/2,0),n.lineTo(e+r,i+o-h),h!==0&&n.arc(e+r-h,i+o-h,h,0,Math.PI/2),n.lineTo(e+u,i+o),u!==0&&n.arc(e+u,i+o-u,u,Math.PI/2,Math.PI),n.lineTo(e,i+s),s!==0&&n.arc(e+s,i+s,s,Math.PI,Math.PI*1.5)}var np=Math.round;function eZ(n,t,e){if(t){var i=t.x1,r=t.x2,o=t.y1,a=t.y2;n.x1=i,n.x2=r,n.y1=o,n.y2=a;var s=e&&e.lineWidth;return s&&(np(i*2)===np(r*2)&&(n.x1=n.x2=Dc(i,s,!0)),np(o*2)===np(a*2)&&(n.y1=n.y2=Dc(o,s,!0))),n}}function iZ(n,t,e){if(t){var i=t.x,r=t.y,o=t.width,a=t.height;n.x=i,n.y=r,n.width=o,n.height=a;var s=e&&e.lineWidth;return s&&(n.x=Dc(i,s,!0),n.y=Dc(r,s,!0),n.width=Math.max(Dc(i+o,s,!1)-n.x,o===0?0:1),n.height=Math.max(Dc(r+a,s,!1)-n.y,a===0?0:1)),n}}function Dc(n,t,e){if(!t)return n;var i=np(n*2);return(i+np(t))%2===0?i/2:(i+(e?1:-1))/2}var Mft=(function(){function n(){this.x=0,this.y=0,this.width=0,this.height=0}return n})(),Rft={},Ae=(function(n){et(t,n);function t(e){return n.call(this,e)||this}return t.prototype.getDefaultShape=function(){return new Mft},t.prototype.buildPath=function(e,i){var r,o,a,s;if(this.subPixelOptimize){var l=iZ(Rft,i,this.style);r=l.x,o=l.y,a=l.width,s=l.height,l.r=i.r,i=l}else r=i.x,o=i.y,a=i.width,s=i.height;i.r?Tft(e,i):e.rect(r,o,a,s)},t.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},t})(ue);Ae.prototype.type="rect";var _5={fill:"#000"},C5=2,Pft={style:Ot({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},NT.style)},Re=(function(n){et(t,n);function t(e){var i=n.call(this)||this;return i.type="text",i._children=[],i._defaultStyle=_5,i.attr(e),i}return t.prototype.childrenRef=function(){return this._children},t.prototype.update=function(){n.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var e=0;e<this._children.length;e++){var i=this._children[e];i.zlevel=this.zlevel,i.z=this.z,i.z2=this.z2,i.culling=this.culling,i.cursor=this.cursor,i.invisible=this.invisible}},t.prototype.updateTransform=function(){var e=this.innerTransformable;e?(e.updateTransform(),e.transform&&(this.transform=e.transform)):n.prototype.updateTransform.call(this)},t.prototype.getLocalTransform=function(e){var i=this.innerTransformable;return i?i.getLocalTransform(e):n.prototype.getLocalTransform.call(this,e)},t.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),n.prototype.getComputedTransform.call(this)},t.prototype._updateSubTexts=function(){this._childCursor=0,Lft(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},t.prototype.addSelfToZr=function(e){n.prototype.addSelfToZr.call(this,e);for(var i=0;i<this._children.length;i++)this._children[i].__zr=e},t.prototype.removeSelfFromZr=function(e){n.prototype.removeSelfFromZr.call(this,e);for(var i=0;i<this._children.length;i++)this._children[i].__zr=null},t.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var e=new te(0,0,0,0),i=this._children,r=[],o=null,a=0;a<i.length;a++){var s=i[a],l=s.getBoundingRect(),h=s.getLocalTransform(r);h?(e.copy(l),e.applyTransform(h),o=o||e.clone(),o.union(e)):(o=o||l.clone(),o.union(l))}this._rect=o||e}return this._rect},t.prototype.setDefaultTextStyle=function(e){this._defaultStyle=e||_5},t.prototype.setTextContent=function(e){},t.prototype._mergeStyle=function(e,i){if(!i)return e;var r=i.rich,o=e.rich||r&&{};return ht(e,i),r&&o?(this._mergeRich(o,r),e.rich=o):o&&(e.rich=o),e},t.prototype._mergeRich=function(e,i){for(var r=pe(i),o=0;o<r.length;o++){var a=r[o];e[a]=e[a]||{},ht(e[a],i[a])}},t.prototype.getAnimationStyleProps=function(){return Pft},t.prototype._getOrCreateChild=function(e){var i=this._children[this._childCursor];return(!i||!(i instanceof e))&&(i=new e),this._children[this._childCursor++]=i,i.__zr=this.__zr,i.parent=this,i},t.prototype._updatePlainTexts=function(){var e=this.style,i=e.font||Zu,r=e.padding,o=R5(e),a=Qct(o,e),s=HR(e),l=!!e.backgroundColor,h=a.outerHeight,u=a.outerWidth,d=a.contentWidth,c=a.lines,f=a.lineHeight,g=this._defaultStyle;this.isTruncated=!!a.isTruncated;var p=e.x||0,v=e.y||0,m=e.align||g.align||"left",y=e.verticalAlign||g.verticalAlign||"top",b=p,_=qg(v,a.contentHeight,y);if(s||r){var w=g0(p,u,m),C=qg(v,h,y);s&&this._renderBackground(e,e,w,C,u,h)}_+=f/2,r&&(b=M5(p,m,r),y==="top"?_+=r[0]:y==="bottom"&&(_-=r[2]));for(var x=0,S=!1,A=T5("fill"in e?e.fill:(S=!0,g.fill)),T=A5("stroke"in e?e.stroke:!l&&(!g.autoStroke||S)?(x=C5,g.stroke):null),M=e.textShadowBlur>0,R=e.width!=null&&(e.overflow==="truncate"||e.overflow==="break"||e.overflow==="breakAll"),L=a.calculatedLineHeight,B=0;B<c.length;B++){var P=this._getOrCreateChild(Gp),k=P.createStyle();P.useStyle(k),k.text=c[B],k.x=b,k.y=_,k.textAlign=m,k.textBaseline="middle",k.opacity=e.opacity,k.strokeFirst=!0,M&&(k.shadowBlur=e.textShadowBlur||0,k.shadowColor=e.textShadowColor||"transparent",k.shadowOffsetX=e.textShadowOffsetX||0,k.shadowOffsetY=e.textShadowOffsetY||0),k.stroke=T,k.fill=A,T&&(k.lineWidth=e.lineWidth||x,k.lineDash=e.lineDash,k.lineDashOffset=e.lineDashOffset||0),k.font=i,x5(k,e),_+=f,R&&P.setBoundingRect(new te(g0(k.x,d,k.textAlign),qg(k.y,L,k.textBaseline),d,L))}},t.prototype._updateRichTexts=function(){var e=this.style,i=R5(e),r=ift(i,e),o=r.width,a=r.outerWidth,s=r.outerHeight,l=e.padding,h=e.x||0,u=e.y||0,d=this._defaultStyle,c=e.align||d.align,f=e.verticalAlign||d.verticalAlign;this.isTruncated=!!r.isTruncated;var g=g0(h,a,c),p=qg(u,s,f),v=g,m=p;l&&(v+=l[3],m+=l[0]);var y=v+o;HR(e)&&this._renderBackground(e,e,g,p,a,s);for(var b=!!e.backgroundColor,_=0;_<r.lines.length;_++){for(var w=r.lines[_],C=w.tokens,x=C.length,S=w.lineHeight,A=w.width,T=0,M=v,R=y,L=x-1,B=void 0;T<x&&(B=C[T],!B.align||B.align==="left");)this._placeToken(B,e,S,m,M,"left",b),A-=B.width,M+=B.width,T++;for(;L>=0&&(B=C[L],B.align==="right");)this._placeToken(B,e,S,m,R,"right",b),A-=B.width,R-=B.width,L--;for(M+=(o-(M-v)-(y-R)-A)/2;T<=L;)B=C[T],this._placeToken(B,e,S,m,M+B.width/2,"center",b),M+=B.width,T++;m+=S}},t.prototype._placeToken=function(e,i,r,o,a,s,l){var h=i.rich[e.styleName]||{};h.text=e.text;var u=e.verticalAlign,d=o+r/2;u==="top"?d=o+e.height/2:u==="bottom"&&(d=o+r-e.height/2);var c=!e.isLineHolder&&HR(h);c&&this._renderBackground(h,i,s==="right"?a-e.width:s==="center"?a-e.width/2:a,d-e.height/2,e.width,e.height);var f=!!h.backgroundColor,g=e.textPadding;g&&(a=M5(a,s,g),d-=e.height/2-g[0]-e.innerHeight/2);var p=this._getOrCreateChild(Gp),v=p.createStyle();p.useStyle(v);var m=this._defaultStyle,y=!1,b=0,_=T5("fill"in h?h.fill:"fill"in i?i.fill:(y=!0,m.fill)),w=A5("stroke"in h?h.stroke:"stroke"in i?i.stroke:!f&&!l&&(!m.autoStroke||y)?(b=C5,m.stroke):null),C=h.textShadowBlur>0||i.textShadowBlur>0;v.text=e.text,v.x=a,v.y=d,C&&(v.shadowBlur=h.textShadowBlur||i.textShadowBlur||0,v.shadowColor=h.textShadowColor||i.textShadowColor||"transparent",v.shadowOffsetX=h.textShadowOffsetX||i.textShadowOffsetX||0,v.shadowOffsetY=h.textShadowOffsetY||i.textShadowOffsetY||0),v.textAlign=s,v.textBaseline="middle",v.font=e.font||Zu,v.opacity=pl(h.opacity,i.opacity,1),x5(v,h),w&&(v.lineWidth=pl(h.lineWidth,i.lineWidth,b),v.lineDash=Yt(h.lineDash,i.lineDash),v.lineDashOffset=i.lineDashOffset||0,v.stroke=w),_&&(v.fill=_);var x=e.contentWidth,S=e.contentHeight;p.setBoundingRect(new te(g0(v.x,x,v.textAlign),qg(v.y,S,v.textBaseline),x,S))},t.prototype._renderBackground=function(e,i,r,o,a,s){var l=e.backgroundColor,h=e.borderWidth,u=e.borderColor,d=l&&l.image,c=l&&!d,f=e.borderRadius,g=this,p,v;if(c||e.lineHeight||h&&u){p=this._getOrCreateChild(Ae),p.useStyle(p.createStyle()),p.style.fill=null;var m=p.shape;m.x=r,m.y=o,m.width=a,m.height=s,m.r=f,p.dirtyShape()}if(c){var y=p.style;y.fill=l||null,y.fillOpacity=Yt(e.fillOpacity,1)}else if(d){v=this._getOrCreateChild(hr),v.onload=function(){g.dirtyStyle()};var b=v.style;b.image=l.image,b.x=r,b.y=o,b.width=a,b.height=s}if(h&&u){var y=p.style;y.lineWidth=h,y.stroke=u,y.strokeOpacity=Yt(e.strokeOpacity,1),y.lineDash=e.borderDash,y.lineDashOffset=e.borderDashOffset||0,p.strokeContainThreshold=0,p.hasFill()&&p.hasStroke()&&(y.strokeFirst=!0,y.lineWidth*=2)}var _=(p||v).style;_.shadowBlur=e.shadowBlur||0,_.shadowColor=e.shadowColor||"transparent",_.shadowOffsetX=e.shadowOffsetX||0,_.shadowOffsetY=e.shadowOffsetY||0,_.opacity=pl(e.opacity,i.opacity,1)},t.makeFont=function(e){var i="";return rZ(e)&&(i=[e.fontStyle,e.fontWeight,nZ(e.fontSize),e.fontFamily||"sans-serif"].join(" ")),i&&ps(i)||e.textFont||e.font},t})(Ua),Bft={left:!0,right:1,center:1},kft={top:1,bottom:1,middle:1},w5=["fontStyle","fontWeight","fontSize","fontFamily"];function nZ(n){return typeof n=="string"&&(n.indexOf("px")!==-1||n.indexOf("rem")!==-1||n.indexOf("em")!==-1)?n:isNaN(+n)?bH+"px":n+"px"}function x5(n,t){for(var e=0;e<w5.length;e++){var i=w5[e],r=t[i];r!=null&&(n[i]=r)}}function rZ(n){return n.fontSize!=null||n.fontFamily||n.fontWeight}function Lft(n){return S5(n),z(n.rich,S5),n}function S5(n){if(n){n.font=Re.makeFont(n);var t=n.align;t==="middle"&&(t="center"),n.align=t==null||Bft[t]?t:"left";var e=n.verticalAlign;e==="center"&&(e="middle"),n.verticalAlign=e==null||kft[e]?e:"top";var i=n.padding;i&&(n.padding=AH(n.padding))}}function A5(n,t){return n==null||t<=0||n==="transparent"||n==="none"?null:n.image||n.colorStops?"#000":n}function T5(n){return n==null||n==="none"?null:n.image||n.colorStops?"#000":n}function M5(n,t,e){return t==="right"?n-e[1]:t==="center"?n+e[3]/2-e[1]/2:n+e[3]}function R5(n){var t=n.text;return t!=null&&(t+=""),t}function HR(n){return!!(n.backgroundColor||n.lineHeight||n.borderWidth&&n.borderColor)}var Vt=Te(),RE=function(n,t,e,i){if(i){var r=Vt(i);r.dataIndex=e,r.dataType=t,r.seriesIndex=n,r.ssrType="chart",i.type==="group"&&i.traverse(function(o){var a=Vt(o);a.seriesIndex=n,a.dataIndex=e,a.dataType=t,a.ssrType="chart"})}},P5=1,B5={},oZ=Te(),zH=Te(),FH=0,i_=1,VT=2,lo=["emphasis","blur","select"],Hy=["normal","emphasis","blur","select"],Fv=10,Eft=9,of="highlight",gw="downplay",Y0="select",pw="unselect",X0="toggleSelect";function cg(n){return n!=null&&n!=="none"}function GT(n,t,e){n.onHoverStateChange&&(n.hoverState||0)!==e&&n.onHoverStateChange(t),n.hoverState=e}function aZ(n){GT(n,"emphasis",VT)}function sZ(n){n.hoverState===VT&&GT(n,"normal",FH)}function NH(n){GT(n,"blur",i_)}function lZ(n){n.hoverState===i_&&GT(n,"normal",FH)}function Dft(n){n.selected=!0}function Ift(n){n.selected=!1}function k5(n,t,e){t(n,e)}function Yh(n,t,e){k5(n,t,e),n.isGroup&&n.traverse(function(i){k5(i,t,e)})}function lx(n,t){switch(t){case"emphasis":n.hoverState=VT;break;case"normal":n.hoverState=FH;break;case"blur":n.hoverState=i_;break;case"select":n.selected=!0}}function Oft(n,t,e,i){for(var r=n.style,o={},a=0;a<t.length;a++){var s=t[a],l=r[s];o[s]=l??(i&&i[s])}for(var a=0;a<n.animators.length;a++){var h=n.animators[a];h.__fromStateTransition&&h.__fromStateTransition.indexOf(e)<0&&h.targetName==="style"&&h.saveTo(o,t)}return o}function Hft(n,t,e,i){var r=e&&ee(e,"select")>=0,o=!1;if(n instanceof ue){var a=oZ(n),s=r&&a.selectFill||a.normalFill,l=r&&a.selectStroke||a.normalStroke;if(cg(s)||cg(l)){i=i||{};var h=i.style||{};h.fill==="inherit"?(o=!0,i=ht({},i),h=ht({},h),h.fill=s):!cg(h.fill)&&cg(s)?(o=!0,i=ht({},i),h=ht({},h),h.fill=fE(s)):!cg(h.stroke)&&cg(l)&&(o||(i=ht({},i),h=ht({},h)),h.stroke=fE(l)),i.style=h}}if(i&&i.z2==null){o||(i=ht({},i));var u=n.z2EmphasisLift;i.z2=n.z2+(u??Fv)}return i}function zft(n,t,e){if(e&&e.z2==null){e=ht({},e);var i=n.z2SelectLift;e.z2=n.z2+(i??Eft)}return e}function Fft(n,t,e){var i=ee(n.currentStates,t)>=0,r=n.style.opacity,o=i?null:Oft(n,["opacity"],t,{opacity:1});e=e||{};var a=e.style||{};return a.opacity==null&&(e=ht({},e),a=ht({opacity:i?r:o.opacity*.1},a),e.style=a),e}function zR(n,t){var e=this.states[n];if(this.style){if(n==="emphasis")return Hft(this,n,t,e);if(n==="blur")return Fft(this,n,e);if(n==="select")return zft(this,n,e)}return e}function Tf(n){n.stateProxy=zR;var t=n.getTextContent(),e=n.getTextGuideLine();t&&(t.stateProxy=zR),e&&(e.stateProxy=zR)}function L5(n,t){!cZ(n,t)&&!n.__highByOuter&&Yh(n,aZ)}function E5(n,t){!cZ(n,t)&&!n.__highByOuter&&Yh(n,sZ)}function Lh(n,t){n.__highByOuter|=1<<(t||0),Yh(n,aZ)}function Eh(n,t){!(n.__highByOuter&=~(1<<(t||0)))&&Yh(n,sZ)}function hZ(n){Yh(n,NH)}function WH(n){Yh(n,lZ)}function uZ(n){Yh(n,Dft)}function dZ(n){Yh(n,Ift)}function cZ(n,t){return n.__highDownSilentOnTouch&&t.zrByTouch}function fZ(n){var t=n.getModel(),e=[],i=[];t.eachComponent(function(r,o){var a=zH(o),s=r==="series",l=s?n.getViewOfSeriesModel(o):n.getViewOfComponentModel(o);!s&&i.push(l),a.isBlured&&(l.group.traverse(function(h){lZ(h)}),s&&e.push(o)),a.isBlured=!1}),z(i,function(r){r&&r.toggleBlurSeries&&r.toggleBlurSeries(e,!1,t)})}function PE(n,t,e,i){var r=i.getModel();e=e||"coordinateSystem";function o(h,u){for(var d=0;d<u.length;d++){var c=h.getItemGraphicEl(u[d]);c&&WH(c)}}if(n!=null&&!(!t||t==="none")){var a=r.getSeriesByIndex(n),s=a.coordinateSystem;s&&s.master&&(s=s.master);var l=[];r.eachSeries(function(h){var u=a===h,d=h.coordinateSystem;d&&d.master&&(d=d.master);var c=d&&s?d===s:u;if(!(e==="series"&&!u||e==="coordinateSystem"&&!c||t==="series"&&u)){var f=i.getViewOfSeriesModel(h);if(f.group.traverse(function(v){v.__highByOuter&&u&&t==="self"||NH(v)}),Wr(t))o(h.getData(),t);else if(Ht(t))for(var g=pe(t),p=0;p<g.length;p++)o(h.getData(g[p]),t[g[p]]);l.push(h),zH(h).isBlured=!0}}),r.eachComponent(function(h,u){if(h!=="series"){var d=i.getViewOfComponentModel(u);d&&d.toggleBlurSeries&&d.toggleBlurSeries(l,!0,r)}})}}function BE(n,t,e){if(!(n==null||t==null)){var i=e.getModel().getComponent(n,t);if(i){zH(i).isBlured=!0;var r=e.getViewOfComponentModel(i);!r||!r.focusBlurEnabled||r.group.traverse(function(o){NH(o)})}}}function Nft(n,t,e){var i=n.seriesIndex,r=n.getData(t.dataType);if(r){var o=Sf(r,t);o=(ut(o)?o[0]:o)||0;var a=r.getItemGraphicEl(o);if(!a)for(var s=r.count(),l=0;!a&&l<s;)a=r.getItemGraphicEl(l++);if(a){var h=Vt(a);PE(i,h.focus,h.blurScope,e)}else{var u=n.get(["emphasis","focus"]),d=n.get(["emphasis","blurScope"]);u!=null&&PE(i,u,d,e)}}}function VH(n,t,e,i){var r={focusSelf:!1,dispatchers:null};if(n==null||n==="series"||t==null||e==null)return r;var o=i.getModel().getComponent(n,t);if(!o)return r;var a=i.getViewOfComponentModel(o);if(!a||!a.findHighDownDispatchers)return r;for(var s=a.findHighDownDispatchers(e),l,h=0;h<s.length;h++)if(Vt(s[h]).focus==="self"){l=!0;break}return{focusSelf:l,dispatchers:s}}function Wft(n,t,e){var i=Vt(n),r=VH(i.componentMainType,i.componentIndex,i.componentHighDownName,e),o=r.dispatchers,a=r.focusSelf;o?(a&&BE(i.componentMainType,i.componentIndex,e),z(o,function(s){return L5(s,t)})):(PE(i.seriesIndex,i.focus,i.blurScope,e),i.focus==="self"&&BE(i.componentMainType,i.componentIndex,e),L5(n,t))}function Vft(n,t,e){fZ(e);var i=Vt(n),r=VH(i.componentMainType,i.componentIndex,i.componentHighDownName,e).dispatchers;r?z(r,function(o){return E5(o,t)}):E5(n,t)}function Gft(n,t,e){if(LE(t)){var i=t.dataType,r=n.getData(i),o=Sf(r,t);ut(o)||(o=[o]),n[t.type===X0?"toggleSelect":t.type===Y0?"select":"unselect"](o,i)}}function D5(n){var t=n.getAllData();z(t,function(e){var i=e.data,r=e.type;i.eachItemGraphicEl(function(o,a){n.isSelected(a,r)?uZ(o):dZ(o)})})}function $ft(n){var t=[];return n.eachSeries(function(e){var i=e.getAllData();z(i,function(r){r.data;var o=r.type,a=e.getSelectedDataIndices();if(a.length>0){var s={dataIndex:a,seriesIndex:e.seriesIndex};o!=null&&(s.dataType=o),t.push(s)}})}),t}function af(n,t,e){Ic(n,!0),Yh(n,Tf),kE(n,t,e)}function jft(n){Ic(n,!1)}function Gi(n,t,e,i){i?jft(n):af(n,t,e)}function kE(n,t,e){var i=Vt(n);t!=null?(i.focus=t,i.blurScope=e):i.focus&&(i.focus=null)}var I5=["emphasis","blur","select"],Uft={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function Ar(n,t,e,i){e=e||"itemStyle";for(var r=0;r<I5.length;r++){var o=I5[r],a=t.getModel([o,e]),s=n.ensureState(o);s.style=i?i(a):a[Uft[e]]()}}function Ic(n,t){var e=t===!1,i=n;n.highDownSilentOnTouch&&(i.__highDownSilentOnTouch=n.highDownSilentOnTouch),(!e||i.__highDownDispatcher)&&(i.__highByOuter=i.__highByOuter||0,i.__highDownDispatcher=!e)}function zy(n){return!!(n&&n.__highDownDispatcher)}function Yft(n,t,e){var i=Vt(n);i.componentMainType=t.mainType,i.componentIndex=t.componentIndex,i.componentHighDownName=e}function Xft(n){var t=B5[n];return t==null&&P5<=32&&(t=B5[n]=P5++),t}function LE(n){var t=n.type;return t===Y0||t===pw||t===X0}function O5(n){var t=n.type;return t===of||t===gw}function qft(n){var t=oZ(n);t.normalFill=n.style.fill,t.normalStroke=n.style.stroke;var e=n.states.select||{};t.selectFill=e.style&&e.style.fill||null,t.selectStroke=e.style&&e.style.stroke||null}var fg=Tl.CMD,Kft=[[],[],[]],H5=Math.sqrt,Zft=Math.atan2;function gZ(n,t){if(t){var e=n.data,i=n.len(),r,o,a,s,l,h,u=fg.M,d=fg.C,c=fg.L,f=fg.R,g=fg.A,p=fg.Q;for(a=0,s=0;a<i;){switch(r=e[a++],s=a,o=0,r){case u:o=1;break;case c:o=1;break;case d:o=3;break;case p:o=2;break;case g:var v=t[4],m=t[5],y=H5(t[0]*t[0]+t[1]*t[1]),b=H5(t[2]*t[2]+t[3]*t[3]),_=Zft(-t[1]/b,t[0]/y);e[a]*=y,e[a++]+=v,e[a]*=b,e[a++]+=m,e[a++]*=y,e[a++]*=b,e[a++]+=_,e[a++]+=_,a+=2,s=a;break;case f:h[0]=e[a++],h[1]=e[a++],Sr(h,h,t),e[s++]=h[0],e[s++]=h[1],h[0]+=e[a++],h[1]+=e[a++],Sr(h,h,t),e[s++]=h[0],e[s++]=h[1]}for(l=0;l<o;l++){var w=Kft[l];w[0]=e[a++],w[1]=e[a++],Sr(w,w,t),e[s++]=w[0],e[s++]=w[1]}}n.increaseVersion()}}var FR=Math.sqrt,cC=Math.sin,fC=Math.cos,xm=Math.PI;function z5(n){return Math.sqrt(n[0]*n[0]+n[1]*n[1])}function EE(n,t){return(n[0]*t[0]+n[1]*t[1])/(z5(n)*z5(t))}function F5(n,t){return(n[0]*t[1]<n[1]*t[0]?-1:1)*Math.acos(EE(n,t))}function N5(n,t,e,i,r,o,a,s,l,h,u){var d=l*(xm/180),c=fC(d)*(n-e)/2+cC(d)*(t-i)/2,f=-1*cC(d)*(n-e)/2+fC(d)*(t-i)/2,g=c*c/(a*a)+f*f/(s*s);g>1&&(a*=FR(g),s*=FR(g));var p=(r===o?-1:1)*FR((a*a*(s*s)-a*a*(f*f)-s*s*(c*c))/(a*a*(f*f)+s*s*(c*c)))||0,v=p*a*f/s,m=p*-s*c/a,y=(n+e)/2+fC(d)*v-cC(d)*m,b=(t+i)/2+cC(d)*v+fC(d)*m,_=F5([1,0],[(c-v)/a,(f-m)/s]),w=[(c-v)/a,(f-m)/s],C=[(-1*c-v)/a,(-1*f-m)/s],x=F5(w,C);if(EE(w,C)<=-1&&(x=xm),EE(w,C)>=1&&(x=0),x<0){var S=Math.round(x/xm*1e6)/1e6;x=xm*2+S%2*xm}u.addData(h,y,b,a,s,_,x,d,o)}var Jft=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,Qft=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function tgt(n){var t=new Tl;if(!n)return t;var e=0,i=0,r=e,o=i,a,s=Tl.CMD,l=n.match(Jft);if(!l)return t;for(var h=0;h<l.length;h++){for(var u=l[h],d=u.charAt(0),c=void 0,f=u.match(Qft)||[],g=f.length,p=0;p<g;p++)f[p]=parseFloat(f[p]);for(var v=0;v<g;){var m=void 0,y=void 0,b=void 0,_=void 0,w=void 0,C=void 0,x=void 0,S=e,A=i,T=void 0,M=void 0;switch(d){case"l":e+=f[v++],i+=f[v++],c=s.L,t.addData(c,e,i);break;case"L":e=f[v++],i=f[v++],c=s.L,t.addData(c,e,i);break;case"m":e+=f[v++],i+=f[v++],c=s.M,t.addData(c,e,i),r=e,o=i,d="l";break;case"M":e=f[v++],i=f[v++],c=s.M,t.addData(c,e,i),r=e,o=i,d="L";break;case"h":e+=f[v++],c=s.L,t.addData(c,e,i);break;case"H":e=f[v++],c=s.L,t.addData(c,e,i);break;case"v":i+=f[v++],c=s.L,t.addData(c,e,i);break;case"V":i=f[v++],c=s.L,t.addData(c,e,i);break;case"C":c=s.C,t.addData(c,f[v++],f[v++],f[v++],f[v++],f[v++],f[v++]),e=f[v-2],i=f[v-1];break;case"c":c=s.C,t.addData(c,f[v++]+e,f[v++]+i,f[v++]+e,f[v++]+i,f[v++]+e,f[v++]+i),e+=f[v-2],i+=f[v-1];break;case"S":m=e,y=i,T=t.len(),M=t.data,a===s.C&&(m+=e-M[T-4],y+=i-M[T-3]),c=s.C,S=f[v++],A=f[v++],e=f[v++],i=f[v++],t.addData(c,m,y,S,A,e,i);break;case"s":m=e,y=i,T=t.len(),M=t.data,a===s.C&&(m+=e-M[T-4],y+=i-M[T-3]),c=s.C,S=e+f[v++],A=i+f[v++],e+=f[v++],i+=f[v++],t.addData(c,m,y,S,A,e,i);break;case"Q":S=f[v++],A=f[v++],e=f[v++],i=f[v++],c=s.Q,t.addData(c,S,A,e,i);break;case"q":S=f[v++]+e,A=f[v++]+i,e+=f[v++],i+=f[v++],c=s.Q,t.addData(c,S,A,e,i);break;case"T":m=e,y=i,T=t.len(),M=t.data,a===s.Q&&(m+=e-M[T-4],y+=i-M[T-3]),e=f[v++],i=f[v++],c=s.Q,t.addData(c,m,y,e,i);break;case"t":m=e,y=i,T=t.len(),M=t.data,a===s.Q&&(m+=e-M[T-4],y+=i-M[T-3]),e+=f[v++],i+=f[v++],c=s.Q,t.addData(c,m,y,e,i);break;case"A":b=f[v++],_=f[v++],w=f[v++],C=f[v++],x=f[v++],S=e,A=i,e=f[v++],i=f[v++],c=s.A,N5(S,A,e,i,C,x,b,_,w,c,t);break;case"a":b=f[v++],_=f[v++],w=f[v++],C=f[v++],x=f[v++],S=e,A=i,e+=f[v++],i+=f[v++],c=s.A,N5(S,A,e,i,C,x,b,_,w,c,t);break}}(d==="z"||d==="Z")&&(c=s.Z,t.addData(c),e=r,i=o),a=c}return t.toStatic(),t}var pZ=(function(n){et(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.applyTransform=function(e){},t})(ue);function vZ(n){return n.setData!=null}function mZ(n,t){var e=tgt(n),i=ht({},t);return i.buildPath=function(r){if(vZ(r)){r.setData(e.data);var o=r.getContext();o&&r.rebuildPath(o,1)}else{var o=r;e.rebuildPath(o,1)}},i.applyTransform=function(r){gZ(e,r),this.dirtyShape()},i}function yZ(n,t){return new pZ(mZ(n,t))}function egt(n,t){var e=mZ(n,t),i=(function(r){et(o,r);function o(a){var s=r.call(this,a)||this;return s.applyTransform=e.applyTransform,s.buildPath=e.buildPath,s}return o})(pZ);return i}function igt(n,t){for(var e=[],i=n.length,r=0;r<i;r++){var o=n[r];e.push(o.getUpdatedPathProxy(!0))}var a=new ue(t);return a.createPathProxy(),a.buildPath=function(s){if(vZ(s)){s.appendPath(e);var l=s.getContext();l&&s.rebuildPath(l,1)}},a}function GH(n,t){t=t||{};var e=new ue;return n.shape&&e.setShape(n.shape),e.setStyle(n.style),t.bakeTransform?gZ(e.path,n.getComputedTransform()):t.toLocal?e.setLocalTransform(n.getComputedTransform()):e.copyTransform(n),e.buildPath=n.buildPath,e.applyTransform=e.applyTransform,e.z=n.z,e.z2=n.z2,e.zlevel=n.zlevel,e}var ngt=(function(){function n(){this.cx=0,this.cy=0,this.r=0}return n})(),Xh=(function(n){et(t,n);function t(e){return n.call(this,e)||this}return t.prototype.getDefaultShape=function(){return new ngt},t.prototype.buildPath=function(e,i){e.moveTo(i.cx+i.r,i.cy),e.arc(i.cx,i.cy,i.r,0,Math.PI*2)},t})(ue);Xh.prototype.type="circle";var rgt=(function(){function n(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return n})(),$T=(function(n){et(t,n);function t(e){return n.call(this,e)||this}return t.prototype.getDefaultShape=function(){return new rgt},t.prototype.buildPath=function(e,i){var r=.5522848,o=i.cx,a=i.cy,s=i.rx,l=i.ry,h=s*r,u=l*r;e.moveTo(o-s,a),e.bezierCurveTo(o-s,a-u,o-h,a-l,o,a-l),e.bezierCurveTo(o+h,a-l,o+s,a-u,o+s,a),e.bezierCurveTo(o+s,a+u,o+h,a+l,o,a+l),e.bezierCurveTo(o-h,a+l,o-s,a+u,o-s,a),e.closePath()},t})(ue);$T.prototype.type="ellipse";var bZ=Math.PI,NR=bZ*2,Nd=Math.sin,gg=Math.cos,ogt=Math.acos,Rr=Math.atan2,W5=Math.abs,q0=Math.sqrt,p0=Math.max,Gs=Math.min,es=1e-4;function agt(n,t,e,i,r,o,a,s){var l=e-n,h=i-t,u=a-r,d=s-o,c=d*l-u*h;if(!(c*c<es))return c=(u*(t-o)-d*(n-r))/c,[n+c*l,t+c*h]}function gC(n,t,e,i,r,o,a){var s=n-e,l=t-i,h=(a?o:-o)/q0(s*s+l*l),u=h*l,d=-h*s,c=n+u,f=t+d,g=e+u,p=i+d,v=(c+g)/2,m=(f+p)/2,y=g-c,b=p-f,_=y*y+b*b,w=r-o,C=c*p-g*f,x=(b<0?-1:1)*q0(p0(0,w*w*_-C*C)),S=(C*b-y*x)/_,A=(-C*y-b*x)/_,T=(C*b+y*x)/_,M=(-C*y+b*x)/_,R=S-v,L=A-m,B=T-v,P=M-m;return R*R+L*L>B*B+P*P&&(S=T,A=M),{cx:S,cy:A,x0:-u,y0:-d,x1:S*(r/w-1),y1:A*(r/w-1)}}function sgt(n){var t;if(ut(n)){var e=n.length;if(!e)return n;e===1?t=[n[0],n[0],0,0]:e===2?t=[n[0],n[0],n[1],n[1]]:e===3?t=n.concat(n[2]):t=n}else t=[n,n,n,n];return t}function lgt(n,t){var e,i=p0(t.r,0),r=p0(t.r0||0,0),o=i>0,a=r>0;if(!(!o&&!a)){if(o||(i=r,r=0),r>i){var s=i;i=r,r=s}var l=t.startAngle,h=t.endAngle;if(!(isNaN(l)||isNaN(h))){var u=t.cx,d=t.cy,c=!!t.clockwise,f=W5(h-l),g=f>NR&&f%NR;if(g>es&&(f=g),!(i>es))n.moveTo(u,d);else if(f>NR-es)n.moveTo(u+i*gg(l),d+i*Nd(l)),n.arc(u,d,i,l,h,!c),r>es&&(n.moveTo(u+r*gg(h),d+r*Nd(h)),n.arc(u,d,r,h,l,c));else{var p=void 0,v=void 0,m=void 0,y=void 0,b=void 0,_=void 0,w=void 0,C=void 0,x=void 0,S=void 0,A=void 0,T=void 0,M=void 0,R=void 0,L=void 0,B=void 0,P=i*gg(l),k=i*Nd(l),E=r*gg(h),D=r*Nd(h),I=f>es;if(I){var O=t.cornerRadius;O&&(e=sgt(O),p=e[0],v=e[1],m=e[2],y=e[3]);var H=W5(i-r)/2;if(b=Gs(H,m),_=Gs(H,y),w=Gs(H,p),C=Gs(H,v),A=x=p0(b,_),T=S=p0(w,C),(x>es||S>es)&&(M=i*gg(h),R=i*Nd(h),L=r*gg(l),B=r*Nd(l),f<bZ)){var F=agt(P,k,L,B,M,R,E,D);if(F){var N=P-F[0],$=k-F[1],V=M-F[0],X=R-F[1],Z=1/Nd(ogt((N*V+$*X)/(q0(N*N+$*$)*q0(V*V+X*X)))/2),tt=q0(F[0]*F[0]+F[1]*F[1]);A=Gs(x,(i-tt)/(Z+1)),T=Gs(S,(r-tt)/(Z-1))}}}if(!I)n.moveTo(u+P,d+k);else if(A>es){var K=Gs(m,A),rt=Gs(y,A),q=gC(L,B,P,k,i,K,c),it=gC(M,R,E,D,i,rt,c);n.moveTo(u+q.cx+q.x0,d+q.cy+q.y0),A<x&&K===rt?n.arc(u+q.cx,d+q.cy,A,Rr(q.y0,q.x0),Rr(it.y0,it.x0),!c):(K>0&&n.arc(u+q.cx,d+q.cy,K,Rr(q.y0,q.x0),Rr(q.y1,q.x1),!c),n.arc(u,d,i,Rr(q.cy+q.y1,q.cx+q.x1),Rr(it.cy+it.y1,it.cx+it.x1),!c),rt>0&&n.arc(u+it.cx,d+it.cy,rt,Rr(it.y1,it.x1),Rr(it.y0,it.x0),!c))}else n.moveTo(u+P,d+k),n.arc(u,d,i,l,h,!c);if(!(r>es)||!I)n.lineTo(u+E,d+D);else if(T>es){var K=Gs(p,T),rt=Gs(v,T),q=gC(E,D,M,R,r,-rt,c),it=gC(P,k,L,B,r,-K,c);n.lineTo(u+q.cx+q.x0,d+q.cy+q.y0),T<S&&K===rt?n.arc(u+q.cx,d+q.cy,T,Rr(q.y0,q.x0),Rr(it.y0,it.x0),!c):(rt>0&&n.arc(u+q.cx,d+q.cy,rt,Rr(q.y0,q.x0),Rr(q.y1,q.x1),!c),n.arc(u,d,r,Rr(q.cy+q.y1,q.cx+q.x1),Rr(it.cy+it.y1,it.cx+it.x1),c),K>0&&n.arc(u+it.cx,d+it.cy,K,Rr(it.y1,it.x1),Rr(it.y0,it.x0),!c))}else n.lineTo(u+E,d+D),n.arc(u,d,r,h,l,c)}n.closePath()}}}var hgt=(function(){function n(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return n})(),ho=(function(n){et(t,n);function t(e){return n.call(this,e)||this}return t.prototype.getDefaultShape=function(){return new hgt},t.prototype.buildPath=function(e,i){lgt(e,i)},t.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},t})(ue);ho.prototype.type="sector";var ugt=(function(){function n(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return n})(),n_=(function(n){et(t,n);function t(e){return n.call(this,e)||this}return t.prototype.getDefaultShape=function(){return new ugt},t.prototype.buildPath=function(e,i){var r=i.cx,o=i.cy,a=Math.PI*2;e.moveTo(r+i.r,o),e.arc(r,o,i.r,0,a,!1),e.moveTo(r+i.r0,o),e.arc(r,o,i.r0,0,a,!0)},t})(ue);n_.prototype.type="ring";function dgt(n,t,e,i){var r=[],o=[],a=[],s=[],l,h,u,d;if(i){u=[1/0,1/0],d=[-1/0,-1/0];for(var c=0,f=n.length;c<f;c++)Pu(u,u,n[c]),Bu(d,d,n[c]);Pu(u,u,i[0]),Bu(d,d,i[1])}for(var c=0,f=n.length;c<f;c++){var g=n[c];if(e)l=n[c?c-1:f-1],h=n[(c+1)%f];else if(c===0||c===f-1){r.push(_h(n[c]));continue}else l=n[c-1],h=n[c+1];Ec(o,h,l),sw(o,o,t);var p=rE(g,l),v=rE(g,h),m=p+v;m!==0&&(p/=m,v/=m),sw(a,o,-p),sw(s,o,v);var y=DN([],g,a),b=DN([],g,s);i&&(Bu(y,y,u),Pu(y,y,d),Bu(b,b,u),Pu(b,b,d)),r.push(y),r.push(b)}return e&&r.push(r.shift()),r}function _Z(n,t,e){var i=t.smooth,r=t.points;if(r&&r.length>=2){if(i){var o=dgt(r,i,e,t.smoothConstraint);n.moveTo(r[0][0],r[0][1]);for(var a=r.length,s=0;s<(e?a:a-1);s++){var l=o[s*2],h=o[s*2+1],u=r[(s+1)%a];n.bezierCurveTo(l[0],l[1],h[0],h[1],u[0],u[1])}}else{n.moveTo(r[0][0],r[0][1]);for(var s=1,d=r.length;s<d;s++)n.lineTo(r[s][0],r[s][1])}e&&n.closePath()}}var cgt=(function(){function n(){this.points=null,this.smooth=0,this.smoothConstraint=null}return n})(),uo=(function(n){et(t,n);function t(e){return n.call(this,e)||this}return t.prototype.getDefaultShape=function(){return new cgt},t.prototype.buildPath=function(e,i){_Z(e,i,!0)},t})(ue);uo.prototype.type="polygon";var fgt=(function(){function n(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return n})(),fo=(function(n){et(t,n);function t(e){return n.call(this,e)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new fgt},t.prototype.buildPath=function(e,i){_Z(e,i,!1)},t})(ue);fo.prototype.type="polyline";var ggt={},pgt=(function(){function n(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return n})(),Un=(function(n){et(t,n);function t(e){return n.call(this,e)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new pgt},t.prototype.buildPath=function(e,i){var r,o,a,s;if(this.subPixelOptimize){var l=eZ(ggt,i,this.style);r=l.x1,o=l.y1,a=l.x2,s=l.y2}else r=i.x1,o=i.y1,a=i.x2,s=i.y2;var h=i.percent;h!==0&&(e.moveTo(r,o),h<1&&(a=r*(1-h)+a*h,s=o*(1-h)+s*h),e.lineTo(a,s))},t.prototype.pointAt=function(e){var i=this.shape;return[i.x1*(1-e)+i.x2*e,i.y1*(1-e)+i.y2*e]},t})(ue);Un.prototype.type="line";var go=[],vgt=(function(){function n(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return n})();function V5(n,t,e){var i=n.cpx2,r=n.cpy2;return i!=null||r!=null?[(e?UN:jn)(n.x1,n.cpx1,n.cpx2,n.x2,t),(e?UN:jn)(n.y1,n.cpy1,n.cpy2,n.y2,t)]:[(e?hE:ir)(n.x1,n.cpx1,n.x2,t),(e?hE:ir)(n.y1,n.cpy1,n.y2,t)]}var r_=(function(n){et(t,n);function t(e){return n.call(this,e)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new vgt},t.prototype.buildPath=function(e,i){var r=i.x1,o=i.y1,a=i.x2,s=i.y2,l=i.cpx1,h=i.cpy1,u=i.cpx2,d=i.cpy2,c=i.percent;c!==0&&(e.moveTo(r,o),u==null||d==null?(c<1&&(Ly(r,l,a,c,go),l=go[1],a=go[2],Ly(o,h,s,c,go),h=go[1],s=go[2]),e.quadraticCurveTo(l,h,a,s)):(c<1&&(Qu(r,l,u,a,c,go),l=go[1],u=go[2],a=go[3],Qu(o,h,d,s,c,go),h=go[1],d=go[2],s=go[3]),e.bezierCurveTo(l,h,u,d,a,s)))},t.prototype.pointAt=function(e){return V5(this.shape,e,!1)},t.prototype.tangentAt=function(e){var i=V5(this.shape,e,!0);return Ov(i,i)},t})(ue);r_.prototype.type="bezier-curve";var mgt=(function(){function n(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return n})(),jT=(function(n){et(t,n);function t(e){return n.call(this,e)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new mgt},t.prototype.buildPath=function(e,i){var r=i.cx,o=i.cy,a=Math.max(i.r,0),s=i.startAngle,l=i.endAngle,h=i.clockwise,u=Math.cos(s),d=Math.sin(s);e.moveTo(u*a+r,d*a+o),e.arc(r,o,a,s,l,!h)},t})(ue);jT.prototype.type="arc";var $H=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="compound",e}return t.prototype._updatePathDirty=function(){for(var e=this.shape.paths,i=this.shapeChanged(),r=0;r<e.length;r++)i=i||e[r].shapeChanged();i&&this.dirtyShape()},t.prototype.beforeBrush=function(){this._updatePathDirty();for(var e=this.shape.paths||[],i=this.getGlobalScale(),r=0;r<e.length;r++)e[r].path||e[r].createPathProxy(),e[r].path.setScale(i[0],i[1],e[r].segmentIgnoreThreshold)},t.prototype.buildPath=function(e,i){for(var r=i.paths||[],o=0;o<r.length;o++)r[o].buildPath(e,r[o].shape,!0)},t.prototype.afterBrush=function(){for(var e=this.shape.paths||[],i=0;i<e.length;i++)e[i].pathUpdated()},t.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),ue.prototype.getBoundingRect.call(this)},t})(ue),CZ=(function(){function n(t){this.colorStops=t||[]}return n.prototype.addColorStop=function(t,e){this.colorStops.push({offset:t,color:e})},n})(),o_=(function(n){et(t,n);function t(e,i,r,o,a,s){var l=n.call(this,a)||this;return l.x=e??0,l.y=i??0,l.x2=r??1,l.y2=o??0,l.type="linear",l.global=s||!1,l}return t})(CZ),wZ=(function(n){et(t,n);function t(e,i,r,o,a){var s=n.call(this,o)||this;return s.x=e??.5,s.y=i??.5,s.r=r??.5,s.type="radial",s.global=a||!1,s}return t})(CZ),Wd=[0,0],Vd=[0,0],pC=new Jt,vC=new Jt,hx=(function(){function n(t,e){this._corners=[],this._axes=[],this._origin=[0,0];for(var i=0;i<4;i++)this._corners[i]=new Jt;for(var i=0;i<2;i++)this._axes[i]=new Jt;t&&this.fromBoundingRect(t,e)}return n.prototype.fromBoundingRect=function(t,e){var i=this._corners,r=this._axes,o=t.x,a=t.y,s=o+t.width,l=a+t.height;if(i[0].set(o,a),i[1].set(s,a),i[2].set(s,l),i[3].set(o,l),e)for(var h=0;h<4;h++)i[h].transform(e);Jt.sub(r[0],i[1],i[0]),Jt.sub(r[1],i[3],i[0]),r[0].normalize(),r[1].normalize();for(var h=0;h<2;h++)this._origin[h]=r[h].dot(i[0])},n.prototype.intersect=function(t,e){var i=!0,r=!e;return pC.set(1/0,1/0),vC.set(0,0),!this._intersectCheckOneSide(this,t,pC,vC,r,1)&&(i=!1,r)||!this._intersectCheckOneSide(t,this,pC,vC,r,-1)&&(i=!1,r)||r||Jt.copy(e,i?pC:vC),i},n.prototype._intersectCheckOneSide=function(t,e,i,r,o,a){for(var s=!0,l=0;l<2;l++){var h=this._axes[l];if(this._getProjMinMaxOnAxis(l,t._corners,Wd),this._getProjMinMaxOnAxis(l,e._corners,Vd),Wd[1]<Vd[0]||Wd[0]>Vd[1]){if(s=!1,o)return s;var u=Math.abs(Vd[0]-Wd[1]),d=Math.abs(Wd[0]-Vd[1]);Math.min(u,d)>r.len()&&(u<d?Jt.scale(r,h,-u*a):Jt.scale(r,h,d*a))}else if(i){var u=Math.abs(Vd[0]-Wd[1]),d=Math.abs(Wd[0]-Vd[1]);Math.min(u,d)<i.len()&&(u<d?Jt.scale(i,h,u*a):Jt.scale(i,h,-d*a))}}return s},n.prototype._getProjMinMaxOnAxis=function(t,e,i){for(var r=this._axes[t],o=this._origin,a=e[0].dot(r)+o[t],s=a,l=a,h=1;h<e.length;h++){var u=e[h].dot(r)+o[t];s=Math.min(u,s),l=Math.max(u,l)}i[0]=s,i[1]=l},n})(),ygt=[],bgt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.notClear=!0,e.incremental=!0,e._displayables=[],e._temporaryDisplayables=[],e._cursor=0,e}return t.prototype.traverse=function(e,i){e.call(i,this)},t.prototype.useStyle=function(){this.style={}},t.prototype.getCursor=function(){return this._cursor},t.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},t.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},t.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},t.prototype.addDisplayable=function(e,i){i?this._temporaryDisplayables.push(e):this._displayables.push(e),this.markRedraw()},t.prototype.addDisplayables=function(e,i){i=i||!1;for(var r=0;r<e.length;r++)this.addDisplayable(e[r],i)},t.prototype.getDisplayables=function(){return this._displayables},t.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},t.prototype.eachPendingDisplayable=function(e){for(var i=this._cursor;i<this._displayables.length;i++)e&&e(this._displayables[i]);for(var i=0;i<this._temporaryDisplayables.length;i++)e&&e(this._temporaryDisplayables[i])},t.prototype.update=function(){this.updateTransform();for(var e=this._cursor;e<this._displayables.length;e++){var i=this._displayables[e];i.parent=this,i.update(),i.parent=null}for(var e=0;e<this._temporaryDisplayables.length;e++){var i=this._temporaryDisplayables[e];i.parent=this,i.update(),i.parent=null}},t.prototype.getBoundingRect=function(){if(!this._rect){for(var e=new te(1/0,1/0,-1/0,-1/0),i=0;i<this._displayables.length;i++){var r=this._displayables[i],o=r.getBoundingRect().clone();r.needLocalTransform()&&o.applyTransform(r.getLocalTransform(ygt)),e.union(o)}this._rect=e}return this._rect},t.prototype.contain=function(e,i){var r=this.transformCoordToLocal(e,i),o=this.getBoundingRect();if(o.contain(r[0],r[1]))for(var a=0;a<this._displayables.length;a++){var s=this._displayables[a];if(s.contain(e,i))return!0}return!1},t})(Ua),xZ=Te();function Nv(n,t,e,i,r){var o;if(t&&t.ecModel){var a=t.ecModel.getUpdatePayload();o=a&&a.animation}var s=t&&t.isAnimationEnabled(),l=n==="update";if(s){var h=void 0,u=void 0,d=void 0;i?(h=Yt(i.duration,200),u=Yt(i.easing,"cubicOut"),d=0):(h=t.getShallow(l?"animationDurationUpdate":"animationDuration"),u=t.getShallow(l?"animationEasingUpdate":"animationEasing"),d=t.getShallow(l?"animationDelayUpdate":"animationDelay")),o&&(o.duration!=null&&(h=o.duration),o.easing!=null&&(u=o.easing),o.delay!=null&&(d=o.delay)),Dt(d)&&(d=d(e,r)),Dt(h)&&(h=h(e));var c={duration:h||0,delay:d,easing:u};return c}else return null}function jH(n,t,e,i,r,o,a){var s=!1,l;Dt(r)?(a=o,o=r,r=null):Ht(r)&&(o=r.cb,a=r.during,s=r.isFrom,l=r.removeOpt,r=r.dataIndex);var h=n==="leave";h||t.stopAnimation("leave");var u=Nv(n,i,r,h?l||{}:null,i&&i.getAnimationDelayParams?i.getAnimationDelayParams(t,r):null);if(u&&u.duration>0){var d=u.duration,c=u.delay,f=u.easing,g={duration:d,delay:c||0,easing:f,done:o,force:!!o||!!a,setToFinal:!h,scope:n,during:a};s?t.animateFrom(e,g):t.animateTo(e,g)}else t.stopAnimation(),!s&&t.attr(e),a&&a(1),o&&o()}function Ie(n,t,e,i,r,o){jH("update",n,t,e,i,r,o)}function Bi(n,t,e,i,r,o){jH("enter",n,t,e,i,r,o)}function gp(n){if(!n.__zr)return!0;for(var t=0;t<n.animators.length;t++){var e=n.animators[t];if(e.scope==="leave")return!0}return!1}function td(n,t,e,i,r,o){gp(n)||jH("leave",n,t,e,i,r,o)}function G5(n,t,e,i){n.removeTextContent(),n.removeTextGuideLine(),td(n,{style:{opacity:0}},t,e,i)}function Fy(n,t,e){function i(){n.parent&&n.parent.remove(n)}n.isGroup?n.traverse(function(r){r.isGroup||G5(r,t,e,i)}):G5(n,t,e,i)}function As(n){xZ(n).oldStyle=n.style}function _gt(n){return xZ(n).oldStyle}var ux=Math.max,dx=Math.min,DE={};function Cgt(n){return ue.extend(n)}var wgt=egt;function xgt(n,t){return wgt(n,t)}function Es(n,t){DE[n]=t}function UH(n){if(DE.hasOwnProperty(n))return DE[n]}function UT(n,t,e,i){var r=yZ(n,t);return e&&(i==="center"&&(e=AZ(e,r.getBoundingRect())),TZ(r,e)),r}function SZ(n,t,e){var i=new hr({style:{image:n,x:t.x,y:t.y,width:t.width,height:t.height},onload:function(r){if(e==="center"){var o={width:r.width,height:r.height};i.setStyle(AZ(t,o))}}});return i}function AZ(n,t){var e=t.width/t.height,i=n.height*e,r;i<=n.width?r=n.height:(i=n.width,r=i/e);var o=n.x+n.width/2,a=n.y+n.height/2;return{x:o-i/2,y:a-r/2,width:i,height:r}}var Ea=igt;function TZ(n,t){if(n.applyTransform){var e=n.getBoundingRect(),i=e.calculateTransform(t);n.applyTransform(i)}}function $p(n,t){return eZ(n,n,{lineWidth:t}),n}function Sgt(n){return iZ(n.shape,n.shape,n.style),n}var vw=Dc;function sf(n,t){for(var e=DT([]);n&&n!==t;)Ch(e,n.getLocalTransform(),e),n=n.parent;return e}function bs(n,t,e){return t&&!Wr(t)&&(t=gh.getLocalTransform(t)),e&&(t=Hv([],t)),Sr([],n,t)}function YT(n,t,e){var i=t[4]===0||t[5]===0||t[0]===0?1:Math.abs(2*t[4]/t[0]),r=t[4]===0||t[5]===0||t[2]===0?1:Math.abs(2*t[4]/t[2]),o=[n==="left"?-i:n==="right"?i:0,n==="top"?-r:n==="bottom"?r:0];return o=bs(o,t,e),Math.abs(o[0])>Math.abs(o[1])?o[0]>0?"right":"left":o[1]>0?"bottom":"top"}function $5(n){return!n.isGroup}function Agt(n){return n.shape!=null}function a_(n,t,e){if(!n||!t)return;function i(a){var s={};return a.traverse(function(l){$5(l)&&l.anid&&(s[l.anid]=l)}),s}function r(a){var s={x:a.x,y:a.y,rotation:a.rotation};return Agt(a)&&(s.shape=ht({},a.shape)),s}var o=i(n);t.traverse(function(a){if($5(a)&&a.anid){var s=o[a.anid];if(s){var l=r(a);a.attr(r(s)),Ie(a,l,e,Vt(a).dataIndex)}}})}function MZ(n,t){return ct(n,function(e){var i=e[0];i=ux(i,t.x),i=dx(i,t.x+t.width);var r=e[1];return r=ux(r,t.y),r=dx(r,t.y+t.height),[i,r]})}function Tgt(n,t){var e=ux(n.x,t.x),i=dx(n.x+n.width,t.x+t.width),r=ux(n.y,t.y),o=dx(n.y+n.height,t.y+t.height);if(i>=e&&o>=r)return{x:e,y:r,width:i-e,height:o-r}}function s_(n,t,e){var i=ht({rectHover:!0},t),r=i.style={strokeNoScale:!0};if(e=e||{x:-1,y:-1,width:2,height:2},n)return n.indexOf("image://")===0?(r.image=n.slice(8),Ot(r,e),new hr(i)):UT(n.replace("path://",""),i,e,"center")}function v0(n,t,e,i,r){for(var o=0,a=r[r.length-1];o<r.length;o++){var s=r[o];if(RZ(n,t,e,i,s[0],s[1],a[0],a[1]))return!0;a=s}}function RZ(n,t,e,i,r,o,a,s){var l=e-n,h=i-t,u=a-r,d=s-o,c=WR(u,d,l,h);if(Mgt(c))return!1;var f=n-r,g=t-o,p=WR(f,g,l,h)/c;if(p<0||p>1)return!1;var v=WR(f,g,u,d)/c;return!(v<0||v>1)}function WR(n,t,e,i){return n*i-e*t}function Mgt(n){return n<=1e-6&&n>=-1e-6}function Kf(n){var t=n.itemTooltipOption,e=n.componentModel,i=n.itemName,r=Ct(t)?{formatter:t}:t,o=e.mainType,a=e.componentIndex,s={componentType:o,name:i,$vars:["name"]};s[o+"Index"]=a;var l=n.formatterParamsExtra;l&&z(pe(l),function(u){At(s,u)||(s[u]=l[u],s.$vars.push(u))});var h=Vt(n.el);h.componentMainType=o,h.componentIndex=a,h.tooltipConfig={name:i,option:Ot({content:i,encodeHTMLContent:!0,formatterParams:s},r)}}function j5(n,t){var e;n.isGroup&&(e=t(n)),e||n.traverse(t)}function md(n,t){if(n)if(ut(n))for(var e=0;e<n.length;e++)j5(n[e],t);else j5(n,t)}Es("circle",Xh);Es("ellipse",$T);Es("sector",ho);Es("ring",n_);Es("polygon",uo);Es("polyline",fo);Es("rect",Ae);Es("line",Un);Es("bezierCurve",r_);Es("arc",jT);const Zf=Object.freeze(Object.defineProperty({__proto__:null,Arc:jT,BezierCurve:r_,BoundingRect:te,Circle:Xh,CompoundPath:$H,Ellipse:$T,Group:Ft,Image:hr,IncrementalDisplayable:bgt,Line:Un,LinearGradient:o_,OrientedBoundingRect:hx,Path:ue,Point:Jt,Polygon:uo,Polyline:fo,RadialGradient:wZ,Rect:Ae,Ring:n_,Sector:ho,Text:Re,applyTransform:bs,clipPointsByRect:MZ,clipRectByRect:Tgt,createIcon:s_,extendPath:xgt,extendShape:Cgt,getShapeClass:UH,getTransform:sf,groupTransition:a_,initProps:Bi,isElementRemoved:gp,lineLineIntersect:RZ,linePolygonIntersect:v0,makeImage:SZ,makePath:UT,mergePath:Ea,registerShape:Es,removeElement:td,removeElementWithFadeOut:Fy,resizePath:TZ,setTooltipConfig:Kf,subPixelOptimize:vw,subPixelOptimizeLine:$p,subPixelOptimizeRect:Sgt,transformDirection:YT,traverseElements:md,updateProps:Ie},Symbol.toStringTag,{value:"Module"}));var XT={};function PZ(n,t){for(var e=0;e<lo.length;e++){var i=lo[e],r=t[i],o=n.ensureState(i);o.style=o.style||{},o.style.text=r}var a=n.currentStates.slice();n.clearStates(!0),n.setStyle({text:t.normal}),n.useStates(a,!0)}function IE(n,t,e){var i=n.labelFetcher,r=n.labelDataIndex,o=n.labelDimIndex,a=t.normal,s;i&&(s=i.getFormattedLabel(r,"normal",null,o,a&&a.get("formatter"),e!=null?{interpolatedValue:e}:null)),s==null&&(s=Dt(n.defaultText)?n.defaultText(r,n,e):n.defaultText);for(var l={normal:s},h=0;h<lo.length;h++){var u=lo[h],d=t[u];l[u]=Yt(i?i.getFormattedLabel(r,u,null,o,d&&d.get("formatter")):null,s)}return l}function Tr(n,t,e,i){e=e||XT;for(var r=n instanceof Re,o=!1,a=0;a<Hy.length;a++){var s=t[Hy[a]];if(s&&s.getShallow("show")){o=!0;break}}var l=r?n:n.getTextContent();if(o){r||(l||(l=new Re,n.setTextContent(l)),n.stateProxy&&(l.stateProxy=n.stateProxy));var h=IE(e,t),u=t.normal,d=!!u.getShallow("show"),c=_i(u,i&&i.normal,e,!1,!r);c.text=h.normal,r||n.setTextConfig(cx(u,e,!1));for(var a=0;a<lo.length;a++){var f=lo[a],s=t[f];if(s){var g=l.ensureState(f),p=!!Yt(s.getShallow("show"),d);if(p!==d&&(g.ignore=!p),g.style=_i(s,i&&i[f],e,!0,!r),g.style.text=h[f],!r){var v=n.ensureState(f);v.textConfig=cx(s,e,!0)}}}l.silent=!!u.getShallow("silent"),l.style.x!=null&&(c.x=l.style.x),l.style.y!=null&&(c.y=l.style.y),l.ignore=!d,l.useStyle(c),l.dirty(),e.enableTextSetter&&(Wv(l).setLabelText=function(m){var y=IE(e,t,m);PZ(l,y)})}else l&&(l.ignore=!0);n.dirty()}function Zn(n,t){t=t||"label";for(var e={normal:n.getModel(t)},i=0;i<lo.length;i++){var r=lo[i];e[r]=n.getModel([r,t])}return e}function _i(n,t,e,i,r){var o={};return Rgt(o,n,e,i,r),t&&ht(o,t),o}function cx(n,t,e){t=t||{};var i={},r,o=n.getShallow("rotate"),a=Yt(n.getShallow("distance"),e?null:5),s=n.getShallow("offset");return r=n.getShallow("position")||(e?null:"inside"),r==="outside"&&(r=t.defaultOutsidePosition||"top"),r!=null&&(i.position=r),s!=null&&(i.offset=s),o!=null&&(o*=Math.PI/180,i.rotation=o),a!=null&&(i.distance=a),i.outsideFill=n.get("color")==="inherit"?t.inheritColor||null:"auto",i}function Rgt(n,t,e,i,r){e=e||XT;var o=t.ecModel,a=o&&o.option.textStyle,s=Pgt(t),l;if(s){l={};for(var h in s)if(s.hasOwnProperty(h)){var u=t.getModel(["rich",h]);q5(l[h]={},u,a,e,i,r,!1,!0)}}l&&(n.rich=l);var d=t.get("overflow");d&&(n.overflow=d);var c=t.get("minMargin");c!=null&&(n.margin=c),q5(n,t,a,e,i,r,!0,!1)}function Pgt(n){for(var t;n&&n!==n.ecModel;){var e=(n.option||XT).rich;if(e){t=t||{};for(var i=pe(e),r=0;r<i.length;r++){var o=i[r];t[o]=1}}n=n.parentModel}return t}var U5=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],Y5=["align","lineHeight","width","height","tag","verticalAlign","ellipsis"],X5=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function q5(n,t,e,i,r,o,a,s){e=!r&&e||XT;var l=i&&i.inheritColor,h=t.getShallow("color"),u=t.getShallow("textBorderColor"),d=Yt(t.getShallow("opacity"),e.opacity);(h==="inherit"||h==="auto")&&(l?h=l:h=null),(u==="inherit"||u==="auto")&&(l?u=l:u=null),o||(h=h||e.color,u=u||e.textBorderColor),h!=null&&(n.fill=h),u!=null&&(n.stroke=u);var c=Yt(t.getShallow("textBorderWidth"),e.textBorderWidth);c!=null&&(n.lineWidth=c);var f=Yt(t.getShallow("textBorderType"),e.textBorderType);f!=null&&(n.lineDash=f);var g=Yt(t.getShallow("textBorderDashOffset"),e.textBorderDashOffset);g!=null&&(n.lineDashOffset=g),!r&&d==null&&!s&&(d=i&&i.defaultOpacity),d!=null&&(n.opacity=d),!r&&!o&&n.fill==null&&i.inheritColor&&(n.fill=i.inheritColor);for(var p=0;p<U5.length;p++){var v=U5[p],m=Yt(t.getShallow(v),e[v]);m!=null&&(n[v]=m)}for(var p=0;p<Y5.length;p++){var v=Y5[p],m=t.getShallow(v);m!=null&&(n[v]=m)}if(n.verticalAlign==null){var y=t.getShallow("baseline");y!=null&&(n.verticalAlign=y)}if(!a||!i.disableBox){for(var p=0;p<X5.length;p++){var v=X5[p],m=t.getShallow(v);m!=null&&(n[v]=m)}var b=t.getShallow("borderType");b!=null&&(n.borderDash=b),(n.backgroundColor==="auto"||n.backgroundColor==="inherit")&&l&&(n.backgroundColor=l),(n.borderColor==="auto"||n.borderColor==="inherit")&&l&&(n.borderColor=l)}}function YH(n,t){var e=t&&t.getModel("textStyle");return ps([n.fontStyle||e&&e.getShallow("fontStyle")||"",n.fontWeight||e&&e.getShallow("fontWeight")||"",(n.fontSize||e&&e.getShallow("fontSize")||12)+"px",n.fontFamily||e&&e.getShallow("fontFamily")||"sans-serif"].join(" "))}var Wv=Te();function BZ(n,t,e,i){if(n){var r=Wv(n);r.prevValue=r.value,r.value=e;var o=t.normal;r.valueAnimation=o.get("valueAnimation"),r.valueAnimation&&(r.precision=o.get("precision"),r.defaultInterpolatedText=i,r.statesModels=t)}}function kZ(n,t,e,i,r){var o=Wv(n);if(!o.valueAnimation||o.prevValue===o.value)return;var a=o.defaultInterpolatedText,s=Yt(o.interpolatedValue,o.prevValue),l=o.value;function h(u){var d=YK(e,o.precision,s,l,u);o.interpolatedValue=u===1?null:d;var c=IE({labelDataIndex:t,labelFetcher:r,defaultText:a?a(d):d+""},o.statesModels,d);PZ(n,c)}n.percent=0,(o.prevValue==null?Bi:Ie)(n,{percent:1},i,t,null,h)}var Bgt=["textStyle","color"],VR=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],GR=new Re,kgt=(function(){function n(){}return n.prototype.getTextColor=function(t){var e=this.ecModel;return this.getShallow("color")||(!t&&e?e.get(Bgt):null)},n.prototype.getFont=function(){return YH({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},n.prototype.getTextRect=function(t){for(var e={text:t,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},i=0;i<VR.length;i++)e[VR[i]]=this.getShallow(VR[i]);return GR.useStyle(e),GR.update(),GR.getBoundingRect()},n})(),LZ=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],Lgt=Af(LZ),Egt=(function(){function n(){}return n.prototype.getLineStyle=function(t){return Lgt(this,t)},n})(),EZ=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],Dgt=Af(EZ),Igt=(function(){function n(){}return n.prototype.getItemStyle=function(t,e){return Dgt(this,t,e)},n})(),Ze=(function(){function n(t,e,i){this.parentModel=e,this.ecModel=i,this.option=t}return n.prototype.init=function(t,e,i){},n.prototype.mergeOption=function(t,e){Zt(this.option,t,!0)},n.prototype.get=function(t,e){return t==null?this.option:this._doGet(this.parsePath(t),!e&&this.parentModel)},n.prototype.getShallow=function(t,e){var i=this.option,r=i==null?i:i[t];if(r==null&&!e){var o=this.parentModel;o&&(r=o.getShallow(t))}return r},n.prototype.getModel=function(t,e){var i=t!=null,r=i?this.parsePath(t):null,o=i?this._doGet(r):this.option;return e=e||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(r)),new n(o,e,this.ecModel)},n.prototype.isEmpty=function(){return this.option==null},n.prototype.restoreData=function(){},n.prototype.clone=function(){var t=this.constructor;return new t(zt(this.option))},n.prototype.parsePath=function(t){return typeof t=="string"?t.split("."):t},n.prototype.resolveParentPath=function(t){return t},n.prototype.isAnimationEnabled=function(){if(!ce.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},n.prototype._doGet=function(t,e){var i=this.option;if(!t)return i;for(var r=0;r<t.length&&!(t[r]&&(i=i&&typeof i=="object"?i[t[r]]:null,i==null));r++);return i==null&&e&&(i=e._doGet(this.resolveParentPath(t),e.parentModel)),i},n})();IH(Ze);$ct(Ze);In(Ze,Egt);In(Ze,Igt);In(Ze,qct);In(Ze,kgt);var Ogt=Math.round(Math.random()*10);function Vv(n){return[n||"",Ogt++].join("_")}function Hgt(n){var t={};n.registerSubTypeDefaulter=function(e,i){var r=hl(e);t[r.main]=i},n.determineSubType=function(e,i){var r=i.type;if(!r){var o=hl(e).main;n.hasSubTypes(e)&&t[o]&&(r=t[o](i))}return r}}function zgt(n,t){n.topologicalTravel=function(o,a,s,l){if(!o.length)return;var h=e(a),u=h.graph,d=h.noEntryList,c={};for(z(o,function(y){c[y]=!0});d.length;){var f=d.pop(),g=u[f],p=!!c[f];p&&(s.call(l,f,g.originalDeps.slice()),delete c[f]),z(g.successor,p?m:v)}z(c,function(){var y="";throw new Error(y)});function v(y){u[y].entryCount--,u[y].entryCount===0&&d.push(y)}function m(y){c[y]=!0,v(y)}};function e(o){var a={},s=[];return z(o,function(l){var h=i(a,l),u=h.originalDeps=t(l),d=r(u,o);h.entryCount=d.length,h.entryCount===0&&s.push(l),z(d,function(c){ee(h.predecessor,c)<0&&h.predecessor.push(c);var f=i(a,c);ee(f.successor,c)<0&&f.successor.push(l)})}),{graph:a,noEntryList:s}}function i(o,a){return o[a]||(o[a]={predecessor:[],successor:[]}),o[a]}function r(o,a){var s=[];return z(o,function(l){ee(a,l)>=0&&s.push(l)}),s}}function yd(n,t){return Zt(Zt({},n,!0),t,!0)}const Fgt={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst",custom:"Custom chart",chart:"Chart"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},Ngt={time:{month:["","","","","","","","","","","",""],monthAbbr:["1","2","3","4","5","6","7","8","9","10","11","12"],dayOfWeek:["","","","","","",""],dayOfWeekAbbr:["","","","","","",""]},legend:{selector:{all:"",inverse:""}},toolbox:{brush:{title:{rect:"",polygon:"",lineX:"",lineY:"",keep:"",clear:""}},dataView:{title:"",lang:["","",""]},dataZoom:{title:{zoom:"",back:""}},magicType:{title:{line:"",bar:"",stack:"",tiled:""}},restore:{title:""},saveAsImage:{title:"",lang:[""]}},series:{typeNames:{pie:"",bar:"",line:"",scatter:"",effectScatter:"",radar:"",tree:"",treemap:"",boxplot:"",candlestick:"K",k:"K",heatmap:"",map:"",parallel:"",lines:"",graph:"",sankey:"",funnel:"",gauge:"",pictorialBar:"",themeRiver:"",sunburst:"",custom:"",chart:""}},aria:{general:{withTitle:"{title}",withoutTitle:""},series:{single:{prefix:"",withName:"{seriesType}{seriesName}",withoutName:"{seriesType}"},multiple:{prefix:"{seriesCount}",withName:"{seriesId}{seriesName}{seriesType}",withoutName:"{seriesId}{seriesType}",separator:{middle:"",end:""}}},data:{allData:"",partialData:"{displayCnt}",withName:"{name}{value}",withoutName:"{value}",separator:{middle:"",end:""}}}};var fx="ZH",XH="EN",pp=XH,mw={},qH={},DZ=ce.domSupported?(function(){var n=(document.documentElement.lang||navigator.language||navigator.browserLanguage||pp).toUpperCase();return n.indexOf(fx)>-1?fx:pp})():pp;function IZ(n,t){n=n.toUpperCase(),qH[n]=new Ze(t),mw[n]=t}function Wgt(n){if(Ct(n)){var t=mw[n.toUpperCase()]||{};return n===fx||n===XH?zt(t):Zt(zt(t),zt(mw[pp]),!1)}else return Zt(zt(n),zt(mw[pp]),!1)}function OE(n){return qH[n]}function Vgt(){return qH[pp]}IZ(XH,Fgt);IZ(fx,Ngt);var KH=1e3,ZH=KH*60,K0=ZH*60,Da=K0*24,K5=Da*365,m0={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},mC="{yyyy}-{MM}-{dd}",Z5={year:"{yyyy}",month:"{yyyy}-{MM}",day:mC,hour:mC+" "+m0.hour,minute:mC+" "+m0.minute,second:mC+" "+m0.second,millisecond:m0.none},$R=["year","month","day","hour","minute","second","millisecond"],OZ=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function eu(n,t){return n+="","0000".substr(0,t-n.length)+n}function vp(n){switch(n){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return n}}function Ggt(n){return n===vp(n)}function $gt(n){switch(n){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function qT(n,t,e,i){var r=Al(n),o=r[JH(e)](),a=r[mp(e)]()+1,s=Math.floor((a-1)/3)+1,l=r[KT(e)](),h=r["get"+(e?"UTC":"")+"Day"](),u=r[Ny(e)](),d=(u-1)%12+1,c=r[ZT(e)](),f=r[JT(e)](),g=r[QT(e)](),p=u>=12?"pm":"am",v=p.toUpperCase(),m=i instanceof Ze?i:OE(i||DZ)||Vgt(),y=m.getModel("time"),b=y.get("month"),_=y.get("monthAbbr"),w=y.get("dayOfWeek"),C=y.get("dayOfWeekAbbr");return(t||"").replace(/{a}/g,p+"").replace(/{A}/g,v+"").replace(/{yyyy}/g,o+"").replace(/{yy}/g,eu(o%100+"",2)).replace(/{Q}/g,s+"").replace(/{MMMM}/g,b[a-1]).replace(/{MMM}/g,_[a-1]).replace(/{MM}/g,eu(a,2)).replace(/{M}/g,a+"").replace(/{dd}/g,eu(l,2)).replace(/{d}/g,l+"").replace(/{eeee}/g,w[h]).replace(/{ee}/g,C[h]).replace(/{e}/g,h+"").replace(/{HH}/g,eu(u,2)).replace(/{H}/g,u+"").replace(/{hh}/g,eu(d+"",2)).replace(/{h}/g,d+"").replace(/{mm}/g,eu(c,2)).replace(/{m}/g,c+"").replace(/{ss}/g,eu(f,2)).replace(/{s}/g,f+"").replace(/{SSS}/g,eu(g,3)).replace(/{S}/g,g+"")}function jgt(n,t,e,i,r){var o=null;if(Ct(e))o=e;else if(Dt(e))o=e(n.value,t,{level:n.level});else{var a=ht({},m0);if(n.level>0)for(var s=0;s<$R.length;++s)a[$R[s]]="{primary|"+a[$R[s]]+"}";var l=e?e.inherit===!1?e:Ot(e,a):a,h=HZ(n.value,r);if(l[h])o=l[h];else if(l.inherit){for(var u=OZ.indexOf(h),s=u-1;s>=0;--s)if(l[h]){o=l[h];break}o=o||a.none}if(ut(o)){var d=n.level==null?0:n.level>=0?n.level:o.length+n.level;d=Math.min(d,o.length-1),o=o[d]}}return qT(new Date(n.value),o,r,i)}function HZ(n,t){var e=Al(n),i=e[mp(t)]()+1,r=e[KT(t)](),o=e[Ny(t)](),a=e[ZT(t)](),s=e[JT(t)](),l=e[QT(t)](),h=l===0,u=h&&s===0,d=u&&a===0,c=d&&o===0,f=c&&r===1,g=f&&i===1;return g?"year":f?"month":c?"day":d?"hour":u?"minute":h?"second":"millisecond"}function J5(n,t,e){var i=Le(n)?Al(n):n;switch(t=t||HZ(n,e),t){case"year":return i[JH(e)]();case"half-year":return i[mp(e)]()>=6?1:0;case"quarter":return Math.floor((i[mp(e)]()+1)/4);case"month":return i[mp(e)]();case"day":return i[KT(e)]();case"half-day":return i[Ny(e)]()/24;case"hour":return i[Ny(e)]();case"minute":return i[ZT(e)]();case"second":return i[JT(e)]();case"millisecond":return i[QT(e)]()}}function JH(n){return n?"getUTCFullYear":"getFullYear"}function mp(n){return n?"getUTCMonth":"getMonth"}function KT(n){return n?"getUTCDate":"getDate"}function Ny(n){return n?"getUTCHours":"getHours"}function ZT(n){return n?"getUTCMinutes":"getMinutes"}function JT(n){return n?"getUTCSeconds":"getSeconds"}function QT(n){return n?"getUTCMilliseconds":"getMilliseconds"}function Ugt(n){return n?"setUTCFullYear":"setFullYear"}function zZ(n){return n?"setUTCMonth":"setMonth"}function FZ(n){return n?"setUTCDate":"setDate"}function NZ(n){return n?"setUTCHours":"setHours"}function WZ(n){return n?"setUTCMinutes":"setMinutes"}function VZ(n){return n?"setUTCSeconds":"setSeconds"}function GZ(n){return n?"setUTCMilliseconds":"setMilliseconds"}function $Z(n){if(!FK(n))return Ct(n)?n:"-";var t=(n+"").split(".");return t[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(t.length>1?"."+t[1]:"")}function jZ(n,t){return n=(n||"").toLowerCase().replace(/-(.)/g,function(e,i){return i.toUpperCase()}),t&&n&&(n=n.charAt(0).toUpperCase()+n.slice(1)),n}var Gv=AH;function HE(n,t,e){var i="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function r(u){return u&&ps(u)?u:"-"}function o(u){return!!(u!=null&&!isNaN(u)&&isFinite(u))}var a=t==="time",s=n instanceof Date;if(a||s){var l=a?Al(n):n;if(isNaN(+l)){if(s)return"-"}else return qT(l,i,e)}if(t==="ordinal")return eE(n)?r(n):Le(n)&&o(n)?n+"":"-";var h=kh(n);return o(h)?$Z(h):eE(n)?r(n):typeof n=="boolean"?n+"":"-"}var Q5=["a","b","c","d","e","f","g"],jR=function(n,t){return"{"+n+(t??"")+"}"};function UZ(n,t,e){ut(t)||(t=[t]);var i=t.length;if(!i)return"";for(var r=t[0].$vars||[],o=0;o<r.length;o++){var a=Q5[o];n=n.replace(jR(a),jR(a,0))}for(var s=0;s<i;s++)for(var l=0;l<r.length;l++){var h=t[s][r[l]];n=n.replace(jR(Q5[l],s),e?Qr(h):h)}return n}function Ygt(n,t,e){return z(t,function(i,r){n=n.replace("{"+r+"}",i)}),n}function Xgt(n,t){var e=Ct(n)?{color:n,extraCssText:t}:n||{},i=e.color,r=e.type;t=e.extraCssText;var o=e.renderMode||"html";if(!i)return"";if(o==="html")return r==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+Qr(i)+";"+(t||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+Qr(i)+";"+(t||"")+'"></span>';var a=e.markerId||"markerX";return{renderMode:o,content:"{"+a+"|}  ",style:r==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:i}:{width:10,height:10,borderRadius:5,backgroundColor:i}}}function Mf(n,t){return t=t||"transparent",Ct(n)?n:Ht(n)&&n.colorStops&&(n.colorStops[0]||{}).color||t}function gx(n,t){if(t==="_blank"||t==="blank"){var e=window.open();e.opener=null,e.location.href=n}else window.open(n,t)}var yw=z,YZ=["left","right","top","bottom","width","height"],Oc=[["width","left","right"],["height","top","bottom"]];function QH(n,t,e,i,r){var o=0,a=0;i==null&&(i=1/0),r==null&&(r=1/0);var s=0;t.eachChild(function(l,h){var u=l.getBoundingRect(),d=t.childAt(h+1),c=d&&d.getBoundingRect(),f,g;if(n==="horizontal"){var p=u.width+(c?-c.x+u.x:0);f=o+p,f>i||l.newline?(o=0,f=p,a+=s+e,s=u.height):s=Math.max(s,u.height)}else{var v=u.height+(c?-c.y+u.y:0);g=a+v,g>r||l.newline?(o+=s+e,a=0,g=v,s=u.width):s=Math.max(s,u.width)}l.newline||(l.x=o,l.y=a,l.markRedraw(),n==="horizontal"?o=f+e:a=g+e)})}var lf=QH;qt(QH,"vertical");qt(QH,"horizontal");function qgt(n,t,e){var i=t.width,r=t.height,o=mt(n.left,i),a=mt(n.top,r),s=mt(n.right,i),l=mt(n.bottom,r);return(isNaN(o)||isNaN(parseFloat(n.left)))&&(o=0),(isNaN(s)||isNaN(parseFloat(n.right)))&&(s=i),(isNaN(a)||isNaN(parseFloat(n.top)))&&(a=0),(isNaN(l)||isNaN(parseFloat(n.bottom)))&&(l=r),e=Gv(e||0),{width:Math.max(s-o-e[1]-e[3],0),height:Math.max(l-a-e[0]-e[2],0)}}function Vn(n,t,e){e=Gv(e||0);var i=t.width,r=t.height,o=mt(n.left,i),a=mt(n.top,r),s=mt(n.right,i),l=mt(n.bottom,r),h=mt(n.width,i),u=mt(n.height,r),d=e[2]+e[0],c=e[1]+e[3],f=n.aspect;switch(isNaN(h)&&(h=i-s-c-o),isNaN(u)&&(u=r-l-d-a),f!=null&&(isNaN(h)&&isNaN(u)&&(f>i/r?h=i*.8:u=r*.8),isNaN(h)&&(h=f*u),isNaN(u)&&(u=h/f)),isNaN(o)&&(o=i-s-h-c),isNaN(a)&&(a=r-l-u-d),n.left||n.right){case"center":o=i/2-h/2-e[3];break;case"right":o=i-h-c;break}switch(n.top||n.bottom){case"middle":case"center":a=r/2-u/2-e[0];break;case"bottom":a=r-u-d;break}o=o||0,a=a||0,isNaN(h)&&(h=i-c-o-(s||0)),isNaN(u)&&(u=r-d-a-(l||0));var g=new te(o+e[3],a+e[0],h,u);return g.margin=e,g}function tM(n,t,e,i,r,o){var a=!r||!r.hv||r.hv[0],s=!r||!r.hv||r.hv[1],l=r&&r.boundingMode||"all";if(o=o||n,o.x=n.x,o.y=n.y,!a&&!s)return!1;var h;if(l==="raw")h=n.type==="group"?new te(0,0,+t.width||0,+t.height||0):n.getBoundingRect();else if(h=n.getBoundingRect(),n.needLocalTransform()){var u=n.getLocalTransform();h=h.clone(),h.applyTransform(u)}var d=Vn(Ot({width:h.width,height:h.height},t),e,i),c=a?d.x-h.x:0,f=s?d.y-h.y:0;return l==="raw"?(o.x=c,o.y=f):(o.x+=c,o.y+=f),o===n&&n.markRedraw(),!0}function Kgt(n,t){return n[Oc[t][0]]!=null||n[Oc[t][1]]!=null&&n[Oc[t][2]]!=null}function Wy(n){var t=n.layoutMode||n.constructor.layoutMode;return Ht(t)?t:t?{type:t}:null}function ed(n,t,e){var i=e&&e.ignoreSize;!ut(i)&&(i=[i,i]);var r=a(Oc[0],0),o=a(Oc[1],1);h(Oc[0],n,r),h(Oc[1],n,o);function a(u,d){var c={},f=0,g={},p=0,v=2;if(yw(u,function(b){g[b]=n[b]}),yw(u,function(b){s(t,b)&&(c[b]=g[b]=t[b]),l(c,b)&&f++,l(g,b)&&p++}),i[d])return l(t,u[1])?g[u[2]]=null:l(t,u[2])&&(g[u[1]]=null),g;if(p===v||!f)return g;if(f>=v)return c;for(var m=0;m<u.length;m++){var y=u[m];if(!s(c,y)&&s(n,y)){c[y]=n[y];break}}return c}function s(u,d){return u.hasOwnProperty(d)}function l(u,d){return u[d]!=null&&u[d]!=="auto"}function h(u,d,c){yw(u,function(f){d[f]=c[f]})}}function $v(n){return XZ({},n)}function XZ(n,t){return t&&n&&yw(YZ,function(e){t.hasOwnProperty(e)&&(n[e]=t[e])}),n}var Zgt=Te(),ge=(function(n){et(t,n);function t(e,i,r){var o=n.call(this,e,i,r)||this;return o.uid=Vv("ec_cpt_model"),o}return t.prototype.init=function(e,i,r){this.mergeDefaultAndTheme(e,r)},t.prototype.mergeDefaultAndTheme=function(e,i){var r=Wy(this),o=r?$v(e):{},a=i.getTheme();Zt(e,a.get(this.mainType)),Zt(e,this.getDefaultOption()),r&&ed(e,o,r)},t.prototype.mergeOption=function(e,i){Zt(this.option,e,!0);var r=Wy(this);r&&ed(this.option,e,r)},t.prototype.optionUpdated=function(e,i){},t.prototype.getDefaultOption=function(){var e=this.constructor;if(!Wct(e))return e.defaultOption;var i=Zgt(this);if(!i.defaultOption){for(var r=[],o=e;o;){var a=o.prototype.defaultOption;a&&r.push(a),o=o.superClass}for(var s={},l=r.length-1;l>=0;l--)s=Zt(s,r[l],!0);i.defaultOption=s}return i.defaultOption},t.prototype.getReferringComponents=function(e,i){var r=e+"Index",o=e+"Id";return e_(this.ecModel,e,{index:this.get(r,!0),id:this.get(o,!0)},i)},t.prototype.getBoxLayoutParams=function(){var e=this;return{left:e.get("left"),top:e.get("top"),right:e.get("right"),bottom:e.get("bottom"),width:e.get("width"),height:e.get("height")}},t.prototype.getZLevelKey=function(){return""},t.prototype.setZLevel=function(e){this.option.zlevel=e},t.protoInitialize=(function(){var e=t.prototype;e.type="component",e.id="",e.name="",e.mainType="",e.subType="",e.componentIndex=0})(),t})(Ze);qK(ge,Ze);zT(ge);Hgt(ge);zgt(ge,Jgt);function Jgt(n){var t=[];return z(ge.getClassesByMainType(n),function(e){t=t.concat(e.dependencies||e.prototype.dependencies||[])}),t=ct(t,function(e){return hl(e).main}),n!=="dataset"&&ee(t,"dataset")<=0&&t.unshift("dataset"),t}var qZ="";typeof navigator<"u"&&(qZ=navigator.platform||"");var pg="rgba(0, 0, 0, 0.2)";const Qgt={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:pg,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:pg,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:pg,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:pg,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:pg,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:pg,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:qZ.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var KZ=Pt(["tooltip","label","itemName","itemId","itemGroupId","itemChildGroupId","seriesName"]),Xa="original",Vr="arrayRows",qa="objectRows",Bl="keyedColumns",ju="typedArray",ZZ="unknown",vl="column",jv="row",gr={Must:1,Might:2,Not:3},JZ=Te();function tpt(n){JZ(n).datasetMap=Pt()}function QZ(n,t,e){var i={},r=ez(t);if(!r||!n)return i;var o=[],a=[],s=t.ecModel,l=JZ(s).datasetMap,h=r.uid+"_"+e.seriesLayoutBy,u,d;n=n.slice(),z(n,function(p,v){var m=Ht(p)?p:n[v]={name:p};m.type==="ordinal"&&u==null&&(u=v,d=g(m)),i[m.name]=[]});var c=l.get(h)||l.set(h,{categoryWayDim:d,valueWayDim:0});z(n,function(p,v){var m=p.name,y=g(p);if(u==null){var b=c.valueWayDim;f(i[m],b,y),f(a,b,y),c.valueWayDim+=y}else if(u===v)f(i[m],0,y),f(o,0,y);else{var b=c.categoryWayDim;f(i[m],b,y),f(a,b,y),c.categoryWayDim+=y}});function f(p,v,m){for(var y=0;y<m;y++)p.push(v+y)}function g(p){var v=p.dimsDef;return v?v.length:1}return o.length&&(i.itemName=o),a.length&&(i.seriesName=a),i}function tz(n,t,e){var i={},r=ez(n);if(!r)return i;var o=t.sourceFormat,a=t.dimensionsDefine,s;(o===qa||o===Bl)&&z(a,function(u,d){(Ht(u)?u.name:u)==="name"&&(s=d)});var l=(function(){for(var u={},d={},c=[],f=0,g=Math.min(5,e);f<g;f++){var p=eJ(t.data,o,t.seriesLayoutBy,a,t.startIndex,f);c.push(p);var v=p===gr.Not;if(v&&u.v==null&&f!==s&&(u.v=f),(u.n==null||u.n===u.v||!v&&c[u.n]===gr.Not)&&(u.n=f),m(u)&&c[u.n]!==gr.Not)return u;v||(p===gr.Might&&d.v==null&&f!==s&&(d.v=f),(d.n==null||d.n===d.v)&&(d.n=f))}function m(y){return y.v!=null&&y.n!=null}return m(u)?u:m(d)?d:null})();if(l){i.value=[l.v];var h=s??l.n;i.itemName=[h],i.seriesName=[h]}return i}function ez(n){var t=n.get("data",!0);if(!t)return e_(n.ecModel,"dataset",{index:n.get("datasetIndex",!0),id:n.get("datasetId",!0)},Mn).models[0]}function ept(n){return!n.get("transform",!0)&&!n.get("fromTransformResult",!0)?[]:e_(n.ecModel,"dataset",{index:n.get("fromDatasetIndex",!0),id:n.get("fromDatasetId",!0)},Mn).models}function tJ(n,t){return eJ(n.data,n.sourceFormat,n.seriesLayoutBy,n.dimensionsDefine,n.startIndex,t)}function eJ(n,t,e,i,r,o){var a,s=5;if(Ro(n))return gr.Not;var l,h;if(i){var u=i[o];Ht(u)?(l=u.name,h=u.type):Ct(u)&&(l=u)}if(h!=null)return h==="ordinal"?gr.Must:gr.Not;if(t===Vr){var d=n;if(e===jv){for(var c=d[o],f=0;f<(c||[]).length&&f<s;f++)if((a=_(c[r+f]))!=null)return a}else for(var f=0;f<d.length&&f<s;f++){var g=d[r+f];if(g&&(a=_(g[o]))!=null)return a}}else if(t===qa){var p=n;if(!l)return gr.Not;for(var f=0;f<p.length&&f<s;f++){var v=p[f];if(v&&(a=_(v[l]))!=null)return a}}else if(t===Bl){var m=n;if(!l)return gr.Not;var c=m[l];if(!c||Ro(c))return gr.Not;for(var f=0;f<c.length&&f<s;f++)if((a=_(c[f]))!=null)return a}else if(t===Xa)for(var y=n,f=0;f<y.length&&f<s;f++){var v=y[f],b=zv(v);if(!ut(b))return gr.Not;if((a=_(b[o]))!=null)return a}function _(w){var C=Ct(w);if(w!=null&&Number.isFinite(Number(w))&&w!=="")return C?gr.Might:gr.Not;if(C&&w!=="-")return gr.Must}return gr.Not}var zE=Pt();function ipt(n,t){so(zE.get(n)==null&&t),zE.set(n,t)}function npt(n,t,e){var i=zE.get(t);if(!i)return e;var r=i(n);return r?e.concat(r):e}var tW=Te(),rpt=Te(),iz=(function(){function n(){}return n.prototype.getColorFromPalette=function(t,e,i){var r=li(this.get("color",!0)),o=this.get("colorLayer",!0);return iJ(this,tW,r,o,t,e,i)},n.prototype.clearColorPalette=function(){apt(this,tW)},n})();function FE(n,t,e,i){var r=li(n.get(["aria","decal","decals"]));return iJ(n,rpt,r,null,t,e,i)}function opt(n,t){for(var e=n.length,i=0;i<e;i++)if(n[i].length>t)return n[i];return n[e-1]}function iJ(n,t,e,i,r,o,a){o=o||n;var s=t(o),l=s.paletteIdx||0,h=s.paletteNameMap=s.paletteNameMap||{};if(h.hasOwnProperty(r))return h[r];var u=a==null||!i?e:opt(i,a);if(u=u||e,!(!u||!u.length)){var d=u[l];return r&&(h[r]=d),s.paletteIdx=(l+1)%u.length,d}}function apt(n,t){t(n).paletteIdx=0,t(n).paletteNameMap={}}var yC,Sm,eW,iW="\0_ec_inner",spt=1,nz=(function(n){et(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.init=function(e,i,r,o,a,s){o=o||{},this.option=null,this._theme=new Ze(o),this._locale=new Ze(a),this._optionManager=s},t.prototype.setOption=function(e,i,r){var o=oW(i);this._optionManager.setOption(e,r,o),this._resetOption(null,o)},t.prototype.resetOption=function(e,i){return this._resetOption(e,oW(i))},t.prototype._resetOption=function(e,i){var r=!1,o=this._optionManager;if(!e||e==="recreate"){var a=o.mountOption(e==="recreate");!this.option||e==="recreate"?eW(this,a):(this.restoreData(),this._mergeOption(a,i)),r=!0}if((e==="timeline"||e==="media")&&this.restoreData(),!e||e==="recreate"||e==="timeline"){var s=o.getTimelineOption(this);s&&(r=!0,this._mergeOption(s,i))}if(!e||e==="recreate"||e==="media"){var l=o.getMediaOption(this);l.length&&z(l,function(h){r=!0,this._mergeOption(h,i)},this)}return r},t.prototype.mergeOption=function(e){this._mergeOption(e,null)},t.prototype._mergeOption=function(e,i){var r=this.option,o=this._componentsMap,a=this._componentsCount,s=[],l=Pt(),h=i&&i.replaceMergeMainTypeMap;tpt(this),z(e,function(d,c){d!=null&&(ge.hasClass(c)?c&&(s.push(c),l.set(c,!0)):r[c]=r[c]==null?zt(d):Zt(r[c],d,!0))}),h&&h.each(function(d,c){ge.hasClass(c)&&!l.get(c)&&(s.push(c),l.set(c,!0))}),ge.topologicalTravel(s,ge.getAllClassMainTypes(),u,this);function u(d){var c=npt(this,d,li(e[d])),f=o.get(d),g=f?h&&h.get(d)?"replaceMerge":"normalMerge":"replaceAll",p=$K(f,c,g);Lct(p,d,ge),r[d]=null,o.set(d,null),a.set(d,0);var v=[],m=[],y=0,b;z(p,function(_,w){var C=_.existing,x=_.newOption;if(!x)C&&(C.mergeOption({},this),C.optionUpdated({},!1));else{var S=d==="series",A=ge.getClass(d,_.keyInfo.subType,!S);if(!A)return;if(d==="tooltip"){if(b)return;b=!0}if(C&&C.constructor===A)C.name=_.keyInfo.name,C.mergeOption(x,this),C.optionUpdated(x,!1);else{var T=ht({componentIndex:w},_.keyInfo);C=new A(x,this,this,T),ht(C,T),_.brandNew&&(C.__requireNewView=!0),C.init(x,this,this),C.optionUpdated(null,!0)}}C?(v.push(C.option),m.push(C),y++):(v.push(void 0),m.push(void 0))},this),r[d]=v,o.set(d,m),a.set(d,y),d==="series"&&yC(this)}this._seriesIndices||yC(this)},t.prototype.getOption=function(){var e=zt(this.option);return z(e,function(i,r){if(ge.hasClass(r)){for(var o=li(i),a=o.length,s=!1,l=a-1;l>=0;l--)o[l]&&!Oy(o[l])?s=!0:(o[l]=null,!s&&a--);o.length=a,e[r]=o}}),delete e[iW],e},t.prototype.getTheme=function(){return this._theme},t.prototype.getLocaleModel=function(){return this._locale},t.prototype.setUpdatePayload=function(e){this._payload=e},t.prototype.getUpdatePayload=function(){return this._payload},t.prototype.getComponent=function(e,i){var r=this._componentsMap.get(e);if(r){var o=r[i||0];if(o)return o;if(i==null){for(var a=0;a<r.length;a++)if(r[a])return r[a]}}},t.prototype.queryComponents=function(e){var i=e.mainType;if(!i)return[];var r=e.index,o=e.id,a=e.name,s=this._componentsMap.get(i);if(!s||!s.length)return[];var l;return r!=null?(l=[],z(li(r),function(h){s[h]&&l.push(s[h])})):o!=null?l=nW("id",o,s):a!=null?l=nW("name",a,s):l=Ge(s,function(h){return!!h}),rW(l,e)},t.prototype.findComponents=function(e){var i=e.query,r=e.mainType,o=s(i),a=o?this.queryComponents(o):Ge(this._componentsMap.get(r),function(h){return!!h});return l(rW(a,e));function s(h){var u=r+"Index",d=r+"Id",c=r+"Name";return h&&(h[u]!=null||h[d]!=null||h[c]!=null)?{mainType:r,index:h[u],id:h[d],name:h[c]}:null}function l(h){return e.filter?Ge(h,e.filter):h}},t.prototype.eachComponent=function(e,i,r){var o=this._componentsMap;if(Dt(e)){var a=i,s=e;o.each(function(d,c){for(var f=0;d&&f<d.length;f++){var g=d[f];g&&s.call(a,c,g,g.componentIndex)}})}else for(var l=Ct(e)?o.get(e):Ht(e)?this.findComponents(e):null,h=0;l&&h<l.length;h++){var u=l[h];u&&i.call(r,u,u.componentIndex)}},t.prototype.getSeriesByName=function(e){var i=Fn(e,null);return Ge(this._componentsMap.get("series"),function(r){return!!r&&i!=null&&r.name===i})},t.prototype.getSeriesByIndex=function(e){return this._componentsMap.get("series")[e]},t.prototype.getSeriesByType=function(e){return Ge(this._componentsMap.get("series"),function(i){return!!i&&i.subType===e})},t.prototype.getSeries=function(){return Ge(this._componentsMap.get("series"),function(e){return!!e})},t.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},t.prototype.eachSeries=function(e,i){Sm(this),z(this._seriesIndices,function(r){var o=this._componentsMap.get("series")[r];e.call(i,o,r)},this)},t.prototype.eachRawSeries=function(e,i){z(this._componentsMap.get("series"),function(r){r&&e.call(i,r,r.componentIndex)})},t.prototype.eachSeriesByType=function(e,i,r){Sm(this),z(this._seriesIndices,function(o){var a=this._componentsMap.get("series")[o];a.subType===e&&i.call(r,a,o)},this)},t.prototype.eachRawSeriesByType=function(e,i,r){return z(this.getSeriesByType(e),i,r)},t.prototype.isSeriesFiltered=function(e){return Sm(this),this._seriesIndicesMap.get(e.componentIndex)==null},t.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},t.prototype.filterSeries=function(e,i){Sm(this);var r=[];z(this._seriesIndices,function(o){var a=this._componentsMap.get("series")[o];e.call(i,a,o)&&r.push(o)},this),this._seriesIndices=r,this._seriesIndicesMap=Pt(r)},t.prototype.restoreData=function(e){yC(this);var i=this._componentsMap,r=[];i.each(function(o,a){ge.hasClass(a)&&r.push(a)}),ge.topologicalTravel(r,ge.getAllClassMainTypes(),function(o){z(i.get(o),function(a){a&&(o!=="series"||!lpt(a,e))&&a.restoreData()})})},t.internalField=(function(){yC=function(e){var i=e._seriesIndices=[];z(e._componentsMap.get("series"),function(r){r&&i.push(r.componentIndex)}),e._seriesIndicesMap=Pt(i)},Sm=function(e){},eW=function(e,i){e.option={},e.option[iW]=spt,e._componentsMap=Pt({series:[]}),e._componentsCount=Pt();var r=i.aria;Ht(r)&&r.enabled==null&&(r.enabled=!0),hpt(i,e._theme.option),Zt(i,Qgt,!1),e._mergeOption(i,null)}})(),t})(Ze);function lpt(n,t){if(t){var e=t.seriesIndex,i=t.seriesId,r=t.seriesName;return e!=null&&n.componentIndex!==e||i!=null&&n.id!==i||r!=null&&n.name!==r}}function hpt(n,t){var e=n.color&&!n.colorLayer;z(t,function(i,r){r==="colorLayer"&&e||ge.hasClass(r)||(typeof i=="object"?n[r]=n[r]?Zt(n[r],i,!1):zt(i):n[r]==null&&(n[r]=i))})}function nW(n,t,e){if(ut(t)){var i=Pt();return z(t,function(o){if(o!=null){var a=Fn(o,null);a!=null&&i.set(o,!0)}}),Ge(e,function(o){return o&&i.get(o[n])})}else{var r=Fn(t,null);return Ge(e,function(o){return o&&r!=null&&o[n]===r})}}function rW(n,t){return t.hasOwnProperty("subType")?Ge(n,function(e){return e&&e.subType===t.subType}):n}function oW(n){var t=Pt();return n&&z(li(n.replaceMerge),function(e){t.set(e,!0)}),{replaceMergeMainTypeMap:t}}In(nz,iz);var upt=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],nJ=(function(){function n(t){z(upt,function(e){this[e]=xt(t[e],t)},this)}return n})(),UR={},l_=(function(){function n(){this._coordinateSystems=[]}return n.prototype.create=function(t,e){var i=[];z(UR,function(r,o){var a=r.create(t,e);i=i.concat(a||[])}),this._coordinateSystems=i},n.prototype.update=function(t,e){z(this._coordinateSystems,function(i){i.update&&i.update(t,e)})},n.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},n.register=function(t,e){UR[t]=e},n.get=function(t){return UR[t]},n})(),dpt=/^(min|max)?(.+)$/,cpt=(function(){function n(t){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=t}return n.prototype.setOption=function(t,e,i){t&&(z(li(t.series),function(a){a&&a.data&&Ro(a.data)&&Jw(a.data)}),z(li(t.dataset),function(a){a&&a.source&&Ro(a.source)&&Jw(a.source)})),t=zt(t);var r=this._optionBackup,o=fpt(t,e,!r);this._newBaseOption=o.baseOption,r?(o.timelineOptions.length&&(r.timelineOptions=o.timelineOptions),o.mediaList.length&&(r.mediaList=o.mediaList),o.mediaDefault&&(r.mediaDefault=o.mediaDefault)):this._optionBackup=o},n.prototype.mountOption=function(t){var e=this._optionBackup;return this._timelineOptions=e.timelineOptions,this._mediaList=e.mediaList,this._mediaDefault=e.mediaDefault,this._currentMediaIndices=[],zt(t?e.baseOption:this._newBaseOption)},n.prototype.getTimelineOption=function(t){var e,i=this._timelineOptions;if(i.length){var r=t.getComponent("timeline");r&&(e=zt(i[r.getCurrentIndex()]))}return e},n.prototype.getMediaOption=function(t){var e=this._api.getWidth(),i=this._api.getHeight(),r=this._mediaList,o=this._mediaDefault,a=[],s=[];if(!r.length&&!o)return s;for(var l=0,h=r.length;l<h;l++)gpt(r[l].query,e,i)&&a.push(l);return!a.length&&o&&(a=[-1]),a.length&&!vpt(a,this._currentMediaIndices)&&(s=ct(a,function(u){return zt(u===-1?o.option:r[u].option)})),this._currentMediaIndices=a,s},n})();function fpt(n,t,e){var i=[],r,o,a=n.baseOption,s=n.timeline,l=n.options,h=n.media,u=!!n.media,d=!!(l||s||a&&a.timeline);a?(o=a,o.timeline||(o.timeline=s)):((d||u)&&(n.options=n.media=null),o=n),u&&ut(h)&&z(h,function(f){f&&f.option&&(f.query?i.push(f):r||(r=f))}),c(o),z(l,function(f){return c(f)}),z(i,function(f){return c(f.option)});function c(f){z(t,function(g){g(f,e)})}return{baseOption:o,timelineOptions:l||[],mediaDefault:r,mediaList:i}}function gpt(n,t,e){var i={width:t,height:e,aspectratio:t/e},r=!0;return z(n,function(o,a){var s=a.match(dpt);if(!(!s||!s[1]||!s[2])){var l=s[1],h=s[2].toLowerCase();ppt(i[h],o,l)||(r=!1)}}),r}function ppt(n,t,e){return e==="min"?n>=t:e==="max"?n<=t:n===t}function vpt(n,t){return n.join(",")===t.join(",")}var Za=z,Vy=Ht,aW=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function YR(n){var t=n&&n.itemStyle;if(t)for(var e=0,i=aW.length;e<i;e++){var r=aW[e],o=t.normal,a=t.emphasis;o&&o[r]&&(n[r]=n[r]||{},n[r].normal?Zt(n[r].normal,o[r]):n[r].normal=o[r],o[r]=null),a&&a[r]&&(n[r]=n[r]||{},n[r].emphasis?Zt(n[r].emphasis,a[r]):n[r].emphasis=a[r],a[r]=null)}}function Hr(n,t,e){if(n&&n[t]&&(n[t].normal||n[t].emphasis)){var i=n[t].normal,r=n[t].emphasis;i&&(e?(n[t].normal=n[t].emphasis=null,Ot(n[t],i)):n[t]=i),r&&(n.emphasis=n.emphasis||{},n.emphasis[t]=r,r.focus&&(n.emphasis.focus=r.focus),r.blurScope&&(n.emphasis.blurScope=r.blurScope))}}function y0(n){Hr(n,"itemStyle"),Hr(n,"lineStyle"),Hr(n,"areaStyle"),Hr(n,"label"),Hr(n,"labelLine"),Hr(n,"upperLabel"),Hr(n,"edgeLabel")}function Cn(n,t){var e=Vy(n)&&n[t],i=Vy(e)&&e.textStyle;if(i)for(var r=0,o=c5.length;r<o;r++){var a=c5[r];i.hasOwnProperty(a)&&(e[a]=i[a])}}function va(n){n&&(y0(n),Cn(n,"label"),n.emphasis&&Cn(n.emphasis,"label"))}function mpt(n){if(Vy(n)){YR(n),y0(n),Cn(n,"label"),Cn(n,"upperLabel"),Cn(n,"edgeLabel"),n.emphasis&&(Cn(n.emphasis,"label"),Cn(n.emphasis,"upperLabel"),Cn(n.emphasis,"edgeLabel"));var t=n.markPoint;t&&(YR(t),va(t));var e=n.markLine;e&&(YR(e),va(e));var i=n.markArea;i&&va(i);var r=n.data;if(n.type==="graph"){r=r||n.nodes;var o=n.links||n.edges;if(o&&!Ro(o))for(var a=0;a<o.length;a++)va(o[a]);z(n.categories,function(h){y0(h)})}if(r&&!Ro(r))for(var a=0;a<r.length;a++)va(r[a]);if(t=n.markPoint,t&&t.data)for(var s=t.data,a=0;a<s.length;a++)va(s[a]);if(e=n.markLine,e&&e.data)for(var l=e.data,a=0;a<l.length;a++)ut(l[a])?(va(l[a][0]),va(l[a][1])):va(l[a]);n.type==="gauge"?(Cn(n,"axisLabel"),Cn(n,"title"),Cn(n,"detail")):n.type==="treemap"?(Hr(n.breadcrumb,"itemStyle"),z(n.levels,function(h){y0(h)})):n.type==="tree"&&y0(n.leaves)}}function Vl(n){return ut(n)?n:n?[n]:[]}function sW(n){return(ut(n)?n[0]:n)||{}}function ypt(n,t){Za(Vl(n.series),function(i){Vy(i)&&mpt(i)});var e=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];t&&e.push("valueAxis","categoryAxis","logAxis","timeAxis"),Za(e,function(i){Za(Vl(n[i]),function(r){r&&(Cn(r,"axisLabel"),Cn(r.axisPointer,"label"))})}),Za(Vl(n.parallel),function(i){var r=i&&i.parallelAxisDefault;Cn(r,"axisLabel"),Cn(r&&r.axisPointer,"label")}),Za(Vl(n.calendar),function(i){Hr(i,"itemStyle"),Cn(i,"dayLabel"),Cn(i,"monthLabel"),Cn(i,"yearLabel")}),Za(Vl(n.radar),function(i){Cn(i,"name"),i.name&&i.axisName==null&&(i.axisName=i.name,delete i.name),i.nameGap!=null&&i.axisNameGap==null&&(i.axisNameGap=i.nameGap,delete i.nameGap)}),Za(Vl(n.geo),function(i){Vy(i)&&(va(i),Za(Vl(i.regions),function(r){va(r)}))}),Za(Vl(n.timeline),function(i){va(i),Hr(i,"label"),Hr(i,"itemStyle"),Hr(i,"controlStyle",!0);var r=i.data;ut(r)&&z(r,function(o){Ht(o)&&(Hr(o,"label"),Hr(o,"itemStyle"))})}),Za(Vl(n.toolbox),function(i){Hr(i,"iconStyle"),Za(i.feature,function(r){Hr(r,"iconStyle")})}),Cn(sW(n.axisPointer),"label"),Cn(sW(n.tooltip).axisPointer,"label")}function bpt(n,t){for(var e=t.split(","),i=n,r=0;r<e.length&&(i=i&&i[e[r]],i!=null);r++);return i}function _pt(n,t,e,i){for(var r=t.split(","),o=n,a,s=0;s<r.length-1;s++)a=r[s],o[a]==null&&(o[a]={}),o=o[a];o[r[s]]==null&&(o[r[s]]=e)}function lW(n){n&&z(Cpt,function(t){t[0]in n&&!(t[1]in n)&&(n[t[1]]=n[t[0]])})}var Cpt=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],wpt=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],XR=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function Am(n){var t=n&&n.itemStyle;if(t)for(var e=0;e<XR.length;e++){var i=XR[e][1],r=XR[e][0];t[i]!=null&&(t[r]=t[i])}}function hW(n){n&&n.alignTo==="edge"&&n.margin!=null&&n.edgeDistance==null&&(n.edgeDistance=n.margin)}function uW(n){n&&n.downplay&&!n.blur&&(n.blur=n.downplay)}function xpt(n){n&&n.focusNodeAdjacency!=null&&(n.emphasis=n.emphasis||{},n.emphasis.focus==null&&(n.emphasis.focus="adjacency"))}function rJ(n,t){if(n)for(var e=0;e<n.length;e++)t(n[e]),n[e]&&rJ(n[e].children,t)}function oJ(n,t){ypt(n,t),n.series=li(n.series),z(n.series,function(e){if(Ht(e)){var i=e.type;if(i==="line")e.clipOverflow!=null&&(e.clip=e.clipOverflow);else if(i==="pie"||i==="gauge"){e.clockWise!=null&&(e.clockwise=e.clockWise),hW(e.label);var r=e.data;if(r&&!Ro(r))for(var o=0;o<r.length;o++)hW(r[o]);e.hoverOffset!=null&&(e.emphasis=e.emphasis||{},(e.emphasis.scaleSize=null)&&(e.emphasis.scaleSize=e.hoverOffset))}else if(i==="gauge"){var a=bpt(e,"pointer.color");a!=null&&_pt(e,"itemStyle.color",a)}else if(i==="bar"){Am(e),Am(e.backgroundStyle),Am(e.emphasis);var r=e.data;if(r&&!Ro(r))for(var o=0;o<r.length;o++)typeof r[o]=="object"&&(Am(r[o]),Am(r[o]&&r[o].emphasis))}else if(i==="sunburst"){var s=e.highlightPolicy;s&&(e.emphasis=e.emphasis||{},e.emphasis.focus||(e.emphasis.focus=s)),uW(e),rJ(e.data,uW)}else i==="graph"||i==="sankey"?xpt(e):i==="map"&&(e.mapType&&!e.map&&(e.map=e.mapType),e.mapLocation&&Ot(e,e.mapLocation));e.hoverAnimation!=null&&(e.emphasis=e.emphasis||{},e.emphasis&&e.emphasis.scale==null&&(e.emphasis.scale=e.hoverAnimation)),lW(e)}}),n.dataRange&&(n.visualMap=n.dataRange),z(wpt,function(e){var i=n[e];i&&(ut(i)||(i=[i]),z(i,function(r){lW(r)}))})}function Spt(n){var t=Pt();n.eachSeries(function(e){var i=e.get("stack");if(i){var r=t.get(i)||t.set(i,[]),o=e.getData(),a={stackResultDimension:o.getCalculationInfo("stackResultDimension"),stackedOverDimension:o.getCalculationInfo("stackedOverDimension"),stackedDimension:o.getCalculationInfo("stackedDimension"),stackedByDimension:o.getCalculationInfo("stackedByDimension"),isStackedByIndex:o.getCalculationInfo("isStackedByIndex"),data:o,seriesModel:e};if(!a.stackedDimension||!(a.isStackedByIndex||a.stackedByDimension))return;r.length&&o.setCalculationInfo("stackedOnSeries",r[r.length-1].seriesModel),r.push(a)}}),t.each(Apt)}function Apt(n){z(n,function(t,e){var i=[],r=[NaN,NaN],o=[t.stackResultDimension,t.stackedOverDimension],a=t.data,s=t.isStackedByIndex,l=t.seriesModel.get("stackStrategy")||"samesign";a.modify(o,function(h,u,d){var c=a.get(t.stackedDimension,d);if(isNaN(c))return r;var f,g;s?g=a.getRawIndex(d):f=a.get(t.stackedByDimension,d);for(var p=NaN,v=e-1;v>=0;v--){var m=n[v];if(s||(g=m.data.rawIndexOf(m.stackedByDimension,f)),g>=0){var y=m.data.getByRawIndex(m.stackResultDimension,g);if(l==="all"||l==="positive"&&y>0||l==="negative"&&y<0||l==="samesign"&&c>=0&&y>0||l==="samesign"&&c<=0&&y<0){c=Cct(c,y),p=y;break}}}return i[0]=c,i[1]=p,i})})}var eM=(function(){function n(t){this.data=t.data||(t.sourceFormat===Bl?{}:[]),this.sourceFormat=t.sourceFormat||ZZ,this.seriesLayoutBy=t.seriesLayoutBy||vl,this.startIndex=t.startIndex||0,this.dimensionsDetectedCount=t.dimensionsDetectedCount,this.metaRawOption=t.metaRawOption;var e=this.dimensionsDefine=t.dimensionsDefine;if(e)for(var i=0;i<e.length;i++){var r=e[i];r.type==null&&tJ(this,i)===gr.Must&&(r.type="ordinal")}}return n})();function rz(n){return n instanceof eM}function NE(n,t,e){e=e||aJ(n);var i=t.seriesLayoutBy,r=Mpt(n,e,i,t.sourceHeader,t.dimensions),o=new eM({data:n,sourceFormat:e,seriesLayoutBy:i,dimensionsDefine:r.dimensionsDefine,startIndex:r.startIndex,dimensionsDetectedCount:r.dimensionsDetectedCount,metaRawOption:zt(t)});return o}function oz(n){return new eM({data:n,sourceFormat:Ro(n)?ju:Xa})}function Tpt(n){return new eM({data:n.data,sourceFormat:n.sourceFormat,seriesLayoutBy:n.seriesLayoutBy,dimensionsDefine:zt(n.dimensionsDefine),startIndex:n.startIndex,dimensionsDetectedCount:n.dimensionsDetectedCount})}function aJ(n){var t=ZZ;if(Ro(n))t=ju;else if(ut(n)){n.length===0&&(t=Vr);for(var e=0,i=n.length;e<i;e++){var r=n[e];if(r!=null){if(ut(r)||Ro(r)){t=Vr;break}else if(Ht(r)){t=qa;break}}}}else if(Ht(n)){for(var o in n)if(At(n,o)&&Wr(n[o])){t=Bl;break}}return t}function Mpt(n,t,e,i,r){var o,a;if(!n)return{dimensionsDefine:dW(r),startIndex:a,dimensionsDetectedCount:o};if(t===Vr){var s=n;i==="auto"||i==null?cW(function(h){h!=null&&h!=="-"&&(Ct(h)?a==null&&(a=1):a=0)},e,s,10):a=Le(i)?i:i?1:0,!r&&a===1&&(r=[],cW(function(h,u){r[u]=h!=null?h+"":""},e,s,1/0)),o=r?r.length:e===jv?s.length:s[0]?s[0].length:null}else if(t===qa)r||(r=Rpt(n));else if(t===Bl)r||(r=[],z(n,function(h,u){r.push(u)}));else if(t===Xa){var l=zv(n[0]);o=ut(l)&&l.length||1}return{startIndex:a,dimensionsDefine:dW(r),dimensionsDetectedCount:o}}function Rpt(n){for(var t=0,e;t<n.length&&!(e=n[t++]););if(e)return pe(e)}function dW(n){if(n){var t=Pt();return ct(n,function(e,i){e=Ht(e)?e:{name:e};var r={name:e.name,displayName:e.displayName,type:e.type};if(r.name==null)return r;r.name+="",r.displayName==null&&(r.displayName=r.name);var o=t.get(r.name);return o?r.name+="-"+o.count++:t.set(r.name,{count:1}),r})}}function cW(n,t,e,i){if(t===jv)for(var r=0;r<e.length&&r<i;r++)n(e[r]?e[r][0]:null,r);else for(var o=e[0]||[],r=0;r<o.length&&r<i;r++)n(o[r],r)}function sJ(n){var t=n.sourceFormat;return t===qa||t===Bl}var Gd,$d,jd,fW,gW,lJ=(function(){function n(t,e){var i=rz(t)?t:oz(t);this._source=i;var r=this._data=i.data;i.sourceFormat===ju&&(this._offset=0,this._dimSize=e,this._data=r),gW(this,r,i)}return n.prototype.getSource=function(){return this._source},n.prototype.count=function(){return 0},n.prototype.getItem=function(t,e){},n.prototype.appendData=function(t){},n.prototype.clean=function(){},n.protoInitialize=(function(){var t=n.prototype;t.pure=!1,t.persistent=!0})(),n.internalField=(function(){var t;gW=function(a,s,l){var h=l.sourceFormat,u=l.seriesLayoutBy,d=l.startIndex,c=l.dimensionsDefine,f=fW[az(h,u)];if(ht(a,f),h===ju)a.getItem=e,a.count=r,a.fillStorage=i;else{var g=hJ(h,u);a.getItem=xt(g,null,s,d,c);var p=uJ(h,u);a.count=xt(p,null,s,d,c)}};var e=function(a,s){a=a-this._offset,s=s||[];for(var l=this._data,h=this._dimSize,u=h*a,d=0;d<h;d++)s[d]=l[u+d];return s},i=function(a,s,l,h){for(var u=this._data,d=this._dimSize,c=0;c<d;c++){for(var f=h[c],g=f[0]==null?1/0:f[0],p=f[1]==null?-1/0:f[1],v=s-a,m=l[c],y=0;y<v;y++){var b=u[y*d+c];m[a+y]=b,b<g&&(g=b),b>p&&(p=b)}f[0]=g,f[1]=p}},r=function(){return this._data?this._data.length/this._dimSize:0};fW=(t={},t[Vr+"_"+vl]={pure:!0,appendData:o},t[Vr+"_"+jv]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},t[qa]={pure:!0,appendData:o},t[Bl]={pure:!0,appendData:function(a){var s=this._data;z(a,function(l,h){for(var u=s[h]||(s[h]=[]),d=0;d<(l||[]).length;d++)u.push(l[d])})}},t[Xa]={appendData:o},t[ju]={persistent:!1,pure:!0,appendData:function(a){this._data=a},clean:function(){this._offset+=this.count(),this._data=null}},t);function o(a){for(var s=0;s<a.length;s++)this._data.push(a[s])}})(),n})(),pW=function(n,t,e,i){return n[i]},Ppt=(Gd={},Gd[Vr+"_"+vl]=function(n,t,e,i){return n[i+t]},Gd[Vr+"_"+jv]=function(n,t,e,i,r){i+=t;for(var o=r||[],a=n,s=0;s<a.length;s++){var l=a[s];o[s]=l?l[i]:null}return o},Gd[qa]=pW,Gd[Bl]=function(n,t,e,i,r){for(var o=r||[],a=0;a<e.length;a++){var s=e[a].name,l=n[s];o[a]=l?l[i]:null}return o},Gd[Xa]=pW,Gd);function hJ(n,t){var e=Ppt[az(n,t)];return e}var vW=function(n,t,e){return n.length},Bpt=($d={},$d[Vr+"_"+vl]=function(n,t,e){return Math.max(0,n.length-t)},$d[Vr+"_"+jv]=function(n,t,e){var i=n[0];return i?Math.max(0,i.length-t):0},$d[qa]=vW,$d[Bl]=function(n,t,e){var i=e[0].name,r=n[i];return r?r.length:0},$d[Xa]=vW,$d);function uJ(n,t){var e=Bpt[az(n,t)];return e}var qR=function(n,t,e){return n[t]},kpt=(jd={},jd[Vr]=qR,jd[qa]=function(n,t,e){return n[e]},jd[Bl]=qR,jd[Xa]=function(n,t,e){var i=zv(n);return i instanceof Array?i[t]:i},jd[ju]=qR,jd);function dJ(n){var t=kpt[n];return t}function az(n,t){return n===Vr?n+"_"+t:n}function jp(n,t,e){if(n){var i=n.getRawDataItem(t);if(i!=null){var r=n.getStore(),o=r.getSource().sourceFormat;if(e!=null){var a=n.getDimensionIndex(e),s=r.getDimensionProperty(a);return dJ(o)(i,a,s)}else{var l=i;return o===Xa&&(l=zv(i)),l}}}}var Lpt=/\{@(.+?)\}/g,iM=(function(){function n(){}return n.prototype.getDataParams=function(t,e){var i=this.getData(e),r=this.getRawValue(t,e),o=i.getRawIndex(t),a=i.getName(t),s=i.getRawDataItem(t),l=i.getItemVisual(t,"style"),h=l&&l[i.getItemVisual(t,"drawType")||"fill"],u=l&&l.stroke,d=this.mainType,c=d==="series",f=i.userOutput&&i.userOutput.get();return{componentType:d,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:c?this.subType:null,seriesIndex:this.seriesIndex,seriesId:c?this.id:null,seriesName:c?this.name:null,name:a,dataIndex:o,data:s,dataType:e,value:r,color:h,borderColor:u,dimensionNames:f?f.fullDimensions:null,encode:f?f.encode:null,$vars:["seriesName","name","value"]}},n.prototype.getFormattedLabel=function(t,e,i,r,o,a){e=e||"normal";var s=this.getData(i),l=this.getDataParams(t,i);if(a&&(l.value=a.interpolatedValue),r!=null&&ut(l.value)&&(l.value=l.value[r]),!o){var h=s.getItemModel(t);o=h.get(e==="normal"?["label","formatter"]:[e,"label","formatter"])}if(Dt(o))return l.status=e,l.dimensionIndex=r,o(l);if(Ct(o)){var u=UZ(o,l);return u.replace(Lpt,function(d,c){var f=c.length,g=c;g.charAt(0)==="["&&g.charAt(f-1)==="]"&&(g=+g.slice(1,f-1));var p=jp(s,t,g);if(a&&ut(a.interpolatedValue)){var v=s.getDimensionIndex(g);v>=0&&(p=a.interpolatedValue[v])}return p!=null?p+"":""})}},n.prototype.getRawValue=function(t,e){return jp(this.getData(e),t)},n.prototype.formatTooltip=function(t,e,i){},n})();function mW(n){var t,e;return Ht(n)?n.type&&(e=n):t=n,{text:t,frag:e}}function Z0(n){return new Ept(n)}var Ept=(function(){function n(t){t=t||{},this._reset=t.reset,this._plan=t.plan,this._count=t.count,this._onDirty=t.onDirty,this._dirty=!0}return n.prototype.perform=function(t){var e=this._upstream,i=t&&t.skip;if(this._dirty&&e){var r=this.context;r.data=r.outputData=e.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var o;this._plan&&!i&&(o=this._plan(this.context));var a=u(this._modBy),s=this._modDataCount||0,l=u(t&&t.modBy),h=t&&t.modDataCount||0;(a!==l||s!==h)&&(o="reset");function u(y){return!(y>=1)&&(y=1),y}var d;(this._dirty||o==="reset")&&(this._dirty=!1,d=this._doReset(i)),this._modBy=l,this._modDataCount=h;var c=t&&t.step;if(e?this._dueEnd=e._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var f=this._dueIndex,g=Math.min(c!=null?this._dueIndex+c:1/0,this._dueEnd);if(!i&&(d||f<g)){var p=this._progress;if(ut(p))for(var v=0;v<p.length;v++)this._doProgress(p[v],f,g,l,h);else this._doProgress(p,f,g,l,h)}this._dueIndex=g;var m=this._settedOutputEnd!=null?this._settedOutputEnd:g;this._outputDueEnd=m}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},n.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},n.prototype._doProgress=function(t,e,i,r,o){yW.reset(e,i,r,o),this._callingProgress=t,this._callingProgress({start:e,end:i,count:i-e,next:yW.next},this.context)},n.prototype._doReset=function(t){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var e,i;!t&&this._reset&&(e=this._reset(this.context),e&&e.progress&&(i=e.forceFirstProgress,e=e.progress),ut(e)&&!e.length&&(e=null)),this._progress=e,this._modBy=this._modDataCount=null;var r=this._downstream;return r&&r.dirty(),i},n.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},n.prototype.pipe=function(t){(this._downstream!==t||this._dirty)&&(this._downstream=t,t._upstream=this,t.dirty())},n.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},n.prototype.getUpstream=function(){return this._upstream},n.prototype.getDownstream=function(){return this._downstream},n.prototype.setOutputEnd=function(t){this._outputDueEnd=this._settedOutputEnd=t},n})(),yW=(function(){var n,t,e,i,r,o={reset:function(l,h,u,d){t=l,n=h,e=u,i=d,r=Math.ceil(i/e),o.next=e>1&&i>0?s:a}};return o;function a(){return t<n?t++:null}function s(){var l=t%r*e+Math.ceil(t/r),h=t>=n?null:l<i?l:t;return t++,h}})();function Uu(n,t){var e=t&&t.type;return e==="ordinal"?n:(e==="time"&&!Le(n)&&n!=null&&n!=="-"&&(n=+Al(n)),n==null||n===""?NaN:Number(n))}var Dpt=Pt({number:function(n){return parseFloat(n)},time:function(n){return+Al(n)},trim:function(n){return Ct(n)?ps(n):n}});function cJ(n){return Dpt.get(n)}var fJ={lt:function(n,t){return n<t},lte:function(n,t){return n<=t},gt:function(n,t){return n>t},gte:function(n,t){return n>=t}},Ipt=(function(){function n(t,e){if(!Le(e)){var i="";Ve(i)}this._opFn=fJ[t],this._rvalFloat=kh(e)}return n.prototype.evaluate=function(t){return Le(t)?this._opFn(t,this._rvalFloat):this._opFn(kh(t),this._rvalFloat)},n})(),gJ=(function(){function n(t,e){var i=t==="desc";this._resultLT=i?1:-1,e==null&&(e=i?"min":"max"),this._incomparable=e==="min"?-1/0:1/0}return n.prototype.evaluate=function(t,e){var i=Le(t)?t:kh(t),r=Le(e)?e:kh(e),o=isNaN(i),a=isNaN(r);if(o&&(i=this._incomparable),a&&(r=this._incomparable),o&&a){var s=Ct(t),l=Ct(e);s&&(i=l?t:0),l&&(r=s?e:0)}return i<r?this._resultLT:i>r?-this._resultLT:0},n})(),Opt=(function(){function n(t,e){this._rval=e,this._isEQ=t,this._rvalTypeof=typeof e,this._rvalFloat=kh(e)}return n.prototype.evaluate=function(t){var e=t===this._rval;if(!e){var i=typeof t;i!==this._rvalTypeof&&(i==="number"||this._rvalTypeof==="number")&&(e=kh(t)===this._rvalFloat)}return this._isEQ?e:!e},n})();function Hpt(n,t){return n==="eq"||n==="ne"?new Opt(n==="eq",t):At(fJ,n)?new Ipt(n,t):null}var zpt=(function(){function n(){}return n.prototype.getRawData=function(){throw new Error("not supported")},n.prototype.getRawDataItem=function(t){throw new Error("not supported")},n.prototype.cloneRawData=function(){},n.prototype.getDimensionInfo=function(t){},n.prototype.cloneAllDimensionInfo=function(){},n.prototype.count=function(){},n.prototype.retrieveValue=function(t,e){},n.prototype.retrieveValueFromItem=function(t,e){},n.prototype.convertValue=function(t,e){return Uu(t,e)},n})();function Fpt(n,t){var e=new zpt,i=n.data,r=e.sourceFormat=n.sourceFormat,o=n.startIndex,a="";n.seriesLayoutBy!==vl&&Ve(a);var s=[],l={},h=n.dimensionsDefine;if(h)z(h,function(p,v){var m=p.name,y={index:v,name:m,displayName:p.displayName};if(s.push(y),m!=null){var b="";At(l,m)&&Ve(b),l[m]=y}});else for(var u=0;u<n.dimensionsDetectedCount;u++)s.push({index:u});var d=hJ(r,vl);t.__isBuiltIn&&(e.getRawDataItem=function(p){return d(i,o,s,p)},e.getRawData=xt(Npt,null,n)),e.cloneRawData=xt(Wpt,null,n);var c=uJ(r,vl);e.count=xt(c,null,i,o,s);var f=dJ(r);e.retrieveValue=function(p,v){var m=d(i,o,s,p);return g(m,v)};var g=e.retrieveValueFromItem=function(p,v){if(p!=null){var m=s[v];if(m)return f(p,v,m.name)}};return e.getDimensionInfo=xt(Vpt,null,s,l),e.cloneAllDimensionInfo=xt(Gpt,null,s),e}function Npt(n){var t=n.sourceFormat;if(!sz(t)){var e="";Ve(e)}return n.data}function Wpt(n){var t=n.sourceFormat,e=n.data;if(!sz(t)){var i="";Ve(i)}if(t===Vr){for(var r=[],o=0,a=e.length;o<a;o++)r.push(e[o].slice());return r}else if(t===qa){for(var r=[],o=0,a=e.length;o<a;o++)r.push(ht({},e[o]));return r}}function Vpt(n,t,e){if(e!=null){if(Le(e)||!isNaN(e)&&!At(t,e))return n[e];if(At(t,e))return t[e]}}function Gpt(n){return zt(n)}var pJ=Pt();function $pt(n){n=zt(n);var t=n.type,e="";t||Ve(e);var i=t.split(":");i.length!==2&&Ve(e);var r=!1;i[0]==="echarts"&&(t=i[1],r=!0),n.__isBuiltIn=r,pJ.set(t,n)}function jpt(n,t,e){var i=li(n),r=i.length,o="";r||Ve(o);for(var a=0,s=r;a<s;a++){var l=i[a];t=Upt(l,t),a!==s-1&&(t.length=Math.max(t.length,1))}return t}function Upt(n,t,e,i){var r="";t.length||Ve(r),Ht(n)||Ve(r);var o=n.type,a=pJ.get(o);a||Ve(r);var s=ct(t,function(h){return Fpt(h,a)}),l=li(a.transform({upstream:s[0],upstreamList:s,config:zt(n.config)}));return ct(l,function(h,u){var d="";Ht(h)||Ve(d),h.data||Ve(d);var c=aJ(h.data);sz(c)||Ve(d);var f,g=t[0];if(g&&u===0&&!h.dimensions){var p=g.startIndex;p&&(h.data=g.data.slice(0,p).concat(h.data)),f={seriesLayoutBy:vl,sourceHeader:p,dimensions:g.metaRawOption.dimensions}}else f={seriesLayoutBy:vl,sourceHeader:0,dimensions:h.dimensions};return NE(h.data,f,null)})}function sz(n){return n===Vr||n===qa}var nM="undefined",Ypt=typeof Uint32Array===nM?Array:Uint32Array,Xpt=typeof Uint16Array===nM?Array:Uint16Array,vJ=typeof Int32Array===nM?Array:Int32Array,bW=typeof Float64Array===nM?Array:Float64Array,mJ={float:bW,int:vJ,ordinal:Array,number:Array,time:bW},KR;function vg(n){return n>65535?Ypt:Xpt}function mg(){return[1/0,-1/0]}function qpt(n){var t=n.constructor;return t===Array?n.slice():new t(n)}function _W(n,t,e,i,r){var o=mJ[e||"float"];if(r){var a=n[t],s=a&&a.length;if(s!==i){for(var l=new o(i),h=0;h<s;h++)l[h]=a[h];n[t]=l}}else n[t]=new o(i)}var WE=(function(){function n(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=Pt()}return n.prototype.initData=function(t,e,i){this._provider=t,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var r=t.getSource(),o=this.defaultDimValueGetter=KR[r.sourceFormat];this._dimValueGetter=i||o,this._rawExtent=[],sJ(r),this._dimensions=ct(e,function(a){return{type:a.type,property:a.property}}),this._initDataFromProvider(0,t.count())},n.prototype.getProvider=function(){return this._provider},n.prototype.getSource=function(){return this._provider.getSource()},n.prototype.ensureCalculationDimension=function(t,e){var i=this._calcDimNameToIdx,r=this._dimensions,o=i.get(t);if(o!=null){if(r[o].type===e)return o}else o=r.length;return r[o]={type:e},i.set(t,o),this._chunks[o]=new mJ[e||"float"](this._rawCount),this._rawExtent[o]=mg(),o},n.prototype.collectOrdinalMeta=function(t,e){var i=this._chunks[t],r=this._dimensions[t],o=this._rawExtent,a=r.ordinalOffset||0,s=i.length;a===0&&(o[t]=mg());for(var l=o[t],h=a;h<s;h++){var u=i[h]=e.parseAndCollect(i[h]);isNaN(u)||(l[0]=Math.min(u,l[0]),l[1]=Math.max(u,l[1]))}r.ordinalMeta=e,r.ordinalOffset=s,r.type="ordinal"},n.prototype.getOrdinalMeta=function(t){var e=this._dimensions[t],i=e.ordinalMeta;return i},n.prototype.getDimensionProperty=function(t){var e=this._dimensions[t];return e&&e.property},n.prototype.appendData=function(t){var e=this._provider,i=this.count();e.appendData(t);var r=e.count();return e.persistent||(r+=i),i<r&&this._initDataFromProvider(i,r,!0),[i,r]},n.prototype.appendValues=function(t,e){for(var i=this._chunks,r=this._dimensions,o=r.length,a=this._rawExtent,s=this.count(),l=s+Math.max(t.length,e||0),h=0;h<o;h++){var u=r[h];_W(i,h,u.type,l,!0)}for(var d=[],c=s;c<l;c++)for(var f=c-s,g=0;g<o;g++){var u=r[g],p=KR.arrayRows.call(this,t[f]||d,u.property,f,g);i[g][c]=p;var v=a[g];p<v[0]&&(v[0]=p),p>v[1]&&(v[1]=p)}return this._rawCount=this._count=l,{start:s,end:l}},n.prototype._initDataFromProvider=function(t,e,i){for(var r=this._provider,o=this._chunks,a=this._dimensions,s=a.length,l=this._rawExtent,h=ct(a,function(y){return y.property}),u=0;u<s;u++){var d=a[u];l[u]||(l[u]=mg()),_W(o,u,d.type,e,i)}if(r.fillStorage)r.fillStorage(t,e,o,l);else for(var c=[],f=t;f<e;f++){c=r.getItem(f,c);for(var g=0;g<s;g++){var p=o[g],v=this._dimValueGetter(c,h[g],f,g);p[f]=v;var m=l[g];v<m[0]&&(m[0]=v),v>m[1]&&(m[1]=v)}}!r.persistent&&r.clean&&r.clean(),this._rawCount=this._count=e,this._extent=[]},n.prototype.count=function(){return this._count},n.prototype.get=function(t,e){if(!(e>=0&&e<this._count))return NaN;var i=this._chunks[t];return i?i[this.getRawIndex(e)]:NaN},n.prototype.getValues=function(t,e){var i=[],r=[];if(e==null){e=t,t=[];for(var o=0;o<this._dimensions.length;o++)r.push(o)}else r=t;for(var o=0,a=r.length;o<a;o++)i.push(this.get(r[o],e));return i},n.prototype.getByRawIndex=function(t,e){if(!(e>=0&&e<this._rawCount))return NaN;var i=this._chunks[t];return i?i[e]:NaN},n.prototype.getSum=function(t){var e=this._chunks[t],i=0;if(e)for(var r=0,o=this.count();r<o;r++){var a=this.get(t,r);isNaN(a)||(i+=a)}return i},n.prototype.getMedian=function(t){var e=[];this.each([t],function(o){isNaN(o)||e.push(o)});var i=e.sort(function(o,a){return o-a}),r=this.count();return r===0?0:r%2===1?i[(r-1)/2]:(i[r/2]+i[r/2-1])/2},n.prototype.indexOfRawIndex=function(t){if(t>=this._rawCount||t<0)return-1;if(!this._indices)return t;var e=this._indices,i=e[t];if(i!=null&&i<this._count&&i===t)return t;for(var r=0,o=this._count-1;r<=o;){var a=(r+o)/2|0;if(e[a]<t)r=a+1;else if(e[a]>t)o=a-1;else return a}return-1},n.prototype.indicesOfNearest=function(t,e,i){var r=this._chunks,o=r[t],a=[];if(!o)return a;i==null&&(i=1/0);for(var s=1/0,l=-1,h=0,u=0,d=this.count();u<d;u++){var c=this.getRawIndex(u),f=e-o[c],g=Math.abs(f);g<=i&&((g<s||g===s&&f>=0&&l<0)&&(s=g,l=f,h=0),f===l&&(a[h++]=u))}return a.length=h,a},n.prototype.getIndices=function(){var t,e=this._indices;if(e){var i=e.constructor,r=this._count;if(i===Array){t=new i(r);for(var o=0;o<r;o++)t[o]=e[o]}else t=new i(e.buffer,0,r)}else{var i=vg(this._rawCount);t=new i(this.count());for(var o=0;o<t.length;o++)t[o]=o}return t},n.prototype.filter=function(t,e){if(!this._count)return this;for(var i=this.clone(),r=i.count(),o=vg(i._rawCount),a=new o(r),s=[],l=t.length,h=0,u=t[0],d=i._chunks,c=0;c<r;c++){var f=void 0,g=i.getRawIndex(c);if(l===0)f=e(c);else if(l===1){var p=d[u][g];f=e(p,c)}else{for(var v=0;v<l;v++)s[v]=d[t[v]][g];s[v]=c,f=e.apply(null,s)}f&&(a[h++]=g)}return h<r&&(i._indices=a),i._count=h,i._extent=[],i._updateGetRawIdx(),i},n.prototype.selectRange=function(t){var e=this.clone(),i=e._count;if(!i)return this;var r=pe(t),o=r.length;if(!o)return this;var a=e.count(),s=vg(e._rawCount),l=new s(a),h=0,u=r[0],d=t[u][0],c=t[u][1],f=e._chunks,g=!1;if(!e._indices){var p=0;if(o===1){for(var v=f[r[0]],m=0;m<i;m++){var y=v[m];(y>=d&&y<=c||isNaN(y))&&(l[h++]=p),p++}g=!0}else if(o===2){for(var v=f[r[0]],b=f[r[1]],_=t[r[1]][0],w=t[r[1]][1],m=0;m<i;m++){var y=v[m],C=b[m];(y>=d&&y<=c||isNaN(y))&&(C>=_&&C<=w||isNaN(C))&&(l[h++]=p),p++}g=!0}}if(!g)if(o===1)for(var m=0;m<a;m++){var x=e.getRawIndex(m),y=f[r[0]][x];(y>=d&&y<=c||isNaN(y))&&(l[h++]=x)}else for(var m=0;m<a;m++){for(var S=!0,x=e.getRawIndex(m),A=0;A<o;A++){var T=r[A],y=f[T][x];(y<t[T][0]||y>t[T][1])&&(S=!1)}S&&(l[h++]=e.getRawIndex(m))}return h<a&&(e._indices=l),e._count=h,e._extent=[],e._updateGetRawIdx(),e},n.prototype.map=function(t,e){var i=this.clone(t);return this._updateDims(i,t,e),i},n.prototype.modify=function(t,e){this._updateDims(this,t,e)},n.prototype._updateDims=function(t,e,i){for(var r=t._chunks,o=[],a=e.length,s=t.count(),l=[],h=t._rawExtent,u=0;u<e.length;u++)h[e[u]]=mg();for(var d=0;d<s;d++){for(var c=t.getRawIndex(d),f=0;f<a;f++)l[f]=r[e[f]][c];l[a]=d;var g=i&&i.apply(null,l);if(g!=null){typeof g!="object"&&(o[0]=g,g=o);for(var u=0;u<g.length;u++){var p=e[u],v=g[u],m=h[p],y=r[p];y&&(y[c]=v),v<m[0]&&(m[0]=v),v>m[1]&&(m[1]=v)}}}},n.prototype.lttbDownSample=function(t,e){var i=this.clone([t],!0),r=i._chunks,o=r[t],a=this.count(),s=0,l=Math.floor(1/e),h=this.getRawIndex(0),u,d,c,f=new(vg(this._rawCount))(Math.min((Math.ceil(a/l)+2)*2,a));f[s++]=h;for(var g=1;g<a-1;g+=l){for(var p=Math.min(g+l,a-1),v=Math.min(g+l*2,a),m=(v+p)/2,y=0,b=p;b<v;b++){var _=this.getRawIndex(b),w=o[_];isNaN(w)||(y+=w)}y/=v-p;var C=g,x=Math.min(g+l,a),S=g-1,A=o[h];u=-1,c=C;for(var T=-1,M=0,b=C;b<x;b++){var _=this.getRawIndex(b),w=o[_];if(isNaN(w)){M++,T<0&&(T=_);continue}d=Math.abs((S-m)*(w-A)-(S-b)*(y-A)),d>u&&(u=d,c=_)}M>0&&M<x-C&&(f[s++]=Math.min(T,c),c=Math.max(T,c)),f[s++]=c,h=c}return f[s++]=this.getRawIndex(a-1),i._count=s,i._indices=f,i.getRawIndex=this._getRawIdx,i},n.prototype.minmaxDownSample=function(t,e){for(var i=this.clone([t],!0),r=i._chunks,o=Math.floor(1/e),a=r[t],s=this.count(),l=new(vg(this._rawCount))(Math.ceil(s/o)*2),h=0,u=0;u<s;u+=o){var d=u,c=a[this.getRawIndex(d)],f=u,g=a[this.getRawIndex(f)],p=o;u+o>s&&(p=s-u);for(var v=0;v<p;v++){var m=this.getRawIndex(u+v),y=a[m];y<c&&(c=y,d=u+v),y>g&&(g=y,f=u+v)}var b=this.getRawIndex(d),_=this.getRawIndex(f);d<f?(l[h++]=b,l[h++]=_):(l[h++]=_,l[h++]=b)}return i._count=h,i._indices=l,i._updateGetRawIdx(),i},n.prototype.downSample=function(t,e,i,r){for(var o=this.clone([t],!0),a=o._chunks,s=[],l=Math.floor(1/e),h=a[t],u=this.count(),d=o._rawExtent[t]=mg(),c=new(vg(this._rawCount))(Math.ceil(u/l)),f=0,g=0;g<u;g+=l){l>u-g&&(l=u-g,s.length=l);for(var p=0;p<l;p++){var v=this.getRawIndex(g+p);s[p]=h[v]}var m=i(s),y=this.getRawIndex(Math.min(g+r(s,m)||0,u-1));h[y]=m,m<d[0]&&(d[0]=m),m>d[1]&&(d[1]=m),c[f++]=y}return o._count=f,o._indices=c,o._updateGetRawIdx(),o},n.prototype.each=function(t,e){if(this._count)for(var i=t.length,r=this._chunks,o=0,a=this.count();o<a;o++){var s=this.getRawIndex(o);switch(i){case 0:e(o);break;case 1:e(r[t[0]][s],o);break;case 2:e(r[t[0]][s],r[t[1]][s],o);break;default:for(var l=0,h=[];l<i;l++)h[l]=r[t[l]][s];h[l]=o,e.apply(null,h)}}},n.prototype.getDataExtent=function(t){var e=this._chunks[t],i=mg();if(!e)return i;var r=this.count(),o=!this._indices,a;if(o)return this._rawExtent[t].slice();if(a=this._extent[t],a)return a.slice();a=i;for(var s=a[0],l=a[1],h=0;h<r;h++){var u=this.getRawIndex(h),d=e[u];d<s&&(s=d),d>l&&(l=d)}return a=[s,l],this._extent[t]=a,a},n.prototype.getRawDataItem=function(t){var e=this.getRawIndex(t);if(this._provider.persistent)return this._provider.getItem(e);for(var i=[],r=this._chunks,o=0;o<r.length;o++)i.push(r[o][e]);return i},n.prototype.clone=function(t,e){var i=new n,r=this._chunks,o=t&&wl(t,function(s,l){return s[l]=!0,s},{});if(o)for(var a=0;a<r.length;a++)i._chunks[a]=o[a]?qpt(r[a]):r[a];else i._chunks=r;return this._copyCommonProps(i),e||(i._indices=this._cloneIndices()),i._updateGetRawIdx(),i},n.prototype._copyCommonProps=function(t){t._count=this._count,t._rawCount=this._rawCount,t._provider=this._provider,t._dimensions=this._dimensions,t._extent=zt(this._extent),t._rawExtent=zt(this._rawExtent)},n.prototype._cloneIndices=function(){if(this._indices){var t=this._indices.constructor,e=void 0;if(t===Array){var i=this._indices.length;e=new t(i);for(var r=0;r<i;r++)e[r]=this._indices[r]}else e=new t(this._indices);return e}return null},n.prototype._getRawIdxIdentity=function(t){return t},n.prototype._getRawIdx=function(t){return t<this._count&&t>=0?this._indices[t]:-1},n.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},n.internalField=(function(){function t(e,i,r,o){return Uu(e[o],this._dimensions[o])}KR={arrayRows:t,objectRows:function(e,i,r,o){return Uu(e[i],this._dimensions[o])},keyedColumns:t,original:function(e,i,r,o){var a=e&&(e.value==null?e:e.value);return Uu(a instanceof Array?a[o]:a,this._dimensions[o])},typedArray:function(e,i,r,o){return e[o]}}})(),n})(),yJ=(function(){function n(t){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=t}return n.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},n.prototype._setLocalSource=function(t,e){this._sourceList=t,this._upstreamSignList=e,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},n.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},n.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},n.prototype._createSource=function(){this._setLocalSource([],[]);var t=this._sourceHost,e=this._getUpstreamSourceManagers(),i=!!e.length,r,o;if(bC(t)){var a=t,s=void 0,l=void 0,h=void 0;if(i){var u=e[0];u.prepareSource(),h=u.getSource(),s=h.data,l=h.sourceFormat,o=[u._getVersionSign()]}else s=a.get("data",!0),l=Ro(s)?ju:Xa,o=[];var d=this._getSourceMetaRawOption()||{},c=h&&h.metaRawOption||{},f=Yt(d.seriesLayoutBy,c.seriesLayoutBy)||null,g=Yt(d.sourceHeader,c.sourceHeader),p=Yt(d.dimensions,c.dimensions),v=f!==c.seriesLayoutBy||!!g!=!!c.sourceHeader||p;r=v?[NE(s,{seriesLayoutBy:f,sourceHeader:g,dimensions:p},l)]:[]}else{var m=t;if(i){var y=this._applyTransform(e);r=y.sourceList,o=y.upstreamSignList}else{var b=m.get("source",!0);r=[NE(b,this._getSourceMetaRawOption(),null)],o=[]}}this._setLocalSource(r,o)},n.prototype._applyTransform=function(t){var e=this._sourceHost,i=e.get("transform",!0),r=e.get("fromTransformResult",!0);if(r!=null){var o="";t.length!==1&&wW(o)}var a,s=[],l=[];return z(t,function(h){h.prepareSource();var u=h.getSource(r||0),d="";r!=null&&!u&&wW(d),s.push(u),l.push(h._getVersionSign())}),i?a=jpt(i,s,{datasetIndex:e.componentIndex}):r!=null&&(a=[Tpt(s[0])]),{sourceList:a,upstreamSignList:l}},n.prototype._isDirty=function(){if(this._dirty)return!0;for(var t=this._getUpstreamSourceManagers(),e=0;e<t.length;e++){var i=t[e];if(i._isDirty()||this._upstreamSignList[e]!==i._getVersionSign())return!0}},n.prototype.getSource=function(t){t=t||0;var e=this._sourceList[t];if(!e){var i=this._getUpstreamSourceManagers();return i[0]&&i[0].getSource(t)}return e},n.prototype.getSharedDataStore=function(t){var e=t.makeStoreSchema();return this._innerGetDataStore(e.dimensions,t.source,e.hash)},n.prototype._innerGetDataStore=function(t,e,i){var r=0,o=this._storeList,a=o[r];a||(a=o[r]={});var s=a[i];if(!s){var l=this._getUpstreamSourceManagers()[0];bC(this._sourceHost)&&l?s=l._innerGetDataStore(t,e,i):(s=new WE,s.initData(new lJ(e,t.length),t)),a[i]=s}return s},n.prototype._getUpstreamSourceManagers=function(){var t=this._sourceHost;if(bC(t)){var e=ez(t);return e?[e.getSourceManager()]:[]}else return ct(ept(t),function(i){return i.getSourceManager()})},n.prototype._getSourceMetaRawOption=function(){var t=this._sourceHost,e,i,r;if(bC(t))e=t.get("seriesLayoutBy",!0),i=t.get("sourceHeader",!0),r=t.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var o=t;e=o.get("seriesLayoutBy",!0),i=o.get("sourceHeader",!0),r=o.get("dimensions",!0)}return{seriesLayoutBy:e,sourceHeader:i,dimensions:r}},n})();function CW(n){var t=n.option.transform;t&&Jw(n.option.transform)}function bC(n){return n.mainType==="series"}function wW(n){throw new Error(n)}var Kpt="line-height:1";function bJ(n){var t=n.lineHeight;return t==null?Kpt:"line-height:"+Qr(t+"")+"px"}function _J(n,t){var e=n.color||"#6e7079",i=n.fontSize||12,r=n.fontWeight||"400",o=n.color||"#464646",a=n.fontSize||14,s=n.fontWeight||"900";return t==="html"?{nameStyle:"font-size:"+Qr(i+"")+"px;color:"+Qr(e)+";font-weight:"+Qr(r+""),valueStyle:"font-size:"+Qr(a+"")+"px;color:"+Qr(o)+";font-weight:"+Qr(s+"")}:{nameStyle:{fontSize:i,fill:e,fontWeight:r},valueStyle:{fontSize:a,fill:o,fontWeight:s}}}var Zpt=[0,10,20,30],Jpt=["",`
`,`

`,`


`];function Jn(n,t){return t.type=n,t}function VE(n){return n.type==="section"}function CJ(n){return VE(n)?Qpt:tvt}function wJ(n){if(VE(n)){var t=0,e=n.blocks.length,i=e>1||e>0&&!n.noHeader;return z(n.blocks,function(r){var o=wJ(r);o>=t&&(t=o+ +(i&&(!o||VE(r)&&!r.noHeader)))}),t}return 0}function Qpt(n,t,e,i){var r=t.noHeader,o=evt(wJ(t)),a=[],s=t.blocks||[];so(!s||ut(s)),s=s||[];var l=n.orderMode;if(t.sortBlocks&&l){s=s.slice();var h={valueAsc:"asc",valueDesc:"desc"};if(At(h,l)){var u=new gJ(h[l],null);s.sort(function(p,v){return u.evaluate(p.sortParam,v.sortParam)})}else l==="seriesDesc"&&s.reverse()}z(s,function(p,v){var m=t.valueFormatter,y=CJ(p)(m?ht(ht({},n),{valueFormatter:m}):n,p,v>0?o.html:0,i);y!=null&&a.push(y)});var d=n.renderMode==="richText"?a.join(o.richText):GE(i,a.join(""),r?e:o.html);if(r)return d;var c=HE(t.header,"ordinal",n.useUTC),f=_J(i,n.renderMode).nameStyle,g=bJ(i);return n.renderMode==="richText"?xJ(n,c,f)+o.richText+d:GE(i,'<div style="'+f+";"+g+';">'+Qr(c)+"</div>"+d,e)}function tvt(n,t,e,i){var r=n.renderMode,o=t.noName,a=t.noValue,s=!t.markerType,l=t.name,h=n.useUTC,u=t.valueFormatter||n.valueFormatter||function(_){return _=ut(_)?_:[_],ct(_,function(w,C){return HE(w,ut(f)?f[C]:f,h)})};if(!(o&&a)){var d=s?"":n.markupStyleCreator.makeTooltipMarker(t.markerType,t.markerColor||"#333",r),c=o?"":HE(l,"ordinal",h),f=t.valueType,g=a?[]:u(t.value,t.dataIndex),p=!s||!o,v=!s&&o,m=_J(i,r),y=m.nameStyle,b=m.valueStyle;return r==="richText"?(s?"":d)+(o?"":xJ(n,c,y))+(a?"":rvt(n,g,p,v,b)):GE(i,(s?"":d)+(o?"":ivt(c,!s,y))+(a?"":nvt(g,p,v,b)),e)}}function xW(n,t,e,i,r,o){if(n){var a=CJ(n),s={useUTC:r,renderMode:e,orderMode:i,markupStyleCreator:t,valueFormatter:n.valueFormatter};return a(s,n,0,o)}}function evt(n){return{html:Zpt[n],richText:Jpt[n]}}function GE(n,t,e){var i='<div style="clear:both"></div>',r="margin: "+e+"px 0 0",o=bJ(n);return'<div style="'+r+";"+o+';">'+t+i+"</div>"}function ivt(n,t,e){var i=t?"margin-left:2px":"";return'<span style="'+e+";"+i+'">'+Qr(n)+"</span>"}function nvt(n,t,e,i){var r=e?"10px":"20px",o=t?"float:right;margin-left:"+r:"";return n=ut(n)?n:[n],'<span style="'+o+";"+i+'">'+ct(n,function(a){return Qr(a)}).join("&nbsp;&nbsp;")+"</span>"}function xJ(n,t,e){return n.markupStyleCreator.wrapRichTextStyle(t,e)}function rvt(n,t,e,i,r){var o=[r],a=i?10:20;return e&&o.push({padding:[0,0,0,a],align:"right"}),n.markupStyleCreator.wrapRichTextStyle(ut(t)?t.join("  "):t,o)}function SJ(n,t){var e=n.getData().getItemVisual(t,"style"),i=e[n.visualDrawType];return Mf(i)}function AJ(n,t){var e=n.get("padding");return e??(t==="richText"?[8,10]:10)}var ZR=(function(){function n(){this.richTextStyles={},this._nextStyleNameId=NK()}return n.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},n.prototype.makeTooltipMarker=function(t,e,i){var r=i==="richText"?this._generateStyleName():null,o=Xgt({color:e,type:t,renderMode:i,markerId:r});return Ct(o)?o:(this.richTextStyles[r]=o.style,o.content)},n.prototype.wrapRichTextStyle=function(t,e){var i={};ut(e)?z(e,function(o){return ht(i,o)}):ht(i,e);var r=this._generateStyleName();return this.richTextStyles[r]=i,"{"+r+"|"+t+"}"},n})();function TJ(n){var t=n.series,e=n.dataIndex,i=n.multipleSeries,r=t.getData(),o=r.mapDimensionsAll("defaultedTooltip"),a=o.length,s=t.getRawValue(e),l=ut(s),h=SJ(t,e),u,d,c,f;if(a>1||l&&!a){var g=ovt(s,t,e,o,h);u=g.inlineValues,d=g.inlineValueTypes,c=g.blocks,f=g.inlineValues[0]}else if(a){var p=r.getDimensionInfo(o[0]);f=u=jp(r,e,o[0]),d=p.type}else f=u=l?s[0]:s;var v=EH(t),m=v&&t.name||"",y=r.getName(e),b=i?m:y;return Jn("section",{header:m,noHeader:i||!v,sortParam:f,blocks:[Jn("nameValue",{markerType:"item",markerColor:h,name:b,noName:!ps(b),value:u,valueType:d,dataIndex:e})].concat(c||[])})}function ovt(n,t,e,i,r){var o=t.getData(),a=wl(n,function(d,c,f){var g=o.getDimensionInfo(f);return d=d||g&&g.tooltip!==!1&&g.displayName!=null},!1),s=[],l=[],h=[];i.length?z(i,function(d){u(jp(o,e,d),d)}):z(n,u);function u(d,c){var f=o.getDimensionInfo(c);!f||f.otherDims.tooltip===!1||(a?h.push(Jn("nameValue",{markerType:"subItem",markerColor:r,name:f.displayName,value:d,valueType:f.type})):(s.push(d),l.push(f.type)))}return{inlineValues:s,inlineValueTypes:l,blocks:h}}var iu=Te();function _C(n,t){return n.getName(t)||n.getId(t)}var bw="__universalTransitionEnabled",Ci=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e._selectedDataIndicesMap={},e}return t.prototype.init=function(e,i,r){this.seriesIndex=this.componentIndex,this.dataTask=Z0({count:svt,reset:lvt}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(e,r);var o=iu(this).sourceManager=new yJ(this);o.prepareSource();var a=this.getInitialData(e,r);AW(a,this),this.dataTask.context.data=a,iu(this).dataBeforeProcessed=a,SW(this),this._initSelectedMapFromData(a)},t.prototype.mergeDefaultAndTheme=function(e,i){var r=Wy(this),o=r?$v(e):{},a=this.subType;ge.hasClass(a)&&(a+="Series"),Zt(e,i.getTheme().get(this.subType)),Zt(e,this.getDefaultOption()),xf(e,"label",["show"]),this.fillDataTextStyle(e.data),r&&ed(e,o,r)},t.prototype.mergeOption=function(e,i){e=Zt(this.option,e,!0),this.fillDataTextStyle(e.data);var r=Wy(this);r&&ed(this.option,e,r);var o=iu(this).sourceManager;o.dirty(),o.prepareSource();var a=this.getInitialData(e,i);AW(a,this),this.dataTask.dirty(),this.dataTask.context.data=a,iu(this).dataBeforeProcessed=a,SW(this),this._initSelectedMapFromData(a)},t.prototype.fillDataTextStyle=function(e){if(e&&!Ro(e))for(var i=["show"],r=0;r<e.length;r++)e[r]&&e[r].label&&xf(e[r],"label",i)},t.prototype.getInitialData=function(e,i){},t.prototype.appendData=function(e){var i=this.getRawData();i.appendData(e.data)},t.prototype.getData=function(e){var i=$E(this);if(i){var r=i.context.data;return e==null||!r.getLinkedData?r:r.getLinkedData(e)}else return iu(this).data},t.prototype.getAllData=function(){var e=this.getData();return e&&e.getLinkedDataAll?e.getLinkedDataAll():[{data:e}]},t.prototype.setData=function(e){var i=$E(this);if(i){var r=i.context;r.outputData=e,i!==this.dataTask&&(r.data=e)}iu(this).data=e},t.prototype.getEncode=function(){var e=this.get("encode",!0);if(e)return Pt(e)},t.prototype.getSourceManager=function(){return iu(this).sourceManager},t.prototype.getSource=function(){return this.getSourceManager().getSource()},t.prototype.getRawData=function(){return iu(this).dataBeforeProcessed},t.prototype.getColorBy=function(){var e=this.get("colorBy");return e||"series"},t.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},t.prototype.getBaseAxis=function(){var e=this.coordinateSystem;return e&&e.getBaseAxis&&e.getBaseAxis()},t.prototype.formatTooltip=function(e,i,r){return TJ({series:this,dataIndex:e,multipleSeries:i})},t.prototype.isAnimationEnabled=function(){var e=this.ecModel;if(ce.node&&!(e&&e.ssr))return!1;var i=this.getShallow("animation");return i&&this.getData().count()>this.getShallow("animationThreshold")&&(i=!1),!!i},t.prototype.restoreData=function(){this.dataTask.dirty()},t.prototype.getColorFromPalette=function(e,i,r){var o=this.ecModel,a=iz.prototype.getColorFromPalette.call(this,e,i,r);return a||(a=o.getColorFromPalette(e,i,r)),a},t.prototype.coordDimToDataDim=function(e){return this.getRawData().mapDimensionsAll(e)},t.prototype.getProgressive=function(){return this.get("progressive")},t.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},t.prototype.select=function(e,i){this._innerSelect(this.getData(i),e)},t.prototype.unselect=function(e,i){var r=this.option.selectedMap;if(r){var o=this.option.selectedMode,a=this.getData(i);if(o==="series"||r==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var s=0;s<e.length;s++){var l=e[s],h=_C(a,l);r[h]=!1,this._selectedDataIndicesMap[h]=-1}}},t.prototype.toggleSelect=function(e,i){for(var r=[],o=0;o<e.length;o++)r[0]=e[o],this.isSelected(e[o],i)?this.unselect(r,i):this.select(r,i)},t.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var e=this._selectedDataIndicesMap,i=pe(e),r=[],o=0;o<i.length;o++){var a=e[i[o]];a>=0&&r.push(a)}return r},t.prototype.isSelected=function(e,i){var r=this.option.selectedMap;if(!r)return!1;var o=this.getData(i);return(r==="all"||r[_C(o,e)])&&!o.getItemModel(e).get(["select","disabled"])},t.prototype.isUniversalTransitionEnabled=function(){if(this[bw])return!0;var e=this.option.universalTransition;return e?e===!0?!0:e&&e.enabled:!1},t.prototype._innerSelect=function(e,i){var r,o,a=this.option,s=a.selectedMode,l=i.length;if(!(!s||!l)){if(s==="series")a.selectedMap="all";else if(s==="multiple"){Ht(a.selectedMap)||(a.selectedMap={});for(var h=a.selectedMap,u=0;u<l;u++){var d=i[u],c=_C(e,d);h[c]=!0,this._selectedDataIndicesMap[c]=e.getRawIndex(d)}}else if(s==="single"||s===!0){var f=i[l-1],c=_C(e,f);a.selectedMap=(r={},r[c]=!0,r),this._selectedDataIndicesMap=(o={},o[c]=e.getRawIndex(f),o)}}},t.prototype._initSelectedMapFromData=function(e){if(!this.option.selectedMap){var i=[];e.hasItemOption&&e.each(function(r){var o=e.getRawDataItem(r);o&&o.selected&&i.push(r)}),i.length>0&&this._innerSelect(e,i)}},t.registerClass=function(e){return ge.registerClass(e)},t.protoInitialize=(function(){var e=t.prototype;e.type="series.__base__",e.seriesIndex=0,e.ignoreStyleOnData=!1,e.hasSymbolVisual=!1,e.defaultSymbol="circle",e.visualStyleAccessPath="itemStyle",e.visualDrawType="fill"})(),t})(ge);In(Ci,iM);In(Ci,iz);qK(Ci,ge);function SW(n){var t=n.name;EH(n)||(n.name=avt(n)||t)}function avt(n){var t=n.getRawData(),e=t.mapDimensionsAll("seriesName"),i=[];return z(e,function(r){var o=t.getDimensionInfo(r);o.displayName&&i.push(o.displayName)}),i.join(" ")}function svt(n){return n.model.getRawData().count()}function lvt(n){var t=n.model;return t.setData(t.getRawData().cloneShallow()),hvt}function hvt(n,t){t.outputData&&n.end>t.outputData.count()&&t.model.getRawData().cloneShallow(t.outputData)}function AW(n,t){z(ky(n.CHANGABLE_METHODS,n.DOWNSAMPLE_METHODS),function(e){n.wrapMethod(e,qt(uvt,t))})}function uvt(n,t){var e=$E(n);return e&&e.setOutputEnd((t||this).count()),t}function $E(n){var t=(n.ecModel||{}).scheduler,e=t&&t.getPipeline(n.uid);if(e){var i=e.currentTask;if(i){var r=i.agentStubMap;r&&(i=r.get(n.uid))}return i}}var Di=(function(){function n(){this.group=new Ft,this.uid=Vv("viewComponent")}return n.prototype.init=function(t,e){},n.prototype.render=function(t,e,i,r){},n.prototype.dispose=function(t,e){},n.prototype.updateView=function(t,e,i,r){},n.prototype.updateLayout=function(t,e,i,r){},n.prototype.updateVisual=function(t,e,i,r){},n.prototype.toggleBlurSeries=function(t,e,i){},n.prototype.eachRendered=function(t){var e=this.group;e&&e.traverse(t)},n})();IH(Di);zT(Di);function Uv(){var n=Te();return function(t){var e=n(t),i=t.pipelineContext,r=!!e.large,o=!!e.progressiveRender,a=e.large=!!(i&&i.large),s=e.progressiveRender=!!(i&&i.progressiveRender);return(r!==a||o!==s)&&"reset"}}var MJ=Te(),dvt=Uv(),hi=(function(){function n(){this.group=new Ft,this.uid=Vv("viewChart"),this.renderTask=Z0({plan:cvt,reset:fvt}),this.renderTask.context={view:this}}return n.prototype.init=function(t,e){},n.prototype.render=function(t,e,i,r){},n.prototype.highlight=function(t,e,i,r){var o=t.getData(r&&r.dataType);o&&MW(o,r,"emphasis")},n.prototype.downplay=function(t,e,i,r){var o=t.getData(r&&r.dataType);o&&MW(o,r,"normal")},n.prototype.remove=function(t,e){this.group.removeAll()},n.prototype.dispose=function(t,e){},n.prototype.updateView=function(t,e,i,r){this.render(t,e,i,r)},n.prototype.updateLayout=function(t,e,i,r){this.render(t,e,i,r)},n.prototype.updateVisual=function(t,e,i,r){this.render(t,e,i,r)},n.prototype.eachRendered=function(t){md(this.group,t)},n.markUpdateMethod=function(t,e){MJ(t).updateMethod=e},n.protoInitialize=(function(){var t=n.prototype;t.type="chart"})(),n})();function TW(n,t,e){n&&zy(n)&&(t==="emphasis"?Lh:Eh)(n,e)}function MW(n,t,e){var i=Sf(n,t),r=t&&t.highlightKey!=null?Xft(t.highlightKey):null;i!=null?z(li(i),function(o){TW(n.getItemGraphicEl(o),e,r)}):n.eachItemGraphicEl(function(o){TW(o,e,r)})}IH(hi);zT(hi);function cvt(n){return dvt(n.model)}function fvt(n){var t=n.model,e=n.ecModel,i=n.api,r=n.payload,o=t.pipelineContext.progressiveRender,a=n.view,s=r&&MJ(r).updateMethod,l=o?"incrementalPrepareRender":s&&a[s]?s:"render";return l!=="render"&&a[l](t,e,i,r),gvt[l]}var gvt={incrementalPrepareRender:{progress:function(n,t){t.view.incrementalRender(n,t.model,t.ecModel,t.api,t.payload)}},render:{forceFirstProgress:!0,progress:function(n,t){t.view.render(t.model,t.ecModel,t.api,t.payload)}}},px="\0__throttleOriginMethod",RW="\0__throttleRate",PW="\0__throttleType";function lz(n,t,e){var i,r=0,o=0,a=null,s,l,h,u;t=t||0;function d(){o=new Date().getTime(),a=null,n.apply(l,h||[])}var c=function(){for(var f=[],g=0;g<arguments.length;g++)f[g]=arguments[g];i=new Date().getTime(),l=this,h=f;var p=u||t,v=u||e;u=null,s=i-(v?r:o)-p,clearTimeout(a),v?a=setTimeout(d,p):s>=0?d():a=setTimeout(d,-s),r=i};return c.clear=function(){a&&(clearTimeout(a),a=null)},c.debounceNextCall=function(f){u=f},c}function Yv(n,t,e,i){var r=n[t];if(r){var o=r[px]||r,a=r[PW],s=r[RW];if(s!==e||a!==i){if(e==null||!i)return n[t]=o;r=n[t]=lz(o,e,i==="debounce"),r[px]=o,r[PW]=i,r[RW]=e}return r}}function Gy(n,t){var e=n[t];e&&e[px]&&(e.clear&&e.clear(),n[t]=e[px])}var BW=Te(),kW={itemStyle:Af(EZ,!0),lineStyle:Af(LZ,!0)},pvt={lineStyle:"stroke",itemStyle:"fill"};function RJ(n,t){var e=n.visualStyleMapper||kW[t];return e||kW.itemStyle}function PJ(n,t){var e=n.visualDrawType||pvt[t];return e||"fill"}var vvt={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,t){var e=n.getData(),i=n.visualStyleAccessPath||"itemStyle",r=n.getModel(i),o=RJ(n,i),a=o(r),s=r.getShallow("decal");s&&(e.setVisual("decal",s),s.dirty=!0);var l=PJ(n,i),h=a[l],u=Dt(h)?h:null,d=a.fill==="auto"||a.stroke==="auto";if(!a[l]||u||d){var c=n.getColorFromPalette(n.name,null,t.getSeriesCount());a[l]||(a[l]=c,e.setVisual("colorFromPalette",!0)),a.fill=a.fill==="auto"||Dt(a.fill)?c:a.fill,a.stroke=a.stroke==="auto"||Dt(a.stroke)?c:a.stroke}if(e.setVisual("style",a),e.setVisual("drawType",l),!t.isSeriesFiltered(n)&&u)return e.setVisual("colorFromPalette",!1),{dataEach:function(f,g){var p=n.getDataParams(g),v=ht({},a);v[l]=u(p),f.setItemVisual(g,"style",v)}}}},Tm=new Ze,mvt={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,t){if(!(n.ignoreStyleOnData||t.isSeriesFiltered(n))){var e=n.getData(),i=n.visualStyleAccessPath||"itemStyle",r=RJ(n,i),o=e.getVisual("drawType");return{dataEach:e.hasItemOption?function(a,s){var l=a.getRawDataItem(s);if(l&&l[i]){Tm.option=l[i];var h=r(Tm),u=a.ensureUniqueItemVisual(s,"style");ht(u,h),Tm.option.decal&&(a.setItemVisual(s,"decal",Tm.option.decal),Tm.option.decal.dirty=!0),o in h&&a.setItemVisual(s,"colorFromPalette",!1)}}:null}}}},yvt={performRawSeries:!0,overallReset:function(n){var t=Pt();n.eachSeries(function(e){var i=e.getColorBy();if(!e.isColorBySeries()){var r=e.type+"-"+i,o=t.get(r);o||(o={},t.set(r,o)),BW(e).scope=o}}),n.eachSeries(function(e){if(!(e.isColorBySeries()||n.isSeriesFiltered(e))){var i=e.getRawData(),r={},o=e.getData(),a=BW(e).scope,s=e.visualStyleAccessPath||"itemStyle",l=PJ(e,s);o.each(function(h){var u=o.getRawIndex(h);r[u]=h}),i.each(function(h){var u=r[h],d=o.getItemVisual(u,"colorFromPalette");if(d){var c=o.ensureUniqueItemVisual(u,"style"),f=i.getName(h)||h+"",g=i.count();c[l]=e.getColorFromPalette(f,a,g)}})}})}},CC=Math.PI;function bvt(n,t){t=t||{},Ot(t,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var e=new Ft,i=new Ae({style:{fill:t.maskColor},zlevel:t.zlevel,z:1e4});e.add(i);var r=new Re({style:{text:t.text,fill:t.textColor,fontSize:t.fontSize,fontWeight:t.fontWeight,fontStyle:t.fontStyle,fontFamily:t.fontFamily},zlevel:t.zlevel,z:10001}),o=new Ae({style:{fill:"none"},textContent:r,textConfig:{position:"right",distance:10},zlevel:t.zlevel,z:10001});e.add(o);var a;return t.showSpinner&&(a=new jT({shape:{startAngle:-CC/2,endAngle:-CC/2+.1,r:t.spinnerRadius},style:{stroke:t.color,lineCap:"round",lineWidth:t.lineWidth},zlevel:t.zlevel,z:10001}),a.animateShape(!0).when(1e3,{endAngle:CC*3/2}).start("circularInOut"),a.animateShape(!0).when(1e3,{startAngle:CC*3/2}).delay(300).start("circularInOut"),e.add(a)),e.resize=function(){var s=r.getBoundingRect().width,l=t.showSpinner?t.spinnerRadius:0,h=(n.getWidth()-l*2-(t.showSpinner&&s?10:0)-s)/2-(t.showSpinner&&s?0:5+s/2)+(t.showSpinner?0:s/2)+(s?0:l),u=n.getHeight()/2;t.showSpinner&&a.setShape({cx:h,cy:u}),o.setShape({x:h-l,y:u-l,width:l*2,height:l*2}),i.setShape({x:0,y:0,width:n.getWidth(),height:n.getHeight()})},e.resize(),e}var BJ=(function(){function n(t,e,i,r){this._stageTaskMap=Pt(),this.ecInstance=t,this.api=e,i=this._dataProcessorHandlers=i.slice(),r=this._visualHandlers=r.slice(),this._allHandlers=i.concat(r)}return n.prototype.restoreData=function(t,e){t.restoreData(e),this._stageTaskMap.each(function(i){var r=i.overallTask;r&&r.dirty()})},n.prototype.getPerformArgs=function(t,e){if(t.__pipeline){var i=this._pipelineMap.get(t.__pipeline.id),r=i.context,o=!e&&i.progressiveEnabled&&(!r||r.progressiveRender)&&t.__idxInPipeline>i.blockIndex,a=o?i.step:null,s=r&&r.modDataCount,l=s!=null?Math.ceil(s/a):null;return{step:a,modBy:l,modDataCount:s}}},n.prototype.getPipeline=function(t){return this._pipelineMap.get(t)},n.prototype.updateStreamModes=function(t,e){var i=this._pipelineMap.get(t.uid),r=t.getData(),o=r.count(),a=i.progressiveEnabled&&e.incrementalPrepareRender&&o>=i.threshold,s=t.get("large")&&o>=t.get("largeThreshold"),l=t.get("progressiveChunkMode")==="mod"?o:null;t.pipelineContext=i.context={progressiveRender:a,modDataCount:l,large:s}},n.prototype.restorePipelines=function(t){var e=this,i=e._pipelineMap=Pt();t.eachSeries(function(r){var o=r.getProgressive(),a=r.uid;i.set(a,{id:a,head:null,tail:null,threshold:r.getProgressiveThreshold(),progressiveEnabled:o&&!(r.preventIncremental&&r.preventIncremental()),blockIndex:-1,step:Math.round(o||700),count:0}),e._pipe(r,r.dataTask)})},n.prototype.prepareStageTasks=function(){var t=this._stageTaskMap,e=this.api.getModel(),i=this.api;z(this._allHandlers,function(r){var o=t.get(r.uid)||t.set(r.uid,{}),a="";so(!(r.reset&&r.overallReset),a),r.reset&&this._createSeriesStageTask(r,o,e,i),r.overallReset&&this._createOverallStageTask(r,o,e,i)},this)},n.prototype.prepareView=function(t,e,i,r){var o=t.renderTask,a=o.context;a.model=e,a.ecModel=i,a.api=r,o.__block=!t.incrementalPrepareRender,this._pipe(e,o)},n.prototype.performDataProcessorTasks=function(t,e){this._performStageTasks(this._dataProcessorHandlers,t,e,{block:!0})},n.prototype.performVisualTasks=function(t,e,i){this._performStageTasks(this._visualHandlers,t,e,i)},n.prototype._performStageTasks=function(t,e,i,r){r=r||{};var o=!1,a=this;z(t,function(l,h){if(!(r.visualType&&r.visualType!==l.visualType)){var u=a._stageTaskMap.get(l.uid),d=u.seriesTaskMap,c=u.overallTask;if(c){var f,g=c.agentStubMap;g.each(function(v){s(r,v)&&(v.dirty(),f=!0)}),f&&c.dirty(),a.updatePayload(c,i);var p=a.getPerformArgs(c,r.block);g.each(function(v){v.perform(p)}),c.perform(p)&&(o=!0)}else d&&d.each(function(v,m){s(r,v)&&v.dirty();var y=a.getPerformArgs(v,r.block);y.skip=!l.performRawSeries&&e.isSeriesFiltered(v.context.model),a.updatePayload(v,i),v.perform(y)&&(o=!0)})}});function s(l,h){return l.setDirty&&(!l.dirtyMap||l.dirtyMap.get(h.__pipeline.id))}this.unfinished=o||this.unfinished},n.prototype.performSeriesTasks=function(t){var e;t.eachSeries(function(i){e=i.dataTask.perform()||e}),this.unfinished=e||this.unfinished},n.prototype.plan=function(){this._pipelineMap.each(function(t){var e=t.tail;do{if(e.__block){t.blockIndex=e.__idxInPipeline;break}e=e.getUpstream()}while(e)})},n.prototype.updatePayload=function(t,e){e!=="remain"&&(t.context.payload=e)},n.prototype._createSeriesStageTask=function(t,e,i,r){var o=this,a=e.seriesTaskMap,s=e.seriesTaskMap=Pt(),l=t.seriesType,h=t.getTargetSeries;t.createOnAllSeries?i.eachRawSeries(u):l?i.eachRawSeriesByType(l,u):h&&h(i,r).each(u);function u(d){var c=d.uid,f=s.set(c,a&&a.get(c)||Z0({plan:Svt,reset:Avt,count:Mvt}));f.context={model:d,ecModel:i,api:r,useClearVisual:t.isVisual&&!t.isLayout,plan:t.plan,reset:t.reset,scheduler:o},o._pipe(d,f)}},n.prototype._createOverallStageTask=function(t,e,i,r){var o=this,a=e.overallTask=e.overallTask||Z0({reset:_vt});a.context={ecModel:i,api:r,overallReset:t.overallReset,scheduler:o};var s=a.agentStubMap,l=a.agentStubMap=Pt(),h=t.seriesType,u=t.getTargetSeries,d=!0,c=!1,f="";so(!t.createOnAllSeries,f),h?i.eachRawSeriesByType(h,g):u?u(i,r).each(g):(d=!1,z(i.getSeries(),g));function g(p){var v=p.uid,m=l.set(v,s&&s.get(v)||(c=!0,Z0({reset:Cvt,onDirty:xvt})));m.context={model:p,overallProgress:d},m.agent=a,m.__block=d,o._pipe(p,m)}c&&a.dirty()},n.prototype._pipe=function(t,e){var i=t.uid,r=this._pipelineMap.get(i);!r.head&&(r.head=e),r.tail&&r.tail.pipe(e),r.tail=e,e.__idxInPipeline=r.count++,e.__pipeline=r},n.wrapStageHandler=function(t,e){return Dt(t)&&(t={overallReset:t,seriesType:Rvt(t)}),t.uid=Vv("stageHandler"),e&&(t.visualType=e),t},n})();function _vt(n){n.overallReset(n.ecModel,n.api,n.payload)}function Cvt(n){return n.overallProgress&&wvt}function wvt(){this.agent.dirty(),this.getDownstream().dirty()}function xvt(){this.agent&&this.agent.dirty()}function Svt(n){return n.plan?n.plan(n.model,n.ecModel,n.api,n.payload):null}function Avt(n){n.useClearVisual&&n.data.clearAllVisual();var t=n.resetDefines=li(n.reset(n.model,n.ecModel,n.api,n.payload));return t.length>1?ct(t,function(e,i){return kJ(i)}):Tvt}var Tvt=kJ(0);function kJ(n){return function(t,e){var i=e.data,r=e.resetDefines[n];if(r&&r.dataEach)for(var o=t.start;o<t.end;o++)r.dataEach(i,o);else r&&r.progress&&r.progress(t,i)}}function Mvt(n){return n.data.count()}function Rvt(n){vx=null;try{n($y,LJ)}catch{}return vx}var $y={},LJ={},vx;EJ($y,nz);EJ(LJ,nJ);$y.eachSeriesByType=$y.eachRawSeriesByType=function(n){vx=n};$y.eachComponent=function(n){n.mainType==="series"&&n.subType&&(vx=n.subType)};function EJ(n,t){for(var e in t.prototype)n[e]=dn}var LW=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];const Pvt={color:LW,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],LW]};var kr="#B9B8CE",EW="#100C2A",wC=function(){return{axisLine:{lineStyle:{color:kr}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},DW=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],DJ={darkMode:!0,color:DW,backgroundColor:EW,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:kr},pageTextStyle:{color:kr}},textStyle:{color:kr},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:kr}},dataZoom:{borderColor:"#71708A",textStyle:{color:kr},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:kr}},timeline:{lineStyle:{color:kr},label:{color:kr},controlStyle:{color:kr,borderColor:kr}},calendar:{itemStyle:{color:EW},dayLabel:{color:kr},monthLabel:{color:kr},yearLabel:{color:kr}},timeAxis:wC(),logAxis:wC(),valueAxis:wC(),categoryAxis:wC(),line:{symbol:"circle"},graph:{color:DW},gauge:{title:{color:kr},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:kr},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};DJ.categoryAxis.splitLine.show=!1;var Bvt=(function(){function n(){}return n.prototype.normalizeQuery=function(t){var e={},i={},r={};if(Ct(t)){var o=hl(t);e.mainType=o.main||null,e.subType=o.sub||null}else{var a=["Index","Name","Id"],s={name:1,dataIndex:1,dataType:1};z(t,function(l,h){for(var u=!1,d=0;d<a.length;d++){var c=a[d],f=h.lastIndexOf(c);if(f>0&&f===h.length-c.length){var g=h.slice(0,f);g!=="data"&&(e.mainType=g,e[c.toLowerCase()]=l,u=!0)}}s.hasOwnProperty(h)&&(i[h]=l,u=!0),u||(r[h]=l)})}return{cptQuery:e,dataQuery:i,otherQuery:r}},n.prototype.filter=function(t,e){var i=this.eventInfo;if(!i)return!0;var r=i.targetEl,o=i.packedEvent,a=i.model,s=i.view;if(!a||!s)return!0;var l=e.cptQuery,h=e.dataQuery;return u(l,a,"mainType")&&u(l,a,"subType")&&u(l,a,"index","componentIndex")&&u(l,a,"name")&&u(l,a,"id")&&u(h,o,"name")&&u(h,o,"dataIndex")&&u(h,o,"dataType")&&(!s.filterForExposedEvent||s.filterForExposedEvent(t,e.otherQuery,r,o));function u(d,c,f,g){return d[f]==null||c[g||f]===d[f]}},n.prototype.afterTrigger=function(){this.eventInfo=null},n})(),jE=["symbol","symbolSize","symbolRotate","symbolOffset"],IW=jE.concat(["symbolKeepAspect"]),kvt={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,t){var e=n.getData();if(n.legendIcon&&e.setVisual("legendIcon",n.legendIcon),!n.hasSymbolVisual)return;for(var i={},r={},o=!1,a=0;a<jE.length;a++){var s=jE[a],l=n.get(s);Dt(l)?(o=!0,r[s]=l):i[s]=l}if(i.symbol=i.symbol||n.defaultSymbol,e.setVisual(ht({legendIcon:n.legendIcon||i.symbol,symbolKeepAspect:n.get("symbolKeepAspect")},i)),t.isSeriesFiltered(n))return;var h=pe(r);function u(d,c){for(var f=n.getRawValue(c),g=n.getDataParams(c),p=0;p<h.length;p++){var v=h[p];d.setItemVisual(c,v,r[v](f,g))}}return{dataEach:o?u:null}}},Lvt={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,t){if(!n.hasSymbolVisual||t.isSeriesFiltered(n))return;var e=n.getData();function i(r,o){for(var a=r.getItemModel(o),s=0;s<IW.length;s++){var l=IW[s],h=a.getShallow(l,!0);h!=null&&r.setItemVisual(o,l,h)}}return{dataEach:e.hasItemOption?i:null}}};function hz(n,t,e){switch(e){case"color":var i=n.getItemVisual(t,"style");return i[n.getVisual("drawType")];case"opacity":return n.getItemVisual(t,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return n.getItemVisual(t,e)}}function h_(n,t){switch(t){case"color":var e=n.getVisual("style");return e[n.getVisual("drawType")];case"opacity":return n.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return n.getVisual(t)}}function IJ(n,t,e,i){switch(e){case"color":var r=n.ensureUniqueItemVisual(t,"style");r[n.getVisual("drawType")]=i,n.setItemVisual(t,"colorFromPalette",!1);break;case"opacity":n.ensureUniqueItemVisual(t,"style").opacity=i;break;case"symbol":case"symbolSize":case"liftZ":n.setItemVisual(t,e,i);break}}function OJ(n,t){function e(i,r){var o=[];return i.eachComponent({mainType:"series",subType:n,query:r},function(a){o.push(a.seriesIndex)}),o}z([[n+"ToggleSelect","toggleSelect"],[n+"Select","select"],[n+"UnSelect","unselect"]],function(i){t(i[0],function(r,o,a){r=ht({},r),a.dispatchAction(ht(r,{type:i[1],seriesIndex:e(o,r)}))})})}function yg(n,t,e,i,r){var o=n+t;e.isSilent(o)||i.eachComponent({mainType:"series",subType:"pie"},function(a){for(var s=a.seriesIndex,l=a.option.selectedMap,h=r.selected,u=0;u<h.length;u++)if(h[u].seriesIndex===s){var d=a.getData(),c=Sf(d,r.fromActionPayload);e.trigger(o,{type:o,seriesId:a.id,name:ut(c)?d.getName(c[0]):d.getName(c),selected:Ct(l)?l:ht({},l)})}})}function Evt(n,t,e){n.on("selectchanged",function(i){var r=e.getModel();i.isFromClick?(yg("map","selectchanged",t,r,i),yg("pie","selectchanged",t,r,i)):i.fromAction==="select"?(yg("map","selected",t,r,i),yg("pie","selected",t,r,i)):i.fromAction==="unselect"&&(yg("map","unselected",t,r,i),yg("pie","unselected",t,r,i))})}function Hc(n,t,e){for(var i;n&&!(t(n)&&(i=n,e));)n=n.__hostTarget||n.parent;return i}var Dvt=Math.round(Math.random()*9),Ivt=typeof Object.defineProperty=="function",Ovt=(function(){function n(){this._id="__ec_inner_"+Dvt++}return n.prototype.get=function(t){return this._guard(t)[this._id]},n.prototype.set=function(t,e){var i=this._guard(t);return Ivt?Object.defineProperty(i,this._id,{value:e,enumerable:!1,configurable:!0}):i[this._id]=e,this},n.prototype.delete=function(t){return this.has(t)?(delete this._guard(t)[this._id],!0):!1},n.prototype.has=function(t){return!!this._guard(t)[this._id]},n.prototype._guard=function(t){if(t!==Object(t))throw TypeError("Value of WeakMap is not a non-null object.");return t},n})(),Hvt=ue.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(n,t){var e=t.cx,i=t.cy,r=t.width/2,o=t.height/2;n.moveTo(e,i-o),n.lineTo(e+r,i+o),n.lineTo(e-r,i+o),n.closePath()}}),zvt=ue.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(n,t){var e=t.cx,i=t.cy,r=t.width/2,o=t.height/2;n.moveTo(e,i-o),n.lineTo(e+r,i),n.lineTo(e,i+o),n.lineTo(e-r,i),n.closePath()}}),Fvt=ue.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(n,t){var e=t.x,i=t.y,r=t.width/5*3,o=Math.max(r,t.height),a=r/2,s=a*a/(o-a),l=i-o+a+s,h=Math.asin(s/a),u=Math.cos(h)*a,d=Math.sin(h),c=Math.cos(h),f=a*.6,g=a*.7;n.moveTo(e-u,l+s),n.arc(e,l,a,Math.PI-h,Math.PI*2+h),n.bezierCurveTo(e+u-d*f,l+s+c*f,e,i-g,e,i),n.bezierCurveTo(e,i-g,e-u+d*f,l+s+c*f,e-u,l+s),n.closePath()}}),Nvt=ue.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(n,t){var e=t.height,i=t.width,r=t.x,o=t.y,a=i/3*2;n.moveTo(r,o),n.lineTo(r+a,o+e),n.lineTo(r,o+e/4*3),n.lineTo(r-a,o+e),n.lineTo(r,o),n.closePath()}}),Wvt={line:Un,rect:Ae,roundRect:Ae,square:Ae,circle:Xh,diamond:zvt,pin:Fvt,arrow:Nvt,triangle:Hvt},Vvt={line:function(n,t,e,i,r){r.x1=n,r.y1=t+i/2,r.x2=n+e,r.y2=t+i/2},rect:function(n,t,e,i,r){r.x=n,r.y=t,r.width=e,r.height=i},roundRect:function(n,t,e,i,r){r.x=n,r.y=t,r.width=e,r.height=i,r.r=Math.min(e,i)/4},square:function(n,t,e,i,r){var o=Math.min(e,i);r.x=n,r.y=t,r.width=o,r.height=o},circle:function(n,t,e,i,r){r.cx=n+e/2,r.cy=t+i/2,r.r=Math.min(e,i)/2},diamond:function(n,t,e,i,r){r.cx=n+e/2,r.cy=t+i/2,r.width=e,r.height=i},pin:function(n,t,e,i,r){r.x=n+e/2,r.y=t+i/2,r.width=e,r.height=i},arrow:function(n,t,e,i,r){r.x=n+e/2,r.y=t+i/2,r.width=e,r.height=i},triangle:function(n,t,e,i,r){r.cx=n+e/2,r.cy=t+i/2,r.width=e,r.height=i}},mx={};z(Wvt,function(n,t){mx[t]=new n});var Gvt=ue.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(n,t,e){var i=ax(n,t,e),r=this.shape;return r&&r.symbolType==="pin"&&t.position==="inside"&&(i.y=e.y+e.height*.4),i},buildPath:function(n,t,e){var i=t.symbolType;if(i!=="none"){var r=mx[i];r||(i="rect",r=mx[i]),Vvt[i](t.x,t.y,t.width,t.height,r.shape),r.buildPath(n,r.shape,e)}}});function $vt(n,t){if(this.type!=="image"){var e=this.style;this.__isEmptyBrush?(e.stroke=n,e.fill=t||"#fff",e.lineWidth=2):this.shape.symbolType==="line"?e.stroke=n:e.fill=n,this.markRedraw()}}function En(n,t,e,i,r,o,a){var s=n.indexOf("empty")===0;s&&(n=n.substr(5,1).toLowerCase()+n.substr(6));var l;return n.indexOf("image://")===0?l=SZ(n.slice(8),new te(t,e,i,r),a?"center":"cover"):n.indexOf("path://")===0?l=UT(n.slice(7),{},new te(t,e,i,r),a?"center":"cover"):l=new Gvt({shape:{symbolType:n,x:t,y:e,width:i,height:r}}),l.__isEmptyBrush=s,l.setColor=$vt,o&&l.setColor(o),l}function Xv(n){return ut(n)||(n=[+n,+n]),[n[0]||0,n[1]||0]}function Jf(n,t){if(n!=null)return ut(n)||(n=[n,n]),[mt(n[0],t[0])||0,mt(Yt(n[1],n[0]),t[1])||0]}function zc(n){return isFinite(n)}function jvt(n,t,e){var i=t.x==null?0:t.x,r=t.x2==null?1:t.x2,o=t.y==null?0:t.y,a=t.y2==null?0:t.y2;t.global||(i=i*e.width+e.x,r=r*e.width+e.x,o=o*e.height+e.y,a=a*e.height+e.y),i=zc(i)?i:0,r=zc(r)?r:1,o=zc(o)?o:0,a=zc(a)?a:0;var s=n.createLinearGradient(i,o,r,a);return s}function Uvt(n,t,e){var i=e.width,r=e.height,o=Math.min(i,r),a=t.x==null?.5:t.x,s=t.y==null?.5:t.y,l=t.r==null?.5:t.r;t.global||(a=a*i+e.x,s=s*r+e.y,l=l*o),a=zc(a)?a:.5,s=zc(s)?s:.5,l=l>=0&&zc(l)?l:.5;var h=n.createRadialGradient(a,s,0,a,s,l);return h}function UE(n,t,e){for(var i=t.type==="radial"?Uvt(n,t,e):jvt(n,t,e),r=t.colorStops,o=0;o<r.length;o++)i.addColorStop(r[o].offset,r[o].color);return i}function Yvt(n,t){if(n===t||!n&&!t)return!1;if(!n||!t||n.length!==t.length)return!0;for(var e=0;e<n.length;e++)if(n[e]!==t[e])return!0;return!1}function xC(n){return parseInt(n,10)}function rp(n,t,e){var i=["width","height"][t],r=["clientWidth","clientHeight"][t],o=["paddingLeft","paddingTop"][t],a=["paddingRight","paddingBottom"][t];if(e[i]!=null&&e[i]!=="auto")return parseFloat(e[i]);var s=document.defaultView.getComputedStyle(n);return(n[r]||xC(s[i])||xC(n.style[i]))-(xC(s[o])||0)-(xC(s[a])||0)|0}function Xvt(n,t){return!n||n==="solid"||!(t>0)?null:n==="dashed"?[4*t,2*t]:n==="dotted"?[t]:Le(n)?[n]:ut(n)?n:null}function uz(n){var t=n.style,e=t.lineDash&&t.lineWidth>0&&Xvt(t.lineDash,t.lineWidth),i=t.lineDashOffset;if(e){var r=t.strokeNoScale&&n.getLineScale?n.getLineScale():1;r&&r!==1&&(e=ct(e,function(o){return o/r}),i/=r)}return[e,i]}var qvt=new Tl(!0);function yx(n){var t=n.stroke;return!(t==null||t==="none"||!(n.lineWidth>0))}function OW(n){return typeof n=="string"&&n!=="none"}function bx(n){var t=n.fill;return t!=null&&t!=="none"}function HW(n,t){if(t.fillOpacity!=null&&t.fillOpacity!==1){var e=n.globalAlpha;n.globalAlpha=t.fillOpacity*t.opacity,n.fill(),n.globalAlpha=e}else n.fill()}function zW(n,t){if(t.strokeOpacity!=null&&t.strokeOpacity!==1){var e=n.globalAlpha;n.globalAlpha=t.strokeOpacity*t.opacity,n.stroke(),n.globalAlpha=e}else n.stroke()}function YE(n,t,e){var i=OH(t.image,t.__image,e);if(FT(i)){var r=n.createPattern(i,t.repeat||"repeat");if(typeof DOMMatrix=="function"&&r&&r.setTransform){var o=new DOMMatrix;o.translateSelf(t.x||0,t.y||0),o.rotateSelf(0,0,(t.rotation||0)*aw),o.scaleSelf(t.scaleX||1,t.scaleY||1),r.setTransform(o)}return r}}function Kvt(n,t,e,i){var r,o=yx(e),a=bx(e),s=e.strokePercent,l=s<1,h=!t.path;(!t.silent||l)&&h&&t.createPathProxy();var u=t.path||qvt,d=t.__dirty;if(!i){var c=e.fill,f=e.stroke,g=a&&!!c.colorStops,p=o&&!!f.colorStops,v=a&&!!c.image,m=o&&!!f.image,y=void 0,b=void 0,_=void 0,w=void 0,C=void 0;(g||p)&&(C=t.getBoundingRect()),g&&(y=d?UE(n,c,C):t.__canvasFillGradient,t.__canvasFillGradient=y),p&&(b=d?UE(n,f,C):t.__canvasStrokeGradient,t.__canvasStrokeGradient=b),v&&(_=d||!t.__canvasFillPattern?YE(n,c,t):t.__canvasFillPattern,t.__canvasFillPattern=_),m&&(w=d||!t.__canvasStrokePattern?YE(n,f,t):t.__canvasStrokePattern,t.__canvasStrokePattern=_),g?n.fillStyle=y:v&&(_?n.fillStyle=_:a=!1),p?n.strokeStyle=b:m&&(w?n.strokeStyle=w:o=!1)}var x=t.getGlobalScale();u.setScale(x[0],x[1],t.segmentIgnoreThreshold);var S,A;n.setLineDash&&e.lineDash&&(r=uz(t),S=r[0],A=r[1]);var T=!0;(h||d&Xg)&&(u.setDPR(n.dpr),l?u.setContext(null):(u.setContext(n),T=!1),u.reset(),t.buildPath(u,t.shape,i),u.toStatic(),t.pathUpdated()),T&&u.rebuildPath(n,l?s:1),S&&(n.setLineDash(S),n.lineDashOffset=A),i||(e.strokeFirst?(o&&zW(n,e),a&&HW(n,e)):(a&&HW(n,e),o&&zW(n,e))),S&&n.setLineDash([])}function Zvt(n,t,e){var i=t.__image=OH(e.image,t.__image,t,t.onload);if(!(!i||!FT(i))){var r=e.x||0,o=e.y||0,a=t.getWidth(),s=t.getHeight(),l=i.width/i.height;if(a==null&&s!=null?a=s*l:s==null&&a!=null?s=a/l:a==null&&s==null&&(a=i.width,s=i.height),e.sWidth&&e.sHeight){var h=e.sx||0,u=e.sy||0;n.drawImage(i,h,u,e.sWidth,e.sHeight,r,o,a,s)}else if(e.sx&&e.sy){var h=e.sx,u=e.sy,d=a-h,c=s-u;n.drawImage(i,h,u,d,c,r,o,a,s)}else n.drawImage(i,r,o,a,s)}}function Jvt(n,t,e){var i,r=e.text;if(r!=null&&(r+=""),r){n.font=e.font||Zu,n.textAlign=e.textAlign,n.textBaseline=e.textBaseline;var o=void 0,a=void 0;n.setLineDash&&e.lineDash&&(i=uz(t),o=i[0],a=i[1]),o&&(n.setLineDash(o),n.lineDashOffset=a),e.strokeFirst?(yx(e)&&n.strokeText(r,e.x,e.y),bx(e)&&n.fillText(r,e.x,e.y)):(bx(e)&&n.fillText(r,e.x,e.y),yx(e)&&n.strokeText(r,e.x,e.y)),o&&n.setLineDash([])}}var FW=["shadowBlur","shadowOffsetX","shadowOffsetY"],NW=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function HJ(n,t,e,i,r){var o=!1;if(!i&&(e=e||{},t===e))return!1;if(i||t.opacity!==e.opacity){wo(n,r),o=!0;var a=Math.max(Math.min(t.opacity,1),0);n.globalAlpha=isNaN(a)?rf.opacity:a}(i||t.blend!==e.blend)&&(o||(wo(n,r),o=!0),n.globalCompositeOperation=t.blend||rf.blend);for(var s=0;s<FW.length;s++){var l=FW[s];(i||t[l]!==e[l])&&(o||(wo(n,r),o=!0),n[l]=n.dpr*(t[l]||0))}return(i||t.shadowColor!==e.shadowColor)&&(o||(wo(n,r),o=!0),n.shadowColor=t.shadowColor||rf.shadowColor),o}function WW(n,t,e,i,r){var o=jy(t,r.inHover),a=i?null:e&&jy(e,r.inHover)||{};if(o===a)return!1;var s=HJ(n,o,a,i,r);if((i||o.fill!==a.fill)&&(s||(wo(n,r),s=!0),OW(o.fill)&&(n.fillStyle=o.fill)),(i||o.stroke!==a.stroke)&&(s||(wo(n,r),s=!0),OW(o.stroke)&&(n.strokeStyle=o.stroke)),(i||o.opacity!==a.opacity)&&(s||(wo(n,r),s=!0),n.globalAlpha=o.opacity==null?1:o.opacity),t.hasStroke()){var l=o.lineWidth,h=l/(o.strokeNoScale&&t.getLineScale?t.getLineScale():1);n.lineWidth!==h&&(s||(wo(n,r),s=!0),n.lineWidth=h)}for(var u=0;u<NW.length;u++){var d=NW[u],c=d[0];(i||o[c]!==a[c])&&(s||(wo(n,r),s=!0),n[c]=o[c]||d[1])}return s}function Qvt(n,t,e,i,r){return HJ(n,jy(t,r.inHover),e&&jy(e,r.inHover),i,r)}function zJ(n,t){var e=t.transform,i=n.dpr||1;e?n.setTransform(i*e[0],i*e[1],i*e[2],i*e[3],i*e[4],i*e[5]):n.setTransform(i,0,0,i,0,0)}function tmt(n,t,e){for(var i=!1,r=0;r<n.length;r++){var o=n[r];i=i||o.isZeroArea(),zJ(t,o),t.beginPath(),o.buildPath(t,o.shape),t.clip()}e.allClipped=i}function emt(n,t){return n&&t?n[0]!==t[0]||n[1]!==t[1]||n[2]!==t[2]||n[3]!==t[3]||n[4]!==t[4]||n[5]!==t[5]:!(!n&&!t)}var VW=1,GW=2,$W=3,jW=4;function imt(n){var t=bx(n),e=yx(n);return!(n.lineDash||!(+t^+e)||t&&typeof n.fill!="string"||e&&typeof n.stroke!="string"||n.strokePercent<1||n.strokeOpacity<1||n.fillOpacity<1)}function wo(n,t){t.batchFill&&n.fill(),t.batchStroke&&n.stroke(),t.batchFill="",t.batchStroke=""}function jy(n,t){return t&&n.__hoverStyle||n.style}function FJ(n,t){Fc(n,t,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function Fc(n,t,e,i){var r=t.transform;if(!t.shouldBePainted(e.viewWidth,e.viewHeight,!1,!1)){t.__dirty&=~$o,t.__isRendered=!1;return}var o=t.__clipPaths,a=e.prevElClipPaths,s=!1,l=!1;if((!a||Yvt(o,a))&&(a&&a.length&&(wo(n,e),n.restore(),l=s=!0,e.prevElClipPaths=null,e.allClipped=!1,e.prevEl=null),o&&o.length&&(wo(n,e),n.save(),tmt(o,n,e),s=!0),e.prevElClipPaths=o),e.allClipped){t.__isRendered=!1;return}t.beforeBrush&&t.beforeBrush(),t.innerBeforeBrush();var h=e.prevEl;h||(l=s=!0);var u=t instanceof ue&&t.autoBatch&&imt(t.style);s||emt(r,h.transform)?(wo(n,e),zJ(n,t)):u||wo(n,e);var d=jy(t,e.inHover);t instanceof ue?(e.lastDrawType!==VW&&(l=!0,e.lastDrawType=VW),WW(n,t,h,l,e),(!u||!e.batchFill&&!e.batchStroke)&&n.beginPath(),Kvt(n,t,d,u),u&&(e.batchFill=d.fill||"",e.batchStroke=d.stroke||"")):t instanceof Gp?(e.lastDrawType!==$W&&(l=!0,e.lastDrawType=$W),WW(n,t,h,l,e),Jvt(n,t,d)):t instanceof hr?(e.lastDrawType!==GW&&(l=!0,e.lastDrawType=GW),Qvt(n,t,h,l,e),Zvt(n,t,d)):t.getTemporalDisplayables&&(e.lastDrawType!==jW&&(l=!0,e.lastDrawType=jW),nmt(n,t,e)),u&&i&&wo(n,e),t.innerAfterBrush(),t.afterBrush&&t.afterBrush(),e.prevEl=t,t.__dirty=0,t.__isRendered=!0}function nmt(n,t,e){var i=t.getDisplayables(),r=t.getTemporalDisplayables();n.save();var o={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:e.viewWidth,viewHeight:e.viewHeight,inHover:e.inHover},a,s;for(a=t.getCursor(),s=i.length;a<s;a++){var l=i[a];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),Fc(n,l,o,a===s-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),o.prevEl=l}for(var h=0,u=r.length;h<u;h++){var l=r[h];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),Fc(n,l,o,h===u-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),o.prevEl=l}t.clearTemporalDisplayables(),t.notClear=!0,n.restore()}var JR=new Ovt,UW=new Qb(100),YW=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function Up(n,t){if(n==="none")return null;var e=t.getDevicePixelRatio(),i=t.getZr(),r=i.painter.type==="svg";n.dirty&&JR.delete(n);var o=JR.get(n);if(o)return o;var a=Ot(n,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});a.backgroundColor==="none"&&(a.backgroundColor=null);var s={repeat:"repeat"};return l(s),s.rotation=a.rotation,s.scaleX=s.scaleY=r?1:1/e,JR.set(n,s),n.dirty=!1,s;function l(h){for(var u=[e],d=!0,c=0;c<YW.length;++c){var f=a[YW[c]];if(f!=null&&!ut(f)&&!Ct(f)&&!Le(f)&&typeof f!="boolean"){d=!1;break}u.push(f)}var g;if(d){g=u.join(",")+(r?"-svg":"");var p=UW.get(g);p&&(r?h.svgElement=p:h.image=p)}var v=WJ(a.dashArrayX),m=rmt(a.dashArrayY),y=NJ(a.symbol),b=omt(v),_=VJ(m),w=!r&&Ju.createCanvas(),C=r&&{tag:"g",attrs:{},key:"dcl",children:[]},x=A(),S;w&&(w.width=x.width*e,w.height=x.height*e,S=w.getContext("2d")),T(),d&&UW.put(g,w||C),h.image=w,h.svgElement=C,h.svgWidth=x.width,h.svgHeight=x.height;function A(){for(var M=1,R=0,L=b.length;R<L;++R)M=u5(M,b[R]);for(var B=1,R=0,L=y.length;R<L;++R)B=u5(B,y[R].length);M*=B;var P=_*b.length*y.length;return{width:Math.max(1,Math.min(M,a.maxTileWidth)),height:Math.max(1,Math.min(P,a.maxTileHeight))}}function T(){S&&(S.clearRect(0,0,w.width,w.height),a.backgroundColor&&(S.fillStyle=a.backgroundColor,S.fillRect(0,0,w.width,w.height)));for(var M=0,R=0;R<m.length;++R)M+=m[R];if(M<=0)return;for(var L=-_,B=0,P=0,k=0;L<x.height;){if(B%2===0){for(var E=P/2%y.length,D=0,I=0,O=0;D<x.width*2;){for(var H=0,R=0;R<v[k].length;++R)H+=v[k][R];if(H<=0)break;if(I%2===0){var F=(1-a.symbolSize)*.5,N=D+v[k][I]*F,$=L+m[B]*F,V=v[k][I]*a.symbolSize,X=m[B]*a.symbolSize,Z=O/2%y[E].length;tt(N,$,V,X,y[E][Z])}D+=v[k][I],++O,++I,I===v[k].length&&(I=0)}++k,k===v.length&&(k=0)}L+=m[B],++P,++B,B===m.length&&(B=0)}function tt(K,rt,q,it,nt){var W=r?1:e,G=En(nt,K*W,rt*W,q*W,it*W,a.color,a.symbolKeepAspect);if(r){var j=i.painter.renderOneToVNode(G);j&&C.children.push(j)}else FJ(S,G)}}}}function NJ(n){if(!n||n.length===0)return[["rect"]];if(Ct(n))return[[n]];for(var t=!0,e=0;e<n.length;++e)if(!Ct(n[e])){t=!1;break}if(t)return NJ([n]);for(var i=[],e=0;e<n.length;++e)Ct(n[e])?i.push([n[e]]):i.push(n[e]);return i}function WJ(n){if(!n||n.length===0)return[[0,0]];if(Le(n)){var t=Math.ceil(n);return[[t,t]]}for(var e=!0,i=0;i<n.length;++i)if(!Le(n[i])){e=!1;break}if(e)return WJ([n]);for(var r=[],i=0;i<n.length;++i)if(Le(n[i])){var t=Math.ceil(n[i]);r.push([t,t])}else{var t=ct(n[i],function(s){return Math.ceil(s)});t.length%2===1?r.push(t.concat(t)):r.push(t)}return r}function rmt(n){if(!n||typeof n=="object"&&n.length===0)return[0,0];if(Le(n)){var t=Math.ceil(n);return[t,t]}var e=ct(n,function(i){return Math.ceil(i)});return n.length%2?e.concat(e):e}function omt(n){return ct(n,function(t){return VJ(t)})}function VJ(n){for(var t=0,e=0;e<n.length;++e)t+=n[e];return n.length%2===1?t*2:t}function amt(n,t){n.eachRawSeries(function(e){if(!n.isSeriesFiltered(e)){var i=e.getData();i.hasItemVisual()&&i.each(function(a){var s=i.getItemVisual(a,"decal");if(s){var l=i.ensureUniqueItemVisual(a,"style");l.decal=Up(s,t)}});var r=i.getVisual("decal");if(r){var o=i.getVisual("style");o.decal=Up(r,t)}}})}var rs=new Ya,GJ={};function smt(n,t){GJ[n]=t}function lmt(n){return GJ[n]}var hmt=1,umt=800,dmt=900,cmt=1e3,fmt=2e3,gmt=5e3,$J=1e3,pmt=1100,dz=2e3,jJ=3e3,vmt=4e3,rM=4500,mmt=4600,ymt=5e3,bmt=6e3,UJ=7e3,_mt={PROCESSOR:{FILTER:cmt,SERIES_FILTER:umt,STATISTIC:gmt},VISUAL:{LAYOUT:$J,PROGRESSIVE_LAYOUT:pmt,GLOBAL:dz,CHART:jJ,POST_CHART_LAYOUT:mmt,COMPONENT:vmt,BRUSH:ymt,CHART_ITEM:rM,ARIA:bmt,DECAL:UJ}},Pr="__flagInMainProcess",po="__pendingUpdate",QR="__needsUpdateStatus",XW=/^[a-zA-Z0-9_]+$/,tP="__connectUpdateStatus",qW=0,Cmt=1,wmt=2;function YJ(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(this.isDisposed()){this.id;return}return qJ(this,n,t)}}function XJ(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return qJ(this,n,t)}}function qJ(n,t,e){return e[0]=e[0]&&e[0].toLowerCase(),Ya.prototype[t].apply(n,e)}var KJ=(function(n){et(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t})(Ya),ZJ=KJ.prototype;ZJ.on=XJ("on");ZJ.off=XJ("off");var bg,eP,SC,nu,iP,nP,rP,Mm,Rm,KW,ZW,oP,JW,AC,QW,JJ,oa,t4,QJ=(function(n){et(t,n);function t(e,i,r){var o=n.call(this,new Bvt)||this;o._chartsViews=[],o._chartsMap={},o._componentsViews=[],o._componentsMap={},o._pendingActions=[],r=r||{},Ct(i)&&(i=tQ[i]),o._dom=e;var a="canvas",s="auto",l=!1;r.ssr&&mct(function(c){var f=Vt(c),g=f.dataIndex;if(g!=null){var p=Pt();return p.set("series_index",f.seriesIndex),p.set("data_index",g),f.ssrType&&p.set("ssr_type",f.ssrType),p}});var h=o._zr=a5(e,{renderer:r.renderer||a,devicePixelRatio:r.devicePixelRatio,width:r.width,height:r.height,ssr:r.ssr,useDirtyRect:Yt(r.useDirtyRect,l),useCoarsePointer:Yt(r.useCoarsePointer,s),pointerSize:r.pointerSize});o._ssr=r.ssr,o._throttledZrFlush=lz(xt(h.flush,h),17),i=zt(i),i&&oJ(i,!0),o._theme=i,o._locale=Wgt(r.locale||DZ),o._coordSysMgr=new l_;var u=o._api=QW(o);function d(c,f){return c.__prio-f.__prio}return hw(Cx,d),hw(XE,d),o._scheduler=new BJ(o,u,XE,Cx),o._messageCenter=new KJ,o._initEvents(),o.resize=xt(o.resize,o),h.animation.on("frame",o._onframe,o),KW(h,o),ZW(h,o),Jw(o),o}return t.prototype._onframe=function(){if(!this._disposed){t4(this);var e=this._scheduler;if(this[po]){var i=this[po].silent;this[Pr]=!0;try{bg(this),nu.update.call(this,null,this[po].updateParams)}catch(l){throw this[Pr]=!1,this[po]=null,l}this._zr.flush(),this[Pr]=!1,this[po]=null,Mm.call(this,i),Rm.call(this,i)}else if(e.unfinished){var r=hmt,o=this._model,a=this._api;e.unfinished=!1;do{var s=+new Date;e.performSeriesTasks(o),e.performDataProcessorTasks(o),nP(this,o),e.performVisualTasks(o),AC(this,this._model,a,"remain",{}),r-=+new Date-s}while(r>0&&e.unfinished);e.unfinished||this._zr.flush()}}},t.prototype.getDom=function(){return this._dom},t.prototype.getId=function(){return this.id},t.prototype.getZr=function(){return this._zr},t.prototype.isSSR=function(){return this._ssr},t.prototype.setOption=function(e,i,r){if(!this[Pr]){if(this._disposed){this.id;return}var o,a,s;if(Ht(i)&&(r=i.lazyUpdate,o=i.silent,a=i.replaceMerge,s=i.transition,i=i.notMerge),this[Pr]=!0,!this._model||i){var l=new cpt(this._api),h=this._theme,u=this._model=new nz;u.scheduler=this._scheduler,u.ssr=this._ssr,u.init(null,null,null,h,this._locale,l)}this._model.setOption(e,{replaceMerge:a},qE);var d={seriesTransition:s,optionChanged:!0};if(r)this[po]={silent:o,updateParams:d},this[Pr]=!1,this.getZr().wakeUp();else{try{bg(this),nu.update.call(this,null,d)}catch(c){throw this[po]=null,this[Pr]=!1,c}this._ssr||this._zr.flush(),this[po]=null,this[Pr]=!1,Mm.call(this,o),Rm.call(this,o)}}},t.prototype.setTheme=function(){},t.prototype.getModel=function(){return this._model},t.prototype.getOption=function(){return this._model&&this._model.getOption()},t.prototype.getWidth=function(){return this._zr.getWidth()},t.prototype.getHeight=function(){return this._zr.getHeight()},t.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||ce.hasGlobalWindow&&window.devicePixelRatio||1},t.prototype.getRenderedCanvas=function(e){return this.renderToCanvas(e)},t.prototype.renderToCanvas=function(e){e=e||{};var i=this._zr.painter;return i.getRenderedCanvas({backgroundColor:e.backgroundColor||this._model.get("backgroundColor"),pixelRatio:e.pixelRatio||this.getDevicePixelRatio()})},t.prototype.renderToSVGString=function(e){e=e||{};var i=this._zr.painter;return i.renderToString({useViewBox:e.useViewBox})},t.prototype.getSvgDataURL=function(){if(ce.svgSupported){var e=this._zr,i=e.storage.getDisplayList();return z(i,function(r){r.stopAnimation(null,!0)}),e.painter.toDataURL()}},t.prototype.getDataURL=function(e){if(this._disposed){this.id;return}e=e||{};var i=e.excludeComponents,r=this._model,o=[],a=this;z(i,function(l){r.eachComponent({mainType:l},function(h){var u=a._componentsMap[h.__viewId];u.group.ignore||(o.push(u),u.group.ignore=!0)})});var s=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(e).toDataURL("image/"+(e&&e.type||"png"));return z(o,function(l){l.group.ignore=!1}),s},t.prototype.getConnectedDataURL=function(e){if(this._disposed){this.id;return}var i=e.type==="svg",r=this.group,o=Math.min,a=Math.max,s=1/0;if(e4[r]){var l=s,h=s,u=-s,d=-s,c=[],f=e&&e.pixelRatio||this.getDevicePixelRatio();z(Q0,function(b,_){if(b.group===r){var w=i?b.getZr().painter.getSvgDom().innerHTML:b.renderToCanvas(zt(e)),C=b.getDom().getBoundingClientRect();l=o(C.left,l),h=o(C.top,h),u=a(C.right,u),d=a(C.bottom,d),c.push({dom:w,left:C.left,top:C.top})}}),l*=f,h*=f,u*=f,d*=f;var g=u-l,p=d-h,v=Ju.createCanvas(),m=a5(v,{renderer:i?"svg":"canvas"});if(m.resize({width:g,height:p}),i){var y="";return z(c,function(b){var _=b.left-l,w=b.top-h;y+='<g transform="translate('+_+","+w+')">'+b.dom+"</g>"}),m.painter.getSvgRoot().innerHTML=y,e.connectedBackgroundColor&&m.painter.setBackgroundColor(e.connectedBackgroundColor),m.refreshImmediately(),m.painter.toDataURL()}else return e.connectedBackgroundColor&&m.add(new Ae({shape:{x:0,y:0,width:g,height:p},style:{fill:e.connectedBackgroundColor}})),z(c,function(b){var _=new hr({style:{x:b.left*f-l,y:b.top*f-h,image:b.dom}});m.add(_)}),m.refreshImmediately(),v.toDataURL("image/"+(e&&e.type||"png"))}else return this.getDataURL(e)},t.prototype.convertToPixel=function(e,i){return iP(this,"convertToPixel",e,i)},t.prototype.convertFromPixel=function(e,i){return iP(this,"convertFromPixel",e,i)},t.prototype.containPixel=function(e,i){if(this._disposed){this.id;return}var r=this._model,o,a=U0(r,e);return z(a,function(s,l){l.indexOf("Models")>=0&&z(s,function(h){var u=h.coordinateSystem;if(u&&u.containPoint)o=o||!!u.containPoint(i);else if(l==="seriesModels"){var d=this._chartsMap[h.__viewId];d&&d.containPoint&&(o=o||d.containPoint(i,h))}},this)},this),!!o},t.prototype.getVisual=function(e,i){var r=this._model,o=U0(r,e,{defaultMainType:"series"}),a=o.seriesModel,s=a.getData(),l=o.hasOwnProperty("dataIndexInside")?o.dataIndexInside:o.hasOwnProperty("dataIndex")?s.indexOfRawIndex(o.dataIndex):null;return l!=null?hz(s,l,i):h_(s,i)},t.prototype.getViewOfComponentModel=function(e){return this._componentsMap[e.__viewId]},t.prototype.getViewOfSeriesModel=function(e){return this._chartsMap[e.__viewId]},t.prototype._initEvents=function(){var e=this;z(xmt,function(i){var r=function(o){var a=e.getModel(),s=o.target,l,h=i==="globalout";if(h?l={}:s&&Hc(s,function(g){var p=Vt(g);if(p&&p.dataIndex!=null){var v=p.dataModel||a.getSeriesByIndex(p.seriesIndex);return l=v&&v.getDataParams(p.dataIndex,p.dataType,s)||{},!0}else if(p.eventData)return l=ht({},p.eventData),!0},!0),l){var u=l.componentType,d=l.componentIndex;(u==="markLine"||u==="markPoint"||u==="markArea")&&(u="series",d=l.seriesIndex);var c=u&&d!=null&&a.getComponent(u,d),f=c&&e[c.mainType==="series"?"_chartsMap":"_componentsMap"][c.__viewId];l.event=o,l.type=i,e._$eventProcessor.eventInfo={targetEl:s,packedEvent:l,model:c,view:f},e.trigger(i,l)}};r.zrEventfulCallAtLast=!0,e._zr.on(i,r,e)}),z(J0,function(i,r){e._messageCenter.on(r,function(o){this.trigger(r,o)},e)}),z(["selectchanged"],function(i){e._messageCenter.on(i,function(r){this.trigger(i,r)},e)}),Evt(this._messageCenter,this,this._api)},t.prototype.isDisposed=function(){return this._disposed},t.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},t.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var e=this.getDom();e&&UK(this.getDom(),fz,"");var i=this,r=i._api,o=i._model;z(i._componentsViews,function(a){a.dispose(o,r)}),z(i._chartsViews,function(a){a.dispose(o,r)}),i._zr.dispose(),i._dom=i._model=i._chartsMap=i._componentsMap=i._chartsViews=i._componentsViews=i._scheduler=i._api=i._zr=i._throttledZrFlush=i._theme=i._coordSysMgr=i._messageCenter=null,delete Q0[i.id]},t.prototype.resize=function(e){if(!this[Pr]){if(this._disposed){this.id;return}this._zr.resize(e);var i=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!i){var r=i.resetOption("media"),o=e&&e.silent;this[po]&&(o==null&&(o=this[po].silent),r=!0,this[po]=null),this[Pr]=!0;try{r&&bg(this),nu.update.call(this,{type:"resize",animation:ht({duration:0},e&&e.animation)})}catch(a){throw this[Pr]=!1,a}this[Pr]=!1,Mm.call(this,o),Rm.call(this,o)}}},t.prototype.showLoading=function(e,i){if(this._disposed){this.id;return}if(Ht(e)&&(i=e,e=""),e=e||"default",this.hideLoading(),!!KE[e]){var r=KE[e](this._api,i),o=this._zr;this._loadingFX=r,o.add(r)}},t.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},t.prototype.makeActionFromEvent=function(e){var i=ht({},e);return i.type=J0[e.type],i},t.prototype.dispatchAction=function(e,i){if(this._disposed){this.id;return}if(Ht(i)||(i={silent:!!i}),!!_x[e.type]&&this._model){if(this[Pr]){this._pendingActions.push(e);return}var r=i.silent;rP.call(this,e,r);var o=i.flush;o?this._zr.flush():o!==!1&&ce.browser.weChat&&this._throttledZrFlush(),Mm.call(this,r),Rm.call(this,r)}},t.prototype.updateLabelLayout=function(){rs.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},t.prototype.appendData=function(e){if(this._disposed){this.id;return}var i=e.seriesIndex,r=this.getModel(),o=r.getSeriesByIndex(i);o.appendData(e),this._scheduler.unfinished=!0,this.getZr().wakeUp()},t.internalField=(function(){bg=function(d){var c=d._scheduler;c.restorePipelines(d._model),c.prepareStageTasks(),eP(d,!0),eP(d,!1),c.plan()},eP=function(d,c){for(var f=d._model,g=d._scheduler,p=c?d._componentsViews:d._chartsViews,v=c?d._componentsMap:d._chartsMap,m=d._zr,y=d._api,b=0;b<p.length;b++)p[b].__alive=!1;c?f.eachComponent(function(C,x){C!=="series"&&_(x)}):f.eachSeries(_);function _(C){var x=C.__requireNewView;C.__requireNewView=!1;var S="_ec_"+C.id+"_"+C.type,A=!x&&v[S];if(!A){var T=hl(C.type),M=c?Di.getClass(T.main,T.sub):hi.getClass(T.sub);A=new M,A.init(f,y),v[S]=A,p.push(A),m.add(A.group)}C.__viewId=A.__id=S,A.__alive=!0,A.__model=C,A.group.__ecComponentInfo={mainType:C.mainType,index:C.componentIndex},!c&&g.prepareView(A,C,f,y)}for(var b=0;b<p.length;){var w=p[b];w.__alive?b++:(!c&&w.renderTask.dispose(),m.remove(w.group),w.dispose(f,y),p.splice(b,1),v[w.__id]===w&&delete v[w.__id],w.__id=w.group.__ecComponentInfo=null)}},SC=function(d,c,f,g,p){var v=d._model;if(v.setUpdatePayload(f),!g){z([].concat(d._componentsViews).concat(d._chartsViews),w);return}var m={};m[g+"Id"]=f[g+"Id"],m[g+"Index"]=f[g+"Index"],m[g+"Name"]=f[g+"Name"];var y={mainType:g,query:m};p&&(y.subType=p);var b=f.excludeSeriesId,_;b!=null&&(_=Pt(),z(li(b),function(C){var x=Fn(C,null);x!=null&&_.set(x,!0)})),v&&v.eachComponent(y,function(C){var x=_&&_.get(C.id)!=null;if(!x)if(O5(f))if(C instanceof Ci)f.type===of&&!f.notBlur&&!C.get(["emphasis","disabled"])&&Nft(C,f,d._api);else{var S=VH(C.mainType,C.componentIndex,f.name,d._api),A=S.focusSelf,T=S.dispatchers;f.type===of&&A&&!f.notBlur&&BE(C.mainType,C.componentIndex,d._api),T&&z(T,function(M){f.type===of?Lh(M):Eh(M)})}else LE(f)&&C instanceof Ci&&(Gft(C,f,d._api),D5(C),oa(d))},d),v&&v.eachComponent(y,function(C){var x=_&&_.get(C.id)!=null;x||w(d[g==="series"?"_chartsMap":"_componentsMap"][C.__viewId])},d);function w(C){C&&C.__alive&&C[c]&&C[c](C.__model,v,d._api,f)}},nu={prepareAndUpdate:function(d){bg(this),nu.update.call(this,d,{optionChanged:d.newOption!=null})},update:function(d,c){var f=this._model,g=this._api,p=this._zr,v=this._coordSysMgr,m=this._scheduler;if(f){f.setUpdatePayload(d),m.restoreData(f,d),m.performSeriesTasks(f),v.create(f,g),m.performDataProcessorTasks(f,d),nP(this,f),v.update(f,g),e(f),m.performVisualTasks(f,d),oP(this,f,g,d,c);var y=f.get("backgroundColor")||"transparent",b=f.get("darkMode");p.setBackgroundColor(y),b!=null&&b!=="auto"&&p.setDarkMode(b),rs.trigger("afterupdate",f,g)}},updateTransform:function(d){var c=this,f=this._model,g=this._api;if(f){f.setUpdatePayload(d);var p=[];f.eachComponent(function(m,y){if(m!=="series"){var b=c.getViewOfComponentModel(y);if(b&&b.__alive)if(b.updateTransform){var _=b.updateTransform(y,f,g,d);_&&_.update&&p.push(b)}else p.push(b)}});var v=Pt();f.eachSeries(function(m){var y=c._chartsMap[m.__viewId];if(y.updateTransform){var b=y.updateTransform(m,f,g,d);b&&b.update&&v.set(m.uid,1)}else v.set(m.uid,1)}),e(f),this._scheduler.performVisualTasks(f,d,{setDirty:!0,dirtyMap:v}),AC(this,f,g,d,{},v),rs.trigger("afterupdate",f,g)}},updateView:function(d){var c=this._model;c&&(c.setUpdatePayload(d),hi.markUpdateMethod(d,"updateView"),e(c),this._scheduler.performVisualTasks(c,d,{setDirty:!0}),oP(this,c,this._api,d,{}),rs.trigger("afterupdate",c,this._api))},updateVisual:function(d){var c=this,f=this._model;f&&(f.setUpdatePayload(d),f.eachSeries(function(g){g.getData().clearAllVisual()}),hi.markUpdateMethod(d,"updateVisual"),e(f),this._scheduler.performVisualTasks(f,d,{visualType:"visual",setDirty:!0}),f.eachComponent(function(g,p){if(g!=="series"){var v=c.getViewOfComponentModel(p);v&&v.__alive&&v.updateVisual(p,f,c._api,d)}}),f.eachSeries(function(g){var p=c._chartsMap[g.__viewId];p.updateVisual(g,f,c._api,d)}),rs.trigger("afterupdate",f,this._api))},updateLayout:function(d){nu.update.call(this,d)}},iP=function(d,c,f,g){if(d._disposed){d.id;return}for(var p=d._model,v=d._coordSysMgr.getCoordinateSystems(),m,y=U0(p,f),b=0;b<v.length;b++){var _=v[b];if(_[c]&&(m=_[c](p,y,g))!=null)return m}},nP=function(d,c){var f=d._chartsMap,g=d._scheduler;c.eachSeries(function(p){g.updateStreamModes(p,f[p.__viewId])})},rP=function(d,c){var f=this,g=this.getModel(),p=d.type,v=d.escapeConnect,m=_x[p],y=m.actionInfo,b=(y.update||"update").split(":"),_=b.pop(),w=b[0]!=null&&hl(b[0]);this[Pr]=!0;var C=[d],x=!1;d.batch&&(x=!0,C=ct(d.batch,function(B){return B=Ot(ht({},B),d),B.batch=null,B}));var S=[],A,T=LE(d),M=O5(d);if(M&&fZ(this._api),z(C,function(B){if(A=m.action(B,f._model,f._api),A=A||ht({},B),A.type=y.event||A.type,S.push(A),M){var P=DH(d),k=P.queryOptionMap,E=P.mainTypeSpecified,D=E?k.keys()[0]:"series";SC(f,_,B,D),oa(f)}else T?(SC(f,_,B,"series"),oa(f)):w&&SC(f,_,B,w.main,w.sub)}),_!=="none"&&!M&&!T&&!w)try{this[po]?(bg(this),nu.update.call(this,d),this[po]=null):nu[_].call(this,d)}catch(B){throw this[Pr]=!1,B}if(x?A={type:y.event||p,escapeConnect:v,batch:S}:A=S[0],this[Pr]=!1,!c){var R=this._messageCenter;if(R.trigger(A.type,A),T){var L={type:"selectchanged",escapeConnect:v,selected:$ft(g),isFromClick:d.isFromClick||!1,fromAction:d.type,fromActionPayload:d};R.trigger(L.type,L)}}},Mm=function(d){for(var c=this._pendingActions;c.length;){var f=c.shift();rP.call(this,f,d)}},Rm=function(d){!d&&this.trigger("updated")},KW=function(d,c){d.on("rendered",function(f){c.trigger("rendered",f),d.animation.isFinished()&&!c[po]&&!c._scheduler.unfinished&&!c._pendingActions.length&&c.trigger("finished")})},ZW=function(d,c){d.on("mouseover",function(f){var g=f.target,p=Hc(g,zy);p&&(Wft(p,f,c._api),oa(c))}).on("mouseout",function(f){var g=f.target,p=Hc(g,zy);p&&(Vft(p,f,c._api),oa(c))}).on("click",function(f){var g=f.target,p=Hc(g,function(y){return Vt(y).dataIndex!=null},!0);if(p){var v=p.selected?"unselect":"select",m=Vt(p);c._api.dispatchAction({type:v,dataType:m.dataType,dataIndexInside:m.dataIndex,seriesIndex:m.seriesIndex,isFromClick:!0})}})};function e(d){d.clearColorPalette(),d.eachSeries(function(c){c.clearColorPalette()})}function i(d){var c=[],f=[],g=!1;if(d.eachComponent(function(y,b){var _=b.get("zlevel")||0,w=b.get("z")||0,C=b.getZLevelKey();g=g||!!C,(y==="series"?f:c).push({zlevel:_,z:w,idx:b.componentIndex,type:y,key:C})}),g){var p=c.concat(f),v,m;hw(p,function(y,b){return y.zlevel===b.zlevel?y.z-b.z:y.zlevel-b.zlevel}),z(p,function(y){var b=d.getComponent(y.type,y.idx),_=y.zlevel,w=y.key;v!=null&&(_=Math.max(v,_)),w?(_===v&&w!==m&&_++,m=w):m&&(_===v&&_++,m=""),v=_,b.setZLevel(_)})}}oP=function(d,c,f,g,p){i(c),JW(d,c,f,g,p),z(d._chartsViews,function(v){v.__alive=!1}),AC(d,c,f,g,p),z(d._chartsViews,function(v){v.__alive||v.remove(c,f)})},JW=function(d,c,f,g,p,v){z(v||d._componentsViews,function(m){var y=m.__model;h(y,m),m.render(y,c,f,g),s(y,m),u(y,m)})},AC=function(d,c,f,g,p,v){var m=d._scheduler;p=ht(p||{},{updatedSeries:c.getSeries()}),rs.trigger("series:beforeupdate",c,f,p);var y=!1;c.eachSeries(function(b){var _=d._chartsMap[b.__viewId];_.__alive=!0;var w=_.renderTask;m.updatePayload(w,g),h(b,_),v&&v.get(b.uid)&&w.dirty(),w.perform(m.getPerformArgs(w))&&(y=!0),_.group.silent=!!b.get("silent"),a(b,_),D5(b)}),m.unfinished=y||m.unfinished,rs.trigger("series:layoutlabels",c,f,p),rs.trigger("series:transition",c,f,p),c.eachSeries(function(b){var _=d._chartsMap[b.__viewId];s(b,_),u(b,_)}),o(d,c),rs.trigger("series:afterupdate",c,f,p)},oa=function(d){d[QR]=!0,d.getZr().wakeUp()},t4=function(d){d[QR]&&(d.getZr().storage.traverse(function(c){gp(c)||r(c)}),d[QR]=!1)};function r(d){for(var c=[],f=d.currentStates,g=0;g<f.length;g++){var p=f[g];p==="emphasis"||p==="blur"||p==="select"||c.push(p)}d.selected&&d.states.select&&c.push("select"),d.hoverState===VT&&d.states.emphasis?c.push("emphasis"):d.hoverState===i_&&d.states.blur&&c.push("blur"),d.useStates(c)}function o(d,c){var f=d._zr,g=f.storage,p=0;g.traverse(function(v){v.isGroup||p++}),p>c.get("hoverLayerThreshold")&&!ce.node&&!ce.worker&&c.eachSeries(function(v){if(!v.preventUsingHoverLayer){var m=d._chartsMap[v.__viewId];m.__alive&&m.eachRendered(function(y){y.states.emphasis&&(y.states.emphasis.hoverLayer=!0)})}})}function a(d,c){var f=d.get("blendMode")||null;c.eachRendered(function(g){g.isGroup||(g.style.blend=f)})}function s(d,c){if(!d.preventAutoZ){var f=d.get("z")||0,g=d.get("zlevel")||0;c.eachRendered(function(p){return l(p,f,g,-1/0),!0})}}function l(d,c,f,g){var p=d.getTextContent(),v=d.getTextGuideLine(),m=d.isGroup;if(m)for(var y=d.childrenRef(),b=0;b<y.length;b++)g=Math.max(l(y[b],c,f,g),g);else d.z=c,d.zlevel=f,g=Math.max(d.z2,g);if(p&&(p.z=c,p.zlevel=f,isFinite(g)&&(p.z2=g+2)),v){var _=d.textGuideLineConfig;v.z=c,v.zlevel=f,isFinite(g)&&(v.z2=g+(_&&_.showAbove?1:-1))}return g}function h(d,c){c.eachRendered(function(f){if(!gp(f)){var g=f.getTextContent(),p=f.getTextGuideLine();f.stateTransition&&(f.stateTransition=null),g&&g.stateTransition&&(g.stateTransition=null),p&&p.stateTransition&&(p.stateTransition=null),f.hasState()?(f.prevStates=f.currentStates,f.clearStates()):f.prevStates&&(f.prevStates=null)}})}function u(d,c){var f=d.getModel("stateAnimation"),g=d.isAnimationEnabled(),p=f.get("duration"),v=p>0?{duration:p,delay:f.get("delay"),easing:f.get("easing")}:null;c.eachRendered(function(m){if(m.states&&m.states.emphasis){if(gp(m))return;if(m instanceof ue&&qft(m),m.__dirty){var y=m.prevStates;y&&m.useStates(y)}if(g){m.stateTransition=v;var b=m.getTextContent(),_=m.getTextGuideLine();b&&(b.stateTransition=v),_&&(_.stateTransition=v)}m.__dirty&&r(m)}})}QW=function(d){return new((function(c){et(f,c);function f(){return c!==null&&c.apply(this,arguments)||this}return f.prototype.getCoordinateSystems=function(){return d._coordSysMgr.getCoordinateSystems()},f.prototype.getComponentByElement=function(g){for(;g;){var p=g.__ecComponentInfo;if(p!=null)return d._model.getComponent(p.mainType,p.index);g=g.parent}},f.prototype.enterEmphasis=function(g,p){Lh(g,p),oa(d)},f.prototype.leaveEmphasis=function(g,p){Eh(g,p),oa(d)},f.prototype.enterBlur=function(g){hZ(g),oa(d)},f.prototype.leaveBlur=function(g){WH(g),oa(d)},f.prototype.enterSelect=function(g){uZ(g),oa(d)},f.prototype.leaveSelect=function(g){dZ(g),oa(d)},f.prototype.getModel=function(){return d.getModel()},f.prototype.getViewOfComponentModel=function(g){return d.getViewOfComponentModel(g)},f.prototype.getViewOfSeriesModel=function(g){return d.getViewOfSeriesModel(g)},f})(nJ))(d)},JJ=function(d){function c(f,g){for(var p=0;p<f.length;p++){var v=f[p];v[tP]=g}}z(J0,function(f,g){d._messageCenter.on(g,function(p){if(e4[d.group]&&d[tP]!==qW){if(p&&p.escapeConnect)return;var v=d.makeActionFromEvent(p),m=[];z(Q0,function(y){y!==d&&y.group===d.group&&m.push(y)}),c(m,qW),z(m,function(y){y[tP]!==Cmt&&y.dispatchAction(v)}),c(m,wmt)}})})}})(),t})(Ya),cz=QJ.prototype;cz.on=YJ("on");cz.off=YJ("off");cz.one=function(n,t,e){var i=this;function r(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];t&&t.apply&&t.apply(this,o),i.off(n,r)}this.on.call(this,n,r,e)};var xmt=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];var _x={},J0={},XE=[],qE=[],Cx=[],tQ={},KE={},Q0={},e4={},Smt=+new Date-0,fz="_echarts_instance_";function Toe(n,t,e){{var i=Amt(n);if(i)return i}var r=new QJ(n,t,e);return r.id="ec_"+Smt++,Q0[r.id]=r,UK(n,fz,r.id),JJ(r),rs.trigger("afterinit",r),r}function Amt(n){return Q0[Hct(n,fz)]}function eQ(n,t){tQ[n]=t}function iQ(n){ee(qE,n)<0&&qE.push(n)}function nQ(n,t){pz(XE,n,t,fmt)}function Tmt(n){gz("afterinit",n)}function Mmt(n){gz("afterupdate",n)}function gz(n,t){rs.on(n,t)}function kl(n,t,e){Dt(t)&&(e=t,t="");var i=Ht(n)?n.type:[n,n={event:t}][0];n.event=(n.event||i).toLowerCase(),t=n.event,!J0[t]&&(so(XW.test(i)&&XW.test(t)),_x[i]||(_x[i]={action:e,actionInfo:n}),J0[t]=i)}function Rmt(n,t){l_.register(n,t)}function Pmt(n,t){pz(Cx,n,t,$J,"layout")}function Qf(n,t){pz(Cx,n,t,jJ,"visual")}var i4=[];function pz(n,t,e,i,r){if((Dt(t)||Ht(t))&&(e=t,t=i),!(ee(i4,e)>=0)){i4.push(e);var o=BJ.wrapStageHandler(e,r);o.__prio=t,o.__raw=e,n.push(o)}}function rQ(n,t){KE[n]=t}function Bmt(n,t,e){var i=lmt("registerMap");i&&i(n,t,e)}var kmt=$pt;Qf(dz,vvt);Qf(rM,mvt);Qf(rM,yvt);Qf(dz,kvt);Qf(rM,Lvt);Qf(UJ,amt);iQ(oJ);nQ(dmt,Spt);rQ("default",bvt);kl({type:of,event:of,update:of},dn);kl({type:gw,event:gw,update:gw},dn);kl({type:Y0,event:Y0,update:Y0},dn);kl({type:pw,event:pw,update:pw},dn);kl({type:X0,event:X0,update:X0},dn);eQ("light",Pvt);eQ("dark",DJ);function Pm(n){return n==null?0:n.length||1}function n4(n){return n}var Dh=(function(){function n(t,e,i,r,o,a){this._old=t,this._new=e,this._oldKeyGetter=i||n4,this._newKeyGetter=r||n4,this.context=o,this._diffModeMultiple=a==="multiple"}return n.prototype.add=function(t){return this._add=t,this},n.prototype.update=function(t){return this._update=t,this},n.prototype.updateManyToOne=function(t){return this._updateManyToOne=t,this},n.prototype.updateOneToMany=function(t){return this._updateOneToMany=t,this},n.prototype.updateManyToMany=function(t){return this._updateManyToMany=t,this},n.prototype.remove=function(t){return this._remove=t,this},n.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},n.prototype._executeOneToOne=function(){var t=this._old,e=this._new,i={},r=new Array(t.length),o=new Array(e.length);this._initIndexMap(t,null,r,"_oldKeyGetter"),this._initIndexMap(e,i,o,"_newKeyGetter");for(var a=0;a<t.length;a++){var s=r[a],l=i[s],h=Pm(l);if(h>1){var u=l.shift();l.length===1&&(i[s]=l[0]),this._update&&this._update(u,a)}else h===1?(i[s]=null,this._update&&this._update(l,a)):this._remove&&this._remove(a)}this._performRestAdd(o,i)},n.prototype._executeMultiple=function(){var t=this._old,e=this._new,i={},r={},o=[],a=[];this._initIndexMap(t,i,o,"_oldKeyGetter"),this._initIndexMap(e,r,a,"_newKeyGetter");for(var s=0;s<o.length;s++){var l=o[s],h=i[l],u=r[l],d=Pm(h),c=Pm(u);if(d>1&&c===1)this._updateManyToOne&&this._updateManyToOne(u,h),r[l]=null;else if(d===1&&c>1)this._updateOneToMany&&this._updateOneToMany(u,h),r[l]=null;else if(d===1&&c===1)this._update&&this._update(u,h),r[l]=null;else if(d>1&&c>1)this._updateManyToMany&&this._updateManyToMany(u,h),r[l]=null;else if(d>1)for(var f=0;f<d;f++)this._remove&&this._remove(h[f]);else this._remove&&this._remove(h)}this._performRestAdd(a,r)},n.prototype._performRestAdd=function(t,e){for(var i=0;i<t.length;i++){var r=t[i],o=e[r],a=Pm(o);if(a>1)for(var s=0;s<a;s++)this._add&&this._add(o[s]);else a===1&&this._add&&this._add(o);e[r]=null}},n.prototype._initIndexMap=function(t,e,i,r){for(var o=this._diffModeMultiple,a=0;a<t.length;a++){var s="_ec_"+this[r](t[a],a);if(o||(i[a]=s),!!e){var l=e[s],h=Pm(l);h===0?(e[s]=a,o&&i.push(s)):h===1?e[s]=[l,a]:l.push(a)}}},n})(),Lmt=(function(){function n(t,e){this._encode=t,this._schema=e}return n.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},n.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},n})();function Emt(n,t){var e={},i=e.encode={},r=Pt(),o=[],a=[],s={};z(n.dimensions,function(c){var f=n.getDimensionInfo(c),g=f.coordDim;if(g){var p=f.coordDimIndex;aP(i,g)[p]=c,f.isExtraCoord||(r.set(g,1),Dmt(f.type)&&(o[0]=c),aP(s,g)[p]=n.getDimensionIndex(f.name)),f.defaultTooltip&&a.push(c)}KZ.each(function(v,m){var y=aP(i,m),b=f.otherDims[m];b!=null&&b!==!1&&(y[b]=f.name)})});var l=[],h={};r.each(function(c,f){var g=i[f];h[f]=g[0],l=l.concat(g)}),e.dataDimsOnCoord=l,e.dataDimIndicesOnCoord=ct(l,function(c){return n.getDimensionInfo(c).storeDimIndex}),e.encodeFirstDimNotExtra=h;var u=i.label;u&&u.length&&(o=u.slice());var d=i.tooltip;return d&&d.length?a=d.slice():a.length||(a=o.slice()),i.defaultedLabel=o,i.defaultedTooltip=a,e.userOutput=new Lmt(s,t),e}function aP(n,t){return n.hasOwnProperty(t)||(n[t]=[]),n[t]}function xx(n){return n==="category"?"ordinal":n==="time"?"time":"float"}function Dmt(n){return!(n==="ordinal"||n==="time")}var _w=(function(){function n(t){this.otherDims={},t!=null&&ht(this,t)}return n})(),Imt=Te(),Omt={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},oQ=(function(){function n(t){this.dimensions=t.dimensions,this._dimOmitted=t.dimensionOmitted,this.source=t.source,this._fullDimCount=t.fullDimensionCount,this._updateDimOmitted(t.dimensionOmitted)}return n.prototype.isDimensionOmitted=function(){return this._dimOmitted},n.prototype._updateDimOmitted=function(t){this._dimOmitted=t,t&&(this._dimNameMap||(this._dimNameMap=lQ(this.source)))},n.prototype.getSourceDimensionIndex=function(t){return Yt(this._dimNameMap.get(t),-1)},n.prototype.getSourceDimension=function(t){var e=this.source.dimensionsDefine;if(e)return e[t]},n.prototype.makeStoreSchema=function(){for(var t=this._fullDimCount,e=sJ(this.source),i=!hQ(t),r="",o=[],a=0,s=0;a<t;a++){var l=void 0,h=void 0,u=void 0,d=this.dimensions[s];if(d&&d.storeDimIndex===a)l=e?d.name:null,h=d.type,u=d.ordinalMeta,s++;else{var c=this.getSourceDimension(a);c&&(l=e?c.name:null,h=c.type)}o.push({property:l,type:h,ordinalMeta:u}),e&&l!=null&&(!d||!d.isCalculationCoord)&&(r+=i?l.replace(/\`/g,"`1").replace(/\$/g,"`2"):l),r+="$",r+=Omt[h]||"f",u&&(r+=u.uid),r+="$"}var f=this.source,g=[f.seriesLayoutBy,f.startIndex,r].join("$$");return{dimensions:o,hash:g}},n.prototype.makeOutputDimensionNames=function(){for(var t=[],e=0,i=0;e<this._fullDimCount;e++){var r=void 0,o=this.dimensions[i];if(o&&o.storeDimIndex===e)o.isCalculationCoord||(r=o.name),i++;else{var a=this.getSourceDimension(e);a&&(r=a.name)}t.push(r)}return t},n.prototype.appendCalculationDimension=function(t){this.dimensions.push(t),t.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},n})();function aQ(n){return n instanceof oQ}function sQ(n){for(var t=Pt(),e=0;e<(n||[]).length;e++){var i=n[e],r=Ht(i)?i.name:i;r!=null&&t.get(r)==null&&t.set(r,e)}return t}function lQ(n){var t=Imt(n);return t.dimNameMap||(t.dimNameMap=sQ(n.dimensionsDefine))}function hQ(n){return n>30}var Bm=Ht,ru=ct,Hmt=typeof Int32Array>"u"?Array:Int32Array,zmt="e\0\0",r4=-1,Fmt=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],Nmt=["_approximateExtent"],o4,TC,km,Lm,sP,Em,lP,oo=(function(){function n(t,e){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","minmaxDownSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","minmaxDownSample","lttbDownSample"];var i,r=!1;aQ(t)?(i=t.dimensions,this._dimOmitted=t.isDimensionOmitted(),this._schema=t):(r=!0,i=t),i=i||["x","y"];for(var o={},a=[],s={},l=!1,h={},u=0;u<i.length;u++){var d=i[u],c=Ct(d)?new _w({name:d}):d instanceof _w?d:new _w(d),f=c.name;c.type=c.type||"float",c.coordDim||(c.coordDim=f,c.coordDimIndex=0);var g=c.otherDims=c.otherDims||{};a.push(f),o[f]=c,h[f]!=null&&(l=!0),c.createInvertedIndices&&(s[f]=[]),g.itemName===0&&(this._nameDimIdx=u),g.itemId===0&&(this._idDimIdx=u),r&&(c.storeDimIndex=u)}if(this.dimensions=a,this._dimInfos=o,this._initGetDimensionInfo(l),this.hostModel=e,this._invertedIndicesMap=s,this._dimOmitted){var p=this._dimIdxToName=Pt();z(a,function(v){p.set(o[v].storeDimIndex,v)})}}return n.prototype.getDimension=function(t){var e=this._recognizeDimIndex(t);if(e==null)return t;if(e=t,!this._dimOmitted)return this.dimensions[e];var i=this._dimIdxToName.get(e);if(i!=null)return i;var r=this._schema.getSourceDimension(e);if(r)return r.name},n.prototype.getDimensionIndex=function(t){var e=this._recognizeDimIndex(t);if(e!=null)return e;if(t==null)return-1;var i=this._getDimInfo(t);return i?i.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(t):-1},n.prototype._recognizeDimIndex=function(t){if(Le(t)||t!=null&&!isNaN(t)&&!this._getDimInfo(t)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(t)<0))return+t},n.prototype._getStoreDimIndex=function(t){var e=this.getDimensionIndex(t);return e},n.prototype.getDimensionInfo=function(t){return this._getDimInfo(this.getDimension(t))},n.prototype._initGetDimensionInfo=function(t){var e=this._dimInfos;this._getDimInfo=t?function(i){return e.hasOwnProperty(i)?e[i]:void 0}:function(i){return e[i]}},n.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},n.prototype.mapDimension=function(t,e){var i=this._dimSummary;if(e==null)return i.encodeFirstDimNotExtra[t];var r=i.encode[t];return r?r[e]:null},n.prototype.mapDimensionsAll=function(t){var e=this._dimSummary,i=e.encode[t];return(i||[]).slice()},n.prototype.getStore=function(){return this._store},n.prototype.initData=function(t,e,i){var r=this,o;if(t instanceof WE&&(o=t),!o){var a=this.dimensions,s=rz(t)||Wr(t)?new lJ(t,a.length):t;o=new WE;var l=ru(a,function(h){return{type:r._dimInfos[h].type,property:h}});o.initData(s,l,i)}this._store=o,this._nameList=(e||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,o.count()),this._dimSummary=Emt(this,this._schema),this.userOutput=this._dimSummary.userOutput},n.prototype.appendData=function(t){var e=this._store.appendData(t);this._doInit(e[0],e[1])},n.prototype.appendValues=function(t,e){var i=this._store.appendValues(t,e&&e.length),r=i.start,o=i.end,a=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),e)for(var s=r;s<o;s++){var l=s-r;this._nameList[s]=e[l],a&&lP(this,s)}},n.prototype._updateOrdinalMeta=function(){for(var t=this._store,e=this.dimensions,i=0;i<e.length;i++){var r=this._dimInfos[e[i]];r.ordinalMeta&&t.collectOrdinalMeta(r.storeDimIndex,r.ordinalMeta)}},n.prototype._shouldMakeIdFromName=function(){var t=this._store.getProvider();return this._idDimIdx==null&&t.getSource().sourceFormat!==ju&&!t.fillStorage},n.prototype._doInit=function(t,e){if(!(t>=e)){var i=this._store,r=i.getProvider();this._updateOrdinalMeta();var o=this._nameList,a=this._idList,s=r.getSource().sourceFormat,l=s===Xa;if(l&&!r.pure)for(var h=[],u=t;u<e;u++){var d=r.getItem(u,h);if(!this.hasItemOption&&Sct(d)&&(this.hasItemOption=!0),d){var c=d.name;o[u]==null&&c!=null&&(o[u]=Fn(c,null));var f=d.id;a[u]==null&&f!=null&&(a[u]=Fn(f,null))}}if(this._shouldMakeIdFromName())for(var u=t;u<e;u++)lP(this,u);o4(this)}},n.prototype.getApproximateExtent=function(t){return this._approximateExtent[t]||this._store.getDataExtent(this._getStoreDimIndex(t))},n.prototype.setApproximateExtent=function(t,e){e=this.getDimension(e),this._approximateExtent[e]=t.slice()},n.prototype.getCalculationInfo=function(t){return this._calculationInfo[t]},n.prototype.setCalculationInfo=function(t,e){Bm(t)?ht(this._calculationInfo,t):this._calculationInfo[t]=e},n.prototype.getName=function(t){var e=this.getRawIndex(t),i=this._nameList[e];return i==null&&this._nameDimIdx!=null&&(i=km(this,this._nameDimIdx,e)),i==null&&(i=""),i},n.prototype._getCategory=function(t,e){var i=this._store.get(t,e),r=this._store.getOrdinalMeta(t);return r?r.categories[i]:i},n.prototype.getId=function(t){return TC(this,this.getRawIndex(t))},n.prototype.count=function(){return this._store.count()},n.prototype.get=function(t,e){var i=this._store,r=this._dimInfos[t];if(r)return i.get(r.storeDimIndex,e)},n.prototype.getByRawIndex=function(t,e){var i=this._store,r=this._dimInfos[t];if(r)return i.getByRawIndex(r.storeDimIndex,e)},n.prototype.getIndices=function(){return this._store.getIndices()},n.prototype.getDataExtent=function(t){return this._store.getDataExtent(this._getStoreDimIndex(t))},n.prototype.getSum=function(t){return this._store.getSum(this._getStoreDimIndex(t))},n.prototype.getMedian=function(t){return this._store.getMedian(this._getStoreDimIndex(t))},n.prototype.getValues=function(t,e){var i=this,r=this._store;return ut(t)?r.getValues(ru(t,function(o){return i._getStoreDimIndex(o)}),e):r.getValues(t)},n.prototype.hasValue=function(t){for(var e=this._dimSummary.dataDimIndicesOnCoord,i=0,r=e.length;i<r;i++)if(isNaN(this._store.get(e[i],t)))return!1;return!0},n.prototype.indexOfName=function(t){for(var e=0,i=this._store.count();e<i;e++)if(this.getName(e)===t)return e;return-1},n.prototype.getRawIndex=function(t){return this._store.getRawIndex(t)},n.prototype.indexOfRawIndex=function(t){return this._store.indexOfRawIndex(t)},n.prototype.rawIndexOf=function(t,e){var i=t&&this._invertedIndicesMap[t],r=i&&i[e];return r==null||isNaN(r)?r4:r},n.prototype.indicesOfNearest=function(t,e,i){return this._store.indicesOfNearest(this._getStoreDimIndex(t),e,i)},n.prototype.each=function(t,e,i){Dt(t)&&(i=e,e=t,t=[]);var r=i||this,o=ru(Lm(t),this._getStoreDimIndex,this);this._store.each(o,r?xt(e,r):e)},n.prototype.filterSelf=function(t,e,i){Dt(t)&&(i=e,e=t,t=[]);var r=i||this,o=ru(Lm(t),this._getStoreDimIndex,this);return this._store=this._store.filter(o,r?xt(e,r):e),this},n.prototype.selectRange=function(t){var e=this,i={},r=pe(t);return z(r,function(o){var a=e._getStoreDimIndex(o);i[a]=t[o]}),this._store=this._store.selectRange(i),this},n.prototype.mapArray=function(t,e,i){Dt(t)&&(i=e,e=t,t=[]),i=i||this;var r=[];return this.each(t,function(){r.push(e&&e.apply(this,arguments))},i),r},n.prototype.map=function(t,e,i,r){var o=i||r||this,a=ru(Lm(t),this._getStoreDimIndex,this),s=Em(this);return s._store=this._store.map(a,o?xt(e,o):e),s},n.prototype.modify=function(t,e,i,r){var o=i||r||this,a=ru(Lm(t),this._getStoreDimIndex,this);this._store.modify(a,o?xt(e,o):e)},n.prototype.downSample=function(t,e,i,r){var o=Em(this);return o._store=this._store.downSample(this._getStoreDimIndex(t),e,i,r),o},n.prototype.minmaxDownSample=function(t,e){var i=Em(this);return i._store=this._store.minmaxDownSample(this._getStoreDimIndex(t),e),i},n.prototype.lttbDownSample=function(t,e){var i=Em(this);return i._store=this._store.lttbDownSample(this._getStoreDimIndex(t),e),i},n.prototype.getRawDataItem=function(t){return this._store.getRawDataItem(t)},n.prototype.getItemModel=function(t){var e=this.hostModel,i=this.getRawDataItem(t);return new Ze(i,e,e&&e.ecModel)},n.prototype.diff=function(t){var e=this;return new Dh(t?t.getStore().getIndices():[],this.getStore().getIndices(),function(i){return TC(t,i)},function(i){return TC(e,i)})},n.prototype.getVisual=function(t){var e=this._visual;return e&&e[t]},n.prototype.setVisual=function(t,e){this._visual=this._visual||{},Bm(t)?ht(this._visual,t):this._visual[t]=e},n.prototype.getItemVisual=function(t,e){var i=this._itemVisuals[t],r=i&&i[e];return r??this.getVisual(e)},n.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},n.prototype.ensureUniqueItemVisual=function(t,e){var i=this._itemVisuals,r=i[t];r||(r=i[t]={});var o=r[e];return o==null&&(o=this.getVisual(e),ut(o)?o=o.slice():Bm(o)&&(o=ht({},o)),r[e]=o),o},n.prototype.setItemVisual=function(t,e,i){var r=this._itemVisuals[t]||{};this._itemVisuals[t]=r,Bm(e)?ht(r,e):r[e]=i},n.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},n.prototype.setLayout=function(t,e){Bm(t)?ht(this._layout,t):this._layout[t]=e},n.prototype.getLayout=function(t){return this._layout[t]},n.prototype.getItemLayout=function(t){return this._itemLayouts[t]},n.prototype.setItemLayout=function(t,e,i){this._itemLayouts[t]=i?ht(this._itemLayouts[t]||{},e):e},n.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},n.prototype.setItemGraphicEl=function(t,e){var i=this.hostModel&&this.hostModel.seriesIndex;RE(i,this.dataType,t,e),this._graphicEls[t]=e},n.prototype.getItemGraphicEl=function(t){return this._graphicEls[t]},n.prototype.eachItemGraphicEl=function(t,e){z(this._graphicEls,function(i,r){i&&t&&t.call(e,i,r)})},n.prototype.cloneShallow=function(t){return t||(t=new n(this._schema?this._schema:ru(this.dimensions,this._getDimInfo,this),this.hostModel)),sP(t,this),t._store=this._store,t},n.prototype.wrapMethod=function(t,e){var i=this[t];Dt(i)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(t),this[t]=function(){var r=i.apply(this,arguments);return e.apply(this,[r].concat(SH(arguments)))})},n.internalField=(function(){o4=function(t){var e=t._invertedIndicesMap;z(e,function(i,r){var o=t._dimInfos[r],a=o.ordinalMeta,s=t._store;if(a){i=e[r]=new Hmt(a.categories.length);for(var l=0;l<i.length;l++)i[l]=r4;for(var l=0;l<s.count();l++)i[s.get(o.storeDimIndex,l)]=l}})},km=function(t,e,i){return Fn(t._getCategory(e,i),null)},TC=function(t,e){var i=t._idList[e];return i==null&&t._idDimIdx!=null&&(i=km(t,t._idDimIdx,e)),i==null&&(i=zmt+e),i},Lm=function(t){return ut(t)||(t=t!=null?[t]:[]),t},Em=function(t){var e=new n(t._schema?t._schema:ru(t.dimensions,t._getDimInfo,t),t.hostModel);return sP(e,t),e},sP=function(t,e){z(Fmt.concat(e.__wrappedMethods||[]),function(i){e.hasOwnProperty(i)&&(t[i]=e[i])}),t.__wrappedMethods=e.__wrappedMethods,z(Nmt,function(i){t[i]=zt(e[i])}),t._calculationInfo=ht({},e._calculationInfo)},lP=function(t,e){var i=t._nameList,r=t._idList,o=t._nameDimIdx,a=t._idDimIdx,s=i[e],l=r[e];if(s==null&&o!=null&&(i[e]=s=km(t,o,e)),l==null&&a!=null&&(r[e]=l=km(t,a,e)),l==null&&s!=null){var h=t._nameRepeatCount,u=h[s]=(h[s]||0)+1;l=s,u>1&&(l+="__ec__"+u),r[e]=l}}})(),n})();function u_(n,t){rz(n)||(n=oz(n)),t=t||{};var e=t.coordDimensions||[],i=t.dimensionsDefine||n.dimensionsDefine||[],r=Pt(),o=[],a=Vmt(n,e,i,t.dimensionsCount),s=t.canOmitUnusedDimensions&&hQ(a),l=i===n.dimensionsDefine,h=l?lQ(n):sQ(i),u=t.encodeDefine;!u&&t.encodeDefaulter&&(u=t.encodeDefaulter(n,a));for(var d=Pt(u),c=new vJ(a),f=0;f<c.length;f++)c[f]=-1;function g(A){var T=c[A];if(T<0){var M=i[A],R=Ht(M)?M:{name:M},L=new _w,B=R.name;B!=null&&h.get(B)!=null&&(L.name=L.displayName=B),R.type!=null&&(L.type=R.type),R.displayName!=null&&(L.displayName=R.displayName);var P=o.length;return c[A]=P,L.storeDimIndex=A,o.push(L),L}return o[T]}if(!s)for(var f=0;f<a;f++)g(f);d.each(function(A,T){var M=li(A).slice();if(M.length===1&&!Ct(M[0])&&M[0]<0){d.set(T,!1);return}var R=d.set(T,[]);z(M,function(L,B){var P=Ct(L)?h.get(L):L;P!=null&&P<a&&(R[B]=P,v(g(P),T,B))})});var p=0;z(e,function(A){var T,M,R,L;if(Ct(A))T=A,L={};else{L=A,T=L.name;var B=L.ordinalMeta;L.ordinalMeta=null,L=ht({},L),L.ordinalMeta=B,M=L.dimsDef,R=L.otherDims,L.name=L.coordDim=L.coordDimIndex=L.dimsDef=L.otherDims=null}var P=d.get(T);if(P!==!1){if(P=li(P),!P.length)for(var k=0;k<(M&&M.length||1);k++){for(;p<a&&g(p).coordDim!=null;)p++;p<a&&P.push(p++)}z(P,function(E,D){var I=g(E);if(l&&L.type!=null&&(I.type=L.type),v(Ot(I,L),T,D),I.name==null&&M){var O=M[D];!Ht(O)&&(O={name:O}),I.name=I.displayName=O.name,I.defaultTooltip=O.defaultTooltip}R&&Ot(I.otherDims,R)})}});function v(A,T,M){KZ.get(T)!=null?A.otherDims[T]=M:(A.coordDim=T,A.coordDimIndex=M,r.set(T,!0))}var m=t.generateCoord,y=t.generateCoordCount,b=y!=null;y=m?y||1:0;var _=m||"value";function w(A){A.name==null&&(A.name=A.coordDim)}if(s)z(o,function(A){w(A)}),o.sort(function(A,T){return A.storeDimIndex-T.storeDimIndex});else for(var C=0;C<a;C++){var x=g(C),S=x.coordDim;S==null&&(x.coordDim=Gmt(_,r,b),x.coordDimIndex=0,(!m||y<=0)&&(x.isExtraCoord=!0),y--),w(x),x.type==null&&(tJ(n,C)===gr.Must||x.isExtraCoord&&(x.otherDims.itemName!=null||x.otherDims.seriesName!=null))&&(x.type="ordinal")}return Wmt(o),new oQ({source:n,dimensions:o,fullDimensionCount:a,dimensionOmitted:s})}function Wmt(n){for(var t=Pt(),e=0;e<n.length;e++){var i=n[e],r=i.name,o=t.get(r)||0;o>0&&(i.name=r+(o-1)),o++,t.set(r,o)}}function Vmt(n,t,e,i){var r=Math.max(n.dimensionsDetectedCount||1,t.length,e.length,i||0);return z(t,function(o){var a;Ht(o)&&(a=o.dimsDef)&&(r=Math.max(r,a.length))}),r}function Gmt(n,t,e){if(e||t.hasKey(n)){for(var i=0;t.hasKey(n+i);)i++;n+=i}return t.set(n,!0),n}var $mt=(function(){function n(t){this.coordSysDims=[],this.axisMap=Pt(),this.categoryAxisMap=Pt(),this.coordSysName=t}return n})();function jmt(n){var t=n.get("coordinateSystem"),e=new $mt(t),i=Umt[t];if(i)return i(n,e,e.axisMap,e.categoryAxisMap),e}var Umt={cartesian2d:function(n,t,e,i){var r=n.getReferringComponents("xAxis",Mn).models[0],o=n.getReferringComponents("yAxis",Mn).models[0];t.coordSysDims=["x","y"],e.set("x",r),e.set("y",o),_g(r)&&(i.set("x",r),t.firstCategoryDimIndex=0),_g(o)&&(i.set("y",o),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},singleAxis:function(n,t,e,i){var r=n.getReferringComponents("singleAxis",Mn).models[0];t.coordSysDims=["single"],e.set("single",r),_g(r)&&(i.set("single",r),t.firstCategoryDimIndex=0)},polar:function(n,t,e,i){var r=n.getReferringComponents("polar",Mn).models[0],o=r.findAxisModel("radiusAxis"),a=r.findAxisModel("angleAxis");t.coordSysDims=["radius","angle"],e.set("radius",o),e.set("angle",a),_g(o)&&(i.set("radius",o),t.firstCategoryDimIndex=0),_g(a)&&(i.set("angle",a),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},geo:function(n,t,e,i){t.coordSysDims=["lng","lat"]},parallel:function(n,t,e,i){var r=n.ecModel,o=r.getComponent("parallel",n.get("parallelIndex")),a=t.coordSysDims=o.dimensions.slice();z(o.parallelAxisIndex,function(s,l){var h=r.getComponent("parallelAxis",s),u=a[l];e.set(u,h),_g(h)&&(i.set(u,h),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=l))})}};function _g(n){return n.get("type")==="category"}function Ymt(n,t,e){e=e||{};var i=e.byIndex,r=e.stackedCoordDimension,o,a,s;Xmt(t)?o=t:(a=t.schema,o=a.dimensions,s=t.store);var l=!!(n&&n.get("stack")),h,u,d,c;if(z(o,function(y,b){Ct(y)&&(o[b]=y={name:y}),l&&!y.isExtraCoord&&(!i&&!h&&y.ordinalMeta&&(h=y),!u&&y.type!=="ordinal"&&y.type!=="time"&&(!r||r===y.coordDim)&&(u=y))}),u&&!i&&!h&&(i=!0),u){d="__\0ecstackresult_"+n.id,c="__\0ecstackedover_"+n.id,h&&(h.createInvertedIndices=!0);var f=u.coordDim,g=u.type,p=0;z(o,function(y){y.coordDim===f&&p++});var v={name:d,coordDim:f,coordDimIndex:p,type:g,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:o.length},m={name:c,coordDim:c,coordDimIndex:p+1,type:g,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:o.length+1};a?(s&&(v.storeDimIndex=s.ensureCalculationDimension(c,g),m.storeDimIndex=s.ensureCalculationDimension(d,g)),a.appendCalculationDimension(v),a.appendCalculationDimension(m)):(o.push(v),o.push(m))}return{stackedDimension:u&&u.name,stackedByDimension:h&&h.name,isStackedByIndex:i,stackedOverDimension:c,stackResultDimension:d}}function Xmt(n){return!aQ(n.schema)}function id(n,t){return!!t&&t===n.getCalculationInfo("stackedDimension")}function uQ(n,t){return id(n,t)?n.getCalculationInfo("stackResultDimension"):t}function qmt(n,t){var e=n.get("coordinateSystem"),i=l_.get(e),r;return t&&t.coordSysDims&&(r=ct(t.coordSysDims,function(o){var a={name:o},s=t.axisMap.get(o);if(s){var l=s.get("type");a.type=xx(l)}return a})),r||(r=i&&(i.getDimensionsInfo?i.getDimensionsInfo():i.dimensions.slice())||["x","y"]),r}function Kmt(n,t,e){var i,r;return e&&z(n,function(o,a){var s=o.coordDim,l=e.categoryAxisMap.get(s);l&&(i==null&&(i=a),o.ordinalMeta=l.getOrdinalMeta(),t&&(o.createInvertedIndices=!0)),o.otherDims.itemName!=null&&(r=!0)}),!r&&i!=null&&(n[i].otherDims.itemName=0),i}function qh(n,t,e){e=e||{};var i=t.getSourceManager(),r,o=!1;n?(o=!0,r=oz(n)):(r=i.getSource(),o=r.sourceFormat===Xa);var a=jmt(t),s=qmt(t,a),l=e.useEncodeDefaulter,h=Dt(l)?l:l?qt(QZ,s,t):null,u={coordDimensions:s,generateCoord:e.generateCoord,encodeDefine:t.getEncode(),encodeDefaulter:h,canOmitUnusedDimensions:!o},d=u_(r,u),c=Kmt(d.dimensions,e.createInvertedIndices,a),f=o?null:i.getSharedDataStore(d),g=Ymt(t,{schema:d,store:f}),p=new oo(d,t);p.setCalculationInfo(g);var v=c!=null&&Zmt(r)?function(m,y,b,_){return _===c?b:this.defaultDimValueGetter(m,y,b,_)}:null;return p.hasItemOption=!1,p.initData(o?r:f,null,v),p}function Zmt(n){if(n.sourceFormat===Xa){var t=Jmt(n.data||[]);return!ut(zv(t))}}function Jmt(n){for(var t=0;t<n.length&&n[t]==null;)t++;return n[t]}var Ll=(function(){function n(t){this._setting=t||{},this._extent=[1/0,-1/0]}return n.prototype.getSetting=function(t){return this._setting[t]},n.prototype.unionExtent=function(t){var e=this._extent;t[0]<e[0]&&(e[0]=t[0]),t[1]>e[1]&&(e[1]=t[1])},n.prototype.unionExtentFromData=function(t,e){this.unionExtent(t.getApproximateExtent(e))},n.prototype.getExtent=function(){return this._extent.slice()},n.prototype.setExtent=function(t,e){var i=this._extent;isNaN(t)||(i[0]=t),isNaN(e)||(i[1]=e)},n.prototype.isInExtentRange=function(t){return this._extent[0]<=t&&this._extent[1]>=t},n.prototype.isBlank=function(){return this._isBlank},n.prototype.setBlank=function(t){this._isBlank=t},n})();zT(Ll);var Qmt=0,ZE=(function(){function n(t){this.categories=t.categories||[],this._needCollect=t.needCollect,this._deduplication=t.deduplication,this.uid=++Qmt}return n.createByAxisModel=function(t){var e=t.option,i=e.data,r=i&&ct(i,t0t);return new n({categories:r,needCollect:!r,deduplication:e.dedplication!==!1})},n.prototype.getOrdinal=function(t){return this._getOrCreateMap().get(t)},n.prototype.parseAndCollect=function(t){var e,i=this._needCollect;if(!Ct(t)&&!i)return t;if(i&&!this._deduplication)return e=this.categories.length,this.categories[e]=t,e;var r=this._getOrCreateMap();return e=r.get(t),e==null&&(i?(e=this.categories.length,this.categories[e]=t,r.set(t,e)):e=NaN),e},n.prototype._getOrCreateMap=function(){return this._map||(this._map=Pt(this.categories))},n})();function t0t(n){return Ht(n)&&n.value!=null?n.value:n+""}function JE(n){return n.type==="interval"||n.type==="log"}function e0t(n,t,e,i){var r={},o=n[1]-n[0],a=r.interval=zK(o/t);e!=null&&a<e&&(a=r.interval=e),i!=null&&a>i&&(a=r.interval=i);var s=r.intervalPrecision=dQ(a),l=r.niceTickExtent=[Ji(Math.ceil(n[0]/a)*a,s),Ji(Math.floor(n[1]/a)*a,s)];return i0t(l,n),r}function hP(n){var t=Math.pow(10,LH(n)),e=n/t;return e?e===2?e=3:e===3?e=5:e*=2:e=1,Ji(e*t)}function dQ(n){return ll(n)+2}function a4(n,t,e){n[t]=Math.max(Math.min(n[t],e[1]),e[0])}function i0t(n,t){!isFinite(n[0])&&(n[0]=t[0]),!isFinite(n[1])&&(n[1]=t[1]),a4(n,0,t),a4(n,1,t),n[0]>n[1]&&(n[0]=n[1])}function oM(n,t){return n>=t[0]&&n<=t[1]}function aM(n,t){return t[1]===t[0]?.5:(n-t[0])/(t[1]-t[0])}function sM(n,t){return n*(t[1]-t[0])+t[0]}var lM=(function(n){et(t,n);function t(e){var i=n.call(this,e)||this;i.type="ordinal";var r=i.getSetting("ordinalMeta");return r||(r=new ZE({})),ut(r)&&(r=new ZE({categories:ct(r,function(o){return Ht(o)?o.value:o})})),i._ordinalMeta=r,i._extent=i.getSetting("extent")||[0,r.categories.length-1],i}return t.prototype.parse=function(e){return e==null?NaN:Ct(e)?this._ordinalMeta.getOrdinal(e):Math.round(e)},t.prototype.contain=function(e){return e=this.parse(e),oM(e,this._extent)&&this._ordinalMeta.categories[e]!=null},t.prototype.normalize=function(e){return e=this._getTickNumber(this.parse(e)),aM(e,this._extent)},t.prototype.scale=function(e){return e=Math.round(sM(e,this._extent)),this.getRawOrdinalNumber(e)},t.prototype.getTicks=function(){for(var e=[],i=this._extent,r=i[0];r<=i[1];)e.push({value:r}),r++;return e},t.prototype.getMinorTicks=function(e){},t.prototype.setSortInfo=function(e){if(e==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var i=e.ordinalNumbers,r=this._ordinalNumbersByTick=[],o=this._ticksByOrdinalNumber=[],a=0,s=this._ordinalMeta.categories.length,l=Math.min(s,i.length);a<l;++a){var h=i[a];r[a]=h,o[h]=a}for(var u=0;a<s;++a){for(;o[u]!=null;)u++;r.push(u),o[u]=a}},t.prototype._getTickNumber=function(e){var i=this._ticksByOrdinalNumber;return i&&e>=0&&e<i.length?i[e]:e},t.prototype.getRawOrdinalNumber=function(e){var i=this._ordinalNumbersByTick;return i&&e>=0&&e<i.length?i[e]:e},t.prototype.getLabel=function(e){if(!this.isBlank()){var i=this.getRawOrdinalNumber(e.value),r=this._ordinalMeta.categories[i];return r==null?"":r+""}},t.prototype.count=function(){return this._extent[1]-this._extent[0]+1},t.prototype.unionExtentFromData=function(e,i){this.unionExtent(e.getApproximateExtent(i))},t.prototype.isInExtentRange=function(e){return e=this._getTickNumber(e),this._extent[0]<=e&&this._extent[1]>=e},t.prototype.getOrdinalMeta=function(){return this._ordinalMeta},t.prototype.calcNiceTicks=function(){},t.prototype.calcNiceExtent=function(){},t.type="ordinal",t})(Ll);Ll.registerClass(lM);var Ud=Ji,Ih=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="interval",e._interval=0,e._intervalPrecision=2,e}return t.prototype.parse=function(e){return e},t.prototype.contain=function(e){return oM(e,this._extent)},t.prototype.normalize=function(e){return aM(e,this._extent)},t.prototype.scale=function(e){return sM(e,this._extent)},t.prototype.setExtent=function(e,i){var r=this._extent;isNaN(e)||(r[0]=parseFloat(e)),isNaN(i)||(r[1]=parseFloat(i))},t.prototype.unionExtent=function(e){var i=this._extent;e[0]<i[0]&&(i[0]=e[0]),e[1]>i[1]&&(i[1]=e[1]),this.setExtent(i[0],i[1])},t.prototype.getInterval=function(){return this._interval},t.prototype.setInterval=function(e){this._interval=e,this._niceExtent=this._extent.slice(),this._intervalPrecision=dQ(e)},t.prototype.getTicks=function(e){var i=this._interval,r=this._extent,o=this._niceExtent,a=this._intervalPrecision,s=[];if(!i)return s;var l=1e4;r[0]<o[0]&&(e?s.push({value:Ud(o[0]-i,a)}):s.push({value:r[0]}));for(var h=o[0];h<=o[1]&&(s.push({value:h}),h=Ud(h+i,a),h!==s[s.length-1].value);)if(s.length>l)return[];var u=s.length?s[s.length-1].value:o[1];return r[1]>u&&(e?s.push({value:Ud(u+i,a)}):s.push({value:r[1]})),s},t.prototype.getMinorTicks=function(e){for(var i=this.getTicks(!0),r=[],o=this.getExtent(),a=1;a<i.length;a++){for(var s=i[a],l=i[a-1],h=0,u=[],d=s.value-l.value,c=d/e;h<e-1;){var f=Ud(l.value+(h+1)*c);f>o[0]&&f<o[1]&&u.push(f),h++}r.push(u)}return r},t.prototype.getLabel=function(e,i){if(e==null)return"";var r=i&&i.precision;r==null?r=ll(e.value)||0:r==="auto"&&(r=this._intervalPrecision);var o=Ud(e.value,r,!0);return $Z(o)},t.prototype.calcNiceTicks=function(e,i,r){e=e||5;var o=this._extent,a=o[1]-o[0];if(isFinite(a)){a<0&&(a=-a,o.reverse());var s=e0t(o,e,i,r);this._intervalPrecision=s.intervalPrecision,this._interval=s.interval,this._niceExtent=s.niceTickExtent}},t.prototype.calcNiceExtent=function(e){var i=this._extent;if(i[0]===i[1])if(i[0]!==0){var r=Math.abs(i[0]);e.fixMax||(i[1]+=r/2),i[0]-=r/2}else i[1]=1;var o=i[1]-i[0];isFinite(o)||(i[0]=0,i[1]=1),this.calcNiceTicks(e.splitNumber,e.minInterval,e.maxInterval);var a=this._interval;e.fixMin||(i[0]=Ud(Math.floor(i[0]/a)*a)),e.fixMax||(i[1]=Ud(Math.ceil(i[1]/a)*a))},t.prototype.setNiceExtent=function(e,i){this._niceExtent=[e,i]},t.type="interval",t})(Ll);Ll.registerClass(Ih);var cQ=typeof Float32Array<"u",n0t=cQ?Float32Array:Array;function ul(n){return ut(n)?cQ?new Float32Array(n):n:new n0t(n)}var QE="__ec_stack_";function fQ(n){return n.get("stack")||QE+n.seriesIndex}function vz(n){return n.dim+n.index}function r0t(n){var t=[],e=n.axis,i="axis0";if(e.type==="category"){for(var r=e.getBandWidth(),o=0;o<n.count;o++)t.push(Ot({bandWidth:r,axisKey:i,stackId:QE+o},n));for(var a=vQ(t),s=[],o=0;o<n.count;o++){var l=a[i][QE+o];l.offsetCenter=l.offset+l.width/2,s.push(l)}return s}}function gQ(n,t){var e=[];return t.eachSeriesByType(n,function(i){bQ(i)&&e.push(i)}),e}function o0t(n){var t={};z(n,function(l){var h=l.coordinateSystem,u=h.getBaseAxis();if(!(u.type!=="time"&&u.type!=="value"))for(var d=l.getData(),c=u.dim+"_"+u.index,f=d.getDimensionIndex(d.mapDimension(u.dim)),g=d.getStore(),p=0,v=g.count();p<v;++p){var m=g.get(f,p);t[c]?t[c].push(m):t[c]=[m]}});var e={};for(var i in t)if(t.hasOwnProperty(i)){var r=t[i];if(r){r.sort(function(l,h){return l-h});for(var o=null,a=1;a<r.length;++a){var s=r[a]-r[a-1];s>0&&(o=o===null?s:Math.min(o,s))}e[i]=o}}return e}function pQ(n){var t=o0t(n),e=[];return z(n,function(i){var r=i.coordinateSystem,o=r.getBaseAxis(),a=o.getExtent(),s;if(o.type==="category")s=o.getBandWidth();else if(o.type==="value"||o.type==="time"){var l=o.dim+"_"+o.index,h=t[l],u=Math.abs(a[1]-a[0]),d=o.scale.getExtent(),c=Math.abs(d[1]-d[0]);s=h?u/c*h:u}else{var f=i.getData();s=Math.abs(a[1]-a[0])/f.count()}var g=mt(i.get("barWidth"),s),p=mt(i.get("barMaxWidth"),s),v=mt(i.get("barMinWidth")||(_Q(i)?.5:1),s),m=i.get("barGap"),y=i.get("barCategoryGap");e.push({bandWidth:s,barWidth:g,barMaxWidth:p,barMinWidth:v,barGap:m,barCategoryGap:y,axisKey:vz(o),stackId:fQ(i)})}),vQ(e)}function vQ(n){var t={};z(n,function(i,r){var o=i.axisKey,a=i.bandWidth,s=t[o]||{bandWidth:a,remainedWidth:a,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},l=s.stacks;t[o]=s;var h=i.stackId;l[h]||s.autoWidthCount++,l[h]=l[h]||{width:0,maxWidth:0};var u=i.barWidth;u&&!l[h].width&&(l[h].width=u,u=Math.min(s.remainedWidth,u),s.remainedWidth-=u);var d=i.barMaxWidth;d&&(l[h].maxWidth=d);var c=i.barMinWidth;c&&(l[h].minWidth=c);var f=i.barGap;f!=null&&(s.gap=f);var g=i.barCategoryGap;g!=null&&(s.categoryGap=g)});var e={};return z(t,function(i,r){e[r]={};var o=i.stacks,a=i.bandWidth,s=i.categoryGap;if(s==null){var l=pe(o).length;s=Math.max(35-l*4,15)+"%"}var h=mt(s,a),u=mt(i.gap,1),d=i.remainedWidth,c=i.autoWidthCount,f=(d-h)/(c+(c-1)*u);f=Math.max(f,0),z(o,function(m){var y=m.maxWidth,b=m.minWidth;if(m.width){var _=m.width;y&&(_=Math.min(_,y)),b&&(_=Math.max(_,b)),m.width=_,d-=_+u*_,c--}else{var _=f;y&&y<_&&(_=Math.min(y,d)),b&&b>_&&(_=b),_!==f&&(m.width=_,d-=_+u*_,c--)}}),f=(d-h)/(c+(c-1)*u),f=Math.max(f,0);var g=0,p;z(o,function(m,y){m.width||(m.width=f),p=m,g+=m.width*(1+u)}),p&&(g-=p.width*u);var v=-g/2;z(o,function(m,y){e[r][y]=e[r][y]||{bandWidth:a,offset:v,width:m.width},v+=m.width*(1+u)})}),e}function a0t(n,t,e){if(n&&t){var i=n[vz(t)];return i}}function mQ(n,t){var e=gQ(n,t),i=pQ(e);z(e,function(r){var o=r.getData(),a=r.coordinateSystem,s=a.getBaseAxis(),l=fQ(r),h=i[vz(s)][l],u=h.offset,d=h.width;o.setLayout({bandWidth:h.bandWidth,offset:u,size:d})})}function yQ(n){return{seriesType:n,plan:Uv(),reset:function(t){if(bQ(t)){var e=t.getData(),i=t.coordinateSystem,r=i.getBaseAxis(),o=i.getOtherAxis(r),a=e.getDimensionIndex(e.mapDimension(o.dim)),s=e.getDimensionIndex(e.mapDimension(r.dim)),l=t.get("showBackground",!0),h=e.mapDimension(o.dim),u=e.getCalculationInfo("stackResultDimension"),d=id(e,h)&&!!e.getCalculationInfo("stackedOnSeries"),c=o.isHorizontal(),f=s0t(r,o),g=_Q(t),p=t.get("barMinHeight")||0,v=u&&e.getDimensionIndex(u),m=e.getLayout("size"),y=e.getLayout("offset");return{progress:function(b,_){for(var w=b.count,C=g&&ul(w*3),x=g&&l&&ul(w*3),S=g&&ul(w),A=i.master.getRect(),T=c?A.width:A.height,M,R=_.getStore(),L=0;(M=b.next())!=null;){var B=R.get(d?v:a,M),P=R.get(s,M),k=f,E=void 0;d&&(E=+B-R.get(a,M));var D=void 0,I=void 0,O=void 0,H=void 0;if(c){var F=i.dataToPoint([B,P]);if(d){var N=i.dataToPoint([E,P]);k=N[0]}D=k,I=F[1]+y,O=F[0]-k,H=m,Math.abs(O)<p&&(O=(O<0?-1:1)*p)}else{var F=i.dataToPoint([P,B]);if(d){var N=i.dataToPoint([P,E]);k=N[1]}D=F[0]+y,I=k,O=m,H=F[1]-k,Math.abs(H)<p&&(H=(H<=0?-1:1)*p)}g?(C[L]=D,C[L+1]=I,C[L+2]=c?O:H,x&&(x[L]=c?A.x:D,x[L+1]=c?I:A.y,x[L+2]=T),S[M]=M):_.setItemLayout(M,{x:D,y:I,width:O,height:H}),L+=3}g&&_.setLayout({largePoints:C,largeDataIndices:S,largeBackgroundPoints:x,valueAxisHorizontal:c})}}}}}}function bQ(n){return n.coordinateSystem&&n.coordinateSystem.type==="cartesian2d"}function _Q(n){return n.pipelineContext&&n.pipelineContext.large}function s0t(n,t){var e=t.model.get("startValue");return e||(e=0),t.toGlobalCoord(t.dataToCoord(t.type==="log"?e>0?e:1:e))}var l0t=function(n,t,e,i){for(;e<i;){var r=e+i>>>1;n[r][1]<t?e=r+1:i=r}return e},mz=(function(n){et(t,n);function t(e){var i=n.call(this,e)||this;return i.type="time",i}return t.prototype.getLabel=function(e){var i=this.getSetting("useUTC");return qT(e.value,Z5[$gt(vp(this._minLevelUnit))]||Z5.second,i,this.getSetting("locale"))},t.prototype.getFormattedLabel=function(e,i,r){var o=this.getSetting("useUTC"),a=this.getSetting("locale");return jgt(e,i,r,a,o)},t.prototype.getTicks=function(){var e=this._interval,i=this._extent,r=[];if(!e)return r;r.push({value:i[0],level:0});var o=this.getSetting("useUTC"),a=p0t(this._minLevelUnit,this._approxInterval,o,i);return r=r.concat(a),r.push({value:i[1],level:0}),r},t.prototype.calcNiceExtent=function(e){var i=this._extent;if(i[0]===i[1]&&(i[0]-=Da,i[1]+=Da),i[1]===-1/0&&i[0]===1/0){var r=new Date;i[1]=+new Date(r.getFullYear(),r.getMonth(),r.getDate()),i[0]=i[1]-Da}this.calcNiceTicks(e.splitNumber,e.minInterval,e.maxInterval)},t.prototype.calcNiceTicks=function(e,i,r){e=e||10;var o=this._extent,a=o[1]-o[0];this._approxInterval=a/e,i!=null&&this._approxInterval<i&&(this._approxInterval=i),r!=null&&this._approxInterval>r&&(this._approxInterval=r);var s=MC.length,l=Math.min(l0t(MC,this._approxInterval,0,s),s-1);this._interval=MC[l][1],this._minLevelUnit=MC[Math.max(l-1,0)][0]},t.prototype.parse=function(e){return Le(e)?e:+Al(e)},t.prototype.contain=function(e){return oM(this.parse(e),this._extent)},t.prototype.normalize=function(e){return aM(this.parse(e),this._extent)},t.prototype.scale=function(e){return sM(e,this._extent)},t.type="time",t})(Ih),MC=[["second",KH],["minute",ZH],["hour",K0],["quarter-day",K0*6],["half-day",K0*12],["day",Da*1.2],["half-week",Da*3.5],["week",Da*7],["month",Da*31],["quarter",Da*95],["half-year",K5/2],["year",K5]];function h0t(n,t,e,i){var r=Al(t),o=Al(e),a=function(g){return J5(r,g,i)===J5(o,g,i)},s=function(){return a("year")},l=function(){return s()&&a("month")},h=function(){return l()&&a("day")},u=function(){return h()&&a("hour")},d=function(){return u()&&a("minute")},c=function(){return d()&&a("second")},f=function(){return c()&&a("millisecond")};switch(n){case"year":return s();case"month":return l();case"day":return h();case"hour":return u();case"minute":return d();case"second":return c();case"millisecond":return f()}}function u0t(n,t){return n/=Da,n>16?16:n>7.5?7:n>3.5?4:n>1.5?2:1}function d0t(n){var t=30*Da;return n/=t,n>6?6:n>3?3:n>2?2:1}function c0t(n){return n/=K0,n>12?12:n>6?6:n>3.5?4:n>2?2:1}function s4(n,t){return n/=t?ZH:KH,n>30?30:n>20?20:n>15?15:n>10?10:n>5?5:n>2?2:1}function f0t(n){return zK(n)}function g0t(n,t,e){var i=new Date(n);switch(vp(t)){case"year":case"month":i[zZ(e)](0);case"day":i[FZ(e)](1);case"hour":i[NZ(e)](0);case"minute":i[WZ(e)](0);case"second":i[VZ(e)](0),i[GZ(e)](0)}return i.getTime()}function p0t(n,t,e,i){var r=1e4,o=OZ,a=0;function s(T,M,R,L,B,P,k){for(var E=new Date(M),D=M,I=E[L]();D<R&&D<=i[1];)k.push({value:D}),I+=T,E[B](I),D=E.getTime();k.push({value:D,notAdd:!0})}function l(T,M,R){var L=[],B=!M.length;if(!h0t(vp(T),i[0],i[1],e)){B&&(M=[{value:g0t(new Date(i[0]),T,e)},{value:i[1]}]);for(var P=0;P<M.length-1;P++){var k=M[P].value,E=M[P+1].value;if(k!==E){var D=void 0,I=void 0,O=void 0,H=!1;switch(T){case"year":D=Math.max(1,Math.round(t/Da/365)),I=JH(e),O=Ugt(e);break;case"half-year":case"quarter":case"month":D=d0t(t),I=mp(e),O=zZ(e);break;case"week":case"half-week":case"day":D=u0t(t),I=KT(e),O=FZ(e),H=!0;break;case"half-day":case"quarter-day":case"hour":D=c0t(t),I=Ny(e),O=NZ(e);break;case"minute":D=s4(t,!0),I=ZT(e),O=WZ(e);break;case"second":D=s4(t,!1),I=JT(e),O=VZ(e);break;case"millisecond":D=f0t(t),I=QT(e),O=GZ(e);break}s(D,k,E,I,O,H,L),T==="year"&&R.length>1&&P===0&&R.unshift({value:R[0].value-D})}}for(var P=0;P<L.length;P++)R.push(L[P]);return L}}for(var h=[],u=[],d=0,c=0,f=0;f<o.length&&a++<r;++f){var g=vp(o[f]);if(Ggt(o[f])){l(o[f],h[h.length-1]||[],u);var p=o[f+1]?vp(o[f+1]):null;if(g!==p){if(u.length){c=d,u.sort(function(T,M){return T.value-M.value});for(var v=[],m=0;m<u.length;++m){var y=u[m].value;(m===0||u[m-1].value!==y)&&(v.push(u[m]),y>=i[0]&&y<=i[1]&&d++)}var b=(i[1]-i[0])/t;if(d>b*1.5&&c>b/1.5||(h.push(v),d>b||n===o[f]))break}u=[]}}}for(var _=Ge(ct(h,function(T){return Ge(T,function(M){return M.value>=i[0]&&M.value<=i[1]&&!M.notAdd})}),function(T){return T.length>0}),w=[],C=_.length-1,f=0;f<_.length;++f)for(var x=_[f],S=0;S<x.length;++S)w.push({value:x[S].value,level:C-f});w.sort(function(T,M){return T.value-M.value});for(var A=[],f=0;f<w.length;++f)(f===0||w[f].value!==w[f-1].value)&&A.push(w[f]);return A}Ll.registerClass(mz);var l4=Ll.prototype,ty=Ih.prototype,v0t=Ji,m0t=Math.floor,y0t=Math.ceil,RC=Math.pow,Ja=Math.log,yz=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="log",e.base=10,e._originalScale=new Ih,e._interval=0,e}return t.prototype.getTicks=function(e){var i=this._originalScale,r=this._extent,o=i.getExtent(),a=ty.getTicks.call(this,e);return ct(a,function(s){var l=s.value,h=Ji(RC(this.base,l));return h=l===r[0]&&this._fixMin?PC(h,o[0]):h,h=l===r[1]&&this._fixMax?PC(h,o[1]):h,{value:h}},this)},t.prototype.setExtent=function(e,i){var r=Ja(this.base);e=Ja(Math.max(0,e))/r,i=Ja(Math.max(0,i))/r,ty.setExtent.call(this,e,i)},t.prototype.getExtent=function(){var e=this.base,i=l4.getExtent.call(this);i[0]=RC(e,i[0]),i[1]=RC(e,i[1]);var r=this._originalScale,o=r.getExtent();return this._fixMin&&(i[0]=PC(i[0],o[0])),this._fixMax&&(i[1]=PC(i[1],o[1])),i},t.prototype.unionExtent=function(e){this._originalScale.unionExtent(e);var i=this.base;e[0]=Ja(e[0])/Ja(i),e[1]=Ja(e[1])/Ja(i),l4.unionExtent.call(this,e)},t.prototype.unionExtentFromData=function(e,i){this.unionExtent(e.getApproximateExtent(i))},t.prototype.calcNiceTicks=function(e){e=e||10;var i=this._extent,r=i[1]-i[0];if(!(r===1/0||r<=0)){var o=xct(r),a=e/r*o;for(a<=.5&&(o*=10);!isNaN(o)&&Math.abs(o)<1&&Math.abs(o)>0;)o*=10;var s=[Ji(y0t(i[0]/o)*o),Ji(m0t(i[1]/o)*o)];this._interval=o,this._niceExtent=s}},t.prototype.calcNiceExtent=function(e){ty.calcNiceExtent.call(this,e),this._fixMin=e.fixMin,this._fixMax=e.fixMax},t.prototype.parse=function(e){return e},t.prototype.contain=function(e){return e=Ja(e)/Ja(this.base),oM(e,this._extent)},t.prototype.normalize=function(e){return e=Ja(e)/Ja(this.base),aM(e,this._extent)},t.prototype.scale=function(e){return e=sM(e,this._extent),RC(this.base,e)},t.type="log",t})(Ll),CQ=yz.prototype;CQ.getMinorTicks=ty.getMinorTicks;CQ.getLabel=ty.getLabel;function PC(n,t){return v0t(n,ll(t))}Ll.registerClass(yz);var b0t=(function(){function n(t,e,i){this._prepareParams(t,e,i)}return n.prototype._prepareParams=function(t,e,i){i[1]<i[0]&&(i=[NaN,NaN]),this._dataMin=i[0],this._dataMax=i[1];var r=this._isOrdinal=t.type==="ordinal";this._needCrossZero=t.type==="interval"&&e.getNeedCrossZero&&e.getNeedCrossZero();var o=e.get("min",!0);o==null&&(o=e.get("startValue",!0));var a=this._modelMinRaw=o;Dt(a)?this._modelMinNum=BC(t,a({min:i[0],max:i[1]})):a!=="dataMin"&&(this._modelMinNum=BC(t,a));var s=this._modelMaxRaw=e.get("max",!0);if(Dt(s)?this._modelMaxNum=BC(t,s({min:i[0],max:i[1]})):s!=="dataMax"&&(this._modelMaxNum=BC(t,s)),r)this._axisDataLen=e.getCategories().length;else{var l=e.get("boundaryGap"),h=ut(l)?l:[l||0,l||0];typeof h[0]=="boolean"||typeof h[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[Ss(h[0],1),Ss(h[1],1)]}},n.prototype.calculate=function(){var t=this._isOrdinal,e=this._dataMin,i=this._dataMax,r=this._axisDataLen,o=this._boundaryGapInner,a=t?null:i-e||Math.abs(e),s=this._modelMinRaw==="dataMin"?e:this._modelMinNum,l=this._modelMaxRaw==="dataMax"?i:this._modelMaxNum,h=s!=null,u=l!=null;s==null&&(s=t?r?0:NaN:e-o[0]*a),l==null&&(l=t?r?r-1:NaN:i+o[1]*a),(s==null||!isFinite(s))&&(s=NaN),(l==null||!isFinite(l))&&(l=NaN);var d=By(s)||By(l)||t&&!r;this._needCrossZero&&(s>0&&l>0&&!h&&(s=0),s<0&&l<0&&!u&&(l=0));var c=this._determinedMin,f=this._determinedMax;return c!=null&&(s=c,h=!0),f!=null&&(l=f,u=!0),{min:s,max:l,minFixed:h,maxFixed:u,isBlank:d}},n.prototype.modifyDataMinMax=function(t,e){this[C0t[t]]=e},n.prototype.setDeterminedMinMax=function(t,e){var i=_0t[t];this[i]=e},n.prototype.freeze=function(){this.frozen=!0},n})(),_0t={min:"_determinedMin",max:"_determinedMax"},C0t={min:"_dataMin",max:"_dataMax"};function wQ(n,t,e){var i=n.rawExtentInfo;return i||(i=new b0t(n,t,e),n.rawExtentInfo=i,i)}function BC(n,t){return t==null?null:By(t)?NaN:n.parse(t)}function xQ(n,t){var e=n.type,i=wQ(n,t,n.getExtent()).calculate();n.setBlank(i.isBlank);var r=i.min,o=i.max,a=t.ecModel;if(a&&e==="time"){var s=gQ("bar",a),l=!1;if(z(s,function(d){l=l||d.getBaseAxis()===t.axis}),l){var h=pQ(s),u=w0t(r,o,t,h);r=u.min,o=u.max}}return{extent:[r,o],fixMin:i.minFixed,fixMax:i.maxFixed}}function w0t(n,t,e,i){var r=e.axis.getExtent(),o=Math.abs(r[1]-r[0]),a=a0t(i,e.axis);if(a===void 0)return{min:n,max:t};var s=1/0;z(a,function(f){s=Math.min(f.offset,s)});var l=-1/0;z(a,function(f){l=Math.max(f.offset+f.width,l)}),s=Math.abs(s),l=Math.abs(l);var h=s+l,u=t-n,d=1-(s+l)/o,c=u/d-u;return t+=c*(l/h),n-=c*(s/h),{min:n,max:t}}function Yp(n,t){var e=t,i=xQ(n,e),r=i.extent,o=e.get("splitNumber");n instanceof yz&&(n.base=e.get("logBase"));var a=n.type,s=e.get("interval"),l=a==="interval"||a==="time";n.setExtent(r[0],r[1]),n.calcNiceExtent({splitNumber:o,fixMin:i.fixMin,fixMax:i.fixMax,minInterval:l?e.get("minInterval"):null,maxInterval:l?e.get("maxInterval"):null}),s!=null&&n.setInterval&&n.setInterval(s)}function hM(n,t){if(t=t||n.get("type"),t)switch(t){case"category":return new lM({ordinalMeta:n.getOrdinalMeta?n.getOrdinalMeta():n.getCategories(),extent:[1/0,-1/0]});case"time":return new mz({locale:n.ecModel.getLocaleModel(),useUTC:n.ecModel.get("useUTC")});default:return new(Ll.getClass(t)||Ih)}}function x0t(n){var t=n.scale.getExtent(),e=t[0],i=t[1];return!(e>0&&i>0||e<0&&i<0)}function qv(n){var t=n.getLabelModel().get("formatter"),e=n.type==="category"?n.scale.getExtent()[0]:null;return n.scale.type==="time"?(function(i){return function(r,o){return n.scale.getFormattedLabel(r,o,i)}})(t):Ct(t)?(function(i){return function(r){var o=n.scale.getLabel(r),a=i.replace("{value}",o??"");return a}})(t):Dt(t)?(function(i){return function(r,o){return e!=null&&(o=r.value-e),i(bz(n,r),o,r.level!=null?{level:r.level}:null)}})(t):function(i){return n.scale.getLabel(i)}}function bz(n,t){return n.type==="category"?n.scale.getLabel(t):t.value}function S0t(n){var t=n.model,e=n.scale;if(!(!t.get(["axisLabel","show"])||e.isBlank())){var i,r,o=e.getExtent();e instanceof lM?r=e.count():(i=e.getTicks(),r=i.length);var a=n.getLabelModel(),s=qv(n),l,h=1;r>40&&(h=Math.ceil(r/40));for(var u=0;u<r;u+=h){var d=i?i[u]:{value:o[0]+u},c=s(d,u),f=a.getTextRect(c),g=A0t(f,a.get("rotate")||0);l?l.union(g):l=g}return l}}function A0t(n,t){var e=t*Math.PI/180,i=n.width,r=n.height,o=i*Math.abs(Math.cos(e))+Math.abs(r*Math.sin(e)),a=i*Math.abs(Math.sin(e))+Math.abs(r*Math.cos(e)),s=new te(n.x,n.y,o,a);return s}function _z(n){var t=n.get("interval");return t??"auto"}function SQ(n){return n.type==="category"&&_z(n.getLabelModel())===0}function Sx(n,t){var e={};return z(n.mapDimensionsAll(t),function(i){e[uQ(n,i)]=!0}),pe(e)}function T0t(n,t,e){t&&z(Sx(t,e),function(i){var r=t.getApproximateExtent(i);r[0]<n[0]&&(n[0]=r[0]),r[1]>n[1]&&(n[1]=r[1])})}var d_=(function(){function n(){}return n.prototype.getNeedCrossZero=function(){var t=this.option;return!t.scale},n.prototype.getCoordSysModel=function(){},n})(),h4=[],M0t={registerPreprocessor:iQ,registerProcessor:nQ,registerPostInit:Tmt,registerPostUpdate:Mmt,registerUpdateLifecycle:gz,registerAction:kl,registerCoordinateSystem:Rmt,registerLayout:Pmt,registerVisual:Qf,registerTransform:kmt,registerLoading:rQ,registerMap:Bmt,registerImpl:smt,PRIORITY:_mt,ComponentModel:ge,ComponentView:Di,SeriesModel:Ci,ChartView:hi,registerComponentModel:function(n){ge.registerClass(n)},registerComponentView:function(n){Di.registerClass(n)},registerSeriesModel:function(n){Ci.registerClass(n)},registerChartView:function(n){hi.registerClass(n)},registerSubTypeDefaulter:function(n,t){ge.registerSubTypeDefaulter(n,t)},registerPainter:function(n,t){pct(n,t)}};function ae(n){if(ut(n)){z(n,function(t){ae(t)});return}ee(h4,n)>=0||(h4.push(n),Dt(n)&&(n={install:n}),n.install(M0t))}var R0t=1e-8;function u4(n,t){return Math.abs(n-t)<R0t}function Cc(n,t,e){var i=0,r=n[0];if(!r)return!1;for(var o=1;o<n.length;o++){var a=n[o];i+=ah(r[0],r[1],a[0],a[1],t,e),r=a}var s=n[0];return(!u4(r[0],s[0])||!u4(r[1],s[1]))&&(i+=ah(r[0],r[1],s[0],s[1],t,e)),i!==0}var P0t=[];function uP(n,t){for(var e=0;e<n.length;e++)Sr(n[e],n[e],t)}function d4(n,t,e,i){for(var r=0;r<n.length;r++){var o=n[r];i&&(o=i.project(o)),o&&isFinite(o[0])&&isFinite(o[1])&&(Pu(t,t,o),Bu(e,e,o))}}function B0t(n){for(var t=0,e=0,i=0,r=n.length,o=n[r-1][0],a=n[r-1][1],s=0;s<r;s++){var l=n[s][0],h=n[s][1],u=o*h-l*a;t+=u,e+=(o+l)*u,i+=(a+h)*u,o=l,a=h}return t?[e/t/3,i/t/3,t]:[n[0][0]||0,n[0][1]||0]}var AQ=(function(){function n(t){this.name=t}return n.prototype.setCenter=function(t){this._center=t},n.prototype.getCenter=function(){var t=this._center;return t||(t=this._center=this.calcCenter()),t},n})(),c4=(function(){function n(t,e){this.type="polygon",this.exterior=t,this.interiors=e}return n})(),f4=(function(){function n(t){this.type="linestring",this.points=t}return n})(),TQ=(function(n){et(t,n);function t(e,i,r){var o=n.call(this,e)||this;return o.type="geoJSON",o.geometries=i,o._center=r&&[r[0],r[1]],o}return t.prototype.calcCenter=function(){for(var e=this.geometries,i,r=0,o=0;o<e.length;o++){var a=e[o],s=a.exterior,l=s&&s.length;l>r&&(i=a,r=l)}if(i)return B0t(i.exterior);var h=this.getBoundingRect();return[h.x+h.width/2,h.y+h.height/2]},t.prototype.getBoundingRect=function(e){var i=this._rect;if(i&&!e)return i;var r=[1/0,1/0],o=[-1/0,-1/0],a=this.geometries;return z(a,function(s){s.type==="polygon"?d4(s.exterior,r,o,e):z(s.points,function(l){d4(l,r,o,e)})}),isFinite(r[0])&&isFinite(r[1])&&isFinite(o[0])&&isFinite(o[1])||(r[0]=r[1]=o[0]=o[1]=0),i=new te(r[0],r[1],o[0]-r[0],o[1]-r[1]),e||(this._rect=i),i},t.prototype.contain=function(e){var i=this.getBoundingRect(),r=this.geometries;if(!i.contain(e[0],e[1]))return!1;t:for(var o=0,a=r.length;o<a;o++){var s=r[o];if(s.type==="polygon"){var l=s.exterior,h=s.interiors;if(Cc(l,e[0],e[1])){for(var u=0;u<(h?h.length:0);u++)if(Cc(h[u],e[0],e[1]))continue t;return!0}}}return!1},t.prototype.transformTo=function(e,i,r,o){var a=this.getBoundingRect(),s=a.width/a.height;r?o||(o=r/s):r=s*o;for(var l=new te(e,i,r,o),h=a.calculateTransform(l),u=this.geometries,d=0;d<u.length;d++){var c=u[d];c.type==="polygon"?(uP(c.exterior,h),z(c.interiors,function(f){uP(f,h)})):z(c.points,function(f){uP(f,h)})}a=this._rect,a.copy(l),this._center=[a.x+a.width/2,a.y+a.height/2]},t.prototype.cloneShallow=function(e){e==null&&(e=this.name);var i=new t(e,this.geometries,this._center);return i._rect=this._rect,i.transformTo=null,i},t})(AQ),k0t=(function(n){et(t,n);function t(e,i){var r=n.call(this,e)||this;return r.type="geoSVG",r._elOnlyForCalculate=i,r}return t.prototype.calcCenter=function(){for(var e=this._elOnlyForCalculate,i=e.getBoundingRect(),r=[i.x+i.width/2,i.y+i.height/2],o=DT(P0t),a=e;a&&!a.isGeoSVGGraphicRoot;)Ch(o,a.getLocalTransform(),o),a=a.parent;return Hv(o,o),Sr(r,r,o),r},t})(AQ);function L0t(n){if(!n.UTF8Encoding)return n;var t=n,e=t.UTF8Scale;e==null&&(e=1024);var i=t.features;return z(i,function(r){var o=r.geometry,a=o.encodeOffsets,s=o.coordinates;if(a)switch(o.type){case"LineString":o.coordinates=MQ(s,a,e);break;case"Polygon":dP(s,a,e);break;case"MultiLineString":dP(s,a,e);break;case"MultiPolygon":z(s,function(l,h){return dP(l,a[h],e)})}}),t.UTF8Encoding=!1,t}function dP(n,t,e){for(var i=0;i<n.length;i++)n[i]=MQ(n[i],t[i],e)}function MQ(n,t,e){for(var i=[],r=t[0],o=t[1],a=0;a<n.length;a+=2){var s=n.charCodeAt(a)-64,l=n.charCodeAt(a+1)-64;s=s>>1^-(s&1),l=l>>1^-(l&1),s+=r,l+=o,r=s,o=l,i.push([s/e,l/e])}return i}function E0t(n,t){return n=L0t(n),ct(Ge(n.features,function(e){return e.geometry&&e.properties&&e.geometry.coordinates.length>0}),function(e){var i=e.properties,r=e.geometry,o=[];switch(r.type){case"Polygon":var a=r.coordinates;o.push(new c4(a[0],a.slice(1)));break;case"MultiPolygon":z(r.coordinates,function(l){l[0]&&o.push(new c4(l[0],l.slice(1)))});break;case"LineString":o.push(new f4([r.coordinates]));break;case"MultiLineString":o.push(new f4(r.coordinates))}var s=new TQ(i[t||"name"],o,i.cp);return s.properties=i,s})}var Uy=Te();function RQ(n,t){var e=ct(t,function(i){return n.scale.parse(i)});return n.type==="time"&&e.length>0&&(e.sort(),e.unshift(e[0]),e.push(e[e.length-1])),e}function D0t(n){var t=n.getLabelModel().get("customValues");if(t){var e=qv(n),i=n.scale.getExtent(),r=RQ(n,t),o=Ge(r,function(a){return a>=i[0]&&a<=i[1]});return{labels:ct(o,function(a){var s={value:a};return{formattedLabel:e(s),rawLabel:n.scale.getLabel(s),tickValue:a}})}}return n.type==="category"?O0t(n):z0t(n)}function I0t(n,t){var e=n.getTickModel().get("customValues");if(e){var i=n.scale.getExtent(),r=RQ(n,e);return{ticks:Ge(r,function(o){return o>=i[0]&&o<=i[1]})}}return n.type==="category"?H0t(n,t):{ticks:ct(n.scale.getTicks(),function(o){return o.value})}}function O0t(n){var t=n.getLabelModel(),e=PQ(n,t);return!t.get("show")||n.scale.isBlank()?{labels:[],labelCategoryInterval:e.labelCategoryInterval}:e}function PQ(n,t){var e=BQ(n,"labels"),i=_z(t),r=kQ(e,i);if(r)return r;var o,a;return Dt(i)?o=DQ(n,i):(a=i==="auto"?F0t(n):i,o=EQ(n,a)),LQ(e,i,{labels:o,labelCategoryInterval:a})}function H0t(n,t){var e=BQ(n,"ticks"),i=_z(t),r=kQ(e,i);if(r)return r;var o,a;if((!t.get("show")||n.scale.isBlank())&&(o=[]),Dt(i))o=DQ(n,i,!0);else if(i==="auto"){var s=PQ(n,n.getLabelModel());a=s.labelCategoryInterval,o=ct(s.labels,function(l){return l.tickValue})}else a=i,o=EQ(n,a,!0);return LQ(e,i,{ticks:o,tickCategoryInterval:a})}function z0t(n){var t=n.scale.getTicks(),e=qv(n);return{labels:ct(t,function(i,r){return{level:i.level,formattedLabel:e(i,r),rawLabel:n.scale.getLabel(i),tickValue:i.value}})}}function BQ(n,t){return Uy(n)[t]||(Uy(n)[t]=[])}function kQ(n,t){for(var e=0;e<n.length;e++)if(n[e].key===t)return n[e].value}function LQ(n,t,e){return n.push({key:t,value:e}),e}function F0t(n){var t=Uy(n).autoInterval;return t??(Uy(n).autoInterval=n.calculateCategoryInterval())}function N0t(n){var t=W0t(n),e=qv(n),i=(t.axisRotate-t.labelRotate)/180*Math.PI,r=n.scale,o=r.getExtent(),a=r.count();if(o[1]-o[0]<1)return 0;var s=1;a>40&&(s=Math.max(1,Math.floor(a/40)));for(var l=o[0],h=n.dataToCoord(l+1)-n.dataToCoord(l),u=Math.abs(h*Math.cos(i)),d=Math.abs(h*Math.sin(i)),c=0,f=0;l<=o[1];l+=s){var g=0,p=0,v=t_(e({value:l}),t.font,"center","top");g=v.width*1.3,p=v.height*1.3,c=Math.max(c,g,7),f=Math.max(f,p,7)}var m=c/u,y=f/d;isNaN(m)&&(m=1/0),isNaN(y)&&(y=1/0);var b=Math.max(0,Math.floor(Math.min(m,y))),_=Uy(n.model),w=n.getExtent(),C=_.lastAutoInterval,x=_.lastTickCount;return C!=null&&x!=null&&Math.abs(C-b)<=1&&Math.abs(x-a)<=1&&C>b&&_.axisExtent0===w[0]&&_.axisExtent1===w[1]?b=C:(_.lastTickCount=a,_.lastAutoInterval=b,_.axisExtent0=w[0],_.axisExtent1=w[1]),b}function W0t(n){var t=n.getLabelModel();return{axisRotate:n.getRotate?n.getRotate():n.isHorizontal&&!n.isHorizontal()?90:0,labelRotate:t.get("rotate")||0,font:t.getFont()}}function EQ(n,t,e){var i=qv(n),r=n.scale,o=r.getExtent(),a=n.getLabelModel(),s=[],l=Math.max((t||0)+1,1),h=o[0],u=r.count();h!==0&&l>1&&u/l>2&&(h=Math.round(Math.ceil(h/l)*l));var d=SQ(n),c=a.get("showMinLabel")||d,f=a.get("showMaxLabel")||d;c&&h!==o[0]&&p(o[0]);for(var g=h;g<=o[1];g+=l)p(g);f&&g-l!==o[1]&&p(o[1]);function p(v){var m={value:v};s.push(e?v:{formattedLabel:i(m),rawLabel:r.getLabel(m),tickValue:v})}return s}function DQ(n,t,e){var i=n.scale,r=qv(n),o=[];return z(i.getTicks(),function(a){var s=i.getLabel(a),l=a.value;t(a.value,s)&&o.push(e?l:{formattedLabel:r(a),rawLabel:s,tickValue:l})}),o}var g4=[0,1],Ds=(function(){function n(t,e,i){this.onBand=!1,this.inverse=!1,this.dim=t,this.scale=e,this._extent=i||[0,0]}return n.prototype.contain=function(t){var e=this._extent,i=Math.min(e[0],e[1]),r=Math.max(e[0],e[1]);return t>=i&&t<=r},n.prototype.containData=function(t){return this.scale.contain(t)},n.prototype.getExtent=function(){return this._extent.slice()},n.prototype.getPixelPrecision=function(t){return OK(t||this.scale.getExtent(),this._extent)},n.prototype.setExtent=function(t,e){var i=this._extent;i[0]=t,i[1]=e},n.prototype.dataToCoord=function(t,e){var i=this._extent,r=this.scale;return t=r.normalize(t),this.onBand&&r.type==="ordinal"&&(i=i.slice(),p4(i,r.count())),qe(t,g4,i,e)},n.prototype.coordToData=function(t,e){var i=this._extent,r=this.scale;this.onBand&&r.type==="ordinal"&&(i=i.slice(),p4(i,r.count()));var o=qe(t,i,g4,e);return this.scale.scale(o)},n.prototype.pointToData=function(t,e){},n.prototype.getTicksCoords=function(t){t=t||{};var e=t.tickModel||this.getTickModel(),i=I0t(this,e),r=i.ticks,o=ct(r,function(s){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(s):s),tickValue:s}},this),a=e.get("alignWithLabel");return V0t(this,o,a,t.clamp),o},n.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var t=this.model.getModel("minorTick"),e=t.get("splitNumber");e>0&&e<100||(e=5);var i=this.scale.getMinorTicks(e),r=ct(i,function(o){return ct(o,function(a){return{coord:this.dataToCoord(a),tickValue:a}},this)},this);return r},n.prototype.getViewLabels=function(){return D0t(this).labels},n.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},n.prototype.getTickModel=function(){return this.model.getModel("axisTick")},n.prototype.getBandWidth=function(){var t=this._extent,e=this.scale.getExtent(),i=e[1]-e[0]+(this.onBand?1:0);i===0&&(i=1);var r=Math.abs(t[1]-t[0]);return Math.abs(r)/i},n.prototype.calculateCategoryInterval=function(){return N0t(this)},n})();function p4(n,t){var e=n[1]-n[0],i=t,r=e/i/2;n[0]+=r,n[1]-=r}function V0t(n,t,e,i){var r=t.length;if(!n.onBand||e||!r)return;var o=n.getExtent(),a,s;if(r===1)t[0].coord=o[0],a=t[1]={coord:o[1],tickValue:t[0].tickValue};else{var l=t[r-1].tickValue-t[0].tickValue,h=(t[r-1].coord-t[0].coord)/l;z(t,function(f){f.coord-=h/2});var u=n.scale.getExtent();s=1+u[1]-t[r-1].tickValue,a={coord:t[r-1].coord+h*s,tickValue:u[1]+1},t.push(a)}var d=o[0]>o[1];c(t[0].coord,o[0])&&(i?t[0].coord=o[0]:t.shift()),i&&c(o[0],t[0].coord)&&t.unshift({coord:o[0]}),c(o[1],a.coord)&&(i?a.coord=o[1]:t.pop()),i&&c(a.coord,o[1])&&t.push({coord:o[1]});function c(f,g){return f=Ji(f),g=Ji(g),d?f>g:f<g}}var Dm=Math.PI*2,Yd=Tl.CMD,G0t=["top","right","bottom","left"];function $0t(n,t,e,i,r){var o=e.width,a=e.height;switch(n){case"top":i.set(e.x+o/2,e.y-t),r.set(0,-1);break;case"bottom":i.set(e.x+o/2,e.y+a+t),r.set(0,1);break;case"left":i.set(e.x-t,e.y+a/2),r.set(-1,0);break;case"right":i.set(e.x+o+t,e.y+a/2),r.set(1,0);break}}function j0t(n,t,e,i,r,o,a,s,l){a-=n,s-=t;var h=Math.sqrt(a*a+s*s);a/=h,s/=h;var u=a*e+n,d=s*e+t;if(Math.abs(i-r)%Dm<1e-4)return l[0]=u,l[1]=d,h-e;if(o){var c=i;i=jo(r),r=jo(c)}else i=jo(i),r=jo(r);i>r&&(r+=Dm);var f=Math.atan2(s,a);if(f<0&&(f+=Dm),f>=i&&f<=r||f+Dm>=i&&f+Dm<=r)return l[0]=u,l[1]=d,h-e;var g=e*Math.cos(i)+n,p=e*Math.sin(i)+t,v=e*Math.cos(r)+n,m=e*Math.sin(r)+t,y=(g-a)*(g-a)+(p-s)*(p-s),b=(v-a)*(v-a)+(m-s)*(m-s);return y<b?(l[0]=g,l[1]=p,Math.sqrt(y)):(l[0]=v,l[1]=m,Math.sqrt(b))}function Ax(n,t,e,i,r,o,a,s){var l=r-n,h=o-t,u=e-n,d=i-t,c=Math.sqrt(u*u+d*d);u/=c,d/=c;var f=l*u+h*d,g=f/c;s&&(g=Math.min(Math.max(g,0),1)),g*=c;var p=a[0]=n+g*u,v=a[1]=t+g*d;return Math.sqrt((p-r)*(p-r)+(v-o)*(v-o))}function IQ(n,t,e,i,r,o,a){e<0&&(n=n+e,e=-e),i<0&&(t=t+i,i=-i);var s=n+e,l=t+i,h=a[0]=Math.min(Math.max(r,n),s),u=a[1]=Math.min(Math.max(o,t),l);return Math.sqrt((h-r)*(h-r)+(u-o)*(u-o))}var ls=[];function U0t(n,t,e){var i=IQ(t.x,t.y,t.width,t.height,n.x,n.y,ls);return e.set(ls[0],ls[1]),i}function Y0t(n,t,e){for(var i=0,r=0,o=0,a=0,s,l,h=1/0,u=t.data,d=n.x,c=n.y,f=0;f<u.length;){var g=u[f++];f===1&&(i=u[f],r=u[f+1],o=i,a=r);var p=h;switch(g){case Yd.M:o=u[f++],a=u[f++],i=o,r=a;break;case Yd.L:p=Ax(i,r,u[f],u[f+1],d,c,ls,!0),i=u[f++],r=u[f++];break;case Yd.C:p=yK(i,r,u[f++],u[f++],u[f++],u[f++],u[f],u[f+1],d,c,ls),i=u[f++],r=u[f++];break;case Yd.Q:p=_K(i,r,u[f++],u[f++],u[f],u[f+1],d,c,ls),i=u[f++],r=u[f++];break;case Yd.A:var v=u[f++],m=u[f++],y=u[f++],b=u[f++],_=u[f++],w=u[f++];f+=1;var C=!!(1-u[f++]);s=Math.cos(_)*y+v,l=Math.sin(_)*b+m,f<=1&&(o=s,a=l);var x=(d-v)*b/y+v;p=j0t(v,m,b,_,_+w,C,x,c,ls),i=Math.cos(_+w)*y+v,r=Math.sin(_+w)*b+m;break;case Yd.R:o=i=u[f++],a=r=u[f++];var S=u[f++],A=u[f++];p=IQ(o,a,S,A,d,c,ls);break;case Yd.Z:p=Ax(i,r,o,a,d,c,ls,!0),i=o,r=a;break}p<h&&(h=p,e.set(ls[0],ls[1]))}return h}var vs=new Jt,yi=new Jt,on=new Jt,dl=new Jt,nl=new Jt;function v4(n,t){if(n){var e=n.getTextGuideLine(),i=n.getTextContent();if(i&&e){var r=n.textGuideLineConfig||{},o=[[0,0],[0,0],[0,0]],a=r.candidates||G0t,s=i.getBoundingRect().clone();s.applyTransform(i.getComputedTransform());var l=1/0,h=r.anchor,u=n.getComputedTransform(),d=u&&Hv([],u),c=t.get("length2")||0;h&&on.copy(h);for(var f=0;f<a.length;f++){var g=a[f];$0t(g,0,s,vs,dl),Jt.scaleAndAdd(yi,vs,dl,c),yi.transform(d);var p=n.getBoundingRect(),v=h?h.distance(yi):n instanceof ue?Y0t(yi,n.path,on):U0t(yi,p,on);v<l&&(l=v,yi.transform(u),on.transform(u),on.toArray(o[0]),yi.toArray(o[1]),vs.toArray(o[2]))}OQ(o,t.get("minTurnAngle")),e.setShape({points:o})}}}var Tx=[],Kr=new Jt;function OQ(n,t){if(t<=180&&t>0){t=t/180*Math.PI,vs.fromArray(n[0]),yi.fromArray(n[1]),on.fromArray(n[2]),Jt.sub(dl,vs,yi),Jt.sub(nl,on,yi);var e=dl.len(),i=nl.len();if(!(e<.001||i<.001)){dl.scale(1/e),nl.scale(1/i);var r=dl.dot(nl),o=Math.cos(t);if(o<r){var a=Ax(yi.x,yi.y,on.x,on.y,vs.x,vs.y,Tx,!1);Kr.fromArray(Tx),Kr.scaleAndAdd(nl,a/Math.tan(Math.PI-t));var s=on.x!==yi.x?(Kr.x-yi.x)/(on.x-yi.x):(Kr.y-yi.y)/(on.y-yi.y);if(isNaN(s))return;s<0?Jt.copy(Kr,yi):s>1&&Jt.copy(Kr,on),Kr.toArray(n[1])}}}}function X0t(n,t,e){if(e<=180&&e>0){e=e/180*Math.PI,vs.fromArray(n[0]),yi.fromArray(n[1]),on.fromArray(n[2]),Jt.sub(dl,yi,vs),Jt.sub(nl,on,yi);var i=dl.len(),r=nl.len();if(!(i<.001||r<.001)){dl.scale(1/i),nl.scale(1/r);var o=dl.dot(t),a=Math.cos(e);if(o<a){var s=Ax(yi.x,yi.y,on.x,on.y,vs.x,vs.y,Tx,!1);Kr.fromArray(Tx);var l=Math.PI/2,h=Math.acos(nl.dot(t)),u=l+h-e;if(u>=l)Jt.copy(Kr,on);else{Kr.scaleAndAdd(nl,s/Math.tan(Math.PI/2-u));var d=on.x!==yi.x?(Kr.x-yi.x)/(on.x-yi.x):(Kr.y-yi.y)/(on.y-yi.y);if(isNaN(d))return;d<0?Jt.copy(Kr,yi):d>1&&Jt.copy(Kr,on)}Kr.toArray(n[1])}}}}function cP(n,t,e,i){var r=e==="normal",o=r?n:n.ensureState(e);o.ignore=t;var a=i.get("smooth");a&&a===!0&&(a=.3),o.shape=o.shape||{},a>0&&(o.shape.smooth=a);var s=i.getModel("lineStyle").getLineStyle();r?n.useStyle(s):o.style=s}function q0t(n,t){var e=t.smooth,i=t.points;if(i)if(n.moveTo(i[0][0],i[0][1]),e>0&&i.length>=3){var r=Ru(i[0],i[1]),o=Ru(i[1],i[2]);if(!r||!o){n.lineTo(i[1][0],i[1][1]),n.lineTo(i[2][0],i[2][1]);return}var a=Math.min(r,o)*e,s=lw([],i[1],i[0],a/r),l=lw([],i[1],i[2],a/o),h=lw([],s,l,.5);n.bezierCurveTo(s[0],s[1],s[0],s[1],h[0],h[1]),n.bezierCurveTo(l[0],l[1],l[0],l[1],i[2][0],i[2][1])}else for(var u=1;u<i.length;u++)n.lineTo(i[u][0],i[u][1])}function Cz(n,t,e){var i=n.getTextGuideLine(),r=n.getTextContent();if(!r){i&&n.removeTextGuideLine();return}for(var o=t.normal,a=o.get("show"),s=r.ignore,l=0;l<Hy.length;l++){var h=Hy[l],u=t[h],d=h==="normal";if(u){var c=u.get("show"),f=d?s:Yt(r.states[h]&&r.states[h].ignore,s);if(f||!Yt(c,a)){var g=d?i:i&&i.states[h];g&&(g.ignore=!0),i&&cP(i,!0,h,u);continue}i||(i=new fo,n.setTextGuideLine(i),!d&&(s||!a)&&cP(i,!0,"normal",t.normal),n.stateProxy&&(i.stateProxy=n.stateProxy)),cP(i,!1,h,u)}}if(i){Ot(i.style,e),i.style.fill=null;var p=o.get("showAbove"),v=n.textGuideLineConfig=n.textGuideLineConfig||{};v.showAbove=p||!1,i.buildPath=q0t}}function wz(n,t){t=t||"labelLine";for(var e={normal:n.getModel(t)},i=0;i<lo.length;i++){var r=lo[i];e[r]=n.getModel([r,t])}return e}function HQ(n){for(var t=[],e=0;e<n.length;e++){var i=n[e];if(!i.defaultAttr.ignore){var r=i.label,o=r.getComputedTransform(),a=r.getBoundingRect(),s=!o||o[1]<1e-5&&o[2]<1e-5,l=r.style.margin||0,h=a.clone();h.applyTransform(o),h.x-=l/2,h.y-=l/2,h.width+=l,h.height+=l;var u=s?new hx(a,o):null;t.push({label:r,labelLine:i.labelLine,rect:h,localRect:a,obb:u,priority:i.priority,defaultAttr:i.defaultAttr,layoutOption:i.computedLayoutOption,axisAligned:s,transform:o})}}return t}function zQ(n,t,e,i,r,o){var a=n.length;if(a<2)return;n.sort(function(C,x){return C.rect[t]-x.rect[t]});for(var s=0,l,h=!1,u=0;u<a;u++){var d=n[u],c=d.rect;l=c[t]-s,l<0&&(c[t]-=l,d.label[t]-=l,h=!0),s=c[t]+c[e]}var f=n[0],g=n[a-1],p,v;m(),p<0&&_(-p,.8),v<0&&_(v,.8),m(),y(p,v,1),y(v,p,-1),m(),p<0&&w(-p),v<0&&w(v);function m(){p=f.rect[t]-i,v=r-g.rect[t]-g.rect[e]}function y(C,x,S){if(C<0){var A=Math.min(x,-C);if(A>0){b(A*S,0,a);var T=A+C;T<0&&_(-T*S,1)}else _(-C*S,1)}}function b(C,x,S){C!==0&&(h=!0);for(var A=x;A<S;A++){var T=n[A],M=T.rect;M[t]+=C,T.label[t]+=C}}function _(C,x){for(var S=[],A=0,T=1;T<a;T++){var M=n[T-1].rect,R=Math.max(n[T].rect[t]-M[t]-M[e],0);S.push(R),A+=R}if(A){var L=Math.min(Math.abs(C)/A,x);if(C>0)for(var T=0;T<a-1;T++){var B=S[T]*L;b(B,0,T+1)}else for(var T=a-1;T>0;T--){var B=S[T-1]*L;b(-B,T,a)}}}function w(C){var x=C<0?-1:1;C=Math.abs(C);for(var S=Math.ceil(C/(a-1)),A=0;A<a-1;A++)if(x>0?b(S,0,A+1):b(-S,a-A-1,a),C-=S,C<=0)return}return h}function K0t(n,t,e,i){return zQ(n,"x","width",t,e)}function FQ(n,t,e,i){return zQ(n,"y","height",t,e)}function NQ(n){var t=[];n.sort(function(p,v){return v.priority-p.priority});var e=new te(0,0,0,0);function i(p){if(!p.ignore){var v=p.ensureState("emphasis");v.ignore==null&&(v.ignore=!1)}p.ignore=!0}for(var r=0;r<n.length;r++){var o=n[r],a=o.axisAligned,s=o.localRect,l=o.transform,h=o.label,u=o.labelLine;e.copy(o.rect),e.width-=.1,e.height-=.1,e.x+=.05,e.y+=.05;for(var d=o.obb,c=!1,f=0;f<t.length;f++){var g=t[f];if(e.intersect(g.rect)){if(a&&g.axisAligned){c=!0;break}if(g.obb||(g.obb=new hx(g.localRect,g.transform)),d||(d=new hx(s,l)),d.intersect(g.obb)){c=!0;break}}}c?(i(h),u&&i(u)):(h.attr("ignore",o.defaultAttr.ignore),u&&u.attr("ignore",o.defaultAttr.labelGuideIgnore),t.push(o))}}function Z0t(n){if(n){for(var t=[],e=0;e<n.length;e++)t.push(n[e].slice());return t}}function J0t(n,t){var e=n.label,i=t&&t.getTextGuideLine();return{dataIndex:n.dataIndex,dataType:n.dataType,seriesIndex:n.seriesModel.seriesIndex,text:n.label.style.text,rect:n.hostRect,labelRect:n.rect,align:e.style.align,verticalAlign:e.style.verticalAlign,labelLinePoints:Z0t(i&&i.shape.points)}}var m4=["align","verticalAlign","width","height","fontSize"],jr=new gh,fP=Te(),Q0t=Te();function kC(n,t,e){for(var i=0;i<e.length;i++){var r=e[i];t[r]!=null&&(n[r]=t[r])}}var LC=["x","y","rotation"],tyt=(function(){function n(){this._labelList=[],this._chartViewList=[]}return n.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},n.prototype._addLabel=function(t,e,i,r,o){var a=r.style,s=r.__hostTarget,l=s.textConfig||{},h=r.getComputedTransform(),u=r.getBoundingRect().plain();te.applyTransform(u,u,h),h?jr.setLocalTransform(h):(jr.x=jr.y=jr.rotation=jr.originX=jr.originY=0,jr.scaleX=jr.scaleY=1),jr.rotation=jo(jr.rotation);var d=r.__hostTarget,c;if(d){c=d.getBoundingRect().plain();var f=d.getComputedTransform();te.applyTransform(c,c,f)}var g=c&&d.getTextGuideLine();this._labelList.push({label:r,labelLine:g,seriesModel:i,dataIndex:t,dataType:e,layoutOption:o,computedLayoutOption:null,rect:u,hostRect:c,priority:c?c.width*c.height:0,defaultAttr:{ignore:r.ignore,labelGuideIgnore:g&&g.ignore,x:jr.x,y:jr.y,scaleX:jr.scaleX,scaleY:jr.scaleY,rotation:jr.rotation,style:{x:a.x,y:a.y,align:a.align,verticalAlign:a.verticalAlign,width:a.width,height:a.height,fontSize:a.fontSize},cursor:r.cursor,attachedPos:l.position,attachedRot:l.rotation}})},n.prototype.addLabelsOfSeries=function(t){var e=this;this._chartViewList.push(t);var i=t.__model,r=i.get("labelLayout");(Dt(r)||pe(r).length)&&t.group.traverse(function(o){if(o.ignore)return!0;var a=o.getTextContent(),s=Vt(o);a&&!a.disableLabelLayout&&e._addLabel(s.dataIndex,s.dataType,i,a,r)})},n.prototype.updateLayoutConfig=function(t){var e=t.getWidth(),i=t.getHeight();function r(b,_){return function(){v4(b,_)}}for(var o=0;o<this._labelList.length;o++){var a=this._labelList[o],s=a.label,l=s.__hostTarget,h=a.defaultAttr,u=void 0;Dt(a.layoutOption)?u=a.layoutOption(J0t(a,l)):u=a.layoutOption,u=u||{},a.computedLayoutOption=u;var d=Math.PI/180;l&&l.setTextConfig({local:!1,position:u.x!=null||u.y!=null?null:h.attachedPos,rotation:u.rotate!=null?u.rotate*d:h.attachedRot,offset:[u.dx||0,u.dy||0]});var c=!1;if(u.x!=null?(s.x=mt(u.x,e),s.setStyle("x",0),c=!0):(s.x=h.x,s.setStyle("x",h.style.x)),u.y!=null?(s.y=mt(u.y,i),s.setStyle("y",0),c=!0):(s.y=h.y,s.setStyle("y",h.style.y)),u.labelLinePoints){var f=l.getTextGuideLine();f&&(f.setShape({points:u.labelLinePoints}),c=!1)}var g=fP(s);g.needsUpdateLabelLine=c,s.rotation=u.rotate!=null?u.rotate*d:h.rotation,s.scaleX=h.scaleX,s.scaleY=h.scaleY;for(var p=0;p<m4.length;p++){var v=m4[p];s.setStyle(v,u[v]!=null?u[v]:h.style[v])}if(u.draggable){if(s.draggable=!0,s.cursor="move",l){var m=a.seriesModel;if(a.dataIndex!=null){var y=a.seriesModel.getData(a.dataType);m=y.getItemModel(a.dataIndex)}s.on("drag",r(l,m.getModel("labelLine")))}}else s.off("drag"),s.cursor=h.cursor}},n.prototype.layout=function(t){var e=t.getWidth(),i=t.getHeight(),r=HQ(this._labelList),o=Ge(r,function(l){return l.layoutOption.moveOverlap==="shiftX"}),a=Ge(r,function(l){return l.layoutOption.moveOverlap==="shiftY"});K0t(o,0,e),FQ(a,0,i);var s=Ge(r,function(l){return l.layoutOption.hideOverlap});NQ(s)},n.prototype.processLabelsOverall=function(){var t=this;z(this._chartViewList,function(e){var i=e.__model,r=e.ignoreLabelLineUpdate,o=i.isAnimationEnabled();e.group.traverse(function(a){if(a.ignore&&!a.forceLabelAnimation)return!0;var s=!r,l=a.getTextContent();!s&&l&&(s=fP(l).needsUpdateLabelLine),s&&t._updateLabelLine(a,i),o&&t._animateLabels(a,i)})})},n.prototype._updateLabelLine=function(t,e){var i=t.getTextContent(),r=Vt(t),o=r.dataIndex;if(i&&o!=null){var a=e.getData(r.dataType),s=a.getItemModel(o),l={},h=a.getItemVisual(o,"style");if(h){var u=a.getVisual("drawType");l.stroke=h[u]}var d=s.getModel("labelLine");Cz(t,wz(s),l),v4(t,d)}},n.prototype._animateLabels=function(t,e){var i=t.getTextContent(),r=t.getTextGuideLine();if(i&&(t.forceLabelAnimation||!i.ignore&&!i.invisible&&!t.disableLabelAnimation&&!gp(t))){var o=fP(i),a=o.oldLayout,s=Vt(t),l=s.dataIndex,h={x:i.x,y:i.y,rotation:i.rotation},u=e.getData(s.dataType);if(a){i.attr(a);var c=t.prevStates;c&&(ee(c,"select")>=0&&i.attr(o.oldLayoutSelect),ee(c,"emphasis")>=0&&i.attr(o.oldLayoutEmphasis)),Ie(i,h,e,l)}else if(i.attr(h),!Wv(i).valueAnimation){var d=Yt(i.style.opacity,1);i.style.opacity=0,Bi(i,{style:{opacity:d}},e,l)}if(o.oldLayout=h,i.states.select){var f=o.oldLayoutSelect={};kC(f,h,LC),kC(f,i.states.select,LC)}if(i.states.emphasis){var g=o.oldLayoutEmphasis={};kC(g,h,LC),kC(g,i.states.emphasis,LC)}kZ(i,l,u,e,e)}if(r&&!r.ignore&&!r.invisible){var o=Q0t(r),a=o.oldLayout,p={points:r.shape.points};a?(r.attr({shape:a}),Ie(r,{shape:p},e)):(r.setShape(p),r.style.strokePercent=0,Bi(r,{style:{strokePercent:1}},e)),o.oldLayout=p}},n})(),gP=Te();function eyt(n){n.registerUpdateLifecycle("series:beforeupdate",function(t,e,i){var r=gP(e).labelManager;r||(r=gP(e).labelManager=new tyt),r.clearLabels()}),n.registerUpdateLifecycle("series:layoutlabels",function(t,e,i){var r=gP(e).labelManager;i.updatedSeries.forEach(function(o){r.addLabelsOfSeries(e.getViewOfSeriesModel(o))}),r.updateLayoutConfig(e),r.layout(e),r.processLabelsOverall()})}var iyt=(function(n){et(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.type="grid",t.dependencies=["xAxis","yAxis"],t.layoutMode="box",t.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},t})(ge),tD=(function(n){et(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",Mn).models[0]},t.type="cartesian2dAxis",t})(ge);In(tD,d_);var WQ={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,showMinLine:!0,showMaxLine:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},nyt=Zt({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},WQ),xz=Zt({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},WQ),ryt=Zt({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},xz),oyt=Ot({logBase:10},xz);const VQ={category:nyt,value:xz,time:ryt,log:oyt};var ayt={value:1,category:1,time:1,log:1};function Xp(n,t,e,i){z(ayt,function(r,o){var a=Zt(Zt({},VQ[o],!0),i,!0),s=(function(l){et(h,l);function h(){var u=l!==null&&l.apply(this,arguments)||this;return u.type=t+"Axis."+o,u}return h.prototype.mergeDefaultAndTheme=function(u,d){var c=Wy(this),f=c?$v(u):{},g=d.getTheme();Zt(u,g.get(o+"Axis")),Zt(u,this.getDefaultOption()),u.type=y4(u),c&&ed(u,f,c)},h.prototype.optionUpdated=function(){var u=this.option;u.type==="category"&&(this.__ordinalMeta=ZE.createByAxisModel(this))},h.prototype.getCategories=function(u){var d=this.option;if(d.type==="category")return u?d.data:this.__ordinalMeta.categories},h.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},h.type=t+"Axis."+o,h.defaultOption=a,h})(e);n.registerComponentModel(s)}),n.registerSubTypeDefaulter(t+"Axis",y4)}function y4(n){return n.type||(n.data?"category":"value")}var syt=(function(){function n(t){this.type="cartesian",this._dimList=[],this._axes={},this.name=t||""}return n.prototype.getAxis=function(t){return this._axes[t]},n.prototype.getAxes=function(){return ct(this._dimList,function(t){return this._axes[t]},this)},n.prototype.getAxesByScale=function(t){return t=t.toLowerCase(),Ge(this.getAxes(),function(e){return e.scale.type===t})},n.prototype.addAxis=function(t){var e=t.dim;this._axes[e]=t,this._dimList.push(e)},n})(),eD=["x","y"];function b4(n){return n.type==="interval"||n.type==="time"}var lyt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="cartesian2d",e.dimensions=eD,e}return t.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var e=this.getAxis("x").scale,i=this.getAxis("y").scale;if(!(!b4(e)||!b4(i))){var r=e.getExtent(),o=i.getExtent(),a=this.dataToPoint([r[0],o[0]]),s=this.dataToPoint([r[1],o[1]]),l=r[1]-r[0],h=o[1]-o[0];if(!(!l||!h)){var u=(s[0]-a[0])/l,d=(s[1]-a[1])/h,c=a[0]-r[0]*u,f=a[1]-o[0]*d,g=this._transform=[u,0,0,d,c,f];this._invTransform=Hv([],g)}}},t.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},t.prototype.containPoint=function(e){var i=this.getAxis("x"),r=this.getAxis("y");return i.contain(i.toLocalCoord(e[0]))&&r.contain(r.toLocalCoord(e[1]))},t.prototype.containData=function(e){return this.getAxis("x").containData(e[0])&&this.getAxis("y").containData(e[1])},t.prototype.containZone=function(e,i){var r=this.dataToPoint(e),o=this.dataToPoint(i),a=this.getArea(),s=new te(r[0],r[1],o[0]-r[0],o[1]-r[1]);return a.intersect(s)},t.prototype.dataToPoint=function(e,i,r){r=r||[];var o=e[0],a=e[1];if(this._transform&&o!=null&&isFinite(o)&&a!=null&&isFinite(a))return Sr(r,e,this._transform);var s=this.getAxis("x"),l=this.getAxis("y");return r[0]=s.toGlobalCoord(s.dataToCoord(o,i)),r[1]=l.toGlobalCoord(l.dataToCoord(a,i)),r},t.prototype.clampData=function(e,i){var r=this.getAxis("x").scale,o=this.getAxis("y").scale,a=r.getExtent(),s=o.getExtent(),l=r.parse(e[0]),h=o.parse(e[1]);return i=i||[],i[0]=Math.min(Math.max(Math.min(a[0],a[1]),l),Math.max(a[0],a[1])),i[1]=Math.min(Math.max(Math.min(s[0],s[1]),h),Math.max(s[0],s[1])),i},t.prototype.pointToData=function(e,i){var r=[];if(this._invTransform)return Sr(r,e,this._invTransform);var o=this.getAxis("x"),a=this.getAxis("y");return r[0]=o.coordToData(o.toLocalCoord(e[0]),i),r[1]=a.coordToData(a.toLocalCoord(e[1]),i),r},t.prototype.getOtherAxis=function(e){return this.getAxis(e.dim==="x"?"y":"x")},t.prototype.getArea=function(e){e=e||0;var i=this.getAxis("x").getGlobalExtent(),r=this.getAxis("y").getGlobalExtent(),o=Math.min(i[0],i[1])-e,a=Math.min(r[0],r[1])-e,s=Math.max(i[0],i[1])-o+e,l=Math.max(r[0],r[1])-a+e;return new te(o,a,s,l)},t})(syt),hyt=(function(n){et(t,n);function t(e,i,r,o,a){var s=n.call(this,e,i,r)||this;return s.index=0,s.type=o||"value",s.position=a||"bottom",s}return t.prototype.isHorizontal=function(){var e=this.position;return e==="top"||e==="bottom"},t.prototype.getGlobalExtent=function(e){var i=this.getExtent();return i[0]=this.toGlobalCoord(i[0]),i[1]=this.toGlobalCoord(i[1]),e&&i[0]>i[1]&&i.reverse(),i},t.prototype.pointToData=function(e,i){return this.coordToData(this.toLocalCoord(e[this.dim==="x"?0:1]),i)},t.prototype.setCategorySortInfo=function(e){if(this.type!=="category")return!1;this.model.option.categorySortInfo=e,this.scale.setSortInfo(e)},t})(Ds);function iD(n,t,e){e=e||{};var i=n.coordinateSystem,r=t.axis,o={},a=r.getAxesOnZeroOf()[0],s=r.position,l=a?"onZero":s,h=r.dim,u=i.getRect(),d=[u.x,u.x+u.width,u.y,u.y+u.height],c={left:0,right:1,top:0,bottom:1,onZero:2},f=t.get("offset")||0,g=h==="x"?[d[2]-f,d[3]+f]:[d[0]-f,d[1]+f];if(a){var p=a.toGlobalCoord(a.dataToCoord(0));g[c.onZero]=Math.max(Math.min(p,g[1]),g[0])}o.position=[h==="y"?g[c[l]]:d[0],h==="x"?g[c[l]]:d[3]],o.rotation=Math.PI/2*(h==="x"?0:1);var v={top:-1,bottom:1,left:-1,right:1};o.labelDirection=o.tickDirection=o.nameDirection=v[s],o.labelOffset=a?g[c[s]]-g[c.onZero]:0,t.get(["axisTick","inside"])&&(o.tickDirection=-o.tickDirection),rr(e.labelInside,t.get(["axisLabel","inside"]))&&(o.labelDirection=-o.labelDirection);var m=t.get(["axisLabel","rotate"]);return o.labelRotate=l==="top"?-m:m,o.z2=1,o}function _4(n){return n.get("coordinateSystem")==="cartesian2d"}function C4(n){var t={xAxisModel:null,yAxisModel:null};return z(t,function(e,i){var r=i.replace(/Model$/,""),o=n.getReferringComponents(r,Mn).models[0];t[i]=o}),t}var pP=Math.log;function GQ(n,t,e){var i=Ih.prototype,r=i.getTicks.call(e),o=i.getTicks.call(e,!0),a=r.length-1,s=i.getInterval.call(e),l=xQ(n,t),h=l.extent,u=l.fixMin,d=l.fixMax;if(n.type==="log"){var c=pP(n.base);h=[pP(h[0])/c,pP(h[1])/c]}n.setExtent(h[0],h[1]),n.calcNiceExtent({splitNumber:a,fixMin:u,fixMax:d});var f=i.getExtent.call(n);u&&(h[0]=f[0]),d&&(h[1]=f[1]);var g=i.getInterval.call(n),p=h[0],v=h[1];if(u&&d)g=(v-p)/a;else if(u)for(v=h[0]+g*a;v<h[1]&&isFinite(v)&&isFinite(h[1]);)g=hP(g),v=h[0]+g*a;else if(d)for(p=h[1]-g*a;p>h[0]&&isFinite(p)&&isFinite(h[0]);)g=hP(g),p=h[1]-g*a;else{var m=n.getTicks().length-1;m>a&&(g=hP(g));var y=g*a;v=Math.ceil(h[1]/g)*g,p=Ji(v-y),p<0&&h[0]>=0?(p=0,v=Ji(y)):v>0&&h[1]<=0&&(v=0,p=-Ji(y))}var b=(r[0].value-o[0].value)/s,_=(r[a].value-o[a].value)/s;i.setExtent.call(n,p+g*b,v+g*_),i.setInterval.call(n,g),(b||_)&&i.setNiceExtent.call(n,p+g,v-g)}var uyt=(function(){function n(t,e,i){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=eD,this._initCartesian(t,e,i),this.model=t}return n.prototype.getRect=function(){return this._rect},n.prototype.update=function(t,e){var i=this._axesMap;this._updateScale(t,this.model);function r(a){var s,l=pe(a),h=l.length;if(h){for(var u=[],d=h-1;d>=0;d--){var c=+l[d],f=a[c],g=f.model,p=f.scale;JE(p)&&g.get("alignTicks")&&g.get("interval")==null?u.push(f):(Yp(p,g),JE(p)&&(s=f))}u.length&&(s||(s=u.pop(),Yp(s.scale,s.model)),z(u,function(v){GQ(v.scale,v.model,s.scale)}))}}r(i.x),r(i.y);var o={};z(i.x,function(a){w4(i,"y",a,o)}),z(i.y,function(a){w4(i,"x",a,o)}),this.resize(this.model,e)},n.prototype.resize=function(t,e,i){var r=t.getBoxLayoutParams(),o=!i&&t.get("containLabel"),a=Vn(r,{width:e.getWidth(),height:e.getHeight()});this._rect=a;var s=this._axesList;l(),o&&(z(s,function(h){if(!h.model.get(["axisLabel","inside"])){var u=S0t(h);if(u){var d=h.isHorizontal()?"height":"width",c=h.model.get(["axisLabel","margin"]);a[d]-=u[d]+c,h.position==="top"?a.y+=u.height+c:h.position==="left"&&(a.x+=u.width+c)}}}),l()),z(this._coordsList,function(h){h.calcAffineTransform()});function l(){z(s,function(h){var u=h.isHorizontal(),d=u?[0,a.width]:[0,a.height],c=h.inverse?1:0;h.setExtent(d[c],d[1-c]),dyt(h,u?a.x:a.y)})}},n.prototype.getAxis=function(t,e){var i=this._axesMap[t];if(i!=null)return i[e||0]},n.prototype.getAxes=function(){return this._axesList.slice()},n.prototype.getCartesian=function(t,e){if(t!=null&&e!=null){var i="x"+t+"y"+e;return this._coordsMap[i]}Ht(t)&&(e=t.yAxisIndex,t=t.xAxisIndex);for(var r=0,o=this._coordsList;r<o.length;r++)if(o[r].getAxis("x").index===t||o[r].getAxis("y").index===e)return o[r]},n.prototype.getCartesians=function(){return this._coordsList.slice()},n.prototype.convertToPixel=function(t,e,i){var r=this._findConvertTarget(e);return r.cartesian?r.cartesian.dataToPoint(i):r.axis?r.axis.toGlobalCoord(r.axis.dataToCoord(i)):null},n.prototype.convertFromPixel=function(t,e,i){var r=this._findConvertTarget(e);return r.cartesian?r.cartesian.pointToData(i):r.axis?r.axis.coordToData(r.axis.toLocalCoord(i)):null},n.prototype._findConvertTarget=function(t){var e=t.seriesModel,i=t.xAxisModel||e&&e.getReferringComponents("xAxis",Mn).models[0],r=t.yAxisModel||e&&e.getReferringComponents("yAxis",Mn).models[0],o=t.gridModel,a=this._coordsList,s,l;if(e)s=e.coordinateSystem,ee(a,s)<0&&(s=null);else if(i&&r)s=this.getCartesian(i.componentIndex,r.componentIndex);else if(i)l=this.getAxis("x",i.componentIndex);else if(r)l=this.getAxis("y",r.componentIndex);else if(o){var h=o.coordinateSystem;h===this&&(s=this._coordsList[0])}return{cartesian:s,axis:l}},n.prototype.containPoint=function(t){var e=this._coordsList[0];if(e)return e.containPoint(t)},n.prototype._initCartesian=function(t,e,i){var r=this,o=this,a={left:!1,right:!1,top:!1,bottom:!1},s={x:{},y:{}},l={x:0,y:0};if(e.eachComponent("xAxis",h("x"),this),e.eachComponent("yAxis",h("y"),this),!l.x||!l.y){this._axesMap={},this._axesList=[];return}this._axesMap=s,z(s.x,function(u,d){z(s.y,function(c,f){var g="x"+d+"y"+f,p=new lyt(g);p.master=r,p.model=t,r._coordsMap[g]=p,r._coordsList.push(p),p.addAxis(u),p.addAxis(c)})});function h(u){return function(d,c){if(vP(d,t)){var f=d.get("position");u==="x"?f!=="top"&&f!=="bottom"&&(f=a.bottom?"top":"bottom"):f!=="left"&&f!=="right"&&(f=a.left?"right":"left"),a[f]=!0;var g=new hyt(u,hM(d),[0,0],d.get("type"),f),p=g.type==="category";g.onBand=p&&d.get("boundaryGap"),g.inverse=d.get("inverse"),d.axis=g,g.model=d,g.grid=o,g.index=c,o._axesList.push(g),s[u][c]=g,l[u]++}}}},n.prototype._updateScale=function(t,e){z(this._axesList,function(r){if(r.scale.setExtent(1/0,-1/0),r.type==="category"){var o=r.model.get("categorySortInfo");r.scale.setSortInfo(o)}}),t.eachSeries(function(r){if(_4(r)){var o=C4(r),a=o.xAxisModel,s=o.yAxisModel;if(!vP(a,e)||!vP(s,e))return;var l=this.getCartesian(a.componentIndex,s.componentIndex),h=r.getData(),u=l.getAxis("x"),d=l.getAxis("y");i(h,u),i(h,d)}},this);function i(r,o){z(Sx(r,o.dim),function(a){o.scale.unionExtentFromData(r,a)})}},n.prototype.getTooltipAxes=function(t){var e=[],i=[];return z(this.getCartesians(),function(r){var o=t!=null&&t!=="auto"?r.getAxis(t):r.getBaseAxis(),a=r.getOtherAxis(o);ee(e,o)<0&&e.push(o),ee(i,a)<0&&i.push(a)}),{baseAxes:e,otherAxes:i}},n.create=function(t,e){var i=[];return t.eachComponent("grid",function(r,o){var a=new n(r,t,e);a.name="grid_"+o,a.resize(r,e,!0),r.coordinateSystem=a,i.push(a)}),t.eachSeries(function(r){if(_4(r)){var o=C4(r),a=o.xAxisModel,s=o.yAxisModel,l=a.getCoordSysModel(),h=l.coordinateSystem;r.coordinateSystem=h.getCartesian(a.componentIndex,s.componentIndex)}}),i},n.dimensions=eD,n})();function vP(n,t){return n.getCoordSysModel()===t}function w4(n,t,e,i){e.getAxesOnZeroOf=function(){return o?[o]:[]};var r=n[t],o,a=e.model,s=a.get(["axisLine","onZero"]),l=a.get(["axisLine","onZeroAxisIndex"]);if(!s)return;if(l!=null)x4(r[l])&&(o=r[l]);else for(var h in r)if(r.hasOwnProperty(h)&&x4(r[h])&&!i[u(r[h])]){o=r[h];break}o&&(i[u(o)]=!0);function u(d){return d.dim+"_"+d.index}}function x4(n){return n&&n.type!=="category"&&n.type!=="time"&&x0t(n)}function dyt(n,t){var e=n.getExtent(),i=e[0]+e[1];n.toGlobalCoord=n.dim==="x"?function(r){return r+t}:function(r){return i-r+t},n.toLocalCoord=n.dim==="x"?function(r){return r-t}:function(r){return i-r+t}}var Du=Math.PI,ao=(function(){function n(t,e){this.group=new Ft,this.opt=e,this.axisModel=t,Ot(e,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var i=new Ft({x:e.position[0],y:e.position[1],rotation:e.rotation});i.updateTransform(),this._transformGroup=i}return n.prototype.hasBuilder=function(t){return!!S4[t]},n.prototype.add=function(t){S4[t](this.opt,this.axisModel,this.group,this._transformGroup)},n.prototype.getGroup=function(){return this.group},n.innerTextLayout=function(t,e,i){var r=HK(e-t),o,a;return Iy(r)?(a=i>0?"top":"bottom",o="center"):Iy(r-Du)?(a=i>0?"bottom":"top",o="center"):(a="middle",r>0&&r<Du?o=i>0?"right":"left":o=i>0?"left":"right"),{rotation:r,textAlign:o,textVerticalAlign:a}},n.makeAxisEventDataBase=function(t){var e={componentType:t.mainType,componentIndex:t.componentIndex};return e[t.mainType+"Index"]=t.componentIndex,e},n.isLabelSilent=function(t){var e=t.get("tooltip");return t.get("silent")||!(t.get("triggerEvent")||e&&e.show)},n})(),S4={axisLine:function(n,t,e,i){var r=t.get(["axisLine","show"]);if(r==="auto"&&n.handleAutoShown&&(r=n.handleAutoShown("axisLine")),!!r){var o=t.axis.getExtent(),a=i.transform,s=[o[0],0],l=[o[1],0],h=s[0]>l[0];a&&(Sr(s,s,a),Sr(l,l,a));var u=ht({lineCap:"round"},t.getModel(["axisLine","lineStyle"]).getLineStyle()),d=new Un({shape:{x1:s[0],y1:s[1],x2:l[0],y2:l[1]},style:u,strokeContainThreshold:n.strokeContainThreshold||5,silent:!0,z2:1});$p(d.shape,d.style.lineWidth),d.anid="line",e.add(d);var c=t.get(["axisLine","symbol"]);if(c!=null){var f=t.get(["axisLine","symbolSize"]);Ct(c)&&(c=[c,c]),(Ct(f)||Le(f))&&(f=[f,f]);var g=Jf(t.get(["axisLine","symbolOffset"])||0,f),p=f[0],v=f[1];z([{rotate:n.rotation+Math.PI/2,offset:g[0],r:0},{rotate:n.rotation-Math.PI/2,offset:g[1],r:Math.sqrt((s[0]-l[0])*(s[0]-l[0])+(s[1]-l[1])*(s[1]-l[1]))}],function(m,y){if(c[y]!=="none"&&c[y]!=null){var b=En(c[y],-p/2,-v/2,p,v,u.stroke,!0),_=m.r+m.offset,w=h?l:s;b.attr({rotation:m.rotate,x:w[0]+_*Math.cos(n.rotation),y:w[1]-_*Math.sin(n.rotation),silent:!0,z2:11}),e.add(b)}})}}},axisTickLabel:function(n,t,e,i){var r=gyt(e,i,t,n),o=vyt(e,i,t,n);if(fyt(t,o,r),pyt(e,i,t,n.tickDirection),t.get(["axisLabel","hideOverlap"])){var a=HQ(ct(o,function(s){return{label:s,priority:s.z2,defaultAttr:{ignore:s.ignore}}}));NQ(a)}},axisName:function(n,t,e,i){var r=rr(n.axisName,t.get("name"));if(r){var o=t.get("nameLocation"),a=n.nameDirection,s=t.getModel("nameTextStyle"),l=t.get("nameGap")||0,h=t.axis.getExtent(),u=h[0]>h[1]?-1:1,d=[o==="start"?h[0]-u*l:o==="end"?h[1]+u*l:(h[0]+h[1])/2,T4(o)?n.labelOffset+a*l:0],c,f=t.get("nameRotate");f!=null&&(f=f*Du/180);var g;T4(o)?c=ao.innerTextLayout(n.rotation,f??n.rotation,a):(c=cyt(n.rotation,o,f||0,h),g=n.axisNameAvailableWidth,g!=null&&(g=Math.abs(g/Math.sin(c.rotation)),!isFinite(g)&&(g=null)));var p=s.getFont(),v=t.get("nameTruncate",!0)||{},m=v.ellipsis,y=rr(n.nameTruncateMaxWidth,v.maxWidth,g),b=new Re({x:d[0],y:d[1],rotation:c.rotation,silent:ao.isLabelSilent(t),style:_i(s,{text:r,font:p,overflow:"truncate",width:y,ellipsis:m,fill:s.getTextColor()||t.get(["axisLine","lineStyle","color"]),align:s.get("align")||c.textAlign,verticalAlign:s.get("verticalAlign")||c.textVerticalAlign}),z2:1});if(Kf({el:b,componentModel:t,itemName:r}),b.__fullText=r,b.anid="name",t.get("triggerEvent")){var _=ao.makeAxisEventDataBase(t);_.targetType="axisName",_.name=r,Vt(b).eventData=_}i.add(b),b.updateTransform(),e.add(b),b.decomposeTransform()}}};function cyt(n,t,e,i){var r=HK(e-n),o,a,s=i[0]>i[1],l=t==="start"&&!s||t!=="start"&&s;return Iy(r-Du/2)?(a=l?"bottom":"top",o="center"):Iy(r-Du*1.5)?(a=l?"top":"bottom",o="center"):(a="middle",r<Du*1.5&&r>Du/2?o=l?"left":"right":o=l?"right":"left"),{rotation:r,textAlign:o,textVerticalAlign:a}}function fyt(n,t,e){if(!SQ(n.axis)){var i=n.get(["axisLabel","showMinLabel"]),r=n.get(["axisLabel","showMaxLabel"]);t=t||[],e=e||[];var o=t[0],a=t[1],s=t[t.length-1],l=t[t.length-2],h=e[0],u=e[1],d=e[e.length-1],c=e[e.length-2];i===!1?(aa(o),aa(h)):A4(o,a)&&(i?(aa(a),aa(u)):(aa(o),aa(h))),r===!1?(aa(s),aa(d)):A4(l,s)&&(r?(aa(l),aa(c)):(aa(s),aa(d)))}}function aa(n){n&&(n.ignore=!0)}function A4(n,t){var e=n&&n.getBoundingRect().clone(),i=t&&t.getBoundingRect().clone();if(!(!e||!i)){var r=DT([]);return qf(r,r,-n.rotation),e.applyTransform(Ch([],r,n.getLocalTransform())),i.applyTransform(Ch([],r,t.getLocalTransform())),e.intersect(i)}}function T4(n){return n==="middle"||n==="center"}function $Q(n,t,e,i,r){for(var o=[],a=[],s=[],l=0;l<n.length;l++){var h=n[l].coord;a[0]=h,a[1]=0,s[0]=h,s[1]=e,t&&(Sr(a,a,t),Sr(s,s,t));var u=new Un({shape:{x1:a[0],y1:a[1],x2:s[0],y2:s[1]},style:i,z2:2,autoBatch:!0,silent:!0});$p(u.shape,u.style.lineWidth),u.anid=r+"_"+n[l].tickValue,o.push(u)}return o}function gyt(n,t,e,i){var r=e.axis,o=e.getModel("axisTick"),a=o.get("show");if(a==="auto"&&i.handleAutoShown&&(a=i.handleAutoShown("axisTick")),!(!a||r.scale.isBlank())){for(var s=o.getModel("lineStyle"),l=i.tickDirection*o.get("length"),h=r.getTicksCoords(),u=$Q(h,t.transform,l,Ot(s.getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])}),"ticks"),d=0;d<u.length;d++)n.add(u[d]);return u}}function pyt(n,t,e,i){var r=e.axis,o=e.getModel("minorTick");if(!(!o.get("show")||r.scale.isBlank())){var a=r.getMinorTicksCoords();if(a.length)for(var s=o.getModel("lineStyle"),l=i*o.get("length"),h=Ot(s.getLineStyle(),Ot(e.getModel("axisTick").getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])})),u=0;u<a.length;u++)for(var d=$Q(a[u],t.transform,l,h,"minorticks_"+u),c=0;c<d.length;c++)n.add(d[c])}}function vyt(n,t,e,i){var r=e.axis,o=rr(i.axisLabelShow,e.get(["axisLabel","show"]));if(!(!o||r.scale.isBlank())){var a=e.getModel("axisLabel"),s=a.get("margin"),l=r.getViewLabels(),h=(rr(i.labelRotate,a.get("rotate"))||0)*Du/180,u=ao.innerTextLayout(i.rotation,h,i.labelDirection),d=e.getCategories&&e.getCategories(!0),c=[],f=ao.isLabelSilent(e),g=e.get("triggerEvent");return z(l,function(p,v){var m=r.scale.type==="ordinal"?r.scale.getRawOrdinalNumber(p.tickValue):p.tickValue,y=p.formattedLabel,b=p.rawLabel,_=a;if(d&&d[m]){var w=d[m];Ht(w)&&w.textStyle&&(_=new Ze(w.textStyle,a,e.ecModel))}var C=_.getTextColor()||e.get(["axisLine","lineStyle","color"]),x=r.dataToCoord(m),S=_.getShallow("align",!0)||u.textAlign,A=Yt(_.getShallow("alignMinLabel",!0),S),T=Yt(_.getShallow("alignMaxLabel",!0),S),M=_.getShallow("verticalAlign",!0)||_.getShallow("baseline",!0)||u.textVerticalAlign,R=Yt(_.getShallow("verticalAlignMinLabel",!0),M),L=Yt(_.getShallow("verticalAlignMaxLabel",!0),M),B=new Re({x,y:i.labelOffset+i.labelDirection*s,rotation:u.rotation,silent:f,z2:10+(p.level||0),style:_i(_,{text:y,align:v===0?A:v===l.length-1?T:S,verticalAlign:v===0?R:v===l.length-1?L:M,fill:Dt(C)?C(r.type==="category"?b:r.type==="value"?m+"":m,v):C})});if(B.anid="label_"+m,Kf({el:B,componentModel:e,itemName:y,formatterParamsExtra:{isTruncated:function(){return B.isTruncated},value:b,tickIndex:v}}),g){var P=ao.makeAxisEventDataBase(e);P.targetType="axisLabel",P.value=b,P.tickIndex=v,r.type==="category"&&(P.dataIndex=m),Vt(B).eventData=P}t.add(B),B.updateTransform(),c.push(B),n.add(B),B.decomposeTransform()}),c}}function myt(n,t){var e={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return yyt(e,n,t),e.seriesInvolved&&_yt(e,n),e}function yyt(n,t,e){var i=t.getComponent("tooltip"),r=t.getComponent("axisPointer"),o=r.get("link",!0)||[],a=[];z(e.getCoordinateSystems(),function(s){if(!s.axisPointerEnabled)return;var l=Yy(s.model),h=n.coordSysAxesInfo[l]={};n.coordSysMap[l]=s;var u=s.model,d=u.getModel("tooltip",i);if(z(s.getAxes(),qt(p,!1,null)),s.getTooltipAxes&&i&&d.get("show")){var c=d.get("trigger")==="axis",f=d.get(["axisPointer","type"])==="cross",g=s.getTooltipAxes(d.get(["axisPointer","axis"]));(c||f)&&z(g.baseAxes,qt(p,f?"cross":!0,c)),f&&z(g.otherAxes,qt(p,"cross",!1))}function p(v,m,y){var b=y.model.getModel("axisPointer",r),_=b.get("show");if(!(!_||_==="auto"&&!v&&!nD(b))){m==null&&(m=b.get("triggerTooltip")),b=v?byt(y,d,r,t,v,m):b;var w=b.get("snap"),C=b.get("triggerEmphasis"),x=Yy(y.model),S=m||w||y.type==="category",A=n.axesInfo[x]={key:x,axis:y,coordSys:s,axisPointerModel:b,triggerTooltip:m,triggerEmphasis:C,involveSeries:S,snap:w,useHandle:nD(b),seriesModels:[],linkGroup:null};h[x]=A,n.seriesInvolved=n.seriesInvolved||S;var T=Cyt(o,y);if(T!=null){var M=a[T]||(a[T]={axesInfo:{}});M.axesInfo[x]=A,M.mapper=o[T].mapper,A.linkGroup=M}}}})}function byt(n,t,e,i,r,o){var a=t.getModel("axisPointer"),s=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],l={};z(s,function(c){l[c]=zt(a.get(c))}),l.snap=n.type!=="category"&&!!o,a.get("type")==="cross"&&(l.type="line");var h=l.label||(l.label={});if(h.show==null&&(h.show=!1),r==="cross"){var u=a.get(["label","show"]);if(h.show=u??!0,!o){var d=l.lineStyle=a.get("crossStyle");d&&Ot(h,d.textStyle)}}return n.model.getModel("axisPointer",new Ze(l,e,i))}function _yt(n,t){t.eachSeries(function(e){var i=e.coordinateSystem,r=e.get(["tooltip","trigger"],!0),o=e.get(["tooltip","show"],!0);!i||r==="none"||r===!1||r==="item"||o===!1||e.get(["axisPointer","show"],!0)===!1||z(n.coordSysAxesInfo[Yy(i.model)],function(a){var s=a.axis;i.getAxis(s.dim)===s&&(a.seriesModels.push(e),a.seriesDataCount==null&&(a.seriesDataCount=0),a.seriesDataCount+=e.getData().count())})})}function Cyt(n,t){for(var e=t.model,i=t.dim,r=0;r<n.length;r++){var o=n[r]||{};if(mP(o[i+"AxisId"],e.id)||mP(o[i+"AxisIndex"],e.componentIndex)||mP(o[i+"AxisName"],e.name))return r}}function mP(n,t){return n==="all"||ut(n)&&ee(n,t)>=0||n===t}function wyt(n){var t=Sz(n);if(t){var e=t.axisPointerModel,i=t.axis.scale,r=e.option,o=e.get("status"),a=e.get("value");a!=null&&(a=i.parse(a));var s=nD(e);o==null&&(r.status=s?"show":"hide");var l=i.getExtent().slice();l[0]>l[1]&&l.reverse(),(a==null||a>l[1])&&(a=l[1]),a<l[0]&&(a=l[0]),r.value=a,s&&(r.status=t.axis.scale.isBlank()?"hide":"show")}}function Sz(n){var t=(n.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return t&&t.axesInfo[Yy(n)]}function xyt(n){var t=Sz(n);return t&&t.axisPointerModel}function nD(n){return!!n.get(["handle","show"])}function Yy(n){return n.type+"||"+n.id}var M4={},tg=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,i,r,o){this.axisPointerClass&&wyt(e),n.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(e,r,!0)},t.prototype.updateAxisPointer=function(e,i,r,o){this._doUpdateAxisPointerClass(e,r,!1)},t.prototype.remove=function(e,i){var r=this._axisPointer;r&&r.remove(i)},t.prototype.dispose=function(e,i){this._disposeAxisPointer(i),n.prototype.dispose.apply(this,arguments)},t.prototype._doUpdateAxisPointerClass=function(e,i,r){var o=t.getAxisPointerClass(this.axisPointerClass);if(o){var a=xyt(e);a?(this._axisPointer||(this._axisPointer=new o)).render(e,a,i,r):this._disposeAxisPointer(i)}},t.prototype._disposeAxisPointer=function(e){this._axisPointer&&this._axisPointer.dispose(e),this._axisPointer=null},t.registerAxisPointerClass=function(e,i){M4[e]=i},t.getAxisPointerClass=function(e){return e&&M4[e]},t.type="axis",t})(Di),rD=Te();function jQ(n,t,e,i){var r=e.axis;if(!r.scale.isBlank()){var o=e.getModel("splitArea"),a=o.getModel("areaStyle"),s=a.get("color"),l=i.coordinateSystem.getRect(),h=r.getTicksCoords({tickModel:o,clamp:!0});if(h.length){var u=s.length,d=rD(n).splitAreaColors,c=Pt(),f=0;if(d)for(var g=0;g<h.length;g++){var p=d.get(h[g].tickValue);if(p!=null){f=(p+(u-1)*g)%u;break}}var v=r.toGlobalCoord(h[0].coord),m=a.getAreaStyle();s=ut(s)?s:[s];for(var g=1;g<h.length;g++){var y=r.toGlobalCoord(h[g].coord),b=void 0,_=void 0,w=void 0,C=void 0;r.isHorizontal()?(b=v,_=l.y,w=y-b,C=l.height,v=b+w):(b=l.x,_=v,w=l.width,C=y-_,v=_+C);var x=h[g-1].tickValue;x!=null&&c.set(x,f),t.add(new Ae({anid:x!=null?"area_"+x:null,shape:{x:b,y:_,width:w,height:C},style:Ot({fill:s[f]},m),autoBatch:!0,silent:!0})),f=(f+1)%u}rD(n).splitAreaColors=c}}}function UQ(n){rD(n).splitAreaColors=null}var Syt=["axisLine","axisTickLabel","axisName"],Ayt=["splitArea","splitLine","minorSplitLine"],YQ=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e.axisPointerClass="CartesianAxisPointer",e}return t.prototype.render=function(e,i,r,o){this.group.removeAll();var a=this._axisGroup;if(this._axisGroup=new Ft,this.group.add(this._axisGroup),!!e.get("show")){var s=e.getCoordSysModel(),l=iD(s,e),h=new ao(e,ht({handleAutoShown:function(d){for(var c=s.coordinateSystem.getCartesians(),f=0;f<c.length;f++)if(JE(c[f].getOtherAxis(e.axis).scale))return!0;return!1}},l));z(Syt,h.add,h),this._axisGroup.add(h.getGroup()),z(Ayt,function(d){e.get([d,"show"])&&Tyt[d](this,this._axisGroup,e,s)},this);var u=o&&o.type==="changeAxisOrder"&&o.isInitSort;u||a_(a,this._axisGroup,e),n.prototype.render.call(this,e,i,r,o)}},t.prototype.remove=function(){UQ(this)},t.type="cartesianAxis",t})(tg),Tyt={splitLine:function(n,t,e,i){var r=e.axis;if(!r.scale.isBlank()){var o=e.getModel("splitLine"),a=o.getModel("lineStyle"),s=a.get("color"),l=o.get("showMinLine")!==!1,h=o.get("showMaxLine")!==!1;s=ut(s)?s:[s];for(var u=i.coordinateSystem.getRect(),d=r.isHorizontal(),c=0,f=r.getTicksCoords({tickModel:o}),g=[],p=[],v=a.getLineStyle(),m=0;m<f.length;m++){var y=r.toGlobalCoord(f[m].coord);if(!(m===0&&!l||m===f.length-1&&!h)){var b=f[m].tickValue;d?(g[0]=y,g[1]=u.y,p[0]=y,p[1]=u.y+u.height):(g[0]=u.x,g[1]=y,p[0]=u.x+u.width,p[1]=y);var _=c++%s.length,w=new Un({anid:b!=null?"line_"+b:null,autoBatch:!0,shape:{x1:g[0],y1:g[1],x2:p[0],y2:p[1]},style:Ot({stroke:s[_]},v),silent:!0});$p(w.shape,v.lineWidth),t.add(w)}}}},minorSplitLine:function(n,t,e,i){var r=e.axis,o=e.getModel("minorSplitLine"),a=o.getModel("lineStyle"),s=i.coordinateSystem.getRect(),l=r.isHorizontal(),h=r.getMinorTicksCoords();if(h.length)for(var u=[],d=[],c=a.getLineStyle(),f=0;f<h.length;f++)for(var g=0;g<h[f].length;g++){var p=r.toGlobalCoord(h[f][g].coord);l?(u[0]=p,u[1]=s.y,d[0]=p,d[1]=s.y+s.height):(u[0]=s.x,u[1]=p,d[0]=s.x+s.width,d[1]=p);var v=new Un({anid:"minor_line_"+h[f][g].tickValue,autoBatch:!0,shape:{x1:u[0],y1:u[1],x2:d[0],y2:d[1]},style:c,silent:!0});$p(v.shape,c.lineWidth),t.add(v)}},splitArea:function(n,t,e,i){jQ(n,t,e,i)}},XQ=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.type="xAxis",t})(YQ),Myt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=XQ.type,e}return t.type="yAxis",t})(YQ),Ryt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="grid",e}return t.prototype.render=function(e,i){this.group.removeAll(),e.get("show")&&this.group.add(new Ae({shape:e.coordinateSystem.getRect(),style:Ot({fill:e.get("backgroundColor")},e.getItemStyle()),silent:!0,z2:-1}))},t.type="grid",t})(Di),R4={offset:0};function qQ(n){n.registerComponentView(Ryt),n.registerComponentModel(iyt),n.registerCoordinateSystem("cartesian2d",uyt),Xp(n,"x",tD,R4),Xp(n,"y",tD,R4),n.registerComponentView(XQ),n.registerComponentView(Myt),n.registerPreprocessor(function(t){t.xAxis&&t.yAxis&&!t.grid&&(t.grid={})})}var wc=Te(),P4=zt,yP=xt,Az=(function(){function n(){this._dragging=!1,this.animationThreshold=15}return n.prototype.render=function(t,e,i,r){var o=e.get("value"),a=e.get("status");if(this._axisModel=t,this._axisPointerModel=e,this._api=i,!(!r&&this._lastValue===o&&this._lastStatus===a)){this._lastValue=o,this._lastStatus=a;var s=this._group,l=this._handle;if(!a||a==="hide"){s&&s.hide(),l&&l.hide();return}s&&s.show(),l&&l.show();var h={};this.makeElOption(h,o,t,e,i);var u=h.graphicKey;u!==this._lastGraphicKey&&this.clear(i),this._lastGraphicKey=u;var d=this._moveAnimation=this.determineAnimation(t,e);if(!s)s=this._group=new Ft,this.createPointerEl(s,h,t,e),this.createLabelEl(s,h,t,e),i.getZr().add(s);else{var c=qt(B4,e,d);this.updatePointerEl(s,h,c),this.updateLabelEl(s,h,c,e)}L4(s,e,!0),this._renderHandle(o)}},n.prototype.remove=function(t){this.clear(t)},n.prototype.dispose=function(t){this.clear(t)},n.prototype.determineAnimation=function(t,e){var i=e.get("animation"),r=t.axis,o=r.type==="category",a=e.get("snap");if(!a&&!o)return!1;if(i==="auto"||i==null){var s=this.animationThreshold;if(o&&r.getBandWidth()>s)return!0;if(a){var l=Sz(t).seriesDataCount,h=r.getExtent();return Math.abs(h[0]-h[1])/l>s}return!1}return i===!0},n.prototype.makeElOption=function(t,e,i,r,o){},n.prototype.createPointerEl=function(t,e,i,r){var o=e.pointer;if(o){var a=wc(t).pointerEl=new Zf[o.type](P4(e.pointer));t.add(a)}},n.prototype.createLabelEl=function(t,e,i,r){if(e.label){var o=wc(t).labelEl=new Re(P4(e.label));t.add(o),k4(o,r)}},n.prototype.updatePointerEl=function(t,e,i){var r=wc(t).pointerEl;r&&e.pointer&&(r.setStyle(e.pointer.style),i(r,{shape:e.pointer.shape}))},n.prototype.updateLabelEl=function(t,e,i,r){var o=wc(t).labelEl;o&&(o.setStyle(e.label.style),i(o,{x:e.label.x,y:e.label.y}),k4(o,r))},n.prototype._renderHandle=function(t){if(!(this._dragging||!this.updateHandleTransform)){var e=this._axisPointerModel,i=this._api.getZr(),r=this._handle,o=e.getModel("handle"),a=e.get("status");if(!o.get("show")||!a||a==="hide"){r&&i.remove(r),this._handle=null;return}var s;this._handle||(s=!0,r=this._handle=s_(o.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(h){Bh(h.event)},onmousedown:yP(this._onHandleDragMove,this,0,0),drift:yP(this._onHandleDragMove,this),ondragend:yP(this._onHandleDragEnd,this)}),i.add(r)),L4(r,e,!1),r.setStyle(o.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var l=o.get("size");ut(l)||(l=[l,l]),r.scaleX=l[0]/2,r.scaleY=l[1]/2,Yv(this,"_doDispatchAxisPointer",o.get("throttle")||0,"fixRate"),this._moveHandleToValue(t,s)}},n.prototype._moveHandleToValue=function(t,e){B4(this._axisPointerModel,!e&&this._moveAnimation,this._handle,bP(this.getHandleTransform(t,this._axisModel,this._axisPointerModel)))},n.prototype._onHandleDragMove=function(t,e){var i=this._handle;if(i){this._dragging=!0;var r=this.updateHandleTransform(bP(i),[t,e],this._axisModel,this._axisPointerModel);this._payloadInfo=r,i.stopAnimation(),i.attr(bP(r)),wc(i).lastProp=null,this._doDispatchAxisPointer()}},n.prototype._doDispatchAxisPointer=function(){var t=this._handle;if(t){var e=this._payloadInfo,i=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:e.cursorPoint[0],y:e.cursorPoint[1],tooltipOption:e.tooltipOption,axesInfo:[{axisDim:i.axis.dim,axisIndex:i.componentIndex}]})}},n.prototype._onHandleDragEnd=function(){this._dragging=!1;var t=this._handle;if(t){var e=this._axisPointerModel.get("value");this._moveHandleToValue(e),this._api.dispatchAction({type:"hideTip"})}},n.prototype.clear=function(t){this._lastValue=null,this._lastStatus=null;var e=t.getZr(),i=this._group,r=this._handle;e&&i&&(this._lastGraphicKey=null,i&&e.remove(i),r&&e.remove(r),this._group=null,this._handle=null,this._payloadInfo=null),Gy(this,"_doDispatchAxisPointer")},n.prototype.doClear=function(){},n.prototype.buildLabel=function(t,e,i){return i=i||0,{x:t[i],y:t[1-i],width:e[i],height:e[1-i]}},n})();function B4(n,t,e,i){KQ(wc(e).lastProp,i)||(wc(e).lastProp=i,t?Ie(e,i,n):(e.stopAnimation(),e.attr(i)))}function KQ(n,t){if(Ht(n)&&Ht(t)){var e=!0;return z(t,function(i,r){e=e&&KQ(n[r],i)}),!!e}else return n===t}function k4(n,t){n[t.get(["label","show"])?"show":"hide"]()}function bP(n){return{x:n.x||0,y:n.y||0,rotation:n.rotation||0}}function L4(n,t,e){var i=t.get("z"),r=t.get("zlevel");n&&n.traverse(function(o){o.type!=="group"&&(i!=null&&(o.z=i),r!=null&&(o.zlevel=r),o.silent=e)})}function Tz(n){var t=n.get("type"),e=n.getModel(t+"Style"),i;return t==="line"?(i=e.getLineStyle(),i.fill=null):t==="shadow"&&(i=e.getAreaStyle(),i.stroke=null),i}function ZQ(n,t,e,i,r){var o=e.get("value"),a=JQ(o,t.axis,t.ecModel,e.get("seriesDataIndices"),{precision:e.get(["label","precision"]),formatter:e.get(["label","formatter"])}),s=e.getModel("label"),l=Gv(s.get("padding")||0),h=s.getFont(),u=t_(a,h),d=r.position,c=u.width+l[1]+l[3],f=u.height+l[0]+l[2],g=r.align;g==="right"&&(d[0]-=c),g==="center"&&(d[0]-=c/2);var p=r.verticalAlign;p==="bottom"&&(d[1]-=f),p==="middle"&&(d[1]-=f/2),Pyt(d,c,f,i);var v=s.get("backgroundColor");(!v||v==="auto")&&(v=t.get(["axisLine","lineStyle","color"])),n.label={x:d[0],y:d[1],style:_i(s,{text:a,font:h,fill:s.getTextColor(),padding:l,backgroundColor:v}),z2:10}}function Pyt(n,t,e,i){var r=i.getWidth(),o=i.getHeight();n[0]=Math.min(n[0]+t,r)-t,n[1]=Math.min(n[1]+e,o)-e,n[0]=Math.max(n[0],0),n[1]=Math.max(n[1],0)}function JQ(n,t,e,i,r){n=t.scale.parse(n);var o=t.scale.getLabel({value:n},{precision:r.precision}),a=r.formatter;if(a){var s={value:bz(t,{value:n}),axisDimension:t.dim,axisIndex:t.index,seriesData:[]};z(i,function(l){var h=e.getSeriesByIndex(l.seriesIndex),u=l.dataIndexInside,d=h&&h.getDataParams(u);d&&s.seriesData.push(d)}),Ct(a)?o=a.replace("{value}",o):Dt(a)&&(o=a(s))}return o}function Mz(n,t,e){var i=Xo();return qf(i,i,e.rotation),xl(i,i,e.position),bs([n.dataToCoord(t),(e.labelOffset||0)+(e.labelDirection||1)*(e.labelMargin||0)],i)}function QQ(n,t,e,i,r,o){var a=ao.innerTextLayout(e.rotation,0,e.labelDirection);e.labelMargin=r.get(["label","margin"]),ZQ(t,i,r,o,{position:Mz(i.axis,n,e),align:a.textAlign,verticalAlign:a.textVerticalAlign})}function Rz(n,t,e){return e=e||0,{x1:n[e],y1:n[1-e],x2:t[e],y2:t[1-e]}}function ttt(n,t,e){return e=e||0,{x:n[e],y:n[1-e],width:t[e],height:t[1-e]}}function E4(n,t,e,i,r,o){return{cx:n,cy:t,r0:e,r:i,startAngle:r,endAngle:o,clockwise:!0}}var Byt=(function(n){et(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.makeElOption=function(e,i,r,o,a){var s=r.axis,l=s.grid,h=o.get("type"),u=D4(l,s).getOtherAxis(s).getGlobalExtent(),d=s.toGlobalCoord(s.dataToCoord(i,!0));if(h&&h!=="none"){var c=Tz(o),f=kyt[h](s,d,u);f.style=c,e.graphicKey=f.type,e.pointer=f}var g=iD(l.model,r);QQ(i,e,g,r,o,a)},t.prototype.getHandleTransform=function(e,i,r){var o=iD(i.axis.grid.model,i,{labelInside:!1});o.labelMargin=r.get(["handle","margin"]);var a=Mz(i.axis,e,o);return{x:a[0],y:a[1],rotation:o.rotation+(o.labelDirection<0?Math.PI:0)}},t.prototype.updateHandleTransform=function(e,i,r,o){var a=r.axis,s=a.grid,l=a.getGlobalExtent(!0),h=D4(s,a).getOtherAxis(a).getGlobalExtent(),u=a.dim==="x"?0:1,d=[e.x,e.y];d[u]+=i[u],d[u]=Math.min(l[1],d[u]),d[u]=Math.max(l[0],d[u]);var c=(h[1]+h[0])/2,f=[c,c];f[u]=d[u];var g=[{verticalAlign:"middle"},{align:"center"}];return{x:d[0],y:d[1],rotation:e.rotation,cursorPoint:f,tooltipOption:g[u]}},t})(Az);function D4(n,t){var e={};return e[t.dim+"AxisIndex"]=t.index,n.getCartesian(e)}var kyt={line:function(n,t,e){var i=Rz([t,e[0]],[t,e[1]],I4(n));return{type:"Line",subPixelOptimize:!0,shape:i}},shadow:function(n,t,e){var i=Math.max(1,n.getBandWidth()),r=e[1]-e[0];return{type:"Rect",shape:ttt([t-i/2,e[0]],[i,r],I4(n))}}};function I4(n){return n.dim==="x"?0:1}var Lyt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.type="axisPointer",t.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},t})(ge),ph=Te(),Eyt=z;function ett(n,t,e){if(!ce.node){var i=t.getZr();ph(i).records||(ph(i).records={}),Dyt(i,t);var r=ph(i).records[n]||(ph(i).records[n]={});r.handler=e}}function Dyt(n,t){if(ph(n).initialized)return;ph(n).initialized=!0,e("click",qt(O4,"click")),e("mousemove",qt(O4,"mousemove")),e("globalout",Oyt);function e(i,r){n.on(i,function(o){var a=Hyt(t);Eyt(ph(n).records,function(s){s&&r(s,o,a.dispatchAction)}),Iyt(a.pendings,t)})}}function Iyt(n,t){var e=n.showTip.length,i=n.hideTip.length,r;e?r=n.showTip[e-1]:i&&(r=n.hideTip[i-1]),r&&(r.dispatchAction=null,t.dispatchAction(r))}function Oyt(n,t,e){n.handler("leave",null,e)}function O4(n,t,e,i){t.handler(n,e,i)}function Hyt(n){var t={showTip:[],hideTip:[]},e=function(i){var r=t[i.type];r?r.push(i):(i.dispatchAction=e,n.dispatchAction(i))};return{dispatchAction:e,pendings:t}}function oD(n,t){if(!ce.node){var e=t.getZr(),i=(ph(e).records||{})[n];i&&(ph(e).records[n]=null)}}var zyt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,i,r){var o=i.getComponent("tooltip"),a=e.get("triggerOn")||o&&o.get("triggerOn")||"mousemove|click";ett("axisPointer",r,function(s,l,h){a!=="none"&&(s==="leave"||a.indexOf(s)>=0)&&h({type:"updateAxisPointer",currTrigger:s,x:l&&l.offsetX,y:l&&l.offsetY})})},t.prototype.remove=function(e,i){oD("axisPointer",i)},t.prototype.dispose=function(e,i){oD("axisPointer",i)},t.type="axisPointer",t})(Di);function itt(n,t){var e=[],i=n.seriesIndex,r;if(i==null||!(r=t.getSeriesByIndex(i)))return{point:[]};var o=r.getData(),a=Sf(o,n);if(a==null||a<0||ut(a))return{point:[]};var s=o.getItemGraphicEl(a),l=r.coordinateSystem;if(r.getTooltipPosition)e=r.getTooltipPosition(a)||[];else if(l&&l.dataToPoint)if(n.isStacked){var h=l.getBaseAxis(),u=l.getOtherAxis(h),d=u.dim,c=h.dim,f=d==="x"||d==="radius"?1:0,g=o.mapDimension(c),p=[];p[f]=o.get(g,a),p[1-f]=o.get(o.getCalculationInfo("stackResultDimension"),a),e=l.dataToPoint(p)||[]}else e=l.dataToPoint(o.getValues(ct(l.dimensions,function(m){return o.mapDimension(m)}),a))||[];else if(s){var v=s.getBoundingRect().clone();v.applyTransform(s.transform),e=[v.x+v.width/2,v.y+v.height/2]}return{point:e,el:s}}var H4=Te();function Fyt(n,t,e){var i=n.currTrigger,r=[n.x,n.y],o=n,a=n.dispatchAction||xt(e.dispatchAction,e),s=t.getComponent("axisPointer").coordSysAxesInfo;if(s){Cw(r)&&(r=itt({seriesIndex:o.seriesIndex,dataIndex:o.dataIndex},t).point);var l=Cw(r),h=o.axesInfo,u=s.axesInfo,d=i==="leave"||Cw(r),c={},f={},g={list:[],map:{}},p={showPointer:qt(Wyt,f),showTooltip:qt(Vyt,g)};z(s.coordSysMap,function(m,y){var b=l||m.containPoint(r);z(s.coordSysAxesInfo[y],function(_,w){var C=_.axis,x=Uyt(h,_);if(!d&&b&&(!h||x)){var S=x&&x.value;S==null&&!l&&(S=C.pointToData(r)),S!=null&&z4(_,S,p,!1,c)}})});var v={};return z(u,function(m,y){var b=m.linkGroup;b&&!f[y]&&z(b.axesInfo,function(_,w){var C=f[w];if(_!==m&&C){var x=C.value;b.mapper&&(x=m.axis.scale.parse(b.mapper(x,F4(_),F4(m)))),v[m.key]=x}})}),z(v,function(m,y){z4(u[y],m,p,!0,c)}),Gyt(f,u,c),$yt(g,r,n,a),jyt(u,a,e),c}}function z4(n,t,e,i,r){var o=n.axis;if(!(o.scale.isBlank()||!o.containData(t))){if(!n.involveSeries){e.showPointer(n,t);return}var a=Nyt(t,n),s=a.payloadBatch,l=a.snapToValue;s[0]&&r.seriesIndex==null&&ht(r,s[0]),!i&&n.snap&&o.containData(l)&&l!=null&&(t=l),e.showPointer(n,t,s),e.showTooltip(n,a,l)}}function Nyt(n,t){var e=t.axis,i=e.dim,r=n,o=[],a=Number.MAX_VALUE,s=-1;return z(t.seriesModels,function(l,h){var u=l.getData().mapDimensionsAll(i),d,c;if(l.getAxisTooltipData){var f=l.getAxisTooltipData(u,n,e);c=f.dataIndices,d=f.nestestValue}else{if(c=l.getData().indicesOfNearest(u[0],n,e.type==="category"?.5:null),!c.length)return;d=l.getData().get(u[0],c[0])}if(!(d==null||!isFinite(d))){var g=n-d,p=Math.abs(g);p<=a&&((p<a||g>=0&&s<0)&&(a=p,s=g,r=d,o.length=0),z(c,function(v){o.push({seriesIndex:l.seriesIndex,dataIndexInside:v,dataIndex:l.getData().getRawIndex(v)})}))}}),{payloadBatch:o,snapToValue:r}}function Wyt(n,t,e,i){n[t.key]={value:e,payloadBatch:i}}function Vyt(n,t,e,i){var r=e.payloadBatch,o=t.axis,a=o.model,s=t.axisPointerModel;if(!(!t.triggerTooltip||!r.length)){var l=t.coordSys.model,h=Yy(l),u=n.map[h];u||(u=n.map[h]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},n.list.push(u)),u.dataByAxis.push({axisDim:o.dim,axisIndex:a.componentIndex,axisType:a.type,axisId:a.id,value:i,valueLabelOpt:{precision:s.get(["label","precision"]),formatter:s.get(["label","formatter"])},seriesDataIndices:r.slice()})}}function Gyt(n,t,e){var i=e.axesInfo=[];z(t,function(r,o){var a=r.axisPointerModel.option,s=n[o];s?(!r.useHandle&&(a.status="show"),a.value=s.value,a.seriesDataIndices=(s.payloadBatch||[]).slice()):!r.useHandle&&(a.status="hide"),a.status==="show"&&i.push({axisDim:r.axis.dim,axisIndex:r.axis.model.componentIndex,value:a.value})})}function $yt(n,t,e,i){if(Cw(t)||!n.list.length){i({type:"hideTip"});return}var r=((n.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};i({type:"showTip",escapeConnect:!0,x:t[0],y:t[1],tooltipOption:e.tooltipOption,position:e.position,dataIndexInside:r.dataIndexInside,dataIndex:r.dataIndex,seriesIndex:r.seriesIndex,dataByCoordSys:n.list})}function jyt(n,t,e){var i=e.getZr(),r="axisPointerLastHighlights",o=H4(i)[r]||{},a=H4(i)[r]={};z(n,function(h,u){var d=h.axisPointerModel.option;d.status==="show"&&h.triggerEmphasis&&z(d.seriesDataIndices,function(c){var f=c.seriesIndex+" | "+c.dataIndex;a[f]=c})});var s=[],l=[];z(o,function(h,u){!a[u]&&l.push(h)}),z(a,function(h,u){!o[u]&&s.push(h)}),l.length&&e.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:l}),s.length&&e.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:s})}function Uyt(n,t){for(var e=0;e<(n||[]).length;e++){var i=n[e];if(t.axis.dim===i.axisDim&&t.axis.model.componentIndex===i.axisIndex)return i}}function F4(n){var t=n.axis.model,e={},i=e.axisDim=n.axis.dim;return e.axisIndex=e[i+"AxisIndex"]=t.componentIndex,e.axisName=e[i+"AxisName"]=t.name,e.axisId=e[i+"AxisId"]=t.id,e}function Cw(n){return!n||n[0]==null||isNaN(n[0])||n[1]==null||isNaN(n[1])}function c_(n){tg.registerAxisPointerClass("CartesianAxisPointer",Byt),n.registerComponentModel(Lyt),n.registerComponentView(zyt),n.registerPreprocessor(function(t){if(t){(!t.axisPointer||t.axisPointer.length===0)&&(t.axisPointer={});var e=t.axisPointer.link;e&&!ut(e)&&(t.axisPointer.link=[e])}}),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,function(t,e){t.getComponent("axisPointer").coordSysAxesInfo=myt(t,e)}),n.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},Fyt)}function Yyt(n){ae(qQ),ae(c_)}var Xyt=(function(n){et(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.makeElOption=function(e,i,r,o,a){var s=r.axis;s.dim==="angle"&&(this.animationThreshold=Math.PI/18);var l=s.polar,h=l.getOtherAxis(s),u=h.getExtent(),d=s.dataToCoord(i),c=o.get("type");if(c&&c!=="none"){var f=Tz(o),g=Kyt[c](s,l,d,u);g.style=f,e.graphicKey=g.type,e.pointer=g}var p=o.get(["label","margin"]),v=qyt(i,r,o,l,p);ZQ(e,r,o,a,v)},t})(Az);function qyt(n,t,e,i,r){var o=t.axis,a=o.dataToCoord(n),s=i.getAngleAxis().getExtent()[0];s=s/180*Math.PI;var l=i.getRadiusAxis().getExtent(),h,u,d;if(o.dim==="radius"){var c=Xo();qf(c,c,s),xl(c,c,[i.cx,i.cy]),h=bs([a,-r],c);var f=t.getModel("axisLabel").get("rotate")||0,g=ao.innerTextLayout(s,f*Math.PI/180,-1);u=g.textAlign,d=g.textVerticalAlign}else{var p=l[1];h=i.coordToPoint([p+r,a]);var v=i.cx,m=i.cy;u=Math.abs(h[0]-v)/p<.3?"center":h[0]>v?"left":"right",d=Math.abs(h[1]-m)/p<.3?"middle":h[1]>m?"top":"bottom"}return{position:h,align:u,verticalAlign:d}}var Kyt={line:function(n,t,e,i){return n.dim==="angle"?{type:"Line",shape:Rz(t.coordToPoint([i[0],e]),t.coordToPoint([i[1],e]))}:{type:"Circle",shape:{cx:t.cx,cy:t.cy,r:e}}},shadow:function(n,t,e,i){var r=Math.max(1,n.getBandWidth()),o=Math.PI/180;return n.dim==="angle"?{type:"Sector",shape:E4(t.cx,t.cy,i[0],i[1],(-e-r/2)*o,(-e+r/2)*o)}:{type:"Sector",shape:E4(t.cx,t.cy,e-r/2,e+r/2,0,Math.PI*2)}}},Zyt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.findAxisModel=function(e){var i,r=this.ecModel;return r.eachComponent(e,function(o){o.getCoordSysModel()===this&&(i=o)},this),i},t.type="polar",t.dependencies=["radiusAxis","angleAxis"],t.defaultOption={z:0,center:["50%","50%"],radius:"80%"},t})(ge),Pz=(function(n){et(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",Mn).models[0]},t.type="polarAxis",t})(ge);In(Pz,d_);var Jyt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.type="angleAxis",t})(Pz),Qyt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.type="radiusAxis",t})(Pz),Bz=(function(n){et(t,n);function t(e,i){return n.call(this,"radius",e,i)||this}return t.prototype.pointToData=function(e,i){return this.polar.pointToData(e,i)[this.dim==="radius"?0:1]},t})(Ds);Bz.prototype.dataToRadius=Ds.prototype.dataToCoord;Bz.prototype.radiusToData=Ds.prototype.coordToData;var tbt=Te(),kz=(function(n){et(t,n);function t(e,i){return n.call(this,"angle",e,i||[0,360])||this}return t.prototype.pointToData=function(e,i){return this.polar.pointToData(e,i)[this.dim==="radius"?0:1]},t.prototype.calculateCategoryInterval=function(){var e=this,i=e.getLabelModel(),r=e.scale,o=r.getExtent(),a=r.count();if(o[1]-o[0]<1)return 0;var s=o[0],l=e.dataToCoord(s+1)-e.dataToCoord(s),h=Math.abs(l),u=t_(s==null?"":s+"",i.getFont(),"center","top"),d=Math.max(u.height,7),c=d/h;isNaN(c)&&(c=1/0);var f=Math.max(0,Math.floor(c)),g=tbt(e.model),p=g.lastAutoInterval,v=g.lastTickCount;return p!=null&&v!=null&&Math.abs(p-f)<=1&&Math.abs(v-a)<=1&&p>f?f=p:(g.lastTickCount=a,g.lastAutoInterval=f),f},t})(Ds);kz.prototype.dataToAngle=Ds.prototype.dataToCoord;kz.prototype.angleToData=Ds.prototype.coordToData;var ntt=["radius","angle"],ebt=(function(){function n(t){this.dimensions=ntt,this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new Bz,this._angleAxis=new kz,this.axisPointerEnabled=!0,this.name=t||"",this._radiusAxis.polar=this._angleAxis.polar=this}return n.prototype.containPoint=function(t){var e=this.pointToCoord(t);return this._radiusAxis.contain(e[0])&&this._angleAxis.contain(e[1])},n.prototype.containData=function(t){return this._radiusAxis.containData(t[0])&&this._angleAxis.containData(t[1])},n.prototype.getAxis=function(t){var e="_"+t+"Axis";return this[e]},n.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},n.prototype.getAxesByScale=function(t){var e=[],i=this._angleAxis,r=this._radiusAxis;return i.scale.type===t&&e.push(i),r.scale.type===t&&e.push(r),e},n.prototype.getAngleAxis=function(){return this._angleAxis},n.prototype.getRadiusAxis=function(){return this._radiusAxis},n.prototype.getOtherAxis=function(t){var e=this._angleAxis;return t===e?this._radiusAxis:e},n.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},n.prototype.getTooltipAxes=function(t){var e=t!=null&&t!=="auto"?this.getAxis(t):this.getBaseAxis();return{baseAxes:[e],otherAxes:[this.getOtherAxis(e)]}},n.prototype.dataToPoint=function(t,e){return this.coordToPoint([this._radiusAxis.dataToRadius(t[0],e),this._angleAxis.dataToAngle(t[1],e)])},n.prototype.pointToData=function(t,e){var i=this.pointToCoord(t);return[this._radiusAxis.radiusToData(i[0],e),this._angleAxis.angleToData(i[1],e)]},n.prototype.pointToCoord=function(t){var e=t[0]-this.cx,i=t[1]-this.cy,r=this.getAngleAxis(),o=r.getExtent(),a=Math.min(o[0],o[1]),s=Math.max(o[0],o[1]);r.inverse?a=s-360:s=a+360;var l=Math.sqrt(e*e+i*i);e/=l,i/=l;for(var h=Math.atan2(-i,e)/Math.PI*180,u=h<a?1:-1;h<a||h>s;)h+=u*360;return[l,h]},n.prototype.coordToPoint=function(t){var e=t[0],i=t[1]/180*Math.PI,r=Math.cos(i)*e+this.cx,o=-Math.sin(i)*e+this.cy;return[r,o]},n.prototype.getArea=function(){var t=this.getAngleAxis(),e=this.getRadiusAxis(),i=e.getExtent().slice();i[0]>i[1]&&i.reverse();var r=t.getExtent(),o=Math.PI/180,a=1e-4;return{cx:this.cx,cy:this.cy,r0:i[0],r:i[1],startAngle:-r[0]*o,endAngle:-r[1]*o,clockwise:t.inverse,contain:function(s,l){var h=s-this.cx,u=l-this.cy,d=h*h+u*u,c=this.r,f=this.r0;return c!==f&&d-a<=c*c&&d+a>=f*f}}},n.prototype.convertToPixel=function(t,e,i){var r=N4(e);return r===this?this.dataToPoint(i):null},n.prototype.convertFromPixel=function(t,e,i){var r=N4(e);return r===this?this.pointToData(i):null},n})();function N4(n){var t=n.seriesModel,e=n.polarModel;return e&&e.coordinateSystem||t&&t.coordinateSystem}function ibt(n,t,e){var i=t.get("center"),r=e.getWidth(),o=e.getHeight();n.cx=mt(i[0],r),n.cy=mt(i[1],o);var a=n.getRadiusAxis(),s=Math.min(r,o)/2,l=t.get("radius");l==null?l=[0,"100%"]:ut(l)||(l=[0,l]);var h=[mt(l[0],s),mt(l[1],s)];a.inverse?a.setExtent(h[1],h[0]):a.setExtent(h[0],h[1])}function nbt(n,t){var e=this,i=e.getAngleAxis(),r=e.getRadiusAxis();if(i.scale.setExtent(1/0,-1/0),r.scale.setExtent(1/0,-1/0),n.eachSeries(function(s){if(s.coordinateSystem===e){var l=s.getData();z(Sx(l,"radius"),function(h){r.scale.unionExtentFromData(l,h)}),z(Sx(l,"angle"),function(h){i.scale.unionExtentFromData(l,h)})}}),Yp(i.scale,i.model),Yp(r.scale,r.model),i.type==="category"&&!i.onBand){var o=i.getExtent(),a=360/i.scale.count();i.inverse?o[1]+=a:o[1]-=a,i.setExtent(o[0],o[1])}}function rbt(n){return n.mainType==="angleAxis"}function W4(n,t){var e;if(n.type=t.get("type"),n.scale=hM(t),n.onBand=t.get("boundaryGap")&&n.type==="category",n.inverse=t.get("inverse"),rbt(t)){n.inverse=n.inverse!==t.get("clockwise");var i=t.get("startAngle"),r=(e=t.get("endAngle"))!==null&&e!==void 0?e:i+(n.inverse?-360:360);n.setExtent(i,r)}t.axis=n,n.model=t}var obt={dimensions:ntt,create:function(n,t){var e=[];return n.eachComponent("polar",function(i,r){var o=new ebt(r+"");o.update=nbt;var a=o.getRadiusAxis(),s=o.getAngleAxis(),l=i.findAxisModel("radiusAxis"),h=i.findAxisModel("angleAxis");W4(a,l),W4(s,h),ibt(o,i,t),e.push(o),i.coordinateSystem=o,o.model=i}),n.eachSeries(function(i){if(i.get("coordinateSystem")==="polar"){var r=i.getReferringComponents("polar",Mn).models[0];i.coordinateSystem=r.coordinateSystem}}),e}},abt=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function EC(n,t,e){t[1]>t[0]&&(t=t.slice().reverse());var i=n.coordToPoint([t[0],e]),r=n.coordToPoint([t[1],e]);return{x1:i[0],y1:i[1],x2:r[0],y2:r[1]}}function DC(n){var t=n.getRadiusAxis();return t.inverse?0:1}function V4(n){var t=n[0],e=n[n.length-1];t&&e&&Math.abs(Math.abs(t.coord-e.coord)-360)<1e-4&&n.pop()}var sbt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e.axisPointerClass="PolarAxisPointer",e}return t.prototype.render=function(e,i){if(this.group.removeAll(),!!e.get("show")){var r=e.axis,o=r.polar,a=o.getRadiusAxis().getExtent(),s=r.getTicksCoords(),l=r.getMinorTicksCoords(),h=ct(r.getViewLabels(),function(u){u=zt(u);var d=r.scale,c=d.type==="ordinal"?d.getRawOrdinalNumber(u.tickValue):u.tickValue;return u.coord=r.dataToCoord(c),u});V4(h),V4(s),z(abt,function(u){e.get([u,"show"])&&(!r.scale.isBlank()||u==="axisLine")&&lbt[u](this.group,e,o,s,l,a,h)},this)}},t.type="angleAxis",t})(tg),lbt={axisLine:function(n,t,e,i,r,o){var a=t.getModel(["axisLine","lineStyle"]),s=e.getAngleAxis(),l=Math.PI/180,h=s.getExtent(),u=DC(e),d=u?0:1,c,f=Math.abs(h[1]-h[0])===360?"Circle":"Arc";o[d]===0?c=new Zf[f]({shape:{cx:e.cx,cy:e.cy,r:o[u],startAngle:-h[0]*l,endAngle:-h[1]*l,clockwise:s.inverse},style:a.getLineStyle(),z2:1,silent:!0}):c=new n_({shape:{cx:e.cx,cy:e.cy,r:o[u],r0:o[d]},style:a.getLineStyle(),z2:1,silent:!0}),c.style.fill=null,n.add(c)},axisTick:function(n,t,e,i,r,o){var a=t.getModel("axisTick"),s=(a.get("inside")?-1:1)*a.get("length"),l=o[DC(e)],h=ct(i,function(u){return new Un({shape:EC(e,[l,l+s],u.coord)})});n.add(Ea(h,{style:Ot(a.getModel("lineStyle").getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])})}))},minorTick:function(n,t,e,i,r,o){if(r.length){for(var a=t.getModel("axisTick"),s=t.getModel("minorTick"),l=(a.get("inside")?-1:1)*s.get("length"),h=o[DC(e)],u=[],d=0;d<r.length;d++)for(var c=0;c<r[d].length;c++)u.push(new Un({shape:EC(e,[h,h+l],r[d][c].coord)}));n.add(Ea(u,{style:Ot(s.getModel("lineStyle").getLineStyle(),Ot(a.getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(n,t,e,i,r,o,a){var s=t.getCategories(!0),l=t.getModel("axisLabel"),h=l.get("margin"),u=t.get("triggerEvent");z(a,function(d,c){var f=l,g=d.tickValue,p=o[DC(e)],v=e.coordToPoint([p+h,d.coord]),m=e.cx,y=e.cy,b=Math.abs(v[0]-m)/p<.3?"center":v[0]>m?"left":"right",_=Math.abs(v[1]-y)/p<.3?"middle":v[1]>y?"top":"bottom";if(s&&s[g]){var w=s[g];Ht(w)&&w.textStyle&&(f=new Ze(w.textStyle,l,l.ecModel))}var C=new Re({silent:ao.isLabelSilent(t),style:_i(f,{x:v[0],y:v[1],fill:f.getTextColor()||t.get(["axisLine","lineStyle","color"]),text:d.formattedLabel,align:b,verticalAlign:_})});if(n.add(C),u){var x=ao.makeAxisEventDataBase(t);x.targetType="axisLabel",x.value=d.rawLabel,Vt(C).eventData=x}},this)},splitLine:function(n,t,e,i,r,o){var a=t.getModel("splitLine"),s=a.getModel("lineStyle"),l=s.get("color"),h=0;l=l instanceof Array?l:[l];for(var u=[],d=0;d<i.length;d++){var c=h++%l.length;u[c]=u[c]||[],u[c].push(new Un({shape:EC(e,o,i[d].coord)}))}for(var d=0;d<u.length;d++)n.add(Ea(u[d],{style:Ot({stroke:l[d%l.length]},s.getLineStyle()),silent:!0,z:t.get("z")}))},minorSplitLine:function(n,t,e,i,r,o){if(r.length){for(var a=t.getModel("minorSplitLine"),s=a.getModel("lineStyle"),l=[],h=0;h<r.length;h++)for(var u=0;u<r[h].length;u++)l.push(new Un({shape:EC(e,o,r[h][u].coord)}));n.add(Ea(l,{style:s.getLineStyle(),silent:!0,z:t.get("z")}))}},splitArea:function(n,t,e,i,r,o){if(i.length){var a=t.getModel("splitArea"),s=a.getModel("areaStyle"),l=s.get("color"),h=0;l=l instanceof Array?l:[l];for(var u=[],d=Math.PI/180,c=-i[0].coord*d,f=Math.min(o[0],o[1]),g=Math.max(o[0],o[1]),p=t.get("clockwise"),v=1,m=i.length;v<=m;v++){var y=v===m?i[0].coord:i[v].coord,b=h++%l.length;u[b]=u[b]||[],u[b].push(new ho({shape:{cx:e.cx,cy:e.cy,r0:f,r:g,startAngle:c,endAngle:-y*d,clockwise:p},silent:!0})),c=-y*d}for(var v=0;v<u.length;v++)n.add(Ea(u[v],{style:Ot({fill:l[v%l.length]},s.getAreaStyle()),silent:!0}))}}},hbt=["axisLine","axisTickLabel","axisName"],ubt=["splitLine","splitArea","minorSplitLine"],dbt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e.axisPointerClass="PolarAxisPointer",e}return t.prototype.render=function(e,i){if(this.group.removeAll(),!!e.get("show")){var r=this._axisGroup,o=this._axisGroup=new Ft;this.group.add(o);var a=e.axis,s=a.polar,l=s.getAngleAxis(),h=a.getTicksCoords(),u=a.getMinorTicksCoords(),d=l.getExtent()[0],c=a.getExtent(),f=fbt(s,e,d),g=new ao(e,f);z(hbt,g.add,g),o.add(g.getGroup()),a_(r,o,e),z(ubt,function(p){e.get([p,"show"])&&!a.scale.isBlank()&&cbt[p](this.group,e,s,d,c,h,u)},this)}},t.type="radiusAxis",t})(tg),cbt={splitLine:function(n,t,e,i,r,o){var a=t.getModel("splitLine"),s=a.getModel("lineStyle"),l=s.get("color"),h=0,u=e.getAngleAxis(),d=Math.PI/180,c=u.getExtent(),f=Math.abs(c[1]-c[0])===360?"Circle":"Arc";l=l instanceof Array?l:[l];for(var g=[],p=0;p<o.length;p++){var v=h++%l.length;g[v]=g[v]||[],g[v].push(new Zf[f]({shape:{cx:e.cx,cy:e.cy,r:Math.max(o[p].coord,0),startAngle:-c[0]*d,endAngle:-c[1]*d,clockwise:u.inverse}}))}for(var p=0;p<g.length;p++)n.add(Ea(g[p],{style:Ot({stroke:l[p%l.length],fill:null},s.getLineStyle()),silent:!0}))},minorSplitLine:function(n,t,e,i,r,o,a){if(a.length){for(var s=t.getModel("minorSplitLine"),l=s.getModel("lineStyle"),h=[],u=0;u<a.length;u++)for(var d=0;d<a[u].length;d++)h.push(new Xh({shape:{cx:e.cx,cy:e.cy,r:a[u][d].coord}}));n.add(Ea(h,{style:Ot({fill:null},l.getLineStyle()),silent:!0}))}},splitArea:function(n,t,e,i,r,o){if(o.length){var a=t.getModel("splitArea"),s=a.getModel("areaStyle"),l=s.get("color"),h=0;l=l instanceof Array?l:[l];for(var u=[],d=o[0].coord,c=1;c<o.length;c++){var f=h++%l.length;u[f]=u[f]||[],u[f].push(new ho({shape:{cx:e.cx,cy:e.cy,r0:d,r:o[c].coord,startAngle:0,endAngle:Math.PI*2},silent:!0})),d=o[c].coord}for(var c=0;c<u.length;c++)n.add(Ea(u[c],{style:Ot({fill:l[c%l.length]},s.getAreaStyle()),silent:!0}))}}};function fbt(n,t,e){return{position:[n.cx,n.cy],rotation:e/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:t.getModel("axisLabel").get("rotate"),z2:1}}function rtt(n){return n.get("stack")||"__ec_stack_"+n.seriesIndex}function ott(n,t){return t.dim+n.model.componentIndex}function gbt(n,t,e){var i={},r=pbt(Ge(t.getSeriesByType(n),function(o){return!t.isSeriesFiltered(o)&&o.coordinateSystem&&o.coordinateSystem.type==="polar"}));t.eachSeriesByType(n,function(o){if(o.coordinateSystem.type==="polar"){var a=o.getData(),s=o.coordinateSystem,l=s.getBaseAxis(),h=ott(s,l),u=rtt(o),d=r[h][u],c=d.offset,f=d.width,g=s.getOtherAxis(l),p=o.coordinateSystem.cx,v=o.coordinateSystem.cy,m=o.get("barMinHeight")||0,y=o.get("barMinAngle")||0;i[u]=i[u]||[];for(var b=a.mapDimension(g.dim),_=a.mapDimension(l.dim),w=id(a,b),C=l.dim!=="radius"||!o.get("roundCap",!0),x=g.model,S=x.get("startValue"),A=g.dataToCoord(S||0),T=0,M=a.count();T<M;T++){var R=a.get(b,T),L=a.get(_,T),B=R>=0?"p":"n",P=A;w&&(i[u][L]||(i[u][L]={p:A,n:A}),P=i[u][L][B]);var k=void 0,E=void 0,D=void 0,I=void 0;if(g.dim==="radius"){var O=g.dataToCoord(R)-A,H=l.dataToCoord(L);Math.abs(O)<m&&(O=(O<0?-1:1)*m),k=P,E=P+O,D=H-c,I=D-f,w&&(i[u][L][B]=E)}else{var F=g.dataToCoord(R,C)-A,N=l.dataToCoord(L);Math.abs(F)<y&&(F=(F<0?-1:1)*y),k=N+c,E=k+f,D=P,I=P+F,w&&(i[u][L][B]=I)}a.setItemLayout(T,{cx:p,cy:v,r0:k,r:E,startAngle:-D*Math.PI/180,endAngle:-I*Math.PI/180,clockwise:D>=I})}}})}function pbt(n){var t={};z(n,function(i,r){var o=i.getData(),a=i.coordinateSystem,s=a.getBaseAxis(),l=ott(a,s),h=s.getExtent(),u=s.type==="category"?s.getBandWidth():Math.abs(h[1]-h[0])/o.count(),d=t[l]||{bandWidth:u,remainedWidth:u,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},c=d.stacks;t[l]=d;var f=rtt(i);c[f]||d.autoWidthCount++,c[f]=c[f]||{width:0,maxWidth:0};var g=mt(i.get("barWidth"),u),p=mt(i.get("barMaxWidth"),u),v=i.get("barGap"),m=i.get("barCategoryGap");g&&!c[f].width&&(g=Math.min(d.remainedWidth,g),c[f].width=g,d.remainedWidth-=g),p&&(c[f].maxWidth=p),v!=null&&(d.gap=v),m!=null&&(d.categoryGap=m)});var e={};return z(t,function(i,r){e[r]={};var o=i.stacks,a=i.bandWidth,s=mt(i.categoryGap,a),l=mt(i.gap,1),h=i.remainedWidth,u=i.autoWidthCount,d=(h-s)/(u+(u-1)*l);d=Math.max(d,0),z(o,function(p,v){var m=p.maxWidth;m&&m<d&&(m=Math.min(m,h),p.width&&(m=Math.min(m,p.width)),h-=m,p.width=m,u--)}),d=(h-s)/(u+(u-1)*l),d=Math.max(d,0);var c=0,f;z(o,function(p,v){p.width||(p.width=d),f=p,c+=p.width*(1+l)}),f&&(c-=f.width*l);var g=-c/2;z(o,function(p,v){e[r][v]=e[r][v]||{offset:g,width:p.width},g+=p.width*(1+l)})}),e}var vbt={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},mbt={splitNumber:5},ybt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.type="polar",t})(Di);function bbt(n){ae(c_),tg.registerAxisPointerClass("PolarAxisPointer",Xyt),n.registerCoordinateSystem("polar",obt),n.registerComponentModel(Zyt),n.registerComponentView(ybt),Xp(n,"angle",Jyt,vbt),Xp(n,"radius",Qyt,mbt),n.registerComponentView(sbt),n.registerComponentView(dbt),n.registerLayout(qt(gbt,"bar"))}var Im=VQ.value;function IC(n,t){return Ot({show:t},n)}var _bt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.optionUpdated=function(){var e=this.get("boundaryGap"),i=this.get("splitNumber"),r=this.get("scale"),o=this.get("axisLine"),a=this.get("axisTick"),s=this.get("axisLabel"),l=this.get("axisName"),h=this.get(["axisName","show"]),u=this.get(["axisName","formatter"]),d=this.get("axisNameGap"),c=this.get("triggerEvent"),f=ct(this.get("indicator")||[],function(g){g.max!=null&&g.max>0&&!g.min?g.min=0:g.min!=null&&g.min<0&&!g.max&&(g.max=0);var p=l;g.color!=null&&(p=Ot({color:g.color},l));var v=Zt(zt(g),{boundaryGap:e,splitNumber:i,scale:r,axisLine:o,axisTick:a,axisLabel:s,name:g.text,showName:h,nameLocation:"end",nameGap:d,nameTextStyle:p,triggerEvent:c},!1);if(Ct(u)){var m=v.name;v.name=u.replace("{value}",m??"")}else Dt(u)&&(v.name=u(v.name,v));var y=new Ze(v,null,this.ecModel);return In(y,d_.prototype),y.mainType="radar",y.componentIndex=this.componentIndex,y},this);this._indicatorModels=f},t.prototype.getIndicatorModels=function(){return this._indicatorModels},t.type="radar",t.defaultOption={z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:Zt({lineStyle:{color:"#bbb"}},Im.axisLine),axisLabel:IC(Im.axisLabel,!1),axisTick:IC(Im.axisTick,!1),splitLine:IC(Im.splitLine,!0),splitArea:IC(Im.splitArea,!0),indicator:[]},t})(ge),Cbt=["axisLine","axisTickLabel","axisName"],wbt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,i,r){var o=this.group;o.removeAll(),this._buildAxes(e),this._buildSplitLineAndArea(e)},t.prototype._buildAxes=function(e){var i=e.coordinateSystem,r=i.getIndicatorAxes(),o=ct(r,function(a){var s=a.model.get("showName")?a.name:"",l=new ao(a.model,{axisName:s,position:[i.cx,i.cy],rotation:a.angle,labelDirection:-1,tickDirection:-1,nameDirection:1});return l});z(o,function(a){z(Cbt,a.add,a),this.group.add(a.getGroup())},this)},t.prototype._buildSplitLineAndArea=function(e){var i=e.coordinateSystem,r=i.getIndicatorAxes();if(!r.length)return;var o=e.get("shape"),a=e.getModel("splitLine"),s=e.getModel("splitArea"),l=a.getModel("lineStyle"),h=s.getModel("areaStyle"),u=a.get("show"),d=s.get("show"),c=l.get("color"),f=h.get("color"),g=ut(c)?c:[c],p=ut(f)?f:[f],v=[],m=[];function y(P,k,E){var D=E%k.length;return P[D]=P[D]||[],D}if(o==="circle")for(var b=r[0].getTicksCoords(),_=i.cx,w=i.cy,C=0;C<b.length;C++){if(u){var x=y(v,g,C);v[x].push(new Xh({shape:{cx:_,cy:w,r:b[C].coord}}))}if(d&&C<b.length-1){var x=y(m,p,C);m[x].push(new n_({shape:{cx:_,cy:w,r0:b[C].coord,r:b[C+1].coord}}))}}else for(var S,A=ct(r,function(P,k){var E=P.getTicksCoords();return S=S==null?E.length-1:Math.min(E.length-1,S),ct(E,function(D){return i.coordToPoint(D.coord,k)})}),T=[],C=0;C<=S;C++){for(var M=[],R=0;R<r.length;R++)M.push(A[R][C]);if(M[0]&&M.push(M[0].slice()),u){var x=y(v,g,C);v[x].push(new fo({shape:{points:M}}))}if(d&&T){var x=y(m,p,C-1);m[x].push(new uo({shape:{points:M.concat(T)}}))}T=M.slice().reverse()}var L=l.getLineStyle(),B=h.getAreaStyle();z(m,function(P,k){this.group.add(Ea(P,{style:Ot({stroke:"none",fill:p[k%p.length]},B),silent:!0}))},this),z(v,function(P,k){this.group.add(Ea(P,{style:Ot({fill:"none",stroke:g[k%g.length]},L),silent:!0}))},this)},t.type="radar",t})(Di),xbt=(function(n){et(t,n);function t(e,i,r){var o=n.call(this,e,i,r)||this;return o.type="value",o.angle=0,o.name="",o}return t})(Ds),Sbt=(function(){function n(t,e,i){this.dimensions=[],this._model=t,this._indicatorAxes=ct(t.getIndicatorModels(),function(r,o){var a="indicator_"+o,s=new xbt(a,new Ih);return s.name=r.get("name"),s.model=r,r.axis=s,this.dimensions.push(a),s},this),this.resize(t,i)}return n.prototype.getIndicatorAxes=function(){return this._indicatorAxes},n.prototype.dataToPoint=function(t,e){var i=this._indicatorAxes[e];return this.coordToPoint(i.dataToCoord(t),e)},n.prototype.coordToPoint=function(t,e){var i=this._indicatorAxes[e],r=i.angle,o=this.cx+t*Math.cos(r),a=this.cy-t*Math.sin(r);return[o,a]},n.prototype.pointToData=function(t){var e=t[0]-this.cx,i=t[1]-this.cy,r=Math.sqrt(e*e+i*i);e/=r,i/=r;for(var o=Math.atan2(-i,e),a=1/0,s,l=-1,h=0;h<this._indicatorAxes.length;h++){var u=this._indicatorAxes[h],d=Math.abs(o-u.angle);d<a&&(s=u,l=h,a=d)}return[l,+(s&&s.coordToData(r))]},n.prototype.resize=function(t,e){var i=t.get("center"),r=e.getWidth(),o=e.getHeight(),a=Math.min(r,o)/2;this.cx=mt(i[0],r),this.cy=mt(i[1],o),this.startAngle=t.get("startAngle")*Math.PI/180;var s=t.get("radius");(Ct(s)||Le(s))&&(s=[0,s]),this.r0=mt(s[0],a),this.r=mt(s[1],a),z(this._indicatorAxes,function(l,h){l.setExtent(this.r0,this.r);var u=this.startAngle+h*Math.PI*2/this._indicatorAxes.length;u=Math.atan2(Math.sin(u),Math.cos(u)),l.angle=u},this)},n.prototype.update=function(t,e){var i=this._indicatorAxes,r=this._model;z(i,function(s){s.scale.setExtent(1/0,-1/0)}),t.eachSeriesByType("radar",function(s,l){if(!(s.get("coordinateSystem")!=="radar"||t.getComponent("radar",s.get("radarIndex"))!==r)){var h=s.getData();z(i,function(u){u.scale.unionExtentFromData(h,h.mapDimension(u.dim))})}},this);var o=r.get("splitNumber"),a=new Ih;a.setExtent(0,o),a.setInterval(1),z(i,function(s,l){GQ(s.scale,s.model,a)})},n.prototype.convertToPixel=function(t,e,i){return null},n.prototype.convertFromPixel=function(t,e,i){return null},n.prototype.containPoint=function(t){return!1},n.create=function(t,e){var i=[];return t.eachComponent("radar",function(r){var o=new n(r,t,e);i.push(o),r.coordinateSystem=o}),t.eachSeriesByType("radar",function(r){r.get("coordinateSystem")==="radar"&&(r.coordinateSystem=i[r.get("radarIndex")||0])}),i},n.dimensions=[],n})();function Abt(n){n.registerCoordinateSystem("radar",Sbt),n.registerComponentModel(_bt),n.registerComponentView(wbt),n.registerVisual({seriesType:"radar",reset:function(t){var e=t.getData();e.each(function(i){e.setItemVisual(i,"legendIcon","roundRect")}),e.setVisual("legendIcon","roundRect")}})}var G4=Sr,f_=(function(n){et(t,n);function t(e){var i=n.call(this)||this;return i.type="view",i.dimensions=["x","y"],i._roamTransformable=new gh,i._rawTransformable=new gh,i.name=e,i}return t.prototype.setBoundingRect=function(e,i,r,o){return this._rect=new te(e,i,r,o),this._rect},t.prototype.getBoundingRect=function(){return this._rect},t.prototype.setViewRect=function(e,i,r,o){this._transformTo(e,i,r,o),this._viewRect=new te(e,i,r,o)},t.prototype._transformTo=function(e,i,r,o){var a=this.getBoundingRect(),s=this._rawTransformable;s.transform=a.calculateTransform(new te(e,i,r,o));var l=s.parent;s.parent=null,s.decomposeTransform(),s.parent=l,this._updateTransform()},t.prototype.setCenter=function(e,i){e&&(this._center=[mt(e[0],i.getWidth()),mt(e[1],i.getHeight())],this._updateCenterAndZoom())},t.prototype.setZoom=function(e){e=e||1;var i=this.zoomLimit;i&&(i.max!=null&&(e=Math.min(i.max,e)),i.min!=null&&(e=Math.max(i.min,e))),this._zoom=e,this._updateCenterAndZoom()},t.prototype.getDefaultCenter=function(){var e=this.getBoundingRect(),i=e.x+e.width/2,r=e.y+e.height/2;return[i,r]},t.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},t.prototype.getZoom=function(){return this._zoom||1},t.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},t.prototype._updateCenterAndZoom=function(){var e=this._rawTransformable.getLocalTransform(),i=this._roamTransformable,r=this.getDefaultCenter(),o=this.getCenter(),a=this.getZoom();o=Sr([],o,e),r=Sr([],r,e),i.originX=o[0],i.originY=o[1],i.x=r[0]-o[0],i.y=r[1]-o[1],i.scaleX=i.scaleY=a,this._updateTransform()},t.prototype._updateTransform=function(){var e=this._roamTransformable,i=this._rawTransformable;i.parent=e,e.updateTransform(),i.updateTransform(),MH(this.transform||(this.transform=[]),i.transform||Xo()),this._rawTransform=i.getLocalTransform(),this.invTransform=this.invTransform||[],Hv(this.invTransform,this.transform),this.decomposeTransform()},t.prototype.getTransformInfo=function(){var e=this._rawTransformable,i=this._roamTransformable,r=new gh;return r.transform=i.transform,r.decomposeTransform(),{roam:{x:r.x,y:r.y,scaleX:r.scaleX,scaleY:r.scaleY},raw:{x:e.x,y:e.y,scaleX:e.scaleX,scaleY:e.scaleY}}},t.prototype.getViewRect=function(){return this._viewRect},t.prototype.getViewRectAfterRoam=function(){var e=this.getBoundingRect().clone();return e.applyTransform(this.transform),e},t.prototype.dataToPoint=function(e,i,r){var o=i?this._rawTransform:this.transform;return r=r||[],o?G4(r,e,o):Xr(r,e)},t.prototype.pointToData=function(e){var i=this.invTransform;return i?G4([],e,i):[e[0],e[1]]},t.prototype.convertToPixel=function(e,i,r){var o=$4(i);return o===this?o.dataToPoint(r):null},t.prototype.convertFromPixel=function(e,i,r){var o=$4(i);return o===this?o.pointToData(r):null},t.prototype.containPoint=function(e){return this.getViewRectAfterRoam().contain(e[0],e[1])},t.dimensions=["x","y"],t})(gh);function $4(n){var t=n.seriesModel;return t?t.coordinateSystem:null}function att(n){if(Ct(n)){var t=new DOMParser;n=t.parseFromString(n,"text/xml")}var e=n;for(e.nodeType===9&&(e=e.firstChild);e.nodeName.toLowerCase()!=="svg"||e.nodeType!==1;)e=e.nextSibling;return e}var _P,Mx={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},j4=pe(Mx),Rx={"alignment-baseline":"textBaseline","stop-color":"stopColor"},U4=pe(Rx),Tbt=(function(){function n(){this._defs={},this._root=null}return n.prototype.parse=function(t,e){e=e||{};var i=att(t);this._defsUsePending=[];var r=new Ft;this._root=r;var o=[],a=i.getAttribute("viewBox")||"",s=parseFloat(i.getAttribute("width")||e.width),l=parseFloat(i.getAttribute("height")||e.height);isNaN(s)&&(s=null),isNaN(l)&&(l=null),Do(i,r,null,!0,!1);for(var h=i.firstChild;h;)this._parseNode(h,r,o,null,!1,!1),h=h.nextSibling;Pbt(this._defs,this._defsUsePending),this._defsUsePending=[];var u,d;if(a){var c=uM(a);c.length>=4&&(u={x:parseFloat(c[0]||0),y:parseFloat(c[1]||0),width:parseFloat(c[2]),height:parseFloat(c[3])})}if(u&&s!=null&&l!=null&&(d=ltt(u,{x:0,y:0,width:s,height:l}),!e.ignoreViewBox)){var f=r;r=new Ft,r.add(f),f.scaleX=f.scaleY=d.scale,f.x=d.x,f.y=d.y}return!e.ignoreRootClip&&s!=null&&l!=null&&r.setClipPath(new Ae({shape:{x:0,y:0,width:s,height:l}})),{root:r,width:s,height:l,viewBoxRect:u,viewBoxTransform:d,named:o}},n.prototype._parseNode=function(t,e,i,r,o,a){var s=t.nodeName.toLowerCase(),l,h=r;if(s==="defs"&&(o=!0),s==="text"&&(a=!0),s==="defs"||s==="switch")l=e;else{if(!o){var u=_P[s];if(u&&At(_P,s)){l=u.call(this,t,e);var d=t.getAttribute("name");if(d){var c={name:d,namedFrom:null,svgNodeTagLower:s,el:l};i.push(c),s==="g"&&(h=c)}else r&&i.push({name:r.name,namedFrom:r,svgNodeTagLower:s,el:l});e.add(l)}}var f=Y4[s];if(f&&At(Y4,s)){var g=f.call(this,t),p=t.getAttribute("id");p&&(this._defs[p]=g)}}if(l&&l.isGroup)for(var v=t.firstChild;v;)v.nodeType===1?this._parseNode(v,l,i,h,o,a):v.nodeType===3&&a&&this._parseText(v,l),v=v.nextSibling},n.prototype._parseText=function(t,e){var i=new Gp({style:{text:t.textContent},silent:!0,x:this._textX||0,y:this._textY||0});sa(e,i),Do(t,i,this._defsUsePending,!1,!1),Mbt(i,e);var r=i.style,o=r.fontSize;o&&o<9&&(r.fontSize=9,i.scaleX*=o/9,i.scaleY*=o/9);var a=(r.fontSize||r.fontFamily)&&[r.fontStyle,r.fontWeight,(r.fontSize||12)+"px",r.fontFamily||"sans-serif"].join(" ");r.font=a;var s=i.getBoundingRect();return this._textX+=s.width,e.add(i),i},n.internalField=(function(){_P={g:function(t,e){var i=new Ft;return sa(e,i),Do(t,i,this._defsUsePending,!1,!1),i},rect:function(t,e){var i=new Ae;return sa(e,i),Do(t,i,this._defsUsePending,!1,!1),i.setShape({x:parseFloat(t.getAttribute("x")||"0"),y:parseFloat(t.getAttribute("y")||"0"),width:parseFloat(t.getAttribute("width")||"0"),height:parseFloat(t.getAttribute("height")||"0")}),i.silent=!0,i},circle:function(t,e){var i=new Xh;return sa(e,i),Do(t,i,this._defsUsePending,!1,!1),i.setShape({cx:parseFloat(t.getAttribute("cx")||"0"),cy:parseFloat(t.getAttribute("cy")||"0"),r:parseFloat(t.getAttribute("r")||"0")}),i.silent=!0,i},line:function(t,e){var i=new Un;return sa(e,i),Do(t,i,this._defsUsePending,!1,!1),i.setShape({x1:parseFloat(t.getAttribute("x1")||"0"),y1:parseFloat(t.getAttribute("y1")||"0"),x2:parseFloat(t.getAttribute("x2")||"0"),y2:parseFloat(t.getAttribute("y2")||"0")}),i.silent=!0,i},ellipse:function(t,e){var i=new $T;return sa(e,i),Do(t,i,this._defsUsePending,!1,!1),i.setShape({cx:parseFloat(t.getAttribute("cx")||"0"),cy:parseFloat(t.getAttribute("cy")||"0"),rx:parseFloat(t.getAttribute("rx")||"0"),ry:parseFloat(t.getAttribute("ry")||"0")}),i.silent=!0,i},polygon:function(t,e){var i=t.getAttribute("points"),r;i&&(r=K4(i));var o=new uo({shape:{points:r||[]},silent:!0});return sa(e,o),Do(t,o,this._defsUsePending,!1,!1),o},polyline:function(t,e){var i=t.getAttribute("points"),r;i&&(r=K4(i));var o=new fo({shape:{points:r||[]},silent:!0});return sa(e,o),Do(t,o,this._defsUsePending,!1,!1),o},image:function(t,e){var i=new hr;return sa(e,i),Do(t,i,this._defsUsePending,!1,!1),i.setStyle({image:t.getAttribute("xlink:href")||t.getAttribute("href"),x:+t.getAttribute("x"),y:+t.getAttribute("y"),width:+t.getAttribute("width"),height:+t.getAttribute("height")}),i.silent=!0,i},text:function(t,e){var i=t.getAttribute("x")||"0",r=t.getAttribute("y")||"0",o=t.getAttribute("dx")||"0",a=t.getAttribute("dy")||"0";this._textX=parseFloat(i)+parseFloat(o),this._textY=parseFloat(r)+parseFloat(a);var s=new Ft;return sa(e,s),Do(t,s,this._defsUsePending,!1,!0),s},tspan:function(t,e){var i=t.getAttribute("x"),r=t.getAttribute("y");i!=null&&(this._textX=parseFloat(i)),r!=null&&(this._textY=parseFloat(r));var o=t.getAttribute("dx")||"0",a=t.getAttribute("dy")||"0",s=new Ft;return sa(e,s),Do(t,s,this._defsUsePending,!1,!0),this._textX+=parseFloat(o),this._textY+=parseFloat(a),s},path:function(t,e){var i=t.getAttribute("d")||"",r=yZ(i);return sa(e,r),Do(t,r,this._defsUsePending,!1,!1),r.silent=!0,r}}})(),n})(),Y4={lineargradient:function(n){var t=parseInt(n.getAttribute("x1")||"0",10),e=parseInt(n.getAttribute("y1")||"0",10),i=parseInt(n.getAttribute("x2")||"10",10),r=parseInt(n.getAttribute("y2")||"0",10),o=new o_(t,e,i,r);return X4(n,o),q4(n,o),o},radialgradient:function(n){var t=parseInt(n.getAttribute("cx")||"0",10),e=parseInt(n.getAttribute("cy")||"0",10),i=parseInt(n.getAttribute("r")||"0",10),r=new wZ(t,e,i);return X4(n,r),q4(n,r),r}};function X4(n,t){var e=n.getAttribute("gradientUnits");e==="userSpaceOnUse"&&(t.global=!0)}function q4(n,t){for(var e=n.firstChild;e;){if(e.nodeType===1&&e.nodeName.toLocaleLowerCase()==="stop"){var i=e.getAttribute("offset"),r=void 0;i&&i.indexOf("%")>0?r=parseInt(i,10)/100:i?r=parseFloat(i):r=0;var o={};stt(e,o,o);var a=o.stopColor||e.getAttribute("stop-color")||"#000000";t.colorStops.push({offset:r,color:a})}e=e.nextSibling}}function sa(n,t){n&&n.__inheritedStyle&&(t.__inheritedStyle||(t.__inheritedStyle={}),Ot(t.__inheritedStyle,n.__inheritedStyle))}function K4(n){for(var t=uM(n),e=[],i=0;i<t.length;i+=2){var r=parseFloat(t[i]),o=parseFloat(t[i+1]);e.push([r,o])}return e}function Do(n,t,e,i,r){var o=t,a=o.__inheritedStyle=o.__inheritedStyle||{},s={};n.nodeType===1&&(Lbt(n,t),stt(n,a,s),i||Ebt(n,a,s)),o.style=o.style||{},a.fill!=null&&(o.style.fill=Z4(o,"fill",a.fill,e)),a.stroke!=null&&(o.style.stroke=Z4(o,"stroke",a.stroke,e)),z(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(l){a[l]!=null&&(o.style[l]=parseFloat(a[l]))}),z(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],function(l){a[l]!=null&&(o.style[l]=a[l])}),r&&(o.__selfStyle=s),a.lineDash&&(o.style.lineDash=ct(uM(a.lineDash),function(l){return parseFloat(l)})),(a.visibility==="hidden"||a.visibility==="collapse")&&(o.invisible=!0),a.display==="none"&&(o.ignore=!0)}function Mbt(n,t){var e=t.__selfStyle;if(e){var i=e.textBaseline,r=i;!i||i==="auto"||i==="baseline"?r="alphabetic":i==="before-edge"||i==="text-before-edge"?r="top":i==="after-edge"||i==="text-after-edge"?r="bottom":(i==="central"||i==="mathematical")&&(r="middle"),n.style.textBaseline=r}var o=t.__inheritedStyle;if(o){var a=o.textAlign,s=a;a&&(a==="middle"&&(s="center"),n.style.textAlign=s)}}var Rbt=/^url\(\s*#(.*?)\)/;function Z4(n,t,e,i){var r=e&&e.match(Rbt);if(r){var o=ps(r[1]);i.push([n,t,o]);return}return e==="none"&&(e=null),e}function Pbt(n,t){for(var e=0;e<t.length;e++){var i=t[e];i[0].style[i[1]]=n[i[2]]}}var Bbt=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function uM(n){return n.match(Bbt)||[]}var kbt=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,CP=Math.PI/180;function Lbt(n,t){var e=n.getAttribute("transform");if(e){e=e.replace(/,/g," ");var i=[],r=null;e.replace(kbt,function(d,c,f){return i.push(c,f),""});for(var o=i.length-1;o>0;o-=2){var a=i[o],s=i[o-1],l=uM(a);switch(r=r||Xo(),s){case"translate":xl(r,r,[parseFloat(l[0]),parseFloat(l[1]||"0")]);break;case"scale":RH(r,r,[parseFloat(l[0]),parseFloat(l[1]||l[0])]);break;case"rotate":qf(r,r,-parseFloat(l[0])*CP,[parseFloat(l[1]||"0"),parseFloat(l[2]||"0")]);break;case"skewX":var h=Math.tan(parseFloat(l[0])*CP);Ch(r,[1,0,h,1,0,0],r);break;case"skewY":var u=Math.tan(parseFloat(l[0])*CP);Ch(r,[1,u,0,1,0,0],r);break;case"matrix":r[0]=parseFloat(l[0]),r[1]=parseFloat(l[1]),r[2]=parseFloat(l[2]),r[3]=parseFloat(l[3]),r[4]=parseFloat(l[4]),r[5]=parseFloat(l[5]);break}}t.setLocalTransform(r)}}var J4=/([^\s:;]+)\s*:\s*([^:;]+)/g;function stt(n,t,e){var i=n.getAttribute("style");if(i){J4.lastIndex=0;for(var r;(r=J4.exec(i))!=null;){var o=r[1],a=At(Mx,o)?Mx[o]:null;a&&(t[a]=r[2]);var s=At(Rx,o)?Rx[o]:null;s&&(e[s]=r[2])}}}function Ebt(n,t,e){for(var i=0;i<j4.length;i++){var r=j4[i],o=n.getAttribute(r);o!=null&&(t[Mx[r]]=o)}for(var i=0;i<U4.length;i++){var r=U4[i],o=n.getAttribute(r);o!=null&&(e[Rx[r]]=o)}}function ltt(n,t){var e=t.width/n.width,i=t.height/n.height,r=Math.min(e,i);return{scale:r,x:-(n.x+n.width/2)*r+(t.x+t.width/2),y:-(n.y+n.height/2)*r+(t.y+t.height/2)}}function Dbt(n,t){var e=new Tbt;return e.parse(n,t)}var Ibt=Pt(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),Obt=(function(){function n(t,e){this.type="geoSVG",this._usedGraphicMap=Pt(),this._freedGraphics=[],this._mapName=t,this._parsedXML=att(e)}return n.prototype.load=function(){var t=this._firstGraphic;if(!t){t=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(t),this._boundingRect=this._firstGraphic.boundingRect.clone();var e=zbt(t.named),i=e.regions,r=e.regionsMap;this._regions=i,this._regionsMap=r}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},n.prototype._buildGraphic=function(t){var e,i;try{e=t&&Dbt(t,{ignoreViewBox:!0,ignoreRootClip:!0})||{},i=e.root,so(i!=null)}catch(v){throw new Error(`Invalid svg format
`+v.message)}var r=new Ft;r.add(i),r.isGeoSVGGraphicRoot=!0;var o=e.width,a=e.height,s=e.viewBoxRect,l=this._boundingRect;if(!l){var h=void 0,u=void 0,d=void 0,c=void 0;if(o!=null?(h=0,d=o):s&&(h=s.x,d=s.width),a!=null?(u=0,c=a):s&&(u=s.y,c=s.height),h==null||u==null){var f=i.getBoundingRect();h==null&&(h=f.x,d=f.width),u==null&&(u=f.y,c=f.height)}l=this._boundingRect=new te(h,u,d,c)}if(s){var g=ltt(s,l);i.scaleX=i.scaleY=g.scale,i.x=g.x,i.y=g.y}r.setClipPath(new Ae({shape:l.plain()}));var p=[];return z(e.named,function(v){Ibt.get(v.svgNodeTagLower)!=null&&(p.push(v),Hbt(v.el))}),{root:r,boundingRect:l,named:p}},n.prototype.useGraphic=function(t){var e=this._usedGraphicMap,i=e.get(t);return i||(i=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),e.set(t,i),i)},n.prototype.freeGraphic=function(t){var e=this._usedGraphicMap,i=e.get(t);i&&(e.removeKey(t),this._freedGraphics.push(i))},n})();function Hbt(n){n.silent=!1,n.isGroup&&n.traverse(function(t){t.silent=!1})}function zbt(n){var t=[],e=Pt();return z(n,function(i){if(i.namedFrom==null){var r=new k0t(i.name,i.el);t.push(r),e.set(i.name,r)}}),{regions:t,regionsMap:e}}var aD=[126,25],Q4="",nc=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]];for(var Xd=0;Xd<nc.length;Xd++)for(var Cg=0;Cg<nc[Xd].length;Cg++)nc[Xd][Cg][0]/=10.5,nc[Xd][Cg][1]/=-10.5/.75,nc[Xd][Cg][0]+=aD[0],nc[Xd][Cg][1]+=aD[1];function Fbt(n,t){if(n==="china"){for(var e=0;e<t.length;e++)if(t[e].name===Q4)return;t.push(new TQ(Q4,ct(nc,function(i){return{type:"polygon",exterior:i}}),aD))}}var Nbt={:[32,80],:[0,-10],:[10,5],:[-10,10],:[5,5]};function Wbt(n,t){if(n==="china"){var e=Nbt[t.name];if(e){var i=t.getCenter();i[0]+=e[0]/10.5,i[1]+=-e[1]/(10.5/.75),t.setCenter(i)}}}var Vbt=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];function Gbt(n,t){n==="china"&&t.name===""&&t.geometries.push({type:"polygon",exterior:Vbt[0]})}var $bt="name",jbt=(function(){function n(t,e,i){this.type="geoJSON",this._parsedMap=Pt(),this._mapName=t,this._specialAreas=i,this._geoJSON=Ybt(e)}return n.prototype.load=function(t,e){e=e||$bt;var i=this._parsedMap.get(e);if(!i){var r=this._parseToRegions(e);i=this._parsedMap.set(e,{regions:r,boundingRect:Ubt(r)})}var o=Pt(),a=[];return z(i.regions,function(s){var l=s.name;t&&At(t,l)&&(s=s.cloneShallow(l=t[l])),a.push(s),o.set(l,s)}),{regions:a,boundingRect:i.boundingRect||new te(0,0,0,0),regionsMap:o}},n.prototype._parseToRegions=function(t){var e=this._mapName,i=this._geoJSON,r;try{r=i?E0t(i,t):[]}catch(o){throw new Error(`Invalid geoJson format
`+o.message)}return Fbt(e,r),z(r,function(o){var a=o.name;Wbt(e,o),Gbt(e,o);var s=this._specialAreas&&this._specialAreas[a];s&&o.transformTo(s.left,s.top,s.width,s.height)},this),r},n.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},n})();function Ubt(n){for(var t,e=0;e<n.length;e++){var i=n[e].getBoundingRect();t=t||i.clone(),t.union(i)}return t}function Ybt(n){return Ct(n)?typeof JSON<"u"&&JSON.parse?JSON.parse(n):new Function("return ("+n+");")():n}var Om=Pt();const Oh={registerMap:function(n,t,e){if(t.svg){var i=new Obt(n,t.svg);Om.set(n,i)}else{var r=t.geoJson||t.geoJSON;r&&!t.features?e=t.specialAreas:r=t;var i=new jbt(n,r,e);Om.set(n,i)}},getGeoResource:function(n){return Om.get(n)},getMapForUser:function(n){var t=Om.get(n);return t&&t.type==="geoJSON"&&t.getMapForUser()},load:function(n,t,e){var i=Om.get(n);if(i)return i.load(t,e)}};var Xbt={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},htt=["lng","lat"],sD=(function(n){et(t,n);function t(e,i,r){var o=n.call(this,e)||this;o.dimensions=htt,o.type="geo",o._nameCoordMap=Pt(),o.map=i;var a=r.projection,s=Oh.load(i,r.nameMap,r.nameProperty),l=Oh.getGeoResource(i);o.resourceType=l?l.type:null;var h=o.regions=s.regions,u=Xbt[l.type];o._regionsMap=s.regionsMap,o.regions=s.regions,o.projection=a;var d;if(a)for(var c=0;c<h.length;c++){var f=h[c].getBoundingRect(a);d=d||f.clone(),d.union(f)}else d=s.boundingRect;return o.setBoundingRect(d.x,d.y,d.width,d.height),o.aspectScale=a?1:Yt(r.aspectScale,u.aspectScale),o._invertLongitute=a?!1:u.invertLongitute,o}return t.prototype._transformTo=function(e,i,r,o){var a=this.getBoundingRect(),s=this._invertLongitute;a=a.clone(),s&&(a.y=-a.y-a.height);var l=this._rawTransformable;l.transform=a.calculateTransform(new te(e,i,r,o));var h=l.parent;l.parent=null,l.decomposeTransform(),l.parent=h,s&&(l.scaleY=-l.scaleY),this._updateTransform()},t.prototype.getRegion=function(e){return this._regionsMap.get(e)},t.prototype.getRegionByCoord=function(e){for(var i=this.regions,r=0;r<i.length;r++){var o=i[r];if(o.type==="geoJSON"&&o.contain(e))return i[r]}},t.prototype.addGeoCoord=function(e,i){this._nameCoordMap.set(e,i)},t.prototype.getGeoCoord=function(e){var i=this._regionsMap.get(e);return this._nameCoordMap.get(e)||i&&i.getCenter()},t.prototype.dataToPoint=function(e,i,r){if(Ct(e)&&(e=this.getGeoCoord(e)),e){var o=this.projection;return o&&(e=o.project(e)),e&&this.projectedToPoint(e,i,r)}},t.prototype.pointToData=function(e){var i=this.projection;return i&&(e=i.unproject(e)),e&&this.pointToProjected(e)},t.prototype.pointToProjected=function(e){return n.prototype.pointToData.call(this,e)},t.prototype.projectedToPoint=function(e,i,r){return n.prototype.dataToPoint.call(this,e,i,r)},t.prototype.convertToPixel=function(e,i,r){var o=tV(i);return o===this?o.dataToPoint(r):null},t.prototype.convertFromPixel=function(e,i,r){var o=tV(i);return o===this?o.pointToData(r):null},t})(f_);In(sD,f_);function tV(n){var t=n.geoModel,e=n.seriesModel;return t?t.coordinateSystem:e?e.coordinateSystem||(e.getReferringComponents("geo",Mn).models[0]||{}).coordinateSystem:null}function eV(n,t){var e=n.get("boundingCoords");if(e!=null){var i=e[0],r=e[1];if(isFinite(i[0])&&isFinite(i[1])&&isFinite(r[0])&&isFinite(r[1])){var o=this.projection;if(o){var a=i[0],s=i[1],l=r[0],h=r[1];i=[1/0,1/0],r=[-1/0,-1/0];var u=function(C,x,S,A){for(var T=S-C,M=A-x,R=0;R<=100;R++){var L=R/100,B=o.project([C+T*L,x+M*L]);Pu(i,i,B),Bu(r,r,B)}};u(a,s,l,s),u(l,s,l,h),u(l,h,a,h),u(a,h,l,s)}this.setBoundingRect(i[0],i[1],r[0]-i[0],r[1]-i[1])}}var d=this.getBoundingRect(),c=n.get("layoutCenter"),f=n.get("layoutSize"),g=t.getWidth(),p=t.getHeight(),v=d.width/d.height*this.aspectScale,m=!1,y,b;c&&f&&(y=[mt(c[0],g),mt(c[1],p)],b=mt(f,Math.min(g,p)),!isNaN(y[0])&&!isNaN(y[1])&&!isNaN(b)&&(m=!0));var _;if(m)_={},v>1?(_.width=b,_.height=b/v):(_.height=b,_.width=b*v),_.y=y[1]-_.height/2,_.x=y[0]-_.width/2;else{var w=n.getBoxLayoutParams();w.aspect=v,_=Vn(w,{width:g,height:p})}this.setViewRect(_.x,_.y,_.width,_.height),this.setCenter(n.get("center"),t),this.setZoom(n.get("zoom"))}function qbt(n,t){z(t.get("geoCoord"),function(e,i){n.addGeoCoord(i,e)})}var Kbt=(function(){function n(){this.dimensions=htt}return n.prototype.create=function(t,e){var i=[];function r(a){return{nameProperty:a.get("nameProperty"),aspectScale:a.get("aspectScale"),projection:a.get("projection")}}t.eachComponent("geo",function(a,s){var l=a.get("map"),h=new sD(l+s,l,ht({nameMap:a.get("nameMap")},r(a)));h.zoomLimit=a.get("scaleLimit"),i.push(h),a.coordinateSystem=h,h.model=a,h.resize=eV,h.resize(a,e)}),t.eachSeries(function(a){var s=a.get("coordinateSystem");if(s==="geo"){var l=a.get("geoIndex")||0;a.coordinateSystem=i[l]}});var o={};return t.eachSeriesByType("map",function(a){if(!a.getHostGeoModel()){var s=a.getMapType();o[s]=o[s]||[],o[s].push(a)}}),z(o,function(a,s){var l=ct(a,function(u){return u.get("nameMap")}),h=new sD(s,s,ht({nameMap:xH(l)},r(a[0])));h.zoomLimit=rr.apply(null,ct(a,function(u){return u.get("scaleLimit")})),i.push(h),h.resize=eV,h.resize(a[0],e),z(a,function(u){u.coordinateSystem=h,qbt(h,u)})}),i},n.prototype.getFilledRegions=function(t,e,i,r){for(var o=(t||[]).slice(),a=Pt(),s=0;s<o.length;s++)a.set(o[s].name,o[s]);var l=Oh.load(e,i,r);return z(l.regions,function(h){var u=h.name,d=a.get(u),c=h.properties&&h.properties.echartsStyle;d||(d={name:u},o.push(d)),c&&Zt(d,c)}),o},n})(),utt=new Kbt,Zbt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(e,i,r){var o=Oh.getGeoResource(e.map);if(o&&o.type==="geoJSON"){var a=e.itemStyle=e.itemStyle||{};"color"in a||(a.color="#eee")}this.mergeDefaultAndTheme(e,r),xf(e,"label",["show"])},t.prototype.optionUpdated=function(){var e=this,i=this.option;i.regions=utt.getFilledRegions(i.regions,i.map,i.nameMap,i.nameProperty);var r={};this._optionModelMap=wl(i.regions||[],function(o,a){var s=a.name;return s&&(o.set(s,new Ze(a,e,e.ecModel)),a.selected&&(r[s]=!0)),o},Pt()),i.selectedMap||(i.selectedMap=r)},t.prototype.getRegionModel=function(e){return this._optionModelMap.get(e)||new Ze(null,this,this.ecModel)},t.prototype.getFormattedLabel=function(e,i){var r=this.getRegionModel(e),o=i==="normal"?r.get(["label","formatter"]):r.get(["emphasis","label","formatter"]),a={name:e};if(Dt(o))return a.status=i,o(a);if(Ct(o))return o.replace("{a}",e??"")},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.setCenter=function(e){this.option.center=e},t.prototype.select=function(e){var i=this.option,r=i.selectedMode;if(r){r!=="multiple"&&(i.selectedMap=null);var o=i.selectedMap||(i.selectedMap={});o[e]=!0}},t.prototype.unSelect=function(e){var i=this.option.selectedMap;i&&(i[e]=!1)},t.prototype.toggleSelected=function(e){this[this.isSelected(e)?"unSelect":"select"](e)},t.prototype.isSelected=function(e){var i=this.option.selectedMap;return!!(i&&i[e])},t.type="geo",t.layoutMode="box",t.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},t})(ge);function iV(n,t){return n.pointToProjected?n.pointToProjected(t):n.pointToData(t)}function Lz(n,t,e,i){var r=n.getZoom(),o=n.getCenter(),a=t.zoom,s=n.projectedToPoint?n.projectedToPoint(o):n.dataToPoint(o);if(t.dx!=null&&t.dy!=null&&(s[0]-=t.dx,s[1]-=t.dy,n.setCenter(iV(n,s),i)),a!=null){if(e){var l=e.min||0,h=e.max||1/0;a=Math.max(Math.min(r*a,h),l)/r}n.scaleX*=a,n.scaleY*=a;var u=(t.originX-n.x)*(a-1),d=(t.originY-n.y)*(a-1);n.x-=u,n.y-=d,n.updateTransform(),n.setCenter(iV(n,s),i),n.setZoom(a*r)}return{center:n.getCenter(),zoom:n.getZoom()}}var nV="\0_ec_interaction_mutex";function Jbt(n,t,e){var i=Ez(n);i[t]=e}function Qbt(n,t,e){var i=Ez(n),r=i[t];r===e&&(i[t]=null)}function rV(n,t){return!!Ez(n)[t]}function Ez(n){return n[nV]||(n[nV]={})}kl({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},dn);var g_=(function(n){et(t,n);function t(e){var i=n.call(this)||this;i._zr=e;var r=xt(i._mousedownHandler,i),o=xt(i._mousemoveHandler,i),a=xt(i._mouseupHandler,i),s=xt(i._mousewheelHandler,i),l=xt(i._pinchHandler,i);return i.enable=function(h,u){this.disable(),this._opt=Ot(zt(u)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),h==null&&(h=!0),(h===!0||h==="move"||h==="pan")&&(e.on("mousedown",r),e.on("mousemove",o),e.on("mouseup",a)),(h===!0||h==="scale"||h==="zoom")&&(e.on("mousewheel",s),e.on("pinch",l))},i.disable=function(){e.off("mousedown",r),e.off("mousemove",o),e.off("mouseup",a),e.off("mousewheel",s),e.off("pinch",l)},i}return t.prototype.isDragging=function(){return this._dragging},t.prototype.isPinching=function(){return this._pinching},t.prototype.setPointerChecker=function(e){this.pointerChecker=e},t.prototype.dispose=function(){this.disable()},t.prototype._mousedownHandler=function(e){if(!zN(e)){for(var i=e.target;i;){if(i.draggable)return;i=i.__hostTarget||i.parent}var r=e.offsetX,o=e.offsetY;this.pointerChecker&&this.pointerChecker(e,r,o)&&(this._x=r,this._y=o,this._dragging=!0)}},t.prototype._mousemoveHandler=function(e){if(!(!this._dragging||!ww("moveOnMouseMove",e,this._opt)||e.gestureEvent==="pinch"||rV(this._zr,"globalPan"))){var i=e.offsetX,r=e.offsetY,o=this._x,a=this._y,s=i-o,l=r-a;this._x=i,this._y=r,this._opt.preventDefaultMouseMove&&Bh(e.event),dtt(this,"pan","moveOnMouseMove",e,{dx:s,dy:l,oldX:o,oldY:a,newX:i,newY:r,isAvailableBehavior:null})}},t.prototype._mouseupHandler=function(e){zN(e)||(this._dragging=!1)},t.prototype._mousewheelHandler=function(e){var i=ww("zoomOnMouseWheel",e,this._opt),r=ww("moveOnMouseWheel",e,this._opt),o=e.wheelDelta,a=Math.abs(o),s=e.offsetX,l=e.offsetY;if(!(o===0||!i&&!r)){if(i){var h=a>3?1.4:a>1?1.2:1.1,u=o>0?h:1/h;wP(this,"zoom","zoomOnMouseWheel",e,{scale:u,originX:s,originY:l,isAvailableBehavior:null})}if(r){var d=Math.abs(o),c=(o>0?1:-1)*(d>3?.4:d>1?.15:.05);wP(this,"scrollMove","moveOnMouseWheel",e,{scrollDelta:c,originX:s,originY:l,isAvailableBehavior:null})}}},t.prototype._pinchHandler=function(e){if(!rV(this._zr,"globalPan")){var i=e.pinchScale>1?1.1:1/1.1;wP(this,"zoom",null,e,{scale:i,originX:e.pinchX,originY:e.pinchY,isAvailableBehavior:null})}},t})(Ya);function wP(n,t,e,i,r){n.pointerChecker&&n.pointerChecker(i,r.originX,r.originY)&&(Bh(i.event),dtt(n,t,e,i,r))}function dtt(n,t,e,i,r){r.isAvailableBehavior=xt(ww,null,e,i),n.trigger(t,r)}function ww(n,t,e){var i=e[n];return!n||i&&(!Ct(i)||t.event[i+"Key"])}function Dz(n,t,e){var i=n.target;i.x+=t,i.y+=e,i.dirty()}function Iz(n,t,e,i){var r=n.target,o=n.zoomLimit,a=n.zoom=n.zoom||1;if(a*=t,o){var s=o.min||0,l=o.max||1/0;a=Math.max(Math.min(l,a),s)}var h=a/n.zoom;n.zoom=a,r.x-=(e-r.x)*(h-1),r.y-=(i-r.y)*(h-1),r.scaleX*=h,r.scaleY*=h,r.dirty()}var t_t={axisPointer:1,tooltip:1,brush:1};function dM(n,t,e){var i=t.getComponentByElement(n.topTarget),r=i&&i.coordinateSystem;return i&&i!==e&&!t_t.hasOwnProperty(i.mainType)&&r&&r.model!==e}var Oz=["rect","circle","line","ellipse","polygon","polyline","path"],e_t=Pt(Oz),i_t=Pt(Oz.concat(["g"])),n_t=Pt(Oz.concat(["g"])),ctt=Te();function OC(n){var t=n.getItemStyle(),e=n.get("areaColor");return e!=null&&(t.fill=e),t}function oV(n){var t=n.style;t&&(t.stroke=t.stroke||t.fill,t.fill=null)}var ftt=(function(){function n(t){var e=new Ft;this.uid=Vv("ec_map_draw"),this._controller=new g_(t.getZr()),this._controllerHost={target:e},this.group=e,e.add(this._regionsGroup=new Ft),e.add(this._svgGroup=new Ft)}return n.prototype.draw=function(t,e,i,r,o){var a=t.mainType==="geo",s=t.getData&&t.getData();a&&e.eachComponent({mainType:"series",subType:"map"},function(m){!s&&m.getHostGeoModel()===t&&(s=m.getData())});var l=t.coordinateSystem,h=this._regionsGroup,u=this.group,d=l.getTransformInfo(),c=d.raw,f=d.roam,g=!h.childAt(0)||o;g?(u.x=f.x,u.y=f.y,u.scaleX=f.scaleX,u.scaleY=f.scaleY,u.dirty()):Ie(u,f,t);var p=s&&s.getVisual("visualMeta")&&s.getVisual("visualMeta").length>0,v={api:i,geo:l,mapOrGeoModel:t,data:s,isVisualEncodedByVisualMap:p,isGeo:a,transformInfoRaw:c};l.resourceType==="geoJSON"?this._buildGeoJSON(v):l.resourceType==="geoSVG"&&this._buildSVG(v),this._updateController(t,e,i),this._updateMapSelectHandler(t,h,i,r)},n.prototype._buildGeoJSON=function(t){var e=this._regionsGroupByName=Pt(),i=Pt(),r=this._regionsGroup,o=t.transformInfoRaw,a=t.mapOrGeoModel,s=t.data,l=t.geo.projection,h=l&&l.stream;function u(f,g){return g&&(f=g(f)),f&&[f[0]*o.scaleX+o.x,f[1]*o.scaleY+o.y]}function d(f){for(var g=[],p=!h&&l&&l.project,v=0;v<f.length;++v){var m=u(f[v],p);m&&g.push(m)}return g}function c(f){return{shape:{points:d(f)}}}r.removeAll(),z(t.geo.regions,function(f){var g=f.name,p=e.get(g),v=i.get(g)||{},m=v.dataIdx,y=v.regionModel;if(!p){p=e.set(g,new Ft),r.add(p),m=s?s.indexOfName(g):null,y=t.isGeo?a.getRegionModel(g):s?s.getItemModel(m):null;var b=y.get("silent",!0);b!=null&&(p.silent=b),i.set(g,{dataIdx:m,regionModel:y})}var _=[],w=[];z(f.geometries,function(S){if(S.type==="polygon"){var A=[S.exterior].concat(S.interiors||[]);h&&(A=dV(A,h)),z(A,function(M){_.push(new uo(c(M)))})}else{var T=S.points;h&&(T=dV(T,h,!0)),z(T,function(M){w.push(new fo(c(M)))})}});var C=u(f.getCenter(),l&&l.project);function x(S,A){if(S.length){var T=new $H({culling:!0,segmentIgnoreThreshold:1,shape:{paths:S}});p.add(T),aV(t,T,m,y),sV(t,T,g,y,a,m,C),A&&(oV(T),z(T.states,oV))}}x(_),x(w,!0)}),e.each(function(f,g){var p=i.get(g),v=p.dataIdx,m=p.regionModel;lV(t,f,g,m,a,v),hV(t,f,g,m,a),uV(t,f,g,m,a)},this)},n.prototype._buildSVG=function(t){var e=t.geo.map,i=t.transformInfoRaw;this._svgGroup.x=i.x,this._svgGroup.y=i.y,this._svgGroup.scaleX=i.scaleX,this._svgGroup.scaleY=i.scaleY,this._svgResourceChanged(e)&&(this._freeSVG(),this._useSVG(e));var r=this._svgDispatcherMap=Pt(),o=!1;z(this._svgGraphicRecord.named,function(a){var s=a.name,l=t.mapOrGeoModel,h=t.data,u=a.svgNodeTagLower,d=a.el,c=h?h.indexOfName(s):null,f=l.getRegionModel(s);e_t.get(u)!=null&&d instanceof Ua&&aV(t,d,c,f),d instanceof Ua&&(d.culling=!0);var g=f.get("silent",!0);if(g!=null&&(d.silent=g),d.z2EmphasisLift=0,!a.namedFrom&&(n_t.get(u)!=null&&sV(t,d,s,f,l,c,null),lV(t,d,s,f,l,c),hV(t,d,s,f,l),i_t.get(u)!=null)){var p=uV(t,d,s,f,l);p==="self"&&(o=!0);var v=r.get(s)||r.set(s,[]);v.push(d)}},this),this._enableBlurEntireSVG(o,t)},n.prototype._enableBlurEntireSVG=function(t,e){if(t&&e.isGeo){var i=e.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle(),r=i.opacity;this._svgGraphicRecord.root.traverse(function(o){if(!o.isGroup){Tf(o);var a=o.ensureState("blur").style||{};a.opacity==null&&r!=null&&(a.opacity=r),o.ensureState("emphasis")}})}},n.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},n.prototype.findHighDownDispatchers=function(t,e){if(t==null)return[];var i=e.coordinateSystem;if(i.resourceType==="geoJSON"){var r=this._regionsGroupByName;if(r){var o=r.get(t);return o?[o]:[]}}else if(i.resourceType==="geoSVG")return this._svgDispatcherMap&&this._svgDispatcherMap.get(t)||[]},n.prototype._svgResourceChanged=function(t){return this._svgMapName!==t},n.prototype._useSVG=function(t){var e=Oh.getGeoResource(t);if(e&&e.type==="geoSVG"){var i=e.useGraphic(this.uid);this._svgGroup.add(i.root),this._svgGraphicRecord=i,this._svgMapName=t}},n.prototype._freeSVG=function(){var t=this._svgMapName;if(t!=null){var e=Oh.getGeoResource(t);e&&e.type==="geoSVG"&&e.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},n.prototype._updateController=function(t,e,i){var r=t.coordinateSystem,o=this._controller,a=this._controllerHost;a.zoomLimit=t.get("scaleLimit"),a.zoom=r.getZoom(),o.enable(t.get("roam")||!1);var s=t.mainType;function l(){var h={type:"geoRoam",componentType:s};return h[s+"Id"]=t.id,h}o.off("pan").on("pan",function(h){this._mouseDownFlag=!1,Dz(a,h.dx,h.dy),i.dispatchAction(ht(l(),{dx:h.dx,dy:h.dy,animation:{duration:0}}))},this),o.off("zoom").on("zoom",function(h){this._mouseDownFlag=!1,Iz(a,h.scale,h.originX,h.originY),i.dispatchAction(ht(l(),{totalZoom:a.zoom,zoom:h.scale,originX:h.originX,originY:h.originY,animation:{duration:0}}))},this),o.setPointerChecker(function(h,u,d){return r.containPoint([u,d])&&!dM(h,i,t)})},n.prototype.resetForLabelLayout=function(){this.group.traverse(function(t){var e=t.getTextContent();e&&(e.ignore=ctt(e).ignore)})},n.prototype._updateMapSelectHandler=function(t,e,i,r){var o=this;e.off("mousedown"),e.off("click"),t.get("selectedMode")&&(e.on("mousedown",function(){o._mouseDownFlag=!0}),e.on("click",function(a){o._mouseDownFlag&&(o._mouseDownFlag=!1)}))},n})();function aV(n,t,e,i){var r=i.getModel("itemStyle"),o=i.getModel(["emphasis","itemStyle"]),a=i.getModel(["blur","itemStyle"]),s=i.getModel(["select","itemStyle"]),l=OC(r),h=OC(o),u=OC(s),d=OC(a),c=n.data;if(c){var f=c.getItemVisual(e,"style"),g=c.getItemVisual(e,"decal");n.isVisualEncodedByVisualMap&&f.fill&&(l.fill=f.fill),g&&(l.decal=Up(g,n.api))}t.setStyle(l),t.style.strokeNoScale=!0,t.ensureState("emphasis").style=h,t.ensureState("select").style=u,t.ensureState("blur").style=d,Tf(t)}function sV(n,t,e,i,r,o,a){var s=n.data,l=n.isGeo,h=s&&isNaN(s.get(s.mapDimension("value"),o)),u=s&&s.getItemLayout(o);if(l||h||u&&u.showLabel){var d=l?e:o,c=void 0;(!s||o>=0)&&(c=r);var f=a?{normal:{align:"center",verticalAlign:"middle"}}:null;Tr(t,Zn(i),{labelFetcher:c,labelDataIndex:d,defaultText:e},f);var g=t.getTextContent();if(g&&(ctt(g).ignore=g.ignore,t.textConfig&&a)){var p=t.getBoundingRect().clone();t.textConfig.layoutRect=p,t.textConfig.position=[(a[0]-p.x)/p.width*100+"%",(a[1]-p.y)/p.height*100+"%"]}t.disableLabelAnimation=!0}else t.removeTextContent(),t.removeTextConfig(),t.disableLabelAnimation=null}function lV(n,t,e,i,r,o){n.data?n.data.setItemGraphicEl(o,t):Vt(t).eventData={componentType:"geo",componentIndex:r.componentIndex,geoIndex:r.componentIndex,name:e,region:i&&i.option||{}}}function hV(n,t,e,i,r){n.data||Kf({el:t,componentModel:r,itemName:e,itemTooltipOption:i.get("tooltip")})}function uV(n,t,e,i,r){t.highDownSilentOnTouch=!!r.get("selectedMode");var o=i.getModel("emphasis"),a=o.get("focus");return Gi(t,a,o.get("blurScope"),o.get("disabled")),n.isGeo&&Yft(t,r,e),a}function dV(n,t,e){var i=[],r;function o(){r=[]}function a(){r.length&&(i.push(r),r=[])}var s=t({polygonStart:o,polygonEnd:a,lineStart:o,lineEnd:a,point:function(l,h){isFinite(l)&&isFinite(h)&&r.push([l,h])},sphere:function(){}});return!e&&s.polygonStart(),z(n,function(l){s.lineStart();for(var h=0;h<l.length;h++)s.point(l[h][0],l[h][1]);s.lineEnd()}),!e&&s.polygonEnd(),i}var r_t=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e.focusBlurEnabled=!0,e}return t.prototype.init=function(e,i){this._api=i},t.prototype.render=function(e,i,r,o){if(this._model=e,!e.get("show")){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;return}this._mapDraw||(this._mapDraw=new ftt(r));var a=this._mapDraw;a.draw(e,i,r,this,o),a.group.on("click",this._handleRegionClick,this),a.group.silent=e.get("silent"),this.group.add(a.group),this.updateSelectStatus(e,i,r)},t.prototype._handleRegionClick=function(e){var i;Hc(e.target,function(r){return(i=Vt(r).eventData)!=null},!0),i&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:i.name})},t.prototype.updateSelectStatus=function(e,i,r){var o=this;this._mapDraw.group.traverse(function(a){var s=Vt(a).eventData;if(s)return o._model.isSelected(s.name)?r.enterSelect(a):r.leaveSelect(a),!0})},t.prototype.findHighDownDispatchers=function(e){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(e,this._model)},t.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},t.type="geo",t})(Di);function o_t(n,t,e){Oh.registerMap(n,t,e)}function gtt(n){n.registerCoordinateSystem("geo",utt),n.registerComponentModel(Zbt),n.registerComponentView(r_t),n.registerImpl("registerMap",o_t),n.registerImpl("getMap",function(e){return Oh.getMapForUser(e)});function t(e,i){i.update="geo:updateSelectStatus",n.registerAction(i,function(r,o){var a={},s=[];return o.eachComponent({mainType:"geo",query:r},function(l){l[e](r.name);var h=l.coordinateSystem;z(h.regions,function(d){a[d.name]=l.isSelected(d.name)||!1});var u=[];z(a,function(d,c){a[c]&&u.push(c)}),s.push({geoIndex:l.componentIndex,name:u})}),{selected:a,allSelected:s,name:r.name}})}t("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),t("select",{type:"geoSelect",event:"geoselected"}),t("unSelect",{type:"geoUnSelect",event:"geounselected"}),n.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(e,i,r){var o=e.componentType||"series";i.eachComponent({mainType:o,query:e},function(a){var s=a.coordinateSystem;if(s.type==="geo"){var l=Lz(s,e,a.get("scaleLimit"),r);a.setCenter&&a.setCenter(l.center),a.setZoom&&a.setZoom(l.zoom),o==="series"&&z(a.seriesGroup,function(h){h.setCenter(l.center),h.setZoom(l.zoom)})}})})}function lD(n,t){t=t||{};var e=n.coordinateSystem,i=n.axis,r={},o=i.position,a=i.orient,s=e.getRect(),l=[s.x,s.x+s.width,s.y,s.y+s.height],h={horizontal:{top:l[2],bottom:l[3]},vertical:{left:l[0],right:l[1]}};r.position=[a==="vertical"?h.vertical[o]:l[0],a==="horizontal"?h.horizontal[o]:l[3]];var u={horizontal:0,vertical:1};r.rotation=Math.PI/2*u[a];var d={top:-1,bottom:1,right:1,left:-1};r.labelDirection=r.tickDirection=r.nameDirection=d[o],n.get(["axisTick","inside"])&&(r.tickDirection=-r.tickDirection),rr(t.labelInside,n.get(["axisLabel","inside"]))&&(r.labelDirection=-r.labelDirection);var c=t.rotate;return c==null&&(c=n.get(["axisLabel","rotate"])),r.labelRotation=o==="top"?-c:c,r.z2=1,r}var a_t=["axisLine","axisTickLabel","axisName"],s_t=["splitArea","splitLine"],l_t=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e.axisPointerClass="SingleAxisPointer",e}return t.prototype.render=function(e,i,r,o){var a=this.group;a.removeAll();var s=this._axisGroup;this._axisGroup=new Ft;var l=lD(e),h=new ao(e,l);z(a_t,h.add,h),a.add(this._axisGroup),a.add(h.getGroup()),z(s_t,function(u){e.get([u,"show"])&&h_t[u](this,this.group,this._axisGroup,e)},this),a_(s,this._axisGroup,e),n.prototype.render.call(this,e,i,r,o)},t.prototype.remove=function(){UQ(this)},t.type="singleAxis",t})(tg),h_t={splitLine:function(n,t,e,i){var r=i.axis;if(!r.scale.isBlank()){var o=i.getModel("splitLine"),a=o.getModel("lineStyle"),s=a.get("color");s=s instanceof Array?s:[s];for(var l=a.get("width"),h=i.coordinateSystem.getRect(),u=r.isHorizontal(),d=[],c=0,f=r.getTicksCoords({tickModel:o}),g=[],p=[],v=0;v<f.length;++v){var m=r.toGlobalCoord(f[v].coord);u?(g[0]=m,g[1]=h.y,p[0]=m,p[1]=h.y+h.height):(g[0]=h.x,g[1]=m,p[0]=h.x+h.width,p[1]=m);var y=new Un({shape:{x1:g[0],y1:g[1],x2:p[0],y2:p[1]},silent:!0});$p(y.shape,l);var b=c++%s.length;d[b]=d[b]||[],d[b].push(y)}for(var _=a.getLineStyle(["color"]),v=0;v<d.length;++v)t.add(Ea(d[v],{style:Ot({stroke:s[v%s.length]},_),silent:!0}))}},splitArea:function(n,t,e,i){jQ(n,e,i,i)}},xw=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.getCoordSysModel=function(){return this},t.type="singleAxis",t.layoutMode="box",t.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}},t})(ge);In(xw,d_.prototype);var u_t=(function(n){et(t,n);function t(e,i,r,o,a){var s=n.call(this,e,i,r)||this;return s.type=o||"value",s.position=a||"bottom",s}return t.prototype.isHorizontal=function(){var e=this.position;return e==="top"||e==="bottom"},t.prototype.pointToData=function(e,i){return this.coordinateSystem.pointToData(e)[0]},t})(Ds),ptt=["single"],d_t=(function(){function n(t,e,i){this.type="single",this.dimension="single",this.dimensions=ptt,this.axisPointerEnabled=!0,this.model=t,this._init(t,e,i)}return n.prototype._init=function(t,e,i){var r=this.dimension,o=new u_t(r,hM(t),[0,0],t.get("type"),t.get("position")),a=o.type==="category";o.onBand=a&&t.get("boundaryGap"),o.inverse=t.get("inverse"),o.orient=t.get("orient"),t.axis=o,o.model=t,o.coordinateSystem=this,this._axis=o},n.prototype.update=function(t,e){t.eachSeries(function(i){if(i.coordinateSystem===this){var r=i.getData();z(r.mapDimensionsAll(this.dimension),function(o){this._axis.scale.unionExtentFromData(r,o)},this),Yp(this._axis.scale,this._axis.model)}},this)},n.prototype.resize=function(t,e){this._rect=Vn({left:t.get("left"),top:t.get("top"),right:t.get("right"),bottom:t.get("bottom"),width:t.get("width"),height:t.get("height")},{width:e.getWidth(),height:e.getHeight()}),this._adjustAxis()},n.prototype.getRect=function(){return this._rect},n.prototype._adjustAxis=function(){var t=this._rect,e=this._axis,i=e.isHorizontal(),r=i?[0,t.width]:[0,t.height],o=e.inverse?1:0;e.setExtent(r[o],r[1-o]),this._updateAxisTransform(e,i?t.x:t.y)},n.prototype._updateAxisTransform=function(t,e){var i=t.getExtent(),r=i[0]+i[1],o=t.isHorizontal();t.toGlobalCoord=o?function(a){return a+e}:function(a){return r-a+e},t.toLocalCoord=o?function(a){return a-e}:function(a){return r-a+e}},n.prototype.getAxis=function(){return this._axis},n.prototype.getBaseAxis=function(){return this._axis},n.prototype.getAxes=function(){return[this._axis]},n.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},n.prototype.containPoint=function(t){var e=this.getRect(),i=this.getAxis(),r=i.orient;return r==="horizontal"?i.contain(i.toLocalCoord(t[0]))&&t[1]>=e.y&&t[1]<=e.y+e.height:i.contain(i.toLocalCoord(t[1]))&&t[0]>=e.y&&t[0]<=e.y+e.height},n.prototype.pointToData=function(t){var e=this.getAxis();return[e.coordToData(e.toLocalCoord(t[e.orient==="horizontal"?0:1]))]},n.prototype.dataToPoint=function(t){var e=this.getAxis(),i=this.getRect(),r=[],o=e.orient==="horizontal"?0:1;return t instanceof Array&&(t=t[0]),r[o]=e.toGlobalCoord(e.dataToCoord(+t)),r[1-o]=o===0?i.y+i.height/2:i.x+i.width/2,r},n.prototype.convertToPixel=function(t,e,i){var r=cV(e);return r===this?this.dataToPoint(i):null},n.prototype.convertFromPixel=function(t,e,i){var r=cV(e);return r===this?this.pointToData(i):null},n})();function cV(n){var t=n.seriesModel,e=n.singleAxisModel;return e&&e.coordinateSystem||t&&t.coordinateSystem}function c_t(n,t){var e=[];return n.eachComponent("singleAxis",function(i,r){var o=new d_t(i,n,t);o.name="single_"+r,o.resize(i,t),i.coordinateSystem=o,e.push(o)}),n.eachSeries(function(i){if(i.get("coordinateSystem")==="singleAxis"){var r=i.getReferringComponents("singleAxis",Mn).models[0];i.coordinateSystem=r&&r.coordinateSystem}}),e}var f_t={create:c_t,dimensions:ptt},fV=["x","y"],g_t=["width","height"],p_t=(function(n){et(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.makeElOption=function(e,i,r,o,a){var s=r.axis,l=s.coordinateSystem,h=xP(l,1-Px(s)),u=l.dataToPoint(i)[0],d=o.get("type");if(d&&d!=="none"){var c=Tz(o),f=v_t[d](s,u,h);f.style=c,e.graphicKey=f.type,e.pointer=f}var g=lD(r);QQ(i,e,g,r,o,a)},t.prototype.getHandleTransform=function(e,i,r){var o=lD(i,{labelInside:!1});o.labelMargin=r.get(["handle","margin"]);var a=Mz(i.axis,e,o);return{x:a[0],y:a[1],rotation:o.rotation+(o.labelDirection<0?Math.PI:0)}},t.prototype.updateHandleTransform=function(e,i,r,o){var a=r.axis,s=a.coordinateSystem,l=Px(a),h=xP(s,l),u=[e.x,e.y];u[l]+=i[l],u[l]=Math.min(h[1],u[l]),u[l]=Math.max(h[0],u[l]);var d=xP(s,1-l),c=(d[1]+d[0])/2,f=[c,c];return f[l]=u[l],{x:u[0],y:u[1],rotation:e.rotation,cursorPoint:f,tooltipOption:{verticalAlign:"middle"}}},t})(Az),v_t={line:function(n,t,e){var i=Rz([t,e[0]],[t,e[1]],Px(n));return{type:"Line",subPixelOptimize:!0,shape:i}},shadow:function(n,t,e){var i=n.getBandWidth(),r=e[1]-e[0];return{type:"Rect",shape:ttt([t-i/2,e[0]],[i,r],Px(n))}}};function Px(n){return n.isHorizontal()?0:1}function xP(n,t){var e=n.getRect();return[e[fV[t]],e[fV[t]]+e[g_t[t]]]}var m_t=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.type="single",t})(Di);function y_t(n){ae(c_),tg.registerAxisPointerClass("SingleAxisPointer",p_t),n.registerComponentView(m_t),n.registerComponentView(l_t),n.registerComponentModel(xw),Xp(n,"single",xw,xw.defaultOption),n.registerCoordinateSystem("single",f_t)}function b_t(n){__t(n),C_t(n)}function __t(n){if(!n.parallel){var t=!1;z(n.series,function(e){e&&e.type==="parallel"&&(t=!0)}),t&&(n.parallel=[{}])}}function C_t(n){var t=li(n.parallelAxis);z(t,function(e){if(Ht(e)){var i=e.parallelIndex||0,r=li(n.parallel)[i];r&&r.parallelAxisDefault&&Zt(e,r.parallelAxisDefault,!1)}})}var w_t=5,x_t=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,i,r){this._model=e,this._api=r,this._handlers||(this._handlers={},z(S_t,function(o,a){r.getZr().on(a,this._handlers[a]=xt(o,this))},this)),Yv(this,"_throttledDispatchExpand",e.get("axisExpandRate"),"fixRate")},t.prototype.dispose=function(e,i){Gy(this,"_throttledDispatchExpand"),z(this._handlers,function(r,o){i.getZr().off(o,r)}),this._handlers=null},t.prototype._throttledDispatchExpand=function(e){this._dispatchExpand(e)},t.prototype._dispatchExpand=function(e){e&&this._api.dispatchAction(ht({type:"parallelAxisExpand"},e))},t.type="parallel",t})(Di),S_t={mousedown:function(n){SP(this,"click")&&(this._mouseDownPoint=[n.offsetX,n.offsetY])},mouseup:function(n){var t=this._mouseDownPoint;if(SP(this,"click")&&t){var e=[n.offsetX,n.offsetY],i=Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2);if(i>w_t)return;var r=this._model.coordinateSystem.getSlidedAxisExpandWindow([n.offsetX,n.offsetY]);r.behavior!=="none"&&this._dispatchExpand({axisExpandWindow:r.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(n){if(!(this._mouseDownPoint||!SP(this,"mousemove"))){var t=this._model,e=t.coordinateSystem.getSlidedAxisExpandWindow([n.offsetX,n.offsetY]),i=e.behavior;i==="jump"&&this._throttledDispatchExpand.debounceNextCall(t.get("axisExpandDebounce")),this._throttledDispatchExpand(i==="none"?null:{axisExpandWindow:e.axisExpandWindow,animation:i==="jump"?null:{duration:0}})}}};function SP(n,t){var e=n._model;return e.get("axisExpandable")&&e.get("axisExpandTriggerOn")===t}var A_t=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(){n.prototype.init.apply(this,arguments),this.mergeOption({})},t.prototype.mergeOption=function(e){var i=this.option;e&&Zt(i,e,!0),this._initDimensions()},t.prototype.contains=function(e,i){var r=e.get("parallelIndex");return r!=null&&i.getComponent("parallel",r)===this},t.prototype.setAxisExpand=function(e){z(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(i){e.hasOwnProperty(i)&&(this.option[i]=e[i])},this)},t.prototype._initDimensions=function(){var e=this.dimensions=[],i=this.parallelAxisIndex=[],r=Ge(this.ecModel.queryComponents({mainType:"parallelAxis"}),function(o){return(o.get("parallelIndex")||0)===this.componentIndex},this);z(r,function(o){e.push("dim"+o.get("dim")),i.push(o.componentIndex)})},t.type="parallel",t.dependencies=["parallelAxis"],t.layoutMode="box",t.defaultOption={z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},t})(ge),T_t=(function(n){et(t,n);function t(e,i,r,o,a){var s=n.call(this,e,i,r)||this;return s.type=o||"value",s.axisIndex=a,s}return t.prototype.isHorizontal=function(){return this.coordinateSystem.getModel().get("layout")!=="horizontal"},t})(Ds);function eg(n,t,e,i,r,o){n=n||0;var a=e[1]-e[0];if(r!=null&&(r=wg(r,[0,a])),o!=null&&(o=Math.max(o,r??0)),i==="all"){var s=Math.abs(t[1]-t[0]);s=wg(s,[0,a]),r=o=wg(s,[r,o]),i=0}t[0]=wg(t[0],e),t[1]=wg(t[1],e);var l=AP(t,i);t[i]+=n;var h=r||0,u=e.slice();l.sign<0?u[0]+=h:u[1]-=h,t[i]=wg(t[i],u);var d;return d=AP(t,i),r!=null&&(d.sign!==l.sign||d.span<r)&&(t[1-i]=t[i]+l.sign*r),d=AP(t,i),o!=null&&d.span>o&&(t[1-i]=t[i]+d.sign*o),t}function AP(n,t){var e=n[t]-n[1-t];return{span:Math.abs(e),sign:e>0?-1:e<0?1:t?-1:1}}function wg(n,t){return Math.min(t[1]!=null?t[1]:1/0,Math.max(t[0]!=null?t[0]:-1/0,n))}var TP=z,vtt=Math.min,mtt=Math.max,gV=Math.floor,M_t=Math.ceil,pV=Ji,R_t=Math.PI,P_t=(function(){function n(t,e,i){this.type="parallel",this._axesMap=Pt(),this._axesLayout={},this.dimensions=t.dimensions,this._model=t,this._init(t,e,i)}return n.prototype._init=function(t,e,i){var r=t.dimensions,o=t.parallelAxisIndex;TP(r,function(a,s){var l=o[s],h=e.getComponent("parallelAxis",l),u=this._axesMap.set(a,new T_t(a,hM(h),[0,0],h.get("type"),l)),d=u.type==="category";u.onBand=d&&h.get("boundaryGap"),u.inverse=h.get("inverse"),h.axis=u,u.model=h,u.coordinateSystem=h.coordinateSystem=this},this)},n.prototype.update=function(t,e){this._updateAxesFromSeries(this._model,t)},n.prototype.containPoint=function(t){var e=this._makeLayoutInfo(),i=e.axisBase,r=e.layoutBase,o=e.pixelDimIndex,a=t[1-o],s=t[o];return a>=i&&a<=i+e.axisLength&&s>=r&&s<=r+e.layoutLength},n.prototype.getModel=function(){return this._model},n.prototype._updateAxesFromSeries=function(t,e){e.eachSeries(function(i){if(t.contains(i,e)){var r=i.getData();TP(this.dimensions,function(o){var a=this._axesMap.get(o);a.scale.unionExtentFromData(r,r.mapDimension(o)),Yp(a.scale,a.model)},this)}},this)},n.prototype.resize=function(t,e){this._rect=Vn(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()}),this._layoutAxes()},n.prototype.getRect=function(){return this._rect},n.prototype._makeLayoutInfo=function(){var t=this._model,e=this._rect,i=["x","y"],r=["width","height"],o=t.get("layout"),a=o==="horizontal"?0:1,s=e[r[a]],l=[0,s],h=this.dimensions.length,u=HC(t.get("axisExpandWidth"),l),d=HC(t.get("axisExpandCount")||0,[0,h]),c=t.get("axisExpandable")&&h>3&&h>d&&d>1&&u>0&&s>0,f=t.get("axisExpandWindow"),g;if(f)g=HC(f[1]-f[0],l),f[1]=f[0]+g;else{g=HC(u*(d-1),l);var p=t.get("axisExpandCenter")||gV(h/2);f=[u*p-g/2],f[1]=f[0]+g}var v=(s-g)/(h-d);v<3&&(v=0);var m=[gV(pV(f[0]/u,1))+1,M_t(pV(f[1]/u,1))-1],y=v/u*f[0];return{layout:o,pixelDimIndex:a,layoutBase:e[i[a]],layoutLength:s,axisBase:e[i[1-a]],axisLength:e[r[1-a]],axisExpandable:c,axisExpandWidth:u,axisCollapseWidth:v,axisExpandWindow:f,axisCount:h,winInnerIndices:m,axisExpandWindow0Pos:y}},n.prototype._layoutAxes=function(){var t=this._rect,e=this._axesMap,i=this.dimensions,r=this._makeLayoutInfo(),o=r.layout;e.each(function(a){var s=[0,r.axisLength],l=a.inverse?1:0;a.setExtent(s[l],s[1-l])}),TP(i,function(a,s){var l=(r.axisExpandable?k_t:B_t)(s,r),h={horizontal:{x:l.position,y:r.axisLength},vertical:{x:0,y:l.position}},u={horizontal:R_t/2,vertical:0},d=[h[o].x+t.x,h[o].y+t.y],c=u[o],f=Xo();qf(f,f,c),xl(f,f,d),this._axesLayout[a]={position:d,rotation:c,transform:f,axisNameAvailableWidth:l.axisNameAvailableWidth,axisLabelShow:l.axisLabelShow,nameTruncateMaxWidth:l.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},n.prototype.getAxis=function(t){return this._axesMap.get(t)},n.prototype.dataToPoint=function(t,e){return this.axisCoordToPoint(this._axesMap.get(e).dataToCoord(t),e)},n.prototype.eachActiveState=function(t,e,i,r){i==null&&(i=0),r==null&&(r=t.count());var o=this._axesMap,a=this.dimensions,s=[],l=[];z(a,function(v){s.push(t.mapDimension(v)),l.push(o.get(v).model)});for(var h=this.hasAxisBrushed(),u=i;u<r;u++){var d=void 0;if(!h)d="normal";else{d="active";for(var c=t.getValues(s,u),f=0,g=a.length;f<g;f++){var p=l[f].getActiveState(c[f]);if(p==="inactive"){d="inactive";break}}}e(d,u)}},n.prototype.hasAxisBrushed=function(){for(var t=this.dimensions,e=this._axesMap,i=!1,r=0,o=t.length;r<o;r++)e.get(t[r]).model.getActiveState()!=="normal"&&(i=!0);return i},n.prototype.axisCoordToPoint=function(t,e){var i=this._axesLayout[e];return bs([t,0],i.transform)},n.prototype.getAxisLayout=function(t){return zt(this._axesLayout[t])},n.prototype.getSlidedAxisExpandWindow=function(t){var e=this._makeLayoutInfo(),i=e.pixelDimIndex,r=e.axisExpandWindow.slice(),o=r[1]-r[0],a=[0,e.axisExpandWidth*(e.axisCount-1)];if(!this.containPoint(t))return{behavior:"none",axisExpandWindow:r};var s=t[i]-e.layoutBase-e.axisExpandWindow0Pos,l,h="slide",u=e.axisCollapseWidth,d=this._model.get("axisExpandSlideTriggerArea"),c=d[0]!=null;if(u)c&&u&&s<o*d[0]?(h="jump",l=s-o*d[2]):c&&u&&s>o*(1-d[0])?(h="jump",l=s-o*(1-d[2])):(l=s-o*d[1])>=0&&(l=s-o*(1-d[1]))<=0&&(l=0),l*=e.axisExpandWidth/u,l?eg(l,r,a,"all"):h="none";else{var f=r[1]-r[0],g=a[1]*s/f;r=[mtt(0,g-f/2)],r[1]=vtt(a[1],r[0]+f),r[0]=r[1]-f}return{axisExpandWindow:r,behavior:h}},n})();function HC(n,t){return vtt(mtt(n,t[0]),t[1])}function B_t(n,t){var e=t.layoutLength/(t.axisCount-1);return{position:e*n,axisNameAvailableWidth:e,axisLabelShow:!0}}function k_t(n,t){var e=t.layoutLength,i=t.axisExpandWidth,r=t.axisCount,o=t.axisCollapseWidth,a=t.winInnerIndices,s,l=o,h=!1,u;return n<a[0]?(s=n*o,u=o):n<=a[1]?(s=t.axisExpandWindow0Pos+n*i-t.axisExpandWindow[0],l=i,h=!0):(s=e-(r-1-n)*o,u=o),{position:s,axisNameAvailableWidth:l,axisLabelShow:h,nameTruncateMaxWidth:u}}function L_t(n,t){var e=[];return n.eachComponent("parallel",function(i,r){var o=new P_t(i,n,t);o.name="parallel_"+r,o.resize(i,t),i.coordinateSystem=o,o.model=i,e.push(o)}),n.eachSeries(function(i){if(i.get("coordinateSystem")==="parallel"){var r=i.getReferringComponents("parallel",Mn).models[0];i.coordinateSystem=r.coordinateSystem}}),e}var E_t={create:L_t},hD=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e.activeIntervals=[],e}return t.prototype.getAreaSelectStyle=function(){return Af([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},t.prototype.setActiveIntervals=function(e){var i=this.activeIntervals=zt(e);if(i)for(var r=i.length-1;r>=0;r--)Ha(i[r])},t.prototype.getActiveState=function(e){var i=this.activeIntervals;if(!i.length)return"normal";if(e==null||isNaN(+e))return"inactive";if(i.length===1){var r=i[0];if(r[0]<=e&&e<=r[1])return"active"}else for(var o=0,a=i.length;o<a;o++)if(i[o][0]<=e&&e<=i[o][1])return"active";return"inactive"},t})(ge);In(hD,d_);var Rf=!0,Xy=Math.min,qp=Math.max,D_t=Math.pow,I_t=1e4,O_t=6,H_t=6,vV="globalPan",z_t={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},F_t={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},mV={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},N_t=0,Hz=(function(n){et(t,n);function t(e){var i=n.call(this)||this;return i._track=[],i._covers=[],i._handlers={},i._zr=e,i.group=new Ft,i._uid="brushController_"+N_t++,z(Y_t,function(r,o){this._handlers[o]=xt(r,this)},i),i}return t.prototype.enableBrush=function(e){return this._brushType&&this._doDisableBrush(),e.brushType&&this._doEnableBrush(e),this},t.prototype._doEnableBrush=function(e){var i=this._zr;this._enableGlobalPan||Jbt(i,vV,this._uid),z(this._handlers,function(r,o){i.on(o,r)}),this._brushType=e.brushType,this._brushOption=Zt(zt(mV),e,!0)},t.prototype._doDisableBrush=function(){var e=this._zr;Qbt(e,vV,this._uid),z(this._handlers,function(i,r){e.off(r,i)}),this._brushType=this._brushOption=null},t.prototype.setPanels=function(e){if(e&&e.length){var i=this._panels={};z(e,function(r){i[r.panelId]=zt(r)})}else this._panels=null;return this},t.prototype.mount=function(e){e=e||{},this._enableGlobalPan=e.enableGlobalPan;var i=this.group;return this._zr.add(i),i.attr({x:e.x||0,y:e.y||0,rotation:e.rotation||0,scaleX:e.scaleX||1,scaleY:e.scaleY||1}),this._transform=i.getLocalTransform(),this},t.prototype.updateCovers=function(e){e=ct(e,function(c){return Zt(zt(mV),c,!0)});var i="\0-brush-index-",r=this._covers,o=this._covers=[],a=this,s=this._creatingCover;return new Dh(r,e,h,l).add(u).update(u).remove(d).execute(),this;function l(c,f){return(c.id!=null?c.id:i+f)+"-"+c.brushType}function h(c,f){return l(c.__brushOption,f)}function u(c,f){var g=e[c];if(f!=null&&r[f]===s)o[c]=r[f];else{var p=o[c]=f!=null?(r[f].__brushOption=g,r[f]):btt(a,ytt(a,g));zz(a,p)}}function d(c){r[c]!==s&&a.group.remove(r[c])}},t.prototype.unmount=function(){return this.enableBrush(!1),uD(this),this._zr.remove(this.group),this},t.prototype.dispose=function(){this.unmount(),this.off()},t})(Ya);function ytt(n,t){var e=cM[t.brushType].createCover(n,t);return e.__brushOption=t,Ctt(e,t),n.group.add(e),e}function btt(n,t){var e=Fz(t);return e.endCreating&&(e.endCreating(n,t),Ctt(t,t.__brushOption)),t}function _tt(n,t){var e=t.__brushOption;Fz(t).updateCoverShape(n,t,e.range,e)}function Ctt(n,t){var e=t.z;e==null&&(e=I_t),n.traverse(function(i){i.z=e,i.z2=e})}function zz(n,t){Fz(t).updateCommon(n,t),_tt(n,t)}function Fz(n){return cM[n.__brushOption.brushType]}function Nz(n,t,e){var i=n._panels;if(!i)return Rf;var r,o=n._transform;return z(i,function(a){a.isTargetByCursor(t,e,o)&&(r=a)}),r}function wtt(n,t){var e=n._panels;if(!e)return Rf;var i=t.__brushOption.panelId;return i!=null?e[i]:Rf}function uD(n){var t=n._covers,e=t.length;return z(t,function(i){n.group.remove(i)},n),t.length=0,!!e}function Pf(n,t){var e=ct(n._covers,function(i){var r=i.__brushOption,o=zt(r.range);return{brushType:r.brushType,panelId:r.panelId,range:o}});n.trigger("brush",{areas:e,isEnd:!!t.isEnd,removeOnClick:!!t.removeOnClick})}function W_t(n){var t=n._track;if(!t.length)return!1;var e=t[t.length-1],i=t[0],r=e[0]-i[0],o=e[1]-i[1],a=D_t(r*r+o*o,.5);return a>O_t}function xtt(n){var t=n.length-1;return t<0&&(t=0),[n[0],n[t]]}function Stt(n,t,e,i){var r=new Ft;return r.add(new Ae({name:"main",style:Wz(e),silent:!0,draggable:!0,cursor:"move",drift:qt(yV,n,t,r,["n","s","w","e"]),ondragend:qt(Pf,t,{isEnd:!0})})),z(i,function(o){r.add(new Ae({name:o.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:qt(yV,n,t,r,o),ondragend:qt(Pf,t,{isEnd:!0})}))}),r}function Att(n,t,e,i){var r=i.brushStyle.lineWidth||0,o=qp(r,H_t),a=e[0][0],s=e[1][0],l=a-r/2,h=s-r/2,u=e[0][1],d=e[1][1],c=u-o+r/2,f=d-o+r/2,g=u-a,p=d-s,v=g+r,m=p+r;Gl(n,t,"main",a,s,g,p),i.transformable&&(Gl(n,t,"w",l,h,o,m),Gl(n,t,"e",c,h,o,m),Gl(n,t,"n",l,h,v,o),Gl(n,t,"s",l,f,v,o),Gl(n,t,"nw",l,h,o,o),Gl(n,t,"ne",c,h,o,o),Gl(n,t,"sw",l,f,o,o),Gl(n,t,"se",c,f,o,o))}function dD(n,t){var e=t.__brushOption,i=e.transformable,r=t.childAt(0);r.useStyle(Wz(e)),r.attr({silent:!i,cursor:i?"move":"default"}),z([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(o){var a=t.childOfName(o.join("")),s=o.length===1?cD(n,o[0]):G_t(n,o);a&&a.attr({silent:!i,invisible:!i,cursor:i?F_t[s]+"-resize":null})})}function Gl(n,t,e,i,r,o,a){var s=t.childOfName(e);s&&s.setShape(j_t(Vz(n,t,[[i,r],[i+o,r+a]])))}function Wz(n){return Ot({strokeNoScale:!0},n.brushStyle)}function Ttt(n,t,e,i){var r=[Xy(n,e),Xy(t,i)],o=[qp(n,e),qp(t,i)];return[[r[0],o[0]],[r[1],o[1]]]}function V_t(n){return sf(n.group)}function cD(n,t){var e={w:"left",e:"right",n:"top",s:"bottom"},i={left:"w",right:"e",top:"n",bottom:"s"},r=YT(e[t],V_t(n));return i[r]}function G_t(n,t){var e=[cD(n,t[0]),cD(n,t[1])];return(e[0]==="e"||e[0]==="w")&&e.reverse(),e.join("")}function yV(n,t,e,i,r,o){var a=e.__brushOption,s=n.toRectRange(a.range),l=Mtt(t,r,o);z(i,function(h){var u=z_t[h];s[u[0]][u[1]]+=l[u[0]]}),a.range=n.fromRectRange(Ttt(s[0][0],s[1][0],s[0][1],s[1][1])),zz(t,e),Pf(t,{isEnd:!1})}function $_t(n,t,e,i){var r=t.__brushOption.range,o=Mtt(n,e,i);z(r,function(a){a[0]+=o[0],a[1]+=o[1]}),zz(n,t),Pf(n,{isEnd:!1})}function Mtt(n,t,e){var i=n.group,r=i.transformCoordToLocal(t,e),o=i.transformCoordToLocal(0,0);return[r[0]-o[0],r[1]-o[1]]}function Vz(n,t,e){var i=wtt(n,t);return i&&i!==Rf?i.clipPath(e,n._transform):zt(e)}function j_t(n){var t=Xy(n[0][0],n[1][0]),e=Xy(n[0][1],n[1][1]),i=qp(n[0][0],n[1][0]),r=qp(n[0][1],n[1][1]);return{x:t,y:e,width:i-t,height:r-e}}function U_t(n,t,e){if(!(!n._brushType||X_t(n,t.offsetX,t.offsetY))){var i=n._zr,r=n._covers,o=Nz(n,t,e);if(!n._dragging)for(var a=0;a<r.length;a++){var s=r[a].__brushOption;if(o&&(o===Rf||s.panelId===o.panelId)&&cM[s.brushType].contain(r[a],e[0],e[1]))return}o&&i.setCursorStyle("crosshair")}}function fD(n){var t=n.event;t.preventDefault&&t.preventDefault()}function gD(n,t,e){return n.childOfName("main").contain(t,e)}function Rtt(n,t,e,i){var r=n._creatingCover,o=n._creatingPanel,a=n._brushOption,s;if(n._track.push(e.slice()),W_t(n)||r){if(o&&!r){a.brushMode==="single"&&uD(n);var l=zt(a);l.brushType=bV(l.brushType,o),l.panelId=o===Rf?null:o.panelId,r=n._creatingCover=ytt(n,l),n._covers.push(r)}if(r){var h=cM[bV(n._brushType,o)],u=r.__brushOption;u.range=h.getCreatingRange(Vz(n,r,n._track)),i&&(btt(n,r),h.updateCommon(n,r)),_tt(n,r),s={isEnd:i}}}else i&&a.brushMode==="single"&&a.removeOnClick&&Nz(n,t,e)&&uD(n)&&(s={isEnd:i,removeOnClick:!0});return s}function bV(n,t){return n==="auto"?t.defaultBrushType:n}var Y_t={mousedown:function(n){if(this._dragging)_V(this,n);else if(!n.target||!n.target.draggable){fD(n);var t=this.group.transformCoordToLocal(n.offsetX,n.offsetY);this._creatingCover=null;var e=this._creatingPanel=Nz(this,n,t);e&&(this._dragging=!0,this._track=[t.slice()])}},mousemove:function(n){var t=n.offsetX,e=n.offsetY,i=this.group.transformCoordToLocal(t,e);if(U_t(this,n,i),this._dragging){fD(n);var r=Rtt(this,n,i,!1);r&&Pf(this,r)}},mouseup:function(n){_V(this,n)}};function _V(n,t){if(n._dragging){fD(t);var e=t.offsetX,i=t.offsetY,r=n.group.transformCoordToLocal(e,i),o=Rtt(n,t,r,!0);n._dragging=!1,n._track=[],n._creatingCover=null,o&&Pf(n,o)}}function X_t(n,t,e){var i=n._zr;return t<0||t>i.getWidth()||e<0||e>i.getHeight()}var cM={lineX:CV(0),lineY:CV(1),rect:{createCover:function(n,t){function e(i){return i}return Stt({toRectRange:e,fromRectRange:e},n,t,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(n){var t=xtt(n);return Ttt(t[1][0],t[1][1],t[0][0],t[0][1])},updateCoverShape:function(n,t,e,i){Att(n,t,e,i)},updateCommon:dD,contain:gD},polygon:{createCover:function(n,t){var e=new Ft;return e.add(new fo({name:"main",style:Wz(t),silent:!0})),e},getCreatingRange:function(n){return n},endCreating:function(n,t){t.remove(t.childAt(0)),t.add(new uo({name:"main",draggable:!0,drift:qt($_t,n,t),ondragend:qt(Pf,n,{isEnd:!0})}))},updateCoverShape:function(n,t,e,i){t.childAt(0).setShape({points:Vz(n,t,e)})},updateCommon:dD,contain:gD}};function CV(n){return{createCover:function(t,e){return Stt({toRectRange:function(i){var r=[i,[0,100]];return n&&r.reverse(),r},fromRectRange:function(i){return i[n]}},t,e,[[["w"],["e"]],[["n"],["s"]]][n])},getCreatingRange:function(t){var e=xtt(t),i=Xy(e[0][n],e[1][n]),r=qp(e[0][n],e[1][n]);return[i,r]},updateCoverShape:function(t,e,i,r){var o,a=wtt(t,e);if(a!==Rf&&a.getLinearBrushOtherExtent)o=a.getLinearBrushOtherExtent(n);else{var s=t._zr;o=[0,[s.getWidth(),s.getHeight()][1-n]]}var l=[i,o];n&&l.reverse(),Att(t,e,l,r)},updateCommon:dD,contain:gD}}function Ptt(n){return n=Gz(n),function(t){return MZ(t,n)}}function Btt(n,t){return n=Gz(n),function(e){var i=t??e,r=i?n.width:n.height,o=i?n.x:n.y;return[o,o+(r||0)]}}function ktt(n,t,e){var i=Gz(n);return function(r,o){return i.contain(o[0],o[1])&&!dM(r,t,e)}}function Gz(n){return te.create(n)}var q_t=["axisLine","axisTickLabel","axisName"],K_t=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(e,i){n.prototype.init.apply(this,arguments),(this._brushController=new Hz(i.getZr())).on("brush",xt(this._onBrush,this))},t.prototype.render=function(e,i,r,o){if(!Z_t(e,i,o)){this.axisModel=e,this.api=r,this.group.removeAll();var a=this._axisGroup;if(this._axisGroup=new Ft,this.group.add(this._axisGroup),!!e.get("show")){var s=Q_t(e,i),l=s.coordinateSystem,h=e.getAreaSelectStyle(),u=h.width,d=e.axis.dim,c=l.getAxisLayout(d),f=ht({strokeContainThreshold:u},c),g=new ao(e,f);z(q_t,g.add,g),this._axisGroup.add(g.getGroup()),this._refreshBrushController(f,h,e,s,u,r),a_(a,this._axisGroup,e)}}},t.prototype._refreshBrushController=function(e,i,r,o,a,s){var l=r.axis.getExtent(),h=l[1]-l[0],u=Math.min(30,Math.abs(h)*.1),d=te.create({x:l[0],y:-a/2,width:h,height:a});d.x-=u,d.width+=2*u,this._brushController.mount({enableGlobalPan:!0,rotation:e.rotation,x:e.position[0],y:e.position[1]}).setPanels([{panelId:"pl",clipPath:Ptt(d),isTargetByCursor:ktt(d,s,o),getLinearBrushOtherExtent:Btt(d,0)}]).enableBrush({brushType:"lineX",brushStyle:i,removeOnClick:!0}).updateCovers(J_t(r))},t.prototype._onBrush=function(e){var i=e.areas,r=this.axisModel,o=r.axis,a=ct(i,function(s){return[o.coordToData(s.range[0],!0),o.coordToData(s.range[1],!0)]});(!r.option.realtime===e.isEnd||e.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:r.id,intervals:a})},t.prototype.dispose=function(){this._brushController.dispose()},t.type="parallelAxis",t})(Di);function Z_t(n,t,e){return e&&e.type==="axisAreaSelect"&&t.findComponents({mainType:"parallelAxis",query:e})[0]===n}function J_t(n){var t=n.axis;return ct(n.activeIntervals,function(e){return{brushType:"lineX",panelId:"pl",range:[t.dataToCoord(e[0],!0),t.dataToCoord(e[1],!0)]}})}function Q_t(n,t){return t.getComponent("parallel",n.get("parallelIndex"))}var tCt={type:"axisAreaSelect",event:"axisAreaSelected"};function eCt(n){n.registerAction(tCt,function(t,e){e.eachComponent({mainType:"parallelAxis",query:t},function(i){i.axis.model.setActiveIntervals(t.intervals)})}),n.registerAction("parallelAxisExpand",function(t,e){e.eachComponent({mainType:"parallel",query:t},function(i){i.setAxisExpand(t)})})}var iCt={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function Ltt(n){n.registerComponentView(x_t),n.registerComponentModel(A_t),n.registerCoordinateSystem("parallel",E_t),n.registerPreprocessor(b_t),n.registerComponentModel(hD),n.registerComponentView(K_t),Xp(n,"parallel",hD,iCt),eCt(n)}var nCt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(e,i,r){var o=$v(e);n.prototype.init.apply(this,arguments),wV(e,o)},t.prototype.mergeOption=function(e){n.prototype.mergeOption.apply(this,arguments),wV(this.option,e)},t.prototype.getCellSize=function(){return this.option.cellSize},t.type="calendar",t.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},t})(ge);function wV(n,t){var e=n.cellSize,i;ut(e)?i=e:i=n.cellSize=[e,e],i.length===1&&(i[1]=i[0]);var r=ct([0,1],function(o){return Kgt(t,o)&&(i[o]="auto"),i[o]!=null&&i[o]!=="auto"});ed(n,t,{type:"box",ignoreSize:r})}var rCt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,i,r){var o=this.group;o.removeAll();var a=e.coordinateSystem,s=a.getRangeInfo(),l=a.getOrient(),h=i.getLocaleModel();this._renderDayRect(e,s,o),this._renderLines(e,s,l,o),this._renderYearText(e,s,l,o),this._renderMonthText(e,h,l,o),this._renderWeekText(e,h,s,l,o)},t.prototype._renderDayRect=function(e,i,r){for(var o=e.coordinateSystem,a=e.getModel("itemStyle").getItemStyle(),s=o.getCellWidth(),l=o.getCellHeight(),h=i.start.time;h<=i.end.time;h=o.getNextNDay(h,1).time){var u=o.dataToRect([h],!1).tl,d=new Ae({shape:{x:u[0],y:u[1],width:s,height:l},cursor:"default",style:a});r.add(d)}},t.prototype._renderLines=function(e,i,r,o){var a=this,s=e.coordinateSystem,l=e.getModel(["splitLine","lineStyle"]).getLineStyle(),h=e.get(["splitLine","show"]),u=l.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var d=i.start,c=0;d.time<=i.end.time;c++){g(d.formatedDate),c===0&&(d=s.getDateInfo(i.start.y+"-"+i.start.m));var f=d.date;f.setMonth(f.getMonth()+1),d=s.getDateInfo(f)}g(s.getNextNDay(i.end.time,1).formatedDate);function g(p){a._firstDayOfMonth.push(s.getDateInfo(p)),a._firstDayPoints.push(s.dataToRect([p],!1).tl);var v=a._getLinePointsOfOneWeek(e,p,r);a._tlpoints.push(v[0]),a._blpoints.push(v[v.length-1]),h&&a._drawSplitline(v,l,o)}h&&this._drawSplitline(a._getEdgesPoints(a._tlpoints,u,r),l,o),h&&this._drawSplitline(a._getEdgesPoints(a._blpoints,u,r),l,o)},t.prototype._getEdgesPoints=function(e,i,r){var o=[e[0].slice(),e[e.length-1].slice()],a=r==="horizontal"?0:1;return o[0][a]=o[0][a]-i/2,o[1][a]=o[1][a]+i/2,o},t.prototype._drawSplitline=function(e,i,r){var o=new fo({z2:20,shape:{points:e},style:i});r.add(o)},t.prototype._getLinePointsOfOneWeek=function(e,i,r){for(var o=e.coordinateSystem,a=o.getDateInfo(i),s=[],l=0;l<7;l++){var h=o.getNextNDay(a.time,l),u=o.dataToRect([h.time],!1);s[2*h.day]=u.tl,s[2*h.day+1]=u[r==="horizontal"?"bl":"tr"]}return s},t.prototype._formatterLabel=function(e,i){return Ct(e)&&e?Ygt(e,i):Dt(e)?e(i):i.nameMap},t.prototype._yearTextPositionControl=function(e,i,r,o,a){var s=i[0],l=i[1],h=["center","bottom"];o==="bottom"?(l+=a,h=["center","top"]):o==="left"?s-=a:o==="right"?(s+=a,h=["center","top"]):l-=a;var u=0;return(o==="left"||o==="right")&&(u=Math.PI/2),{rotation:u,x:s,y:l,style:{align:h[0],verticalAlign:h[1]}}},t.prototype._renderYearText=function(e,i,r,o){var a=e.getModel("yearLabel");if(a.get("show")){var s=a.get("margin"),l=a.get("position");l||(l=r!=="horizontal"?"top":"left");var h=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],u=(h[0][0]+h[1][0])/2,d=(h[0][1]+h[1][1])/2,c=r==="horizontal"?0:1,f={top:[u,h[c][1]],bottom:[u,h[1-c][1]],left:[h[1-c][0],d],right:[h[c][0],d]},g=i.start.y;+i.end.y>+i.start.y&&(g=g+"-"+i.end.y);var p=a.get("formatter"),v={start:i.start.y,end:i.end.y,nameMap:g},m=this._formatterLabel(p,v),y=new Re({z2:30,style:_i(a,{text:m}),silent:a.get("silent")});y.attr(this._yearTextPositionControl(y,f[l],r,l,s)),o.add(y)}},t.prototype._monthTextPositionControl=function(e,i,r,o,a){var s="left",l="top",h=e[0],u=e[1];return r==="horizontal"?(u=u+a,i&&(s="center"),o==="start"&&(l="bottom")):(h=h+a,i&&(l="middle"),o==="start"&&(s="right")),{x:h,y:u,align:s,verticalAlign:l}},t.prototype._renderMonthText=function(e,i,r,o){var a=e.getModel("monthLabel");if(a.get("show")){var s=a.get("nameMap"),l=a.get("margin"),h=a.get("position"),u=a.get("align"),d=[this._tlpoints,this._blpoints];(!s||Ct(s))&&(s&&(i=OE(s)||i),s=i.get(["time","monthAbbr"])||[]);var c=h==="start"?0:1,f=r==="horizontal"?0:1;l=h==="start"?-l:l;for(var g=u==="center",p=a.get("silent"),v=0;v<d[c].length-1;v++){var m=d[c][v].slice(),y=this._firstDayOfMonth[v];if(g){var b=this._firstDayPoints[v];m[f]=(b[f]+d[0][v+1][f])/2}var _=a.get("formatter"),w=s[+y.m-1],C={yyyy:y.y,yy:(y.y+"").slice(2),MM:y.m,M:+y.m,nameMap:w},x=this._formatterLabel(_,C),S=new Re({z2:30,style:ht(_i(a,{text:x}),this._monthTextPositionControl(m,g,r,h,l)),silent:p});o.add(S)}}},t.prototype._weekTextPositionControl=function(e,i,r,o,a){var s="center",l="middle",h=e[0],u=e[1],d=r==="start";return i==="horizontal"?(h=h+o+(d?1:-1)*a[0]/2,s=d?"right":"left"):(u=u+o+(d?1:-1)*a[1]/2,l=d?"bottom":"top"),{x:h,y:u,align:s,verticalAlign:l}},t.prototype._renderWeekText=function(e,i,r,o,a){var s=e.getModel("dayLabel");if(s.get("show")){var l=e.coordinateSystem,h=s.get("position"),u=s.get("nameMap"),d=s.get("margin"),c=l.getFirstDayOfWeek();if(!u||Ct(u)){u&&(i=OE(u)||i);var f=i.get(["time","dayOfWeekShort"]);u=f||ct(i.get(["time","dayOfWeekAbbr"]),function(C){return C[0]})}var g=l.getNextNDay(r.end.time,7-r.lweek).time,p=[l.getCellWidth(),l.getCellHeight()];d=mt(d,Math.min(p[1],p[0])),h==="start"&&(g=l.getNextNDay(r.start.time,-(7+r.fweek)).time,d=-d);for(var v=s.get("silent"),m=0;m<7;m++){var y=l.getNextNDay(g,m),b=l.dataToRect([y.time],!1).center,_=m;_=Math.abs((m+c)%7);var w=new Re({z2:30,style:ht(_i(s,{text:u[_]}),this._weekTextPositionControl(b,o,h,d,p)),silent:v});a.add(w)}}},t.type="calendar",t})(Di),MP=864e5,oCt=(function(){function n(t,e,i){this.type="calendar",this.dimensions=n.dimensions,this.getDimensionsInfo=n.getDimensionsInfo,this._model=t}return n.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},n.prototype.getRangeInfo=function(){return this._rangeInfo},n.prototype.getModel=function(){return this._model},n.prototype.getRect=function(){return this._rect},n.prototype.getCellWidth=function(){return this._sw},n.prototype.getCellHeight=function(){return this._sh},n.prototype.getOrient=function(){return this._orient},n.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},n.prototype.getDateInfo=function(t){t=Al(t);var e=t.getFullYear(),i=t.getMonth()+1,r=i<10?"0"+i:""+i,o=t.getDate(),a=o<10?"0"+o:""+o,s=t.getDay();return s=Math.abs((s+7-this.getFirstDayOfWeek())%7),{y:e+"",m:r,d:a,day:s,time:t.getTime(),formatedDate:e+"-"+r+"-"+a,date:t}},n.prototype.getNextNDay=function(t,e){return e=e||0,e===0?this.getDateInfo(t):(t=new Date(this.getDateInfo(t).time),t.setDate(t.getDate()+e),this.getDateInfo(t))},n.prototype.update=function(t,e){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var i=this._rangeInfo.weeks||1,r=["width","height"],o=this._model.getCellSize().slice(),a=this._model.getBoxLayoutParams(),s=this._orient==="horizontal"?[i,7]:[7,i];z([0,1],function(d){u(o,d)&&(a[r[d]]=o[d]*s[d])});var l={width:e.getWidth(),height:e.getHeight()},h=this._rect=Vn(a,l);z([0,1],function(d){u(o,d)||(o[d]=h[r[d]]/s[d])});function u(d,c){return d[c]!=null&&d[c]!=="auto"}this._sw=o[0],this._sh=o[1]},n.prototype.dataToPoint=function(t,e){ut(t)&&(t=t[0]),e==null&&(e=!0);var i=this.getDateInfo(t),r=this._rangeInfo,o=i.formatedDate;if(e&&!(i.time>=r.start.time&&i.time<r.end.time+MP))return[NaN,NaN];var a=i.day,s=this._getRangeInfo([r.start.time,o]).nthWeek;return this._orient==="vertical"?[this._rect.x+a*this._sw+this._sw/2,this._rect.y+s*this._sh+this._sh/2]:[this._rect.x+s*this._sw+this._sw/2,this._rect.y+a*this._sh+this._sh/2]},n.prototype.pointToData=function(t){var e=this.pointToDate(t);return e&&e.time},n.prototype.dataToRect=function(t,e){var i=this.dataToPoint(t,e);return{contentShape:{x:i[0]-(this._sw-this._lineWidth)/2,y:i[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:i,tl:[i[0]-this._sw/2,i[1]-this._sh/2],tr:[i[0]+this._sw/2,i[1]-this._sh/2],br:[i[0]+this._sw/2,i[1]+this._sh/2],bl:[i[0]-this._sw/2,i[1]+this._sh/2]}},n.prototype.pointToDate=function(t){var e=Math.floor((t[0]-this._rect.x)/this._sw)+1,i=Math.floor((t[1]-this._rect.y)/this._sh)+1,r=this._rangeInfo.range;return this._orient==="vertical"?this._getDateByWeeksAndDay(i,e-1,r):this._getDateByWeeksAndDay(e,i-1,r)},n.prototype.convertToPixel=function(t,e,i){var r=xV(e);return r===this?r.dataToPoint(i):null},n.prototype.convertFromPixel=function(t,e,i){var r=xV(e);return r===this?r.pointToData(i):null},n.prototype.containPoint=function(t){return!1},n.prototype._initRangeOption=function(){var t=this._model.get("range"),e;if(ut(t)&&t.length===1&&(t=t[0]),ut(t))e=t;else{var i=t.toString();if(/^\d{4}$/.test(i)&&(e=[i+"-01-01",i+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(i)){var r=this.getDateInfo(i),o=r.date;o.setMonth(o.getMonth()+1);var a=this.getNextNDay(o,-1);e=[r.formatedDate,a.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(i)&&(e=[i,i])}if(!e)return t;var s=this._getRangeInfo(e);return s.start.time>s.end.time&&e.reverse(),e},n.prototype._getRangeInfo=function(t){var e=[this.getDateInfo(t[0]),this.getDateInfo(t[1])],i;e[0].time>e[1].time&&(i=!0,e.reverse());var r=Math.floor(e[1].time/MP)-Math.floor(e[0].time/MP)+1,o=new Date(e[0].time),a=o.getDate(),s=e[1].date.getDate();o.setDate(a+r-1);var l=o.getDate();if(l!==s)for(var h=o.getTime()-e[1].time>0?1:-1;(l=o.getDate())!==s&&(o.getTime()-e[1].time)*h>0;)r-=h,o.setDate(l-h);var u=Math.floor((r+e[0].day+6)/7),d=i?-u+1:u-1;return i&&e.reverse(),{range:[e[0].formatedDate,e[1].formatedDate],start:e[0],end:e[1],allDay:r,weeks:u,nthWeek:d,fweek:e[0].day,lweek:e[1].day}},n.prototype._getDateByWeeksAndDay=function(t,e,i){var r=this._getRangeInfo(i);if(t>r.weeks||t===0&&e<r.fweek||t===r.weeks&&e>r.lweek)return null;var o=(t-1)*7-r.fweek+e,a=new Date(r.start.time);return a.setDate(+r.start.d+o),this.getDateInfo(a)},n.create=function(t,e){var i=[];return t.eachComponent("calendar",function(r){var o=new n(r);i.push(o),r.coordinateSystem=o}),t.eachSeries(function(r){r.get("coordinateSystem")==="calendar"&&(r.coordinateSystem=i[r.get("calendarIndex")||0])}),i},n.dimensions=["time","value"],n})();function xV(n){var t=n.calendarModel,e=n.seriesModel,i=t?t.coordinateSystem:e?e.coordinateSystem:null;return i}function aCt(n){n.registerComponentModel(nCt),n.registerComponentView(rCt),n.registerCoordinateSystem("calendar",oCt)}function sCt(n,t){var e=n.existing;if(t.id=n.keyInfo.id,!t.type&&e&&(t.type=e.type),t.parentId==null){var i=t.parentOption;i?t.parentId=i.id:e&&(t.parentId=e.parentId)}t.parentOption=null}function SV(n,t){var e;return z(t,function(i){n[i]!=null&&n[i]!=="auto"&&(e=!0)}),e}function lCt(n,t,e){var i=ht({},e),r=n[t],o=e.$action||"merge";o==="merge"?r?(Zt(r,i,!0),ed(r,i,{ignoreSize:!0}),XZ(e,r),zC(e,r),zC(e,r,"shape"),zC(e,r,"style"),zC(e,r,"extra"),e.clipPath=r.clipPath):n[t]=i:o==="replace"?n[t]=i:o==="remove"&&r&&(n[t]=null)}var Ett=["transition","enterFrom","leaveTo"],hCt=Ett.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function zC(n,t,e){if(e&&(!n[e]&&t[e]&&(n[e]={}),n=n[e],t=t[e]),!(!n||!t))for(var i=e?Ett:hCt,r=0;r<i.length;r++){var o=i[r];n[o]==null&&t[o]!=null&&(n[o]=t[o])}}function uCt(n,t){if(n&&(n.hv=t.hv=[SV(t,["left","right"]),SV(t,["top","bottom"])],n.type==="group")){var e=n,i=t;e.width==null&&(e.width=i.width=0),e.height==null&&(e.height=i.height=0)}}var dCt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e.preventAutoZ=!0,e}return t.prototype.mergeOption=function(e,i){var r=this.option.elements;this.option.elements=null,n.prototype.mergeOption.call(this,e,i),this.option.elements=r},t.prototype.optionUpdated=function(e,i){var r=this.option,o=(i?r:e).elements,a=r.elements=i?[]:r.elements,s=[];this._flatten(o,s,null);var l=$K(a,s,"normalMerge"),h=this._elOptionsToUpdate=[];z(l,function(u,d){var c=u.newOption;c&&(h.push(c),sCt(u,c),lCt(a,d,c),uCt(a[d],c))},this),r.elements=Ge(a,function(u){return u&&delete u.$action,u!=null})},t.prototype._flatten=function(e,i,r){z(e,function(o){if(o){r&&(o.parentOption=r),i.push(o);var a=o.children;a&&a.length&&this._flatten(a,i,o),delete o.children}},this)},t.prototype.useElOptionsToUpdate=function(){var e=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,e},t.type="graphic",t.defaultOption={elements:[]},t})(ge);function Dtt(n,t,e,i){return n&&(n.legacy||n.legacy!==!1&&!e&&!i&&t!=="tspan"&&(t==="text"||At(n,"text")))}function Itt(n,t,e){var i=n,r,o,a;if(t==="text")a=i;else{a={},At(i,"text")&&(a.text=i.text),At(i,"rich")&&(a.rich=i.rich),At(i,"textFill")&&(a.fill=i.textFill),At(i,"textStroke")&&(a.stroke=i.textStroke),At(i,"fontFamily")&&(a.fontFamily=i.fontFamily),At(i,"fontSize")&&(a.fontSize=i.fontSize),At(i,"fontStyle")&&(a.fontStyle=i.fontStyle),At(i,"fontWeight")&&(a.fontWeight=i.fontWeight),o={type:"text",style:a,silent:!0},r={};var s=At(i,"textPosition");e?r.position=s?i.textPosition:"inside":s&&(r.position=i.textPosition),At(i,"textPosition")&&(r.position=i.textPosition),At(i,"textOffset")&&(r.offset=i.textOffset),At(i,"textRotation")&&(r.rotation=i.textRotation),At(i,"textDistance")&&(r.distance=i.textDistance)}return AV(a,n),z(a.rich,function(l){AV(l,l)}),{textConfig:r,textContent:o}}function AV(n,t){t&&(t.font=t.textFont||t.font,At(t,"textStrokeWidth")&&(n.lineWidth=t.textStrokeWidth),At(t,"textAlign")&&(n.align=t.textAlign),At(t,"textVerticalAlign")&&(n.verticalAlign=t.textVerticalAlign),At(t,"textLineHeight")&&(n.lineHeight=t.textLineHeight),At(t,"textWidth")&&(n.width=t.textWidth),At(t,"textHeight")&&(n.height=t.textHeight),At(t,"textBackgroundColor")&&(n.backgroundColor=t.textBackgroundColor),At(t,"textPadding")&&(n.padding=t.textPadding),At(t,"textBorderColor")&&(n.borderColor=t.textBorderColor),At(t,"textBorderWidth")&&(n.borderWidth=t.textBorderWidth),At(t,"textBorderRadius")&&(n.borderRadius=t.textBorderRadius),At(t,"textBoxShadowColor")&&(n.shadowColor=t.textBoxShadowColor),At(t,"textBoxShadowBlur")&&(n.shadowBlur=t.textBoxShadowBlur),At(t,"textBoxShadowOffsetX")&&(n.shadowOffsetX=t.textBoxShadowOffsetX),At(t,"textBoxShadowOffsetY")&&(n.shadowOffsetY=t.textBoxShadowOffsetY))}function TV(n,t,e){var i=n;i.textPosition=i.textPosition||e.position||"inside",e.offset!=null&&(i.textOffset=e.offset),e.rotation!=null&&(i.textRotation=e.rotation),e.distance!=null&&(i.textDistance=e.distance);var r=i.textPosition.indexOf("inside")>=0,o=n.fill||"#000";MV(i,t);var a=i.textFill==null;return r?a&&(i.textFill=e.insideFill||"#fff",!i.textStroke&&e.insideStroke&&(i.textStroke=e.insideStroke),!i.textStroke&&(i.textStroke=o),i.textStrokeWidth==null&&(i.textStrokeWidth=2)):(a&&(i.textFill=n.fill||e.outsideFill||"#000"),!i.textStroke&&e.outsideStroke&&(i.textStroke=e.outsideStroke)),i.text=t.text,i.rich=t.rich,z(t.rich,function(s){MV(s,s)}),i}function MV(n,t){t&&(At(t,"fill")&&(n.textFill=t.fill),At(t,"stroke")&&(n.textStroke=t.fill),At(t,"lineWidth")&&(n.textStrokeWidth=t.lineWidth),At(t,"font")&&(n.font=t.font),At(t,"fontStyle")&&(n.fontStyle=t.fontStyle),At(t,"fontWeight")&&(n.fontWeight=t.fontWeight),At(t,"fontSize")&&(n.fontSize=t.fontSize),At(t,"fontFamily")&&(n.fontFamily=t.fontFamily),At(t,"align")&&(n.textAlign=t.align),At(t,"verticalAlign")&&(n.textVerticalAlign=t.verticalAlign),At(t,"lineHeight")&&(n.textLineHeight=t.lineHeight),At(t,"width")&&(n.textWidth=t.width),At(t,"height")&&(n.textHeight=t.height),At(t,"backgroundColor")&&(n.textBackgroundColor=t.backgroundColor),At(t,"padding")&&(n.textPadding=t.padding),At(t,"borderColor")&&(n.textBorderColor=t.borderColor),At(t,"borderWidth")&&(n.textBorderWidth=t.borderWidth),At(t,"borderRadius")&&(n.textBorderRadius=t.borderRadius),At(t,"shadowColor")&&(n.textBoxShadowColor=t.shadowColor),At(t,"shadowBlur")&&(n.textBoxShadowBlur=t.shadowBlur),At(t,"shadowOffsetX")&&(n.textBoxShadowOffsetX=t.shadowOffsetX),At(t,"shadowOffsetY")&&(n.textBoxShadowOffsetY=t.shadowOffsetY),At(t,"textShadowColor")&&(n.textShadowColor=t.textShadowColor),At(t,"textShadowBlur")&&(n.textShadowBlur=t.textShadowBlur),At(t,"textShadowOffsetX")&&(n.textShadowOffsetX=t.textShadowOffsetX),At(t,"textShadowOffsetY")&&(n.textShadowOffsetY=t.textShadowOffsetY))}var Ott={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},RV=pe(Ott);wl(Sl,function(n,t){return n[t]=1,n},{});Sl.join(", ");var Bx=["","style","shape","extra"],Kp=Te();function $z(n,t,e,i,r){var o=n+"Animation",a=Nv(n,i,r)||{},s=Kp(t).userDuring;return a.duration>0&&(a.during=s?xt(vCt,{el:t,userDuring:s}):null,a.setToFinal=!0,a.scope=n),ht(a,e[o]),a}function Sw(n,t,e,i){i=i||{};var r=i.dataIndex,o=i.isInit,a=i.clearStyle,s=e.isAnimationEnabled(),l=Kp(n),h=t.style;l.userDuring=t.during;var u={},d={};if(yCt(n,t,d),BV("shape",t,d),BV("extra",t,d),!o&&s&&(mCt(n,t,u),PV("shape",n,t,u),PV("extra",n,t,u),bCt(n,t,h,u)),d.style=h,cCt(n,d,a),gCt(n,t),s)if(o){var c={};z(Bx,function(g){var p=g?t[g]:t;p&&p.enterFrom&&(g&&(c[g]=c[g]||{}),ht(g?c[g]:c,p.enterFrom))});var f=$z("enter",n,t,e,r);f.duration>0&&n.animateFrom(c,f)}else fCt(n,t,r||0,e,u);Htt(n,t),h?n.dirty():n.markRedraw()}function Htt(n,t){for(var e=Kp(n).leaveToProps,i=0;i<Bx.length;i++){var r=Bx[i],o=r?t[r]:t;o&&o.leaveTo&&(e||(e=Kp(n).leaveToProps={}),r&&(e[r]=e[r]||{}),ht(r?e[r]:e,o.leaveTo))}}function fM(n,t,e,i){if(n){var r=n.parent,o=Kp(n).leaveToProps;if(o){var a=$z("update",n,t,e,0);a.done=function(){r.remove(n)},n.animateTo(o,a)}else r.remove(n)}}function hf(n){return n==="all"}function cCt(n,t,e){var i=t.style;if(!n.isGroup&&i){if(e){n.useStyle({});for(var r=n.animators,o=0;o<r.length;o++){var a=r[o];a.targetName==="style"&&a.changeTarget(n.style)}}n.setStyle(i)}t&&(t.style=null,t&&n.attr(t),t.style=i)}function fCt(n,t,e,i,r){if(r){var o=$z("update",n,t,i,e);o.duration>0&&n.animateFrom(r,o)}}function gCt(n,t){At(t,"silent")&&(n.silent=t.silent),At(t,"ignore")&&(n.ignore=t.ignore),n instanceof Ua&&At(t,"invisible")&&(n.invisible=t.invisible),n instanceof ue&&At(t,"autoBatch")&&(n.autoBatch=t.autoBatch)}var Ks={},pCt={setTransform:function(n,t){return Ks.el[n]=t,this},getTransform:function(n){return Ks.el[n]},setShape:function(n,t){var e=Ks.el,i=e.shape||(e.shape={});return i[n]=t,e.dirtyShape&&e.dirtyShape(),this},getShape:function(n){var t=Ks.el.shape;if(t)return t[n]},setStyle:function(n,t){var e=Ks.el,i=e.style;return i&&(i[n]=t,e.dirtyStyle&&e.dirtyStyle()),this},getStyle:function(n){var t=Ks.el.style;if(t)return t[n]},setExtra:function(n,t){var e=Ks.el.extra||(Ks.el.extra={});return e[n]=t,this},getExtra:function(n){var t=Ks.el.extra;if(t)return t[n]}};function vCt(){var n=this,t=n.el;if(t){var e=Kp(t).userDuring,i=n.userDuring;if(e!==i){n.el=n.userDuring=null;return}Ks.el=t,i(pCt)}}function PV(n,t,e,i){var r=e[n];if(r){var o=t[n],a;if(o){var s=e.transition,l=r.transition;if(l)if(!a&&(a=i[n]={}),hf(l))ht(a,o);else for(var h=li(l),u=0;u<h.length;u++){var d=h[u],c=o[d];a[d]=c}else if(hf(s)||ee(s,n)>=0){!a&&(a=i[n]={});for(var f=pe(o),u=0;u<f.length;u++){var d=f[u],c=o[d];_Ct(r[d],c)&&(a[d]=c)}}}}}function BV(n,t,e){var i=t[n];if(i)for(var r=e[n]={},o=pe(i),a=0;a<o.length;a++){var s=o[a];r[s]=$0(i[s])}}function mCt(n,t,e){for(var i=t.transition,r=hf(i)?Sl:li(i||[]),o=0;o<r.length;o++){var a=r[o];if(!(a==="style"||a==="shape"||a==="extra")){var s=n[a];e[a]=s}}}function yCt(n,t,e){for(var i=0;i<RV.length;i++){var r=RV[i],o=Ott[r],a=t[r];a&&(e[o[0]]=a[0],e[o[1]]=a[1])}for(var i=0;i<Sl.length;i++){var s=Sl[i];t[s]!=null&&(e[s]=t[s])}}function bCt(n,t,e,i){if(e){var r=n.style,o;if(r){var a=e.transition,s=t.transition;if(a&&!hf(a)){var l=li(a);!o&&(o=i.style={});for(var h=0;h<l.length;h++){var u=l[h],d=r[u];o[u]=d}}else if(n.getAnimationStyleProps&&(hf(s)||hf(a)||ee(s,"style")>=0)){var c=n.getAnimationStyleProps(),f=c?c.style:null;if(f){!o&&(o=i.style={});for(var g=pe(e),h=0;h<g.length;h++){var u=g[h];if(f[u]){var d=r[u];o[u]=d}}}}}}}function _Ct(n,t){return Wr(n)?n!==t:n!=null&&isFinite(n)}var ztt=Te(),CCt=["percent","easing","shape","style","extra"];function Ftt(n){n.stopAnimation("keyframe"),n.attr(ztt(n))}function kx(n,t,e){if(!(!e.isAnimationEnabled()||!t)){if(ut(t)){z(t,function(s){kx(n,s,e)});return}var i=t.keyframes,r=t.duration;if(e&&r==null){var o=Nv("enter",e,0);r=o&&o.duration}if(!(!i||!r)){var a=ztt(n);z(Bx,function(s){if(!(s&&!n[s])){var l;i.sort(function(h,u){return h.percent-u.percent}),z(i,function(h){var u=n.animators,d=s?h[s]:h;if(d){var c=pe(d);if(s||(c=Ge(c,function(p){return ee(CCt,p)<0})),!!c.length){l||(l=n.animate(s,t.loop,!0),l.scope="keyframe");for(var f=0;f<u.length;f++)u[f]!==l&&u[f].targetName===l.targetName&&u[f].stopTracks(c);s&&(a[s]=a[s]||{});var g=s?a[s]:a;z(c,function(p){g[p]=((s?n[s]:n)||{})[p]}),l.whenWithKeys(r*h.percent,d,c,h.easing)}}}),l&&l.delay(t.delay||0).duration(r).start(t.easing)}})}}}var kV={path:null,compoundPath:null,group:Ft,image:hr,text:Re},wa=Te(),wCt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(){this._elMap=Pt()},t.prototype.render=function(e,i,r){e!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=e,this._updateElements(e),this._relocate(e,r)},t.prototype._updateElements=function(e){var i=e.useElOptionsToUpdate();if(i){var r=this._elMap,o=this.group,a=e.get("z"),s=e.get("zlevel");z(i,function(l){var h=Fn(l.id,null),u=h!=null?r.get(h):null,d=Fn(l.parentId,null),c=d!=null?r.get(d):o,f=l.type,g=l.style;f==="text"&&g&&l.hv&&l.hv[1]&&(g.textVerticalAlign=g.textBaseline=g.verticalAlign=g.align=null);var p=l.textContent,v=l.textConfig;if(g&&Dtt(g,f,!!v,!!p)){var m=Itt(g,f,!0);!v&&m.textConfig&&(v=l.textConfig=m.textConfig),!p&&m.textContent&&(p=m.textContent)}var y=xCt(l),b=l.$action||"merge",_=b==="merge",w=b==="replace";if(_){var C=!u,x=u;C?x=LV(h,c,l.type,r):(x&&(wa(x).isNew=!1),Ftt(x)),x&&(Sw(x,y,e,{isInit:C}),EV(x,l,a,s))}else if(w){Aw(u,l,r,e);var S=LV(h,c,l.type,r);S&&(Sw(S,y,e,{isInit:!0}),EV(S,l,a,s))}else b==="remove"&&(Htt(u,l),Aw(u,l,r,e));var A=r.get(h);if(A&&p)if(_){var T=A.getTextContent();T?T.attr(p):A.setTextContent(new Re(p))}else w&&A.setTextContent(new Re(p));if(A){var M=l.clipPath;if(M){var R=M.type,L=void 0,C=!1;if(_){var B=A.getClipPath();C=!B||wa(B).type!==R,L=C?pD(R):B}else w&&(C=!0,L=pD(R));A.setClipPath(L),Sw(L,M,e,{isInit:C}),kx(L,M.keyframeAnimation,e)}var P=wa(A);A.setTextConfig(v),P.option=l,SCt(A,e,l),Kf({el:A,componentModel:e,itemName:A.name,itemTooltipOption:l.tooltip}),kx(A,l.keyframeAnimation,e)}})}},t.prototype._relocate=function(e,i){for(var r=e.option.elements,o=this.group,a=this._elMap,s=i.getWidth(),l=i.getHeight(),h=["x","y"],u=0;u<r.length;u++){var d=r[u],c=Fn(d.id,null),f=c!=null?a.get(c):null;if(!(!f||!f.isGroup)){var g=f.parent,p=g===o,v=wa(f),m=wa(g);v.width=mt(v.option.width,p?s:m.width)||0,v.height=mt(v.option.height,p?l:m.height)||0}}for(var u=r.length-1;u>=0;u--){var d=r[u],c=Fn(d.id,null),f=c!=null?a.get(c):null;if(f){var g=f.parent,m=wa(g),y=g===o?{width:s,height:l}:{width:m.width,height:m.height},b={},_=tM(f,d,y,null,{hv:d.hv,boundingMode:d.bounding},b);if(!wa(f).isNew&&_){for(var w=d.transition,C={},x=0;x<h.length;x++){var S=h[x],A=b[S];w&&(hf(w)||ee(w,S)>=0)?C[S]=A:f[S]=A}Ie(f,C,e,0)}else f.attr(b)}}},t.prototype._clear=function(){var e=this,i=this._elMap;i.each(function(r){Aw(r,wa(r).option,i,e._lastGraphicModel)}),this._elMap=Pt()},t.prototype.dispose=function(){this._clear()},t.type="graphic",t})(Di);function pD(n){var t=At(kV,n)?kV[n]:UH(n),e=new t({});return wa(e).type=n,e}function LV(n,t,e,i){var r=pD(e);return t.add(r),i.set(n,r),wa(r).id=n,wa(r).isNew=!0,r}function Aw(n,t,e,i){var r=n&&n.parent;r&&(n.type==="group"&&n.traverse(function(o){Aw(o,t,e,i)}),fM(n,t,i),e.removeKey(wa(n).id))}function EV(n,t,e,i){n.isGroup||z([["cursor",Ua.prototype.cursor],["zlevel",i||0],["z",e||0],["z2",0]],function(r){var o=r[0];At(t,o)?n[o]=Yt(t[o],r[1]):n[o]==null&&(n[o]=r[1])}),z(pe(t),function(r){if(r.indexOf("on")===0){var o=t[r];n[r]=Dt(o)?o:null}}),At(t,"draggable")&&(n.draggable=t.draggable),t.name!=null&&(n.name=t.name),t.id!=null&&(n.id=t.id)}function xCt(n){return n=ht({},n),z(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(YZ),function(t){delete n[t]}),n}function SCt(n,t,e){var i=Vt(n).eventData;!n.silent&&!n.ignore&&!i&&(i=Vt(n).eventData={componentType:"graphic",componentIndex:t.componentIndex,name:n.name}),i&&(i.info=e.info)}function ACt(n){n.registerComponentModel(dCt),n.registerComponentView(wCt),n.registerPreprocessor(function(t){var e=t.graphic;ut(e)?!e[0]||!e[0].elements?t.graphic=[{elements:e}]:t.graphic=[t.graphic[0]]:e&&!e.elements&&(t.graphic=[{elements:[e]}])})}var DV=["x","y","radius","angle","single"],TCt=["cartesian2d","polar","singleAxis"];function MCt(n){var t=n.get("coordinateSystem");return ee(TCt,t)>=0}function Iu(n){return n+"Axis"}function RCt(n,t){var e=Pt(),i=[],r=Pt();n.eachComponent({mainType:"dataZoom",query:t},function(u){r.get(u.uid)||s(u)});var o;do o=!1,n.eachComponent("dataZoom",a);while(o);function a(u){!r.get(u.uid)&&l(u)&&(s(u),o=!0)}function s(u){r.set(u.uid,!0),i.push(u),h(u)}function l(u){var d=!1;return u.eachTargetAxis(function(c,f){var g=e.get(c);g&&g[f]&&(d=!0)}),d}function h(u){u.eachTargetAxis(function(d,c){(e.get(d)||e.set(d,[]))[c]=!0})}return i}function Ntt(n){var t=n.ecModel,e={infoList:[],infoMap:Pt()};return n.eachTargetAxis(function(i,r){var o=t.getComponent(Iu(i),r);if(o){var a=o.getCoordSysModel();if(a){var s=a.uid,l=e.infoMap.get(s);l||(l={model:a,axisModels:[]},e.infoList.push(l),e.infoMap.set(s,l)),l.axisModels.push(o)}}}),e}var RP=(function(){function n(){this.indexList=[],this.indexMap=[]}return n.prototype.add=function(t){this.indexMap[t]||(this.indexList.push(t),this.indexMap[t]=!0)},n})(),qy=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e._autoThrottle=!0,e._noTarget=!0,e._rangePropMode=["percent","percent"],e}return t.prototype.init=function(e,i,r){var o=IV(e);this.settledOption=o,this.mergeDefaultAndTheme(e,r),this._doInit(o)},t.prototype.mergeOption=function(e){var i=IV(e);Zt(this.option,e,!0),Zt(this.settledOption,i,!0),this._doInit(i)},t.prototype._doInit=function(e){var i=this.option;this._setDefaultThrottle(e),this._updateRangeUse(e);var r=this.settledOption;z([["start","startValue"],["end","endValue"]],function(o,a){this._rangePropMode[a]==="value"&&(i[o[0]]=r[o[0]]=null)},this),this._resetTarget()},t.prototype._resetTarget=function(){var e=this.get("orient",!0),i=this._targetAxisInfoMap=Pt(),r=this._fillSpecifiedTargetAxis(i);r?this._orient=e||this._makeAutoOrientByTargetAxis():(this._orient=e||"horizontal",this._fillAutoTargetAxisByOrient(i,this._orient)),this._noTarget=!0,i.each(function(o){o.indexList.length&&(this._noTarget=!1)},this)},t.prototype._fillSpecifiedTargetAxis=function(e){var i=!1;return z(DV,function(r){var o=this.getReferringComponents(Iu(r),Oct);if(o.specified){i=!0;var a=new RP;z(o.models,function(s){a.add(s.componentIndex)}),e.set(r,a)}},this),i},t.prototype._fillAutoTargetAxisByOrient=function(e,i){var r=this.ecModel,o=!0;if(o){var a=i==="vertical"?"y":"x",s=r.findComponents({mainType:a+"Axis"});l(s,a)}if(o){var s=r.findComponents({mainType:"singleAxis",filter:function(u){return u.get("orient",!0)===i}});l(s,"single")}function l(h,u){var d=h[0];if(d){var c=new RP;if(c.add(d.componentIndex),e.set(u,c),o=!1,u==="x"||u==="y"){var f=d.getReferringComponents("grid",Mn).models[0];f&&z(h,function(g){d.componentIndex!==g.componentIndex&&f===g.getReferringComponents("grid",Mn).models[0]&&c.add(g.componentIndex)})}}}o&&z(DV,function(h){if(o){var u=r.findComponents({mainType:Iu(h),filter:function(c){return c.get("type",!0)==="category"}});if(u[0]){var d=new RP;d.add(u[0].componentIndex),e.set(h,d),o=!1}}},this)},t.prototype._makeAutoOrientByTargetAxis=function(){var e;return this.eachTargetAxis(function(i){!e&&(e=i)},this),e==="y"?"vertical":"horizontal"},t.prototype._setDefaultThrottle=function(e){if(e.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var i=this.ecModel.option;this.option.throttle=i.animation&&i.animationDurationUpdate>0?100:20}},t.prototype._updateRangeUse=function(e){var i=this._rangePropMode,r=this.get("rangeMode");z([["start","startValue"],["end","endValue"]],function(o,a){var s=e[o[0]]!=null,l=e[o[1]]!=null;s&&!l?i[a]="percent":!s&&l?i[a]="value":r?i[a]=r[a]:s&&(i[a]="percent")})},t.prototype.noTarget=function(){return this._noTarget},t.prototype.getFirstTargetAxisModel=function(){var e;return this.eachTargetAxis(function(i,r){e==null&&(e=this.ecModel.getComponent(Iu(i),r))},this),e},t.prototype.eachTargetAxis=function(e,i){this._targetAxisInfoMap.each(function(r,o){z(r.indexList,function(a){e.call(i,o,a)})})},t.prototype.getAxisProxy=function(e,i){var r=this.getAxisModel(e,i);if(r)return r.__dzAxisProxy},t.prototype.getAxisModel=function(e,i){var r=this._targetAxisInfoMap.get(e);if(r&&r.indexMap[i])return this.ecModel.getComponent(Iu(e),i)},t.prototype.setRawRange=function(e){var i=this.option,r=this.settledOption;z([["start","startValue"],["end","endValue"]],function(o){(e[o[0]]!=null||e[o[1]]!=null)&&(i[o[0]]=r[o[0]]=e[o[0]],i[o[1]]=r[o[1]]=e[o[1]])},this),this._updateRangeUse(e)},t.prototype.setCalculatedRange=function(e){var i=this.option;z(["start","startValue","end","endValue"],function(r){i[r]=e[r]})},t.prototype.getPercentRange=function(){var e=this.findRepresentativeAxisProxy();if(e)return e.getDataPercentWindow()},t.prototype.getValueRange=function(e,i){if(e==null&&i==null){var r=this.findRepresentativeAxisProxy();if(r)return r.getDataValueWindow()}else return this.getAxisProxy(e,i).getDataValueWindow()},t.prototype.findRepresentativeAxisProxy=function(e){if(e)return e.__dzAxisProxy;for(var i,r=this._targetAxisInfoMap.keys(),o=0;o<r.length;o++)for(var a=r[o],s=this._targetAxisInfoMap.get(a),l=0;l<s.indexList.length;l++){var h=this.getAxisProxy(a,s.indexList[l]);if(h.hostedBy(this))return h;i||(i=h)}return i},t.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},t.prototype.getOrient=function(){return this._orient},t.type="dataZoom",t.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],t.defaultOption={z:4,filterMode:"filter",start:0,end:100},t})(ge);function IV(n){var t={};return z(["start","end","startValue","endValue","throttle"],function(e){n.hasOwnProperty(e)&&(t[e]=n[e])}),t}var PCt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.type="dataZoom.select",t})(qy),jz=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,i,r,o){this.dataZoomModel=e,this.ecModel=i,this.api=r},t.type="dataZoom",t})(Di),BCt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.type="dataZoom.select",t})(jz),Kg=z,OV=Ha,kCt=(function(){function n(t,e,i,r){this._dimName=t,this._axisIndex=e,this.ecModel=r,this._dataZoomModel=i}return n.prototype.hostedBy=function(t){return this._dataZoomModel===t},n.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},n.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},n.prototype.getTargetSeriesModels=function(){var t=[];return this.ecModel.eachSeries(function(e){if(MCt(e)){var i=Iu(this._dimName),r=e.getReferringComponents(i,Mn).models[0];r&&this._axisIndex===r.componentIndex&&t.push(e)}},this),t},n.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},n.prototype.getMinMaxSpan=function(){return zt(this._minMaxSpan)},n.prototype.calculateDataWindow=function(t){var e=this._dataExtent,i=this.getAxisModel(),r=i.axis.scale,o=this._dataZoomModel.getRangePropMode(),a=[0,100],s=[],l=[],h;Kg(["start","end"],function(c,f){var g=t[c],p=t[c+"Value"];o[f]==="percent"?(g==null&&(g=a[f]),p=r.parse(qe(g,a,e))):(h=!0,p=p==null?e[f]:r.parse(p),g=qe(p,e,a)),l[f]=p==null||isNaN(p)?e[f]:p,s[f]=g==null||isNaN(g)?a[f]:g}),OV(l),OV(s);var u=this._minMaxSpan;h?d(l,s,e,a,!1):d(s,l,a,e,!0);function d(c,f,g,p,v){var m=v?"Span":"ValueSpan";eg(0,c,g,"all",u["min"+m],u["max"+m]);for(var y=0;y<2;y++)f[y]=qe(c[y],g,p,!0),v&&(f[y]=r.parse(f[y]))}return{valueWindow:l,percentWindow:s}},n.prototype.reset=function(t){if(t===this._dataZoomModel){var e=this.getTargetSeriesModels();this._dataExtent=LCt(this,this._dimName,e),this._updateMinMaxSpan();var i=this.calculateDataWindow(t.settledOption);this._valueWindow=i.valueWindow,this._percentWindow=i.percentWindow,this._setAxisModel()}},n.prototype.filterData=function(t,e){if(t!==this._dataZoomModel)return;var i=this._dimName,r=this.getTargetSeriesModels(),o=t.get("filterMode"),a=this._valueWindow;if(o==="none")return;Kg(r,function(l){var h=l.getData(),u=h.mapDimensionsAll(i);if(u.length){if(o==="weakFilter"){var d=h.getStore(),c=ct(u,function(f){return h.getDimensionIndex(f)},h);h.filterSelf(function(f){for(var g,p,v,m=0;m<u.length;m++){var y=d.get(c[m],f),b=!isNaN(y),_=y<a[0],w=y>a[1];if(b&&!_&&!w)return!0;b&&(v=!0),_&&(g=!0),w&&(p=!0)}return v&&g&&p})}else Kg(u,function(f){if(o==="empty")l.setData(h=h.map(f,function(p){return s(p)?p:NaN}));else{var g={};g[f]=a,h.selectRange(g)}});Kg(u,function(f){h.setApproximateExtent(a,f)})}});function s(l){return l>=a[0]&&l<=a[1]}},n.prototype._updateMinMaxSpan=function(){var t=this._minMaxSpan={},e=this._dataZoomModel,i=this._dataExtent;Kg(["min","max"],function(r){var o=e.get(r+"Span"),a=e.get(r+"ValueSpan");a!=null&&(a=this.getAxisModel().axis.scale.parse(a)),a!=null?o=qe(i[0]+a,i,[0,100],!0):o!=null&&(a=qe(o,[0,100],i,!0)-i[0]),t[r+"Span"]=o,t[r+"ValueSpan"]=a},this)},n.prototype._setAxisModel=function(){var t=this.getAxisModel(),e=this._percentWindow,i=this._valueWindow;if(e){var r=OK(i,[0,500]);r=Math.min(r,20);var o=t.axis.scale.rawExtentInfo;e[0]!==0&&o.setDeterminedMinMax("min",+i[0].toFixed(r)),e[1]!==100&&o.setDeterminedMinMax("max",+i[1].toFixed(r)),o.freeze()}},n})();function LCt(n,t,e){var i=[1/0,-1/0];Kg(e,function(a){T0t(i,a.getData(),t)});var r=n.getAxisModel(),o=wQ(r.axis.scale,r,i).calculate();return[o.min,o.max]}var ECt={getTargetSeries:function(n){function t(r){n.eachComponent("dataZoom",function(o){o.eachTargetAxis(function(a,s){var l=n.getComponent(Iu(a),s);r(a,s,l,o)})})}t(function(r,o,a,s){a.__dzAxisProxy=null});var e=[];t(function(r,o,a,s){a.__dzAxisProxy||(a.__dzAxisProxy=new kCt(r,o,s,n),e.push(a.__dzAxisProxy))});var i=Pt();return z(e,function(r){z(r.getTargetSeriesModels(),function(o){i.set(o.uid,o)})}),i},overallReset:function(n,t){n.eachComponent("dataZoom",function(e){e.eachTargetAxis(function(i,r){e.getAxisProxy(i,r).reset(e)}),e.eachTargetAxis(function(i,r){e.getAxisProxy(i,r).filterData(e,t)})}),n.eachComponent("dataZoom",function(e){var i=e.findRepresentativeAxisProxy();if(i){var r=i.getDataPercentWindow(),o=i.getDataValueWindow();e.setCalculatedRange({start:r[0],end:r[1],startValue:o[0],endValue:o[1]})}})}};function DCt(n){n.registerAction("dataZoom",function(t,e){var i=RCt(e,t);z(i,function(r){r.setRawRange({start:t.start,end:t.end,startValue:t.startValue,endValue:t.endValue})})})}var HV=!1;function Uz(n){HV||(HV=!0,n.registerProcessor(n.PRIORITY.PROCESSOR.FILTER,ECt),DCt(n),n.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function ICt(n){n.registerComponentModel(PCt),n.registerComponentView(BCt),Uz(n)}var Ba=(function(){function n(){}return n})(),Wtt={};function Zg(n,t){Wtt[n]=t}function Vtt(n){return Wtt[n]}var OCt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.optionUpdated=function(){n.prototype.optionUpdated.apply(this,arguments);var e=this.ecModel;z(this.option.feature,function(i,r){var o=Vtt(r);o&&(o.getDefaultOption&&(o.defaultOption=o.getDefaultOption(e)),Zt(i,o.defaultOption))})},t.type="toolbox",t.layoutMode={type:"box",ignoreSize:!0},t.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},t})(ge);function HCt(n,t,e){var i=t.getBoxLayoutParams(),r=t.get("padding"),o={width:e.getWidth(),height:e.getHeight()},a=Vn(i,o,r);lf(t.get("orient"),n,t.get("itemGap"),a.width,a.height),tM(n,i,o,r)}function Gtt(n,t){var e=Gv(t.get("padding")),i=t.getItemStyle(["color","opacity"]);return i.fill=t.get("backgroundColor"),n=new Ae({shape:{x:n.x-e[3],y:n.y-e[0],width:n.width+e[1]+e[3],height:n.height+e[0]+e[2],r:t.get("borderRadius")},style:i,silent:!0,z2:-1}),n}var zCt=(function(n){et(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.render=function(e,i,r,o){var a=this.group;if(a.removeAll(),!e.get("show"))return;var s=+e.get("itemSize"),l=e.get("orient")==="vertical",h=e.get("feature")||{},u=this._features||(this._features={}),d=[];z(h,function(g,p){d.push(p)}),new Dh(this._featureNames||[],d).add(c).update(c).remove(qt(c,null)).execute(),this._featureNames=d;function c(g,p){var v=d[g],m=d[p],y=h[v],b=new Ze(y,e,e.ecModel),_;if(o&&o.newTitle!=null&&o.featureName===v&&(y.title=o.newTitle),v&&!m){if(FCt(v))_={onclick:b.option.onclick,featureName:v};else{var w=Vtt(v);if(!w)return;_=new w}u[v]=_}else if(_=u[m],!_)return;_.uid=Vv("toolbox-feature"),_.model=b,_.ecModel=i,_.api=r;var C=_ instanceof Ba;if(!v&&m){C&&_.dispose&&_.dispose(i,r);return}if(!b.get("show")||C&&_.unusable){C&&_.remove&&_.remove(i,r);return}f(b,_,v),b.setIconStatus=function(x,S){var A=this.option,T=this.iconPaths;A.iconStatus=A.iconStatus||{},A.iconStatus[x]=S,T[x]&&(S==="emphasis"?Lh:Eh)(T[x])},_ instanceof Ba&&_.render&&_.render(b,i,r,o)}function f(g,p,v){var m=g.getModel("iconStyle"),y=g.getModel(["emphasis","iconStyle"]),b=p instanceof Ba&&p.getIcons?p.getIcons():g.get("icon"),_=g.get("title")||{},w,C;Ct(b)?(w={},w[v]=b):w=b,Ct(_)?(C={},C[v]=_):C=_;var x=g.iconPaths={};z(w,function(S,A){var T=s_(S,{},{x:-s/2,y:-s/2,width:s,height:s});T.setStyle(m.getItemStyle());var M=T.ensureState("emphasis");M.style=y.getItemStyle();var R=new Re({style:{text:C[A],align:y.get("textAlign"),borderRadius:y.get("textBorderRadius"),padding:y.get("textPadding"),fill:null,font:YH({fontStyle:y.get("textFontStyle"),fontFamily:y.get("textFontFamily"),fontSize:y.get("textFontSize"),fontWeight:y.get("textFontWeight")},i)},ignore:!0});T.setTextContent(R),Kf({el:T,componentModel:e,itemName:A,formatterParamsExtra:{title:C[A]}}),T.__title=C[A],T.on("mouseover",function(){var L=y.getItemStyle(),B=l?e.get("right")==null&&e.get("left")!=="right"?"right":"left":e.get("bottom")==null&&e.get("top")!=="bottom"?"bottom":"top";R.setStyle({fill:y.get("textFill")||L.fill||L.stroke||"#000",backgroundColor:y.get("textBackgroundColor")}),T.setTextConfig({position:y.get("textPosition")||B}),R.ignore=!e.get("showTitle"),r.enterEmphasis(this)}).on("mouseout",function(){g.get(["iconStatus",A])!=="emphasis"&&r.leaveEmphasis(this),R.hide()}),(g.get(["iconStatus",A])==="emphasis"?Lh:Eh)(T),a.add(T),T.on("click",xt(p.onclick,p,i,r,A)),x[A]=T})}HCt(a,e,r),a.add(Gtt(a.getBoundingRect(),e)),l||a.eachChild(function(g){var p=g.__title,v=g.ensureState("emphasis"),m=v.textConfig||(v.textConfig={}),y=g.getTextContent(),b=y&&y.ensureState("emphasis");if(b&&!Dt(b)&&p){var _=b.style||(b.style={}),w=t_(p,Re.makeFont(_)),C=g.x+a.x,x=g.y+a.y+s,S=!1;x+w.height>r.getHeight()&&(m.position="top",S=!0);var A=S?-5-w.height:s+10;C+w.width/2>r.getWidth()?(m.position=["100%",A],_.align="right"):C-w.width/2<0&&(m.position=[0,A],_.align="left")}})},t.prototype.updateView=function(e,i,r,o){z(this._features,function(a){a instanceof Ba&&a.updateView&&a.updateView(a.model,i,r,o)})},t.prototype.remove=function(e,i){z(this._features,function(r){r instanceof Ba&&r.remove&&r.remove(e,i)}),this.group.removeAll()},t.prototype.dispose=function(e,i){z(this._features,function(r){r instanceof Ba&&r.dispose&&r.dispose(e,i)})},t.type="toolbox",t})(Di);function FCt(n){return n.indexOf("my")===0}var NCt=(function(n){et(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.onclick=function(e,i){var r=this.model,o=r.get("name")||e.get("title.0.text")||"echarts",a=i.getZr().painter.getType()==="svg",s=a?"svg":r.get("type",!0)||"png",l=i.getConnectedDataURL({type:s,backgroundColor:r.get("backgroundColor",!0)||e.get("backgroundColor")||"#fff",connectedBackgroundColor:r.get("connectedBackgroundColor"),excludeComponents:r.get("excludeComponents"),pixelRatio:r.get("pixelRatio")}),h=ce.browser;if(typeof MouseEvent=="function"&&(h.newEdge||!h.ie&&!h.edge)){var u=document.createElement("a");u.download=o+"."+s,u.target="_blank",u.href=l;var d=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});u.dispatchEvent(d)}else if(window.navigator.msSaveOrOpenBlob||a){var c=l.split(","),f=c[0].indexOf("base64")>-1,g=a?decodeURIComponent(c[1]):c[1];f&&(g=window.atob(g));var p=o+"."+s;if(window.navigator.msSaveOrOpenBlob){for(var v=g.length,m=new Uint8Array(v);v--;)m[v]=g.charCodeAt(v);var y=new Blob([m]);window.navigator.msSaveOrOpenBlob(y,p)}else{var b=document.createElement("iframe");document.body.appendChild(b);var _=b.contentWindow,w=_.document;w.open("image/svg+xml","replace"),w.write(g),w.close(),_.focus(),w.execCommand("SaveAs",!0,p),document.body.removeChild(b)}}else{var C=r.get("lang"),x='<body style="margin:0;"><img src="'+l+'" style="max-width:100%;" title="'+(C&&C[0]||"")+'" /></body>',S=window.open();S.document.write(x),S.document.title=o}},t.getDefaultOption=function(e){var i={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:e.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:e.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return i},t})(Ba),zV="__ec_magicType_stack__",WCt=[["line","bar"],["stack"]],VCt=(function(n){et(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.getIcons=function(){var e=this.model,i=e.get("icon"),r={};return z(e.get("type"),function(o){i[o]&&(r[o]=i[o])}),r},t.getDefaultOption=function(e){var i={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:e.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return i},t.prototype.onclick=function(e,i,r){var o=this.model,a=o.get(["seriesIndex",r]);if(FV[r]){var s={series:[]},l=function(d){var c=d.subType,f=d.id,g=FV[r](c,f,d,o);g&&(Ot(g,d.option),s.series.push(g));var p=d.coordinateSystem;if(p&&p.type==="cartesian2d"&&(r==="line"||r==="bar")){var v=p.getAxesByScale("ordinal")[0];if(v){var m=v.dim,y=m+"Axis",b=d.getReferringComponents(y,Mn).models[0],_=b.componentIndex;s[y]=s[y]||[];for(var w=0;w<=_;w++)s[y][_]=s[y][_]||{};s[y][_].boundaryGap=r==="bar"}}};z(WCt,function(d){ee(d,r)>=0&&z(d,function(c){o.setIconStatus(c,"normal")})}),o.setIconStatus(r,"emphasis"),e.eachComponent({mainType:"series",query:a==null?null:{seriesIndex:a}},l);var h,u=r;r==="stack"&&(h=Zt({stack:o.option.title.tiled,tiled:o.option.title.stack},o.option.title),o.get(["iconStatus",r])!=="emphasis"&&(u="tiled")),i.dispatchAction({type:"changeMagicType",currentType:u,newOption:s,newTitle:h,featureName:"magicType"})}},t})(Ba),FV={line:function(n,t,e,i){if(n==="bar")return Zt({id:t,type:"line",data:e.get("data"),stack:e.get("stack"),markPoint:e.get("markPoint"),markLine:e.get("markLine")},i.get(["option","line"])||{},!0)},bar:function(n,t,e,i){if(n==="line")return Zt({id:t,type:"bar",data:e.get("data"),stack:e.get("stack"),markPoint:e.get("markPoint"),markLine:e.get("markLine")},i.get(["option","bar"])||{},!0)},stack:function(n,t,e,i){var r=e.get("stack")===zV;if(n==="line"||n==="bar")return i.setIconStatus("stack",r?"normal":"emphasis"),Zt({id:t,stack:r?"":zV},i.get(["option","stack"])||{},!0)}};kl({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(n,t){t.mergeOption(n.newOption)});var gM=new Array(60).join("-"),Zp="	";function GCt(n){var t={},e=[],i=[];return n.eachRawSeries(function(r){var o=r.coordinateSystem;if(o&&(o.type==="cartesian2d"||o.type==="polar")){var a=o.getBaseAxis();if(a.type==="category"){var s=a.dim+"_"+a.index;t[s]||(t[s]={categoryAxis:a,valueAxis:o.getOtherAxis(a),series:[]},i.push({axisDim:a.dim,axisIndex:a.index})),t[s].series.push(r)}else e.push(r)}else e.push(r)}),{seriesGroupByCategoryAxis:t,other:e,meta:i}}function $Ct(n){var t=[];return z(n,function(e,i){var r=e.categoryAxis,o=e.valueAxis,a=o.dim,s=[" "].concat(ct(e.series,function(f){return f.name})),l=[r.model.getCategories()];z(e.series,function(f){var g=f.getRawData();l.push(f.getRawData().mapArray(g.mapDimension(a),function(p){return p}))});for(var h=[s.join(Zp)],u=0;u<l[0].length;u++){for(var d=[],c=0;c<l.length;c++)d.push(l[c][u]);h.push(d.join(Zp))}t.push(h.join(`
`))}),t.join(`

`+gM+`

`)}function jCt(n){return ct(n,function(t){var e=t.getRawData(),i=[t.name],r=[];return e.each(e.dimensions,function(){for(var o=arguments.length,a=arguments[o-1],s=e.getName(a),l=0;l<o-1;l++)r[l]=arguments[l];i.push((s?s+Zp:"")+r.join(Zp))}),i.join(`
`)}).join(`

`+gM+`

`)}function UCt(n){var t=GCt(n);return{value:Ge([$Ct(t.seriesGroupByCategoryAxis),jCt(t.other)],function(e){return!!e.replace(/[\n\t\s]/g,"")}).join(`

`+gM+`

`),meta:t.meta}}function Lx(n){return n.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function YCt(n){var t=n.slice(0,n.indexOf(`
`));if(t.indexOf(Zp)>=0)return!0}var vD=new RegExp("["+Zp+"]+","g");function XCt(n){for(var t=n.split(/\n+/g),e=Lx(t.shift()).split(vD),i=[],r=ct(e,function(l){return{name:l,data:[]}}),o=0;o<t.length;o++){var a=Lx(t[o]).split(vD);i.push(a.shift());for(var s=0;s<a.length;s++)r[s]&&(r[s].data[o]=a[s])}return{series:r,categories:i}}function qCt(n){for(var t=n.split(/\n+/g),e=Lx(t.shift()),i=[],r=0;r<t.length;r++){var o=Lx(t[r]);if(o){var a=o.split(vD),s="",l=void 0,h=!1;isNaN(a[0])?(h=!0,s=a[0],a=a.slice(1),i[r]={name:s,value:[]},l=i[r].value):l=i[r]=[];for(var u=0;u<a.length;u++)l.push(+a[u]);l.length===1&&(h?i[r].value=l[0]:i[r]=l[0])}}return{name:e,data:i}}function KCt(n,t){var e=n.split(new RegExp(`
*`+gM+`
*`,"g")),i={series:[]};return z(e,function(r,o){if(YCt(r)){var a=XCt(r),s=t[o],l=s.axisDim+"Axis";s&&(i[l]=i[l]||[],i[l][s.axisIndex]={data:a.categories},i.series=i.series.concat(a.series))}else{var a=qCt(r);i.series.push(a)}}),i}var ZCt=(function(n){et(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.onclick=function(e,i){setTimeout(function(){i.dispatchAction({type:"hideTip"})});var r=i.getDom(),o=this.model;this._dom&&r.removeChild(this._dom);var a=document.createElement("div");a.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",a.style.backgroundColor=o.get("backgroundColor")||"#fff";var s=document.createElement("h4"),l=o.get("lang")||[];s.innerHTML=l[0]||o.get("title"),s.style.cssText="margin:10px 20px",s.style.color=o.get("textColor");var h=document.createElement("div"),u=document.createElement("textarea");h.style.cssText="overflow:auto";var d=o.get("optionToContent"),c=o.get("contentToOption"),f=UCt(e);if(Dt(d)){var g=d(i.getOption());Ct(g)?h.innerHTML=g:Vp(g)&&h.appendChild(g)}else{u.readOnly=o.get("readOnly");var p=u.style;p.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",p.color=o.get("textColor"),p.borderColor=o.get("textareaBorderColor"),p.backgroundColor=o.get("textareaColor"),u.value=f.value,h.appendChild(u)}var v=f.meta,m=document.createElement("div");m.style.cssText="position:absolute;bottom:5px;left:0;right:0";var y="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",b=document.createElement("div"),_=document.createElement("div");y+=";background-color:"+o.get("buttonColor"),y+=";color:"+o.get("buttonTextColor");var w=this;function C(){r.removeChild(a),w._dom=null}lE(b,"click",C),lE(_,"click",function(){if(c==null&&d!=null||c!=null&&d==null){C();return}var x;try{Dt(c)?x=c(h,i.getOption()):x=KCt(u.value,v)}catch(S){throw C(),new Error("Data view format error "+S)}x&&i.dispatchAction({type:"changeDataView",newOption:x}),C()}),b.innerHTML=l[1],_.innerHTML=l[2],_.style.cssText=b.style.cssText=y,!o.get("readOnly")&&m.appendChild(_),m.appendChild(b),a.appendChild(s),a.appendChild(h),a.appendChild(m),h.style.height=r.clientHeight-80+"px",r.appendChild(a),this._dom=a},t.prototype.remove=function(e,i){this._dom&&i.getDom().removeChild(this._dom)},t.prototype.dispose=function(e,i){this.remove(e,i)},t.getDefaultOption=function(e){var i={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:e.getLocaleModel().get(["toolbox","dataView","title"]),lang:e.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return i},t})(Ba);function JCt(n,t){return ct(n,function(e,i){var r=t&&t[i];if(Ht(r)&&!ut(r)){var o=Ht(e)&&!ut(e);o||(e={value:e});var a=r.name!=null&&e.name==null;return e=Ot(e,r),a&&delete e.name,e}else return e})}kl({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(n,t){var e=[];z(n.newOption.series,function(i){var r=t.getSeriesByName(i.name)[0];if(!r)e.push(ht({type:"scatter"},i));else{var o=r.get("data");e.push({name:i.name,data:JCt(i.data,o)})}}),t.mergeOption(Ot({series:e},n.newOption))});var $tt=z,jtt=Te();function QCt(n,t){var e=Yz(n);$tt(t,function(i,r){for(var o=e.length-1;o>=0;o--){var a=e[o];if(a[r])break}if(o<0){var s=n.queryComponents({mainType:"dataZoom",subType:"select",id:r})[0];if(s){var l=s.getPercentRange();e[0][r]={dataZoomId:r,start:l[0],end:l[1]}}}}),e.push(t)}function t1t(n){var t=Yz(n),e=t[t.length-1];t.length>1&&t.pop();var i={};return $tt(e,function(r,o){for(var a=t.length-1;a>=0;a--)if(r=t[a][o],r){i[o]=r;break}}),i}function e1t(n){jtt(n).snapshots=null}function i1t(n){return Yz(n).length}function Yz(n){var t=jtt(n);return t.snapshots||(t.snapshots=[{}]),t.snapshots}var n1t=(function(n){et(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.onclick=function(e,i){e1t(e),i.dispatchAction({type:"restore",from:this.uid})},t.getDefaultOption=function(e){var i={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:e.getLocaleModel().get(["toolbox","restore","title"])};return i},t})(Ba);kl({type:"restore",event:"restore",update:"prepareAndUpdate"},function(n,t){t.resetOption("recreate")});var r1t=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],Xz=(function(){function n(t,e,i){var r=this;this._targetInfoList=[];var o=NV(e,t);z(o1t,function(a,s){(!i||!i.include||ee(i.include,s)>=0)&&a(o,r._targetInfoList)})}return n.prototype.setOutputRanges=function(t,e){return this.matchOutputRanges(t,e,function(i,r,o){if((i.coordRanges||(i.coordRanges=[])).push(r),!i.coordRange){i.coordRange=r;var a=PP[i.brushType](0,o,r);i.__rangeOffset={offset:$V[i.brushType](a.values,i.range,[1,1]),xyMinMax:a.xyMinMax}}}),t},n.prototype.matchOutputRanges=function(t,e,i){z(t,function(r){var o=this.findTargetInfo(r,e);o&&o!==!0&&z(o.coordSyses,function(a){var s=PP[r.brushType](1,a,r.range,!0);i(r,s.values,a,e)})},this)},n.prototype.setInputRanges=function(t,e){z(t,function(i){var r=this.findTargetInfo(i,e);if(i.range=i.range||[],r&&r!==!0){i.panelId=r.panelId;var o=PP[i.brushType](0,r.coordSys,i.coordRange),a=i.__rangeOffset;i.range=a?$V[i.brushType](o.values,a.offset,a1t(o.xyMinMax,a.xyMinMax)):o.values}},this)},n.prototype.makePanelOpts=function(t,e){return ct(this._targetInfoList,function(i){var r=i.getPanelRect();return{panelId:i.panelId,defaultBrushType:e?e(i):null,clipPath:Ptt(r),isTargetByCursor:ktt(r,t,i.coordSysModel),getLinearBrushOtherExtent:Btt(r)}})},n.prototype.controlSeries=function(t,e,i){var r=this.findTargetInfo(t,i);return r===!0||r&&ee(r.coordSyses,e.coordinateSystem)>=0},n.prototype.findTargetInfo=function(t,e){for(var i=this._targetInfoList,r=NV(e,t),o=0;o<i.length;o++){var a=i[o],s=t.panelId;if(s){if(a.panelId===s)return a}else for(var l=0;l<WV.length;l++)if(WV[l](r,a))return a}return!0},n})();function mD(n){return n[0]>n[1]&&n.reverse(),n}function NV(n,t){return U0(n,t,{includeMainTypes:r1t})}var o1t={grid:function(n,t){var e=n.xAxisModels,i=n.yAxisModels,r=n.gridModels,o=Pt(),a={},s={};!e&&!i&&!r||(z(e,function(l){var h=l.axis.grid.model;o.set(h.id,h),a[h.id]=!0}),z(i,function(l){var h=l.axis.grid.model;o.set(h.id,h),s[h.id]=!0}),z(r,function(l){o.set(l.id,l),a[l.id]=!0,s[l.id]=!0}),o.each(function(l){var h=l.coordinateSystem,u=[];z(h.getCartesians(),function(d,c){(ee(e,d.getAxis("x").model)>=0||ee(i,d.getAxis("y").model)>=0)&&u.push(d)}),t.push({panelId:"grid--"+l.id,gridModel:l,coordSysModel:l,coordSys:u[0],coordSyses:u,getPanelRect:VV.grid,xAxisDeclared:a[l.id],yAxisDeclared:s[l.id]})}))},geo:function(n,t){z(n.geoModels,function(e){var i=e.coordinateSystem;t.push({panelId:"geo--"+e.id,geoModel:e,coordSysModel:e,coordSys:i,coordSyses:[i],getPanelRect:VV.geo})})}},WV=[function(n,t){var e=n.xAxisModel,i=n.yAxisModel,r=n.gridModel;return!r&&e&&(r=e.axis.grid.model),!r&&i&&(r=i.axis.grid.model),r&&r===t.gridModel},function(n,t){var e=n.geoModel;return e&&e===t.geoModel}],VV={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var n=this.coordSys,t=n.getBoundingRect().clone();return t.applyTransform(sf(n)),t}},PP={lineX:qt(GV,0),lineY:qt(GV,1),rect:function(n,t,e,i){var r=n?t.pointToData([e[0][0],e[1][0]],i):t.dataToPoint([e[0][0],e[1][0]],i),o=n?t.pointToData([e[0][1],e[1][1]],i):t.dataToPoint([e[0][1],e[1][1]],i),a=[mD([r[0],o[0]]),mD([r[1],o[1]])];return{values:a,xyMinMax:a}},polygon:function(n,t,e,i){var r=[[1/0,-1/0],[1/0,-1/0]],o=ct(e,function(a){var s=n?t.pointToData(a,i):t.dataToPoint(a,i);return r[0][0]=Math.min(r[0][0],s[0]),r[1][0]=Math.min(r[1][0],s[1]),r[0][1]=Math.max(r[0][1],s[0]),r[1][1]=Math.max(r[1][1],s[1]),s});return{values:o,xyMinMax:r}}};function GV(n,t,e,i){var r=e.getAxis(["x","y"][n]),o=mD(ct([0,1],function(s){return t?r.coordToData(r.toLocalCoord(i[s]),!0):r.toGlobalCoord(r.dataToCoord(i[s]))})),a=[];return a[n]=o,a[1-n]=[NaN,NaN],{values:o,xyMinMax:a}}var $V={lineX:qt(jV,0),lineY:qt(jV,1),rect:function(n,t,e){return[[n[0][0]-e[0]*t[0][0],n[0][1]-e[0]*t[0][1]],[n[1][0]-e[1]*t[1][0],n[1][1]-e[1]*t[1][1]]]},polygon:function(n,t,e){return ct(n,function(i,r){return[i[0]-e[0]*t[r][0],i[1]-e[1]*t[r][1]]})}};function jV(n,t,e,i){return[t[0]-i[n]*e[0],t[1]-i[n]*e[1]]}function a1t(n,t){var e=UV(n),i=UV(t),r=[e[0]/i[0],e[1]/i[1]];return isNaN(r[0])&&(r[0]=1),isNaN(r[1])&&(r[1]=1),r}function UV(n){return n?[n[0][1]-n[0][0],n[1][1]-n[1][0]]:[NaN,NaN]}var yD=z,s1t=kct("toolbox-dataZoom_"),l1t=(function(n){et(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.render=function(e,i,r,o){this._brushController||(this._brushController=new Hz(r.getZr()),this._brushController.on("brush",xt(this._onBrush,this)).mount()),d1t(e,i,this,o,r),u1t(e,i)},t.prototype.onclick=function(e,i,r){h1t[r].call(this)},t.prototype.remove=function(e,i){this._brushController&&this._brushController.unmount()},t.prototype.dispose=function(e,i){this._brushController&&this._brushController.dispose()},t.prototype._onBrush=function(e){var i=e.areas;if(!e.isEnd||!i.length)return;var r={},o=this.ecModel;this._brushController.updateCovers([]);var a=new Xz(qz(this.model),o,{include:["grid"]});a.matchOutputRanges(i,o,function(h,u,d){if(d.type==="cartesian2d"){var c=h.brushType;c==="rect"?(s("x",d,u[0]),s("y",d,u[1])):s({lineX:"x",lineY:"y"}[c],d,u)}}),QCt(o,r),this._dispatchZoomAction(r);function s(h,u,d){var c=u.getAxis(h),f=c.model,g=l(h,f,o),p=g.findRepresentativeAxisProxy(f).getMinMaxSpan();(p.minValueSpan!=null||p.maxValueSpan!=null)&&(d=eg(0,d.slice(),c.scale.getExtent(),0,p.minValueSpan,p.maxValueSpan)),g&&(r[g.id]={dataZoomId:g.id,startValue:d[0],endValue:d[1]})}function l(h,u,d){var c;return d.eachComponent({mainType:"dataZoom",subType:"select"},function(f){var g=f.getAxisModel(h,u.componentIndex);g&&(c=f)}),c}},t.prototype._dispatchZoomAction=function(e){var i=[];yD(e,function(r,o){i.push(zt(r))}),i.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:i})},t.getDefaultOption=function(e){var i={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:e.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return i},t})(Ba),h1t={zoom:function(){var n=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:n})},back:function(){this._dispatchZoomAction(t1t(this.ecModel))}};function qz(n){var t={xAxisIndex:n.get("xAxisIndex",!0),yAxisIndex:n.get("yAxisIndex",!0),xAxisId:n.get("xAxisId",!0),yAxisId:n.get("yAxisId",!0)};return t.xAxisIndex==null&&t.xAxisId==null&&(t.xAxisIndex="all"),t.yAxisIndex==null&&t.yAxisId==null&&(t.yAxisIndex="all"),t}function u1t(n,t){n.setIconStatus("back",i1t(t)>1?"emphasis":"normal")}function d1t(n,t,e,i,r){var o=e._isZoomActive;i&&i.type==="takeGlobalCursor"&&(o=i.key==="dataZoomSelect"?i.dataZoomSelectActive:!1),e._isZoomActive=o,n.setIconStatus("zoom",o?"emphasis":"normal");var a=new Xz(qz(n),t,{include:["grid"]}),s=a.makePanelOpts(r,function(l){return l.xAxisDeclared&&!l.yAxisDeclared?"lineX":!l.xAxisDeclared&&l.yAxisDeclared?"lineY":"rect"});e._brushController.setPanels(s).enableBrush(o&&s.length?{brushType:"auto",brushStyle:n.getModel("brushStyle").getItemStyle()}:!1)}ipt("dataZoom",function(n){var t=n.getComponent("toolbox",0),e=["feature","dataZoom"];if(!t||t.get(e)==null)return;var i=t.getModel(e),r=[],o=qz(i),a=U0(n,o);yD(a.xAxisModels,function(l){return s(l,"xAxis","xAxisIndex")}),yD(a.yAxisModels,function(l){return s(l,"yAxis","yAxisIndex")});function s(l,h,u){var d=l.componentIndex,c={type:"select",$fromToolbox:!0,filterMode:i.get("filterMode",!0)||"filter",id:s1t+h+d};c[u]=d,r.push(c)}return r});function c1t(n){n.registerComponentModel(OCt),n.registerComponentView(zCt),Zg("saveAsImage",NCt),Zg("magicType",VCt),Zg("dataView",ZCt),Zg("dataZoom",l1t),Zg("restore",n1t),ae(ICt)}var f1t=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.type="tooltip",t.dependencies=["axisPointer"],t.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},t})(ge);function Utt(n){var t=n.get("confine");return t!=null?!!t:n.get("renderMode")==="richText"}function Ytt(n){if(ce.domSupported){for(var t=document.documentElement.style,e=0,i=n.length;e<i;e++)if(n[e]in t)return n[e]}}var Xtt=Ytt(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),g1t=Ytt(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function qtt(n,t){if(!n)return t;t=jZ(t,!0);var e=n.indexOf(t);return n=e===-1?t:"-"+n.slice(0,e)+"-"+t,n.toLowerCase()}function p1t(n,t){var e=n.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(n);return e?e[t]:null}var v1t=qtt(g1t,"transition"),Kz=qtt(Xtt,"transform"),m1t="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(ce.transform3dSupported?"will-change:transform;":"");function y1t(n){return n=n==="left"?"right":n==="right"?"left":n==="top"?"bottom":"top",n}function b1t(n,t,e){if(!Ct(e)||e==="inside")return"";var i=n.get("backgroundColor"),r=n.get("borderWidth");t=Mf(t);var o=y1t(e),a=Math.max(Math.round(r)*1.5,6),s="",l=Kz+":",h;ee(["left","right"],o)>-1?(s+="top:50%",l+="translateY(-50%) rotate("+(h=o==="left"?-225:-45)+"deg)"):(s+="left:50%",l+="translateX(-50%) rotate("+(h=o==="top"?225:45)+"deg)");var u=h*Math.PI/180,d=a+r,c=d*Math.abs(Math.cos(u))+d*Math.abs(Math.sin(u)),f=Math.round(((c-Math.SQRT2*r)/2+Math.SQRT2*r-(c-d)/2)*100)/100;s+=";"+o+":-"+f+"px";var g=t+" solid "+r+"px;",p=["position:absolute;width:"+a+"px;height:"+a+"px;z-index:-1;",s+";"+l+";","border-bottom:"+g,"border-right:"+g,"background-color:"+i+";"];return'<div style="'+p.join("")+'"></div>'}function _1t(n,t){var e="cubic-bezier(0.23,1,0.32,1)",i=" "+n/2+"s "+e,r="opacity"+i+",visibility"+i;return t||(i=" "+n+"s "+e,r+=ce.transformSupported?","+Kz+i:",left"+i+",top"+i),v1t+":"+r}function YV(n,t,e){var i=n.toFixed(0)+"px",r=t.toFixed(0)+"px";if(!ce.transformSupported)return e?"top:"+r+";left:"+i+";":[["top",r],["left",i]];var o=ce.transform3dSupported,a="translate"+(o?"3d":"")+"("+i+","+r+(o?",0":"")+")";return e?"top:0;left:0;"+Kz+":"+a+";":[["top",0],["left",0],[Xtt,a]]}function C1t(n){var t=[],e=n.get("fontSize"),i=n.getTextColor();i&&t.push("color:"+i),t.push("font:"+n.getFont());var r=Yt(n.get("lineHeight"),Math.round(e*3/2));e&&t.push("line-height:"+r+"px");var o=n.get("textShadowColor"),a=n.get("textShadowBlur")||0,s=n.get("textShadowOffsetX")||0,l=n.get("textShadowOffsetY")||0;return o&&a&&t.push("text-shadow:"+s+"px "+l+"px "+a+"px "+o),z(["decoration","align"],function(h){var u=n.get(h);u&&t.push("text-"+h+":"+u)}),t.join(";")}function w1t(n,t,e){var i=[],r=n.get("transitionDuration"),o=n.get("backgroundColor"),a=n.get("shadowBlur"),s=n.get("shadowColor"),l=n.get("shadowOffsetX"),h=n.get("shadowOffsetY"),u=n.getModel("textStyle"),d=AJ(n,"html"),c=l+"px "+h+"px "+a+"px "+s;return i.push("box-shadow:"+c),t&&r&&i.push(_1t(r,e)),o&&i.push("background-color:"+o),z(["width","color","radius"],function(f){var g="border-"+f,p=jZ(g),v=n.get(p);v!=null&&i.push(g+":"+v+(f==="color"?"":"px"))}),i.push(C1t(u)),d!=null&&i.push("padding:"+Gv(d).join("px ")+"px"),i.join(";")+";"}function XV(n,t,e,i,r){var o=t&&t.painter;if(e){var a=o&&o.getViewportRoot();a&&hdt(n,a,e,i,r)}else{n[0]=i,n[1]=r;var s=o&&o.getViewportRootOffset();s&&(n[0]+=s.offsetLeft,n[1]+=s.offsetTop)}n[2]=n[0]/t.getWidth(),n[3]=n[1]/t.getHeight()}var x1t=(function(){function n(t,e){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,ce.wxa)return null;var i=document.createElement("div");i.domBelongToZr=!0,this.el=i;var r=this._zr=t.getZr(),o=e.appendTo,a=o&&(Ct(o)?document.querySelector(o):Vp(o)?o:Dt(o)&&o(t.getDom()));XV(this._styleCoord,r,a,t.getWidth()/2,t.getHeight()/2),(a||t.getDom()).appendChild(i),this._api=t,this._container=a;var s=this;i.onmouseenter=function(){s._enterable&&(clearTimeout(s._hideTimeout),s._show=!0),s._inContent=!0},i.onmousemove=function(l){if(l=l||window.event,!s._enterable){var h=r.handler,u=r.painter.getViewportRoot();pa(u,l,!0),h.dispatch("mousemove",l)}},i.onmouseleave=function(){s._inContent=!1,s._enterable&&s._show&&s.hideLater(s._hideDelay)}}return n.prototype.update=function(t){if(!this._container){var e=this._api.getDom(),i=p1t(e,"position"),r=e.style;r.position!=="absolute"&&i!=="absolute"&&(r.position="relative")}var o=t.get("alwaysShowContent");o&&this._moveIfResized(),this._alwaysShowContent=o,this.el.className=t.get("className")||""},n.prototype.show=function(t,e){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var i=this.el,r=i.style,o=this._styleCoord;i.innerHTML?r.cssText=m1t+w1t(t,!this._firstShow,this._longHide)+YV(o[0],o[1],!0)+("border-color:"+Mf(e)+";")+(t.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):r.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},n.prototype.setContent=function(t,e,i,r,o){var a=this.el;if(t==null){a.innerHTML="";return}var s="";if(Ct(o)&&i.get("trigger")==="item"&&!Utt(i)&&(s=b1t(i,r,o)),Ct(t))a.innerHTML=t+s;else if(t){a.innerHTML="",ut(t)||(t=[t]);for(var l=0;l<t.length;l++)Vp(t[l])&&t[l].parentNode!==a&&a.appendChild(t[l]);if(s&&a.childNodes.length){var h=document.createElement("div");h.innerHTML=s,a.appendChild(h)}}},n.prototype.setEnterable=function(t){this._enterable=t},n.prototype.getSize=function(){var t=this.el;return t?[t.offsetWidth,t.offsetHeight]:[0,0]},n.prototype.moveTo=function(t,e){if(this.el){var i=this._styleCoord;if(XV(i,this._zr,this._container,t,e),i[0]!=null&&i[1]!=null){var r=this.el.style,o=YV(i[0],i[1]);z(o,function(a){r[a[0]]=a[1]})}}},n.prototype._moveIfResized=function(){var t=this._styleCoord[2],e=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),e*this._zr.getHeight())},n.prototype.hide=function(){var t=this,e=this.el.style;e.visibility="hidden",e.opacity="0",ce.transform3dSupported&&(e.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return t._longHide=!0},500)},n.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(xt(this.hide,this),t)):this.hide())},n.prototype.isShow=function(){return this._show},n.prototype.dispose=function(){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var t=this.el.parentNode;t&&t.removeChild(this.el),this.el=this._container=null},n})(),S1t=(function(){function n(t){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=t.getZr(),KV(this._styleCoord,this._zr,t.getWidth()/2,t.getHeight()/2)}return n.prototype.update=function(t){var e=t.get("alwaysShowContent");e&&this._moveIfResized(),this._alwaysShowContent=e},n.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},n.prototype.setContent=function(t,e,i,r,o){var a=this;Ht(t)&&Ve(""),this.el&&this._zr.remove(this.el);var s=i.getModel("textStyle");this.el=new Re({style:{rich:e.richTextStyles,text:t,lineHeight:22,borderWidth:1,borderColor:r,textShadowColor:s.get("textShadowColor"),fill:i.get(["textStyle","color"]),padding:AJ(i,"richText"),verticalAlign:"top",align:"left"},z:i.get("z")}),z(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(h){a.el.style[h]=i.get(h)}),z(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(h){a.el.style[h]=s.get(h)||0}),this._zr.add(this.el);var l=this;this.el.on("mouseover",function(){l._enterable&&(clearTimeout(l._hideTimeout),l._show=!0),l._inContent=!0}),this.el.on("mouseout",function(){l._enterable&&l._show&&l.hideLater(l._hideDelay),l._inContent=!1})},n.prototype.setEnterable=function(t){this._enterable=t},n.prototype.getSize=function(){var t=this.el,e=this.el.getBoundingRect(),i=qV(t.style);return[e.width+i.left+i.right,e.height+i.top+i.bottom]},n.prototype.moveTo=function(t,e){var i=this.el;if(i){var r=this._styleCoord;KV(r,this._zr,t,e),t=r[0],e=r[1];var o=i.style,a=pu(o.borderWidth||0),s=qV(o);i.x=t+a+s.left,i.y=e+a+s.top,i.markRedraw()}},n.prototype._moveIfResized=function(){var t=this._styleCoord[2],e=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),e*this._zr.getHeight())},n.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},n.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(xt(this.hide,this),t)):this.hide())},n.prototype.isShow=function(){return this._show},n.prototype.dispose=function(){this._zr.remove(this.el)},n})();function pu(n){return Math.max(0,n)}function qV(n){var t=pu(n.shadowBlur||0),e=pu(n.shadowOffsetX||0),i=pu(n.shadowOffsetY||0);return{left:pu(t-e),right:pu(t+e),top:pu(t-i),bottom:pu(t+i)}}function KV(n,t,e,i){n[0]=e,n[1]=i,n[2]=n[0]/t.getWidth(),n[3]=n[1]/t.getHeight()}var A1t=new Ae({shape:{x:-1,y:-1,width:2,height:2}}),T1t=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(e,i){if(!(ce.node||!i.getDom())){var r=e.getComponent("tooltip"),o=this._renderMode=zct(r.get("renderMode"));this._tooltipContent=o==="richText"?new S1t(i):new x1t(i,{appendTo:r.get("appendToBody",!0)?"body":r.get("appendTo",!0)})}},t.prototype.render=function(e,i,r){if(!(ce.node||!r.getDom())){this.group.removeAll(),this._tooltipModel=e,this._ecModel=i,this._api=r;var o=this._tooltipContent;o.update(e),o.setEnterable(e.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&e.get("transitionDuration")?Yv(this,"_updatePosition",50,"fixRate"):Gy(this,"_updatePosition")}},t.prototype._initGlobalListener=function(){var e=this._tooltipModel,i=e.get("triggerOn");ett("itemTooltip",this._api,xt(function(r,o,a){i!=="none"&&(i.indexOf(r)>=0?this._tryShow(o,a):r==="leave"&&this._hide(a))},this))},t.prototype._keepShow=function(){var e=this._tooltipModel,i=this._ecModel,r=this._api,o=e.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&o!=="none"&&o!=="click"){var a=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!r.isDisposed()&&a.manuallyShowTip(e,i,r,{x:a._lastX,y:a._lastY,dataByCoordSys:a._lastDataByCoordSys})})}},t.prototype.manuallyShowTip=function(e,i,r,o){if(!(o.from===this.uid||ce.node||!r.getDom())){var a=ZV(o,r);this._ticket="";var s=o.dataByCoordSys,l=B1t(o,i,r);if(l){var h=l.el.getBoundingRect().clone();h.applyTransform(l.el.transform),this._tryShow({offsetX:h.x+h.width/2,offsetY:h.y+h.height/2,target:l.el,position:o.position,positionDefault:"bottom"},a)}else if(o.tooltip&&o.x!=null&&o.y!=null){var u=A1t;u.x=o.x,u.y=o.y,u.update(),Vt(u).tooltipConfig={name:null,option:o.tooltip},this._tryShow({offsetX:o.x,offsetY:o.y,target:u},a)}else if(s)this._tryShow({offsetX:o.x,offsetY:o.y,position:o.position,dataByCoordSys:s,tooltipOption:o.tooltipOption},a);else if(o.seriesIndex!=null){if(this._manuallyAxisShowTip(e,i,r,o))return;var d=itt(o,i),c=d.point[0],f=d.point[1];c!=null&&f!=null&&this._tryShow({offsetX:c,offsetY:f,target:d.el,position:o.position,positionDefault:"bottom"},a)}else o.x!=null&&o.y!=null&&(r.dispatchAction({type:"updateAxisPointer",x:o.x,y:o.y}),this._tryShow({offsetX:o.x,offsetY:o.y,position:o.position,target:r.getZr().findHover(o.x,o.y).target},a))}},t.prototype.manuallyHideTip=function(e,i,r,o){var a=this._tooltipContent;this._tooltipModel&&a.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,o.from!==this.uid&&this._hide(ZV(o,r))},t.prototype._manuallyAxisShowTip=function(e,i,r,o){var a=o.seriesIndex,s=o.dataIndex,l=i.getComponent("axisPointer").coordSysAxesInfo;if(!(a==null||s==null||l==null)){var h=i.getSeriesByIndex(a);if(h){var u=h.getData(),d=Hm([u.getItemModel(s),h,(h.coordinateSystem||{}).model],this._tooltipModel);if(d.get("trigger")==="axis")return r.dispatchAction({type:"updateAxisPointer",seriesIndex:a,dataIndex:s,position:o.position}),!0}}},t.prototype._tryShow=function(e,i){var r=e.target,o=this._tooltipModel;if(o){this._lastX=e.offsetX,this._lastY=e.offsetY;var a=e.dataByCoordSys;if(a&&a.length)this._showAxisTooltip(a,e);else if(r){var s=Vt(r);if(s.ssrType==="legend")return;this._lastDataByCoordSys=null;var l,h;Hc(r,function(u){if(Vt(u).dataIndex!=null)return l=u,!0;if(Vt(u).tooltipConfig!=null)return h=u,!0},!0),l?this._showSeriesItemTooltip(e,l,i):h?this._showComponentItemTooltip(e,h,i):this._hide(i)}else this._lastDataByCoordSys=null,this._hide(i)}},t.prototype._showOrMove=function(e,i){var r=e.get("showDelay");i=xt(i,this),clearTimeout(this._showTimout),r>0?this._showTimout=setTimeout(i,r):i()},t.prototype._showAxisTooltip=function(e,i){var r=this._ecModel,o=this._tooltipModel,a=[i.offsetX,i.offsetY],s=Hm([i.tooltipOption],o),l=this._renderMode,h=[],u=Jn("section",{blocks:[],noHeader:!0}),d=[],c=new ZR;z(e,function(y){z(y.dataByAxis,function(b){var _=r.getComponent(b.axisDim+"Axis",b.axisIndex),w=b.value;if(!(!_||w==null)){var C=JQ(w,_.axis,r,b.seriesDataIndices,b.valueLabelOpt),x=Jn("section",{header:C,noHeader:!ps(C),sortBlocks:!0,blocks:[]});u.blocks.push(x),z(b.seriesDataIndices,function(S){var A=r.getSeriesByIndex(S.seriesIndex),T=S.dataIndexInside,M=A.getDataParams(T);if(!(M.dataIndex<0)){M.axisDim=b.axisDim,M.axisIndex=b.axisIndex,M.axisType=b.axisType,M.axisId=b.axisId,M.axisValue=bz(_.axis,{value:w}),M.axisValueLabel=C,M.marker=c.makeTooltipMarker("item",Mf(M.color),l);var R=mW(A.formatTooltip(T,!0,null)),L=R.frag;if(L){var B=Hm([A],o).get("valueFormatter");x.blocks.push(B?ht({valueFormatter:B},L):L)}R.text&&d.push(R.text),h.push(M)}})}})}),u.blocks.reverse(),d.reverse();var f=i.position,g=s.get("order"),p=xW(u,c,l,g,r.get("useUTC"),s.get("textStyle"));p&&d.unshift(p);var v=l==="richText"?`

`:"<br/>",m=d.join(v);this._showOrMove(s,function(){this._updateContentNotChangedOnAxis(e,h)?this._updatePosition(s,f,a[0],a[1],this._tooltipContent,h):this._showTooltipContent(s,m,h,Math.random()+"",a[0],a[1],f,null,c)})},t.prototype._showSeriesItemTooltip=function(e,i,r){var o=this._ecModel,a=Vt(i),s=a.seriesIndex,l=o.getSeriesByIndex(s),h=a.dataModel||l,u=a.dataIndex,d=a.dataType,c=h.getData(d),f=this._renderMode,g=e.positionDefault,p=Hm([c.getItemModel(u),h,l&&(l.coordinateSystem||{}).model],this._tooltipModel,g?{position:g}:null),v=p.get("trigger");if(!(v!=null&&v!=="item")){var m=h.getDataParams(u,d),y=new ZR;m.marker=y.makeTooltipMarker("item",Mf(m.color),f);var b=mW(h.formatTooltip(u,!1,d)),_=p.get("order"),w=p.get("valueFormatter"),C=b.frag,x=C?xW(w?ht({valueFormatter:w},C):C,y,f,_,o.get("useUTC"),p.get("textStyle")):b.text,S="item_"+h.name+"_"+u;this._showOrMove(p,function(){this._showTooltipContent(p,x,m,S,e.offsetX,e.offsetY,e.position,e.target,y)}),r({type:"showTip",dataIndexInside:u,dataIndex:c.getRawIndex(u),seriesIndex:s,from:this.uid})}},t.prototype._showComponentItemTooltip=function(e,i,r){var o=this._renderMode==="html",a=Vt(i),s=a.tooltipConfig,l=s.option||{},h=l.encodeHTMLContent;if(Ct(l)){var u=l;l={content:u,formatter:u},h=!0}h&&o&&l.content&&(l=zt(l),l.content=Qr(l.content));var d=[l],c=this._ecModel.getComponent(a.componentMainType,a.componentIndex);c&&d.push(c),d.push({formatter:l.content});var f=e.positionDefault,g=Hm(d,this._tooltipModel,f?{position:f}:null),p=g.get("content"),v=Math.random()+"",m=new ZR;this._showOrMove(g,function(){var y=zt(g.get("formatterParams")||{});this._showTooltipContent(g,p,y,v,e.offsetX,e.offsetY,e.position,i,m)}),r({type:"showTip",from:this.uid})},t.prototype._showTooltipContent=function(e,i,r,o,a,s,l,h,u){if(this._ticket="",!(!e.get("showContent")||!e.get("show"))){var d=this._tooltipContent;d.setEnterable(e.get("enterable"));var c=e.get("formatter");l=l||e.get("position");var f=i,g=this._getNearestPoint([a,s],r,e.get("trigger"),e.get("borderColor")),p=g.color;if(c)if(Ct(c)){var v=e.ecModel.get("useUTC"),m=ut(r)?r[0]:r,y=m&&m.axisType&&m.axisType.indexOf("time")>=0;f=c,y&&(f=qT(m.axisValue,f,v)),f=UZ(f,r,!0)}else if(Dt(c)){var b=xt(function(_,w){_===this._ticket&&(d.setContent(w,u,e,p,l),this._updatePosition(e,l,a,s,d,r,h))},this);this._ticket=o,f=c(r,o,b)}else f=c;d.setContent(f,u,e,p,l),d.show(e,p),this._updatePosition(e,l,a,s,d,r,h)}},t.prototype._getNearestPoint=function(e,i,r,o){if(r==="axis"||ut(i))return{color:o||(this._renderMode==="html"?"#fff":"none")};if(!ut(i))return{color:o||i.color||i.borderColor}},t.prototype._updatePosition=function(e,i,r,o,a,s,l){var h=this._api.getWidth(),u=this._api.getHeight();i=i||e.get("position");var d=a.getSize(),c=e.get("align"),f=e.get("verticalAlign"),g=l&&l.getBoundingRect().clone();if(l&&g.applyTransform(l.transform),Dt(i)&&(i=i([r,o],s,a.el,g,{viewSize:[h,u],contentSize:d.slice()})),ut(i))r=mt(i[0],h),o=mt(i[1],u);else if(Ht(i)){var p=i;p.width=d[0],p.height=d[1];var v=Vn(p,{width:h,height:u});r=v.x,o=v.y,c=null,f=null}else if(Ct(i)&&l){var m=P1t(i,g,d,e.get("borderWidth"));r=m[0],o=m[1]}else{var m=M1t(r,o,a,h,u,c?null:20,f?null:20);r=m[0],o=m[1]}if(c&&(r-=JV(c)?d[0]/2:c==="right"?d[0]:0),f&&(o-=JV(f)?d[1]/2:f==="bottom"?d[1]:0),Utt(e)){var m=R1t(r,o,a,h,u);r=m[0],o=m[1]}a.moveTo(r,o)},t.prototype._updateContentNotChangedOnAxis=function(e,i){var r=this._lastDataByCoordSys,o=this._cbParamsList,a=!!r&&r.length===e.length;return a&&z(r,function(s,l){var h=s.dataByAxis||[],u=e[l]||{},d=u.dataByAxis||[];a=a&&h.length===d.length,a&&z(h,function(c,f){var g=d[f]||{},p=c.seriesDataIndices||[],v=g.seriesDataIndices||[];a=a&&c.value===g.value&&c.axisType===g.axisType&&c.axisId===g.axisId&&p.length===v.length,a&&z(p,function(m,y){var b=v[y];a=a&&m.seriesIndex===b.seriesIndex&&m.dataIndex===b.dataIndex}),o&&z(c.seriesDataIndices,function(m){var y=m.seriesIndex,b=i[y],_=o[y];b&&_&&_.data!==b.data&&(a=!1)})})}),this._lastDataByCoordSys=e,this._cbParamsList=i,!!a},t.prototype._hide=function(e){this._lastDataByCoordSys=null,e({type:"hideTip",from:this.uid})},t.prototype.dispose=function(e,i){ce.node||!i.getDom()||(Gy(this,"_updatePosition"),this._tooltipContent.dispose(),oD("itemTooltip",i))},t.type="tooltip",t})(Di);function Hm(n,t,e){var i=t.ecModel,r;e?(r=new Ze(e,i,i),r=new Ze(t.option,r,i)):r=t;for(var o=n.length-1;o>=0;o--){var a=n[o];a&&(a instanceof Ze&&(a=a.get("tooltip",!0)),Ct(a)&&(a={formatter:a}),a&&(r=new Ze(a,r,i)))}return r}function ZV(n,t){return n.dispatchAction||xt(t.dispatchAction,t)}function M1t(n,t,e,i,r,o,a){var s=e.getSize(),l=s[0],h=s[1];return o!=null&&(n+l+o+2>i?n-=l+o:n+=o),a!=null&&(t+h+a>r?t-=h+a:t+=a),[n,t]}function R1t(n,t,e,i,r){var o=e.getSize(),a=o[0],s=o[1];return n=Math.min(n+a,i)-a,t=Math.min(t+s,r)-s,n=Math.max(n,0),t=Math.max(t,0),[n,t]}function P1t(n,t,e,i){var r=e[0],o=e[1],a=Math.ceil(Math.SQRT2*i)+8,s=0,l=0,h=t.width,u=t.height;switch(n){case"inside":s=t.x+h/2-r/2,l=t.y+u/2-o/2;break;case"top":s=t.x+h/2-r/2,l=t.y-o-a;break;case"bottom":s=t.x+h/2-r/2,l=t.y+u+a;break;case"left":s=t.x-r-a,l=t.y+u/2-o/2;break;case"right":s=t.x+h+a,l=t.y+u/2-o/2}return[s,l]}function JV(n){return n==="center"||n==="middle"}function B1t(n,t,e){var i=DH(n).queryOptionMap,r=i.keys()[0];if(!(!r||r==="series")){var o=e_(t,r,i.get(r),{useDefault:!1,enableAll:!1,enableNone:!1}),a=o.models[0];if(a){var s=e.getViewOfComponentModel(a),l;if(s.group.traverse(function(h){var u=Vt(h).tooltipConfig;if(u&&u.name===n.name)return l=h,!0}),l)return{componentMainType:r,componentIndex:a.componentIndex,el:l}}}}function k1t(n){ae(c_),n.registerComponentModel(f1t),n.registerComponentView(T1t),n.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},dn),n.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},dn)}var L1t=["rect","polygon","keep","clear"];function E1t(n,t){var e=li(n?n.brush:[]);if(e.length){var i=[];z(e,function(l){var h=l.hasOwnProperty("toolbox")?l.toolbox:[];h instanceof Array&&(i=i.concat(h))});var r=n&&n.toolbox;ut(r)&&(r=r[0]),r||(r={feature:{}},n.toolbox=[r]);var o=r.feature||(r.feature={}),a=o.brush||(o.brush={}),s=a.type||(a.type=[]);s.push.apply(s,i),D1t(s),t&&!s.length&&s.push.apply(s,L1t)}}function D1t(n){var t={};z(n,function(e){t[e]=1}),n.length=0,z(t,function(e,i){n.push(i)})}var Ky=z,I1t=Ht,Ex=-1,qn=(function(){function n(t){var e=t.mappingMethod,i=t.type,r=this.option=zt(t);this.type=i,this.mappingMethod=e,this._normalizeData=z1t[e];var o=n.visualHandlers[i];this.applyVisual=o.applyVisual,this.getColorMapper=o.getColorMapper,this._normalizedToVisual=o._normalizedToVisual[e],e==="piecewise"?(BP(r),O1t(r)):e==="category"?r.categories?H1t(r):BP(r,!0):(so(e!=="linear"||r.dataExtent),BP(r))}return n.prototype.mapValueToVisual=function(t){var e=this._normalizeData(t);return this._normalizedToVisual(e,t)},n.prototype.getNormalizer=function(){return xt(this._normalizeData,this)},n.listVisualTypes=function(){return pe(n.visualHandlers)},n.isValidType=function(t){return n.visualHandlers.hasOwnProperty(t)},n.eachVisual=function(t,e,i){Ht(t)?z(t,e,i):e.call(i,t)},n.mapVisual=function(t,e,i){var r,o=ut(t)?[]:Ht(t)?{}:(r=!0,null);return n.eachVisual(t,function(a,s){var l=e.call(i,a,s);r?o=l:o[s]=l}),o},n.retrieveVisuals=function(t){var e={},i;return t&&Ky(n.visualHandlers,function(r,o){t.hasOwnProperty(o)&&(e[o]=t[o],i=!0)}),i?e:null},n.prepareVisualTypes=function(t){if(ut(t))t=t.slice();else if(I1t(t)){var e=[];Ky(t,function(i,r){e.push(r)}),t=e}else return[];return t.sort(function(i,r){return r==="color"&&i!=="color"&&i.indexOf("color")===0?1:-1}),t},n.dependsOn=function(t,e){return e==="color"?!!(t&&t.indexOf(e)===0):t===e},n.findPieceIndex=function(t,e,i){for(var r,o=1/0,a=0,s=e.length;a<s;a++){var l=e[a].value;if(l!=null){if(l===t||Ct(l)&&l===t+"")return a;i&&c(l,a)}}for(var a=0,s=e.length;a<s;a++){var h=e[a],u=h.interval,d=h.close;if(u){if(u[0]===-1/0){if(NC(d[1],t,u[1]))return a}else if(u[1]===1/0){if(NC(d[0],u[0],t))return a}else if(NC(d[0],u[0],t)&&NC(d[1],t,u[1]))return a;i&&c(u[0],a),i&&c(u[1],a)}}if(i)return t===1/0?e.length-1:t===-1/0?0:r;function c(f,g){var p=Math.abs(f-t);p<o&&(o=p,r=g)}},n.visualHandlers={color:{applyVisual:zm("color"),getColorMapper:function(){var t=this.option;return xt(t.mappingMethod==="category"?function(e,i){return!i&&(e=this._normalizeData(e)),b0.call(this,e)}:function(e,i,r){var o=!!r;return!i&&(e=this._normalizeData(e)),r=fR(e,t.parsedVisual,r),o?r:wh(r,"rgba")},this)},_normalizedToVisual:{linear:function(t){return wh(fR(t,this.option.parsedVisual),"rgba")},category:b0,piecewise:function(t,e){var i=_D.call(this,e);return i==null&&(i=wh(fR(t,this.option.parsedVisual),"rgba")),i},fixed:rc}},colorHue:FC(function(t,e){return G0(t,e)}),colorSaturation:FC(function(t,e){return G0(t,null,e)}),colorLightness:FC(function(t,e){return G0(t,null,null,e)}),colorAlpha:FC(function(t,e){return ix(t,e)}),decal:{applyVisual:zm("decal"),_normalizedToVisual:{linear:null,category:b0,piecewise:null,fixed:null}},opacity:{applyVisual:zm("opacity"),_normalizedToVisual:bD([0,1])},liftZ:{applyVisual:zm("liftZ"),_normalizedToVisual:{linear:rc,category:rc,piecewise:rc,fixed:rc}},symbol:{applyVisual:function(t,e,i){var r=this.mapValueToVisual(t);i("symbol",r)},_normalizedToVisual:{linear:QV,category:b0,piecewise:function(t,e){var i=_D.call(this,e);return i==null&&(i=QV.call(this,t)),i},fixed:rc}},symbolSize:{applyVisual:zm("symbolSize"),_normalizedToVisual:bD([0,1])}},n})();function O1t(n){var t=n.pieceList;n.hasSpecialVisual=!1,z(t,function(e,i){e.originIndex=i,e.visual!=null&&(n.hasSpecialVisual=!0)})}function H1t(n){var t=n.categories,e=n.categoryMap={},i=n.visual;if(Ky(t,function(a,s){e[a]=s}),!ut(i)){var r=[];Ht(i)?Ky(i,function(a,s){var l=e[s];r[l??Ex]=a}):r[Ex]=i,i=Ktt(n,r)}for(var o=t.length-1;o>=0;o--)i[o]==null&&(delete e[t[o]],t.pop())}function BP(n,t){var e=n.visual,i=[];Ht(e)?Ky(e,function(o){i.push(o)}):e!=null&&i.push(e);var r={color:1,symbol:1};!t&&i.length===1&&!r.hasOwnProperty(n.type)&&(i[1]=i[0]),Ktt(n,i)}function FC(n){return{applyVisual:function(t,e,i){var r=this.mapValueToVisual(t);i("color",n(e("color"),r))},_normalizedToVisual:bD([0,1])}}function QV(n){var t=this.option.visual;return t[Math.round(qe(n,[0,1],[0,t.length-1],!0))]||{}}function zm(n){return function(t,e,i){i(n,this.mapValueToVisual(t))}}function b0(n){var t=this.option.visual;return t[this.option.loop&&n!==Ex?n%t.length:n]}function rc(){return this.option.visual[0]}function bD(n){return{linear:function(t){return qe(t,n,this.option.visual,!0)},category:b0,piecewise:function(t,e){var i=_D.call(this,e);return i==null&&(i=qe(t,n,this.option.visual,!0)),i},fixed:rc}}function _D(n){var t=this.option,e=t.pieceList;if(t.hasSpecialVisual){var i=qn.findPieceIndex(n,e),r=e[i];if(r&&r.visual)return r.visual[this.type]}}function Ktt(n,t){return n.visual=t,n.type==="color"&&(n.parsedVisual=ct(t,function(e){var i=qo(e);return i||[0,0,0,1]})),t}var z1t={linear:function(n){return qe(n,this.option.dataExtent,[0,1],!0)},piecewise:function(n){var t=this.option.pieceList,e=qn.findPieceIndex(n,t,!0);if(e!=null)return qe(e,[0,t.length-1],[0,1],!0)},category:function(n){var t=this.option.categories?this.option.categoryMap[n]:n;return t??Ex},fixed:dn};function NC(n,t,e){return n?t<=e:t<e}var t6=z;function e6(n){if(n){for(var t in n)if(n.hasOwnProperty(t))return!0}}function CD(n,t,e){var i={};return t6(t,function(o){var a=i[o]=r();t6(n[o],function(s,l){if(qn.isValidType(l)){var h={type:l,visual:s};e&&e(h,o),a[l]=new qn(h),l==="opacity"&&(h=zt(h),h.type="colorAlpha",a.__hidden.__alphaForOpacity=new qn(h))}})}),i;function r(){var o=function(){};o.prototype.__hidden=o.prototype;var a=new o;return a}}function Ztt(n,t,e){var i;z(e,function(r){t.hasOwnProperty(r)&&e6(t[r])&&(i=!0)}),i&&z(e,function(r){t.hasOwnProperty(r)&&e6(t[r])?n[r]=zt(t[r]):delete n[r]})}function F1t(n,t,e,i,r,o){var a={};z(n,function(d){var c=qn.prepareVisualTypes(t[d]);a[d]=c});var s;function l(d){return hz(e,s,d)}function h(d,c){IJ(e,s,d,c)}e.each(u);function u(d,c){s=d;var f=e.getRawDataItem(s);if(!(f&&f.visualMap===!1))for(var g=i.call(r,d),p=t[g],v=a[g],m=0,y=v.length;m<y;m++){var b=v[m];p[b]&&p[b].applyVisual(d,l,h)}}}function N1t(n,t,e,i){var r={};return z(n,function(o){var a=qn.prepareVisualTypes(t[o]);r[o]=a}),{progress:function(a,s){var l;i!=null&&(l=s.getDimensionIndex(i));function h(w){return hz(s,d,w)}function u(w,C){IJ(s,d,w,C)}for(var d,c=s.getStore();(d=a.next())!=null;){var f=s.getRawDataItem(d);if(!(f&&f.visualMap===!1))for(var g=i!=null?c.get(l,d):d,p=e(g),v=t[p],m=r[p],y=0,b=m.length;y<b;y++){var _=m[y];v[_]&&v[_].applyVisual(g,h,u)}}}}}function W1t(n){var t=n.brushType,e={point:function(i){return i6[t].point(i,e,n)},rect:function(i){return i6[t].rect(i,e,n)}};return e}var i6={lineX:n6(0),lineY:n6(1),rect:{point:function(n,t,e){return n&&e.boundingRect.contain(n[0],n[1])},rect:function(n,t,e){return n&&e.boundingRect.intersect(n)}},polygon:{point:function(n,t,e){return n&&e.boundingRect.contain(n[0],n[1])&&Cc(e.range,n[0],n[1])},rect:function(n,t,e){var i=e.range;if(!n||i.length<=1)return!1;var r=n.x,o=n.y,a=n.width,s=n.height,l=i[0];if(Cc(i,r,o)||Cc(i,r+a,o)||Cc(i,r,o+s)||Cc(i,r+a,o+s)||te.create(n).contain(l[0],l[1])||v0(r,o,r+a,o,i)||v0(r,o,r,o+s,i)||v0(r+a,o,r+a,o+s,i)||v0(r,o+s,r+a,o+s,i))return!0}}};function n6(n){var t=["x","y"],e=["width","height"];return{point:function(i,r,o){if(i){var a=o.range,s=i[n];return Fm(s,a)}},rect:function(i,r,o){if(i){var a=o.range,s=[i[t[n]],i[t[n]]+i[e[n]]];return s[1]<s[0]&&s.reverse(),Fm(s[0],a)||Fm(s[1],a)||Fm(a[0],s)||Fm(a[1],s)}}}}function Fm(n,t){return t[0]<=n&&n<=t[1]}var r6=["inBrush","outOfBrush"],kP="__ecBrushSelect",wD="__ecInBrushSelectEvent";function Jtt(n){n.eachComponent({mainType:"brush"},function(t){var e=t.brushTargetManager=new Xz(t.option,n);e.setInputRanges(t.areas,n)})}function V1t(n,t,e){var i=[],r,o;n.eachComponent({mainType:"brush"},function(a){e&&e.type==="takeGlobalCursor"&&a.setBrushOption(e.key==="brush"?e.brushOption:{brushType:!1})}),Jtt(n),n.eachComponent({mainType:"brush"},function(a,s){var l={brushId:a.id,brushIndex:s,brushName:a.name,areas:zt(a.areas),selected:[]};i.push(l);var h=a.option,u=h.brushLink,d=[],c=[],f=[],g=!1;s||(r=h.throttleType,o=h.throttleDelay);var p=ct(a.areas,function(w){var C=U1t[w.brushType],x=Ot({boundingRect:C?C(w):void 0},w);return x.selectors=W1t(x),x}),v=CD(a.option,r6,function(w){w.mappingMethod="fixed"});ut(u)&&z(u,function(w){d[w]=1});function m(w){return u==="all"||!!d[w]}function y(w){return!!w.length}n.eachSeries(function(w,C){var x=f[C]=[];w.subType==="parallel"?b(w,C):_(w,C,x)});function b(w,C){var x=w.coordinateSystem;g=g||x.hasAxisBrushed(),m(C)&&x.eachActiveState(w.getData(),function(S,A){S==="active"&&(c[A]=1)})}function _(w,C,x){if(!(!w.brushSelector||j1t(a,C))&&(z(p,function(A){a.brushTargetManager.controlSeries(A,w,n)&&x.push(A),g=g||y(x)}),m(C)&&y(x))){var S=w.getData();S.each(function(A){o6(w,x,S,A)&&(c[A]=1)})}}n.eachSeries(function(w,C){var x={seriesId:w.id,seriesIndex:C,seriesName:w.name,dataIndex:[]};l.selected.push(x);var S=f[C],A=w.getData(),T=m(C)?function(M){return c[M]?(x.dataIndex.push(A.getRawIndex(M)),"inBrush"):"outOfBrush"}:function(M){return o6(w,S,A,M)?(x.dataIndex.push(A.getRawIndex(M)),"inBrush"):"outOfBrush"};(m(C)?g:y(S))&&F1t(r6,v,A,T)})}),G1t(t,r,o,i,e)}function G1t(n,t,e,i,r){if(r){var o=n.getZr();if(!o[wD]){o[kP]||(o[kP]=$1t);var a=Yv(o,kP,e,t);a(n,i)}}}function $1t(n,t){if(!n.isDisposed()){var e=n.getZr();e[wD]=!0,n.dispatchAction({type:"brushSelect",batch:t}),e[wD]=!1}}function o6(n,t,e,i){for(var r=0,o=t.length;r<o;r++){var a=t[r];if(n.brushSelector(i,e,a.selectors,a))return!0}}function j1t(n,t){var e=n.option.seriesIndex;return e!=null&&e!=="all"&&(ut(e)?ee(e,t)<0:t!==e)}var U1t={rect:function(n){return a6(n.range)},polygon:function(n){for(var t,e=n.range,i=0,r=e.length;i<r;i++){t=t||[[1/0,-1/0],[1/0,-1/0]];var o=e[i];o[0]<t[0][0]&&(t[0][0]=o[0]),o[0]>t[0][1]&&(t[0][1]=o[0]),o[1]<t[1][0]&&(t[1][0]=o[1]),o[1]>t[1][1]&&(t[1][1]=o[1])}return t&&a6(t)}};function a6(n){return new te(n[0][0],n[1][0],n[0][1]-n[0][0],n[1][1]-n[1][0])}var Y1t=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(e,i){this.ecModel=e,this.api=i,this.model,(this._brushController=new Hz(i.getZr())).on("brush",xt(this._onBrush,this)).mount()},t.prototype.render=function(e,i,r,o){this.model=e,this._updateController(e,i,r,o)},t.prototype.updateTransform=function(e,i,r,o){Jtt(i),this._updateController(e,i,r,o)},t.prototype.updateVisual=function(e,i,r,o){this.updateTransform(e,i,r,o)},t.prototype.updateView=function(e,i,r,o){this._updateController(e,i,r,o)},t.prototype._updateController=function(e,i,r,o){(!o||o.$from!==e.id)&&this._brushController.setPanels(e.brushTargetManager.makePanelOpts(r)).enableBrush(e.brushOption).updateCovers(e.areas.slice())},t.prototype.dispose=function(){this._brushController.dispose()},t.prototype._onBrush=function(e){var i=this.model.id,r=this.model.brushTargetManager.setOutputRanges(e.areas,this.ecModel);(!e.isEnd||e.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:i,areas:zt(r),$from:i}),e.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:i,areas:zt(r),$from:i})},t.type="brush",t})(Di),X1t="#ddd",q1t=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e.areas=[],e.brushOption={},e}return t.prototype.optionUpdated=function(e,i){var r=this.option;!i&&Ztt(r,e,["inBrush","outOfBrush"]);var o=r.inBrush=r.inBrush||{};r.outOfBrush=r.outOfBrush||{color:X1t},o.hasOwnProperty("liftZ")||(o.liftZ=5)},t.prototype.setAreas=function(e){e&&(this.areas=ct(e,function(i){return s6(this.option,i)},this))},t.prototype.setBrushOption=function(e){this.brushOption=s6(this.option,e),this.brushType=this.brushOption.brushType},t.type="brush",t.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],t.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},t})(ge);function s6(n,t){return Zt({brushType:n.brushType,brushMode:n.brushMode,transformable:n.transformable,brushStyle:new Ze(n.brushStyle).getItemStyle(),removeOnClick:n.removeOnClick,z:n.z},t,!0)}var K1t=["rect","polygon","lineX","lineY","keep","clear"],Z1t=(function(n){et(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.render=function(e,i,r){var o,a,s;i.eachComponent({mainType:"brush"},function(l){o=l.brushType,a=l.brushOption.brushMode||"single",s=s||!!l.areas.length}),this._brushType=o,this._brushMode=a,z(e.get("type",!0),function(l){e.setIconStatus(l,(l==="keep"?a==="multiple":l==="clear"?s:l===o)?"emphasis":"normal")})},t.prototype.updateView=function(e,i,r){this.render(e,i,r)},t.prototype.getIcons=function(){var e=this.model,i=e.get("icon",!0),r={};return z(e.get("type",!0),function(o){i[o]&&(r[o]=i[o])}),r},t.prototype.onclick=function(e,i,r){var o=this._brushType,a=this._brushMode;r==="clear"?(i.dispatchAction({type:"axisAreaSelect",intervals:[]}),i.dispatchAction({type:"brush",command:"clear",areas:[]})):i.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:r==="keep"?o:o===r?!1:r,brushMode:r==="keep"?a==="multiple"?"single":"multiple":a}})},t.getDefaultOption=function(e){var i={show:!0,type:K1t.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:e.getLocaleModel().get(["toolbox","brush","title"])};return i},t})(Ba);function J1t(n){n.registerComponentView(Y1t),n.registerComponentModel(q1t),n.registerPreprocessor(E1t),n.registerVisual(n.PRIORITY.VISUAL.BRUSH,V1t),n.registerAction({type:"brush",event:"brush",update:"updateVisual"},function(t,e){e.eachComponent({mainType:"brush",query:t},function(i){i.setAreas(t.areas)})}),n.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},dn),n.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},dn),Zg("brush",Z1t)}var Q1t=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e.layoutMode={type:"box",ignoreSize:!0},e}return t.type="title",t.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},t})(ge),twt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,i,r){if(this.group.removeAll(),!!e.get("show")){var o=this.group,a=e.getModel("textStyle"),s=e.getModel("subtextStyle"),l=e.get("textAlign"),h=Yt(e.get("textBaseline"),e.get("textVerticalAlign")),u=new Re({style:_i(a,{text:e.get("text"),fill:a.getTextColor()},{disableBox:!0}),z2:10}),d=u.getBoundingRect(),c=e.get("subtext"),f=new Re({style:_i(s,{text:c,fill:s.getTextColor(),y:d.height+e.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),g=e.get("link"),p=e.get("sublink"),v=e.get("triggerEvent",!0);u.silent=!g&&!v,f.silent=!p&&!v,g&&u.on("click",function(){gx(g,"_"+e.get("target"))}),p&&f.on("click",function(){gx(p,"_"+e.get("subtarget"))}),Vt(u).eventData=Vt(f).eventData=v?{componentType:"title",componentIndex:e.componentIndex}:null,o.add(u),c&&o.add(f);var m=o.getBoundingRect(),y=e.getBoxLayoutParams();y.width=m.width,y.height=m.height;var b=Vn(y,{width:r.getWidth(),height:r.getHeight()},e.get("padding"));l||(l=e.get("left")||e.get("right"),l==="middle"&&(l="center"),l==="right"?b.x+=b.width:l==="center"&&(b.x+=b.width/2)),h||(h=e.get("top")||e.get("bottom"),h==="center"&&(h="middle"),h==="bottom"?b.y+=b.height:h==="middle"&&(b.y+=b.height/2),h=h||"top"),o.x=b.x,o.y=b.y,o.markRedraw();var _={align:l,verticalAlign:h};u.setStyle(_),f.setStyle(_),m=o.getBoundingRect();var w=b.margin,C=e.getItemStyle(["color","opacity"]);C.fill=e.get("backgroundColor");var x=new Ae({shape:{x:m.x-w[3],y:m.y-w[0],width:m.width+w[1]+w[3],height:m.height+w[0]+w[2],r:e.get("borderRadius")},style:C,subPixelOptimize:!0,silent:!0});o.add(x)}},t.type="title",t})(Di);function ewt(n){n.registerComponentModel(Q1t),n.registerComponentView(twt)}var l6=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e.layoutMode="box",e}return t.prototype.init=function(e,i,r){this.mergeDefaultAndTheme(e,r),this._initData()},t.prototype.mergeOption=function(e){n.prototype.mergeOption.apply(this,arguments),this._initData()},t.prototype.setCurrentIndex=function(e){e==null&&(e=this.option.currentIndex);var i=this._data.count();this.option.loop?e=(e%i+i)%i:(e>=i&&(e=i-1),e<0&&(e=0)),this.option.currentIndex=e},t.prototype.getCurrentIndex=function(){return this.option.currentIndex},t.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},t.prototype.setPlayState=function(e){this.option.autoPlay=!!e},t.prototype.getPlayState=function(){return!!this.option.autoPlay},t.prototype._initData=function(){var e=this.option,i=e.data||[],r=e.axisType,o=this._names=[],a;r==="category"?(a=[],z(i,function(h,u){var d=Fn(zv(h),""),c;Ht(h)?(c=zt(h),c.value=u):c=u,a.push(c),o.push(d)})):a=i;var s={category:"ordinal",time:"time",value:"number"}[r]||"number",l=this._data=new oo([{name:"value",type:s}],this);l.initData(a,o)},t.prototype.getData=function(){return this._data},t.prototype.getCategories=function(){if(this.get("axisType")==="category")return this._names.slice()},t.type="timeline",t.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},t})(ge),Qtt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.type="timeline.slider",t.defaultOption=yd(l6.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),t})(l6);In(Qtt,iM.prototype);var iwt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.type="timeline",t})(Di),nwt=(function(n){et(t,n);function t(e,i,r,o){var a=n.call(this,e,i,r)||this;return a.type=o||"value",a}return t.prototype.getLabelModel=function(){return this.model.getModel("label")},t.prototype.isHorizontal=function(){return this.model.get("orient")==="horizontal"},t})(Ds),LP=Math.PI,h6=Te(),rwt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(e,i){this.api=i},t.prototype.render=function(e,i,r){if(this.model=e,this.api=r,this.ecModel=i,this.group.removeAll(),e.get("show",!0)){var o=this._layout(e,r),a=this._createGroup("_mainGroup"),s=this._createGroup("_labelGroup"),l=this._axis=this._createAxis(o,e);e.formatTooltip=function(h){var u=l.scale.getLabel({value:h});return Jn("nameValue",{noName:!0,value:u})},z(["AxisLine","AxisTick","Control","CurrentPointer"],function(h){this["_render"+h](o,a,l,e)},this),this._renderAxisLabel(o,s,l,e),this._position(o,e)}this._doPlayStop(),this._updateTicksStatus()},t.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},t.prototype.dispose=function(){this._clearTimer()},t.prototype._layout=function(e,i){var r=e.get(["label","position"]),o=e.get("orient"),a=awt(e,i),s;r==null||r==="auto"?s=o==="horizontal"?a.y+a.height/2<i.getHeight()/2?"-":"+":a.x+a.width/2<i.getWidth()/2?"+":"-":Ct(r)?s={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[o][r]:s=r;var l={horizontal:"center",vertical:s>=0||s==="+"?"left":"right"},h={horizontal:s>=0||s==="+"?"top":"bottom",vertical:"middle"},u={horizontal:0,vertical:LP/2},d=o==="vertical"?a.height:a.width,c=e.getModel("controlStyle"),f=c.get("show",!0),g=f?c.get("itemSize"):0,p=f?c.get("itemGap"):0,v=g+p,m=e.get(["label","rotate"])||0;m=m*LP/180;var y,b,_,w=c.get("position",!0),C=f&&c.get("showPlayBtn",!0),x=f&&c.get("showPrevBtn",!0),S=f&&c.get("showNextBtn",!0),A=0,T=d;w==="left"||w==="bottom"?(C&&(y=[0,0],A+=v),x&&(b=[A,0],A+=v),S&&(_=[T-g,0],T-=v)):(C&&(y=[T-g,0],T-=v),x&&(b=[0,0],A+=v),S&&(_=[T-g,0],T-=v));var M=[A,T];return e.get("inverse")&&M.reverse(),{viewRect:a,mainLength:d,orient:o,rotation:u[o],labelRotation:m,labelPosOpt:s,labelAlign:e.get(["label","align"])||l[o],labelBaseline:e.get(["label","verticalAlign"])||e.get(["label","baseline"])||h[o],playPosition:y,prevBtnPosition:b,nextBtnPosition:_,axisExtent:M,controlSize:g,controlGap:p}},t.prototype._position=function(e,i){var r=this._mainGroup,o=this._labelGroup,a=e.viewRect;if(e.orient==="vertical"){var s=Xo(),l=a.x,h=a.y+a.height;xl(s,s,[-l,-h]),qf(s,s,-LP/2),xl(s,s,[l,h]),a=a.clone(),a.applyTransform(s)}var u=y(a),d=y(r.getBoundingRect()),c=y(o.getBoundingRect()),f=[r.x,r.y],g=[o.x,o.y];g[0]=f[0]=u[0][0];var p=e.labelPosOpt;if(p==null||Ct(p)){var v=p==="+"?0:1;b(f,d,u,1,v),b(g,c,u,1,1-v)}else{var v=p>=0?0:1;b(f,d,u,1,v),g[1]=f[1]+p}r.setPosition(f),o.setPosition(g),r.rotation=o.rotation=e.rotation,m(r),m(o);function m(_){_.originX=u[0][0]-_.x,_.originY=u[1][0]-_.y}function y(_){return[[_.x,_.x+_.width],[_.y,_.y+_.height]]}function b(_,w,C,x,S){_[x]+=C[x][S]-w[x][S]}},t.prototype._createAxis=function(e,i){var r=i.getData(),o=i.get("axisType"),a=owt(i,o);a.getTicks=function(){return r.mapArray(["value"],function(h){return{value:h}})};var s=r.getDataExtent("value");a.setExtent(s[0],s[1]),a.calcNiceTicks();var l=new nwt("value",a,e.axisExtent,o);return l.model=i,l},t.prototype._createGroup=function(e){var i=this[e]=new Ft;return this.group.add(i),i},t.prototype._renderAxisLine=function(e,i,r,o){var a=r.getExtent();if(o.get(["lineStyle","show"])){var s=new Un({shape:{x1:a[0],y1:0,x2:a[1],y2:0},style:ht({lineCap:"round"},o.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});i.add(s);var l=this._progressLine=new Un({shape:{x1:a[0],x2:this._currentPointer?this._currentPointer.x:a[0],y1:0,y2:0},style:Ot({lineCap:"round",lineWidth:s.style.lineWidth},o.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});i.add(l)}},t.prototype._renderAxisTick=function(e,i,r,o){var a=this,s=o.getData(),l=r.scale.getTicks();this._tickSymbols=[],z(l,function(h){var u=r.dataToCoord(h.value),d=s.getItemModel(h.value),c=d.getModel("itemStyle"),f=d.getModel(["emphasis","itemStyle"]),g=d.getModel(["progress","itemStyle"]),p={x:u,y:0,onclick:xt(a._changeTimeline,a,h.value)},v=u6(d,c,i,p);v.ensureState("emphasis").style=f.getItemStyle(),v.ensureState("progress").style=g.getItemStyle(),af(v);var m=Vt(v);d.get("tooltip")?(m.dataIndex=h.value,m.dataModel=o):m.dataIndex=m.dataModel=null,a._tickSymbols.push(v)})},t.prototype._renderAxisLabel=function(e,i,r,o){var a=this,s=r.getLabelModel();if(s.get("show")){var l=o.getData(),h=r.getViewLabels();this._tickLabels=[],z(h,function(u){var d=u.tickValue,c=l.getItemModel(d),f=c.getModel("label"),g=c.getModel(["emphasis","label"]),p=c.getModel(["progress","label"]),v=r.dataToCoord(u.tickValue),m=new Re({x:v,y:0,rotation:e.labelRotation-e.rotation,onclick:xt(a._changeTimeline,a,d),silent:!1,style:_i(f,{text:u.formattedLabel,align:e.labelAlign,verticalAlign:e.labelBaseline})});m.ensureState("emphasis").style=_i(g),m.ensureState("progress").style=_i(p),i.add(m),af(m),h6(m).dataIndex=d,a._tickLabels.push(m)})}},t.prototype._renderControl=function(e,i,r,o){var a=e.controlSize,s=e.rotation,l=o.getModel("controlStyle").getItemStyle(),h=o.getModel(["emphasis","controlStyle"]).getItemStyle(),u=o.getPlayState(),d=o.get("inverse",!0);c(e.nextBtnPosition,"next",xt(this._changeTimeline,this,d?"-":"+")),c(e.prevBtnPosition,"prev",xt(this._changeTimeline,this,d?"+":"-")),c(e.playPosition,u?"stop":"play",xt(this._handlePlayClick,this,!u),!0);function c(f,g,p,v){if(f){var m=Ss(Yt(o.get(["controlStyle",g+"BtnSize"]),a),a),y=[0,-m/2,m,m],b=swt(o,g+"Icon",y,{x:f[0],y:f[1],originX:a/2,originY:0,rotation:v?-s:0,rectHover:!0,style:l,onclick:p});b.ensureState("emphasis").style=h,i.add(b),af(b)}}},t.prototype._renderCurrentPointer=function(e,i,r,o){var a=o.getData(),s=o.getCurrentIndex(),l=a.getItemModel(s).getModel("checkpointStyle"),h=this,u={onCreate:function(d){d.draggable=!0,d.drift=xt(h._handlePointerDrag,h),d.ondragend=xt(h._handlePointerDragend,h),d6(d,h._progressLine,s,r,o,!0)},onUpdate:function(d){d6(d,h._progressLine,s,r,o)}};this._currentPointer=u6(l,l,this._mainGroup,{},this._currentPointer,u)},t.prototype._handlePlayClick=function(e){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:e,from:this.uid})},t.prototype._handlePointerDrag=function(e,i,r){this._clearTimer(),this._pointerChangeTimeline([r.offsetX,r.offsetY])},t.prototype._handlePointerDragend=function(e){this._pointerChangeTimeline([e.offsetX,e.offsetY],!0)},t.prototype._pointerChangeTimeline=function(e,i){var r=this._toAxisCoord(e)[0],o=this._axis,a=Ha(o.getExtent().slice());r>a[1]&&(r=a[1]),r<a[0]&&(r=a[0]),this._currentPointer.x=r,this._currentPointer.markRedraw();var s=this._progressLine;s&&(s.shape.x2=r,s.dirty());var l=this._findNearestTick(r),h=this.model;(i||l!==h.getCurrentIndex()&&h.get("realtime"))&&this._changeTimeline(l)},t.prototype._doPlayStop=function(){var e=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var i=e.model;e._changeTimeline(i.getCurrentIndex()+(i.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},t.prototype._toAxisCoord=function(e){var i=this._mainGroup.getLocalTransform();return bs(e,i,!0)},t.prototype._findNearestTick=function(e){var i=this.model.getData(),r=1/0,o,a=this._axis;return i.each(["value"],function(s,l){var h=a.dataToCoord(s),u=Math.abs(h-e);u<r&&(r=u,o=l)}),o},t.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},t.prototype._changeTimeline=function(e){var i=this.model.getCurrentIndex();e==="+"?e=i+1:e==="-"&&(e=i-1),this.api.dispatchAction({type:"timelineChange",currentIndex:e,from:this.uid})},t.prototype._updateTicksStatus=function(){var e=this.model.getCurrentIndex(),i=this._tickSymbols,r=this._tickLabels;if(i)for(var o=0;o<i.length;o++)i&&i[o]&&i[o].toggleState("progress",o<e);if(r)for(var o=0;o<r.length;o++)r&&r[o]&&r[o].toggleState("progress",h6(r[o]).dataIndex<=e)},t.type="timeline.slider",t})(iwt);function owt(n,t){if(t=t||n.get("type"),t)switch(t){case"category":return new lM({ordinalMeta:n.getCategories(),extent:[1/0,-1/0]});case"time":return new mz({locale:n.ecModel.getLocaleModel(),useUTC:n.ecModel.get("useUTC")});default:return new Ih}}function awt(n,t){return Vn(n.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()},n.get("padding"))}function swt(n,t,e,i){var r=i.style,o=s_(n.get(["controlStyle",t]),i||{},new te(e[0],e[1],e[2],e[3]));return r&&o.setStyle(r),o}function u6(n,t,e,i,r,o){var a=t.get("color");if(r)r.setColor(a),e.add(r),o&&o.onUpdate(r);else{var s=n.get("symbol");r=En(s,-1,-1,2,2,a),r.setStyle("strokeNoScale",!0),e.add(r),o&&o.onCreate(r)}var l=t.getItemStyle(["color"]);r.setStyle(l),i=Zt({rectHover:!0,z2:100},i,!0);var h=Xv(n.get("symbolSize"));i.scaleX=h[0]/2,i.scaleY=h[1]/2;var u=Jf(n.get("symbolOffset"),h);u&&(i.x=(i.x||0)+u[0],i.y=(i.y||0)+u[1]);var d=n.get("symbolRotate");return i.rotation=(d||0)*Math.PI/180||0,r.attr(i),r.updateTransform(),r}function d6(n,t,e,i,r,o){if(!n.dragging){var a=r.getModel("checkpointStyle"),s=i.dataToCoord(r.getData().get("value",e));if(o||!a.get("animation",!0))n.attr({x:s,y:0}),t&&t.attr({shape:{x2:s}});else{var l={duration:a.get("animationDuration",!0),easing:a.get("animationEasing",!0)};n.stopAnimation(null,!0),n.animateTo({x:s,y:0},l),t&&t.animateTo({shape:{x2:s}},l)}}}function lwt(n){n.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(t,e,i){var r=e.getComponent("timeline");return r&&t.currentIndex!=null&&(r.setCurrentIndex(t.currentIndex),!r.get("loop",!0)&&r.isIndexMax()&&r.getPlayState()&&(r.setPlayState(!1),i.dispatchAction({type:"timelinePlayChange",playState:!1,from:t.from}))),e.resetOption("timeline",{replaceMerge:r.get("replaceMerge",!0)}),Ot({currentIndex:r.option.currentIndex},t)}),n.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(t,e){var i=e.getComponent("timeline");i&&t.playState!=null&&i.setPlayState(t.playState)})}function hwt(n){var t=n&&n.timeline;ut(t)||(t=t?[t]:[]),z(t,function(e){e&&uwt(e)})}function uwt(n){var t=n.type,e={number:"value",time:"time"};if(e[t]&&(n.axisType=e[t],delete n.type),c6(n),xc(n,"controlPosition")){var i=n.controlStyle||(n.controlStyle={});xc(i,"position")||(i.position=n.controlPosition),i.position==="none"&&!xc(i,"show")&&(i.show=!1,delete i.position),delete n.controlPosition}z(n.data||[],function(r){Ht(r)&&!ut(r)&&(!xc(r,"value")&&xc(r,"name")&&(r.value=r.name),c6(r))})}function c6(n){var t=n.itemStyle||(n.itemStyle={}),e=t.emphasis||(t.emphasis={}),i=n.label||n.label||{},r=i.normal||(i.normal={}),o={normal:1,emphasis:1};z(i,function(a,s){!o[s]&&!xc(r,s)&&(r[s]=a)}),e.label&&!xc(i,"emphasis")&&(i.emphasis=e.label,delete e.label)}function xc(n,t){return n.hasOwnProperty(t)}function dwt(n){n.registerComponentModel(Qtt),n.registerComponentView(rwt),n.registerSubTypeDefaulter("timeline",function(){return"slider"}),lwt(n),n.registerPreprocessor(hwt)}function Zz(n,t){if(!n)return!1;for(var e=ut(n)?n:[n],i=0;i<e.length;i++)if(e[i]&&e[i][t])return!0;return!1}function WC(n){xf(n,"label",["show"])}var VC=Te(),Hh=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e.createdBySelf=!1,e}return t.prototype.init=function(e,i,r){this.mergeDefaultAndTheme(e,r),this._mergeOption(e,r,!1,!0)},t.prototype.isAnimationEnabled=function(){if(ce.node)return!1;var e=this.__hostSeries;return this.getShallow("animation")&&e&&e.isAnimationEnabled()},t.prototype.mergeOption=function(e,i){this._mergeOption(e,i,!1,!1)},t.prototype._mergeOption=function(e,i,r,o){var a=this.mainType;r||i.eachSeries(function(s){var l=s.get(this.mainType,!0),h=VC(s)[a];if(!l||!l.data){VC(s)[a]=null;return}h?h._mergeOption(l,i,!0):(o&&WC(l),z(l.data,function(u){u instanceof Array?(WC(u[0]),WC(u[1])):WC(u)}),h=this.createMarkerModelFromSeries(l,this,i),ht(h,{mainType:this.mainType,seriesIndex:s.seriesIndex,name:s.name,createdBySelf:!0}),h.__hostSeries=s),VC(s)[a]=h},this)},t.prototype.formatTooltip=function(e,i,r){var o=this.getData(),a=this.getRawValue(e),s=o.getName(e);return Jn("section",{header:this.name,blocks:[Jn("nameValue",{name:s,value:a,noName:!s,noValue:a==null})]})},t.prototype.getData=function(){return this._data},t.prototype.setData=function(e){this._data=e},t.prototype.getDataParams=function(e,i){var r=iM.prototype.getDataParams.call(this,e,i),o=this.__hostSeries;return o&&(r.seriesId=o.id,r.seriesName=o.name,r.seriesType=o.subType),r},t.getMarkerModelFromSeries=function(e,i){return VC(e)[i]},t.type="marker",t.dependencies=["series","grid","polar","geo"],t})(ge);In(Hh,iM.prototype);var cwt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.createMarkerModelFromSeries=function(e,i,r){return new t(e,i,r)},t.type="markPoint",t.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},t})(Hh);function Jp(n,t){var e=n.mapDimensionsAll("defaultedLabel"),i=e.length;if(i===1){var r=jp(n,t,e[0]);return r!=null?r+"":null}else if(i){for(var o=[],a=0;a<e.length;a++)o.push(jp(n,t,e[a]));return o.join(" ")}}function tet(n,t){var e=n.mapDimensionsAll("defaultedLabel");if(!ut(t))return t+"";for(var i=[],r=0;r<e.length;r++){var o=n.getDimensionIndex(e[r]);o>=0&&i.push(t[o])}return i.join(" ")}var p_=(function(n){et(t,n);function t(e,i,r,o){var a=n.call(this)||this;return a.updateData(e,i,r,o),a}return t.prototype._createSymbol=function(e,i,r,o,a){this.removeAll();var s=En(e,-1,-1,2,2,null,a);s.attr({z2:100,culling:!0,scaleX:o[0]/2,scaleY:o[1]/2}),s.drift=fwt,this._symbolType=e,this.add(s)},t.prototype.stopSymbolAnimation=function(e){this.childAt(0).stopAnimation(null,e)},t.prototype.getSymbolType=function(){return this._symbolType},t.prototype.getSymbolPath=function(){return this.childAt(0)},t.prototype.highlight=function(){Lh(this.childAt(0))},t.prototype.downplay=function(){Eh(this.childAt(0))},t.prototype.setZ=function(e,i){var r=this.childAt(0);r.zlevel=e,r.z=i},t.prototype.setDraggable=function(e,i){var r=this.childAt(0);r.draggable=e,r.cursor=!i&&e?"move":r.cursor},t.prototype.updateData=function(e,i,r,o){this.silent=!1;var a=e.getItemVisual(i,"symbol")||"circle",s=e.hostModel,l=t.getSymbolSize(e,i),h=a!==this._symbolType,u=o&&o.disableAnimation;if(h){var d=e.getItemVisual(i,"symbolKeepAspect");this._createSymbol(a,e,i,l,d)}else{var c=this.childAt(0);c.silent=!1;var f={scaleX:l[0]/2,scaleY:l[1]/2};u?c.attr(f):Ie(c,f,s,i),As(c)}if(this._updateCommon(e,i,l,r,o),h){var c=this.childAt(0);if(!u){var f={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:c.style.opacity}};c.scaleX=c.scaleY=0,c.style.opacity=0,Bi(c,f,s,i)}}u&&this.childAt(0).stopAnimation("leave")},t.prototype._updateCommon=function(e,i,r,o,a){var s=this.childAt(0),l=e.hostModel,h,u,d,c,f,g,p,v,m;if(o&&(h=o.emphasisItemStyle,u=o.blurItemStyle,d=o.selectItemStyle,c=o.focus,f=o.blurScope,p=o.labelStatesModels,v=o.hoverScale,m=o.cursorStyle,g=o.emphasisDisabled),!o||e.hasItemOption){var y=o&&o.itemModel?o.itemModel:e.getItemModel(i),b=y.getModel("emphasis");h=b.getModel("itemStyle").getItemStyle(),d=y.getModel(["select","itemStyle"]).getItemStyle(),u=y.getModel(["blur","itemStyle"]).getItemStyle(),c=b.get("focus"),f=b.get("blurScope"),g=b.get("disabled"),p=Zn(y),v=b.getShallow("scale"),m=y.getShallow("cursor")}var _=e.getItemVisual(i,"symbolRotate");s.attr("rotation",(_||0)*Math.PI/180||0);var w=Jf(e.getItemVisual(i,"symbolOffset"),r);w&&(s.x=w[0],s.y=w[1]),m&&s.attr("cursor",m);var C=e.getItemVisual(i,"style"),x=C.fill;if(s instanceof hr){var S=s.style;s.useStyle(ht({image:S.image,x:S.x,y:S.y,width:S.width,height:S.height},C))}else s.__isEmptyBrush?s.useStyle(ht({},C)):s.useStyle(C),s.style.decal=null,s.setColor(x,a&&a.symbolInnerColor),s.style.strokeNoScale=!0;var A=e.getItemVisual(i,"liftZ"),T=this._z2;A!=null?T==null&&(this._z2=s.z2,s.z2+=A):T!=null&&(s.z2=T,this._z2=null);var M=a&&a.useNameLabel;Tr(s,p,{labelFetcher:l,labelDataIndex:i,defaultText:R,inheritColor:x,defaultOpacity:C.opacity});function R(P){return M?e.getName(P):Jp(e,P)}this._sizeX=r[0]/2,this._sizeY=r[1]/2;var L=s.ensureState("emphasis");L.style=h,s.ensureState("select").style=d,s.ensureState("blur").style=u;var B=v==null||v===!0?Math.max(1.1,3/this._sizeY):isFinite(v)&&v>0?+v:1;L.scaleX=this._sizeX*B,L.scaleY=this._sizeY*B,this.setSymbolScale(1),Gi(this,c,f,g)},t.prototype.setSymbolScale=function(e){this.scaleX=this.scaleY=e},t.prototype.fadeOut=function(e,i,r){var o=this.childAt(0),a=Vt(this).dataIndex,s=r&&r.animation;if(this.silent=o.silent=!0,r&&r.fadeLabel){var l=o.getTextContent();l&&td(l,{style:{opacity:0}},i,{dataIndex:a,removeOpt:s,cb:function(){o.removeTextContent()}})}else o.removeTextContent();td(o,{style:{opacity:0},scaleX:0,scaleY:0},i,{dataIndex:a,cb:e,removeOpt:s})},t.getSymbolSize=function(e,i){return Xv(e.getItemVisual(i,"symbolSize"))},t})(Ft);function fwt(n,t){this.parent.drift(n,t)}function EP(n,t,e,i){return t&&!isNaN(t[0])&&!isNaN(t[1])&&!(i.isIgnore&&i.isIgnore(e))&&!(i.clipShape&&!i.clipShape.contain(t[0],t[1]))&&n.getItemVisual(e,"symbol")!=="none"}function f6(n){return n!=null&&!Ht(n)&&(n={isIgnore:n}),n||{}}function g6(n){var t=n.hostModel,e=t.getModel("emphasis");return{emphasisItemStyle:e.getModel("itemStyle").getItemStyle(),blurItemStyle:t.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:t.getModel(["select","itemStyle"]).getItemStyle(),focus:e.get("focus"),blurScope:e.get("blurScope"),emphasisDisabled:e.get("disabled"),hoverScale:e.get("scale"),labelStatesModels:Zn(t),cursorStyle:t.get("cursor")}}var v_=(function(){function n(t){this.group=new Ft,this._SymbolCtor=t||p_}return n.prototype.updateData=function(t,e){this._progressiveEls=null,e=f6(e);var i=this.group,r=t.hostModel,o=this._data,a=this._SymbolCtor,s=e.disableAnimation,l=g6(t),h={disableAnimation:s},u=e.getSymbolPoint||function(d){return t.getItemLayout(d)};o||i.removeAll(),t.diff(o).add(function(d){var c=u(d);if(EP(t,c,d,e)){var f=new a(t,d,l,h);f.setPosition(c),t.setItemGraphicEl(d,f),i.add(f)}}).update(function(d,c){var f=o.getItemGraphicEl(c),g=u(d);if(!EP(t,g,d,e)){i.remove(f);return}var p=t.getItemVisual(d,"symbol")||"circle",v=f&&f.getSymbolType&&f.getSymbolType();if(!f||v&&v!==p)i.remove(f),f=new a(t,d,l,h),f.setPosition(g);else{f.updateData(t,d,l,h);var m={x:g[0],y:g[1]};s?f.attr(m):Ie(f,m,r)}i.add(f),t.setItemGraphicEl(d,f)}).remove(function(d){var c=o.getItemGraphicEl(d);c&&c.fadeOut(function(){i.remove(c)},r)}).execute(),this._getSymbolPoint=u,this._data=t},n.prototype.updateLayout=function(){var t=this,e=this._data;e&&e.eachItemGraphicEl(function(i,r){var o=t._getSymbolPoint(r);i.setPosition(o),i.markRedraw()})},n.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=g6(t),this._data=null,this.group.removeAll()},n.prototype.incrementalUpdate=function(t,e,i){this._progressiveEls=[],i=f6(i);function r(l){l.isGroup||(l.incremental=!0,l.ensureState("emphasis").hoverLayer=!0)}for(var o=t.start;o<t.end;o++){var a=e.getItemLayout(o);if(EP(e,a,o,i)){var s=new this._SymbolCtor(e,o,this._seriesScope);s.traverse(r),s.setPosition(a),this.group.add(s),e.setItemGraphicEl(o,s),this._progressiveEls.push(s)}}},n.prototype.eachRendered=function(t){md(this._progressiveEls||this.group,t)},n.prototype.remove=function(t){var e=this.group,i=this._data;i&&t?i.eachItemGraphicEl(function(r){r.fadeOut(function(){e.remove(r)},i.hostModel)}):e.removeAll()},n})();function xD(n){return!(isNaN(parseFloat(n.x))&&isNaN(parseFloat(n.y)))}function gwt(n){return!isNaN(parseFloat(n.x))&&!isNaN(parseFloat(n.y))}function GC(n,t,e,i,r,o){var a=[],s=id(t,i),l=s?t.getCalculationInfo("stackResultDimension"):i,h=Jz(t,l,n),u=t.indicesOfNearest(l,h)[0];a[r]=t.get(e,u),a[o]=t.get(l,u);var d=t.get(i,u),c=ll(t.get(i,u));return c=Math.min(c,20),c>=0&&(a[o]=+a[o].toFixed(c)),[a,d]}var DP={min:qt(GC,"min"),max:qt(GC,"max"),average:qt(GC,"average"),median:qt(GC,"median")};function Zy(n,t){if(t){var e=n.getData(),i=n.coordinateSystem,r=i&&i.dimensions;if(!gwt(t)&&!ut(t.coord)&&ut(r)){var o=eet(t,e,i,n);if(t=zt(t),t.type&&DP[t.type]&&o.baseAxis&&o.valueAxis){var a=ee(r,o.baseAxis.dim),s=ee(r,o.valueAxis.dim),l=DP[t.type](e,o.baseDataDim,o.valueDataDim,a,s);t.coord=l[0],t.value=l[1]}else t.coord=[t.xAxis!=null?t.xAxis:t.radiusAxis,t.yAxis!=null?t.yAxis:t.angleAxis]}if(t.coord==null||!ut(r))t.coord=[];else for(var h=t.coord,u=0;u<2;u++)DP[h[u]]&&(h[u]=Jz(e,e.mapDimension(r[u]),h[u]));return t}}function eet(n,t,e,i){var r={};return n.valueIndex!=null||n.valueDim!=null?(r.valueDataDim=n.valueIndex!=null?t.getDimension(n.valueIndex):n.valueDim,r.valueAxis=e.getAxis(pwt(i,r.valueDataDim)),r.baseAxis=e.getOtherAxis(r.valueAxis),r.baseDataDim=t.mapDimension(r.baseAxis.dim)):(r.baseAxis=i.getBaseAxis(),r.valueAxis=e.getOtherAxis(r.baseAxis),r.baseDataDim=t.mapDimension(r.baseAxis.dim),r.valueDataDim=t.mapDimension(r.valueAxis.dim)),r}function pwt(n,t){var e=n.getData().getDimensionInfo(t);return e&&e.coordDim}function Jy(n,t){return n&&n.containData&&t.coord&&!xD(t)?n.containData(t.coord):!0}function vwt(n,t,e){return n&&n.containZone&&t.coord&&e.coord&&!xD(t)&&!xD(e)?n.containZone(t.coord,e.coord):!0}function iet(n,t){return n?function(e,i,r,o){var a=o<2?e.coord&&e.coord[o]:e.value;return Uu(a,t[o])}:function(e,i,r,o){return Uu(e.value,t[o])}}function Jz(n,t,e){if(e==="average"){var i=0,r=0;return n.each(t,function(o,a){isNaN(o)||(i+=o,r++)}),i/r}else return e==="median"?n.getMedian(t):n.getDataExtent(t)[e==="max"?1:0]}var IP=Te(),Qz=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(){this.markerGroupMap=Pt()},t.prototype.render=function(e,i,r){var o=this,a=this.markerGroupMap;a.each(function(s){IP(s).keep=!1}),i.eachSeries(function(s){var l=Hh.getMarkerModelFromSeries(s,o.type);l&&o.renderSeries(s,l,i,r)}),a.each(function(s){!IP(s).keep&&o.group.remove(s.group)})},t.prototype.markKeep=function(e){IP(e).keep=!0},t.prototype.toggleBlurSeries=function(e,i){var r=this;z(e,function(o){var a=Hh.getMarkerModelFromSeries(o,r.type);if(a){var s=a.getData();s.eachItemGraphicEl(function(l){l&&(i?hZ(l):WH(l))})}})},t.type="marker",t})(Di);function p6(n,t,e){var i=t.coordinateSystem;n.each(function(r){var o=n.getItemModel(r),a,s=mt(o.get("x"),e.getWidth()),l=mt(o.get("y"),e.getHeight());if(!isNaN(s)&&!isNaN(l))a=[s,l];else if(t.getMarkerPosition)a=t.getMarkerPosition(n.getValues(n.dimensions,r));else if(i){var h=n.get(i.dimensions[0],r),u=n.get(i.dimensions[1],r);a=i.dataToPoint([h,u])}isNaN(s)||(a[0]=s),isNaN(l)||(a[1]=l),n.setItemLayout(r,a)})}var mwt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.updateTransform=function(e,i,r){i.eachSeries(function(o){var a=Hh.getMarkerModelFromSeries(o,"markPoint");a&&(p6(a.getData(),o,r),this.markerGroupMap.get(o.id).updateLayout())},this)},t.prototype.renderSeries=function(e,i,r,o){var a=e.coordinateSystem,s=e.id,l=e.getData(),h=this.markerGroupMap,u=h.get(s)||h.set(s,new v_),d=ywt(a,e,i);i.setData(d),p6(i.getData(),e,o),d.each(function(c){var f=d.getItemModel(c),g=f.getShallow("symbol"),p=f.getShallow("symbolSize"),v=f.getShallow("symbolRotate"),m=f.getShallow("symbolOffset"),y=f.getShallow("symbolKeepAspect");if(Dt(g)||Dt(p)||Dt(v)||Dt(m)){var b=i.getRawValue(c),_=i.getDataParams(c);Dt(g)&&(g=g(b,_)),Dt(p)&&(p=p(b,_)),Dt(v)&&(v=v(b,_)),Dt(m)&&(m=m(b,_))}var w=f.getModel("itemStyle").getItemStyle(),C=h_(l,"color");w.fill||(w.fill=C),d.setItemVisual(c,{symbol:g,symbolSize:p,symbolRotate:v,symbolOffset:m,symbolKeepAspect:y,style:w})}),u.updateData(d),this.group.add(u.group),d.eachItemGraphicEl(function(c){c.traverse(function(f){Vt(f).dataModel=i})}),this.markKeep(u),u.group.silent=i.get("silent")||e.get("silent")},t.type="markPoint",t})(Qz);function ywt(n,t,e){var i;n?i=ct(n&&n.dimensions,function(s){var l=t.getData().getDimensionInfo(t.getData().mapDimension(s))||{};return ht(ht({},l),{name:s,ordinalMeta:null})}):i=[{name:"value",type:"float"}];var r=new oo(i,e),o=ct(e.get("data"),qt(Zy,t));n&&(o=Ge(o,qt(Jy,n)));var a=iet(!!n,i);return r.initData(o,null,a),r}function bwt(n){n.registerComponentModel(cwt),n.registerComponentView(mwt),n.registerPreprocessor(function(t){Zz(t.series,"markPoint")&&(t.markPoint=t.markPoint||{})})}var _wt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.createMarkerModelFromSeries=function(e,i,r){return new t(e,i,r)},t.type="markLine",t.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},t})(Hh),v6=Un.prototype,OP=r_.prototype,net=(function(){function n(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return n})();(function(n){et(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t})(net);function HP(n){return isNaN(+n.cpx1)||isNaN(+n.cpy1)}var Cwt=(function(n){et(t,n);function t(e){var i=n.call(this,e)||this;return i.type="ec-line",i}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new net},t.prototype.buildPath=function(e,i){HP(i)?v6.buildPath.call(this,e,i):OP.buildPath.call(this,e,i)},t.prototype.pointAt=function(e){return HP(this.shape)?v6.pointAt.call(this,e):OP.pointAt.call(this,e)},t.prototype.tangentAt=function(e){var i=this.shape,r=HP(i)?[i.x2-i.x1,i.y2-i.y1]:OP.tangentAt.call(this,e);return Ov(r,r)},t})(ue),zP=["fromSymbol","toSymbol"];function m6(n){return"_"+n+"Type"}function y6(n,t,e){var i=t.getItemVisual(e,n);if(!i||i==="none")return i;var r=t.getItemVisual(e,n+"Size"),o=t.getItemVisual(e,n+"Rotate"),a=t.getItemVisual(e,n+"Offset"),s=t.getItemVisual(e,n+"KeepAspect"),l=Xv(r),h=Jf(a||0,l);return i+l+h+(o||"")+(s||"")}function b6(n,t,e){var i=t.getItemVisual(e,n);if(!(!i||i==="none")){var r=t.getItemVisual(e,n+"Size"),o=t.getItemVisual(e,n+"Rotate"),a=t.getItemVisual(e,n+"Offset"),s=t.getItemVisual(e,n+"KeepAspect"),l=Xv(r),h=Jf(a||0,l),u=En(i,-l[0]/2+h[0],-l[1]/2+h[1],l[0],l[1],null,s);return u.__specifiedRotation=o==null||isNaN(o)?void 0:+o*Math.PI/180||0,u.name=n,u}}function wwt(n){var t=new Cwt({name:"line",subPixelOptimize:!0});return SD(t.shape,n),t}function SD(n,t){n.x1=t[0][0],n.y1=t[0][1],n.x2=t[1][0],n.y2=t[1][1],n.percent=1;var e=t[2];e?(n.cpx1=e[0],n.cpy1=e[1]):(n.cpx1=NaN,n.cpy1=NaN)}var tF=(function(n){et(t,n);function t(e,i,r){var o=n.call(this)||this;return o._createLine(e,i,r),o}return t.prototype._createLine=function(e,i,r){var o=e.hostModel,a=e.getItemLayout(i),s=wwt(a);s.shape.percent=0,Bi(s,{shape:{percent:1}},o,i),this.add(s),z(zP,function(l){var h=b6(l,e,i);this.add(h),this[m6(l)]=y6(l,e,i)},this),this._updateCommonStl(e,i,r)},t.prototype.updateData=function(e,i,r){var o=e.hostModel,a=this.childOfName("line"),s=e.getItemLayout(i),l={shape:{}};SD(l.shape,s),Ie(a,l,o,i),z(zP,function(h){var u=y6(h,e,i),d=m6(h);if(this[d]!==u){this.remove(this.childOfName(h));var c=b6(h,e,i);this.add(c)}this[d]=u},this),this._updateCommonStl(e,i,r)},t.prototype.getLinePath=function(){return this.childAt(0)},t.prototype._updateCommonStl=function(e,i,r){var o=e.hostModel,a=this.childOfName("line"),s=r&&r.emphasisLineStyle,l=r&&r.blurLineStyle,h=r&&r.selectLineStyle,u=r&&r.labelStatesModels,d=r&&r.emphasisDisabled,c=r&&r.focus,f=r&&r.blurScope;if(!r||e.hasItemOption){var g=e.getItemModel(i),p=g.getModel("emphasis");s=p.getModel("lineStyle").getLineStyle(),l=g.getModel(["blur","lineStyle"]).getLineStyle(),h=g.getModel(["select","lineStyle"]).getLineStyle(),d=p.get("disabled"),c=p.get("focus"),f=p.get("blurScope"),u=Zn(g)}var v=e.getItemVisual(i,"style"),m=v.stroke;a.useStyle(v),a.style.fill=null,a.style.strokeNoScale=!0,a.ensureState("emphasis").style=s,a.ensureState("blur").style=l,a.ensureState("select").style=h,z(zP,function(C){var x=this.childOfName(C);if(x){x.setColor(m),x.style.opacity=v.opacity;for(var S=0;S<lo.length;S++){var A=lo[S],T=a.getState(A);if(T){var M=T.style||{},R=x.ensureState(A),L=R.style||(R.style={});M.stroke!=null&&(L[x.__isEmptyBrush?"stroke":"fill"]=M.stroke),M.opacity!=null&&(L.opacity=M.opacity)}}x.markRedraw()}},this);var y=o.getRawValue(i);Tr(this,u,{labelDataIndex:i,labelFetcher:{getFormattedLabel:function(C,x){return o.getFormattedLabel(C,x,e.dataType)}},inheritColor:m||"#000",defaultOpacity:v.opacity,defaultText:(y==null?e.getName(i):isFinite(y)?Ji(y):y)+""});var b=this.getTextContent();if(b){var _=u.normal;b.__align=b.style.align,b.__verticalAlign=b.style.verticalAlign,b.__position=_.get("position")||"middle";var w=_.get("distance");ut(w)||(w=[w,w]),b.__labelDistance=w}this.setTextConfig({position:null,local:!0,inside:!1}),Gi(this,c,f,d)},t.prototype.highlight=function(){Lh(this)},t.prototype.downplay=function(){Eh(this)},t.prototype.updateLayout=function(e,i){this.setLinePoints(e.getItemLayout(i))},t.prototype.setLinePoints=function(e){var i=this.childOfName("line");SD(i.shape,e),i.dirty()},t.prototype.beforeUpdate=function(){var e=this,i=e.childOfName("fromSymbol"),r=e.childOfName("toSymbol"),o=e.getTextContent();if(!i&&!r&&(!o||o.ignore))return;for(var a=1,s=this.parent;s;)s.scaleX&&(a/=s.scaleX),s=s.parent;var l=e.childOfName("line");if(!this.__dirty&&!l.__dirty)return;var h=l.shape.percent,u=l.pointAt(0),d=l.pointAt(h),c=Ec([],d,u);Ov(c,c);function f(T,M){var R=T.__specifiedRotation;if(R==null){var L=l.tangentAt(M);T.attr("rotation",(M===1?-1:1)*Math.PI/2-Math.atan2(L[1],L[0]))}else T.attr("rotation",R)}if(i&&(i.setPosition(u),f(i,0),i.scaleX=i.scaleY=a*h,i.markRedraw()),r&&(r.setPosition(d),f(r,1),r.scaleX=r.scaleY=a*h,r.markRedraw()),o&&!o.ignore){o.x=o.y=0,o.originX=o.originY=0;var g=void 0,p=void 0,v=o.__labelDistance,m=v[0]*a,y=v[1]*a,b=h/2,_=l.tangentAt(b),w=[_[1],-_[0]],C=l.pointAt(b);w[1]>0&&(w[0]=-w[0],w[1]=-w[1]);var x=_[0]<0?-1:1;if(o.__position!=="start"&&o.__position!=="end"){var S=-Math.atan2(_[1],_[0]);d[0]<u[0]&&(S=Math.PI+S),o.rotation=S}var A=void 0;switch(o.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":A=-y,p="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":A=y,p="top";break;default:A=0,p="middle"}switch(o.__position){case"end":o.x=c[0]*m+d[0],o.y=c[1]*y+d[1],g=c[0]>.8?"left":c[0]<-.8?"right":"center",p=c[1]>.8?"top":c[1]<-.8?"bottom":"middle";break;case"start":o.x=-c[0]*m+u[0],o.y=-c[1]*y+u[1],g=c[0]>.8?"right":c[0]<-.8?"left":"center",p=c[1]>.8?"bottom":c[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":o.x=m*x+u[0],o.y=u[1]+A,g=_[0]<0?"right":"left",o.originX=-m*x,o.originY=-A;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":o.x=C[0],o.y=C[1]+A,g="center",o.originY=-A;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":o.x=-m*x+d[0],o.y=d[1]+A,g=_[0]>=0?"right":"left",o.originX=m*x,o.originY=-A;break}o.scaleX=o.scaleY=a,o.setStyle({verticalAlign:o.__verticalAlign||p,align:o.__align||g})}},t})(Ft),eF=(function(){function n(t){this.group=new Ft,this._LineCtor=t||tF}return n.prototype.updateData=function(t){var e=this;this._progressiveEls=null;var i=this,r=i.group,o=i._lineData;i._lineData=t,o||r.removeAll();var a=_6(t);t.diff(o).add(function(s){e._doAdd(t,s,a)}).update(function(s,l){e._doUpdate(o,t,l,s,a)}).remove(function(s){r.remove(o.getItemGraphicEl(s))}).execute()},n.prototype.updateLayout=function(){var t=this._lineData;t&&t.eachItemGraphicEl(function(e,i){e.updateLayout(t,i)},this)},n.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=_6(t),this._lineData=null,this.group.removeAll()},n.prototype.incrementalUpdate=function(t,e){this._progressiveEls=[];function i(s){!s.isGroup&&!xwt(s)&&(s.incremental=!0,s.ensureState("emphasis").hoverLayer=!0)}for(var r=t.start;r<t.end;r++){var o=e.getItemLayout(r);if(FP(o)){var a=new this._LineCtor(e,r,this._seriesScope);a.traverse(i),this.group.add(a),e.setItemGraphicEl(r,a),this._progressiveEls.push(a)}}},n.prototype.remove=function(){this.group.removeAll()},n.prototype.eachRendered=function(t){md(this._progressiveEls||this.group,t)},n.prototype._doAdd=function(t,e,i){var r=t.getItemLayout(e);if(FP(r)){var o=new this._LineCtor(t,e,i);t.setItemGraphicEl(e,o),this.group.add(o)}},n.prototype._doUpdate=function(t,e,i,r,o){var a=t.getItemGraphicEl(i);if(!FP(e.getItemLayout(r))){this.group.remove(a);return}a?a.updateData(e,r,o):a=new this._LineCtor(e,r,o),e.setItemGraphicEl(r,a),this.group.add(a)},n})();function xwt(n){return n.animators&&n.animators.length>0}function _6(n){var t=n.hostModel,e=t.getModel("emphasis");return{lineStyle:t.getModel("lineStyle").getLineStyle(),emphasisLineStyle:e.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:t.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:t.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:e.get("disabled"),blurScope:e.get("blurScope"),focus:e.get("focus"),labelStatesModels:Zn(t)}}function C6(n){return isNaN(n[0])||isNaN(n[1])}function FP(n){return n&&!C6(n[0])&&!C6(n[1])}function ig(n,t){return n.type===t}var $C=Te(),Swt=function(n,t,e,i){var r=n.getData(),o;if(ut(i))o=i;else{var a=i.type;if(a==="min"||a==="max"||a==="average"||a==="median"||i.xAxis!=null||i.yAxis!=null){var s=void 0,l=void 0;if(i.yAxis!=null||i.xAxis!=null)s=t.getAxis(i.yAxis!=null?"y":"x"),l=rr(i.yAxis,i.xAxis);else{var h=eet(i,r,t,n);s=h.valueAxis;var u=uQ(r,h.valueDataDim);l=Jz(r,u,a)}var d=s.dim==="x"?0:1,c=1-d,f=zt(i),g={coord:[]};f.type=null,f.coord=[],f.coord[c]=-1/0,g.coord[c]=1/0;var p=e.get("precision");p>=0&&Le(l)&&(l=+l.toFixed(Math.min(p,20))),f.coord[d]=g.coord[d]=l,o=[f,g,{type:a,valueIndex:i.valueIndex,value:l}]}else o=[]}var v=[Zy(n,o[0]),Zy(n,o[1]),ht({},o[2])];return v[2].type=v[2].type||null,Zt(v[2],v[0]),Zt(v[2],v[1]),v};function Dx(n){return!isNaN(n)&&!isFinite(n)}function w6(n,t,e,i){var r=1-n,o=i.dimensions[n];return Dx(t[r])&&Dx(e[r])&&t[n]===e[n]&&i.getAxis(o).containData(t[n])}function Awt(n,t){if(n.type==="cartesian2d"){var e=t[0].coord,i=t[1].coord;if(e&&i&&(w6(1,e,i,n)||w6(0,e,i,n)))return!0}return Jy(n,t[0])&&Jy(n,t[1])}function NP(n,t,e,i,r){var o=i.coordinateSystem,a=n.getItemModel(t),s,l=mt(a.get("x"),r.getWidth()),h=mt(a.get("y"),r.getHeight());if(!isNaN(l)&&!isNaN(h))s=[l,h];else{if(i.getMarkerPosition)s=i.getMarkerPosition(n.getValues(n.dimensions,t));else{var u=o.dimensions,d=n.get(u[0],t),c=n.get(u[1],t);s=o.dataToPoint([d,c])}if(ig(o,"cartesian2d")){var f=o.getAxis("x"),g=o.getAxis("y"),u=o.dimensions;Dx(n.get(u[0],t))?s[0]=f.toGlobalCoord(f.getExtent()[e?0:1]):Dx(n.get(u[1],t))&&(s[1]=g.toGlobalCoord(g.getExtent()[e?0:1]))}isNaN(l)||(s[0]=l),isNaN(h)||(s[1]=h)}n.setItemLayout(t,s)}var Twt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.updateTransform=function(e,i,r){i.eachSeries(function(o){var a=Hh.getMarkerModelFromSeries(o,"markLine");if(a){var s=a.getData(),l=$C(a).from,h=$C(a).to;l.each(function(u){NP(l,u,!0,o,r),NP(h,u,!1,o,r)}),s.each(function(u){s.setItemLayout(u,[l.getItemLayout(u),h.getItemLayout(u)])}),this.markerGroupMap.get(o.id).updateLayout()}},this)},t.prototype.renderSeries=function(e,i,r,o){var a=e.coordinateSystem,s=e.id,l=e.getData(),h=this.markerGroupMap,u=h.get(s)||h.set(s,new eF);this.group.add(u.group);var d=Mwt(a,e,i),c=d.from,f=d.to,g=d.line;$C(i).from=c,$C(i).to=f,i.setData(g);var p=i.get("symbol"),v=i.get("symbolSize"),m=i.get("symbolRotate"),y=i.get("symbolOffset");ut(p)||(p=[p,p]),ut(v)||(v=[v,v]),ut(m)||(m=[m,m]),ut(y)||(y=[y,y]),d.from.each(function(_){b(c,_,!0),b(f,_,!1)}),g.each(function(_){var w=g.getItemModel(_).getModel("lineStyle").getLineStyle();g.setItemLayout(_,[c.getItemLayout(_),f.getItemLayout(_)]),w.stroke==null&&(w.stroke=c.getItemVisual(_,"style").fill),g.setItemVisual(_,{fromSymbolKeepAspect:c.getItemVisual(_,"symbolKeepAspect"),fromSymbolOffset:c.getItemVisual(_,"symbolOffset"),fromSymbolRotate:c.getItemVisual(_,"symbolRotate"),fromSymbolSize:c.getItemVisual(_,"symbolSize"),fromSymbol:c.getItemVisual(_,"symbol"),toSymbolKeepAspect:f.getItemVisual(_,"symbolKeepAspect"),toSymbolOffset:f.getItemVisual(_,"symbolOffset"),toSymbolRotate:f.getItemVisual(_,"symbolRotate"),toSymbolSize:f.getItemVisual(_,"symbolSize"),toSymbol:f.getItemVisual(_,"symbol"),style:w})}),u.updateData(g),d.line.eachItemGraphicEl(function(_){Vt(_).dataModel=i,_.traverse(function(w){Vt(w).dataModel=i})});function b(_,w,C){var x=_.getItemModel(w);NP(_,w,C,e,o);var S=x.getModel("itemStyle").getItemStyle();S.fill==null&&(S.fill=h_(l,"color")),_.setItemVisual(w,{symbolKeepAspect:x.get("symbolKeepAspect"),symbolOffset:Yt(x.get("symbolOffset",!0),y[C?0:1]),symbolRotate:Yt(x.get("symbolRotate",!0),m[C?0:1]),symbolSize:Yt(x.get("symbolSize"),v[C?0:1]),symbol:Yt(x.get("symbol",!0),p[C?0:1]),style:S})}this.markKeep(u),u.group.silent=i.get("silent")||e.get("silent")},t.type="markLine",t})(Qz);function Mwt(n,t,e){var i;n?i=ct(n&&n.dimensions,function(h){var u=t.getData().getDimensionInfo(t.getData().mapDimension(h))||{};return ht(ht({},u),{name:h,ordinalMeta:null})}):i=[{name:"value",type:"float"}];var r=new oo(i,e),o=new oo(i,e),a=new oo([],e),s=ct(e.get("data"),qt(Swt,t,n,e));n&&(s=Ge(s,qt(Awt,n)));var l=iet(!!n,i);return r.initData(ct(s,function(h){return h[0]}),null,l),o.initData(ct(s,function(h){return h[1]}),null,l),a.initData(ct(s,function(h){return h[2]})),a.hasItemOption=!0,{from:r,to:o,line:a}}function Rwt(n){n.registerComponentModel(_wt),n.registerComponentView(Twt),n.registerPreprocessor(function(t){Zz(t.series,"markLine")&&(t.markLine=t.markLine||{})})}var Pwt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.createMarkerModelFromSeries=function(e,i,r){return new t(e,i,r)},t.type="markArea",t.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},t})(Hh),jC=Te(),Bwt=function(n,t,e,i){var r=i[0],o=i[1];if(!(!r||!o)){var a=Zy(n,r),s=Zy(n,o),l=a.coord,h=s.coord;l[0]=rr(l[0],-1/0),l[1]=rr(l[1],-1/0),h[0]=rr(h[0],1/0),h[1]=rr(h[1],1/0);var u=xH([{},a,s]);return u.coord=[a.coord,s.coord],u.x0=a.x,u.y0=a.y,u.x1=s.x,u.y1=s.y,u}};function Ix(n){return!isNaN(n)&&!isFinite(n)}function x6(n,t,e,i){var r=1-n;return Ix(t[r])&&Ix(e[r])}function kwt(n,t){var e=t.coord[0],i=t.coord[1],r={coord:e,x:t.x0,y:t.y0},o={coord:i,x:t.x1,y:t.y1};return ig(n,"cartesian2d")?e&&i&&(x6(1,e,i)||x6(0,e,i))?!0:vwt(n,r,o):Jy(n,r)||Jy(n,o)}function S6(n,t,e,i,r){var o=i.coordinateSystem,a=n.getItemModel(t),s,l=mt(a.get(e[0]),r.getWidth()),h=mt(a.get(e[1]),r.getHeight());if(!isNaN(l)&&!isNaN(h))s=[l,h];else{if(i.getMarkerPosition){var u=n.getValues(["x0","y0"],t),d=n.getValues(["x1","y1"],t),c=o.clampData(u),f=o.clampData(d),g=[];e[0]==="x0"?g[0]=c[0]>f[0]?d[0]:u[0]:g[0]=c[0]>f[0]?u[0]:d[0],e[1]==="y0"?g[1]=c[1]>f[1]?d[1]:u[1]:g[1]=c[1]>f[1]?u[1]:d[1],s=i.getMarkerPosition(g,e,!0)}else{var p=n.get(e[0],t),v=n.get(e[1],t),m=[p,v];o.clampData&&o.clampData(m,m),s=o.dataToPoint(m,!0)}if(ig(o,"cartesian2d")){var y=o.getAxis("x"),b=o.getAxis("y"),p=n.get(e[0],t),v=n.get(e[1],t);Ix(p)?s[0]=y.toGlobalCoord(y.getExtent()[e[0]==="x0"?0:1]):Ix(v)&&(s[1]=b.toGlobalCoord(b.getExtent()[e[1]==="y0"?0:1]))}isNaN(l)||(s[0]=l),isNaN(h)||(s[1]=h)}return s}var A6=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],Lwt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.updateTransform=function(e,i,r){i.eachSeries(function(o){var a=Hh.getMarkerModelFromSeries(o,"markArea");if(a){var s=a.getData();s.each(function(l){var h=ct(A6,function(d){return S6(s,l,d,o,r)});s.setItemLayout(l,h);var u=s.getItemGraphicEl(l);u.setShape("points",h)})}},this)},t.prototype.renderSeries=function(e,i,r,o){var a=e.coordinateSystem,s=e.id,l=e.getData(),h=this.markerGroupMap,u=h.get(s)||h.set(s,{group:new Ft});this.group.add(u.group),this.markKeep(u);var d=Ewt(a,e,i);i.setData(d),d.each(function(c){var f=ct(A6,function(S){return S6(d,c,S,e,o)}),g=a.getAxis("x").scale,p=a.getAxis("y").scale,v=g.getExtent(),m=p.getExtent(),y=[g.parse(d.get("x0",c)),g.parse(d.get("x1",c))],b=[p.parse(d.get("y0",c)),p.parse(d.get("y1",c))];Ha(y),Ha(b);var _=!(v[0]>y[1]||v[1]<y[0]||m[0]>b[1]||m[1]<b[0]),w=!_;d.setItemLayout(c,{points:f,allClipped:w});var C=d.getItemModel(c).getModel("itemStyle").getItemStyle(),x=h_(l,"color");C.fill||(C.fill=x,Ct(C.fill)&&(C.fill=ix(C.fill,.4))),C.stroke||(C.stroke=x),d.setItemVisual(c,"style",C)}),d.diff(jC(u).data).add(function(c){var f=d.getItemLayout(c);if(!f.allClipped){var g=new uo({shape:{points:f.points}});d.setItemGraphicEl(c,g),u.group.add(g)}}).update(function(c,f){var g=jC(u).data.getItemGraphicEl(f),p=d.getItemLayout(c);p.allClipped?g&&u.group.remove(g):(g?Ie(g,{shape:{points:p.points}},i,c):g=new uo({shape:{points:p.points}}),d.setItemGraphicEl(c,g),u.group.add(g))}).remove(function(c){var f=jC(u).data.getItemGraphicEl(c);u.group.remove(f)}).execute(),d.eachItemGraphicEl(function(c,f){var g=d.getItemModel(f),p=d.getItemVisual(f,"style");c.useStyle(d.getItemVisual(f,"style")),Tr(c,Zn(g),{labelFetcher:i,labelDataIndex:f,defaultText:d.getName(f)||"",inheritColor:Ct(p.fill)?ix(p.fill,1):"#000"}),Ar(c,g),Gi(c,null,null,g.get(["emphasis","disabled"])),Vt(c).dataModel=i}),jC(u).data=d,u.group.silent=i.get("silent")||e.get("silent")},t.type="markArea",t})(Qz);function Ewt(n,t,e){var i,r,o=["x0","y0","x1","y1"];if(n){var a=ct(n&&n.dimensions,function(h){var u=t.getData(),d=u.getDimensionInfo(u.mapDimension(h))||{};return ht(ht({},d),{name:h,ordinalMeta:null})});r=ct(o,function(h,u){return{name:h,type:a[u%2].type}}),i=new oo(r,e)}else r=[{name:"value",type:"float"}],i=new oo(r,e);var s=ct(e.get("data"),qt(Bwt,t,n,e));n&&(s=Ge(s,qt(kwt,n)));var l=n?function(h,u,d,c){var f=h.coord[Math.floor(c/2)][c%2];return Uu(f,r[c])}:function(h,u,d,c){return Uu(h.value,r[c])};return i.initData(s,null,l),i.hasItemOption=!0,i}function Dwt(n){n.registerComponentModel(Pwt),n.registerComponentView(Lwt),n.registerPreprocessor(function(t){Zz(t.series,"markArea")&&(t.markArea=t.markArea||{})})}var Iwt=function(n,t){if(t==="all")return{type:"all",title:n.getLocaleModel().get(["legend","selector","all"])};if(t==="inverse")return{type:"inverse",title:n.getLocaleModel().get(["legend","selector","inverse"])}},AD=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e.layoutMode={type:"box",ignoreSize:!0},e}return t.prototype.init=function(e,i,r){this.mergeDefaultAndTheme(e,r),e.selected=e.selected||{},this._updateSelector(e)},t.prototype.mergeOption=function(e,i){n.prototype.mergeOption.call(this,e,i),this._updateSelector(e)},t.prototype._updateSelector=function(e){var i=e.selector,r=this.ecModel;i===!0&&(i=e.selector=["all","inverse"]),ut(i)&&z(i,function(o,a){Ct(o)&&(o={type:o}),i[a]=Zt(o,Iwt(r,o.type))})},t.prototype.optionUpdated=function(){this._updateData(this.ecModel);var e=this._data;if(e[0]&&this.get("selectedMode")==="single"){for(var i=!1,r=0;r<e.length;r++){var o=e[r].get("name");if(this.isSelected(o)){this.select(o),i=!0;break}}!i&&this.select(e[0].get("name"))}},t.prototype._updateData=function(e){var i=[],r=[];e.eachRawSeries(function(l){var h=l.name;r.push(h);var u;if(l.legendVisualProvider){var d=l.legendVisualProvider,c=d.getAllNames();e.isSeriesFiltered(l)||(r=r.concat(c)),c.length?i=i.concat(c):u=!0}else u=!0;u&&EH(l)&&i.push(l.name)}),this._availableNames=r;var o=this.get("data")||i,a=Pt(),s=ct(o,function(l){return(Ct(l)||Le(l))&&(l={name:l}),a.get(l.name)?null:(a.set(l.name,!0),new Ze(l,this,this.ecModel))},this);this._data=Ge(s,function(l){return!!l})},t.prototype.getData=function(){return this._data},t.prototype.select=function(e){var i=this.option.selected,r=this.get("selectedMode");if(r==="single"){var o=this._data;z(o,function(a){i[a.get("name")]=!1})}i[e]=!0},t.prototype.unSelect=function(e){this.get("selectedMode")!=="single"&&(this.option.selected[e]=!1)},t.prototype.toggleSelected=function(e){var i=this.option.selected;i.hasOwnProperty(e)||(i[e]=!0),this[i[e]?"unSelect":"select"](e)},t.prototype.allSelect=function(){var e=this._data,i=this.option.selected;z(e,function(r){i[r.get("name",!0)]=!0})},t.prototype.inverseSelect=function(){var e=this._data,i=this.option.selected;z(e,function(r){var o=r.get("name",!0);i.hasOwnProperty(o)||(i[o]=!0),i[o]=!i[o]})},t.prototype.isSelected=function(e){var i=this.option.selected;return!(i.hasOwnProperty(e)&&!i[e])&&ee(this._availableNames,e)>=0},t.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},t.type="legend.plain",t.dependencies=["series"],t.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},t})(ge),xg=qt,TD=z,UC=Ft,ret=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e.newlineDisabled=!1,e}return t.prototype.init=function(){this.group.add(this._contentGroup=new UC),this.group.add(this._selectorGroup=new UC),this._isFirstRender=!0},t.prototype.getContentGroup=function(){return this._contentGroup},t.prototype.getSelectorGroup=function(){return this._selectorGroup},t.prototype.render=function(e,i,r){var o=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!e.get("show",!0)){var a=e.get("align"),s=e.get("orient");(!a||a==="auto")&&(a=e.get("left")==="right"&&s==="vertical"?"right":"left");var l=e.get("selector",!0),h=e.get("selectorPosition",!0);l&&(!h||h==="auto")&&(h=s==="horizontal"?"end":"start"),this.renderInner(a,e,i,r,l,s,h);var u=e.getBoxLayoutParams(),d={width:r.getWidth(),height:r.getHeight()},c=e.get("padding"),f=Vn(u,d,c),g=this.layoutInner(e,a,f,o,l,h),p=Vn(Ot({width:g.width,height:g.height},u),d,c);this.group.x=p.x-g.x,this.group.y=p.y-g.y,this.group.markRedraw(),this.group.add(this._backgroundEl=Gtt(g,e))}},t.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},t.prototype.renderInner=function(e,i,r,o,a,s,l){var h=this.getContentGroup(),u=Pt(),d=i.get("selectedMode"),c=[];r.eachRawSeries(function(f){!f.get("legendHoverLink")&&c.push(f.id)}),TD(i.getData(),function(f,g){var p=f.get("name");if(!this.newlineDisabled&&(p===""||p===`
`)){var v=new UC;v.newline=!0,h.add(v);return}var m=r.getSeriesByName(p)[0];if(!u.get(p))if(m){var y=m.getData(),b=y.getVisual("legendLineStyle")||{},_=y.getVisual("legendIcon"),w=y.getVisual("style"),C=this._createItem(m,p,g,f,i,e,b,w,_,d,o);C.on("click",xg(T6,p,null,o,c)).on("mouseover",xg(MD,m.name,null,o,c)).on("mouseout",xg(RD,m.name,null,o,c)),r.ssr&&C.eachChild(function(x){var S=Vt(x);S.seriesIndex=m.seriesIndex,S.dataIndex=g,S.ssrType="legend"}),u.set(p,!0)}else r.eachRawSeries(function(x){if(!u.get(p)&&x.legendVisualProvider){var S=x.legendVisualProvider;if(!S.containName(p))return;var A=S.indexOfName(p),T=S.getItemVisual(A,"style"),M=S.getItemVisual(A,"legendIcon"),R=qo(T.fill);R&&R[3]===0&&(R[3]=.2,T=ht(ht({},T),{fill:wh(R,"rgba")}));var L=this._createItem(x,p,g,f,i,e,{},T,M,d,o);L.on("click",xg(T6,null,p,o,c)).on("mouseover",xg(MD,null,p,o,c)).on("mouseout",xg(RD,null,p,o,c)),r.ssr&&L.eachChild(function(B){var P=Vt(B);P.seriesIndex=x.seriesIndex,P.dataIndex=g,P.ssrType="legend"}),u.set(p,!0)}},this)},this),a&&this._createSelector(a,i,o,s,l)},t.prototype._createSelector=function(e,i,r,o,a){var s=this.getSelectorGroup();TD(e,function(h){var u=h.type,d=new Re({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){r.dispatchAction({type:u==="all"?"legendAllSelect":"legendInverseSelect",legendId:i.id})}});s.add(d);var c=i.getModel("selectorLabel"),f=i.getModel(["emphasis","selectorLabel"]);Tr(d,{normal:c,emphasis:f},{defaultText:h.title}),af(d)})},t.prototype._createItem=function(e,i,r,o,a,s,l,h,u,d,c){var f=e.visualDrawType,g=a.get("itemWidth"),p=a.get("itemHeight"),v=a.isSelected(i),m=o.get("symbolRotate"),y=o.get("symbolKeepAspect"),b=o.get("icon");u=b||u||"roundRect";var _=Owt(u,o,l,h,f,v,c),w=new UC,C=o.getModel("textStyle");if(Dt(e.getLegendIcon)&&(!b||b==="inherit"))w.add(e.getLegendIcon({itemWidth:g,itemHeight:p,icon:u,iconRotate:m,itemStyle:_.itemStyle,lineStyle:_.lineStyle,symbolKeepAspect:y}));else{var x=b==="inherit"&&e.getData().getVisual("symbol")?m==="inherit"?e.getData().getVisual("symbolRotate"):m:0;w.add(Hwt({itemWidth:g,itemHeight:p,icon:u,iconRotate:x,itemStyle:_.itemStyle,symbolKeepAspect:y}))}var S=s==="left"?g+5:-5,A=s,T=a.get("formatter"),M=i;Ct(T)&&T?M=T.replace("{name}",i??""):Dt(T)&&(M=T(i));var R=v?C.getTextColor():o.get("inactiveColor");w.add(new Re({style:_i(C,{text:M,x:S,y:p/2,fill:R,align:A,verticalAlign:"middle"},{inheritColor:R})}));var L=new Ae({shape:w.getBoundingRect(),style:{fill:"transparent"}}),B=o.getModel("tooltip");return B.get("show")&&Kf({el:L,componentModel:a,itemName:i,itemTooltipOption:B.option}),w.add(L),w.eachChild(function(P){P.silent=!0}),L.silent=!d,this.getContentGroup().add(w),af(w),w.__legendDataIndex=r,w},t.prototype.layoutInner=function(e,i,r,o,a,s){var l=this.getContentGroup(),h=this.getSelectorGroup();lf(e.get("orient"),l,e.get("itemGap"),r.width,r.height);var u=l.getBoundingRect(),d=[-u.x,-u.y];if(h.markRedraw(),l.markRedraw(),a){lf("horizontal",h,e.get("selectorItemGap",!0));var c=h.getBoundingRect(),f=[-c.x,-c.y],g=e.get("selectorButtonGap",!0),p=e.getOrient().index,v=p===0?"width":"height",m=p===0?"height":"width",y=p===0?"y":"x";s==="end"?f[p]+=u[v]+g:d[p]+=c[v]+g,f[1-p]+=u[m]/2-c[m]/2,h.x=f[0],h.y=f[1],l.x=d[0],l.y=d[1];var b={x:0,y:0};return b[v]=u[v]+g+c[v],b[m]=Math.max(u[m],c[m]),b[y]=Math.min(0,c[y]+f[1-p]),b}else return l.x=d[0],l.y=d[1],this.group.getBoundingRect()},t.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},t.type="legend.plain",t})(Di);function Owt(n,t,e,i,r,o,a){function s(v,m){v.lineWidth==="auto"&&(v.lineWidth=m.lineWidth>0?2:0),TD(v,function(y,b){v[b]==="inherit"&&(v[b]=m[b])})}var l=t.getModel("itemStyle"),h=l.getItemStyle(),u=n.lastIndexOf("empty",0)===0?"fill":"stroke",d=l.getShallow("decal");h.decal=!d||d==="inherit"?i.decal:Up(d,a),h.fill==="inherit"&&(h.fill=i[r]),h.stroke==="inherit"&&(h.stroke=i[u]),h.opacity==="inherit"&&(h.opacity=(r==="fill"?i:e).opacity),s(h,i);var c=t.getModel("lineStyle"),f=c.getLineStyle();if(s(f,e),h.fill==="auto"&&(h.fill=i.fill),h.stroke==="auto"&&(h.stroke=i.fill),f.stroke==="auto"&&(f.stroke=i.fill),!o){var g=t.get("inactiveBorderWidth"),p=h[u];h.lineWidth=g==="auto"?i.lineWidth>0&&p?2:0:h.lineWidth,h.fill=t.get("inactiveColor"),h.stroke=t.get("inactiveBorderColor"),f.stroke=c.get("inactiveColor"),f.lineWidth=c.get("inactiveWidth")}return{itemStyle:h,lineStyle:f}}function Hwt(n){var t=n.icon||"roundRect",e=En(t,0,0,n.itemWidth,n.itemHeight,n.itemStyle.fill,n.symbolKeepAspect);return e.setStyle(n.itemStyle),e.rotation=(n.iconRotate||0)*Math.PI/180,e.setOrigin([n.itemWidth/2,n.itemHeight/2]),t.indexOf("empty")>-1&&(e.style.stroke=e.style.fill,e.style.fill="#fff",e.style.lineWidth=2),e}function T6(n,t,e,i){RD(n,t,e,i),e.dispatchAction({type:"legendToggleSelect",name:n??t}),MD(n,t,e,i)}function oet(n){for(var t=n.getZr().storage.getDisplayList(),e,i=0,r=t.length;i<r&&!(e=t[i].states.emphasis);)i++;return e&&e.hoverLayer}function MD(n,t,e,i){oet(e)||e.dispatchAction({type:"highlight",seriesName:n,name:t,excludeSeriesId:i})}function RD(n,t,e,i){oet(e)||e.dispatchAction({type:"downplay",seriesName:n,name:t,excludeSeriesId:i})}function zwt(n){var t=n.findComponents({mainType:"legend"});t&&t.length&&n.filterSeries(function(e){for(var i=0;i<t.length;i++)if(!t[i].isSelected(e.name))return!1;return!0})}function Nm(n,t,e){var i=n==="allSelect"||n==="inverseSelect",r={},o=[];e.eachComponent({mainType:"legend",query:t},function(s){i?s[n]():s[n](t.name),M6(s,r),o.push(s.componentIndex)});var a={};return e.eachComponent("legend",function(s){z(r,function(l,h){s[l?"select":"unSelect"](h)}),M6(s,a)}),i?{selected:a,legendIndex:o}:{name:t.name,selected:a}}function M6(n,t){var e=t||{};return z(n.getData(),function(i){var r=i.get("name");if(!(r===`
`||r==="")){var o=n.isSelected(r);At(e,r)?e[r]=e[r]&&o:e[r]=o}}),e}function Fwt(n){n.registerAction("legendToggleSelect","legendselectchanged",qt(Nm,"toggleSelected")),n.registerAction("legendAllSelect","legendselectall",qt(Nm,"allSelect")),n.registerAction("legendInverseSelect","legendinverseselect",qt(Nm,"inverseSelect")),n.registerAction("legendSelect","legendselected",qt(Nm,"select")),n.registerAction("legendUnSelect","legendunselected",qt(Nm,"unSelect"))}function aet(n){n.registerComponentModel(AD),n.registerComponentView(ret),n.registerProcessor(n.PRIORITY.PROCESSOR.SERIES_FILTER,zwt),n.registerSubTypeDefaulter("legend",function(){return"plain"}),Fwt(n)}var Nwt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.setScrollDataIndex=function(e){this.option.scrollDataIndex=e},t.prototype.init=function(e,i,r){var o=$v(e);n.prototype.init.call(this,e,i,r),R6(this,e,o)},t.prototype.mergeOption=function(e,i){n.prototype.mergeOption.call(this,e,i),R6(this,this.option,e)},t.type="legend.scroll",t.defaultOption=yd(AD.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),t})(AD);function R6(n,t,e){var i=n.getOrient(),r=[1,1];r[i.index]=0,ed(t,e,{type:"box",ignoreSize:!!r})}var P6=Ft,WP=["width","height"],VP=["x","y"],Wwt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e.newlineDisabled=!0,e._currentIndex=0,e}return t.prototype.init=function(){n.prototype.init.call(this),this.group.add(this._containerGroup=new P6),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new P6)},t.prototype.resetInner=function(){n.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},t.prototype.renderInner=function(e,i,r,o,a,s,l){var h=this;n.prototype.renderInner.call(this,e,i,r,o,a,s,l);var u=this._controllerGroup,d=i.get("pageIconSize",!0),c=ut(d)?d:[d,d];g("pagePrev",0);var f=i.getModel("pageTextStyle");u.add(new Re({name:"pageText",style:{text:"xx/xx",fill:f.getTextColor(),font:f.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),g("pageNext",1);function g(p,v){var m=p+"DataIndex",y=s_(i.get("pageIcons",!0)[i.getOrient().name][v],{onclick:xt(h._pageGo,h,m,i,o)},{x:-c[0]/2,y:-c[1]/2,width:c[0],height:c[1]});y.name=p,u.add(y)}},t.prototype.layoutInner=function(e,i,r,o,a,s){var l=this.getSelectorGroup(),h=e.getOrient().index,u=WP[h],d=VP[h],c=WP[1-h],f=VP[1-h];a&&lf("horizontal",l,e.get("selectorItemGap",!0));var g=e.get("selectorButtonGap",!0),p=l.getBoundingRect(),v=[-p.x,-p.y],m=zt(r);a&&(m[u]=r[u]-p[u]-g);var y=this._layoutContentAndController(e,o,m,h,u,c,f,d);if(a){if(s==="end")v[h]+=y[u]+g;else{var b=p[u]+g;v[h]-=b,y[d]-=b}y[u]+=p[u]+g,v[1-h]+=y[f]+y[c]/2-p[c]/2,y[c]=Math.max(y[c],p[c]),y[f]=Math.min(y[f],p[f]+v[1-h]),l.x=v[0],l.y=v[1],l.markRedraw()}return y},t.prototype._layoutContentAndController=function(e,i,r,o,a,s,l,h){var u=this.getContentGroup(),d=this._containerGroup,c=this._controllerGroup;lf(e.get("orient"),u,e.get("itemGap"),o?r.width:null,o?null:r.height),lf("horizontal",c,e.get("pageButtonItemGap",!0));var f=u.getBoundingRect(),g=c.getBoundingRect(),p=this._showController=f[a]>r[a],v=[-f.x,-f.y];i||(v[o]=u[h]);var m=[0,0],y=[-g.x,-g.y],b=Yt(e.get("pageButtonGap",!0),e.get("itemGap",!0));if(p){var _=e.get("pageButtonPosition",!0);_==="end"?y[o]+=r[a]-g[a]:m[o]+=g[a]+b}y[1-o]+=f[s]/2-g[s]/2,u.setPosition(v),d.setPosition(m),c.setPosition(y);var w={x:0,y:0};if(w[a]=p?r[a]:f[a],w[s]=Math.max(f[s],g[s]),w[l]=Math.min(0,g[l]+y[1-o]),d.__rectSize=r[a],p){var C={x:0,y:0};C[a]=Math.max(r[a]-g[a]-b,0),C[s]=w[s],d.setClipPath(new Ae({shape:C})),d.__rectSize=C[a]}else c.eachChild(function(S){S.attr({invisible:!0,silent:!0})});var x=this._getPageInfo(e);return x.pageIndex!=null&&Ie(u,{x:x.contentPosition[0],y:x.contentPosition[1]},p?e:null),this._updatePageInfoView(e,x),w},t.prototype._pageGo=function(e,i,r){var o=this._getPageInfo(i)[e];o!=null&&r.dispatchAction({type:"legendScroll",scrollDataIndex:o,legendId:i.id})},t.prototype._updatePageInfoView=function(e,i){var r=this._controllerGroup;z(["pagePrev","pageNext"],function(u){var d=u+"DataIndex",c=i[d]!=null,f=r.childOfName(u);f&&(f.setStyle("fill",c?e.get("pageIconColor",!0):e.get("pageIconInactiveColor",!0)),f.cursor=c?"pointer":"default")});var o=r.childOfName("pageText"),a=e.get("pageFormatter"),s=i.pageIndex,l=s!=null?s+1:0,h=i.pageCount;o&&a&&o.setStyle("text",Ct(a)?a.replace("{current}",l==null?"":l+"").replace("{total}",h==null?"":h+""):a({current:l,total:h}))},t.prototype._getPageInfo=function(e){var i=e.get("scrollDataIndex",!0),r=this.getContentGroup(),o=this._containerGroup.__rectSize,a=e.getOrient().index,s=WP[a],l=VP[a],h=this._findTargetItemIndex(i),u=r.children(),d=u[h],c=u.length,f=c?1:0,g={contentPosition:[r.x,r.y],pageCount:f,pageIndex:f-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!d)return g;var p=_(d);g.contentPosition[a]=-p.s;for(var v=h+1,m=p,y=p,b=null;v<=c;++v)b=_(u[v]),(!b&&y.e>m.s+o||b&&!w(b,m.s))&&(y.i>m.i?m=y:m=b,m&&(g.pageNextDataIndex==null&&(g.pageNextDataIndex=m.i),++g.pageCount)),y=b;for(var v=h-1,m=p,y=p,b=null;v>=-1;--v)b=_(u[v]),(!b||!w(y,b.s))&&m.i<y.i&&(y=m,g.pagePrevDataIndex==null&&(g.pagePrevDataIndex=m.i),++g.pageCount,++g.pageIndex),m=b;return g;function _(C){if(C){var x=C.getBoundingRect(),S=x[l]+C[l];return{s:S,e:S+x[s],i:C.__legendDataIndex}}}function w(C,x){return C.e>=x&&C.s<=x+o}},t.prototype._findTargetItemIndex=function(e){if(!this._showController)return 0;var i,r=this.getContentGroup(),o;return r.eachChild(function(a,s){var l=a.__legendDataIndex;o==null&&l!=null&&(o=s),l===e&&(i=s)}),i??o},t.type="legend.scroll",t})(ret);function Vwt(n){n.registerAction("legendScroll","legendscroll",function(t,e){var i=t.scrollDataIndex;i!=null&&e.eachComponent({mainType:"legend",subType:"scroll",query:t},function(r){r.setScrollDataIndex(i)})})}function Gwt(n){ae(aet),n.registerComponentModel(Nwt),n.registerComponentView(Wwt),Vwt(n)}function $wt(n){ae(aet),ae(Gwt)}var jwt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.type="dataZoom.inside",t.defaultOption=yd(qy.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),t})(qy),iF=Te();function Uwt(n,t,e){iF(n).coordSysRecordMap.each(function(i){var r=i.dataZoomInfoMap.get(t.uid);r&&(r.getRange=e)})}function Ywt(n,t){for(var e=iF(n).coordSysRecordMap,i=e.keys(),r=0;r<i.length;r++){var o=i[r],a=e.get(o),s=a.dataZoomInfoMap;if(s){var l=t.uid,h=s.get(l);h&&(s.removeKey(l),s.keys().length||set(e,a))}}}function set(n,t){if(t){n.removeKey(t.model.uid);var e=t.controller;e&&e.dispose()}}function Xwt(n,t){var e={model:t,containsPoint:qt(Kwt,t),dispatchAction:qt(qwt,n),dataZoomInfoMap:null,controller:null},i=e.controller=new g_(n.getZr());return z(["pan","zoom","scrollMove"],function(r){i.on(r,function(o){var a=[];e.dataZoomInfoMap.each(function(s){if(o.isAvailableBehavior(s.model.option)){var l=(s.getRange||{})[r],h=l&&l(s.dzReferCoordSysInfo,e.model.mainType,e.controller,o);!s.model.get("disabled",!0)&&h&&a.push({dataZoomId:s.model.id,start:h[0],end:h[1]})}}),a.length&&e.dispatchAction(a)})}),e}function qwt(n,t){n.isDisposed()||n.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:t})}function Kwt(n,t,e,i){return n.coordinateSystem.containPoint([e,i])}function Zwt(n){var t,e="type_",i={type_true:2,type_move:1,type_false:0,type_undefined:-1},r=!0;return n.each(function(o){var a=o.model,s=a.get("disabled",!0)?!1:a.get("zoomLock",!0)?"move":!0;i[e+s]>i[e+t]&&(t=s),r=r&&a.get("preventDefaultMouseMove",!0)}),{controlType:t,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!r}}}function Jwt(n){n.registerProcessor(n.PRIORITY.PROCESSOR.FILTER,function(t,e){var i=iF(e),r=i.coordSysRecordMap||(i.coordSysRecordMap=Pt());r.each(function(o){o.dataZoomInfoMap=null}),t.eachComponent({mainType:"dataZoom",subType:"inside"},function(o){var a=Ntt(o);z(a.infoList,function(s){var l=s.model.uid,h=r.get(l)||r.set(l,Xwt(e,s.model)),u=h.dataZoomInfoMap||(h.dataZoomInfoMap=Pt());u.set(o.uid,{dzReferCoordSysInfo:s,model:o,getRange:null})})}),r.each(function(o){var a=o.controller,s,l=o.dataZoomInfoMap;if(l){var h=l.keys()[0];h!=null&&(s=l.get(h))}if(!s){set(r,o);return}var u=Zwt(l);a.enable(u.controlType,u.opt),a.setPointerChecker(o.containsPoint),Yv(o,"dispatchAction",s.model.get("throttle",!0),"fixRate")})})}var Qwt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="dataZoom.inside",e}return t.prototype.render=function(e,i,r){if(n.prototype.render.apply(this,arguments),e.noTarget()){this._clear();return}this.range=e.getPercentRange(),Uwt(r,e,{pan:xt(GP.pan,this),zoom:xt(GP.zoom,this),scrollMove:xt(GP.scrollMove,this)})},t.prototype.dispose=function(){this._clear(),n.prototype.dispose.apply(this,arguments)},t.prototype._clear=function(){Ywt(this.api,this.dataZoomModel),this.range=null},t.type="dataZoom.inside",t})(jz),GP={zoom:function(n,t,e,i){var r=this.range,o=r.slice(),a=n.axisModels[0];if(a){var s=$P[t](null,[i.originX,i.originY],a,e,n),l=(s.signal>0?s.pixelStart+s.pixelLength-s.pixel:s.pixel-s.pixelStart)/s.pixelLength*(o[1]-o[0])+o[0],h=Math.max(1/i.scale,0);o[0]=(o[0]-l)*h+l,o[1]=(o[1]-l)*h+l;var u=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(eg(0,o,[0,100],0,u.minSpan,u.maxSpan),this.range=o,r[0]!==o[0]||r[1]!==o[1])return o}},pan:B6(function(n,t,e,i,r,o){var a=$P[i]([o.oldX,o.oldY],[o.newX,o.newY],t,r,e);return a.signal*(n[1]-n[0])*a.pixel/a.pixelLength}),scrollMove:B6(function(n,t,e,i,r,o){var a=$P[i]([0,0],[o.scrollDelta,o.scrollDelta],t,r,e);return a.signal*(n[1]-n[0])*o.scrollDelta})};function B6(n){return function(t,e,i,r){var o=this.range,a=o.slice(),s=t.axisModels[0];if(s){var l=n(a,s,t,e,i,r);if(eg(l,a,[0,100],"all"),this.range=a,o[0]!==a[0]||o[1]!==a[1])return a}}}var $P={grid:function(n,t,e,i,r){var o=e.axis,a={},s=r.model.coordinateSystem.getRect();return n=n||[0,0],o.dim==="x"?(a.pixel=t[0]-n[0],a.pixelLength=s.width,a.pixelStart=s.x,a.signal=o.inverse?1:-1):(a.pixel=t[1]-n[1],a.pixelLength=s.height,a.pixelStart=s.y,a.signal=o.inverse?-1:1),a},polar:function(n,t,e,i,r){var o=e.axis,a={},s=r.model.coordinateSystem,l=s.getRadiusAxis().getExtent(),h=s.getAngleAxis().getExtent();return n=n?s.pointToCoord(n):[0,0],t=s.pointToCoord(t),e.mainType==="radiusAxis"?(a.pixel=t[0]-n[0],a.pixelLength=l[1]-l[0],a.pixelStart=l[0],a.signal=o.inverse?1:-1):(a.pixel=t[1]-n[1],a.pixelLength=h[1]-h[0],a.pixelStart=h[0],a.signal=o.inverse?-1:1),a},singleAxis:function(n,t,e,i,r){var o=e.axis,a=r.model.coordinateSystem.getRect(),s={};return n=n||[0,0],o.orient==="horizontal"?(s.pixel=t[0]-n[0],s.pixelLength=a.width,s.pixelStart=a.x,s.signal=o.inverse?1:-1):(s.pixel=t[1]-n[1],s.pixelLength=a.height,s.pixelStart=a.y,s.signal=o.inverse?-1:1),s}};function het(n){Uz(n),n.registerComponentModel(jwt),n.registerComponentView(Qwt),Jwt(n)}var txt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.type="dataZoom.slider",t.layoutMode="box",t.defaultOption=yd(qy.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleLabel:{show:!0},handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),t})(qy),Wm=Ae,k6=7,ext=1,jP=30,ixt=7,Vm="horizontal",L6="vertical",nxt=5,rxt=["line","bar","candlestick","scatter"],oxt={easing:"cubicOut",duration:100,delay:0},axt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e._displayables={},e}return t.prototype.init=function(e,i){this.api=i,this._onBrush=xt(this._onBrush,this),this._onBrushEnd=xt(this._onBrushEnd,this)},t.prototype.render=function(e,i,r,o){if(n.prototype.render.apply(this,arguments),Yv(this,"_dispatchZoomAction",e.get("throttle"),"fixRate"),this._orient=e.getOrient(),e.get("show")===!1){this.group.removeAll();return}if(e.noTarget()){this._clear(),this.group.removeAll();return}(!o||o.type!=="dataZoom"||o.from!==this.uid)&&this._buildView(),this._updateView()},t.prototype.dispose=function(){this._clear(),n.prototype.dispose.apply(this,arguments)},t.prototype._clear=function(){Gy(this,"_dispatchZoomAction");var e=this.api.getZr();e.off("mousemove",this._onBrush),e.off("mouseup",this._onBrushEnd)},t.prototype._buildView=function(){var e=this.group;e.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var i=this._displayables.sliderGroup=new Ft;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),e.add(i),this._positionGroup()},t.prototype._resetLocation=function(){var e=this.dataZoomModel,i=this.api,r=e.get("brushSelect"),o=r?ixt:0,a=this._findCoordRect(),s={width:i.getWidth(),height:i.getHeight()},l=this._orient===Vm?{right:s.width-a.x-a.width,top:s.height-jP-k6-o,width:a.width,height:jP}:{right:k6,top:a.y,width:jP,height:a.height},h=$v(e.option);z(["right","top","width","height"],function(d){h[d]==="ph"&&(h[d]=l[d])});var u=Vn(h,s);this._location={x:u.x,y:u.y},this._size=[u.width,u.height],this._orient===L6&&this._size.reverse()},t.prototype._positionGroup=function(){var e=this.group,i=this._location,r=this._orient,o=this.dataZoomModel.getFirstTargetAxisModel(),a=o&&o.get("inverse"),s=this._displayables.sliderGroup,l=(this._dataShadowInfo||{}).otherAxisInverse;s.attr(r===Vm&&!a?{scaleY:l?1:-1,scaleX:1}:r===Vm&&a?{scaleY:l?1:-1,scaleX:-1}:r===L6&&!a?{scaleY:l?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:l?-1:1,scaleX:-1,rotation:Math.PI/2});var h=e.getBoundingRect([s]);e.x=i.x-h.x,e.y=i.y-h.y,e.markRedraw()},t.prototype._getViewExtent=function(){return[0,this._size[0]]},t.prototype._renderBackground=function(){var e=this.dataZoomModel,i=this._size,r=this._displayables.sliderGroup,o=e.get("brushSelect");r.add(new Wm({silent:!0,shape:{x:0,y:0,width:i[0],height:i[1]},style:{fill:e.get("backgroundColor")},z2:-40}));var a=new Wm({shape:{x:0,y:0,width:i[0],height:i[1]},style:{fill:"transparent"},z2:0,onclick:xt(this._onClickPanel,this)}),s=this.api.getZr();o?(a.on("mousedown",this._onBrushStart,this),a.cursor="crosshair",s.on("mousemove",this._onBrush),s.on("mouseup",this._onBrushEnd)):(s.off("mousemove",this._onBrush),s.off("mouseup",this._onBrushEnd)),r.add(a)},t.prototype._renderDataShadow=function(){var e=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],!e)return;var i=this._size,r=this._shadowSize||[],o=e.series,a=o.getRawData(),s=o.getShadowDim&&o.getShadowDim(),l=s&&a.getDimensionInfo(s)?o.getShadowDim():e.otherDim;if(l==null)return;var h=this._shadowPolygonPts,u=this._shadowPolylinePts;if(a!==this._shadowData||l!==this._shadowDim||i[0]!==r[0]||i[1]!==r[1]){var d=a.getDataExtent(l),c=(d[1]-d[0])*.3;d=[d[0]-c,d[1]+c];var f=[0,i[1]],g=[0,i[0]],p=[[i[0],0],[0,0]],v=[],m=g[1]/(a.count()-1),y=0,b=Math.round(a.count()/i[0]),_;a.each([l],function(A,T){if(b>0&&T%b){y+=m;return}var M=A==null||isNaN(A)||A==="",R=M?0:qe(A,d,f,!0);M&&!_&&T?(p.push([p[p.length-1][0],0]),v.push([v[v.length-1][0],0])):!M&&_&&(p.push([y,0]),v.push([y,0])),p.push([y,R]),v.push([y,R]),y+=m,_=M}),h=this._shadowPolygonPts=p,u=this._shadowPolylinePts=v}this._shadowData=a,this._shadowDim=l,this._shadowSize=[i[0],i[1]];var w=this.dataZoomModel;function C(A){var T=w.getModel(A?"selectedDataBackground":"dataBackground"),M=new Ft,R=new uo({shape:{points:h},segmentIgnoreThreshold:1,style:T.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),L=new fo({shape:{points:u},segmentIgnoreThreshold:1,style:T.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return M.add(R),M.add(L),M}for(var x=0;x<3;x++){var S=C(x===1);this._displayables.sliderGroup.add(S),this._displayables.dataShadowSegs.push(S)}},t.prototype._prepareDataShadowInfo=function(){var e=this.dataZoomModel,i=e.get("showDataShadow");if(i!==!1){var r,o=this.ecModel;return e.eachTargetAxis(function(a,s){var l=e.getAxisProxy(a,s).getTargetSeriesModels();z(l,function(h){if(!r&&!(i!==!0&&ee(rxt,h.get("type"))<0)){var u=o.getComponent(Iu(a),s).axis,d=sxt(a),c,f=h.coordinateSystem;d!=null&&f.getOtherAxis&&(c=f.getOtherAxis(u).inverse),d=h.getData().mapDimension(d),r={thisAxis:u,series:h,thisDim:a,otherDim:d,otherAxisInverse:c}}},this)},this),r}},t.prototype._renderHandle=function(){var e=this.group,i=this._displayables,r=i.handles=[null,null],o=i.handleLabels=[null,null],a=this._displayables.sliderGroup,s=this._size,l=this.dataZoomModel,h=this.api,u=l.get("borderRadius")||0,d=l.get("brushSelect"),c=i.filler=new Wm({silent:d,style:{fill:l.get("fillerColor")},textConfig:{position:"inside"}});a.add(c),a.add(new Wm({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:s[0],height:s[1],r:u},style:{stroke:l.get("dataBackgroundColor")||l.get("borderColor"),lineWidth:ext,fill:"rgba(0,0,0,0)"}})),z([0,1],function(b){var _=l.get("handleIcon");!mx[_]&&_.indexOf("path://")<0&&_.indexOf("image://")<0&&(_="path://"+_);var w=En(_,-1,0,2,2,null,!0);w.attr({cursor:E6(this._orient),draggable:!0,drift:xt(this._onDragMove,this,b),ondragend:xt(this._onDragEnd,this),onmouseover:xt(this._showDataInfo,this,!0),onmouseout:xt(this._showDataInfo,this,!1),z2:5});var C=w.getBoundingRect(),x=l.get("handleSize");this._handleHeight=mt(x,this._size[1]),this._handleWidth=C.width/C.height*this._handleHeight,w.setStyle(l.getModel("handleStyle").getItemStyle()),w.style.strokeNoScale=!0,w.rectHover=!0,w.ensureState("emphasis").style=l.getModel(["emphasis","handleStyle"]).getItemStyle(),af(w);var S=l.get("handleColor");S!=null&&(w.style.fill=S),a.add(r[b]=w);var A=l.getModel("textStyle"),T=l.get("handleLabel")||{},M=T.show||!1;e.add(o[b]=new Re({silent:!0,invisible:!M,style:_i(A,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:A.getTextColor(),font:A.getFont()}),z2:10}))},this);var f=c;if(d){var g=mt(l.get("moveHandleSize"),s[1]),p=i.moveHandle=new Ae({style:l.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:s[1]-.5,height:g}}),v=g*.8,m=i.moveHandleIcon=En(l.get("moveHandleIcon"),-v/2,-v/2,v,v,"#fff",!0);m.silent=!0,m.y=s[1]+g/2-.5,p.ensureState("emphasis").style=l.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var y=Math.min(s[1]/2,Math.max(g,10));f=i.moveZone=new Ae({invisible:!0,shape:{y:s[1]-y,height:g+y}}),f.on("mouseover",function(){h.enterEmphasis(p)}).on("mouseout",function(){h.leaveEmphasis(p)}),a.add(p),a.add(m),a.add(f)}f.attr({draggable:!0,cursor:E6(this._orient),drift:xt(this._onDragMove,this,"all"),ondragstart:xt(this._showDataInfo,this,!0),ondragend:xt(this._onDragEnd,this),onmouseover:xt(this._showDataInfo,this,!0),onmouseout:xt(this._showDataInfo,this,!1)})},t.prototype._resetInterval=function(){var e=this._range=this.dataZoomModel.getPercentRange(),i=this._getViewExtent();this._handleEnds=[qe(e[0],[0,100],i,!0),qe(e[1],[0,100],i,!0)]},t.prototype._updateInterval=function(e,i){var r=this.dataZoomModel,o=this._handleEnds,a=this._getViewExtent(),s=r.findRepresentativeAxisProxy().getMinMaxSpan(),l=[0,100];eg(i,o,a,r.get("zoomLock")?"all":e,s.minSpan!=null?qe(s.minSpan,l,a,!0):null,s.maxSpan!=null?qe(s.maxSpan,l,a,!0):null);var h=this._range,u=this._range=Ha([qe(o[0],a,l,!0),qe(o[1],a,l,!0)]);return!h||h[0]!==u[0]||h[1]!==u[1]},t.prototype._updateView=function(e){var i=this._displayables,r=this._handleEnds,o=Ha(r.slice()),a=this._size;z([0,1],function(f){var g=i.handles[f],p=this._handleHeight;g.attr({scaleX:p/2,scaleY:p/2,x:r[f]+(f?-1:1),y:a[1]/2-p/2})},this),i.filler.setShape({x:o[0],y:0,width:o[1]-o[0],height:a[1]});var s={x:o[0],width:o[1]-o[0]};i.moveHandle&&(i.moveHandle.setShape(s),i.moveZone.setShape(s),i.moveZone.getBoundingRect(),i.moveHandleIcon&&i.moveHandleIcon.attr("x",s.x+s.width/2));for(var l=i.dataShadowSegs,h=[0,o[0],o[1],a[0]],u=0;u<l.length;u++){var d=l[u],c=d.getClipPath();c||(c=new Ae,d.setClipPath(c)),c.setShape({x:h[u],y:0,width:h[u+1]-h[u],height:a[1]})}this._updateDataInfo(e)},t.prototype._updateDataInfo=function(e){var i=this.dataZoomModel,r=this._displayables,o=r.handleLabels,a=this._orient,s=["",""];if(i.get("showDetail")){var l=i.findRepresentativeAxisProxy();if(l){var h=l.getAxisModel().axis,u=this._range,d=e?l.calculateDataWindow({start:u[0],end:u[1]}).valueWindow:l.getDataValueWindow();s=[this._formatLabel(d[0],h),this._formatLabel(d[1],h)]}}var c=Ha(this._handleEnds.slice());f.call(this,0),f.call(this,1);function f(g){var p=sf(r.handles[g].parent,this.group),v=YT(g===0?"right":"left",p),m=this._handleWidth/2+nxt,y=bs([c[g]+(g===0?-m:m),this._size[1]/2],p);o[g].setStyle({x:y[0],y:y[1],verticalAlign:a===Vm?"middle":v,align:a===Vm?v:"center",text:s[g]})}},t.prototype._formatLabel=function(e,i){var r=this.dataZoomModel,o=r.get("labelFormatter"),a=r.get("labelPrecision");(a==null||a==="auto")&&(a=i.getPixelPrecision());var s=e==null||isNaN(e)?"":i.type==="category"||i.type==="time"?i.scale.getLabel({value:Math.round(e)}):e.toFixed(Math.min(a,20));return Dt(o)?o(e,s):Ct(o)?o.replace("{value}",s):s},t.prototype._showDataInfo=function(e){var i=this.dataZoomModel.get("handleLabel")||{},r=i.show||!1,o=this.dataZoomModel.getModel(["emphasis","handleLabel"]),a=o.get("show")||!1,s=e||this._dragging?a:r,l=this._displayables,h=l.handleLabels;h[0].attr("invisible",!s),h[1].attr("invisible",!s),l.moveHandle&&this.api[s?"enterEmphasis":"leaveEmphasis"](l.moveHandle,1)},t.prototype._onDragMove=function(e,i,r,o){this._dragging=!0,Bh(o.event);var a=this._displayables.sliderGroup.getLocalTransform(),s=bs([i,r],a,!0),l=this._updateInterval(e,s[0]),h=this.dataZoomModel.get("realtime");this._updateView(!h),l&&h&&this._dispatchZoomAction(!0)},t.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1);var e=this.dataZoomModel.get("realtime");!e&&this._dispatchZoomAction(!1)},t.prototype._onClickPanel=function(e){var i=this._size,r=this._displayables.sliderGroup.transformCoordToLocal(e.offsetX,e.offsetY);if(!(r[0]<0||r[0]>i[0]||r[1]<0||r[1]>i[1])){var o=this._handleEnds,a=(o[0]+o[1])/2,s=this._updateInterval("all",r[0]-a);this._updateView(),s&&this._dispatchZoomAction(!1)}},t.prototype._onBrushStart=function(e){var i=e.offsetX,r=e.offsetY;this._brushStart=new Jt(i,r),this._brushing=!0,this._brushStartTime=+new Date},t.prototype._onBrushEnd=function(e){if(this._brushing){var i=this._displayables.brushRect;if(this._brushing=!1,!!i){i.attr("ignore",!0);var r=i.shape,o=+new Date;if(!(o-this._brushStartTime<200&&Math.abs(r.width)<5)){var a=this._getViewExtent(),s=[0,100];this._range=Ha([qe(r.x,a,s,!0),qe(r.x+r.width,a,s,!0)]),this._handleEnds=[r.x,r.x+r.width],this._updateView(),this._dispatchZoomAction(!1)}}}},t.prototype._onBrush=function(e){this._brushing&&(Bh(e.event),this._updateBrushRect(e.offsetX,e.offsetY))},t.prototype._updateBrushRect=function(e,i){var r=this._displayables,o=this.dataZoomModel,a=r.brushRect;a||(a=r.brushRect=new Wm({silent:!0,style:o.getModel("brushStyle").getItemStyle()}),r.sliderGroup.add(a)),a.attr("ignore",!1);var s=this._brushStart,l=this._displayables.sliderGroup,h=l.transformCoordToLocal(e,i),u=l.transformCoordToLocal(s.x,s.y),d=this._size;h[0]=Math.max(Math.min(d[0],h[0]),0),a.setShape({x:u[0],y:0,width:h[0]-u[0],height:d[1]})},t.prototype._dispatchZoomAction=function(e){var i=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:e?oxt:null,start:i[0],end:i[1]})},t.prototype._findCoordRect=function(){var e,i=Ntt(this.dataZoomModel).infoList;if(!e&&i.length){var r=i[0].model.coordinateSystem;e=r.getRect&&r.getRect()}if(!e){var o=this.api.getWidth(),a=this.api.getHeight();e={x:o*.2,y:a*.2,width:o*.6,height:a*.6}}return e},t.type="dataZoom.slider",t})(jz);function sxt(n){var t={x:"y",y:"x",radius:"angle",angle:"radius"};return t[n]}function E6(n){return n==="vertical"?"ns-resize":"ew-resize"}function uet(n){n.registerComponentModel(txt),n.registerComponentView(axt),Uz(n)}function lxt(n){ae(het),ae(uet)}var det={get:function(n,t,e){var i=zt((hxt[n]||{})[t]);return e&&ut(i)?i[i.length-1]:i}},hxt={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},D6=qn.mapVisual,uxt=qn.eachVisual,dxt=ut,I6=z,cxt=Ha,fxt=qe,Ox=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e.stateList=["inRange","outOfRange"],e.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],e.layoutMode={type:"box",ignoreSize:!0},e.dataBound=[-1/0,1/0],e.targetVisuals={},e.controllerVisuals={},e}return t.prototype.init=function(e,i,r){this.mergeDefaultAndTheme(e,r)},t.prototype.optionUpdated=function(e,i){var r=this.option;!i&&Ztt(r,e,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},t.prototype.resetVisual=function(e){var i=this.stateList;e=xt(e,this),this.controllerVisuals=CD(this.option.controller,i,e),this.targetVisuals=CD(this.option.target,i,e)},t.prototype.getItemSymbol=function(){return null},t.prototype.getTargetSeriesIndices=function(){var e=this.option.seriesIndex,i=[];return e==null||e==="all"?this.ecModel.eachSeries(function(r,o){i.push(o)}):i=li(e),i},t.prototype.eachTargetSeries=function(e,i){z(this.getTargetSeriesIndices(),function(r){var o=this.ecModel.getSeriesByIndex(r);o&&e.call(i,o)},this)},t.prototype.isTargetSeries=function(e){var i=!1;return this.eachTargetSeries(function(r){r===e&&(i=!0)}),i},t.prototype.formatValueText=function(e,i,r){var o=this.option,a=o.precision,s=this.dataBound,l=o.formatter,h;r=r||["<",">"],ut(e)&&(e=e.slice(),h=!0);var u=i?e:h?[d(e[0]),d(e[1])]:d(e);if(Ct(l))return l.replace("{value}",h?u[0]:u).replace("{value2}",h?u[1]:u);if(Dt(l))return h?l(e[0],e[1]):l(e);if(h)return e[0]===s[0]?r[0]+" "+u[1]:e[1]===s[1]?r[1]+" "+u[0]:u[0]+" - "+u[1];return u;function d(c){return c===s[0]?"min":c===s[1]?"max":(+c).toFixed(Math.min(a,20))}},t.prototype.resetExtent=function(){var e=this.option,i=cxt([e.min,e.max]);this._dataExtent=i},t.prototype.getDataDimensionIndex=function(e){var i=this.option.dimension;if(i!=null)return e.getDimensionIndex(i);for(var r=e.dimensions,o=r.length-1;o>=0;o--){var a=r[o],s=e.getDimensionInfo(a);if(!s.isCalculationCoord)return s.storeDimIndex}},t.prototype.getExtent=function(){return this._dataExtent.slice()},t.prototype.completeVisualOption=function(){var e=this.ecModel,i=this.option,r={inRange:i.inRange,outOfRange:i.outOfRange},o=i.target||(i.target={}),a=i.controller||(i.controller={});Zt(o,r),Zt(a,r);var s=this.isCategory();l.call(this,o),l.call(this,a),h.call(this,o,"inRange","outOfRange"),u.call(this,a);function l(d){dxt(i.color)&&!d.inRange&&(d.inRange={color:i.color.slice().reverse()}),d.inRange=d.inRange||{color:e.get("gradientColor")}}function h(d,c,f){var g=d[c],p=d[f];g&&!p&&(p=d[f]={},I6(g,function(v,m){if(qn.isValidType(m)){var y=det.get(m,"inactive",s);y!=null&&(p[m]=y,m==="color"&&!p.hasOwnProperty("opacity")&&!p.hasOwnProperty("colorAlpha")&&(p.opacity=[0,0]))}}))}function u(d){var c=(d.inRange||{}).symbol||(d.outOfRange||{}).symbol,f=(d.inRange||{}).symbolSize||(d.outOfRange||{}).symbolSize,g=this.get("inactiveColor"),p=this.getItemSymbol(),v=p||"roundRect";I6(this.stateList,function(m){var y=this.itemSize,b=d[m];b||(b=d[m]={color:s?g:[g]}),b.symbol==null&&(b.symbol=c&&zt(c)||(s?v:[v])),b.symbolSize==null&&(b.symbolSize=f&&zt(f)||(s?y[0]:[y[0],y[0]])),b.symbol=D6(b.symbol,function(C){return C==="none"?v:C});var _=b.symbolSize;if(_!=null){var w=-1/0;uxt(_,function(C){C>w&&(w=C)}),b.symbolSize=D6(_,function(C){return fxt(C,[0,w],[0,y[0]],!0)})}},this)}},t.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},t.prototype.isCategory=function(){return!!this.option.categories},t.prototype.setSelected=function(e){},t.prototype.getSelected=function(){return null},t.prototype.getValueState=function(e){return null},t.prototype.getVisualMeta=function(e){return null},t.type="visualMap",t.dependencies=["series"],t.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},t})(ge),O6=[20,140],gxt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.optionUpdated=function(e,i){n.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(r){r.mappingMethod="linear",r.dataExtent=this.getExtent()}),this._resetRange()},t.prototype.resetItemSize=function(){n.prototype.resetItemSize.apply(this,arguments);var e=this.itemSize;(e[0]==null||isNaN(e[0]))&&(e[0]=O6[0]),(e[1]==null||isNaN(e[1]))&&(e[1]=O6[1])},t.prototype._resetRange=function(){var e=this.getExtent(),i=this.option.range;!i||i.auto?(e.auto=1,this.option.range=e):ut(i)&&(i[0]>i[1]&&i.reverse(),i[0]=Math.max(i[0],e[0]),i[1]=Math.min(i[1],e[1]))},t.prototype.completeVisualOption=function(){n.prototype.completeVisualOption.apply(this,arguments),z(this.stateList,function(e){var i=this.option.controller[e].symbolSize;i&&i[0]!==i[1]&&(i[0]=i[1]/3)},this)},t.prototype.setSelected=function(e){this.option.range=e.slice(),this._resetRange()},t.prototype.getSelected=function(){var e=this.getExtent(),i=Ha((this.get("range")||[]).slice());return i[0]>e[1]&&(i[0]=e[1]),i[1]>e[1]&&(i[1]=e[1]),i[0]<e[0]&&(i[0]=e[0]),i[1]<e[0]&&(i[1]=e[0]),i},t.prototype.getValueState=function(e){var i=this.option.range,r=this.getExtent();return(i[0]<=r[0]||i[0]<=e)&&(i[1]>=r[1]||e<=i[1])?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(e){var i=[];return this.eachTargetSeries(function(r){var o=[],a=r.getData();a.each(this.getDataDimensionIndex(a),function(s,l){e[0]<=s&&s<=e[1]&&o.push(l)},this),i.push({seriesId:r.id,dataIndex:o})},this),i},t.prototype.getVisualMeta=function(e){var i=H6(this,"outOfRange",this.getExtent()),r=H6(this,"inRange",this.option.range.slice()),o=[];function a(f,g){o.push({value:f,color:e(f,g)})}for(var s=0,l=0,h=r.length,u=i.length;l<u&&(!r.length||i[l]<=r[0]);l++)i[l]<r[s]&&a(i[l],"outOfRange");for(var d=1;s<h;s++,d=0)d&&o.length&&a(r[s],"outOfRange"),a(r[s],"inRange");for(var d=1;l<u;l++)(!r.length||r[r.length-1]<i[l])&&(d&&(o.length&&a(o[o.length-1].value,"outOfRange"),d=0),a(i[l],"outOfRange"));var c=o.length;return{stops:o,outerColors:[c?o[0].color:"transparent",c?o[c-1].color:"transparent"]}},t.type="visualMap.continuous",t.defaultOption=yd(Ox.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),t})(Ox);function H6(n,t,e){if(e[0]===e[1])return e.slice();for(var i=200,r=(e[1]-e[0])/i,o=e[0],a=[],s=0;s<=i&&o<e[1];s++)a.push(o),o+=r;return a.push(e[1]),a}var cet=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e.autoPositionValues={left:1,right:1,top:1,bottom:1},e}return t.prototype.init=function(e,i){this.ecModel=e,this.api=i},t.prototype.render=function(e,i,r,o){if(this.visualMapModel=e,e.get("show")===!1){this.group.removeAll();return}this.doRender(e,i,r,o)},t.prototype.renderBackground=function(e){var i=this.visualMapModel,r=Gv(i.get("padding")||0),o=e.getBoundingRect();e.add(new Ae({z2:-1,silent:!0,shape:{x:o.x-r[3],y:o.y-r[0],width:o.width+r[3]+r[1],height:o.height+r[0]+r[2]},style:{fill:i.get("backgroundColor"),stroke:i.get("borderColor"),lineWidth:i.get("borderWidth")}}))},t.prototype.getControllerVisual=function(e,i,r){r=r||{};var o=r.forceState,a=this.visualMapModel,s={};if(i==="color"){var l=a.get("contentColor");s.color=l}function h(f){return s[f]}function u(f,g){s[f]=g}var d=a.controllerVisuals[o||a.getValueState(e)],c=qn.prepareVisualTypes(d);return z(c,function(f){var g=d[f];r.convertOpacityToAlpha&&f==="opacity"&&(f="colorAlpha",g=d.__alphaForOpacity),qn.dependsOn(f,i)&&g&&g.applyVisual(e,h,u)}),s[i]},t.prototype.positionGroup=function(e){var i=this.visualMapModel,r=this.api;tM(e,i.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()})},t.prototype.doRender=function(e,i,r,o){},t.type="visualMap",t})(Di),z6=[["left","right","width"],["top","bottom","height"]];function fet(n,t,e){var i=n.option,r=i.align;if(r!=null&&r!=="auto")return r;for(var o={width:t.getWidth(),height:t.getHeight()},a=i.orient==="horizontal"?1:0,s=z6[a],l=[0,null,10],h={},u=0;u<3;u++)h[z6[1-a][u]]=l[u],h[s[u]]=u===2?e[0]:i[s[u]];var d=[["x","width",3],["y","height",0]][a],c=Vn(h,o,i.padding);return s[(c.margin[d[2]]||0)+c[d[0]]+c[d[1]]*.5<o[d[1]]*.5?0:1]}function Tw(n,t){return z(n||[],function(e){e.dataIndex!=null&&(e.dataIndexInside=e.dataIndex,e.dataIndex=null),e.highlightKey="visualMap"+(t?t.componentIndex:"")}),n}var Zs=qe,pxt=z,F6=Math.min,UP=Math.max,vxt=12,mxt=6,yxt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e._shapes={},e._dataInterval=[],e._handleEnds=[],e._hoverLinkDataIndices=[],e}return t.prototype.init=function(e,i){n.prototype.init.call(this,e,i),this._hoverLinkFromSeriesMouseOver=xt(this._hoverLinkFromSeriesMouseOver,this),this._hideIndicator=xt(this._hideIndicator,this)},t.prototype.doRender=function(e,i,r,o){(!o||o.type!=="selectDataRange"||o.from!==this.uid)&&this._buildView()},t.prototype._buildView=function(){this.group.removeAll();var e=this.visualMapModel,i=this.group;this._orient=e.get("orient"),this._useHandle=e.get("calculable"),this._resetInterval(),this._renderBar(i);var r=e.get("text");this._renderEndsText(i,r,0),this._renderEndsText(i,r,1),this._updateView(!0),this.renderBackground(i),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(i)},t.prototype._renderEndsText=function(e,i,r){if(i){var o=i[1-r];o=o!=null?o+"":"";var a=this.visualMapModel,s=a.get("textGap"),l=a.itemSize,h=this._shapes.mainGroup,u=this._applyTransform([l[0]/2,r===0?-s:l[1]+s],h),d=this._applyTransform(r===0?"bottom":"top",h),c=this._orient,f=this.visualMapModel.textStyleModel;this.group.add(new Re({style:_i(f,{x:u[0],y:u[1],verticalAlign:c==="horizontal"?"middle":d,align:c==="horizontal"?d:"center",text:o})}))}},t.prototype._renderBar=function(e){var i=this.visualMapModel,r=this._shapes,o=i.itemSize,a=this._orient,s=this._useHandle,l=fet(i,this.api,o),h=r.mainGroup=this._createBarGroup(l),u=new Ft;h.add(u),u.add(r.outOfRange=N6()),u.add(r.inRange=N6(null,s?V6(this._orient):null,xt(this._dragHandle,this,"all",!1),xt(this._dragHandle,this,"all",!0))),u.setClipPath(new Ae({shape:{x:0,y:0,width:o[0],height:o[1],r:3}}));var d=i.textStyleModel.getTextRect(""),c=UP(d.width,d.height);s&&(r.handleThumbs=[],r.handleLabels=[],r.handleLabelPoints=[],this._createHandle(i,h,0,o,c,a),this._createHandle(i,h,1,o,c,a)),this._createIndicator(i,h,o,c,a),e.add(h)},t.prototype._createHandle=function(e,i,r,o,a,s){var l=xt(this._dragHandle,this,r,!1),h=xt(this._dragHandle,this,r,!0),u=Ss(e.get("handleSize"),o[0]),d=En(e.get("handleIcon"),-u/2,-u/2,u,u,null,!0),c=V6(this._orient);d.attr({cursor:c,draggable:!0,drift:l,ondragend:h,onmousemove:function(m){Bh(m.event)}}),d.x=o[0]/2,d.useStyle(e.getModel("handleStyle").getItemStyle()),d.setStyle({strokeNoScale:!0,strokeFirst:!0}),d.style.lineWidth*=2,d.ensureState("emphasis").style=e.getModel(["emphasis","handleStyle"]).getItemStyle(),Ic(d,!0),i.add(d);var f=this.visualMapModel.textStyleModel,g=new Re({cursor:c,draggable:!0,drift:l,onmousemove:function(m){Bh(m.event)},ondragend:h,style:_i(f,{x:0,y:0,text:""})});g.ensureState("blur").style={opacity:.1},g.stateTransition={duration:200},this.group.add(g);var p=[u,0],v=this._shapes;v.handleThumbs[r]=d,v.handleLabelPoints[r]=p,v.handleLabels[r]=g},t.prototype._createIndicator=function(e,i,r,o,a){var s=Ss(e.get("indicatorSize"),r[0]),l=En(e.get("indicatorIcon"),-s/2,-s/2,s,s,null,!0);l.attr({cursor:"move",invisible:!0,silent:!0,x:r[0]/2});var h=e.getModel("indicatorStyle").getItemStyle();if(l instanceof hr){var u=l.style;l.useStyle(ht({image:u.image,x:u.x,y:u.y,width:u.width,height:u.height},h))}else l.useStyle(h);i.add(l);var d=this.visualMapModel.textStyleModel,c=new Re({silent:!0,invisible:!0,style:_i(d,{x:0,y:0,text:""})});this.group.add(c);var f=[(a==="horizontal"?o/2:mxt)+r[0]/2,0],g=this._shapes;g.indicator=l,g.indicatorLabel=c,g.indicatorLabelPoint=f,this._firstShowIndicator=!0},t.prototype._dragHandle=function(e,i,r,o){if(this._useHandle){if(this._dragging=!i,!i){var a=this._applyTransform([r,o],this._shapes.mainGroup,!0);this._updateInterval(e,a[1]),this._hideIndicator(),this._updateView()}i===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),i?!this._hovering&&this._clearHoverLinkToSeries():W6(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[e],!1)}},t.prototype._resetInterval=function(){var e=this.visualMapModel,i=this._dataInterval=e.getSelected(),r=e.getExtent(),o=[0,e.itemSize[1]];this._handleEnds=[Zs(i[0],r,o,!0),Zs(i[1],r,o,!0)]},t.prototype._updateInterval=function(e,i){i=i||0;var r=this.visualMapModel,o=this._handleEnds,a=[0,r.itemSize[1]];eg(i,o,a,e,0);var s=r.getExtent();this._dataInterval=[Zs(o[0],a,s,!0),Zs(o[1],a,s,!0)]},t.prototype._updateView=function(e){var i=this.visualMapModel,r=i.getExtent(),o=this._shapes,a=[0,i.itemSize[1]],s=e?a:this._handleEnds,l=this._createBarVisual(this._dataInterval,r,s,"inRange"),h=this._createBarVisual(r,r,a,"outOfRange");o.inRange.setStyle({fill:l.barColor}).setShape("points",l.barPoints),o.outOfRange.setStyle({fill:h.barColor}).setShape("points",h.barPoints),this._updateHandle(s,l)},t.prototype._createBarVisual=function(e,i,r,o){var a={forceState:o,convertOpacityToAlpha:!0},s=this._makeColorGradient(e,a),l=[this.getControllerVisual(e[0],"symbolSize",a),this.getControllerVisual(e[1],"symbolSize",a)],h=this._createBarPoints(r,l);return{barColor:new o_(0,0,0,1,s),barPoints:h,handlesColor:[s[0].color,s[s.length-1].color]}},t.prototype._makeColorGradient=function(e,i){var r=100,o=[],a=(e[1]-e[0])/r;o.push({color:this.getControllerVisual(e[0],"color",i),offset:0});for(var s=1;s<r;s++){var l=e[0]+a*s;if(l>e[1])break;o.push({color:this.getControllerVisual(l,"color",i),offset:s/r})}return o.push({color:this.getControllerVisual(e[1],"color",i),offset:1}),o},t.prototype._createBarPoints=function(e,i){var r=this.visualMapModel.itemSize;return[[r[0]-i[0],e[0]],[r[0],e[0]],[r[0],e[1]],[r[0]-i[1],e[1]]]},t.prototype._createBarGroup=function(e){var i=this._orient,r=this.visualMapModel.get("inverse");return new Ft(i==="horizontal"&&!r?{scaleX:e==="bottom"?1:-1,rotation:Math.PI/2}:i==="horizontal"&&r?{scaleX:e==="bottom"?-1:1,rotation:-Math.PI/2}:i==="vertical"&&!r?{scaleX:e==="left"?1:-1,scaleY:-1}:{scaleX:e==="left"?1:-1})},t.prototype._updateHandle=function(e,i){if(this._useHandle){var r=this._shapes,o=this.visualMapModel,a=r.handleThumbs,s=r.handleLabels,l=o.itemSize,h=o.getExtent(),u=this._applyTransform("left",r.mainGroup);pxt([0,1],function(d){var c=a[d];c.setStyle("fill",i.handlesColor[d]),c.y=e[d];var f=Zs(e[d],[0,l[1]],h,!0),g=this.getControllerVisual(f,"symbolSize");c.scaleX=c.scaleY=g/l[0],c.x=l[0]-g/2;var p=bs(r.handleLabelPoints[d],sf(c,this.group));if(this._orient==="horizontal"){var v=u==="left"||u==="top"?(l[0]-g)/2:(l[0]-g)/-2;p[1]+=v}s[d].setStyle({x:p[0],y:p[1],text:o.formatValueText(this._dataInterval[d]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",r.mainGroup):"center"})},this)}},t.prototype._showIndicator=function(e,i,r,o){var a=this.visualMapModel,s=a.getExtent(),l=a.itemSize,h=[0,l[1]],u=this._shapes,d=u.indicator;if(d){d.attr("invisible",!1);var c={convertOpacityToAlpha:!0},f=this.getControllerVisual(e,"color",c),g=this.getControllerVisual(e,"symbolSize"),p=Zs(e,s,h,!0),v=l[0]-g/2,m={x:d.x,y:d.y};d.y=p,d.x=v;var y=bs(u.indicatorLabelPoint,sf(d,this.group)),b=u.indicatorLabel;b.attr("invisible",!1);var _=this._applyTransform("left",u.mainGroup),w=this._orient,C=w==="horizontal";b.setStyle({text:(r||"")+a.formatValueText(i),verticalAlign:C?_:"middle",align:C?"center":_});var x={x:v,y:p,style:{fill:f}},S={style:{x:y[0],y:y[1]}};if(a.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var A={duration:100,easing:"cubicInOut",additive:!0};d.x=m.x,d.y=m.y,d.animateTo(x,A),b.animateTo(S,A)}else d.attr(x),b.attr(S);this._firstShowIndicator=!1;var T=this._shapes.handleLabels;if(T)for(var M=0;M<T.length;M++)this.api.enterBlur(T[M])}},t.prototype._enableHoverLinkToSeries=function(){var e=this;this._shapes.mainGroup.on("mousemove",function(i){if(e._hovering=!0,!e._dragging){var r=e.visualMapModel.itemSize,o=e._applyTransform([i.offsetX,i.offsetY],e._shapes.mainGroup,!0,!0);o[1]=F6(UP(0,o[1]),r[1]),e._doHoverLinkToSeries(o[1],0<=o[0]&&o[0]<=r[0])}}).on("mouseout",function(){e._hovering=!1,!e._dragging&&e._clearHoverLinkToSeries()})},t.prototype._enableHoverLinkFromSeries=function(){var e=this.api.getZr();this.visualMapModel.option.hoverLink?(e.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),e.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},t.prototype._doHoverLinkToSeries=function(e,i){var r=this.visualMapModel,o=r.itemSize;if(r.option.hoverLink){var a=[0,o[1]],s=r.getExtent();e=F6(UP(a[0],e),a[1]);var l=bxt(r,s,a),h=[e-l,e+l],u=Zs(e,a,s,!0),d=[Zs(h[0],a,s,!0),Zs(h[1],a,s,!0)];h[0]<a[0]&&(d[0]=-1/0),h[1]>a[1]&&(d[1]=1/0),i&&(d[0]===-1/0?this._showIndicator(u,d[1],"< ",l):d[1]===1/0?this._showIndicator(u,d[0],"> ",l):this._showIndicator(u,u," ",l));var c=this._hoverLinkDataIndices,f=[];(i||W6(r))&&(f=this._hoverLinkDataIndices=r.findTargetDataIndices(d));var g=Dct(c,f);this._dispatchHighDown("downplay",Tw(g[0],r)),this._dispatchHighDown("highlight",Tw(g[1],r))}},t.prototype._hoverLinkFromSeriesMouseOver=function(e){var i;if(Hc(e.target,function(l){var h=Vt(l);if(h.dataIndex!=null)return i=h,!0},!0),!!i){var r=this.ecModel.getSeriesByIndex(i.seriesIndex),o=this.visualMapModel;if(o.isTargetSeries(r)){var a=r.getData(i.dataType),s=a.getStore().get(o.getDataDimensionIndex(a),i.dataIndex);isNaN(s)||this._showIndicator(s,s)}}},t.prototype._hideIndicator=function(){var e=this._shapes;e.indicator&&e.indicator.attr("invisible",!0),e.indicatorLabel&&e.indicatorLabel.attr("invisible",!0);var i=this._shapes.handleLabels;if(i)for(var r=0;r<i.length;r++)this.api.leaveBlur(i[r])},t.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var e=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",Tw(e,this.visualMapModel)),e.length=0},t.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var e=this.api.getZr();e.off("mouseover",this._hoverLinkFromSeriesMouseOver),e.off("mouseout",this._hideIndicator)},t.prototype._applyTransform=function(e,i,r,o){var a=sf(i,o?null:this.group);return ut(e)?bs(e,a,r):YT(e,a,r)},t.prototype._dispatchHighDown=function(e,i){i&&i.length&&this.api.dispatchAction({type:e,batch:i})},t.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},t.type="visualMap.continuous",t})(cet);function N6(n,t,e,i){return new uo({shape:{points:n},draggable:!!e,cursor:t,drift:e,onmousemove:function(r){Bh(r.event)},ondragend:i})}function bxt(n,t,e){var i=vxt/2,r=n.get("hoverLinkDataSize");return r&&(i=Zs(r,t,e,!0)/2),i}function W6(n){var t=n.get("hoverLinkOnHandle");return!!(t??n.get("realtime"))}function V6(n){return n==="vertical"?"ns-resize":"ew-resize"}var _xt={type:"selectDataRange",event:"dataRangeSelected",update:"update"},Cxt=function(n,t){t.eachComponent({mainType:"visualMap",query:n},function(e){e.setSelected(n.selected)})},wxt=[{createOnAllSeries:!0,reset:function(n,t){var e=[];return t.eachComponent("visualMap",function(i){var r=n.pipelineContext;!i.isTargetSeries(n)||r&&r.large||e.push(N1t(i.stateList,i.targetVisuals,xt(i.getValueState,i),i.getDataDimensionIndex(n.getData())))}),e}},{createOnAllSeries:!0,reset:function(n,t){var e=n.getData(),i=[];t.eachComponent("visualMap",function(r){if(r.isTargetSeries(n)){var o=r.getVisualMeta(xt(xxt,null,n,r))||{stops:[],outerColors:[]},a=r.getDataDimensionIndex(e);a>=0&&(o.dimension=a,i.push(o))}}),n.getData().setVisual("visualMeta",i)}}];function xxt(n,t,e,i){for(var r=t.targetVisuals[i],o=qn.prepareVisualTypes(r),a={color:h_(n.getData(),"color")},s=0,l=o.length;s<l;s++){var h=o[s],u=r[h==="opacity"?"__alphaForOpacity":h];u&&u.applyVisual(e,d,c)}return a.color;function d(f){return a[f]}function c(f,g){a[f]=g}}var G6=z;function Sxt(n){var t=n&&n.visualMap;ut(t)||(t=t?[t]:[]),G6(t,function(e){if(e){Sg(e,"splitList")&&!Sg(e,"pieces")&&(e.pieces=e.splitList,delete e.splitList);var i=e.pieces;i&&ut(i)&&G6(i,function(r){Ht(r)&&(Sg(r,"start")&&!Sg(r,"min")&&(r.min=r.start),Sg(r,"end")&&!Sg(r,"max")&&(r.max=r.end))})}})}function Sg(n,t){return n&&n.hasOwnProperty&&n.hasOwnProperty(t)}var $6=!1;function get(n){$6||($6=!0,n.registerSubTypeDefaulter("visualMap",function(t){return!t.categories&&(!(t.pieces?t.pieces.length>0:t.splitNumber>0)||t.calculable)?"continuous":"piecewise"}),n.registerAction(_xt,Cxt),z(wxt,function(t){n.registerVisual(n.PRIORITY.VISUAL.COMPONENT,t)}),n.registerPreprocessor(Sxt))}function pet(n){n.registerComponentModel(gxt),n.registerComponentView(yxt),get(n)}var Axt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e._pieceList=[],e}return t.prototype.optionUpdated=function(e,i){n.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var r=this._mode=this._determineMode();this._pieceList=[],Txt[this._mode].call(this,this._pieceList),this._resetSelected(e,i);var o=this.option.categories;this.resetVisual(function(a,s){r==="categories"?(a.mappingMethod="category",a.categories=zt(o)):(a.dataExtent=this.getExtent(),a.mappingMethod="piecewise",a.pieceList=ct(this._pieceList,function(l){return l=zt(l),s!=="inRange"&&(l.visual=null),l}))})},t.prototype.completeVisualOption=function(){var e=this.option,i={},r=qn.listVisualTypes(),o=this.isCategory();z(e.pieces,function(s){z(r,function(l){s.hasOwnProperty(l)&&(i[l]=1)})}),z(i,function(s,l){var h=!1;z(this.stateList,function(u){h=h||a(e,u,l)||a(e.target,u,l)},this),!h&&z(this.stateList,function(u){(e[u]||(e[u]={}))[l]=det.get(l,u==="inRange"?"active":"inactive",o)})},this);function a(s,l,h){return s&&s[l]&&s[l].hasOwnProperty(h)}n.prototype.completeVisualOption.apply(this,arguments)},t.prototype._resetSelected=function(e,i){var r=this.option,o=this._pieceList,a=(i?r:e).selected||{};if(r.selected=a,z(o,function(l,h){var u=this.getSelectedMapKey(l);a.hasOwnProperty(u)||(a[u]=!0)},this),r.selectedMode==="single"){var s=!1;z(o,function(l,h){var u=this.getSelectedMapKey(l);a[u]&&(s?a[u]=!1:s=!0)},this)}},t.prototype.getItemSymbol=function(){return this.get("itemSymbol")},t.prototype.getSelectedMapKey=function(e){return this._mode==="categories"?e.value+"":e.index+""},t.prototype.getPieceList=function(){return this._pieceList},t.prototype._determineMode=function(){var e=this.option;return e.pieces&&e.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},t.prototype.setSelected=function(e){this.option.selected=zt(e)},t.prototype.getValueState=function(e){var i=qn.findPieceIndex(e,this._pieceList);return i!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[i])]?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(e){var i=[],r=this._pieceList;return this.eachTargetSeries(function(o){var a=[],s=o.getData();s.each(this.getDataDimensionIndex(s),function(l,h){var u=qn.findPieceIndex(l,r);u===e&&a.push(h)},this),i.push({seriesId:o.id,dataIndex:a})},this),i},t.prototype.getRepresentValue=function(e){var i;if(this.isCategory())i=e.value;else if(e.value!=null)i=e.value;else{var r=e.interval||[];i=r[0]===-1/0&&r[1]===1/0?0:(r[0]+r[1])/2}return i},t.prototype.getVisualMeta=function(e){if(this.isCategory())return;var i=[],r=["",""],o=this;function a(u,d){var c=o.getRepresentValue({interval:u});d||(d=o.getValueState(c));var f=e(c,d);u[0]===-1/0?r[0]=f:u[1]===1/0?r[1]=f:i.push({value:u[0],color:f},{value:u[1],color:f})}var s=this._pieceList.slice();if(!s.length)s.push({interval:[-1/0,1/0]});else{var l=s[0].interval[0];l!==-1/0&&s.unshift({interval:[-1/0,l]}),l=s[s.length-1].interval[1],l!==1/0&&s.push({interval:[l,1/0]})}var h=-1/0;return z(s,function(u){var d=u.interval;d&&(d[0]>h&&a([h,d[0]],"outOfRange"),a(d.slice()),h=d[1])},this),{stops:i,outerColors:r}},t.type="visualMap.piecewise",t.defaultOption=yd(Ox.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),t})(Ox),Txt={splitNumber:function(n){var t=this.option,e=Math.min(t.precision,20),i=this.getExtent(),r=t.splitNumber;r=Math.max(parseInt(r,10),1),t.splitNumber=r;for(var o=(i[1]-i[0])/r;+o.toFixed(e)!==o&&e<5;)e++;t.precision=e,o=+o.toFixed(e),t.minOpen&&n.push({interval:[-1/0,i[0]],close:[0,0]});for(var a=0,s=i[0];a<r;s+=o,a++){var l=a===r-1?i[1]:s+o;n.push({interval:[s,l],close:[1,1]})}t.maxOpen&&n.push({interval:[i[1],1/0],close:[0,0]}),h5(n),z(n,function(h,u){h.index=u,h.text=this.formatValueText(h.interval)},this)},categories:function(n){var t=this.option;z(t.categories,function(e){n.push({text:this.formatValueText(e,!0),value:e})},this),j6(t,n)},pieces:function(n){var t=this.option;z(t.pieces,function(e,i){Ht(e)||(e={value:e});var r={text:"",index:i};if(e.label!=null&&(r.text=e.label),e.hasOwnProperty("value")){var o=r.value=e.value;r.interval=[o,o],r.close=[1,1]}else{for(var a=r.interval=[],s=r.close=[0,0],l=[1,0,1],h=[-1/0,1/0],u=[],d=0;d<2;d++){for(var c=[["gte","gt","min"],["lte","lt","max"]][d],f=0;f<3&&a[d]==null;f++)a[d]=e[c[f]],s[d]=l[f],u[d]=f===2;a[d]==null&&(a[d]=h[d])}u[0]&&a[1]===1/0&&(s[0]=0),u[1]&&a[0]===-1/0&&(s[1]=0),a[0]===a[1]&&s[0]&&s[1]&&(r.value=a[0])}r.visual=qn.retrieveVisuals(e),n.push(r)},this),j6(t,n),h5(n),z(n,function(e){var i=e.close,r=[["<",""][i[1]],[">",""][i[0]]];e.text=e.text||this.formatValueText(e.value!=null?e.value:e.interval,!1,r)},this)}};function j6(n,t){var e=n.inverse;(n.orient==="vertical"?!e:e)&&t.reverse()}var Mxt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.doRender=function(){var e=this.group;e.removeAll();var i=this.visualMapModel,r=i.get("textGap"),o=i.textStyleModel,a=o.getFont(),s=o.getTextColor(),l=this._getItemAlign(),h=i.itemSize,u=this._getViewData(),d=u.endsText,c=rr(i.get("showLabel",!0),!d),f=!i.get("selectedMode");d&&this._renderEndsText(e,d[0],h,c,l),z(u.viewPieceList,function(g){var p=g.piece,v=new Ft;v.onclick=xt(this._onItemClick,this,p),this._enableHoverLink(v,g.indexInModelPieceList);var m=i.getRepresentValue(p);if(this._createItemSymbol(v,m,[0,0,h[0],h[1]],f),c){var y=this.visualMapModel.getValueState(m);v.add(new Re({style:{x:l==="right"?-r:h[0]+r,y:h[1]/2,text:p.text,verticalAlign:"middle",align:l,font:a,fill:s,opacity:y==="outOfRange"?.5:1},silent:f}))}e.add(v)},this),d&&this._renderEndsText(e,d[1],h,c,l),lf(i.get("orient"),e,i.get("itemGap")),this.renderBackground(e),this.positionGroup(e)},t.prototype._enableHoverLink=function(e,i){var r=this;e.on("mouseover",function(){return o("highlight")}).on("mouseout",function(){return o("downplay")});var o=function(a){var s=r.visualMapModel;s.option.hoverLink&&r.api.dispatchAction({type:a,batch:Tw(s.findTargetDataIndices(i),s)})}},t.prototype._getItemAlign=function(){var e=this.visualMapModel,i=e.option;if(i.orient==="vertical")return fet(e,this.api,e.itemSize);var r=i.align;return(!r||r==="auto")&&(r="left"),r},t.prototype._renderEndsText=function(e,i,r,o,a){if(i){var s=new Ft,l=this.visualMapModel.textStyleModel;s.add(new Re({style:_i(l,{x:o?a==="right"?r[0]:0:r[0]/2,y:r[1]/2,verticalAlign:"middle",align:o?a:"center",text:i})})),e.add(s)}},t.prototype._getViewData=function(){var e=this.visualMapModel,i=ct(e.getPieceList(),function(s,l){return{piece:s,indexInModelPieceList:l}}),r=e.get("text"),o=e.get("orient"),a=e.get("inverse");return(o==="horizontal"?a:!a)?i.reverse():r&&(r=r.slice().reverse()),{viewPieceList:i,endsText:r}},t.prototype._createItemSymbol=function(e,i,r,o){var a=En(this.getControllerVisual(i,"symbol"),r[0],r[1],r[2],r[3],this.getControllerVisual(i,"color"));a.silent=o,e.add(a)},t.prototype._onItemClick=function(e){var i=this.visualMapModel,r=i.option,o=r.selectedMode;if(o){var a=zt(r.selected),s=i.getSelectedMapKey(e);o==="single"||o===!0?(a[s]=!0,z(a,function(l,h){a[h]=h===s})):a[s]=!a[s],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:a})}},t.type="visualMap.piecewise",t})(cet);function vet(n){n.registerComponentModel(Axt),n.registerComponentView(Mxt),get(n)}function Rxt(n){ae(pet),ae(vet)}var Pxt={label:{enabled:!0},decal:{show:!1}},U6=Te(),Bxt={};function kxt(n,t){var e=n.getModel("aria");if(!e.get("enabled"))return;var i=zt(Pxt);Zt(i.label,n.getLocaleModel().get("aria"),!1),Zt(e.option,i,!1),r(),o();function r(){var h=e.getModel("decal"),u=h.get("show");if(u){var d=Pt();n.eachSeries(function(c){if(!c.isColorBySeries()){var f=d.get(c.type);f||(f={},d.set(c.type,f)),U6(c).scope=f}}),n.eachRawSeries(function(c){if(n.isSeriesFiltered(c))return;if(Dt(c.enableAriaDecal)){c.enableAriaDecal();return}var f=c.getData();if(c.isColorBySeries()){var y=FE(c.ecModel,c.name,Bxt,n.getSeriesCount()),b=f.getVisual("decal");f.setVisual("decal",_(b,y))}else{var g=c.getRawData(),p={},v=U6(c).scope;f.each(function(w){var C=f.getRawIndex(w);p[C]=w});var m=g.count();g.each(function(w){var C=p[w],x=g.getName(w)||w+"",S=FE(c.ecModel,x,v,m),A=f.getItemVisual(C,"decal");f.setItemVisual(C,"decal",_(A,S))})}function _(w,C){var x=w?ht(ht({},C),w):C;return x.dirty=!0,x}})}}function o(){var h=t.getZr().dom;if(h){var u=n.getLocaleModel().get("aria"),d=e.getModel("label");if(d.option=Ot(d.option,u),!!d.get("enabled")){if(h.setAttribute("role","img"),d.get("description")){h.setAttribute("aria-label",d.get("description"));return}var c=n.getSeriesCount(),f=d.get(["data","maxCount"])||10,g=d.get(["series","maxCount"])||10,p=Math.min(c,g),v;if(!(c<1)){var m=s();if(m){var y=d.get(["general","withTitle"]);v=a(y,{title:m})}else v=d.get(["general","withoutTitle"]);var b=[],_=c>1?d.get(["series","multiple","prefix"]):d.get(["series","single","prefix"]);v+=a(_,{seriesCount:c}),n.eachSeries(function(S,A){if(A<p){var T=void 0,M=S.get("name"),R=M?"withName":"withoutName";T=c>1?d.get(["series","multiple",R]):d.get(["series","single",R]),T=a(T,{seriesId:S.seriesIndex,seriesName:S.get("name"),seriesType:l(S.subType)});var L=S.getData();if(L.count()>f){var B=d.get(["data","partialData"]);T+=a(B,{displayCnt:f})}else T+=d.get(["data","allData"]);for(var P=d.get(["data","separator","middle"]),k=d.get(["data","separator","end"]),E=d.get(["data","excludeDimensionId"]),D=[],I=0;I<L.count();I++)if(I<f){var O=L.getName(I),H=E?Ge(L.getValues(I),function(N,$){return ee(E,$)===-1}):L.getValues(I),F=d.get(["data",O?"withName":"withoutName"]);D.push(a(F,{name:O,value:H.join(P)}))}T+=D.join(P)+k,b.push(T)}});var w=d.getModel(["series","multiple","separator"]),C=w.get("middle"),x=w.get("end");v+=b.join(C)+x,h.setAttribute("aria-label",v)}}}}function a(h,u){if(!Ct(h))return h;var d=h;return z(u,function(c,f){d=d.replace(new RegExp("\\{\\s*"+f+"\\s*\\}","g"),c)}),d}function s(){var h=n.get("title");return h&&h.length&&(h=h[0]),h&&h.text}function l(h){var u=n.getLocaleModel().get(["series","typeNames"]);return u[h]||u.chart}}function Lxt(n){if(!(!n||!n.aria)){var t=n.aria;t.show!=null&&(t.enabled=t.show),t.label=t.label||{},z(["description","general","series","data"],function(e){t[e]!=null&&(t.label[e]=t[e])})}}function Ext(n){n.registerPreprocessor(Lxt),n.registerVisual(n.PRIORITY.VISUAL.ARIA,kxt)}var Y6={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},Dxt=(function(){function n(t){var e=this._condVal=Ct(t)?new RegExp(t):tdt(t)?t:null;if(e==null){var i="";Ve(i)}}return n.prototype.evaluate=function(t){var e=typeof t;return Ct(e)?this._condVal.test(t):Le(e)?this._condVal.test(t+""):!1},n})(),Ixt=(function(){function n(){}return n.prototype.evaluate=function(){return this.value},n})(),Oxt=(function(){function n(){}return n.prototype.evaluate=function(){for(var t=this.children,e=0;e<t.length;e++)if(!t[e].evaluate())return!1;return!0},n})(),Hxt=(function(){function n(){}return n.prototype.evaluate=function(){for(var t=this.children,e=0;e<t.length;e++)if(t[e].evaluate())return!0;return!1},n})(),zxt=(function(){function n(){}return n.prototype.evaluate=function(){return!this.child.evaluate()},n})(),Fxt=(function(){function n(){}return n.prototype.evaluate=function(){for(var t=!!this.valueParser,e=this.getValue,i=e(this.valueGetterParam),r=t?this.valueParser(i):null,o=0;o<this.subCondList.length;o++)if(!this.subCondList[o].evaluate(t?r:i))return!1;return!0},n})();function nF(n,t){if(n===!0||n===!1){var e=new Ixt;return e.value=n,e}var i="";return met(n)||Ve(i),n.and?X6("and",n,t):n.or?X6("or",n,t):n.not?Nxt(n,t):Wxt(n,t)}function X6(n,t,e){var i=t[n],r="";ut(i)||Ve(r),i.length||Ve(r);var o=n==="and"?new Oxt:new Hxt;return o.children=ct(i,function(a){return nF(a,e)}),o.children.length||Ve(r),o}function Nxt(n,t){var e=n.not,i="";met(e)||Ve(i);var r=new zxt;return r.child=nF(e,t),r.child||Ve(i),r}function Wxt(n,t){for(var e="",i=t.prepareGetValue(n),r=[],o=pe(n),a=n.parser,s=a?cJ(a):null,l=0;l<o.length;l++){var h=o[l];if(!(h==="parser"||t.valueGetterAttrMap.get(h))){var u=At(Y6,h)?Y6[h]:h,d=n[h],c=s?s(d):d,f=Hpt(u,c)||u==="reg"&&new Dxt(c);f||Ve(e),r.push(f)}}r.length||Ve(e);var g=new Fxt;return g.valueGetterParam=i,g.valueParser=s,g.getValue=t.getValue,g.subCondList=r,g}function met(n){return Ht(n)&&!Wr(n)}var Vxt=(function(){function n(t,e){this._cond=nF(t,e)}return n.prototype.evaluate=function(){return this._cond.evaluate()},n})();function Gxt(n,t){return new Vxt(n,t)}var $xt={type:"echarts:filter",transform:function(n){for(var t=n.upstream,e,i=Gxt(n.config,{valueGetterAttrMap:Pt({dimension:!0}),prepareGetValue:function(s){var l="",h=s.dimension;At(s,"dimension")||Ve(l);var u=t.getDimensionInfo(h);return u||Ve(l),{dimIdx:u.index}},getValue:function(s){return t.retrieveValueFromItem(e,s.dimIdx)}}),r=[],o=0,a=t.count();o<a;o++)e=t.getRawDataItem(o),i.evaluate()&&r.push(e);return{data:r}}},jxt={type:"echarts:sort",transform:function(n){var t=n.upstream,e=n.config,i="",r=li(e);r.length||Ve(i);var o=[];z(r,function(u){var d=u.dimension,c=u.order,f=u.parser,g=u.incomparable;if(d==null&&Ve(i),c!=="asc"&&c!=="desc"&&Ve(i),g&&g!=="min"&&g!=="max"){var p="";Ve(p)}if(c!=="asc"&&c!=="desc"){var v="";Ve(v)}var m=t.getDimensionInfo(d);m||Ve(i);var y=f?cJ(f):null;f&&!y&&Ve(i),o.push({dimIdx:m.index,parser:y,comparator:new gJ(c,g)})});var a=t.sourceFormat;a!==Vr&&a!==qa&&Ve(i);for(var s=[],l=0,h=t.count();l<h;l++)s.push(t.getRawDataItem(l));return s.sort(function(u,d){for(var c=0;c<o.length;c++){var f=o[c],g=t.retrieveValueFromItem(u,f.dimIdx),p=t.retrieveValueFromItem(d,f.dimIdx);f.parser&&(g=f.parser(g),p=f.parser(p));var v=f.comparator.evaluate(g,p);if(v!==0)return v}return 0}),{data:s}}};function Uxt(n){n.registerTransform($xt),n.registerTransform(jxt)}var Yxt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="dataset",e}return t.prototype.init=function(e,i,r){n.prototype.init.call(this,e,i,r),this._sourceManager=new yJ(this),CW(this)},t.prototype.mergeOption=function(e,i){n.prototype.mergeOption.call(this,e,i),CW(this)},t.prototype.optionUpdated=function(){this._sourceManager.dirty()},t.prototype.getSourceManager=function(){return this._sourceManager},t.type="dataset",t.defaultOption={seriesLayoutBy:vl},t})(ge),Xxt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="dataset",e}return t.type="dataset",t})(Di);function qxt(n){n.registerComponentModel(Yxt),n.registerComponentView(Xxt)}var Kxt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e.hasSymbolVisual=!0,e}return t.prototype.getInitialData=function(e){return qh(null,this,{useEncodeDefaulter:!0})},t.prototype.getLegendIcon=function(e){var i=new Ft,r=En("line",0,e.itemHeight/2,e.itemWidth,0,e.lineStyle.stroke,!1);i.add(r),r.setStyle(e.lineStyle);var o=this.getData().getVisual("symbol"),a=this.getData().getVisual("symbolRotate"),s=o==="none"?"circle":o,l=e.itemHeight*.8,h=En(s,(e.itemWidth-l)/2,(e.itemHeight-l)/2,l,l,e.itemStyle.fill);i.add(h),h.setStyle(e.itemStyle);var u=e.iconRotate==="inherit"?a:e.iconRotate||0;return h.rotation=u*Math.PI/180,h.setOrigin([e.itemWidth/2,e.itemHeight/2]),s.indexOf("empty")>-1&&(h.style.stroke=h.style.fill,h.style.fill="#fff",h.style.lineWidth=2),i},t.type="series.line",t.dependencies=["grid","polar"],t.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},t})(Ci);function yet(n,t,e){var i=n.getBaseAxis(),r=n.getOtherAxis(i),o=Zxt(r,e),a=i.dim,s=r.dim,l=t.mapDimension(s),h=t.mapDimension(a),u=s==="x"||s==="radius"?1:0,d=ct(n.dimensions,function(g){return t.mapDimension(g)}),c=!1,f=t.getCalculationInfo("stackResultDimension");return id(t,d[0])&&(c=!0,d[0]=f),id(t,d[1])&&(c=!0,d[1]=f),{dataDimsForPoint:d,valueStart:o,valueAxisDim:s,baseAxisDim:a,stacked:!!c,valueDim:l,baseDim:h,baseDataOffset:u,stackedOverDimension:t.getCalculationInfo("stackedOverDimension")}}function Zxt(n,t){var e=0,i=n.scale.getExtent();return t==="start"?e=i[0]:t==="end"?e=i[1]:Le(t)&&!isNaN(t)?e=t:i[0]>0?e=i[0]:i[1]<0&&(e=i[1]),e}function bet(n,t,e,i){var r=NaN;n.stacked&&(r=e.get(e.getCalculationInfo("stackedOverDimension"),i)),isNaN(r)&&(r=n.valueStart);var o=n.baseDataOffset,a=[];return a[o]=e.get(n.baseDim,i),a[1-o]=r,t.dataToPoint(a)}function Jxt(n,t){var e=[];return t.diff(n).add(function(i){e.push({cmd:"+",idx:i})}).update(function(i,r){e.push({cmd:"=",idx:r,idx1:i})}).remove(function(i){e.push({cmd:"-",idx:i})}).execute(),e}function Qxt(n,t,e,i,r,o,a,s){for(var l=Jxt(n,t),h=[],u=[],d=[],c=[],f=[],g=[],p=[],v=yet(r,t,a),m=n.getLayout("points")||[],y=t.getLayout("points")||[],b=0;b<l.length;b++){var _=l[b],w=!0,C=void 0,x=void 0;switch(_.cmd){case"=":C=_.idx*2,x=_.idx1*2;var S=m[C],A=m[C+1],T=y[x],M=y[x+1];(isNaN(S)||isNaN(A))&&(S=T,A=M),h.push(S,A),u.push(T,M),d.push(e[C],e[C+1]),c.push(i[x],i[x+1]),p.push(t.getRawIndex(_.idx1));break;case"+":var R=_.idx,L=v.dataDimsForPoint,B=r.dataToPoint([t.get(L[0],R),t.get(L[1],R)]);x=R*2,h.push(B[0],B[1]),u.push(y[x],y[x+1]);var P=bet(v,r,t,R);d.push(P[0],P[1]),c.push(i[x],i[x+1]),p.push(t.getRawIndex(R));break;case"-":w=!1}w&&(f.push(_),g.push(g.length))}g.sort(function(V,X){return p[V]-p[X]});for(var k=h.length,E=ul(k),D=ul(k),I=ul(k),O=ul(k),H=[],b=0;b<g.length;b++){var F=g[b],N=b*2,$=F*2;E[N]=h[$],E[N+1]=h[$+1],D[N]=u[$],D[N+1]=u[$+1],I[N]=d[$],I[N+1]=d[$+1],O[N]=c[$],O[N+1]=c[$+1],H[b]=f[F]}return{current:E,next:D,stackedOnCurrent:I,stackedOnNext:O,status:H}}var ou=Math.min,au=Math.max;function uf(n,t){return isNaN(n)||isNaN(t)}function PD(n,t,e,i,r,o,a,s,l){for(var h,u,d,c,f,g,p=e,v=0;v<i;v++){var m=t[p*2],y=t[p*2+1];if(p>=r||p<0)break;if(uf(m,y)){if(l){p+=o;continue}break}if(p===e)n[o>0?"moveTo":"lineTo"](m,y),d=m,c=y;else{var b=m-h,_=y-u;if(b*b+_*_<.5){p+=o;continue}if(a>0){for(var w=p+o,C=t[w*2],x=t[w*2+1];C===m&&x===y&&v<i;)v++,w+=o,p+=o,C=t[w*2],x=t[w*2+1],m=t[p*2],y=t[p*2+1],b=m-h,_=y-u;var S=v+1;if(l)for(;uf(C,x)&&S<i;)S++,w+=o,C=t[w*2],x=t[w*2+1];var A=.5,T=0,M=0,R=void 0,L=void 0;if(S>=i||uf(C,x))f=m,g=y;else{T=C-h,M=x-u;var B=m-h,P=C-m,k=y-u,E=x-y,D=void 0,I=void 0;if(s==="x"){D=Math.abs(B),I=Math.abs(P);var O=T>0?1:-1;f=m-O*D*a,g=y,R=m+O*I*a,L=y}else if(s==="y"){D=Math.abs(k),I=Math.abs(E);var H=M>0?1:-1;f=m,g=y-H*D*a,R=m,L=y+H*I*a}else D=Math.sqrt(B*B+k*k),I=Math.sqrt(P*P+E*E),A=I/(I+D),f=m-T*a*(1-A),g=y-M*a*(1-A),R=m+T*a*A,L=y+M*a*A,R=ou(R,au(C,m)),L=ou(L,au(x,y)),R=au(R,ou(C,m)),L=au(L,ou(x,y)),T=R-m,M=L-y,f=m-T*D/I,g=y-M*D/I,f=ou(f,au(h,m)),g=ou(g,au(u,y)),f=au(f,ou(h,m)),g=au(g,ou(u,y)),T=m-f,M=y-g,R=m+T*I/D,L=y+M*I/D}n.bezierCurveTo(d,c,f,g,m,y),d=R,c=L}else n.lineTo(m,y)}h=m,u=y,p+=o}return v}var _et=(function(){function n(){this.smooth=0,this.smoothConstraint=!0}return n})(),tSt=(function(n){et(t,n);function t(e){var i=n.call(this,e)||this;return i.type="ec-polyline",i}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new _et},t.prototype.buildPath=function(e,i){var r=i.points,o=0,a=r.length/2;if(i.connectNulls){for(;a>0&&uf(r[a*2-2],r[a*2-1]);a--);for(;o<a&&uf(r[o*2],r[o*2+1]);o++);}for(;o<a;)o+=PD(e,r,o,a,a,1,i.smooth,i.smoothMonotone,i.connectNulls)+1},t.prototype.getPointOn=function(e,i){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var r=this.path,o=r.data,a=Tl.CMD,s,l,h=i==="x",u=[],d=0;d<o.length;){var c=o[d++],f=void 0,g=void 0,p=void 0,v=void 0,m=void 0,y=void 0,b=void 0;switch(c){case a.M:s=o[d++],l=o[d++];break;case a.L:if(f=o[d++],g=o[d++],b=h?(e-s)/(f-s):(e-l)/(g-l),b<=1&&b>=0){var _=h?(g-l)*b+l:(f-s)*b+s;return h?[e,_]:[_,e]}s=f,l=g;break;case a.C:f=o[d++],g=o[d++],p=o[d++],v=o[d++],m=o[d++],y=o[d++];var w=h?ex(s,f,p,m,e,u):ex(l,g,v,y,e,u);if(w>0)for(var C=0;C<w;C++){var x=u[C];if(x<=1&&x>=0){var _=h?jn(l,g,v,y,x):jn(s,f,p,m,x);return h?[e,_]:[_,e]}}s=m,l=y;break}}},t})(ue),eSt=(function(n){et(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t})(_et),Cet=(function(n){et(t,n);function t(e){var i=n.call(this,e)||this;return i.type="ec-polygon",i}return t.prototype.getDefaultShape=function(){return new eSt},t.prototype.buildPath=function(e,i){var r=i.points,o=i.stackedOnPoints,a=0,s=r.length/2,l=i.smoothMonotone;if(i.connectNulls){for(;s>0&&uf(r[s*2-2],r[s*2-1]);s--);for(;a<s&&uf(r[a*2],r[a*2+1]);a++);}for(;a<s;){var h=PD(e,r,a,s,s,1,i.smooth,l,i.connectNulls);PD(e,o,a+h-1,h,s,-1,i.stackedOnSmooth,l,i.connectNulls),a+=h+1,e.closePath()}},t})(ue);function wet(n,t,e,i,r){var o=n.getArea(),a=o.x,s=o.y,l=o.width,h=o.height,u=e.get(["lineStyle","width"])||0;a-=u/2,s-=u/2,l+=u,h+=u,l=Math.ceil(l),a!==Math.floor(a)&&(a=Math.floor(a),l++);var d=new Ae({shape:{x:a,y:s,width:l,height:h}});if(t){var c=n.getBaseAxis(),f=c.isHorizontal(),g=c.inverse;f?(g&&(d.shape.x+=l),d.shape.width=0):(g||(d.shape.y+=h),d.shape.height=0);var p=Dt(r)?function(v){r(v,d)}:null;Bi(d,{shape:{width:l,height:h,x:a,y:s}},e,null,i,p)}return d}function xet(n,t,e){var i=n.getArea(),r=Ji(i.r0,1),o=Ji(i.r,1),a=new ho({shape:{cx:Ji(n.cx,1),cy:Ji(n.cy,1),r0:r,r:o,startAngle:i.startAngle,endAngle:i.endAngle,clockwise:i.clockwise}});if(t){var s=n.getBaseAxis().dim==="angle";s?a.shape.endAngle=i.startAngle:a.shape.r=r,Bi(a,{shape:{endAngle:i.endAngle,r:o}},e)}return a}function m_(n,t,e,i,r){if(n){if(n.type==="polar")return xet(n,t,e);if(n.type==="cartesian2d")return wet(n,t,e,i,r)}else return null;return null}function q6(n,t){if(n.length===t.length){for(var e=0;e<n.length;e++)if(n[e]!==t[e])return;return!0}}function K6(n){for(var t=1/0,e=1/0,i=-1/0,r=-1/0,o=0;o<n.length;){var a=n[o++],s=n[o++];isNaN(a)||(t=Math.min(a,t),i=Math.max(a,i)),isNaN(s)||(e=Math.min(s,e),r=Math.max(s,r))}return[[t,e],[i,r]]}function Z6(n,t){var e=K6(n),i=e[0],r=e[1],o=K6(t),a=o[0],s=o[1];return Math.max(Math.abs(i[0]-a[0]),Math.abs(i[1]-a[1]),Math.abs(r[0]-s[0]),Math.abs(r[1]-s[1]))}function J6(n){return Le(n)?n:n?.5:0}function iSt(n,t,e){if(!e.valueDim)return[];for(var i=t.count(),r=ul(i*2),o=0;o<i;o++){var a=bet(e,n,t,o);r[o*2]=a[0],r[o*2+1]=a[1]}return r}function su(n,t,e,i,r){var o=e.getBaseAxis(),a=o.dim==="x"||o.dim==="radius"?0:1,s=[],l=0,h=[],u=[],d=[],c=[];if(r){for(l=0;l<n.length;l+=2){var f=t||n;!isNaN(f[l])&&!isNaN(f[l+1])&&c.push(n[l],n[l+1])}n=c}for(l=0;l<n.length-2;l+=2)switch(d[0]=n[l+2],d[1]=n[l+3],u[0]=n[l],u[1]=n[l+1],s.push(u[0],u[1]),i){case"end":h[a]=d[a],h[1-a]=u[1-a],s.push(h[0],h[1]);break;case"middle":var g=(u[a]+d[a])/2,p=[];h[a]=p[a]=g,h[1-a]=u[1-a],p[1-a]=d[1-a],s.push(h[0],h[1]),s.push(p[0],p[1]);break;default:h[a]=u[a],h[1-a]=d[1-a],s.push(h[0],h[1])}return s.push(n[l++],n[l++]),s}function nSt(n,t){var e=[],i=n.length,r,o;function a(u,d,c){var f=u.coord,g=(c-f)/(d.coord-f),p=zdt(g,[u.color,d.color]);return{coord:c,color:p}}for(var s=0;s<i;s++){var l=n[s],h=l.coord;if(h<0)r=l;else if(h>t){o?e.push(a(o,l,t)):r&&e.push(a(r,l,0),a(r,l,t));break}else r&&(e.push(a(r,l,0)),r=null),e.push(l),o=l}return e}function rSt(n,t,e){var i=n.getVisual("visualMeta");if(!(!i||!i.length||!n.count())&&t.type==="cartesian2d"){for(var r,o,a=i.length-1;a>=0;a--){var s=n.getDimensionInfo(i[a].dimension);if(r=s&&s.coordDim,r==="x"||r==="y"){o=i[a];break}}if(o){var l=t.getAxis(r),h=ct(o.stops,function(b){return{coord:l.toGlobalCoord(l.dataToCoord(b.value)),color:b.color}}),u=h.length,d=o.outerColors.slice();u&&h[0].coord>h[u-1].coord&&(h.reverse(),d.reverse());var c=nSt(h,r==="x"?e.getWidth():e.getHeight()),f=c.length;if(!f&&u)return h[0].coord<0?d[1]?d[1]:h[u-1].color:d[0]?d[0]:h[0].color;var g=10,p=c[0].coord-g,v=c[f-1].coord+g,m=v-p;if(m<.001)return"transparent";z(c,function(b){b.offset=(b.coord-p)/m}),c.push({offset:f?c[f-1].offset:.5,color:d[1]||"transparent"}),c.unshift({offset:f?c[0].offset:.5,color:d[0]||"transparent"});var y=new o_(0,0,0,0,c,!0);return y[r]=p,y[r+"2"]=v,y}}}function oSt(n,t,e){var i=n.get("showAllSymbol"),r=i==="auto";if(!(i&&!r)){var o=e.getAxesByScale("ordinal")[0];if(o&&!(r&&aSt(o,t))){var a=t.mapDimension(o.dim),s={};return z(o.getViewLabels(),function(l){var h=o.scale.getRawOrdinalNumber(l.tickValue);s[h]=1}),function(l){return!s.hasOwnProperty(t.get(a,l))}}}}function aSt(n,t){var e=n.getExtent(),i=Math.abs(e[1]-e[0])/n.scale.count();isNaN(i)&&(i=0);for(var r=t.count(),o=Math.max(1,Math.round(r/5)),a=0;a<r;a+=o)if(p_.getSymbolSize(t,a)[n.isHorizontal()?1:0]*1.5>i)return!1;return!0}function sSt(n,t){return isNaN(n)||isNaN(t)}function lSt(n){for(var t=n.length/2;t>0&&sSt(n[t*2-2],n[t*2-1]);t--);return t-1}function Q6(n,t){return[n[t*2],n[t*2+1]]}function hSt(n,t,e){for(var i=n.length/2,r=e==="x"?0:1,o,a,s=0,l=-1,h=0;h<i;h++)if(a=n[h*2+r],!(isNaN(a)||isNaN(n[h*2+1-r]))){if(h===0){o=a;continue}if(o<=t&&a>=t||o>=t&&a<=t){l=h;break}s=h,o=a}return{range:[s,l],t:(t-o)/(a-o)}}function Aet(n){if(n.get(["endLabel","show"]))return!0;for(var t=0;t<lo.length;t++)if(n.get([lo[t],"endLabel","show"]))return!0;return!1}function YP(n,t,e,i){if(ig(t,"cartesian2d")){var r=i.getModel("endLabel"),o=r.get("valueAnimation"),a=i.getData(),s={lastFrameIndex:0},l=Aet(i)?function(f,g){n._endLabelOnDuring(f,g,a,s,o,r,t)}:null,h=t.getBaseAxis().isHorizontal(),u=wet(t,e,i,function(){var f=n._endLabel;f&&e&&s.originalX!=null&&f.attr({x:s.originalX,y:s.originalY})},l);if(!i.get("clip",!0)){var d=u.shape,c=Math.max(d.width,d.height);h?(d.y-=c,d.height+=c*2):(d.x-=c,d.width+=c*2)}return l&&l(1,u),u}else return xet(t,e,i)}function uSt(n,t){var e=t.getBaseAxis(),i=e.isHorizontal(),r=e.inverse,o=i?r?"right":"left":"center",a=i?"middle":r?"top":"bottom";return{normal:{align:n.get("align")||o,verticalAlign:n.get("verticalAlign")||a}}}var dSt=(function(n){et(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.init=function(){var e=new Ft,i=new v_;this.group.add(i.group),this._symbolDraw=i,this._lineGroup=e,this._changePolyState=xt(this._changePolyState,this)},t.prototype.render=function(e,i,r){var o=e.coordinateSystem,a=this.group,s=e.getData(),l=e.getModel("lineStyle"),h=e.getModel("areaStyle"),u=s.getLayout("points")||[],d=o.type==="polar",c=this._coordSys,f=this._symbolDraw,g=this._polyline,p=this._polygon,v=this._lineGroup,m=!i.ssr&&e.get("animation"),y=!h.isEmpty(),b=h.get("origin"),_=yet(o,s,b),w=y&&iSt(o,s,_),C=e.get("showSymbol"),x=e.get("connectNulls"),S=C&&!d&&oSt(e,s,o),A=this._data;A&&A.eachItemGraphicEl(function(V,X){V.__temp&&(a.remove(V),A.setItemGraphicEl(X,null))}),C||f.remove(),a.add(v);var T=d?!1:e.get("step"),M;o&&o.getArea&&e.get("clip",!0)&&(M=o.getArea(),M.width!=null?(M.x-=.1,M.y-=.1,M.width+=.2,M.height+=.2):M.r0&&(M.r0-=.5,M.r+=.5)),this._clipShapeForSymbol=M;var R=rSt(s,o,r)||s.getVisual("style")[s.getVisual("drawType")];if(!(g&&c.type===o.type&&T===this._step))C&&f.updateData(s,{isIgnore:S,clipShape:M,disableAnimation:!0,getSymbolPoint:function(V){return[u[V*2],u[V*2+1]]}}),m&&this._initSymbolLabelAnimation(s,o,M),T&&(w&&(w=su(w,u,o,T,x)),u=su(u,null,o,T,x)),g=this._newPolyline(u),y?p=this._newPolygon(u,w):p&&(v.remove(p),p=this._polygon=null),d||this._initOrUpdateEndLabel(e,o,Mf(R)),v.setClipPath(YP(this,o,!0,e));else{y&&!p?p=this._newPolygon(u,w):p&&!y&&(v.remove(p),p=this._polygon=null),d||this._initOrUpdateEndLabel(e,o,Mf(R));var L=v.getClipPath();if(L){var B=YP(this,o,!1,e);Bi(L,{shape:B.shape},e)}else v.setClipPath(YP(this,o,!0,e));C&&f.updateData(s,{isIgnore:S,clipShape:M,disableAnimation:!0,getSymbolPoint:function(V){return[u[V*2],u[V*2+1]]}}),(!q6(this._stackedOnPoints,w)||!q6(this._points,u))&&(m?this._doUpdateAnimation(s,w,o,r,T,b,x):(T&&(w&&(w=su(w,u,o,T,x)),u=su(u,null,o,T,x)),g.setShape({points:u}),p&&p.setShape({points:u,stackedOnPoints:w})))}var P=e.getModel("emphasis"),k=P.get("focus"),E=P.get("blurScope"),D=P.get("disabled");if(g.useStyle(Ot(l.getLineStyle(),{fill:"none",stroke:R,lineJoin:"bevel"})),Ar(g,e,"lineStyle"),g.style.lineWidth>0&&e.get(["emphasis","lineStyle","width"])==="bolder"){var I=g.getState("emphasis").style;I.lineWidth=+g.style.lineWidth+1}Vt(g).seriesIndex=e.seriesIndex,Gi(g,k,E,D);var O=J6(e.get("smooth")),H=e.get("smoothMonotone");if(g.setShape({smooth:O,smoothMonotone:H,connectNulls:x}),p){var F=s.getCalculationInfo("stackedOnSeries"),N=0;p.useStyle(Ot(h.getAreaStyle(),{fill:R,opacity:.7,lineJoin:"bevel",decal:s.getVisual("style").decal})),F&&(N=J6(F.get("smooth"))),p.setShape({smooth:O,stackedOnSmooth:N,smoothMonotone:H,connectNulls:x}),Ar(p,e,"areaStyle"),Vt(p).seriesIndex=e.seriesIndex,Gi(p,k,E,D)}var $=this._changePolyState;s.eachItemGraphicEl(function(V){V&&(V.onHoverStateChange=$)}),this._polyline.onHoverStateChange=$,this._data=s,this._coordSys=o,this._stackedOnPoints=w,this._points=u,this._step=T,this._valueOrigin=b,e.get("triggerLineEvent")&&(this.packEventData(e,g),p&&this.packEventData(e,p))},t.prototype.packEventData=function(e,i){Vt(i).eventData={componentType:"series",componentSubType:"line",componentIndex:e.componentIndex,seriesIndex:e.seriesIndex,seriesName:e.name,seriesType:"line"}},t.prototype.highlight=function(e,i,r,o){var a=e.getData(),s=Sf(a,o);if(this._changePolyState("emphasis"),!(s instanceof Array)&&s!=null&&s>=0){var l=a.getLayout("points"),h=a.getItemGraphicEl(s);if(!h){var u=l[s*2],d=l[s*2+1];if(isNaN(u)||isNaN(d)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(u,d))return;var c=e.get("zlevel")||0,f=e.get("z")||0;h=new p_(a,s),h.x=u,h.y=d,h.setZ(c,f);var g=h.getSymbolPath().getTextContent();g&&(g.zlevel=c,g.z=f,g.z2=this._polyline.z2+1),h.__temp=!0,a.setItemGraphicEl(s,h),h.stopSymbolAnimation(!0),this.group.add(h)}h.highlight()}else hi.prototype.highlight.call(this,e,i,r,o)},t.prototype.downplay=function(e,i,r,o){var a=e.getData(),s=Sf(a,o);if(this._changePolyState("normal"),s!=null&&s>=0){var l=a.getItemGraphicEl(s);l&&(l.__temp?(a.setItemGraphicEl(s,null),this.group.remove(l)):l.downplay())}else hi.prototype.downplay.call(this,e,i,r,o)},t.prototype._changePolyState=function(e){var i=this._polygon;lx(this._polyline,e),i&&lx(i,e)},t.prototype._newPolyline=function(e){var i=this._polyline;return i&&this._lineGroup.remove(i),i=new tSt({shape:{points:e},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(i),this._polyline=i,i},t.prototype._newPolygon=function(e,i){var r=this._polygon;return r&&this._lineGroup.remove(r),r=new Cet({shape:{points:e,stackedOnPoints:i},segmentIgnoreThreshold:2}),this._lineGroup.add(r),this._polygon=r,r},t.prototype._initSymbolLabelAnimation=function(e,i,r){var o,a,s=i.getBaseAxis(),l=s.inverse;i.type==="cartesian2d"?(o=s.isHorizontal(),a=!1):i.type==="polar"&&(o=s.dim==="angle",a=!0);var h=e.hostModel,u=h.get("animationDuration");Dt(u)&&(u=u(null));var d=h.get("animationDelay")||0,c=Dt(d)?d(null):d;e.eachItemGraphicEl(function(f,g){var p=f;if(p){var v=[f.x,f.y],m=void 0,y=void 0,b=void 0;if(r)if(a){var _=r,w=i.pointToCoord(v);o?(m=_.startAngle,y=_.endAngle,b=-w[1]/180*Math.PI):(m=_.r0,y=_.r,b=w[0])}else{var C=r;o?(m=C.x,y=C.x+C.width,b=f.x):(m=C.y+C.height,y=C.y,b=f.y)}var x=y===m?0:(b-m)/(y-m);l&&(x=1-x);var S=Dt(d)?d(g):u*x+c,A=p.getSymbolPath(),T=A.getTextContent();p.attr({scaleX:0,scaleY:0}),p.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:S}),T&&T.animateFrom({style:{opacity:0}},{duration:300,delay:S}),A.disableLabelAnimation=!0}})},t.prototype._initOrUpdateEndLabel=function(e,i,r){var o=e.getModel("endLabel");if(Aet(e)){var a=e.getData(),s=this._polyline,l=a.getLayout("points");if(!l){s.removeTextContent(),this._endLabel=null;return}var h=this._endLabel;h||(h=this._endLabel=new Re({z2:200}),h.ignoreClip=!0,s.setTextContent(this._endLabel),s.disableLabelAnimation=!0);var u=lSt(l);u>=0&&(Tr(s,Zn(e,"endLabel"),{inheritColor:r,labelFetcher:e,labelDataIndex:u,defaultText:function(d,c,f){return f!=null?tet(a,f):Jp(a,d)},enableTextSetter:!0},uSt(o,i)),s.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},t.prototype._endLabelOnDuring=function(e,i,r,o,a,s,l){var h=this._endLabel,u=this._polyline;if(h){e<1&&o.originalX==null&&(o.originalX=h.x,o.originalY=h.y);var d=r.getLayout("points"),c=r.hostModel,f=c.get("connectNulls"),g=s.get("precision"),p=s.get("distance")||0,v=l.getBaseAxis(),m=v.isHorizontal(),y=v.inverse,b=i.shape,_=y?m?b.x:b.y+b.height:m?b.x+b.width:b.y,w=(m?p:0)*(y?-1:1),C=(m?0:-p)*(y?-1:1),x=m?"x":"y",S=hSt(d,_,x),A=S.range,T=A[1]-A[0],M=void 0;if(T>=1){if(T>1&&!f){var R=Q6(d,A[0]);h.attr({x:R[0]+w,y:R[1]+C}),a&&(M=c.getRawValue(A[0]))}else{var R=u.getPointOn(_,x);R&&h.attr({x:R[0]+w,y:R[1]+C});var L=c.getRawValue(A[0]),B=c.getRawValue(A[1]);a&&(M=YK(r,g,L,B,S.t))}o.lastFrameIndex=A[0]}else{var P=e===1||o.lastFrameIndex>0?A[0]:0,R=Q6(d,P);a&&(M=c.getRawValue(P)),h.attr({x:R[0]+w,y:R[1]+C})}if(a){var k=Wv(h);typeof k.setLabelText=="function"&&k.setLabelText(M)}}},t.prototype._doUpdateAnimation=function(e,i,r,o,a,s,l){var h=this._polyline,u=this._polygon,d=e.hostModel,c=Qxt(this._data,e,this._stackedOnPoints,i,this._coordSys,r,this._valueOrigin),f=c.current,g=c.stackedOnCurrent,p=c.next,v=c.stackedOnNext;if(a&&(g=su(c.stackedOnCurrent,c.current,r,a,l),f=su(c.current,null,r,a,l),v=su(c.stackedOnNext,c.next,r,a,l),p=su(c.next,null,r,a,l)),Z6(f,p)>3e3||u&&Z6(g,v)>3e3){h.stopAnimation(),h.setShape({points:p}),u&&(u.stopAnimation(),u.setShape({points:p,stackedOnPoints:v}));return}h.shape.__points=c.current,h.shape.points=f;var m={shape:{points:p}};c.current!==f&&(m.shape.__points=c.next),h.stopAnimation(),Ie(h,m,d),u&&(u.setShape({points:f,stackedOnPoints:g}),u.stopAnimation(),Ie(u,{shape:{stackedOnPoints:v}},d),h.shape.points!==u.shape.points&&(u.shape.points=h.shape.points));for(var y=[],b=c.status,_=0;_<b.length;_++){var w=b[_].cmd;if(w==="="){var C=e.getItemGraphicEl(b[_].idx1);C&&y.push({el:C,ptIdx:_})}}h.animators&&h.animators.length&&h.animators[0].during(function(){u&&u.dirtyShape();for(var x=h.shape.__points,S=0;S<y.length;S++){var A=y[S].el,T=y[S].ptIdx*2;A.x=x[T],A.y=x[T+1],A.markRedraw()}})},t.prototype.remove=function(e){var i=this.group,r=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),r&&r.eachItemGraphicEl(function(o,a){o.__temp&&(i.remove(o),r.setItemGraphicEl(a,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},t.type="line",t})(hi);function y_(n,t){return{seriesType:n,plan:Uv(),reset:function(e){var i=e.getData(),r=e.coordinateSystem,o=e.pipelineContext,a=t||o.large;if(r){var s=ct(r.dimensions,function(f){return i.mapDimension(f)}).slice(0,2),l=s.length,h=i.getCalculationInfo("stackResultDimension");id(i,s[0])&&(s[0]=h),id(i,s[1])&&(s[1]=h);var u=i.getStore(),d=i.getDimensionIndex(s[0]),c=i.getDimensionIndex(s[1]);return l&&{progress:function(f,g){for(var p=f.end-f.start,v=a&&ul(p*l),m=[],y=[],b=f.start,_=0;b<f.end;b++){var w=void 0;if(l===1){var C=u.get(d,b);w=r.dataToPoint(C,null,y)}else m[0]=u.get(d,b),m[1]=u.get(c,b),w=r.dataToPoint(m,null,y);a?(v[_++]=w[0],v[_++]=w[1]):g.setItemLayout(b,w.slice())}a&&g.setLayout("points",v)}}}}}}var cSt={average:function(n){for(var t=0,e=0,i=0;i<n.length;i++)isNaN(n[i])||(t+=n[i],e++);return e===0?NaN:t/e},sum:function(n){for(var t=0,e=0;e<n.length;e++)t+=n[e]||0;return t},max:function(n){for(var t=-1/0,e=0;e<n.length;e++)n[e]>t&&(t=n[e]);return isFinite(t)?t:NaN},min:function(n){for(var t=1/0,e=0;e<n.length;e++)n[e]<t&&(t=n[e]);return isFinite(t)?t:NaN},nearest:function(n){return n[0]}},fSt=function(n){return Math.round(n.length/2)};function Tet(n){return{seriesType:n,reset:function(t,e,i){var r=t.getData(),o=t.get("sampling"),a=t.coordinateSystem,s=r.count();if(s>10&&a.type==="cartesian2d"&&o){var l=a.getBaseAxis(),h=a.getOtherAxis(l),u=l.getExtent(),d=i.getDevicePixelRatio(),c=Math.abs(u[1]-u[0])*(d||1),f=Math.round(s/c);if(isFinite(f)&&f>1){o==="lttb"?t.setData(r.lttbDownSample(r.mapDimension(h.dim),1/f)):o==="minmax"&&t.setData(r.minmaxDownSample(r.mapDimension(h.dim),1/f));var g=void 0;Ct(o)?g=cSt[o]:Dt(o)&&(g=o),g&&t.setData(r.downSample(r.mapDimension(h.dim),1/f,g,fSt))}}}}}function gSt(n){n.registerChartView(dSt),n.registerSeriesModel(Kxt),n.registerLayout(y_("line",!0)),n.registerVisual({seriesType:"line",reset:function(t){var e=t.getData(),i=t.getModel("lineStyle").getLineStyle();i&&!i.stroke&&(i.stroke=e.getVisual("style").fill),e.setVisual("legendLineStyle",i)}}),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,Tet("line"))}var Qy=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.getInitialData=function(e,i){return qh(null,this,{useEncodeDefaulter:!0})},t.prototype.getMarkerPosition=function(e,i,r){var o=this.coordinateSystem;if(o&&o.clampData){var a=o.clampData(e),s=o.dataToPoint(a);if(r)z(o.getAxes(),function(c,f){if(c.type==="category"&&i!=null){var g=c.getTicksCoords(),p=c.getTickModel().get("alignWithLabel"),v=a[f],m=i[f]==="x1"||i[f]==="y1";if(m&&!p&&(v+=1),g.length<2)return;if(g.length===2){s[f]=c.toGlobalCoord(c.getExtent()[m?1:0]);return}for(var y=void 0,b=void 0,_=1,w=0;w<g.length;w++){var C=g[w].coord,x=w===g.length-1?g[w-1].tickValue+_:g[w].tickValue;if(x===v){b=C;break}else if(x<v)y=C;else if(y!=null&&x>v){b=(C+y)/2;break}w===1&&(_=x-g[0].tickValue)}b==null&&(y?y&&(b=g[g.length-1].coord):b=g[0].coord),s[f]=c.toGlobalCoord(b)}});else{var l=this.getData(),h=l.getLayout("offset"),u=l.getLayout("size"),d=o.getBaseAxis().isHorizontal()?0:1;s[d]+=h+u/2}return s}return[NaN,NaN]},t.type="series.__base_bar__",t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},t})(Ci);Ci.registerClass(Qy);var pSt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.getInitialData=function(){return qh(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},t.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},t.prototype.getProgressiveThreshold=function(){var e=this.get("progressiveThreshold"),i=this.get("largeThreshold");return i>e&&(e=i),e},t.prototype.brushSelector=function(e,i,r){return r.rect(i.getItemLayout(e))},t.type="series.bar",t.dependencies=["grid","polar"],t.defaultOption=yd(Qy.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),t})(Qy),vSt=(function(){function n(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return n})(),Hx=(function(n){et(t,n);function t(e){var i=n.call(this,e)||this;return i.type="sausage",i}return t.prototype.getDefaultShape=function(){return new vSt},t.prototype.buildPath=function(e,i){var r=i.cx,o=i.cy,a=Math.max(i.r0||0,0),s=Math.max(i.r,0),l=(s-a)*.5,h=a+l,u=i.startAngle,d=i.endAngle,c=i.clockwise,f=Math.PI*2,g=c?d-u<f:u-d<f;g||(u=d-(c?f:-f));var p=Math.cos(u),v=Math.sin(u),m=Math.cos(d),y=Math.sin(d);g?(e.moveTo(p*a+r,v*a+o),e.arc(p*h+r,v*h+o,l,-Math.PI+u,u,!c)):e.moveTo(p*s+r,v*s+o),e.arc(r,o,s,u,d,!c),e.arc(m*h+r,y*h+o,l,d-Math.PI*2,d-Math.PI,!c),a!==0&&e.arc(r,o,a,d,u,c)},t})(ue);function mSt(n,t){t=t||{};var e=t.isRoundCap;return function(i,r,o){var a=r.position;if(!a||a instanceof Array)return ax(i,r,o);var s=n(a),l=r.distance!=null?r.distance:5,h=this.shape,u=h.cx,d=h.cy,c=h.r,f=h.r0,g=(c+f)/2,p=h.startAngle,v=h.endAngle,m=(p+v)/2,y=e?Math.abs(c-f)/2:0,b=Math.cos,_=Math.sin,w=u+c*b(p),C=d+c*_(p),x="left",S="top";switch(s){case"startArc":w=u+(f-l)*b(m),C=d+(f-l)*_(m),x="center",S="top";break;case"insideStartArc":w=u+(f+l)*b(m),C=d+(f+l)*_(m),x="center",S="bottom";break;case"startAngle":w=u+g*b(p)+YC(p,l+y,!1),C=d+g*_(p)+XC(p,l+y,!1),x="right",S="middle";break;case"insideStartAngle":w=u+g*b(p)+YC(p,-l+y,!1),C=d+g*_(p)+XC(p,-l+y,!1),x="left",S="middle";break;case"middle":w=u+g*b(m),C=d+g*_(m),x="center",S="middle";break;case"endArc":w=u+(c+l)*b(m),C=d+(c+l)*_(m),x="center",S="bottom";break;case"insideEndArc":w=u+(c-l)*b(m),C=d+(c-l)*_(m),x="center",S="top";break;case"endAngle":w=u+g*b(v)+YC(v,l+y,!0),C=d+g*_(v)+XC(v,l+y,!0),x="left",S="middle";break;case"insideEndAngle":w=u+g*b(v)+YC(v,-l+y,!0),C=d+g*_(v)+XC(v,-l+y,!0),x="right",S="middle";break;default:return ax(i,r,o)}return i=i||{},i.x=w,i.y=C,i.align=x,i.verticalAlign=S,i}}function ySt(n,t,e,i){if(Le(i)){n.setTextConfig({rotation:i});return}else if(ut(t)){n.setTextConfig({rotation:0});return}var r=n.shape,o=r.clockwise?r.startAngle:r.endAngle,a=r.clockwise?r.endAngle:r.startAngle,s=(o+a)/2,l,h=e(t);switch(h){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":l=s;break;case"startAngle":case"insideStartAngle":l=o;break;case"endAngle":case"insideEndAngle":l=a;break;default:n.setTextConfig({rotation:0});return}var u=Math.PI*1.5-l;h==="middle"&&u>Math.PI/2&&u<Math.PI*1.5&&(u-=Math.PI),n.setTextConfig({rotation:u})}function YC(n,t,e){return t*Math.sin(n)*(e?-1:1)}function XC(n,t,e){return t*Math.cos(n)*(e?1:-1)}function Nc(n,t,e){var i=n.get("borderRadius");if(i==null)return e?{cornerRadius:0}:null;ut(i)||(i=[i,i,i,i]);var r=Math.abs(t.r||0-t.r0||0);return{cornerRadius:ct(i,function(o){return Ss(o,r)})}}var XP=Math.max,qP=Math.min;function bSt(n,t){var e=n.getArea&&n.getArea();if(ig(n,"cartesian2d")){var i=n.getBaseAxis();if(i.type!=="category"||!i.onBand){var r=t.getLayout("bandWidth");i.isHorizontal()?(e.x-=r,e.width+=r*2):(e.y-=r,e.height+=r*2)}}return e}var _St=(function(n){et(t,n);function t(){var e=n.call(this)||this;return e.type=t.type,e._isFirstFrame=!0,e}return t.prototype.render=function(e,i,r,o){this._model=e,this._removeOnRenderedListener(r),this._updateDrawMode(e);var a=e.get("coordinateSystem");(a==="cartesian2d"||a==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(e,i,r):this._renderNormal(e,i,r,o))},t.prototype.incrementalPrepareRender=function(e){this._clear(),this._updateDrawMode(e),this._updateLargeClip(e)},t.prototype.incrementalRender=function(e,i){this._progressiveEls=[],this._incrementalRenderLarge(e,i)},t.prototype.eachRendered=function(e){md(this._progressiveEls||this.group,e)},t.prototype._updateDrawMode=function(e){var i=e.pipelineContext.large;(this._isLargeDraw==null||i!==this._isLargeDraw)&&(this._isLargeDraw=i,this._clear())},t.prototype._renderNormal=function(e,i,r,o){var a=this.group,s=e.getData(),l=this._data,h=e.coordinateSystem,u=h.getBaseAxis(),d;h.type==="cartesian2d"?d=u.isHorizontal():h.type==="polar"&&(d=u.dim==="angle");var c=e.isAnimationEnabled()?e:null,f=CSt(e,h);f&&this._enableRealtimeSort(f,s,r);var g=e.get("clip",!0)||f,p=bSt(h,s);a.removeClipPath();var v=e.get("roundCap",!0),m=e.get("showBackground",!0),y=e.getModel("backgroundStyle"),b=y.get("borderRadius")||0,_=[],w=this._backgroundEls,C=o&&o.isInitSort,x=o&&o.type==="changeAxisOrder";function S(M){var R=qC[h.type](s,M),L=RSt(h,d,R);return L.useStyle(y.getItemStyle()),h.type==="cartesian2d"?L.setShape("r",b):L.setShape("cornerRadius",b),_[M]=L,L}s.diff(l).add(function(M){var R=s.getItemModel(M),L=qC[h.type](s,M,R);if(m&&S(M),!(!s.hasValue(M)||!rG[h.type](L))){var B=!1;g&&(B=tG[h.type](p,L));var P=eG[h.type](e,s,M,L,d,c,u.model,!1,v);f&&(P.forceLabelAnimation=!0),oG(P,s,M,R,L,e,d,h.type==="polar"),C?P.attr({shape:L}):f?iG(f,c,P,L,M,d,!1,!1):Bi(P,{shape:L},e,M),s.setItemGraphicEl(M,P),a.add(P),P.ignore=B}}).update(function(M,R){var L=s.getItemModel(M),B=qC[h.type](s,M,L);if(m){var P=void 0;w.length===0?P=S(R):(P=w[R],P.useStyle(y.getItemStyle()),h.type==="cartesian2d"?P.setShape("r",b):P.setShape("cornerRadius",b),_[M]=P);var k=qC[h.type](s,M),E=Ret(d,k,h);Ie(P,{shape:E},c,M)}var D=l.getItemGraphicEl(R);if(!s.hasValue(M)||!rG[h.type](B)){a.remove(D);return}var I=!1;if(g&&(I=tG[h.type](p,B),I&&a.remove(D)),D?As(D):D=eG[h.type](e,s,M,B,d,c,u.model,!!D,v),f&&(D.forceLabelAnimation=!0),x){var O=D.getTextContent();if(O){var H=Wv(O);H.prevValue!=null&&(H.prevValue=H.value)}}else oG(D,s,M,L,B,e,d,h.type==="polar");C?D.attr({shape:B}):f?iG(f,c,D,B,M,d,!0,x):Ie(D,{shape:B},e,M,null),s.setItemGraphicEl(M,D),D.ignore=I,a.add(D)}).remove(function(M){var R=l.getItemGraphicEl(M);R&&Fy(R,e,M)}).execute();var A=this._backgroundGroup||(this._backgroundGroup=new Ft);A.removeAll();for(var T=0;T<_.length;++T)A.add(_[T]);a.add(A),this._backgroundEls=_,this._data=s},t.prototype._renderLarge=function(e,i,r){this._clear(),sG(e,this.group),this._updateLargeClip(e)},t.prototype._incrementalRenderLarge=function(e,i){this._removeBackground(),sG(i,this.group,this._progressiveEls,!0)},t.prototype._updateLargeClip=function(e){var i=e.get("clip",!0)&&m_(e.coordinateSystem,!1,e),r=this.group;i?r.setClipPath(i):r.removeClipPath()},t.prototype._enableRealtimeSort=function(e,i,r){var o=this;if(i.count()){var a=e.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(i,e,r),this._isFirstFrame=!1;else{var s=function(l){var h=i.getItemGraphicEl(l),u=h&&h.shape;return u&&Math.abs(a.isHorizontal()?u.height:u.width)||0};this._onRendered=function(){o._updateSortWithinSameData(i,s,a,r)},r.getZr().on("rendered",this._onRendered)}}},t.prototype._dataSort=function(e,i,r){var o=[];return e.each(e.mapDimension(i.dim),function(a,s){var l=r(s);l=l??NaN,o.push({dataIndex:s,mappedValue:l,ordinalNumber:a})}),o.sort(function(a,s){return s.mappedValue-a.mappedValue}),{ordinalNumbers:ct(o,function(a){return a.ordinalNumber})}},t.prototype._isOrderChangedWithinSameData=function(e,i,r){for(var o=r.scale,a=e.mapDimension(r.dim),s=Number.MAX_VALUE,l=0,h=o.getOrdinalMeta().categories.length;l<h;++l){var u=e.rawIndexOf(a,o.getRawOrdinalNumber(l)),d=u<0?Number.MIN_VALUE:i(e.indexOfRawIndex(u));if(d>s)return!0;s=d}return!1},t.prototype._isOrderDifferentInView=function(e,i){for(var r=i.scale,o=r.getExtent(),a=Math.max(0,o[0]),s=Math.min(o[1],r.getOrdinalMeta().categories.length-1);a<=s;++a)if(e.ordinalNumbers[a]!==r.getRawOrdinalNumber(a))return!0},t.prototype._updateSortWithinSameData=function(e,i,r,o){if(this._isOrderChangedWithinSameData(e,i,r)){var a=this._dataSort(e,r,i);this._isOrderDifferentInView(a,r)&&(this._removeOnRenderedListener(o),o.dispatchAction({type:"changeAxisOrder",componentType:r.dim+"Axis",axisId:r.index,sortInfo:a}))}},t.prototype._dispatchInitSort=function(e,i,r){var o=i.baseAxis,a=this._dataSort(e,o,function(s){return e.get(e.mapDimension(i.otherAxis.dim),s)});r.dispatchAction({type:"changeAxisOrder",componentType:o.dim+"Axis",isInitSort:!0,axisId:o.index,sortInfo:a})},t.prototype.remove=function(e,i){this._clear(this._model),this._removeOnRenderedListener(i)},t.prototype.dispose=function(e,i){this._removeOnRenderedListener(i)},t.prototype._removeOnRenderedListener=function(e){this._onRendered&&(e.getZr().off("rendered",this._onRendered),this._onRendered=null)},t.prototype._clear=function(e){var i=this.group,r=this._data;e&&e.isAnimationEnabled()&&r&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],r.eachItemGraphicEl(function(o){Fy(o,e,Vt(o).dataIndex)})):i.removeAll(),this._data=null,this._isFirstFrame=!0},t.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},t.type="bar",t})(hi),tG={cartesian2d:function(n,t){var e=t.width<0?-1:1,i=t.height<0?-1:1;e<0&&(t.x+=t.width,t.width=-t.width),i<0&&(t.y+=t.height,t.height=-t.height);var r=n.x+n.width,o=n.y+n.height,a=XP(t.x,n.x),s=qP(t.x+t.width,r),l=XP(t.y,n.y),h=qP(t.y+t.height,o),u=s<a,d=h<l;return t.x=u&&a>r?s:a,t.y=d&&l>o?h:l,t.width=u?0:s-a,t.height=d?0:h-l,e<0&&(t.x+=t.width,t.width=-t.width),i<0&&(t.y+=t.height,t.height=-t.height),u||d},polar:function(n,t){var e=t.r0<=t.r?1:-1;if(e<0){var i=t.r;t.r=t.r0,t.r0=i}var r=qP(t.r,n.r),o=XP(t.r0,n.r0);t.r=r,t.r0=o;var a=r-o<0;if(e<0){var i=t.r;t.r=t.r0,t.r0=i}return a}},eG={cartesian2d:function(n,t,e,i,r,o,a,s,l){var h=new Ae({shape:ht({},i),z2:1});if(h.__dataIndex=e,h.name="item",o){var u=h.shape,d=r?"height":"width";u[d]=0}return h},polar:function(n,t,e,i,r,o,a,s,l){var h=!r&&l?Hx:ho,u=new h({shape:i,z2:1});u.name="item";var d=Met(r);if(u.calculateTextPosition=mSt(d,{isRoundCap:h===Hx}),o){var c=u.shape,f=r?"r":"endAngle",g={};c[f]=r?i.r0:i.startAngle,g[f]=i[f],(s?Ie:Bi)(u,{shape:g},o)}return u}};function CSt(n,t){var e=n.get("realtimeSort",!0),i=t.getBaseAxis();if(e&&i.type==="category"&&t.type==="cartesian2d")return{baseAxis:i,otherAxis:t.getOtherAxis(i)}}function iG(n,t,e,i,r,o,a,s){var l,h;o?(h={x:i.x,width:i.width},l={y:i.y,height:i.height}):(h={y:i.y,height:i.height},l={x:i.x,width:i.width}),s||(a?Ie:Bi)(e,{shape:l},t,r,null);var u=t?n.baseAxis.model:null;(a?Ie:Bi)(e,{shape:h},u,r)}function nG(n,t){for(var e=0;e<t.length;e++)if(!isFinite(n[t[e]]))return!0;return!1}var wSt=["x","y","width","height"],xSt=["cx","cy","r","startAngle","endAngle"],rG={cartesian2d:function(n){return!nG(n,wSt)},polar:function(n){return!nG(n,xSt)}},qC={cartesian2d:function(n,t,e){var i=n.getItemLayout(t),r=e?ASt(e,i):0,o=i.width>0?1:-1,a=i.height>0?1:-1;return{x:i.x+o*r/2,y:i.y+a*r/2,width:i.width-o*r,height:i.height-a*r}},polar:function(n,t,e){var i=n.getItemLayout(t);return{cx:i.cx,cy:i.cy,r0:i.r0,r:i.r,startAngle:i.startAngle,endAngle:i.endAngle,clockwise:i.clockwise}}};function SSt(n){return n.startAngle!=null&&n.endAngle!=null&&n.startAngle===n.endAngle}function Met(n){return(function(t){var e=t?"Arc":"Angle";return function(i){switch(i){case"start":case"insideStart":case"end":case"insideEnd":return i+e;default:return i}}})(n)}function oG(n,t,e,i,r,o,a,s){var l=t.getItemVisual(e,"style");if(s){if(!o.get("roundCap")){var u=n.shape,d=Nc(i.getModel("itemStyle"),u,!0);ht(u,d),n.setShape(u)}}else{var h=i.get(["itemStyle","borderRadius"])||0;n.setShape("r",h)}n.useStyle(l);var c=i.getShallow("cursor");c&&n.attr("cursor",c);var f=s?a?r.r>=r.r0?"endArc":"startArc":r.endAngle>=r.startAngle?"endAngle":"startAngle":a?r.height>=0?"bottom":"top":r.width>=0?"right":"left",g=Zn(i);Tr(n,g,{labelFetcher:o,labelDataIndex:e,defaultText:Jp(o.getData(),e),inheritColor:l.fill,defaultOpacity:l.opacity,defaultOutsidePosition:f});var p=n.getTextContent();if(s&&p){var v=i.get(["label","position"]);n.textConfig.inside=v==="middle"?!0:null,ySt(n,v==="outside"?f:v,Met(a),i.get(["label","rotate"]))}BZ(p,g,o.getRawValue(e),function(y){return tet(t,y)});var m=i.getModel(["emphasis"]);Gi(n,m.get("focus"),m.get("blurScope"),m.get("disabled")),Ar(n,i),SSt(r)&&(n.style.fill="none",n.style.stroke="none",z(n.states,function(y){y.style&&(y.style.fill=y.style.stroke="none")}))}function ASt(n,t){var e=n.get(["itemStyle","borderColor"]);if(!e||e==="none")return 0;var i=n.get(["itemStyle","borderWidth"])||0,r=isNaN(t.width)?Number.MAX_VALUE:Math.abs(t.width),o=isNaN(t.height)?Number.MAX_VALUE:Math.abs(t.height);return Math.min(i,r,o)}var TSt=(function(){function n(){}return n})(),aG=(function(n){et(t,n);function t(e){var i=n.call(this,e)||this;return i.type="largeBar",i}return t.prototype.getDefaultShape=function(){return new TSt},t.prototype.buildPath=function(e,i){for(var r=i.points,o=this.baseDimIdx,a=1-this.baseDimIdx,s=[],l=[],h=this.barWidth,u=0;u<r.length;u+=3)l[o]=h,l[a]=r[u+2],s[o]=r[u+o],s[a]=r[u+a],e.rect(s[0],s[1],l[0],l[1])},t})(ue);function sG(n,t,e,i){var r=n.getData(),o=r.getLayout("valueAxisHorizontal")?1:0,a=r.getLayout("largeDataIndices"),s=r.getLayout("size"),l=n.getModel("backgroundStyle"),h=r.getLayout("largeBackgroundPoints");if(h){var u=new aG({shape:{points:h},incremental:!!i,silent:!0,z2:0});u.baseDimIdx=o,u.largeDataIndices=a,u.barWidth=s,u.useStyle(l.getItemStyle()),t.add(u),e&&e.push(u)}var d=new aG({shape:{points:r.getLayout("largePoints")},incremental:!!i,ignoreCoarsePointer:!0,z2:1});d.baseDimIdx=o,d.largeDataIndices=a,d.barWidth=s,t.add(d),d.useStyle(r.getVisual("style")),d.style.stroke=null,Vt(d).seriesIndex=n.seriesIndex,n.get("silent")||(d.on("mousedown",lG),d.on("mousemove",lG)),e&&e.push(d)}var lG=lz(function(n){var t=this,e=MSt(t,n.offsetX,n.offsetY);Vt(t).dataIndex=e>=0?e:null},30,!1);function MSt(n,t,e){for(var i=n.baseDimIdx,r=1-i,o=n.shape.points,a=n.largeDataIndices,s=[],l=[],h=n.barWidth,u=0,d=o.length/3;u<d;u++){var c=u*3;if(l[i]=h,l[r]=o[c+2],s[i]=o[c+i],s[r]=o[c+r],l[r]<0&&(s[r]+=l[r],l[r]=-l[r]),t>=s[0]&&t<=s[0]+l[0]&&e>=s[1]&&e<=s[1]+l[1])return a[u]}return-1}function Ret(n,t,e){if(ig(e,"cartesian2d")){var i=t,r=e.getArea();return{x:n?i.x:r.x,y:n?r.y:i.y,width:n?i.width:r.width,height:n?r.height:i.height}}else{var r=e.getArea(),o=t;return{cx:r.cx,cy:r.cy,r0:n?r.r0:o.r0,r:n?r.r:o.r,startAngle:n?o.startAngle:0,endAngle:n?o.endAngle:Math.PI*2}}}function RSt(n,t,e){var i=n.type==="polar"?ho:Ae;return new i({shape:Ret(t,e,n),silent:!0,z2:0})}function PSt(n){n.registerChartView(_St),n.registerSeriesModel(pSt),n.registerLayout(n.PRIORITY.VISUAL.LAYOUT,qt(mQ,"bar")),n.registerLayout(n.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,yQ("bar")),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,Tet("bar")),n.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(t,e){var i=t.componentType||"series";e.eachComponent({mainType:i,query:t},function(r){t.sortInfo&&r.axis.setCategorySortInfo(t.sortInfo)})})}var hG=Math.PI*2,KC=Math.PI/180;function Pet(n,t){return Vn(n.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function Bet(n,t){var e=Pet(n,t),i=n.get("center"),r=n.get("radius");ut(r)||(r=[0,r]);var o=mt(e.width,t.getWidth()),a=mt(e.height,t.getHeight()),s=Math.min(o,a),l=mt(r[0],s/2),h=mt(r[1],s/2),u,d,c=n.coordinateSystem;if(c){var f=c.dataToPoint(i);u=f[0]||0,d=f[1]||0}else ut(i)||(i=[i,i]),u=mt(i[0],o)+e.x,d=mt(i[1],a)+e.y;return{cx:u,cy:d,r0:l,r:h}}function BSt(n,t,e){t.eachSeriesByType(n,function(i){var r=i.getData(),o=r.mapDimension("value"),a=Pet(i,e),s=Bet(i,e),l=s.cx,h=s.cy,u=s.r,d=s.r0,c=-i.get("startAngle")*KC,f=i.get("endAngle"),g=i.get("padAngle")*KC;f=f==="auto"?c-hG:-f*KC;var p=i.get("minAngle")*KC,v=p+g,m=0;r.each(o,function(E){!isNaN(E)&&m++});var y=r.getSum(o),b=Math.PI/(y||m)*2,_=i.get("clockwise"),w=i.get("roseType"),C=i.get("stillShowZeroSum"),x=r.getDataExtent(o);x[0]=0;var S=_?1:-1,A=[c,f],T=S*g/2;HH(A,!_),c=A[0],f=A[1];var M=ket(i);M.startAngle=c,M.endAngle=f,M.clockwise=_;var R=Math.abs(f-c),L=R,B=0,P=c;if(r.setLayout({viewRect:a,r:u}),r.each(o,function(E,D){var I;if(isNaN(E)){r.setItemLayout(D,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:_,cx:l,cy:h,r0:d,r:w?NaN:u});return}w!=="area"?I=y===0&&C?b:E*b:I=R/m,I<v?(I=v,L-=v):B+=E;var O=P+S*I,H=0,F=0;g>I?(H=P+S*I/2,F=H):(H=P+T,F=O-T),r.setItemLayout(D,{angle:I,startAngle:H,endAngle:F,clockwise:_,cx:l,cy:h,r0:d,r:w?qe(E,x,[d,u]):u}),P=O}),L<hG&&m)if(L<=.001){var k=R/m;r.each(o,function(E,D){if(!isNaN(E)){var I=r.getItemLayout(D);I.angle=k;var O=0,H=0;k<g?(O=c+S*(D+1/2)*k,H=O):(O=c+S*D*k+T,H=c+S*(D+1)*k-T),I.startAngle=O,I.endAngle=H}})}else b=L/B,P=c,r.each(o,function(E,D){if(!isNaN(E)){var I=r.getItemLayout(D),O=I.angle===v?v:E*b,H=0,F=0;O<g?(H=P+S*O/2,F=H):(H=P+T,F=P+S*O-T),I.startAngle=H,I.endAngle=F,P+=S*O}})})}var ket=Te();function b_(n){return{seriesType:n,reset:function(t,e){var i=e.findComponents({mainType:"legend"});if(!(!i||!i.length)){var r=t.getData();r.filterSelf(function(o){for(var a=r.getName(o),s=0;s<i.length;s++)if(!i[s].isSelected(a))return!1;return!0})}}}}var kSt=Math.PI/180;function uG(n,t,e,i,r,o,a,s,l,h){if(n.length<2)return;function u(p){for(var v=p.rB,m=v*v,y=0;y<p.list.length;y++){var b=p.list[y],_=Math.abs(b.label.y-e),w=i+b.len,C=w*w,x=Math.sqrt(Math.abs((1-_*_/m)*C)),S=t+(x+b.len2)*r,A=S-b.label.x,T=b.targetTextWidth-A*r;Let(b,T,!0),b.label.x=S}}function d(p){for(var v={list:[],maxY:0},m={list:[],maxY:0},y=0;y<p.length;y++)if(p[y].labelAlignTo==="none"){var b=p[y],_=b.label.y>e?m:v,w=Math.abs(b.label.y-e);if(w>=_.maxY){var C=b.label.x-t-b.len2*r,x=i+b.len,S=Math.abs(C)<x?Math.sqrt(w*w/(1-C*C/x/x)):x;_.rB=S,_.maxY=w}_.list.push(b)}u(v),u(m)}for(var c=n.length,f=0;f<c;f++)if(n[f].position==="outer"&&n[f].labelAlignTo==="labelLine"){var g=n[f].label.x-h;n[f].linePoints[1][0]+=g,n[f].label.x=h}FQ(n,l,l+a)&&d(n)}function LSt(n,t,e,i,r,o,a,s){for(var l=[],h=[],u=Number.MAX_VALUE,d=-Number.MAX_VALUE,c=0;c<n.length;c++){var f=n[c].label;KP(n[c])||(f.x<t?(u=Math.min(u,f.x),l.push(n[c])):(d=Math.max(d,f.x),h.push(n[c])))}for(var c=0;c<n.length;c++){var g=n[c];if(!KP(g)&&g.linePoints){if(g.labelStyleWidth!=null)continue;var f=g.label,p=g.linePoints,v=void 0;g.labelAlignTo==="edge"?f.x<t?v=p[2][0]-g.labelDistance-a-g.edgeDistance:v=a+r-g.edgeDistance-p[2][0]-g.labelDistance:g.labelAlignTo==="labelLine"?f.x<t?v=u-a-g.bleedMargin:v=a+r-d-g.bleedMargin:f.x<t?v=f.x-a-g.bleedMargin:v=a+r-f.x-g.bleedMargin,g.targetTextWidth=v,Let(g,v)}}uG(h,t,e,i,1,r,o,a,s,d),uG(l,t,e,i,-1,r,o,a,s,u);for(var c=0;c<n.length;c++){var g=n[c];if(!KP(g)&&g.linePoints){var f=g.label,p=g.linePoints,m=g.labelAlignTo==="edge",y=f.style.padding,b=y?y[1]+y[3]:0,_=f.style.backgroundColor?0:b,w=g.rect.width+_,C=p[1][0]-p[2][0];m?f.x<t?p[2][0]=a+g.edgeDistance+w+g.labelDistance:p[2][0]=a+r-g.edgeDistance-w-g.labelDistance:(f.x<t?p[2][0]=f.x+g.labelDistance:p[2][0]=f.x-g.labelDistance,p[1][0]=p[2][0]+C),p[1][1]=p[2][1]=f.y}}}function Let(n,t,e){if(e===void 0&&(e=!1),n.labelStyleWidth==null){var i=n.label,r=i.style,o=n.rect,a=r.backgroundColor,s=r.padding,l=s?s[1]+s[3]:0,h=r.overflow,u=o.width+(a?0:l);if(t<u||e){var d=o.height;if(h&&h.match("break")){i.setStyle("backgroundColor",null),i.setStyle("width",t-l);var c=i.getBoundingRect();i.setStyle("width",Math.ceil(c.width)),i.setStyle("backgroundColor",a)}else{var f=t-l,g=t<u?f:e?f>n.unconstrainedWidth?null:f:null;i.setStyle("width",g)}var p=i.getBoundingRect();o.width=p.width;var v=(i.style.margin||0)+2.1;o.height=p.height+v,o.y-=(o.height-d)/2}}}function KP(n){return n.position==="center"}function ESt(n){var t=n.getData(),e=[],i,r,o=!1,a=(n.get("minShowLabelAngle")||0)*kSt,s=t.getLayout("viewRect"),l=t.getLayout("r"),h=s.width,u=s.x,d=s.y,c=s.height;function f(C){C.ignore=!0}function g(C){if(!C.ignore)return!0;for(var x in C.states)if(C.states[x].ignore===!1)return!0;return!1}t.each(function(C){var x=t.getItemGraphicEl(C),S=x.shape,A=x.getTextContent(),T=x.getTextGuideLine(),M=t.getItemModel(C),R=M.getModel("label"),L=R.get("position")||M.get(["emphasis","label","position"]),B=R.get("distanceToLabelLine"),P=R.get("alignTo"),k=mt(R.get("edgeDistance"),h),E=R.get("bleedMargin"),D=M.getModel("labelLine"),I=D.get("length");I=mt(I,h);var O=D.get("length2");if(O=mt(O,h),Math.abs(S.endAngle-S.startAngle)<a){z(A.states,f),A.ignore=!0,T&&(z(T.states,f),T.ignore=!0);return}if(g(A)){var H=(S.startAngle+S.endAngle)/2,F=Math.cos(H),N=Math.sin(H),$,V,X,Z;i=S.cx,r=S.cy;var tt=L==="inside"||L==="inner";if(L==="center")$=S.cx,V=S.cy,Z="center";else{var K=(tt?(S.r+S.r0)/2*F:S.r*F)+i,rt=(tt?(S.r+S.r0)/2*N:S.r*N)+r;if($=K+F*3,V=rt+N*3,!tt){var q=K+F*(I+l-S.r),it=rt+N*(I+l-S.r),nt=q+(F<0?-1:1)*O,W=it;P==="edge"?$=F<0?u+k:u+h-k:$=nt+(F<0?-B:B),V=W,X=[[K,rt],[q,it],[nt,W]]}Z=tt?"center":P==="edge"?F>0?"right":"left":F>0?"left":"right"}var G=Math.PI,j=0,U=R.get("rotate");if(Le(U))j=U*(G/180);else if(L==="center")j=0;else if(U==="radial"||U===!0){var J=F<0?-H+G:-H;j=J}else if(U==="tangential"&&L!=="outside"&&L!=="outer"){var ot=Math.atan2(F,N);ot<0&&(ot=G*2+ot);var st=N>0;st&&(ot=G+ot),j=ot-G}if(o=!!j,A.x=$,A.y=V,A.rotation=j,A.setStyle({verticalAlign:"middle"}),tt){A.setStyle({align:Z});var vt=A.states.select;vt&&(vt.x+=A.x,vt.y+=A.y)}else{var lt=A.getBoundingRect().clone();lt.applyTransform(A.getComputedTransform());var ft=(A.style.margin||0)+2.1;lt.y-=ft/2,lt.height+=ft,e.push({label:A,labelLine:T,position:L,len:I,len2:O,minTurnAngle:D.get("minTurnAngle"),maxSurfaceAngle:D.get("maxSurfaceAngle"),surfaceNormal:new Jt(F,N),linePoints:X,textAlign:Z,labelDistance:B,labelAlignTo:P,edgeDistance:k,bleedMargin:E,rect:lt,unconstrainedWidth:lt.width,labelStyleWidth:A.style.width})}x.setTextConfig({inside:tt})}}),!o&&n.get("avoidLabelOverlap")&&LSt(e,i,r,l,h,c,u,d);for(var p=0;p<e.length;p++){var v=e[p],m=v.label,y=v.labelLine,b=isNaN(m.x)||isNaN(m.y);if(m){m.setStyle({align:v.textAlign}),b&&(z(m.states,f),m.ignore=!0);var _=m.states.select;_&&(_.x+=m.x,_.y+=m.y)}if(y){var w=v.linePoints;b||!w?(z(y.states,f),y.ignore=!0):(OQ(w,v.minTurnAngle),X0t(w,v.surfaceNormal,v.maxSurfaceAngle),y.setShape({points:w}),m.__hostTarget.textGuideLineConfig={anchor:new Jt(w[0][0],w[0][1])})}}}var DSt=(function(n){et(t,n);function t(e,i,r){var o=n.call(this)||this;o.z2=2;var a=new Re;return o.setTextContent(a),o.updateData(e,i,r,!0),o}return t.prototype.updateData=function(e,i,r,o){var a=this,s=e.hostModel,l=e.getItemModel(i),h=l.getModel("emphasis"),u=e.getItemLayout(i),d=ht(Nc(l.getModel("itemStyle"),u,!0),u);if(isNaN(d.startAngle)){a.setShape(d);return}if(o){a.setShape(d);var c=s.getShallow("animationType");s.ecModel.ssr?(Bi(a,{scaleX:0,scaleY:0},s,{dataIndex:i,isFrom:!0}),a.originX=d.cx,a.originY=d.cy):c==="scale"?(a.shape.r=u.r0,Bi(a,{shape:{r:u.r}},s,i)):r!=null?(a.setShape({startAngle:r,endAngle:r}),Bi(a,{shape:{startAngle:u.startAngle,endAngle:u.endAngle}},s,i)):(a.shape.endAngle=u.startAngle,Ie(a,{shape:{endAngle:u.endAngle}},s,i))}else As(a),Ie(a,{shape:d},s,i);a.useStyle(e.getItemVisual(i,"style")),Ar(a,l);var f=(u.startAngle+u.endAngle)/2,g=s.get("selectedOffset"),p=Math.cos(f)*g,v=Math.sin(f)*g,m=l.getShallow("cursor");m&&a.attr("cursor",m),this._updateLabel(s,e,i),a.ensureState("emphasis").shape=ht({r:u.r+(h.get("scale")&&h.get("scaleSize")||0)},Nc(h.getModel("itemStyle"),u)),ht(a.ensureState("select"),{x:p,y:v,shape:Nc(l.getModel(["select","itemStyle"]),u)}),ht(a.ensureState("blur"),{shape:Nc(l.getModel(["blur","itemStyle"]),u)});var y=a.getTextGuideLine(),b=a.getTextContent();y&&ht(y.ensureState("select"),{x:p,y:v}),ht(b.ensureState("select"),{x:p,y:v}),Gi(this,h.get("focus"),h.get("blurScope"),h.get("disabled"))},t.prototype._updateLabel=function(e,i,r){var o=this,a=i.getItemModel(r),s=a.getModel("labelLine"),l=i.getItemVisual(r,"style"),h=l&&l.fill,u=l&&l.opacity;Tr(o,Zn(a),{labelFetcher:i.hostModel,labelDataIndex:r,inheritColor:h,defaultOpacity:u,defaultText:e.getFormattedLabel(r,"normal")||i.getName(r)});var d=o.getTextContent();o.setTextConfig({position:null,rotation:null}),d.attr({z2:10});var c=e.get(["label","position"]);if(c!=="outside"&&c!=="outer")o.removeTextGuideLine();else{var f=this.getTextGuideLine();f||(f=new fo,this.setTextGuideLine(f)),Cz(this,wz(a),{stroke:h,opacity:pl(s.get(["lineStyle","opacity"]),u,1)})}},t})(ho),ISt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.ignoreLabelLineUpdate=!0,e}return t.prototype.render=function(e,i,r,o){var a=e.getData(),s=this._data,l=this.group,h;if(!s&&a.count()>0){for(var u=a.getItemLayout(0),d=1;isNaN(u&&u.startAngle)&&d<a.count();++d)u=a.getItemLayout(d);u&&(h=u.startAngle)}if(this._emptyCircleSector&&l.remove(this._emptyCircleSector),a.count()===0&&e.get("showEmptyCircle")){var c=ket(e),f=new ho({shape:ht(Bet(e,r),c)});f.useStyle(e.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=f,l.add(f)}a.diff(s).add(function(g){var p=new DSt(a,g,h);a.setItemGraphicEl(g,p),l.add(p)}).update(function(g,p){var v=s.getItemGraphicEl(p);v.updateData(a,g,h),v.off("click"),l.add(v),a.setItemGraphicEl(g,v)}).remove(function(g){var p=s.getItemGraphicEl(g);Fy(p,e,g)}).execute(),ESt(e),e.get("animationTypeUpdate")!=="expansion"&&(this._data=a)},t.prototype.dispose=function(){},t.prototype.containPoint=function(e,i){var r=i.getData(),o=r.getItemLayout(0);if(o){var a=e[0]-o.cx,s=e[1]-o.cy,l=Math.sqrt(a*a+s*s);return l<=o.r&&l>=o.r0}},t.type="pie",t})(hi);function Kv(n,t,e){t=ut(t)&&{coordDimensions:t}||ht({encodeDefine:n.getEncode()},t);var i=n.getSource(),r=u_(i,t).dimensions,o=new oo(r,n);return o.initData(i,e),o}var __=(function(){function n(t,e){this._getDataWithEncodedVisual=t,this._getRawData=e}return n.prototype.getAllNames=function(){var t=this._getRawData();return t.mapArray(t.getName)},n.prototype.containName=function(t){var e=this._getRawData();return e.indexOfName(t)>=0},n.prototype.indexOfName=function(t){var e=this._getDataWithEncodedVisual();return e.indexOfName(t)},n.prototype.getItemVisual=function(t,e){var i=this._getDataWithEncodedVisual();return i.getItemVisual(t,e)},n})(),OSt=Te(),HSt=(function(n){et(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.init=function(e){n.prototype.init.apply(this,arguments),this.legendVisualProvider=new __(xt(this.getData,this),xt(this.getRawData,this)),this._defaultLabelLine(e)},t.prototype.mergeOption=function(){n.prototype.mergeOption.apply(this,arguments)},t.prototype.getInitialData=function(){return Kv(this,{coordDimensions:["value"],encodeDefaulter:qt(tz,this)})},t.prototype.getDataParams=function(e){var i=this.getData(),r=OSt(i),o=r.seats;if(!o){var a=[];i.each(i.mapDimension("value"),function(l){a.push(l)}),o=r.seats=_ct(a,i.hostModel.get("percentPrecision"))}var s=n.prototype.getDataParams.call(this,e);return s.percent=o[e]||0,s.$vars.push("percent"),s},t.prototype._defaultLabelLine=function(e){xf(e,"labelLine",["show"]);var i=e.labelLine,r=e.emphasis.labelLine;i.show=i.show&&e.label.show,r.show=r.show&&e.emphasis.label.show},t.type="series.pie",t.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},t})(Ci);function zSt(n){return{seriesType:n,reset:function(t,e){var i=t.getData();i.filterSelf(function(r){var o=i.mapDimension("value"),a=i.get(o,r);return!(Le(a)&&!isNaN(a)&&a<0)})}}}function FSt(n){n.registerChartView(ISt),n.registerSeriesModel(HSt),OJ("pie",n.registerAction),n.registerLayout(qt(BSt,"pie")),n.registerProcessor(b_("pie")),n.registerProcessor(zSt("pie"))}var NSt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e.hasSymbolVisual=!0,e}return t.prototype.getInitialData=function(e,i){return qh(null,this,{useEncodeDefaulter:!0})},t.prototype.getProgressive=function(){var e=this.option.progressive;return e??(this.option.large?5e3:this.get("progressive"))},t.prototype.getProgressiveThreshold=function(){var e=this.option.progressiveThreshold;return e??(this.option.large?1e4:this.get("progressiveThreshold"))},t.prototype.brushSelector=function(e,i,r){return r.point(i.getItemLayout(e))},t.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},t.type="series.scatter",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},t})(Ci),Eet=4,WSt=(function(){function n(){}return n})(),VSt=(function(n){et(t,n);function t(e){var i=n.call(this,e)||this;return i._off=0,i.hoverDataIdx=-1,i}return t.prototype.getDefaultShape=function(){return new WSt},t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.buildPath=function(e,i){var r=i.points,o=i.size,a=this.symbolProxy,s=a.shape,l=e.getContext?e.getContext():e,h=l&&o[0]<Eet,u=this.softClipShape,d;if(h){this._ctx=l;return}for(this._ctx=null,d=this._off;d<r.length;){var c=r[d++],f=r[d++];isNaN(c)||isNaN(f)||u&&!u.contain(c,f)||(s.x=c-o[0]/2,s.y=f-o[1]/2,s.width=o[0],s.height=o[1],a.buildPath(e,s,!0))}this.incremental&&(this._off=d,this.notClear=!0)},t.prototype.afterBrush=function(){var e=this.shape,i=e.points,r=e.size,o=this._ctx,a=this.softClipShape,s;if(o){for(s=this._off;s<i.length;){var l=i[s++],h=i[s++];isNaN(l)||isNaN(h)||a&&!a.contain(l,h)||o.fillRect(l-r[0]/2,h-r[1]/2,r[0],r[1])}this.incremental&&(this._off=s,this.notClear=!0)}},t.prototype.findDataIndex=function(e,i){for(var r=this.shape,o=r.points,a=r.size,s=Math.max(a[0],4),l=Math.max(a[1],4),h=o.length/2-1;h>=0;h--){var u=h*2,d=o[u]-s/2,c=o[u+1]-l/2;if(e>=d&&i>=c&&e<=d+s&&i<=c+l)return h}return-1},t.prototype.contain=function(e,i){var r=this.transformCoordToLocal(e,i),o=this.getBoundingRect();if(e=r[0],i=r[1],o.contain(e,i)){var a=this.hoverDataIdx=this.findDataIndex(e,i);return a>=0}return this.hoverDataIdx=-1,!1},t.prototype.getBoundingRect=function(){var e=this._rect;if(!e){for(var i=this.shape,r=i.points,o=i.size,a=o[0],s=o[1],l=1/0,h=1/0,u=-1/0,d=-1/0,c=0;c<r.length;){var f=r[c++],g=r[c++];l=Math.min(f,l),u=Math.max(f,u),h=Math.min(g,h),d=Math.max(g,d)}e=this._rect=new te(l-a/2,h-s/2,u-l+a,d-h+s)}return e},t})(ue),GSt=(function(){function n(){this.group=new Ft}return n.prototype.updateData=function(t,e){this._clear();var i=this._create();i.setShape({points:t.getLayout("points")}),this._setCommon(i,t,e)},n.prototype.updateLayout=function(t){var e=t.getLayout("points");this.group.eachChild(function(i){if(i.startIndex!=null){var r=(i.endIndex-i.startIndex)*2,o=i.startIndex*4*2;e=new Float32Array(e.buffer,o,r)}i.setShape("points",e),i.reset()})},n.prototype.incrementalPrepareUpdate=function(t){this._clear()},n.prototype.incrementalUpdate=function(t,e,i){var r=this._newAdded[0],o=e.getLayout("points"),a=r&&r.shape.points;if(a&&a.length<2e4){var s=a.length,l=new Float32Array(s+o.length);l.set(a),l.set(o,s),r.endIndex=t.end,r.setShape({points:l})}else{this._newAdded=[];var h=this._create();h.startIndex=t.start,h.endIndex=t.end,h.incremental=!0,h.setShape({points:o}),this._setCommon(h,e,i)}},n.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},n.prototype._create=function(){var t=new VSt({cursor:"default"});return t.ignoreCoarsePointer=!0,this.group.add(t),this._newAdded.push(t),t},n.prototype._setCommon=function(t,e,i){var r=e.hostModel;i=i||{};var o=e.getVisual("symbolSize");t.setShape("size",o instanceof Array?o:[o,o]),t.softClipShape=i.clipShape||null,t.symbolProxy=En(e.getVisual("symbol"),0,0,0,0),t.setColor=t.symbolProxy.setColor;var a=t.shape.size[0]<Eet;t.useStyle(r.getModel("itemStyle").getItemStyle(a?["color","shadowBlur","shadowColor"]:["color"]));var s=e.getVisual("style"),l=s&&s.fill;l&&t.setColor(l);var h=Vt(t);h.seriesIndex=r.seriesIndex,t.on("mousemove",function(u){h.dataIndex=null;var d=t.hoverDataIdx;d>=0&&(h.dataIndex=d+(t.startIndex||0))})},n.prototype.remove=function(){this._clear()},n.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},n})(),$St=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,i,r){var o=e.getData(),a=this._updateSymbolDraw(o,e);a.updateData(o,{clipShape:this._getClipShape(e)}),this._finished=!0},t.prototype.incrementalPrepareRender=function(e,i,r){var o=e.getData(),a=this._updateSymbolDraw(o,e);a.incrementalPrepareUpdate(o),this._finished=!1},t.prototype.incrementalRender=function(e,i,r){this._symbolDraw.incrementalUpdate(e,i.getData(),{clipShape:this._getClipShape(i)}),this._finished=e.end===i.getData().count()},t.prototype.updateTransform=function(e,i,r){var o=e.getData();if(this.group.dirty(),!this._finished||o.count()>1e4)return{update:!0};var a=y_("").reset(e,i,r);a.progress&&a.progress({start:0,end:o.count(),count:o.count()},o),this._symbolDraw.updateLayout(o)},t.prototype.eachRendered=function(e){this._symbolDraw&&this._symbolDraw.eachRendered(e)},t.prototype._getClipShape=function(e){if(e.get("clip",!0)){var i=e.coordinateSystem;return i&&i.getArea&&i.getArea(.1)}},t.prototype._updateSymbolDraw=function(e,i){var r=this._symbolDraw,o=i.pipelineContext,a=o.large;return(!r||a!==this._isLargeDraw)&&(r&&r.remove(),r=this._symbolDraw=a?new GSt:new v_,this._isLargeDraw=a,this.group.removeAll()),this.group.add(r.group),r},t.prototype.remove=function(e,i){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},t.prototype.dispose=function(){},t.type="scatter",t})(hi);function jSt(n){ae(qQ),n.registerSeriesModel(NSt),n.registerChartView($St),n.registerLayout(y_("scatter"))}function USt(n){n.eachSeriesByType("radar",function(t){var e=t.getData(),i=[],r=t.coordinateSystem;if(r){var o=r.getIndicatorAxes();z(o,function(a,s){e.each(e.mapDimension(o[s].dim),function(l,h){i[h]=i[h]||[];var u=r.dataToPoint(l,s);i[h][s]=dG(u)?u:cG(r)})}),e.each(function(a){var s=Zut(i[a],function(l){return dG(l)})||cG(r);i[a].push(s.slice()),e.setItemLayout(a,i[a])})}})}function dG(n){return!isNaN(n[0])&&!isNaN(n[1])}function cG(n){return[n.cx,n.cy]}function YSt(n){var t=n.polar;if(t){ut(t)||(t=[t]);var e=[];z(t,function(i,r){i.indicator?(i.type&&!i.shape&&(i.shape=i.type),n.radar=n.radar||[],ut(n.radar)||(n.radar=[n.radar]),n.radar.push(i)):e.push(i)}),n.polar=e}z(n.series,function(i){i&&i.type==="radar"&&i.polarIndex&&(i.radarIndex=i.polarIndex)})}var XSt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,i,r){var o=e.coordinateSystem,a=this.group,s=e.getData(),l=this._data;function h(c,f){var g=c.getItemVisual(f,"symbol")||"circle";if(g!=="none"){var p=Xv(c.getItemVisual(f,"symbolSize")),v=En(g,-1,-1,2,2),m=c.getItemVisual(f,"symbolRotate")||0;return v.attr({style:{strokeNoScale:!0},z2:100,scaleX:p[0]/2,scaleY:p[1]/2,rotation:m*Math.PI/180||0}),v}}function u(c,f,g,p,v,m){g.removeAll();for(var y=0;y<f.length-1;y++){var b=h(p,v);b&&(b.__dimIdx=y,c[y]?(b.setPosition(c[y]),Zf[m?"initProps":"updateProps"](b,{x:f[y][0],y:f[y][1]},e,v)):b.setPosition(f[y]),g.add(b))}}function d(c){return ct(c,function(f){return[o.cx,o.cy]})}s.diff(l).add(function(c){var f=s.getItemLayout(c);if(f){var g=new uo,p=new fo,v={shape:{points:f}};g.shape.points=d(f),p.shape.points=d(f),Bi(g,v,e,c),Bi(p,v,e,c);var m=new Ft,y=new Ft;m.add(p),m.add(g),m.add(y),u(p.shape.points,f,y,s,c,!0),s.setItemGraphicEl(c,m)}}).update(function(c,f){var g=l.getItemGraphicEl(f),p=g.childAt(0),v=g.childAt(1),m=g.childAt(2),y={shape:{points:s.getItemLayout(c)}};y.shape.points&&(u(p.shape.points,y.shape.points,m,s,c,!1),As(v),As(p),Ie(p,y,e),Ie(v,y,e),s.setItemGraphicEl(c,g))}).remove(function(c){a.remove(l.getItemGraphicEl(c))}).execute(),s.eachItemGraphicEl(function(c,f){var g=s.getItemModel(f),p=c.childAt(0),v=c.childAt(1),m=c.childAt(2),y=s.getItemVisual(f,"style"),b=y.fill;a.add(c),p.useStyle(Ot(g.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:b})),Ar(p,g,"lineStyle"),Ar(v,g,"areaStyle");var _=g.getModel("areaStyle"),w=_.isEmpty()&&_.parentModel.isEmpty();v.ignore=w,z(["emphasis","select","blur"],function(S){var A=g.getModel([S,"areaStyle"]),T=A.isEmpty()&&A.parentModel.isEmpty();v.ensureState(S).ignore=T&&w}),v.useStyle(Ot(_.getAreaStyle(),{fill:b,opacity:.7,decal:y.decal}));var C=g.getModel("emphasis"),x=C.getModel("itemStyle").getItemStyle();m.eachChild(function(S){if(S instanceof hr){var A=S.style;S.useStyle(ht({image:A.image,x:A.x,y:A.y,width:A.width,height:A.height},y))}else S.useStyle(y),S.setColor(b),S.style.strokeNoScale=!0;var T=S.ensureState("emphasis");T.style=zt(x);var M=s.getStore().get(s.getDimensionIndex(S.__dimIdx),f);(M==null||isNaN(M))&&(M=""),Tr(S,Zn(g),{labelFetcher:s.hostModel,labelDataIndex:f,labelDimIndex:S.__dimIdx,defaultText:M,inheritColor:b,defaultOpacity:y.opacity})}),Gi(c,C.get("focus"),C.get("blurScope"),C.get("disabled"))}),this._data=s},t.prototype.remove=function(){this.group.removeAll(),this._data=null},t.type="radar",t})(hi),qSt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e.hasSymbolVisual=!0,e}return t.prototype.init=function(e){n.prototype.init.apply(this,arguments),this.legendVisualProvider=new __(xt(this.getData,this),xt(this.getRawData,this))},t.prototype.getInitialData=function(e,i){return Kv(this,{generateCoord:"indicator_",generateCoordCount:1/0})},t.prototype.formatTooltip=function(e,i,r){var o=this.getData(),a=this.coordinateSystem,s=a.getIndicatorAxes(),l=this.getData().getName(e),h=l===""?this.name:l,u=SJ(this,e);return Jn("section",{header:h,sortBlocks:!0,blocks:ct(s,function(d){var c=o.get(o.mapDimension(d.dim),e);return Jn("nameValue",{markerType:"subItem",markerColor:u,name:d.name,value:c,sortParam:c})})})},t.prototype.getTooltipPosition=function(e){if(e!=null){for(var i=this.getData(),r=this.coordinateSystem,o=i.getValues(ct(r.dimensions,function(h){return i.mapDimension(h)}),e),a=0,s=o.length;a<s;a++)if(!isNaN(o[a])){var l=r.getIndicatorAxes();return r.coordToPoint(l[a].dataToCoord(o[a]),a)}}},t.type="series.radar",t.dependencies=["radar"],t.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},t})(Ci);function KSt(n){ae(Abt),n.registerChartView(XSt),n.registerSeriesModel(qSt),n.registerLayout(USt),n.registerProcessor(b_("radar")),n.registerPreprocessor(YSt)}var ZSt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,i,r,o){if(!(o&&o.type==="mapToggleSelect"&&o.from===this.uid)){var a=this.group;if(a.removeAll(),!e.getHostGeoModel()){if(this._mapDraw&&o&&o.type==="geoRoam"&&this._mapDraw.resetForLabelLayout(),o&&o.type==="geoRoam"&&o.componentType==="series"&&o.seriesId===e.id){var s=this._mapDraw;s&&a.add(s.group)}else if(e.needsDrawMap){var s=this._mapDraw||new ftt(r);a.add(s.group),s.draw(e,i,r,this,o),this._mapDraw=s}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;e.get("showLegendSymbol")&&i.getComponent("legend")&&this._renderSymbols(e,i,r)}}},t.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},t.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},t.prototype._renderSymbols=function(e,i,r){var o=e.originalData,a=this.group;o.each(o.mapDimension("value"),function(s,l){if(!isNaN(s)){var h=o.getItemLayout(l);if(!(!h||!h.point)){var u=h.point,d=h.offset,c=new Xh({style:{fill:e.getData().getVisual("style").fill},shape:{cx:u[0]+d*9,cy:u[1],r:3},silent:!0,z2:8+(d?0:Fv+1)});if(!d){var f=e.mainSeries.getData(),g=o.getName(l),p=f.indexOfName(g),v=o.getItemModel(l),m=v.getModel("label"),y=f.getItemGraphicEl(p);Tr(c,Zn(v),{labelFetcher:{getFormattedLabel:function(b,_){return e.getFormattedLabel(p,_)}},defaultText:g}),c.disableLabelAnimation=!0,m.get("position")||c.setTextConfig({position:"bottom"}),y.onHoverStateChange=function(b){lx(c,b)}}a.add(c)}}})},t.type="map",t})(hi),JSt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e.needsDrawMap=!1,e.seriesGroup=[],e.getTooltipPosition=function(i){if(i!=null){var r=this.getData().getName(i),o=this.coordinateSystem,a=o.getRegion(r);return a&&o.dataToPoint(a.getCenter())}},e}return t.prototype.getInitialData=function(e){for(var i=Kv(this,{coordDimensions:["value"],encodeDefaulter:qt(tz,this)}),r=Pt(),o=[],a=0,s=i.count();a<s;a++){var l=i.getName(a);r.set(l,a)}var h=Oh.load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return z(h.regions,function(u){var d=u.name,c=r.get(d),f=u.properties&&u.properties.echartsStyle,g;c==null?(g={name:d},o.push(g)):g=i.getRawDataItem(c),f&&Zt(g,f)}),i.appendData(o),i},t.prototype.getHostGeoModel=function(){var e=this.option.geoIndex;return e!=null?this.ecModel.getComponent("geo",e):null},t.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},t.prototype.getRawValue=function(e){var i=this.getData();return i.get(i.mapDimension("value"),e)},t.prototype.getRegionModel=function(e){var i=this.getData();return i.getItemModel(i.indexOfName(e))},t.prototype.formatTooltip=function(e,i,r){for(var o=this.getData(),a=this.getRawValue(e),s=o.getName(e),l=this.seriesGroup,h=[],u=0;u<l.length;u++){var d=l[u].originalData.indexOfName(s),c=o.mapDimension("value");isNaN(l[u].originalData.get(c,d))||h.push(l[u].name)}return Jn("section",{header:h.join(", "),noHeader:!h.length,blocks:[Jn("nameValue",{name:s,value:a})]})},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.setCenter=function(e){this.option.center=e},t.prototype.getLegendIcon=function(e){var i=e.icon||"roundRect",r=En(i,0,0,e.itemWidth,e.itemHeight,e.itemStyle.fill);return r.setStyle(e.itemStyle),r.style.stroke="none",i.indexOf("empty")>-1&&(r.style.stroke=r.style.fill,r.style.fill="#fff",r.style.lineWidth=2),r},t.type="series.map",t.dependencies=["geo"],t.layoutMode="box",t.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},t})(Ci);function QSt(n,t){var e={};return z(n,function(i){i.each(i.mapDimension("value"),function(r,o){var a="ec-"+i.getName(o);e[a]=e[a]||[],isNaN(r)||e[a].push(r)})}),n[0].map(n[0].mapDimension("value"),function(i,r){for(var o="ec-"+n[0].getName(r),a=0,s=1/0,l=-1/0,h=e[o].length,u=0;u<h;u++)s=Math.min(s,e[o][u]),l=Math.max(l,e[o][u]),a+=e[o][u];var d;return t==="min"?d=s:t==="max"?d=l:t==="average"?d=a/h:d=a,h===0?NaN:d})}function tAt(n){var t={};n.eachSeriesByType("map",function(e){var i=e.getHostGeoModel(),r=i?"o"+i.id:"i"+e.getMapType();(t[r]=t[r]||[]).push(e)}),z(t,function(e,i){for(var r=QSt(ct(e,function(a){return a.getData()}),e[0].get("mapValueCalculation")),o=0;o<e.length;o++)e[o].originalData=e[o].getData();for(var o=0;o<e.length;o++)e[o].seriesGroup=e,e[o].needsDrawMap=o===0&&!e[o].getHostGeoModel(),e[o].setData(r.cloneShallow()),e[o].mainSeries=e[0]})}function eAt(n){var t={};n.eachSeriesByType("map",function(e){var i=e.getMapType();if(!(e.getHostGeoModel()||t[i])){var r={};z(e.seriesGroup,function(a){var s=a.coordinateSystem,l=a.originalData;a.get("showLegendSymbol")&&n.getComponent("legend")&&l.each(l.mapDimension("value"),function(h,u){var d=l.getName(u),c=s.getRegion(d);if(!(!c||isNaN(h))){var f=r[d]||0,g=s.dataToPoint(c.getCenter());r[d]=f+1,l.setItemLayout(u,{point:g,offset:f})}})});var o=e.getData();o.each(function(a){var s=o.getName(a),l=o.getItemLayout(a)||{};l.showLabel=!r[s],o.setItemLayout(a,l)}),t[i]=!0}})}function iAt(n){ae(gtt),n.registerChartView(ZSt),n.registerSeriesModel(JSt),n.registerLayout(eAt),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,tAt),OJ("map",n.registerAction)}function nAt(n){var t=n;t.hierNode={defaultAncestor:null,ancestor:t,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var e=[t],i,r;i=e.pop();)if(r=i.children,i.isExpand&&r.length)for(var o=r.length,a=o-1;a>=0;a--){var s=r[a];s.hierNode={defaultAncestor:null,ancestor:s,prelim:0,modifier:0,change:0,shift:0,i:a,thread:null},e.push(s)}}function rAt(n,t){var e=n.isExpand?n.children:[],i=n.parentNode.children,r=n.hierNode.i?i[n.hierNode.i-1]:null;if(e.length){sAt(n);var o=(e[0].hierNode.prelim+e[e.length-1].hierNode.prelim)/2;r?(n.hierNode.prelim=r.hierNode.prelim+t(n,r),n.hierNode.modifier=n.hierNode.prelim-o):n.hierNode.prelim=o}else r&&(n.hierNode.prelim=r.hierNode.prelim+t(n,r));n.parentNode.hierNode.defaultAncestor=lAt(n,r,n.parentNode.hierNode.defaultAncestor||i[0],t)}function oAt(n){var t=n.hierNode.prelim+n.parentNode.hierNode.modifier;n.setLayout({x:t},!0),n.hierNode.modifier+=n.parentNode.hierNode.modifier}function fG(n){return arguments.length?n:dAt}function _0(n,t){return n-=Math.PI/2,{x:t*Math.cos(n),y:t*Math.sin(n)}}function aAt(n,t){return Vn(n.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function sAt(n){for(var t=n.children,e=t.length,i=0,r=0;--e>=0;){var o=t[e];o.hierNode.prelim+=i,o.hierNode.modifier+=i,r+=o.hierNode.change,i+=o.hierNode.shift+r}}function lAt(n,t,e,i){if(t){for(var r=n,o=n,a=o.parentNode.children[0],s=t,l=r.hierNode.modifier,h=o.hierNode.modifier,u=a.hierNode.modifier,d=s.hierNode.modifier;s=ZP(s),o=JP(o),s&&o;){r=ZP(r),a=JP(a),r.hierNode.ancestor=n;var c=s.hierNode.prelim+d-o.hierNode.prelim-h+i(s,o);c>0&&(uAt(hAt(s,n,e),n,c),h+=c,l+=c),d+=s.hierNode.modifier,h+=o.hierNode.modifier,l+=r.hierNode.modifier,u+=a.hierNode.modifier}s&&!ZP(r)&&(r.hierNode.thread=s,r.hierNode.modifier+=d-l),o&&!JP(a)&&(a.hierNode.thread=o,a.hierNode.modifier+=h-u,e=n)}return e}function ZP(n){var t=n.children;return t.length&&n.isExpand?t[t.length-1]:n.hierNode.thread}function JP(n){var t=n.children;return t.length&&n.isExpand?t[0]:n.hierNode.thread}function hAt(n,t,e){return n.hierNode.ancestor.parentNode===t.parentNode?n.hierNode.ancestor:e}function uAt(n,t,e){var i=e/(t.hierNode.i-n.hierNode.i);t.hierNode.change-=i,t.hierNode.shift+=e,t.hierNode.modifier+=e,t.hierNode.prelim+=e,n.hierNode.change+=i}function dAt(n,t){return n.parentNode===t.parentNode?1:2}var cAt=(function(){function n(){this.parentPoint=[],this.childPoints=[]}return n})(),fAt=(function(n){et(t,n);function t(e){return n.call(this,e)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new cAt},t.prototype.buildPath=function(e,i){var r=i.childPoints,o=r.length,a=i.parentPoint,s=r[0],l=r[o-1];if(o===1){e.moveTo(a[0],a[1]),e.lineTo(s[0],s[1]);return}var h=i.orient,u=h==="TB"||h==="BT"?0:1,d=1-u,c=mt(i.forkPosition,1),f=[];f[u]=a[u],f[d]=a[d]+(l[d]-a[d])*c,e.moveTo(a[0],a[1]),e.lineTo(f[0],f[1]),e.moveTo(s[0],s[1]),f[u]=s[u],e.lineTo(f[0],f[1]),f[u]=l[u],e.lineTo(f[0],f[1]),e.lineTo(l[0],l[1]);for(var g=1;g<o-1;g++){var p=r[g];e.moveTo(p[0],p[1]),f[u]=p[u],e.lineTo(f[0],f[1])}},t})(ue),gAt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e._mainGroup=new Ft,e}return t.prototype.init=function(e,i){this._controller=new g_(i.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},t.prototype.render=function(e,i,r){var o=e.getData(),a=e.layoutInfo,s=this._mainGroup,l=e.get("layout");l==="radial"?(s.x=a.x+a.width/2,s.y=a.y+a.height/2):(s.x=a.x,s.y=a.y),this._updateViewCoordSys(e,r),this._updateController(e,i,r);var h=this._data;o.diff(h).add(function(u){gG(o,u)&&pG(o,u,null,s,e)}).update(function(u,d){var c=h.getItemGraphicEl(d);if(!gG(o,u)){c&&mG(h,d,c,s,e);return}pG(o,u,c,s,e)}).remove(function(u){var d=h.getItemGraphicEl(u);d&&mG(h,u,d,s,e)}).execute(),this._nodeScaleRatio=e.get("nodeScaleRatio"),this._updateNodeAndLinkScale(e),e.get("expandAndCollapse")===!0&&o.eachItemGraphicEl(function(u,d){u.off("click").on("click",function(){r.dispatchAction({type:"treeExpandAndCollapse",seriesId:e.id,dataIndex:d})})}),this._data=o},t.prototype._updateViewCoordSys=function(e,i){var r=e.getData(),o=[];r.each(function(d){var c=r.getItemLayout(d);c&&!isNaN(c.x)&&!isNaN(c.y)&&o.push([+c.x,+c.y])});var a=[],s=[];WT(o,a,s);var l=this._min,h=this._max;s[0]-a[0]===0&&(a[0]=l?l[0]:a[0]-1,s[0]=h?h[0]:s[0]+1),s[1]-a[1]===0&&(a[1]=l?l[1]:a[1]-1,s[1]=h?h[1]:s[1]+1);var u=e.coordinateSystem=new f_;u.zoomLimit=e.get("scaleLimit"),u.setBoundingRect(a[0],a[1],s[0]-a[0],s[1]-a[1]),u.setCenter(e.get("center"),i),u.setZoom(e.get("zoom")),this.group.attr({x:u.x,y:u.y,scaleX:u.scaleX,scaleY:u.scaleY}),this._min=a,this._max=s},t.prototype._updateController=function(e,i,r){var o=this,a=this._controller,s=this._controllerHost,l=this.group;a.setPointerChecker(function(h,u,d){var c=l.getBoundingRect();return c.applyTransform(l.transform),c.contain(u,d)&&!dM(h,r,e)}),a.enable(e.get("roam")),s.zoomLimit=e.get("scaleLimit"),s.zoom=e.coordinateSystem.getZoom(),a.off("pan").off("zoom").on("pan",function(h){Dz(s,h.dx,h.dy),r.dispatchAction({seriesId:e.id,type:"treeRoam",dx:h.dx,dy:h.dy})}).on("zoom",function(h){Iz(s,h.scale,h.originX,h.originY),r.dispatchAction({seriesId:e.id,type:"treeRoam",zoom:h.scale,originX:h.originX,originY:h.originY}),o._updateNodeAndLinkScale(e),r.updateLabelLayout()})},t.prototype._updateNodeAndLinkScale=function(e){var i=e.getData(),r=this._getNodeGlobalScale(e);i.eachItemGraphicEl(function(o,a){o.setSymbolScale(r)})},t.prototype._getNodeGlobalScale=function(e){var i=e.coordinateSystem;if(i.type!=="view")return 1;var r=this._nodeScaleRatio,o=i.scaleX||1,a=i.getZoom(),s=(a-1)*r+1;return s/o},t.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},t.type="tree",t})(hi);function gG(n,t){var e=n.getItemLayout(t);return e&&!isNaN(e.x)&&!isNaN(e.y)}function pG(n,t,e,i,r){var o=!e,a=n.tree.getNodeByDataIndex(t),s=a.getModel(),l=a.getVisual("style").fill,h=a.isExpand===!1&&a.children.length!==0?l:"#fff",u=n.tree.root,d=a.parentNode===u?a:a.parentNode||a,c=n.getItemGraphicEl(d.dataIndex),f=d.getLayout(),g=c?{x:c.__oldX,y:c.__oldY,rawX:c.__radialOldRawX,rawY:c.__radialOldRawY}:f,p=a.getLayout();o?(e=new p_(n,t,null,{symbolInnerColor:h,useNameLabel:!0}),e.x=g.x,e.y=g.y):e.updateData(n,t,null,{symbolInnerColor:h,useNameLabel:!0}),e.__radialOldRawX=e.__radialRawX,e.__radialOldRawY=e.__radialRawY,e.__radialRawX=p.rawX,e.__radialRawY=p.rawY,i.add(e),n.setItemGraphicEl(t,e),e.__oldX=e.x,e.__oldY=e.y,Ie(e,{x:p.x,y:p.y},r);var v=e.getSymbolPath();if(r.get("layout")==="radial"){var m=u.children[0],y=m.getLayout(),b=m.children.length,_=void 0,w=void 0;if(p.x===y.x&&a.isExpand===!0&&m.children.length){var C={x:(m.children[0].getLayout().x+m.children[b-1].getLayout().x)/2,y:(m.children[0].getLayout().y+m.children[b-1].getLayout().y)/2};_=Math.atan2(C.y-y.y,C.x-y.x),_<0&&(_=Math.PI*2+_),w=C.x<y.x,w&&(_=_-Math.PI)}else _=Math.atan2(p.y-y.y,p.x-y.x),_<0&&(_=Math.PI*2+_),a.children.length===0||a.children.length!==0&&a.isExpand===!1?(w=p.x<y.x,w&&(_=_-Math.PI)):(w=p.x>y.x,w||(_=_-Math.PI));var x=w?"left":"right",S=s.getModel("label"),A=S.get("rotate"),T=A*(Math.PI/180),M=v.getTextContent();M&&(v.setTextConfig({position:S.get("position")||x,rotation:A==null?-_:T,origin:"center"}),M.setStyle("verticalAlign","middle"))}var R=s.get(["emphasis","focus"]),L=R==="relative"?ky(a.getAncestorsIndices(),a.getDescendantIndices()):R==="ancestor"?a.getAncestorsIndices():R==="descendant"?a.getDescendantIndices():null;L&&(Vt(e).focus=L),pAt(r,a,u,e,g,f,p,i),e.__edge&&(e.onHoverStateChange=function(B){if(B!=="blur"){var P=a.parentNode&&n.getItemGraphicEl(a.parentNode.dataIndex);P&&P.hoverState===i_||lx(e.__edge,B)}})}function pAt(n,t,e,i,r,o,a,s){var l=t.getModel(),h=n.get("edgeShape"),u=n.get("layout"),d=n.getOrient(),c=n.get(["lineStyle","curveness"]),f=n.get("edgeForkPosition"),g=l.getModel("lineStyle").getLineStyle(),p=i.__edge;if(h==="curve")t.parentNode&&t.parentNode!==e&&(p||(p=i.__edge=new r_({shape:BD(u,d,c,r,r)})),Ie(p,{shape:BD(u,d,c,o,a)},n));else if(h==="polyline"&&u==="orthogonal"&&t!==e&&t.children&&t.children.length!==0&&t.isExpand===!0){for(var v=t.children,m=[],y=0;y<v.length;y++){var b=v[y].getLayout();m.push([b.x,b.y])}p||(p=i.__edge=new fAt({shape:{parentPoint:[a.x,a.y],childPoints:[[a.x,a.y]],orient:d,forkPosition:f}})),Ie(p,{shape:{parentPoint:[a.x,a.y],childPoints:m}},n)}p&&!(h==="polyline"&&!t.isExpand)&&(p.useStyle(Ot({strokeNoScale:!0,fill:null},g)),Ar(p,l,"lineStyle"),Tf(p),s.add(p))}function vG(n,t,e,i,r){var o=t.tree.root,a=Det(o,n),s=a.source,l=a.sourceLayout,h=t.getItemGraphicEl(n.dataIndex);if(h){var u=t.getItemGraphicEl(s.dataIndex),d=u.__edge,c=h.__edge||(s.isExpand===!1||s.children.length===1?d:void 0),f=i.get("edgeShape"),g=i.get("layout"),p=i.get("orient"),v=i.get(["lineStyle","curveness"]);c&&(f==="curve"?td(c,{shape:BD(g,p,v,l,l),style:{opacity:0}},i,{cb:function(){e.remove(c)},removeOpt:r}):f==="polyline"&&i.get("layout")==="orthogonal"&&td(c,{shape:{parentPoint:[l.x,l.y],childPoints:[[l.x,l.y]]},style:{opacity:0}},i,{cb:function(){e.remove(c)},removeOpt:r}))}}function Det(n,t){for(var e=t.parentNode===n?t:t.parentNode||t,i;i=e.getLayout(),i==null;)e=e.parentNode===n?e:e.parentNode||e;return{source:e,sourceLayout:i}}function mG(n,t,e,i,r){var o=n.tree.getNodeByDataIndex(t),a=n.tree.root,s=Det(a,o).sourceLayout,l={duration:r.get("animationDurationUpdate"),easing:r.get("animationEasingUpdate")};td(e,{x:s.x+1,y:s.y+1},r,{cb:function(){i.remove(e),n.setItemGraphicEl(t,null)},removeOpt:l}),e.fadeOut(null,n.hostModel,{fadeLabel:!0,animation:l}),o.children.forEach(function(h){vG(h,n,i,r,l)}),vG(o,n,i,r,l)}function BD(n,t,e,i,r){var o,a,s,l,h,u,d,c;if(n==="radial"){h=i.rawX,d=i.rawY,u=r.rawX,c=r.rawY;var f=_0(h,d),g=_0(h,d+(c-d)*e),p=_0(u,c+(d-c)*e),v=_0(u,c);return{x1:f.x||0,y1:f.y||0,x2:v.x||0,y2:v.y||0,cpx1:g.x||0,cpy1:g.y||0,cpx2:p.x||0,cpy2:p.y||0}}else h=i.x,d=i.y,u=r.x,c=r.y,(t==="LR"||t==="RL")&&(o=h+(u-h)*e,a=d,s=u+(h-u)*e,l=c),(t==="TB"||t==="BT")&&(o=h,a=d+(c-d)*e,s=u,l=c+(d-c)*e);return{x1:h,y1:d,x2:u,y2:c,cpx1:o,cpy1:a,cpx2:s,cpy2:l}}var Ga=Te();function Iet(n){var t=n.mainData,e=n.datas;e||(e={main:t},n.datasAttr={main:"data"}),n.datas=n.mainData=null,Oet(t,e,n),z(e,function(i){z(t.TRANSFERABLE_METHODS,function(r){i.wrapMethod(r,qt(vAt,n))})}),t.wrapMethod("cloneShallow",qt(yAt,n)),z(t.CHANGABLE_METHODS,function(i){t.wrapMethod(i,qt(mAt,n))}),so(e[t.dataType]===t)}function vAt(n,t){if(CAt(this)){var e=ht({},Ga(this).datas);e[this.dataType]=t,Oet(t,e,n)}else rF(t,this.dataType,Ga(this).mainData,n);return t}function mAt(n,t){return n.struct&&n.struct.update(),t}function yAt(n,t){return z(Ga(t).datas,function(e,i){e!==t&&rF(e.cloneShallow(),i,t,n)}),t}function bAt(n){var t=Ga(this).mainData;return n==null||t==null?t:Ga(t).datas[n]}function _At(){var n=Ga(this).mainData;return n==null?[{data:n}]:ct(pe(Ga(n).datas),function(t){return{type:t,data:Ga(n).datas[t]}})}function CAt(n){return Ga(n).mainData===n}function Oet(n,t,e){Ga(n).datas={},z(t,function(i,r){rF(i,r,n,e)})}function rF(n,t,e,i){Ga(e).datas[t]=n,Ga(n).mainData=e,n.dataType=t,i.struct&&(n[i.structAttr]=i.struct,i.struct[i.datasAttr[t]]=n),n.getLinkedData=bAt,n.getLinkedDataAll=_At}var wAt=(function(){function n(t,e){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=t||"",this.hostTree=e}return n.prototype.isRemoved=function(){return this.dataIndex<0},n.prototype.eachNode=function(t,e,i){Dt(t)&&(i=e,e=t,t=null),t=t||{},Ct(t)&&(t={order:t});var r=t.order||"preorder",o=this[t.attr||"children"],a;r==="preorder"&&(a=e.call(i,this));for(var s=0;!a&&s<o.length;s++)o[s].eachNode(t,e,i);r==="postorder"&&e.call(i,this)},n.prototype.updateDepthAndHeight=function(t){var e=0;this.depth=t;for(var i=0;i<this.children.length;i++){var r=this.children[i];r.updateDepthAndHeight(t+1),r.height>e&&(e=r.height)}this.height=e+1},n.prototype.getNodeById=function(t){if(this.getId()===t)return this;for(var e=0,i=this.children,r=i.length;e<r;e++){var o=i[e].getNodeById(t);if(o)return o}},n.prototype.contains=function(t){if(t===this)return!0;for(var e=0,i=this.children,r=i.length;e<r;e++){var o=i[e].contains(t);if(o)return o}},n.prototype.getAncestors=function(t){for(var e=[],i=t?this:this.parentNode;i;)e.push(i),i=i.parentNode;return e.reverse(),e},n.prototype.getAncestorsIndices=function(){for(var t=[],e=this;e;)t.push(e.dataIndex),e=e.parentNode;return t.reverse(),t},n.prototype.getDescendantIndices=function(){var t=[];return this.eachNode(function(e){t.push(e.dataIndex)}),t},n.prototype.getValue=function(t){var e=this.hostTree.data;return e.getStore().get(e.getDimensionIndex(t||"value"),this.dataIndex)},n.prototype.setLayout=function(t,e){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,t,e)},n.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},n.prototype.getModel=function(t){if(!(this.dataIndex<0)){var e=this.hostTree,i=e.data.getItemModel(this.dataIndex);return i.getModel(t)}},n.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},n.prototype.setVisual=function(t,e){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,t,e)},n.prototype.getVisual=function(t){return this.hostTree.data.getItemVisual(this.dataIndex,t)},n.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},n.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},n.prototype.getChildIndex=function(){if(this.parentNode){for(var t=this.parentNode.children,e=0;e<t.length;++e)if(t[e]===this)return e;return-1}return-1},n.prototype.isAncestorOf=function(t){for(var e=t.parentNode;e;){if(e===this)return!0;e=e.parentNode}return!1},n.prototype.isDescendantOf=function(t){return t!==this&&t.isAncestorOf(this)},n})(),oF=(function(){function n(t){this.type="tree",this._nodes=[],this.hostModel=t}return n.prototype.eachNode=function(t,e,i){this.root.eachNode(t,e,i)},n.prototype.getNodeByDataIndex=function(t){var e=this.data.getRawIndex(t);return this._nodes[e]},n.prototype.getNodeById=function(t){return this.root.getNodeById(t)},n.prototype.update=function(){for(var t=this.data,e=this._nodes,i=0,r=e.length;i<r;i++)e[i].dataIndex=-1;for(var i=0,r=t.count();i<r;i++)e[t.getRawIndex(i)].dataIndex=i},n.prototype.clearLayouts=function(){this.data.clearItemLayouts()},n.createTree=function(t,e,i){var r=new n(e),o=[],a=1;s(t);function s(u,d){var c=u.value;a=Math.max(a,ut(c)?c.length:1),o.push(u);var f=new wAt(Fn(u.name,""),r);d?xAt(f,d):r.root=f,r._nodes.push(f);var g=u.children;if(g)for(var p=0;p<g.length;p++)s(g[p],f)}r.root.updateDepthAndHeight(0);var l=u_(o,{coordDimensions:["value"],dimensionsCount:a}).dimensions,h=new oo(l,e);return h.initData(o),i&&i(h),Iet({mainData:h,struct:r,structAttr:"tree"}),r.update(),r},n})();function xAt(n,t){var e=t.children;n.parentNode!==t&&(e.push(n),n.parentNode=t)}function tb(n,t,e){if(n&&ee(t,n.type)>=0){var i=e.getData().tree.root,r=n.targetNode;if(Ct(r)&&(r=i.getNodeById(r)),r&&i.contains(r))return{node:r};var o=n.targetNodeId;if(o!=null&&(r=i.getNodeById(o)))return{node:r}}}function Het(n){for(var t=[];n;)n=n.parentNode,n&&t.push(n);return t.reverse()}function aF(n,t){var e=Het(n);return ee(e,t)>=0}function pM(n,t){for(var e=[];n;){var i=n.dataIndex;e.push({name:n.name,dataIndex:i,value:t.getRawValue(i)}),n=n.parentNode}return e.reverse(),e}var SAt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.hasSymbolVisual=!0,e.ignoreStyleOnData=!0,e}return t.prototype.getInitialData=function(e){var i={name:e.name,children:e.data},r=e.leaves||{},o=new Ze(r,this,this.ecModel),a=oF.createTree(i,this,s);function s(d){d.wrapMethod("getItemModel",function(c,f){var g=a.getNodeByDataIndex(f);return g&&g.children.length&&g.isExpand||(c.parentModel=o),c})}var l=0;a.eachNode("preorder",function(d){d.depth>l&&(l=d.depth)});var h=e.expandAndCollapse,u=h&&e.initialTreeDepth>=0?e.initialTreeDepth:l;return a.root.eachNode("preorder",function(d){var c=d.hostTree.data.getRawDataItem(d.dataIndex);d.isExpand=c&&c.collapsed!=null?!c.collapsed:d.depth<=u}),a.data},t.prototype.getOrient=function(){var e=this.get("orient");return e==="horizontal"?e="LR":e==="vertical"&&(e="TB"),e},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.setCenter=function(e){this.option.center=e},t.prototype.formatTooltip=function(e,i,r){for(var o=this.getData().tree,a=o.root.children[0],s=o.getNodeByDataIndex(e),l=s.getValue(),h=s.name;s&&s!==a;)h=s.parentNode.name+"."+h,s=s.parentNode;return Jn("nameValue",{name:h,value:l,noValue:isNaN(l)||l==null})},t.prototype.getDataParams=function(e){var i=n.prototype.getDataParams.apply(this,arguments),r=this.getData().tree.getNodeByDataIndex(e);return i.treeAncestors=pM(r,this),i.collapsed=!r.isExpand,i},t.type="series.tree",t.layoutMode="box",t.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},t})(Ci);function AAt(n,t,e){for(var i=[n],r=[],o;o=i.pop();)if(r.push(o),o.isExpand){var a=o.children;if(a.length)for(var s=0;s<a.length;s++)i.push(a[s])}for(;o=r.pop();)t(o,e)}function Gm(n,t){for(var e=[n],i;i=e.pop();)if(t(i),i.isExpand){var r=i.children;if(r.length)for(var o=r.length-1;o>=0;o--)e.push(r[o])}}function TAt(n,t){n.eachSeriesByType("tree",function(e){MAt(e,t)})}function MAt(n,t){var e=aAt(n,t);n.layoutInfo=e;var i=n.get("layout"),r=0,o=0,a=null;i==="radial"?(r=2*Math.PI,o=Math.min(e.height,e.width)/2,a=fG(function(b,_){return(b.parentNode===_.parentNode?1:2)/b.depth})):(r=e.width,o=e.height,a=fG());var s=n.getData().tree.root,l=s.children[0];if(l){nAt(s),AAt(l,rAt,a),s.hierNode.modifier=-l.hierNode.prelim,Gm(l,oAt);var h=l,u=l,d=l;Gm(l,function(b){var _=b.getLayout().x;_<h.getLayout().x&&(h=b),_>u.getLayout().x&&(u=b),b.depth>d.depth&&(d=b)});var c=h===u?1:a(h,u)/2,f=c-h.getLayout().x,g=0,p=0,v=0,m=0;if(i==="radial")g=r/(u.getLayout().x+c+f),p=o/(d.depth-1||1),Gm(l,function(b){v=(b.getLayout().x+f)*g,m=(b.depth-1)*p;var _=_0(v,m);b.setLayout({x:_.x,y:_.y,rawX:v,rawY:m},!0)});else{var y=n.getOrient();y==="RL"||y==="LR"?(p=o/(u.getLayout().x+c+f),g=r/(d.depth-1||1),Gm(l,function(b){m=(b.getLayout().x+f)*p,v=y==="LR"?(b.depth-1)*g:r-(b.depth-1)*g,b.setLayout({x:v,y:m},!0)})):(y==="TB"||y==="BT")&&(g=r/(u.getLayout().x+c+f),p=o/(d.depth-1||1),Gm(l,function(b){v=(b.getLayout().x+f)*g,m=y==="TB"?(b.depth-1)*p:o-(b.depth-1)*p,b.setLayout({x:v,y:m},!0)}))}}}function RAt(n){n.eachSeriesByType("tree",function(t){var e=t.getData(),i=e.tree;i.eachNode(function(r){var o=r.getModel(),a=o.getModel("itemStyle").getItemStyle(),s=e.ensureUniqueItemVisual(r.dataIndex,"style");ht(s,a)})})}function PAt(n){n.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(t,e){e.eachComponent({mainType:"series",subType:"tree",query:t},function(i){var r=t.dataIndex,o=i.getData().tree,a=o.getNodeByDataIndex(r);a.isExpand=!a.isExpand})}),n.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(t,e,i){e.eachComponent({mainType:"series",subType:"tree",query:t},function(r){var o=r.coordinateSystem,a=Lz(o,t,void 0,i);r.setCenter&&r.setCenter(a.center),r.setZoom&&r.setZoom(a.zoom)})})}function BAt(n){n.registerChartView(gAt),n.registerSeriesModel(SAt),n.registerLayout(TAt),n.registerVisual(RAt),PAt(n)}var yG=["treemapZoomToNode","treemapRender","treemapMove"];function kAt(n){for(var t=0;t<yG.length;t++)n.registerAction({type:yG[t],update:"updateView"},dn);n.registerAction({type:"treemapRootToNode",update:"updateView"},function(e,i){i.eachComponent({mainType:"series",subType:"treemap",query:e},r);function r(o,a){var s=["treemapZoomToNode","treemapRootToNode"],l=tb(e,s,o);if(l){var h=o.getViewRoot();h&&(e.direction=aF(h,l.node)?"rollUp":"drillDown"),o.resetViewRoot(l.node)}}})}function zet(n){var t=n.getData(),e=t.tree,i={};e.eachNode(function(r){for(var o=r;o&&o.depth>1;)o=o.parentNode;var a=FE(n.ecModel,o.name||o.dataIndex+"",i);r.setVisual("decal",a)})}var LAt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e.preventUsingHoverLayer=!0,e}return t.prototype.getInitialData=function(e,i){var r={name:e.name,children:e.data};Fet(r);var o=e.levels||[],a=this.designatedVisualItemStyle={},s=new Ze({itemStyle:a},this,i);o=e.levels=EAt(o,i);var l=ct(o||[],function(d){return new Ze(d,s,i)},this),h=oF.createTree(r,this,u);function u(d){d.wrapMethod("getItemModel",function(c,f){var g=h.getNodeByDataIndex(f),p=g?l[g.depth]:null;return c.parentModel=p||s,c})}return h.data},t.prototype.optionUpdated=function(){this.resetViewRoot()},t.prototype.formatTooltip=function(e,i,r){var o=this.getData(),a=this.getRawValue(e),s=o.getName(e);return Jn("nameValue",{name:s,value:a})},t.prototype.getDataParams=function(e){var i=n.prototype.getDataParams.apply(this,arguments),r=this.getData().tree.getNodeByDataIndex(e);return i.treeAncestors=pM(r,this),i.treePathInfo=i.treeAncestors,i},t.prototype.setLayoutInfo=function(e){this.layoutInfo=this.layoutInfo||{},ht(this.layoutInfo,e)},t.prototype.mapIdToIndex=function(e){var i=this._idIndexMap;i||(i=this._idIndexMap=Pt(),this._idIndexMapCount=0);var r=i.get(e);return r==null&&i.set(e,r=this._idIndexMapCount++),r},t.prototype.getViewRoot=function(){return this._viewRoot},t.prototype.resetViewRoot=function(e){e?this._viewRoot=e:e=this._viewRoot;var i=this.getRawData().tree.root;(!e||e!==i&&!i.contains(e))&&(this._viewRoot=i)},t.prototype.enableAriaDecal=function(){zet(this)},t.type="series.treemap",t.layoutMode="box",t.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"",zoomToNodeRatio:.32*.32,scaleLimit:null,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}},emphasis:{itemStyle:{color:"rgba(0,0,0,0.9)"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},t})(Ci);function Fet(n){var t=0;z(n.children,function(i){Fet(i);var r=i.value;ut(r)&&(r=r[0]),t+=r});var e=n.value;ut(e)&&(e=e[0]),(e==null||isNaN(e))&&(e=t),e<0&&(e=0),ut(n.value)?n.value[0]=e:n.value=e}function EAt(n,t){var e=li(t.get("color")),i=li(t.get(["aria","decal","decals"]));if(e){n=n||[];var r,o;z(n,function(s){var l=new Ze(s),h=l.get("color"),u=l.get("decal");(l.get(["itemStyle","color"])||h&&h!=="none")&&(r=!0),(l.get(["itemStyle","decal"])||u&&u!=="none")&&(o=!0)});var a=n[0]||(n[0]={});return r||(a.color=e.slice()),!o&&i&&(a.decal=i.slice()),n}}var DAt=8,bG=8,QP=5,IAt=(function(){function n(t){this.group=new Ft,t.add(this.group)}return n.prototype.render=function(t,e,i,r){var o=t.getModel("breadcrumb"),a=this.group;if(a.removeAll(),!(!o.get("show")||!i)){var s=o.getModel("itemStyle"),l=o.getModel("emphasis"),h=s.getModel("textStyle"),u=l.getModel(["itemStyle","textStyle"]),d={pos:{left:o.get("left"),right:o.get("right"),top:o.get("top"),bottom:o.get("bottom")},box:{width:e.getWidth(),height:e.getHeight()},emptyItemWidth:o.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(i,d,h),this._renderContent(t,d,s,l,h,u,r),tM(a,d.pos,d.box)}},n.prototype._prepare=function(t,e,i){for(var r=t;r;r=r.parentNode){var o=Fn(r.getModel().get("name"),""),a=i.getTextRect(o),s=Math.max(a.width+DAt*2,e.emptyItemWidth);e.totalWidth+=s+bG,e.renderList.push({node:r,text:o,width:s})}},n.prototype._renderContent=function(t,e,i,r,o,a,s){for(var l=0,h=e.emptyItemWidth,u=t.get(["breadcrumb","height"]),d=qgt(e.pos,e.box),c=e.totalWidth,f=e.renderList,g=r.getModel("itemStyle").getItemStyle(),p=f.length-1;p>=0;p--){var v=f[p],m=v.node,y=v.width,b=v.text;c>d.width&&(c-=y-h,y=h,b=null);var _=new uo({shape:{points:OAt(l,0,y,u,p===f.length-1,p===0)},style:Ot(i.getItemStyle(),{lineJoin:"bevel"}),textContent:new Re({style:_i(o,{text:b})}),textConfig:{position:"inside"},z2:Fv*1e4,onclick:qt(s,m)});_.disableLabelAnimation=!0,_.getTextContent().ensureState("emphasis").style=_i(a,{text:b}),_.ensureState("emphasis").style=g,Gi(_,r.get("focus"),r.get("blurScope"),r.get("disabled")),this.group.add(_),HAt(_,t,m),l+=y+bG}},n.prototype.remove=function(){this.group.removeAll()},n})();function OAt(n,t,e,i,r,o){var a=[[r?n:n-QP,t],[n+e,t],[n+e,t+i],[r?n:n-QP,t+i]];return!o&&a.splice(2,0,[n+e+QP,t+i/2]),!r&&a.push([n,t+i/2]),a}function HAt(n,t,e){Vt(n).eventData={componentType:"series",componentSubType:"treemap",componentIndex:t.componentIndex,seriesIndex:t.seriesIndex,seriesName:t.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:e&&e.dataIndex,name:e&&e.name},treePathInfo:e&&pM(e,t)}}var zAt=(function(){function n(){this._storage=[],this._elExistsMap={}}return n.prototype.add=function(t,e,i,r,o){return this._elExistsMap[t.id]?!1:(this._elExistsMap[t.id]=!0,this._storage.push({el:t,target:e,duration:i,delay:r,easing:o}),!0)},n.prototype.finished=function(t){return this._finishedCallback=t,this},n.prototype.start=function(){for(var t=this,e=this._storage.length,i=function(){e--,e<=0&&(t._storage.length=0,t._elExistsMap={},t._finishedCallback&&t._finishedCallback())},r=0,o=this._storage.length;r<o;r++){var a=this._storage[r];a.el.animateTo(a.target,{duration:a.duration,delay:a.delay,easing:a.easing,setToFinal:!0,done:i,aborted:i})}return this},n})();function FAt(){return new zAt}var kD=Ft,_G=Ae,CG=3,wG="label",xG="upperLabel",NAt=Fv*10,WAt=Fv*2,VAt=Fv*3,oc=Af([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),SG=function(n){var t=oc(n);return t.stroke=t.fill=t.lineWidth=null,t},zx=Te(),GAt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e._state="ready",e._storage=$m(),e}return t.prototype.render=function(e,i,r,o){var a=i.findComponents({mainType:"series",subType:"treemap",query:o});if(!(ee(a,e)<0)){this.seriesModel=e,this.api=r,this.ecModel=i;var s=["treemapZoomToNode","treemapRootToNode"],l=tb(o,s,e),h=o&&o.type,u=e.layoutInfo,d=!this._oldTree,c=this._storage,f=h==="treemapRootToNode"&&l&&c?{rootNodeGroup:c.nodeGroup[l.node.getRawIndex()],direction:o.direction}:null,g=this._giveContainerGroup(u),p=e.get("animation"),v=this._doRender(g,e,f);p&&!d&&(!h||h==="treemapZoomToNode"||h==="treemapRootToNode")?this._doAnimation(g,v,e,f):v.renderFinally(),this._resetController(r),this._renderBreadcrumb(e,r,l)}},t.prototype._giveContainerGroup=function(e){var i=this._containerGroup;return i||(i=this._containerGroup=new kD,this._initEvents(i),this.group.add(i)),i.x=e.x,i.y=e.y,i},t.prototype._doRender=function(e,i,r){var o=i.getData().tree,a=this._oldTree,s=$m(),l=$m(),h=this._storage,u=[];function d(y,b,_,w){return $At(i,l,h,r,s,u,y,b,_,w)}p(o.root?[o.root]:[],a&&a.root?[a.root]:[],e,o===a||!a,0);var c=v(h);if(this._oldTree=o,this._storage=l,this._controllerHost){var f=this.seriesModel.layoutInfo,g=o.root.getLayout();g.width===f.width&&g.height===f.height&&(this._controllerHost.zoom=1)}return{lastsForAnimation:s,willDeleteEls:c,renderFinally:m};function p(y,b,_,w,C){w?(b=y,z(y,function(A,T){!A.isRemoved()&&S(T,T)})):new Dh(b,y,x,x).add(S).update(S).remove(qt(S,null)).execute();function x(A){return A.getId()}function S(A,T){var M=A!=null?y[A]:null,R=T!=null?b[T]:null,L=d(M,R,_,C);L&&p(M&&M.viewChildren||[],R&&R.viewChildren||[],L,w,C+1)}}function v(y){var b=$m();return y&&z(y,function(_,w){var C=b[w];z(_,function(x){x&&(C.push(x),zx(x).willDelete=!0)})}),b}function m(){z(c,function(y){z(y,function(b){b.parent&&b.parent.remove(b)})}),z(u,function(y){y.invisible=!0,y.dirty()})}},t.prototype._doAnimation=function(e,i,r,o){var a=r.get("animationDurationUpdate"),s=r.get("animationEasing"),l=(Dt(a)?0:a)||0,h=(Dt(s)?null:s)||"cubicOut",u=FAt();z(i.willDeleteEls,function(d,c){z(d,function(f,g){if(!f.invisible){var p=f.parent,v,m=zx(p);if(o&&o.direction==="drillDown")v=p===o.rootNodeGroup?{shape:{x:0,y:0,width:m.nodeWidth,height:m.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var y=0,b=0;m.willDelete||(y=m.nodeWidth/2,b=m.nodeHeight/2),v=c==="nodeGroup"?{x:y,y:b,style:{opacity:0}}:{shape:{x:y,y:b,width:0,height:0},style:{opacity:0}}}v&&u.add(f,v,l,0,h)}})}),z(this._storage,function(d,c){z(d,function(f,g){var p=i.lastsForAnimation[c][g],v={};p&&(f instanceof Ft?p.oldX!=null&&(v.x=f.x,v.y=f.y,f.x=p.oldX,f.y=p.oldY):(p.oldShape&&(v.shape=ht({},f.shape),f.setShape(p.oldShape)),p.fadein?(f.setStyle("opacity",0),v.style={opacity:1}):f.style.opacity!==1&&(v.style={opacity:1})),u.add(f,v,l,0,h))})},this),this._state="animating",u.finished(xt(function(){this._state="ready",i.renderFinally()},this)).start()},t.prototype._resetController=function(e){var i=this._controller,r=this._controllerHost;r||(this._controllerHost={target:this.group},r=this._controllerHost),i||(i=this._controller=new g_(e.getZr()),i.enable(this.seriesModel.get("roam")),r.zoomLimit=this.seriesModel.get("scaleLimit"),r.zoom=this.seriesModel.get("zoom"),i.on("pan",xt(this._onPan,this)),i.on("zoom",xt(this._onZoom,this)));var o=new te(0,0,e.getWidth(),e.getHeight());i.setPointerChecker(function(a,s,l){return o.contain(s,l)})},t.prototype._clearController=function(){var e=this._controller;this._controllerHost=null,e&&(e.dispose(),e=null)},t.prototype._onPan=function(e){if(this._state!=="animating"&&(Math.abs(e.dx)>CG||Math.abs(e.dy)>CG)){var i=this.seriesModel.getData().tree.root;if(!i)return;var r=i.getLayout();if(!r)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:r.x+e.dx,y:r.y+e.dy,width:r.width,height:r.height}})}},t.prototype._onZoom=function(e){var i=e.originX,r=e.originY,o=e.scale;if(this._state!=="animating"){var a=this.seriesModel.getData().tree.root;if(!a)return;var s=a.getLayout();if(!s)return;var l=new te(s.x,s.y,s.width,s.height),h=null,u=this._controllerHost;h=u.zoomLimit;var d=u.zoom=u.zoom||1;if(d*=o,h){var c=h.min||0,f=h.max||1/0;d=Math.max(Math.min(f,d),c)}var g=d/u.zoom;u.zoom=d;var p=this.seriesModel.layoutInfo;i-=p.x,r-=p.y;var v=Xo();xl(v,v,[-i,-r]),RH(v,v,[g,g]),xl(v,v,[i,r]),l.applyTransform(v),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:l.x,y:l.y,width:l.width,height:l.height}})}},t.prototype._initEvents=function(e){var i=this;e.on("click",function(r){if(i._state==="ready"){var o=i.seriesModel.get("nodeClick",!0);if(o){var a=i.findTarget(r.offsetX,r.offsetY);if(a){var s=a.node;if(s.getLayout().isLeafRoot)i._rootToNode(a);else if(o==="zoomToNode")i._zoomToNode(a);else if(o==="link"){var l=s.hostTree.data.getItemModel(s.dataIndex),h=l.get("link",!0),u=l.get("target",!0)||"blank";h&&gx(h,u)}}}}},this)},t.prototype._renderBreadcrumb=function(e,i,r){var o=this;r||(r=e.get("leafDepth",!0)!=null?{node:e.getViewRoot()}:this.findTarget(i.getWidth()/2,i.getHeight()/2),r||(r={node:e.getData().tree.root})),(this._breadcrumb||(this._breadcrumb=new IAt(this.group))).render(e,i,r.node,function(a){o._state!=="animating"&&(aF(e.getViewRoot(),a)?o._rootToNode({node:a}):o._zoomToNode({node:a}))})},t.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage=$m(),this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},t.prototype.dispose=function(){this._clearController()},t.prototype._zoomToNode=function(e){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},t.prototype._rootToNode=function(e){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},t.prototype.findTarget=function(e,i){var r,o=this.seriesModel.getViewRoot();return o.eachNode({attr:"viewChildren",order:"preorder"},function(a){var s=this._storage.background[a.getRawIndex()];if(s){var l=s.transformCoordToLocal(e,i),h=s.shape;if(h.x<=l[0]&&l[0]<=h.x+h.width&&h.y<=l[1]&&l[1]<=h.y+h.height)r={node:a,offsetX:l[0],offsetY:l[1]};else return!1}},this),r},t.type="treemap",t})(hi);function $m(){return{nodeGroup:[],background:[],content:[]}}function $At(n,t,e,i,r,o,a,s,l,h){if(!a)return;var u=a.getLayout(),d=n.getData(),c=a.getModel();if(d.setItemGraphicEl(a.dataIndex,null),!u||!u.isInView)return;var f=u.width,g=u.height,p=u.borderWidth,v=u.invisible,m=a.getRawIndex(),y=s&&s.getRawIndex(),b=a.viewChildren,_=u.upperHeight,w=b&&b.length,C=c.getModel("itemStyle"),x=c.getModel(["emphasis","itemStyle"]),S=c.getModel(["blur","itemStyle"]),A=c.getModel(["select","itemStyle"]),T=C.get("borderRadius")||0,M=V("nodeGroup",kD);if(!M)return;if(l.add(M),M.x=u.x||0,M.y=u.y||0,M.markRedraw(),zx(M).nodeWidth=f,zx(M).nodeHeight=g,u.isAboveViewRoot)return M;var R=V("background",_G,h,WAt);R&&O(M,R,w&&u.upperLabelHeight);var L=c.getModel("emphasis"),B=L.get("focus"),P=L.get("blurScope"),k=L.get("disabled"),E=B==="ancestor"?a.getAncestorsIndices():B==="descendant"?a.getDescendantIndices():B;if(w)zy(M)&&Ic(M,!1),R&&(Ic(R,!k),d.setItemGraphicEl(a.dataIndex,R),kE(R,E,P));else{var D=V("content",_G,h,VAt);D&&H(M,D),R.disableMorphing=!0,R&&zy(R)&&Ic(R,!1),Ic(M,!k),d.setItemGraphicEl(a.dataIndex,M);var I=c.getShallow("cursor");I&&D.attr("cursor",I),kE(M,E,P)}return M;function O(tt,K,rt){var q=Vt(K);if(q.dataIndex=a.dataIndex,q.seriesIndex=n.seriesIndex,K.setShape({x:0,y:0,width:f,height:g,r:T}),v)F(K);else{K.invisible=!1;var it=a.getVisual("style"),nt=it.stroke,W=SG(C);W.fill=nt;var G=oc(x);G.fill=x.get("borderColor");var j=oc(S);j.fill=S.get("borderColor");var U=oc(A);if(U.fill=A.get("borderColor"),rt){var J=f-2*p;N(K,nt,it.opacity,{x:p,y:0,width:J,height:_})}else K.removeTextContent();K.setStyle(W),K.ensureState("emphasis").style=G,K.ensureState("blur").style=j,K.ensureState("select").style=U,Tf(K)}tt.add(K)}function H(tt,K){var rt=Vt(K);rt.dataIndex=a.dataIndex,rt.seriesIndex=n.seriesIndex;var q=Math.max(f-2*p,0),it=Math.max(g-2*p,0);if(K.culling=!0,K.setShape({x:p,y:p,width:q,height:it,r:T}),v)F(K);else{K.invisible=!1;var nt=a.getVisual("style"),W=nt.fill,G=SG(C);G.fill=W,G.decal=nt.decal;var j=oc(x),U=oc(S),J=oc(A);N(K,W,nt.opacity,null),K.setStyle(G),K.ensureState("emphasis").style=j,K.ensureState("blur").style=U,K.ensureState("select").style=J,Tf(K)}tt.add(K)}function F(tt){!tt.invisible&&o.push(tt)}function N(tt,K,rt,q){var it=c.getModel(q?xG:wG),nt=Fn(c.get("name"),null),W=it.getShallow("show");Tr(tt,Zn(c,q?xG:wG),{defaultText:W?nt:null,inheritColor:K,defaultOpacity:rt,labelFetcher:n,labelDataIndex:a.dataIndex});var G=tt.getTextContent();if(G){var j=G.style,U=AH(j.padding||0);q&&(tt.setTextConfig({layoutRect:q}),G.disableLabelLayout=!0),G.beforeUpdate=function(){var ot=Math.max((q?q.width:tt.shape.width)-U[1]-U[3],0),st=Math.max((q?q.height:tt.shape.height)-U[0]-U[2],0);(j.width!==ot||j.height!==st)&&G.setStyle({width:ot,height:st})},j.truncateMinChar=2,j.lineOverflow="truncate",$(j,q,u);var J=G.getState("emphasis");$(J?J.style:null,q,u)}}function $(tt,K,rt){var q=tt?tt.text:null;if(!K&&rt.isLeafRoot&&q!=null){var it=n.get("drillDownIcon",!0);tt.text=it?it+" "+q:q}}function V(tt,K,rt,q){var it=y!=null&&e[tt][y],nt=r[tt];return it?(e[tt][y]=null,X(nt,it)):v||(it=new K,it instanceof Ua&&(it.z2=jAt(rt,q)),Z(nt,it)),t[tt][m]=it}function X(tt,K){var rt=tt[m]={};K instanceof kD?(rt.oldX=K.x,rt.oldY=K.y):rt.oldShape=ht({},K.shape)}function Z(tt,K){var rt=tt[m]={},q=a.parentNode,it=K instanceof Ft;if(q&&(!i||i.direction==="drillDown")){var nt=0,W=0,G=r.background[q.getRawIndex()];!i&&G&&G.oldShape&&(nt=G.oldShape.width,W=G.oldShape.height),it?(rt.oldX=0,rt.oldY=W):rt.oldShape={x:nt,y:W,width:0,height:0}}rt.fadein=!it}}function jAt(n,t){return n*NAt+t}var UAt="itemStyle",Net=Te();const YAt={seriesType:"treemap",reset:function(n){var t=n.getData().tree,e=t.root;e.isRemoved()||Wet(e,{},n.getViewRoot().getAncestors(),n)}};function Wet(n,t,e,i){var r=n.getModel(),o=n.getLayout(),a=n.hostTree.data;if(!(!o||o.invisible||!o.isInView)){var s=r.getModel(UAt),l=XAt(s,t,i),h=a.ensureUniqueItemVisual(n.dataIndex,"style"),u=s.get("borderColor"),d=s.get("borderColorSaturation"),c;d!=null&&(c=AG(l),u=qAt(d,c)),h.stroke=u;var f=n.viewChildren;if(!f||!f.length)c=AG(l),h.fill=c;else{var g=KAt(n,r,o,s,l,f);z(f,function(p,v){if(p.depth>=e.length||p===e[p.depth]){var m=ZAt(r,l,p,v,g,i);Wet(p,m,e,i)}})}}}function XAt(n,t,e){var i=ht({},t),r=e.designatedVisualItemStyle;return z(["color","colorAlpha","colorSaturation"],function(o){r[o]=t[o];var a=n.get(o);r[o]=null,a!=null&&(i[o]=a)}),i}function AG(n){var t=tB(n,"color");if(t){var e=tB(n,"colorAlpha"),i=tB(n,"colorSaturation");return i&&(t=G0(t,null,null,i)),e&&(t=ix(t,e)),t}}function qAt(n,t){return t!=null?G0(t,null,null,n):null}function tB(n,t){var e=n[t];if(e!=null&&e!=="none")return e}function KAt(n,t,e,i,r,o){if(!(!o||!o.length)){var a=eB(t,"color")||r.color!=null&&r.color!=="none"&&(eB(t,"colorAlpha")||eB(t,"colorSaturation"));if(a){var s=t.get("visualMin"),l=t.get("visualMax"),h=e.dataExtent.slice();s!=null&&s<h[0]&&(h[0]=s),l!=null&&l>h[1]&&(h[1]=l);var u=t.get("colorMappingBy"),d={type:a.name,dataExtent:h,visual:a.range};d.type==="color"&&(u==="index"||u==="id")?(d.mappingMethod="category",d.loop=!0):d.mappingMethod="linear";var c=new qn(d);return Net(c).drColorMappingBy=u,c}}}function eB(n,t){var e=n.get(t);return ut(e)&&e.length?{name:t,range:e}:null}function ZAt(n,t,e,i,r,o){var a=ht({},t);if(r){var s=r.type,l=s==="color"&&Net(r).drColorMappingBy,h=l==="index"?i:l==="id"?o.mapIdToIndex(e.getId()):e.getValue(n.get("visualDimension"));a[s]=r.mapValueToVisual(h)}return a}var eb=Math.max,Fx=Math.min,TG=rr,sF=z,Vet=["itemStyle","borderWidth"],JAt=["itemStyle","gapWidth"],QAt=["upperLabel","show"],tTt=["upperLabel","height"];const eTt={seriesType:"treemap",reset:function(n,t,e,i){var r=e.getWidth(),o=e.getHeight(),a=n.option,s=Vn(n.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()}),l=a.size||[],h=mt(TG(s.width,l[0]),r),u=mt(TG(s.height,l[1]),o),d=i&&i.type,c=["treemapZoomToNode","treemapRootToNode"],f=tb(i,c,n),g=d==="treemapRender"||d==="treemapMove"?i.rootRect:null,p=n.getViewRoot(),v=Het(p);if(d!=="treemapMove"){var m=d==="treemapZoomToNode"?sTt(n,f,p,h,u):g?[g.width,g.height]:[h,u],y=a.sort;y&&y!=="asc"&&y!=="desc"&&(y="desc");var b={squareRatio:a.squareRatio,sort:y,leafDepth:a.leafDepth};p.hostTree.clearLayouts();var _={x:0,y:0,width:m[0],height:m[1],area:m[0]*m[1]};p.setLayout(_),Get(p,b,!1,0),_=p.getLayout(),sF(v,function(C,x){var S=(v[x+1]||p).getValue();C.setLayout(ht({dataExtent:[S,S],borderWidth:0,upperHeight:0},_))})}var w=n.getData().tree.root;w.setLayout(lTt(s,g,f),!0),n.setLayoutInfo(s),$et(w,new te(-s.x,-s.y,r,o),v,p,0)}};function Get(n,t,e,i){var r,o;if(!n.isRemoved()){var a=n.getLayout();r=a.width,o=a.height;var s=n.getModel(),l=s.get(Vet),h=s.get(JAt)/2,u=jet(s),d=Math.max(l,u),c=l-h,f=d-h;n.setLayout({borderWidth:l,upperHeight:d,upperLabelHeight:u},!0),r=eb(r-2*c,0),o=eb(o-c-f,0);var g=r*o,p=iTt(n,s,g,t,e,i);if(p.length){var v={x:c,y:f,width:r,height:o},m=Fx(r,o),y=1/0,b=[];b.area=0;for(var _=0,w=p.length;_<w;){var C=p[_];b.push(C),b.area+=C.getLayout().area;var x=aTt(b,m,t.squareRatio);x<=y?(_++,y=x):(b.area-=b.pop().getLayout().area,MG(b,m,v,h,!1),m=Fx(v.width,v.height),b.length=b.area=0,y=1/0)}if(b.length&&MG(b,m,v,h,!0),!e){var S=s.get("childrenVisibleMin");S!=null&&g<S&&(e=!0)}for(var _=0,w=p.length;_<w;_++)Get(p[_],t,e,i+1)}}}function iTt(n,t,e,i,r,o){var a=n.children||[],s=i.sort;s!=="asc"&&s!=="desc"&&(s=null);var l=i.leafDepth!=null&&i.leafDepth<=o;if(r&&!l)return n.viewChildren=[];a=Ge(a,function(f){return!f.isRemoved()}),rTt(a,s);var h=oTt(t,a,s);if(h.sum===0)return n.viewChildren=[];if(h.sum=nTt(t,e,h.sum,s,a),h.sum===0)return n.viewChildren=[];for(var u=0,d=a.length;u<d;u++){var c=a[u].getValue()/h.sum*e;a[u].setLayout({area:c})}return l&&(a.length&&n.setLayout({isLeafRoot:!0},!0),a.length=0),n.viewChildren=a,n.setLayout({dataExtent:h.dataExtent},!0),a}function nTt(n,t,e,i,r){if(!i)return e;for(var o=n.get("visibleMin"),a=r.length,s=a,l=a-1;l>=0;l--){var h=r[i==="asc"?a-l-1:l].getValue();h/e*t<o&&(s=l,e-=h)}return i==="asc"?r.splice(0,a-s):r.splice(s,a-s),e}function rTt(n,t){return t&&n.sort(function(e,i){var r=t==="asc"?e.getValue()-i.getValue():i.getValue()-e.getValue();return r===0?t==="asc"?e.dataIndex-i.dataIndex:i.dataIndex-e.dataIndex:r}),n}function oTt(n,t,e){for(var i=0,r=0,o=t.length;r<o;r++)i+=t[r].getValue();var a=n.get("visualDimension"),s;return!t||!t.length?s=[NaN,NaN]:a==="value"&&e?(s=[t[t.length-1].getValue(),t[0].getValue()],e==="asc"&&s.reverse()):(s=[1/0,-1/0],sF(t,function(l){var h=l.getValue(a);h<s[0]&&(s[0]=h),h>s[1]&&(s[1]=h)})),{sum:i,dataExtent:s}}function aTt(n,t,e){for(var i=0,r=1/0,o=0,a=void 0,s=n.length;o<s;o++)a=n[o].getLayout().area,a&&(a<r&&(r=a),a>i&&(i=a));var l=n.area*n.area,h=t*t*e;return l?eb(h*i/l,l/(h*r)):1/0}function MG(n,t,e,i,r){var o=t===e.width?0:1,a=1-o,s=["x","y"],l=["width","height"],h=e[s[o]],u=t?n.area/t:0;(r||u>e[l[a]])&&(u=e[l[a]]);for(var d=0,c=n.length;d<c;d++){var f=n[d],g={},p=u?f.getLayout().area/u:0,v=g[l[a]]=eb(u-2*i,0),m=e[s[o]]+e[l[o]]-h,y=d===c-1||m<p?m:p,b=g[l[o]]=eb(y-2*i,0);g[s[a]]=e[s[a]]+Fx(i,v/2),g[s[o]]=h+Fx(i,b/2),h+=y,f.setLayout(g,!0)}e[s[a]]+=u,e[l[a]]-=u}function sTt(n,t,e,i,r){var o=(t||{}).node,a=[i,r];if(!o||o===e)return a;for(var s,l=i*r,h=l*n.option.zoomToNodeRatio;s=o.parentNode;){for(var u=0,d=s.children,c=0,f=d.length;c<f;c++)u+=d[c].getValue();var g=o.getValue();if(g===0)return a;h*=u/g;var p=s.getModel(),v=p.get(Vet),m=Math.max(v,jet(p));h+=4*v*v+(3*v+m)*Math.pow(h,.5),h>l5&&(h=l5),o=s}h<l&&(h=l);var y=Math.pow(h/l,.5);return[i*y,r*y]}function lTt(n,t,e){if(t)return{x:t.x,y:t.y};var i={x:0,y:0};if(!e)return i;var r=e.node,o=r.getLayout();if(!o)return i;for(var a=[o.width/2,o.height/2],s=r;s;){var l=s.getLayout();a[0]+=l.x,a[1]+=l.y,s=s.parentNode}return{x:n.width/2-a[0],y:n.height/2-a[1]}}function $et(n,t,e,i,r){var o=n.getLayout(),a=e[r],s=a&&a===n;if(!(a&&!s||r===e.length&&n!==i)){n.setLayout({isInView:!0,invisible:!s&&!t.intersect(o),isAboveViewRoot:s},!0);var l=new te(t.x-o.x,t.y-o.y,t.width,t.height);sF(n.viewChildren||[],function(h){$et(h,l,e,i,r+1)})}}function jet(n){return n.get(QAt)?n.get(tTt):0}function hTt(n){n.registerSeriesModel(LAt),n.registerChartView(GAt),n.registerVisual(YAt),n.registerLayout(eTt),kAt(n)}function uTt(n){var t=n.findComponents({mainType:"legend"});!t||!t.length||n.eachSeriesByType("graph",function(e){var i=e.getCategoriesData(),r=e.getGraph(),o=r.data,a=i.mapArray(i.getName);o.filterSelf(function(s){var l=o.getItemModel(s),h=l.getShallow("category");if(h!=null){Le(h)&&(h=a[h]);for(var u=0;u<t.length;u++)if(!t[u].isSelected(h))return!1}return!0})})}function dTt(n){var t={};n.eachSeriesByType("graph",function(e){var i=e.getCategoriesData(),r=e.getData(),o={};i.each(function(a){var s=i.getName(a);o["ec-"+s]=a;var l=i.getItemModel(a),h=l.getModel("itemStyle").getItemStyle();h.fill||(h.fill=e.getColorFromPalette(s,t)),i.setItemVisual(a,"style",h);for(var u=["symbol","symbolSize","symbolKeepAspect"],d=0;d<u.length;d++){var c=l.getShallow(u[d],!0);c!=null&&i.setItemVisual(a,u[d],c)}}),i.count()&&r.each(function(a){var s=r.getItemModel(a),l=s.getShallow("category");if(l!=null){Ct(l)&&(l=o["ec-"+l]);var h=i.getItemVisual(l,"style"),u=r.ensureUniqueItemVisual(a,"style");ht(u,h);for(var d=["symbol","symbolSize","symbolKeepAspect"],c=0;c<d.length;c++)r.setItemVisual(a,d[c],i.getItemVisual(l,d[c]))}})})}function ZC(n){return n instanceof Array||(n=[n,n]),n}function cTt(n){n.eachSeriesByType("graph",function(t){var e=t.getGraph(),i=t.getEdgeData(),r=ZC(t.get("edgeSymbol")),o=ZC(t.get("edgeSymbolSize"));i.setVisual("fromSymbol",r&&r[0]),i.setVisual("toSymbol",r&&r[1]),i.setVisual("fromSymbolSize",o&&o[0]),i.setVisual("toSymbolSize",o&&o[1]),i.setVisual("style",t.getModel("lineStyle").getLineStyle()),i.each(function(a){var s=i.getItemModel(a),l=e.getEdgeByIndex(a),h=ZC(s.getShallow("symbol",!0)),u=ZC(s.getShallow("symbolSize",!0)),d=s.getModel("lineStyle").getLineStyle(),c=i.ensureUniqueItemVisual(a,"style");switch(ht(c,d),c.stroke){case"source":{var f=l.node1.getVisual("style");c.stroke=f&&f.fill;break}case"target":{var f=l.node2.getVisual("style");c.stroke=f&&f.fill;break}}h[0]&&l.setVisual("fromSymbol",h[0]),h[1]&&l.setVisual("toSymbol",h[1]),u[0]&&l.setVisual("fromSymbolSize",u[0]),u[1]&&l.setVisual("toSymbolSize",u[1])})})}var LD="-->",vM=function(n){return n.get("autoCurveness")||null},Uet=function(n,t){var e=vM(n),i=20,r=[];if(Le(e))i=e;else if(ut(e)){n.__curvenessList=e;return}t>i&&(i=t);var o=i%2?i+2:i+3;r=[];for(var a=0;a<o;a++)r.push((a%2?a+1:a)/10*(a%2?-1:1));n.__curvenessList=r},ib=function(n,t,e){var i=[n.id,n.dataIndex].join("."),r=[t.id,t.dataIndex].join(".");return[e.uid,i,r].join(LD)},Yet=function(n){var t=n.split(LD);return[t[0],t[2],t[1]].join(LD)},fTt=function(n,t){var e=ib(n.node1,n.node2,t);return t.__edgeMap[e]},gTt=function(n,t){var e=ED(ib(n.node1,n.node2,t),t),i=ED(ib(n.node2,n.node1,t),t);return e+i},ED=function(n,t){var e=t.__edgeMap;return e[n]?e[n].length:0};function pTt(n){vM(n)&&(n.__curvenessList=[],n.__edgeMap={},Uet(n))}function vTt(n,t,e,i){if(vM(e)){var r=ib(n,t,e),o=e.__edgeMap,a=o[Yet(r)];o[r]&&!a?o[r].isForward=!0:a&&o[r]&&(a.isForward=!0,o[r].isForward=!1),o[r]=o[r]||[],o[r].push(i)}}function lF(n,t,e,i){var r=vM(t),o=ut(r);if(!r)return null;var a=fTt(n,t);if(!a)return null;for(var s=-1,l=0;l<a.length;l++)if(a[l]===e){s=l;break}var h=gTt(n,t);Uet(t,h),n.lineStyle=n.lineStyle||{};var u=ib(n.node1,n.node2,t),d=t.__curvenessList,c=o||h%2?0:1;if(a.isForward)return d[c+s];var f=Yet(u),g=ED(f,t),p=d[s+g+c];return i?o?r&&r[0]===0?(g+c)%2?p:-p:((g%2?0:1)+c)%2?p:-p:(g+c)%2?p:-p:d[s+g+c]}function Xet(n){var t=n.coordinateSystem;if(!(t&&t.type!=="view")){var e=n.getGraph();e.eachNode(function(i){var r=i.getModel();i.setLayout([+r.get("x"),+r.get("y")])}),hF(e,n)}}function hF(n,t){n.eachEdge(function(e,i){var r=pl(e.getModel().get(["lineStyle","curveness"]),-lF(e,t,i,!0),0),o=_h(e.node1.getLayout()),a=_h(e.node2.getLayout()),s=[o,a];+r&&s.push([(o[0]+a[0])/2-(o[1]-a[1])*r,(o[1]+a[1])/2-(a[0]-o[0])*r]),e.setLayout(s)})}function mTt(n,t){n.eachSeriesByType("graph",function(e){var i=e.get("layout"),r=e.coordinateSystem;if(r&&r.type!=="view"){var o=e.getData(),a=[];z(r.dimensions,function(c){a=a.concat(o.mapDimensionsAll(c))});for(var s=0;s<o.count();s++){for(var l=[],h=!1,u=0;u<a.length;u++){var d=o.get(a[u],s);isNaN(d)||(h=!0),l.push(d)}h?o.setItemLayout(s,r.dataToPoint(l)):o.setItemLayout(s,[NaN,NaN])}hF(o.graph,e)}else(!i||i==="none")&&Xet(e)})}function C0(n){var t=n.coordinateSystem;if(t.type!=="view")return 1;var e=n.option.nodeScaleRatio,i=t.scaleX,r=t.getZoom(),o=(r-1)*e+1;return o/i}function w0(n){var t=n.getVisual("symbolSize");return t instanceof Array&&(t=(t[0]+t[1])/2),+t}var RG=Math.PI,iB=[];function uF(n,t,e,i){var r=n.coordinateSystem;if(!(r&&r.type!=="view")){var o=r.getBoundingRect(),a=n.getData(),s=a.graph,l=o.width/2+o.x,h=o.height/2+o.y,u=Math.min(o.width,o.height)/2,d=a.count();if(a.setLayout({cx:l,cy:h}),!!d){if(e){var c=r.pointToData(i),f=c[0],g=c[1],p=[f-l,g-h];Ov(p,p),sw(p,p,u),e.setLayout([l+p[0],h+p[1]],!0);var v=n.get(["circular","rotateLabel"]);qet(e,v,l,h)}yTt[t](n,s,a,u,l,h,d),s.eachEdge(function(m,y){var b=pl(m.getModel().get(["lineStyle","curveness"]),lF(m,n,y),0),_=_h(m.node1.getLayout()),w=_h(m.node2.getLayout()),C,x=(_[0]+w[0])/2,S=(_[1]+w[1])/2;+b&&(b*=3,C=[l*b+x*(1-b),h*b+S*(1-b)]),m.setLayout([_,w,C])})}}}var yTt={value:function(n,t,e,i,r,o,a){var s=0,l=e.getSum("value"),h=Math.PI*2/(l||a);t.eachNode(function(u){var d=u.getValue("value"),c=h*(l?d:1)/2;s+=c,u.setLayout([i*Math.cos(s)+r,i*Math.sin(s)+o]),s+=c})},symbolSize:function(n,t,e,i,r,o,a){var s=0;iB.length=a;var l=C0(n);t.eachNode(function(d){var c=w0(d);isNaN(c)&&(c=2),c<0&&(c=0),c*=l;var f=Math.asin(c/2/i);isNaN(f)&&(f=RG/2),iB[d.dataIndex]=f,s+=f*2});var h=(2*RG-s)/a/2,u=0;t.eachNode(function(d){var c=h+iB[d.dataIndex];u+=c,(!d.getLayout()||!d.getLayout().fixed)&&d.setLayout([i*Math.cos(u)+r,i*Math.sin(u)+o]),u+=c})}};function qet(n,t,e,i){var r=n.getGraphicEl();if(r){var o=n.getModel(),a=o.get(["label","rotate"])||0,s=r.getSymbolPath();if(t){var l=n.getLayout(),h=Math.atan2(l[1]-i,l[0]-e);h<0&&(h=Math.PI*2+h);var u=l[0]<e;u&&(h=h-Math.PI);var d=u?"left":"right";s.setTextConfig({rotation:-h,position:d,origin:"center"});var c=s.ensureState("emphasis");ht(c.textConfig||(c.textConfig={}),{position:d})}else s.setTextConfig({rotation:a*=Math.PI/180})}}function bTt(n){n.eachSeriesByType("graph",function(t){t.get("layout")==="circular"&&uF(t,"symbolSize")})}var Ag=iE;function _Tt(n,t,e){for(var i=n,r=t,o=e.rect,a=o.width,s=o.height,l=[o.x+a/2,o.y+s/2],h=e.gravity==null?.1:e.gravity,u=0;u<i.length;u++){var d=i[u];d.p||(d.p=Xf(a*(Math.random()-.5)+l[0],s*(Math.random()-.5)+l[1])),d.pp=_h(d.p),d.edges=null}var c=e.friction==null?.6:e.friction,f=c,g,p;return{warmUp:function(){f=c*.8},setFixed:function(v){i[v].fixed=!0},setUnfixed:function(v){i[v].fixed=!1},beforeStep:function(v){g=v},afterStep:function(v){p=v},step:function(v){g&&g(i,r);for(var m=[],y=i.length,b=0;b<r.length;b++){var _=r[b];if(!_.ignoreForceLayout){var w=_.n1,C=_.n2;Ec(m,C.p,w.p);var x=nE(m)-_.d,S=C.w/(w.w+C.w);isNaN(S)&&(S=0),Ov(m,m),!w.fixed&&Ag(w.p,w.p,m,S*x*f),!C.fixed&&Ag(C.p,C.p,m,-(1-S)*x*f)}}for(var b=0;b<y;b++){var A=i[b];A.fixed||(Ec(m,l,A.p),Ag(A.p,A.p,m,h*f))}for(var b=0;b<y;b++)for(var w=i[b],T=b+1;T<y;T++){var C=i[T];Ec(m,C.p,w.p);var x=nE(m);x===0&&(rdt(m,Math.random()-.5,Math.random()-.5),x=1);var M=(w.rep+C.rep)/x/x;!w.fixed&&Ag(w.pp,w.pp,m,M),!C.fixed&&Ag(C.pp,C.pp,m,-M)}for(var R=[],b=0;b<y;b++){var A=i[b];A.fixed||(Ec(R,A.p,A.pp),Ag(A.p,A.p,R,f),Xr(A.pp,A.p))}f=f*.992;var L=f<.01;p&&p(i,r,L),v&&v(L)}}}function CTt(n){n.eachSeriesByType("graph",function(t){var e=t.coordinateSystem;if(!(e&&e.type!=="view"))if(t.get("layout")==="force"){var i=t.preservedPoints||{},r=t.getGraph(),o=r.data,a=r.edgeData,s=t.getModel("force"),l=s.get("initLayout");t.preservedPoints?o.each(function(b){var _=o.getId(b);o.setItemLayout(b,i[_]||[NaN,NaN])}):!l||l==="none"?Xet(t):l==="circular"&&uF(t,"value");var h=o.getDataExtent("value"),u=a.getDataExtent("value"),d=s.get("repulsion"),c=s.get("edgeLength"),f=ut(d)?d:[d,d],g=ut(c)?c:[c,c];g=[g[1],g[0]];var p=o.mapArray("value",function(b,_){var w=o.getItemLayout(_),C=qe(b,h,f);return isNaN(C)&&(C=(f[0]+f[1])/2),{w:C,rep:C,fixed:o.getItemModel(_).get("fixed"),p:!w||isNaN(w[0])||isNaN(w[1])?null:w}}),v=a.mapArray("value",function(b,_){var w=r.getEdgeByIndex(_),C=qe(b,u,g);isNaN(C)&&(C=(g[0]+g[1])/2);var x=w.getModel(),S=pl(w.getModel().get(["lineStyle","curveness"]),-lF(w,t,_,!0),0);return{n1:p[w.node1.dataIndex],n2:p[w.node2.dataIndex],d:C,curveness:S,ignoreForceLayout:x.get("ignoreForceLayout")}}),m=e.getBoundingRect(),y=_Tt(p,v,{rect:m,gravity:s.get("gravity"),friction:s.get("friction")});y.beforeStep(function(b,_){for(var w=0,C=b.length;w<C;w++)b[w].fixed&&Xr(b[w].p,r.getNodeByIndex(w).getLayout())}),y.afterStep(function(b,_,w){for(var C=0,x=b.length;C<x;C++)b[C].fixed||r.getNodeByIndex(C).setLayout(b[C].p),i[o.getId(C)]=b[C].p;for(var C=0,x=_.length;C<x;C++){var S=_[C],A=r.getEdgeByIndex(C),T=S.n1.p,M=S.n2.p,R=A.getLayout();R=R?R.slice():[],R[0]=R[0]||[],R[1]=R[1]||[],Xr(R[0],T),Xr(R[1],M),+S.curveness&&(R[2]=[(T[0]+M[0])/2-(T[1]-M[1])*S.curveness,(T[1]+M[1])/2-(M[0]-T[0])*S.curveness]),A.setLayout(R)}}),t.forceLayout=y,t.preservedPoints=i,y.step()}else t.forceLayout=null})}function wTt(n,t,e){var i=ht(n.getBoxLayoutParams(),{aspect:e});return Vn(i,{width:t.getWidth(),height:t.getHeight()})}function xTt(n,t){var e=[];return n.eachSeriesByType("graph",function(i){var r=i.get("coordinateSystem");if(!r||r==="view"){var o=i.getData(),a=o.mapArray(function(v){var m=o.getItemModel(v);return[+m.get("x"),+m.get("y")]}),s=[],l=[];WT(a,s,l),l[0]-s[0]===0&&(l[0]+=1,s[0]-=1),l[1]-s[1]===0&&(l[1]+=1,s[1]-=1);var h=(l[0]-s[0])/(l[1]-s[1]),u=wTt(i,t,h);isNaN(h)&&(s=[u.x,u.y],l=[u.x+u.width,u.y+u.height]);var d=l[0]-s[0],c=l[1]-s[1],f=u.width,g=u.height,p=i.coordinateSystem=new f_;p.zoomLimit=i.get("scaleLimit"),p.setBoundingRect(s[0],s[1],d,c),p.setViewRect(u.x,u.y,f,g),p.setCenter(i.get("center"),t),p.setZoom(i.get("zoom")),e.push(p)}}),e}var nB=[],rB=[],oB=[],Tg=ir,aB=ef,PG=Math.abs;function BG(n,t,e){for(var i=n[0],r=n[1],o=n[2],a=1/0,s,l=e*e,h=.1,u=.1;u<=.9;u+=.1){nB[0]=Tg(i[0],r[0],o[0],u),nB[1]=Tg(i[1],r[1],o[1],u);var d=PG(aB(nB,t)-l);d<a&&(a=d,s=u)}for(var c=0;c<32;c++){var f=s+h;rB[0]=Tg(i[0],r[0],o[0],s),rB[1]=Tg(i[1],r[1],o[1],s),oB[0]=Tg(i[0],r[0],o[0],f),oB[1]=Tg(i[1],r[1],o[1],f);var d=aB(rB,t)-l;if(PG(d)<.01)break;var g=aB(oB,t)-l;h/=2,d<0?g>=0?s=s+h:s=s-h:g>=0?s=s-h:s=s+h}return s}function sB(n,t){var e=[],i=Ly,r=[[],[],[]],o=[[],[]],a=[];t/=2,n.eachEdge(function(s,l){var h=s.getLayout(),u=s.getVisual("fromSymbol"),d=s.getVisual("toSymbol");h.__original||(h.__original=[_h(h[0]),_h(h[1])],h[2]&&h.__original.push(_h(h[2])));var c=h.__original;if(h[2]!=null){if(Xr(r[0],c[0]),Xr(r[1],c[2]),Xr(r[2],c[1]),u&&u!=="none"){var f=w0(s.node1),g=BG(r,c[0],f*t);i(r[0][0],r[1][0],r[2][0],g,e),r[0][0]=e[3],r[1][0]=e[4],i(r[0][1],r[1][1],r[2][1],g,e),r[0][1]=e[3],r[1][1]=e[4]}if(d&&d!=="none"){var f=w0(s.node2),g=BG(r,c[1],f*t);i(r[0][0],r[1][0],r[2][0],g,e),r[1][0]=e[1],r[2][0]=e[2],i(r[0][1],r[1][1],r[2][1],g,e),r[1][1]=e[1],r[2][1]=e[2]}Xr(h[0],r[0]),Xr(h[1],r[2]),Xr(h[2],r[1])}else{if(Xr(o[0],c[0]),Xr(o[1],c[1]),Ec(a,o[1],o[0]),Ov(a,a),u&&u!=="none"){var f=w0(s.node1);iE(o[0],o[0],a,f*t)}if(d&&d!=="none"){var f=w0(s.node2);iE(o[1],o[1],a,-f*t)}Xr(h[0],o[0]),Xr(h[1],o[1])}})}function kG(n){return n.type==="view"}var STt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(e,i){var r=new v_,o=new eF,a=this.group;this._controller=new g_(i.getZr()),this._controllerHost={target:a},a.add(r.group),a.add(o.group),this._symbolDraw=r,this._lineDraw=o,this._firstRender=!0},t.prototype.render=function(e,i,r){var o=this,a=e.coordinateSystem;this._model=e;var s=this._symbolDraw,l=this._lineDraw,h=this.group;if(kG(a)){var u={x:a.x,y:a.y,scaleX:a.scaleX,scaleY:a.scaleY};this._firstRender?h.attr(u):Ie(h,u,e)}sB(e.getGraph(),C0(e));var d=e.getData();s.updateData(d);var c=e.getEdgeData();l.updateData(c),this._updateNodeAndLinkScale(),this._updateController(e,i,r),clearTimeout(this._layoutTimeout);var f=e.forceLayout,g=e.get(["force","layoutAnimation"]);f&&this._startForceLayoutIteration(f,g);var p=e.get("layout");d.graph.eachNode(function(b){var _=b.dataIndex,w=b.getGraphicEl(),C=b.getModel();if(w){w.off("drag").off("dragend");var x=C.get("draggable");x&&w.on("drag",function(A){switch(p){case"force":f.warmUp(),!o._layouting&&o._startForceLayoutIteration(f,g),f.setFixed(_),d.setItemLayout(_,[w.x,w.y]);break;case"circular":d.setItemLayout(_,[w.x,w.y]),b.setLayout({fixed:!0},!0),uF(e,"symbolSize",b,[A.offsetX,A.offsetY]),o.updateLayout(e);break;case"none":default:d.setItemLayout(_,[w.x,w.y]),hF(e.getGraph(),e),o.updateLayout(e);break}}).on("dragend",function(){f&&f.setUnfixed(_)}),w.setDraggable(x,!!C.get("cursor"));var S=C.get(["emphasis","focus"]);S==="adjacency"&&(Vt(w).focus=b.getAdjacentDataIndices())}}),d.graph.eachEdge(function(b){var _=b.getGraphicEl(),w=b.getModel().get(["emphasis","focus"]);_&&w==="adjacency"&&(Vt(_).focus={edge:[b.dataIndex],node:[b.node1.dataIndex,b.node2.dataIndex]})});var v=e.get("layout")==="circular"&&e.get(["circular","rotateLabel"]),m=d.getLayout("cx"),y=d.getLayout("cy");d.graph.eachNode(function(b){qet(b,v,m,y)}),this._firstRender=!1},t.prototype.dispose=function(){this.remove(),this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype._startForceLayoutIteration=function(e,i){var r=this;(function o(){e.step(function(a){r.updateLayout(r._model),(r._layouting=!a)&&(i?r._layoutTimeout=setTimeout(o,16):o())})})()},t.prototype._updateController=function(e,i,r){var o=this,a=this._controller,s=this._controllerHost,l=this.group;if(a.setPointerChecker(function(h,u,d){var c=l.getBoundingRect();return c.applyTransform(l.transform),c.contain(u,d)&&!dM(h,r,e)}),!kG(e.coordinateSystem)){a.disable();return}a.enable(e.get("roam")),s.zoomLimit=e.get("scaleLimit"),s.zoom=e.coordinateSystem.getZoom(),a.off("pan").off("zoom").on("pan",function(h){Dz(s,h.dx,h.dy),r.dispatchAction({seriesId:e.id,type:"graphRoam",dx:h.dx,dy:h.dy})}).on("zoom",function(h){Iz(s,h.scale,h.originX,h.originY),r.dispatchAction({seriesId:e.id,type:"graphRoam",zoom:h.scale,originX:h.originX,originY:h.originY}),o._updateNodeAndLinkScale(),sB(e.getGraph(),C0(e)),o._lineDraw.updateLayout(),r.updateLabelLayout()})},t.prototype._updateNodeAndLinkScale=function(){var e=this._model,i=e.getData(),r=C0(e);i.eachItemGraphicEl(function(o,a){o&&o.setSymbolScale(r)})},t.prototype.updateLayout=function(e){sB(e.getGraph(),C0(e)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},t.prototype.remove=function(){clearTimeout(this._layoutTimeout),this._layouting=!1,this._layoutTimeout=null,this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},t.type="graph",t})(hi);function Mg(n){return"_EC_"+n}var ATt=(function(){function n(t){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=t||!1}return n.prototype.isDirected=function(){return this._directed},n.prototype.addNode=function(t,e){t=t==null?""+e:""+t;var i=this._nodesMap;if(!i[Mg(t)]){var r=new ac(t,e);return r.hostGraph=this,this.nodes.push(r),i[Mg(t)]=r,r}},n.prototype.getNodeByIndex=function(t){var e=this.data.getRawIndex(t);return this.nodes[e]},n.prototype.getNodeById=function(t){return this._nodesMap[Mg(t)]},n.prototype.addEdge=function(t,e,i){var r=this._nodesMap,o=this._edgesMap;if(Le(t)&&(t=this.nodes[t]),Le(e)&&(e=this.nodes[e]),t instanceof ac||(t=r[Mg(t)]),e instanceof ac||(e=r[Mg(e)]),!(!t||!e)){var a=t.id+"-"+e.id,s=new Ket(t,e,i);return s.hostGraph=this,this._directed&&(t.outEdges.push(s),e.inEdges.push(s)),t.edges.push(s),t!==e&&e.edges.push(s),this.edges.push(s),o[a]=s,s}},n.prototype.getEdgeByIndex=function(t){var e=this.edgeData.getRawIndex(t);return this.edges[e]},n.prototype.getEdge=function(t,e){t instanceof ac&&(t=t.id),e instanceof ac&&(e=e.id);var i=this._edgesMap;return this._directed?i[t+"-"+e]:i[t+"-"+e]||i[e+"-"+t]},n.prototype.eachNode=function(t,e){for(var i=this.nodes,r=i.length,o=0;o<r;o++)i[o].dataIndex>=0&&t.call(e,i[o],o)},n.prototype.eachEdge=function(t,e){for(var i=this.edges,r=i.length,o=0;o<r;o++)i[o].dataIndex>=0&&i[o].node1.dataIndex>=0&&i[o].node2.dataIndex>=0&&t.call(e,i[o],o)},n.prototype.breadthFirstTraverse=function(t,e,i,r){if(e instanceof ac||(e=this._nodesMap[Mg(e)]),!!e){for(var o=i==="out"?"outEdges":i==="in"?"inEdges":"edges",a=0;a<this.nodes.length;a++)this.nodes[a].__visited=!1;if(!t.call(r,e,null))for(var s=[e];s.length;)for(var l=s.shift(),h=l[o],a=0;a<h.length;a++){var u=h[a],d=u.node1===l?u.node2:u.node1;if(!d.__visited){if(t.call(r,d,l))return;s.push(d),d.__visited=!0}}}},n.prototype.update=function(){for(var t=this.data,e=this.edgeData,i=this.nodes,r=this.edges,o=0,a=i.length;o<a;o++)i[o].dataIndex=-1;for(var o=0,a=t.count();o<a;o++)i[t.getRawIndex(o)].dataIndex=o;e.filterSelf(function(s){var l=r[e.getRawIndex(s)];return l.node1.dataIndex>=0&&l.node2.dataIndex>=0});for(var o=0,a=r.length;o<a;o++)r[o].dataIndex=-1;for(var o=0,a=e.count();o<a;o++)r[e.getRawIndex(o)].dataIndex=o},n.prototype.clone=function(){for(var t=new n(this._directed),e=this.nodes,i=this.edges,r=0;r<e.length;r++)t.addNode(e[r].id,e[r].dataIndex);for(var r=0;r<i.length;r++){var o=i[r];t.addEdge(o.node1.id,o.node2.id,o.dataIndex)}return t},n})(),ac=(function(){function n(t,e){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=t??"",this.dataIndex=e??-1}return n.prototype.degree=function(){return this.edges.length},n.prototype.inDegree=function(){return this.inEdges.length},n.prototype.outDegree=function(){return this.outEdges.length},n.prototype.getModel=function(t){if(!(this.dataIndex<0)){var e=this.hostGraph,i=e.data.getItemModel(this.dataIndex);return i.getModel(t)}},n.prototype.getAdjacentDataIndices=function(){for(var t={edge:[],node:[]},e=0;e<this.edges.length;e++){var i=this.edges[e];i.dataIndex<0||(t.edge.push(i.dataIndex),t.node.push(i.node1.dataIndex,i.node2.dataIndex))}return t},n.prototype.getTrajectoryDataIndices=function(){for(var t=Pt(),e=Pt(),i=0;i<this.edges.length;i++){var r=this.edges[i];if(!(r.dataIndex<0)){t.set(r.dataIndex,!0);for(var o=[r.node1],a=[r.node2],s=0;s<o.length;){var l=o[s];s++,e.set(l.dataIndex,!0);for(var h=0;h<l.inEdges.length;h++)t.set(l.inEdges[h].dataIndex,!0),o.push(l.inEdges[h].node1)}for(s=0;s<a.length;){var u=a[s];s++,e.set(u.dataIndex,!0);for(var h=0;h<u.outEdges.length;h++)t.set(u.outEdges[h].dataIndex,!0),a.push(u.outEdges[h].node2)}}}return{edge:t.keys(),node:e.keys()}},n})(),Ket=(function(){function n(t,e,i){this.dataIndex=-1,this.node1=t,this.node2=e,this.dataIndex=i??-1}return n.prototype.getModel=function(t){if(!(this.dataIndex<0)){var e=this.hostGraph,i=e.edgeData.getItemModel(this.dataIndex);return i.getModel(t)}},n.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},n.prototype.getTrajectoryDataIndices=function(){var t=Pt(),e=Pt();t.set(this.dataIndex,!0);for(var i=[this.node1],r=[this.node2],o=0;o<i.length;){var a=i[o];o++,e.set(a.dataIndex,!0);for(var s=0;s<a.inEdges.length;s++)t.set(a.inEdges[s].dataIndex,!0),i.push(a.inEdges[s].node1)}for(o=0;o<r.length;){var l=r[o];o++,e.set(l.dataIndex,!0);for(var s=0;s<l.outEdges.length;s++)t.set(l.outEdges[s].dataIndex,!0),r.push(l.outEdges[s].node2)}return{edge:t.keys(),node:e.keys()}},n})();function Zet(n,t){return{getValue:function(e){var i=this[n][t];return i.getStore().get(i.getDimensionIndex(e||"value"),this.dataIndex)},setVisual:function(e,i){this.dataIndex>=0&&this[n][t].setItemVisual(this.dataIndex,e,i)},getVisual:function(e){return this[n][t].getItemVisual(this.dataIndex,e)},setLayout:function(e,i){this.dataIndex>=0&&this[n][t].setItemLayout(this.dataIndex,e,i)},getLayout:function(){return this[n][t].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[n][t].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[n][t].getRawIndex(this.dataIndex)}}}In(ac,Zet("hostGraph","data"));In(Ket,Zet("hostGraph","edgeData"));function Jet(n,t,e,i,r){for(var o=new ATt(i),a=0;a<n.length;a++)o.addNode(rr(n[a].id,n[a].name,a),a);for(var s=[],l=[],h=0,a=0;a<t.length;a++){var u=t[a],d=u.source,c=u.target;o.addEdge(d,c,h)&&(l.push(u),s.push(rr(Fn(u.id,null),d+" > "+c)),h++)}var f=e.get("coordinateSystem"),g;if(f==="cartesian2d"||f==="polar")g=qh(n,e);else{var p=l_.get(f),v=p?p.dimensions||[]:[];ee(v,"value")<0&&v.concat(["value"]);var m=u_(n,{coordDimensions:v,encodeDefine:e.getEncode()}).dimensions;g=new oo(m,e),g.initData(n)}var y=new oo(["value"],e);return y.initData(l,s),r&&r(g,y),Iet({mainData:g,struct:o,structAttr:"graph",datas:{node:g,edge:y},datasAttr:{node:"data",edge:"edgeData"}}),o.update(),o}var TTt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e.hasSymbolVisual=!0,e}return t.prototype.init=function(e){n.prototype.init.apply(this,arguments);var i=this;function r(){return i._categoriesData}this.legendVisualProvider=new __(r,r),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},t.prototype.mergeOption=function(e){n.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},t.prototype.mergeDefaultAndTheme=function(e){n.prototype.mergeDefaultAndTheme.apply(this,arguments),xf(e,"edgeLabel",["show"])},t.prototype.getInitialData=function(e,i){var r=e.edges||e.links||[],o=e.data||e.nodes||[],a=this;if(o&&r){pTt(this);var s=Jet(o,r,this,!0,l);return z(s.edges,function(h){vTt(h.node1,h.node2,this,h.dataIndex)},this),s.data}function l(h,u){h.wrapMethod("getItemModel",function(g){var p=a._categoriesModels,v=g.getShallow("category"),m=p[v];return m&&(m.parentModel=g.parentModel,g.parentModel=m),g});var d=Ze.prototype.getModel;function c(g,p){var v=d.call(this,g,p);return v.resolveParentPath=f,v}u.wrapMethod("getItemModel",function(g){return g.resolveParentPath=f,g.getModel=c,g});function f(g){if(g&&(g[0]==="label"||g[1]==="label")){var p=g.slice();return g[0]==="label"?p[0]="edgeLabel":g[1]==="label"&&(p[1]="edgeLabel"),p}return g}}},t.prototype.getGraph=function(){return this.getData().graph},t.prototype.getEdgeData=function(){return this.getGraph().edgeData},t.prototype.getCategoriesData=function(){return this._categoriesData},t.prototype.formatTooltip=function(e,i,r){if(r==="edge"){var o=this.getData(),a=this.getDataParams(e,r),s=o.graph.getEdgeByIndex(e),l=o.getName(s.node1.dataIndex),h=o.getName(s.node2.dataIndex),u=[];return l!=null&&u.push(l),h!=null&&u.push(h),Jn("nameValue",{name:u.join(" > "),value:a.value,noValue:a.value==null})}var d=TJ({series:this,dataIndex:e,multipleSeries:i});return d},t.prototype._updateCategoriesData=function(){var e=ct(this.option.categories||[],function(r){return r.value!=null?r:ht({value:0},r)}),i=new oo(["value"],this);i.initData(e),this._categoriesData=i,this._categoriesModels=i.mapArray(function(r){return i.getItemModel(r)})},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.setCenter=function(e){this.option.center=e},t.prototype.isAnimationEnabled=function(){return n.prototype.isAnimationEnabled.call(this)&&!(this.get("layout")==="force"&&this.get(["force","layoutAnimation"]))},t.type="series.graph",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},t})(Ci),MTt={type:"graphRoam",event:"graphRoam",update:"none"};function RTt(n){n.registerChartView(STt),n.registerSeriesModel(TTt),n.registerProcessor(uTt),n.registerVisual(dTt),n.registerVisual(cTt),n.registerLayout(mTt),n.registerLayout(n.PRIORITY.VISUAL.POST_CHART_LAYOUT,bTt),n.registerLayout(CTt),n.registerCoordinateSystem("graphView",{dimensions:f_.dimensions,create:xTt}),n.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},dn),n.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},dn),n.registerAction(MTt,function(t,e,i){e.eachComponent({mainType:"series",query:t},function(r){var o=r.coordinateSystem,a=Lz(o,t,void 0,i);r.setCenter&&r.setCenter(a.center),r.setZoom&&r.setZoom(a.zoom)})})}var PTt=(function(){function n(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0}return n})(),BTt=(function(n){et(t,n);function t(e){var i=n.call(this,e)||this;return i.type="pointer",i}return t.prototype.getDefaultShape=function(){return new PTt},t.prototype.buildPath=function(e,i){var r=Math.cos,o=Math.sin,a=i.r,s=i.width,l=i.angle,h=i.x-r(l)*s*(s>=a/3?1:2),u=i.y-o(l)*s*(s>=a/3?1:2);l=i.angle-Math.PI/2,e.moveTo(h,u),e.lineTo(i.x+r(l)*s,i.y+o(l)*s),e.lineTo(i.x+r(i.angle)*a,i.y+o(i.angle)*a),e.lineTo(i.x-r(l)*s,i.y-o(l)*s),e.lineTo(h,u)},t})(ue);function kTt(n,t){var e=n.get("center"),i=t.getWidth(),r=t.getHeight(),o=Math.min(i,r),a=mt(e[0],t.getWidth()),s=mt(e[1],t.getHeight()),l=mt(n.get("radius"),o/2);return{cx:a,cy:s,r:l}}function JC(n,t){var e=n==null?"":n+"";return t&&(Ct(t)?e=t.replace("{value}",e):Dt(t)&&(e=t(n))),e}var LTt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,i,r){this.group.removeAll();var o=e.get(["axisLine","lineStyle","color"]),a=kTt(e,r);this._renderMain(e,i,r,o,a),this._data=e.getData()},t.prototype.dispose=function(){},t.prototype._renderMain=function(e,i,r,o,a){var s=this.group,l=e.get("clockwise"),h=-e.get("startAngle")/180*Math.PI,u=-e.get("endAngle")/180*Math.PI,d=e.getModel("axisLine"),c=d.get("roundCap"),f=c?Hx:ho,g=d.get("show"),p=d.getModel("lineStyle"),v=p.get("width"),m=[h,u];HH(m,!l),h=m[0],u=m[1];for(var y=u-h,b=h,_=[],w=0;g&&w<o.length;w++){var C=Math.min(Math.max(o[w][0],0),1);u=h+y*C;var x=new f({shape:{startAngle:b,endAngle:u,cx:a.cx,cy:a.cy,clockwise:l,r0:a.r-v,r:a.r},silent:!0});x.setStyle({fill:o[w][1]}),x.setStyle(p.getLineStyle(["color","width"])),_.push(x),b=u}_.reverse(),z(_,function(A){return s.add(A)});var S=function(A){if(A<=0)return o[0][1];var T;for(T=0;T<o.length;T++)if(o[T][0]>=A&&(T===0?0:o[T-1][0])<A)return o[T][1];return o[T-1][1]};this._renderTicks(e,i,r,S,a,h,u,l,v),this._renderTitleAndDetail(e,i,r,S,a),this._renderAnchor(e,a),this._renderPointer(e,i,r,S,a,h,u,l,v)},t.prototype._renderTicks=function(e,i,r,o,a,s,l,h,u){for(var d=this.group,c=a.cx,f=a.cy,g=a.r,p=+e.get("min"),v=+e.get("max"),m=e.getModel("splitLine"),y=e.getModel("axisTick"),b=e.getModel("axisLabel"),_=e.get("splitNumber"),w=y.get("splitNumber"),C=mt(m.get("length"),g),x=mt(y.get("length"),g),S=s,A=(l-s)/_,T=A/w,M=m.getModel("lineStyle").getLineStyle(),R=y.getModel("lineStyle").getLineStyle(),L=m.get("distance"),B,P,k=0;k<=_;k++){if(B=Math.cos(S),P=Math.sin(S),m.get("show")){var E=L?L+u:u,D=new Un({shape:{x1:B*(g-E)+c,y1:P*(g-E)+f,x2:B*(g-C-E)+c,y2:P*(g-C-E)+f},style:M,silent:!0});M.stroke==="auto"&&D.setStyle({stroke:o(k/_)}),d.add(D)}if(b.get("show")){var E=b.get("distance")+L,I=JC(Ji(k/_*(v-p)+p),b.get("formatter")),O=o(k/_),H=B*(g-C-E)+c,F=P*(g-C-E)+f,N=b.get("rotate"),$=0;N==="radial"?($=-S+2*Math.PI,$>Math.PI/2&&($+=Math.PI)):N==="tangential"?$=-S-Math.PI/2:Le(N)&&($=N*Math.PI/180),$===0?d.add(new Re({style:_i(b,{text:I,x:H,y:F,verticalAlign:P<-.8?"top":P>.8?"bottom":"middle",align:B<-.4?"left":B>.4?"right":"center"},{inheritColor:O}),silent:!0})):d.add(new Re({style:_i(b,{text:I,x:H,y:F,verticalAlign:"middle",align:"center"},{inheritColor:O}),silent:!0,originX:H,originY:F,rotation:$}))}if(y.get("show")&&k!==_){var E=y.get("distance");E=E?E+u:u;for(var V=0;V<=w;V++){B=Math.cos(S),P=Math.sin(S);var X=new Un({shape:{x1:B*(g-E)+c,y1:P*(g-E)+f,x2:B*(g-x-E)+c,y2:P*(g-x-E)+f},silent:!0,style:R});R.stroke==="auto"&&X.setStyle({stroke:o((k+V/w)/_)}),d.add(X),S+=T}S-=T}else S+=A}},t.prototype._renderPointer=function(e,i,r,o,a,s,l,h,u){var d=this.group,c=this._data,f=this._progressEls,g=[],p=e.get(["pointer","show"]),v=e.getModel("progress"),m=v.get("show"),y=e.getData(),b=y.mapDimension("value"),_=+e.get("min"),w=+e.get("max"),C=[_,w],x=[s,l];function S(T,M){var R=y.getItemModel(T),L=R.getModel("pointer"),B=mt(L.get("width"),a.r),P=mt(L.get("length"),a.r),k=e.get(["pointer","icon"]),E=L.get("offsetCenter"),D=mt(E[0],a.r),I=mt(E[1],a.r),O=L.get("keepAspect"),H;return k?H=En(k,D-B/2,I-P,B,P,null,O):H=new BTt({shape:{angle:-Math.PI/2,width:B,r:P,x:D,y:I}}),H.rotation=-(M+Math.PI/2),H.x=a.cx,H.y=a.cy,H}function A(T,M){var R=v.get("roundCap"),L=R?Hx:ho,B=v.get("overlap"),P=B?v.get("width"):u/y.count(),k=B?a.r-P:a.r-(T+1)*P,E=B?a.r:a.r-T*P,D=new L({shape:{startAngle:s,endAngle:M,cx:a.cx,cy:a.cy,clockwise:h,r0:k,r:E}});return B&&(D.z2=qe(y.get(b,T),[_,w],[100,0],!0)),D}(m||p)&&(y.diff(c).add(function(T){var M=y.get(b,T);if(p){var R=S(T,s);Bi(R,{rotation:-((isNaN(+M)?x[0]:qe(M,C,x,!0))+Math.PI/2)},e),d.add(R),y.setItemGraphicEl(T,R)}if(m){var L=A(T,s),B=v.get("clip");Bi(L,{shape:{endAngle:qe(M,C,x,B)}},e),d.add(L),RE(e.seriesIndex,y.dataType,T,L),g[T]=L}}).update(function(T,M){var R=y.get(b,T);if(p){var L=c.getItemGraphicEl(M),B=L?L.rotation:s,P=S(T,B);P.rotation=B,Ie(P,{rotation:-((isNaN(+R)?x[0]:qe(R,C,x,!0))+Math.PI/2)},e),d.add(P),y.setItemGraphicEl(T,P)}if(m){var k=f[M],E=k?k.shape.endAngle:s,D=A(T,E),I=v.get("clip");Ie(D,{shape:{endAngle:qe(R,C,x,I)}},e),d.add(D),RE(e.seriesIndex,y.dataType,T,D),g[T]=D}}).execute(),y.each(function(T){var M=y.getItemModel(T),R=M.getModel("emphasis"),L=R.get("focus"),B=R.get("blurScope"),P=R.get("disabled");if(p){var k=y.getItemGraphicEl(T),E=y.getItemVisual(T,"style"),D=E.fill;if(k instanceof hr){var I=k.style;k.useStyle(ht({image:I.image,x:I.x,y:I.y,width:I.width,height:I.height},E))}else k.useStyle(E),k.type!=="pointer"&&k.setColor(D);k.setStyle(M.getModel(["pointer","itemStyle"]).getItemStyle()),k.style.fill==="auto"&&k.setStyle("fill",o(qe(y.get(b,T),C,[0,1],!0))),k.z2EmphasisLift=0,Ar(k,M),Gi(k,L,B,P)}if(m){var O=g[T];O.useStyle(y.getItemVisual(T,"style")),O.setStyle(M.getModel(["progress","itemStyle"]).getItemStyle()),O.z2EmphasisLift=0,Ar(O,M),Gi(O,L,B,P)}}),this._progressEls=g)},t.prototype._renderAnchor=function(e,i){var r=e.getModel("anchor"),o=r.get("show");if(o){var a=r.get("size"),s=r.get("icon"),l=r.get("offsetCenter"),h=r.get("keepAspect"),u=En(s,i.cx-a/2+mt(l[0],i.r),i.cy-a/2+mt(l[1],i.r),a,a,null,h);u.z2=r.get("showAbove")?1:0,u.setStyle(r.getModel("itemStyle").getItemStyle()),this.group.add(u)}},t.prototype._renderTitleAndDetail=function(e,i,r,o,a){var s=this,l=e.getData(),h=l.mapDimension("value"),u=+e.get("min"),d=+e.get("max"),c=new Ft,f=[],g=[],p=e.isAnimationEnabled(),v=e.get(["pointer","showAbove"]);l.diff(this._data).add(function(m){f[m]=new Re({silent:!0}),g[m]=new Re({silent:!0})}).update(function(m,y){f[m]=s._titleEls[y],g[m]=s._detailEls[y]}).execute(),l.each(function(m){var y=l.getItemModel(m),b=l.get(h,m),_=new Ft,w=o(qe(b,[u,d],[0,1],!0)),C=y.getModel("title");if(C.get("show")){var x=C.get("offsetCenter"),S=a.cx+mt(x[0],a.r),A=a.cy+mt(x[1],a.r),T=f[m];T.attr({z2:v?0:2,style:_i(C,{x:S,y:A,text:l.getName(m),align:"center",verticalAlign:"middle"},{inheritColor:w})}),_.add(T)}var M=y.getModel("detail");if(M.get("show")){var R=M.get("offsetCenter"),L=a.cx+mt(R[0],a.r),B=a.cy+mt(R[1],a.r),P=mt(M.get("width"),a.r),k=mt(M.get("height"),a.r),E=e.get(["progress","show"])?l.getItemVisual(m,"style").fill:w,T=g[m],D=M.get("formatter");T.attr({z2:v?0:2,style:_i(M,{x:L,y:B,text:JC(b,D),width:isNaN(P)?null:P,height:isNaN(k)?null:k,align:"center",verticalAlign:"middle"},{inheritColor:E})}),BZ(T,{normal:M},b,function(O){return JC(O,D)}),p&&kZ(T,m,l,e,{getFormattedLabel:function(O,H,F,N,$,V){return JC(V?V.interpolatedValue:b,D)}}),_.add(T)}c.add(_)}),this.group.add(c),this._titleEls=f,this._detailEls=g},t.type="gauge",t})(hi),ETt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e.visualStyleAccessPath="itemStyle",e}return t.prototype.getInitialData=function(e,i){return Kv(this,["value"])},t.type="series.gauge",t.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12,rotate:0},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},t})(Ci);function DTt(n){n.registerChartView(LTt),n.registerSeriesModel(ETt)}var ITt=["itemStyle","opacity"],OTt=(function(n){et(t,n);function t(e,i){var r=n.call(this)||this,o=r,a=new fo,s=new Re;return o.setTextContent(s),r.setTextGuideLine(a),r.updateData(e,i,!0),r}return t.prototype.updateData=function(e,i,r){var o=this,a=e.hostModel,s=e.getItemModel(i),l=e.getItemLayout(i),h=s.getModel("emphasis"),u=s.get(ITt);u=u??1,r||As(o),o.useStyle(e.getItemVisual(i,"style")),o.style.lineJoin="round",r?(o.setShape({points:l.points}),o.style.opacity=0,Bi(o,{style:{opacity:u}},a,i)):Ie(o,{style:{opacity:u},shape:{points:l.points}},a,i),Ar(o,s),this._updateLabel(e,i),Gi(this,h.get("focus"),h.get("blurScope"),h.get("disabled"))},t.prototype._updateLabel=function(e,i){var r=this,o=this.getTextGuideLine(),a=r.getTextContent(),s=e.hostModel,l=e.getItemModel(i),h=e.getItemLayout(i),u=h.label,d=e.getItemVisual(i,"style"),c=d.fill;Tr(a,Zn(l),{labelFetcher:e.hostModel,labelDataIndex:i,defaultOpacity:d.opacity,defaultText:e.getName(i)},{normal:{align:u.textAlign,verticalAlign:u.verticalAlign}}),r.setTextConfig({local:!0,inside:!!u.inside,insideStroke:c,outsideFill:c});var f=u.linePoints;o.setShape({points:f}),r.textGuideLineConfig={anchor:f?new Jt(f[0][0],f[0][1]):null},Ie(a,{style:{x:u.x,y:u.y}},s,i),a.attr({rotation:u.rotation,originX:u.x,originY:u.y,z2:10}),Cz(r,wz(l),{stroke:c})},t})(uo),HTt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e.ignoreLabelLineUpdate=!0,e}return t.prototype.render=function(e,i,r){var o=e.getData(),a=this._data,s=this.group;o.diff(a).add(function(l){var h=new OTt(o,l);o.setItemGraphicEl(l,h),s.add(h)}).update(function(l,h){var u=a.getItemGraphicEl(h);u.updateData(o,l),s.add(u),o.setItemGraphicEl(l,u)}).remove(function(l){var h=a.getItemGraphicEl(l);Fy(h,e,l)}).execute(),this._data=o},t.prototype.remove=function(){this.group.removeAll(),this._data=null},t.prototype.dispose=function(){},t.type="funnel",t})(hi),zTt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(e){n.prototype.init.apply(this,arguments),this.legendVisualProvider=new __(xt(this.getData,this),xt(this.getRawData,this)),this._defaultLabelLine(e)},t.prototype.getInitialData=function(e,i){return Kv(this,{coordDimensions:["value"],encodeDefaulter:qt(tz,this)})},t.prototype._defaultLabelLine=function(e){xf(e,"labelLine",["show"]);var i=e.labelLine,r=e.emphasis.labelLine;i.show=i.show&&e.label.show,r.show=r.show&&e.emphasis.label.show},t.prototype.getDataParams=function(e){var i=this.getData(),r=n.prototype.getDataParams.call(this,e),o=i.mapDimension("value"),a=i.getSum(o);return r.percent=a?+(i.get(o,e)/a*100).toFixed(2):0,r.$vars.push("percent"),r},t.type="series.funnel",t.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},t})(Ci);function FTt(n,t){return Vn(n.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function NTt(n,t){for(var e=n.mapDimension("value"),i=n.mapArray(e,function(l){return l}),r=[],o=t==="ascending",a=0,s=n.count();a<s;a++)r[a]=a;return Dt(t)?r.sort(t):t!=="none"&&r.sort(function(l,h){return o?i[l]-i[h]:i[h]-i[l]}),r}function WTt(n){var t=n.hostModel,e=t.get("orient");n.each(function(i){var r=n.getItemModel(i),o=r.getModel("label"),a=o.get("position"),s=r.getModel("labelLine"),l=n.getItemLayout(i),h=l.points,u=a==="inner"||a==="inside"||a==="center"||a==="insideLeft"||a==="insideRight",d,c,f,g;if(u)a==="insideLeft"?(c=(h[0][0]+h[3][0])/2+5,f=(h[0][1]+h[3][1])/2,d="left"):a==="insideRight"?(c=(h[1][0]+h[2][0])/2-5,f=(h[1][1]+h[2][1])/2,d="right"):(c=(h[0][0]+h[1][0]+h[2][0]+h[3][0])/4,f=(h[0][1]+h[1][1]+h[2][1]+h[3][1])/4,d="center"),g=[[c,f],[c,f]];else{var p=void 0,v=void 0,m=void 0,y=void 0,b=s.get("length");a==="left"?(p=(h[3][0]+h[0][0])/2,v=(h[3][1]+h[0][1])/2,m=p-b,c=m-5,d="right"):a==="right"?(p=(h[1][0]+h[2][0])/2,v=(h[1][1]+h[2][1])/2,m=p+b,c=m+5,d="left"):a==="top"?(p=(h[3][0]+h[0][0])/2,v=(h[3][1]+h[0][1])/2,y=v-b,f=y-5,d="center"):a==="bottom"?(p=(h[1][0]+h[2][0])/2,v=(h[1][1]+h[2][1])/2,y=v+b,f=y+5,d="center"):a==="rightTop"?(p=e==="horizontal"?h[3][0]:h[1][0],v=e==="horizontal"?h[3][1]:h[1][1],e==="horizontal"?(y=v-b,f=y-5,d="center"):(m=p+b,c=m+5,d="top")):a==="rightBottom"?(p=h[2][0],v=h[2][1],e==="horizontal"?(y=v+b,f=y+5,d="center"):(m=p+b,c=m+5,d="bottom")):a==="leftTop"?(p=h[0][0],v=e==="horizontal"?h[0][1]:h[1][1],e==="horizontal"?(y=v-b,f=y-5,d="center"):(m=p-b,c=m-5,d="right")):a==="leftBottom"?(p=e==="horizontal"?h[1][0]:h[3][0],v=e==="horizontal"?h[1][1]:h[2][1],e==="horizontal"?(y=v+b,f=y+5,d="center"):(m=p-b,c=m-5,d="right")):(p=(h[1][0]+h[2][0])/2,v=(h[1][1]+h[2][1])/2,e==="horizontal"?(y=v+b,f=y+5,d="center"):(m=p+b,c=m+5,d="left")),e==="horizontal"?(m=p,c=m):(y=v,f=y),g=[[p,v],[m,y]]}l.label={linePoints:g,x:c,y:f,verticalAlign:"middle",textAlign:d,inside:u}})}function VTt(n,t){n.eachSeriesByType("funnel",function(e){var i=e.getData(),r=i.mapDimension("value"),o=e.get("sort"),a=FTt(e,t),s=e.get("orient"),l=a.width,h=a.height,u=NTt(i,o),d=a.x,c=a.y,f=s==="horizontal"?[mt(e.get("minSize"),h),mt(e.get("maxSize"),h)]:[mt(e.get("minSize"),l),mt(e.get("maxSize"),l)],g=i.getDataExtent(r),p=e.get("min"),v=e.get("max");p==null&&(p=Math.min(g[0],0)),v==null&&(v=g[1]);var m=e.get("funnelAlign"),y=e.get("gap"),b=s==="horizontal"?l:h,_=(b-y*(i.count()-1))/i.count(),w=function(B,P){if(s==="horizontal"){var k=i.get(r,B)||0,E=qe(k,[p,v],f,!0),D=void 0;switch(m){case"top":D=c;break;case"center":D=c+(h-E)/2;break;case"bottom":D=c+(h-E);break}return[[P,D],[P,D+E]]}var I=i.get(r,B)||0,O=qe(I,[p,v],f,!0),H;switch(m){case"left":H=d;break;case"center":H=d+(l-O)/2;break;case"right":H=d+l-O;break}return[[H,P],[H+O,P]]};o==="ascending"&&(_=-_,y=-y,s==="horizontal"?d+=l:c+=h,u=u.reverse());for(var C=0;C<u.length;C++){var x=u[C],S=u[C+1],A=i.getItemModel(x);if(s==="horizontal"){var T=A.get(["itemStyle","width"]);T==null?T=_:(T=mt(T,l),o==="ascending"&&(T=-T));var M=w(x,d),R=w(S,d+T);d+=T+y,i.setItemLayout(x,{points:M.concat(R.slice().reverse())})}else{var L=A.get(["itemStyle","height"]);L==null?L=_:(L=mt(L,h),o==="ascending"&&(L=-L));var M=w(x,c),R=w(S,c+L);c+=L+y,i.setItemLayout(x,{points:M.concat(R.slice().reverse())})}}WTt(i)})}function GTt(n){n.registerChartView(HTt),n.registerSeriesModel(zTt),n.registerLayout(VTt),n.registerProcessor(b_("funnel"))}var $Tt=.3,jTt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e._dataGroup=new Ft,e._initialized=!1,e}return t.prototype.init=function(){this.group.add(this._dataGroup)},t.prototype.render=function(e,i,r,o){this._progressiveEls=null;var a=this._dataGroup,s=e.getData(),l=this._data,h=e.coordinateSystem,u=h.dimensions,d=EG(e);s.diff(l).add(c).update(f).remove(g).execute();function c(v){var m=LG(s,a,v,u,h);lB(m,s,v,d)}function f(v,m){var y=l.getItemGraphicEl(m),b=Qet(s,v,u,h);s.setItemGraphicEl(v,y),Ie(y,{shape:{points:b}},e,v),As(y),lB(y,s,v,d)}function g(v){var m=l.getItemGraphicEl(v);a.remove(m)}if(!this._initialized){this._initialized=!0;var p=UTt(h,e,function(){setTimeout(function(){a.removeClipPath()})});a.setClipPath(p)}this._data=s},t.prototype.incrementalPrepareRender=function(e,i,r){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},t.prototype.incrementalRender=function(e,i,r){for(var o=i.getData(),a=i.coordinateSystem,s=a.dimensions,l=EG(i),h=this._progressiveEls=[],u=e.start;u<e.end;u++){var d=LG(o,this._dataGroup,u,s,a);d.incremental=!0,lB(d,o,u,l),h.push(d)}},t.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},t.type="parallel",t})(hi);function UTt(n,t,e){var i=n.model,r=n.getRect(),o=new Ae({shape:{x:r.x,y:r.y,width:r.width,height:r.height}}),a=i.get("layout")==="horizontal"?"width":"height";return o.setShape(a,0),Bi(o,{shape:{width:r.width,height:r.height}},t,e),o}function Qet(n,t,e,i){for(var r=[],o=0;o<e.length;o++){var a=e[o],s=n.get(n.mapDimension(a),t);YTt(s,i.getAxis(a).type)||r.push(i.dataToPoint(s,a))}return r}function LG(n,t,e,i,r){var o=Qet(n,e,i,r),a=new fo({shape:{points:o},z2:10});return t.add(a),n.setItemGraphicEl(e,a),a}function EG(n){var t=n.get("smooth",!0);return t===!0&&(t=$Tt),t=kh(t),By(t)&&(t=0),{smooth:t}}function lB(n,t,e,i){n.useStyle(t.getItemVisual(e,"style")),n.style.fill=null,n.setShape("smooth",i.smooth);var r=t.getItemModel(e),o=r.getModel("emphasis");Ar(n,r,"lineStyle"),Gi(n,o.get("focus"),o.get("blurScope"),o.get("disabled"))}function YTt(n,t){return t==="category"?n==null:n==null||isNaN(n)}var XTt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e.visualStyleAccessPath="lineStyle",e.visualDrawType="stroke",e}return t.prototype.getInitialData=function(e,i){return qh(null,this,{useEncodeDefaulter:xt(qTt,null,this)})},t.prototype.getRawIndicesByActiveState=function(e){var i=this.coordinateSystem,r=this.getData(),o=[];return i.eachActiveState(r,function(a,s){e===a&&o.push(r.getRawIndex(s))}),o},t.type="series.parallel",t.dependencies=["parallel"],t.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},t})(Ci);function qTt(n){var t=n.ecModel.getComponent("parallel",n.get("parallelIndex"));if(t){var e={};return z(t.dimensions,function(i){var r=KTt(i);e[i]=r}),e}}function KTt(n){return+n.replace("dim","")}var ZTt=["lineStyle","opacity"],JTt={seriesType:"parallel",reset:function(n,t){var e=n.coordinateSystem,i={normal:n.get(["lineStyle","opacity"]),active:n.get("activeOpacity"),inactive:n.get("inactiveOpacity")};return{progress:function(r,o){e.eachActiveState(o,function(a,s){var l=i[a];if(a==="normal"&&o.hasItemOption){var h=o.getItemModel(s).get(ZTt,!0);h!=null&&(l=h)}var u=o.ensureUniqueItemVisual(s,"style");u.opacity=l},r.start,r.end)}}}};function QTt(n){ae(Ltt),n.registerChartView(jTt),n.registerSeriesModel(XTt),n.registerVisual(n.PRIORITY.VISUAL.BRUSH,JTt)}var tMt=(function(){function n(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0}return n})(),eMt=(function(n){et(t,n);function t(e){return n.call(this,e)||this}return t.prototype.getDefaultShape=function(){return new tMt},t.prototype.buildPath=function(e,i){var r=i.extent;e.moveTo(i.x1,i.y1),e.bezierCurveTo(i.cpx1,i.cpy1,i.cpx2,i.cpy2,i.x2,i.y2),i.orient==="vertical"?(e.lineTo(i.x2+r,i.y2),e.bezierCurveTo(i.cpx2+r,i.cpy2,i.cpx1+r,i.cpy1,i.x1+r,i.y1)):(e.lineTo(i.x2,i.y2+r),e.bezierCurveTo(i.cpx2,i.cpy2+r,i.cpx1,i.cpy1+r,i.x1,i.y1+r)),e.closePath()},t.prototype.highlight=function(){Lh(this)},t.prototype.downplay=function(){Eh(this)},t})(ue),iMt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e._focusAdjacencyDisabled=!1,e}return t.prototype.render=function(e,i,r){var o=this,a=e.getGraph(),s=this.group,l=e.layoutInfo,h=l.width,u=l.height,d=e.getData(),c=e.getData("edge"),f=e.get("orient");this._model=e,s.removeAll(),s.x=l.x,s.y=l.y,a.eachEdge(function(g){var p=new eMt,v=Vt(p);v.dataIndex=g.dataIndex,v.seriesIndex=e.seriesIndex,v.dataType="edge";var m=g.getModel(),y=m.getModel("lineStyle"),b=y.get("curveness"),_=g.node1.getLayout(),w=g.node1.getModel(),C=w.get("localX"),x=w.get("localY"),S=g.node2.getLayout(),A=g.node2.getModel(),T=A.get("localX"),M=A.get("localY"),R=g.getLayout(),L,B,P,k,E,D,I,O;p.shape.extent=Math.max(1,R.dy),p.shape.orient=f,f==="vertical"?(L=(C!=null?C*h:_.x)+R.sy,B=(x!=null?x*u:_.y)+_.dy,P=(T!=null?T*h:S.x)+R.ty,k=M!=null?M*u:S.y,E=L,D=B*(1-b)+k*b,I=P,O=B*b+k*(1-b)):(L=(C!=null?C*h:_.x)+_.dx,B=(x!=null?x*u:_.y)+R.sy,P=T!=null?T*h:S.x,k=(M!=null?M*u:S.y)+R.ty,E=L*(1-b)+P*b,D=B,I=L*b+P*(1-b),O=k),p.setShape({x1:L,y1:B,x2:P,y2:k,cpx1:E,cpy1:D,cpx2:I,cpy2:O}),p.useStyle(y.getItemStyle()),DG(p.style,f,g);var H=""+m.get("value"),F=Zn(m,"edgeLabel");Tr(p,F,{labelFetcher:{getFormattedLabel:function(V,X,Z,tt,K,rt){return e.getFormattedLabel(V,X,"edge",tt,pl(K,F.normal&&F.normal.get("formatter"),H),rt)}},labelDataIndex:g.dataIndex,defaultText:H}),p.setTextConfig({position:"inside"});var N=m.getModel("emphasis");Ar(p,m,"lineStyle",function(V){var X=V.getItemStyle();return DG(X,f,g),X}),s.add(p),c.setItemGraphicEl(g.dataIndex,p);var $=N.get("focus");Gi(p,$==="adjacency"?g.getAdjacentDataIndices():$==="trajectory"?g.getTrajectoryDataIndices():$,N.get("blurScope"),N.get("disabled"))}),a.eachNode(function(g){var p=g.getLayout(),v=g.getModel(),m=v.get("localX"),y=v.get("localY"),b=v.getModel("emphasis"),_=v.get(["itemStyle","borderRadius"])||0,w=new Ae({shape:{x:m!=null?m*h:p.x,y:y!=null?y*u:p.y,width:p.dx,height:p.dy,r:_},style:v.getModel("itemStyle").getItemStyle(),z2:10});Tr(w,Zn(v),{labelFetcher:{getFormattedLabel:function(x,S){return e.getFormattedLabel(x,S,"node")}},labelDataIndex:g.dataIndex,defaultText:g.id}),w.disableLabelAnimation=!0,w.setStyle("fill",g.getVisual("color")),w.setStyle("decal",g.getVisual("style").decal),Ar(w,v),s.add(w),d.setItemGraphicEl(g.dataIndex,w),Vt(w).dataType="node";var C=b.get("focus");Gi(w,C==="adjacency"?g.getAdjacentDataIndices():C==="trajectory"?g.getTrajectoryDataIndices():C,b.get("blurScope"),b.get("disabled"))}),d.eachItemGraphicEl(function(g,p){var v=d.getItemModel(p);v.get("draggable")&&(g.drift=function(m,y){o._focusAdjacencyDisabled=!0,this.shape.x+=m,this.shape.y+=y,this.dirty(),r.dispatchAction({type:"dragNode",seriesId:e.id,dataIndex:d.getRawIndex(p),localX:this.shape.x/h,localY:this.shape.y/u})},g.ondragend=function(){o._focusAdjacencyDisabled=!1},g.draggable=!0,g.cursor="move")}),!this._data&&e.isAnimationEnabled()&&s.setClipPath(nMt(s.getBoundingRect(),e,function(){s.removeClipPath()})),this._data=e.getData()},t.prototype.dispose=function(){},t.type="sankey",t})(hi);function DG(n,t,e){switch(n.fill){case"source":n.fill=e.node1.getVisual("color"),n.decal=e.node1.getVisual("style").decal;break;case"target":n.fill=e.node2.getVisual("color"),n.decal=e.node2.getVisual("style").decal;break;case"gradient":var i=e.node1.getVisual("color"),r=e.node2.getVisual("color");Ct(i)&&Ct(r)&&(n.fill=new o_(0,0,+(t==="horizontal"),+(t==="vertical"),[{color:i,offset:0},{color:r,offset:1}]))}}function nMt(n,t,e){var i=new Ae({shape:{x:n.x-10,y:n.y-10,width:0,height:n.height+20}});return Bi(i,{shape:{width:n.width+20}},t,e),i}var rMt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.getInitialData=function(e,i){var r=e.edges||e.links||[],o=e.data||e.nodes||[],a=e.levels||[];this.levelModels=[];for(var s=this.levelModels,l=0;l<a.length;l++)a[l].depth!=null&&a[l].depth>=0&&(s[a[l].depth]=new Ze(a[l],this,i));var h=Jet(o,r,this,!0,u);return h.data;function u(d,c){d.wrapMethod("getItemModel",function(f,g){var p=f.parentModel,v=p.getData().getItemLayout(g);if(v){var m=v.depth,y=p.levelModels[m];y&&(f.parentModel=y)}return f}),c.wrapMethod("getItemModel",function(f,g){var p=f.parentModel,v=p.getGraph().getEdgeByIndex(g),m=v.node1.getLayout();if(m){var y=m.depth,b=p.levelModels[y];b&&(f.parentModel=b)}return f})}},t.prototype.setNodePosition=function(e,i){var r=this.option.data||this.option.nodes,o=r[e];o.localX=i[0],o.localY=i[1]},t.prototype.getGraph=function(){return this.getData().graph},t.prototype.getEdgeData=function(){return this.getGraph().edgeData},t.prototype.formatTooltip=function(e,i,r){function o(f){return isNaN(f)||f==null}if(r==="edge"){var a=this.getDataParams(e,r),s=a.data,l=a.value,h=s.source+" -- "+s.target;return Jn("nameValue",{name:h,value:l,noValue:o(l)})}else{var u=this.getGraph().getNodeByIndex(e),d=u.getLayout().value,c=this.getDataParams(e,r).data.name;return Jn("nameValue",{name:c!=null?c+"":null,value:d,noValue:o(d)})}},t.prototype.optionUpdated=function(){},t.prototype.getDataParams=function(e,i){var r=n.prototype.getDataParams.call(this,e,i);if(r.value==null&&i==="node"){var o=this.getGraph().getNodeByIndex(e),a=o.getLayout().value;r.value=a}return r},t.type="series.sankey",t.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},t})(Ci);function oMt(n,t){n.eachSeriesByType("sankey",function(e){var i=e.get("nodeWidth"),r=e.get("nodeGap"),o=aMt(e,t);e.layoutInfo=o;var a=o.width,s=o.height,l=e.getGraph(),h=l.nodes,u=l.edges;lMt(h);var d=Ge(h,function(p){return p.getLayout().value===0}),c=d.length!==0?0:e.get("layoutIterations"),f=e.get("orient"),g=e.get("nodeAlign");sMt(h,u,i,r,a,s,c,f,g)})}function aMt(n,t){return Vn(n.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function sMt(n,t,e,i,r,o,a,s,l){hMt(n,t,e,r,o,s,l),fMt(n,t,o,r,i,a,s),wMt(n,s)}function lMt(n){z(n,function(t){var e=Yu(t.outEdges,Nx),i=Yu(t.inEdges,Nx),r=t.getValue()||0,o=Math.max(e,i,r);t.setLayout({value:o},!0)})}function hMt(n,t,e,i,r,o,a){for(var s=[],l=[],h=[],u=[],d=0,c=0;c<t.length;c++)s[c]=1;for(var c=0;c<n.length;c++)l[c]=n[c].inEdges.length,l[c]===0&&h.push(n[c]);for(var f=-1;h.length;){for(var g=0;g<h.length;g++){var p=h[g],v=p.hostGraph.data.getRawDataItem(p.dataIndex),m=v.depth!=null&&v.depth>=0;m&&v.depth>f&&(f=v.depth),p.setLayout({depth:m?v.depth:d},!0),o==="vertical"?p.setLayout({dy:e},!0):p.setLayout({dx:e},!0);for(var y=0;y<p.outEdges.length;y++){var b=p.outEdges[y],_=t.indexOf(b);s[_]=0;var w=b.node2,C=n.indexOf(w);--l[C]===0&&u.indexOf(w)<0&&u.push(w)}}++d,h=u,u=[]}for(var c=0;c<s.length;c++)if(s[c]===1)throw new Error("Sankey is a DAG, the original data has cycle!");var x=f>d-1?f:d-1;a&&a!=="left"&&uMt(n,a,o,x);var S=o==="vertical"?(r-e)/x:(i-e)/x;cMt(n,S,o)}function tit(n){var t=n.hostGraph.data.getRawDataItem(n.dataIndex);return t.depth!=null&&t.depth>=0}function uMt(n,t,e,i){if(t==="right"){for(var r=[],o=n,a=0;o.length;){for(var s=0;s<o.length;s++){var l=o[s];l.setLayout({skNodeHeight:a},!0);for(var h=0;h<l.inEdges.length;h++){var u=l.inEdges[h];r.indexOf(u.node1)<0&&r.push(u.node1)}}o=r,r=[],++a}z(n,function(d){tit(d)||d.setLayout({depth:Math.max(0,i-d.getLayout().skNodeHeight)},!0)})}else t==="justify"&&dMt(n,i)}function dMt(n,t){z(n,function(e){!tit(e)&&!e.outEdges.length&&e.setLayout({depth:t},!0)})}function cMt(n,t,e){z(n,function(i){var r=i.getLayout().depth*t;e==="vertical"?i.setLayout({y:r},!0):i.setLayout({x:r},!0)})}function fMt(n,t,e,i,r,o,a){var s=gMt(n,a);pMt(s,t,e,i,r,a),hB(s,r,e,i,a);for(var l=1;o>0;o--)l*=.99,vMt(s,l,a),hB(s,r,e,i,a),CMt(s,l,a),hB(s,r,e,i,a)}function gMt(n,t){var e=[],i=t==="vertical"?"y":"x",r=SE(n,function(o){return o.getLayout()[i]});return r.keys.sort(function(o,a){return o-a}),z(r.keys,function(o){e.push(r.buckets.get(o))}),e}function pMt(n,t,e,i,r,o){var a=1/0;z(n,function(s){var l=s.length,h=0;z(s,function(d){h+=d.getLayout().value});var u=o==="vertical"?(i-(l-1)*r)/h:(e-(l-1)*r)/h;u<a&&(a=u)}),z(n,function(s){z(s,function(l,h){var u=l.getLayout().value*a;o==="vertical"?(l.setLayout({x:h},!0),l.setLayout({dx:u},!0)):(l.setLayout({y:h},!0),l.setLayout({dy:u},!0))})}),z(t,function(s){var l=+s.getValue()*a;s.setLayout({dy:l},!0)})}function hB(n,t,e,i,r){var o=r==="vertical"?"x":"y";z(n,function(a){a.sort(function(p,v){return p.getLayout()[o]-v.getLayout()[o]});for(var s,l,h,u=0,d=a.length,c=r==="vertical"?"dx":"dy",f=0;f<d;f++)l=a[f],h=u-l.getLayout()[o],h>0&&(s=l.getLayout()[o]+h,r==="vertical"?l.setLayout({x:s},!0):l.setLayout({y:s},!0)),u=l.getLayout()[o]+l.getLayout()[c]+t;var g=r==="vertical"?i:e;if(h=u-t-g,h>0){s=l.getLayout()[o]-h,r==="vertical"?l.setLayout({x:s},!0):l.setLayout({y:s},!0),u=s;for(var f=d-2;f>=0;--f)l=a[f],h=l.getLayout()[o]+l.getLayout()[c]+t-u,h>0&&(s=l.getLayout()[o]-h,r==="vertical"?l.setLayout({x:s},!0):l.setLayout({y:s},!0)),u=l.getLayout()[o]}})}function vMt(n,t,e){z(n.slice().reverse(),function(i){z(i,function(r){if(r.outEdges.length){var o=Yu(r.outEdges,mMt,e)/Yu(r.outEdges,Nx);if(isNaN(o)){var a=r.outEdges.length;o=a?Yu(r.outEdges,yMt,e)/a:0}if(e==="vertical"){var s=r.getLayout().x+(o-nd(r,e))*t;r.setLayout({x:s},!0)}else{var l=r.getLayout().y+(o-nd(r,e))*t;r.setLayout({y:l},!0)}}})})}function mMt(n,t){return nd(n.node2,t)*n.getValue()}function yMt(n,t){return nd(n.node2,t)}function bMt(n,t){return nd(n.node1,t)*n.getValue()}function _Mt(n,t){return nd(n.node1,t)}function nd(n,t){return t==="vertical"?n.getLayout().x+n.getLayout().dx/2:n.getLayout().y+n.getLayout().dy/2}function Nx(n){return n.getValue()}function Yu(n,t,e){for(var i=0,r=n.length,o=-1;++o<r;){var a=+t(n[o],e);isNaN(a)||(i+=a)}return i}function CMt(n,t,e){z(n,function(i){z(i,function(r){if(r.inEdges.length){var o=Yu(r.inEdges,bMt,e)/Yu(r.inEdges,Nx);if(isNaN(o)){var a=r.inEdges.length;o=a?Yu(r.inEdges,_Mt,e)/a:0}if(e==="vertical"){var s=r.getLayout().x+(o-nd(r,e))*t;r.setLayout({x:s},!0)}else{var l=r.getLayout().y+(o-nd(r,e))*t;r.setLayout({y:l},!0)}}})})}function wMt(n,t){var e=t==="vertical"?"x":"y";z(n,function(i){i.outEdges.sort(function(r,o){return r.node2.getLayout()[e]-o.node2.getLayout()[e]}),i.inEdges.sort(function(r,o){return r.node1.getLayout()[e]-o.node1.getLayout()[e]})}),z(n,function(i){var r=0,o=0;z(i.outEdges,function(a){a.setLayout({sy:r},!0),r+=a.getLayout().dy}),z(i.inEdges,function(a){a.setLayout({ty:o},!0),o+=a.getLayout().dy})})}function xMt(n){n.eachSeriesByType("sankey",function(t){var e=t.getGraph(),i=e.nodes,r=e.edges;if(i.length){var o=1/0,a=-1/0;z(i,function(s){var l=s.getLayout().value;l<o&&(o=l),l>a&&(a=l)}),z(i,function(s){var l=new qn({type:"color",mappingMethod:"linear",dataExtent:[o,a],visual:t.get("color")}),h=l.mapValueToVisual(s.getLayout().value),u=s.getModel().get(["itemStyle","color"]);u!=null?(s.setVisual("color",u),s.setVisual("style",{fill:u})):(s.setVisual("color",h),s.setVisual("style",{fill:h}))})}r.length&&z(r,function(s){var l=s.getModel().get("lineStyle");s.setVisual("style",l)})})}function SMt(n){n.registerChartView(iMt),n.registerSeriesModel(rMt),n.registerLayout(oMt),n.registerVisual(xMt),n.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(t,e){e.eachComponent({mainType:"series",subType:"sankey",query:t},function(i){i.setNodePosition(t.dataIndex,[t.localX,t.localY])})})}var eit=(function(){function n(){}return n.prototype._hasEncodeRule=function(t){var e=this.getEncode();return e&&e.get(t)!=null},n.prototype.getInitialData=function(t,e){var i,r=e.getComponent("xAxis",this.get("xAxisIndex")),o=e.getComponent("yAxis",this.get("yAxisIndex")),a=r.get("type"),s=o.get("type"),l;a==="category"?(t.layout="horizontal",i=r.getOrdinalMeta(),l=!this._hasEncodeRule("x")):s==="category"?(t.layout="vertical",i=o.getOrdinalMeta(),l=!this._hasEncodeRule("y")):t.layout=t.layout||"horizontal";var h=["x","y"],u=t.layout==="horizontal"?0:1,d=this._baseAxisDim=h[u],c=h[1-u],f=[r,o],g=f[u].get("type"),p=f[1-u].get("type"),v=t.data;if(v&&l){var m=[];z(v,function(_,w){var C;ut(_)?(C=_.slice(),_.unshift(w)):ut(_.value)?(C=ht({},_),C.value=C.value.slice(),_.value.unshift(w)):C=_,m.push(C)}),t.data=m}var y=this.defaultValueDimensions,b=[{name:d,type:xx(g),ordinalMeta:i,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:c,type:xx(p),dimsDef:y.slice()}];return Kv(this,{coordDimensions:b,dimensionsCount:y.length+1,encodeDefaulter:qt(QZ,b,this)})},n.prototype.getBaseAxis=function(){var t=this._baseAxisDim;return this.ecModel.getComponent(t+"Axis",this.get(t+"AxisIndex")).axis},n})(),iit=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],e.visualDrawType="stroke",e}return t.type="series.boxplot",t.dependencies=["xAxis","yAxis","grid"],t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},t})(Ci);In(iit,eit,!0);var AMt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,i,r){var o=e.getData(),a=this.group,s=this._data;this._data||a.removeAll();var l=e.get("layout")==="horizontal"?1:0;o.diff(s).add(function(h){if(o.hasValue(h)){var u=o.getItemLayout(h),d=IG(u,o,h,l,!0);o.setItemGraphicEl(h,d),a.add(d)}}).update(function(h,u){var d=s.getItemGraphicEl(u);if(!o.hasValue(h)){a.remove(d);return}var c=o.getItemLayout(h);d?(As(d),nit(c,d,o,h)):d=IG(c,o,h,l),a.add(d),o.setItemGraphicEl(h,d)}).remove(function(h){var u=s.getItemGraphicEl(h);u&&a.remove(u)}).execute(),this._data=o},t.prototype.remove=function(e){var i=this.group,r=this._data;this._data=null,r&&r.eachItemGraphicEl(function(o){o&&i.remove(o)})},t.type="boxplot",t})(hi),TMt=(function(){function n(){}return n})(),MMt=(function(n){et(t,n);function t(e){var i=n.call(this,e)||this;return i.type="boxplotBoxPath",i}return t.prototype.getDefaultShape=function(){return new TMt},t.prototype.buildPath=function(e,i){var r=i.points,o=0;for(e.moveTo(r[o][0],r[o][1]),o++;o<4;o++)e.lineTo(r[o][0],r[o][1]);for(e.closePath();o<r.length;o++)e.moveTo(r[o][0],r[o][1]),o++,e.lineTo(r[o][0],r[o][1])},t})(ue);function IG(n,t,e,i,r){var o=n.ends,a=new MMt({shape:{points:r?RMt(o,i,n):o}});return nit(n,a,t,e,r),a}function nit(n,t,e,i,r){var o=e.hostModel,a=Zf[r?"initProps":"updateProps"];a(t,{shape:{points:n.ends}},o,i),t.useStyle(e.getItemVisual(i,"style")),t.style.strokeNoScale=!0,t.z2=100;var s=e.getItemModel(i),l=s.getModel("emphasis");Ar(t,s),Gi(t,l.get("focus"),l.get("blurScope"),l.get("disabled"))}function RMt(n,t,e){return ct(n,function(i){return i=i.slice(),i[t]=e.initBaseline,i})}var ey=z;function PMt(n){var t=BMt(n);ey(t,function(e){var i=e.seriesModels;i.length&&(kMt(e),ey(i,function(r,o){LMt(r,e.boxOffsetList[o],e.boxWidthList[o])}))})}function BMt(n){var t=[],e=[];return n.eachSeriesByType("boxplot",function(i){var r=i.getBaseAxis(),o=ee(e,r);o<0&&(o=e.length,e[o]=r,t[o]={axis:r,seriesModels:[]}),t[o].seriesModels.push(i)}),t}function kMt(n){var t=n.axis,e=n.seriesModels,i=e.length,r=n.boxWidthList=[],o=n.boxOffsetList=[],a=[],s;if(t.type==="category")s=t.getBandWidth();else{var l=0;ey(e,function(g){l=Math.max(l,g.getData().count())});var h=t.getExtent();s=Math.abs(h[1]-h[0])/l}ey(e,function(g){var p=g.get("boxWidth");ut(p)||(p=[p,p]),a.push([mt(p[0],s)||0,mt(p[1],s)||0])});var u=s*.8-2,d=u/i*.3,c=(u-d*(i-1))/i,f=c/2-u/2;ey(e,function(g,p){o.push(f),f+=d+c,r.push(Math.min(Math.max(c,a[p][0]),a[p][1]))})}function LMt(n,t,e){var i=n.coordinateSystem,r=n.getData(),o=e/2,a=n.get("layout")==="horizontal"?0:1,s=1-a,l=["x","y"],h=r.mapDimension(l[a]),u=r.mapDimensionsAll(l[s]);if(h==null||u.length<5)return;for(var d=0;d<r.count();d++){var c=r.get(h,d),f=b(c,u[2],d),g=b(c,u[0],d),p=b(c,u[1],d),v=b(c,u[3],d),m=b(c,u[4],d),y=[];_(y,p,!1),_(y,v,!0),y.push(g,p,m,v),w(y,g),w(y,m),w(y,f),r.setItemLayout(d,{initBaseline:f[s],ends:y})}function b(C,x,S){var A=r.get(x,S),T=[];T[a]=C,T[s]=A;var M;return isNaN(C)||isNaN(A)?M=[NaN,NaN]:(M=i.dataToPoint(T),M[a]+=t),M}function _(C,x,S){var A=x.slice(),T=x.slice();A[a]+=o,T[a]-=o,S?C.push(A,T):C.push(T,A)}function w(C,x){var S=x.slice(),A=x.slice();S[a]-=o,A[a]+=o,C.push(S,A)}}function EMt(n,t){t=t||{};for(var e=[],i=[],r=t.boundIQR,o=r==="none"||r===0,a=0;a<n.length;a++){var s=Ha(n[a].slice()),l=AR(s,.25),h=AR(s,.5),u=AR(s,.75),d=s[0],c=s[s.length-1],f=(r??1.5)*(u-l),g=o?d:Math.max(d,l-f),p=o?c:Math.min(c,u+f),v=t.itemNameFormatter,m=Dt(v)?v({value:a}):Ct(v)?v.replace("{value}",a+""):a+"";e.push([m,g,l,h,u,p]);for(var y=0;y<s.length;y++){var b=s[y];if(b<g||b>p){var _=[m,b];i.push(_)}}}return{boxData:e,outliers:i}}var DMt={type:"echarts:boxplot",transform:function(t){var e=t.upstream;if(e.sourceFormat!==Vr){var i="";Ve(i)}var r=EMt(e.getRawData(),t.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:r.boxData},{data:r.outliers}]}};function IMt(n){n.registerSeriesModel(iit),n.registerChartView(AMt),n.registerLayout(PMt),n.registerTransform(DMt)}var OMt=["itemStyle","borderColor"],HMt=["itemStyle","borderColor0"],zMt=["itemStyle","borderColorDoji"],FMt=["itemStyle","color"],NMt=["itemStyle","color0"];function dF(n,t){return t.get(n>0?FMt:NMt)}function cF(n,t){return t.get(n===0?zMt:n>0?OMt:HMt)}var WMt={seriesType:"candlestick",plan:Uv(),performRawSeries:!0,reset:function(n,t){if(!t.isSeriesFiltered(n)){var e=n.pipelineContext.large;return!e&&{progress:function(i,r){for(var o;(o=i.next())!=null;){var a=r.getItemModel(o),s=r.getItemLayout(o).sign,l=a.getItemStyle();l.fill=dF(s,a),l.stroke=cF(s,a)||l.fill;var h=r.ensureUniqueItemVisual(o,"style");ht(h,l)}}}}}},VMt=["color","borderColor"],GMt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,i,r){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(e),this._isLargeDraw?this._renderLarge(e):this._renderNormal(e)},t.prototype.incrementalPrepareRender=function(e,i,r){this._clear(),this._updateDrawMode(e)},t.prototype.incrementalRender=function(e,i,r,o){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(e,i):this._incrementalRenderNormal(e,i)},t.prototype.eachRendered=function(e){md(this._progressiveEls||this.group,e)},t.prototype._updateDrawMode=function(e){var i=e.pipelineContext.large;(this._isLargeDraw==null||i!==this._isLargeDraw)&&(this._isLargeDraw=i,this._clear())},t.prototype._renderNormal=function(e){var i=e.getData(),r=this._data,o=this.group,a=i.getLayout("isSimpleBox"),s=e.get("clip",!0),l=e.coordinateSystem,h=l.getArea&&l.getArea();this._data||o.removeAll(),i.diff(r).add(function(u){if(i.hasValue(u)){var d=i.getItemLayout(u);if(s&&OG(h,d))return;var c=uB(d,u,!0);Bi(c,{shape:{points:d.ends}},e,u),dB(c,i,u,a),o.add(c),i.setItemGraphicEl(u,c)}}).update(function(u,d){var c=r.getItemGraphicEl(d);if(!i.hasValue(u)){o.remove(c);return}var f=i.getItemLayout(u);if(s&&OG(h,f)){o.remove(c);return}c?(Ie(c,{shape:{points:f.ends}},e,u),As(c)):c=uB(f),dB(c,i,u,a),o.add(c),i.setItemGraphicEl(u,c)}).remove(function(u){var d=r.getItemGraphicEl(u);d&&o.remove(d)}).execute(),this._data=i},t.prototype._renderLarge=function(e){this._clear(),HG(e,this.group);var i=e.get("clip",!0)?m_(e.coordinateSystem,!1,e):null;i?this.group.setClipPath(i):this.group.removeClipPath()},t.prototype._incrementalRenderNormal=function(e,i){for(var r=i.getData(),o=r.getLayout("isSimpleBox"),a;(a=e.next())!=null;){var s=r.getItemLayout(a),l=uB(s);dB(l,r,a,o),l.incremental=!0,this.group.add(l),this._progressiveEls.push(l)}},t.prototype._incrementalRenderLarge=function(e,i){HG(i,this.group,this._progressiveEls,!0)},t.prototype.remove=function(e){this._clear()},t.prototype._clear=function(){this.group.removeAll(),this._data=null},t.type="candlestick",t})(hi),$Mt=(function(){function n(){}return n})(),jMt=(function(n){et(t,n);function t(e){var i=n.call(this,e)||this;return i.type="normalCandlestickBox",i}return t.prototype.getDefaultShape=function(){return new $Mt},t.prototype.buildPath=function(e,i){var r=i.points;this.__simpleBox?(e.moveTo(r[4][0],r[4][1]),e.lineTo(r[6][0],r[6][1])):(e.moveTo(r[0][0],r[0][1]),e.lineTo(r[1][0],r[1][1]),e.lineTo(r[2][0],r[2][1]),e.lineTo(r[3][0],r[3][1]),e.closePath(),e.moveTo(r[4][0],r[4][1]),e.lineTo(r[5][0],r[5][1]),e.moveTo(r[6][0],r[6][1]),e.lineTo(r[7][0],r[7][1]))},t})(ue);function uB(n,t,e){var i=n.ends;return new jMt({shape:{points:e?UMt(i,n):i},z2:100})}function OG(n,t){for(var e=!0,i=0;i<t.ends.length;i++)if(n.contain(t.ends[i][0],t.ends[i][1])){e=!1;break}return e}function dB(n,t,e,i){var r=t.getItemModel(e);n.useStyle(t.getItemVisual(e,"style")),n.style.strokeNoScale=!0,n.__simpleBox=i,Ar(n,r);var o=t.getItemLayout(e).sign;z(n.states,function(s,l){var h=r.getModel(l),u=dF(o,h),d=cF(o,h)||u,c=s.style||(s.style={});u&&(c.fill=u),d&&(c.stroke=d)});var a=r.getModel("emphasis");Gi(n,a.get("focus"),a.get("blurScope"),a.get("disabled"))}function UMt(n,t){return ct(n,function(e){return e=e.slice(),e[1]=t.initBaseline,e})}var YMt=(function(){function n(){}return n})(),cB=(function(n){et(t,n);function t(e){var i=n.call(this,e)||this;return i.type="largeCandlestickBox",i}return t.prototype.getDefaultShape=function(){return new YMt},t.prototype.buildPath=function(e,i){for(var r=i.points,o=0;o<r.length;)if(this.__sign===r[o++]){var a=r[o++];e.moveTo(a,r[o++]),e.lineTo(a,r[o++])}else o+=3},t})(ue);function HG(n,t,e,i){var r=n.getData(),o=r.getLayout("largePoints"),a=new cB({shape:{points:o},__sign:1,ignoreCoarsePointer:!0});t.add(a);var s=new cB({shape:{points:o},__sign:-1,ignoreCoarsePointer:!0});t.add(s);var l=new cB({shape:{points:o},__sign:0,ignoreCoarsePointer:!0});t.add(l),fB(1,a,n),fB(-1,s,n),fB(0,l,n),i&&(a.incremental=!0,s.incremental=!0),e&&e.push(a,s)}function fB(n,t,e,i){var r=cF(n,e)||dF(n,e),o=e.getModel("itemStyle").getItemStyle(VMt);t.useStyle(o),t.style.fill=null,t.style.stroke=r}var rit=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],e}return t.prototype.getShadowDim=function(){return"open"},t.prototype.brushSelector=function(e,i,r){var o=i.getItemLayout(e);return o&&r.rect(o.brushRect)},t.type="series.candlestick",t.dependencies=["xAxis","yAxis","grid"],t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},t})(Ci);In(rit,eit,!0);function XMt(n){!n||!ut(n.series)||z(n.series,function(t){Ht(t)&&t.type==="k"&&(t.type="candlestick")})}var qMt={seriesType:"candlestick",plan:Uv(),reset:function(n){var t=n.coordinateSystem,e=n.getData(),i=KMt(n,e),r=0,o=1,a=["x","y"],s=e.getDimensionIndex(e.mapDimension(a[r])),l=ct(e.mapDimensionsAll(a[o]),e.getDimensionIndex,e),h=l[0],u=l[1],d=l[2],c=l[3];if(e.setLayout({candleWidth:i,isSimpleBox:i<=1.3}),s<0||l.length<4)return;return{progress:n.pipelineContext.large?g:f};function f(p,v){for(var m,y=v.getStore();(m=p.next())!=null;){var b=y.get(s,m),_=y.get(h,m),w=y.get(u,m),C=y.get(d,m),x=y.get(c,m),S=Math.min(_,w),A=Math.max(_,w),T=E(S,b),M=E(A,b),R=E(C,b),L=E(x,b),B=[];D(B,M,0),D(B,T,1),B.push(O(L),O(M),O(R),O(T));var P=v.getItemModel(m),k=!!P.get(["itemStyle","borderColorDoji"]);v.setItemLayout(m,{sign:zG(y,m,_,w,u,k),initBaseline:_>w?M[o]:T[o],ends:B,brushRect:I(C,x,b)})}function E(H,F){var N=[];return N[r]=F,N[o]=H,isNaN(F)||isNaN(H)?[NaN,NaN]:t.dataToPoint(N)}function D(H,F,N){var $=F.slice(),V=F.slice();$[r]=vw($[r]+i/2,1,!1),V[r]=vw(V[r]-i/2,1,!0),N?H.push($,V):H.push(V,$)}function I(H,F,N){var $=E(H,N),V=E(F,N);return $[r]-=i/2,V[r]-=i/2,{x:$[0],y:$[1],width:i,height:V[1]-$[1]}}function O(H){return H[r]=vw(H[r],1),H}}function g(p,v){for(var m=ul(p.count*4),y=0,b,_=[],w=[],C,x=v.getStore(),S=!!n.get(["itemStyle","borderColorDoji"]);(C=p.next())!=null;){var A=x.get(s,C),T=x.get(h,C),M=x.get(u,C),R=x.get(d,C),L=x.get(c,C);if(isNaN(A)||isNaN(R)||isNaN(L)){m[y++]=NaN,y+=3;continue}m[y++]=zG(x,C,T,M,u,S),_[r]=A,_[o]=R,b=t.dataToPoint(_,null,w),m[y++]=b?b[0]:NaN,m[y++]=b?b[1]:NaN,_[o]=L,b=t.dataToPoint(_,null,w),m[y++]=b?b[1]:NaN}v.setLayout("largePoints",m)}}};function zG(n,t,e,i,r,o){var a;return e>i?a=-1:e<i?a=1:a=o?0:t>0?n.get(r,t-1)<=i?1:-1:1,a}function KMt(n,t){var e=n.getBaseAxis(),i,r=e.type==="category"?e.getBandWidth():(i=e.getExtent(),Math.abs(i[1]-i[0])/t.count()),o=mt(Yt(n.get("barMaxWidth"),r),r),a=mt(Yt(n.get("barMinWidth"),1),r),s=n.get("barWidth");return s!=null?mt(s,r):Math.max(Math.min(r/2,o),a)}function ZMt(n){n.registerChartView(GMt),n.registerSeriesModel(rit),n.registerPreprocessor(XMt),n.registerVisual(WMt),n.registerLayout(qMt)}function FG(n,t){var e=t.rippleEffectColor||t.color;n.eachChild(function(i){i.attr({z:t.z,zlevel:t.zlevel,style:{stroke:t.brushType==="stroke"?e:null,fill:t.brushType==="fill"?e:null}})})}var JMt=(function(n){et(t,n);function t(e,i){var r=n.call(this)||this,o=new p_(e,i),a=new Ft;return r.add(o),r.add(a),r.updateData(e,i),r}return t.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},t.prototype.startEffectAnimation=function(e){for(var i=e.symbolType,r=e.color,o=e.rippleNumber,a=this.childAt(1),s=0;s<o;s++){var l=En(i,-1,-1,2,2,r);l.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var h=-s/o*e.period+e.effectOffset;l.animate("",!0).when(e.period,{scaleX:e.rippleScale/2,scaleY:e.rippleScale/2}).delay(h).start(),l.animateStyle(!0).when(e.period,{opacity:0}).delay(h).start(),a.add(l)}FG(a,e)},t.prototype.updateEffectAnimation=function(e){for(var i=this._effectCfg,r=this.childAt(1),o=["symbolType","period","rippleScale","rippleNumber"],a=0;a<o.length;a++){var s=o[a];if(i[s]!==e[s]){this.stopEffectAnimation(),this.startEffectAnimation(e);return}}FG(r,e)},t.prototype.highlight=function(){Lh(this)},t.prototype.downplay=function(){Eh(this)},t.prototype.getSymbolType=function(){var e=this.childAt(0);return e&&e.getSymbolType()},t.prototype.updateData=function(e,i){var r=this,o=e.hostModel;this.childAt(0).updateData(e,i);var a=this.childAt(1),s=e.getItemModel(i),l=e.getItemVisual(i,"symbol"),h=Xv(e.getItemVisual(i,"symbolSize")),u=e.getItemVisual(i,"style"),d=u&&u.fill,c=s.getModel("emphasis");a.setScale(h),a.traverse(function(v){v.setStyle("fill",d)});var f=Jf(e.getItemVisual(i,"symbolOffset"),h);f&&(a.x=f[0],a.y=f[1]);var g=e.getItemVisual(i,"symbolRotate");a.rotation=(g||0)*Math.PI/180||0;var p={};p.showEffectOn=o.get("showEffectOn"),p.rippleScale=s.get(["rippleEffect","scale"]),p.brushType=s.get(["rippleEffect","brushType"]),p.period=s.get(["rippleEffect","period"])*1e3,p.effectOffset=i/e.count(),p.z=o.getShallow("z")||0,p.zlevel=o.getShallow("zlevel")||0,p.symbolType=l,p.color=d,p.rippleEffectColor=s.get(["rippleEffect","color"]),p.rippleNumber=s.get(["rippleEffect","number"]),p.showEffectOn==="render"?(this._effectCfg?this.updateEffectAnimation(p):this.startEffectAnimation(p),this._effectCfg=p):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(v){v==="emphasis"?p.showEffectOn!=="render"&&r.startEffectAnimation(p):v==="normal"&&p.showEffectOn!=="render"&&r.stopEffectAnimation()}),this._effectCfg=p,Gi(this,c.get("focus"),c.get("blurScope"),c.get("disabled"))},t.prototype.fadeOut=function(e){e&&e()},t})(Ft),QMt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(){this._symbolDraw=new v_(JMt)},t.prototype.render=function(e,i,r){var o=e.getData(),a=this._symbolDraw;a.updateData(o,{clipShape:this._getClipShape(e)}),this.group.add(a.group)},t.prototype._getClipShape=function(e){var i=e.coordinateSystem,r=i&&i.getArea&&i.getArea();return e.get("clip",!0)?r:null},t.prototype.updateTransform=function(e,i,r){var o=e.getData();this.group.dirty();var a=y_("").reset(e,i,r);a.progress&&a.progress({start:0,end:o.count(),count:o.count()},o),this._symbolDraw.updateLayout()},t.prototype._updateGroupTransform=function(e){var i=e.coordinateSystem;i&&i.getRoamTransform&&(this.group.transform=_dt(i.getRoamTransform()),this.group.decomposeTransform())},t.prototype.remove=function(e,i){this._symbolDraw&&this._symbolDraw.remove(!0)},t.type="effectScatter",t})(hi),t2t=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e.hasSymbolVisual=!0,e}return t.prototype.getInitialData=function(e,i){return qh(null,this,{useEncodeDefaulter:!0})},t.prototype.brushSelector=function(e,i,r){return r.point(i.getItemLayout(e))},t.type="series.effectScatter",t.dependencies=["grid","polar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},t})(Ci);function e2t(n){n.registerChartView(QMt),n.registerSeriesModel(t2t),n.registerLayout(y_("effectScatter"))}var oit=(function(n){et(t,n);function t(e,i,r){var o=n.call(this)||this;return o.add(o.createLine(e,i,r)),o._updateEffectSymbol(e,i),o}return t.prototype.createLine=function(e,i,r){return new tF(e,i,r)},t.prototype._updateEffectSymbol=function(e,i){var r=e.getItemModel(i),o=r.getModel("effect"),a=o.get("symbolSize"),s=o.get("symbol");ut(a)||(a=[a,a]);var l=e.getItemVisual(i,"style"),h=o.get("color")||l&&l.stroke,u=this.childAt(1);this._symbolType!==s&&(this.remove(u),u=En(s,-.5,-.5,1,1,h),u.z2=100,u.culling=!0,this.add(u)),u&&(u.setStyle("shadowColor",h),u.setStyle(o.getItemStyle(["color"])),u.scaleX=a[0],u.scaleY=a[1],u.setColor(h),this._symbolType=s,this._symbolScale=a,this._updateEffectAnimation(e,o,i))},t.prototype._updateEffectAnimation=function(e,i,r){var o=this.childAt(1);if(o){var a=e.getItemLayout(r),s=i.get("period")*1e3,l=i.get("loop"),h=i.get("roundTrip"),u=i.get("constantSpeed"),d=rr(i.get("delay"),function(f){return f/e.count()*s/3});if(o.ignore=!0,this._updateAnimationPoints(o,a),u>0&&(s=this._getLineLength(o)/u*1e3),s!==this._period||l!==this._loop||h!==this._roundTrip){o.stopAnimation();var c=void 0;Dt(d)?c=d(r):c=d,o.__t>0&&(c=-s*o.__t),this._animateSymbol(o,s,c,l,h)}this._period=s,this._loop=l,this._roundTrip=h}},t.prototype._animateSymbol=function(e,i,r,o,a){if(i>0){e.__t=0;var s=this,l=e.animate("",o).when(a?i*2:i,{__t:a?2:1}).delay(r).during(function(){s._updateSymbolPosition(e)});o||l.done(function(){s.remove(e)}),l.start()}},t.prototype._getLineLength=function(e){return Ru(e.__p1,e.__cp1)+Ru(e.__cp1,e.__p2)},t.prototype._updateAnimationPoints=function(e,i){e.__p1=i[0],e.__p2=i[1],e.__cp1=i[2]||[(i[0][0]+i[1][0])/2,(i[0][1]+i[1][1])/2]},t.prototype.updateData=function(e,i,r){this.childAt(0).updateData(e,i,r),this._updateEffectSymbol(e,i)},t.prototype._updateSymbolPosition=function(e){var i=e.__p1,r=e.__p2,o=e.__cp1,a=e.__t<1?e.__t:2-e.__t,s=[e.x,e.y],l=s.slice(),h=ir,u=hE;s[0]=h(i[0],o[0],r[0],a),s[1]=h(i[1],o[1],r[1],a);var d=e.__t<1?u(i[0],o[0],r[0],a):u(r[0],o[0],i[0],1-a),c=e.__t<1?u(i[1],o[1],r[1],a):u(r[1],o[1],i[1],1-a);e.rotation=-Math.atan2(c,d)-Math.PI/2,(this._symbolType==="line"||this._symbolType==="rect"||this._symbolType==="roundRect")&&(e.__lastT!==void 0&&e.__lastT<e.__t?(e.scaleY=Ru(l,s)*1.05,a===1&&(s[0]=l[0]+(s[0]-l[0])/2,s[1]=l[1]+(s[1]-l[1])/2)):e.__lastT===1?e.scaleY=2*Ru(i,s):e.scaleY=this._symbolScale[1]),e.__lastT=e.__t,e.ignore=!1,e.x=s[0],e.y=s[1]},t.prototype.updateLayout=function(e,i){this.childAt(0).updateLayout(e,i);var r=e.getItemModel(i).getModel("effect");this._updateEffectAnimation(e,r,i)},t})(Ft),ait=(function(n){et(t,n);function t(e,i,r){var o=n.call(this)||this;return o._createPolyline(e,i,r),o}return t.prototype._createPolyline=function(e,i,r){var o=e.getItemLayout(i),a=new fo({shape:{points:o}});this.add(a),this._updateCommonStl(e,i,r)},t.prototype.updateData=function(e,i,r){var o=e.hostModel,a=this.childAt(0),s={shape:{points:e.getItemLayout(i)}};Ie(a,s,o,i),this._updateCommonStl(e,i,r)},t.prototype._updateCommonStl=function(e,i,r){var o=this.childAt(0),a=e.getItemModel(i),s=r&&r.emphasisLineStyle,l=r&&r.focus,h=r&&r.blurScope,u=r&&r.emphasisDisabled;if(!r||e.hasItemOption){var d=a.getModel("emphasis");s=d.getModel("lineStyle").getLineStyle(),u=d.get("disabled"),l=d.get("focus"),h=d.get("blurScope")}o.useStyle(e.getItemVisual(i,"style")),o.style.fill=null,o.style.strokeNoScale=!0;var c=o.ensureState("emphasis");c.style=s,Gi(this,l,h,u)},t.prototype.updateLayout=function(e,i){var r=this.childAt(0);r.setShape("points",e.getItemLayout(i))},t})(Ft),i2t=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e._lastFrame=0,e._lastFramePercent=0,e}return t.prototype.createLine=function(e,i,r){return new ait(e,i,r)},t.prototype._updateAnimationPoints=function(e,i){this._points=i;for(var r=[0],o=0,a=1;a<i.length;a++){var s=i[a-1],l=i[a];o+=Ru(s,l),r.push(o)}if(o===0){this._length=0;return}for(var a=0;a<r.length;a++)r[a]/=o;this._offsets=r,this._length=o},t.prototype._getLineLength=function(){return this._length},t.prototype._updateSymbolPosition=function(e){var i=e.__t<1?e.__t:2-e.__t,r=this._points,o=this._offsets,a=r.length;if(o){var s=this._lastFrame,l;if(i<this._lastFramePercent){var h=Math.min(s+1,a-1);for(l=h;l>=0&&!(o[l]<=i);l--);l=Math.min(l,a-2)}else{for(l=s;l<a&&!(o[l]>i);l++);l=Math.min(l-1,a-2)}var u=(i-o[l])/(o[l+1]-o[l]),d=r[l],c=r[l+1];e.x=d[0]*(1-u)+u*c[0],e.y=d[1]*(1-u)+u*c[1];var f=e.__t<1?c[0]-d[0]:d[0]-c[0],g=e.__t<1?c[1]-d[1]:d[1]-c[1];e.rotation=-Math.atan2(g,f)-Math.PI/2,this._lastFrame=l,this._lastFramePercent=i,e.ignore=!1}},t})(oit),n2t=(function(){function n(){this.polyline=!1,this.curveness=0,this.segs=[]}return n})(),r2t=(function(n){et(t,n);function t(e){var i=n.call(this,e)||this;return i._off=0,i.hoverDataIdx=-1,i}return t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new n2t},t.prototype.buildPath=function(e,i){var r=i.segs,o=i.curveness,a;if(i.polyline)for(a=this._off;a<r.length;){var s=r[a++];if(s>0){e.moveTo(r[a++],r[a++]);for(var l=1;l<s;l++)e.lineTo(r[a++],r[a++])}}else for(a=this._off;a<r.length;){var h=r[a++],u=r[a++],d=r[a++],c=r[a++];if(e.moveTo(h,u),o>0){var f=(h+d)/2-(u-c)*o,g=(u+c)/2-(d-h)*o;e.quadraticCurveTo(f,g,d,c)}else e.lineTo(d,c)}this.incremental&&(this._off=a,this.notClear=!0)},t.prototype.findDataIndex=function(e,i){var r=this.shape,o=r.segs,a=r.curveness,s=this.style.lineWidth;if(r.polyline)for(var l=0,h=0;h<o.length;){var u=o[h++];if(u>0)for(var d=o[h++],c=o[h++],f=1;f<u;f++){var g=o[h++],p=o[h++];if(yu(d,c,g,p,s,e,i))return l}l++}else for(var l=0,h=0;h<o.length;){var d=o[h++],c=o[h++],g=o[h++],p=o[h++];if(a>0){var v=(d+g)/2-(c-p)*a,m=(c+p)/2-(g-d)*a;if(QK(d,c,v,m,g,p,s,e,i))return l}else if(yu(d,c,g,p,s,e,i))return l;l++}return-1},t.prototype.contain=function(e,i){var r=this.transformCoordToLocal(e,i),o=this.getBoundingRect();if(e=r[0],i=r[1],o.contain(e,i)){var a=this.hoverDataIdx=this.findDataIndex(e,i);return a>=0}return this.hoverDataIdx=-1,!1},t.prototype.getBoundingRect=function(){var e=this._rect;if(!e){for(var i=this.shape,r=i.segs,o=1/0,a=1/0,s=-1/0,l=-1/0,h=0;h<r.length;){var u=r[h++],d=r[h++];o=Math.min(u,o),s=Math.max(u,s),a=Math.min(d,a),l=Math.max(d,l)}e=this._rect=new te(o,a,s,l)}return e},t})(ue),o2t=(function(){function n(){this.group=new Ft}return n.prototype.updateData=function(t){this._clear();var e=this._create();e.setShape({segs:t.getLayout("linesPoints")}),this._setCommon(e,t)},n.prototype.incrementalPrepareUpdate=function(t){this.group.removeAll(),this._clear()},n.prototype.incrementalUpdate=function(t,e){var i=this._newAdded[0],r=e.getLayout("linesPoints"),o=i&&i.shape.segs;if(o&&o.length<2e4){var a=o.length,s=new Float32Array(a+r.length);s.set(o),s.set(r,a),i.setShape({segs:s})}else{this._newAdded=[];var l=this._create();l.incremental=!0,l.setShape({segs:r}),this._setCommon(l,e),l.__startIndex=t.start}},n.prototype.remove=function(){this._clear()},n.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},n.prototype._create=function(){var t=new r2t({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(t),this.group.add(t),t},n.prototype._setCommon=function(t,e,i){var r=e.hostModel;t.setShape({polyline:r.get("polyline"),curveness:r.get(["lineStyle","curveness"])}),t.useStyle(r.getModel("lineStyle").getLineStyle()),t.style.strokeNoScale=!0;var o=e.getVisual("style");o&&o.stroke&&t.setStyle("stroke",o.stroke),t.setStyle("fill",null);var a=Vt(t);a.seriesIndex=r.seriesIndex,t.on("mousemove",function(s){a.dataIndex=null;var l=t.hoverDataIdx;l>0&&(a.dataIndex=l+t.__startIndex)})},n.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},n})(),sit={seriesType:"lines",plan:Uv(),reset:function(n){var t=n.coordinateSystem;if(t){var e=n.get("polyline"),i=n.pipelineContext.large;return{progress:function(r,o){var a=[];if(i){var s=void 0,l=r.end-r.start;if(e){for(var h=0,u=r.start;u<r.end;u++)h+=n.getLineCoordsCount(u);s=new Float32Array(l+h*2)}else s=new Float32Array(l*4);for(var d=0,c=[],u=r.start;u<r.end;u++){var f=n.getLineCoords(u,a);e&&(s[d++]=f);for(var g=0;g<f;g++)c=t.dataToPoint(a[g],!1,c),s[d++]=c[0],s[d++]=c[1]}o.setLayout("linesPoints",s)}else for(var u=r.start;u<r.end;u++){var p=o.getItemModel(u),f=n.getLineCoords(u,a),v=[];if(e)for(var m=0;m<f;m++)v.push(t.dataToPoint(a[m]));else{v[0]=t.dataToPoint(a[0]),v[1]=t.dataToPoint(a[1]);var y=p.get(["lineStyle","curveness"]);+y&&(v[2]=[(v[0][0]+v[1][0])/2-(v[0][1]-v[1][1])*y,(v[0][1]+v[1][1])/2-(v[1][0]-v[0][0])*y])}o.setItemLayout(u,v)}}}}}},a2t=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,i,r){var o=e.getData(),a=this._updateLineDraw(o,e),s=e.get("zlevel"),l=e.get(["effect","trailLength"]),h=r.getZr(),u=h.painter.getType()==="svg";u||h.painter.getLayer(s).clear(!0),this._lastZlevel!=null&&!u&&h.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(e)&&l>0&&(u||h.configLayer(s,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(l/10+.9,1),0)})),a.updateData(o);var d=e.get("clip",!0)&&m_(e.coordinateSystem,!1,e);d?this.group.setClipPath(d):this.group.removeClipPath(),this._lastZlevel=s,this._finished=!0},t.prototype.incrementalPrepareRender=function(e,i,r){var o=e.getData(),a=this._updateLineDraw(o,e);a.incrementalPrepareUpdate(o),this._clearLayer(r),this._finished=!1},t.prototype.incrementalRender=function(e,i,r){this._lineDraw.incrementalUpdate(e,i.getData()),this._finished=e.end===i.getData().count()},t.prototype.eachRendered=function(e){this._lineDraw&&this._lineDraw.eachRendered(e)},t.prototype.updateTransform=function(e,i,r){var o=e.getData(),a=e.pipelineContext;if(!this._finished||a.large||a.progressiveRender)return{update:!0};var s=sit.reset(e,i,r);s.progress&&s.progress({start:0,end:o.count(),count:o.count()},o),this._lineDraw.updateLayout(),this._clearLayer(r)},t.prototype._updateLineDraw=function(e,i){var r=this._lineDraw,o=this._showEffect(i),a=!!i.get("polyline"),s=i.pipelineContext,l=s.large;return(!r||o!==this._hasEffet||a!==this._isPolyline||l!==this._isLargeDraw)&&(r&&r.remove(),r=this._lineDraw=l?new o2t:new eF(a?o?i2t:ait:o?oit:tF),this._hasEffet=o,this._isPolyline=a,this._isLargeDraw=l),this.group.add(r.group),r},t.prototype._showEffect=function(e){return!!e.get(["effect","show"])},t.prototype._clearLayer=function(e){var i=e.getZr(),r=i.painter.getType()==="svg";!r&&this._lastZlevel!=null&&i.painter.getLayer(this._lastZlevel).clear(!0)},t.prototype.remove=function(e,i){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(i)},t.prototype.dispose=function(e,i){this.remove(e,i)},t.type="lines",t})(hi),s2t=typeof Uint32Array>"u"?Array:Uint32Array,l2t=typeof Float64Array>"u"?Array:Float64Array;function NG(n){var t=n.data;t&&t[0]&&t[0][0]&&t[0][0].coord&&(n.data=ct(t,function(e){var i=[e[0].coord,e[1].coord],r={coords:i};return e[0].name&&(r.fromName=e[0].name),e[1].name&&(r.toName=e[1].name),xH([r,e[0],e[1]])}))}var h2t=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e.visualStyleAccessPath="lineStyle",e.visualDrawType="stroke",e}return t.prototype.init=function(e){e.data=e.data||[],NG(e);var i=this._processFlatCoordsArray(e.data);this._flatCoords=i.flatCoords,this._flatCoordsOffset=i.flatCoordsOffset,i.flatCoords&&(e.data=new Float32Array(i.count)),n.prototype.init.apply(this,arguments)},t.prototype.mergeOption=function(e){if(NG(e),e.data){var i=this._processFlatCoordsArray(e.data);this._flatCoords=i.flatCoords,this._flatCoordsOffset=i.flatCoordsOffset,i.flatCoords&&(e.data=new Float32Array(i.count))}n.prototype.mergeOption.apply(this,arguments)},t.prototype.appendData=function(e){var i=this._processFlatCoordsArray(e.data);i.flatCoords&&(this._flatCoords?(this._flatCoords=ky(this._flatCoords,i.flatCoords),this._flatCoordsOffset=ky(this._flatCoordsOffset,i.flatCoordsOffset)):(this._flatCoords=i.flatCoords,this._flatCoordsOffset=i.flatCoordsOffset),e.data=new Float32Array(i.count)),this.getRawData().appendData(e.data)},t.prototype._getCoordsFromItemModel=function(e){var i=this.getData().getItemModel(e),r=i.option instanceof Array?i.option:i.getShallow("coords");return r},t.prototype.getLineCoordsCount=function(e){return this._flatCoordsOffset?this._flatCoordsOffset[e*2+1]:this._getCoordsFromItemModel(e).length},t.prototype.getLineCoords=function(e,i){if(this._flatCoordsOffset){for(var r=this._flatCoordsOffset[e*2],o=this._flatCoordsOffset[e*2+1],a=0;a<o;a++)i[a]=i[a]||[],i[a][0]=this._flatCoords[r+a*2],i[a][1]=this._flatCoords[r+a*2+1];return o}else{for(var s=this._getCoordsFromItemModel(e),a=0;a<s.length;a++)i[a]=i[a]||[],i[a][0]=s[a][0],i[a][1]=s[a][1];return s.length}},t.prototype._processFlatCoordsArray=function(e){var i=0;if(this._flatCoords&&(i=this._flatCoords.length),Le(e[0])){for(var r=e.length,o=new s2t(r),a=new l2t(r),s=0,l=0,h=0,u=0;u<r;){h++;var d=e[u++];o[l++]=s+i,o[l++]=d;for(var c=0;c<d;c++){var f=e[u++],g=e[u++];a[s++]=f,a[s++]=g}}return{flatCoordsOffset:new Uint32Array(o.buffer,0,l),flatCoords:a,count:h}}return{flatCoordsOffset:null,flatCoords:null,count:e.length}},t.prototype.getInitialData=function(e,i){var r=new oo(["value"],this);return r.hasItemOption=!1,r.initData(e.data,[],function(o,a,s,l){if(o instanceof Array)return NaN;r.hasItemOption=!0;var h=o.value;if(h!=null)return h instanceof Array?h[l]:h}),r},t.prototype.formatTooltip=function(e,i,r){var o=this.getData(),a=o.getItemModel(e),s=a.get("name");if(s)return s;var l=a.get("fromName"),h=a.get("toName"),u=[];return l!=null&&u.push(l),h!=null&&u.push(h),Jn("nameValue",{name:u.join(" > ")})},t.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},t.prototype.getProgressive=function(){var e=this.option.progressive;return e??(this.option.large?1e4:this.get("progressive"))},t.prototype.getProgressiveThreshold=function(){var e=this.option.progressiveThreshold;return e??(this.option.large?2e4:this.get("progressiveThreshold"))},t.prototype.getZLevelKey=function(){var e=this.getModel("effect"),i=e.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:e.get("show")&&i>0?i+"":""},t.type="series.lines",t.dependencies=["grid","polar","geo","calendar"],t.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},t})(Ci);function QC(n){return n instanceof Array||(n=[n,n]),n}var u2t={seriesType:"lines",reset:function(n){var t=QC(n.get("symbol")),e=QC(n.get("symbolSize")),i=n.getData();i.setVisual("fromSymbol",t&&t[0]),i.setVisual("toSymbol",t&&t[1]),i.setVisual("fromSymbolSize",e&&e[0]),i.setVisual("toSymbolSize",e&&e[1]);function r(o,a){var s=o.getItemModel(a),l=QC(s.getShallow("symbol",!0)),h=QC(s.getShallow("symbolSize",!0));l[0]&&o.setItemVisual(a,"fromSymbol",l[0]),l[1]&&o.setItemVisual(a,"toSymbol",l[1]),h[0]&&o.setItemVisual(a,"fromSymbolSize",h[0]),h[1]&&o.setItemVisual(a,"toSymbolSize",h[1])}return{dataEach:i.hasItemOption?r:null}}};function d2t(n){n.registerChartView(a2t),n.registerSeriesModel(h2t),n.registerLayout(sit),n.registerVisual(u2t)}var c2t=256,f2t=(function(){function n(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var t=Ju.createCanvas();this.canvas=t}return n.prototype.update=function(t,e,i,r,o,a){var s=this._getBrush(),l=this._getGradient(o,"inRange"),h=this._getGradient(o,"outOfRange"),u=this.pointSize+this.blurSize,d=this.canvas,c=d.getContext("2d"),f=t.length;d.width=e,d.height=i;for(var g=0;g<f;++g){var p=t[g],v=p[0],m=p[1],y=p[2],b=r(y);c.globalAlpha=b,c.drawImage(s,v-u,m-u)}if(!d.width||!d.height)return d;for(var _=c.getImageData(0,0,d.width,d.height),w=_.data,C=0,x=w.length,S=this.minOpacity,A=this.maxOpacity,T=A-S;C<x;){var b=w[C+3]/256,M=Math.floor(b*(c2t-1))*4;if(b>0){var R=a(b)?l:h;b>0&&(b=b*T+S),w[C++]=R[M],w[C++]=R[M+1],w[C++]=R[M+2],w[C++]=R[M+3]*b*256}else C+=4}return c.putImageData(_,0,0),d},n.prototype._getBrush=function(){var t=this._brushCanvas||(this._brushCanvas=Ju.createCanvas()),e=this.pointSize+this.blurSize,i=e*2;t.width=i,t.height=i;var r=t.getContext("2d");return r.clearRect(0,0,i,i),r.shadowOffsetX=i,r.shadowBlur=this.blurSize,r.shadowColor="#000",r.beginPath(),r.arc(-e,e,this.pointSize,0,Math.PI*2,!0),r.closePath(),r.fill(),t},n.prototype._getGradient=function(t,e){for(var i=this._gradientPixels,r=i[e]||(i[e]=new Uint8ClampedArray(256*4)),o=[0,0,0,0],a=0,s=0;s<256;s++)t[e](s/255,!0,o),r[a++]=o[0],r[a++]=o[1],r[a++]=o[2],r[a++]=o[3];return r},n})();function g2t(n,t,e){var i=n[1]-n[0];t=ct(t,function(a){return{interval:[(a.interval[0]-n[0])/i,(a.interval[1]-n[0])/i]}});var r=t.length,o=0;return function(a){var s;for(s=o;s<r;s++){var l=t[s].interval;if(l[0]<=a&&a<=l[1]){o=s;break}}if(s===r)for(s=o-1;s>=0;s--){var l=t[s].interval;if(l[0]<=a&&a<=l[1]){o=s;break}}return s>=0&&s<r&&e[s]}}function p2t(n,t){var e=n[1]-n[0];return t=[(t[0]-n[0])/e,(t[1]-n[0])/e],function(i){return i>=t[0]&&i<=t[1]}}function WG(n){var t=n.dimensions;return t[0]==="lng"&&t[1]==="lat"}var v2t=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,i,r){var o;i.eachComponent("visualMap",function(s){s.eachTargetSeries(function(l){l===e&&(o=s)})}),this._progressiveEls=null,this.group.removeAll();var a=e.coordinateSystem;a.type==="cartesian2d"||a.type==="calendar"?this._renderOnCartesianAndCalendar(e,r,0,e.getData().count()):WG(a)&&this._renderOnGeo(a,e,o,r)},t.prototype.incrementalPrepareRender=function(e,i,r){this.group.removeAll()},t.prototype.incrementalRender=function(e,i,r,o){var a=i.coordinateSystem;a&&(WG(a)?this.render(i,r,o):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(i,o,e.start,e.end,!0)))},t.prototype.eachRendered=function(e){md(this._progressiveEls||this.group,e)},t.prototype._renderOnCartesianAndCalendar=function(e,i,r,o,a){var s=e.coordinateSystem,l=ig(s,"cartesian2d"),h,u,d,c;if(l){var f=s.getAxis("x"),g=s.getAxis("y");h=f.getBandWidth()+.5,u=g.getBandWidth()+.5,d=f.scale.getExtent(),c=g.scale.getExtent()}for(var p=this.group,v=e.getData(),m=e.getModel(["emphasis","itemStyle"]).getItemStyle(),y=e.getModel(["blur","itemStyle"]).getItemStyle(),b=e.getModel(["select","itemStyle"]).getItemStyle(),_=e.get(["itemStyle","borderRadius"]),w=Zn(e),C=e.getModel("emphasis"),x=C.get("focus"),S=C.get("blurScope"),A=C.get("disabled"),T=l?[v.mapDimension("x"),v.mapDimension("y"),v.mapDimension("value")]:[v.mapDimension("time"),v.mapDimension("value")],M=r;M<o;M++){var R=void 0,L=v.getItemVisual(M,"style");if(l){var B=v.get(T[0],M),P=v.get(T[1],M);if(isNaN(v.get(T[2],M))||isNaN(B)||isNaN(P)||B<d[0]||B>d[1]||P<c[0]||P>c[1])continue;var k=s.dataToPoint([B,P]);R=new Ae({shape:{x:k[0]-h/2,y:k[1]-u/2,width:h,height:u},style:L})}else{if(isNaN(v.get(T[1],M)))continue;R=new Ae({z2:1,shape:s.dataToRect([v.get(T[0],M)]).contentShape,style:L})}if(v.hasItemOption){var E=v.getItemModel(M),D=E.getModel("emphasis");m=D.getModel("itemStyle").getItemStyle(),y=E.getModel(["blur","itemStyle"]).getItemStyle(),b=E.getModel(["select","itemStyle"]).getItemStyle(),_=E.get(["itemStyle","borderRadius"]),x=D.get("focus"),S=D.get("blurScope"),A=D.get("disabled"),w=Zn(E)}R.shape.r=_;var I=e.getRawValue(M),O="-";I&&I[2]!=null&&(O=I[2]+""),Tr(R,w,{labelFetcher:e,labelDataIndex:M,defaultOpacity:L.opacity,defaultText:O}),R.ensureState("emphasis").style=m,R.ensureState("blur").style=y,R.ensureState("select").style=b,Gi(R,x,S,A),R.incremental=a,a&&(R.states.emphasis.hoverLayer=!0),p.add(R),v.setItemGraphicEl(M,R),this._progressiveEls&&this._progressiveEls.push(R)}},t.prototype._renderOnGeo=function(e,i,r,o){var a=r.targetVisuals.inRange,s=r.targetVisuals.outOfRange,l=i.getData(),h=this._hmLayer||this._hmLayer||new f2t;h.blurSize=i.get("blurSize"),h.pointSize=i.get("pointSize"),h.minOpacity=i.get("minOpacity"),h.maxOpacity=i.get("maxOpacity");var u=e.getViewRect().clone(),d=e.getRoamTransform();u.applyTransform(d);var c=Math.max(u.x,0),f=Math.max(u.y,0),g=Math.min(u.width+u.x,o.getWidth()),p=Math.min(u.height+u.y,o.getHeight()),v=g-c,m=p-f,y=[l.mapDimension("lng"),l.mapDimension("lat"),l.mapDimension("value")],b=l.mapArray(y,function(x,S,A){var T=e.dataToPoint([x,S]);return T[0]-=c,T[1]-=f,T.push(A),T}),_=r.getExtent(),w=r.type==="visualMap.continuous"?p2t(_,r.option.range):g2t(_,r.getPieceList(),r.option.selected);h.update(b,v,m,a.color.getNormalizer(),{inRange:a.color.getColorMapper(),outOfRange:s.color.getColorMapper()},w);var C=new hr({style:{width:v,height:m,x:c,y:f,image:h.canvas},silent:!0});this.group.add(C)},t.type="heatmap",t})(hi),m2t=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.getInitialData=function(e,i){return qh(null,this,{generateCoord:"value"})},t.prototype.preventIncremental=function(){var e=l_.get(this.get("coordinateSystem"));if(e&&e.dimensions)return e.dimensions[0]==="lng"&&e.dimensions[1]==="lat"},t.type="series.heatmap",t.dependencies=["grid","geo","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},t})(Ci);function y2t(n){n.registerChartView(v2t),n.registerSeriesModel(m2t)}var b2t=["itemStyle","borderWidth"],VG=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],gB=new Xh,_2t=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,i,r){var o=this.group,a=e.getData(),s=this._data,l=e.coordinateSystem,h=l.getBaseAxis(),u=h.isHorizontal(),d=l.master.getRect(),c={ecSize:{width:r.getWidth(),height:r.getHeight()},seriesModel:e,coordSys:l,coordSysExtent:[[d.x,d.x+d.width],[d.y,d.y+d.height]],isHorizontal:u,valueDim:VG[+u],categoryDim:VG[1-+u]};a.diff(s).add(function(g){if(a.hasValue(g)){var p=$G(a,g),v=GG(a,g,p,c),m=jG(a,c,v);a.setItemGraphicEl(g,m),o.add(m),YG(m,c,v)}}).update(function(g,p){var v=s.getItemGraphicEl(p);if(!a.hasValue(g)){o.remove(v);return}var m=$G(a,g),y=GG(a,g,m,c),b=fit(a,y);v&&b!==v.__pictorialShapeStr&&(o.remove(v),a.setItemGraphicEl(g,null),v=null),v?M2t(v,c,y):v=jG(a,c,y,!0),a.setItemGraphicEl(g,v),v.__pictorialSymbolMeta=y,o.add(v),YG(v,c,y)}).remove(function(g){var p=s.getItemGraphicEl(g);p&&UG(s,g,p.__pictorialSymbolMeta.animationModel,p)}).execute();var f=e.get("clip",!0)?m_(e.coordinateSystem,!1,e):null;return f?o.setClipPath(f):o.removeClipPath(),this._data=a,this.group},t.prototype.remove=function(e,i){var r=this.group,o=this._data;e.get("animation")?o&&o.eachItemGraphicEl(function(a){UG(o,Vt(a).dataIndex,e,a)}):r.removeAll()},t.type="pictorialBar",t})(hi);function GG(n,t,e,i){var r=n.getItemLayout(t),o=e.get("symbolRepeat"),a=e.get("symbolClip"),s=e.get("symbolPosition")||"start",l=e.get("symbolRotate"),h=(l||0)*Math.PI/180||0,u=e.get("symbolPatternSize")||2,d=e.isAnimationEnabled(),c={dataIndex:t,layout:r,itemModel:e,symbolType:n.getItemVisual(t,"symbol")||"circle",style:n.getItemVisual(t,"style"),symbolClip:a,symbolRepeat:o,symbolRepeatDirection:e.get("symbolRepeatDirection"),symbolPatternSize:u,rotation:h,animationModel:d?e:null,hoverScale:d&&e.get(["emphasis","scale"]),z2:e.getShallow("z",!0)||0};C2t(e,o,r,i,c),w2t(n,t,r,o,a,c.boundingLength,c.pxSign,u,i,c),x2t(e,c.symbolScale,h,i,c);var f=c.symbolSize,g=Jf(e.get("symbolOffset"),f);return S2t(e,f,r,o,a,g,s,c.valueLineWidth,c.boundingLength,c.repeatCutLength,i,c),c}function C2t(n,t,e,i,r){var o=i.valueDim,a=n.get("symbolBoundingData"),s=i.coordSys.getOtherAxis(i.coordSys.getBaseAxis()),l=s.toGlobalCoord(s.dataToCoord(0)),h=1-+(e[o.wh]<=0),u;if(ut(a)){var d=[pB(s,a[0])-l,pB(s,a[1])-l];d[1]<d[0]&&d.reverse(),u=d[h]}else a!=null?u=pB(s,a)-l:t?u=i.coordSysExtent[o.index][h]-l:u=e[o.wh];r.boundingLength=u,t&&(r.repeatCutLength=e[o.wh]);var c=o.xy==="x",f=s.inverse;r.pxSign=c&&!f||!c&&f?u>=0?1:-1:u>0?1:-1}function pB(n,t){return n.toGlobalCoord(n.dataToCoord(n.scale.parse(t)))}function w2t(n,t,e,i,r,o,a,s,l,h){var u=l.valueDim,d=l.categoryDim,c=Math.abs(e[d.wh]),f=n.getItemVisual(t,"symbolSize"),g;ut(f)?g=f.slice():f==null?g=["100%","100%"]:g=[f,f],g[d.index]=mt(g[d.index],c),g[u.index]=mt(g[u.index],i?c:Math.abs(o)),h.symbolSize=g;var p=h.symbolScale=[g[0]/s,g[1]/s];p[u.index]*=(l.isHorizontal?-1:1)*a}function x2t(n,t,e,i,r){var o=n.get(b2t)||0;o&&(gB.attr({scaleX:t[0],scaleY:t[1],rotation:e}),gB.updateTransform(),o/=gB.getLineScale(),o*=t[i.valueDim.index]),r.valueLineWidth=o||0}function S2t(n,t,e,i,r,o,a,s,l,h,u,d){var c=u.categoryDim,f=u.valueDim,g=d.pxSign,p=Math.max(t[f.index]+s,0),v=p;if(i){var m=Math.abs(l),y=rr(n.get("symbolMargin"),"15%")+"",b=!1;y.lastIndexOf("!")===y.length-1&&(b=!0,y=y.slice(0,y.length-1));var _=mt(y,t[f.index]),w=Math.max(p+_*2,0),C=b?0:_*2,x=FK(i),S=x?i:XG((m+C)/w),A=m-S*p;_=A/2/(b?S:Math.max(S-1,1)),w=p+_*2,C=b?0:_*2,!x&&i!=="fixed"&&(S=h?XG((Math.abs(h)+C)/w):0),v=S*w-C,d.repeatTimes=S,d.symbolMargin=_}var T=g*(v/2),M=d.pathPosition=[];M[c.index]=e[c.wh]/2,M[f.index]=a==="start"?T:a==="end"?l-T:l/2,o&&(M[0]+=o[0],M[1]+=o[1]);var R=d.bundlePosition=[];R[c.index]=e[c.xy],R[f.index]=e[f.xy];var L=d.barRectShape=ht({},e);L[f.wh]=g*Math.max(Math.abs(e[f.wh]),Math.abs(M[f.index]+T)),L[c.wh]=e[c.wh];var B=d.clipShape={};B[c.xy]=-e[c.xy],B[c.wh]=u.ecSize[c.wh],B[f.xy]=0,B[f.wh]=e[f.wh]}function lit(n){var t=n.symbolPatternSize,e=En(n.symbolType,-t/2,-t/2,t,t);return e.attr({culling:!0}),e.type!=="image"&&e.setStyle({strokeNoScale:!0}),e}function hit(n,t,e,i){var r=n.__pictorialBundle,o=e.symbolSize,a=e.valueLineWidth,s=e.pathPosition,l=t.valueDim,h=e.repeatTimes||0,u=0,d=o[t.valueDim.index]+a+e.symbolMargin*2;for(fF(n,function(p){p.__pictorialAnimationIndex=u,p.__pictorialRepeatTimes=h,u<h?yp(p,null,g(u),e,i):yp(p,null,{scaleX:0,scaleY:0},e,i,function(){r.remove(p)}),u++});u<h;u++){var c=lit(e);c.__pictorialAnimationIndex=u,c.__pictorialRepeatTimes=h,r.add(c);var f=g(u);yp(c,{x:f.x,y:f.y,scaleX:0,scaleY:0},{scaleX:f.scaleX,scaleY:f.scaleY,rotation:f.rotation},e,i)}function g(p){var v=s.slice(),m=e.pxSign,y=p;return(e.symbolRepeatDirection==="start"?m>0:m<0)&&(y=h-1-p),v[l.index]=d*(y-h/2+.5)+s[l.index],{x:v[0],y:v[1],scaleX:e.symbolScale[0],scaleY:e.symbolScale[1],rotation:e.rotation}}}function uit(n,t,e,i){var r=n.__pictorialBundle,o=n.__pictorialMainPath;o?yp(o,null,{x:e.pathPosition[0],y:e.pathPosition[1],scaleX:e.symbolScale[0],scaleY:e.symbolScale[1],rotation:e.rotation},e,i):(o=n.__pictorialMainPath=lit(e),r.add(o),yp(o,{x:e.pathPosition[0],y:e.pathPosition[1],scaleX:0,scaleY:0,rotation:e.rotation},{scaleX:e.symbolScale[0],scaleY:e.symbolScale[1]},e,i))}function dit(n,t,e){var i=ht({},t.barRectShape),r=n.__pictorialBarRect;r?yp(r,null,{shape:i},t,e):(r=n.__pictorialBarRect=new Ae({z2:2,shape:i,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),r.disableMorphing=!0,n.add(r))}function cit(n,t,e,i){if(e.symbolClip){var r=n.__pictorialClipPath,o=ht({},e.clipShape),a=t.valueDim,s=e.animationModel,l=e.dataIndex;if(r)Ie(r,{shape:o},s,l);else{o[a.wh]=0,r=new Ae({shape:o}),n.__pictorialBundle.setClipPath(r),n.__pictorialClipPath=r;var h={};h[a.wh]=e.clipShape[a.wh],Zf[i?"updateProps":"initProps"](r,{shape:h},s,l)}}}function $G(n,t){var e=n.getItemModel(t);return e.getAnimationDelayParams=A2t,e.isAnimationEnabled=T2t,e}function A2t(n){return{index:n.__pictorialAnimationIndex,count:n.__pictorialRepeatTimes}}function T2t(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function jG(n,t,e,i){var r=new Ft,o=new Ft;return r.add(o),r.__pictorialBundle=o,o.x=e.bundlePosition[0],o.y=e.bundlePosition[1],e.symbolRepeat?hit(r,t,e):uit(r,t,e),dit(r,e,i),cit(r,t,e,i),r.__pictorialShapeStr=fit(n,e),r.__pictorialSymbolMeta=e,r}function M2t(n,t,e){var i=e.animationModel,r=e.dataIndex,o=n.__pictorialBundle;Ie(o,{x:e.bundlePosition[0],y:e.bundlePosition[1]},i,r),e.symbolRepeat?hit(n,t,e,!0):uit(n,t,e,!0),dit(n,e,!0),cit(n,t,e,!0)}function UG(n,t,e,i){var r=i.__pictorialBarRect;r&&r.removeTextContent();var o=[];fF(i,function(a){o.push(a)}),i.__pictorialMainPath&&o.push(i.__pictorialMainPath),i.__pictorialClipPath&&(e=null),z(o,function(a){td(a,{scaleX:0,scaleY:0},e,t,function(){i.parent&&i.parent.remove(i)})}),n.setItemGraphicEl(t,null)}function fit(n,t){return[n.getItemVisual(t.dataIndex,"symbol")||"none",!!t.symbolRepeat,!!t.symbolClip].join(":")}function fF(n,t,e){z(n.__pictorialBundle.children(),function(i){i!==n.__pictorialBarRect&&t.call(e,i)})}function yp(n,t,e,i,r,o){t&&n.attr(t),i.symbolClip&&!r?e&&n.attr(e):e&&Zf[r?"updateProps":"initProps"](n,e,i.animationModel,i.dataIndex,o)}function YG(n,t,e){var i=e.dataIndex,r=e.itemModel,o=r.getModel("emphasis"),a=o.getModel("itemStyle").getItemStyle(),s=r.getModel(["blur","itemStyle"]).getItemStyle(),l=r.getModel(["select","itemStyle"]).getItemStyle(),h=r.getShallow("cursor"),u=o.get("focus"),d=o.get("blurScope"),c=o.get("scale");fF(n,function(p){if(p instanceof hr){var v=p.style;p.useStyle(ht({image:v.image,x:v.x,y:v.y,width:v.width,height:v.height},e.style))}else p.useStyle(e.style);var m=p.ensureState("emphasis");m.style=a,c&&(m.scaleX=p.scaleX*1.1,m.scaleY=p.scaleY*1.1),p.ensureState("blur").style=s,p.ensureState("select").style=l,h&&(p.cursor=h),p.z2=e.z2});var f=t.valueDim.posDesc[+(e.boundingLength>0)],g=n.__pictorialBarRect;g.ignoreClip=!0,Tr(g,Zn(r),{labelFetcher:t.seriesModel,labelDataIndex:i,defaultText:Jp(t.seriesModel.getData(),i),inheritColor:e.style.fill,defaultOpacity:e.style.opacity,defaultOutsidePosition:f}),Gi(n,u,d,o.get("disabled"))}function XG(n){var t=Math.round(n);return Math.abs(n-t)<1e-4?t:Math.ceil(n)}var R2t=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e.hasSymbolVisual=!0,e.defaultSymbol="roundRect",e}return t.prototype.getInitialData=function(e){return e.stack=null,n.prototype.getInitialData.apply(this,arguments)},t.type="series.pictorialBar",t.dependencies=["grid"],t.defaultOption=yd(Qy.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",clip:!1,progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:"#212121"}}}),t})(Qy);function P2t(n){n.registerChartView(_2t),n.registerSeriesModel(R2t),n.registerLayout(n.PRIORITY.VISUAL.LAYOUT,qt(mQ,"pictorialBar")),n.registerLayout(n.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,yQ("pictorialBar"))}var B2t=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e._layers=[],e}return t.prototype.render=function(e,i,r){var o=e.getData(),a=this,s=this.group,l=e.getLayerSeries(),h=o.getLayout("layoutInfo"),u=h.rect,d=h.boundaryGap;s.x=0,s.y=u.y+d[0];function c(v){return v.name}var f=new Dh(this._layersSeries||[],l,c,c),g=[];f.add(xt(p,this,"add")).update(xt(p,this,"update")).remove(xt(p,this,"remove")).execute();function p(v,m,y){var b=a._layers;if(v==="remove"){s.remove(b[m]);return}for(var _=[],w=[],C,x=l[m].indices,S=0;S<x.length;S++){var A=o.getItemLayout(x[S]),T=A.x,M=A.y0,R=A.y;_.push(T,M),w.push(T,M+R),C=o.getItemVisual(x[S],"style")}var L,B=o.getItemLayout(x[0]),P=e.getModel("label"),k=P.get("margin"),E=e.getModel("emphasis");if(v==="add"){var D=g[m]=new Ft;L=new Cet({shape:{points:_,stackedOnPoints:w,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),D.add(L),s.add(D),e.isAnimationEnabled()&&L.setClipPath(k2t(L.getBoundingRect(),e,function(){L.removeClipPath()}))}else{var D=b[y];L=D.childAt(0),s.add(D),g[m]=D,Ie(L,{shape:{points:_,stackedOnPoints:w}},e),As(L)}Tr(L,Zn(e),{labelDataIndex:x[S-1],defaultText:o.getName(x[S-1]),inheritColor:C.fill},{normal:{verticalAlign:"middle"}}),L.setTextConfig({position:null,local:!0});var I=L.getTextContent();I&&(I.x=B.x-k,I.y=B.y0+B.y/2),L.useStyle(C),o.setItemGraphicEl(m,L),Ar(L,e),Gi(L,E.get("focus"),E.get("blurScope"),E.get("disabled"))}this._layersSeries=l,this._layers=g},t.type="themeRiver",t})(hi);function k2t(n,t,e){var i=new Ae({shape:{x:n.x-10,y:n.y-10,width:0,height:n.height+20}});return Bi(i,{shape:{x:n.x-50,width:n.width+100,height:n.height+20}},t,e),i}var vB=2,L2t=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(e){n.prototype.init.apply(this,arguments),this.legendVisualProvider=new __(xt(this.getData,this),xt(this.getRawData,this))},t.prototype.fixData=function(e){var i=e.length,r={},o=SE(e,function(c){return r.hasOwnProperty(c[0]+"")||(r[c[0]+""]=-1),c[2]}),a=[];o.buckets.each(function(c,f){a.push({name:f,dataList:c})});for(var s=a.length,l=0;l<s;++l){for(var h=a[l].name,u=0;u<a[l].dataList.length;++u){var d=a[l].dataList[u][0]+"";r[d]=l}for(var d in r)r.hasOwnProperty(d)&&r[d]!==l&&(r[d]=l,e[i]=[d,0,h],i++)}return e},t.prototype.getInitialData=function(e,i){for(var r=this.getReferringComponents("singleAxis",Mn).models[0],o=r.get("type"),a=Ge(e.data,function(g){return g[2]!==void 0}),s=this.fixData(a||[]),l=[],h=this.nameMap=Pt(),u=0,d=0;d<s.length;++d)l.push(s[d][vB]),h.get(s[d][vB])||(h.set(s[d][vB],u),u++);var c=u_(s,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:xx(o)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,f=new oo(c,this);return f.initData(s),f},t.prototype.getLayerSeries=function(){for(var e=this.getData(),i=e.count(),r=[],o=0;o<i;++o)r[o]=o;var a=e.mapDimension("single"),s=SE(r,function(h){return e.get("name",h)}),l=[];return s.buckets.each(function(h,u){h.sort(function(d,c){return e.get(a,d)-e.get(a,c)}),l.push({name:u,indices:h})}),l},t.prototype.getAxisTooltipData=function(e,i,r){ut(e)||(e=e?[e]:[]);for(var o=this.getData(),a=this.getLayerSeries(),s=[],l=a.length,h,u=0;u<l;++u){for(var d=Number.MAX_VALUE,c=-1,f=a[u].indices.length,g=0;g<f;++g){var p=o.get(e[0],a[u].indices[g]),v=Math.abs(p-i);v<=d&&(h=p,d=v,c=a[u].indices[g])}s.push(c)}return{dataIndices:s,nestestValue:h}},t.prototype.formatTooltip=function(e,i,r){var o=this.getData(),a=o.getName(e),s=o.get(o.mapDimension("value"),e);return Jn("nameValue",{name:a,value:s})},t.type="series.themeRiver",t.dependencies=["singleAxis"],t.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},t})(Ci);function E2t(n,t){n.eachSeriesByType("themeRiver",function(e){var i=e.getData(),r=e.coordinateSystem,o={},a=r.getRect();o.rect=a;var s=e.get("boundaryGap"),l=r.getAxis();if(o.boundaryGap=s,l.orient==="horizontal"){s[0]=mt(s[0],a.height),s[1]=mt(s[1],a.height);var h=a.height-s[0]-s[1];qG(i,e,h)}else{s[0]=mt(s[0],a.width),s[1]=mt(s[1],a.width);var u=a.width-s[0]-s[1];qG(i,e,u)}i.setLayout("layoutInfo",o)})}function qG(n,t,e){if(n.count())for(var i=t.coordinateSystem,r=t.getLayerSeries(),o=n.mapDimension("single"),a=n.mapDimension("value"),s=ct(r,function(v){return ct(v.indices,function(m){var y=i.dataToPoint(n.get(o,m));return y[1]=n.get(a,m),y})}),l=D2t(s),h=l.y0,u=e/l.max,d=r.length,c=r[0].indices.length,f,g=0;g<c;++g){f=h[g]*u,n.setItemLayout(r[0].indices[g],{layerIndex:0,x:s[0][g][0],y0:f,y:s[0][g][1]*u});for(var p=1;p<d;++p)f+=s[p-1][g][1]*u,n.setItemLayout(r[p].indices[g],{layerIndex:p,x:s[p][g][0],y0:f,y:s[p][g][1]*u})}}function D2t(n){for(var t=n.length,e=n[0].length,i=[],r=[],o=0,a=0;a<e;++a){for(var s=0,l=0;l<t;++l)s+=n[l][a][1];s>o&&(o=s),i.push(s)}for(var h=0;h<e;++h)r[h]=(o-i[h])/2;o=0;for(var u=0;u<e;++u){var d=i[u]+r[u];d>o&&(o=d)}return{y0:r,max:o}}function I2t(n){n.registerChartView(B2t),n.registerSeriesModel(L2t),n.registerLayout(E2t),n.registerProcessor(b_("themeRiver"))}var O2t=2,H2t=4,KG=(function(n){et(t,n);function t(e,i,r,o){var a=n.call(this)||this;a.z2=O2t,a.textConfig={inside:!0},Vt(a).seriesIndex=i.seriesIndex;var s=new Re({z2:H2t,silent:e.getModel().get(["label","silent"])});return a.setTextContent(s),a.updateData(!0,e,i,r,o),a}return t.prototype.updateData=function(e,i,r,o,a){this.node=i,i.piece=this,r=r||this._seriesModel,o=o||this._ecModel;var s=this;Vt(s).dataIndex=i.dataIndex;var l=i.getModel(),h=l.getModel("emphasis"),u=i.getLayout(),d=ht({},u);d.label=null;var c=i.getVisual("style");c.lineJoin="bevel";var f=i.getVisual("decal");f&&(c.decal=Up(f,a));var g=Nc(l.getModel("itemStyle"),d,!0);ht(d,g),z(lo,function(y){var b=s.ensureState(y),_=l.getModel([y,"itemStyle"]);b.style=_.getItemStyle();var w=Nc(_,d);w&&(b.shape=w)}),e?(s.setShape(d),s.shape.r=u.r0,Bi(s,{shape:{r:u.r}},r,i.dataIndex)):(Ie(s,{shape:d},r),As(s)),s.useStyle(c),this._updateLabel(r);var p=l.getShallow("cursor");p&&s.attr("cursor",p),this._seriesModel=r||this._seriesModel,this._ecModel=o||this._ecModel;var v=h.get("focus"),m=v==="relative"?ky(i.getAncestorsIndices(),i.getDescendantIndices()):v==="ancestor"?i.getAncestorsIndices():v==="descendant"?i.getDescendantIndices():v;Gi(this,m,h.get("blurScope"),h.get("disabled"))},t.prototype._updateLabel=function(e){var i=this,r=this.node.getModel(),o=r.getModel("label"),a=this.node.getLayout(),s=a.endAngle-a.startAngle,l=(a.startAngle+a.endAngle)/2,h=Math.cos(l),u=Math.sin(l),d=this,c=d.getTextContent(),f=this.node.dataIndex,g=o.get("minAngle")/180*Math.PI,p=o.get("show")&&!(g!=null&&Math.abs(s)<g);c.ignore=!p,z(Hy,function(m){var y=m==="normal"?r.getModel("label"):r.getModel([m,"label"]),b=m==="normal",_=b?c:c.ensureState(m),w=e.getFormattedLabel(f,m);b&&(w=w||i.node.name),_.style=_i(y,{},null,m!=="normal",!0),w&&(_.style.text=w);var C=y.get("show");C!=null&&!b&&(_.ignore=!C);var x=v(y,"position"),S=b?d:d.states[m],A=S.style.fill;S.textConfig={outsideFill:y.get("color")==="inherit"?A:null,inside:x!=="outside"};var T,M=v(y,"distance")||0,R=v(y,"align"),L=v(y,"rotate"),B=Math.PI*.5,P=Math.PI*1.5,k=jo(L==="tangential"?Math.PI/2-l:l),E=k>B&&!Iy(k-B)&&k<P;x==="outside"?(T=a.r+M,R=E?"right":"left"):!R||R==="center"?(s===2*Math.PI&&a.r0===0?T=0:T=(a.r+a.r0)/2,R="center"):R==="left"?(T=a.r0+M,R=E?"right":"left"):R==="right"&&(T=a.r-M,R=E?"left":"right"),_.style.align=R,_.style.verticalAlign=v(y,"verticalAlign")||"middle",_.x=T*h+a.cx,_.y=T*u+a.cy;var D=0;L==="radial"?D=jo(-l)+(E?Math.PI:0):L==="tangential"?D=jo(Math.PI/2-l)+(E?Math.PI:0):Le(L)&&(D=L*Math.PI/180),_.rotation=jo(D)});function v(m,y){var b=m.get(y);return b??o.get(y)}c.dirtyStyle()},t})(ho),DD="sunburstRootToNode",ZG="sunburstHighlight",z2t="sunburstUnhighlight";function F2t(n){n.registerAction({type:DD,update:"updateView"},function(t,e){e.eachComponent({mainType:"series",subType:"sunburst",query:t},i);function i(r,o){var a=tb(t,[DD],r);if(a){var s=r.getViewRoot();s&&(t.direction=aF(s,a.node)?"rollUp":"drillDown"),r.resetViewRoot(a.node)}}}),n.registerAction({type:ZG,update:"none"},function(t,e,i){t=ht({},t),e.eachComponent({mainType:"series",subType:"sunburst",query:t},r);function r(o){var a=tb(t,[ZG],o);a&&(t.dataIndex=a.node.dataIndex)}i.dispatchAction(ht(t,{type:"highlight"}))}),n.registerAction({type:z2t,update:"updateView"},function(t,e,i){t=ht({},t),i.dispatchAction(ht(t,{type:"downplay"}))})}var N2t=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,i,r,o){var a=this;this.seriesModel=e,this.api=r,this.ecModel=i;var s=e.getData(),l=s.tree.root,h=e.getViewRoot(),u=this.group,d=e.get("renderLabelForZeroData"),c=[];h.eachNode(function(y){c.push(y)});var f=this._oldChildren||[];g(c,f),m(l,h),this._initEvents(),this._oldChildren=c;function g(y,b){if(y.length===0&&b.length===0)return;new Dh(b,y,_,_).add(w).update(w).remove(qt(w,null)).execute();function _(C){return C.getId()}function w(C,x){var S=C==null?null:y[C],A=x==null?null:b[x];p(S,A)}}function p(y,b){if(!d&&y&&!y.getValue()&&(y=null),y!==l&&b!==l){if(b&&b.piece)y?(b.piece.updateData(!1,y,e,i,r),s.setItemGraphicEl(y.dataIndex,b.piece)):v(b);else if(y){var _=new KG(y,e,i,r);u.add(_),s.setItemGraphicEl(y.dataIndex,_)}}}function v(y){y&&y.piece&&(u.remove(y.piece),y.piece=null)}function m(y,b){b.depth>0?(a.virtualPiece?a.virtualPiece.updateData(!1,y,e,i,r):(a.virtualPiece=new KG(y,e,i,r),u.add(a.virtualPiece)),b.piece.off("click"),a.virtualPiece.on("click",function(_){a._rootToNode(b.parentNode)})):a.virtualPiece&&(u.remove(a.virtualPiece),a.virtualPiece=null)}},t.prototype._initEvents=function(){var e=this;this.group.off("click"),this.group.on("click",function(i){var r=!1,o=e.seriesModel.getViewRoot();o.eachNode(function(a){if(!r&&a.piece&&a.piece===i.target){var s=a.getModel().get("nodeClick");if(s==="rootToNode")e._rootToNode(a);else if(s==="link"){var l=a.getModel(),h=l.get("link");if(h){var u=l.get("target",!0)||"_blank";gx(h,u)}}r=!0}})})},t.prototype._rootToNode=function(e){e!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:DD,from:this.uid,seriesId:this.seriesModel.id,targetNode:e})},t.prototype.containPoint=function(e,i){var r=i.getData(),o=r.getItemLayout(0);if(o){var a=e[0]-o.cx,s=e[1]-o.cy,l=Math.sqrt(a*a+s*s);return l<=o.r&&l>=o.r0}},t.type="sunburst",t})(hi),W2t=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e.ignoreStyleOnData=!0,e}return t.prototype.getInitialData=function(e,i){var r={name:e.name,children:e.data};git(r);var o=this._levelModels=ct(e.levels||[],function(l){return new Ze(l,this,i)},this),a=oF.createTree(r,this,s);function s(l){l.wrapMethod("getItemModel",function(h,u){var d=a.getNodeByDataIndex(u),c=o[d.depth];return c&&(h.parentModel=c),h})}return a.data},t.prototype.optionUpdated=function(){this.resetViewRoot()},t.prototype.getDataParams=function(e){var i=n.prototype.getDataParams.apply(this,arguments),r=this.getData().tree.getNodeByDataIndex(e);return i.treePathInfo=pM(r,this),i},t.prototype.getLevelModel=function(e){return this._levelModels&&this._levelModels[e.depth]},t.prototype.getViewRoot=function(){return this._viewRoot},t.prototype.resetViewRoot=function(e){e?this._viewRoot=e:e=this._viewRoot;var i=this.getRawData().tree.root;(!e||e!==i&&!i.contains(e))&&(this._viewRoot=i)},t.prototype.enableAriaDecal=function(){zet(this)},t.type="series.sunburst",t.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},t})(Ci);function git(n){var t=0;z(n.children,function(i){git(i);var r=i.value;ut(r)&&(r=r[0]),t+=r});var e=n.value;ut(e)&&(e=e[0]),(e==null||isNaN(e))&&(e=t),e<0&&(e=0),ut(n.value)?n.value[0]=e:n.value=e}var JG=Math.PI/180;function V2t(n,t,e){t.eachSeriesByType(n,function(i){var r=i.get("center"),o=i.get("radius");ut(o)||(o=[0,o]),ut(r)||(r=[r,r]);var a=e.getWidth(),s=e.getHeight(),l=Math.min(a,s),h=mt(r[0],a),u=mt(r[1],s),d=mt(o[0],l/2),c=mt(o[1],l/2),f=-i.get("startAngle")*JG,g=i.get("minAngle")*JG,p=i.getData().tree.root,v=i.getViewRoot(),m=v.depth,y=i.get("sort");y!=null&&pit(v,y);var b=0;z(v.children,function(k){!isNaN(k.getValue())&&b++});var _=v.getValue(),w=Math.PI/(_||b)*2,C=v.depth>0,x=v.height-(C?-1:1),S=(c-d)/(x||1),A=i.get("clockwise"),T=i.get("stillShowZeroSum"),M=A?1:-1,R=function(k,E){if(k){var D=E;if(k!==p){var I=k.getValue(),O=_===0&&T?w:I*w;O<g&&(O=g),D=E+M*O;var H=k.depth-m-(C?-1:1),F=d+S*H,N=d+S*(H+1),$=i.getLevelModel(k);if($){var V=$.get("r0",!0),X=$.get("r",!0),Z=$.get("radius",!0);Z!=null&&(V=Z[0],X=Z[1]),V!=null&&(F=mt(V,l/2)),X!=null&&(N=mt(X,l/2))}k.setLayout({angle:O,startAngle:E,endAngle:D,clockwise:A,cx:h,cy:u,r0:F,r:N})}if(k.children&&k.children.length){var tt=0;z(k.children,function(K){tt+=R(K,E+tt)})}return D-E}};if(C){var L=d,B=d+S,P=Math.PI*2;p.setLayout({angle:P,startAngle:f,endAngle:f+P,clockwise:A,cx:h,cy:u,r0:L,r:B})}R(v,f)})}function pit(n,t){var e=n.children||[];n.children=G2t(e,t),e.length&&z(n.children,function(i){pit(i,t)})}function G2t(n,t){if(Dt(t)){var e=ct(n,function(r,o){var a=r.getValue();return{params:{depth:r.depth,height:r.height,dataIndex:r.dataIndex,getValue:function(){return a}},index:o}});return e.sort(function(r,o){return t(r.params,o.params)}),ct(e,function(r){return n[r.index]})}else{var i=t==="asc";return n.sort(function(r,o){var a=(r.getValue()-o.getValue())*(i?1:-1);return a===0?(r.dataIndex-o.dataIndex)*(i?-1:1):a})}}function $2t(n){var t={};function e(i,r,o){for(var a=i;a&&a.depth>1;)a=a.parentNode;var s=r.getColorFromPalette(a.name||a.dataIndex+"",t);return i.depth>1&&Ct(s)&&(s=cE(s,(i.depth-1)/(o-1)*.5)),s}n.eachSeriesByType("sunburst",function(i){var r=i.getData(),o=r.tree;o.eachNode(function(a){var s=a.getModel(),l=s.getModel("itemStyle").getItemStyle();l.fill||(l.fill=e(a,i,o.root.height));var h=r.ensureUniqueItemVisual(a.dataIndex,"style");ht(h,l)})})}function j2t(n){n.registerChartView(N2t),n.registerSeriesModel(W2t),n.registerLayout(qt(V2t,"sunburst")),n.registerProcessor(qt(b_,"sunburst")),n.registerVisual($2t),F2t(n)}var QG={color:"fill",borderColor:"stroke"},U2t={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},xh=Te(),Y2t=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},t.prototype.getInitialData=function(e,i){return qh(null,this)},t.prototype.getDataParams=function(e,i,r){var o=n.prototype.getDataParams.call(this,e,i);return r&&(o.info=xh(r).info),o},t.type="series.custom",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},t})(Ci);function X2t(n,t){return t=t||[0,0],ct(["x","y"],function(e,i){var r=this.getAxis(e),o=t[i],a=n[i]/2;return r.type==="category"?r.getBandWidth():Math.abs(r.dataToCoord(o-a)-r.dataToCoord(o+a))},this)}function q2t(n){var t=n.master.getRect();return{coordSys:{type:"cartesian2d",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(e){return n.dataToPoint(e)},size:xt(X2t,n)}}}function K2t(n,t){return t=t||[0,0],ct([0,1],function(e){var i=t[e],r=n[e]/2,o=[],a=[];return o[e]=i-r,a[e]=i+r,o[1-e]=a[1-e]=t[1-e],Math.abs(this.dataToPoint(o)[e]-this.dataToPoint(a)[e])},this)}function Z2t(n){var t=n.getBoundingRect();return{coordSys:{type:"geo",x:t.x,y:t.y,width:t.width,height:t.height,zoom:n.getZoom()},api:{coord:function(e){return n.dataToPoint(e)},size:xt(K2t,n)}}}function J2t(n,t){var e=this.getAxis(),i=t instanceof Array?t[0]:t,r=(n instanceof Array?n[0]:n)/2;return e.type==="category"?e.getBandWidth():Math.abs(e.dataToCoord(i-r)-e.dataToCoord(i+r))}function Q2t(n){var t=n.getRect();return{coordSys:{type:"singleAxis",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(e){return n.dataToPoint(e)},size:xt(J2t,n)}}}function tRt(n,t){return t=t||[0,0],ct(["Radius","Angle"],function(e,i){var r="get"+e+"Axis",o=this[r](),a=t[i],s=n[i]/2,l=o.type==="category"?o.getBandWidth():Math.abs(o.dataToCoord(a-s)-o.dataToCoord(a+s));return e==="Angle"&&(l=l*Math.PI/180),l},this)}function eRt(n){var t=n.getRadiusAxis(),e=n.getAngleAxis(),i=t.getExtent();return i[0]>i[1]&&i.reverse(),{coordSys:{type:"polar",cx:n.cx,cy:n.cy,r:i[1],r0:i[0]},api:{coord:function(r){var o=t.dataToRadius(r[0]),a=e.dataToAngle(r[1]),s=n.coordToPoint([o,a]);return s.push(o,a*Math.PI/180),s},size:xt(tRt,n)}}}function iRt(n){var t=n.getRect(),e=n.getRangeInfo();return{coordSys:{type:"calendar",x:t.x,y:t.y,width:t.width,height:t.height,cellWidth:n.getCellWidth(),cellHeight:n.getCellHeight(),rangeInfo:{start:e.start,end:e.end,weeks:e.weeks,dayCount:e.allDay}},api:{coord:function(i,r){return n.dataToPoint(i,r)}}}}var Sh="emphasis",Ou="normal",gF="blur",pF="select",rd=[Ou,Sh,gF,pF],mB={normal:["itemStyle"],emphasis:[Sh,"itemStyle"],blur:[gF,"itemStyle"],select:[pF,"itemStyle"]},yB={normal:["label"],emphasis:[Sh,"label"],blur:[gF,"label"],select:[pF,"label"]},nRt=["x","y"],rRt="e\0\0",la={normal:{},emphasis:{},blur:{},select:{}},oRt={cartesian2d:q2t,geo:Z2t,single:Q2t,polar:eRt,calendar:iRt};function ID(n){return n instanceof ue}function OD(n){return n instanceof Ua}function aRt(n,t){t.copyTransform(n),OD(t)&&OD(n)&&(t.setStyle(n.style),t.z=n.z,t.z2=n.z2,t.zlevel=n.zlevel,t.invisible=n.invisible,t.ignore=n.ignore,ID(t)&&ID(n)&&t.setShape(n.shape))}var sRt=(function(n){et(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,i,r,o){this._progressiveEls=null;var a=this._data,s=e.getData(),l=this.group,h=t8(e,s,i,r);a||l.removeAll(),s.diff(a).add(function(d){bB(r,null,d,h(d,o),e,l,s)}).remove(function(d){var c=a.getItemGraphicEl(d);c&&fM(c,xh(c).option,e)}).update(function(d,c){var f=a.getItemGraphicEl(c);bB(r,f,d,h(d,o),e,l,s)}).execute();var u=e.get("clip",!0)?m_(e.coordinateSystem,!1,e):null;u?l.setClipPath(u):l.removeClipPath(),this._data=s},t.prototype.incrementalPrepareRender=function(e,i,r){this.group.removeAll(),this._data=null},t.prototype.incrementalRender=function(e,i,r,o,a){var s=i.getData(),l=t8(i,s,r,o),h=this._progressiveEls=[];function u(f){f.isGroup||(f.incremental=!0,f.ensureState("emphasis").hoverLayer=!0)}for(var d=e.start;d<e.end;d++){var c=bB(null,null,d,l(d,a),i,this.group,s);c&&(c.traverse(u),h.push(c))}},t.prototype.eachRendered=function(e){md(this._progressiveEls||this.group,e)},t.prototype.filterForExposedEvent=function(e,i,r,o){var a=i.element;if(a==null||r.name===a)return!0;for(;(r=r.__hostTarget||r.parent)&&r!==this.group;)if(r.name===a)return!0;return!1},t.type="custom",t})(hi);function vF(n){var t=n.type,e;if(t==="path"){var i=n.shape,r=i.width!=null&&i.height!=null?{x:i.x||0,y:i.y||0,width:i.width,height:i.height}:null,o=yit(i);e=UT(o,null,r,i.layout||"center"),xh(e).customPathData=o}else if(t==="image")e=new hr({}),xh(e).customImagePath=n.style.image;else if(t==="text")e=new Re({});else if(t==="group")e=new Ft;else{if(t==="compoundPath")throw new Error('"compoundPath" is not supported yet.');var a=UH(t);if(!a){var s="";Ve(s)}e=new a}return xh(e).customGraphicType=t,e.name=n.name,e.z2EmphasisLift=1,e.z2SelectLift=1,e}function mF(n,t,e,i,r,o,a){Ftt(t);var s=r&&r.normal.cfg;s&&t.setTextConfig(s),i&&i.transition==null&&(i.transition=nRt);var l=i&&i.style;if(l){if(t.type==="text"){var h=l;At(h,"textFill")&&(h.fill=h.textFill),At(h,"textStroke")&&(h.stroke=h.textStroke)}var u=void 0,d=ID(t)?l.decal:null;n&&d&&(d.dirty=!0,u=Up(d,n)),l.__decalPattern=u}if(OD(t)&&l){var u=l.__decalPattern;u&&(l.decal=u)}Sw(t,i,o,{dataIndex:e,isInit:a,clearStyle:!0}),kx(t,i.keyframeAnimation,o)}function vit(n,t,e,i,r){var o=t.isGroup?null:t,a=r&&r[n].cfg;if(o){var s=o.ensureState(n);if(i===!1){var l=o.getState(n);l&&(l.style=null)}else s.style=i||null;a&&(s.textConfig=a),Tf(o)}}function lRt(n,t,e){if(!n.isGroup){var i=n,r=e.currentZ,o=e.currentZLevel;i.z=r,i.zlevel=o;var a=t.z2;a!=null&&(i.z2=a||0);for(var s=0;s<rd.length;s++)hRt(i,t,rd[s])}}function hRt(n,t,e){var i=e===Ou,r=i?t:Wx(t,e),o=r?r.z2:null,a;o!=null&&(a=i?n:n.ensureState(e),a.z2=o||0)}function t8(n,t,e,i){var r=n.get("renderItem"),o=n.coordinateSystem,a={};o&&(a=o.prepareCustoms?o.prepareCustoms(o):oRt[o.type](o));for(var s=Ot({getWidth:i.getWidth,getHeight:i.getHeight,getZr:i.getZr,getDevicePixelRatio:i.getDevicePixelRatio,value:_,style:C,ordinalRawValue:w,styleEmphasis:x,visual:T,barLayout:M,currentSeriesIndices:R,font:L},a.api||{}),l={context:{},seriesId:n.id,seriesName:n.name,seriesIndex:n.seriesIndex,coordSys:a.coordSys,dataInsideLength:t.count(),encode:uRt(n.getData())},h,u,d={},c={},f={},g={},p=0;p<rd.length;p++){var v=rd[p];f[v]=n.getModel(mB[v]),g[v]=n.getModel(yB[v])}function m(B){return B===h?u||(u=t.getItemModel(B)):t.getItemModel(B)}function y(B,P){return t.hasItemOption?B===h?d[P]||(d[P]=m(B).getModel(mB[P])):m(B).getModel(mB[P]):f[P]}function b(B,P){return t.hasItemOption?B===h?c[P]||(c[P]=m(B).getModel(yB[P])):m(B).getModel(yB[P]):g[P]}return function(B,P){return h=B,u=null,d={},c={},r&&r(Ot({dataIndexInside:B,dataIndex:t.getRawIndex(B),actionType:P?P.type:null},l),s)};function _(B,P){return P==null&&(P=h),t.getStore().get(t.getDimensionIndex(B||0),P)}function w(B,P){P==null&&(P=h),B=B||0;var k=t.getDimensionInfo(B);if(!k){var E=t.getDimensionIndex(B);return E>=0?t.getStore().get(E,P):void 0}var D=t.get(k.name,P),I=k&&k.ordinalMeta;return I?I.categories[D]:D}function C(B,P){P==null&&(P=h);var k=t.getItemVisual(P,"style"),E=k&&k.fill,D=k&&k.opacity,I=y(P,Ou).getItemStyle();E!=null&&(I.fill=E),D!=null&&(I.opacity=D);var O={inheritColor:Ct(E)?E:"#000"},H=b(P,Ou),F=_i(H,null,O,!1,!0);F.text=H.getShallow("show")?Yt(n.getFormattedLabel(P,Ou),Jp(t,P)):null;var N=cx(H,O,!1);return A(B,I),I=TV(I,F,N),B&&S(I,B),I.legacy=!0,I}function x(B,P){P==null&&(P=h);var k=y(P,Sh).getItemStyle(),E=b(P,Sh),D=_i(E,null,null,!0,!0);D.text=E.getShallow("show")?pl(n.getFormattedLabel(P,Sh),n.getFormattedLabel(P,Ou),Jp(t,P)):null;var I=cx(E,null,!0);return A(B,k),k=TV(k,D,I),B&&S(k,B),k.legacy=!0,k}function S(B,P){for(var k in P)At(P,k)&&(B[k]=P[k])}function A(B,P){B&&(B.textFill&&(P.textFill=B.textFill),B.textPosition&&(P.textPosition=B.textPosition))}function T(B,P){if(P==null&&(P=h),At(QG,B)){var k=t.getItemVisual(P,"style");return k?k[QG[B]]:null}if(At(U2t,B))return t.getItemVisual(P,B)}function M(B){if(o.type==="cartesian2d"){var P=o.getBaseAxis();return r0t(Ot({axis:P},B))}}function R(){return e.getCurrentSeriesIndices()}function L(B){return YH(B,e)}}function uRt(n){var t={};return z(n.dimensions,function(e){var i=n.getDimensionInfo(e);if(!i.isExtraCoord){var r=i.coordDim,o=t[r]=t[r]||[];o[i.coordDimIndex]=n.getDimensionIndex(e)}}),t}function bB(n,t,e,i,r,o,a){if(!i){o.remove(t);return}var s=yF(n,t,e,i,r,o);return s&&a.setItemGraphicEl(e,s),s&&Gi(s,i.focus,i.blurScope,i.emphasisDisabled),s}function yF(n,t,e,i,r,o){var a=-1,s=t;t&&mit(t,i,r)&&(a=ee(o.childrenRef(),t),t=null);var l=!t,h=t;h?h.clearStates():(h=vF(i),s&&aRt(s,h)),i.morph===!1?h.disableMorphing=!0:h.disableMorphing&&(h.disableMorphing=!1),la.normal.cfg=la.normal.conOpt=la.emphasis.cfg=la.emphasis.conOpt=la.blur.cfg=la.blur.conOpt=la.select.cfg=la.select.conOpt=null,la.isLegacy=!1,cRt(h,e,i,r,l,la),dRt(h,e,i,r,l),mF(n,h,e,i,la,r,l),At(i,"info")&&(xh(h).info=i.info);for(var u=0;u<rd.length;u++){var d=rd[u];if(d!==Ou){var c=Wx(i,d),f=bF(i,c,d);vit(d,h,c,f,la)}}return lRt(h,i,r),i.type==="group"&&fRt(n,h,e,i,r),a>=0?o.replaceAt(h,a):o.add(h),h}function mit(n,t,e){var i=xh(n),r=t.type,o=t.shape,a=t.style;return e.isUniversalTransitionEnabled()||r!=null&&r!==i.customGraphicType||r==="path"&&mRt(o)&&yit(o)!==i.customPathData||r==="image"&&At(a,"image")&&a.image!==i.customImagePath}function dRt(n,t,e,i,r){var o=e.clipPath;if(o===!1)n&&n.getClipPath()&&n.removeClipPath();else if(o){var a=n.getClipPath();a&&mit(a,o,i)&&(a=null),a||(a=vF(o),n.setClipPath(a)),mF(null,a,t,o,null,i,r)}}function cRt(n,t,e,i,r,o){if(!n.isGroup){e8(e,null,o),e8(e,Sh,o);var a=o.normal.conOpt,s=o.emphasis.conOpt,l=o.blur.conOpt,h=o.select.conOpt;if(a!=null||s!=null||h!=null||l!=null){var u=n.getTextContent();if(a===!1)u&&n.removeTextContent();else{a=o.normal.conOpt=a||{type:"text"},u?u.clearStates():(u=vF(a),n.setTextContent(u)),mF(null,u,t,a,null,i,r);for(var d=a&&a.style,c=0;c<rd.length;c++){var f=rd[c];if(f!==Ou){var g=o[f].conOpt;vit(f,u,g,bF(a,g,f),null)}}d?u.dirty():u.markRedraw()}}}}function e8(n,t,e){var i=t?Wx(n,t):n,r=t?bF(n,i,Sh):n.style,o=n.type,a=i?i.textConfig:null,s=n.textContent,l=s?t?Wx(s,t):s:null;if(r&&(e.isLegacy||Dtt(r,o,!!a,!!l))){e.isLegacy=!0;var h=Itt(r,o,!t);!a&&h.textConfig&&(a=h.textConfig),!l&&h.textContent&&(l=h.textContent)}if(!t&&l){var u=l;!u.type&&(u.type="text")}var d=t?e[t]:e.normal;d.cfg=a,d.conOpt=l}function Wx(n,t){return t?n?n[t]:null:n}function bF(n,t,e){var i=t&&t.style;return i==null&&e===Sh&&n&&(i=n.styleEmphasis),i}function fRt(n,t,e,i,r){var o=i.children,a=o?o.length:0,s=i.$mergeChildren,l=s==="byName"||i.diffChildrenByName,h=s===!1;if(!(!a&&!l&&!h)){if(l){pRt({api:n,oldChildren:t.children()||[],newChildren:o||[],dataIndex:e,seriesModel:r,group:t});return}h&&t.removeAll();for(var u=0;u<a;u++){var d=o[u],c=t.childAt(u);d?(d.ignore==null&&(d.ignore=!1),yF(n,c,e,d,r,t)):c.ignore=!0}for(var f=t.childCount()-1;f>=u;f--){var g=t.childAt(f);gRt(t,g,r)}}}function gRt(n,t,e){t&&fM(t,xh(n).option,e)}function pRt(n){new Dh(n.oldChildren,n.newChildren,i8,i8,n).add(n8).update(n8).remove(vRt).execute()}function i8(n,t){var e=n&&n.name;return e??rRt+t}function n8(n,t){var e=this.context,i=n!=null?e.newChildren[n]:null,r=t!=null?e.oldChildren[t]:null;yF(e.api,r,e.dataIndex,i,e.seriesModel,e.group)}function vRt(n){var t=this.context,e=t.oldChildren[n];e&&fM(e,xh(e).option,t.seriesModel)}function yit(n){return n&&(n.pathData||n.d)}function mRt(n){return n&&(At(n,"pathData")||At(n,"d"))}function yRt(n){n.registerChartView(sRt),n.registerSeriesModel(Y2t)}var _B=Math.sin,CB=Math.cos,bit=Math.PI,qd=Math.PI*2,bRt=180/bit,_it=(function(){function n(){}return n.prototype.reset=function(t){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,t||4)},n.prototype.moveTo=function(t,e){this._add("M",t,e)},n.prototype.lineTo=function(t,e){this._add("L",t,e)},n.prototype.bezierCurveTo=function(t,e,i,r,o,a){this._add("C",t,e,i,r,o,a)},n.prototype.quadraticCurveTo=function(t,e,i,r){this._add("Q",t,e,i,r)},n.prototype.arc=function(t,e,i,r,o,a){this.ellipse(t,e,i,i,0,r,o,a)},n.prototype.ellipse=function(t,e,i,r,o,a,s,l){var h=s-a,u=!l,d=Math.abs(h),c=Eu(d-qd)||(u?h>=qd:-h>=qd),f=h>0?h%qd:h%qd+qd,g=!1;c?g=!0:Eu(d)?g=!1:g=f>=bit==!!u;var p=t+i*CB(a),v=e+r*_B(a);this._start&&this._add("M",p,v);var m=Math.round(o*bRt);if(c){var y=1/this._p,b=(u?1:-1)*(qd-y);this._add("A",i,r,m,1,+u,t+i*CB(a+b),e+r*_B(a+b)),y>.01&&this._add("A",i,r,m,0,+u,p,v)}else{var _=t+i*CB(s),w=e+r*_B(s);this._add("A",i,r,m,+g,+u,_,w)}},n.prototype.rect=function(t,e,i,r){this._add("M",t,e),this._add("l",i,0),this._add("l",0,r),this._add("l",-i,0),this._add("Z")},n.prototype.closePath=function(){this._d.length>0&&this._add("Z")},n.prototype._add=function(t,e,i,r,o,a,s,l,h){for(var u=[],d=this._p,c=1;c<arguments.length;c++){var f=arguments[c];if(isNaN(f)){this._invalid=!0;return}u.push(Math.round(f*d)/d)}this._d.push(t+u.join(" ")),this._start=t==="Z"},n.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},n.prototype.getStr=function(){return this._str},n})(),_F="none",_Rt=Math.round;function CRt(n){var t=n.fill;return t!=null&&t!==_F}function wRt(n){var t=n.stroke;return t!=null&&t!==_F}var HD=["lineCap","miterLimit","lineJoin"],xRt=ct(HD,function(n){return"stroke-"+n.toLowerCase()});function SRt(n,t,e,i){var r=t.opacity==null?1:t.opacity;if(e instanceof hr){n("opacity",r);return}if(CRt(t)){var o=Dy(t.fill);n("fill",o.color);var a=t.fillOpacity!=null?t.fillOpacity*o.opacity*r:o.opacity*r;a<1&&n("fill-opacity",a)}else n("fill",_F);if(wRt(t)){var s=Dy(t.stroke);n("stroke",s.color);var l=t.strokeNoScale?e.getLineScale():1,h=l?(t.lineWidth||0)/l:0,u=t.strokeOpacity!=null?t.strokeOpacity*s.opacity*r:s.opacity*r,d=t.strokeFirst;if(h!==1&&n("stroke-width",h),d&&n("paint-order",d?"stroke":"fill"),u<1&&n("stroke-opacity",u),t.lineDash){var c=uz(e),f=c[0],g=c[1];f&&(g=_Rt(g||0),n("stroke-dasharray",f.join(",")),(g||i)&&n("stroke-dashoffset",g))}for(var p=0;p<HD.length;p++){var v=HD[p];if(t[v]!==sx[v]){var m=t[v]||sx[v];m&&n(xRt[p],m)}}}}var Cit="http://www.w3.org/2000/svg",wit="http://www.w3.org/1999/xlink",ARt="http://www.w3.org/2000/xmlns/",TRt="http://www.w3.org/XML/1998/namespace",r8="ecmeta_";function xit(n){return document.createElementNS(Cit,n)}function Yn(n,t,e,i,r){return{tag:n,attrs:e||{},children:i,text:r,key:t}}function MRt(n,t){var e=[];if(t)for(var i in t){var r=t[i],o=i;r!==!1&&(r!==!0&&r!=null&&(o+='="'+r+'"'),e.push(o))}return"<"+n+" "+e.join(" ")+">"}function RRt(n){return"</"+n+">"}function CF(n,t){t=t||{};var e=t.newline?`
`:"";function i(r){var o=r.children,a=r.tag,s=r.attrs,l=r.text;return MRt(a,s)+(a!=="style"?Qr(l):l||"")+(o?""+e+ct(o,function(h){return i(h)}).join(e)+e:"")+RRt(a)}return i(n)}function PRt(n,t,e){e=e||{};var i=e.newline?`
`:"",r=" {"+i,o=i+"}",a=ct(pe(n),function(l){return l+r+ct(pe(n[l]),function(h){return h+":"+n[l][h]+";"}).join(i)+o}).join(i),s=ct(pe(t),function(l){return"@keyframes "+l+r+ct(pe(t[l]),function(h){return h+r+ct(pe(t[l][h]),function(u){var d=t[l][h][u];return u==="d"&&(d='path("'+d+'")'),u+":"+d+";"}).join(i)+o}).join(i)+o}).join(i);return!a&&!s?"":["<![CDATA[",a,s,"]]>"].join(i)}function zD(n){return{zrId:n,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssStyleCache:{},cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function o8(n,t,e,i){return Yn("svg","root",{width:n,height:t,xmlns:Cit,"xmlns:xlink":wit,version:"1.1",baseProfile:"full",viewBox:i?"0 0 "+n+" "+t:!1},e)}var BRt=0;function Sit(){return BRt++}var a8={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},sc="transform-origin";function kRt(n,t,e){var i=ht({},n.shape);ht(i,t),n.buildPath(e,i);var r=new _it;return r.reset(MK(n)),e.rebuildPath(r,1),r.generateStr(),r.getStr()}function LRt(n,t){var e=t.originX,i=t.originY;(e||i)&&(n[sc]=e+"px "+i+"px")}var ERt={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function Ait(n,t){var e=t.zrId+"-ani-"+t.cssAnimIdx++;return t.cssAnims[e]=n,e}function DRt(n,t,e){var i=n.shape.paths,r={},o,a;if(z(i,function(l){var h=zD(e.zrId);h.animation=!0,mM(l,{},h,!0);var u=h.cssAnims,d=h.cssNodes,c=pe(u),f=c.length;if(f){a=c[f-1];var g=u[a];for(var p in g){var v=g[p];r[p]=r[p]||{d:""},r[p].d+=v.d||""}for(var m in d){var y=d[m].animation;y.indexOf(a)>=0&&(o=y)}}}),!!o){t.d=!1;var s=Ait(r,e);return o.replace(a,s)}}function s8(n){return Ct(n)?a8[n]?"cubic-bezier("+a8[n]+")":PH(n)?n:"":""}function mM(n,t,e,i){var r=n.animators,o=r.length,a=[];if(n instanceof $H){var s=DRt(n,t,e);if(s)a.push(s);else if(!o)return}else if(!o)return;for(var l={},h=0;h<o;h++){var u=r[h],d=[u.getMaxTime()/1e3+"s"],c=s8(u.getClip().easing),f=u.getDelay();c?d.push(c):d.push("linear"),f&&d.push(f/1e3+"s"),u.getLoop()&&d.push("infinite");var g=d.join(" ");l[g]=l[g]||[g,[]],l[g][1].push(u)}function p(y){var b=y[1],_=b.length,w={},C={},x={},S="animation-timing-function";function A(tt,K,rt){for(var q=tt.getTracks(),it=tt.getMaxTime(),nt=0;nt<q.length;nt++){var W=q[nt];if(W.needsAnimate()){var G=W.keyframes,j=W.propName;if(rt&&(j=rt(j)),j)for(var U=0;U<G.length;U++){var J=G[U],ot=Math.round(J.time/it*100)+"%",st=s8(J.easing),lt=J.rawValue;(Ct(lt)||Le(lt))&&(K[ot]=K[ot]||{},K[ot][j]=J.rawValue,st&&(K[ot][S]=st))}}}}for(var T=0;T<_;T++){var M=b[T],R=M.targetName;R?R==="shape"&&A(M,C):!i&&A(M,w)}for(var L in w){var B={};LK(B,n),ht(B,w[L]);var P=RK(B),k=w[L][S];x[L]=P?{transform:P}:{},LRt(x[L],B),k&&(x[L][S]=k)}var E,D=!0;for(var L in C){x[L]=x[L]||{};var I=!E,k=C[L][S];I&&(E=new Tl);var O=E.len();E.reset(),x[L].d=kRt(n,C[L],E);var H=E.len();if(!I&&O!==H){D=!1;break}k&&(x[L][S]=k)}if(!D)for(var L in x)delete x[L].d;if(!i)for(var T=0;T<_;T++){var M=b[T],R=M.targetName;R==="style"&&A(M,x,function(q){return ERt[q]})}for(var F=pe(x),N=!0,$,T=1;T<F.length;T++){var V=F[T-1],X=F[T];if(x[V][sc]!==x[X][sc]){N=!1;break}$=x[V][sc]}if(N&&$){for(var L in x)x[L][sc]&&delete x[L][sc];t[sc]=$}if(Ge(F,function(tt){return pe(x[tt]).length>0}).length){var Z=Ait(x,e);return Z+" "+y[0]+" both"}}for(var v in l){var s=p(l[v]);s&&a.push(s)}if(a.length){var m=e.zrId+"-cls-"+Sit();e.cssNodes["."+m]={animation:a.join(",")},t.class=m}}function IRt(n,t,e){if(!n.ignore)if(n.isSilent()){var i={"pointer-events":"none"};l8(i,t,e)}else{var r=n.states.emphasis&&n.states.emphasis.style?n.states.emphasis.style:{},o=r.fill;if(!o){var a=n.style&&n.style.fill,s=n.states.select&&n.states.select.style&&n.states.select.style.fill,l=n.currentStates.indexOf("select")>=0&&s||a;l&&(o=fE(l))}var h=r.lineWidth;if(h){var u=!r.strokeNoScale&&n.transform?n.transform[0]:1;h=h/u}var i={cursor:"pointer"};o&&(i.fill=o),r.stroke&&(i.stroke=r.stroke),h&&(i["stroke-width"]=h),l8(i,t,e)}}function l8(n,t,e,i){var r=JSON.stringify(n),o=e.cssStyleCache[r];o||(o=e.zrId+"-cls-"+Sit(),e.cssStyleCache[r]=o,e.cssNodes["."+o+":hover"]=n),t.class=t.class?t.class+" "+o:o}var nb=Math.round;function Tit(n){return n&&Ct(n.src)}function Mit(n){return n&&Dt(n.toDataURL)}function wF(n,t,e,i){SRt(function(r,o){var a=r==="fill"||r==="stroke";a&&TK(o)?Pit(t,n,r,i):a&&BH(o)?Bit(e,n,r,i):n[r]=o,a&&i.ssr&&o==="none"&&(n["pointer-events"]="visible")},t,e,!1),VRt(e,n,i)}function xF(n,t){var e=vct(t);e&&(e.each(function(i,r){i!=null&&(n[(r8+r).toLowerCase()]=i+"")}),t.isSilent()&&(n[r8+"silent"]="true"))}function h8(n){return Eu(n[0]-1)&&Eu(n[1])&&Eu(n[2])&&Eu(n[3]-1)}function ORt(n){return Eu(n[4])&&Eu(n[5])}function SF(n,t,e){if(t&&!(ORt(t)&&h8(t))){var i=1e4;n.transform=h8(t)?"translate("+nb(t[4]*i)/i+" "+nb(t[5]*i)/i+")":Fdt(t)}}function u8(n,t,e){for(var i=n.points,r=[],o=0;o<i.length;o++)r.push(nb(i[o][0]*e)/e),r.push(nb(i[o][1]*e)/e);t.points=r.join(" ")}function d8(n){return!n.smooth}function HRt(n){var t=ct(n,function(e){return typeof e=="string"?[e,e]:e});return function(e,i,r){for(var o=0;o<t.length;o++){var a=t[o],s=e[a[0]];s!=null&&(i[a[1]]=nb(s*r)/r)}}}var zRt={circle:[HRt(["cx","cy","r"])],polyline:[u8,d8],polygon:[u8,d8]};function FRt(n){for(var t=n.animators,e=0;e<t.length;e++)if(t[e].targetName==="shape")return!0;return!1}function Rit(n,t){var e=n.style,i=n.shape,r=zRt[n.type],o={},a=t.animation,s="path",l=n.style.strokePercent,h=t.compress&&MK(n)||4;if(r&&!t.willUpdate&&!(r[1]&&!r[1](i))&&!(a&&FRt(n))&&!(l<1)){s=n.type;var u=Math.pow(10,h);r[0](i,o,u)}else{var d=!n.path||n.shapeChanged();n.path||n.createPathProxy();var c=n.path;d&&(c.beginPath(),n.buildPath(c,n.shape),n.pathUpdated());var f=c.getVersion(),g=n,p=g.__svgPathBuilder;(g.__svgPathVersion!==f||!p||l!==g.__svgPathStrokePercent)&&(p||(p=g.__svgPathBuilder=new _it),p.reset(h),c.rebuildPath(p,l),p.generateStr(),g.__svgPathVersion=f,g.__svgPathStrokePercent=l),o.d=p.getStr()}return SF(o,n.transform),wF(o,e,n,t),xF(o,n),t.animation&&mM(n,o,t),t.emphasis&&IRt(n,o,t),Yn(s,n.id+"",o)}function NRt(n,t){var e=n.style,i=e.image;if(i&&!Ct(i)&&(Tit(i)?i=i.src:Mit(i)&&(i=i.toDataURL())),!!i){var r=e.x||0,o=e.y||0,a=e.width,s=e.height,l={href:i,width:a,height:s};return r&&(l.x=r),o&&(l.y=o),SF(l,n.transform),wF(l,e,n,t),xF(l,n),t.animation&&mM(n,l,t),Yn("image",n.id+"",l)}}function WRt(n,t){var e=n.style,i=e.text;if(i!=null&&(i+=""),!(!i||isNaN(e.x)||isNaN(e.y))){var r=e.font||Zu,o=e.x||0,a=Wdt(e.y||0,OT(r),e.textBaseline),s=Ndt[e.textAlign]||e.textAlign,l={"dominant-baseline":"central","text-anchor":s};if(rZ(e)){var h="",u=e.fontStyle,d=nZ(e.fontSize);if(!parseFloat(d))return;var c=e.fontFamily||nK,f=e.fontWeight;h+="font-size:"+d+";font-family:"+c+";",u&&u!=="normal"&&(h+="font-style:"+u+";"),f&&f!=="normal"&&(h+="font-weight:"+f+";"),l.style=h}else l.style="font: "+r;return i.match(/\s/)&&(l["xml:space"]="preserve"),o&&(l.x=o),a&&(l.y=a),SF(l,n.transform),wF(l,e,n,t),xF(l,n),t.animation&&mM(n,l,t),Yn("text",n.id+"",l,void 0,i)}}function c8(n,t){if(n instanceof ue)return Rit(n,t);if(n instanceof hr)return NRt(n,t);if(n instanceof Gp)return WRt(n,t)}function VRt(n,t,e){var i=n.style;if(Vdt(i)){var r=Gdt(n),o=e.shadowCache,a=o[r];if(!a){var s=n.getGlobalScale(),l=s[0],h=s[1];if(!l||!h)return;var u=i.shadowOffsetX||0,d=i.shadowOffsetY||0,c=i.shadowBlur,f=Dy(i.shadowColor),g=f.opacity,p=f.color,v=c/2/l,m=c/2/h,y=v+" "+m;a=e.zrId+"-s"+e.shadowIdx++,e.defs[a]=Yn("filter",a,{id:a,x:"-100%",y:"-100%",width:"300%",height:"300%"},[Yn("feDropShadow","",{dx:u/l,dy:d/h,stdDeviation:y,"flood-color":p,"flood-opacity":g})]),o[r]=a}t.filter=IT(a)}}function Pit(n,t,e,i){var r=n[e],o,a={gradientUnits:r.global?"userSpaceOnUse":"objectBoundingBox"};if(SK(r))o="linearGradient",a.x1=r.x,a.y1=r.y,a.x2=r.x2,a.y2=r.y2;else if(AK(r))o="radialGradient",a.cx=Yt(r.x,.5),a.cy=Yt(r.y,.5),a.r=Yt(r.r,.5);else return;for(var s=r.colorStops,l=[],h=0,u=s.length;h<u;++h){var d=gE(s[h].offset)*100+"%",c=s[h].color,f=Dy(c),g=f.color,p=f.opacity,v={offset:d};v["stop-color"]=g,p<1&&(v["stop-opacity"]=p),l.push(Yn("stop",h+"",v))}var m=Yn(o,"",a,l),y=CF(m),b=i.gradientCache,_=b[y];_||(_=i.zrId+"-g"+i.gradientIdx++,b[y]=_,a.id=_,i.defs[_]=Yn(o,_,a,l)),t[e]=IT(_)}function Bit(n,t,e,i){var r=n.style[e],o=n.getBoundingRect(),a={},s=r.repeat,l=s==="no-repeat",h=s==="repeat-x",u=s==="repeat-y",d;if(xK(r)){var c=r.imageWidth,f=r.imageHeight,g=void 0,p=r.image;if(Ct(p)?g=p:Tit(p)?g=p.src:Mit(p)&&(g=p.toDataURL()),typeof Image>"u"){var v="Image width/height must been given explictly in svg-ssr renderer.";so(c,v),so(f,v)}else if(c==null||f==null){var m=function(T,M){if(T){var R=T.elm,L=c||M.width,B=f||M.height;T.tag==="pattern"&&(h?(B=1,L/=o.width):u&&(L=1,B/=o.height)),T.attrs.width=L,T.attrs.height=B,R&&(R.setAttribute("width",L),R.setAttribute("height",B))}},y=OH(g,null,n,function(T){l||m(C,T),m(d,T)});y&&y.width&&y.height&&(c=c||y.width,f=f||y.height)}d=Yn("image","img",{href:g,width:c,height:f}),a.width=c,a.height=f}else r.svgElement&&(d=zt(r.svgElement),a.width=r.svgWidth,a.height=r.svgHeight);if(d){var b,_;l?b=_=1:h?(_=1,b=a.width/o.width):u?(b=1,_=a.height/o.height):a.patternUnits="userSpaceOnUse",b!=null&&!isNaN(b)&&(a.width=b),_!=null&&!isNaN(_)&&(a.height=_);var w=RK(r);w&&(a.patternTransform=w);var C=Yn("pattern","",a,[d]),x=CF(C),S=i.patternCache,A=S[x];A||(A=i.zrId+"-p"+i.patternIdx++,S[x]=A,a.id=A,C=i.defs[A]=Yn("pattern",A,a,[d])),t[e]=IT(A)}}function GRt(n,t,e){var i=e.clipPathCache,r=e.defs,o=i[n.id];if(!o){o=e.zrId+"-c"+e.clipPathIdx++;var a={id:o};i[n.id]=o,r[o]=Yn("clipPath",o,a,[Rit(n,e)])}t["clip-path"]=IT(o)}function f8(n){return document.createTextNode(n)}function Sc(n,t,e){n.insertBefore(t,e)}function g8(n,t){n.removeChild(t)}function p8(n,t){n.appendChild(t)}function kit(n){return n.parentNode}function Lit(n){return n.nextSibling}function wB(n,t){n.textContent=t}var v8=58,$Rt=120,jRt=Yn("","");function FD(n){return n===void 0}function Js(n){return n!==void 0}function URt(n,t,e){for(var i={},r=t;r<=e;++r){var o=n[r].key;o!==void 0&&(i[o]=r)}return i}function x0(n,t){var e=n.key===t.key,i=n.tag===t.tag;return i&&e}function rb(n){var t,e=n.children,i=n.tag;if(Js(i)){var r=n.elm=xit(i);if(AF(jRt,n),ut(e))for(t=0;t<e.length;++t){var o=e[t];o!=null&&p8(r,rb(o))}else Js(n.text)&&!Ht(n.text)&&p8(r,f8(n.text))}else n.elm=f8(n.text);return n.elm}function Eit(n,t,e,i,r){for(;i<=r;++i){var o=e[i];o!=null&&Sc(n,rb(o),t)}}function Vx(n,t,e,i){for(;e<=i;++e){var r=t[e];if(r!=null)if(Js(r.tag)){var o=kit(r.elm);g8(o,r.elm)}else g8(n,r.elm)}}function AF(n,t){var e,i=t.elm,r=n&&n.attrs||{},o=t.attrs||{};if(r!==o){for(e in o){var a=o[e],s=r[e];s!==a&&(a===!0?i.setAttribute(e,""):a===!1?i.removeAttribute(e):e==="style"?i.style.cssText=a:e.charCodeAt(0)!==$Rt?i.setAttribute(e,a):e==="xmlns:xlink"||e==="xmlns"?i.setAttributeNS(ARt,e,a):e.charCodeAt(3)===v8?i.setAttributeNS(TRt,e,a):e.charCodeAt(5)===v8?i.setAttributeNS(wit,e,a):i.setAttribute(e,a))}for(e in r)e in o||i.removeAttribute(e)}}function YRt(n,t,e){for(var i=0,r=0,o=t.length-1,a=t[0],s=t[o],l=e.length-1,h=e[0],u=e[l],d,c,f,g;i<=o&&r<=l;)a==null?a=t[++i]:s==null?s=t[--o]:h==null?h=e[++r]:u==null?u=e[--l]:x0(a,h)?(Jg(a,h),a=t[++i],h=e[++r]):x0(s,u)?(Jg(s,u),s=t[--o],u=e[--l]):x0(a,u)?(Jg(a,u),Sc(n,a.elm,Lit(s.elm)),a=t[++i],u=e[--l]):x0(s,h)?(Jg(s,h),Sc(n,s.elm,a.elm),s=t[--o],h=e[++r]):(FD(d)&&(d=URt(t,i,o)),c=d[h.key],FD(c)?Sc(n,rb(h),a.elm):(f=t[c],f.tag!==h.tag?Sc(n,rb(h),a.elm):(Jg(f,h),t[c]=void 0,Sc(n,f.elm,a.elm))),h=e[++r]);(i<=o||r<=l)&&(i>o?(g=e[l+1]==null?null:e[l+1].elm,Eit(n,g,e,r,l)):Vx(n,t,i,o))}function Jg(n,t){var e=t.elm=n.elm,i=n.children,r=t.children;n!==t&&(AF(n,t),FD(t.text)?Js(i)&&Js(r)?i!==r&&YRt(e,i,r):Js(r)?(Js(n.text)&&wB(e,""),Eit(e,null,r,0,r.length-1)):Js(i)?Vx(e,i,0,i.length-1):Js(n.text)&&wB(e,""):n.text!==t.text&&(Js(i)&&Vx(e,i,0,i.length-1),wB(e,t.text)))}function XRt(n,t){if(x0(n,t))Jg(n,t);else{var e=n.elm,i=kit(e);rb(t),i!==null&&(Sc(i,t.elm,Lit(e)),Vx(i,[n],0,0))}return t}var qRt=0,KRt=(function(){function n(t,e,i){if(this.type="svg",this.refreshHover=m8(),this.configLayer=m8(),this.storage=e,this._opts=i=ht({},i),this.root=t,this._id="zr"+qRt++,this._oldVNode=o8(i.width,i.height),t&&!i.ssr){var r=this._viewport=document.createElement("div");r.style.cssText="position:relative;overflow:hidden";var o=this._svgDom=this._oldVNode.elm=xit("svg");AF(null,this._oldVNode),r.appendChild(o),t.appendChild(r)}this.resize(i.width,i.height)}return n.prototype.getType=function(){return this.type},n.prototype.getViewportRoot=function(){return this._viewport},n.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},n.prototype.getSvgDom=function(){return this._svgDom},n.prototype.refresh=function(){if(this.root){var t=this.renderToVNode({willUpdate:!0});t.attrs.style="position:absolute;left:0;top:0;user-select:none",XRt(this._oldVNode,t),this._oldVNode=t}},n.prototype.renderOneToVNode=function(t){return c8(t,zD(this._id))},n.prototype.renderToVNode=function(t){t=t||{};var e=this.storage.getDisplayList(!0),i=this._width,r=this._height,o=zD(this._id);o.animation=t.animation,o.willUpdate=t.willUpdate,o.compress=t.compress,o.emphasis=t.emphasis,o.ssr=this._opts.ssr;var a=[],s=this._bgVNode=ZRt(i,r,this._backgroundColor,o);s&&a.push(s);var l=t.compress?null:this._mainVNode=Yn("g","main",{},[]);this._paintList(e,o,l?l.children:a),l&&a.push(l);var h=ct(pe(o.defs),function(c){return o.defs[c]});if(h.length&&a.push(Yn("defs","defs",{},h)),t.animation){var u=PRt(o.cssNodes,o.cssAnims,{newline:!0});if(u){var d=Yn("style","stl",{},[],u);a.push(d)}}return o8(i,r,a,t.useViewBox)},n.prototype.renderToString=function(t){return t=t||{},CF(this.renderToVNode({animation:Yt(t.cssAnimation,!0),emphasis:Yt(t.cssEmphasis,!0),willUpdate:!1,compress:!0,useViewBox:Yt(t.useViewBox,!0)}),{newline:!0})},n.prototype.setBackgroundColor=function(t){this._backgroundColor=t},n.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},n.prototype._paintList=function(t,e,i){for(var r=t.length,o=[],a=0,s,l,h=0,u=0;u<r;u++){var d=t[u];if(!d.invisible){var c=d.__clipPaths,f=c&&c.length||0,g=l&&l.length||0,p=void 0;for(p=Math.max(f-1,g-1);p>=0&&!(c&&l&&c[p]===l[p]);p--);for(var v=g-1;v>p;v--)a--,s=o[a-1];for(var m=p+1;m<f;m++){var y={};GRt(c[m],y,e);var b=Yn("g","clip-g-"+h++,y,[]);(s?s.children:i).push(b),o[a++]=b,s=b}l=c;var _=c8(d,e);_&&(s?s.children:i).push(_)}}},n.prototype.resize=function(t,e){var i=this._opts,r=this.root,o=this._viewport;if(t!=null&&(i.width=t),e!=null&&(i.height=e),r&&o&&(o.style.display="none",t=rp(r,0,i),e=rp(r,1,i),o.style.display=""),this._width!==t||this._height!==e){if(this._width=t,this._height=e,o){var a=o.style;a.width=t+"px",a.height=e+"px"}if(BH(this._backgroundColor))this.refresh();else{var s=this._svgDom;s&&(s.setAttribute("width",t),s.setAttribute("height",e));var l=this._bgVNode&&this._bgVNode.elm;l&&(l.setAttribute("width",t),l.setAttribute("height",e))}}},n.prototype.getWidth=function(){return this._width},n.prototype.getHeight=function(){return this._height},n.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},n.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},n.prototype.toDataURL=function(t){var e=this.renderToString(),i="data:image/svg+xml;";return t?(e=jdt(e),e&&i+"base64,"+e):i+"charset=UTF-8,"+encodeURIComponent(e)},n})();function m8(n){return function(){}}function ZRt(n,t,e,i){var r;if(e&&e!=="none")if(r=Yn("rect","bg",{width:n,height:t,x:"0",y:"0"}),TK(e))Pit({fill:e},r.attrs,"fill",i);else if(BH(e))Bit({style:{fill:e},dirty:dn,getBoundingRect:function(){return{width:n,height:t}}},r.attrs,"fill",i);else{var o=Dy(e),a=o.color,s=o.opacity;r.attrs.fill=a,s<1&&(r.attrs["fill-opacity"]=s)}return r}function JRt(n){n.registerPainter("svg",KRt)}function y8(n,t,e){var i=Ju.createCanvas(),r=t.getWidth(),o=t.getHeight(),a=i.style;return a&&(a.position="absolute",a.left="0",a.top="0",a.width=r+"px",a.height=o+"px",i.setAttribute("data-zr-dom-id",n)),i.width=r*e,i.height=o*e,i}var xB=(function(n){et(t,n);function t(e,i,r){var o=n.call(this)||this;o.motionBlur=!1,o.lastFrameAlpha=.7,o.dpr=1,o.virtual=!1,o.config={},o.incremental=!1,o.zlevel=0,o.maxRepaintRectCount=5,o.__dirty=!0,o.__firstTimePaint=!0,o.__used=!1,o.__drawIndex=0,o.__startIndex=0,o.__endIndex=0,o.__prevStartIndex=null,o.__prevEndIndex=null;var a;r=r||ox,typeof e=="string"?a=y8(e,i,r):Ht(e)&&(a=e,e=a.id),o.id=e,o.dom=a;var s=a.style;return s&&(hK(a),a.onselectstart=function(){return!1},s.padding="0",s.margin="0",s.borderWidth="0"),o.painter=i,o.dpr=r,o}return t.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},t.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},t.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},t.prototype.setUnpainted=function(){this.__firstTimePaint=!0},t.prototype.createBackBuffer=function(){var e=this.dpr;this.domBack=y8("back-"+this.id,this.painter,e),this.ctxBack=this.domBack.getContext("2d"),e!==1&&this.ctxBack.scale(e,e)},t.prototype.createRepaintRects=function(e,i,r,o){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var a=[],s=this.maxRepaintRectCount,l=!1,h=new te(0,0,0,0);function u(y){if(!(!y.isFinite()||y.isZero()))if(a.length===0){var b=new te(0,0,0,0);b.copy(y),a.push(b)}else{for(var _=!1,w=1/0,C=0,x=0;x<a.length;++x){var S=a[x];if(S.intersect(y)){var A=new te(0,0,0,0);A.copy(S),A.union(y),a[x]=A,_=!0;break}else if(l){h.copy(y),h.union(S);var T=y.width*y.height,M=S.width*S.height,R=h.width*h.height,L=R-T-M;L<w&&(w=L,C=x)}}if(l&&(a[C].union(y),_=!0),!_){var b=new te(0,0,0,0);b.copy(y),a.push(b)}l||(l=a.length>=s)}}for(var d=this.__startIndex;d<this.__endIndex;++d){var c=e[d];if(c){var f=c.shouldBePainted(r,o,!0,!0),g=c.__isRendered&&(c.__dirty&$o||!f)?c.getPrevPaintRect():null;g&&u(g);var p=f&&(c.__dirty&$o||!c.__isRendered)?c.getPaintRect():null;p&&u(p)}}for(var d=this.__prevStartIndex;d<this.__prevEndIndex;++d){var c=i[d],f=c&&c.shouldBePainted(r,o,!0,!0);if(c&&(!f||!c.__zr)&&c.__isRendered){var g=c.getPrevPaintRect();g&&u(g)}}var v;do{v=!1;for(var d=0;d<a.length;){if(a[d].isZero()){a.splice(d,1);continue}for(var m=d+1;m<a.length;)a[d].intersect(a[m])?(v=!0,a[d].union(a[m]),a.splice(m,1)):m++;d++}}while(v);return this._paintRects=a,a},t.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},t.prototype.resize=function(e,i){var r=this.dpr,o=this.dom,a=o.style,s=this.domBack;a&&(a.width=e+"px",a.height=i+"px"),o.width=e*r,o.height=i*r,s&&(s.width=e*r,s.height=i*r,r!==1&&this.ctxBack.scale(r,r))},t.prototype.clear=function(e,i,r){var o=this.dom,a=this.ctx,s=o.width,l=o.height;i=i||this.clearColor;var h=this.motionBlur&&!e,u=this.lastFrameAlpha,d=this.dpr,c=this;h&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(o,0,0,s/d,l/d));var f=this.domBack;function g(p,v,m,y){if(a.clearRect(p,v,m,y),i&&i!=="transparent"){var b=void 0;if(LT(i)){var _=i.global||i.__width===m&&i.__height===y;b=_&&i.__canvasGradient||UE(a,i,{x:0,y:0,width:m,height:y}),i.__canvasGradient=b,i.__width=m,i.__height=y}else Qut(i)&&(i.scaleX=i.scaleX||d,i.scaleY=i.scaleY||d,b=YE(a,i,{dirty:function(){c.setUnpainted(),c.painter.refresh()}}));a.save(),a.fillStyle=b||i,a.fillRect(p,v,m,y),a.restore()}h&&(a.save(),a.globalAlpha=u,a.drawImage(f,p,v,m,y),a.restore())}!r||h?g(0,0,s,l):r.length&&z(r,function(p){g(p.x*d,p.y*d,p.width*d,p.height*d)})},t})(Ya),b8=1e5,Kd=314159,t1=.01,QRt=.001;function tPt(n){return n?n.__builtin__?!0:!(typeof n.resize!="function"||typeof n.refresh!="function"):!1}function ePt(n,t){var e=document.createElement("div");return e.style.cssText=["position:relative","width:"+n+"px","height:"+t+"px","padding:0","margin:0","border-width:0"].join(";")+";",e}var iPt=(function(){function n(t,e,i,r){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var o=!t.nodeName||t.nodeName.toUpperCase()==="CANVAS";this._opts=i=ht({},i||{}),this.dpr=i.devicePixelRatio||ox,this._singleCanvas=o,this.root=t;var a=t.style;a&&(hK(t),t.innerHTML=""),this.storage=e;var s=this._zlevelList;this._prevDisplayList=[];var l=this._layers;if(o){var u=t,d=u.width,c=u.height;i.width!=null&&(d=i.width),i.height!=null&&(c=i.height),this.dpr=i.devicePixelRatio||1,u.width=d*this.dpr,u.height=c*this.dpr,this._width=d,this._height=c;var f=new xB(u,this,this.dpr);f.__builtin__=!0,f.initContext(),l[Kd]=f,f.zlevel=Kd,s.push(Kd),this._domRoot=t}else{this._width=rp(t,0,i),this._height=rp(t,1,i);var h=this._domRoot=ePt(this._width,this._height);t.appendChild(h)}}return n.prototype.getType=function(){return"canvas"},n.prototype.isSingleCanvas=function(){return this._singleCanvas},n.prototype.getViewportRoot=function(){return this._domRoot},n.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},n.prototype.refresh=function(t){var e=this.storage.getDisplayList(!0),i=this._prevDisplayList,r=this._zlevelList;this._redrawId=Math.random(),this._paintList(e,i,t,this._redrawId);for(var o=0;o<r.length;o++){var a=r[o],s=this._layers[a];if(!s.__builtin__&&s.refresh){var l=o===0?this._backgroundColor:null;s.refresh(l)}}return this._opts.useDirtyRect&&(this._prevDisplayList=e.slice()),this},n.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},n.prototype._paintHoverList=function(t){var e=t.length,i=this._hoverlayer;if(i&&i.clear(),!!e){for(var r={inHover:!0,viewWidth:this._width,viewHeight:this._height},o,a=0;a<e;a++){var s=t[a];s.__inHover&&(i||(i=this._hoverlayer=this.getLayer(b8)),o||(o=i.ctx,o.save()),Fc(o,s,r,a===e-1))}o&&o.restore()}},n.prototype.getHoverLayer=function(){return this.getLayer(b8)},n.prototype.paintOne=function(t,e){FJ(t,e)},n.prototype._paintList=function(t,e,i,r){if(this._redrawId===r){i=i||!1,this._updateLayerStatus(t);var o=this._doPaintList(t,e,i),a=o.finished,s=o.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),s&&this._paintHoverList(t),a)this.eachLayer(function(h){h.afterBrush&&h.afterBrush()});else{var l=this;Qw(function(){l._paintList(t,e,i,r)})}}},n.prototype._compositeManually=function(){var t=this.getLayer(Kd).ctx,e=this._domRoot.width,i=this._domRoot.height;t.clearRect(0,0,e,i),this.eachBuiltinLayer(function(r){r.virtual&&t.drawImage(r.dom,0,0,e,i)})},n.prototype._doPaintList=function(t,e,i){for(var r=this,o=[],a=this._opts.useDirtyRect,s=0;s<this._zlevelList.length;s++){var l=this._zlevelList[s],h=this._layers[l];h.__builtin__&&h!==this._hoverlayer&&(h.__dirty||i)&&o.push(h)}for(var u=!0,d=!1,c=function(p){var v=o[p],m=v.ctx,y=a&&v.createRepaintRects(t,e,f._width,f._height),b=i?v.__startIndex:v.__drawIndex,_=!i&&v.incremental&&Date.now,w=_&&Date.now(),C=v.zlevel===f._zlevelList[0]?f._backgroundColor:null;if(v.__startIndex===v.__endIndex)v.clear(!1,C,y);else if(b===v.__startIndex){var x=t[b];(!x.incremental||!x.notClear||i)&&v.clear(!1,C,y)}b===-1&&(b=v.__startIndex);var S,A=function(L){var B={inHover:!1,allClipped:!1,prevEl:null,viewWidth:r._width,viewHeight:r._height};for(S=b;S<v.__endIndex;S++){var P=t[S];if(P.__inHover&&(d=!0),r._doPaintEl(P,v,a,L,B,S===v.__endIndex-1),_){var k=Date.now()-w;if(k>15)break}}B.prevElClipPaths&&m.restore()};if(y)if(y.length===0)S=v.__endIndex;else for(var T=f.dpr,M=0;M<y.length;++M){var R=y[M];m.save(),m.beginPath(),m.rect(R.x*T,R.y*T,R.width*T,R.height*T),m.clip(),A(R),m.restore()}else m.save(),A(),m.restore();v.__drawIndex=S,v.__drawIndex<v.__endIndex&&(u=!1)},f=this,g=0;g<o.length;g++)c(g);return ce.wxa&&z(this._layers,function(p){p&&p.ctx&&p.ctx.draw&&p.ctx.draw()}),{finished:u,needsRefreshHover:d}},n.prototype._doPaintEl=function(t,e,i,r,o,a){var s=e.ctx;if(i){var l=t.getPaintRect();(!r||l&&l.intersect(r))&&(Fc(s,t,o,a),t.setPrevPaintRect(l))}else Fc(s,t,o,a)},n.prototype.getLayer=function(t,e){this._singleCanvas&&!this._needsManuallyCompositing&&(t=Kd);var i=this._layers[t];return i||(i=new xB("zr_"+t,this,this.dpr),i.zlevel=t,i.__builtin__=!0,this._layerConfig[t]?Zt(i,this._layerConfig[t],!0):this._layerConfig[t-t1]&&Zt(i,this._layerConfig[t-t1],!0),e&&(i.virtual=e),this.insertLayer(t,i),i.initContext()),i},n.prototype.insertLayer=function(t,e){var i=this._layers,r=this._zlevelList,o=r.length,a=this._domRoot,s=null,l=-1;if(!i[t]&&tPt(e)){if(o>0&&t>r[0]){for(l=0;l<o-1&&!(r[l]<t&&r[l+1]>t);l++);s=i[r[l]]}if(r.splice(l+1,0,t),i[t]=e,!e.virtual)if(s){var h=s.dom;h.nextSibling?a.insertBefore(e.dom,h.nextSibling):a.appendChild(e.dom)}else a.firstChild?a.insertBefore(e.dom,a.firstChild):a.appendChild(e.dom);e.painter||(e.painter=this)}},n.prototype.eachLayer=function(t,e){for(var i=this._zlevelList,r=0;r<i.length;r++){var o=i[r];t.call(e,this._layers[o],o)}},n.prototype.eachBuiltinLayer=function(t,e){for(var i=this._zlevelList,r=0;r<i.length;r++){var o=i[r],a=this._layers[o];a.__builtin__&&t.call(e,a,o)}},n.prototype.eachOtherLayer=function(t,e){for(var i=this._zlevelList,r=0;r<i.length;r++){var o=i[r],a=this._layers[o];a.__builtin__||t.call(e,a,o)}},n.prototype.getLayers=function(){return this._layers},n.prototype._updateLayerStatus=function(t){this.eachBuiltinLayer(function(d,c){d.__dirty=d.__used=!1});function e(d){o&&(o.__endIndex!==d&&(o.__dirty=!0),o.__endIndex=d)}if(this._singleCanvas)for(var i=1;i<t.length;i++){var r=t[i];if(r.zlevel!==t[i-1].zlevel||r.incremental){this._needsManuallyCompositing=!0;break}}var o=null,a=0,s,l;for(l=0;l<t.length;l++){var r=t[l],h=r.zlevel,u=void 0;s!==h&&(s=h,a=0),r.incremental?(u=this.getLayer(h+QRt,this._needsManuallyCompositing),u.incremental=!0,a=1):u=this.getLayer(h+(a>0?t1:0),this._needsManuallyCompositing),u.__builtin__||wH("ZLevel "+h+" has been used by unkown layer "+u.id),u!==o&&(u.__used=!0,u.__startIndex!==l&&(u.__dirty=!0),u.__startIndex=l,u.incremental?u.__drawIndex=-1:u.__drawIndex=l,e(l),o=u),r.__dirty&$o&&!r.__inHover&&(u.__dirty=!0,u.incremental&&u.__drawIndex<0&&(u.__drawIndex=l))}e(l),this.eachBuiltinLayer(function(d,c){!d.__used&&d.getElementCount()>0&&(d.__dirty=!0,d.__startIndex=d.__endIndex=d.__drawIndex=0),d.__dirty&&d.__drawIndex<0&&(d.__drawIndex=d.__startIndex)})},n.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},n.prototype._clearLayer=function(t){t.clear()},n.prototype.setBackgroundColor=function(t){this._backgroundColor=t,z(this._layers,function(e){e.setUnpainted()})},n.prototype.configLayer=function(t,e){if(e){var i=this._layerConfig;i[t]?Zt(i[t],e,!0):i[t]=e;for(var r=0;r<this._zlevelList.length;r++){var o=this._zlevelList[r];if(o===t||o===t+t1){var a=this._layers[o];Zt(a,i[t],!0)}}}},n.prototype.delLayer=function(t){var e=this._layers,i=this._zlevelList,r=e[t];r&&(r.dom.parentNode.removeChild(r.dom),delete e[t],i.splice(ee(i,t),1))},n.prototype.resize=function(t,e){if(this._domRoot.style){var i=this._domRoot;i.style.display="none";var r=this._opts,o=this.root;if(t!=null&&(r.width=t),e!=null&&(r.height=e),t=rp(o,0,r),e=rp(o,1,r),i.style.display="",this._width!==t||e!==this._height){i.style.width=t+"px",i.style.height=e+"px";for(var a in this._layers)this._layers.hasOwnProperty(a)&&this._layers[a].resize(t,e);this.refresh(!0)}this._width=t,this._height=e}else{if(t==null||e==null)return;this._width=t,this._height=e,this.getLayer(Kd).resize(t,e)}return this},n.prototype.clearLayer=function(t){var e=this._layers[t];e&&e.clear()},n.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},n.prototype.getRenderedCanvas=function(t){if(t=t||{},this._singleCanvas&&!this._compositeManually)return this._layers[Kd].dom;var e=new xB("image",this,t.pixelRatio||this.dpr);e.initContext(),e.clear(!1,t.backgroundColor||this._backgroundColor);var i=e.ctx;if(t.pixelRatio<=this.dpr){this.refresh();var r=e.dom.width,o=e.dom.height;this.eachLayer(function(d){d.__builtin__?i.drawImage(d.dom,0,0,r,o):d.renderToCanvas&&(i.save(),d.renderToCanvas(i),i.restore())})}else for(var a={inHover:!1,viewWidth:this._width,viewHeight:this._height},s=this.storage.getDisplayList(!0),l=0,h=s.length;l<h;l++){var u=s[l];Fc(i,u,a,l===h-1)}return e.dom},n.prototype.getWidth=function(){return this._width},n.prototype.getHeight=function(){return this._height},n})();function nPt(n){n.registerPainter("canvas",iPt)}var $s=Tl.CMD;function op(n,t){return Math.abs(n-t)<1e-5}function ND(n){var t=n.data,e=n.len(),i=[],r,o=0,a=0,s=0,l=0;function h(L,B){r&&r.length>2&&i.push(r),r=[L,B]}function u(L,B,P,k){op(L,P)&&op(B,k)||r.push(L,B,P,k,P,k)}function d(L,B,P,k,E,D){var I=Math.abs(B-L),O=Math.tan(I/4)*4/3,H=B<L?-1:1,F=Math.cos(L),N=Math.sin(L),$=Math.cos(B),V=Math.sin(B),X=F*E+P,Z=N*D+k,tt=$*E+P,K=V*D+k,rt=E*O*H,q=D*O*H;r.push(X-rt*N,Z+q*F,tt+rt*V,K-q*$,tt,K)}for(var c,f,g,p,v=0;v<e;){var m=t[v++],y=v===1;switch(y&&(o=t[v],a=t[v+1],s=o,l=a,(m===$s.L||m===$s.C||m===$s.Q)&&(r=[s,l])),m){case $s.M:o=s=t[v++],a=l=t[v++],h(s,l);break;case $s.L:c=t[v++],f=t[v++],u(o,a,c,f),o=c,a=f;break;case $s.C:r.push(t[v++],t[v++],t[v++],t[v++],o=t[v++],a=t[v++]);break;case $s.Q:c=t[v++],f=t[v++],g=t[v++],p=t[v++],r.push(o+2/3*(c-o),a+2/3*(f-a),g+2/3*(c-g),p+2/3*(f-p),g,p),o=g,a=p;break;case $s.A:var b=t[v++],_=t[v++],w=t[v++],C=t[v++],x=t[v++],S=t[v++]+x;v+=1;var A=!t[v++];c=Math.cos(x)*w+b,f=Math.sin(x)*C+_,y?(s=c,l=f,h(s,l)):u(o,a,c,f),o=Math.cos(S)*w+b,a=Math.sin(S)*C+_;for(var T=(A?-1:1)*Math.PI/2,M=x;A?M>S:M<S;M+=T){var R=A?Math.max(M+T,S):Math.min(M+T,S);d(M,R,b,_,w,C)}break;case $s.R:s=o=t[v++],l=a=t[v++],c=s+t[v++],f=l+t[v++],h(c,l),u(c,l,c,f),u(c,f,s,f),u(s,f,s,l),u(s,l,c,l);break;case $s.Z:r&&u(o,a,s,l),o=s,a=l;break}}return r&&r.length>2&&i.push(r),i}function WD(n,t,e,i,r,o,a,s,l,h){if(op(n,e)&&op(t,i)&&op(r,a)&&op(o,s)){l.push(a,s);return}var u=2/h,d=u*u,c=a-n,f=s-t,g=Math.sqrt(c*c+f*f);c/=g,f/=g;var p=e-n,v=i-t,m=r-a,y=o-s,b=p*p+v*v,_=m*m+y*y;if(b<d&&_<d){l.push(a,s);return}var w=c*p+f*v,C=-c*m-f*y,x=b-w*w,S=_-C*C;if(x<d&&w>=0&&S<d&&C>=0){l.push(a,s);return}var A=[],T=[];Qu(n,e,r,a,.5,A),Qu(t,i,o,s,.5,T),WD(A[0],T[0],A[1],T[1],A[2],T[2],A[3],T[3],l,h),WD(A[4],T[4],A[5],T[5],A[6],T[6],A[7],T[7],l,h)}function rPt(n,t){var e=ND(n),i=[];t=t||1;for(var r=0;r<e.length;r++){var o=e[r],a=[],s=o[0],l=o[1];a.push(s,l);for(var h=2;h<o.length;){var u=o[h++],d=o[h++],c=o[h++],f=o[h++],g=o[h++],p=o[h++];WD(s,l,u,d,c,f,g,p,a,t),s=g,l=p}i.push(a)}return i}function Dit(n,t,e){var i=n[t],r=n[1-t],o=Math.abs(i/r),a=Math.ceil(Math.sqrt(o*e)),s=Math.floor(e/a);s===0&&(s=1,a=e);for(var l=[],h=0;h<a;h++)l.push(s);var u=a*s,d=e-u;if(d>0)for(var h=0;h<d;h++)l[h%a]+=1;return l}function _8(n,t,e){for(var i=n.r0,r=n.r,o=n.startAngle,a=n.endAngle,s=Math.abs(a-o),l=s*r,h=r-i,u=l>Math.abs(h),d=Dit([l,h],u?0:1,t),c=(u?s:h)/d.length,f=0;f<d.length;f++)for(var g=(u?h:s)/d[f],p=0;p<d[f];p++){var v={};u?(v.startAngle=o+c*f,v.endAngle=o+c*(f+1),v.r0=i+g*p,v.r=i+g*(p+1)):(v.startAngle=o+g*p,v.endAngle=o+g*(p+1),v.r0=i+c*f,v.r=i+c*(f+1)),v.clockwise=n.clockwise,v.cx=n.cx,v.cy=n.cy,e.push(v)}}function oPt(n,t,e){for(var i=n.width,r=n.height,o=i>r,a=Dit([i,r],o?0:1,t),s=o?"width":"height",l=o?"height":"width",h=o?"x":"y",u=o?"y":"x",d=n[s]/a.length,c=0;c<a.length;c++)for(var f=n[l]/a[c],g=0;g<a[c];g++){var p={};p[h]=c*d,p[u]=g*f,p[s]=d,p[l]=f,p.x+=n.x,p.y+=n.y,e.push(p)}}function C8(n,t,e,i){return n*i-e*t}function aPt(n,t,e,i,r,o,a,s){var l=e-n,h=i-t,u=a-r,d=s-o,c=C8(u,d,l,h);if(Math.abs(c)<1e-6)return null;var f=n-r,g=t-o,p=C8(f,g,u,d)/c;return p<0||p>1?null:new Jt(p*l+n,p*h+t)}function sPt(n,t,e){var i=new Jt;Jt.sub(i,e,t),i.normalize();var r=new Jt;Jt.sub(r,n,t);var o=r.dot(i);return o}function Rg(n,t){var e=n[n.length-1];e&&e[0]===t[0]&&e[1]===t[1]||n.push(t)}function lPt(n,t,e){for(var i=n.length,r=[],o=0;o<i;o++){var a=n[o],s=n[(o+1)%i],l=aPt(a[0],a[1],s[0],s[1],t.x,t.y,e.x,e.y);l&&r.push({projPt:sPt(l,t,e),pt:l,idx:o})}if(r.length<2)return[{points:n},{points:n}];r.sort(function(v,m){return v.projPt-m.projPt});var h=r[0],u=r[r.length-1];if(u.idx<h.idx){var d=h;h=u,u=d}for(var c=[h.pt.x,h.pt.y],f=[u.pt.x,u.pt.y],g=[c],p=[f],o=h.idx+1;o<=u.idx;o++)Rg(g,n[o].slice());Rg(g,f),Rg(g,c);for(var o=u.idx+1;o<=h.idx+i;o++)Rg(p,n[o%i].slice());return Rg(p,c),Rg(p,f),[{points:g},{points:p}]}function w8(n){var t=n.points,e=[],i=[];WT(t,e,i);var r=new te(e[0],e[1],i[0]-e[0],i[1]-e[1]),o=r.width,a=r.height,s=r.x,l=r.y,h=new Jt,u=new Jt;return o>a?(h.x=u.x=s+o/2,h.y=l,u.y=l+a):(h.y=u.y=l+a/2,h.x=s,u.x=s+o),lPt(t,h,u)}function Gx(n,t,e,i){if(e===1)i.push(t);else{var r=Math.floor(e/2),o=n(t);Gx(n,o[0],r,i),Gx(n,o[1],e-r,i)}return i}function hPt(n,t){for(var e=[],i=0;i<t;i++)e.push(GH(n));return e}function uPt(n,t){t.setStyle(n.style),t.z=n.z,t.z2=n.z2,t.zlevel=n.zlevel}function dPt(n){for(var t=[],e=0;e<n.length;)t.push([n[e++],n[e++]]);return t}function cPt(n,t){var e=[],i=n.shape,r;switch(n.type){case"rect":oPt(i,t,e),r=Ae;break;case"sector":_8(i,t,e),r=ho;break;case"circle":_8({r0:0,r:i.r,startAngle:0,endAngle:Math.PI*2,cx:i.cx,cy:i.cy},t,e),r=ho;break;default:var o=n.getComputedTransform(),a=o?Math.sqrt(Math.max(o[0]*o[0]+o[1]*o[1],o[2]*o[2]+o[3]*o[3])):1,s=ct(rPt(n.getUpdatedPathProxy(),a),function(m){return dPt(m)}),l=s.length;if(l===0)Gx(w8,{points:s[0]},t,e);else if(l===t)for(var h=0;h<l;h++)e.push({points:s[h]});else{var u=0,d=ct(s,function(m){var y=[],b=[];WT(m,y,b);var _=(b[1]-y[1])*(b[0]-y[0]);return u+=_,{poly:m,area:_}});d.sort(function(m,y){return y.area-m.area});for(var c=t,h=0;h<l;h++){var f=d[h];if(c<=0)break;var g=h===l-1?c:Math.ceil(f.area/u*t);g<0||(Gx(w8,{points:f.poly},g,e),c-=g)}}r=uo;break}if(!r)return hPt(n,t);for(var p=[],h=0;h<e.length;h++){var v=new r;v.setShape(e[h]),uPt(n,v),p.push(v)}return p}function fPt(n,t){var e=n.length,i=t.length;if(e===i)return[n,t];for(var r=[],o=[],a=e<i?n:t,s=Math.min(e,i),l=Math.abs(i-e)/6,h=(s-2)/6,u=Math.ceil(l/h)+1,d=[a[0],a[1]],c=l,f=2;f<s;){var g=a[f-2],p=a[f-1],v=a[f++],m=a[f++],y=a[f++],b=a[f++],_=a[f++],w=a[f++];if(c<=0){d.push(v,m,y,b,_,w);continue}for(var C=Math.min(c,u-1)+1,x=1;x<=C;x++){var S=x/C;Qu(g,v,y,_,S,r),Qu(p,m,b,w,S,o),g=r[3],p=o[3],d.push(r[1],o[1],r[2],o[2],g,p),v=r[5],m=o[5],y=r[6],b=o[6]}c-=C-1}return a===n?[d,t]:[n,d]}function x8(n,t){for(var e=n.length,i=n[e-2],r=n[e-1],o=[],a=0;a<t.length;)o[a++]=i,o[a++]=r;return o}function gPt(n,t){for(var e,i,r,o=[],a=[],s=0;s<Math.max(n.length,t.length);s++){var l=n[s],h=t[s],u=void 0,d=void 0;l?h?(e=fPt(l,h),u=e[0],d=e[1],i=u,r=d):(d=x8(r||l,l),u=l):(u=x8(i||h,h),d=h),o.push(u),a.push(d)}return[o,a]}function S8(n){for(var t=0,e=0,i=0,r=n.length,o=0,a=r-2;o<r;a=o,o+=2){var s=n[a],l=n[a+1],h=n[o],u=n[o+1],d=s*u-h*l;t+=d,e+=(s+h)*d,i+=(l+u)*d}return t===0?[n[0]||0,n[1]||0]:[e/t/3,i/t/3,t]}function pPt(n,t,e,i){for(var r=(n.length-2)/6,o=1/0,a=0,s=n.length,l=s-2,h=0;h<r;h++){for(var u=h*6,d=0,c=0;c<s;c+=2){var f=c===0?u:(u+c-2)%l+2,g=n[f]-e[0],p=n[f+1]-e[1],v=t[c]-i[0],m=t[c+1]-i[1],y=v-g,b=m-p;d+=y*y+b*b}d<o&&(o=d,a=h)}return a}function vPt(n){for(var t=[],e=n.length,i=0;i<e;i+=2)t[i]=n[e-i-2],t[i+1]=n[e-i-1];return t}function mPt(n,t,e,i){for(var r=[],o,a=0;a<n.length;a++){var s=n[a],l=t[a],h=S8(s),u=S8(l);o==null&&(o=h[2]<0!=u[2]<0);var d=[],c=[],f=0,g=1/0,p=[],v=s.length;o&&(s=vPt(s));for(var m=pPt(s,l,h,u)*6,y=v-2,b=0;b<y;b+=2){var _=(m+b)%y+2;d[b+2]=s[_]-h[0],d[b+3]=s[_+1]-h[1]}d[0]=s[m]-h[0],d[1]=s[m+1]-h[1];for(var w=i/e,C=-i/2;C<=i/2;C+=w){for(var x=Math.sin(C),S=Math.cos(C),A=0,b=0;b<s.length;b+=2){var T=d[b],M=d[b+1],R=l[b]-u[0],L=l[b+1]-u[1],B=R*S-L*x,P=R*x+L*S;p[b]=B,p[b+1]=P;var k=B-T,E=P-M;A+=k*k+E*E}if(A<g){g=A,f=C;for(var D=0;D<p.length;D++)c[D]=p[D]}}r.push({from:d,to:c,fromCp:h,toCp:u,rotation:-f})}return r}function $x(n){return n.__isCombineMorphing}var Iit="__mOriginal_";function jx(n,t,e){var i=Iit+t,r=n[i]||n[t];n[i]||(n[i]=n[t]);var o=e.replace,a=e.after,s=e.before;n[t]=function(){var l=arguments,h;return s&&s.apply(this,l),o?h=o.apply(this,l):h=r.apply(this,l),a&&a.apply(this,l),h}}function iy(n,t){var e=Iit+t;n[e]&&(n[t]=n[e],n[e]=null)}function A8(n,t){for(var e=0;e<n.length;e++)for(var i=n[e],r=0;r<i.length;){var o=i[r],a=i[r+1];i[r++]=t[0]*o+t[2]*a+t[4],i[r++]=t[1]*o+t[3]*a+t[5]}}function Oit(n,t){var e=n.getUpdatedPathProxy(),i=t.getUpdatedPathProxy(),r=gPt(ND(e),ND(i)),o=r[0],a=r[1],s=n.getComputedTransform(),l=t.getComputedTransform();function h(){this.transform=null}s&&A8(o,s),l&&A8(a,l),jx(t,"updateTransform",{replace:h}),t.transform=null;var u=mPt(o,a,10,Math.PI),d=[];jx(t,"buildPath",{replace:function(c){for(var f=t.__morphT,g=1-f,p=[],v=0;v<u.length;v++){var m=u[v],y=m.from,b=m.to,_=m.rotation*f,w=m.fromCp,C=m.toCp,x=Math.sin(_),S=Math.cos(_);lw(p,w,C,f);for(var A=0;A<y.length;A+=2){var T=y[A],M=y[A+1],R=b[A],L=b[A+1],B=T*g+R*f,P=M*g+L*f;d[A]=B*S-P*x+p[0],d[A+1]=B*x+P*S+p[1]}var k=d[0],E=d[1];c.moveTo(k,E);for(var A=2;A<y.length;){var R=d[A++],L=d[A++],D=d[A++],I=d[A++],O=d[A++],H=d[A++];k===R&&E===L&&D===O&&I===H?c.lineTo(O,H):c.bezierCurveTo(R,L,D,I,O,H),k=O,E=H}}}})}function TF(n,t,e){if(!n||!t)return t;var i=e.done,r=e.during;Oit(n,t),t.__morphT=0;function o(){iy(t,"buildPath"),iy(t,"updateTransform"),t.__morphT=-1,t.createPathProxy(),t.dirtyShape()}return t.animateTo({__morphT:1},Ot({during:function(a){t.dirtyShape(),r&&r(a)},done:function(){o(),i&&i()}},e)),t}function yPt(n,t,e,i,r,o){var a=16;n=r===e?0:Math.round(32767*(n-e)/(r-e)),t=o===i?0:Math.round(32767*(t-i)/(o-i));for(var s=0,l,h=(1<<a)/2;h>0;h/=2){var u=0,d=0;(n&h)>0&&(u=1),(t&h)>0&&(d=1),s+=h*h*(3*u^d),d===0&&(u===1&&(n=h-1-n,t=h-1-t),l=n,n=t,t=l)}return s}function Ux(n){var t=1/0,e=1/0,i=-1/0,r=-1/0,o=ct(n,function(s){var l=s.getBoundingRect(),h=s.getComputedTransform(),u=l.x+l.width/2+(h?h[4]:0),d=l.y+l.height/2+(h?h[5]:0);return t=Math.min(u,t),e=Math.min(d,e),i=Math.max(u,i),r=Math.max(d,r),[u,d]}),a=ct(o,function(s,l){return{cp:s,z:yPt(s[0],s[1],t,e,i,r),path:n[l]}});return a.sort(function(s,l){return s.z-l.z}).map(function(s){return s.path})}function Hit(n){return cPt(n.path,n.count)}function VD(){return{fromIndividuals:[],toIndividuals:[],count:0}}function bPt(n,t,e){var i=[];function r(w){for(var C=0;C<w.length;C++){var x=w[C];$x(x)?r(x.childrenRef()):x instanceof ue&&i.push(x)}}r(n);var o=i.length;if(!o)return VD();var a=e.dividePath||Hit,s=a({path:t,count:o});if(s.length!==o)return VD();i=Ux(i),s=Ux(s);for(var l=e.done,h=e.during,u=e.individualDelay,d=new gh,c=0;c<o;c++){var f=i[c],g=s[c];g.parent=t,g.copyTransform(d),u||Oit(f,g)}t.__isCombineMorphing=!0,t.childrenRef=function(){return s};function p(w){for(var C=0;C<s.length;C++)s[C].addSelfToZr(w)}jx(t,"addSelfToZr",{after:function(w){p(w)}}),jx(t,"removeSelfFromZr",{after:function(w){for(var C=0;C<s.length;C++)s[C].removeSelfFromZr(w)}});function v(){t.__isCombineMorphing=!1,t.__morphT=-1,t.childrenRef=null,iy(t,"addSelfToZr"),iy(t,"removeSelfFromZr")}var m=s.length;if(u)for(var y=m,b=function(){y--,y===0&&(v(),l&&l())},c=0;c<m;c++){var _=u?Ot({delay:(e.delay||0)+u(c,m,i[c],s[c]),done:b},e):e;TF(i[c],s[c],_)}else t.__morphT=0,t.animateTo({__morphT:1},Ot({during:function(w){for(var C=0;C<m;C++){var x=s[C];x.__morphT=t.__morphT,x.dirtyShape()}h&&h(w)},done:function(){v();for(var w=0;w<n.length;w++)iy(n[w],"updateTransform");l&&l()}},e));return t.__zr&&p(t.__zr),{fromIndividuals:i,toIndividuals:s,count:m}}function _Pt(n,t,e){var i=t.length,r=[],o=e.dividePath||Hit;function a(f){for(var g=0;g<f.length;g++){var p=f[g];$x(p)?a(p.childrenRef()):p instanceof ue&&r.push(p)}}if($x(n)){a(n.childrenRef());var s=r.length;if(s<i)for(var l=0,h=s;h<i;h++)r.push(GH(r[l++%s]));r.length=i}else{r=o({path:n,count:i});for(var u=n.getComputedTransform(),h=0;h<r.length;h++)r[h].setLocalTransform(u);if(r.length!==i)return VD()}r=Ux(r),t=Ux(t);for(var d=e.individualDelay,h=0;h<i;h++){var c=d?Ot({delay:(e.delay||0)+d(h,i,r[h],t[h])},e):e;TF(r[h],t[h],c)}return{fromIndividuals:r,toIndividuals:t,count:t.length}}function T8(n){return ut(n[0])}function M8(n,t){for(var e=[],i=n.length,r=0;r<i;r++)e.push({one:n[r],many:[]});for(var r=0;r<t.length;r++){var o=t[r].length,a=void 0;for(a=0;a<o;a++)e[a%i].many.push(t[r][a])}for(var s=0,r=i-1;r>=0;r--)if(!e[r].many.length){var l=e[s].many;if(l.length<=1)if(s)s=0;else return e;var o=l.length,h=Math.ceil(o/2);e[r].many=l.slice(h,o),e[s].many=l.slice(0,h),s++}return e}var CPt={clone:function(n){for(var t=[],e=1-Math.pow(1-n.path.style.opacity,1/n.count),i=0;i<n.count;i++){var r=GH(n.path);r.setStyle("opacity",e),t.push(r)}return t},split:null};function SB(n,t,e,i,r,o){if(!n.length||!t.length)return;var a=Nv("update",i,r);if(!(a&&a.duration>0))return;var s=i.getModel("universalTransition").get("delay"),l=Object.assign({setToFinal:!0},a),h,u;T8(n)&&(h=n,u=t),T8(t)&&(h=t,u=n);function d(m,y,b,_,w){var C=m.many,x=m.one;if(C.length===1&&!w){var S=y?C[0]:x,A=y?x:C[0];if($x(S))d({many:[S],one:A},!0,b,_,!0);else{var T=s?Ot({delay:s(b,_)},l):l;TF(S,A,T),o(S,A,S,A,T)}}else for(var M=Ot({dividePath:CPt[e],individualDelay:s&&function(E,D,I,O){return s(E+b,_)}},l),R=y?bPt(C,x,M):_Pt(x,C,M),L=R.fromIndividuals,B=R.toIndividuals,P=L.length,k=0;k<P;k++){var T=s?Ot({delay:s(k,P)},l):l;o(L[k],B[k],y?C[k]:m.one,y?m.one:C[k],T)}}for(var c=h?h===n:n.length>t.length,f=h?M8(u,h):M8(c?t:n,[c?n:t]),g=0,p=0;p<f.length;p++)g+=f[p].many.length;for(var v=0,p=0;p<f.length;p++)d(f[p],c,v,g),v+=f[p].many.length}function lc(n){if(!n)return[];if(ut(n)){for(var t=[],e=0;e<n.length;e++)t.push(lc(n[e]));return t}var i=[];return n.traverse(function(r){r instanceof ue&&!r.disableMorphing&&!r.invisible&&!r.ignore&&i.push(r)}),i}var zit=1e4,wPt=0,R8=1,P8=2,xPt=Te();function SPt(n,t){for(var e=n.dimensions,i=0;i<e.length;i++){var r=n.getDimensionInfo(e[i]);if(r&&r.otherDims[t]===0)return e[i]}}function APt(n,t,e){var i=n.getDimensionInfo(e),r=i&&i.ordinalMeta;if(i){var o=n.get(i.name,t);return r&&r.categories[o]||o+""}}function B8(n,t,e,i){var r=i?"itemChildGroupId":"itemGroupId",o=SPt(n,r);if(o){var a=APt(n,t,o);return a}var s=n.getRawDataItem(t),l=i?"childGroupId":"groupId";if(s&&s[l])return s[l]+"";if(!i)return e||n.getId(t)}function k8(n){var t=[];return z(n,function(e){var i=e.data,r=e.dataGroupId;if(!(i.count()>zit))for(var o=i.getIndices(),a=0;a<o.length;a++)t.push({data:i,groupId:B8(i,a,r,!1),childGroupId:B8(i,a,r,!0),divide:e.divide,dataIndex:a})}),t}function AB(n,t,e){n.traverse(function(i){i instanceof ue&&Bi(i,{style:{opacity:0}},t,{dataIndex:e,isFrom:!0})})}function TB(n){if(n.parent){var t=n.getComputedTransform();n.setLocalTransform(t),n.parent.remove(n)}}function Pg(n){n.stopAnimation(),n.isGroup&&n.traverse(function(t){t.stopAnimation()})}function TPt(n,t,e){var i=Nv("update",e,t);i&&n.traverse(function(r){if(r instanceof Ua){var o=_gt(r);o&&r.animateFrom({style:o},i)}})}function MPt(n,t){var e=n.length;if(e!==t.length)return!1;for(var i=0;i<e;i++){var r=n[i],o=t[i];if(r.data.getId(r.dataIndex)!==o.data.getId(o.dataIndex))return!1}return!0}function Fit(n,t,e){var i=k8(n),r=k8(t);function o(b,_,w,C,x){(w||b)&&_.animateFrom({style:w&&w!==b?ht(ht({},w.style),b.style):b.style},x)}var a=!1,s=wPt,l=Pt(),h=Pt();i.forEach(function(b){b.groupId&&l.set(b.groupId,!0),b.childGroupId&&h.set(b.childGroupId,!0)});for(var u=0;u<r.length;u++){var d=r[u].groupId;if(h.get(d)){s=R8;break}var c=r[u].childGroupId;if(c&&l.get(c)){s=P8;break}}function f(b,_){return function(w){var C=w.data,x=w.dataIndex;return _?C.getId(x):b?s===R8?w.childGroupId:w.groupId:s===P8?w.childGroupId:w.groupId}}var g=MPt(i,r),p={};if(!g)for(var u=0;u<r.length;u++){var v=r[u],m=v.data.getItemGraphicEl(v.dataIndex);m&&(p[m.id]=!0)}function y(b,_){var w=i[_],C=r[b],x=C.data.hostModel,S=w.data.getItemGraphicEl(w.dataIndex),A=C.data.getItemGraphicEl(C.dataIndex);if(S===A){A&&TPt(A,C.dataIndex,x);return}S&&p[S.id]||A&&(Pg(A),S?(Pg(S),TB(S),a=!0,SB(lc(S),lc(A),C.divide,x,b,o)):AB(A,x,b))}new Dh(i,r,f(!0,g),f(!1,g),null,"multiple").update(y).updateManyToOne(function(b,_){var w=r[b],C=w.data,x=C.hostModel,S=C.getItemGraphicEl(w.dataIndex),A=Ge(ct(_,function(T){return i[T].data.getItemGraphicEl(i[T].dataIndex)}),function(T){return T&&T!==S&&!p[T.id]});S&&(Pg(S),A.length?(z(A,function(T){Pg(T),TB(T)}),a=!0,SB(lc(A),lc(S),w.divide,x,b,o)):AB(S,x,w.dataIndex))}).updateOneToMany(function(b,_){var w=i[_],C=w.data.getItemGraphicEl(w.dataIndex);if(!(C&&p[C.id])){var x=Ge(ct(b,function(A){return r[A].data.getItemGraphicEl(r[A].dataIndex)}),function(A){return A&&A!==C}),S=r[b[0]].data.hostModel;x.length&&(z(x,function(A){return Pg(A)}),C?(Pg(C),TB(C),a=!0,SB(lc(C),lc(x),w.divide,S,b[0],o)):z(x,function(A){return AB(A,S,b[0])}))}}).updateManyToMany(function(b,_){new Dh(_,b,function(w){return i[w].data.getId(i[w].dataIndex)},function(w){return r[w].data.getId(r[w].dataIndex)}).update(function(w,C){y(b[w],_[C])}).execute()}).execute(),a&&z(t,function(b){var _=b.data,w=_.hostModel,C=w&&e.getViewOfSeriesModel(w),x=Nv("update",w,0);C&&w.isAnimationEnabled()&&x&&x.duration>0&&C.group.traverse(function(S){S instanceof ue&&!S.animators.length&&S.animateFrom({style:{opacity:0}},x)})})}function L8(n){var t=n.getModel("universalTransition").get("seriesKey");return t||n.id}function E8(n){return ut(n)?n.sort().join(","):n}function bu(n){if(n.hostModel)return n.hostModel.getModel("universalTransition").get("divideShape")}function RPt(n,t){var e=Pt(),i=Pt(),r=Pt();return z(n.oldSeries,function(o,a){var s=n.oldDataGroupIds[a],l=n.oldData[a],h=L8(o),u=E8(h);i.set(u,{dataGroupId:s,data:l}),ut(h)&&z(h,function(d){r.set(d,{key:u,dataGroupId:s,data:l})})}),z(t.updatedSeries,function(o){if(o.isUniversalTransitionEnabled()&&o.isAnimationEnabled()){var a=o.get("dataGroupId"),s=o.getData(),l=L8(o),h=E8(l),u=i.get(h);if(u)e.set(h,{oldSeries:[{dataGroupId:u.dataGroupId,divide:bu(u.data),data:u.data}],newSeries:[{dataGroupId:a,divide:bu(s),data:s}]});else if(ut(l)){var d=[];z(l,function(g){var p=i.get(g);p.data&&d.push({dataGroupId:p.dataGroupId,divide:bu(p.data),data:p.data})}),d.length&&e.set(h,{oldSeries:d,newSeries:[{dataGroupId:a,data:s,divide:bu(s)}]})}else{var c=r.get(l);if(c){var f=e.get(c.key);f||(f={oldSeries:[{dataGroupId:c.dataGroupId,data:c.data,divide:bu(c.data)}],newSeries:[]},e.set(c.key,f)),f.newSeries.push({dataGroupId:a,data:s,divide:bu(s)})}}}}),e}function D8(n,t){for(var e=0;e<n.length;e++){var i=t.seriesIndex!=null&&t.seriesIndex===n[e].seriesIndex||t.seriesId!=null&&t.seriesId===n[e].id;if(i)return e}}function PPt(n,t,e,i){var r=[],o=[];z(li(n.from),function(a){var s=D8(t.oldSeries,a);s>=0&&r.push({dataGroupId:t.oldDataGroupIds[s],data:t.oldData[s],divide:bu(t.oldData[s]),groupIdDim:a.dimension})}),z(li(n.to),function(a){var s=D8(e.updatedSeries,a);if(s>=0){var l=e.updatedSeries[s].getData();o.push({dataGroupId:t.oldDataGroupIds[s],data:l,divide:bu(l),groupIdDim:a.dimension})}}),r.length>0&&o.length>0&&Fit(r,o,i)}function BPt(n){n.registerUpdateLifecycle("series:beforeupdate",function(t,e,i){z(li(i.seriesTransition),function(r){z(li(r.to),function(o){for(var a=i.updatedSeries,s=0;s<a.length;s++)(o.seriesIndex!=null&&o.seriesIndex===a[s].seriesIndex||o.seriesId!=null&&o.seriesId===a[s].id)&&(a[s][bw]=!0)})})}),n.registerUpdateLifecycle("series:transition",function(t,e,i){var r=xPt(e);if(r.oldSeries&&i.updatedSeries&&i.optionChanged){var o=i.seriesTransition;if(o)z(li(o),function(f){PPt(f,r,i,e)});else{var a=RPt(r,i);z(a.keys(),function(f){var g=a.get(f);Fit(g.oldSeries,g.newSeries,e)})}z(i.updatedSeries,function(f){f[bw]&&(f[bw]=!1)})}for(var s=t.getSeries(),l=r.oldSeries=[],h=r.oldDataGroupIds=[],u=r.oldData=[],d=0;d<s.length;d++){var c=s[d].getData();c.count()<zit&&(l.push(s[d]),h.push(s[d].get("dataGroupId")),u.push(c))}})}function yM(n){return qq()?(ow(n),!0):!1}function ch(n){return typeof n=="function"?n():ne(n)}const kPt=typeof window<"u"&&typeof document<"u",LPt=n=>typeof n<"u",EPt=Object.prototype.toString,DPt=n=>EPt.call(n)==="[object Object]",IPt=()=>{};function OPt(n,t){function e(...i){return new Promise((r,o)=>{Promise.resolve(n(()=>t.apply(this,i),{fn:t,thisArg:this,args:i})).then(r).catch(o)})}return e}const Nit=n=>n();function HPt(n=Nit){const t=ln(!0);function e(){t.value=!1}function i(){t.value=!0}const r=(...o)=>{t.value&&n(...o)};return{isActive:Tut(t),pause:e,resume:i,eventFilter:r}}function I8(n,t=!1,e="Timeout"){return new Promise((i,r)=>{setTimeout(t?()=>r(e):i,n)})}function zPt(n,t,e={}){const{eventFilter:i=Nit,...r}=e;return xi(n,OPt(i,t),r)}function Bg(n,t,e={}){const{eventFilter:i,...r}=e,{eventFilter:o,pause:a,resume:s,isActive:l}=HPt(i);return{stop:zPt(n,t,{...r,eventFilter:o}),pause:a,resume:s,isActive:l}}function FPt(n,t={}){if(!mH(n))return wut(n);const e=Array.isArray(n.value)?Array.from({length:n.value.length}):{};for(const i in n.value)e[i]=xut(()=>({get(){return n.value[i]},set(r){var o;if((o=ch(t.replaceRef))!=null?o:!0)if(Array.isArray(n.value)){const s=[...n.value];s[i]=r,n.value=s}else{const s={...n.value,[i]:r};Object.setPrototypeOf(s,Object.getPrototypeOf(n.value)),n.value=s}else n.value[i]=r}}));return e}function GD(n,t=!1){function e(d,{flush:c="sync",deep:f=!1,timeout:g,throwOnTimeout:p}={}){let v=null;const y=[new Promise(b=>{v=xi(n,_=>{d(_)!==t&&(v?.(),b(_))},{flush:c,deep:f,immediate:!0})})];return g!=null&&y.push(I8(g,p).then(()=>ch(n)).finally(()=>v?.())),Promise.race(y)}function i(d,c){if(!mH(d))return e(_=>_===d,c);const{flush:f="sync",deep:g=!1,timeout:p,throwOnTimeout:v}=c??{};let m=null;const b=[new Promise(_=>{m=xi([n,d],([w,C])=>{t!==(w===C)&&(m?.(),_(w))},{flush:f,deep:g,immediate:!0})})];return p!=null&&b.push(I8(p,v).then(()=>ch(n)).finally(()=>(m?.(),ch(n)))),Promise.race(b)}function r(d){return e(c=>!!c,d)}function o(d){return i(null,d)}function a(d){return i(void 0,d)}function s(d){return e(Number.isNaN,d)}function l(d,c){return e(f=>{const g=Array.from(f);return g.includes(d)||g.includes(ch(d))},c)}function h(d){return u(1,d)}function u(d=1,c){let f=-1;return e(()=>(f+=1,f>=d),c)}return Array.isArray(ch(n))?{toMatch:e,toContains:l,changed:h,changedTimes:u,get not(){return GD(n,!t)}}:{toMatch:e,toBe:i,toBeTruthy:r,toBeNull:o,toBeNaN:s,toBeUndefined:a,changed:h,changedTimes:u,get not(){return GD(n,!t)}}}function $D(n){return GD(n)}function NPt(n){var t;const e=ch(n);return(t=e?.$el)!=null?t:e}const Wit=kPt?window:void 0;function Vit(...n){let t,e,i,r;if(typeof n[0]=="string"||Array.isArray(n[0])?([e,i,r]=n,t=Wit):[t,e,i,r]=n,!t)return IPt;Array.isArray(e)||(e=[e]),Array.isArray(i)||(i=[i]);const o=[],a=()=>{o.forEach(u=>u()),o.length=0},s=(u,d,c,f)=>(u.addEventListener(d,c,f),()=>u.removeEventListener(d,c,f)),l=xi(()=>[NPt(t),ch(r)],([u,d])=>{if(a(),!u)return;const c=DPt(d)?{...d}:d;o.push(...e.flatMap(f=>i.map(g=>s(u,f,g,c))))},{immediate:!0,flush:"post"}),h=()=>{l(),a()};return yM(h),h}function WPt(n){return typeof n=="function"?n:typeof n=="string"?t=>t.key===n:Array.isArray(n)?t=>n.includes(t.key):()=>!0}function O8(...n){let t,e,i={};n.length===3?(t=n[0],e=n[1],i=n[2]):n.length===2?typeof n[1]=="object"?(t=!0,e=n[0],i=n[1]):(t=n[0],e=n[1]):(t=!0,e=n[0]);const{target:r=Wit,eventName:o="keydown",passive:a=!1,dedupe:s=!1}=i,l=WPt(t);return Vit(r,o,u=>{u.repeat&&ch(s)||l(u)&&e(u)},a)}function VPt(n){return JSON.parse(JSON.stringify(n))}function MB(n,t,e,i={}){var r,o,a;const{clone:s=!1,passive:l=!1,eventName:h,deep:u=!1,defaultValue:d,shouldEmit:c}=i,f=Jb(),g=e||f?.emit||((r=f?.$emit)==null?void 0:r.bind(f))||((a=(o=f?.proxy)==null?void 0:o.$emit)==null?void 0:a.bind(f?.proxy));let p=h;t||(t="modelValue"),p=p||`update:${t.toString()}`;const v=b=>s?typeof s=="function"?s(b):VPt(b):b,m=()=>LPt(n[t])?v(n[t]):d,y=b=>{c?c(b)&&g(p,b):g(p,b)};if(l){const b=m(),_=ln(b);let w=!1;return xi(()=>n[t],C=>{w||(w=!0,_.value=v(C),yh(()=>w=!1))}),xi(_,C=>{!w&&(C!==n[t]||u)&&y(C)},{deep:u}),_}else return ke({get(){return m()},set(b){y(b)}})}var GPt={value:()=>{}};function bM(){for(var n=0,t=arguments.length,e={},i;n<t;++n){if(!(i=arguments[n]+"")||i in e||/[\s.]/.test(i))throw new Error("illegal type: "+i);e[i]=[]}return new Mw(e)}function Mw(n){this._=n}function $Pt(n,t){return n.trim().split(/^|\s+/).map(function(e){var i="",r=e.indexOf(".");if(r>=0&&(i=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:i}})}Mw.prototype=bM.prototype={constructor:Mw,on:function(n,t){var e=this._,i=$Pt(n+"",e),r,o=-1,a=i.length;if(arguments.length<2){for(;++o<a;)if((r=(n=i[o]).type)&&(r=jPt(e[r],n.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<a;)if(r=(n=i[o]).type)e[r]=H8(e[r],n.name,t);else if(t==null)for(r in e)e[r]=H8(e[r],n.name,null);return this},copy:function(){var n={},t=this._;for(var e in t)n[e]=t[e].slice();return new Mw(n)},call:function(n,t){if((r=arguments.length-2)>0)for(var e=new Array(r),i=0,r,o;i<r;++i)e[i]=arguments[i+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(o=this._[n],i=0,r=o.length;i<r;++i)o[i].value.apply(t,e)},apply:function(n,t,e){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var i=this._[n],r=0,o=i.length;r<o;++r)i[r].value.apply(t,e)}};function jPt(n,t){for(var e=0,i=n.length,r;e<i;++e)if((r=n[e]).name===t)return r.value}function H8(n,t,e){for(var i=0,r=n.length;i<r;++i)if(n[i].name===t){n[i]=GPt,n=n.slice(0,i).concat(n.slice(i+1));break}return e!=null&&n.push({name:t,value:e}),n}var jD="http://www.w3.org/1999/xhtml";const z8={svg:"http://www.w3.org/2000/svg",xhtml:jD,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function _M(n){var t=n+="",e=t.indexOf(":");return e>=0&&(t=n.slice(0,e))!=="xmlns"&&(n=n.slice(e+1)),z8.hasOwnProperty(t)?{space:z8[t],local:n}:n}function UPt(n){return function(){var t=this.ownerDocument,e=this.namespaceURI;return e===jD&&t.documentElement.namespaceURI===jD?t.createElement(n):t.createElementNS(e,n)}}function YPt(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function Git(n){var t=_M(n);return(t.local?YPt:UPt)(t)}function XPt(){}function MF(n){return n==null?XPt:function(){return this.querySelector(n)}}function qPt(n){typeof n!="function"&&(n=MF(n));for(var t=this._groups,e=t.length,i=new Array(e),r=0;r<e;++r)for(var o=t[r],a=o.length,s=i[r]=new Array(a),l,h,u=0;u<a;++u)(l=o[u])&&(h=n.call(l,l.__data__,u,o))&&("__data__"in l&&(h.__data__=l.__data__),s[u]=h);return new Jo(i,this._parents)}function KPt(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function ZPt(){return[]}function $it(n){return n==null?ZPt:function(){return this.querySelectorAll(n)}}function JPt(n){return function(){return KPt(n.apply(this,arguments))}}function QPt(n){typeof n=="function"?n=JPt(n):n=$it(n);for(var t=this._groups,e=t.length,i=[],r=[],o=0;o<e;++o)for(var a=t[o],s=a.length,l,h=0;h<s;++h)(l=a[h])&&(i.push(n.call(l,l.__data__,h,a)),r.push(l));return new Jo(i,r)}function jit(n){return function(){return this.matches(n)}}function Uit(n){return function(t){return t.matches(n)}}var tBt=Array.prototype.find;function eBt(n){return function(){return tBt.call(this.children,n)}}function iBt(){return this.firstElementChild}function nBt(n){return this.select(n==null?iBt:eBt(typeof n=="function"?n:Uit(n)))}var rBt=Array.prototype.filter;function oBt(){return Array.from(this.children)}function aBt(n){return function(){return rBt.call(this.children,n)}}function sBt(n){return this.selectAll(n==null?oBt:aBt(typeof n=="function"?n:Uit(n)))}function lBt(n){typeof n!="function"&&(n=jit(n));for(var t=this._groups,e=t.length,i=new Array(e),r=0;r<e;++r)for(var o=t[r],a=o.length,s=i[r]=[],l,h=0;h<a;++h)(l=o[h])&&n.call(l,l.__data__,h,o)&&s.push(l);return new Jo(i,this._parents)}function Yit(n){return new Array(n.length)}function hBt(){return new Jo(this._enter||this._groups.map(Yit),this._parents)}function Yx(n,t){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=t}Yx.prototype={constructor:Yx,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,t){return this._parent.insertBefore(n,t)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function uBt(n){return function(){return n}}function dBt(n,t,e,i,r,o){for(var a=0,s,l=t.length,h=o.length;a<h;++a)(s=t[a])?(s.__data__=o[a],i[a]=s):e[a]=new Yx(n,o[a]);for(;a<l;++a)(s=t[a])&&(r[a]=s)}function cBt(n,t,e,i,r,o,a){var s,l,h=new Map,u=t.length,d=o.length,c=new Array(u),f;for(s=0;s<u;++s)(l=t[s])&&(c[s]=f=a.call(l,l.__data__,s,t)+"",h.has(f)?r[s]=l:h.set(f,l));for(s=0;s<d;++s)f=a.call(n,o[s],s,o)+"",(l=h.get(f))?(i[s]=l,l.__data__=o[s],h.delete(f)):e[s]=new Yx(n,o[s]);for(s=0;s<u;++s)(l=t[s])&&h.get(c[s])===l&&(r[s]=l)}function fBt(n){return n.__data__}function gBt(n,t){if(!arguments.length)return Array.from(this,fBt);var e=t?cBt:dBt,i=this._parents,r=this._groups;typeof n!="function"&&(n=uBt(n));for(var o=r.length,a=new Array(o),s=new Array(o),l=new Array(o),h=0;h<o;++h){var u=i[h],d=r[h],c=d.length,f=pBt(n.call(u,u&&u.__data__,h,i)),g=f.length,p=s[h]=new Array(g),v=a[h]=new Array(g),m=l[h]=new Array(c);e(u,d,p,v,m,f,t);for(var y=0,b=0,_,w;y<g;++y)if(_=p[y]){for(y>=b&&(b=y+1);!(w=v[b])&&++b<g;);_._next=w||null}}return a=new Jo(a,i),a._enter=s,a._exit=l,a}function pBt(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function vBt(){return new Jo(this._exit||this._groups.map(Yit),this._parents)}function mBt(n,t,e){var i=this.enter(),r=this,o=this.exit();return typeof n=="function"?(i=n(i),i&&(i=i.selection())):i=i.append(n+""),t!=null&&(r=t(r),r&&(r=r.selection())),e==null?o.remove():e(o),i&&r?i.merge(r).order():r}function yBt(n){for(var t=n.selection?n.selection():n,e=this._groups,i=t._groups,r=e.length,o=i.length,a=Math.min(r,o),s=new Array(r),l=0;l<a;++l)for(var h=e[l],u=i[l],d=h.length,c=s[l]=new Array(d),f,g=0;g<d;++g)(f=h[g]||u[g])&&(c[g]=f);for(;l<r;++l)s[l]=e[l];return new Jo(s,this._parents)}function bBt(){for(var n=this._groups,t=-1,e=n.length;++t<e;)for(var i=n[t],r=i.length-1,o=i[r],a;--r>=0;)(a=i[r])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function _Bt(n){n||(n=CBt);function t(d,c){return d&&c?n(d.__data__,c.__data__):!d-!c}for(var e=this._groups,i=e.length,r=new Array(i),o=0;o<i;++o){for(var a=e[o],s=a.length,l=r[o]=new Array(s),h,u=0;u<s;++u)(h=a[u])&&(l[u]=h);l.sort(t)}return new Jo(r,this._parents).order()}function CBt(n,t){return n<t?-1:n>t?1:n>=t?0:NaN}function wBt(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function xBt(){return Array.from(this)}function SBt(){for(var n=this._groups,t=0,e=n.length;t<e;++t)for(var i=n[t],r=0,o=i.length;r<o;++r){var a=i[r];if(a)return a}return null}function ABt(){let n=0;for(const t of this)++n;return n}function TBt(){return!this.node()}function MBt(n){for(var t=this._groups,e=0,i=t.length;e<i;++e)for(var r=t[e],o=0,a=r.length,s;o<a;++o)(s=r[o])&&n.call(s,s.__data__,o,r);return this}function RBt(n){return function(){this.removeAttribute(n)}}function PBt(n){return function(){this.removeAttributeNS(n.space,n.local)}}function BBt(n,t){return function(){this.setAttribute(n,t)}}function kBt(n,t){return function(){this.setAttributeNS(n.space,n.local,t)}}function LBt(n,t){return function(){var e=t.apply(this,arguments);e==null?this.removeAttribute(n):this.setAttribute(n,e)}}function EBt(n,t){return function(){var e=t.apply(this,arguments);e==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,e)}}function DBt(n,t){var e=_M(n);if(arguments.length<2){var i=this.node();return e.local?i.getAttributeNS(e.space,e.local):i.getAttribute(e)}return this.each((t==null?e.local?PBt:RBt:typeof t=="function"?e.local?EBt:LBt:e.local?kBt:BBt)(e,t))}function Xit(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function IBt(n){return function(){this.style.removeProperty(n)}}function OBt(n,t,e){return function(){this.style.setProperty(n,t,e)}}function HBt(n,t,e){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(n):this.style.setProperty(n,i,e)}}function zBt(n,t,e){return arguments.length>1?this.each((t==null?IBt:typeof t=="function"?HBt:OBt)(n,t,e??"")):Qp(this.node(),n)}function Qp(n,t){return n.style.getPropertyValue(t)||Xit(n).getComputedStyle(n,null).getPropertyValue(t)}function FBt(n){return function(){delete this[n]}}function NBt(n,t){return function(){this[n]=t}}function WBt(n,t){return function(){var e=t.apply(this,arguments);e==null?delete this[n]:this[n]=e}}function VBt(n,t){return arguments.length>1?this.each((t==null?FBt:typeof t=="function"?WBt:NBt)(n,t)):this.node()[n]}function qit(n){return n.trim().split(/^|\s+/)}function RF(n){return n.classList||new Kit(n)}function Kit(n){this._node=n,this._names=qit(n.getAttribute("class")||"")}Kit.prototype={add:function(n){var t=this._names.indexOf(n);t<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var t=this._names.indexOf(n);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function Zit(n,t){for(var e=RF(n),i=-1,r=t.length;++i<r;)e.add(t[i])}function Jit(n,t){for(var e=RF(n),i=-1,r=t.length;++i<r;)e.remove(t[i])}function GBt(n){return function(){Zit(this,n)}}function $Bt(n){return function(){Jit(this,n)}}function jBt(n,t){return function(){(t.apply(this,arguments)?Zit:Jit)(this,n)}}function UBt(n,t){var e=qit(n+"");if(arguments.length<2){for(var i=RF(this.node()),r=-1,o=e.length;++r<o;)if(!i.contains(e[r]))return!1;return!0}return this.each((typeof t=="function"?jBt:t?GBt:$Bt)(e,t))}function YBt(){this.textContent=""}function XBt(n){return function(){this.textContent=n}}function qBt(n){return function(){var t=n.apply(this,arguments);this.textContent=t??""}}function KBt(n){return arguments.length?this.each(n==null?YBt:(typeof n=="function"?qBt:XBt)(n)):this.node().textContent}function ZBt(){this.innerHTML=""}function JBt(n){return function(){this.innerHTML=n}}function QBt(n){return function(){var t=n.apply(this,arguments);this.innerHTML=t??""}}function tkt(n){return arguments.length?this.each(n==null?ZBt:(typeof n=="function"?QBt:JBt)(n)):this.node().innerHTML}function ekt(){this.nextSibling&&this.parentNode.appendChild(this)}function ikt(){return this.each(ekt)}function nkt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function rkt(){return this.each(nkt)}function okt(n){var t=typeof n=="function"?n:Git(n);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function akt(){return null}function skt(n,t){var e=typeof n=="function"?n:Git(n),i=t==null?akt:typeof t=="function"?t:MF(t);return this.select(function(){return this.insertBefore(e.apply(this,arguments),i.apply(this,arguments)||null)})}function lkt(){var n=this.parentNode;n&&n.removeChild(this)}function hkt(){return this.each(lkt)}function ukt(){var n=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(n,this.nextSibling):n}function dkt(){var n=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(n,this.nextSibling):n}function ckt(n){return this.select(n?dkt:ukt)}function fkt(n){return arguments.length?this.property("__data__",n):this.node().__data__}function gkt(n){return function(t){n.call(this,t,this.__data__)}}function pkt(n){return n.trim().split(/^|\s+/).map(function(t){var e="",i=t.indexOf(".");return i>=0&&(e=t.slice(i+1),t=t.slice(0,i)),{type:t,name:e}})}function vkt(n){return function(){var t=this.__on;if(t){for(var e=0,i=-1,r=t.length,o;e<r;++e)o=t[e],(!n.type||o.type===n.type)&&o.name===n.name?this.removeEventListener(o.type,o.listener,o.options):t[++i]=o;++i?t.length=i:delete this.__on}}}function mkt(n,t,e){return function(){var i=this.__on,r,o=gkt(t);if(i){for(var a=0,s=i.length;a<s;++a)if((r=i[a]).type===n.type&&r.name===n.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=e),r.value=t;return}}this.addEventListener(n.type,o,e),r={type:n.type,name:n.name,value:t,listener:o,options:e},i?i.push(r):this.__on=[r]}}function ykt(n,t,e){var i=pkt(n+""),r,o=i.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,h=s.length,u;l<h;++l)for(r=0,u=s[l];r<o;++r)if((a=i[r]).type===u.type&&a.name===u.name)return u.value}return}for(s=t?mkt:vkt,r=0;r<o;++r)this.each(s(i[r],t,e));return this}function Qit(n,t,e){var i=Xit(n),r=i.CustomEvent;typeof r=="function"?r=new r(t,e):(r=i.document.createEvent("Event"),e?(r.initEvent(t,e.bubbles,e.cancelable),r.detail=e.detail):r.initEvent(t,!1,!1)),n.dispatchEvent(r)}function bkt(n,t){return function(){return Qit(this,n,t)}}function _kt(n,t){return function(){return Qit(this,n,t.apply(this,arguments))}}function Ckt(n,t){return this.each((typeof t=="function"?_kt:bkt)(n,t))}function*wkt(){for(var n=this._groups,t=0,e=n.length;t<e;++t)for(var i=n[t],r=0,o=i.length,a;r<o;++r)(a=i[r])&&(yield a)}var tnt=[null];function Jo(n,t){this._groups=n,this._parents=t}function C_(){return new Jo([[document.documentElement]],tnt)}function xkt(){return this}Jo.prototype=C_.prototype={constructor:Jo,select:qPt,selectAll:QPt,selectChild:nBt,selectChildren:sBt,filter:lBt,data:gBt,enter:hBt,exit:vBt,join:mBt,merge:yBt,selection:xkt,order:bBt,sort:_Bt,call:wBt,nodes:xBt,node:SBt,size:ABt,empty:TBt,each:MBt,attr:DBt,style:zBt,property:VBt,classed:UBt,text:KBt,html:tkt,raise:ikt,lower:rkt,append:okt,insert:skt,remove:hkt,clone:ckt,datum:fkt,on:ykt,dispatch:Ckt,[Symbol.iterator]:wkt};function ds(n){return typeof n=="string"?new Jo([[document.querySelector(n)]],[document.documentElement]):new Jo([[n]],tnt)}function Skt(n){let t;for(;t=n.sourceEvent;)n=t;return n}function Qs(n,t){if(n=Skt(n),t===void 0&&(t=n.currentTarget),t){var e=t.ownerSVGElement||t;if(e.createSVGPoint){var i=e.createSVGPoint();return i.x=n.clientX,i.y=n.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[n.clientX-r.left-t.clientLeft,n.clientY-r.top-t.clientTop]}}return[n.pageX,n.pageY]}const Akt={passive:!1},ob={capture:!0,passive:!1};function RB(n){n.stopImmediatePropagation()}function bp(n){n.preventDefault(),n.stopImmediatePropagation()}function ent(n){var t=n.document.documentElement,e=ds(n).on("dragstart.drag",bp,ob);"onselectstart"in t?e.on("selectstart.drag",bp,ob):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function int(n,t){var e=n.document.documentElement,i=ds(n).on("dragstart.drag",null);t&&(i.on("click.drag",bp,ob),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in e?i.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}const e1=n=>()=>n;function UD(n,{sourceEvent:t,subject:e,target:i,identifier:r,active:o,x:a,y:s,dx:l,dy:h,dispatch:u}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:e,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:h,enumerable:!0,configurable:!0},_:{value:u}})}UD.prototype.on=function(){var n=this._.on.apply(this._,arguments);return n===this._?this:n};function Tkt(n){return!n.ctrlKey&&!n.button}function Mkt(){return this.parentNode}function Rkt(n,t){return t??{x:n.x,y:n.y}}function Pkt(){return navigator.maxTouchPoints||"ontouchstart"in this}function Bkt(){var n=Tkt,t=Mkt,e=Rkt,i=Pkt,r={},o=bM("start","drag","end"),a=0,s,l,h,u,d=0;function c(_){_.on("mousedown.drag",f).filter(i).on("touchstart.drag",v).on("touchmove.drag",m,Akt).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(_,w){if(!(u||!n.call(this,_,w))){var C=b(this,t.call(this,_,w),_,w,"mouse");C&&(ds(_.view).on("mousemove.drag",g,ob).on("mouseup.drag",p,ob),ent(_.view),RB(_),h=!1,s=_.clientX,l=_.clientY,C("start",_))}}function g(_){if(bp(_),!h){var w=_.clientX-s,C=_.clientY-l;h=w*w+C*C>d}r.mouse("drag",_)}function p(_){ds(_.view).on("mousemove.drag mouseup.drag",null),int(_.view,h),bp(_),r.mouse("end",_)}function v(_,w){if(n.call(this,_,w)){var C=_.changedTouches,x=t.call(this,_,w),S=C.length,A,T;for(A=0;A<S;++A)(T=b(this,x,_,w,C[A].identifier,C[A]))&&(RB(_),T("start",_,C[A]))}}function m(_){var w=_.changedTouches,C=w.length,x,S;for(x=0;x<C;++x)(S=r[w[x].identifier])&&(bp(_),S("drag",_,w[x]))}function y(_){var w=_.changedTouches,C=w.length,x,S;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),x=0;x<C;++x)(S=r[w[x].identifier])&&(RB(_),S("end",_,w[x]))}function b(_,w,C,x,S,A){var T=o.copy(),M=Qs(A||C,w),R,L,B;if((B=e.call(_,new UD("beforestart",{sourceEvent:C,target:c,identifier:S,active:a,x:M[0],y:M[1],dx:0,dy:0,dispatch:T}),x))!=null)return R=B.x-M[0]||0,L=B.y-M[1]||0,function P(k,E,D){var I=M,O;switch(k){case"start":r[S]=P,O=a++;break;case"end":delete r[S],--a;case"drag":M=Qs(D||E,w),O=a;break}T.call(k,_,new UD(k,{sourceEvent:E,subject:B,target:c,identifier:S,active:O,x:M[0]+R,y:M[1]+L,dx:M[0]-I[0],dy:M[1]-I[1],dispatch:T}),x)}}return c.filter=function(_){return arguments.length?(n=typeof _=="function"?_:e1(!!_),c):n},c.container=function(_){return arguments.length?(t=typeof _=="function"?_:e1(_),c):t},c.subject=function(_){return arguments.length?(e=typeof _=="function"?_:e1(_),c):e},c.touchable=function(_){return arguments.length?(i=typeof _=="function"?_:e1(!!_),c):i},c.on=function(){var _=o.on.apply(o,arguments);return _===o?c:_},c.clickDistance=function(_){return arguments.length?(d=(_=+_)*_,c):Math.sqrt(d)},c}function PF(n,t,e){n.prototype=t.prototype=e,e.constructor=n}function nnt(n,t){var e=Object.create(n.prototype);for(var i in t)e[i]=t[i];return e}function w_(){}var ab=.7,Xx=1/ab,_p="\\s*([+-]?\\d+)\\s*",sb="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ml="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",kkt=/^#([0-9a-f]{3,8})$/,Lkt=new RegExp(`^rgb\\(${_p},${_p},${_p}\\)$`),Ekt=new RegExp(`^rgb\\(${ml},${ml},${ml}\\)$`),Dkt=new RegExp(`^rgba\\(${_p},${_p},${_p},${sb}\\)$`),Ikt=new RegExp(`^rgba\\(${ml},${ml},${ml},${sb}\\)$`),Okt=new RegExp(`^hsl\\(${sb},${ml},${ml}\\)$`),Hkt=new RegExp(`^hsla\\(${sb},${ml},${ml},${sb}\\)$`),F8={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};PF(w_,Bf,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:N8,formatHex:N8,formatHex8:zkt,formatHsl:Fkt,formatRgb:W8,toString:W8});function N8(){return this.rgb().formatHex()}function zkt(){return this.rgb().formatHex8()}function Fkt(){return rnt(this).formatHsl()}function W8(){return this.rgb().formatRgb()}function Bf(n){var t,e;return n=(n+"").trim().toLowerCase(),(t=kkt.exec(n))?(e=t[1].length,t=parseInt(t[1],16),e===6?V8(t):e===3?new xo(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):e===8?i1(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):e===4?i1(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Lkt.exec(n))?new xo(t[1],t[2],t[3],1):(t=Ekt.exec(n))?new xo(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Dkt.exec(n))?i1(t[1],t[2],t[3],t[4]):(t=Ikt.exec(n))?i1(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Okt.exec(n))?j8(t[1],t[2]/100,t[3]/100,1):(t=Hkt.exec(n))?j8(t[1],t[2]/100,t[3]/100,t[4]):F8.hasOwnProperty(n)?V8(F8[n]):n==="transparent"?new xo(NaN,NaN,NaN,0):null}function V8(n){return new xo(n>>16&255,n>>8&255,n&255,1)}function i1(n,t,e,i){return i<=0&&(n=t=e=NaN),new xo(n,t,e,i)}function Nkt(n){return n instanceof w_||(n=Bf(n)),n?(n=n.rgb(),new xo(n.r,n.g,n.b,n.opacity)):new xo}function YD(n,t,e,i){return arguments.length===1?Nkt(n):new xo(n,t,e,i??1)}function xo(n,t,e,i){this.r=+n,this.g=+t,this.b=+e,this.opacity=+i}PF(xo,YD,nnt(w_,{brighter(n){return n=n==null?Xx:Math.pow(Xx,n),new xo(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?ab:Math.pow(ab,n),new xo(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new xo(df(this.r),df(this.g),df(this.b),qx(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:G8,formatHex:G8,formatHex8:Wkt,formatRgb:$8,toString:$8}));function G8(){return`#${Wc(this.r)}${Wc(this.g)}${Wc(this.b)}`}function Wkt(){return`#${Wc(this.r)}${Wc(this.g)}${Wc(this.b)}${Wc((isNaN(this.opacity)?1:this.opacity)*255)}`}function $8(){const n=qx(this.opacity);return`${n===1?"rgb(":"rgba("}${df(this.r)}, ${df(this.g)}, ${df(this.b)}${n===1?")":`, ${n})`}`}function qx(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function df(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function Wc(n){return n=df(n),(n<16?"0":"")+n.toString(16)}function j8(n,t,e,i){return i<=0?n=t=e=NaN:e<=0||e>=1?n=t=NaN:t<=0&&(n=NaN),new cs(n,t,e,i)}function rnt(n){if(n instanceof cs)return new cs(n.h,n.s,n.l,n.opacity);if(n instanceof w_||(n=Bf(n)),!n)return new cs;if(n instanceof cs)return n;n=n.rgb();var t=n.r/255,e=n.g/255,i=n.b/255,r=Math.min(t,e,i),o=Math.max(t,e,i),a=NaN,s=o-r,l=(o+r)/2;return s?(t===o?a=(e-i)/s+(e<i)*6:e===o?a=(i-t)/s+2:a=(t-e)/s+4,s/=l<.5?o+r:2-o-r,a*=60):s=l>0&&l<1?0:a,new cs(a,s,l,n.opacity)}function Vkt(n,t,e,i){return arguments.length===1?rnt(n):new cs(n,t,e,i??1)}function cs(n,t,e,i){this.h=+n,this.s=+t,this.l=+e,this.opacity=+i}PF(cs,Vkt,nnt(w_,{brighter(n){return n=n==null?Xx:Math.pow(Xx,n),new cs(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?ab:Math.pow(ab,n),new cs(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,t=isNaN(n)||isNaN(this.s)?0:this.s,e=this.l,i=e+(e<.5?e:1-e)*t,r=2*e-i;return new xo(PB(n>=240?n-240:n+120,r,i),PB(n,r,i),PB(n<120?n+240:n-120,r,i),this.opacity)},clamp(){return new cs(U8(this.h),n1(this.s),n1(this.l),qx(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=qx(this.opacity);return`${n===1?"hsl(":"hsla("}${U8(this.h)}, ${n1(this.s)*100}%, ${n1(this.l)*100}%${n===1?")":`, ${n})`}`}}));function U8(n){return n=(n||0)%360,n<0?n+360:n}function n1(n){return Math.max(0,Math.min(1,n||0))}function PB(n,t,e){return(n<60?t+(e-t)*n/60:n<180?e:n<240?t+(e-t)*(240-n)/60:t)*255}const BF=n=>()=>n;function Gkt(n,t){return function(e){return n+e*t}}function $kt(n,t,e){return n=Math.pow(n,e),t=Math.pow(t,e)-n,e=1/e,function(i){return Math.pow(n+i*t,e)}}function jkt(n){return(n=+n)==1?ont:function(t,e){return e-t?$kt(t,e,n):BF(isNaN(t)?e:t)}}function ont(n,t){var e=t-n;return e?Gkt(n,e):BF(isNaN(n)?t:n)}const Kx=(function n(t){var e=jkt(t);function i(r,o){var a=e((r=YD(r)).r,(o=YD(o)).r),s=e(r.g,o.g),l=e(r.b,o.b),h=ont(r.opacity,o.opacity);return function(u){return r.r=a(u),r.g=s(u),r.b=l(u),r.opacity=h(u),r+""}}return i.gamma=n,i})(1);function Ukt(n,t){t||(t=[]);var e=n?Math.min(t.length,n.length):0,i=t.slice(),r;return function(o){for(r=0;r<e;++r)i[r]=n[r]*(1-o)+t[r]*o;return i}}function Ykt(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Xkt(n,t){var e=t?t.length:0,i=n?Math.min(e,n.length):0,r=new Array(i),o=new Array(e),a;for(a=0;a<i;++a)r[a]=ny(n[a],t[a]);for(;a<e;++a)o[a]=t[a];return function(s){for(a=0;a<i;++a)o[a]=r[a](s);return o}}function qkt(n,t){var e=new Date;return n=+n,t=+t,function(i){return e.setTime(n*(1-i)+t*i),e}}function el(n,t){return n=+n,t=+t,function(e){return n*(1-e)+t*e}}function Kkt(n,t){var e={},i={},r;(n===null||typeof n!="object")&&(n={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in n?e[r]=ny(n[r],t[r]):i[r]=t[r];return function(o){for(r in e)i[r]=e[r](o);return i}}var XD=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,BB=new RegExp(XD.source,"g");function Zkt(n){return function(){return n}}function Jkt(n){return function(t){return n(t)+""}}function ant(n,t){var e=XD.lastIndex=BB.lastIndex=0,i,r,o,a=-1,s=[],l=[];for(n=n+"",t=t+"";(i=XD.exec(n))&&(r=BB.exec(t));)(o=r.index)>e&&(o=t.slice(e,o),s[a]?s[a]+=o:s[++a]=o),(i=i[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:el(i,r)})),e=BB.lastIndex;return e<t.length&&(o=t.slice(e),s[a]?s[a]+=o:s[++a]=o),s.length<2?l[0]?Jkt(l[0].x):Zkt(t):(t=l.length,function(h){for(var u=0,d;u<t;++u)s[(d=l[u]).i]=d.x(h);return s.join("")})}function ny(n,t){var e=typeof t,i;return t==null||e==="boolean"?BF(t):(e==="number"?el:e==="string"?(i=Bf(t))?(t=i,Kx):ant:t instanceof Bf?Kx:t instanceof Date?qkt:Ykt(t)?Ukt:Array.isArray(t)?Xkt:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Kkt:el)(n,t)}var Y8=180/Math.PI,qD={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function snt(n,t,e,i,r,o){var a,s,l;return(a=Math.sqrt(n*n+t*t))&&(n/=a,t/=a),(l=n*e+t*i)&&(e-=n*l,i-=t*l),(s=Math.sqrt(e*e+i*i))&&(e/=s,i/=s,l/=s),n*i<t*e&&(n=-n,t=-t,l=-l,a=-a),{translateX:r,translateY:o,rotate:Math.atan2(t,n)*Y8,skewX:Math.atan(l)*Y8,scaleX:a,scaleY:s}}var r1;function Qkt(n){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return t.isIdentity?qD:snt(t.a,t.b,t.c,t.d,t.e,t.f)}function tLt(n){return n==null||(r1||(r1=document.createElementNS("http://www.w3.org/2000/svg","g")),r1.setAttribute("transform",n),!(n=r1.transform.baseVal.consolidate()))?qD:(n=n.matrix,snt(n.a,n.b,n.c,n.d,n.e,n.f))}function lnt(n,t,e,i){function r(h){return h.length?h.pop()+" ":""}function o(h,u,d,c,f,g){if(h!==d||u!==c){var p=f.push("translate(",null,t,null,e);g.push({i:p-4,x:el(h,d)},{i:p-2,x:el(u,c)})}else(d||c)&&f.push("translate("+d+t+c+e)}function a(h,u,d,c){h!==u?(h-u>180?u+=360:u-h>180&&(h+=360),c.push({i:d.push(r(d)+"rotate(",null,i)-2,x:el(h,u)})):u&&d.push(r(d)+"rotate("+u+i)}function s(h,u,d,c){h!==u?c.push({i:d.push(r(d)+"skewX(",null,i)-2,x:el(h,u)}):u&&d.push(r(d)+"skewX("+u+i)}function l(h,u,d,c,f,g){if(h!==d||u!==c){var p=f.push(r(f)+"scale(",null,",",null,")");g.push({i:p-4,x:el(h,d)},{i:p-2,x:el(u,c)})}else(d!==1||c!==1)&&f.push(r(f)+"scale("+d+","+c+")")}return function(h,u){var d=[],c=[];return h=n(h),u=n(u),o(h.translateX,h.translateY,u.translateX,u.translateY,d,c),a(h.rotate,u.rotate,d,c),s(h.skewX,u.skewX,d,c),l(h.scaleX,h.scaleY,u.scaleX,u.scaleY,d,c),h=u=null,function(f){for(var g=-1,p=c.length,v;++g<p;)d[(v=c[g]).i]=v.x(f);return d.join("")}}}var eLt=lnt(Qkt,"px, ","px)","deg)"),iLt=lnt(tLt,", ",")",")"),nLt=1e-12;function X8(n){return((n=Math.exp(n))+1/n)/2}function rLt(n){return((n=Math.exp(n))-1/n)/2}function oLt(n){return((n=Math.exp(2*n))-1)/(n+1)}const Rw=(function n(t,e,i){function r(o,a){var s=o[0],l=o[1],h=o[2],u=a[0],d=a[1],c=a[2],f=u-s,g=d-l,p=f*f+g*g,v,m;if(p<nLt)m=Math.log(c/h)/t,v=function(x){return[s+x*f,l+x*g,h*Math.exp(t*x*m)]};else{var y=Math.sqrt(p),b=(c*c-h*h+i*p)/(2*h*e*y),_=(c*c-h*h-i*p)/(2*c*e*y),w=Math.log(Math.sqrt(b*b+1)-b),C=Math.log(Math.sqrt(_*_+1)-_);m=(C-w)/t,v=function(x){var S=x*m,A=X8(w),T=h/(e*y)*(A*oLt(t*S+w)-rLt(w));return[s+T*f,l+T*g,h*A/X8(t*S+w)]}}return v.duration=m*1e3*t/Math.SQRT2,v}return r.rho=function(o){var a=Math.max(.001,+o),s=a*a,l=s*s;return n(a,s,l)},r})(Math.SQRT2,2,4);var tv=0,S0=0,jm=0,hnt=1e3,Zx,A0,Jx=0,kf=0,CM=0,lb=typeof performance=="object"&&performance.now?performance:Date,unt=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function kF(){return kf||(unt(aLt),kf=lb.now()+CM)}function aLt(){kf=0}function Qx(){this._call=this._time=this._next=null}Qx.prototype=dnt.prototype={constructor:Qx,restart:function(n,t,e){if(typeof n!="function")throw new TypeError("callback is not a function");e=(e==null?kF():+e)+(t==null?0:+t),!this._next&&A0!==this&&(A0?A0._next=this:Zx=this,A0=this),this._call=n,this._time=e,KD()},stop:function(){this._call&&(this._call=null,this._time=1/0,KD())}};function dnt(n,t,e){var i=new Qx;return i.restart(n,t,e),i}function sLt(){kF(),++tv;for(var n=Zx,t;n;)(t=kf-n._time)>=0&&n._call.call(void 0,t),n=n._next;--tv}function q8(){kf=(Jx=lb.now())+CM,tv=S0=0;try{sLt()}finally{tv=0,hLt(),kf=0}}function lLt(){var n=lb.now(),t=n-Jx;t>hnt&&(CM-=t,Jx=n)}function hLt(){for(var n,t=Zx,e,i=1/0;t;)t._call?(i>t._time&&(i=t._time),n=t,t=t._next):(e=t._next,t._next=null,t=n?n._next=e:Zx=e);A0=n,KD(i)}function KD(n){if(!tv){S0&&(S0=clearTimeout(S0));var t=n-kf;t>24?(n<1/0&&(S0=setTimeout(q8,n-lb.now()-CM)),jm&&(jm=clearInterval(jm))):(jm||(Jx=lb.now(),jm=setInterval(lLt,hnt)),tv=1,unt(q8))}}function K8(n,t,e){var i=new Qx;return t=t==null?0:+t,i.restart(r=>{i.stop(),n(r+t)},t,e),i}var uLt=bM("start","end","cancel","interrupt"),dLt=[],cnt=0,Z8=1,ZD=2,Pw=3,J8=4,JD=5,Bw=6;function wM(n,t,e,i,r,o){var a=n.__transition;if(!a)n.__transition={};else if(e in a)return;cLt(n,e,{name:t,index:i,group:r,on:uLt,tween:dLt,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:cnt})}function LF(n,t){var e=Is(n,t);if(e.state>cnt)throw new Error("too late; already scheduled");return e}function El(n,t){var e=Is(n,t);if(e.state>Pw)throw new Error("too late; already running");return e}function Is(n,t){var e=n.__transition;if(!e||!(e=e[t]))throw new Error("transition not found");return e}function cLt(n,t,e){var i=n.__transition,r;i[t]=e,e.timer=dnt(o,0,e.time);function o(h){e.state=Z8,e.timer.restart(a,e.delay,e.time),e.delay<=h&&a(h-e.delay)}function a(h){var u,d,c,f;if(e.state!==Z8)return l();for(u in i)if(f=i[u],f.name===e.name){if(f.state===Pw)return K8(a);f.state===J8?(f.state=Bw,f.timer.stop(),f.on.call("interrupt",n,n.__data__,f.index,f.group),delete i[u]):+u<t&&(f.state=Bw,f.timer.stop(),f.on.call("cancel",n,n.__data__,f.index,f.group),delete i[u])}if(K8(function(){e.state===Pw&&(e.state=J8,e.timer.restart(s,e.delay,e.time),s(h))}),e.state=ZD,e.on.call("start",n,n.__data__,e.index,e.group),e.state===ZD){for(e.state=Pw,r=new Array(c=e.tween.length),u=0,d=-1;u<c;++u)(f=e.tween[u].value.call(n,n.__data__,e.index,e.group))&&(r[++d]=f);r.length=d+1}}function s(h){for(var u=h<e.duration?e.ease.call(null,h/e.duration):(e.timer.restart(l),e.state=JD,1),d=-1,c=r.length;++d<c;)r[d].call(n,u);e.state===JD&&(e.on.call("end",n,n.__data__,e.index,e.group),l())}function l(){e.state=Bw,e.timer.stop(),delete i[t];for(var h in i)return;delete n.__transition}}function kw(n,t){var e=n.__transition,i,r,o=!0,a;if(e){t=t==null?null:t+"";for(a in e){if((i=e[a]).name!==t){o=!1;continue}r=i.state>ZD&&i.state<JD,i.state=Bw,i.timer.stop(),i.on.call(r?"interrupt":"cancel",n,n.__data__,i.index,i.group),delete e[a]}o&&delete n.__transition}}function fLt(n){return this.each(function(){kw(this,n)})}function gLt(n,t){var e,i;return function(){var r=El(this,n),o=r.tween;if(o!==e){i=e=o;for(var a=0,s=i.length;a<s;++a)if(i[a].name===t){i=i.slice(),i.splice(a,1);break}}r.tween=i}}function pLt(n,t,e){var i,r;if(typeof e!="function")throw new Error;return function(){var o=El(this,n),a=o.tween;if(a!==i){r=(i=a).slice();for(var s={name:t,value:e},l=0,h=r.length;l<h;++l)if(r[l].name===t){r[l]=s;break}l===h&&r.push(s)}o.tween=r}}function vLt(n,t){var e=this._id;if(n+="",arguments.length<2){for(var i=Is(this.node(),e).tween,r=0,o=i.length,a;r<o;++r)if((a=i[r]).name===n)return a.value;return null}return this.each((t==null?gLt:pLt)(e,n,t))}function EF(n,t,e){var i=n._id;return n.each(function(){var r=El(this,i);(r.value||(r.value={}))[t]=e.apply(this,arguments)}),function(r){return Is(r,i).value[t]}}function fnt(n,t){var e;return(typeof t=="number"?el:t instanceof Bf?Kx:(e=Bf(t))?(t=e,Kx):ant)(n,t)}function mLt(n){return function(){this.removeAttribute(n)}}function yLt(n){return function(){this.removeAttributeNS(n.space,n.local)}}function bLt(n,t,e){var i,r=e+"",o;return function(){var a=this.getAttribute(n);return a===r?null:a===i?o:o=t(i=a,e)}}function _Lt(n,t,e){var i,r=e+"",o;return function(){var a=this.getAttributeNS(n.space,n.local);return a===r?null:a===i?o:o=t(i=a,e)}}function CLt(n,t,e){var i,r,o;return function(){var a,s=e(this),l;return s==null?void this.removeAttribute(n):(a=this.getAttribute(n),l=s+"",a===l?null:a===i&&l===r?o:(r=l,o=t(i=a,s)))}}function wLt(n,t,e){var i,r,o;return function(){var a,s=e(this),l;return s==null?void this.removeAttributeNS(n.space,n.local):(a=this.getAttributeNS(n.space,n.local),l=s+"",a===l?null:a===i&&l===r?o:(r=l,o=t(i=a,s)))}}function xLt(n,t){var e=_M(n),i=e==="transform"?iLt:fnt;return this.attrTween(n,typeof t=="function"?(e.local?wLt:CLt)(e,i,EF(this,"attr."+n,t)):t==null?(e.local?yLt:mLt)(e):(e.local?_Lt:bLt)(e,i,t))}function SLt(n,t){return function(e){this.setAttribute(n,t.call(this,e))}}function ALt(n,t){return function(e){this.setAttributeNS(n.space,n.local,t.call(this,e))}}function TLt(n,t){var e,i;function r(){var o=t.apply(this,arguments);return o!==i&&(e=(i=o)&&ALt(n,o)),e}return r._value=t,r}function MLt(n,t){var e,i;function r(){var o=t.apply(this,arguments);return o!==i&&(e=(i=o)&&SLt(n,o)),e}return r._value=t,r}function RLt(n,t){var e="attr."+n;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;var i=_M(n);return this.tween(e,(i.local?TLt:MLt)(i,t))}function PLt(n,t){return function(){LF(this,n).delay=+t.apply(this,arguments)}}function BLt(n,t){return t=+t,function(){LF(this,n).delay=t}}function kLt(n){var t=this._id;return arguments.length?this.each((typeof n=="function"?PLt:BLt)(t,n)):Is(this.node(),t).delay}function LLt(n,t){return function(){El(this,n).duration=+t.apply(this,arguments)}}function ELt(n,t){return t=+t,function(){El(this,n).duration=t}}function DLt(n){var t=this._id;return arguments.length?this.each((typeof n=="function"?LLt:ELt)(t,n)):Is(this.node(),t).duration}function ILt(n,t){if(typeof t!="function")throw new Error;return function(){El(this,n).ease=t}}function OLt(n){var t=this._id;return arguments.length?this.each(ILt(t,n)):Is(this.node(),t).ease}function HLt(n,t){return function(){var e=t.apply(this,arguments);if(typeof e!="function")throw new Error;El(this,n).ease=e}}function zLt(n){if(typeof n!="function")throw new Error;return this.each(HLt(this._id,n))}function FLt(n){typeof n!="function"&&(n=jit(n));for(var t=this._groups,e=t.length,i=new Array(e),r=0;r<e;++r)for(var o=t[r],a=o.length,s=i[r]=[],l,h=0;h<a;++h)(l=o[h])&&n.call(l,l.__data__,h,o)&&s.push(l);return new zh(i,this._parents,this._name,this._id)}function NLt(n){if(n._id!==this._id)throw new Error;for(var t=this._groups,e=n._groups,i=t.length,r=e.length,o=Math.min(i,r),a=new Array(i),s=0;s<o;++s)for(var l=t[s],h=e[s],u=l.length,d=a[s]=new Array(u),c,f=0;f<u;++f)(c=l[f]||h[f])&&(d[f]=c);for(;s<i;++s)a[s]=t[s];return new zh(a,this._parents,this._name,this._id)}function WLt(n){return(n+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||t==="start"})}function VLt(n,t,e){var i,r,o=WLt(t)?LF:El;return function(){var a=o(this,n),s=a.on;s!==i&&(r=(i=s).copy()).on(t,e),a.on=r}}function GLt(n,t){var e=this._id;return arguments.length<2?Is(this.node(),e).on.on(n):this.each(VLt(e,n,t))}function $Lt(n){return function(){var t=this.parentNode;for(var e in this.__transition)if(+e!==n)return;t&&t.removeChild(this)}}function jLt(){return this.on("end.remove",$Lt(this._id))}function ULt(n){var t=this._name,e=this._id;typeof n!="function"&&(n=MF(n));for(var i=this._groups,r=i.length,o=new Array(r),a=0;a<r;++a)for(var s=i[a],l=s.length,h=o[a]=new Array(l),u,d,c=0;c<l;++c)(u=s[c])&&(d=n.call(u,u.__data__,c,s))&&("__data__"in u&&(d.__data__=u.__data__),h[c]=d,wM(h[c],t,e,c,h,Is(u,e)));return new zh(o,this._parents,t,e)}function YLt(n){var t=this._name,e=this._id;typeof n!="function"&&(n=$it(n));for(var i=this._groups,r=i.length,o=[],a=[],s=0;s<r;++s)for(var l=i[s],h=l.length,u,d=0;d<h;++d)if(u=l[d]){for(var c=n.call(u,u.__data__,d,l),f,g=Is(u,e),p=0,v=c.length;p<v;++p)(f=c[p])&&wM(f,t,e,p,c,g);o.push(c),a.push(u)}return new zh(o,a,t,e)}var XLt=C_.prototype.constructor;function qLt(){return new XLt(this._groups,this._parents)}function KLt(n,t){var e,i,r;return function(){var o=Qp(this,n),a=(this.style.removeProperty(n),Qp(this,n));return o===a?null:o===e&&a===i?r:r=t(e=o,i=a)}}function gnt(n){return function(){this.style.removeProperty(n)}}function ZLt(n,t,e){var i,r=e+"",o;return function(){var a=Qp(this,n);return a===r?null:a===i?o:o=t(i=a,e)}}function JLt(n,t,e){var i,r,o;return function(){var a=Qp(this,n),s=e(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(n),Qp(this,n))),a===l?null:a===i&&l===r?o:(r=l,o=t(i=a,s))}}function QLt(n,t){var e,i,r,o="style."+t,a="end."+o,s;return function(){var l=El(this,n),h=l.on,u=l.value[o]==null?s||(s=gnt(t)):void 0;(h!==e||r!==u)&&(i=(e=h).copy()).on(a,r=u),l.on=i}}function tEt(n,t,e){var i=(n+="")=="transform"?eLt:fnt;return t==null?this.styleTween(n,KLt(n,i)).on("end.style."+n,gnt(n)):typeof t=="function"?this.styleTween(n,JLt(n,i,EF(this,"style."+n,t))).each(QLt(this._id,n)):this.styleTween(n,ZLt(n,i,t),e).on("end.style."+n,null)}function eEt(n,t,e){return function(i){this.style.setProperty(n,t.call(this,i),e)}}function iEt(n,t,e){var i,r;function o(){var a=t.apply(this,arguments);return a!==r&&(i=(r=a)&&eEt(n,a,e)),i}return o._value=t,o}function nEt(n,t,e){var i="style."+(n+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,iEt(n,t,e??""))}function rEt(n){return function(){this.textContent=n}}function oEt(n){return function(){var t=n(this);this.textContent=t??""}}function aEt(n){return this.tween("text",typeof n=="function"?oEt(EF(this,"text",n)):rEt(n==null?"":n+""))}function sEt(n){return function(t){this.textContent=n.call(this,t)}}function lEt(n){var t,e;function i(){var r=n.apply(this,arguments);return r!==e&&(t=(e=r)&&sEt(r)),t}return i._value=n,i}function hEt(n){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(n==null)return this.tween(t,null);if(typeof n!="function")throw new Error;return this.tween(t,lEt(n))}function uEt(){for(var n=this._name,t=this._id,e=pnt(),i=this._groups,r=i.length,o=0;o<r;++o)for(var a=i[o],s=a.length,l,h=0;h<s;++h)if(l=a[h]){var u=Is(l,t);wM(l,n,e,h,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new zh(i,this._parents,n,e)}function dEt(){var n,t,e=this,i=e._id,r=e.size();return new Promise(function(o,a){var s={value:a},l={value:function(){--r===0&&o()}};e.each(function(){var h=El(this,i),u=h.on;u!==n&&(t=(n=u).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),h.on=t}),r===0&&o()})}var cEt=0;function zh(n,t,e,i){this._groups=n,this._parents=t,this._name=e,this._id=i}function pnt(){return++cEt}var $l=C_.prototype;zh.prototype={constructor:zh,select:ULt,selectAll:YLt,selectChild:$l.selectChild,selectChildren:$l.selectChildren,filter:FLt,merge:NLt,selection:qLt,transition:uEt,call:$l.call,nodes:$l.nodes,node:$l.node,size:$l.size,empty:$l.empty,each:$l.each,on:GLt,attr:xLt,attrTween:RLt,style:tEt,styleTween:nEt,text:aEt,textTween:hEt,remove:jLt,tween:vLt,delay:kLt,duration:DLt,ease:OLt,easeVarying:zLt,end:dEt,[Symbol.iterator]:$l[Symbol.iterator]};function fEt(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var gEt={time:null,delay:0,duration:250,ease:fEt};function pEt(n,t){for(var e;!(e=n.__transition)||!(e=e[t]);)if(!(n=n.parentNode))throw new Error(`transition ${t} not found`);return e}function vEt(n){var t,e;n instanceof zh?(t=n._id,n=n._name):(t=pnt(),(e=gEt).time=kF(),n=n==null?null:n+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var a=i[o],s=a.length,l,h=0;h<s;++h)(l=a[h])&&wM(l,n,t,h,a,e||pEt(l,t));return new zh(i,this._parents,n,t)}C_.prototype.interrupt=fLt;C_.prototype.transition=vEt;const o1=n=>()=>n;function mEt(n,{sourceEvent:t,target:e,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:e,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function vh(n,t,e){this.k=n,this.x=t,this.y=e}vh.prototype={constructor:vh,scale:function(n){return n===1?this:new vh(this.k*n,this.x,this.y)},translate:function(n,t){return n===0&t===0?this:new vh(this.k,this.x+this.k*n,this.y+this.k*t)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var ev=new vh(1,0,0);vh.prototype;function kB(n){n.stopImmediatePropagation()}function Um(n){n.preventDefault(),n.stopImmediatePropagation()}function yEt(n){return(!n.ctrlKey||n.type==="wheel")&&!n.button}function bEt(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,n.hasAttribute("viewBox")?(n=n.viewBox.baseVal,[[n.x,n.y],[n.x+n.width,n.y+n.height]]):[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]):[[0,0],[n.clientWidth,n.clientHeight]]}function Q8(){return this.__zoom||ev}function _Et(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function CEt(){return navigator.maxTouchPoints||"ontouchstart"in this}function wEt(n,t,e){var i=n.invertX(t[0][0])-e[0][0],r=n.invertX(t[1][0])-e[1][0],o=n.invertY(t[0][1])-e[0][1],a=n.invertY(t[1][1])-e[1][1];return n.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function xEt(){var n=yEt,t=bEt,e=wEt,i=_Et,r=CEt,o=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],s=250,l=Rw,h=bM("start","zoom","end"),u,d,c,f=500,g=150,p=0,v=10;function m(B){B.property("__zoom",Q8).on("wheel.zoom",S,{passive:!1}).on("mousedown.zoom",A).on("dblclick.zoom",T).filter(r).on("touchstart.zoom",M).on("touchmove.zoom",R).on("touchend.zoom touchcancel.zoom",L).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(B,P,k,E){var D=B.selection?B.selection():B;D.property("__zoom",Q8),B!==D?w(B,P,k,E):D.interrupt().each(function(){C(this,arguments).event(E).start().zoom(null,typeof P=="function"?P.apply(this,arguments):P).end()})},m.scaleBy=function(B,P,k,E){m.scaleTo(B,function(){var D=this.__zoom.k,I=typeof P=="function"?P.apply(this,arguments):P;return D*I},k,E)},m.scaleTo=function(B,P,k,E){m.transform(B,function(){var D=t.apply(this,arguments),I=this.__zoom,O=k==null?_(D):typeof k=="function"?k.apply(this,arguments):k,H=I.invert(O),F=typeof P=="function"?P.apply(this,arguments):P;return e(b(y(I,F),O,H),D,a)},k,E)},m.translateBy=function(B,P,k,E){m.transform(B,function(){return e(this.__zoom.translate(typeof P=="function"?P.apply(this,arguments):P,typeof k=="function"?k.apply(this,arguments):k),t.apply(this,arguments),a)},null,E)},m.translateTo=function(B,P,k,E,D){m.transform(B,function(){var I=t.apply(this,arguments),O=this.__zoom,H=E==null?_(I):typeof E=="function"?E.apply(this,arguments):E;return e(ev.translate(H[0],H[1]).scale(O.k).translate(typeof P=="function"?-P.apply(this,arguments):-P,typeof k=="function"?-k.apply(this,arguments):-k),I,a)},E,D)};function y(B,P){return P=Math.max(o[0],Math.min(o[1],P)),P===B.k?B:new vh(P,B.x,B.y)}function b(B,P,k){var E=P[0]-k[0]*B.k,D=P[1]-k[1]*B.k;return E===B.x&&D===B.y?B:new vh(B.k,E,D)}function _(B){return[(+B[0][0]+ +B[1][0])/2,(+B[0][1]+ +B[1][1])/2]}function w(B,P,k,E){B.on("start.zoom",function(){C(this,arguments).event(E).start()}).on("interrupt.zoom end.zoom",function(){C(this,arguments).event(E).end()}).tween("zoom",function(){var D=this,I=arguments,O=C(D,I).event(E),H=t.apply(D,I),F=k==null?_(H):typeof k=="function"?k.apply(D,I):k,N=Math.max(H[1][0]-H[0][0],H[1][1]-H[0][1]),$=D.__zoom,V=typeof P=="function"?P.apply(D,I):P,X=l($.invert(F).concat(N/$.k),V.invert(F).concat(N/V.k));return function(Z){if(Z===1)Z=V;else{var tt=X(Z),K=N/tt[2];Z=new vh(K,F[0]-tt[0]*K,F[1]-tt[1]*K)}O.zoom(null,Z)}})}function C(B,P,k){return!k&&B.__zooming||new x(B,P)}function x(B,P){this.that=B,this.args=P,this.active=0,this.sourceEvent=null,this.extent=t.apply(B,P),this.taps=0}x.prototype={event:function(B){return B&&(this.sourceEvent=B),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(B,P){return this.mouse&&B!=="mouse"&&(this.mouse[1]=P.invert(this.mouse[0])),this.touch0&&B!=="touch"&&(this.touch0[1]=P.invert(this.touch0[0])),this.touch1&&B!=="touch"&&(this.touch1[1]=P.invert(this.touch1[0])),this.that.__zoom=P,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(B){var P=ds(this.that).datum();h.call(B,this.that,new mEt(B,{sourceEvent:this.sourceEvent,target:m,transform:this.that.__zoom,dispatch:h}),P)}};function S(B,...P){if(!n.apply(this,arguments))return;var k=C(this,P).event(B),E=this.__zoom,D=Math.max(o[0],Math.min(o[1],E.k*Math.pow(2,i.apply(this,arguments)))),I=Qs(B);if(k.wheel)(k.mouse[0][0]!==I[0]||k.mouse[0][1]!==I[1])&&(k.mouse[1]=E.invert(k.mouse[0]=I)),clearTimeout(k.wheel);else{if(E.k===D)return;k.mouse=[I,E.invert(I)],kw(this),k.start()}Um(B),k.wheel=setTimeout(O,g),k.zoom("mouse",e(b(y(E,D),k.mouse[0],k.mouse[1]),k.extent,a));function O(){k.wheel=null,k.end()}}function A(B,...P){if(c||!n.apply(this,arguments))return;var k=B.currentTarget,E=C(this,P,!0).event(B),D=ds(B.view).on("mousemove.zoom",F,!0).on("mouseup.zoom",N,!0),I=Qs(B,k),O=B.clientX,H=B.clientY;ent(B.view),kB(B),E.mouse=[I,this.__zoom.invert(I)],kw(this),E.start();function F($){if(Um($),!E.moved){var V=$.clientX-O,X=$.clientY-H;E.moved=V*V+X*X>p}E.event($).zoom("mouse",e(b(E.that.__zoom,E.mouse[0]=Qs($,k),E.mouse[1]),E.extent,a))}function N($){D.on("mousemove.zoom mouseup.zoom",null),int($.view,E.moved),Um($),E.event($).end()}}function T(B,...P){if(n.apply(this,arguments)){var k=this.__zoom,E=Qs(B.changedTouches?B.changedTouches[0]:B,this),D=k.invert(E),I=k.k*(B.shiftKey?.5:2),O=e(b(y(k,I),E,D),t.apply(this,P),a);Um(B),s>0?ds(this).transition().duration(s).call(w,O,E,B):ds(this).call(m.transform,O,E,B)}}function M(B,...P){if(n.apply(this,arguments)){var k=B.touches,E=k.length,D=C(this,P,B.changedTouches.length===E).event(B),I,O,H,F;for(kB(B),O=0;O<E;++O)H=k[O],F=Qs(H,this),F=[F,this.__zoom.invert(F),H.identifier],D.touch0?!D.touch1&&D.touch0[2]!==F[2]&&(D.touch1=F,D.taps=0):(D.touch0=F,I=!0,D.taps=1+!!u);u&&(u=clearTimeout(u)),I&&(D.taps<2&&(d=F[0],u=setTimeout(function(){u=null},f)),kw(this),D.start())}}function R(B,...P){if(this.__zooming){var k=C(this,P).event(B),E=B.changedTouches,D=E.length,I,O,H,F;for(Um(B),I=0;I<D;++I)O=E[I],H=Qs(O,this),k.touch0&&k.touch0[2]===O.identifier?k.touch0[0]=H:k.touch1&&k.touch1[2]===O.identifier&&(k.touch1[0]=H);if(O=k.that.__zoom,k.touch1){var N=k.touch0[0],$=k.touch0[1],V=k.touch1[0],X=k.touch1[1],Z=(Z=V[0]-N[0])*Z+(Z=V[1]-N[1])*Z,tt=(tt=X[0]-$[0])*tt+(tt=X[1]-$[1])*tt;O=y(O,Math.sqrt(Z/tt)),H=[(N[0]+V[0])/2,(N[1]+V[1])/2],F=[($[0]+X[0])/2,($[1]+X[1])/2]}else if(k.touch0)H=k.touch0[0],F=k.touch0[1];else return;k.zoom("touch",e(b(O,H,F),k.extent,a))}}function L(B,...P){if(this.__zooming){var k=C(this,P).event(B),E=B.changedTouches,D=E.length,I,O;for(kB(B),c&&clearTimeout(c),c=setTimeout(function(){c=null},f),I=0;I<D;++I)O=E[I],k.touch0&&k.touch0[2]===O.identifier?delete k.touch0:k.touch1&&k.touch1[2]===O.identifier&&delete k.touch1;if(k.touch1&&!k.touch0&&(k.touch0=k.touch1,delete k.touch1),k.touch0)k.touch0[1]=this.__zoom.invert(k.touch0[0]);else if(k.end(),k.taps===2&&(O=Qs(O,this),Math.hypot(d[0]-O[0],d[1]-O[1])<v)){var H=ds(this).on("dblclick.zoom");H&&H.apply(this,arguments)}}}return m.wheelDelta=function(B){return arguments.length?(i=typeof B=="function"?B:o1(+B),m):i},m.filter=function(B){return arguments.length?(n=typeof B=="function"?B:o1(!!B),m):n},m.touchable=function(B){return arguments.length?(r=typeof B=="function"?B:o1(!!B),m):r},m.extent=function(B){return arguments.length?(t=typeof B=="function"?B:o1([[+B[0][0],+B[0][1]],[+B[1][0],+B[1][1]]]),m):t},m.scaleExtent=function(B){return arguments.length?(o[0]=+B[0],o[1]=+B[1],m):[o[0],o[1]]},m.translateExtent=function(B){return arguments.length?(a[0][0]=+B[0][0],a[1][0]=+B[1][0],a[0][1]=+B[0][1],a[1][1]=+B[1][1],m):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},m.constrain=function(B){return arguments.length?(e=B,m):e},m.duration=function(B){return arguments.length?(s=+B,m):s},m.interpolate=function(B){return arguments.length?(l=B,m):l},m.on=function(){var B=h.on.apply(h,arguments);return B===h?m:B},m.clickDistance=function(B){return arguments.length?(p=(B=+B)*B,m):Math.sqrt(p)},m.tapDistance=function(B){return arguments.length?(v=+B,m):v},m}var $t=(n=>(n.Left="left",n.Top="top",n.Right="right",n.Bottom="bottom",n))($t||{}),DF=(n=>(n.Partial="partial",n.Full="full",n))(DF||{}),Ac=(n=>(n.Bezier="default",n.SimpleBezier="simple-bezier",n.Straight="straight",n.Step="step",n.SmoothStep="smoothstep",n))(Ac||{}),od=(n=>(n.Strict="strict",n.Loose="loose",n))(od||{}),QD=(n=>(n.Arrow="arrow",n.ArrowClosed="arrowclosed",n))(QD||{}),ry=(n=>(n.Free="free",n.Vertical="vertical",n.Horizontal="horizontal",n))(ry||{});const SEt=["INPUT","SELECT","TEXTAREA"],AEt=typeof document<"u"?document:null;function tI(n){var t,e;const i=((e=(t=n.composedPath)==null?void 0:t.call(n))==null?void 0:e[0])||n.target,r=typeof i?.hasAttribute=="function"?i.hasAttribute("contenteditable"):!1,o=typeof i?.closest=="function"?i.closest(".nokey"):null;return SEt.includes(i?.nodeName)||r||!!o}function TEt(n){return n.ctrlKey||n.metaKey||n.shiftKey||n.altKey}function t9(n,t,e,i){const r=t.replace("+",`
`).replace(`

`,`
+`).split(`
`).map(a=>a.trim().toLowerCase());if(r.length===1)return n.toLowerCase()===t.toLowerCase();i||e.add(n.toLowerCase());const o=r.every((a,s)=>e.has(a)&&Array.from(e.values())[s]===r[s]);return i&&e.delete(n.toLowerCase()),o}function MEt(n,t){return e=>{if(!e.code&&!e.key)return!1;const i=REt(e.code,n);return Array.isArray(n)?n.some(r=>t9(e[i],r,t,e.type==="keyup")):t9(e[i],n,t,e.type==="keyup")}}function REt(n,t){return t.includes(n)?"code":"key"}function oy(n,t){const e=ke(()=>Ne(t?.target)??AEt),i=Zw(Ne(n)===!0);let r=!1;const o=new Set;let a=l(Ne(n));xi(()=>Ne(n),(h,u)=>{typeof u=="boolean"&&typeof h!="boolean"&&s(),a=l(h)},{immediate:!0}),Vit(["blur","contextmenu"],s),O8((...h)=>a(...h),h=>{var u,d;const c=Ne(t?.actInsideInputWithModifier)??!0,f=Ne(t?.preventDefault)??!1;if(r=TEt(h),(!r||r&&!c)&&tI(h))return;const p=((d=(u=h.composedPath)==null?void 0:u.call(h))==null?void 0:d[0])||h.target,v=p?.nodeName==="BUTTON"||p?.nodeName==="A";!f&&(r||!v)&&h.preventDefault(),i.value=!0},{eventName:"keydown",target:e}),O8((...h)=>a(...h),h=>{const u=Ne(t?.actInsideInputWithModifier)??!0;if(i.value){if((!r||r&&!u)&&tI(h))return;r=!1,i.value=!1}},{eventName:"keyup",target:e});function s(){r=!1,o.clear(),i.value=Ne(n)===!0}function l(h){return h===null?(s(),()=>!1):typeof h=="boolean"?(s(),i.value=h,()=>!1):Array.isArray(h)||typeof h=="string"?MEt(h,o):h}return i}const vnt="vue-flow__node-desc",mnt="vue-flow__edge-desc",PEt="vue-flow__aria-live",ynt=["Enter"," ","Escape"],Cp={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};function tS(n){return{...n.computedPosition||{x:0,y:0},width:n.dimensions.width||0,height:n.dimensions.height||0}}function eS(n,t){const e=Math.max(0,Math.min(n.x+n.width,t.x+t.width)-Math.max(n.x,t.x)),i=Math.max(0,Math.min(n.y+n.height,t.y+t.height)-Math.max(n.y,t.y));return Math.ceil(e*i)}function xM(n){return{width:n.offsetWidth,height:n.offsetHeight}}function Lf(n,t=0,e=1){return Math.min(Math.max(n,t),e)}function bnt(n,t){return{x:Lf(n.x,t[0][0],t[1][0]),y:Lf(n.y,t[0][1],t[1][1])}}function e9(n){const t=n.getRootNode();return"elementFromPoint"in t?t:window.document}function ad(n){return n&&typeof n=="object"&&"id"in n&&"source"in n&&"target"in n}function cf(n){return n&&typeof n=="object"&&"id"in n&&"position"in n&&!ad(n)}function T0(n){return cf(n)&&"computedPosition"in n}function a1(n){return!Number.isNaN(n)&&Number.isFinite(n)}function BEt(n){return a1(n.width)&&a1(n.height)&&a1(n.x)&&a1(n.y)}function kEt(n,t,e){const i={id:n.id.toString(),type:n.type??"default",dimensions:N0({width:0,height:0}),computedPosition:N0({z:0,...n.position}),handleBounds:{source:[],target:[]},draggable:void 0,selectable:void 0,connectable:void 0,focusable:void 0,selected:!1,dragging:!1,resizing:!1,initialized:!1,isParent:!1,position:{x:0,y:0},data:Hn(n.data)?n.data:{},events:N0(Hn(n.events)?n.events:{})};return Object.assign(t??i,n,{id:n.id.toString(),parentNode:e})}function _nt(n,t,e){var i,r;const o={id:n.id.toString(),type:n.type??t?.type??"default",source:n.source.toString(),target:n.target.toString(),sourceHandle:(i=n.sourceHandle)==null?void 0:i.toString(),targetHandle:(r=n.targetHandle)==null?void 0:r.toString(),updatable:n.updatable??e?.updatable,selectable:n.selectable??e?.selectable,focusable:n.focusable??e?.focusable,data:Hn(n.data)?n.data:{},events:N0(Hn(n.events)?n.events:{}),label:n.label??"",interactionWidth:n.interactionWidth??e?.interactionWidth,...e??{}};return Object.assign(t??o,n,{id:n.id.toString()})}function Cnt(n,t,e,i){const r=typeof n=="string"?n:n.id,o=new Set,a=i==="source"?"target":"source";for(const s of e)s[a]===r&&o.add(s[i]);return t.filter(s=>o.has(s.id))}function LEt(...n){if(n.length===3){const[o,a,s]=n;return Cnt(o,a,s,"target")}const[t,e]=n,i=typeof t=="string"?t:t.id;return e.filter(o=>ad(o)&&o.source===i).map(o=>e.find(a=>cf(a)&&a.id===o.target))}function EEt(...n){if(n.length===3){const[o,a,s]=n;return Cnt(o,a,s,"source")}const[t,e]=n,i=typeof t=="string"?t:t.id;return e.filter(o=>ad(o)&&o.target===i).map(o=>e.find(a=>cf(a)&&a.id===o.source))}function wnt({source:n,sourceHandle:t,target:e,targetHandle:i}){return`vueflow__edge-${n}${t??""}-${e}${i??""}`}function DEt(n,t){return t.some(e=>ad(e)&&e.source===n.source&&e.target===n.target&&(e.sourceHandle===n.sourceHandle||!e.sourceHandle&&!n.sourceHandle)&&(e.targetHandle===n.targetHandle||!e.targetHandle&&!n.targetHandle))}function eI({x:n,y:t},{x:e,y:i,zoom:r}){return{x:n*r+e,y:t*r+i}}function hb({x:n,y:t},{x:e,y:i,zoom:r},o=!1,a=[1,1]){const s={x:(n-e)/r,y:(t-i)/r};return o?SM(s,a):s}function IEt(n,t){return{x:Math.min(n.x,t.x),y:Math.min(n.y,t.y),x2:Math.max(n.x2,t.x2),y2:Math.max(n.y2,t.y2)}}function xnt({x:n,y:t,width:e,height:i}){return{x:n,y:t,x2:n+e,y2:t+i}}function OEt({x:n,y:t,x2:e,y2:i}){return{x:n,y:t,width:e-n,height:i-t}}function Snt(n){let t={x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY,x2:Number.NEGATIVE_INFINITY,y2:Number.NEGATIVE_INFINITY};for(let e=0;e<n.length;e++){const i=n[e];t=IEt(t,xnt({...i.computedPosition,...i.dimensions}))}return OEt(t)}function Ant(n,t,e={x:0,y:0,zoom:1},i=!1,r=!1){const o={...hb(t,e),width:t.width/e.zoom,height:t.height/e.zoom},a=[];for(const s of n){const{dimensions:l,selectable:h=!0,hidden:u=!1}=s,d=l.width??s.width??null,c=l.height??s.height??null;if(r&&!h||u)continue;const f=eS(o,tS(s)),g=d===null||c===null,p=i&&f>0,v=(d??0)*(c??0);(g||p||f>=v||s.dragging)&&a.push(s)}return a}function Tnt(n,t){const e=new Set;if(typeof n=="string")e.add(n);else if(n.length>=1)for(const i of n)e.add(i.id);return t.filter(i=>e.has(i.source)||e.has(i.target))}function i9(n,t,e,i,r,o=.1,a={x:0,y:0}){const s=t/(n.width*(1+o)),l=e/(n.height*(1+o)),h=Math.min(s,l),u=Lf(h,i,r),d=n.x+n.width/2,c=n.y+n.height/2,f=t/2-d*u+(a.x??0),g=e/2-c*u+(a.y??0);return{x:f,y:g,zoom:u}}function HEt(n,t){return{x:t.x+n.x,y:t.y+n.y,z:(n.z>t.z?n.z:t.z)+1}}function Mnt(n,t){if(!n.parentNode)return!1;const e=t(n.parentNode);return e?e.selected?!0:Mnt(e,t):!1}function ub(n,t){return typeof n>"u"?"":typeof n=="string"?n:`${t?`${t}__`:""}${Object.keys(n).sort().map(i=>`${i}=${n[i]}`).join("&")}`}function n9(n,t,e){return n<t?Lf(Math.abs(n-t),1,t)/t:n>e?-Lf(Math.abs(n-e),1,t)/t:0}function Rnt(n,t,e=15,i=40){const r=n9(n.x,i,t.width-i)*e,o=n9(n.y,i,t.height-i)*e;return[r,o]}function LB(n,t){if(t){const e=n.position.x+n.dimensions.width-t.dimensions.width,i=n.position.y+n.dimensions.height-t.dimensions.height;if(e>0||i>0||n.position.x<0||n.position.y<0){let r={};if(typeof t.style=="function"?r={...t.style(t)}:t.style&&(r={...t.style}),r.width=r.width??`${t.dimensions.width}px`,r.height=r.height??`${t.dimensions.height}px`,e>0)if(typeof r.width=="string"){const o=Number(r.width.replace("px",""));r.width=`${o+e}px`}else r.width+=e;if(i>0)if(typeof r.height=="string"){const o=Number(r.height.replace("px",""));r.height=`${o+i}px`}else r.height+=i;if(n.position.x<0){const o=Math.abs(n.position.x);if(t.position.x=t.position.x-o,typeof r.width=="string"){const a=Number(r.width.replace("px",""));r.width=`${a+o}px`}else r.width+=o;n.position.x=0}if(n.position.y<0){const o=Math.abs(n.position.y);if(t.position.y=t.position.y-o,typeof r.height=="string"){const a=Number(r.height.replace("px",""));r.height=`${a+o}px`}else r.height+=o;n.position.y=0}t.dimensions.width=Number(r.width.toString().replace("px","")),t.dimensions.height=Number(r.height.toString().replace("px","")),typeof t.style=="function"?t.style=o=>{const a=t.style;return{...a(o),...r}}:t.style={...t.style,...r}}}}function r9(n,t){var e,i;const r=n.filter(a=>a.type==="add"||a.type==="remove");for(const a of r)if(a.type==="add")t.findIndex(l=>l.id===a.item.id)===-1&&t.push(a.item);else if(a.type==="remove"){const s=t.findIndex(l=>l.id===a.id);s!==-1&&t.splice(s,1)}const o=t.map(a=>a.id);for(const a of t)for(const s of n)if(s.id===a.id)switch(s.type){case"select":a.selected=s.selected;break;case"position":if(T0(a)&&(typeof s.position<"u"&&(a.position=s.position),typeof s.dragging<"u"&&(a.dragging=s.dragging),a.expandParent&&a.parentNode)){const l=t[o.indexOf(a.parentNode)];l&&T0(l)&&LB(a,l)}break;case"dimensions":if(T0(a)&&(typeof s.dimensions<"u"&&(a.dimensions=s.dimensions),typeof s.updateStyle<"u"&&s.updateStyle&&(a.style={...a.style||{},width:`${(e=s.dimensions)==null?void 0:e.width}px`,height:`${(i=s.dimensions)==null?void 0:i.height}px`}),typeof s.resizing<"u"&&(a.resizing=s.resizing),a.expandParent&&a.parentNode)){const l=t[o.indexOf(a.parentNode)];l&&T0(l)&&(!!l.dimensions.width&&!!l.dimensions.height?LB(a,l):yh(()=>{LB(a,l)}))}break}return t}function vu(n,t){return{id:n,type:"select",selected:t}}function o9(n){return{item:n,type:"add"}}function a9(n){return{id:n,type:"remove"}}function s9(n,t,e,i,r){return{id:n,source:t,target:e,sourceHandle:i||null,targetHandle:r||null,type:"remove"}}function _u(n,t=new Set,e=!1){const i=[];for(const[r,o]of n){const a=t.has(r);!(o.selected===void 0&&!a)&&o.selected!==a&&(e&&(o.selected=a),i.push(vu(o.id,a)))}return i}function Et(n){const t=new Set;let e=!1;const i=()=>t.size>0;n&&(e=!0,t.add(n));const r=s=>{t.delete(s)};return{on:s=>{n&&e&&t.delete(n),t.add(s);const l=()=>{r(s),n&&e&&t.add(n)};return yM(l),{off:l}},off:r,trigger:s=>Promise.all(Array.from(t).map(l=>l(s))),hasListeners:i,fns:t}}function l9(n,t,e){let i=n;do{if(i&&i.matches(t))return!0;if(i===e)return!1;i=i.parentElement}while(i);return!1}function zEt(n,t,e,i,r){var o,a;const s=[];for(const l of n)(l.selected||l.id===r)&&(!l.parentNode||!Mnt(l,i))&&(l.draggable||t&&typeof l.draggable>"u")&&s.push(N0({id:l.id,position:l.position||{x:0,y:0},distance:{x:e.x-((o=l.computedPosition)==null?void 0:o.x)||0,y:e.y-((a=l.computedPosition)==null?void 0:a.y)||0},from:l.computedPosition,extent:l.extent,parentNode:l.parentNode,dimensions:l.dimensions,expandParent:l.expandParent}));return s}function EB({id:n,dragItems:t,findNode:e}){const i=[];for(const r of t){const o=e(r.id);o&&i.push(o)}return[n?i.find(r=>r.id===n):i[0],i]}function Pnt(n){if(Array.isArray(n))switch(n.length){case 1:return[n[0],n[0],n[0],n[0]];case 2:return[n[0],n[1],n[0],n[1]];case 3:return[n[0],n[1],n[2],n[1]];case 4:return n;default:return[0,0,0,0]}return[n,n,n,n]}function FEt(n,t,e){const[i,r,o,a]=typeof n!="string"?Pnt(n.padding):[0,0,0,0];return e&&typeof e.computedPosition.x<"u"&&typeof e.computedPosition.y<"u"&&typeof e.dimensions.width<"u"&&typeof e.dimensions.height<"u"?[[e.computedPosition.x+a,e.computedPosition.y+i],[e.computedPosition.x+e.dimensions.width-r,e.computedPosition.y+e.dimensions.height-o]]:!1}function NEt(n,t,e,i){let r=n.extent||e;if((r==="parent"||!Array.isArray(r)&&r?.range==="parent")&&!n.expandParent)if(n.parentNode&&i&&n.dimensions.width&&n.dimensions.height){const o=FEt(r,n,i);o&&(r=o)}else t(new Xn(Nn.NODE_EXTENT_INVALID,n.id)),r=e;else if(Array.isArray(r)){const o=i?.computedPosition.x||0,a=i?.computedPosition.y||0;r=[[r[0][0]+o,r[0][1]+a],[r[1][0]+o,r[1][1]+a]]}else if(r!=="parent"&&r?.range&&Array.isArray(r.range)){const[o,a,s,l]=Pnt(r.padding),h=i?.computedPosition.x||0,u=i?.computedPosition.y||0;r=[[r.range[0][0]+h+l,r.range[0][1]+u+o],[r.range[1][0]+h-a,r.range[1][1]+u-s]]}return r==="parent"?[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]]:r}function WEt({width:n,height:t},e){return[e[0],[e[1][0]-(n||0),e[1][1]-(t||0)]]}function IF(n,t,e,i,r){const o=WEt(n.dimensions,NEt(n,e,i,r)),a=bnt(t,o);return{position:{x:a.x-(r?.computedPosition.x||0),y:a.y-(r?.computedPosition.y||0)},computedPosition:a}}function iv(n,t,e=$t.Left,i=!1){const r=(t?.x??0)+n.computedPosition.x,o=(t?.y??0)+n.computedPosition.y,{width:a,height:s}=t??jEt(n);if(i)return{x:r+a/2,y:o+s/2};switch(t?.position??e){case $t.Top:return{x:r+a/2,y:o};case $t.Right:return{x:r+a,y:o+s/2};case $t.Bottom:return{x:r+a/2,y:o+s};case $t.Left:return{x:r,y:o+s/2}}}function h9(n,t){return n&&(t?n.find(e=>e.id===t):n[0])||null}function VEt({sourcePos:n,targetPos:t,sourceWidth:e,sourceHeight:i,targetWidth:r,targetHeight:o,width:a,height:s,viewport:l}){const h={x:Math.min(n.x,t.x),y:Math.min(n.y,t.y),x2:Math.max(n.x+e,t.x+r),y2:Math.max(n.y+i,t.y+o)};h.x===h.x2&&(h.x2+=1),h.y===h.y2&&(h.y2+=1);const u=xnt({x:(0-l.x)/l.zoom,y:(0-l.y)/l.zoom,width:a/l.zoom,height:s/l.zoom}),d=Math.max(0,Math.min(u.x2,h.x2)-Math.max(u.x,h.x)),c=Math.max(0,Math.min(u.y2,h.y2)-Math.max(u.y,h.y));return Math.ceil(d*c)>0}function GEt(n,t,e=!1){const i=typeof n.zIndex=="number";let r=i?n.zIndex:0;const o=t(n.source),a=t(n.target);return!o||!a?0:(e&&(r=i?n.zIndex:Math.max(o.computedPosition.z||0,a.computedPosition.z||0)),r)}var Nn=(n=>(n.MISSING_STYLES="MISSING_STYLES",n.MISSING_VIEWPORT_DIMENSIONS="MISSING_VIEWPORT_DIMENSIONS",n.NODE_INVALID="NODE_INVALID",n.NODE_NOT_FOUND="NODE_NOT_FOUND",n.NODE_MISSING_PARENT="NODE_MISSING_PARENT",n.NODE_TYPE_MISSING="NODE_TYPE_MISSING",n.NODE_EXTENT_INVALID="NODE_EXTENT_INVALID",n.EDGE_INVALID="EDGE_INVALID",n.EDGE_NOT_FOUND="EDGE_NOT_FOUND",n.EDGE_SOURCE_MISSING="EDGE_SOURCE_MISSING",n.EDGE_TARGET_MISSING="EDGE_TARGET_MISSING",n.EDGE_TYPE_MISSING="EDGE_TYPE_MISSING",n.EDGE_SOURCE_TARGET_SAME="EDGE_SOURCE_TARGET_SAME",n.EDGE_SOURCE_TARGET_MISSING="EDGE_SOURCE_TARGET_MISSING",n.EDGE_ORPHANED="EDGE_ORPHANED",n.USEVUEFLOW_OPTIONS="USEVUEFLOW_OPTIONS",n))(Nn||{});const u9={MISSING_STYLES:()=>"It seems that you haven't loaded the necessary styles. Please import '@vue-flow/core/dist/style.css' to ensure that the graph is rendered correctly",MISSING_VIEWPORT_DIMENSIONS:()=>"The Vue Flow parent container needs a width and a height to render the graph",NODE_INVALID:n=>`Node is invalid
Node: ${n}`,NODE_NOT_FOUND:n=>`Node not found
Node: ${n}`,NODE_MISSING_PARENT:(n,t)=>`Node is missing a parent
Node: ${n}
Parent: ${t}`,NODE_TYPE_MISSING:n=>`Node type is missing
Type: ${n}`,NODE_EXTENT_INVALID:n=>`Only child nodes can use a parent extent
Node: ${n}`,EDGE_INVALID:n=>`An edge needs a source and a target
Edge: ${n}`,EDGE_SOURCE_MISSING:(n,t)=>`Edge source is missing
Edge: ${n} 
Source: ${t}`,EDGE_TARGET_MISSING:(n,t)=>`Edge target is missing
Edge: ${n} 
Target: ${t}`,EDGE_TYPE_MISSING:n=>`Edge type is missing
Type: ${n}`,EDGE_SOURCE_TARGET_SAME:(n,t,e)=>`Edge source and target are the same
Edge: ${n} 
Source: ${t} 
Target: ${e}`,EDGE_SOURCE_TARGET_MISSING:(n,t,e)=>`Edge source or target is missing
Edge: ${n} 
Source: ${t} 
Target: ${e}`,EDGE_ORPHANED:n=>`Edge was orphaned (suddenly missing source or target) and has been removed
Edge: ${n}`,EDGE_NOT_FOUND:n=>`Edge not found
Edge: ${n}`,USEVUEFLOW_OPTIONS:()=>"The options parameter is deprecated and will be removed in the next major version. Please use the id parameter instead"};class Xn extends Error{constructor(t,...e){var i;super((i=u9[t])==null?void 0:i.call(u9,...e)),this.name="VueFlowError",this.code=t,this.args=e}}function OF(n){return"clientX"in n}function $Et(n){return"sourceEvent"in n}function rl(n,t){const e=OF(n);let i,r;return e?(i=n.clientX,r=n.clientY):"touches"in n&&n.touches.length>0?(i=n.touches[0].clientX,r=n.touches[0].clientY):"changedTouches"in n&&n.changedTouches.length>0?(i=n.changedTouches[0].clientX,r=n.changedTouches[0].clientY):(i=0,r=0),{x:i-(t?.left??0),y:r-(t?.top??0)}}const iS=()=>{var n;return typeof navigator<"u"&&((n=navigator?.userAgent)==null?void 0:n.indexOf("Mac"))>=0};function jEt(n){var t,e;return{width:((t=n.dimensions)==null?void 0:t.width)??n.width??0,height:((e=n.dimensions)==null?void 0:e.height)??n.height??0}}function SM(n,t=[1,1]){return{x:t[0]*Math.round(n.x/t[0]),y:t[1]*Math.round(n.y/t[1])}}const UEt=()=>!0;function DB(n){n?.classList.remove("valid","connecting","vue-flow__handle-valid","vue-flow__handle-connecting")}function YEt(n,t,e){const i=[],r={x:n.x-e,y:n.y-e,width:e*2,height:e*2};for(const o of t.values())eS(r,tS(o))>0&&i.push(o);return i}const XEt=250;function qEt(n,t,e,i){var r,o;let a=[],s=Number.POSITIVE_INFINITY;const l=YEt(n,e,t+XEt);for(const h of l){const u=[...((r=h.handleBounds)==null?void 0:r.source)??[],...((o=h.handleBounds)==null?void 0:o.target)??[]];for(const d of u){if(i.nodeId===d.nodeId&&i.type===d.type&&i.id===d.id)continue;const{x:c,y:f}=iv(h,d,d.position,!0),g=Math.sqrt((c-n.x)**2+(f-n.y)**2);g>t||(g<s?(a=[{...d,x:c,y:f}],s=g):g===s&&a.push({...d,x:c,y:f}))}}if(!a.length)return null;if(a.length>1){const h=i.type==="source"?"target":"source";return a.find(u=>u.type===h)??a[0]}return a[0]}function d9(n,{handle:t,connectionMode:e,fromNodeId:i,fromHandleId:r,fromType:o,doc:a,lib:s,flowId:l,isValidConnection:h=UEt},u,d,c){const f=o==="target",g=t?a.querySelector(`.${s}-flow__handle[data-id="${l}-${t?.nodeId}-${t?.id}-${t?.type}"]`):null,{x:p,y:v}=rl(n),m=a.elementFromPoint(p,v),y=m?.classList.contains(`${s}-flow__handle`)?m:g,b={handleDomNode:y,isValid:!1,connection:null,toHandle:null};if(y){const _=Bnt(void 0,y),w=y.getAttribute("data-nodeid"),C=y.getAttribute("data-handleid"),x=y.classList.contains("connectable"),S=y.classList.contains("connectableend");if(!w||!_)return b;const A={source:f?w:i,sourceHandle:f?C:r,target:f?i:w,targetHandle:f?r:C};b.connection=A;const M=x&&S&&(e===od.Strict?f&&_==="source"||!f&&_==="target":w!==i||C!==r);b.isValid=M&&h(A,{nodes:d,edges:u,sourceNode:c(i),targetNode:c(w)}),b.toHandle=t}return b}function Bnt(n,t){return n||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function KEt(n,t){let e=null;return t?e="valid":n&&!t&&(e="invalid"),e}function ZEt(n,t){let e=null;return t?e=!0:n&&!t&&(e=!1),e}function JEt(n,t,e,i,r,o=!1){var a,s,l;const h=i.get(n);if(!h)return null;const u=r===od.Strict?(a=h.handleBounds)==null?void 0:a[t]:[...((s=h.handleBounds)==null?void 0:s.source)??[],...((l=h.handleBounds)==null?void 0:l.target)??[]],d=(e?u?.find(c=>c.id===e):u?.[0])??null;return d&&o?{...d,...iv(h,d,d.position,!0)}:d}const iI={[$t.Left]:$t.Right,[$t.Right]:$t.Left,[$t.Top]:$t.Bottom,[$t.Bottom]:$t.Top},QEt=["production","prod"];function AM(n,...t){knt()}function knt(){return!QEt.includes("production")}function c9(n,t,e,i,r){const o=t.querySelectorAll(`.vue-flow__handle.${n}`);return o?.length?Array.from(o).map(a=>{const s=a.getBoundingClientRect();return{id:a.getAttribute("data-handleid"),type:n,nodeId:r,position:a.getAttribute("data-handlepos"),x:(s.left-e.left)/i,y:(s.top-e.top)/i,...xM(a)}}):null}function nI(n,t,e,i,r,o=!1,a){r.value=!1,n.selected?(o||n.selected&&t)&&(i([n]),yh(()=>{a.blur()})):e([n])}function Hn(n){return typeof ne(n)<"u"}function tDt(n,t,e,i){if(!n||!n.source||!n.target)return e(new Xn(Nn.EDGE_INVALID,n?.id??"[ID UNKNOWN]")),!1;let r;return ad(n)?r=n:r={...n,id:wnt(n)},r=_nt(r,void 0,i),DEt(r,t)?!1:r}function eDt(n,t,e,i,r){if(!t.source||!t.target)return r(new Xn(Nn.EDGE_INVALID,n.id)),!1;if(!e)return r(new Xn(Nn.EDGE_NOT_FOUND,n.id)),!1;const{id:o,...a}=n;return{...a,id:i?wnt(t):o,source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle}}function f9(n,t,e){const i={},r=[];for(let o=0;o<n.length;++o){const a=n[o];if(!cf(a)){e(new Xn(Nn.NODE_INVALID,a?.id)||`[ID UNKNOWN|INDEX ${o}]`);continue}const s=kEt(a,t(a.id),a.parentNode);a.parentNode&&(i[a.parentNode]=!0),r[o]=s}for(const o of r){const a=t(o.parentNode)||r.find(s=>s.id===o.parentNode);o.parentNode&&!a&&e(new Xn(Nn.NODE_MISSING_PARENT,o.id,o.parentNode)),(o.parentNode||i[o.id])&&(i[o.id]&&(o.isParent=!0),a&&(a.isParent=!0))}return r}function g9(n,t,e,i,r,o){let a=r;const s=i.get(a)||new Map;i.set(a,s.set(e,t)),a=`${r}-${n}`;const l=i.get(a)||new Map;if(i.set(a,l.set(e,t)),o){a=`${r}-${n}-${o}`;const h=i.get(a)||new Map;i.set(a,h.set(e,t))}}function IB(n,t,e){n.clear();for(const i of e){const{source:r,target:o,sourceHandle:a=null,targetHandle:s=null}=i,l={edgeId:i.id,source:r,target:o,sourceHandle:a,targetHandle:s},h=`${r}-${a}--${o}-${s}`,u=`${o}-${s}--${r}-${a}`;g9("source",l,u,n,r,a),g9("target",l,h,n,o,s)}}function p9(n,t){if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0}function OB(n,t,e,i,r,o,a,s){const l=[];for(const h of n){const u=ad(h)?h:tDt(h,s,r,o);if(!u)continue;const d=e(u.source),c=e(u.target);if(!d||!c){r(new Xn(Nn.EDGE_SOURCE_TARGET_MISSING,u.id,u.source,u.target));continue}if(!d){r(new Xn(Nn.EDGE_SOURCE_MISSING,u.id,u.source));continue}if(!c){r(new Xn(Nn.EDGE_TARGET_MISSING,u.id,u.target));continue}if(t&&!t(u,{edges:s,nodes:a,sourceNode:d,targetNode:c})){r(new Xn(Nn.EDGE_INVALID,u.id));continue}const f=i(u.id);l.push({..._nt(u,f,o),sourceNode:d,targetNode:c})}return l}const v9=Symbol("vueFlow"),Lnt=Symbol("nodeId"),Ent=Symbol("nodeRef"),iDt=Symbol("edgeId"),nDt=Symbol("edgeRef"),TM=Symbol("slots");function Dnt(n){const{vueFlowRef:t,snapToGrid:e,snapGrid:i,noDragClassName:r,nodes:o,nodeExtent:a,nodeDragThreshold:s,viewport:l,autoPanOnNodeDrag:h,autoPanSpeed:u,nodesDraggable:d,panBy:c,findNode:f,multiSelectionActive:g,nodesSelectionActive:p,selectNodesOnDrag:v,removeSelectedElements:m,addSelectedNodes:y,updateNodePositions:b,emits:_}=gn(),{onStart:w,onDrag:C,onStop:x,onClick:S,el:A,disabled:T,id:M,selectable:R,dragHandle:L}=n,B=Zw(!1);let P=[],k,E=null,D={x:void 0,y:void 0},I={x:0,y:0},O=null,H=!1,F=0,N=!1;const $=aDt(),V=({x:q,y:it})=>{D={x:q,y:it};let nt=!1;if(P=P.map(W=>{const G={x:q-W.distance.x,y:it-W.distance.y},{computedPosition:j}=IF(W,e.value?SM(G,i.value):G,_.error,a.value,W.parentNode?f(W.parentNode):void 0);return nt=nt||W.position.x!==j.x||W.position.y!==j.y,W.position=j,W}),!!nt&&(b(P,!0,!0),B.value=!0,O)){const[W,G]=EB({id:M,dragItems:P,findNode:f});C({event:O,node:W,nodes:G})}},X=()=>{if(!E)return;const[q,it]=Rnt(I,E,u.value);if(q!==0||it!==0){const nt={x:(D.x??0)-q/l.value.zoom,y:(D.y??0)-it/l.value.zoom};c({x:q,y:it})&&V(nt)}F=requestAnimationFrame(X)},Z=(q,it)=>{H=!0;const nt=f(M);!v.value&&!g.value&&nt&&(nt.selected||m()),nt&&Ne(R)&&v.value&&nI(nt,g.value,y,m,p,!1,it);const W=$(q.sourceEvent);if(D=W,P=zEt(o.value,d.value,W,f,M),P.length){const[G,j]=EB({id:M,dragItems:P,findNode:f});w({event:q.sourceEvent,node:G,nodes:j})}},tt=(q,it)=>{var nt;q.sourceEvent.type==="touchmove"&&q.sourceEvent.touches.length>1||(s.value===0&&Z(q,it),D=$(q.sourceEvent),E=((nt=t.value)==null?void 0:nt.getBoundingClientRect())||null,I=rl(q.sourceEvent,E))},K=(q,it)=>{const nt=$(q.sourceEvent);if(!N&&H&&h.value&&(N=!0,X()),!H){const W=nt.xSnapped-(D.x??0),G=nt.ySnapped-(D.y??0);Math.sqrt(W*W+G*G)>s.value&&Z(q,it)}(D.x!==nt.xSnapped||D.y!==nt.ySnapped)&&P.length&&H&&(O=q.sourceEvent,I=rl(q.sourceEvent,E),V(nt))},rt=q=>{let it=!1;if(!H&&!B.value&&!g.value){const nt=q.sourceEvent,W=$(nt),G=W.xSnapped-(D.x??0),j=W.ySnapped-(D.y??0),U=Math.sqrt(G*G+j*j);U!==0&&U<=s.value&&(S?.(nt),it=!0)}if(P.length&&!it){b(P,!1,!1);const[nt,W]=EB({id:M,dragItems:P,findNode:f});x({event:q.sourceEvent,node:nt,nodes:W})}P=[],B.value=!1,N=!1,H=!1,D={x:void 0,y:void 0},cancelAnimationFrame(F)};return xi([()=>Ne(T),A],([q,it],nt,W)=>{if(it){const G=ds(it);q||(k=Bkt().on("start",j=>tt(j,it)).on("drag",j=>K(j,it)).on("end",j=>rt(j)).filter(j=>{const U=j.target,J=Ne(L);return!j.button&&(!r.value||!l9(U,`.${r.value}`,it)&&(!J||l9(U,J,it)))}),G.call(k)),W(()=>{G.on(".drag",null),k&&(k.on("start",null),k.on("drag",null),k.on("end",null))})}}),B}function rDt(){return{doubleClick:Et(),click:Et(),mouseEnter:Et(),mouseMove:Et(),mouseLeave:Et(),contextMenu:Et(),updateStart:Et(),update:Et(),updateEnd:Et()}}function oDt(n,t){const e=rDt();return e.doubleClick.on(i=>{var r,o;t.edgeDoubleClick(i),(o=(r=n.events)==null?void 0:r.doubleClick)==null||o.call(r,i)}),e.click.on(i=>{var r,o;t.edgeClick(i),(o=(r=n.events)==null?void 0:r.click)==null||o.call(r,i)}),e.mouseEnter.on(i=>{var r,o;t.edgeMouseEnter(i),(o=(r=n.events)==null?void 0:r.mouseEnter)==null||o.call(r,i)}),e.mouseMove.on(i=>{var r,o;t.edgeMouseMove(i),(o=(r=n.events)==null?void 0:r.mouseMove)==null||o.call(r,i)}),e.mouseLeave.on(i=>{var r,o;t.edgeMouseLeave(i),(o=(r=n.events)==null?void 0:r.mouseLeave)==null||o.call(r,i)}),e.contextMenu.on(i=>{var r,o;t.edgeContextMenu(i),(o=(r=n.events)==null?void 0:r.contextMenu)==null||o.call(r,i)}),e.updateStart.on(i=>{var r,o;t.edgeUpdateStart(i),(o=(r=n.events)==null?void 0:r.updateStart)==null||o.call(r,i)}),e.update.on(i=>{var r,o;t.edgeUpdate(i),(o=(r=n.events)==null?void 0:r.update)==null||o.call(r,i)}),e.updateEnd.on(i=>{var r,o;t.edgeUpdateEnd(i),(o=(r=n.events)==null?void 0:r.updateEnd)==null||o.call(r,i)}),Object.entries(e).reduce((i,[r,o])=>(i.emit[r]=o.trigger,i.on[r]=o.on,i),{emit:{},on:{}})}function aDt(){const{viewport:n,snapGrid:t,snapToGrid:e,vueFlowRef:i}=gn();return r=>{var o;const a=((o=i.value)==null?void 0:o.getBoundingClientRect())??{left:0,top:0},s=$Et(r)?r.sourceEvent:r,{x:l,y:h}=rl(s,a),u=hb({x:l,y:h},n.value),{x:d,y:c}=e.value?SM(u,t.value):u;return{xSnapped:d,ySnapped:c,...u}}}function s1(){return!0}function Int({handleId:n,nodeId:t,type:e,isValidConnection:i,edgeUpdaterType:r,onEdgeUpdate:o,onEdgeUpdateEnd:a}){const{id:s,vueFlowRef:l,connectionMode:h,connectionRadius:u,connectOnClick:d,connectionClickStartHandle:c,nodesConnectable:f,autoPanOnConnect:g,autoPanSpeed:p,findNode:v,panBy:m,startConnection:y,updateConnection:b,endConnection:_,emits:w,viewport:C,edges:x,nodes:S,isValidConnection:A,nodeLookup:T}=gn();let M=null,R=!1,L=null;function B(k){var E;const D=Ne(e)==="target",I=OF(k),O=e9(k.target);if(I&&k.button===0||!I){let H=function(ft){W=rl(ft,q),V=qEt(hb(W,C.value,!1,[1,1]),u.value,T.value,U),G||(j(),G=!0);const vt=d9(ft,{handle:V,connectionMode:h.value,fromNodeId:Ne(t),fromHandleId:Ne(n),fromType:D?"target":"source",isValidConnection:$,doc:O,lib:"vue",flowId:s,nodeLookup:T.value},x.value,S.value,v);L=vt.handleDomNode,M=vt.connection,R=ZEt(!!V,vt.isValid);const pt={...lt,isValid:R,to:vt.toHandle&&R?eI({x:vt.toHandle.x,y:vt.toHandle.y},C.value):W,toHandle:vt.toHandle,toPosition:R&&vt.toHandle?vt.toHandle.position:iI[U.position],toNode:vt.toHandle?T.value.get(vt.toHandle.nodeId):null};if(!(R&&V&&lt?.toHandle&&pt.toHandle&&lt.toHandle.type===pt.toHandle.type&&lt.toHandle.nodeId===pt.toHandle.nodeId&&lt.toHandle.id===pt.toHandle.id&&lt.to.x===pt.to.x&&lt.to.y===pt.to.y)){if(b(V&&R?eI({x:V.x,y:V.y},C.value):W,vt.toHandle,KEt(!!V,R)),lt=pt,!V&&!R&&!L)return DB(nt);M&&M.source!==M.target&&L&&(DB(nt),nt=L,L.classList.add("connecting","vue-flow__handle-connecting"),L.classList.toggle("valid",!!R),L.classList.toggle("vue-flow__handle-valid",!!R))}},F=function(ft){(V||L)&&M&&R&&(o?o(ft,M):w.connect(M)),w.connectEnd(ft),r&&a?.(ft),DB(nt),cancelAnimationFrame(X),_(ft),G=!1,R=!1,M=null,L=null,O.removeEventListener("mousemove",H),O.removeEventListener("mouseup",F),O.removeEventListener("touchmove",H),O.removeEventListener("touchend",F)};const N=v(Ne(t));let $=Ne(i)||A.value||s1;!$&&N&&($=(D?N.isValidSourcePos:N.isValidTargetPos)||s1);let V,X=0;const{x:Z,y:tt}=rl(k),K=O?.elementFromPoint(Z,tt),rt=Bnt(Ne(r),K),q=(E=l.value)==null?void 0:E.getBoundingClientRect();if(!q||!rt)return;const it=JEt(Ne(t),rt,Ne(n),T.value,h.value);if(!it)return;let nt,W=rl(k,q),G=!1;const j=()=>{if(!g.value)return;const[ft,vt]=Rnt(W,q,p.value);m({x:ft,y:vt}),X=requestAnimationFrame(j)},U={...it,nodeId:Ne(t),type:rt,position:it.position},J=T.value.get(Ne(t)),st={inProgress:!0,isValid:null,from:iv(J,U,$t.Left,!0),fromHandle:U,fromPosition:U.position,fromNode:J,to:W,toHandle:null,toPosition:iI[U.position],toNode:null};y({nodeId:Ne(t),id:Ne(n),type:rt,position:K?.getAttribute("data-handlepos")||$t.Top,...W},{x:Z-q.left,y:tt-q.top}),w.connectStart({event:k,nodeId:Ne(t),handleId:Ne(n),handleType:rt});let lt=st;O.addEventListener("mousemove",H),O.addEventListener("mouseup",F),O.addEventListener("touchmove",H),O.addEventListener("touchend",F)}}function P(k){var E,D;if(!d.value)return;const I=Ne(e)==="target";if(!c.value){w.clickConnectStart({event:k,nodeId:Ne(t),handleId:Ne(n)}),y({nodeId:Ne(t),type:Ne(e),id:Ne(n),position:$t.Top,...rl(k)},void 0,!0);return}let O=Ne(i)||A.value||s1;const H=v(Ne(t));if(!O&&H&&(O=(I?H.isValidSourcePos:H.isValidTargetPos)||s1),H&&(typeof H.connectable>"u"?f.value:H.connectable)===!1)return;const F=e9(k.target),N=d9(k,{handle:{nodeId:Ne(t),id:Ne(n),type:Ne(e),position:$t.Top,...rl(k)},connectionMode:h.value,fromNodeId:c.value.nodeId,fromHandleId:c.value.id??null,fromType:c.value.type,isValidConnection:O,doc:F,lib:"vue",flowId:s,nodeLookup:T.value},x.value,S.value,v),$=((E=N.connection)==null?void 0:E.source)===((D=N.connection)==null?void 0:D.target);N.isValid&&N.connection&&!$&&w.connect(N.connection),w.clickConnectEnd(k),_(k,!0)}return{handlePointerDown:B,handleClick:P}}function sDt(){return Dv(Lnt,"")}function Ont(n){const t=n??sDt()??"",e=Dv(Ent,ln(null)),{findNode:i,edges:r,emits:o}=gn(),a=i(t);return a||o.error(new Xn(Nn.NODE_NOT_FOUND,t)),{id:t,nodeEl:e,node:a,parentNode:ke(()=>i(a.parentNode)),connectedEdges:ke(()=>Tnt([a],r.value))}}function lDt(){return{doubleClick:Et(),click:Et(),mouseEnter:Et(),mouseMove:Et(),mouseLeave:Et(),contextMenu:Et(),dragStart:Et(),drag:Et(),dragStop:Et()}}function hDt(n,t){const e=lDt();return e.doubleClick.on(i=>{var r,o;t.nodeDoubleClick(i),(o=(r=n.events)==null?void 0:r.doubleClick)==null||o.call(r,i)}),e.click.on(i=>{var r,o;t.nodeClick(i),(o=(r=n.events)==null?void 0:r.click)==null||o.call(r,i)}),e.mouseEnter.on(i=>{var r,o;t.nodeMouseEnter(i),(o=(r=n.events)==null?void 0:r.mouseEnter)==null||o.call(r,i)}),e.mouseMove.on(i=>{var r,o;t.nodeMouseMove(i),(o=(r=n.events)==null?void 0:r.mouseMove)==null||o.call(r,i)}),e.mouseLeave.on(i=>{var r,o;t.nodeMouseLeave(i),(o=(r=n.events)==null?void 0:r.mouseLeave)==null||o.call(r,i)}),e.contextMenu.on(i=>{var r,o;t.nodeContextMenu(i),(o=(r=n.events)==null?void 0:r.contextMenu)==null||o.call(r,i)}),e.dragStart.on(i=>{var r,o;t.nodeDragStart(i),(o=(r=n.events)==null?void 0:r.dragStart)==null||o.call(r,i)}),e.drag.on(i=>{var r,o;t.nodeDrag(i),(o=(r=n.events)==null?void 0:r.drag)==null||o.call(r,i)}),e.dragStop.on(i=>{var r,o;t.nodeDragStop(i),(o=(r=n.events)==null?void 0:r.dragStop)==null||o.call(r,i)}),Object.entries(e).reduce((i,[r,o])=>(i.emit[r]=o.trigger,i.on[r]=o.on,i),{emit:{},on:{}})}function Hnt(){const{getSelectedNodes:n,nodeExtent:t,updateNodePositions:e,findNode:i,snapGrid:r,snapToGrid:o,nodesDraggable:a,emits:s}=gn();return(l,h=!1)=>{const u=o.value?r.value[0]:5,d=o.value?r.value[1]:5,c=h?4:1,f=l.x*u*c,g=l.y*d*c,p=[];for(const v of n.value)if(v.draggable||a&&typeof v.draggable>"u"){const m={x:v.computedPosition.x+f,y:v.computedPosition.y+g},{computedPosition:y}=IF(v,m,s.error,t.value,v.parentNode?i(v.parentNode):void 0);p.push({id:v.id,position:y,from:v.position,distance:{x:l.x,y:l.y},dimensions:v.dimensions})}e(p,!0,!1)}}const HB=.1,uDt=n=>((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2;function lu(){return AM("Viewport not initialized yet."),Promise.resolve(!1)}const dDt={zoomIn:lu,zoomOut:lu,zoomTo:lu,fitView:lu,setCenter:lu,fitBounds:lu,project:n=>n,screenToFlowCoordinate:n=>n,flowToScreenCoordinate:n=>n,setViewport:lu,setTransform:lu,getViewport:()=>({x:0,y:0,zoom:1}),getTransform:()=>({x:0,y:0,zoom:1}),viewportInitialized:!1};function cDt(n){function t(i,r){return new Promise(o=>{n.d3Selection&&n.d3Zoom?n.d3Zoom.interpolate(r?.interpolate==="linear"?ny:Rw).scaleBy(zB(n.d3Selection,r?.duration,r?.ease,()=>{o(!0)}),i):o(!1)})}function e(i,r,o,a){return new Promise(s=>{var l;const{x:h,y:u}=bnt({x:-i,y:-r},n.translateExtent),d=ev.translate(-h,-u).scale(o);n.d3Selection&&n.d3Zoom?(l=n.d3Zoom)==null||l.interpolate(a?.interpolate==="linear"?ny:Rw).transform(zB(n.d3Selection,a?.duration,a?.ease,()=>{s(!0)}),d):s(!1)})}return ke(()=>n.d3Zoom&&n.d3Selection&&n.dimensions.width&&n.dimensions.height?{viewportInitialized:!0,zoomIn:r=>t(1.2,r),zoomOut:r=>t(1/1.2,r),zoomTo:(r,o)=>new Promise(a=>{n.d3Selection&&n.d3Zoom?n.d3Zoom.interpolate(o?.interpolate==="linear"?ny:Rw).scaleTo(zB(n.d3Selection,o?.duration,o?.ease,()=>{a(!0)}),r):a(!1)}),setViewport:(r,o)=>e(r.x,r.y,r.zoom,o),setTransform:(r,o)=>e(r.x,r.y,r.zoom,o),getViewport:()=>({x:n.viewport.x,y:n.viewport.y,zoom:n.viewport.zoom}),getTransform:()=>({x:n.viewport.x,y:n.viewport.y,zoom:n.viewport.zoom}),fitView:(r={padding:HB,includeHiddenNodes:!1,duration:0})=>{var o,a;const s=[];for(const c of n.nodes)c.dimensions.width&&c.dimensions.height&&(r?.includeHiddenNodes||!c.hidden)&&(!((o=r.nodes)!=null&&o.length)||(a=r.nodes)!=null&&a.length&&r.nodes.includes(c.id))&&s.push(c);if(!s.length)return Promise.resolve(!1);const l=Snt(s),{x:h,y:u,zoom:d}=i9(l,n.dimensions.width,n.dimensions.height,r.minZoom??n.minZoom,r.maxZoom??n.maxZoom,r.padding??HB,r.offset);return e(h,u,d,r)},setCenter:(r,o,a)=>{const s=typeof a?.zoom<"u"?a.zoom:n.maxZoom,l=n.dimensions.width/2-r*s,h=n.dimensions.height/2-o*s;return e(l,h,s,a)},fitBounds:(r,o={padding:HB})=>{const{x:a,y:s,zoom:l}=i9(r,n.dimensions.width,n.dimensions.height,n.minZoom,n.maxZoom,o.padding);return e(a,s,l,o)},project:r=>hb(r,n.viewport,n.snapToGrid,n.snapGrid),screenToFlowCoordinate:r=>{if(n.vueFlowRef){const{x:o,y:a}=n.vueFlowRef.getBoundingClientRect(),s={x:r.x-o,y:r.y-a};return hb(s,n.viewport,n.snapToGrid,n.snapGrid)}return{x:0,y:0}},flowToScreenCoordinate:r=>{if(n.vueFlowRef){const{x:o,y:a}=n.vueFlowRef.getBoundingClientRect(),s={x:r.x+o,y:r.y+a};return eI(s,n.viewport)}return{x:0,y:0}}}:dDt)}function zB(n,t=0,e=uDt,i=()=>{}){const r=typeof t=="number"&&t>0;return r||i(),r?n.transition().duration(t).ease(e).on("end",i):n}function fDt(n,t,e){const i=Kq(!0);return i.run(()=>{const r=()=>{i.run(()=>{let p,v,m=!!(e.nodes.value.length||e.edges.value.length);p=Bg([n.modelValue,()=>{var y,b;return(b=(y=n.modelValue)==null?void 0:y.value)==null?void 0:b.length}],([y])=>{y&&Array.isArray(y)&&(v?.pause(),e.setElements(y),!v&&!m&&y.length?m=!0:v?.resume())}),v=Bg([e.nodes,e.edges,()=>e.edges.value.length,()=>e.nodes.value.length],([y,b])=>{var _;(_=n.modelValue)!=null&&_.value&&Array.isArray(n.modelValue.value)&&(p?.pause(),n.modelValue.value=[...y,...b],yh(()=>{p?.resume()}))},{immediate:m}),ow(()=>{p?.stop(),v?.stop()})})},o=()=>{i.run(()=>{let p,v,m=!!e.nodes.value.length;p=Bg([n.nodes,()=>{var y,b;return(b=(y=n.nodes)==null?void 0:y.value)==null?void 0:b.length}],([y])=>{y&&Array.isArray(y)&&(v?.pause(),e.setNodes(y),!v&&!m&&y.length?m=!0:v?.resume())}),v=Bg([e.nodes,()=>e.nodes.value.length],([y])=>{var b;(b=n.nodes)!=null&&b.value&&Array.isArray(n.nodes.value)&&(p?.pause(),n.nodes.value=[...y],yh(()=>{p?.resume()}))},{immediate:m}),ow(()=>{p?.stop(),v?.stop()})})},a=()=>{i.run(()=>{let p,v,m=!!e.edges.value.length;p=Bg([n.edges,()=>{var y,b;return(b=(y=n.edges)==null?void 0:y.value)==null?void 0:b.length}],([y])=>{y&&Array.isArray(y)&&(v?.pause(),e.setEdges(y),!v&&!m&&y.length?m=!0:v?.resume())}),v=Bg([e.edges,()=>e.edges.value.length],([y])=>{var b;(b=n.edges)!=null&&b.value&&Array.isArray(n.edges.value)&&(p?.pause(),n.edges.value=[...y],yh(()=>{p?.resume()}))},{immediate:m}),ow(()=>{p?.stop(),v?.stop()})})},s=()=>{i.run(()=>{xi(()=>t.maxZoom,()=>{t.maxZoom&&Hn(t.maxZoom)&&e.setMaxZoom(t.maxZoom)},{immediate:!0})})},l=()=>{i.run(()=>{xi(()=>t.minZoom,()=>{t.minZoom&&Hn(t.minZoom)&&e.setMinZoom(t.minZoom)},{immediate:!0})})},h=()=>{i.run(()=>{xi(()=>t.translateExtent,()=>{t.translateExtent&&Hn(t.translateExtent)&&e.setTranslateExtent(t.translateExtent)},{immediate:!0})})},u=()=>{i.run(()=>{xi(()=>t.nodeExtent,()=>{t.nodeExtent&&Hn(t.nodeExtent)&&e.setNodeExtent(t.nodeExtent)},{immediate:!0})})},d=()=>{i.run(()=>{xi(()=>t.applyDefault,()=>{Hn(t.applyDefault)&&(e.applyDefault.value=t.applyDefault)},{immediate:!0})})},c=()=>{i.run(()=>{const p=async v=>{let m=v;typeof t.autoConnect=="function"&&(m=await t.autoConnect(v)),m!==!1&&e.addEdges([m])};xi(()=>t.autoConnect,()=>{Hn(t.autoConnect)&&(e.autoConnect.value=t.autoConnect)},{immediate:!0}),xi(e.autoConnect,(v,m,y)=>{v?e.onConnect(p):e.hooks.value.connect.off(p),y(()=>{e.hooks.value.connect.off(p)})},{immediate:!0})})},f=()=>{const p=["id","modelValue","translateExtent","nodeExtent","edges","nodes","maxZoom","minZoom","applyDefault","autoConnect"];for(const v of Object.keys(t)){const m=v;if(!p.includes(m)){const y=xn(()=>t[m]),b=e[m];mH(b)&&i.run(()=>{xi(y,_=>{Hn(_)&&(b.value=_)},{immediate:!0})})}}};(()=>{r(),o(),a(),l(),s(),h(),u(),d(),c(),f()})()}),()=>i.stop()}function gDt(){return{edgesChange:Et(),nodesChange:Et(),nodeDoubleClick:Et(),nodeClick:Et(),nodeMouseEnter:Et(),nodeMouseMove:Et(),nodeMouseLeave:Et(),nodeContextMenu:Et(),nodeDragStart:Et(),nodeDrag:Et(),nodeDragStop:Et(),nodesInitialized:Et(),miniMapNodeClick:Et(),miniMapNodeDoubleClick:Et(),miniMapNodeMouseEnter:Et(),miniMapNodeMouseMove:Et(),miniMapNodeMouseLeave:Et(),connect:Et(),connectStart:Et(),connectEnd:Et(),clickConnectStart:Et(),clickConnectEnd:Et(),paneReady:Et(),init:Et(),move:Et(),moveStart:Et(),moveEnd:Et(),selectionDragStart:Et(),selectionDrag:Et(),selectionDragStop:Et(),selectionContextMenu:Et(),selectionStart:Et(),selectionEnd:Et(),viewportChangeStart:Et(),viewportChange:Et(),viewportChangeEnd:Et(),paneScroll:Et(),paneClick:Et(),paneContextMenu:Et(),paneMouseEnter:Et(),paneMouseMove:Et(),paneMouseLeave:Et(),edgeContextMenu:Et(),edgeMouseEnter:Et(),edgeMouseMove:Et(),edgeMouseLeave:Et(),edgeDoubleClick:Et(),edgeClick:Et(),edgeUpdateStart:Et(),edgeUpdate:Et(),edgeUpdateEnd:Et(),updateNodeInternals:Et(),error:Et(n=>AM(n.message))}}function pDt(n,t){but(()=>{for(const[e,i]of Object.entries(t.value)){const r=o=>{n(e,o)};i.fns.add(r),yM(()=>{i.off(r)})}})}function znt(){return{vueFlowRef:null,viewportRef:null,nodes:[],edges:[],connectionLookup:new Map,nodeTypes:{},edgeTypes:{},initialized:!1,dimensions:{width:0,height:0},viewport:{x:0,y:0,zoom:1},d3Zoom:null,d3Selection:null,d3ZoomHandler:null,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],selectionMode:DF.Full,paneDragging:!1,preventScrolling:!0,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!0,panOnScroll:!1,panOnScrollSpeed:.5,panOnScrollMode:ry.Free,paneClickDistance:0,panOnDrag:!0,edgeUpdaterRadius:10,onlyRenderVisibleElements:!1,defaultViewport:{x:0,y:0,zoom:1},nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,defaultMarkerColor:"#b1b1b7",connectionLineStyle:{},connectionLineType:null,connectionLineOptions:{type:Ac.Bezier,style:{}},connectionMode:od.Loose,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectionPosition:{x:Number.NaN,y:Number.NaN},connectionRadius:20,connectOnClick:!0,connectionStatus:null,isValidConnection:null,snapGrid:[15,15],snapToGrid:!1,edgesUpdatable:!1,edgesFocusable:!0,nodesFocusable:!0,nodesConnectable:!0,nodesDraggable:!0,nodeDragThreshold:1,elementsSelectable:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,selectionKeyCode:"Shift",multiSelectionKeyCode:iS()?"Meta":"Control",zoomActivationKeyCode:iS()?"Meta":"Control",deleteKeyCode:"Backspace",panActivationKeyCode:"Space",hooks:gDt(),applyDefault:!0,autoConnect:!1,fitViewOnInit:!1,fitViewOnInitDone:!1,noDragClassName:"nodrag",noWheelClassName:"nowheel",noPanClassName:"nopan",defaultEdgeOptions:void 0,elevateEdgesOnSelect:!1,elevateNodesOnSelect:!0,autoPanOnNodeDrag:!0,autoPanOnConnect:!0,autoPanSpeed:15,disableKeyboardA11y:!1,ariaLiveMessage:""}}const vDt=["id","vueFlowRef","viewportRef","initialized","modelValue","nodes","edges","maxZoom","minZoom","translateExtent","hooks","defaultEdgeOptions"];function mDt(n,t,e){const i=cDt(n),r=W=>{const G=W??[];n.hooks.updateNodeInternals.trigger(G)},o=W=>EEt(W,n.nodes,n.edges),a=W=>LEt(W,n.nodes,n.edges),s=W=>Tnt(W,n.edges),l=({id:W,type:G,nodeId:j})=>{var U;return Array.from(((U=n.connectionLookup.get(`${j}-${G}-${W??null}`))==null?void 0:U.values())??[])},h=W=>{if(W)return t.value.get(W)},u=W=>{if(W)return e.value.get(W)},d=(W,G,j)=>{var U,J;const ot=[];for(const st of W){const lt={id:st.id,type:"position",dragging:j,from:st.from};if(G&&(lt.position=st.position,st.parentNode)){const ft=h(st.parentNode);lt.position={x:lt.position.x-(((U=ft?.computedPosition)==null?void 0:U.x)??0),y:lt.position.y-(((J=ft?.computedPosition)==null?void 0:J.y)??0)}}ot.push(lt)}ot?.length&&n.hooks.nodesChange.trigger(ot)},c=W=>{if(!n.vueFlowRef)return;const G=n.vueFlowRef.querySelector(".vue-flow__transformationpane");if(!G)return;const j=window.getComputedStyle(G),{m22:U}=new window.DOMMatrixReadOnly(j.transform),J=[];for(const ot of W){const st=ot,lt=h(st.id);if(lt){const ft=xM(st.nodeElement);if(!!(ft.width&&ft.height&&(lt.dimensions.width!==ft.width||lt.dimensions.height!==ft.height||st.forceUpdate))){const pt=st.nodeElement.getBoundingClientRect();lt.dimensions=ft,lt.handleBounds.source=c9("source",st.nodeElement,pt,U,lt.id),lt.handleBounds.target=c9("target",st.nodeElement,pt,U,lt.id),J.push({id:lt.id,type:"dimensions",dimensions:ft})}}}!n.fitViewOnInitDone&&n.fitViewOnInit&&i.value.fitView().then(()=>{n.fitViewOnInitDone=!0}),J.length&&n.hooks.nodesChange.trigger(J)},f=(W,G)=>{const j=new Set,U=new Set;for(const st of W)cf(st)?j.add(st.id):ad(st)&&U.add(st.id);const J=_u(t.value,j,!0),ot=_u(e.value,U);if(n.multiSelectionActive){for(const st of j)J.push(vu(st,G));for(const st of U)ot.push(vu(st,G))}J.length&&n.hooks.nodesChange.trigger(J),ot.length&&n.hooks.edgesChange.trigger(ot)},g=W=>{if(n.multiSelectionActive){const G=W.map(j=>vu(j.id,!0));n.hooks.nodesChange.trigger(G);return}n.hooks.nodesChange.trigger(_u(t.value,new Set(W.map(G=>G.id)),!0)),n.hooks.edgesChange.trigger(_u(e.value))},p=W=>{if(n.multiSelectionActive){const G=W.map(j=>vu(j.id,!0));n.hooks.edgesChange.trigger(G);return}n.hooks.edgesChange.trigger(_u(e.value,new Set(W.map(G=>G.id)))),n.hooks.nodesChange.trigger(_u(t.value,new Set,!0))},v=W=>{f(W,!0)},m=W=>{const j=(W||n.nodes).map(U=>(U.selected=!1,vu(U.id,!1)));n.hooks.nodesChange.trigger(j)},y=W=>{const j=(W||n.edges).map(U=>(U.selected=!1,vu(U.id,!1)));n.hooks.edgesChange.trigger(j)},b=W=>{if(!W||!W.length)return f([],!1);const G=W.reduce((j,U)=>{const J=vu(U.id,!1);return cf(U)?j.nodes.push(J):j.edges.push(J),j},{nodes:[],edges:[]});G.nodes.length&&n.hooks.nodesChange.trigger(G.nodes),G.edges.length&&n.hooks.edgesChange.trigger(G.edges)},_=W=>{var G;(G=n.d3Zoom)==null||G.scaleExtent([W,n.maxZoom]),n.minZoom=W},w=W=>{var G;(G=n.d3Zoom)==null||G.scaleExtent([n.minZoom,W]),n.maxZoom=W},C=W=>{var G;(G=n.d3Zoom)==null||G.translateExtent(W),n.translateExtent=W},x=W=>{n.nodeExtent=W,r()},S=W=>{var G;(G=n.d3Zoom)==null||G.clickDistance(W)},A=W=>{n.nodesDraggable=W,n.nodesConnectable=W,n.elementsSelectable=W},T=W=>{const G=W instanceof Function?W(n.nodes):W;!n.initialized&&!G.length||(n.nodes=f9(G,h,n.hooks.error.trigger))},M=W=>{const G=W instanceof Function?W(n.edges):W;if(!n.initialized&&!G.length)return;const j=OB(G,n.isValidConnection,h,u,n.hooks.error.trigger,n.defaultEdgeOptions,n.nodes,n.edges);IB(n.connectionLookup,e.value,j),n.edges=j},R=W=>{const G=W instanceof Function?W([...n.nodes,...n.edges]):W;!n.initialized&&!G.length||(T(G.filter(cf)),M(G.filter(ad)))},L=W=>{let G=W instanceof Function?W(n.nodes):W;G=Array.isArray(G)?G:[G];const j=f9(G,h,n.hooks.error.trigger),U=[];for(const J of j)U.push(o9(J));U.length&&n.hooks.nodesChange.trigger(U)},B=W=>{let G=W instanceof Function?W(n.edges):W;G=Array.isArray(G)?G:[G];const j=OB(G,n.isValidConnection,h,u,n.hooks.error.trigger,n.defaultEdgeOptions,n.nodes,n.edges),U=[];for(const J of j)U.push(o9(J));U.length&&n.hooks.edgesChange.trigger(U)},P=(W,G=!0,j=!1)=>{const U=W instanceof Function?W(n.nodes):W,J=Array.isArray(U)?U:[U],ot=[],st=[];function lt(vt){const pt=s(vt);for(const bt of pt)(!Hn(bt.deletable)||bt.deletable)&&st.push(s9(bt.id,bt.source,bt.target,bt.sourceHandle,bt.targetHandle))}function ft(vt){const pt=[];for(const bt of n.nodes)bt.parentNode===vt&&pt.push(bt);if(pt.length){for(const bt of pt)ot.push(a9(bt.id));G&&lt(pt);for(const bt of pt)ft(bt.id)}}for(const vt of J){const pt=typeof vt=="string"?h(vt):vt;pt&&(Hn(pt.deletable)&&!pt.deletable||(ot.push(a9(pt.id)),G&&lt([pt]),j&&ft(pt.id)))}st.length&&n.hooks.edgesChange.trigger(st),ot.length&&n.hooks.nodesChange.trigger(ot)},k=W=>{const G=W instanceof Function?W(n.edges):W,j=Array.isArray(G)?G:[G],U=[];for(const J of j){const ot=typeof J=="string"?u(J):J;ot&&(Hn(ot.deletable)&&!ot.deletable||U.push(s9(typeof J=="string"?J:J.id,ot.source,ot.target,ot.sourceHandle,ot.targetHandle)))}n.hooks.edgesChange.trigger(U)},E=(W,G,j=!0)=>{const U=u(W.id);if(!U)return!1;const J=n.edges.indexOf(U),ot=eDt(W,G,U,j,n.hooks.error.trigger);if(ot){const[st]=OB([ot],n.isValidConnection,h,u,n.hooks.error.trigger,n.defaultEdgeOptions,n.nodes,n.edges);return n.edges=n.edges.map((lt,ft)=>ft===J?st:lt),IB(n.connectionLookup,e.value,[st]),st}return!1},D=(W,G,j={replace:!1})=>{const U=u(W);if(!U)return;const J=typeof G=="function"?G(U):G;U.data=j.replace?J:{...U.data,...J}},I=W=>r9(W,n.nodes),O=W=>{const G=r9(W,n.edges);return IB(n.connectionLookup,e.value,G),G},H=(W,G,j={replace:!1})=>{const U=h(W);if(!U)return;const J=typeof G=="function"?G(U):G;j.replace?n.nodes.splice(n.nodes.indexOf(U),1,J):Object.assign(U,J)},F=(W,G,j={replace:!1})=>{const U=h(W);if(!U)return;const J=typeof G=="function"?G(U):G;U.data=j.replace?J:{...U.data,...J}},N=(W,G,j=!1)=>{j?n.connectionClickStartHandle=W:n.connectionStartHandle=W,n.connectionEndHandle=null,n.connectionStatus=null,G&&(n.connectionPosition=G)},$=(W,G=null,j=null)=>{n.connectionStartHandle&&(n.connectionPosition=W,n.connectionEndHandle=G,n.connectionStatus=j)},V=(W,G)=>{n.connectionPosition={x:Number.NaN,y:Number.NaN},n.connectionEndHandle=null,n.connectionStatus=null,G?n.connectionClickStartHandle=null:n.connectionStartHandle=null},X=W=>{const G=BEt(W),j=G?null:T0(W)?W:h(W.id);return!G&&!j?[null,null,G]:[G?W:tS(j),j,G]},Z=(W,G=!0,j=n.nodes)=>{const[U,J,ot]=X(W);if(!U)return[];const st=[];for(const lt of j||n.nodes){if(!ot&&(lt.id===J.id||!lt.computedPosition))continue;const ft=tS(lt),vt=eS(ft,U);(G&&vt>0||vt>=Number(U.width)*Number(U.height))&&st.push(lt)}return st},tt=(W,G,j=!0)=>{const[U]=X(W);if(!U)return!1;const J=eS(U,G);return j&&J>0||J>=Number(U.width)*Number(U.height)},K=W=>{const{viewport:G,dimensions:j,d3Zoom:U,d3Selection:J,translateExtent:ot}=n;if(!U||!J||!W.x&&!W.y)return!1;const st=ev.translate(G.x+W.x,G.y+W.y).scale(G.zoom),lt=[[0,0],[j.width,j.height]],ft=U.constrain()(st,lt,ot),vt=n.viewport.x!==ft.x||n.viewport.y!==ft.y||n.viewport.zoom!==ft.k;return U.transform(J,ft),vt},rt=W=>{const G=W instanceof Function?W(n):W,j=["d3Zoom","d3Selection","d3ZoomHandler","viewportRef","vueFlowRef","dimensions","hooks"];Hn(G.defaultEdgeOptions)&&(n.defaultEdgeOptions=G.defaultEdgeOptions);const U=G.modelValue||G.nodes||G.edges?[]:void 0;U&&(G.modelValue&&U.push(...G.modelValue),G.nodes&&U.push(...G.nodes),G.edges&&U.push(...G.edges),R(U));const J=()=>{Hn(G.maxZoom)&&w(G.maxZoom),Hn(G.minZoom)&&_(G.minZoom),Hn(G.translateExtent)&&C(G.translateExtent)};for(const ot of Object.keys(G)){const st=ot,lt=G[st];![...vDt,...j].includes(st)&&Hn(lt)&&(n[st]=lt)}$D(()=>n.d3Zoom).not.toBeNull().then(J),n.initialized||(n.initialized=!0)};return{updateNodePositions:d,updateNodeDimensions:c,setElements:R,setNodes:T,setEdges:M,addNodes:L,addEdges:B,removeNodes:P,removeEdges:k,findNode:h,findEdge:u,updateEdge:E,updateEdgeData:D,updateNode:H,updateNodeData:F,applyEdgeChanges:O,applyNodeChanges:I,addSelectedElements:v,addSelectedNodes:g,addSelectedEdges:p,setMinZoom:_,setMaxZoom:w,setTranslateExtent:C,setNodeExtent:x,setPaneClickDistance:S,removeSelectedElements:b,removeSelectedNodes:m,removeSelectedEdges:y,startConnection:N,updateConnection:$,endConnection:V,setInteractive:A,setState:rt,getIntersectingNodes:Z,getIncomers:o,getOutgoers:a,getConnectedEdges:s,getHandleConnections:l,isNodeIntersecting:tt,panBy:K,fitView:W=>i.value.fitView(W),zoomIn:W=>i.value.zoomIn(W),zoomOut:W=>i.value.zoomOut(W),zoomTo:(W,G)=>i.value.zoomTo(W,G),setViewport:(W,G)=>i.value.setViewport(W,G),setTransform:(W,G)=>i.value.setTransform(W,G),getViewport:()=>i.value.getViewport(),getTransform:()=>i.value.getTransform(),setCenter:(W,G,j)=>i.value.setCenter(W,G,j),fitBounds:(W,G)=>i.value.fitBounds(W,G),project:W=>i.value.project(W),screenToFlowCoordinate:W=>i.value.screenToFlowCoordinate(W),flowToScreenCoordinate:W=>i.value.flowToScreenCoordinate(W),toObject:()=>{const W=[],G=[];for(const j of n.nodes){const{computedPosition:U,handleBounds:J,selected:ot,dimensions:st,isParent:lt,resizing:ft,dragging:vt,events:pt,...bt}=j;W.push(bt)}for(const j of n.edges){const{selected:U,sourceNode:J,targetNode:ot,events:st,...lt}=j;G.push(lt)}return JSON.parse(JSON.stringify({nodes:W,edges:G,position:[n.viewport.x,n.viewport.y],zoom:n.viewport.zoom,viewport:n.viewport}))},fromObject:W=>new Promise(G=>{const{nodes:j,edges:U,position:J,zoom:ot,viewport:st}=W;if(j&&T(j),U&&M(U),st?.x&&st?.y||J){const lt=st?.x||J[0],ft=st?.y||J[1],vt=st?.zoom||ot||n.viewport.zoom;return $D(()=>i.value.viewportInitialized).toBe(!0).then(()=>{i.value.setViewport({x:lt,y:ft,zoom:vt}).then(()=>{G(!0)})})}else G(!0)}),updateNodeInternals:r,viewportHelper:i,$reset:()=>{const W=znt();if(n.edges=[],n.nodes=[],n.d3Zoom&&n.d3Selection){const G=ev.translate(W.defaultViewport.x??0,W.defaultViewport.y??0).scale(Lf(W.defaultViewport.zoom??1,W.minZoom,W.maxZoom)),j=n.viewportRef.getBoundingClientRect(),U=[[0,0],[j.width,j.height]],J=n.d3Zoom.constrain()(G,U,W.translateExtent);n.d3Zoom.transform(n.d3Selection,J)}rt(W)},$destroy:()=>{}}}const yDt=["data-id","data-handleid","data-nodeid","data-handlepos"],bDt={name:"Handle",compatConfig:{MODE:3}},nS=fn({...bDt,props:{id:{default:null},type:{},position:{default:()=>$t.Top},isValidConnection:{type:Function},connectable:{type:[Boolean,Number,String,Function],default:void 0},connectableStart:{type:Boolean,default:!0},connectableEnd:{type:Boolean,default:!0}},setup(n,{expose:t}){const e=Aut(n,["position","connectable","connectableStart","connectableEnd","id"]),i=xn(()=>e.type??"source"),r=xn(()=>e.isValidConnection??null),{id:o,connectionStartHandle:a,connectionClickStartHandle:s,connectionEndHandle:l,vueFlowRef:h,nodesConnectable:u,noDragClassName:d,noPanClassName:c}=gn(),{id:f,node:g,nodeEl:p,connectedEdges:v}=Ont(),m=ln(),y=xn(()=>typeof n.connectableStart<"u"?n.connectableStart:!0),b=xn(()=>typeof n.connectableEnd<"u"?n.connectableEnd:!0),_=xn(()=>{var M,R,L,B,P,k;return((M=a.value)==null?void 0:M.nodeId)===f&&((R=a.value)==null?void 0:R.id)===n.id&&((L=a.value)==null?void 0:L.type)===i.value||((B=l.value)==null?void 0:B.nodeId)===f&&((P=l.value)==null?void 0:P.id)===n.id&&((k=l.value)==null?void 0:k.type)===i.value}),w=xn(()=>{var M,R,L;return((M=s.value)==null?void 0:M.nodeId)===f&&((R=s.value)==null?void 0:R.id)===n.id&&((L=s.value)==null?void 0:L.type)===i.value}),{handlePointerDown:C,handleClick:x}=Int({nodeId:f,handleId:n.id,isValidConnection:r,type:i}),S=ke(()=>typeof n.connectable=="string"&&n.connectable==="single"?!v.value.some(M=>{const R=M[`${i.value}Handle`];return M[i.value]!==f?!1:R?R===n.id:!0}):typeof n.connectable=="number"?v.value.filter(M=>{const R=M[`${i.value}Handle`];return M[i.value]!==f?!1:R?R===n.id:!0}).length<n.connectable:typeof n.connectable=="function"?n.connectable(g,v.value):Hn(n.connectable)?n.connectable:u.value);vd(()=>{var M;if(!g.dimensions.width||!g.dimensions.height)return;const R=(M=g.handleBounds[i.value])==null?void 0:M.find(I=>I.id===n.id);if(!h.value||R)return;const L=h.value.querySelector(".vue-flow__transformationpane");if(!p.value||!m.value||!L||!n.id)return;const B=p.value.getBoundingClientRect(),P=m.value.getBoundingClientRect(),k=window.getComputedStyle(L),{m22:E}=new window.DOMMatrixReadOnly(k.transform),D={id:n.id,position:n.position,x:(P.left-B.left)/E,y:(P.top-B.top)/E,type:i.value,nodeId:f,...xM(m.value)};g.handleBounds[i.value]=[...g.handleBounds[i.value]??[],D]});function A(M){const R=OF(M);S.value&&y.value&&(R&&M.button===0||!R)&&C(M)}function T(M){!f||!s.value&&!y.value||S.value&&x(M)}return t({handleClick:x,handlePointerDown:C,onClick:T,onPointerDown:A}),(M,R)=>(gi(),Yi("div",{ref_key:"handle",ref:m,"data-id":`${ne(o)}-${ne(f)}-${n.id}-${i.value}`,"data-handleid":n.id,"data-nodeid":ne(f),"data-handlepos":M.position,class:Py(["vue-flow__handle",[`vue-flow__handle-${M.position}`,`vue-flow__handle-${n.id}`,ne(d),ne(c),i.value,{connectable:S.value,connecting:w.value,connectablestart:y.value,connectableend:b.value,connectionindicator:S.value&&(y.value&&!_.value||b.value&&_.value)}]]),onMousedown:A,onTouchstartPassive:A,onClick:T},[Cf(M.$slots,"default",{id:M.id})],42,yDt))}}),MM=function({sourcePosition:n=$t.Bottom,targetPosition:t=$t.Top,label:e,connectable:i=!0,isValidTargetPos:r,isValidSourcePos:o,data:a}){const s=a.label??e;return[Si(nS,{type:"target",position:t,connectable:i,isValidConnection:r}),typeof s!="string"&&s?Si(s):Si(_l,[s]),Si(nS,{type:"source",position:n,connectable:i,isValidConnection:o})]};MM.props=["sourcePosition","targetPosition","label","isValidTargetPos","isValidSourcePos","connectable","data"];MM.inheritAttrs=!1;MM.compatConfig={MODE:3};const _Dt=MM,RM=function({targetPosition:n=$t.Top,label:t,connectable:e=!0,isValidTargetPos:i,data:r}){const o=r.label??t;return[Si(nS,{type:"target",position:n,connectable:e,isValidConnection:i}),typeof o!="string"&&o?Si(o):Si(_l,[o])]};RM.props=["targetPosition","label","isValidTargetPos","connectable","data"];RM.inheritAttrs=!1;RM.compatConfig={MODE:3};const CDt=RM,PM=function({sourcePosition:n=$t.Bottom,label:t,connectable:e=!0,isValidSourcePos:i,data:r}){const o=r.label??t;return[typeof o!="string"&&o?Si(o):Si(_l,[o]),Si(nS,{type:"source",position:n,connectable:e,isValidConnection:i})]};PM.props=["sourcePosition","label","isValidSourcePos","connectable","data"];PM.inheritAttrs=!1;PM.compatConfig={MODE:3};const wDt=PM,xDt=["transform"],SDt=["width","height","x","y","rx","ry"],ADt=["y"],TDt={name:"EdgeText",compatConfig:{MODE:3}},MDt=fn({...TDt,props:{x:{},y:{},label:{},labelStyle:{default:()=>({})},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:()=>({})},labelBgPadding:{default:()=>[2,4]},labelBgBorderRadius:{default:2}},setup(n){const t=ln({x:0,y:0,width:0,height:0}),e=ln(null),i=ke(()=>`translate(${n.x-t.value.width/2} ${n.y-t.value.height/2})`);vd(r),xi([()=>n.x,()=>n.y,e,()=>n.label],r);function r(){if(!e.value)return;const o=e.value.getBBox();(o.width!==t.value.width||o.height!==t.value.height)&&(t.value=o)}return(o,a)=>(gi(),Yi("g",{transform:i.value,class:"vue-flow__edge-textwrapper"},[o.labelShowBg?(gi(),Yi("rect",{key:0,class:"vue-flow__edge-textbg",width:`${t.value.width+2*o.labelBgPadding[0]}px`,height:`${t.value.height+2*o.labelBgPadding[1]}px`,x:-o.labelBgPadding[0],y:-o.labelBgPadding[1],style:Ku(o.labelBgStyle),rx:o.labelBgBorderRadius,ry:o.labelBgBorderRadius},null,12,SDt)):Cl("",!0),wf("text",Qq(o.$attrs,{ref_key:"el",ref:e,class:"vue-flow__edge-text",y:t.value.height/2,dy:"0.3em",style:o.labelStyle}),[Cf(o.$slots,"default",{},()=>[typeof o.label!="string"?(gi(),Np(Mut(o.label),{key:0})):(gi(),Yi(_l,{key:1},[Rut(JL(o.label),1)],64))])],16,ADt)],8,xDt))}}),RDt=["id","d","marker-end","marker-start"],PDt=["d","stroke-width"],BDt={name:"BaseEdge",inheritAttrs:!1,compatConfig:{MODE:3}},BM=fn({...BDt,props:{id:{},labelX:{},labelY:{},path:{},label:{},markerStart:{},markerEnd:{},interactionWidth:{default:20},labelStyle:{},labelShowBg:{type:Boolean},labelBgStyle:{},labelBgPadding:{},labelBgBorderRadius:{}},setup(n,{expose:t}){const e=ln(null),i=ln(null),r=ln(null),o=Sut();return t({pathEl:e,interactionEl:i,labelEl:r}),(a,s)=>(gi(),Yi(_l,null,[wf("path",Qq(ne(o),{id:a.id,ref_key:"pathEl",ref:e,d:a.path,class:"vue-flow__edge-path","marker-end":a.markerEnd,"marker-start":a.markerStart}),null,16,RDt),a.interactionWidth?(gi(),Yi("path",{key:0,ref_key:"interactionEl",ref:i,fill:"none",d:a.path,"stroke-width":a.interactionWidth,"stroke-opacity":0,class:"vue-flow__edge-interaction"},null,8,PDt)):Cl("",!0),a.label&&a.labelX&&a.labelY?(gi(),Np(MDt,{key:1,ref_key:"labelEl",ref:r,x:a.labelX,y:a.labelY,label:a.label,"label-show-bg":a.labelShowBg,"label-bg-style":a.labelBgStyle,"label-bg-padding":a.labelBgPadding,"label-bg-border-radius":a.labelBgBorderRadius,"label-style":a.labelStyle},null,8,["x","y","label","label-show-bg","label-bg-style","label-bg-padding","label-bg-border-radius","label-style"])):Cl("",!0)],64))}});function Fnt({sourceX:n,sourceY:t,targetX:e,targetY:i}){const r=Math.abs(e-n)/2,o=e<n?e+r:e-r,a=Math.abs(i-t)/2,s=i<t?i+a:i-a;return[o,s,r,a]}function Nnt({sourceX:n,sourceY:t,targetX:e,targetY:i,sourceControlX:r,sourceControlY:o,targetControlX:a,targetControlY:s}){const l=n*.125+r*.375+a*.375+e*.125,h=t*.125+o*.375+s*.375+i*.125,u=Math.abs(l-n),d=Math.abs(h-t);return[l,h,u,d]}function l1(n,t){return n>=0?.5*n:t*25*Math.sqrt(-n)}function m9({pos:n,x1:t,y1:e,x2:i,y2:r,c:o}){let a,s;switch(n){case $t.Left:a=t-l1(t-i,o),s=e;break;case $t.Right:a=t+l1(i-t,o),s=e;break;case $t.Top:a=t,s=e-l1(e-r,o);break;case $t.Bottom:a=t,s=e+l1(r-e,o);break}return[a,s]}function Wnt(n){const{sourceX:t,sourceY:e,sourcePosition:i=$t.Bottom,targetX:r,targetY:o,targetPosition:a=$t.Top,curvature:s=.25}=n,[l,h]=m9({pos:i,x1:t,y1:e,x2:r,y2:o,c:s}),[u,d]=m9({pos:a,x1:r,y1:o,x2:t,y2:e,c:s}),[c,f,g,p]=Nnt({sourceX:t,sourceY:e,targetX:r,targetY:o,sourceControlX:l,sourceControlY:h,targetControlX:u,targetControlY:d});return[`M${t},${e} C${l},${h} ${u},${d} ${r},${o}`,c,f,g,p]}function y9({pos:n,x1:t,y1:e,x2:i,y2:r}){let o,a;switch(n){case $t.Left:case $t.Right:o=.5*(t+i),a=e;break;case $t.Top:case $t.Bottom:o=t,a=.5*(e+r);break}return[o,a]}function Vnt(n){const{sourceX:t,sourceY:e,sourcePosition:i=$t.Bottom,targetX:r,targetY:o,targetPosition:a=$t.Top}=n,[s,l]=y9({pos:i,x1:t,y1:e,x2:r,y2:o}),[h,u]=y9({pos:a,x1:r,y1:o,x2:t,y2:e}),[d,c,f,g]=Nnt({sourceX:t,sourceY:e,targetX:r,targetY:o,sourceControlX:s,sourceControlY:l,targetControlX:h,targetControlY:u});return[`M${t},${e} C${s},${l} ${h},${u} ${r},${o}`,d,c,f,g]}const b9={[$t.Left]:{x:-1,y:0},[$t.Right]:{x:1,y:0},[$t.Top]:{x:0,y:-1},[$t.Bottom]:{x:0,y:1}};function kDt({source:n,sourcePosition:t=$t.Bottom,target:e}){return t===$t.Left||t===$t.Right?n.x<e.x?{x:1,y:0}:{x:-1,y:0}:n.y<e.y?{x:0,y:1}:{x:0,y:-1}}function _9(n,t){return Math.sqrt((t.x-n.x)**2+(t.y-n.y)**2)}function LDt({source:n,sourcePosition:t=$t.Bottom,target:e,targetPosition:i=$t.Top,center:r,offset:o}){const a=b9[t],s=b9[i],l={x:n.x+a.x*o,y:n.y+a.y*o},h={x:e.x+s.x*o,y:e.y+s.y*o},u=kDt({source:l,sourcePosition:t,target:h}),d=u.x!==0?"x":"y",c=u[d];let f,g,p;const v={x:0,y:0},m={x:0,y:0},[y,b,_,w]=Fnt({sourceX:n.x,sourceY:n.y,targetX:e.x,targetY:e.y});if(a[d]*s[d]===-1){g=r.x??y,p=r.y??b;const x=[{x:g,y:l.y},{x:g,y:h.y}],S=[{x:l.x,y:p},{x:h.x,y:p}];a[d]===c?f=d==="x"?x:S:f=d==="x"?S:x}else{const x=[{x:l.x,y:h.y}],S=[{x:h.x,y:l.y}];if(d==="x"?f=a.x===c?S:x:f=a.y===c?x:S,t===i){const L=Math.abs(n[d]-e[d]);if(L<=o){const B=Math.min(o-1,o-L);a[d]===c?v[d]=(l[d]>n[d]?-1:1)*B:m[d]=(h[d]>e[d]?-1:1)*B}}if(t!==i){const L=d==="x"?"y":"x",B=a[d]===s[L],P=l[L]>h[L],k=l[L]<h[L];(a[d]===1&&(!B&&P||B&&k)||a[d]!==1&&(!B&&k||B&&P))&&(f=d==="x"?x:S)}const A={x:l.x+v.x,y:l.y+v.y},T={x:h.x+m.x,y:h.y+m.y},M=Math.max(Math.abs(A.x-f[0].x),Math.abs(T.x-f[0].x)),R=Math.max(Math.abs(A.y-f[0].y),Math.abs(T.y-f[0].y));M>=R?(g=(A.x+T.x)/2,p=f[0].y):(g=f[0].x,p=(A.y+T.y)/2)}return[[n,{x:l.x+v.x,y:l.y+v.y},...f,{x:h.x+m.x,y:h.y+m.y},e],g,p,_,w]}function EDt(n,t,e,i){const r=Math.min(_9(n,t)/2,_9(t,e)/2,i),{x:o,y:a}=t;if(n.x===o&&o===e.x||n.y===a&&a===e.y)return`L${o} ${a}`;if(n.y===a){const h=n.x<e.x?-1:1,u=n.y<e.y?1:-1;return`L ${o+r*h},${a}Q ${o},${a} ${o},${a+r*u}`}const s=n.x<e.x?1:-1,l=n.y<e.y?-1:1;return`L ${o},${a+r*l}Q ${o},${a} ${o+r*s},${a}`}function rI(n){const{sourceX:t,sourceY:e,sourcePosition:i=$t.Bottom,targetX:r,targetY:o,targetPosition:a=$t.Top,borderRadius:s=5,centerX:l,centerY:h,offset:u=20}=n,[d,c,f,g,p]=LDt({source:{x:t,y:e},sourcePosition:i,target:{x:r,y:o},targetPosition:a,center:{x:l,y:h},offset:u});return[d.reduce((m,y,b)=>{let _;return b>0&&b<d.length-1?_=EDt(d[b-1],y,d[b+1],s):_=`${b===0?"M":"L"}${y.x} ${y.y}`,m+=_,m},""),c,f,g,p]}function DDt(n){const{sourceX:t,sourceY:e,targetX:i,targetY:r}=n,[o,a,s,l]=Fnt({sourceX:t,sourceY:e,targetX:i,targetY:r});return[`M ${t},${e}L ${i},${r}`,o,a,s,l]}const IDt=fn({name:"StraightEdge",props:["label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(n,{attrs:t}){return()=>{const[e,i,r]=DDt(n);return Si(BM,{path:e,labelX:i,labelY:r,...t,...n})}}}),ODt=IDt,HDt=fn({name:"SmoothStepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","borderRadius","markerEnd","markerStart","interactionWidth","offset"],compatConfig:{MODE:3},setup(n,{attrs:t}){return()=>{const[e,i,r]=rI({...n,sourcePosition:n.sourcePosition??$t.Bottom,targetPosition:n.targetPosition??$t.Top});return Si(BM,{path:e,labelX:i,labelY:r,...t,...n})}}}),Gnt=HDt,zDt=fn({name:"StepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],setup(n,{attrs:t}){return()=>Si(Gnt,{...n,...t,borderRadius:0})}}),FDt=zDt,NDt=fn({name:"BezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","curvature","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(n,{attrs:t}){return()=>{const[e,i,r]=Wnt({...n,sourcePosition:n.sourcePosition??$t.Bottom,targetPosition:n.targetPosition??$t.Top});return Si(BM,{path:e,labelX:i,labelY:r,...t,...n})}}}),WDt=NDt,VDt=fn({name:"SimpleBezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(n,{attrs:t}){return()=>{const[e,i,r]=Vnt({...n,sourcePosition:n.sourcePosition??$t.Bottom,targetPosition:n.targetPosition??$t.Top});return Si(BM,{path:e,labelX:i,labelY:r,...t,...n})}}}),GDt=VDt,$Dt={input:wDt,default:_Dt,output:CDt},jDt={default:WDt,straight:ODt,step:FDt,smoothstep:Gnt,simplebezier:GDt};function UDt(n,t,e){const i=ke(()=>p=>t.value.get(p)),r=ke(()=>p=>e.value.get(p)),o=ke(()=>{const p={...jDt,...n.edgeTypes},v=Object.keys(p);for(const m of n.edges)m.type&&!v.includes(m.type)&&(p[m.type]=m.type);return p}),a=ke(()=>{const p={...$Dt,...n.nodeTypes},v=Object.keys(p);for(const m of n.nodes)m.type&&!v.includes(m.type)&&(p[m.type]=m.type);return p}),s=ke(()=>n.onlyRenderVisibleElements?Ant(n.nodes,{x:0,y:0,width:n.dimensions.width,height:n.dimensions.height},n.viewport,!0):n.nodes),l=ke(()=>{if(n.onlyRenderVisibleElements){const p=[];for(const v of n.edges){const m=t.value.get(v.source),y=t.value.get(v.target);VEt({sourcePos:m.computedPosition||{x:0,y:0},targetPos:y.computedPosition||{x:0,y:0},sourceWidth:m.dimensions.width,sourceHeight:m.dimensions.height,targetWidth:y.dimensions.width,targetHeight:y.dimensions.height,width:n.dimensions.width,height:n.dimensions.height,viewport:n.viewport})&&p.push(v)}return p}return n.edges}),h=ke(()=>[...s.value,...l.value]),u=ke(()=>{const p=[];for(const v of n.nodes)v.selected&&p.push(v);return p}),d=ke(()=>{const p=[];for(const v of n.edges)v.selected&&p.push(v);return p}),c=ke(()=>[...u.value,...d.value]),f=ke(()=>{const p=[];for(const v of n.nodes)v.dimensions.width&&v.dimensions.height&&v.handleBounds!==void 0&&p.push(v);return p}),g=ke(()=>s.value.length>0&&f.value.length===s.value.length);return{getNode:i,getEdge:r,getElements:h,getEdgeTypes:o,getNodeTypes:a,getEdges:l,getNodes:s,getSelectedElements:c,getSelectedNodes:u,getSelectedEdges:d,getNodesInitialized:f,areNodesInitialized:g}}class Tc{constructor(){this.currentId=0,this.flows=new Map}static getInstance(){var t;const e=(t=Jb())==null?void 0:t.appContext.app,i=e?.config.globalProperties.$vueFlowStorage??Tc.instance;return Tc.instance=i??new Tc,e&&(e.config.globalProperties.$vueFlowStorage=Tc.instance),Tc.instance}set(t,e){return this.flows.set(t,e)}get(t){return this.flows.get(t)}remove(t){return this.flows.delete(t)}create(t,e){const i=znt(),r=Cut(i),o={};for(const[c,f]of Object.entries(r.hooks)){const g=`on${c.charAt(0).toUpperCase()+c.slice(1)}`;o[g]=f.on}const a={};for(const[c,f]of Object.entries(r.hooks))a[c]=f.trigger;const s=ke(()=>{const c=new Map;for(const f of r.nodes)c.set(f.id,f);return c}),l=ke(()=>{const c=new Map;for(const f of r.edges)c.set(f.id,f);return c}),h=UDt(r,s,l),u=mDt(r,s,l);u.setState({...r,...e});const d={...o,...h,...u,...FPt(r),nodeLookup:s,edgeLookup:l,emits:a,id:t,vueFlowVersion:"1.45.0",$destroy:()=>{this.remove(t)}};return this.set(t,d),d}getId(){return`vue-flow-${this.currentId++}`}}function gn(n){const t=Tc.getInstance(),e=qq(),i=typeof n=="object",r=i?n:{id:n},o=r.id,a=o??e?.vueFlowId;let s;if(e){const l=Dv(v9,null);typeof l<"u"&&l!==null&&(!a||l.id===a)&&(s=l)}if(s||a&&(s=t.get(a)),!s||a&&s.id!==a){const l=o??t.getId(),h=t.create(l,r);s=h,(e??Kq(!0)).run(()=>{xi(h.applyDefault,(d,c,f)=>{const g=v=>{h.applyNodeChanges(v)},p=v=>{h.applyEdgeChanges(v)};d?(h.onNodesChange(g),h.onEdgesChange(p)):(h.hooks.value.nodesChange.off(g),h.hooks.value.edgesChange.off(p)),f(()=>{h.hooks.value.nodesChange.off(g),h.hooks.value.edgesChange.off(p)})},{immediate:!0}),yM(()=>{if(s){const d=t.get(s.id);d?d.$destroy():AM(`No store instance found for id ${s.id} in storage.`)}})})}else i&&s.setState(r);if(e&&(Wp(v9,s),e.vueFlowId=s.id),i){const l=Jb();l?.type.name!=="VueFlow"&&s.emits.error(new Xn(Nn.USEVUEFLOW_OPTIONS))}return s}function YDt(n){const{emits:t,dimensions:e}=gn();let i;vd(()=>{const r=n.value,o=()=>{if(!r)return;const a=xM(r);(a.width===0||a.height===0)&&t.error(new Xn(Nn.MISSING_VIEWPORT_DIMENSIONS)),e.value={width:a.width||500,height:a.height||500}};o(),window.addEventListener("resize",o),r&&(i=new ResizeObserver(()=>o()),i.observe(r)),Zq(()=>{window.removeEventListener("resize",o),i&&r&&i.unobserve(r)})})}const XDt={name:"UserSelection",compatConfig:{MODE:3}},qDt=fn({...XDt,props:{userSelectionRect:{}},setup(n){return(t,e)=>(gi(),Yi("div",{class:"vue-flow__selection vue-flow__container",style:Ku({width:`${t.userSelectionRect.width}px`,height:`${t.userSelectionRect.height}px`,transform:`translate(${t.userSelectionRect.x}px, ${t.userSelectionRect.y}px)`})},null,4))}}),KDt=["tabIndex"],ZDt={name:"NodesSelection",compatConfig:{MODE:3}},JDt=fn({...ZDt,setup(n){const{emits:t,viewport:e,getSelectedNodes:i,noPanClassName:r,disableKeyboardA11y:o,userSelectionActive:a}=gn(),s=Hnt(),l=ln(null),h=Dnt({el:l,onStart(g){t.selectionDragStart(g)},onDrag(g){t.selectionDrag(g)},onStop(g){t.selectionDragStop(g)}});vd(()=>{var g;o.value||(g=l.value)==null||g.focus({preventScroll:!0})});const u=ke(()=>Snt(i.value)),d=ke(()=>({width:`${u.value.width}px`,height:`${u.value.height}px`,top:`${u.value.y}px`,left:`${u.value.x}px`}));function c(g){t.selectionContextMenu({event:g,nodes:i.value})}function f(g){o||Cp[g.key]&&(g.preventDefault(),s({x:Cp[g.key].x,y:Cp[g.key].y},g.shiftKey))}return(g,p)=>!ne(a)&&u.value.width&&u.value.height?(gi(),Yi("div",{key:0,class:Py(["vue-flow__nodesselection vue-flow__container",ne(r)]),style:Ku({transform:`translate(${ne(e).x}px,${ne(e).y}px) scale(${ne(e).zoom})`})},[wf("div",{ref_key:"el",ref:l,class:Py([{dragging:ne(h)},"vue-flow__nodesselection-rect"]),style:Ku(d.value),tabIndex:ne(o)?void 0:-1,onContextmenu:c,onKeydown:f},null,46,KDt)],6)):Cl("",!0)}});function QDt(n,t){return{x:n.clientX-t.left,y:n.clientY-t.top}}const tIt={name:"Pane",compatConfig:{MODE:3}},eIt=fn({...tIt,props:{isSelecting:{type:Boolean},selectionKeyPressed:{type:Boolean}},setup(n){const{vueFlowRef:t,nodes:e,viewport:i,emits:r,userSelectionActive:o,removeSelectedElements:a,userSelectionRect:s,elementsSelectable:l,nodesSelectionActive:h,getSelectedEdges:u,getSelectedNodes:d,removeNodes:c,removeEdges:f,selectionMode:g,deleteKeyCode:p,multiSelectionKeyCode:v,multiSelectionActive:m,edgeLookup:y,nodeLookup:b,connectionLookup:_,defaultEdgeOptions:w,connectionStartHandle:C}=gn(),x=ln(null),S=ln(new Set),A=ln(new Set),T=ln(),M=xn(()=>l.value&&(n.isSelecting||o.value)),R=xn(()=>C.value!==null);let L=!1,B=!1;const P=oy(p,{actInsideInputWithModifier:!1}),k=oy(v);xi(P,$=>{$&&(c(d.value),f(u.value),h.value=!1)}),xi(k,$=>{m.value=$});function E($,V){return X=>{X.target===V&&$?.(X)}}function D($){if(L||R.value){L=!1;return}r.paneClick($),a(),h.value=!1}function I($){$.preventDefault(),$.stopPropagation(),r.paneContextMenu($)}function O($){r.paneScroll($)}function H($){var V,X,Z;if(T.value=(V=t.value)==null?void 0:V.getBoundingClientRect(),!l.value||!n.isSelecting||$.button!==0||$.target!==x.value||!T.value)return;(Z=(X=$.target)==null?void 0:X.setPointerCapture)==null||Z.call(X,$.pointerId);const{x:tt,y:K}=QDt($,T.value);B=!0,L=!1,a(),s.value={width:0,height:0,startX:tt,startY:K,x:tt,y:K},r.selectionStart($)}function F($){var V;if(!T.value||!s.value)return;L=!0;const{x:X,y:Z}=rl($,T.value),{startX:tt=0,startY:K=0}=s.value,rt={startX:tt,startY:K,x:X<tt?X:tt,y:Z<K?Z:K,width:Math.abs(X-tt),height:Math.abs(Z-K)},q=S.value,it=A.value;S.value=new Set(Ant(e.value,rt,i.value,g.value===DF.Partial,!0).map(W=>W.id)),A.value=new Set;const nt=((V=w.value)==null?void 0:V.selectable)??!0;for(const W of S.value){const G=_.value.get(W);if(G)for(const{edgeId:j}of G.values()){const U=y.value.get(j);U&&(U.selectable??nt)&&A.value.add(j)}}if(!p9(q,S.value)){const W=_u(b.value,S.value,!0);r.nodesChange(W)}if(!p9(it,A.value)){const W=_u(y.value,A.value);r.edgesChange(W)}s.value=rt,o.value=!0,h.value=!1}function N($){var V;$.button!==0||!B||((V=$.target)==null||V.releasePointerCapture($.pointerId),!o.value&&s.value&&$.target===x.value&&D($),o.value=!1,s.value=null,h.value=S.value.size>0,r.selectionEnd($),n.selectionKeyPressed&&(L=!1),B=!1)}return($,V)=>(gi(),Yi("div",{ref_key:"container",ref:x,class:Py(["vue-flow__pane vue-flow__container",{selection:$.isSelecting}]),onClick:V[0]||(V[0]=X=>M.value?void 0:E(D,x.value)(X)),onContextmenu:V[1]||(V[1]=X=>E(I,x.value)(X)),onWheelPassive:V[2]||(V[2]=X=>E(O,x.value)(X)),onPointerenter:V[3]||(V[3]=X=>M.value?void 0:ne(r).paneMouseEnter(X)),onPointerdown:V[4]||(V[4]=X=>M.value?H(X):ne(r).paneMouseMove(X)),onPointermove:V[5]||(V[5]=X=>M.value?F(X):ne(r).paneMouseMove(X)),onPointerup:V[6]||(V[6]=X=>M.value?N(X):void 0),onPointerleave:V[7]||(V[7]=X=>ne(r).paneMouseLeave(X))},[Cf($.$slots,"default"),ne(o)&&ne(s)?(gi(),Np(qDt,{key:0,"user-selection-rect":ne(s)},null,8,["user-selection-rect"])):Cl("",!0),ne(h)&&ne(d).length?(gi(),Np(JDt,{key:1})):Cl("",!0)],34))}}),iIt={name:"Transform",compatConfig:{MODE:3}},nIt=fn({...iIt,setup(n){const{viewport:t,fitViewOnInit:e,fitViewOnInitDone:i}=gn(),r=ke(()=>e.value?!i.value:!1),o=ke(()=>`translate(${t.value.x}px,${t.value.y}px) scale(${t.value.zoom})`);return(a,s)=>(gi(),Yi("div",{class:"vue-flow__transformationpane vue-flow__container",style:Ku({transform:o.value,opacity:r.value?0:void 0})},[Cf(a.$slots,"default")],4))}}),rIt={name:"Viewport",compatConfig:{MODE:3}},oIt=fn({...rIt,setup(n){const{minZoom:t,maxZoom:e,defaultViewport:i,translateExtent:r,zoomActivationKeyCode:o,selectionKeyCode:a,panActivationKeyCode:s,panOnScroll:l,panOnScrollMode:h,panOnScrollSpeed:u,panOnDrag:d,zoomOnDoubleClick:c,zoomOnPinch:f,zoomOnScroll:g,preventScrolling:p,noWheelClassName:v,noPanClassName:m,emits:y,connectionStartHandle:b,userSelectionActive:_,paneDragging:w,d3Zoom:C,d3Selection:x,d3ZoomHandler:S,viewport:A,viewportRef:T,paneClickDistance:M}=gn();YDt(T);const R=Zw(!1),L=Zw(!1);let B=null,P=!1,k=0,E={x:0,y:0,zoom:0};const D=oy(s),I=oy(a),O=oy(o),H=xn(()=>(!I.value||I.value&&a.value===!0)&&(D.value||d.value)),F=xn(()=>D.value||l.value),N=xn(()=>I.value||a.value===!0&&H.value!==!0);vd(()=>{if(!T.value){AM("Viewport element is missing");return}const K=T.value,rt=K.getBoundingClientRect(),q=xEt().clickDistance(M.value).scaleExtent([t.value,e.value]).translateExtent(r.value),it=ds(K).call(q),nt=it.on("wheel.zoom"),W=ev.translate(i.value.x??0,i.value.y??0).scale(Lf(i.value.zoom??1,t.value,e.value)),G=[[0,0],[rt.width,rt.height]],j=q.constrain()(W,G,r.value);q.transform(it,j),q.wheelDelta(V),C.value=q,x.value=it,S.value=nt,A.value={x:j.x,y:j.y,zoom:j.k},q.on("start",U=>{var J;if(!U.sourceEvent)return null;k=U.sourceEvent.button,R.value=!0;const ot=Z(U.transform);((J=U.sourceEvent)==null?void 0:J.type)==="mousedown"&&(w.value=!0),E=ot,y.viewportChangeStart(ot),y.moveStart({event:U,flowTransform:ot})}),q.on("end",U=>{if(!U.sourceEvent)return null;if(R.value=!1,w.value=!1,$(H.value,k??0)&&!P&&y.paneContextMenu(U.sourceEvent),P=!1,X(E,U.transform)){const J=Z(U.transform);E=J,y.viewportChangeEnd(J),y.moveEnd({event:U,flowTransform:J})}}),q.filter(U=>{var J;const ot=O.value||g.value,st=f.value&&U.ctrlKey,lt=U.button;if(lt===1&&U.type==="mousedown"&&(tt(U,"vue-flow__node")||tt(U,"vue-flow__edge")))return!0;if(!H.value&&!ot&&!F.value&&!c.value&&!f.value||_.value||!c.value&&U.type==="dblclick"||tt(U,v.value)&&U.type==="wheel"||tt(U,m.value)&&(U.type!=="wheel"||F.value&&U.type==="wheel"&&!O.value)||!f.value&&U.ctrlKey&&U.type==="wheel"||!ot&&!F.value&&!st&&U.type==="wheel")return!1;if(!f&&U.type==="touchstart"&&((J=U.touches)==null?void 0:J.length)>1)return U.preventDefault(),!1;if(!H.value&&(U.type==="mousedown"||U.type==="touchstart")||a.value===!0&&Array.isArray(d.value)&&d.value.includes(0)&&lt===0||Array.isArray(d.value)&&!d.value.includes(lt)&&(U.type==="mousedown"||U.type==="touchstart"))return!1;const ft=Array.isArray(d.value)&&d.value.includes(lt)||a.value===!0&&Array.isArray(d.value)&&!d.value.includes(0)||!lt||lt<=1;return(!U.ctrlKey||D.value||U.type==="wheel")&&ft}),xi([_,H],()=>{_.value&&!R.value?q.on("zoom",null):_.value||q.on("zoom",U=>{A.value={x:U.transform.x,y:U.transform.y,zoom:U.transform.k};const J=Z(U.transform);P=$(H.value,k??0),y.viewportChange(J),y.move({event:U,flowTransform:J})})},{immediate:!0}),xi([_,F,h,O,f,p,v],()=>{F.value&&!O.value&&!_.value?it.on("wheel.zoom",U=>{if(tt(U,v.value))return!1;const J=O.value||g.value,ot=f.value&&U.ctrlKey;if(!(!p.value||F.value||J||ot))return!1;U.preventDefault(),U.stopImmediatePropagation();const lt=it.property("__zoom").k||1,ft=iS();if(!D.value&&U.ctrlKey&&f.value&&ft){const He=Qs(U),Ai=V(U),Pe=lt*2**Ai;q.scaleTo(it,Pe,He,U);return}const vt=U.deltaMode===1?20:1;let pt=h.value===ry.Vertical?0:U.deltaX*vt,bt=h.value===ry.Horizontal?0:U.deltaY*vt;!ft&&U.shiftKey&&h.value!==ry.Vertical&&!pt&&bt&&(pt=bt,bt=0),q.translateBy(it,-(pt/lt)*u.value,-(bt/lt)*u.value);const me=Z(it.property("__zoom"));B&&clearTimeout(B),L.value?(y.move({event:U,flowTransform:me}),y.viewportChange(me),B=setTimeout(()=>{y.moveEnd({event:U,flowTransform:me}),y.viewportChangeEnd(me),L.value=!1},150)):(L.value=!0,y.moveStart({event:U,flowTransform:me}),y.viewportChangeStart(me))},{passive:!1}):typeof nt<"u"&&it.on("wheel.zoom",function(U,J){const ot=!p.value&&U.type==="wheel"&&!U.ctrlKey,st=O.value||g.value,lt=f.value&&U.ctrlKey;if(!st&&!l.value&&!lt&&U.type==="wheel"||ot||tt(U,v.value))return null;U.preventDefault(),nt.call(this,U,J)},{passive:!1})},{immediate:!0})});function $(K,rt){return rt===2&&Array.isArray(K)&&K.includes(2)}function V(K){const rt=K.ctrlKey&&iS()?10:1;return-K.deltaY*(K.deltaMode===1?.05:K.deltaMode?1:.002)*rt}function X(K,rt){return K.x!==rt.x&&!Number.isNaN(rt.x)||K.y!==rt.y&&!Number.isNaN(rt.y)||K.zoom!==rt.k&&!Number.isNaN(rt.k)}function Z(K){return{x:K.x,y:K.y,zoom:K.k}}function tt(K,rt){return K.target.closest(`.${rt}`)}return(K,rt)=>(gi(),Yi("div",{ref_key:"viewportRef",ref:T,class:"vue-flow__viewport vue-flow__container"},[fh(eIt,{"is-selecting":N.value,"selection-key-pressed":ne(I),class:Py({connecting:!!ne(b),dragging:ne(w),draggable:ne(d)===!0||Array.isArray(ne(d))&&ne(d).includes(0)})},{default:ZL(()=>[fh(nIt,null,{default:ZL(()=>[Cf(K.$slots,"default")]),_:3})]),_:3},8,["is-selecting","selection-key-pressed","class"])],512))}}),aIt=["id"],sIt=["id"],lIt=["id"],hIt={name:"A11yDescriptions",compatConfig:{MODE:3}},uIt=fn({...hIt,setup(n){const{id:t,disableKeyboardA11y:e,ariaLiveMessage:i}=gn();return(r,o)=>(gi(),Yi(_l,null,[wf("div",{id:`${ne(vnt)}-${ne(t)}`,style:{display:"none"}}," Press enter or space to select a node. "+JL(ne(e)?"":"You can then use the arrow keys to move the node around.")+" You can then use the arrow keys to move the node around, press delete to remove it and press escape to cancel. ",9,aIt),wf("div",{id:`${ne(mnt)}-${ne(t)}`,style:{display:"none"}}," Press enter or space to select an edge. You can then press delete to remove it or press escape to cancel. ",8,sIt),ne(e)?Cl("",!0):(gi(),Yi("div",{key:0,id:`${ne(PEt)}-${ne(t)}`,"aria-live":"assertive","aria-atomic":"true",style:{position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)","clip-path":"inset(100%)"}},JL(ne(i)),9,lIt))],64))}});function dIt(){const n=gn();xi(()=>n.viewportHelper.value.viewportInitialized,t=>{t&&setTimeout(()=>{n.emits.init(n),n.emits.paneReady(n)},1)})}function cIt(n,t,e){return e===$t.Left?n-t:e===$t.Right?n+t:n}function fIt(n,t,e){return e===$t.Top?n-t:e===$t.Bottom?n+t:n}const HF=function({radius:n=10,centerX:t=0,centerY:e=0,position:i=$t.Top,type:r}){return Si("circle",{class:`vue-flow__edgeupdater vue-flow__edgeupdater-${r}`,cx:cIt(t,n,i),cy:fIt(e,n,i),r:n,stroke:"transparent",fill:"transparent"})};HF.props=["radius","centerX","centerY","position","type"];HF.compatConfig={MODE:3};const C9=HF,gIt=fn({name:"Edge",compatConfig:{MODE:3},props:["id"],setup(n){const{id:t,addSelectedEdges:e,connectionMode:i,edgeUpdaterRadius:r,emits:o,nodesSelectionActive:a,noPanClassName:s,getEdgeTypes:l,removeSelectedEdges:h,findEdge:u,findNode:d,isValidConnection:c,multiSelectionActive:f,disableKeyboardA11y:g,elementsSelectable:p,edgesUpdatable:v,edgesFocusable:m,hooks:y}=gn(),b=ke(()=>u(n.id)),{emit:_,on:w}=oDt(b.value,o),C=Dv(TM),x=Jb(),S=ln(!1),A=ln(!1),T=ln(""),M=ln(null),R=ln("source"),L=ln(null),B=xn(()=>typeof b.value.selectable>"u"?p.value:b.value.selectable),P=xn(()=>typeof b.value.updatable>"u"?v.value:b.value.updatable),k=xn(()=>typeof b.value.focusable>"u"?m.value:b.value.focusable);Wp(iDt,n.id),Wp(nDt,L);const E=ke(()=>b.value.class instanceof Function?b.value.class(b.value):b.value.class),D=ke(()=>b.value.style instanceof Function?b.value.style(b.value):b.value.style),I=ke(()=>{const G=b.value.type||"default",j=C?.[`edge-${G}`];if(j)return j;let U=b.value.template??l.value[G];if(typeof U=="string"&&x){const J=Object.keys(x.appContext.components);J&&J.includes(G)&&(U=Jq(G,!1))}return U&&typeof U!="string"?U:(o.error(new Xn(Nn.EDGE_TYPE_MISSING,U)),!1)}),{handlePointerDown:O}=Int({nodeId:T,handleId:M,type:R,isValidConnection:c,edgeUpdaterType:R,onEdgeUpdate:N,onEdgeUpdateEnd:$});return()=>{const G=d(b.value.source),j=d(b.value.target),U="pathOptions"in b.value?b.value.pathOptions:{};if(!G&&!j)return o.error(new Xn(Nn.EDGE_SOURCE_TARGET_MISSING,b.value.id,b.value.source,b.value.target)),null;if(!G)return o.error(new Xn(Nn.EDGE_SOURCE_MISSING,b.value.id,b.value.source)),null;if(!j)return o.error(new Xn(Nn.EDGE_TARGET_MISSING,b.value.id,b.value.target)),null;if(!b.value||b.value.hidden||G.hidden||j.hidden)return null;let J;i.value===od.Strict?J=G.handleBounds.source:J=[...G.handleBounds.source||[],...G.handleBounds.target||[]];const ot=h9(J,b.value.sourceHandle);let st;i.value===od.Strict?st=j.handleBounds.target:st=[...j.handleBounds.target||[],...j.handleBounds.source||[]];const lt=h9(st,b.value.targetHandle),ft=ot?.position||$t.Bottom,vt=lt?.position||$t.Top,{x:pt,y:bt}=iv(G,ot,ft),{x:me,y:He}=iv(j,lt,vt);return b.value.sourceX=pt,b.value.sourceY=bt,b.value.targetX=me,b.value.targetY=He,Si("g",{ref:L,key:n.id,"data-id":n.id,class:["vue-flow__edge",`vue-flow__edge-${I.value===!1?"default":b.value.type||"default"}`,s.value,E.value,{updating:S.value,selected:b.value.selected,animated:b.value.animated,inactive:!B.value&&!y.value.edgeClick.hasListeners()}],tabIndex:k.value?0:void 0,"aria-label":b.value.ariaLabel===null?void 0:b.value.ariaLabel??`Edge from ${b.value.source} to ${b.value.target}`,"aria-describedby":k.value?`${mnt}-${t}`:void 0,"aria-roledescription":"edge",role:k.value?"group":"img",...b.value.domAttributes,onClick:X,onContextmenu:Z,onDblclick:tt,onMouseenter:K,onMousemove:rt,onMouseleave:q,onKeyDown:k.value?W:void 0},[A.value?null:Si(I.value===!1?l.value.default:I.value,{id:n.id,sourceNode:G,targetNode:j,source:b.value.source,target:b.value.target,type:b.value.type,updatable:P.value,selected:b.value.selected,animated:b.value.animated,label:b.value.label,labelStyle:b.value.labelStyle,labelShowBg:b.value.labelShowBg,labelBgStyle:b.value.labelBgStyle,labelBgPadding:b.value.labelBgPadding,labelBgBorderRadius:b.value.labelBgBorderRadius,data:b.value.data,events:{...b.value.events,...w},style:D.value,markerStart:`url('#${ub(b.value.markerStart,t)}')`,markerEnd:`url('#${ub(b.value.markerEnd,t)}')`,sourcePosition:ft,targetPosition:vt,sourceX:pt,sourceY:bt,targetX:me,targetY:He,sourceHandleId:b.value.sourceHandle,targetHandleId:b.value.targetHandle,interactionWidth:b.value.interactionWidth,...U}),[P.value==="source"||P.value===!0?[Si("g",{onMousedown:it,onMouseenter:H,onMouseout:F},Si(C9,{position:ft,centerX:pt,centerY:bt,radius:r.value,type:"source","data-type":"source"}))]:null,P.value==="target"||P.value===!0?[Si("g",{onMousedown:nt,onMouseenter:H,onMouseout:F},Si(C9,{position:vt,centerX:me,centerY:He,radius:r.value,type:"target","data-type":"target"}))]:null]])};function H(){S.value=!0}function F(){S.value=!1}function N(G,j){_.update({event:G,edge:b.value,connection:j})}function $(G){_.updateEnd({event:G,edge:b.value}),A.value=!1}function V(G,j){G.button===0&&(A.value=!0,T.value=j?b.value.target:b.value.source,M.value=(j?b.value.targetHandle:b.value.sourceHandle)??null,R.value=j?"target":"source",_.updateStart({event:G,edge:b.value}),O(G))}function X(G){var j;const U={event:G,edge:b.value};B.value&&(a.value=!1,b.value.selected&&f.value?(h([b.value]),(j=L.value)==null||j.blur()):e([b.value])),_.click(U)}function Z(G){_.contextMenu({event:G,edge:b.value})}function tt(G){_.doubleClick({event:G,edge:b.value})}function K(G){_.mouseEnter({event:G,edge:b.value})}function rt(G){_.mouseMove({event:G,edge:b.value})}function q(G){_.mouseLeave({event:G,edge:b.value})}function it(G){V(G,!0)}function nt(G){V(G,!1)}function W(G){var j;!g.value&&ynt.includes(G.key)&&B.value&&(G.key==="Escape"?((j=L.value)==null||j.blur(),h([u(n.id)])):e([u(n.id)]))}}}),pIt=gIt,vIt=fn({name:"ConnectionLine",compatConfig:{MODE:3},setup(){var n;const{id:t,connectionMode:e,connectionStartHandle:i,connectionEndHandle:r,connectionPosition:o,connectionLineType:a,connectionLineStyle:s,connectionLineOptions:l,connectionStatus:h,viewport:u,findNode:d}=gn(),c=(n=Dv(TM))==null?void 0:n["connection-line"],f=ke(()=>{var y;return d((y=i.value)==null?void 0:y.nodeId)}),g=ke(()=>{var y;return d((y=r.value)==null?void 0:y.nodeId)??null}),p=ke(()=>({x:(o.value.x-u.value.x)/u.value.zoom,y:(o.value.y-u.value.y)/u.value.zoom})),v=ke(()=>l.value.markerStart?`url(#${ub(l.value.markerStart,t)})`:""),m=ke(()=>l.value.markerEnd?`url(#${ub(l.value.markerEnd,t)})`:"");return()=>{var y,b,_;if(!f.value||!i.value)return null;const w=i.value.id,C=i.value.type,x=f.value.handleBounds;let S=x?.[C]??[];if(e.value===od.Loose){const D=x?.[C==="source"?"target":"source"]??[];S=[...S,...D]}if(!S)return null;const A=(w?S.find(D=>D.id===w):S[0])??null,T=A?.position??$t.Top,{x:M,y:R}=iv(f.value,A,T);let L=null;g.value&&(e.value===od.Strict?L=((y=g.value.handleBounds[C==="source"?"target":"source"])==null?void 0:y.find(D=>{var I;return D.id===((I=r.value)==null?void 0:I.id)}))||null:L=((b=[...g.value.handleBounds.source??[],...g.value.handleBounds.target??[]])==null?void 0:b.find(D=>{var I;return D.id===((I=r.value)==null?void 0:I.id)}))||null);const B=((_=r.value)==null?void 0:_.position)??(T?iI[T]:null);if(!T||!B)return null;const P=a.value??l.value.type??Ac.Bezier;let k="";const E={sourceX:M,sourceY:R,sourcePosition:T,targetX:p.value.x,targetY:p.value.y,targetPosition:B};return P===Ac.Bezier?[k]=Wnt(E):P===Ac.Step?[k]=rI({...E,borderRadius:0}):P===Ac.SmoothStep?[k]=rI(E):P===Ac.SimpleBezier?[k]=Vnt(E):k=`M${M},${R} ${p.value.x},${p.value.y}`,Si("svg",{class:"vue-flow__edges vue-flow__connectionline vue-flow__container"},Si("g",{class:"vue-flow__connection"},c?Si(c,{sourceX:M,sourceY:R,sourcePosition:T,targetX:p.value.x,targetY:p.value.y,targetPosition:B,sourceNode:f.value,sourceHandle:A,targetNode:g.value,targetHandle:L,markerEnd:m.value,markerStart:v.value,connectionStatus:h.value}):Si("path",{d:k,class:[l.value.class,h,"vue-flow__connection-path"],style:{...s.value,...l.value.style},"marker-end":m.value,"marker-start":v.value})))}}}),mIt=vIt,yIt=["id","markerWidth","markerHeight","markerUnits","orient"],bIt={name:"MarkerType",compatConfig:{MODE:3}},_It=fn({...bIt,props:{id:{},type:{},color:{default:"none"},width:{default:12.5},height:{default:12.5},markerUnits:{default:"strokeWidth"},orient:{default:"auto-start-reverse"},strokeWidth:{default:1}},setup(n){return(t,e)=>(gi(),Yi("marker",{id:t.id,class:"vue-flow__arrowhead",viewBox:"-10 -10 20 20",refX:"0",refY:"0",markerWidth:`${t.width}`,markerHeight:`${t.height}`,markerUnits:t.markerUnits,orient:t.orient},[t.type===ne(QD).ArrowClosed?(gi(),Yi("polyline",{key:0,style:Ku({stroke:t.color,fill:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",points:"-5,-4 0,0 -5,4 -5,-4"},null,4)):Cl("",!0),t.type===ne(QD).Arrow?(gi(),Yi("polyline",{key:1,style:Ku({stroke:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",fill:"none",points:"-5,-4 0,0 -5,4"},null,4)):Cl("",!0)],8,yIt))}}),CIt={class:"vue-flow__marker vue-flow__container","aria-hidden":"true"},wIt={name:"MarkerDefinitions",compatConfig:{MODE:3}},xIt=fn({...wIt,setup(n){const{id:t,edges:e,connectionLineOptions:i,defaultMarkerColor:r}=gn(),o=ke(()=>{const a=new Set,s=[],l=h=>{if(h){const u=ub(h,t);a.has(u)||(typeof h=="object"?s.push({...h,id:u,color:h.color||r.value}):s.push({id:u,color:r.value,type:h}),a.add(u))}};for(const h of[i.value.markerEnd,i.value.markerStart])l(h);for(const h of e.value)for(const u of[h.markerStart,h.markerEnd])l(u);return s.sort((h,u)=>h.id.localeCompare(u.id))});return(a,s)=>(gi(),Yi("svg",CIt,[wf("defs",null,[(gi(!0),Yi(_l,null,vH(o.value,l=>(gi(),Np(_It,{id:l.id,key:l.id,type:l.type,color:l.color,width:l.width,height:l.height,markerUnits:l.markerUnits,"stroke-width":l.strokeWidth,orient:l.orient},null,8,["id","type","color","width","height","markerUnits","stroke-width","orient"]))),128))])]))}}),SIt={name:"Edges",compatConfig:{MODE:3}},AIt=fn({...SIt,setup(n){const{findNode:t,getEdges:e,elevateEdgesOnSelect:i}=gn();return(r,o)=>(gi(),Yi(_l,null,[fh(xIt),(gi(!0),Yi(_l,null,vH(ne(e),a=>(gi(),Yi("svg",{key:a.id,class:"vue-flow__edges vue-flow__container",style:Ku({zIndex:ne(GEt)(a,ne(t),ne(i))})},[fh(ne(pIt),{id:a.id},null,8,["id"])],4))),128)),fh(ne(mIt))],64))}}),TIt=fn({name:"Node",compatConfig:{MODE:3},props:["id","resizeObserver"],setup(n){const{id:t,noPanClassName:e,selectNodesOnDrag:i,nodesSelectionActive:r,multiSelectionActive:o,emits:a,removeSelectedNodes:s,addSelectedNodes:l,updateNodeDimensions:h,onUpdateNodeInternals:u,getNodeTypes:d,nodeExtent:c,elevateNodesOnSelect:f,disableKeyboardA11y:g,ariaLiveMessage:p,snapToGrid:v,snapGrid:m,nodeDragThreshold:y,nodesDraggable:b,elementsSelectable:_,nodesConnectable:w,nodesFocusable:C,hooks:x}=gn(),S=ln(null);Wp(Ent,S),Wp(Lnt,n.id);const A=Dv(TM),T=Jb(),M=Hnt(),{node:R,parentNode:L}=Ont(n.id),{emit:B,on:P}=hDt(R,a),k=xn(()=>typeof R.draggable>"u"?b.value:R.draggable),E=xn(()=>typeof R.selectable>"u"?_.value:R.selectable),D=xn(()=>typeof R.connectable>"u"?w.value:R.connectable),I=xn(()=>typeof R.focusable>"u"?C.value:R.focusable),O=ke(()=>E.value||k.value||x.value.nodeClick.hasListeners()||x.value.nodeDoubleClick.hasListeners()||x.value.nodeMouseEnter.hasListeners()||x.value.nodeMouseMove.hasListeners()||x.value.nodeMouseLeave.hasListeners()),H=xn(()=>!!R.dimensions.width&&!!R.dimensions.height),F=ke(()=>{const j=R.type||"default",U=A?.[`node-${j}`];if(U)return U;let J=R.template||d.value[j];if(typeof J=="string"&&T){const ot=Object.keys(T.appContext.components);ot&&ot.includes(j)&&(J=Jq(j,!1))}return J&&typeof J!="string"?J:(a.error(new Xn(Nn.NODE_TYPE_MISSING,J)),!1)}),N=Dnt({id:n.id,el:S,disabled:()=>!k.value,selectable:E,dragHandle:()=>R.dragHandle,onStart(j){B.dragStart(j)},onDrag(j){B.drag(j)},onStop(j){B.dragStop(j)},onClick(j){W(j)}}),$=ke(()=>R.class instanceof Function?R.class(R):R.class),V=ke(()=>{const j=(R.style instanceof Function?R.style(R):R.style)||{},U=R.width instanceof Function?R.width(R):R.width,J=R.height instanceof Function?R.height(R):R.height;return!j.width&&U&&(j.width=typeof U=="string"?U:`${U}px`),!j.height&&J&&(j.height=typeof J=="string"?J:`${J}px`),j}),X=xn(()=>Number(R.zIndex??V.value.zIndex??0));return u(j=>{(j.includes(n.id)||!j.length)&&tt()}),vd(()=>{xi(()=>R.hidden,(j=!1,U,J)=>{!j&&S.value&&(n.resizeObserver.observe(S.value),J(()=>{S.value&&n.resizeObserver.unobserve(S.value)}))},{immediate:!0,flush:"post"})}),xi([()=>R.type,()=>R.sourcePosition,()=>R.targetPosition],()=>{yh(()=>{h([{id:n.id,nodeElement:S.value,forceUpdate:!0}])})}),xi([()=>R.position.x,()=>R.position.y,()=>{var j;return(j=L.value)==null?void 0:j.computedPosition.x},()=>{var j;return(j=L.value)==null?void 0:j.computedPosition.y},()=>{var j;return(j=L.value)==null?void 0:j.computedPosition.z},X,()=>R.selected,()=>R.dimensions.height,()=>R.dimensions.width,()=>{var j;return(j=L.value)==null?void 0:j.dimensions.height},()=>{var j;return(j=L.value)==null?void 0:j.dimensions.width}],([j,U,J,ot,st,lt])=>{const ft={x:j,y:U,z:lt+(f.value&&R.selected?1e3:0)};typeof J<"u"&&typeof ot<"u"?R.computedPosition=HEt({x:J,y:ot,z:st},ft):R.computedPosition=ft},{flush:"post",immediate:!0}),xi([()=>R.extent,c],([j,U],[J,ot])=>{(j!==J||U!==ot)&&Z()}),R.extent==="parent"||typeof R.extent=="object"&&"range"in R.extent&&R.extent.range==="parent"?$D(()=>H).toBe(!0).then(Z):Z(),()=>R.hidden?null:Si("div",{ref:S,"data-id":R.id,class:["vue-flow__node",`vue-flow__node-${F.value===!1?"default":R.type||"default"}`,{[e.value]:k.value,dragging:N?.value,draggable:k.value,selected:R.selected,selectable:E.value,parent:R.isParent},$.value],style:{visibility:H.value?"visible":"hidden",zIndex:R.computedPosition.z??X.value,transform:`translate(${R.computedPosition.x}px,${R.computedPosition.y}px)`,pointerEvents:O.value?"all":"none",...V.value},tabIndex:I.value?0:void 0,role:I.value?"group":void 0,"aria-describedby":g.value?void 0:`${vnt}-${t}`,"aria-label":R.ariaLabel,"aria-roledescription":"node",...R.domAttributes,onMouseenter:K,onMousemove:rt,onMouseleave:q,onContextmenu:it,onClick:W,onDblclick:nt,onKeydown:G},[Si(F.value===!1?d.value.default:F.value,{id:R.id,type:R.type,data:R.data,events:{...R.events,...P},selected:R.selected,resizing:R.resizing,dragging:N.value,connectable:D.value,position:R.computedPosition,dimensions:R.dimensions,isValidTargetPos:R.isValidTargetPos,isValidSourcePos:R.isValidSourcePos,parent:R.parentNode,parentNodeId:R.parentNode,zIndex:R.computedPosition.z??X.value,targetPosition:R.targetPosition,sourcePosition:R.sourcePosition,label:R.label,dragHandle:R.dragHandle,onUpdateNodeInternals:tt})]);function Z(){const j=R.computedPosition,{computedPosition:U,position:J}=IF(R,v.value?SM(j,m.value):j,a.error,c.value,L.value);(R.computedPosition.x!==U.x||R.computedPosition.y!==U.y)&&(R.computedPosition={...R.computedPosition,...U}),(R.position.x!==J.x||R.position.y!==J.y)&&(R.position=J)}function tt(){S.value&&h([{id:n.id,nodeElement:S.value,forceUpdate:!0}])}function K(j){N?.value||B.mouseEnter({event:j,node:R})}function rt(j){N?.value||B.mouseMove({event:j,node:R})}function q(j){N?.value||B.mouseLeave({event:j,node:R})}function it(j){return B.contextMenu({event:j,node:R})}function nt(j){return B.doubleClick({event:j,node:R})}function W(j){E.value&&(!i.value||!k.value||y.value>0)&&nI(R,o.value,l,s,r,!1,S.value),B.click({event:j,node:R})}function G(j){if(!(tI(j)||g.value))if(ynt.includes(j.key)&&E.value){const U=j.key==="Escape";nI(R,o.value,l,s,r,U,S.value)}else k.value&&R.selected&&Cp[j.key]&&(j.preventDefault(),p.value=`Moved selected node ${j.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~R.position.x}, y: ${~~R.position.y}`,M({x:Cp[j.key].x,y:Cp[j.key].y},j.shiftKey))}}}),MIt=TIt;function RIt(n={includeHiddenNodes:!1}){const{nodes:t}=gn();return ke(()=>{if(t.value.length===0)return!1;for(const e of t.value)if((n.includeHiddenNodes||!e.hidden)&&(e?.handleBounds===void 0||e.dimensions.width===0||e.dimensions.height===0))return!1;return!0})}const PIt={class:"vue-flow__nodes vue-flow__container"},BIt={name:"Nodes",compatConfig:{MODE:3}},kIt=fn({...BIt,setup(n){const{getNodes:t,updateNodeDimensions:e,emits:i}=gn(),r=RIt(),o=ln();return xi(r,a=>{a&&yh(()=>{i.nodesInitialized(t.value)})},{immediate:!0}),vd(()=>{o.value=new ResizeObserver(a=>{const s=a.map(l=>({id:l.target.getAttribute("data-id"),nodeElement:l.target,forceUpdate:!0}));yh(()=>e(s))})}),Zq(()=>{var a;return(a=o.value)==null?void 0:a.disconnect()}),(a,s)=>(gi(),Yi("div",PIt,[o.value?(gi(!0),Yi(_l,{key:0},vH(ne(t),(l,h,u,d)=>{const c=[l.id];if(d&&d.key===l.id&&_ut(d,c))return d;const f=(gi(),Np(ne(MIt),{id:l.id,key:l.id,"resize-observer":o.value},null,8,["id","resize-observer"]));return f.memo=c,f},s,0),128)):Cl("",!0)]))}});function LIt(){const{emits:n}=gn();vd(()=>{if(knt()){const t=document.querySelector(".vue-flow__pane");t&&window.getComputedStyle(t).zIndex!=="1"&&n.error(new Xn(Nn.MISSING_STYLES))}})}const EIt=wf("div",{class:"vue-flow__edge-labels"},null,-1),DIt={name:"VueFlow",compatConfig:{MODE:3}},Moe=fn({...DIt,props:{id:{},modelValue:{},nodes:{},edges:{},edgeTypes:{},nodeTypes:{},connectionMode:{},connectionLineType:{},connectionLineStyle:{default:void 0},connectionLineOptions:{default:void 0},connectionRadius:{},isValidConnection:{type:[Function,null],default:void 0},deleteKeyCode:{default:void 0},selectionKeyCode:{type:[Boolean,null],default:void 0},multiSelectionKeyCode:{default:void 0},zoomActivationKeyCode:{default:void 0},panActivationKeyCode:{default:void 0},snapToGrid:{type:Boolean,default:void 0},snapGrid:{},onlyRenderVisibleElements:{type:Boolean,default:void 0},edgesUpdatable:{type:[Boolean,String],default:void 0},nodesDraggable:{type:Boolean,default:void 0},nodesConnectable:{type:Boolean,default:void 0},nodeDragThreshold:{},elementsSelectable:{type:Boolean,default:void 0},selectNodesOnDrag:{type:Boolean,default:void 0},panOnDrag:{type:[Boolean,Array],default:void 0},minZoom:{},maxZoom:{},defaultViewport:{},translateExtent:{},nodeExtent:{},defaultMarkerColor:{},zoomOnScroll:{type:Boolean,default:void 0},zoomOnPinch:{type:Boolean,default:void 0},panOnScroll:{type:Boolean,default:void 0},panOnScrollSpeed:{},panOnScrollMode:{},paneClickDistance:{},zoomOnDoubleClick:{type:Boolean,default:void 0},preventScrolling:{type:Boolean,default:void 0},selectionMode:{},edgeUpdaterRadius:{},fitViewOnInit:{type:Boolean,default:void 0},connectOnClick:{type:Boolean,default:void 0},applyDefault:{type:Boolean,default:void 0},autoConnect:{type:[Boolean,Function],default:void 0},noDragClassName:{},noWheelClassName:{},noPanClassName:{},defaultEdgeOptions:{},elevateEdgesOnSelect:{type:Boolean,default:void 0},elevateNodesOnSelect:{type:Boolean,default:void 0},disableKeyboardA11y:{type:Boolean,default:void 0},edgesFocusable:{type:Boolean,default:void 0},nodesFocusable:{type:Boolean,default:void 0},autoPanOnConnect:{type:Boolean,default:void 0},autoPanOnNodeDrag:{type:Boolean,default:void 0},autoPanSpeed:{}},emits:["nodesChange","edgesChange","nodesInitialized","paneReady","init","updateNodeInternals","error","connect","connectStart","connectEnd","clickConnectStart","clickConnectEnd","moveStart","move","moveEnd","selectionDragStart","selectionDrag","selectionDragStop","selectionContextMenu","selectionStart","selectionEnd","viewportChangeStart","viewportChange","viewportChangeEnd","paneScroll","paneClick","paneContextMenu","paneMouseEnter","paneMouseMove","paneMouseLeave","edgeUpdate","edgeContextMenu","edgeMouseEnter","edgeMouseMove","edgeMouseLeave","edgeDoubleClick","edgeClick","edgeUpdateStart","edgeUpdateEnd","nodeContextMenu","nodeMouseEnter","nodeMouseMove","nodeMouseLeave","nodeDoubleClick","nodeClick","nodeDragStart","nodeDrag","nodeDragStop","miniMapNodeClick","miniMapNodeDoubleClick","miniMapNodeMouseEnter","miniMapNodeMouseMove","miniMapNodeMouseLeave","update:modelValue","update:nodes","update:edges"],setup(n,{expose:t,emit:e}){const i=n,r=mut(),o=MB(i,"modelValue",e),a=MB(i,"nodes",e),s=MB(i,"edges",e),l=gn(i),h=fDt({modelValue:o,nodes:a,edges:s},i,l);return pDt(e,l.hooks),dIt(),LIt(),Wp(TM,r),yut(()=>{h()}),t(l),(u,d)=>(gi(),Yi("div",{ref:ne(l).vueFlowRef,class:"vue-flow"},[fh(oIt,null,{default:ZL(()=>[fh(AIt),EIt,fh(kIt),Cf(u.$slots,"zoom-pane")]),_:3}),Cf(u.$slots,"default"),fh(uIt)],512))}});typeof window=="object"&&window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach);typeof window<"u"&&(function(n){n.forEach(t=>{Object.prototype.hasOwnProperty.call(t,"append")||Object.defineProperty(t,"append",{configurable:!0,enumerable:!0,writable:!0,value(...e){const i=document.createDocumentFragment();e.forEach(r=>{const o=r instanceof Node;i.appendChild(o?r:document.createTextNode(String(r)))}),this.appendChild(i)}})})})([Element.prototype,Document.prototype,DocumentFragment.prototype]);class Fh{get disposed(){return this._disposed===!0}dispose(){this._disposed=!0}}(function(n){function t(){return(e,i,r)=>{const o=r.value,a=e.__proto__;r.value=function(...s){this.disposed||(o.call(this,...s),a.dispose.call(this))}}}n.dispose=t})(Fh||(Fh={}));class w9{constructor(){this.isDisposed=!1,this.items=new Set}get disposed(){return this.isDisposed}dispose(){this.isDisposed||(this.isDisposed=!0,this.items.forEach(t=>{t.dispose()}),this.items.clear())}contains(t){return this.items.has(t)}add(t){this.items.add(t)}remove(t){this.items.delete(t)}clear(){this.items.clear()}}(function(n){function t(e){const i=new n;return e.forEach(r=>{i.add(r)}),i}n.from=t})(w9||(w9={}));function $nt(n,t,e){if(e)switch(e.length){case 0:return n.call(t);case 1:return n.call(t,e[0]);case 2:return n.call(t,e[0],e[1]);case 3:return n.call(t,e[0],e[1],e[2]);case 4:return n.call(t,e[0],e[1],e[2],e[3]);case 5:return n.call(t,e[0],e[1],e[2],e[3],e[4]);case 6:return n.call(t,e[0],e[1],e[2],e[3],e[4],e[5]);default:return n.apply(t,e)}return n.call(t)}function de(n,t,...e){return $nt(n,t,e)}function IIt(n){return typeof n=="object"&&n.then&&typeof n.then=="function"}function x9(n){return n!=null&&(n instanceof Promise||IIt(n))}function jnt(...n){const t=[];if(n.forEach(i=>{Array.isArray(i)?t.push(...i):t.push(i)}),t.some(i=>x9(i))){const i=t.map(r=>x9(r)?r:Promise.resolve(r!==!1));return Promise.all(i).then(r=>r.reduce((o,a)=>a!==!1&&o,!0))}return t.every(i=>i!==!1)}function FB(n,t){const e=[];for(let i=0;i<n.length;i+=2){const r=n[i],o=n[i+1],a=Array.isArray(t)?t:[t],s=$nt(r,o,a);e.push(s)}return jnt(e)}class OIt{constructor(){this.listeners={}}on(t,e,i){return e==null?this:(this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e,i),this)}once(t,e,i){const r=(...o)=>(this.off(t,r),FB([e,i],o));return this.on(t,r,this)}off(t,e,i){if(!(t||e||i))return this.listeners={},this;const r=this.listeners;return(t?[t]:Object.keys(r)).forEach(a=>{const s=r[a];if(s){if(!(e||i)){delete r[a];return}for(let l=s.length-2;l>=0;l-=2)e&&s[l]!==e||i&&s[l+1]!==i||s.splice(l,2)}}),this}trigger(t,...e){let i=!0;if(t!=="*"){const o=this.listeners[t];o!=null&&(i=FB([...o],e))}const r=this.listeners["*"];return r!=null?jnt([i,FB([...r],[t,...e])]):i}emit(t,...e){return this.trigger(t,...e)}}function HIt(n,...t){t.forEach(e=>{Object.getOwnPropertyNames(e.prototype).forEach(i=>{i!=="constructor"&&Object.defineProperty(n.prototype,i,Object.getOwnPropertyDescriptor(e.prototype,i))})})}const zIt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e])};function FIt(n,t){zIt(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}class NIt{}const WIt=/^\s*class\s+/.test(`${NIt}`)||/^\s*class\s*\{/.test(`${class{}}`);function zF(n,t){let e;return WIt?e=class extends t{}:(e=function(){return t.apply(this,arguments)},FIt(e,t)),Object.defineProperty(e,"name",{value:n}),e}function S9(n){return n==="__proto__"}function FF(n,t,e="/"){let i;const r=Array.isArray(t)?t:t.split(e);if(r.length)for(i=n;r.length;){const o=r.shift();if(Object(i)===i&&o&&o in i)i=i[o];else return}return i}function Zv(n,t,e,i="/"){const r=Array.isArray(t)?t:t.split(i),o=r.pop();if(o&&!S9(o)){let a=n;r.forEach(s=>{S9(s)||(a[s]==null&&(a[s]={}),a=a[s])}),a[o]=e}return n}function A9(n,t,e="/"){const i=Array.isArray(t)?t.slice():t.split(e),r=i.pop();if(r)if(i.length>0){const o=FF(n,i);o&&delete o[r]}else delete n[r];return n}var VIt=function(n,t,e,i){var r=arguments.length,o=r<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(t,e,o):a(t,e))||o);return r>3&&o&&Object.defineProperty(t,e,o),o};class Qo extends OIt{dispose(){this.off()}}VIt([Fh.dispose()],Qo.prototype,"dispose",null);(function(n){n.dispose=Fh.dispose})(Qo||(Qo={}));HIt(Qo,Fh);const Unt=n=>{const t=Object.create(null);return(e=>t[e]||(t[e]=n(e)))},Ynt=Unt(n=>n.replace(/\B([A-Z])/g,"-$1").toLowerCase()),NF=Unt(n=>Put(BT(n)).replace(/ /g,""));function NB(n){let t=2166136261,e=!1,i=n;for(let r=0,o=i.length;r<o;r+=1){let a=i.charCodeAt(r);a>127&&!e&&(i=unescape(encodeURIComponent(i)),a=i.charCodeAt(r),e=!0),t^=a,t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24)}return t>>>0}function rS(){let n="";const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";for(let e=0,i=t.length;e<i;e+=1){const r=t[e],o=Math.random()*16|0,a=r==="x"?o:r==="y"?o&3|8:r;n+=a.toString(16)}return n}function GIt(n,t,e){const i=Math.min(2,Math.floor(n.length*.34));let r=Math.floor(n.length*.4)+1,o,a=!1;const s=n.toLowerCase();for(const l of t){const h=e(l);if(h!==void 0&&Math.abs(h.length-s.length)<=i){const u=h.toLowerCase();if(u===s){if(h===n)continue;return l}if(a||h.length<3)continue;const d=$It(s,u,r-1);if(d===void 0)continue;d<3?(a=!0,o=l):(r=d,o=l)}}return o}function $It(n,t,e){let i=new Array(t.length+1),r=new Array(t.length+1);const o=e+1;for(let s=0;s<=t.length;s+=1)i[s]=s;for(let s=1;s<=n.length;s+=1){const l=n.charCodeAt(s-1),h=s>e?s-e:1,u=t.length>e+s?e+s:t.length;r[0]=s;let d=s;for(let f=1;f<h;f+=1)r[f]=o;for(let f=h;f<=u;f+=1){const g=l===t.charCodeAt(f-1)?i[f-1]:Math.min(i[f]+1,r[f-1]+1,i[f-1]+2);r[f]=g,d=Math.min(d,g)}for(let f=u+1;f<=t.length;f+=1)r[f]=o;if(d>e)return;const c=i;i=r,r=c}const a=i[t.length];return a>e?void 0:a}function Nh(n){return typeof n=="string"&&n.slice(-1)==="%"}function _s(n,t){if(n==null)return 0;let e;if(typeof n=="string"){if(e=parseFloat(n),Nh(n)&&(e/=100,Number.isFinite(e)))return e*t}else e=n;return Number.isFinite(e)?e>0&&e<1?e*t:e:0}function Ef(n){if(typeof n=="object"){let e=0,i=0,r=0,o=0;return n.vertical!=null&&Number.isFinite(n.vertical)&&(i=o=n.vertical),n.horizontal!=null&&Number.isFinite(n.horizontal)&&(r=e=n.horizontal),n.left!=null&&Number.isFinite(n.left)&&(e=n.left),n.top!=null&&Number.isFinite(n.top)&&(i=n.top),n.right!=null&&Number.isFinite(n.right)&&(r=n.right),n.bottom!=null&&Number.isFinite(n.bottom)&&(o=n.bottom),{top:i,right:r,bottom:o,left:e}}let t=0;return n!=null&&Number.isFinite(n)&&(t=n),{top:t,right:t,bottom:t,left:t}}let WF=!1,Xnt=!1,qnt=!1,Knt=!1,Znt=!1,Jnt=!1,Qnt=!1,trt=!1,ert=!1,irt=!1,nrt=!1,rrt=!1,ort=!1,art=!1,srt=!1,lrt=!1;if(typeof navigator=="object"){const n=navigator.userAgent;WF=n.indexOf("Macintosh")>=0,Xnt=!!n.match(/(iPad|iPhone|iPod)/g),qnt=n.indexOf("Windows")>=0,Knt=n.indexOf("MSIE")>=0,Znt=!!n.match(/Trident\/7\./),Jnt=!!n.match(/Edge\//),Qnt=n.indexOf("Mozilla/")>=0&&n.indexOf("MSIE")<0&&n.indexOf("Edge/")<0,ert=n.indexOf("Chrome/")>=0&&n.indexOf("Edge/")<0,irt=n.indexOf("Opera/")>=0||n.indexOf("OPR/")>=0,nrt=n.indexOf("Firefox/")>=0,rrt=n.indexOf("AppleWebKit/")>=0&&n.indexOf("Chrome/")<0&&n.indexOf("Edge/")<0,typeof document=="object"&&(lrt=!document.createElementNS||`${document.createElementNS("http://www.w3.org/2000/svg","foreignObject")}`!="[object SVGForeignObjectElement]"||n.indexOf("Opera/")>=0)}typeof window=="object"&&(trt=window.chrome!=null&&window.chrome.app!=null&&window.chrome.app.runtime!=null,art=window.PointerEvent!=null&&!WF);if(typeof document=="object"){ort="ontouchstart"in document.documentElement;try{const n=Object.defineProperty({},"passive",{get(){srt=!0}}),t=document.createElement("div");t.addEventListener&&t.addEventListener("click",()=>{},n)}catch{}}var sd;(function(n){n.IS_MAC=WF,n.IS_IOS=Xnt,n.IS_WINDOWS=qnt,n.IS_IE=Knt,n.IS_IE11=Znt,n.IS_EDGE=Jnt,n.IS_NETSCAPE=Qnt,n.IS_CHROME_APP=trt,n.IS_CHROME=ert,n.IS_OPERA=irt,n.IS_FIREFOX=nrt,n.IS_SAFARI=rrt,n.SUPPORT_TOUCH=ort,n.SUPPORT_POINTER=art,n.SUPPORT_PASSIVE=srt,n.NO_FOREIGNOBJECT=lrt,n.SUPPORT_FOREIGNOBJECT=!n.NO_FOREIGNOBJECT})(sd||(sd={}));(function(n){function t(){const o=window.module;return o!=null&&o.hot!=null&&o.hot.status!=null?o.hot.status():"unkonwn"}n.getHMRStatus=t;function e(){return t()==="apply"}n.isApplyingHMR=e;const i={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};function r(o){const a=document.createElement(i[o]||"div"),s=`on${o}`;let l=s in a;return l||(a.setAttribute(s,"return;"),l=typeof a[s]=="function"),l}n.isEventSupported=r})(sd||(sd={}));const VF=/[\t\r\n\f]/g,GF=/\S+/g,nv=n=>` ${n} `;function rv(n){return n&&n.getAttribute&&n.getAttribute("class")||""}function x_(n,t){if(n==null||t==null)return!1;const e=nv(rv(n)),i=nv(t);return n.nodeType===1?e.replace(VF," ").includes(i):!1}function ri(n,t){if(!(n==null||t==null)){if(typeof t=="function")return ri(n,t(rv(n)));if(typeof t=="string"&&n.nodeType===1){const e=t.match(GF)||[],i=nv(rv(n)).replace(VF," ");let r=e.reduce((o,a)=>o.indexOf(nv(a))<0?`${o}${a} `:o,i);r=r.trim(),i!==r&&n.setAttribute("class",r)}}}function za(n,t){if(n!=null){if(typeof t=="function")return za(n,t(rv(n)));if((!t||typeof t=="string")&&n.nodeType===1){const e=(t||"").match(GF)||[],i=nv(rv(n)).replace(VF," ");let r=e.reduce((o,a)=>{const s=nv(a);return o.indexOf(s)>-1?o.replace(s," "):o},i);r=t?r.trim():"",i!==r&&n.setAttribute("class",r)}}}function hrt(n,t,e){if(!(n==null||t==null)){if(e!=null&&typeof t=="string"){e?ri(n,t):za(n,t);return}if(typeof t=="function")return hrt(n,t(rv(n),e),e);typeof t=="string"&&(t.match(GF)||[]).forEach(r=>{x_(n,r)?za(n,r):ri(n,r)})}}let T9=0;function jIt(){return T9+=1,`v${T9}`}function $F(n){return(n.id==null||n.id==="")&&(n.id=jIt()),n.id}function ld(n){return n==null?!1:typeof n.getScreenCTM=="function"&&n instanceof SVGElement}const nr={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},M9="1.1";function R9(n,t=document){return t.createElement(n)}function jF(n,t=nr.xhtml,e=document){return e.createElementNS(t,n)}function Os(n,t=document){return jF(n,nr.svg,t)}function oS(n){if(n){const e=`<svg xmlns="${nr.svg}" xmlns:xlink="${nr.xlink}" version="${M9}">${n}</svg>`,{documentElement:i}=UIt(e,{async:!1});return i}const t=document.createElementNS(nr.svg,"svg");return t.setAttributeNS(nr.xmlns,"xmlns:xlink",nr.xlink),t.setAttribute("version",M9),t}function UIt(n,t={}){let e;try{const i=new DOMParser;if(t.async!=null){const r=i;r.async=t.async}e=i.parseFromString(n,t.mimeType||"text/xml")}catch{e=void 0}if(!e||e.getElementsByTagName("parsererror").length)throw new Error(`Invalid XML: ${n}`);return e}function YIt(n,t=!0){const e=n.nodeName;return t?e.toLowerCase():e.toUpperCase()}function UF(n){let t=0,e=n.previousSibling;for(;e;)e.nodeType===1&&(t+=1),e=e.previousSibling;return t}function XIt(n,t){return n.querySelectorAll(t)}function qIt(n,t){return n.querySelector(t)}function urt(n,t,e){const i=n.ownerSVGElement;let r=n.parentNode;for(;r&&r!==e&&r!==i;){if(x_(r,t))return r;r=r.parentNode}return null}function drt(n,t){const e=t&&t.parentNode;return n===e||!!(e&&e.nodeType===1&&n.compareDocumentPosition(e)&16)}function ov(n){n&&(Array.isArray(n)?n:[n]).forEach(e=>{e.parentNode&&e.parentNode.removeChild(e)})}function S_(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function A_(n,t){(Array.isArray(t)?t:[t]).forEach(i=>{i!=null&&n.appendChild(i)})}function KIt(n,t){const e=n.firstChild;return e?YF(e,t):A_(n,t)}function YF(n,t){const e=n.parentNode;e&&(Array.isArray(t)?t:[t]).forEach(r=>{r!=null&&e.insertBefore(r,n)})}function ZIt(n,t){t?.appendChild(n)}function P9(n){try{return n instanceof HTMLElement}catch{return typeof n=="object"&&n.nodeType===1&&typeof n.style=="object"&&typeof n.ownerDocument=="object"}}const crt=["viewBox","attributeName","attributeType","repeatCount","textLength","lengthAdjust","gradientUnits"];function JIt(n,t){return n.getAttribute(t)}function frt(n,t){const e=prt(t);e.ns?n.hasAttributeNS(e.ns,e.local)&&n.removeAttributeNS(e.ns,e.local):n.hasAttribute(t)&&n.removeAttribute(t)}function XF(n,t,e){if(e==null)return frt(n,t);const i=prt(t);i.ns&&typeof e=="string"?n.setAttributeNS(i.ns,t,e):t==="id"?n.id=`${e}`:n.setAttribute(t,`${e}`)}function grt(n,t){Object.keys(t).forEach(e=>{XF(n,e,t[e])})}function Pi(n,t,e){if(t==null){const i=n.attributes,r={};for(let o=0;o<i.length;o+=1)r[i[o].name]=i[o].value;return r}if(typeof t=="string"&&e===void 0)return n.getAttribute(t);typeof t=="object"?grt(n,t):XF(n,t,e)}function prt(n){if(n.indexOf(":")!==-1){const t=n.split(":");return{ns:nr[t[0]],local:t[1]}}return{ns:null,local:n}}function db(n){const t={};return Object.keys(n).forEach(e=>{const i=crt.includes(e)?e:Ynt(e);t[i]=n[e]}),t}function h1(n){const t={};return n.split(";").forEach(i=>{const r=i.trim();if(r){const o=r.split("=");o.length&&(t[o[0].trim()]=o[1]?o[1].trim():"")}}),t}function oI(n,t){return Object.keys(t).forEach(e=>{if(e==="class")n[e]=n[e]?`${n[e]} ${t[e]}`:t[e];else if(e==="style"){const i=typeof n[e]=="object",r=typeof t[e]=="object";let o,a;i&&r?(o=n[e],a=t[e]):i?(o=n[e],a=h1(t[e])):r?(o=h1(n[e]),a=t[e]):(o=h1(n[e]),a=h1(t[e])),n[e]=oI(o,a)}else n[e]=t[e]}),n}function QIt(n,t,e={}){const i=e.offset||0,r=[],o=[];let a,s,l=null;for(let h=0;h<n.length;h+=1){a=o[h]=n[h];for(let u=0,d=t.length;u<d;u+=1){const c=t[u],f=c.start+i,g=c.end+i;h>=f&&h<g&&(typeof a=="string"?a=o[h]={t:n[h],attrs:c.attrs}:a.attrs=oI(oI({},a.attrs),c.attrs),e.includeAnnotationIndices&&(a.annotations==null&&(a.annotations=[]),a.annotations.push(u)))}s=o[h-1],s?d0(a)&&d0(s)?(l=l,JSON.stringify(a.attrs)===JSON.stringify(s.attrs)?l.t+=a.t:(r.push(l),l=a)):d0(a)||d0(s)?(l=l,r.push(l),l=a):l=(l||"")+a:l=a}return l!=null&&r.push(l),r}function tOt(n){return n.replace(/ /g,"")}var B9;(function(n){function t(h){const u="data:";return h.substr(0,u.length)===u}n.isDataUrl=t;function e(h,u){if(!h||t(h)){setTimeout(()=>u(null,h));return}const d=()=>{u(new Error(`Failed to load image: ${h}`))},c=window.FileReader?g=>{if(g.status===200){const p=new FileReader;p.onload=v=>{const m=v.target.result;u(null,m)},p.onerror=d,p.readAsDataURL(g.response)}else d()}:g=>{const p=v=>{const y=[];for(let b=0;b<v.length;b+=32768)y.push(String.fromCharCode.apply(null,v.subarray(b,b+32768)));return y.join("")};if(g.status===200){let v=h.split(".").pop()||"png";v==="svg"&&(v="svg+xml");const m=`data:image/${v};base64,`,y=new Uint8Array(g.response),b=m+btoa(p(y));u(null,b)}else d()},f=new XMLHttpRequest;f.responseType=window.FileReader?"blob":"arraybuffer",f.open("GET",h,!0),f.addEventListener("error",d),f.addEventListener("load",()=>c(f)),f.send()}n.imageToDataUri=e;function i(h){let u=h.replace(/\s/g,"");u=decodeURIComponent(u);const d=u.indexOf(","),c=u.slice(0,d),f=c.split(":")[1].split(";")[0],g=u.slice(d+1);let p;c.indexOf("base64")>=0?p=atob(g):p=unescape(encodeURIComponent(g));const v=new Uint8Array(p.length);for(let m=0;m<p.length;m+=1)v[m]=p.charCodeAt(m);return new Blob([v],{type:f})}n.dataUriToBlob=i;function r(h,u){const d=window.navigator.msSaveBlob;if(d)d(h,u);else{const c=window.URL.createObjectURL(h),f=document.createElement("a");f.href=c,f.download=u,document.body.appendChild(f),f.click(),document.body.removeChild(f),window.URL.revokeObjectURL(c)}}n.downloadBlob=r;function o(h,u){const d=i(h);r(d,u)}n.downloadDataUri=o;function a(h){const u=h.match(/<svg[^>]*viewBox\s*=\s*(["']?)(.+?)\1[^>]*>/i);return u&&u[2]?u[2].replace(/\s+/," ").split(" "):null}function s(h){const u=parseFloat(h);return Number.isNaN(u)?null:u}function l(h,u={}){let d=null;const c=b=>(d==null&&(d=a(h)),d!=null?s(d[b]):null),f=b=>{const _=h.match(b);return _&&_[2]?s(_[2]):null};let g=u.width;if(g==null&&(g=f(/<svg[^>]*width\s*=\s*(["']?)(.+?)\1[^>]*>/i)),g==null&&(g=c(2)),g==null)throw new Error("Can not parse width from svg string");let p=u.height;if(p==null&&(p=f(/<svg[^>]*height\s*=\s*(["']?)(.+?)\1[^>]*>/i)),p==null&&(p=c(3)),p==null)throw new Error("Can not parse height from svg string");return`data:image/svg+xml,${encodeURIComponent(h).replace(/'/g,"%27").replace(/"/g,"%22")}`}n.svgToDataUrl=l})(B9||(B9={}));let Mc;const eOt={px(n){return n},mm(n){return Mc*n},cm(n){return Mc*n*10},in(n){return Mc*n*25.4},pt(n){return Mc*(25.4*n/72)},pc(n){return Mc*(25.4*n/6)}};var k9;(function(n){function t(i,r,o){const a=document.createElement("div"),s=a.style;s.display="inline-block",s.position="absolute",s.left="-15000px",s.top="-15000px",s.width=i+(o||"px"),s.height=r+(o||"px"),document.body.appendChild(a);const l=a.getBoundingClientRect(),h={width:l.width||0,height:l.height||0};return document.body.removeChild(a),h}n.measure=t;function e(i,r){Mc==null&&(Mc=t("1","1","mm").width);const o=r?eOt[r]:null;return o?o(i):i}n.toPx=e})(k9||(k9={}));const iOt=/-(.)/g;function nOt(n){return n.replace(iOt,(t,e)=>e.toUpperCase())}const WB={},L9=["webkit","ms","moz","o"],vrt=typeof document<"u"?document.createElement("div").style:{};function rOt(n){for(let t=0;t<L9.length;t+=1){const e=L9[t]+n;if(e in vrt)return e}return null}function oOt(n){const t=nOt(n);if(WB[t]==null){const e=t.charAt(0).toUpperCase()+t.slice(1);WB[t]=t in vrt?t:rOt(e)}return WB[t]}function E9(n,t){const e=n.ownerDocument&&n.ownerDocument.defaultView&&n.ownerDocument.defaultView.opener?n.ownerDocument.defaultView.getComputedStyle(n,null):window.getComputedStyle(n,null);return e&&t?e.getPropertyValue(t)||e[t]:e}const aOt={animationIterationCount:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0};function sOt(n){return/^--/.test(n)}function lOt(n,t,e){const i=window.getComputedStyle(n,null);return e?i.getPropertyValue(t)||void 0:i[t]||n.style[t]}function hOt(n,t){return!aOt[n]&&typeof t=="number"?`${t}px`:t}function T_(n,t,e){if(typeof t=="string"){const i=sOt(t);if(i||(t=oOt(t)),e===void 0)return lOt(n,t,i);i||(e=hOt(t,e));const r=n.style;i?r.setProperty(t,e):r[t]=e;return}for(const i in t)T_(n,i,t[i])}const aS=new WeakMap;function D9(n,t){const e=BT(t),i=aS.get(n);if(i)return i[e]}function uOt(n,t,e){const i=BT(t),r=aS.get(n);r?r[i]=e:aS.set(n,{[i]:e})}function Df(n,t,e){if(!t){const i={};return Object.keys(aS).forEach(r=>{i[r]=D9(n,r)}),i}if(typeof t=="string"){if(e===void 0)return D9(n,t);uOt(n,t,e);return}for(const i in t)Df(n,i,t[i])}class se{get[Symbol.toStringTag](){return se.toStringTag}get type(){return this.node.nodeName}get id(){return this.node.id}set id(t){this.node.id=t}constructor(t,e,i){if(!t)throw new TypeError("Invalid element to create vector");let r;if(se.isVector(t))r=t.node;else if(typeof t=="string")if(t.toLowerCase()==="svg")r=oS();else if(t[0]==="<"){const o=oS(t);r=document.importNode(o.firstChild,!0)}else r=document.createElementNS(nr.svg,t);else r=t;this.node=r,e&&this.setAttributes(e),i&&this.append(i)}transform(t,e){return t==null?av(this.node):(av(this.node,t,e),this)}translate(t,e=0,i={}){return t==null?O9(this.node):(O9(this.node,t,e,i),this)}rotate(t,e,i,r={}){return t==null?lI(this.node):(lI(this.node,t,e,i,r),this)}scale(t,e){return t==null?hI(this.node):(hI(this.node,t,e),this)}getTransformToElement(t){const e=se.toNode(t);return sy(this.node,e)}removeAttribute(t){return frt(this.node,t),this}getAttribute(t){return JIt(this.node,t)}setAttribute(t,e){return XF(this.node,t,e),this}setAttributes(t){return grt(this.node,t),this}attr(t,e){return t==null?Pi(this.node):typeof t=="string"&&e===void 0?Pi(this.node,t):(typeof t=="object"?Pi(this.node,t):Pi(this.node,t,e),this)}svg(){return this.node instanceof SVGSVGElement?this:se.create(this.node.ownerSVGElement)}defs(){const t=this.svg()||this,e=t.node.getElementsByTagName("defs")[0];return e?se.create(e):se.create("defs").appendTo(t)}text(t,e={}){return yrt(this.node,t,e),this}tagName(){return YIt(this.node)}clone(){return se.create(this.node.cloneNode(!0))}remove(){return ov(this.node),this}empty(){return S_(this.node),this}append(t){return A_(this.node,se.toNodes(t)),this}appendTo(t){return ZIt(this.node,se.isVector(t)?t.node:t),this}prepend(t){return KIt(this.node,se.toNodes(t)),this}before(t){return YF(this.node,se.toNodes(t)),this}replace(t){return this.node.parentNode&&this.node.parentNode.replaceChild(se.toNode(t),this.node),se.create(t)}first(){return this.node.firstChild?se.create(this.node.firstChild):null}last(){return this.node.lastChild?se.create(this.node.lastChild):null}get(t){const e=this.node.childNodes[t];return e?se.create(e):null}indexOf(t){return Array.prototype.slice.call(this.node.childNodes).indexOf(se.toNode(t))}find(t){const e=[],i=XIt(this.node,t);if(i)for(let r=0,o=i.length;r<o;r+=1)e.push(se.create(i[r]));return e}findOne(t){const e=qIt(this.node,t);return e?se.create(e):null}findParentByClass(t,e){const i=urt(this.node,t,e);return i?se.create(i):null}matches(t){const e=this.node;this.node.matches;const i=e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector||null;return i&&i.call(e,t)}contains(t){return drt(this.node,se.isVector(t)?t.node:t)}wrap(t){const e=se.create(t),i=this.node.parentNode;return i?.insertBefore(e.node,this.node),e.append(this)}parent(t){let e=this;if(e.node.parentNode==null)return null;if(e=se.create(e.node.parentNode),t==null)return e;do if(typeof t=="string"?e.matches(t):e instanceof t)return e;while(e=se.create(e.node.parentNode));return e}children(){const t=this.node.childNodes,e=[];for(let i=0;i<t.length;i+=1)t[i].nodeType===1&&e.push(se.create(t[i]));return e}eachChild(t,e){const i=this.children();for(let r=0,o=i.length;r<o;r+=1)t.call(i[r],i[r],r,i),e&&i[r].eachChild(t,e);return this}index(){return UF(this.node)}hasClass(t){return x_(this.node,t)}addClass(t){return ri(this.node,t),this}removeClass(t){return za(this.node,t),this}toggleClass(t,e){return hrt(this.node,t,e),this}toLocalPoint(t,e){return BOt(this.node,t,e)}sample(t=1){return this.node instanceof SVGPathElement?gOt(this.node,t):[]}toPath(){return se.create(COt(this.node))}toPathData(){return wrt(this.node)}}(function(n){n.toStringTag=`X6.${n.name}`;function t(a){if(a==null)return!1;if(a instanceof n)return!0;const s=a[Symbol.toStringTag],l=a;return(s==null||s===n.toStringTag)&&l.node instanceof SVGElement&&typeof l.sample=="function"&&typeof l.toPath=="function"}n.isVector=t;function e(a,s,l){return new n(a,s,l)}n.create=e;function i(a){if(a[0]==="<"){const s=oS(a),l=[];for(let h=0,u=s.childNodes.length;h<u;h+=1){const d=s.childNodes[h];l.push(e(document.importNode(d,!0)))}return l}return[e(a)]}n.createVectors=i;function r(a){return t(a)?a.node:a}n.toNode=r;function o(a){return Array.isArray(a)?a.map(s=>r(s)):[r(a)]}n.toNodes=o})(se||(se={}));function dOt(n,t){const e=se.create(t),i=se.create("textPath"),r=n.d;if(r&&n["xlink:href"]===void 0){const o=se.create("path").attr("d",r).appendTo(e.defs());i.attr("xlink:href",`#${o.id}`)}return typeof n=="object"&&i.attr(n),i.node}function cOt(n,t,e){const i=e.eol,r=e.baseSize,o=e.lineHeight;let a=0,s;const l={},h=t.length-1;for(let u=0;u<=h;u+=1){let d=t[u],c=null;if(typeof d=="object"){const f=d.attrs,g=se.create("tspan",f);s=g.node;let p=d.t;i&&u===h&&(p+=i),s.textContent=p;const v=f.class;v&&g.addClass(v),e.includeAnnotationIndices&&g.attr("annotations",d.annotations.join(",")),c=parseFloat(f["font-size"]),c===void 0&&(c=r),c&&c>a&&(a=c)}else i&&u===h&&(d+=i),s=document.createTextNode(d||" "),r&&r>a&&(a=r);n.appendChild(s)}return a&&(l.maxFontSize=a),o?l.lineHeight=o:a&&(l.lineHeight=a*1.2),l}const mrt=/em$/;function u1(n,t){const e=parseFloat(n);return mrt.test(n)?e*t:e}function fOt(n,t,e,i){if(!Array.isArray(t))return 0;const r=t.length;if(!r)return 0;let o=t[0];const a=u1(o.maxFontSize,e)||e;let s=0;const l=u1(i,e);for(let d=1;d<r;d+=1){o=t[d];const c=u1(o.lineHeight,e)||l;s+=c}const h=u1(o.maxFontSize,e)||e;let u;switch(n){case"middle":u=a/2-.15*h-s/2;break;case"bottom":u=-(.25*h)-s;break;case"top":default:u=.8*a;break}return u}function yrt(n,t,e={}){t=tOt(t);const i=e.eol;let r=e.textPath;const o=e.textVerticalAnchor,a=o==="middle"||o==="bottom"||o==="top";let s=e.x;s===void 0&&(s=n.getAttribute("x")||0);const l=e.includeAnnotationIndices;let h=e.annotations;h&&!Array.isArray(h)&&(h=[h]);const u=e.lineHeight,d=u==="auto",c=d?"1.5em":u||"1em";let f=!0;const g=n.childNodes;if(g.length===1){const A=g[0];A&&A.tagName.toUpperCase()==="TITLE"&&(f=!1)}f&&S_(n),Pi(n,{"xml:space":"preserve",display:t||e.displayEmpty?null:"none"});const p=Pi(n,"font-size");let v=parseFloat(p);v||(v=16,(a||h)&&!p&&Pi(n,"font-size",`${v}`));let m;r?(typeof r=="string"&&(r={d:r}),m=dOt(r,n)):m=document.createDocumentFragment();let y,b=0,_;const w=t.split(`
`),C=[],x=w.length-1;for(let A=0;A<=x;A+=1){y=c;let T="v-line";const M=Os("tspan");let R,L=w[A];if(L)if(h){const B=QIt(L,h,{offset:-b,includeAnnotationIndices:l});R=cOt(M,B,{eol:A!==x&&i,baseSize:v,lineHeight:d?null:c,includeAnnotationIndices:l});const P=R.lineHeight;P&&d&&A!==0&&(y=P),A===0&&(_=R.maxFontSize*.8)}else i&&A!==x&&(L+=i),M.textContent=L;else{M.textContent="-",T+=" v-empty-line";const B=M.style;B.fillOpacity=0,B.strokeOpacity=0,h&&(R={})}R&&C.push(R),A>0&&M.setAttribute("dy",y),(A>0||r)&&M.setAttribute("x",s),M.className.baseVal=T,m.appendChild(M),b+=L.length+1}if(a)if(h)y=fOt(o,C,v,c);else if(o==="top")y="0.8em";else{let A;switch(x>0?(A=parseFloat(c)||1,A*=x,mrt.test(c)||(A/=v)):A=0,o){case"middle":y=`${.3-A/2}em`;break;case"bottom":y=`${-A-.3}em`;break}}else o===0?y="0em":o?y=o:(y=0,n.getAttribute("y")==null&&n.setAttribute("y",`${_||"0.8em"}`));m.firstChild.setAttribute("dy",y),n.appendChild(m)}function ay(n,t={}){const e=document.createElement("canvas").getContext("2d");if(!n)return{width:0};const i=[],r=t["font-size"]?`${parseFloat(t["font-size"])}px`:"14px";return i.push(t["font-style"]||"normal"),i.push(t["font-variant"]||"normal"),i.push(t["font-weight"]||400),i.push(r),i.push(t["font-family"]||"sans-serif"),e.font=i.join(" "),e.measureText(n)}function I9(n,t,e,i={}){if(t>=e)return[n,""];const r=n.length,o={};let a=Math.round(t/e*r-1);for(a<0&&(a=0);a>=0&&a<r;){const s=n.slice(0,a),l=o[s]||ay(s,i).width,h=n.slice(0,a+1),u=o[h]||ay(h,i).width;if(o[s]=l,o[h]=u,l>t)a-=1;else if(u<=t)a+=1;else break}return[n.slice(0,a),n.slice(a)]}function brt(n,t,e={},i={}){const r=t.width,o=t.height,a=i.eol||`
`,s=e.fontSize||14,l=e.lineHeight?parseFloat(e.lineHeight):Math.ceil(s*1.4),h=Math.floor(o/l);if(n.indexOf(a)>-1){const v=rS(),m=[];return n.split(a).map(y=>{const b=brt(y,Object.assign(Object.assign({},t),{height:Number.MAX_SAFE_INTEGER}),e,Object.assign(Object.assign({},i),{eol:v}));b&&m.push(...b.split(v))}),m.slice(0,h).join(a)}const{width:u}=ay(n,e);if(u<r)return n;const d=[];let c=n,f=u,g=i.ellipsis,p=0;g&&(typeof g!="string"&&(g=""),p=ay(g,e).width);for(let v=0;v<h;v+=1)if(f>r)if(v===h-1){const[y]=I9(c,r-p,f,e);d.push(g?`${y}${g}`:y)}else{const[y,b]=I9(c,r,f,e);d.push(y),c=b,f=ay(c,e).width}else{d.push(c);break}return d.join(a)}const aI=.551784;function yr(n,t,e=NaN){const i=n.getAttribute(t);if(i==null)return e;const r=parseFloat(i);return Number.isNaN(r)?e:r}function gOt(n,t=1){const e=n.getTotalLength(),i=[];let r=0,o;for(;r<e;)o=n.getPointAtLength(r),i.push({distance:r,x:o.x,y:o.y}),r+=t;return i}function pOt(n){return["M",yr(n,"x1"),yr(n,"y1"),"L",yr(n,"x2"),yr(n,"y2")].join(" ")}function vOt(n){const t=sS(n);return t.length===0?null:`${_rt(t)} Z`}function mOt(n){const t=sS(n);return t.length===0?null:_rt(t)}function _rt(n){return`M ${n.map(e=>`${e.x} ${e.y}`).join(" L")}`}function sS(n){const t=[],e=n.points;if(e)for(let i=0,r=e.numberOfItems;i<r;i+=1)t.push(e.getItem(i));return t}function yOt(n){const t=yr(n,"cx",0),e=yr(n,"cy",0),i=yr(n,"r"),r=i*aI;return["M",t,e-i,"C",t+r,e-i,t+i,e-r,t+i,e,"C",t+i,e+r,t+r,e+i,t,e+i,"C",t-r,e+i,t-i,e+r,t-i,e,"C",t-i,e-r,t-r,e-i,t,e-i,"Z"].join(" ")}function bOt(n){const t=yr(n,"cx",0),e=yr(n,"cy",0),i=yr(n,"rx"),r=yr(n,"ry")||i,o=i*aI,a=r*aI;return["M",t,e-r,"C",t+o,e-r,t+i,e-a,t+i,e,"C",t+i,e+a,t+o,e+r,t,e+r,"C",t-o,e+r,t-i,e+a,t-i,e,"C",t-i,e-a,t-o,e-r,t,e-r,"Z"].join(" ")}function _Ot(n){return Crt({x:yr(n,"x",0),y:yr(n,"y",0),width:yr(n,"width",0),height:yr(n,"height",0),rx:yr(n,"rx",0),ry:yr(n,"ry",0)})}function Crt(n){let t;const e=n.x,i=n.y,r=n.width,o=n.height,a=Math.min(n.rx||n["top-rx"]||0,r/2),s=Math.min(n.rx||n["bottom-rx"]||0,r/2),l=Math.min(n.ry||n["top-ry"]||0,o/2),h=Math.min(n.ry||n["bottom-ry"]||0,o/2);return a||s||l||h?t=["M",e,i+l,"v",o-l-h,"a",s,h,0,0,0,s,h,"h",r-2*s,"a",s,h,0,0,0,s,-h,"v",-(o-h-l),"a",a,l,0,0,0,-a,-l,"h",-(r-2*a),"a",a,l,0,0,0,-a,l,"Z"]:t=["M",e,i,"H",e+r,"V",i+o,"H",e,"V",i,"Z"],t.join(" ")}function COt(n){const t=Os("path");Pi(t,Pi(n));const e=wrt(n);return e&&t.setAttribute("d",e),t}function wrt(n){const t=n.tagName.toLowerCase();switch(t){case"path":return n.getAttribute("d");case"line":return pOt(n);case"polygon":return vOt(n);case"polyline":return mOt(n);case"ellipse":return bOt(n);case"circle":return yOt(n);case"rect":return _Ot(n)}throw new Error(`"${t}" cannot be converted to svg path element.`)}const wOt=/(\w+)\(([^,)]+),?([^)]+)?\)/gi,xrt=/[ ,]+/,xOt=/^(\w+)\((.*)\)/;function SOt(n,t){const i=Os("svg").createSVGPoint();return i.x=n,i.y=t,i}function lr(n){const e=Os("svg").createSVGMatrix();if(n!=null){const i=n,r=e;for(const o in i)r[o]=i[o]}return e}function M0(n){const t=Os("svg");return n!=null?(n instanceof DOMMatrix||(n=lr(n)),t.createSVGTransformFromMatrix(n)):t.createSVGTransform()}function cb(n){let t=lr();const e=n!=null&&n.match(wOt);if(!e)return t;for(let i=0,r=e.length;i<r;i+=1){const a=e[i].match(xOt);if(a){let s,l,h,u,d,c=lr();const f=a[2].split(xrt);switch(a[1].toLowerCase()){case"scale":s=parseFloat(f[0]),l=f[1]===void 0?s:parseFloat(f[1]),c=c.scaleNonUniform(s,l);break;case"translate":h=parseFloat(f[0]),u=parseFloat(f[1]),c=c.translate(h,u);break;case"rotate":d=parseFloat(f[0]),h=parseFloat(f[1])||0,u=parseFloat(f[2])||0,h!==0||u!==0?c=c.translate(h,u).rotate(d).translate(-h,-u):c=c.rotate(d);break;case"skewx":d=parseFloat(f[0]),c=c.skewX(d);break;case"skewy":d=parseFloat(f[0]),c=c.skewY(d);break;case"matrix":c.a=parseFloat(f[0]),c.b=parseFloat(f[1]),c.c=parseFloat(f[2]),c.d=parseFloat(f[3]),c.e=parseFloat(f[4]),c.f=parseFloat(f[5]);break;default:continue}t=t.multiply(c)}}return t}function Jv(n){const t=n||{},e=t.a!=null?t.a:1,i=t.b!=null?t.b:0,r=t.c!=null?t.c:0,o=t.d!=null?t.d:1,a=t.e!=null?t.e:0,s=t.f!=null?t.f:0;return`matrix(${e},${i},${r},${o},${a},${s})`}function kM(n){let t,e,i;if(n){const o=xrt;if(n.trim().indexOf("matrix")>=0){const a=cb(n),s=AOt(a);t=[s.translateX,s.translateY],e=[s.rotation],i=[s.scaleX,s.scaleY];const l=[];(t[0]!==0||t[1]!==0)&&l.push(`translate(${t.join(",")})`),(i[0]!==1||i[1]!==1)&&l.push(`scale(${i.join(",")})`),e[0]!==0&&l.push(`rotate(${e[0]})`),n=l.join(" ")}else{const a=n.match(/translate\((.*?)\)/);a&&(t=a[1].split(o));const s=n.match(/rotate\((.*?)\)/);s&&(e=s[1].split(o));const l=n.match(/scale\((.*?)\)/);l&&(i=l[1].split(o))}}const r=i&&i[0]?parseFloat(i[0]):1;return{raw:n||"",translation:{tx:t&&t[0]?parseInt(t[0],10):0,ty:t&&t[1]?parseInt(t[1],10):0},rotation:{angle:e&&e[0]?parseInt(e[0],10):0,cx:e&&e[1]?parseInt(e[1],10):void 0,cy:e&&e[2]?parseInt(e[2],10):void 0},scale:{sx:r,sy:i&&i[1]?parseFloat(i[1]):r}}}function sI(n,t){const e=t.x*n.a+t.y*n.c+0,i=t.x*n.b+t.y*n.d+0;return{x:e,y:i}}function AOt(n){const t=sI(n,{x:0,y:1}),e=sI(n,{x:1,y:0}),i=180/Math.PI*Math.atan2(t.y,t.x)-90,r=180/Math.PI*Math.atan2(e.y,e.x);return{skewX:i,skewY:r,translateX:n.e,translateY:n.f,scaleX:Math.sqrt(n.a*n.a+n.b*n.b),scaleY:Math.sqrt(n.c*n.c+n.d*n.d),rotation:i}}function TOt(n){let t,e,i,r;return n?(t=n.a==null?1:n.a,r=n.d==null?1:n.d,e=n.b,i=n.c):t=r=1,{sx:e?Math.sqrt(t*t+e*e):t,sy:i?Math.sqrt(i*i+r*r):r}}function MOt(n){let t={x:0,y:1};n&&(t=sI(n,t));const e=180*Math.atan2(t.y,t.x)/Math.PI%360-90;return{angle:e%360+(e<0?360:0)}}function ROt(n){return{tx:n&&n.e||0,ty:n&&n.f||0}}function av(n,t,e={}){if(t==null)return cb(Pi(n,"transform"));if(e.absolute){n.setAttribute("transform",Jv(t));return}const i=n.transform,r=M0(t);i.baseVal.appendItem(r)}function O9(n,t,e=0,i={}){let r=Pi(n,"transform");const o=kM(r);if(t==null)return o.translation;r=o.raw,r=r.replace(/translate\([^)]*\)/g,"").trim();const a=i.absolute?t:o.translation.tx+t,s=i.absolute?e:o.translation.ty+e,l=`translate(${a},${s})`;n.setAttribute("transform",`${l} ${r}`.trim())}function lI(n,t,e,i,r={}){let o=Pi(n,"transform");const a=kM(o);if(t==null)return a.rotation;o=a.raw,o=o.replace(/rotate\([^)]*\)/g,"").trim(),t%=360;const s=r.absolute?t:a.rotation.angle+t,l=e!=null&&i!=null?`,${e},${i}`:"",h=`rotate(${s}${l})`;n.setAttribute("transform",`${o} ${h}`.trim())}function hI(n,t,e){let i=Pi(n,"transform");const r=kM(i);if(t==null)return r.scale;e=e??t,i=r.raw,i=i.replace(/scale\([^)]*\)/g,"").trim();const o=`scale(${t},${e})`;n.setAttribute("transform",`${i} ${o}`.trim())}function sy(n,t){if(ld(t)&&ld(n)){const e=t.getScreenCTM(),i=n.getScreenCTM();if(e&&i)return e.inverse().multiply(i)}return lr()}function POt(n,t){let e=lr();if(ld(t)&&ld(n)){let i=n;const r=[];for(;i&&i!==t;){const o=i.getAttribute("transform")||null,a=cb(o);r.push(a),i=i.parentNode}r.reverse().forEach(o=>{e=e.multiply(o)})}return e}function BOt(n,t,e){const i=n instanceof SVGSVGElement?n:n.ownerSVGElement,r=i.createSVGPoint();r.x=t,r.y=e;try{const o=i.getScreenCTM(),a=r.matrixTransform(o.inverse()),s=sy(n,i).inverse();return a.matrixTransform(s)}catch{return r}}var ka;(function(n){const t={};function e(o){return t[o]||{}}n.get=e;function i(o,a){t[o]=a}n.register=i;function r(o){delete t[o]}n.unregister=r})(ka||(ka={}));var Vc;(function(n){const t=new WeakMap;function e(o){return t.has(o)||t.set(o,{events:Object.create(null)}),t.get(o)}n.ensure=e;function i(o){return t.get(o)}n.get=i;function r(o){return t.delete(o)}n.remove=r})(Vc||(Vc={}));var be;(function(n){n.returnTrue=()=>!0,n.returnFalse=()=>!1;function t(r){r.stopPropagation()}n.stopPropagationCallback=t;function e(r,o,a){r.addEventListener!=null&&r.addEventListener(o,a)}n.addEventListener=e;function i(r,o,a){r.removeEventListener!=null&&r.removeEventListener(o,a)}n.removeEventListener=i})(be||(be={}));(function(n){const t=/[^\x20\t\r\n\f]+/g,e=/^([^.]*)(?:\.(.+)|)/;function i(s){return(s||"").match(t)||[""]}n.splitType=i;function r(s){const l=e.exec(s)||[];return{originType:l[1]?l[1].trim():l[1],namespaces:l[2]?l[2].split(".").map(h=>h.trim()).sort():[]}}n.normalizeType=r;function o(s){return s.nodeType===1||s.nodeType===9||!+s.nodeType}n.isValidTarget=o;function a(s,l){if(l){const h=s;return h.querySelector!=null&&h.querySelector(l)!=null}return!0}n.isValidSelector=a})(be||(be={}));(function(n){let t=0;const e=new WeakMap;function i(s){return e.has(s)||(e.set(s,t),t+=1),e.get(s)}n.ensureHandlerId=i;function r(s){return e.get(s)}n.getHandlerId=r;function o(s){return e.delete(s)}n.removeHandlerId=o;function a(s,l){return e.set(s,l)}n.setHandlerId=a})(be||(be={}));(function(n){function t(e,i){const r=[],o=Vc.get(e),a=o&&o.events&&o.events[i.type],s=a&&a.handlers||[],l=a?a.delegateCount:0;if(l>0&&!(i.type==="click"&&typeof i.button=="number"&&i.button>=1)){for(let h=i.target;h!==e;h=h.parentNode||e)if(h.nodeType===1&&!(i.type==="click"&&h.disabled===!0)){const u=[],d={};for(let c=0;c<l;c+=1){const f=s[c],g=f.selector;if(g!=null&&d[g]==null){const p=e,v=[];p.querySelectorAll(g).forEach(m=>{v.push(m)}),d[g]=v.includes(h)}d[g]&&u.push(f)}u.length&&r.push({elem:h,handlers:u})}}return l<s.length&&r.push({elem:e,handlers:s.slice(l)}),r}n.getHandlerQueue=t})(be||(be={}));(function(n){function t(e){return e!=null&&e===e.window}n.isWindow=t})(be||(be={}));(function(n){function t(e,i){const r=e.nodeType===9?e.documentElement:e,o=i&&i.parentNode;return e===o||!!(o&&o.nodeType===1&&(r.contains?r.contains(o):e.compareDocumentPosition&&e.compareDocumentPosition(o)&16))}n.contains=t})(be||(be={}));class yl{constructor(t,e){this.isDefaultPrevented=be.returnFalse,this.isPropagationStopped=be.returnFalse,this.isImmediatePropagationStopped=be.returnFalse,this.isSimulated=!1,this.preventDefault=()=>{const i=this.originalEvent;this.isDefaultPrevented=be.returnTrue,i&&!this.isSimulated&&i.preventDefault()},this.stopPropagation=()=>{const i=this.originalEvent;this.isPropagationStopped=be.returnTrue,i&&!this.isSimulated&&i.stopPropagation()},this.stopImmediatePropagation=()=>{const i=this.originalEvent;this.isImmediatePropagationStopped=be.returnTrue,i&&!this.isSimulated&&i.stopImmediatePropagation(),this.stopPropagation()},typeof t=="string"?this.type=t:t.type&&(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented?be.returnTrue:be.returnFalse,this.target=t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget,this.timeStamp=t.timeStamp),e&&Object.assign(this,e),this.timeStamp||(this.timeStamp=Date.now())}}(function(n){function t(e){return e instanceof n?e:new n(e)}n.create=t})(yl||(yl={}));(function(n){function t(e,i){Object.defineProperty(n.prototype,e,{enumerable:!0,configurable:!0,get:typeof i=="function"?function(){if(this.originalEvent)return i(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set(r){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:r})}})}n.addProperty=t})(yl||(yl={}));(function(n){const t={bubbles:!0,cancelable:!0,eventPhase:!0,detail:!0,view:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pageX:!0,pageY:!0,screenX:!0,screenY:!0,toElement:!0,pointerId:!0,pointerType:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,touches:!0,changedTouches:!0,targetTouches:!0,which:!0,altKey:!0,ctrlKey:!0,metaKey:!0,shiftKey:!0};Object.keys(t).forEach(e=>n.addProperty(e,t[e]))})(yl||(yl={}));(function(n){ka.register("load",{noBubble:!0})})();(function(n){ka.register("beforeunload",{postDispatch(t,e){e.result!==void 0&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}})})();(function(n){ka.register("mouseenter",{delegateType:"mouseover",bindType:"mouseover",handle(t,e){let i;const r=e.relatedTarget,o=e.handleObj;return(!r||r!==t&&!be.contains(t,r))&&(e.type=o.originType,i=o.handler.call(t,e),e.type="mouseover"),i}}),ka.register("mouseleave",{delegateType:"mouseout",bindType:"mouseout",handle(t,e){let i;const r=e.relatedTarget,o=e.handleObj;return(!r||r!==t&&!be.contains(t,r))&&(e.type=o.originType,i=o.handler.call(t,e),e.type="mouseout"),i}})})();var kOt=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e},fb;(function(n){let t;function e(a,s,l,h,u){if(!be.isValidTarget(a))return;let d;if(typeof l!="function"){const{handler:p,selector:v}=l,m=kOt(l,["handler","selector"]);l=p,u=v,d=m}const c=Vc.ensure(a);let f=c.handler;f==null&&(f=c.handler=function(p,...v){return t!==p.type?r(a,p,...v):void 0});const g=be.ensureHandlerId(l);be.splitType(s).forEach(p=>{const{originType:v,namespaces:m}=be.normalizeType(p);if(!v)return;let y=v,b=ka.get(y);y=(u?b.delegateType:b.bindType)||y,b=ka.get(y);const _=Object.assign({type:y,originType:v,data:h,selector:u,guid:g,handler:l,namespace:m.join(".")},d),w=c.events;let C=w[y];C||(C=w[y]={handlers:[],delegateCount:0},(!b.setup||b.setup(a,h,m,f)===!1)&&be.addEventListener(a,y,f)),b.add&&(be.removeHandlerId(_.handler),b.add(a,_),be.setHandlerId(_.handler,g)),u?(C.handlers.splice(C.delegateCount,0,_),C.delegateCount+=1):C.handlers.push(_)})}n.on=e;function i(a,s,l,h,u){const d=Vc.get(a);if(!d)return;const c=d.events;c&&(be.splitType(s).forEach(f=>{const{originType:g,namespaces:p}=be.normalizeType(f);if(!g){Object.keys(c).forEach(w=>{i(a,w+f,l,h,!0)});return}let v=g;const m=ka.get(v);v=(h?m.delegateType:m.bindType)||v;const y=c[v];if(!y)return;const b=p.length>0?new RegExp(`(^|\\.)${p.join("\\.(?:.*\\.|)")}(\\.|$)`):null,_=y.handlers.length;for(let w=y.handlers.length-1;w>=0;w-=1){const C=y.handlers[w];(u||g===C.originType)&&(!l||be.getHandlerId(l)===C.guid)&&(b==null||C.namespace&&b.test(C.namespace))&&(h==null||h===C.selector||h==="**"&&C.selector)&&(y.handlers.splice(w,1),C.selector&&(y.delegateCount-=1),m.remove&&m.remove(a,C))}_&&y.handlers.length===0&&((!m.teardown||m.teardown(a,p,d.handler)===!1)&&be.removeEventListener(a,v,d.handler),delete c[v])}),Object.keys(c).length===0&&Vc.remove(a))}n.off=i;function r(a,s,...l){const h=yl.create(s);h.delegateTarget=a;const u=ka.get(h.type);if(u.preDispatch&&u.preDispatch(a,h)===!1)return;const d=be.getHandlerQueue(a,h);for(let c=0,f=d.length;c<f&&!h.isPropagationStopped();c+=1){const g=d[c];h.currentTarget=g.elem;for(let p=0,v=g.handlers.length;p<v&&!h.isImmediatePropagationStopped();p+=1){const m=g.handlers[p];if(h.rnamespace==null||m.namespace&&h.rnamespace.test(m.namespace)){h.handleObj=m,h.data=m.data;const y=ka.get(m.originType).handle,b=y?y(g.elem,h,...l):m.handler.call(g.elem,h,...l);b!==void 0&&(h.result=b,b===!1&&(h.preventDefault(),h.stopPropagation()))}}}return u.postDispatch&&u.postDispatch(a,h),h.result}n.dispatch=r;function o(a,s,l,h){let u=a,d=typeof a=="string"?a:a.type,c=typeof a=="string"||u.namespace==null?[]:u.namespace.split(".");const f=l;if(f.nodeType===3||f.nodeType===8)return;d.indexOf(".")>-1&&(c=d.split("."),d=c.shift(),c.sort());const g=d.indexOf(":")<0&&`on${d}`;u=a instanceof yl?a:new yl(d,typeof a=="object"?a:null),u.namespace=c.join("."),u.rnamespace=u.namespace?new RegExp(`(^|\\.)${c.join("\\.(?:.*\\.|)")}(\\.|$)`):null,u.result=void 0,u.target||(u.target=f);const p=[u];Array.isArray(s)?p.push(...s):p.push(s);const v=ka.get(d);if(!h&&v.trigger&&v.trigger(f,u,s)===!1)return;let m;const y=[f];if(!h&&!v.noBubble&&!be.isWindow(f)){m=v.delegateType||d;let _=f,w=f.parentNode;for(;w!=null;)y.push(w),_=w,w=w.parentNode;const C=f.ownerDocument||document;if(_===C){const x=_.defaultView||_.parentWindow||window;y.push(x)}}let b=f;for(let _=0,w=y.length;_<w&&!u.isPropagationStopped();_+=1){const C=y[_];b=C,u.type=_>1?m:v.bindType||d;const x=Vc.get(C);x&&x.events[u.type]&&x.handler&&x.handler.call(C,...p);const S=g&&C[g]||null;S&&be.isValidTarget(C)&&(u.result=S.call(C,...p),u.result===!1&&u.preventDefault())}if(u.type=d,!h&&!u.isDefaultPrevented()){const _=v.preventDefault;if((_==null||_(y.pop(),u,s)===!1)&&be.isValidTarget(f)&&g&&typeof f[d]=="function"&&!be.isWindow(f)){const w=f[g];w&&(f[g]=null),t=d,u.isPropagationStopped()&&b.addEventListener(d,be.stopPropagationCallback),f[d](),u.isPropagationStopped()&&b.removeEventListener(d,be.stopPropagationCallback),t=void 0,w&&(f[g]=w)}}return u.result}n.trigger=o})(fb||(fb={}));var vr;(function(n){function t(o,a,s,l,h){return ly.on(o,a,s,l,h),o}n.on=t;function e(o,a,s,l,h){return ly.on(o,a,s,l,h,!0),o}n.once=e;function i(o,a,s,l){return ly.off(o,a,s,l),o}n.off=i;function r(o,a,s,l){return fb.trigger(a,s,o,l),o}n.trigger=r})(vr||(vr={}));var ly;(function(n){function t(i,r,o,a,s,l){if(typeof r=="object"){typeof o!="string"&&(a=a||o,o=void 0),Object.keys(r).forEach(h=>t(i,h,o,a,r[h],l));return}if(a==null&&s==null?(s=o,a=o=void 0):s==null&&(typeof o=="string"?(s=a,a=void 0):(s=a,a=o,o=void 0)),s===!1)s=be.returnFalse;else if(!s)return;if(l){const h=s;s=function(u,...d){return n.off(i,u),h.call(this,u,...d)},be.setHandlerId(s,be.ensureHandlerId(h))}fb.on(i,r,s,a,o)}n.on=t;function e(i,r,o,a){const s=r;if(s&&s.preventDefault!=null&&s.handleObj!=null){const l=s.handleObj;e(s.delegateTarget,l.namespace?`${l.originType}.${l.namespace}`:l.originType,l.selector,l.handler);return}if(typeof r=="object"){const l=r;Object.keys(l).forEach(h=>e(i,h,o,l[h]));return}(o===!1||typeof o=="function")&&(a=o,o=void 0),a===!1&&(a=be.returnFalse),fb.off(i,r,a,o)}n.off=e})(ly||(ly={}));class Srt{constructor(t,e,i){this.animationFrameId=0,this.deltaX=0,this.deltaY=0,this.eventName=sd.isEventSupported("wheel")?"wheel":"mousewheel",this.target=t,this.onWheelCallback=e,this.onWheelGuard=i,this.onWheel=this.onWheel.bind(this),this.didWheel=this.didWheel.bind(this)}enable(){this.target.addEventListener(this.eventName,this.onWheel,{passive:!1})}disable(){this.target.removeEventListener(this.eventName,this.onWheel)}onWheel(t){if(this.onWheelGuard!=null&&!this.onWheelGuard(t))return;this.deltaX+=t.deltaX,this.deltaY+=t.deltaY,t.preventDefault();let e;(this.deltaX!==0||this.deltaY!==0)&&(t.stopPropagation(),e=!0),e===!0&&this.animationFrameId===0&&(this.animationFrameId=requestAnimationFrame(()=>{this.didWheel(t)}))}didWheel(t){this.animationFrameId=0,this.onWheelCallback(t,this.deltaX,this.deltaY),this.deltaX=0,this.deltaY=0}}function Art(n,t=60){let e=null;return(...i)=>{e&&clearTimeout(e),e=window.setTimeout(()=>{n.apply(this,i)},t)}}function LOt(n){let t=null,e=[];const i=()=>{if(getComputedStyle(n).position==="static"){const h=n.style;h.position="relative"}const l=document.createElement("object");return l.onload=()=>{l.contentDocument.defaultView.addEventListener("resize",r),r()},l.style.display="block",l.style.position="absolute",l.style.top="0",l.style.left="0",l.style.height="100%",l.style.width="100%",l.style.overflow="hidden",l.style.pointerEvents="none",l.style.zIndex="-1",l.style.opacity="0",l.setAttribute("tabindex","-1"),l.type="text/html",n.appendChild(l),l.data="about:blank",l},r=Art(()=>{e.forEach(l=>l(n))}),o=l=>{t||(t=i()),e.indexOf(l)===-1&&e.push(l)},a=()=>{t&&t.parentNode&&(t.contentDocument&&t.contentDocument.defaultView.removeEventListener("resize",r),t.parentNode.removeChild(t),t=null,e=[])};return{element:n,bind:o,destroy:a,unbind:l=>{const h=e.indexOf(l);h!==-1&&e.splice(h,1),e.length===0&&t&&a()}}}function EOt(n){let t=null,e=[];const i=Art(()=>{e.forEach(l=>{l(n)})}),r=()=>{const l=new ResizeObserver(i);return l.observe(n),i(),l},o=l=>{t||(t=r()),e.indexOf(l)===-1&&e.push(l)},a=()=>{t&&(t.disconnect(),e=[],t=null)};return{element:n,bind:o,destroy:a,unbind:l=>{const h=e.indexOf(l);h!==-1&&e.splice(h,1),e.length===0&&t&&a()}}}const DOt=typeof ResizeObserver<"u"?EOt:LOt;var lS;(function(n){const t=new WeakMap;function e(r){let o=t.get(r);return o||(o=DOt(r),t.set(r,o),o)}function i(r){r.destroy(),t.delete(r.element)}n.bind=(r,o)=>{const a=e(r);return a.bind(o),()=>a.unbind(o)},n.clear=r=>{const o=e(r);i(o)}})(lS||(lS={}));class gb{constructor(t={}){this.comparator=t.comparator||gb.defaultComparator,this.index={},this.data=t.data||[],this.heapify()}isEmpty(){return this.data.length===0}insert(t,e,i){const r={priority:t,value:e},o=this.data.length;return i&&(r.id=i,this.index[i]=o),this.data.push(r),this.bubbleUp(o),this}peek(){return this.data[0]?this.data[0].value:null}peekPriority(){return this.data[0]?this.data[0].priority:null}updatePriority(t,e){const i=this.index[t];if(typeof i>"u")throw new Error(`Node with id '${t}' was not found in the heap.`);const r=this.data,o=r[i].priority,a=this.comparator(e,o);a<0?(r[i].priority=e,this.bubbleUp(i)):a>0&&(r[i].priority=e,this.bubbleDown(i))}remove(){const t=this.data,e=t[0],i=t.pop();return e.id&&delete this.index[e.id],t.length>0&&(t[0]=i,i.id&&(this.index[i.id]=0),this.bubbleDown(0)),e?e.value:null}heapify(){for(let t=0;t<this.data.length;t+=1)this.bubbleUp(t)}bubbleUp(t){const e=this.data;let i,r,o=t;for(;o>0&&(r=o-1>>>1,this.comparator(e[o].priority,e[r].priority)<0);){i=e[r],e[r]=e[o];let a=e[o].id;a!=null&&(this.index[a]=r),e[o]=i,a=e[o].id,a!=null&&(this.index[a]=o),o=r}}bubbleDown(t){const e=this.data,i=e.length-1;let r=t;for(;;){const o=(r<<1)+1,a=o+1;let s=r;if(o<=i&&this.comparator(e[o].priority,e[s].priority)<0&&(s=o),a<=i&&this.comparator(e[a].priority,e[s].priority)<0&&(s=a),s!==r){const l=e[s];e[s]=e[r];let h=e[r].id;h!=null&&(this.index[h]=s),e[r]=l,h=e[r].id,h!=null&&(this.index[h]=r),r=s}else break}}}(function(n){n.defaultComparator=(t,e)=>t-e})(gb||(gb={}));var uI;(function(n){function t(e,i,r=(o,a)=>1){const o={},a={},s={},l=new gb;for(o[i]=0,Object.keys(e).forEach(h=>{h!==i&&(o[h]=1/0),l.insert(o[h],h,h)});!l.isEmpty();){const h=l.remove();s[h]=!0;const u=e[h]||[];for(let d=0;d<u.length;d+=1){const c=u[d];if(!s[c]){const f=o[h]+r(h,c);f<o[c]&&(o[c]=f,a[c]=h,l.updatePriority(c,f))}}}return a}n.run=t})(uI||(uI={}));let hS=class R0{constructor(t,e,i,r){if(t==null)return this.set(255,255,255,1);if(typeof t=="number")return this.set(t,e,i,r);if(typeof t=="string")return R0.fromString(t)||this;if(Array.isArray(t))return this.set(t);this.set(t.r,t.g,t.b,t.a==null?1:t.a)}blend(t,e,i){this.set(t.r+(e.r-t.r)*i,t.g+(e.g-t.g)*i,t.b+(e.b-t.b)*i,t.a+(e.a-t.a)*i)}lighten(t){const e=R0.lighten(this.toArray(),t);this.r=e[0],this.g=e[1],this.b=e[2],this.a=e[3]}darken(t){this.lighten(-t)}set(t,e,i,r){const o=Array.isArray(t)?t[0]:t,a=Array.isArray(t)?t[1]:e,s=Array.isArray(t)?t[2]:i,l=Array.isArray(t)?t[3]:r;return this.r=Math.round(Oa(o,0,255)),this.g=Math.round(Oa(a,0,255)),this.b=Math.round(Oa(s,0,255)),this.a=l==null?1:Oa(l,0,1),this}toHex(){return`#${["r","g","b"].map(e=>{const i=this[e].toString(16);return i.length<2?`0${i}`:i}).join("")}`}toRGBA(){return this.toArray()}toHSLA(){return R0.rgba2hsla(this.r,this.g,this.b,this.a)}toCSS(t){const e=`${this.r},${this.g},${this.b},`;return t?`rgb(${e})`:`rgba(${e},${this.a})`}toGrey(){return R0.makeGrey(Math.round((this.r+this.g+this.b)/3),this.a)}toArray(){return[this.r,this.g,this.b,this.a]}toString(){return this.toCSS()}};(function(n){function t(b){return new n(b)}n.fromArray=t;function e(b){return new n([...g(b),1])}n.fromHex=e;function i(b){const _=b.toLowerCase().match(/^rgba?\(([\s.,0-9]+)\)/);if(_){const w=_[1].split(/\s*,\s*/).map(C=>parseInt(C,10));return new n(w)}return null}n.fromRGBA=i;function r(b,_,w){w<0&&++w,w>1&&--w;const C=6*w;return C<1?b+(_-b)*C:2*w<1?_:3*w<2?b+(_-b)*(2/3-w)*6:b}function o(b){const _=b.toLowerCase().match(/^hsla?\(([\s.,0-9]+)\)/);if(_){const w=_[2].split(/\s*,\s*/),C=(parseFloat(w[0])%360+360)%360/360,x=parseFloat(w[1])/100,S=parseFloat(w[2])/100,A=w[3]==null?1:parseInt(w[3],10);return new n(h(C,x,S,A))}return null}n.fromHSLA=o;function a(b){if(b.startsWith("#"))return e(b);if(b.startsWith("rgb"))return i(b);const _=n.named[b];return _?e(_):o(b)}n.fromString=a;function s(b,_){return n.fromArray([b,b,b,_])}n.makeGrey=s;function l(b,_,w,C){const x=Array.isArray(b)?b[0]:b,S=Array.isArray(b)?b[1]:_,A=Array.isArray(b)?b[2]:w,T=Array.isArray(b)?b[3]:C,M=Math.max(x,S,A),R=Math.min(x,S,A),L=(M+R)/2;let B=0,P=0;if(R!==M){const k=M-R;switch(P=L>.5?k/(2-M-R):k/(M+R),M){case x:B=(S-A)/k+(S<A?6:0);break;case S:B=(A-x)/k+2;break;case A:B=(x-S)/k+4;break}B/=6}return[B,P,L,T??1]}n.rgba2hsla=l;function h(b,_,w,C){const x=Array.isArray(b)?b[0]:b,S=Array.isArray(b)?b[1]:_,A=Array.isArray(b)?b[2]:w,T=Array.isArray(b)?b[3]:C,M=A<=.5?A*(S+1):A+S-A*S,R=2*A-M;return[r(R,M,x+1/3)*256,r(R,M,x)*256,r(R,M,x-1/3)*256,T??1]}n.hsla2rgba=h;function u(b){return new n(Math.round(Math.random()*256),Math.round(Math.random()*256),Math.round(Math.random()*256),b?void 0:parseFloat(Math.random().toFixed(2)))}n.random=u;function d(){const b="0123456789ABCDEF";let _="#";for(let w=0;w<6;w+=1)_+=b[Math.floor(Math.random()*16)];return _}n.randomHex=d;function c(b){return u(b).toString()}n.randomRGBA=c;function f(b,_){if(typeof b=="string"){const A=b[0]==="#",[T,M,R]=g(b);return _?T*.299+M*.587+R*.114>186?"#000000":"#ffffff":`${A?"#":""}${p(255-T,255-M,255-R)}`}const w=b[0],C=b[1],x=b[2],S=b[3];return _?w*.299+C*.587+x*.114>186?[0,0,0,S]:[255,255,255,S]:[255-w,255-C,255-x,S]}n.invert=f;function g(b){const _=b.indexOf("#")===0?b:`#${b}`;let w=+`0x${_.substr(1)}`;if(!(_.length===4||_.length===7)||Number.isNaN(w))throw new Error("Invalid hex color.");const C=_.length===4?4:8,x=(1<<C)-1,S=["b","g","r"].map(()=>{const A=w&x;return w>>=C,C===4?17*A:A});return[S[2],S[1],S[0]]}function p(b,_,w){const C=x=>x.length<2?`0${x}`:x;return`${C(b.toString(16))}${C(_.toString(16))}${C(w.toString(16))}`}function v(b,_){return y(b,_)}n.lighten=v;function m(b,_){return y(b,-_)}n.darken=m;function y(b,_){if(typeof b=="string"){const x=b[0]==="#",S=parseInt(x?b.substr(1):b,16),A=Oa((S>>16)+_,0,255),T=Oa((S>>8&255)+_,0,255),M=Oa((S&255)+_,0,255);return`${x?"#":""}${(M|T<<8|A<<16).toString(16)}`}const w=p(b[0],b[1],b[2]),C=g(y(w,_));return[C[0],C[1],C[2],b[3]]}})(hS||(hS={}));(function(n){n.named={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",burntsienna:"#ea7e5d",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}})(hS||(hS={}));class dI{constructor(){this.clear()}clear(){this.map=new WeakMap,this.arr=[]}has(t){return this.map.has(t)}get(t){return this.map.get(t)}set(t,e){this.map.set(t,e),this.arr.push(t)}delete(t){const e=this.arr.indexOf(t);e>=0&&this.arr.splice(e,1);const i=this.map.get(t);return this.map.delete(t),i}each(t){this.arr.forEach(e=>{const i=this.map.get(e);t(i,e)})}dispose(){this.clear()}}var sv;(function(n){function t(r){const o=[],a=[];return Array.isArray(r)?o.push(...r):r.split("|").forEach(s=>{s.indexOf("&")===-1?o.push(s):a.push(...s.split("&"))}),{or:o,and:a}}n.parse=t;function e(r,o){if(r!=null&&o!=null){const a=t(r),s=t(o),l=a.or.sort(),h=s.or.sort(),u=a.and.sort(),d=s.and.sort(),c=(f,g)=>f.length===g.length&&(f.length===0||f.every((p,v)=>p===g[v]));return c(l,h)&&c(u,d)}return r==null&&o==null}n.equals=e;function i(r,o,a){if(o==null||Array.isArray(o)&&o.length===0)return a?r.altKey!==!0&&r.ctrlKey!==!0&&r.metaKey!==!0&&r.shiftKey!==!0:!0;const{or:s,and:l}=t(o),h=u=>{const d=`${u.toLowerCase()}Key`;return r[d]===!0};return s.some(u=>h(u))&&l.every(u=>h(u))}n.isMatch=i})(sv||(sv={}));var If;(function(n){n.linear=t=>t,n.quad=t=>t*t,n.cubic=t=>t*t*t,n.inout=t=>{if(t<=0)return 0;if(t>=1)return 1;const e=t*t,i=e*t;return 4*(t<.5?i:3*(t-e)+i-.75)},n.exponential=t=>Math.pow(2,10*(t-1)),n.bounce=(t=>{for(let e=0,i=1;;e+=i,i/=2)if(t>=(7-4*e)/11){const r=(11-6*e-11*t)/4;return-r*r+i*i}})})(If||(If={}));(function(n){n.decorators={reverse(t){return e=>1-t(1-e)},reflect(t){return e=>.5*(e<.5?t(2*e):2-t(2-2*e))},clamp(t,e=0,i=1){return r=>{const o=t(r);return o<e?e:o>i?i:o}},back(t=1.70158){return e=>e*e*((t+1)*e-t)},elastic(t=1.5){return e=>Math.pow(2,10*(e-1))*Math.cos(20*Math.PI*t/3*e)}}})(If||(If={}));(function(n){function t(P){return-1*Math.cos(P*(Math.PI/2))+1}n.easeInSine=t;function e(P){return Math.sin(P*(Math.PI/2))}n.easeOutSine=e;function i(P){return-.5*(Math.cos(Math.PI*P)-1)}n.easeInOutSine=i;function r(P){return P*P}n.easeInQuad=r;function o(P){return P*(2-P)}n.easeOutQuad=o;function a(P){return P<.5?2*P*P:-1+(4-2*P)*P}n.easeInOutQuad=a;function s(P){return P*P*P}n.easeInCubic=s;function l(P){const k=P-1;return k*k*k+1}n.easeOutCubic=l;function h(P){return P<.5?4*P*P*P:(P-1)*(2*P-2)*(2*P-2)+1}n.easeInOutCubic=h;function u(P){return P*P*P*P}n.easeInQuart=u;function d(P){const k=P-1;return 1-k*k*k*k}n.easeOutQuart=d;function c(P){const k=P-1;return P<.5?8*P*P*P*P:1-8*k*k*k*k}n.easeInOutQuart=c;function f(P){return P*P*P*P*P}n.easeInQuint=f;function g(P){const k=P-1;return 1+k*k*k*k*k}n.easeOutQuint=g;function p(P){const k=P-1;return P<.5?16*P*P*P*P*P:1+16*k*k*k*k*k}n.easeInOutQuint=p;function v(P){return P===0?0:Math.pow(2,10*(P-1))}n.easeInExpo=v;function m(P){return P===1?1:-Math.pow(2,-10*P)+1}n.easeOutExpo=m;function y(P){if(P===0||P===1)return P;const k=P*2,E=k-1;return k<1?.5*Math.pow(2,10*E):.5*(-Math.pow(2,-10*E)+2)}n.easeInOutExpo=y;function b(P){const k=P/1;return-1*(Math.sqrt(1-k*P)-1)}n.easeInCirc=b;function _(P){const k=P-1;return Math.sqrt(1-k*k)}n.easeOutCirc=_;function w(P){const k=P*2,E=k-2;return k<1?-.5*(Math.sqrt(1-k*k)-1):.5*(Math.sqrt(1-E*E)+1)}n.easeInOutCirc=w;function C(P,k=1.70158){return P*P*((k+1)*P-k)}n.easeInBack=C;function x(P,k=1.70158){const E=P/1-1;return E*E*((k+1)*E+k)+1}n.easeOutBack=x;function S(P,k=1.70158){const E=P*2,D=E-2,I=k*1.525;return E<1?.5*E*E*((I+1)*E-I):.5*(D*D*((I+1)*D+I)+2)}n.easeInOutBack=S;function A(P,k=.7){if(P===0||P===1)return P;const D=P/1-1,I=1-k,O=I/(2*Math.PI)*Math.asin(1);return-(Math.pow(2,10*D)*Math.sin((D-O)*(2*Math.PI)/I))}n.easeInElastic=A;function T(P,k=.7){const E=1-k,D=P*2;if(P===0||P===1)return P;const I=E/(2*Math.PI)*Math.asin(1);return Math.pow(2,-10*D)*Math.sin((D-I)*(2*Math.PI)/E)+1}n.easeOutElastic=T;function M(P,k=.65){const E=1-k;if(P===0||P===1)return P;const D=P*2,I=D-1,O=E/(2*Math.PI)*Math.asin(1);return D<1?-.5*(Math.pow(2,10*I)*Math.sin((I-O)*(2*Math.PI)/E)):Math.pow(2,-10*I)*Math.sin((I-O)*(2*Math.PI)/E)*.5+1}n.easeInOutElastic=M;function R(P){const k=P/1;if(k<1/2.75)return 7.5625*k*k;if(k<2/2.75){const E=k-.5454545454545454;return 7.5625*E*E+.75}if(k<2.5/2.75){const E=k-.8181818181818182;return 7.5625*E*E+.9375}{const E=k-.9545454545454546;return 7.5625*E*E+.984375}}n.easeOutBounce=R;function L(P){return 1-R(1-P)}n.easeInBounce=L;function B(P){return P<.5?L(P*2)*.5:R(P*2-1)*.5+.5}n.easeInOutBounce=B})(If||(If={}));var Gc;(function(n){n.number=(t,e)=>{const i=e-t;return r=>t+i*r},n.object=(t,e)=>{const i=Object.keys(t);return r=>{const o={};for(let a=i.length-1;a!==-1;a-=1){const s=i[a];o[s]=t[s]+(e[s]-t[s])*r}return o}},n.unit=(t,e)=>{const i=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,r=i.exec(t),o=i.exec(e),a=o?o[1]:"",s=r?+r[1]:0,l=o?+o[1]:0,h=a.indexOf("."),u=h>0?a[1].length-h-1:0,d=l-s,c=r?r[2]:"";return f=>(s+d*f).toFixed(u)+c},n.color=(t,e)=>{const i=parseInt(t.slice(1),16),r=parseInt(e.slice(1),16),o=i&255,a=(r&255)-o,s=i&65280,l=(r&65280)-s,h=i&16711680,u=(r&16711680)-h;return d=>{const c=o+a*d&255,f=s+l*d&65280,g=h+u*d&16711680;return`#${(1<<24|c|f|g).toString(16).slice(1)}`}}})(Gc||(Gc={}));const hy=[];function IOt(n,t){const e=hy.find(i=>i.name===n);if(!(e&&(e.loadTimes+=1,e.loadTimes>1))&&!sd.isApplyingHMR()){const i=document.createElement("style");i.setAttribute("type","text/css"),i.textContent=t;const r=document.querySelector("head");r&&r.insertBefore(i,r.firstChild),hy.push({name:n,loadTimes:1,styleElement:i})}}function OOt(n){const t=hy.findIndex(e=>e.name===n);if(t>-1){const e=hy[t];if(e.loadTimes-=1,e.loadTimes>0)return;let i=e.styleElement;i&&i.parentNode&&i.parentNode.removeChild(i),i=null,hy.splice(t,1)}}var Ri;(function(n){function t(i){return 180*i/Math.PI%360}n.toDeg=t,n.toRad=function(i,r=!1){return(r?i:i%360)*Math.PI/180};function e(i){return i%360+(i<0?360:0)}n.normalize=e})(Ri||(Ri={}));var Mi;(function(n){function t(s,l=0){return Number.isInteger(s)?s:+s.toFixed(l)}n.round=t;function e(s,l){let h,u;if(l==null?(u=s??1,h=0):(u=l,h=s??0),u<h){const d=h;h=u,u=d}return Math.floor(Math.random()*(u-h+1)+h)}n.random=e;function i(s,l,h){return Number.isNaN(s)?NaN:Number.isNaN(l)||Number.isNaN(h)?0:l<h?s<l?l:s>h?h:s:s<h?h:s>l?l:s}n.clamp=i;function r(s,l){return l*Math.round(s/l)}n.snapToGrid=r;function o(s,l){return l!=null&&s!=null&&l.x>=s.x&&l.x<=s.x+s.width&&l.y>=s.y&&l.y<=s.y+s.height}n.containsPoint=o;function a(s,l){const h=s.x-l.x,u=s.y-l.y;return h*h+u*u}n.squaredLength=a})(Mi||(Mi={}));class bd{valueOf(){return this.toJSON()}toString(){return JSON.stringify(this.toJSON())}}let Q=class di extends bd{constructor(t,e){super(),this.x=t??0,this.y=e??0}round(t=0){return this.x=Mi.round(this.x,t),this.y=Mi.round(this.y,t),this}add(t,e){const i=di.create(t,e);return this.x+=i.x,this.y+=i.y,this}update(t,e){const i=di.create(t,e);return this.x=i.x,this.y=i.y,this}translate(t,e){const i=di.create(t,e);return this.x+=i.x,this.y+=i.y,this}rotate(t,e){const i=di.rotate(this,t,e);return this.x=i.x,this.y=i.y,this}scale(t,e,i=new di){const r=di.create(i);return this.x=r.x+t*(this.x-r.x),this.y=r.y+e*(this.y-r.y),this}closest(t){if(t.length===1)return di.create(t[0]);let e=null,i=1/0;return t.forEach(r=>{const o=this.squaredDistance(r);o<i&&(e=r,i=o)}),e?di.create(e):null}distance(t){return Math.sqrt(this.squaredDistance(t))}squaredDistance(t){const e=di.create(t),i=this.x-e.x,r=this.y-e.y;return i*i+r*r}manhattanDistance(t){const e=di.create(t);return Math.abs(e.x-this.x)+Math.abs(e.y-this.y)}magnitude(){return Math.sqrt(this.x*this.x+this.y*this.y)||.01}theta(t=new di){const e=di.create(t),i=-(e.y-this.y),r=e.x-this.x;let o=Math.atan2(i,r);return o<0&&(o=2*Math.PI+o),180*o/Math.PI}angleBetween(t,e){if(this.equals(t)||this.equals(e))return NaN;let i=this.theta(e)-this.theta(t);return i<0&&(i+=360),i}vectorAngle(t){return new di(0,0).angleBetween(this,t)}toPolar(t){return this.update(di.toPolar(this,t)),this}changeInAngle(t,e,i=new di){return this.clone().translate(-t,-e).theta(i)-this.theta(i)}adhereToRect(t){return Mi.containsPoint(t,this)||(this.x=Math.min(Math.max(this.x,t.x),t.x+t.width),this.y=Math.min(Math.max(this.y,t.y),t.y+t.height)),this}bearing(t){const e=di.create(t),i=Ri.toRad(this.y),r=Ri.toRad(e.y),o=this.x,a=e.x,s=Ri.toRad(a-o),l=Math.sin(s)*Math.cos(r),h=Math.cos(i)*Math.sin(r)-Math.sin(i)*Math.cos(r)*Math.cos(s),u=Ri.toDeg(Math.atan2(l,h)),d=["NE","E","SE","S","SW","W","NW","N"];let c=u-22.5;return c<0&&(c+=360),c=parseInt(c/45,10),d[c]}cross(t,e){if(t!=null&&e!=null){const i=di.create(t),r=di.create(e);return(r.x-this.x)*(i.y-this.y)-(r.y-this.y)*(i.x-this.x)}return NaN}dot(t){const e=di.create(t);return this.x*e.x+this.y*e.y}diff(t,e){if(typeof t=="number")return new di(this.x-t,this.y-e);const i=di.create(t);return new di(this.x-i.x,this.y-i.y)}lerp(t,e){const i=di.create(t);return new di((1-e)*this.x+e*i.x,(1-e)*this.y+e*i.y)}normalize(t=1){const e=t/this.magnitude();return this.scale(e,e)}move(t,e){const i=di.create(t),r=Ri.toRad(i.theta(this));return this.translate(Math.cos(r)*e,-Math.sin(r)*e)}reflection(t){return di.create(t).move(this,this.distance(t))}snapToGrid(t,e){return this.x=Mi.snapToGrid(this.x,t),this.y=Mi.snapToGrid(this.y,e??t),this}equals(t){const e=di.create(t);return e!=null&&e.x===this.x&&e.y===this.y}clone(){return di.clone(this)}toJSON(){return di.toJSON(this)}serialize(){return`${this.x} ${this.y}`}};(function(n){function t(e){return e!=null&&e instanceof n}n.isPoint=t})(Q||(Q={}));(function(n){function t(i){return i!=null&&typeof i=="object"&&typeof i.x=="number"&&typeof i.y=="number"}n.isPointLike=t;function e(i){return i!=null&&Array.isArray(i)&&i.length===2&&typeof i[0]=="number"&&typeof i[1]=="number"}n.isPointData=e})(Q||(Q={}));(function(n){function t(d,c){return d==null||typeof d=="number"?new n(d,c):e(d)}n.create=t;function e(d){return n.isPoint(d)?new n(d.x,d.y):Array.isArray(d)?new n(d[0],d[1]):new n(d.x,d.y)}n.clone=e;function i(d){return n.isPoint(d)?{x:d.x,y:d.y}:Array.isArray(d)?{x:d[0],y:d[1]}:{x:d.x,y:d.y}}n.toJSON=i;function r(d,c,f=new n){let g=Math.abs(d*Math.cos(c)),p=Math.abs(d*Math.sin(c));const v=e(f),m=Ri.normalize(Ri.toDeg(c));return m<90?p=-p:m<180?(g=-g,p=-p):m<270&&(g=-g),new n(v.x+g,v.y+p)}n.fromPolar=r;function o(d,c=new n){const f=e(d),g=e(c),p=f.x-g.x,v=f.y-g.y;return new n(Math.sqrt(p*p+v*v),Ri.toRad(g.theta(f)))}n.toPolar=o;function a(d,c){return d===c?!0:d!=null&&c!=null?d.x===c.x&&d.y===c.y:!1}n.equals=a;function s(d,c){if(d==null&&c!=null||d!=null&&c==null||d!=null&&c!=null&&d.length!==c.length)return!1;if(d!=null&&c!=null){for(let f=0,g=d.length;f<g;f+=1)if(!a(d[f],c[f]))return!1}return!0}n.equalPoints=s;function l(d,c,f,g){return new n(Mi.random(d,c),Mi.random(f,g))}n.random=l;function h(d,c,f){const g=Ri.toRad(Ri.normalize(-c)),p=Math.sin(g),v=Math.cos(g);return u(d,v,p,f)}n.rotate=h;function u(d,c,f,g=new n){const p=e(d),v=e(g),m=p.x-v.x,y=p.y-v.y,b=m*c-y*f,_=y*c+m*f;return new n(b+v.x,_+v.y)}n.rotateEx=u})(Q||(Q={}));class Tt extends bd{get left(){return this.x}get top(){return this.y}get right(){return this.x+this.width}get bottom(){return this.y+this.height}get origin(){return new Q(this.x,this.y)}get topLeft(){return new Q(this.x,this.y)}get topCenter(){return new Q(this.x+this.width/2,this.y)}get topRight(){return new Q(this.x+this.width,this.y)}get center(){return new Q(this.x+this.width/2,this.y+this.height/2)}get bottomLeft(){return new Q(this.x,this.y+this.height)}get bottomCenter(){return new Q(this.x+this.width/2,this.y+this.height)}get bottomRight(){return new Q(this.x+this.width,this.y+this.height)}get corner(){return new Q(this.x+this.width,this.y+this.height)}get rightMiddle(){return new Q(this.x+this.width,this.y+this.height/2)}get leftMiddle(){return new Q(this.x,this.y+this.height/2)}get topLine(){return new Ut(this.topLeft,this.topRight)}get rightLine(){return new Ut(this.topRight,this.bottomRight)}get bottomLine(){return new Ut(this.bottomLeft,this.bottomRight)}get leftLine(){return new Ut(this.topLeft,this.bottomLeft)}constructor(t,e,i,r){super(),this.x=t??0,this.y=e??0,this.width=i??0,this.height=r??0}getOrigin(){return this.origin}getTopLeft(){return this.topLeft}getTopCenter(){return this.topCenter}getTopRight(){return this.topRight}getCenter(){return this.center}getCenterX(){return this.x+this.width/2}getCenterY(){return this.y+this.height/2}getBottomLeft(){return this.bottomLeft}getBottomCenter(){return this.bottomCenter}getBottomRight(){return this.bottomRight}getCorner(){return this.corner}getRightMiddle(){return this.rightMiddle}getLeftMiddle(){return this.leftMiddle}getTopLine(){return this.topLine}getRightLine(){return this.rightLine}getBottomLine(){return this.bottomLine}getLeftLine(){return this.leftLine}bbox(t){if(!t)return this.clone();const e=Ri.toRad(t),i=Math.abs(Math.sin(e)),r=Math.abs(Math.cos(e)),o=this.width*r+this.height*i,a=this.width*i+this.height*r;return new Tt(this.x+(this.width-o)/2,this.y+(this.height-a)/2,o,a)}round(t=0){return this.x=Mi.round(this.x,t),this.y=Mi.round(this.y,t),this.width=Mi.round(this.width,t),this.height=Mi.round(this.height,t),this}add(t,e,i,r){const o=Tt.create(t,e,i,r),a=Math.min(this.x,o.x),s=Math.min(this.y,o.y),l=Math.max(this.x+this.width,o.x+o.width),h=Math.max(this.y+this.height,o.y+o.height);return this.x=a,this.y=s,this.width=l-a,this.height=h-s,this}update(t,e,i,r){const o=Tt.create(t,e,i,r);return this.x=o.x,this.y=o.y,this.width=o.width,this.height=o.height,this}inflate(t,e){const i=t,r=e??t;return this.x-=i,this.y-=r,this.width+=2*i,this.height+=2*r,this}snapToGrid(t,e){const i=this.origin.snapToGrid(t,e),r=this.corner.snapToGrid(t,e);return this.x=i.x,this.y=i.y,this.width=r.x-i.x,this.height=r.y-i.y,this}translate(t,e){const i=Q.create(t,e);return this.x+=i.x,this.y+=i.y,this}scale(t,e,i=new Q){const r=this.origin.scale(t,e,i);return this.x=r.x,this.y=r.y,this.width*=t,this.height*=e,this}rotate(t,e=this.getCenter()){if(t!==0){const i=Ri.toRad(t),r=Math.cos(i),o=Math.sin(i);let a=this.getOrigin(),s=this.getTopRight(),l=this.getBottomRight(),h=this.getBottomLeft();a=Q.rotateEx(a,r,o,e),s=Q.rotateEx(s,r,o,e),l=Q.rotateEx(l,r,o,e),h=Q.rotateEx(h,r,o,e);const u=new Tt(a.x,a.y,0,0);u.add(s.x,s.y,0,0),u.add(l.x,l.y,0,0),u.add(h.x,h.y,0,0),this.update(u)}return this}rotate90(){const t=(this.width-this.height)/2;this.x+=t,this.y-=t;const e=this.width;return this.width=this.height,this.height=e,this}moveAndExpand(t){const e=Tt.clone(t);return this.x+=e.x||0,this.y+=e.y||0,this.width+=e.width||0,this.height+=e.height||0,this}getMaxScaleToFit(t,e=this.center){const i=Tt.clone(t),r=e.x,o=e.y;let a=1/0,s=1/0,l=1/0,h=1/0,u=1/0,d=1/0,c=1/0,f=1/0;const g=i.topLeft;g.x<r&&(a=(this.x-r)/(g.x-r)),g.y<o&&(u=(this.y-o)/(g.y-o));const p=i.bottomRight;p.x>r&&(s=(this.x+this.width-r)/(p.x-r)),p.y>o&&(d=(this.y+this.height-o)/(p.y-o));const v=i.topRight;v.x>r&&(l=(this.x+this.width-r)/(v.x-r)),v.y<o&&(c=(this.y-o)/(v.y-o));const m=i.bottomLeft;return m.x<r&&(h=(this.x-r)/(m.x-r)),m.y>o&&(f=(this.y+this.height-o)/(m.y-o)),{sx:Math.min(a,s,l,h),sy:Math.min(u,d,c,f)}}getMaxUniformScaleToFit(t,e=this.center){const i=this.getMaxScaleToFit(t,e);return Math.min(i.sx,i.sy)}containsPoint(t,e){return Mi.containsPoint(this,Q.create(t,e))}containsRect(t,e,i,r){const o=Tt.create(t,e,i,r),a=this.x,s=this.y,l=this.width,h=this.height,u=o.x,d=o.y,c=o.width,f=o.height;return l===0||h===0||c===0||f===0?!1:u>=a&&d>=s&&u+c<=a+l&&d+f<=s+h}intersectsWithLine(t){const e=[this.topLine,this.rightLine,this.bottomLine,this.leftLine],i=[],r=[];return e.forEach(o=>{const a=t.intersectsWithLine(o);a!==null&&r.indexOf(a.toString())<0&&(i.push(a),r.push(a.toString()))}),i.length>0?i:null}intersectsWithLineFromCenterToPoint(t,e){const i=Q.clone(t),r=this.center;let o=null;e!=null&&e!==0&&i.rotate(e,r);const a=[this.topLine,this.rightLine,this.bottomLine,this.leftLine],s=new Ut(r,i);for(let l=a.length-1;l>=0;l-=1){const h=a[l].intersectsWithLine(s);if(h!==null){o=h;break}}return o&&e!=null&&e!==0&&o.rotate(-e,r),o}intersectsWithRect(t,e,i,r){const o=Tt.create(t,e,i,r);if(!this.isIntersectWithRect(o))return null;const a=this.origin,s=this.corner,l=o.origin,h=o.corner,u=Math.max(a.x,l.x),d=Math.max(a.y,l.y);return new Tt(u,d,Math.min(s.x,h.x)-u,Math.min(s.y,h.y)-d)}isIntersectWithRect(t,e,i,r){const o=Tt.create(t,e,i,r),a=this.origin,s=this.corner,l=o.origin,h=o.corner;return!(h.x<=a.x||h.y<=a.y||l.x>=s.x||l.y>=s.y)}normalize(){let t=this.x,e=this.y,i=this.width,r=this.height;return this.width<0&&(t=this.x+this.width,i=-this.width),this.height<0&&(e=this.y+this.height,r=-this.height),this.x=t,this.y=e,this.width=i,this.height=r,this}union(t){const e=Tt.clone(t),i=this.origin,r=this.corner,o=e.origin,a=e.corner,s=Math.min(i.x,o.x),l=Math.min(i.y,o.y),h=Math.max(r.x,a.x),u=Math.max(r.y,a.y);return new Tt(s,l,h-s,u-l)}getNearestSideToPoint(t){const e=Q.clone(t),i=e.x-this.x,r=this.x+this.width-e.x,o=e.y-this.y,a=this.y+this.height-e.y;let s=i,l="left";return r<s&&(s=r,l="right"),o<s&&(s=o,l="top"),a<s&&(l="bottom"),l}getNearestPointToPoint(t){const e=Q.clone(t);if(this.containsPoint(e)){const i=this.getNearestSideToPoint(e);if(i==="left")return new Q(this.x,e.y);if(i==="top")return new Q(e.x,this.y);if(i==="right")return new Q(this.x+this.width,e.y);if(i==="bottom")return new Q(e.x,this.y+this.height)}return e.adhereToRect(this)}equals(t){return t!=null&&t.x===this.x&&t.y===this.y&&t.width===this.width&&t.height===this.height}clone(){return new Tt(this.x,this.y,this.width,this.height)}toJSON(){return{x:this.x,y:this.y,width:this.width,height:this.height}}serialize(){return`${this.x} ${this.y} ${this.width} ${this.height}`}}(function(n){function t(e){return e!=null&&e instanceof n}n.isRectangle=t})(Tt||(Tt={}));(function(n){function t(e){return e!=null&&typeof e=="object"&&typeof e.x=="number"&&typeof e.y=="number"&&typeof e.width=="number"&&typeof e.height=="number"}n.isRectangleLike=t})(Tt||(Tt={}));(function(n){function t(a,s,l,h){return a==null||typeof a=="number"?new n(a,s,l,h):e(a)}n.create=t;function e(a){return n.isRectangle(a)?a.clone():Array.isArray(a)?new n(a[0],a[1],a[2],a[3]):new n(a.x,a.y,a.width,a.height)}n.clone=e;function i(a){return new n(a.x-a.a,a.y-a.b,2*a.a,2*a.b)}n.fromEllipse=i;function r(a){return new n(0,0,a.width,a.height)}n.fromSize=r;function o(a,s){return new n(a.x,a.y,s.width,s.height)}n.fromPositionAndSize=o})(Tt||(Tt={}));let Ut=class is extends bd{get center(){return new Q((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)}constructor(t,e,i,r){super(),typeof t=="number"&&typeof e=="number"?(this.start=new Q(t,e),this.end=new Q(i,r)):(this.start=Q.create(t),this.end=Q.create(e))}getCenter(){return this.center}round(t=0){return this.start.round(t),this.end.round(t),this}translate(t,e){return typeof t=="number"?(this.start.translate(t,e),this.end.translate(t,e)):(this.start.translate(t),this.end.translate(t)),this}rotate(t,e){return this.start.rotate(t,e),this.end.rotate(t,e),this}scale(t,e,i){return this.start.scale(t,e,i),this.end.scale(t,e,i),this}length(){return Math.sqrt(this.squaredLength())}squaredLength(){const t=this.start.x-this.end.x,e=this.start.y-this.end.y;return t*t+e*e}setLength(t){const e=this.length();if(!e)return this;const i=t/e;return this.scale(i,i,this.start)}parallel(t){const e=this.clone();if(!e.isDifferentiable())return e;const{start:i,end:r}=e,o=i.clone().rotate(270,r),a=r.clone().rotate(90,i);return i.move(a,t),r.move(o,t),e}vector(){return new Q(this.end.x-this.start.x,this.end.y-this.start.y)}angle(){const t=new Q(this.start.x+1,this.start.y);return this.start.angleBetween(this.end,t)}bbox(){const t=Math.min(this.start.x,this.end.x),e=Math.min(this.start.y,this.end.y),i=Math.max(this.start.x,this.end.x),r=Math.max(this.start.y,this.end.y);return new Tt(t,e,i-t,r-e)}bearing(){return this.start.bearing(this.end)}closestPoint(t){return this.pointAt(this.closestPointNormalizedLength(t))}closestPointLength(t){return this.closestPointNormalizedLength(t)*this.length()}closestPointTangent(t){return this.tangentAt(this.closestPointNormalizedLength(t))}closestPointNormalizedLength(t){const e=this.vector().dot(new is(this.start,t).vector()),i=Math.min(1,Math.max(0,e/this.squaredLength()));return Number.isNaN(i)?0:i}pointAt(t){const e=this.start,i=this.end;return t<=0?e.clone():t>=1?i.clone():e.lerp(i,t)}pointAtLength(t){const e=this.start,i=this.end;let r=!0;t<0&&(r=!1,t=-t);const o=this.length();if(t>=o)return r?i.clone():e.clone();const a=(r?t:o-t)/o;return this.pointAt(a)}divideAt(t){const e=this.pointAt(t);return[new is(this.start,e),new is(e,this.end)]}divideAtLength(t){const e=this.pointAtLength(t);return[new is(this.start,e),new is(e,this.end)]}containsPoint(t){const e=this.start,i=this.end;if(e.cross(t,i)!==0)return!1;const r=this.length();return!(new is(e,t).length()>r||new is(t,i).length()>r)}intersect(t,e){const i=t.intersectsWithLine(this,e);return i?Array.isArray(i)?i:[i]:null}intersectsWithLine(t){const e=new Q(this.end.x-this.start.x,this.end.y-this.start.y),i=new Q(t.end.x-t.start.x,t.end.y-t.start.y),r=e.x*i.y-e.y*i.x,o=new Q(t.start.x-this.start.x,t.start.y-this.start.y),a=o.x*i.y-o.y*i.x,s=o.x*e.y-o.y*e.x;if(r===0||a*r<0||s*r<0)return null;if(r>0){if(a>r||s>r)return null}else if(a<r||s<r)return null;return new Q(this.start.x+a*e.x/r,this.start.y+a*e.y/r)}isDifferentiable(){return!this.start.equals(this.end)}pointOffset(t){const e=Q.clone(t),i=this.start,r=this.end;return((r.x-i.x)*(e.y-i.y)-(r.y-i.y)*(e.x-i.x))/this.length()}pointSquaredDistance(t,e){const i=Q.create(t,e);return this.closestPoint(i).squaredDistance(i)}pointDistance(t,e){const i=Q.create(t,e);return this.closestPoint(i).distance(i)}tangentAt(t){if(!this.isDifferentiable())return null;const e=this.start,i=this.end,r=this.pointAt(t),o=new is(e,i);return o.translate(r.x-e.x,r.y-e.y),o}tangentAtLength(t){if(!this.isDifferentiable())return null;const e=this.start,i=this.end,r=this.pointAtLength(t),o=new is(e,i);return o.translate(r.x-e.x,r.y-e.y),o}relativeCcw(t,e){const i=Q.create(t,e);let r=i.x-this.start.x,o=i.y-this.start.y;const a=this.end.x-this.start.x,s=this.end.y-this.start.y;let l=r*s-o*a;return l===0&&(l=r*a+o*s,l>0&&(r-=a,o-=s,l=r*a+o*s,l<0&&(l=0))),l<0?-1:l>0?1:0}equals(t){return t!=null&&this.start.x===t.start.x&&this.start.y===t.start.y&&this.end.x===t.end.x&&this.end.y===t.end.y}clone(){return new is(this.start,this.end)}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}serialize(){return[this.start.serialize(),this.end.serialize()].join(" ")}};(function(n){function t(e){return e!=null&&e instanceof n}n.isLine=t})(Ut||(Ut={}));class Ts extends bd{get center(){return new Q(this.x,this.y)}constructor(t,e,i,r){super(),this.x=t??0,this.y=e??0,this.a=i??0,this.b=r??0}bbox(){return Tt.fromEllipse(this)}getCenter(){return this.center}inflate(t,e){const i=t,r=e??t;return this.a+=2*i,this.b+=2*r,this}normalizedDistance(t,e){const i=Q.create(t,e),r=i.x-this.x,o=i.y-this.y,a=this.a,s=this.b;return r*r/(a*a)+o*o/(s*s)}containsPoint(t,e){return this.normalizedDistance(t,e)<=1}intersectsWithLine(t){const e=[],i=this.a,r=this.b,o=t.start,a=t.end,s=t.vector(),l=o.diff(new Q(this.x,this.y)),h=new Q(s.x/(i*i),s.y/(r*r)),u=new Q(l.x/(i*i),l.y/(r*r)),d=s.dot(h),c=s.dot(u),f=l.dot(u)-1,g=c*c-d*f;if(g<0)return null;if(g>0){const p=Math.sqrt(g),v=(-c-p)/d,m=(-c+p)/d;if((v<0||v>1)&&(m<0||m>1))return null;v>=0&&v<=1&&e.push(o.lerp(a,v)),m>=0&&m<=1&&e.push(o.lerp(a,m))}else{const p=-c/d;if(p>=0&&p<=1)e.push(o.lerp(a,p));else return null}return e}intersectsWithLineFromCenterToPoint(t,e=0){const i=Q.clone(t);e&&i.rotate(e,this.getCenter());const r=i.x-this.x,o=i.y-this.y;let a;if(r===0)return a=this.bbox().getNearestPointToPoint(i),e?a.rotate(-e,this.getCenter()):a;const s=o/r,l=s*s,h=this.a*this.a,u=this.b*this.b;let d=Math.sqrt(1/(1/h+l/u));d=r<0?-d:d;const c=s*d;return a=new Q(this.x+d,this.y+c),e?a.rotate(-e,this.getCenter()):a}tangentTheta(t){const e=Q.clone(t),i=e.x,r=e.y,o=this.a,a=this.b,s=this.bbox().center,l=s.x,h=s.y,u=30,d=i>s.x+o/2,c=i<s.x-o/2;let f,g;return d||c?(g=i>s.x?r-u:r+u,f=o*o/(i-l)-o*o*(r-h)*(g-h)/(a*a*(i-l))+l):(f=r>s.y?i+u:i-u,g=a*a/(r-h)-a*a*(i-l)*(f-l)/(o*o*(r-h))+h),new Q(f,g).theta(e)}scale(t,e){return this.a*=t,this.b*=e,this}rotate(t,e){const i=Tt.fromEllipse(this);i.rotate(t,e);const r=Ts.fromRect(i);return this.a=r.a,this.b=r.b,this.x=r.x,this.y=r.y,this}translate(t,e){const i=Q.create(t,e);return this.x+=i.x,this.y+=i.y,this}equals(t){return t!=null&&t.x===this.x&&t.y===this.y&&t.a===this.a&&t.b===this.b}clone(){return new Ts(this.x,this.y,this.a,this.b)}toJSON(){return{x:this.x,y:this.y,a:this.a,b:this.b}}serialize(){return`${this.x} ${this.y} ${this.a} ${this.b}`}}(function(n){function t(e){return e!=null&&e instanceof n}n.isEllipse=t})(Ts||(Ts={}));(function(n){function t(r,o,a,s){return r==null||typeof r=="number"?new n(r,o,a,s):e(r)}n.create=t;function e(r){return n.isEllipse(r)?r.clone():Array.isArray(r)?new n(r[0],r[1],r[2],r[3]):new n(r.x,r.y,r.a,r.b)}n.parse=e;function i(r){const o=r.center;return new n(o.x,o.y,r.width/2,r.height/2)}n.fromRect=i})(Ts||(Ts={}));const HOt=new RegExp("^[\\s\\dLMCZz,.]*$");function zOt(n){return typeof n!="string"?!1:HOt.test(n)}function VB(n,t){return(n%t+t)%t}function FOt(n,t,e,i,r){const o=[],a=n[n.length-1],s=t!=null&&t>0,l=t||0;if(i&&s){n=n.slice();const d=n[0],c=new Q(a.x+(d.x-a.x)/2,a.y+(d.y-a.y)/2);n.splice(0,0,c)}let h=n[0],u=1;for(e?o.push("M",h.x,h.y):o.push("L",h.x,h.y);u<(i?n.length:n.length-1);){let d=n[VB(u,n.length)],c=h.x-d.x,f=h.y-d.y;if(s&&(c!==0||f!==0)&&(r==null||r.indexOf(u-1)<0)){let g=Math.sqrt(c*c+f*f);const p=c*Math.min(l,g/2)/g,v=f*Math.min(l,g/2)/g,m=d.x+p,y=d.y+v;o.push("L",m,y);let b=n[VB(u+1,n.length)];for(;u<n.length-2&&Math.round(b.x-d.x)===0&&Math.round(b.y-d.y)===0;)b=n[VB(u+2,n.length)],u+=1;c=b.x-d.x,f=b.y-d.y,g=Math.max(1,Math.sqrt(c*c+f*f));const _=c*Math.min(l,g/2)/g,w=f*Math.min(l,g/2)/g,C=d.x+_,x=d.y+w;o.push("Q",d.x,d.y,C,x),d=new Q(C,x)}else o.push("L",d.x,d.y);h=d,u+=1}return i?o.push("Z"):o.push("L",a.x,a.y),o.map(d=>typeof d=="string"?d:+d.toFixed(3)).join(" ")}function Trt(n,t={}){const e=[];return n&&n.length&&n.forEach(i=>{Array.isArray(i)?e.push({x:i[0],y:i[1]}):e.push({x:i.x,y:i.y})}),FOt(e,t.round,t.initialMove==null||t.initialMove,t.close,t.exclude)}function uS(n,t,e,i,r=0,o=0,a=0,s,l){if(e===0||i===0)return[];s-=n,l-=t,e=Math.abs(e),i=Math.abs(i);const h=-s/2,u=-l/2,d=Math.cos(r*Math.PI/180),c=Math.sin(r*Math.PI/180),f=d*h+c*u,g=-1*c*h+d*u,p=f*f,v=g*g,m=e*e,y=i*i,b=p/m+v/y;let _;if(b>1)e=Math.sqrt(b)*e,i=Math.sqrt(b)*i,_=0;else{let Z=1;o===a&&(Z=-1),_=Z*Math.sqrt((m*y-m*v-y*p)/(m*v+y*p))}const w=_*e*g/i,C=-1*_*i*f/e,x=d*w-c*C+s/2,S=c*w+d*C+l/2;let A=Math.atan2((g-C)/i,(f-w)/e)-Math.atan2(0,1),T=A>=0?A:2*Math.PI+A;A=Math.atan2((-g-C)/i,(-f-w)/e)-Math.atan2((g-C)/i,(f-w)/e);let M=A>=0?A:2*Math.PI+A;a===0&&M>0?M-=2*Math.PI:a!==0&&M<0&&(M+=2*Math.PI);const R=M*2/Math.PI,L=Math.ceil(R<0?-1*R:R),B=M/L,P=8/3*Math.sin(B/4)*Math.sin(B/4)/Math.sin(B/2),k=d*e,E=d*i,D=c*e,I=c*i;let O=Math.cos(T),H=Math.sin(T),F=-P*(k*H+I*O),N=-P*(D*H-E*O),$=0,V=0;const X=[];for(let Z=0;Z<L;Z+=1){T+=B,O=Math.cos(T),H=Math.sin(T),$=k*O-I*H+x,V=D*O+E*H+S;const tt=-P*(k*H+I*O),K=-P*(D*H-E*O),rt=Z*6;X[rt]=Number(F+n),X[rt+1]=Number(N+t),X[rt+2]=Number($-tt+n),X[rt+3]=Number(V-K+t),X[rt+4]=Number($+n),X[rt+5]=Number(V+t),F=$+tt,N=V+K}return X.map(Z=>+Z.toFixed(2))}function NOt(n,t,e,i,r=0,o=0,a=0,s,l){const h=[],u=uS(n,t,e,i,r,o,a,s,l);if(u!=null)for(let d=0,c=u.length;d<c;d+=6)h.push("C",u[d],u[d+1],u[d+2],u[d+3],u[d+4],u[d+5]);return h.join(" ")}class Rn extends bd{get start(){return this.points[0]||null}get end(){return this.points[this.points.length-1]||null}constructor(t){if(super(),t!=null){if(typeof t=="string")return Rn.parse(t);this.points=t.map(e=>Q.create(e))}else this.points=[]}scale(t,e,i=new Q){return this.points.forEach(r=>r.scale(t,e,i)),this}rotate(t,e){return this.points.forEach(i=>i.rotate(t,e)),this}translate(t,e){const i=Q.create(t,e);return this.points.forEach(r=>r.translate(i.x,i.y)),this}round(t=0){return this.points.forEach(e=>e.round(t)),this}bbox(){if(this.points.length===0)return new Tt;let t=1/0,e=-1/0,i=1/0,r=-1/0;const o=this.points;for(let a=0,s=o.length;a<s;a+=1){const l=o[a],h=l.x,u=l.y;h<t&&(t=h),h>e&&(e=h),u<i&&(i=u),u>r&&(r=u)}return new Tt(t,i,e-t,r-i)}closestPoint(t){const e=this.closestPointLength(t);return this.pointAtLength(e)}closestPointLength(t){const e=this.points,i=e.length;if(i===0||i===1)return 0;let r=0,o=0,a=1/0;for(let s=0,l=i-1;s<l;s+=1){const h=new Ut(e[s],e[s+1]),u=h.length(),d=h.closestPointNormalizedLength(t),f=h.pointAt(d).squaredDistance(t);f<a&&(a=f,o=r+d*u),r+=u}return o}closestPointNormalizedLength(t){const e=this.length();return e===0?0:this.closestPointLength(t)/e}closestPointTangent(t){const e=this.closestPointLength(t);return this.tangentAtLength(e)}containsPoint(t){if(this.points.length===0)return!1;const e=Q.clone(t),i=e.x,r=e.y,o=this.points,a=o.length;let s=a-1,l=0;for(let h=0;h<a;h+=1){const u=o[s],d=o[h];if(e.equals(u))return!0;const c=new Ut(u,d);if(c.containsPoint(t))return!0;if(r<=u.y&&r>d.y||r>u.y&&r<=d.y){const f=u.x-i>d.x-i?u.x-i:d.x-i;if(f>=0){const g=new Q(i+f,r),p=new Ut(t,g);c.intersectsWithLine(p)&&(l+=1)}}s=h}return l%2===1}intersectsWithLine(t){const e=[];for(let i=0,r=this.points.length-1;i<r;i+=1){const o=this.points[i],a=this.points[i+1],s=t.intersectsWithLine(new Ut(o,a));s&&e.push(s)}return e.length>0?e:null}isDifferentiable(){for(let t=0,e=this.points.length-1;t<e;t+=1){const i=this.points[t],r=this.points[t+1];if(new Ut(i,r).isDifferentiable())return!0}return!1}length(){let t=0;for(let e=0,i=this.points.length-1;e<i;e+=1){const r=this.points[e],o=this.points[e+1];t+=r.distance(o)}return t}pointAt(t){const e=this.points,i=e.length;if(i===0)return null;if(i===1||t<=0)return e[0].clone();if(t>=1)return e[i-1].clone();const o=this.length()*t;return this.pointAtLength(o)}pointAtLength(t){const e=this.points,i=e.length;if(i===0)return null;if(i===1)return e[0].clone();let r=!0;t<0&&(r=!1,t=-t);let o=0;for(let s=0,l=i-1;s<l;s+=1){const h=r?s:l-1-s,u=e[h],d=e[h+1],c=new Ut(u,d),f=u.distance(d);if(t<=o+f)return c.pointAtLength((r?1:-1)*(t-o));o+=f}return(r?e[i-1]:e[0]).clone()}tangentAt(t){const i=this.points.length;if(i===0||i===1)return null;t<0&&(t=0),t>1&&(t=1);const o=this.length()*t;return this.tangentAtLength(o)}tangentAtLength(t){const e=this.points,i=e.length;if(i===0||i===1)return null;let r=!0;t<0&&(r=!1,t=-t);let o,a=0;for(let s=0,l=i-1;s<l;s+=1){const h=r?s:l-1-s,u=e[h],d=e[h+1],c=new Ut(u,d),f=u.distance(d);if(c.isDifferentiable()){if(t<=a+f)return c.tangentAtLength((r?1:-1)*(t-a));o=c}a+=f}if(o){const s=r?1:0;return o.tangentAt(s)}return null}simplify(t={}){const e=this.points;if(e.length<3)return this;const i=t.threshold||0;let r=0;for(;e[r+2];){const o=r,a=r+1,s=r+2,l=e[o],h=e[a],u=e[s];new Ut(l,u).closestPoint(h).distance(h)<=i?e.splice(a,1):r+=1}return this}toHull(){const t=this.points,e=t.length;if(e===0)return new Rn;let i=t[0];for(let c=1;c<e;c+=1)(t[c].y<i.y||t[c].y===i.y&&t[c].x>i.x)&&(i=t[c]);const r=[];for(let c=0;c<e;c+=1){let f=i.theta(t[c]);f===0&&(f=360),r.push([t[c],c,f])}if(r.sort((c,f)=>{let g=c[2]-f[2];return g===0&&(g=f[1]-c[1]),g}),r.length>2){const c=r[r.length-1];r.unshift(c)}const o={},a=[],s=c=>`${c[0].toString()}@${c[1]}`;for(;r.length!==0;){const c=r.pop(),f=c[0];if(o[s(c)])continue;let g=!1;for(;!g;)if(a.length<2)a.push(c),g=!0;else{const p=a.pop(),v=p[0],m=a.pop(),y=m[0],b=y.cross(v,f);if(b<0)a.push(m),a.push(p),a.push(c),g=!0;else if(b===0){const w=v.angleBetween(y,f);Math.abs(w-180)<1e-10||v.equals(f)||y.equals(v)?(o[s(p)]=v,a.push(m)):Math.abs((w+1)%360-1)<1e-10&&(a.push(m),r.push(p))}else o[s(p)]=v,a.push(m)}}a.length>2&&a.pop();let l,h=-1;for(let c=0,f=a.length;c<f;c+=1){const g=a[c][1];(l===void 0||g<l)&&(l=g,h=c)}let u=[];if(h>0){const c=a.slice(h),f=a.slice(0,h);u=c.concat(f)}else u=a;const d=[];for(let c=0,f=u.length;c<f;c+=1)d.push(u[c][0]);return new Rn(d)}equals(t){return t==null||t.points.length!==this.points.length?!1:t.points.every((e,i)=>e.equals(this.points[i]))}clone(){return new Rn(this.points.map(t=>t.clone()))}toJSON(){return this.points.map(t=>t.toJSON())}serialize(){return this.points.map(t=>`${t.serialize()}`).join(" ")}}(function(n){function t(e){return e!=null&&e instanceof n}n.isPolyline=t})(Rn||(Rn={}));(function(n){function t(e){const i=e.trim();if(i==="")return new n;const r=[],o=i.split(/\s*,\s*|\s+/);for(let a=0,s=o.length;a<s;a+=2)r.push({x:+o[a],y:+o[a+1]});return new n(r)}n.parse=t})(Rn||(Rn={}));let Zo=class ih extends bd{constructor(t,e,i,r){super(),this.PRECISION=3,this.start=Q.create(t),this.controlPoint1=Q.create(e),this.controlPoint2=Q.create(i),this.end=Q.create(r)}bbox(){const t=this.start,e=this.controlPoint1,i=this.controlPoint2,r=this.end,o=t.x,a=t.y,s=e.x,l=e.y,h=i.x,u=i.y,d=r.x,c=r.y,f=[],g=[[],[]];let p,v,m,y,b,_,w,C;for(let k=0;k<2;k+=1){if(k===0?(v=6*o-12*s+6*h,p=-3*o+9*s-9*h+3*d,m=3*s-3*o):(v=6*a-12*l+6*u,p=-3*a+9*l-9*u+3*c,m=3*l-3*a),Math.abs(p)<1e-12){if(Math.abs(v)<1e-12)continue;y=-m/v,y>0&&y<1&&f.push(y);continue}w=v*v-4*m*p,C=Math.sqrt(w),!(w<0)&&(b=(-v+C)/(2*p),b>0&&b<1&&f.push(b),_=(-v-C)/(2*p),_>0&&_<1&&f.push(_))}let x,S,A,T=f.length;const M=T;for(;T;)T-=1,y=f[T],A=1-y,x=A*A*A*o+3*A*A*y*s+3*A*y*y*h+y*y*y*d,g[0][T]=x,S=A*A*A*a+3*A*A*y*l+3*A*y*y*u+y*y*y*c,g[1][T]=S;f[M]=0,f[M+1]=1,g[0][M]=o,g[1][M]=a,g[0][M+1]=d,g[1][M+1]=c,f.length=M+2,g[0].length=M+2,g[1].length=M+2;const R=Math.min.apply(null,g[0]),L=Math.min.apply(null,g[1]),B=Math.max.apply(null,g[0]),P=Math.max.apply(null,g[1]);return new Tt(R,L,B-R,P-L)}closestPoint(t,e={}){return this.pointAtT(this.closestPointT(t,e))}closestPointLength(t,e={}){const i=this.getOptions(e);return this.lengthAtT(this.closestPointT(t,i),i)}closestPointNormalizedLength(t,e={}){const i=this.getOptions(e),r=this.closestPointLength(t,i);if(!r)return 0;const o=this.length(i);return o===0?0:r/o}closestPointT(t,e={}){const i=this.getPrecision(e),r=this.getDivisions(e),o=Math.pow(10,-i);let a=null,s=0,l=0,h=0,u=0,d=0,c=null;const f=r.length;let g=f>0?1/f:0;for(r.forEach((p,v)=>{const m=p.start.distance(t),y=p.end.distance(t),b=m+y;(c==null||b<c)&&(a=p,s=v*g,l=(v+1)*g,h=m,u=y,c=b,d=p.endpointDistance())});;){const p=h?Math.abs(h-u)/h:0,v=u!=null?Math.abs(h-u)/u:0,m=p<o||v<o,y=h?h<d*o:!0,b=u?u<d*o:!0;if(m||(y||b))return h<=u?s:l;const w=a.divide(.5);g/=2;const C=w[0].start.distance(t),x=w[0].end.distance(t),S=C+x,A=w[1].start.distance(t),T=w[1].end.distance(t),M=A+T;S<=M?(a=w[0],l-=g,h=C,u=x):(a=w[1],s+=g,h=A,u=T)}}closestPointTangent(t,e={}){return this.tangentAtT(this.closestPointT(t,e))}containsPoint(t,e={}){return this.toPolyline(e).containsPoint(t)}divideAt(t,e={}){if(t<=0)return this.divideAtT(0);if(t>=1)return this.divideAtT(1);const i=this.tAt(t,e);return this.divideAtT(i)}divideAtLength(t,e={}){const i=this.tAtLength(t,e);return this.divideAtT(i)}divide(t){return this.divideAtT(t)}divideAtT(t){const e=this.start,i=this.controlPoint1,r=this.controlPoint2,o=this.end;if(t<=0)return[new ih(e,e,e,e),new ih(e,i,r,o)];if(t>=1)return[new ih(e,i,r,o),new ih(o,o,o,o)];const a=this.getSkeletonPoints(t),s=a.startControlPoint1,l=a.startControlPoint2,h=a.divider,u=a.dividerControlPoint1,d=a.dividerControlPoint2;return[new ih(e,s,l,h),new ih(h,u,d,o)]}endpointDistance(){return this.start.distance(this.end)}getSkeletonPoints(t){const e=this.start,i=this.controlPoint1,r=this.controlPoint2,o=this.end;if(t<=0)return{startControlPoint1:e.clone(),startControlPoint2:e.clone(),divider:e.clone(),dividerControlPoint1:i.clone(),dividerControlPoint2:r.clone()};if(t>=1)return{startControlPoint1:i.clone(),startControlPoint2:r.clone(),divider:o.clone(),dividerControlPoint1:o.clone(),dividerControlPoint2:o.clone()};const a=new Ut(e,i).pointAt(t),s=new Ut(i,r).pointAt(t),l=new Ut(r,o).pointAt(t),h=new Ut(a,s).pointAt(t),u=new Ut(s,l).pointAt(t),d=new Ut(h,u).pointAt(t);return{startControlPoint1:a,startControlPoint2:h,divider:d,dividerControlPoint1:u,dividerControlPoint2:l}}getSubdivisions(t={}){const e=this.getPrecision(t);let i=[new ih(this.start,this.controlPoint1,this.controlPoint2,this.end)];if(e===0)return i;let r=this.endpointDistance();const o=Math.pow(10,-e);let a=0;for(;;){a+=1;const s=[];i.forEach(u=>{const d=u.divide(.5);s.push(d[0],d[1])});const l=s.reduce((u,d)=>u+d.endpointDistance(),0),h=l!==0?(l-r)/l:0;if(a>1&&h<o)return s;i=s,r=l}}length(t={}){return this.getDivisions(t).reduce((i,r)=>i+r.endpointDistance(),0)}lengthAtT(t,e={}){if(t<=0)return 0;const i=e.precision===void 0?this.PRECISION:e.precision;return this.divide(t)[0].length({precision:i})}pointAt(t,e={}){if(t<=0)return this.start.clone();if(t>=1)return this.end.clone();const i=this.tAt(t,e);return this.pointAtT(i)}pointAtLength(t,e={}){const i=this.tAtLength(t,e);return this.pointAtT(i)}pointAtT(t){return t<=0?this.start.clone():t>=1?this.end.clone():this.getSkeletonPoints(t).divider}isDifferentiable(){const t=this.start,e=this.controlPoint1,i=this.controlPoint2,r=this.end;return!(t.equals(e)&&e.equals(i)&&i.equals(r))}tangentAt(t,e={}){if(!this.isDifferentiable())return null;t<0?t=0:t>1&&(t=1);const i=this.tAt(t,e);return this.tangentAtT(i)}tangentAtLength(t,e={}){if(!this.isDifferentiable())return null;const i=this.tAtLength(t,e);return this.tangentAtT(i)}tangentAtT(t){if(!this.isDifferentiable())return null;t<0&&(t=0),t>1&&(t=1);const e=this.getSkeletonPoints(t),i=e.startControlPoint2,r=e.dividerControlPoint1,o=e.divider,a=new Ut(i,r);return a.translate(o.x-i.x,o.y-i.y),a}getPrecision(t={}){return t.precision==null?this.PRECISION:t.precision}getDivisions(t={}){if(t.subdivisions!=null)return t.subdivisions;const e=this.getPrecision(t);return this.getSubdivisions({precision:e})}getOptions(t={}){const e=this.getPrecision(t),i=this.getDivisions(t);return{precision:e,subdivisions:i}}tAt(t,e={}){if(t<=0)return 0;if(t>=1)return 1;const i=this.getOptions(e),o=this.length(i)*t;return this.tAtLength(o,i)}tAtLength(t,e={}){let i=!0;t<0&&(i=!1,t=-t);const r=this.getPrecision(e),o=this.getDivisions(e),a={precision:r,subdivisions:o};let s=null,l,h,u=0,d=0,c=0;const f=o.length;let g=f>0?1/f:0;for(let m=0;m<f;m+=1){const y=i?m:f-1-m,b=o[m],_=b.endpointDistance();if(t<=c+_){s=b,l=y*g,h=(y+1)*g,u=i?t-c:_+c-t,d=i?_+c-t:t-c;break}c+=_}if(s==null)return i?1:0;const p=this.length(a),v=Math.pow(10,-r);for(;;){let m;if(m=p!==0?u/p:0,m<v)return l;if(m=p!==0?d/p:0,m<v)return h;let y,b;const _=s.divide(.5);g/=2;const w=_[0].endpointDistance(),C=_[1].endpointDistance();u<=w?(s=_[0],h-=g,y=u,b=w-y):(s=_[1],l+=g,y=u-w,b=C-y),u=y,d=b}}toPoints(t={}){const e=this.getDivisions(t),i=[e[0].start.clone()];return e.forEach(r=>i.push(r.end.clone())),i}toPolyline(t={}){return new Rn(this.toPoints(t))}scale(t,e,i){return this.start.scale(t,e,i),this.controlPoint1.scale(t,e,i),this.controlPoint2.scale(t,e,i),this.end.scale(t,e,i),this}rotate(t,e){return this.start.rotate(t,e),this.controlPoint1.rotate(t,e),this.controlPoint2.rotate(t,e),this.end.rotate(t,e),this}translate(t,e){return typeof t=="number"?(this.start.translate(t,e),this.controlPoint1.translate(t,e),this.controlPoint2.translate(t,e),this.end.translate(t,e)):(this.start.translate(t),this.controlPoint1.translate(t),this.controlPoint2.translate(t),this.end.translate(t)),this}equals(t){return t!=null&&this.start.equals(t.start)&&this.controlPoint1.equals(t.controlPoint1)&&this.controlPoint2.equals(t.controlPoint2)&&this.end.equals(t.end)}clone(){return new ih(this.start,this.controlPoint1,this.controlPoint2,this.end)}toJSON(){return{start:this.start.toJSON(),controlPoint1:this.controlPoint1.toJSON(),controlPoint2:this.controlPoint2.toJSON(),end:this.end.toJSON()}}serialize(){return[this.start.serialize(),this.controlPoint1.serialize(),this.controlPoint2.serialize(),this.end.serialize()].join(" ")}};(function(n){function t(e){return e!=null&&e instanceof n}n.isCurve=t})(Zo||(Zo={}));(function(n){function t(r){const o=r.length,a=[],s=[];let l=2;a[0]=r[0]/l;for(let h=1;h<o;h+=1)s[h]=1/l,l=(h<o-1?4:3.5)-s[h],a[h]=(r[h]-a[h-1])/l;for(let h=1;h<o;h+=1)a[o-h-1]-=s[o-h]*a[o-h];return a}function e(r){const o=r.map(c=>Q.clone(c)),a=[],s=[],l=o.length-1;if(l===1)return a[0]=new Q((2*o[0].x+o[1].x)/3,(2*o[0].y+o[1].y)/3),s[0]=new Q(2*a[0].x-o[0].x,2*a[0].y-o[0].y),[a,s];const h=[];for(let c=1;c<l-1;c+=1)h[c]=4*o[c].x+2*o[c+1].x;h[0]=o[0].x+2*o[1].x,h[l-1]=(8*o[l-1].x+o[l].x)/2;const u=t(h);for(let c=1;c<l-1;c+=1)h[c]=4*o[c].y+2*o[c+1].y;h[0]=o[0].y+2*o[1].y,h[l-1]=(8*o[l-1].y+o[l].y)/2;const d=t(h);for(let c=0;c<l;c+=1)a.push(new Q(u[c],d[c])),c<l-1?s.push(new Q(2*o[c+1].x-u[c+1],2*o[c+1].y-d[c+1])):s.push(new Q((o[l].x+u[l-1])/2,(o[l].y+d[l-1])/2));return[a,s]}function i(r){if(r==null||Array.isArray(r)&&r.length<2)throw new Error("At least 2 points are required");const o=e(r),a=[];for(let s=0,l=o[0].length;s<l;s+=1){const h=new Q(o[0][s].x,o[0][s].y),u=new Q(o[1][s].x,o[1][s].y);a.push(new n(r[s],h,u,r[s+1]))}return a}n.throughPoints=i})(Zo||(Zo={}));let LM=class extends bd{constructor(){super(...arguments),this.isVisible=!0,this.isSegment=!0,this.isSubpathStart=!1}get end(){return this.endPoint}get start(){if(this.previousSegment==null)throw new Error("Missing previous segment. (This segment cannot be the first segment of a path, or segment has not yet been added to a path.)");return this.previousSegment.end}closestPointT(t,e){if(this.closestPointNormalizedLength)return this.closestPointNormalizedLength(t);throw new Error("Neither `closestPointT` nor `closestPointNormalizedLength` method is implemented.")}lengthAtT(t,e){if(t<=0)return 0;const i=this.length();return t>=1?i:i*t}divideAtT(t){if(this.divideAt)return this.divideAt(t);throw new Error("Neither `divideAtT` nor `divideAt` method is implemented.")}pointAtT(t){if(this.pointAt)return this.pointAt(t);throw new Error("Neither `pointAtT` nor `pointAt` method is implemented.")}tangentAtT(t){if(this.tangentAt)return this.tangentAt(t);throw new Error("Neither `tangentAtT` nor `tangentAt` method is implemented.")}};class zr extends LM{constructor(t,e){super(),Ut.isLine(t)?this.endPoint=t.end.clone().round(2):this.endPoint=Q.create(t,e).round(2)}get type(){return"L"}get line(){return new Ut(this.start,this.end)}bbox(){return this.line.bbox()}closestPoint(t){return this.line.closestPoint(t)}closestPointLength(t){return this.line.closestPointLength(t)}closestPointNormalizedLength(t){return this.line.closestPointNormalizedLength(t)}closestPointTangent(t){return this.line.closestPointTangent(t)}length(){return this.line.length()}divideAt(t){const e=this.line.divideAt(t);return[new zr(e[0]),new zr(e[1])]}divideAtLength(t){const e=this.line.divideAtLength(t);return[new zr(e[0]),new zr(e[1])]}getSubdivisions(){return[]}pointAt(t){return this.line.pointAt(t)}pointAtLength(t){return this.line.pointAtLength(t)}tangentAt(t){return this.line.tangentAt(t)}tangentAtLength(t){return this.line.tangentAtLength(t)}isDifferentiable(){return this.previousSegment==null?!1:!this.start.equals(this.end)}clone(){return new zr(this.end)}scale(t,e,i){return this.end.scale(t,e,i),this}rotate(t,e){return this.end.rotate(t,e),this}translate(t,e){return typeof t=="number"?this.end.translate(t,e):this.end.translate(t),this}equals(t){return this.type===t.type&&this.start.equals(t.start)&&this.end.equals(t.end)}toJSON(){return{type:this.type,start:this.start.toJSON(),end:this.end.toJSON()}}serialize(){const t=this.end;return`${this.type} ${t.x} ${t.y}`}}(function(n){function t(...e){const i=e.length,r=e[0];if(Ut.isLine(r))return new n(r);if(Q.isPointLike(r))return i===1?new n(r):e.map(a=>new n(a));if(i===2)return new n(+e[0],+e[1]);const o=[];for(let a=0;a<i;a+=2){const s=+e[a],l=+e[a+1];o.push(new n(s,l))}return o}n.create=t})(zr||(zr={}));class lv extends LM{get end(){if(!this.subpathStartSegment)throw new Error("Missing subpath start segment. (This segment needs a subpath start segment (e.g. MoveTo), or segment has not yet been added to a path.)");return this.subpathStartSegment.end}get type(){return"Z"}get line(){return new Ut(this.start,this.end)}bbox(){return this.line.bbox()}closestPoint(t){return this.line.closestPoint(t)}closestPointLength(t){return this.line.closestPointLength(t)}closestPointNormalizedLength(t){return this.line.closestPointNormalizedLength(t)}closestPointTangent(t){return this.line.closestPointTangent(t)}length(){return this.line.length()}divideAt(t){const e=this.line.divideAt(t);return[e[1].isDifferentiable()?new zr(e[0]):this.clone(),new zr(e[1])]}divideAtLength(t){const e=this.line.divideAtLength(t);return[e[1].isDifferentiable()?new zr(e[0]):this.clone(),new zr(e[1])]}getSubdivisions(){return[]}pointAt(t){return this.line.pointAt(t)}pointAtLength(t){return this.line.pointAtLength(t)}tangentAt(t){return this.line.tangentAt(t)}tangentAtLength(t){return this.line.tangentAtLength(t)}isDifferentiable(){return!this.previousSegment||!this.subpathStartSegment?!1:!this.start.equals(this.end)}scale(){return this}rotate(){return this}translate(){return this}equals(t){return this.type===t.type&&this.start.equals(t.start)&&this.end.equals(t.end)}clone(){return new lv}toJSON(){return{type:this.type,start:this.start.toJSON(),end:this.end.toJSON()}}serialize(){return this.type}}(function(n){function t(){return new n}n.create=t})(lv||(lv={}));class hv extends LM{constructor(t,e){super(),this.isVisible=!1,this.isSubpathStart=!0,Ut.isLine(t)||Zo.isCurve(t)?this.endPoint=t.end.clone().round(2):this.endPoint=Q.create(t,e).round(2)}get start(){throw new Error("Illegal access. Moveto segments should not need a start property.")}get type(){return"M"}bbox(){return null}closestPoint(){return this.end.clone()}closestPointLength(){return 0}closestPointNormalizedLength(){return 0}closestPointT(){return 1}closestPointTangent(){return null}length(){return 0}lengthAtT(){return 0}divideAt(){return[this.clone(),this.clone()]}divideAtLength(){return[this.clone(),this.clone()]}getSubdivisions(){return[]}pointAt(){return this.end.clone()}pointAtLength(){return this.end.clone()}pointAtT(){return this.end.clone()}tangentAt(){return null}tangentAtLength(){return null}tangentAtT(){return null}isDifferentiable(){return!1}scale(t,e,i){return this.end.scale(t,e,i),this}rotate(t,e){return this.end.rotate(t,e),this}translate(t,e){return typeof t=="number"?this.end.translate(t,e):this.end.translate(t),this}clone(){return new hv(this.end)}equals(t){return this.type===t.type&&this.end.equals(t.end)}toJSON(){return{type:this.type,end:this.end.toJSON()}}serialize(){const t=this.end;return`${this.type} ${t.x} ${t.y}`}}(function(n){function t(...e){const i=e.length,r=e[0];if(Ut.isLine(r))return new n(r);if(Zo.isCurve(r))return new n(r);if(Q.isPointLike(r)){if(i===1)return new n(r);const a=[];for(let s=0;s<i;s+=1)s===0?a.push(new n(e[s])):a.push(new zr(e[s]));return a}if(i===2)return new n(+e[0],+e[1]);const o=[];for(let a=0;a<i;a+=2){const s=+e[a],l=+e[a+1];a===0?o.push(new n(s,l)):o.push(new zr(s,l))}return o}n.create=t})(hv||(hv={}));class Sa extends LM{constructor(t,e,i,r,o,a){super(),Zo.isCurve(t)?(this.controlPoint1=t.controlPoint1.clone().round(2),this.controlPoint2=t.controlPoint2.clone().round(2),this.endPoint=t.end.clone().round(2)):typeof t=="number"?(this.controlPoint1=new Q(t,e).round(2),this.controlPoint2=new Q(i,r).round(2),this.endPoint=new Q(o,a).round(2)):(this.controlPoint1=Q.create(t).round(2),this.controlPoint2=Q.create(e).round(2),this.endPoint=Q.create(i).round(2))}get type(){return"C"}get curve(){return new Zo(this.start,this.controlPoint1,this.controlPoint2,this.end)}bbox(){return this.curve.bbox()}closestPoint(t){return this.curve.closestPoint(t)}closestPointLength(t){return this.curve.closestPointLength(t)}closestPointNormalizedLength(t){return this.curve.closestPointNormalizedLength(t)}closestPointTangent(t){return this.curve.closestPointTangent(t)}length(){return this.curve.length()}divideAt(t,e={}){const i=this.curve.divideAt(t,e);return[new Sa(i[0]),new Sa(i[1])]}divideAtLength(t,e={}){const i=this.curve.divideAtLength(t,e);return[new Sa(i[0]),new Sa(i[1])]}divideAtT(t){const e=this.curve.divideAtT(t);return[new Sa(e[0]),new Sa(e[1])]}getSubdivisions(){return[]}pointAt(t){return this.curve.pointAt(t)}pointAtLength(t){return this.curve.pointAtLength(t)}tangentAt(t){return this.curve.tangentAt(t)}tangentAtLength(t){return this.curve.tangentAtLength(t)}isDifferentiable(){if(!this.previousSegment)return!1;const t=this.start,e=this.controlPoint1,i=this.controlPoint2,r=this.end;return!(t.equals(e)&&e.equals(i)&&i.equals(r))}scale(t,e,i){return this.controlPoint1.scale(t,e,i),this.controlPoint2.scale(t,e,i),this.end.scale(t,e,i),this}rotate(t,e){return this.controlPoint1.rotate(t,e),this.controlPoint2.rotate(t,e),this.end.rotate(t,e),this}translate(t,e){return typeof t=="number"?(this.controlPoint1.translate(t,e),this.controlPoint2.translate(t,e),this.end.translate(t,e)):(this.controlPoint1.translate(t),this.controlPoint2.translate(t),this.end.translate(t)),this}equals(t){return this.start.equals(t.start)&&this.end.equals(t.end)&&this.controlPoint1.equals(t.controlPoint1)&&this.controlPoint2.equals(t.controlPoint2)}clone(){return new Sa(this.controlPoint1,this.controlPoint2,this.end)}toJSON(){return{type:this.type,start:this.start.toJSON(),controlPoint1:this.controlPoint1.toJSON(),controlPoint2:this.controlPoint2.toJSON(),end:this.end.toJSON()}}serialize(){const t=this.controlPoint1,e=this.controlPoint2,i=this.end;return[this.type,t.x,t.y,e.x,e.y,i.x,i.y].join(" ")}}(function(n){function t(...e){const i=e.length,r=e[0];if(Zo.isCurve(r))return new n(r);if(Q.isPointLike(r)){if(i===3)return new n(e[0],e[1],e[2]);const a=[];for(let s=0;s<i;s+=3)a.push(new n(e[s],e[s+1],e[s+2]));return a}if(i===6)return new n(e[0],e[1],e[2],e[3],e[4],e[5]);const o=[];for(let a=0;a<i;a+=6)o.push(new n(e[a],e[a+1],e[a+2],e[a+3],e[a+4],e[a+5]));return o}n.create=t})(Sa||(Sa={}));function d1(n,t,e){return{x:n*Math.cos(e)-t*Math.sin(e),y:n*Math.sin(e)+t*Math.cos(e)}}function H9(n,t,e,i,r,o){const a=.3333333333333333,s=2/3;return[a*n+s*e,a*t+s*i,a*r+s*e,a*o+s*i,r,o]}function Mrt(n,t,e,i,r,o,a,s,l,h){const u=Math.PI*120/180,d=Math.PI/180*(+r||0);let c=[],f,g,p,v,m;if(h)g=h[0],p=h[1],v=h[2],m=h[3];else{f=d1(n,t,-d),n=f.x,t=f.y,f=d1(s,l,-d),s=f.x,l=f.y;const B=(n-s)/2,P=(t-l)/2;let k=B*B/(e*e)+P*P/(i*i);k>1&&(k=Math.sqrt(k),e=k*e,i=k*i);const E=e*e,D=i*i,I=(o===a?-1:1)*Math.sqrt(Math.abs((E*D-E*P*P-D*B*B)/(E*P*P+D*B*B)));v=I*e*P/i+(n+s)/2,m=I*-i*B/e+(t+l)/2,g=Math.asin((t-m)/i),p=Math.asin((l-m)/i),g=n<v?Math.PI-g:g,p=s<v?Math.PI-p:p,g<0&&(g=Math.PI*2+g),p<0&&(p=Math.PI*2+p),a&&g>p&&(g-=Math.PI*2),!a&&p>g&&(p-=Math.PI*2)}let y=p-g;if(Math.abs(y)>u){const B=p,P=s,k=l;p=g+u*(a&&p>g?1:-1),s=v+e*Math.cos(p),l=m+i*Math.sin(p),c=Mrt(s,l,e,i,r,0,a,P,k,[p,B,v,m])}y=p-g;const b=Math.cos(g),_=Math.sin(g),w=Math.cos(p),C=Math.sin(p),x=Math.tan(y/4),S=4/3*(e*x),A=4/3*(i*x),T=[n,t],M=[n+S*_,t-A*b],R=[s+S*C,l-A*w],L=[s,l];if(M[0]=2*T[0]-M[0],M[1]=2*T[1]-M[1],h)return[M,R,L].concat(c);{c=[M,R,L].concat(c).join().split(",");const B=[],P=c.length;for(let k=0;k<P;k+=1)B[k]=k%2?d1(+c[k-1],+c[k],d).y:d1(+c[k],+c[k+1],d).x;return B}}function WOt(n){if(!n)return null;const t=`	
\v\f\r \u2028\u2029`,e=new RegExp(`([a-z])[${t},]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?[${t}]*,?[${t}]*)+)`,"ig"),i=new RegExp(`(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)[${t}]*,?[${t}]*`,"ig"),r={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},o=[];return n.replace(e,(a,s,l)=>{const h=[];let u=s.toLowerCase();l.replace(i,(c,f)=>(f&&h.push(+f),c)),u==="m"&&h.length>2&&(o.push([s,...h.splice(0,2)]),u="l",s=s==="m"?"l":"L");const d=r[u];for(;h.length>=d&&(o.push([s,...h.splice(0,d)]),!!d););return a}),o}function VOt(n){const t=WOt(n);if(!t||!t.length)return[["M",0,0]];let e=0,i=0,r=0,o=0;const a=[];for(let s=0,l=t.length;s<l;s+=1){const h=[];a.push(h);const u=t[s],d=u[0];if(d!==d.toUpperCase())switch(h[0]=d.toUpperCase(),h[0]){case"A":h[1]=u[1],h[2]=u[2],h[3]=u[3],h[4]=u[4],h[5]=u[5],h[6]=+u[6]+e,h[7]=+u[7]+i;break;case"V":h[1]=+u[1]+i;break;case"H":h[1]=+u[1]+e;break;case"M":r=+u[1]+e,o=+u[2]+i;for(let c=1,f=u.length;c<f;c+=1)h[c]=+u[c]+(c%2?e:i);break;default:for(let c=1,f=u.length;c<f;c+=1)h[c]=+u[c]+(c%2?e:i);break}else for(let c=0,f=u.length;c<f;c+=1)h[c]=u[c];switch(h[0]){case"Z":e=+r,i=+o;break;case"H":e=h[1];break;case"V":i=h[1];break;case"M":r=h[h.length-2],o=h[h.length-1],e=h[h.length-2],i=h[h.length-1];break;default:e=h[h.length-2],i=h[h.length-1];break}}return a}function GOt(n){const t=VOt(n),e={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function i(l,h,u){let d,c;if(!l)return["C",h.x,h.y,h.x,h.y,h.x,h.y];switch(l[0]in{T:1,Q:1}||(h.qx=null,h.qy=null),l[0]){case"M":h.X=l[1],h.Y=l[2];break;case"A":return parseFloat(l[1])===0||parseFloat(l[2])===0?["L",l[6],l[7]]:["C"].concat(Mrt.apply(0,[h.x,h.y].concat(l.slice(1))));case"S":return u==="C"||u==="S"?(d=h.x*2-h.bx,c=h.y*2-h.by):(d=h.x,c=h.y),["C",d,c].concat(l.slice(1));case"T":return u==="Q"||u==="T"?(h.qx=h.x*2-h.qx,h.qy=h.y*2-h.qy):(h.qx=h.x,h.qy=h.y),["C"].concat(H9(h.x,h.y,h.qx,h.qy,l[1],l[2]));case"Q":return h.qx=l[1],h.qy=l[2],["C"].concat(H9(h.x,h.y,l[1],l[2],l[3],l[4]));case"H":return["L"].concat(l[1],h.y);case"V":return["L"].concat(h.x,l[1])}return l}function r(l,h){if(l[h].length>7){l[h].shift();const u=l[h];for(;u.length;)o[h]="A",h+=1,l.splice(h,0,["C"].concat(u.splice(0,6)));l.splice(h,1),s=t.length}}const o=[];let a="",s=t.length;for(let l=0;l<s;l+=1){let h="";t[l]&&(h=t[l][0]),h!=="C"&&(o[l]=h,l>0&&(a=o[l-1])),t[l]=i(t[l],e,a),o[l]!=="A"&&h==="C"&&(o[l]="C"),r(t,l);const u=t[l],d=u.length;e.x=u[d-2],e.y=u[d-1],e.bx=parseFloat(u[d-4])||e.x,e.by=parseFloat(u[d-3])||e.y}return(!t[0][0]||t[0][0]!=="M")&&t.unshift(["M",0,0]),t}function $Ot(n){return GOt(n).map(t=>t.map(e=>typeof e=="string"?e:Mi.round(e,2))).join(",").split(",").join(" ")}let De=class tr extends bd{constructor(t){if(super(),this.PRECISION=3,this.segments=[],Array.isArray(t))if(Ut.isLine(t[0])||Zo.isCurve(t[0])){let e=null;t.forEach((r,o)=>{o===0&&this.appendSegment(tr.createSegment("M",r.start)),e!=null&&!e.end.equals(r.start)&&this.appendSegment(tr.createSegment("M",r.start)),Ut.isLine(r)?this.appendSegment(tr.createSegment("L",r.end)):Zo.isCurve(r)&&this.appendSegment(tr.createSegment("C",r.controlPoint1,r.controlPoint2,r.end)),e=r})}else t.forEach(i=>{i.isSegment&&this.appendSegment(i)});else t!=null&&(Ut.isLine(t)?(this.appendSegment(tr.createSegment("M",t.start)),this.appendSegment(tr.createSegment("L",t.end))):Zo.isCurve(t)?(this.appendSegment(tr.createSegment("M",t.start)),this.appendSegment(tr.createSegment("C",t.controlPoint1,t.controlPoint2,t.end))):Rn.isPolyline(t)?t.points&&t.points.length&&t.points.forEach((e,i)=>{const r=i===0?tr.createSegment("M",e):tr.createSegment("L",e);this.appendSegment(r)}):t.isSegment&&this.appendSegment(t))}get start(){const t=this.segments,e=t.length;if(e===0)return null;for(let i=0;i<e;i+=1){const r=t[i];if(r.isVisible)return r.start}return t[e-1].end}get end(){const t=this.segments,e=t.length;if(e===0)return null;for(let i=e-1;i>=0;i-=1){const r=t[i];if(r.isVisible)return r.end}return t[e-1].end}moveTo(...t){return this.appendSegment(hv.create.call(null,...t))}lineTo(...t){return this.appendSegment(zr.create.call(null,...t))}curveTo(...t){return this.appendSegment(Sa.create.call(null,...t))}arcTo(t,e,i,r,o,a,s){const l=this.end||new Q,h=typeof a=="number"?uS(l.x,l.y,t,e,i,r,o,a,s):uS(l.x,l.y,t,e,i,r,o,a.x,a.y);if(h!=null)for(let u=0,d=h.length;u<d;u+=6)this.curveTo(h[u],h[u+1],h[u+2],h[u+3],h[u+4],h[u+5]);return this}quadTo(t,e,i,r){const o=this.end||new Q,a=["M",o.x,o.y];if(typeof t=="number")a.push("Q",t,e,i,r);else{const l=e;a.push("Q",t.x,t.y,l.x,l.y)}const s=tr.parse(a.join(" "));return this.appendSegment(s.segments.slice(1)),this}close(){return this.appendSegment(lv.create())}drawPoints(t,e={}){const i=Trt(t,e),r=tr.parse(i);r&&r.segments&&this.appendSegment(r.segments)}bbox(){const t=this.segments,e=t.length;if(e===0)return null;let i;for(let o=0;o<e;o+=1){const a=t[o];if(a.isVisible){const s=a.bbox();s!=null&&(i=i?i.union(s):s)}}if(i!=null)return i;const r=t[e-1];return new Tt(r.end.x,r.end.y,0,0)}appendSegment(t){const e=this.segments.length;let i=e!==0?this.segments[e-1]:null,r;const o=null;if(Array.isArray(t))for(let a=0,s=t.length;a<s;a+=1){const l=t[a];r=this.prepareSegment(l,i,o),this.segments.push(r),i=r}else t!=null&&t.isSegment&&(r=this.prepareSegment(t,i,o),this.segments.push(r));return this}insertSegment(t,e){const i=this.segments.length;if(t<0&&(t=i+t+1),t>i||t<0)throw new Error("Index out of range.");let r,o=null,a=null;if(i!==0&&(t>=1?(o=this.segments[t-1],a=o.nextSegment):(o=null,a=this.segments[0])),!Array.isArray(e))r=this.prepareSegment(e,o,a),this.segments.splice(t,0,r);else for(let s=0,l=e.length;s<l;s+=1){const h=e[s];r=this.prepareSegment(h,o,a),this.segments.splice(t+s,0,r),o=r}return this}removeSegment(t){const e=this.fixIndex(t),i=this.segments.splice(e,1)[0],r=i.previousSegment,o=i.nextSegment;return r&&(r.nextSegment=o),o&&(o.previousSegment=r),i.isSubpathStart&&o&&this.updateSubpathStartSegment(o),i}replaceSegment(t,e){const i=this.fixIndex(t);let r;const o=this.segments[i];let a=o.previousSegment;const s=o.nextSegment;let l=o.isSubpathStart;if(!Array.isArray(e))r=this.prepareSegment(e,a,s),this.segments.splice(i,1,r),l&&r.isSubpathStart&&(l=!1);else{this.segments.splice(t,1);for(let h=0,u=e.length;h<u;h+=1){const d=e[h];r=this.prepareSegment(d,a,s),this.segments.splice(t+h,0,r),a=r,l&&r.isSubpathStart&&(l=!1)}}l&&s&&this.updateSubpathStartSegment(s)}getSegment(t){const e=this.fixIndex(t);return this.segments[e]}fixIndex(t){const e=this.segments.length;if(e===0)throw new Error("Path has no segments.");let i=t;for(;i<0;)i=e+i;if(i>=e||i<0)throw new Error("Index out of range.");return i}segmentAt(t,e={}){const i=this.segmentIndexAt(t,e);return i?this.getSegment(i):null}segmentAtLength(t,e={}){const i=this.segmentIndexAtLength(t,e);return i?this.getSegment(i):null}segmentIndexAt(t,e={}){if(this.segments.length===0)return null;const i=Mi.clamp(t,0,1),r=this.getOptions(e),a=this.length(r)*i;return this.segmentIndexAtLength(a,r)}segmentIndexAtLength(t,e={}){const i=this.segments.length;if(i===0)return null;let r=!0;t<0&&(r=!1,t=-t);const o=this.getPrecision(e),a=this.getSubdivisions(e);let s=0,l=null;for(let h=0;h<i;h+=1){const u=r?h:i-1-h,d=this.segments[u],c=a[u],f=d.length({precision:o,subdivisions:c});if(d.isVisible){if(t<=s+f)return u;l=u}s+=f}return l}getSegmentSubdivisions(t={}){const e=this.getPrecision(t),i=[];for(let r=0,o=this.segments.length;r<o;r+=1){const s=this.segments[r].getSubdivisions({precision:e});i.push(s)}return i}updateSubpathStartSegment(t){let e=t.previousSegment,i=t;for(;i&&!i.isSubpathStart;)e!=null?i.subpathStartSegment=e.subpathStartSegment:i.subpathStartSegment=null,e=i,i=i.nextSegment}prepareSegment(t,e,i){t.previousSegment=e,t.nextSegment=i,e!=null&&(e.nextSegment=t),i!=null&&(i.previousSegment=t);let r=t;return t.isSubpathStart&&(t.subpathStartSegment=t,r=i),r!=null&&this.updateSubpathStartSegment(r),t}closestPoint(t,e={}){const i=this.closestPointT(t,e);return i?this.pointAtT(i):null}closestPointLength(t,e={}){const i=this.getOptions(e),r=this.closestPointT(t,i);return r?this.lengthAtT(r,i):0}closestPointNormalizedLength(t,e={}){const i=this.getOptions(e),r=this.closestPointLength(t,i);if(r===0)return 0;const o=this.length(i);return o===0?0:r/o}closestPointT(t,e={}){if(this.segments.length===0)return null;const i=this.getPrecision(e),r=this.getSubdivisions(e);let o,a=1/0;for(let s=0,l=this.segments.length;s<l;s+=1){const h=this.segments[s],u=r[s];if(h.isVisible){const d=h.closestPointT(t,{precision:i,subdivisions:u}),c=h.pointAtT(d),f=Mi.squaredLength(c,t);f<a&&(o={segmentIndex:s,value:d},a=f)}}return o||{segmentIndex:this.segments.length-1,value:1}}closestPointTangent(t,e={}){if(this.segments.length===0)return null;const i=this.getPrecision(e),r=this.getSubdivisions(e);let o,a=1/0;for(let s=0,l=this.segments.length;s<l;s+=1){const h=this.segments[s],u=r[s];if(h.isDifferentiable()){const d=h.closestPointT(t,{precision:i,subdivisions:u}),c=h.pointAtT(d),f=Mi.squaredLength(c,t);f<a&&(o=h.tangentAtT(d),a=f)}}return o||null}containsPoint(t,e={}){const i=this.toPolylines(e);if(!i)return!1;let r=0;for(let o=0,a=i.length;o<a;o+=1)i[o].containsPoint(t)&&(r+=1);return r%2===1}pointAt(t,e={}){if(this.segments.length===0)return null;if(t<=0)return this.start.clone();if(t>=1)return this.end.clone();const i=this.getOptions(e),o=this.length(i)*t;return this.pointAtLength(o,i)}pointAtLength(t,e={}){if(this.segments.length===0)return null;if(t===0)return this.start.clone();let i=!0;t<0&&(i=!1,t=-t);const r=this.getPrecision(e),o=this.getSubdivisions(e);let a,s=0;for(let h=0,u=this.segments.length;h<u;h+=1){const d=i?h:u-1-h,c=this.segments[d],f=o[d],g=c.length({precision:r,subdivisions:f});if(c.isVisible){if(t<=s+g)return c.pointAtLength((i?1:-1)*(t-s),{precision:r,subdivisions:f});a=c}s+=g}return a?i?a.end:a.start:this.segments[this.segments.length-1].end.clone()}pointAtT(t){const e=this.segments,i=e.length;if(i===0)return null;const r=t.segmentIndex;if(r<0)return e[0].pointAtT(0);if(r>=i)return e[i-1].pointAtT(1);const o=Mi.clamp(t.value,0,1);return e[r].pointAtT(o)}divideAt(t,e={}){if(this.segments.length===0)return null;const i=Mi.clamp(t,0,1),r=this.getOptions(e),a=this.length(r)*i;return this.divideAtLength(a,r)}divideAtLength(t,e={}){if(this.segments.length===0)return null;let i=!0;t<0&&(i=!1,t=-t);const r=this.getPrecision(e),o=this.getSubdivisions(e);let a=0,s,l,h,u,d;for(let w=0,C=this.segments.length;w<C;w+=1){const x=i?w:C-1-w,S=this.getSegment(x),A=o[x],T={precision:r,subdivisions:A},M=S.length(T);if(S.isDifferentiable()&&(h=S,u=x,t<=a+M)){l=x,s=S.divideAtLength((i?1:-1)*(t-a),T);break}a+=M}if(!h)return null;s||(l=u,d=i?1:0,s=h.divideAtT(d));const c=this.clone(),f=l;c.replaceSegment(f,s);const g=f;let p=f+1,v=f+2;s[0].isDifferentiable()||(c.removeSegment(g),p-=1,v-=1);const m=c.getSegment(p).start;c.insertSegment(p,tr.createSegment("M",m)),v+=1,s[1].isDifferentiable()||(c.removeSegment(v-1),v-=1);const y=v-g-1;for(let w=v,C=c.segments.length;w<C;w+=1){const x=this.getSegment(w-y),S=c.getSegment(w);if(S.type==="Z"&&!x.subpathStartSegment.end.equals(S.subpathStartSegment.end)){const A=tr.createSegment("L",x.end);c.replaceSegment(w,A)}}const b=new tr(c.segments.slice(0,p)),_=new tr(c.segments.slice(p));return[b,_]}intersectsWithLine(t,e={}){const i=this.toPolylines(e);if(i==null)return null;let r=null;for(let o=0,a=i.length;o<a;o+=1){const s=i[o],l=t.intersect(s);l&&(r==null&&(r=[]),Array.isArray(l)?r.push(...l):r.push(l))}return r}isDifferentiable(){for(let t=0,e=this.segments.length;t<e;t+=1)if(this.segments[t].isDifferentiable())return!0;return!1}isValid(){const t=this.segments;return t.length===0||t[0].type==="M"}length(t={}){if(this.segments.length===0)return 0;const e=this.getSubdivisions(t);let i=0;for(let r=0,o=this.segments.length;r<o;r+=1){const a=this.segments[r],s=e[r];i+=a.length({subdivisions:s})}return i}lengthAtT(t,e={}){const i=this.segments.length;if(i===0)return 0;let r=t.segmentIndex;if(r<0)return 0;let o=Mi.clamp(t.value,0,1);r>=i&&(r=i-1,o=1);const a=this.getPrecision(e),s=this.getSubdivisions(e);let l=0;for(let d=0;d<r;d+=1){const c=this.segments[d],f=s[d];l+=c.length({precision:a,subdivisions:f})}const h=this.segments[r],u=s[r];return l+=h.lengthAtT(o,{precision:a,subdivisions:u}),l}tangentAt(t,e={}){if(this.segments.length===0)return null;const i=Mi.clamp(t,0,1),r=this.getOptions(e),a=this.length(r)*i;return this.tangentAtLength(a,r)}tangentAtLength(t,e={}){if(this.segments.length===0)return null;let i=!0;t<0&&(i=!1,t=-t);const r=this.getPrecision(e),o=this.getSubdivisions(e);let a,s=0;for(let l=0,h=this.segments.length;l<h;l+=1){const u=i?l:h-1-l,d=this.segments[u],c=o[u],f=d.length({precision:r,subdivisions:c});if(d.isDifferentiable()){if(t<=s+f)return d.tangentAtLength((i?1:-1)*(t-s),{precision:r,subdivisions:c});a=d}s+=f}if(a){const l=i?1:0;return a.tangentAtT(l)}return null}tangentAtT(t){const e=this.segments.length;if(e===0)return null;const i=t.segmentIndex;if(i<0)return this.segments[0].tangentAtT(0);if(i>=e)return this.segments[e-1].tangentAtT(1);const r=Mi.clamp(t.value,0,1);return this.segments[i].tangentAtT(r)}getPrecision(t={}){return t.precision==null?this.PRECISION:t.precision}getSubdivisions(t={}){if(t.segmentSubdivisions==null){const e=this.getPrecision(t);return this.getSegmentSubdivisions({precision:e})}return t.segmentSubdivisions}getOptions(t={}){const e=this.getPrecision(t),i=this.getSubdivisions(t);return{precision:e,segmentSubdivisions:i}}toPoints(t={}){const e=this.segments,i=e.length;if(i===0)return null;const r=this.getSubdivisions(t),o=[];let a=[];for(let s=0;s<i;s+=1){const l=e[s];if(l.isVisible){const h=r[s];h.length>0?h.forEach(u=>a.push(u.start)):a.push(l.start)}else a.length>0&&(a.push(e[s-1].end),o.push(a),a=[])}return a.length>0&&(a.push(this.end),o.push(a)),o}toPolylines(t={}){const e=this.toPoints(t);return e?e.map(i=>new Rn(i)):null}scale(t,e,i){return this.segments.forEach(r=>r.scale(t,e,i)),this}rotate(t,e){return this.segments.forEach(i=>i.rotate(t,e)),this}translate(t,e){return typeof t=="number"?this.segments.forEach(i=>i.translate(t,e)):this.segments.forEach(i=>i.translate(t)),this}clone(){const t=new tr;return this.segments.forEach(e=>t.appendSegment(e.clone())),t}equals(t){if(t==null)return!1;const e=this.segments,i=t.segments,r=e.length;if(i.length!==r)return!1;for(let o=0;o<r;o+=1){const a=e[o],s=i[o];if(a.type!==s.type||!a.equals(s))return!1}return!0}toJSON(){return this.segments.map(t=>t.toJSON())}serialize(){if(!this.isValid())throw new Error("Invalid path segments.");return this.segments.map(t=>t.serialize()).join(" ")}toString(){return this.serialize()}};(function(n){function t(e){return e!=null&&e instanceof n}n.isPath=t})(De||(De={}));(function(n){function t(i){if(!i)return new n;const r=new n,o=/(?:[a-zA-Z] *)(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)? *,? *)|(?:-?\.\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\d|-|\.)/g,a=n.normalize(i).match(o);if(a!=null)for(let s=0,l=a.length;s<l;s+=1){const h=a[s],u=/(?:[a-zA-Z])|(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)?))|(?:(?:-?\.\d+))/g,d=h.match(u);if(d!=null){const c=d[0],f=d.slice(1).map(p=>+p),g=e.call(null,c,...f);r.appendSegment(g)}}return r}n.parse=t;function e(i,...r){if(i==="M")return hv.create.call(null,...r);if(i==="L")return zr.create.call(null,...r);if(i==="C")return Sa.create.call(null,...r);if(i==="z"||i==="Z")return lv.create();throw new Error(`Invalid path segment type "${i}"`)}n.createSegment=e})(De||(De={}));(function(n){n.normalize=$Ot,n.isValid=zOt,n.drawArc=NOt,n.drawPoints=Trt,n.arcToCurves=uS})(De||(De={}));class Dn{constructor(t){this.options=Object.assign({},t),this.data=this.options.data||{},this.register=this.register.bind(this),this.unregister=this.unregister.bind(this)}get names(){return Object.keys(this.data)}register(t,e,i=!1){if(typeof t=="object"){Object.entries(t).forEach(([a,s])=>{this.register(a,s,e)});return}this.exist(t)&&!i&&!sd.isApplyingHMR()&&this.onDuplicated(t);const r=this.options.process,o=r?de(r,this,t,e):e;return this.data[t]=o,o}unregister(t){const e=t?this.data[t]:null;return delete this.data[t],e}get(t){return t?this.data[t]:null}exist(t){return t?this.data[t]!=null:!1}onDuplicated(t){try{throw this.options.onConflict&&de(this.options.onConflict,this,t),new Error(`${RN(this.options.type)} with name '${t}' already registered.`)}catch(e){throw e}}onNotFound(t,e){throw new Error(this.getSpellingSuggestion(t,e))}getSpellingSuggestion(t,e){const i=this.getSpellingSuggestionForName(t),r=e?`${e} ${But(this.options.type)}`:this.options.type;return`${RN(r)} with name '${t}' does not exist.${i?` Did you mean '${i}'?`:""}`}getSpellingSuggestionForName(t){return GIt(t,Object.keys(this.data),e=>e)}}(function(n){function t(e){return new n(e)}n.create=t})(Dn||(Dn={}));const jOt={color:"#aaaaaa",thickness:1,markup:"rect",update(n,t){const e=t.thickness*t.sx,i=t.thickness*t.sy;Pi(n,{width:e,height:i,rx:e,ry:i,fill:t.color})}},UOt={color:"#aaaaaa",thickness:1,markup:"rect",update(n,t){const e=t.sx<=1?t.thickness*t.sx:t.thickness;Pi(n,{width:e,height:e,rx:e,ry:e,fill:t.color})}},YOt={color:"rgba(224,224,224,1)",thickness:1,markup:"path",update(n,t){let e;const i=t.width,r=t.height,o=t.thickness;i-o>=0&&r-o>=0?e=["M",i,0,"H0 M0 0 V0",r].join(" "):e="M 0 0 0 0",Pi(n,{d:e,stroke:t.color,"stroke-width":t.thickness})}},XOt=[{color:"rgba(224,224,224,1)",thickness:1,markup:"path",update(n,t){let e;const i=t.width,r=t.height,o=t.thickness;i-o>=0&&r-o>=0?e=["M",i,0,"H0 M0 0 V0",r].join(" "):e="M 0 0 0 0",Pi(n,{d:e,stroke:t.color,"stroke-width":t.thickness})}},{color:"rgba(224,224,224,0.2)",thickness:3,factor:4,markup:"path",update(n,t){let e;const i=t.factor||1,r=t.width*i,o=t.height*i,a=t.thickness;r-a>=0&&o-a>=0?e=["M",r,0,"H0 M0 0 V0",o].join(" "):e="M 0 0 0 0",t.width=r,t.height=o,Pi(n,{d:e,stroke:t.color,"stroke-width":t.thickness})}}],qOt=Object.freeze(Object.defineProperty({__proto__:null,dot:jOt,doubleMesh:XOt,fixedDot:UOt,mesh:YOt},Symbol.toStringTag,{value:"Module"}));let Hu=class{constructor(){this.patterns={},this.root=se.create(oS(),{width:"100%",height:"100%"},[Os("defs")]).node}add(t,e){const i=this.root.childNodes[0];i&&i.appendChild(e),this.patterns[t]=e,se.create("rect",{width:"100%",height:"100%",fill:`url(#${t})`}).appendTo(this.root)}get(t){return this.patterns[t]}has(t){return this.patterns[t]!=null}};(function(n){n.presets=qOt,n.registry=Dn.create({type:"grid"}),n.registry.register(n.presets,!0)})(Hu||(Hu={}));const Rrt=function(n){const t=document.createElement("canvas"),e=n.width,i=n.height;t.width=e*2,t.height=i;const r=t.getContext("2d");return r.drawImage(n,0,0,e,i),r.translate(2*e,0),r.scale(-1,1),r.drawImage(n,0,0,e,i),t},Prt=function(n){const t=document.createElement("canvas"),e=n.width,i=n.height;t.width=e,t.height=i*2;const r=t.getContext("2d");return r.drawImage(n,0,0,e,i),r.translate(0,2*i),r.scale(1,-1),r.drawImage(n,0,0,e,i),t},Brt=function(n){const t=document.createElement("canvas"),e=n.width,i=n.height;t.width=2*e,t.height=2*i;const r=t.getContext("2d");return r.drawImage(n,0,0,e,i),r.setTransform(-1,0,0,-1,t.width,t.height),r.drawImage(n,0,0,e,i),r.setTransform(-1,0,0,1,t.width,0),r.drawImage(n,0,0,e,i),r.setTransform(1,0,0,-1,0,t.height),r.drawImage(n,0,0,e,i),t},KOt=function(n,t){const e=n.width,i=n.height,r=document.createElement("canvas");r.width=e*3,r.height=i*3;const o=r.getContext("2d"),a=t.angle!=null?-t.angle:-20,s=Ri.toRad(a),l=r.width/4,h=r.height/4;for(let u=0;u<4;u+=1)for(let d=0;d<4;d+=1)(u+d)%2>0&&(o.setTransform(1,0,0,1,(2*u-1)*l,(2*d-1)*h),o.rotate(s),o.drawImage(n,-e/2,-i/2,e,i));return r},ZOt=Object.freeze(Object.defineProperty({__proto__:null,flipX:Rrt,flipXY:Brt,flipY:Prt,watermark:KOt},Symbol.toStringTag,{value:"Module"}));var pb;(function(n){n.presets=Object.assign({},ZOt),n.presets["flip-x"]=Rrt,n.presets["flip-y"]=Prt,n.presets["flip-xy"]=Brt,n.registry=Dn.create({type:"background pattern"}),n.registry.register(n.presets,!0)})(pb||(pb={}));function qF(n,t){return n??t}function or(n,t){return n!=null&&Number.isFinite(n)?n:t}function JOt(n={}){const t=qF(n.color,"blue"),e=or(n.width,1),i=or(n.margin,2),r=or(n.opacity,1),o=i,a=i+e;return`
    <filter>
      <feFlood flood-color="${t}" flood-opacity="${r}" result="colored"/>
      <feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="${a}" />
      <feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="${o}" />
      <feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/>
      <feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/>
      <feMerge>
        <feMergeNode in="outline"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
  `.trim()}function QOt(n={}){const t=qF(n.color,"red"),e=or(n.blur,0),i=or(n.width,1),r=or(n.opacity,1);return`
      <filter>
        <feFlood flood-color="${t}" flood-opacity="${r}" result="colored"/>
        <feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="${i}"/>
        <feComposite result="composed" in="colored" in2="morphed" operator="in"/>
        <feGaussianBlur result="blured" in="composed" stdDeviation="${e}"/>
        <feBlend in="SourceGraphic" in2="blured" mode="normal"/>
      </filter>
    `.trim()}function tHt(n={}){const t=or(n.x,2);return`
    <filter>
      <feGaussianBlur stdDeviation="${n.y!=null&&Number.isFinite(n.y)?[t,n.y]:t}"/>
    </filter>
  `.trim()}function eHt(n={}){const t=or(n.dx,0),e=or(n.dy,0),i=qF(n.color,"black"),r=or(n.blur,4),o=or(n.opacity,1);return"SVGFEDropShadowElement"in window?`<filter>
         <feDropShadow stdDeviation="${r}" dx="${t}" dy="${e}" flood-color="${i}" flood-opacity="${o}" />
       </filter>`.trim():`<filter>
         <feGaussianBlur in="SourceAlpha" stdDeviation="${r}" />
         <feOffset dx="${t}" dy="${e}" result="offsetblur" />
         <feFlood flood-color="${i}" />
         <feComposite in2="offsetblur" operator="in" />
         <feComponentTransfer>
           <feFuncA type="linear" slope="${o}" />
         </feComponentTransfer>
         <feMerge>
           <feMergeNode/>
           <feMergeNode in="SourceGraphic"/>
         </feMerge>
       </filter>`.trim()}function iHt(n={}){const t=or(n.amount,1),e=.2126+.7874*(1-t),i=.7152-.7152*(1-t),r=.0722-.0722*(1-t),o=.2126-.2126*(1-t),a=.7152+.2848*(1-t),s=.0722-.0722*(1-t),l=.2126-.2126*(1-t),h=.0722+.9278*(1-t);return`
    <filter>
      <feColorMatrix type="matrix" values="${e} ${i} ${r} 0 0 ${o} ${a} ${s} 0 0 ${l} ${i} ${h} 0 0 0 0 0 1 0"/>
    </filter>
  `.trim()}function nHt(n={}){const t=or(n.amount,1),e=.393+.607*(1-t),i=.769-.769*(1-t),r=.189-.189*(1-t),o=.349-.349*(1-t),a=.686+.314*(1-t),s=.168-.168*(1-t),l=.272-.272*(1-t),h=.534-.534*(1-t),u=.131+.869*(1-t);return`
      <filter>
        <feColorMatrix type="matrix" values="${e} ${i} ${r} 0 0 ${o} ${a} ${s} 0 0 ${l} ${h} ${u} 0 0 0 0 0 1 0"/>
      </filter>
    `.trim()}function rHt(n={}){return`
      <filter>
        <feColorMatrix type="saturate" values="${1-or(n.amount,1)}"/>
      </filter>
    `.trim()}function oHt(n={}){return`
      <filter>
        <feColorMatrix type="hueRotate" values="${or(n.angle,0)}"/>
      </filter>
    `.trim()}function aHt(n={}){const t=or(n.amount,1),e=1-t;return`
      <filter>
        <feComponentTransfer>
          <feFuncR type="table" tableValues="${t} ${e}"/>
          <feFuncG type="table" tableValues="${t} ${e}"/>
          <feFuncB type="table" tableValues="${t} ${e}"/>
        </feComponentTransfer>
      </filter>
    `.trim()}function sHt(n={}){const t=or(n.amount,1);return`
    <filter>
      <feComponentTransfer>
        <feFuncR type="linear" slope="${t}"/>
        <feFuncG type="linear" slope="${t}"/>
        <feFuncB type="linear" slope="${t}"/>
      </feComponentTransfer>
    </filter>
  `.trim()}function lHt(n={}){const t=or(n.amount,1),e=.5-t/2;return`
    <filter>
     <feComponentTransfer>
        <feFuncR type="linear" slope="${t}" intercept="${e}"/>
        <feFuncG type="linear" slope="${t}" intercept="${e}"/>
        <feFuncB type="linear" slope="${t}" intercept="${e}"/>
      </feComponentTransfer>
    </filter>
  `.trim()}const hHt=Object.freeze(Object.defineProperty({__proto__:null,blur:tHt,brightness:sHt,contrast:lHt,dropShadow:eHt,grayScale:iHt,highlight:QOt,hueRotate:oHt,invert:aHt,outline:JOt,saturate:rHt,sepia:nHt},Symbol.toStringTag,{value:"Module"}));var uv;(function(n){n.presets=hHt,n.registry=Dn.create({type:"filter"}),n.registry.register(n.presets,!0)})(uv||(uv={}));const uHt={xlinkHref:"xlink:href",xlinkShow:"xlink:show",xlinkRole:"xlink:role",xlinkType:"xlink:type",xlinkArcrole:"xlink:arcrole",xlinkTitle:"xlink:title",xlinkActuate:"xlink:actuate",xmlSpace:"xml:space",xmlBase:"xml:base",xmlLang:"xml:lang",preserveAspectRatio:"preserveAspectRatio",requiredExtension:"requiredExtension",requiredFeatures:"requiredFeatures",systemLanguage:"systemLanguage",externalResourcesRequired:"externalResourceRequired"},dHt={},krt={position:EM("x","width","origin")},Lrt={position:EM("y","height","origin")},cHt={position:EM("x","width","corner")},fHt={position:EM("y","height","corner")},Ert={set:hd("width","width")},Drt={set:hd("height","height")},gHt={set:hd("rx","width")},pHt={set:hd("ry","height")},Irt={set:(n=>{const t=hd(n,"width"),e=hd(n,"height");return function(i,r){const o=r.refBBox,a=o.height>o.width?t:e;return de(a,this,i,r)}})("r")},vHt={set(n,{refBBox:t}){let e=parseFloat(n);const i=Nh(n);i&&(e/=100);const r=Math.sqrt(t.height*t.height+t.width*t.width);let o;return Number.isFinite(e)&&(i||e>=0&&e<=1?o=e*r:o=Math.max(e+r,0)),{r:o}}},mHt={set:hd("cx","width")},yHt={set:hd("cy","height")},Ort={set:Frt({resetOffset:!0})},bHt={set:Frt({resetOffset:!1})},Hrt={set:Nrt({resetOffset:!0})},_Ht={set:Nrt({resetOffset:!1})},CHt=Irt,wHt=Ort,xHt=Hrt,SHt=krt,AHt=Lrt,THt=Ert,MHt=Drt;function EM(n,t,e){return(i,{refBBox:r})=>{if(i==null)return null;let o=parseFloat(i);const a=Nh(i);a&&(o/=100);let s;if(Number.isFinite(o)){const h=r[e];a||o>0&&o<1?s=h[n]+r[t]*o:s=h[n]+o}const l=new Q;return l[n]=s||0,l}}function hd(n,t){return function(e,{refBBox:i}){let r=parseFloat(e);const o=Nh(e);o&&(r/=100);const a={};if(Number.isFinite(r)){const s=o||r>=0&&r<=1?r*i[t]:Math.max(r+i[t],0);a[n]=s}return a}}function zrt(n,t){const e="x6-shape",i=t&&t.resetOffset;return function(r,{elem:o,refBBox:a}){let s=Df(o,e);if(!s||s.value!==r){const p=n(r);s={value:r,shape:p,shapeBBox:p.bbox()},Df(o,e,s)}const l=s.shape.clone(),h=s.shapeBBox.clone(),u=h.getOrigin(),d=a.getOrigin();h.x=d.x,h.y=d.y;const c=a.getMaxScaleToFit(h,d),f=h.width===0||a.width===0?1:c.sx,g=h.height===0||a.height===0?1:c.sy;return l.scale(f,g,u),i&&l.translate(-u.x,-u.y),l}}function Frt(n){function t(i){return De.parse(i)}const e=zrt(t,n);return(i,r)=>({d:e(i,r).serialize()})}function Nrt(n){const t=zrt(e=>new Rn(e),n);return(e,i)=>({points:t(e,i).serialize()})}const RHt={qualify:Uh,set(n,{view:t}){return`url(#${t.graph.defineGradient(n)})`}},PHt={qualify:Uh,set(n,{view:t}){const e=t.cell,i=Object.assign({},n);if(e.isEdge()&&i.type==="linearGradient"){const r=t,o=r.sourcePoint,a=r.targetPoint;i.id=`gradient-${i.type}-${e.id}`,i.attrs=Object.assign(Object.assign({},i.attrs),{x1:o.x,y1:o.y,x2:a.x,y2:a.y,gradientUnits:"userSpaceOnUse"}),t.graph.defs.remove(i.id)}return`url(#${t.graph.defineGradient(i)})`}},Wrt={qualify(n,{attrs:t}){return t.textWrap==null||!Uh(t.textWrap)},set(n,{view:t,elem:e,attrs:i}){const r="x6-text",o=Df(e,r),a=u=>{try{return JSON.parse(u)}catch{return u}},s={x:i.x,eol:i.eol,annotations:a(i.annotations),textPath:a(i["text-path"]||i.textPath),textVerticalAnchor:i["text-vertical-anchor"]||i.textVerticalAnchor,displayEmpty:(i["display-empty"]||i.displayEmpty)==="true",lineHeight:i["line-height"]||i.lineHeight},l=i["font-size"]||i.fontSize,h=JSON.stringify([n,s]);if(l&&e.setAttribute("font-size",l),o==null||o!==h){const u=s.textPath;if(u!=null&&typeof u=="object"){const d=u.selector;if(typeof d=="string"){const c=t.find(d)[0];c instanceof SVGPathElement&&($F(c),s.textPath=Object.assign({"xlink:href":`#${c.id}`},u))}}yrt(e,`${n}`,s),Df(e,r,h)}}},BHt={qualify:Uh,set(n,{view:t,elem:e,attrs:i,refBBox:r}){const o=n,a=o.width||0;Nh(a)?r.width*=parseFloat(a)/100:a<=0?r.width+=a:r.width=a;const s=o.height||0;Nh(s)?r.height*=parseFloat(s)/100:s<=0?r.height+=s:r.height=s;let l,h=o.text;h==null&&(h=i.text||e?.textContent),h!=null?l=brt(`${h}`,r,{"font-weight":i["font-weight"]||i.fontWeight,"font-size":i["font-size"]||i.fontSize,"font-family":i["font-family"]||i.fontFamily,lineHeight:i.lineHeight},{ellipsis:o.ellipsis}):l="",de(Wrt.set,this,l,{view:t,elem:e,attrs:i,refBBox:r,cell:t.cell})}},Qv=(n,{attrs:t})=>t.text!==void 0,kHt={qualify:Qv},LHt={qualify:Qv},EHt={qualify:Qv},DHt={qualify:Qv},IHt={qualify:Qv},OHt={qualify:Qv},HHt={qualify(n,{elem:t}){return t instanceof SVGElement},set(n,{elem:t}){const e="x6-title",i=`${n}`,r=Df(t,e);if(r==null||r!==i){Df(t,e,i);const o=t.firstChild;if(o&&o.tagName.toUpperCase()==="TITLE"){const a=o;a.textContent=i}else{const a=document.createElementNS(t.namespaceURI,"title");a.textContent=i,t.insertBefore(a,o)}}}},zHt={offset:Vrt("x","width","right")},FHt={offset:Vrt("y","height","bottom")},NHt={offset(n,{refBBox:t}){return n?{x:-t.x,y:-t.y}:{x:0,y:0}}};function Vrt(n,t,e){return(i,{refBBox:r})=>{const o=new Q;let a;return i==="middle"?a=r[t]/2:i===e?a=r[t]:typeof i=="number"&&Number.isFinite(i)?a=i>-1&&i<1?-r[t]*i:-i:Nh(i)?a=r[t]*parseFloat(i)/100:a=0,o[n]=-(r[n]+a),o}}const WHt={qualify:Uh,set(n,{elem:t}){T_(t,n)}},VHt={set(n,{elem:t}){t.innerHTML=`${n}`}},GHt={qualify:Uh,set(n,{view:t}){return`url(#${t.graph.defineFilter(n)})`}},$Ht={set(n){return n!=null&&typeof n=="object"&&n.id?n.id:n}};function _d(n,t,e){let i,r;typeof t=="object"?(i=t.x,r=t.y):(i=t,r=e);const o=De.parse(n),a=o.bbox();if(a){let s=-a.height/2-a.y,l=-a.width/2-a.x;typeof i=="number"&&(l-=i),typeof r=="number"&&(s-=r),o.translate(l,s)}return o.serialize()}var Grt=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e};const jHt=n=>{var{size:t,width:e,height:i,offset:r,open:o}=n,a=Grt(n,["size","width","height","offset","open"]);return $rt({size:t,width:e,height:i,offset:r},o===!0,!0,void 0,a)},UHt=n=>{var{size:t,width:e,height:i,offset:r,factor:o}=n,a=Grt(n,["size","width","height","offset","factor"]);return $rt({size:t,width:e,height:i,offset:r},!1,!1,o,a)};function $rt(n,t,e,i=3/4,r={}){const o=n.size||10,a=n.width||o,s=n.height||o,l=new De,h={};if(t)l.moveTo(a,0).lineTo(0,s/2).lineTo(a,s),h.fill="none";else{if(l.moveTo(0,s/2),l.lineTo(a,0),!e){const u=Oa(i,0,1);l.lineTo(a*u,s/2)}l.lineTo(a,s),l.close()}return Object.assign(Object.assign(Object.assign({},h),r),{tagName:"path",d:_d(l.serialize(),{x:n.offset!=null?n.offset:-a/2})})}var YHt=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e};const XHt=n=>{var{size:t,width:e,height:i,offset:r}=n,o=YHt(n,["size","width","height","offset"]);const a=t||10,s=e||a,l=i||a,h=new De;return h.moveTo(0,l/2).lineTo(s/2,0).lineTo(s,l/2).lineTo(s/2,l).close(),Object.assign(Object.assign({},o),{tagName:"path",d:_d(h.serialize(),r??-s/2)})};var qHt=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e};const KHt=n=>{var{d:t,offsetX:e,offsetY:i}=n,r=qHt(n,["d","offsetX","offsetY"]);return Object.assign(Object.assign({},r),{tagName:"path",d:_d(t,e,i)})};var ZHt=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e};const JHt=n=>{var{size:t,width:e,height:i,offset:r}=n,o=ZHt(n,["size","width","height","offset"]);const a=t||10,s=e||a,l=i||a,h=new De;return h.moveTo(0,0).lineTo(s,l).moveTo(0,l).lineTo(s,0),Object.assign(Object.assign({},o),{tagName:"path",fill:"none",d:_d(h.serialize(),r||-s/2)})};var QHt=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e};const tzt=n=>{var{width:t,height:e,offset:i,open:r,flip:o}=n,a=QHt(n,["width","height","offset","open","flip"]);let s=e||6;const l=t||10,h=r===!0,u=o===!0,d=Object.assign(Object.assign({},a),{tagName:"path"});u&&(s=-s);const c=new De;return c.moveTo(0,s).lineTo(l,0),h?d.fill="none":(c.lineTo(l,s),c.close()),d.d=_d(c.serialize(),{x:i||-l/2,y:s/2}),d};var jrt=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e};const Urt=n=>{var{r:t}=n,e=jrt(n,["r"]);const i=t||5;return Object.assign(Object.assign({cx:i},e),{tagName:"circle",r:i})},ezt=n=>{var{r:t}=n,e=jrt(n,["r"]);const i=t||5,r=new De;return r.moveTo(i,0).lineTo(i,i*2),r.moveTo(0,i).lineTo(i*2,i),{children:[Object.assign(Object.assign({},Urt({r:i})),{fill:"none"}),Object.assign(Object.assign({},e),{tagName:"path",d:_d(r.serialize(),-i)})]}};var izt=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e};const nzt=n=>{var{rx:t,ry:e}=n,i=izt(n,["rx","ry"]);const r=t||5,o=e||5;return Object.assign(Object.assign({cx:r},i),{tagName:"ellipse",rx:r,ry:o})},rzt=Object.freeze(Object.defineProperty({__proto__:null,async:tzt,block:jHt,circle:Urt,circlePlus:ezt,classic:UHt,cross:JHt,diamond:XHt,ellipse:nzt,path:KHt},Symbol.toStringTag,{value:"Module"}));var ud;(function(n){n.presets=rzt,n.registry=Dn.create({type:"marker"}),n.registry.register(n.presets,!0)})(ud||(ud={}));(function(n){n.normalize=_d})(ud||(ud={}));var ozt=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e};function KF(n){return typeof n=="string"||Uh(n)}const azt={qualify:KF,set(n,{view:t,attrs:e}){return ZF("marker-start",n,t,e)}},szt={qualify:KF,set(n,{view:t,attrs:e}){return ZF("marker-end",n,t,e,{transform:"rotate(180)"})}},lzt={qualify:KF,set(n,{view:t,attrs:e}){return ZF("marker-mid",n,t,e)}};function ZF(n,t,e,i,r={}){const o=typeof t=="string"?{name:t}:t,{name:a,args:s}=o,l=ozt(o,["name","args"]);let h=l;if(a&&typeof a=="string"){const d=ud.registry.get(a);if(d)h=d(Object.assign(Object.assign({},l),s));else return ud.registry.onNotFound(a)}const u=Object.assign(Object.assign(Object.assign({},hzt(i,n)),r),h);return{[n]:`url(#${e.graph.defineMarker(u)})`}}function hzt(n,t){const e={},i=n.stroke;typeof i=="string"&&(e.stroke=i,e.fill=i);let r=n.strokeOpacity;if(r==null&&(r=n["stroke-opacity"]),r==null&&(r=n.opacity),r!=null&&(e["stroke-opacity"]=r,e["fill-opacity"]=r),t!=="marker-mid"){const o=parseFloat(n.strokeWidth||n["stroke-width"]);if(Number.isFinite(o)&&o>1){const a=Math.ceil(o/2);e.refX=t==="marker-start"?a:-a}}return e}const M_=(n,{view:t})=>t.cell.isEdge(),uzt={qualify:M_,set(n,t){var e,i,r,o;const a=t.view,s=n.reverse||!1,l=n.stubs||0;let h;if(Number.isFinite(l)&&l!==0)if(s){let u,d;const c=a.getConnectionLength()||0;l<0?(u=(c+l)/2,d=-l):(u=l,d=c-l*2);const f=a.getConnection();h=(o=(r=(i=(e=f?.divideAtLength(u))===null||e===void 0?void 0:e[1])===null||i===void 0?void 0:i.divideAtLength(d))===null||r===void 0?void 0:r[0])===null||o===void 0?void 0:o.serialize()}else{let u;l<0?u=((a.getConnectionLength()||0)+l)/2:u=l;const d=a.getConnection();if(d){const c=d.divideAtLength(u),f=d.divideAtLength(-u);c&&f&&(h=`${c[0].serialize()} ${f[1].serialize()}`)}}return{d:h||a.getConnectionPathData()}}},Yrt={qualify:M_,set:DM("getTangentAtLength",{rotate:!0})},dzt={qualify:M_,set:DM("getTangentAtLength",{rotate:!1})},Xrt={qualify:M_,set:DM("getTangentAtRatio",{rotate:!0})},czt={qualify:M_,set:DM("getTangentAtRatio",{rotate:!1})},fzt=Yrt,gzt=Xrt;function DM(n,t){const e={x:1,y:0};return(i,r)=>{let o,a;const s=r.view,l=s[n](Number(i));return l?(a=t.rotate?l.vector().vectorAngle(e):0,o=l.start):(o=s.path.start,a=0),a===0?{transform:`translate(${o.x},${o.y}')`}:{transform:`translate(${o.x},${o.y}') rotate(${a})`}}}const pzt=Object.freeze(Object.defineProperty({__proto__:null,annotations:DHt,atConnectionLength:fzt,atConnectionLengthIgnoreGradient:dzt,atConnectionLengthKeepGradient:Yrt,atConnectionRatio:gzt,atConnectionRatioIgnoreGradient:czt,atConnectionRatioKeepGradient:Xrt,connection:uzt,displayEmpty:OHt,eol:IHt,fill:RHt,filter:GHt,html:VHt,lineHeight:kHt,port:$Ht,ref:dHt,refCx:mHt,refCy:yHt,refD:wHt,refDKeepOffset:bHt,refDResetOffset:Ort,refDx:cHt,refDy:fHt,refHeight:Drt,refHeight2:MHt,refPoints:xHt,refPointsKeepOffset:_Ht,refPointsResetOffset:Hrt,refR:CHt,refRCircumscribed:vHt,refRInscribed:Irt,refRx:gHt,refRy:pHt,refWidth:Ert,refWidth2:THt,refX:krt,refX2:SHt,refY:Lrt,refY2:AHt,resetOffset:NHt,sourceMarker:azt,stroke:PHt,style:WHt,targetMarker:szt,text:Wrt,textPath:EHt,textVerticalAnchor:LHt,textWrap:BHt,title:HHt,vertexMarker:lzt,xAlign:zHt,yAlign:FHt},Symbol.toStringTag,{value:"Module"}));var Ml;(function(n){function t(e,i,r){return!!(e!=null&&(typeof e=="string"||typeof e.qualify!="function"||de(e.qualify,this,i,r)))}n.isValidDefinition=t})(Ml||(Ml={}));(function(n){n.presets=Object.assign(Object.assign({},uHt),pzt),n.registry=Dn.create({type:"attribute definition"}),n.registry.register(n.presets,!0)})(Ml||(Ml={}));const Ms={prefixCls:"x6",autoInsertCSS:!0,useCSSSelector:!0,prefix(n){return`${Ms.prefixCls}-${n}`}},z9=Ms.prefix("highlighted"),vzt={highlight(n,t,e){const i=e&&e.className||z9;ri(t,i)},unhighlight(n,t,e){const i=e&&e.className||z9;za(t,i)}},F9=Ms.prefix("highlight-opacity"),mzt={highlight(n,t){ri(t,F9)},unhighlight(n,t){za(t,F9)}};var bi;(function(n){n.normalizeMarker=_d;function t(c,f){const g=SOt(c.x,c.y).matrixTransform(f);return new Q(g.x,g.y)}n.transformPoint=t;function e(c,f){return new Ut(t(c.start,f),t(c.end,f))}n.transformLine=e;function i(c,f){let g=c instanceof Rn?c.points:c;return Array.isArray(g)||(g=[]),new Rn(g.map(p=>t(p,f)))}n.transformPolyline=i;function r(c,f){const p=Os("svg").createSVGPoint();p.x=c.x,p.y=c.y;const v=p.matrixTransform(f);p.x=c.x+c.width,p.y=c.y;const m=p.matrixTransform(f);p.x=c.x+c.width,p.y=c.y+c.height;const y=p.matrixTransform(f);p.x=c.x,p.y=c.y+c.height;const b=p.matrixTransform(f),_=Math.min(v.x,m.x,y.x,b.x),w=Math.max(v.x,m.x,y.x,b.x),C=Math.min(v.y,m.y,y.y,b.y),x=Math.max(v.y,m.y,y.y,b.y);return new Tt(_,C,w-_,x-C)}n.transformRectangle=r;function o(c,f,g){let p;const v=c.ownerSVGElement;if(!v)return new Tt(0,0,0,0);try{p=c.getBBox()}catch{p={x:c.clientLeft,y:c.clientTop,width:c.clientWidth,height:c.clientHeight}}if(f)return Tt.create(p);const m=sy(c,g||v);return r(p,m)}n.bbox=o;function a(c,f={}){let g;if(!c.ownerSVGElement||!ld(c)){if(P9(c)){const{left:y,top:b,width:_,height:w}=s(c);return new Tt(y,b,_,w)}return new Tt(0,0,0,0)}let v=f.target;if(!f.recursive){try{g=c.getBBox()}catch{g={x:c.clientLeft,y:c.clientTop,width:c.clientWidth,height:c.clientHeight}}if(!v)return Tt.create(g);const y=sy(c,v);return r(g,y)}{const y=c.childNodes,b=y.length;if(b===0)return a(c,{target:v});v||(v=c);for(let _=0;_<b;_+=1){const w=y[_];let C;w.childNodes.length===0?C=a(w,{target:v}):C=a(w,{target:v,recursive:!0}),g?g=g.union(C):g=C}return g}}n.getBBox=a;function s(c){let f=0,g=0,p=0,v=0;if(c){let m=c;for(;m;)f+=m.offsetLeft,g+=m.offsetTop,m=m.offsetParent,m&&(f+=parseInt(E9(m,"borderLeft"),10),g+=parseInt(E9(m,"borderTop"),10));p=c.offsetWidth,v=c.offsetHeight}return{left:f,top:g,width:p,height:v}}n.getBoundingOffsetRect=s;function l(c){const f=g=>{const p=c.getAttribute(g),v=p?parseFloat(p):0;return Number.isNaN(v)?0:v};switch(c instanceof SVGElement&&c.nodeName.toLowerCase()){case"rect":return new Tt(f("x"),f("y"),f("width"),f("height"));case"circle":return new Ts(f("cx"),f("cy"),f("r"),f("r"));case"ellipse":return new Ts(f("cx"),f("cy"),f("rx"),f("ry"));case"polyline":{const g=sS(c);return new Rn(g)}case"polygon":{const g=sS(c);return g.length>1&&g.push(g[0]),new Rn(g)}case"path":{let g=c.getAttribute("d");return De.isValid(g)||(g=De.normalize(g)),De.parse(g)}case"line":return new Ut(f("x1"),f("y1"),f("x2"),f("y2"))}return a(c)}n.toGeometryShape=l;function h(c,f,g,p){const v=Q.create(f),m=Q.create(g);p||(p=c instanceof SVGSVGElement?c:c.ownerSVGElement);const y=hI(c);c.setAttribute("transform","");const b=a(c,{target:p}).scale(y.sx,y.sy),_=M0();_.setTranslate(-b.x-b.width/2,-b.y-b.height/2);const w=M0(),C=v.angleBetween(m,v.clone().translate(1,0));C&&w.setRotate(C,0,0);const x=M0(),S=v.clone().move(m,b.width/2);x.setTranslate(2*v.x-S.x,2*v.y-S.y);const A=sy(c,p),T=M0();T.setMatrix(x.matrix.multiply(w.matrix.multiply(_.matrix.multiply(A.scale(y.sx,y.sy))))),c.setAttribute("transform",Jv(T.matrix))}n.translateAndAutoOrient=h;function u(c){if(c==null)return null;let f=c;do{let g=f.tagName;if(typeof g!="string")return null;if(g=g.toUpperCase(),x_(f,"x6-port"))f=f.nextElementSibling;else if(g==="G")f=f.firstElementChild;else if(g==="TITLE")f=f.nextElementSibling;else break}while(f);return f}n.findShapeNode=u;function d(c){const f=u(c);if(!ld(f)){if(P9(c)){const{left:v,top:m,width:y,height:b}=s(c);return new Tt(v,m,y,b)}return new Tt(0,0,0,0)}return l(f).bbox()||Tt.create()}n.getBBoxV2=d})(bi||(bi={}));const yzt={padding:3,rx:0,ry:0,attrs:{"stroke-width":3,stroke:"#FEB663"}},bzt={highlight(n,t,e){const i=Cu.getHighlighterId(t,e);if(Cu.hasCache(i))return;e=tK({},e,yzt);const r=se.create(t);let o,a;try{o=r.toPathData()}catch{a=bi.bbox(r.node,!0),o=Crt(Object.assign(Object.assign({},e),a))}const s=Os("path");if(Pi(s,Object.assign({d:o,"pointer-events":"none","vector-effect":"non-scaling-stroke",fill:"none"},e.attrs?db(e.attrs):null)),n.isEdgeElement(t))Pi(s,"d",n.getConnectionPathData());else{let u=r.getTransformToElement(n.container);const d=e.padding;if(d){a==null&&(a=bi.bbox(r.node,!0));const c=a.x+a.width/2,f=a.y+a.height/2;a=bi.transformRectangle(a,u);const g=Math.max(a.width,1),p=Math.max(a.height,1),v=(g+d)/g,m=(p+d)/p,y=lr({a:v,b:0,c:0,d:m,e:c-v*c,f:f-m*f});u=u.multiply(y)}av(s,u)}ri(s,Ms.prefix("highlight-stroke"));const l=n.cell,h=()=>Cu.removeHighlighter(i);l.on("removed",h),l.model&&l.model.on("reseted",h),n.container.appendChild(s),Cu.setCache(i,s)},unhighlight(n,t,e){Cu.removeHighlighter(Cu.getHighlighterId(t,e))}};var Cu;(function(n){function t(a,s){return $F(a),a.id+JSON.stringify(s)}n.getHighlighterId=t;const e={};function i(a,s){e[a]=s}n.setCache=i;function r(a){return e[a]!=null}n.hasCache=r;function o(a){const s=e[a];s&&(ov(s),delete e[a])}n.removeHighlighter=o})(Cu||(Cu={}));const _zt=Object.freeze(Object.defineProperty({__proto__:null,className:vzt,opacity:mzt,stroke:bzt},Symbol.toStringTag,{value:"Module"}));var Ah;(function(n){function t(e,i){if(typeof i.highlight!="function")throw new Error(`Highlighter '${e}' is missing required \`highlight()\` method`);if(typeof i.unhighlight!="function")throw new Error(`Highlighter '${e}' is missing required \`unhighlight()\` method`)}n.check=t})(Ah||(Ah={}));(function(n){n.presets=_zt,n.registry=Dn.create({type:"highlighter"}),n.registry.register(n.presets,!0)})(Ah||(Ah={}));function cI(n,t={}){return new Q(_s(t.x,n.width),_s(t.y,n.height))}function JF(n,t,e){return Object.assign({angle:t,position:n.toJSON()},e)}const Czt=(n,t)=>n.map(({x:e,y:i,angle:r})=>JF(cI(t,{x:e,y:i}),r||0)),wzt=(n,t,e)=>{const i=e.start||0,r=e.step||20;return qrt(n,t,i,(o,a)=>(o+.5-a/2)*r)},xzt=(n,t,e)=>{const i=e.start||0,r=e.step||360/n.length;return qrt(n,t,i,o=>o*r)};function qrt(n,t,e,i){const r=t.getCenter(),o=t.getTopCenter(),a=t.width/t.height,s=Ts.fromRect(t),l=n.length;return n.map((h,u)=>{const d=e+i(u,l),c=o.clone().rotate(-d,r).scale(a,1,r),f=h.compensateRotate?-s.tangentTheta(c):0;return(h.dx||h.dy)&&c.translate(h.dx||0,h.dy||0),h.dr&&c.move(r,h.dr),JF(c.round(),f,h)})}var Szt=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e};const Azt=(n,t,e)=>{const i=cI(t,e.start||t.getOrigin()),r=cI(t,e.end||t.getCorner());return R_(n,i,r,e)},Tzt=(n,t,e)=>R_(n,t.getTopLeft(),t.getBottomLeft(),e),Mzt=(n,t,e)=>R_(n,t.getTopRight(),t.getBottomRight(),e),Rzt=(n,t,e)=>R_(n,t.getTopLeft(),t.getTopRight(),e),Pzt=(n,t,e)=>R_(n,t.getBottomLeft(),t.getBottomRight(),e);function R_(n,t,e,i){const r=new Ut(t,e),o=n.length;return n.map((a,s)=>{var{strict:l}=a,h=Szt(a,["strict"]);const u=l||i.strict?(s+1)/(o+1):(s+.5)/o,d=r.pointAt(u);return(h.dx||h.dy)&&d.translate(h.dx||0,h.dy||0),JF(d.round(),0,h)})}const Bzt=Object.freeze(Object.defineProperty({__proto__:null,absolute:Czt,bottom:Pzt,ellipse:wzt,ellipseSpread:xzt,left:Tzt,line:Azt,right:Mzt,top:Rzt},Symbol.toStringTag,{value:"Module"}));var ff;(function(n){n.presets=Bzt,n.registry=Dn.create({type:"port layout"}),n.registry.register(n.presets,!0)})(ff||(ff={}));const kzt={position:{x:0,y:0},angle:0,attrs:{".":{y:"0","text-anchor":"start"}}};function Cd(n,t){const{x:e,y:i,angle:r,attrs:o}=t||{};return tK({},{angle:r,attrs:o,position:{x:e,y:i}},n,kzt)}const Lzt=(n,t,e)=>Cd({position:t.getTopLeft()},e),Ezt=(n,t,e)=>Cd({position:{x:-15,y:0},attrs:{".":{y:".3em","text-anchor":"end"}}},e),Dzt=(n,t,e)=>Cd({position:{x:15,y:0},attrs:{".":{y:".3em","text-anchor":"start"}}},e),Izt=(n,t,e)=>Cd({position:{x:0,y:-15},attrs:{".":{"text-anchor":"middle"}}},e),Ozt=(n,t,e)=>Cd({position:{x:0,y:15},attrs:{".":{y:".6em","text-anchor":"middle"}}},e),Hzt=(n,t,e)=>Krt(n,t,!1,e),zzt=(n,t,e)=>Krt(n,t,!0,e),Fzt=(n,t,e)=>Zrt(n,t,!1,e),Nzt=(n,t,e)=>Zrt(n,t,!0,e);function Krt(n,t,e,i){const r=i.offset!=null?i.offset:15,o=t.getCenter().theta(n),a=Jrt(t);let s,l,h,u,d=0;return o<a[1]||o>a[2]?(s=".3em",l=r,h=0,u="start"):o<a[0]?(s="0",l=0,h=-r,e?(d=-90,u="start"):u="middle"):o<a[3]?(s=".3em",l=-r,h=0,u="end"):(s=".6em",l=0,h=r,e?(d=90,u="start"):u="middle"),Cd({position:{x:Math.round(l),y:Math.round(h)},angle:d,attrs:{".":{y:s,"text-anchor":u}}},i)}function Zrt(n,t,e,i){const r=i.offset!=null?i.offset:15,o=t.getCenter().theta(n),a=Jrt(t);let s,l,h,u,d=0;return o<a[1]||o>a[2]?(s=".3em",l=-r,h=0,u="end"):o<a[0]?(s=".6em",l=0,h=r,e?(d=90,u="start"):u="middle"):o<a[3]?(s=".3em",l=r,h=0,u="start"):(s="0em",l=0,h=-r,e?(d=-90,u="start"):u="middle"),Cd({position:{x:Math.round(l),y:Math.round(h)},angle:d,attrs:{".":{y:s,"text-anchor":u}}},i)}function Jrt(n){const t=n.getCenter(),e=t.theta(n.getTopLeft()),i=t.theta(n.getBottomLeft()),r=t.theta(n.getBottomRight()),o=t.theta(n.getTopRight());return[e,o,r,i]}const Wzt=(n,t,e)=>Qrt(n.diff(t.getCenter()),!1,e),Vzt=(n,t,e)=>Qrt(n.diff(t.getCenter()),!0,e);function Qrt(n,t,e){const i=e.offset!=null?e.offset:20,r=new Q(0,0),o=-n.theta(r),a=n.clone().move(r,i).diff(n).round();let s=".3em",l,h=o;return(o+90)%180===0?(l=t?"end":"middle",!t&&o===-270&&(s="0em")):o>-270&&o<-90?(l="start",h=o-180):l="end",Cd({position:a.round().toJSON(),angle:t?h:0,attrs:{".":{y:s,"text-anchor":l}}},e)}const Gzt=Object.freeze(Object.defineProperty({__proto__:null,bottom:Ozt,inside:Fzt,insideOriented:Nzt,left:Ezt,manual:Lzt,outside:Hzt,outsideOriented:zzt,radial:Wzt,radialOriented:Vzt,right:Dzt,top:Izt},Symbol.toStringTag,{value:"Module"}));var dv;(function(n){n.presets=Gzt,n.registry=Dn.create({type:"port label layout"}),n.registry.register(n.presets,!0)})(dv||(dv={}));var $zt=function(n,t,e,i){var r=arguments.length,o=r<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(t,e,o):a(t,e))||o);return r>3&&o&&Object.defineProperty(t,e,o),o};class Vi extends Qo{get priority(){return 2}get disposeContainer(){return!0}constructor(){super(),this.cid=fI.uniqueId(),Vi.views[this.cid]=this}confirmUpdate(t,e){return 0}empty(t=this.container){return S_(t),this}unmount(t=this.container){return ov(t),this}remove(t=this.container){return t===this.container?(this.removeEventListeners(document),this.onRemove(),delete Vi.views[this.cid],this.disposeContainer&&this.unmount(t)):this.unmount(t),this}onRemove(){}setClass(t,e=this.container){e.classList.value=Array.isArray(t)?t.join(" "):t}addClass(t,e=this.container){return ri(e,Array.isArray(t)?t.join(" "):t),this}removeClass(t,e=this.container){return za(e,Array.isArray(t)?t.join(" "):t),this}setStyle(t,e=this.container){return T_(e,t),this}setAttrs(t,e=this.container){return t!=null&&e!=null&&Pi(e,t),this}findAttr(t,e=this.container){let i=e;for(;i&&i.nodeType===1;){const r=i.getAttribute(t);if(r!=null)return r;if(i===this.container)return null;i=i.parentNode}return null}find(t,e=this.container,i=this.selectors){return Vi.find(t,e,i).elems}findOne(t,e=this.container,i=this.selectors){const r=this.find(t,e,i);return r.length>0?r[0]:null}findByAttr(t,e=this.container){let i=e;for(;i&&i.getAttribute;){const r=i.getAttribute(t);if((r!=null||i===this.container)&&r!=="false")return i;i=i.parentNode}return null}getSelector(t,e){let i;if(t===this.container)return typeof e=="string"&&(i=`> ${e}`),i;if(t){const r=UF(t)+1;i=`${t.tagName.toLowerCase()}:nth-child(${r})`,e&&(i+=` > ${e}`),i=this.getSelector(t.parentNode,i)}return i}prefixClassName(t){return Ms.prefix(t)}delegateEvents(t,e){if(t==null)return this;e||this.undelegateEvents();const i=/^(\S+)\s*(.*)$/;return Object.keys(t).forEach(r=>{const o=r.match(i);if(o==null)return;const a=this.getEventHandler(t[r]);typeof a=="function"&&this.delegateEvent(o[1],o[2],a)}),this}undelegateEvents(){return vr.off(this.container,this.getEventNamespace()),this}delegateDocumentEvents(t,e){return this.addEventListeners(document,t,e),this}undelegateDocumentEvents(){return this.removeEventListeners(document),this}delegateEvent(t,e,i){return vr.on(this.container,t+this.getEventNamespace(),e,i),this}undelegateEvent(t,e,i){const r=t+this.getEventNamespace();return e==null?vr.off(this.container,r):typeof e=="string"?vr.off(this.container,r,e,i):vr.off(this.container,r,e),this}addEventListeners(t,e,i){if(e==null)return this;const r=this.getEventNamespace();return Object.keys(e).forEach(o=>{const a=this.getEventHandler(e[o]);typeof a=="function"&&vr.on(t,o+r,i,a)}),this}removeEventListeners(t){return t!=null&&vr.off(t,this.getEventNamespace()),this}getEventNamespace(){return`.${Ms.prefixCls}-event-${this.cid}`}getEventHandler(t){let e;if(typeof t=="string"){const i=this[t];typeof i=="function"&&(e=(...r)=>i.call(this,...r))}else e=(...i)=>t.call(this,...i);return e}getEventTarget(t,e={}){const{target:i,type:r,clientX:o=0,clientY:a=0}=t;return e.fromPoint||r==="touchmove"||r==="touchend"?document.elementFromPoint(o,a):i}stopPropagation(t){return this.setEventData(t,{propagationStopped:!0}),this}isPropagationStopped(t){return this.getEventData(t).propagationStopped===!0}getEventData(t){return this.eventData(t)}setEventData(t,e){return this.eventData(t,e)}eventData(t,e){if(t==null)throw new TypeError("Event object required");let i=t.data;const r=`__${this.cid}__`;return e==null?i==null?{}:i[r]||{}:(i==null&&(i=t.data={}),i[r]==null?i[r]=Object.assign({},e):i[r]=Object.assign(Object.assign({},i[r]),e),i[r])}normalizeEvent(t){return Vi.normalizeEvent(t)}dispose(){this.remove()}}$zt([Vi.dispose()],Vi.prototype,"dispose",null);(function(n){function t(r,o){return o?Os(r||"g"):jF(r||"div")}n.createElement=t;function e(r,o,a){if(!r||r===".")return{elems:[o]};if(a){const s=a[r];if(s)return{elems:Array.isArray(s)?s:[s]}}{const s=r.includes(">")?`:scope ${r}`:r;return{isCSSSelector:!0,elems:Array.prototype.slice.call(o.querySelectorAll(s))}}}n.find=e;function i(r){let o=r;const a=r.originalEvent,s=a&&a.changedTouches&&a.changedTouches[0];if(s){for(const l in r)s[l]===void 0&&(s[l]=r[l]);o=s}return o}n.normalizeEvent=i})(Vi||(Vi={}));(function(n){n.views={};function t(e){return n.views[e]||null}n.getView=t})(Vi||(Vi={}));var fI;(function(n){let t=0;function e(){const i=`v${t}`;return t+=1,i}n.uniqueId=e})(fI||(fI={}));class jzt{constructor(t){this.view=t,this.clean()}clean(){this.elemCache&&this.elemCache.dispose(),this.elemCache=new dI,this.pathCache={}}get(t){return this.elemCache.has(t)||this.elemCache.set(t,{}),this.elemCache.get(t)}getData(t){const e=this.get(t);return e.data||(e.data={}),e.data}getMatrix(t){const e=this.get(t);if(e.matrix==null){const i=this.view.container;e.matrix=POt(t,i)}return lr(e.matrix)}getShape(t){const e=this.get(t);return e.shape==null&&(e.shape=bi.toGeometryShape(t)),e.shape.clone()}getBoundingRect(t){const e=this.get(t);return e.boundingRect==null&&(e.boundingRect=bi.getBBoxV2(t)),e.boundingRect.clone()}}var Ni;(function(n){function t(h){return h!=null&&!e(h)}n.isJSONMarkup=t;function e(h){return h!=null&&typeof h=="string"}n.isStringMarkup=e;function i(h){return h==null||e(h)?h:sn(h)}n.clone=i;function r(h){return`${h}`.trim().replace(/[\r|\n]/g," ").replace(/>\s+</g,"><")}n.sanitize=r;function o(h,u={ns:nr.svg}){const d=document.createDocumentFragment(),c={},f={},g=[{markup:Array.isArray(h)?h:[h],parent:d,ns:u.ns}];for(;g.length>0;){const p=g.pop();let v=p.ns||nr.svg;const m=p.markup,y=p.parent;m.forEach(b=>{const _=b.tagName;if(!_)throw new TypeError("Invalid tagName");b.ns&&(v=b.ns);const w=v?jF(_,v):R9(_),C=b.attrs;C&&Pi(w,db(C));const x=b.style;x&&T_(w,x);const S=b.className;S!=null&&w.setAttribute("class",Array.isArray(S)?S.join(" "):S),b.textContent&&(w.textContent=b.textContent);const A=b.selector;if(A!=null){if(f[A])throw new TypeError("Selector must be unique");f[A]=w}if(b.groupSelector){let M=b.groupSelector;Array.isArray(M)||(M=[M]),M.forEach(R=>{c[R]||(c[R]=[]),c[R].push(w)})}y.appendChild(w);const T=b.children;Array.isArray(T)&&g.push({ns:v,markup:T,parent:w})})}return Object.keys(c).forEach(p=>{if(f[p])throw new Error("Ambiguous group selector");f[p]=c[p]}),{fragment:d,selectors:f,groups:c}}n.parseJSONMarkup=o;function a(h){return h instanceof SVGElement?Os("g"):R9("div")}function s(h){if(e(h)){const f=se.createVectors(h),g=f.length;if(g===1)return{elem:f[0].node};if(g>1){const p=a(f[0].node);return f.forEach(v=>{p.appendChild(v.node)}),{elem:p}}return{}}const u=o(h),d=u.fragment;let c=null;return d.childNodes.length>1?(c=a(d.firstChild),c.appendChild(d)):c=d.firstChild,{elem:c,selectors:u.selectors}}n.renderMarkup=s;function l(h){const u=se.createVectors(h),d=document.createDocumentFragment();for(let c=0,f=u.length;c<f;c+=1){const g=u[c].node;d.appendChild(g)}return{fragment:d,selectors:{}}}n.parseLabelStringMarkup=l})(Ni||(Ni={}));(function(n){function t(e,i,r){if(e!=null){let o;const a=e.tagName.toLowerCase();if(e===i)return typeof r=="string"?o=`> ${a} > ${r}`:o=`> ${a}`,o;const s=e.parentNode;if(s&&s.childNodes.length>1){const l=UF(e)+1;o=`${a}:nth-child(${l})`}else o=a;return r&&(o+=` > ${r}`),t(e.parentNode,i,o)}return r}n.getSelector=t})(Ni||(Ni={}));(function(n){function t(){return"g"}n.getPortContainerMarkup=t;function e(){return{tagName:"circle",selector:"circle",attrs:{r:10,fill:"#FFFFFF",stroke:"#000000"}}}n.getPortMarkup=e;function i(){return{tagName:"text",selector:"text",attrs:{fill:"#000000"}}}n.getPortLabelMarkup=i})(Ni||(Ni={}));(function(n){function t(){return[{tagName:"path",selector:"wrap",groupSelector:"lines",attrs:{fill:"none",cursor:"pointer",stroke:"transparent",strokeLinecap:"round"}},{tagName:"path",selector:"line",groupSelector:"lines",attrs:{fill:"none",pointerEvents:"none"}}]}n.getEdgeMarkup=t})(Ni||(Ni={}));(function(n){function t(e=!1){return{tagName:"foreignObject",selector:"fo",children:[{ns:nr.xhtml,tagName:"body",selector:"foBody",attrs:{xmlns:nr.xhtml},style:{width:"100%",height:"100%",background:"transparent"},children:e?[]:[{tagName:"div",selector:"foContent",style:{width:"100%",height:"100%"}}]}]}}n.getForeignObjectMarkup=t})(Ni||(Ni={}));class tot{constructor(t){this.view=t}get cell(){return this.view.cell}getDefinition(t){return this.cell.getAttrDefinition(t)}processAttrs(t,e){let i,r,o,a;const s=[];return Object.keys(e).forEach(l=>{const h=e[l],u=this.getDefinition(l),d=de(Ml.isValidDefinition,this.view,u,h,{elem:t,attrs:e,cell:this.cell,view:this.view});if(u&&d)typeof u=="string"?(i==null&&(i={}),i[u]=h):h!==null&&s.push({name:l,definition:u});else{i==null&&(i={});const c=crt.includes(l)?l:Ynt(l);i[c]=h}}),s.forEach(({name:l,definition:h})=>{const u=e[l];typeof h.set=="function"&&(r==null&&(r={}),r[l]=u),typeof h.offset=="function"&&(o==null&&(o={}),o[l]=u),typeof h.position=="function"&&(a==null&&(a={}),a[l]=u)}),{raw:e,normal:i,set:r,offset:o,position:a}}mergeProcessedAttrs(t,e){t.set=Object.assign(Object.assign({},t.set),e.set),t.position=Object.assign(Object.assign({},t.position),e.position),t.offset=Object.assign(Object.assign({},t.offset),e.offset);const i=t.normal&&t.normal.transform;i!=null&&e.normal&&(e.normal.transform=i),t.normal=e.normal}findAttrs(t,e,i,r){const o=[],a=new dI;return Object.keys(t).forEach(s=>{const l=t[s];if(!Uh(l))return;const{isCSSSelector:h,elems:u}=Vi.find(s,e,r);i[s]=u;for(let d=0,c=u.length;d<c;d+=1){const f=u[d],g=r&&r[s]===f,p=a.get(f);if(p){p.array||(o.push(f),p.array=!0,p.attrs=[p.attrs],p.priority=[p.priority]);const v=p.attrs,m=p.priority;if(g)v.unshift(l),m.unshift(-1);else{const y=kut(m,h?-1:c);v.splice(y,0,l),m.splice(y,0,c)}}else a.set(f,{elem:f,attrs:l,priority:g?-1:c,array:!1})}}),o.forEach(s=>{const l=a.get(s),h=l.attrs;l.attrs=h.reduceRight((u,d)=>zn(u,d),{})}),a}updateRelativeAttrs(t,e,i){const r=e.raw||{};let o=e.normal||{};const a=e.set,s=e.position,l=e.offset,h=()=>({elem:t,cell:this.cell,view:this.view,attrs:r,refBBox:i.clone()});if(a!=null&&Object.keys(a).forEach(v=>{const m=a[v],y=this.getDefinition(v);if(y!=null){const b=de(y.set,this.view,m,h());typeof b=="object"?o=Object.assign(Object.assign({},o),b):b!=null&&(o[v]=b)}}),t instanceof HTMLElement){this.view.setAttrs(o,t);return}const u=o.transform,d=u?`${u}`:null,c=cb(d),f=new Q(c.e,c.f);u&&(delete o.transform,c.e=0,c.f=0);let g=!1;s!=null&&Object.keys(s).forEach(v=>{const m=s[v],y=this.getDefinition(v);if(y!=null){const b=de(y.position,this.view,m,h());b!=null&&(g=!0,f.translate(Q.create(b)))}}),this.view.setAttrs(o,t);let p=!1;if(l!=null){const v=this.view.getBoundingRectOfElement(t);if(v.width>0&&v.height>0){const m=bi.transformRectangle(v,c);Object.keys(l).forEach(y=>{const b=l[y],_=this.getDefinition(y);if(_!=null){const w=de(_.offset,this.view,b,{elem:t,cell:this.cell,view:this.view,attrs:r,refBBox:m});w!=null&&(p=!0,f.translate(Q.create(w)))}})}}(u!=null||g||p)&&(f.round(1),c.e=f.x,c.f=f.y,t.setAttribute("transform",Jv(c)))}update(t,e,i){const r={},o=this.findAttrs(i.attrs||e,t,r,i.selectors),a=i.attrs?this.findAttrs(e,t,r,i.selectors):o,s=[];o.each(u=>{const d=u.elem,c=u.attrs,f=this.processAttrs(d,c);if(f.set==null&&f.position==null&&f.offset==null)this.view.setAttrs(f.normal,d);else{const g=a.get(d),p=g?g.attrs:null,v=p&&c.ref==null?p.ref:c.ref;let m;if(v){if(m=(r[v]||this.view.find(v,t,i.selectors))[0],!m)throw new Error(`"${v}" reference does not exist.`)}else m=null;const y={node:d,refNode:m,attributes:p,processedAttributes:f},b=s.findIndex(_=>_.refNode===d);b>-1?s.splice(b,0,y):s.push(y)}});const l=new dI;let h;s.forEach(u=>{const d=u.node,c=u.refNode;let f;const g=c!=null&&i.rotatableNode!=null&&drt(i.rotatableNode,c);if(c&&(f=l.get(c)),!f){const m=g?i.rotatableNode:t;f=c?bi.getBBox(c,{target:m}):i.rootBBox,c&&l.set(c,f)}let p;i.attrs&&u.attributes?(p=this.processAttrs(d,u.attributes),this.mergeProcessedAttrs(p,u.processedAttributes)):p=u.processedAttributes;let v=f;g&&i.rotatableNode!=null&&!i.rotatableNode.contains(d)&&(h||(h=cb(Pi(i.rotatableNode,"transform"))),v=bi.transformRectangle(f,h)),this.updateRelativeAttrs(d,p,v)})}}class eot{get cell(){return this.view.cell}constructor(t,e,i=[]){this.view=t;const r={},o={};let a=0;Object.keys(e).forEach(l=>{let h=e[l];Array.isArray(h)||(h=[h]),h.forEach(u=>{let d=r[u];d||(a+=1,d=r[u]=1<<a),o[l]|=d})});let s=i;if(Array.isArray(s)||(s=[s]),s.forEach(l=>{r[l]||(a+=1,r[l]=1<<a)}),a>25)throw new Error("Maximum number of flags exceeded.");this.flags=r,this.attrs=o,this.bootstrap=i}getFlag(t){const e=this.flags;return e==null?0:Array.isArray(t)?t.reduce((i,r)=>i|e[r],0):e[t]|0}hasAction(t,e){return t&this.getFlag(e)}removeAction(t,e){return t^t&this.getFlag(e)}getBootstrapFlag(){return this.getFlag(this.bootstrap)}getChangedFlag(){let t=0;return this.attrs&&Object.keys(this.attrs).forEach(e=>{this.cell.hasChanged(e)&&(t|=this.attrs[e])}),t}}var Uzt=function(n,t,e,i){var r=arguments.length,o=r<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(t,e,o):a(t,e))||o);return r>3&&o&&Object.defineProperty(t,e,o),o},Yzt=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e};class kn extends Vi{static getDefaults(){return this.defaults}static config(t){this.defaults=this.getOptions(t)}static getOptions(t){const e=(h,u)=>u!=null?eK([...Array.isArray(h)?h:[h],...Array.isArray(u)?u:[u]]):Array.isArray(h)?[...h]:[h],i=sn(this.getDefaults()),{bootstrap:r,actions:o,events:a,documentEvents:s}=t,l=Yzt(t,["bootstrap","actions","events","documentEvents"]);return r&&(i.bootstrap=e(i.bootstrap,r)),o&&Object.entries(o).forEach(([h,u])=>{const d=i.actions[h];u&&d?i.actions[h]=e(d,u):u&&(i.actions[h]=e(u))}),a&&(i.events=Object.assign(Object.assign({},i.events),a)),t.documentEvents&&(i.documentEvents=Object.assign(Object.assign({},i.documentEvents),s)),zn(i,l)}get[Symbol.toStringTag](){return kn.toStringTag}constructor(t,e={}){super(),this.cell=t,this.options=this.ensureOptions(e),this.graph=this.options.graph,this.attr=new tot(this),this.flag=new eot(this,this.options.actions,this.options.bootstrap),this.cache=new jzt(this),this.setContainer(this.ensureContainer()),this.setup(),this.init()}init(){}onRemove(){this.removeTools()}get priority(){return this.options.priority}get rootSelector(){return this.options.rootSelector}getConstructor(){return this.constructor}ensureOptions(t){return this.getConstructor().getOptions(t)}getContainerTagName(){return this.options.isSvgElement?"g":"div"}getContainerStyle(){}getContainerAttrs(){return{"data-cell-id":this.cell.id,"data-shape":this.cell.shape}}getContainerClassName(){return this.prefixClassName("cell")}ensureContainer(){return Vi.createElement(this.getContainerTagName(),this.options.isSvgElement)}setContainer(t){if(this.container!==t){this.undelegateEvents(),this.container=t,this.options.events!=null&&this.delegateEvents(this.options.events);const e=this.getContainerAttrs();e!=null&&this.setAttrs(e,t);const i=this.getContainerStyle();i!=null&&this.setStyle(i,t);const r=this.getContainerClassName();r!=null&&this.addClass(r,t)}return this}isNodeView(){return!1}isEdgeView(){return!1}render(){return this}confirmUpdate(t,e={}){return 0}getBootstrapFlag(){return this.flag.getBootstrapFlag()}getFlag(t){return this.flag.getFlag(t)}hasAction(t,e){return this.flag.hasAction(t,e)}removeAction(t,e){return this.flag.removeAction(t,e)}handleAction(t,e,i,r){if(this.hasAction(t,e)){i();const o=[e];return r&&(typeof r=="string"?o.push(r):o.push(...r)),this.removeAction(t,o)}return t}setup(){this.cell.on("changed",this.onCellChanged,this)}onCellChanged({options:t}){this.onAttrsChange(t)}onAttrsChange(t){let e=this.flag.getChangedFlag();t.updated||!e||(t.dirty&&this.hasAction(e,"update")&&(e|=this.getFlag("render")),t.toolId&&(t.async=!1),this.graph!=null&&this.graph.renderer.requestViewUpdate(this,e,t))}parseJSONMarkup(t,e){const i=Ni.parseJSONMarkup(t),r=i.selectors,o=this.rootSelector;if(e&&o){if(r[o])throw new Error("Invalid root selector");r[o]=e}return i}can(t){let e=this.graph.options.interacting;if(typeof e=="function"&&(e=de(e,this.graph,this)),typeof e=="object"){let i=e[t];return typeof i=="function"&&(i=de(i,this.graph,this)),i!==!1}return typeof e=="boolean"?e:!1}cleanCache(){return this.cache.clean(),this}getCache(t){return this.cache.get(t)}getDataOfElement(t){return this.cache.getData(t)}getMatrixOfElement(t){return this.cache.getMatrix(t)}getShapeOfElement(t){return this.cache.getShape(t)}getBoundingRectOfElement(t){return this.cache.getBoundingRect(t)}getBBoxOfElement(t){const e=this.getBoundingRectOfElement(t),i=this.getMatrixOfElement(t),r=this.getRootRotatedMatrix(),o=this.getRootTranslatedMatrix();return bi.transformRectangle(e,o.multiply(r).multiply(i))}getUnrotatedBBoxOfElement(t){const e=this.getBoundingRectOfElement(t),i=this.getMatrixOfElement(t),r=this.getRootTranslatedMatrix();return bi.transformRectangle(e,r.multiply(i))}getBBox(t={}){let e;if(t.useCellGeometry){const i=this.cell,r=i.isNode()?i.getAngle():0;e=i.getBBox().bbox(r)}else e=this.getBBoxOfElement(this.container);return this.graph.coord.localToGraphRect(e)}getRootTranslatedMatrix(){const t=this.cell,e=t.isNode()?t.getPosition():{x:0,y:0};return lr().translate(e.x,e.y)}getRootRotatedMatrix(){let t=lr();const e=this.cell,i=e.isNode()?e.getAngle():0;if(i){const r=e.getBBox(),o=r.width/2,a=r.height/2;t=t.translate(o,a).rotate(i).translate(-o,-a)}return t}findMagnet(t=this.container){return this.findByAttr("magnet",t)}updateAttrs(t,e,i={}){i.rootBBox==null&&(i.rootBBox=new Tt),i.selectors==null&&(i.selectors=this.selectors),this.attr.update(t,e,i)}isEdgeElement(t){return this.cell.isEdge()&&(t==null||t===this.container)}prepareHighlight(t,e={}){const i=t||this.container;return e.partial=i===this.container,i}highlight(t,e={}){const i=this.prepareHighlight(t,e);return this.notify("cell:highlight",{magnet:i,options:e,view:this,cell:this.cell}),this.isEdgeView()?this.notify("edge:highlight",{magnet:i,options:e,view:this,edge:this.cell,cell:this.cell}):this.isNodeView()&&this.notify("node:highlight",{magnet:i,options:e,view:this,node:this.cell,cell:this.cell}),this}unhighlight(t,e={}){const i=this.prepareHighlight(t,e);return this.notify("cell:unhighlight",{magnet:i,options:e,view:this,cell:this.cell}),this.isNodeView()?this.notify("node:unhighlight",{magnet:i,options:e,view:this,node:this.cell,cell:this.cell}):this.isEdgeView()&&this.notify("edge:unhighlight",{magnet:i,options:e,view:this,edge:this.cell,cell:this.cell}),this}notifyUnhighlight(t,e){}getEdgeTerminal(t,e,i,r,o){const a=this.cell,s=this.findAttr("port",t),l=t.getAttribute("data-selector"),h={cell:a.id};return l!=null&&(h.magnet=l),s!=null?(h.port=s,a.isNode()&&!a.hasPort(s)&&l==null&&(h.selector=this.getSelector(t))):l==null&&this.container!==t&&(h.selector=this.getSelector(t)),h}getMagnetFromEdgeTerminal(t){const e=this.cell,i=this.container,r=t.port;let o=t.magnet,a;return r!=null&&e.isNode()&&e.hasPort(r)?a=this.findPortElem(r,o)||i:(o||(o=t.selector),!o&&r!=null&&(o=`[port="${r}"]`),a=this.findOne(o,i,this.selectors)),a}hasTools(t){const e=this.tools;return e==null?!1:t==null?!0:e.name===t}addTools(t){if(this.removeTools(),t){if(!this.can("toolsAddable"))return this;const e=Wn.isToolsView(t)?t:new Wn(t);this.tools=e,e.config({view:this}),e.mount()}return this}updateTools(t={}){return this.tools&&this.tools.update(t),this}removeTools(){return this.tools&&(this.tools.remove(),this.tools=null),this}hideTools(){return this.tools&&this.tools.hide(),this}showTools(){return this.tools&&this.tools.show(),this}renderTools(){const t=this.cell.getTools();return this.addTools(t),this}notify(t,e){return this.trigger(t,e),this.graph.trigger(t,e),this}getEventArgs(t,e,i){const r=this,o=r.cell;return e==null||i==null?{e:t,view:r,cell:o}:{e:t,x:e,y:i,view:r,cell:o}}onClick(t,e,i){this.notify("cell:click",this.getEventArgs(t,e,i))}onDblClick(t,e,i){this.notify("cell:dblclick",this.getEventArgs(t,e,i))}onContextMenu(t,e,i){this.notify("cell:contextmenu",this.getEventArgs(t,e,i))}onMouseDown(t,e,i){this.cell.model&&(this.cachedModelForMouseEvent=this.cell.model,this.cachedModelForMouseEvent.startBatch("mouse")),this.notify("cell:mousedown",this.getEventArgs(t,e,i))}onMouseUp(t,e,i){this.notify("cell:mouseup",this.getEventArgs(t,e,i)),this.cachedModelForMouseEvent&&(this.cachedModelForMouseEvent.stopBatch("mouse",{cell:this.cell}),this.cachedModelForMouseEvent=null)}onMouseMove(t,e,i){this.notify("cell:mousemove",this.getEventArgs(t,e,i))}onMouseOver(t){this.notify("cell:mouseover",this.getEventArgs(t))}onMouseOut(t){this.notify("cell:mouseout",this.getEventArgs(t))}onMouseEnter(t){this.notify("cell:mouseenter",this.getEventArgs(t))}onMouseLeave(t){this.notify("cell:mouseleave",this.getEventArgs(t))}onMouseWheel(t,e,i,r){this.notify("cell:mousewheel",Object.assign({delta:r},this.getEventArgs(t,e,i)))}onCustomEvent(t,e,i,r){this.notify("cell:customevent",Object.assign({name:e},this.getEventArgs(t,i,r))),this.notify(e,Object.assign({},this.getEventArgs(t,i,r)))}onMagnetMouseDown(t,e,i,r){}onMagnetDblClick(t,e,i,r){}onMagnetContextMenu(t,e,i,r){}onLabelMouseDown(t,e,i){}checkMouseleave(t){const e=this.getEventTarget(t,{fromPoint:!0}),i=this.graph.findViewByElem(e);i!==this&&(this.onMouseLeave(t),i&&i.onMouseEnter(t))}dispose(){this.cell.off("changed",this.onCellChanged,this)}}kn.defaults={isSvgElement:!0,rootSelector:"root",priority:0,bootstrap:[],actions:{}};Uzt([kn.dispose()],kn.prototype,"dispose",null);(function(n){n.Flag=eot,n.Attr=tot})(kn||(kn={}));(function(n){n.toStringTag=`X6.${n.name}`;function t(e){if(e==null)return!1;if(e instanceof n)return!0;const i=e[Symbol.toStringTag],r=e;return(i==null||i===n.toStringTag)&&typeof r.isNodeView=="function"&&typeof r.isEdgeView=="function"&&typeof r.confirmUpdate=="function"}n.isCellView=t})(kn||(kn={}));(function(n){function t(i){return function(r){r.config({priority:i})}}n.priority=t;function e(i){return function(r){r.config({bootstrap:i})}}n.bootstrap=e})(kn||(kn={}));(function(n){n.registry=Dn.create({type:"view"})})(kn||(kn={}));class Wn extends Vi{get name(){return this.options.name}get graph(){return this.cellView.graph}get cell(){return this.cellView.cell}get[Symbol.toStringTag](){return Wn.toStringTag}constructor(t={}){super(),this.svgContainer=this.createContainer(!0,t),this.htmlContainer=this.createContainer(!1,t),this.config(t)}createContainer(t,e){const i=t?Vi.createElement("g",!0):Vi.createElement("div",!1);return ri(i,this.prefixClassName("cell-tools")),e.className&&ri(i,e.className),i}config(t){if(this.options=Object.assign(Object.assign({},this.options),t),!kn.isCellView(t.view)||t.view===this.cellView)return this;this.cellView=t.view,this.cell.isEdge()?(ri(this.svgContainer,this.prefixClassName("edge-tools")),ri(this.htmlContainer,this.prefixClassName("edge-tools"))):this.cell.isNode()&&(ri(this.svgContainer,this.prefixClassName("node-tools")),ri(this.htmlContainer,this.prefixClassName("node-tools"))),this.svgContainer.setAttribute("data-cell-id",this.cell.id),this.htmlContainer.setAttribute("data-cell-id",this.cell.id),this.name&&(this.svgContainer.setAttribute("data-tools-name",this.name),this.htmlContainer.setAttribute("data-tools-name",this.name));const e=this.options.items;if(!Array.isArray(e))return this;this.tools=[];const i=[];e.forEach(r=>{Wn.ToolItem.isToolItem(r)?r.name==="vertices"?i.unshift(r):i.push(r):(typeof r=="object"?r.name:r)==="vertices"?i.unshift(r):i.push(r)});for(let r=0;r<i.length;r+=1){const o=i[r];let a;if(Wn.ToolItem.isToolItem(o))a=o;else{const s=typeof o=="object"?o.name:o,l=typeof o=="object"?o.args||{}:{};if(s){if(this.cell.isNode()){const h=fv.registry.get(s);if(h)a=new h(l);else return fv.registry.onNotFound(s)}else if(this.cell.isEdge()){const h=gv.registry.get(s);if(h)a=new h(l);else return gv.registry.onNotFound(s)}}}a&&(a.config(this.cellView,this),a.render(),(a.options.isSVGElement!==!1?this.svgContainer:this.htmlContainer).appendChild(a.container),this.tools.push(a))}return this}update(t={}){const e=this.tools;return e&&e.forEach(i=>{t.toolId!==i.cid&&i.isVisible()&&i.update()}),this}focus(t){const e=this.tools;return e&&e.forEach(i=>{t===i?i.show():i.hide()}),this}blur(t){const e=this.tools;return e&&e.forEach(i=>{i!==t&&!i.isVisible()&&(i.show(),i.update())}),this}hide(){return this.focus(null)}show(){return this.blur(null)}remove(){const t=this.tools;return t&&(t.forEach(e=>e.remove()),this.tools=null),ov(this.svgContainer),ov(this.htmlContainer),super.remove()}mount(){const t=this.tools,e=this.cellView;if(e&&t){const i=t.some(o=>o.options.isSVGElement!==!1),r=t.some(o=>o.options.isSVGElement===!1);i&&(this.options.local?e.container:e.graph.view.decorator).appendChild(this.svgContainer),r&&this.graph.container.appendChild(this.htmlContainer)}return this}}(function(n){n.toStringTag=`X6.${n.name}`;function t(e){if(e==null)return!1;if(e instanceof n)return!0;const i=e[Symbol.toStringTag],r=e;return(i==null||i===n.toStringTag)&&r.graph!=null&&r.cell!=null&&typeof r.config=="function"&&typeof r.update=="function"&&typeof r.focus=="function"&&typeof r.blur=="function"&&typeof r.show=="function"&&typeof r.hide=="function"}n.isToolsView=t})(Wn||(Wn={}));(function(n){class t extends Vi{static getDefaults(){return this.defaults}static config(i){this.defaults=this.getOptions(i)}static getOptions(i){return zn(sn(this.getDefaults()),i)}get graph(){return this.cellView.graph}get cell(){return this.cellView.cell}get name(){return this.options.name}get[Symbol.toStringTag](){return t.toStringTag}constructor(i={}){super(),this.visible=!0,this.options=this.getOptions(i),this.container=Vi.createElement(this.options.tagName||"g",this.options.isSVGElement!==!1),ri(this.container,this.prefixClassName("cell-tool")),typeof this.options.className=="string"&&ri(this.container,this.options.className),this.init()}init(){}getOptions(i){return this.constructor.getOptions(i)}delegateEvents(){return this.options.events&&super.delegateEvents(this.options.events),this}config(i,r){return this.cellView=i,this.parent=r,this.stamp(this.container),this.cell.isEdge()?ri(this.container,this.prefixClassName("edge-tool")):this.cell.isNode()&&ri(this.container,this.prefixClassName("node-tool")),this.name&&this.container.setAttribute("data-tool-name",this.name),this.delegateEvents(),this}render(){this.empty();const i=this.options.markup;if(i){const r=Ni.parseJSONMarkup(i);this.container.appendChild(r.fragment),this.childNodes=r.selectors}return this.onRender(),this}onRender(){}update(){return this}stamp(i){i&&i.setAttribute("data-cell-id",this.cellView.cell.id)}show(){return this.container.style.display="",this.visible=!0,this}hide(){return this.container.style.display="none",this.visible=!1,this}isVisible(){return this.visible}focus(){const i=this.options.focusOpacity;return i!=null&&Number.isFinite(i)&&(this.container.style.opacity=`${i}`),this.parent.focus(this),this}blur(){return this.container.style.opacity="",this.parent.blur(this),this}guard(i){return this.graph==null||this.cellView==null?!0:this.graph.view.guard(i,this.cellView)}}t.defaults={isSVGElement:!0,tagName:"g"},n.ToolItem=t,(function(e){let i=0;function r(a){return a?NF(a):(i+=1,`CustomTool${i}`)}function o(a){const s=zF(r(a.name),this);return s.config(a),s}e.define=o})(t=n.ToolItem||(n.ToolItem={})),(function(e){e.toStringTag=`X6.${e.name}`;function i(r){if(r==null)return!1;if(r instanceof e)return!0;const o=r[Symbol.toStringTag],a=r;return(o==null||o===e.toStringTag)&&a.graph!=null&&a.cell!=null&&typeof a.config=="function"&&typeof a.update=="function"&&typeof a.focus=="function"&&typeof a.blur=="function"&&typeof a.show=="function"&&typeof a.hide=="function"&&typeof a.isVisible=="function"}e.isToolItem=i})(t=n.ToolItem||(n.ToolItem={}))})(Wn||(Wn={}));const Xzt=n=>n;function N9(n,t){return t===0?"0%":`${Math.round(n/t*100)}%`}function iot(n){return(e,i,r,o)=>i.isEdgeElement(r)?Kzt(n,e,i,r,o):qzt(n,e,i,r,o)}function qzt(n,t,e,i,r){const o=e.cell,a=o.getAngle(),s=e.getUnrotatedBBoxOfElement(i),l=o.getBBox().getCenter(),h=Q.create(r).rotate(a,l);let u=h.x-s.x,d=h.y-s.y;return n&&(u=N9(u,s.width),d=N9(d,s.height)),t.anchor={name:"topLeft",args:{dx:u,dy:d,rotate:!0}},t}function Kzt(n,t,e,i,r){const o=e.getConnection();if(!o)return t;const a=o.closestPointLength(r);if(n){const s=o.length();t.anchor={name:"ratio",args:{ratio:a/s}}}else t.anchor={name:"length",args:{length:a}};return t}const Zzt=iot(!0),Jzt=iot(!1),Qzt=Object.freeze(Object.defineProperty({__proto__:null,noop:Xzt,pinAbsolute:Jzt,pinRelative:Zzt},Symbol.toStringTag,{value:"Module"}));var gI;(function(n){n.presets=Qzt,n.registry=Dn.create({type:"connection strategy"}),n.registry.register(n.presets,!0)})(gI||(gI={}));function not(n,t,e,i){return de(gI.presets.pinRelative,this.graph,{},t,e,n,this.cell,i,{}).anchor}function rot(n,t){return t?n.cell.getBBox():n.cell.isEdge()?n.getConnection().bbox():n.getUnrotatedBBoxOfElement(n.container)}class dd extends Wn.ToolItem{onRender(){ri(this.container,this.prefixClassName("cell-tool-button")),this.update()}update(){return this.updatePosition(),this}updatePosition(){const e=this.cellView.cell.isEdge()?this.getEdgeMatrix():this.getNodeMatrix();av(this.container,e,{absolute:!0})}getNodeMatrix(){const t=this.cellView,e=this.options;let{x:i=0,y:r=0}=e;const{offset:o,useCellGeometry:a,rotate:s}=e;let l=rot(t,a);const h=t.cell.getAngle();s||(l=l.bbox(h));let u=0,d=0;typeof o=="number"?(u=o,d=o):typeof o=="object"&&(u=o.x,d=o.y),i=_s(i,l.width),r=_s(r,l.height);let c=lr().translate(l.x+l.width/2,l.y+l.height/2);return s&&(c=c.rotate(h)),c=c.translate(i+u-l.width/2,r+d-l.height/2),c}getEdgeMatrix(){const t=this.cellView,e=this.options,{offset:i=0,distance:r=0,rotate:o}=e;let a,s,l;const h=_s(r,1);h>=0&&h<=1?a=t.getTangentAtRatio(h):a=t.getTangentAtLength(h),a?(s=a.start,l=a.vector().vectorAngle(new Q(1,0))||0):(s=t.getConnection().start,l=0);let u=lr().translate(s.x,s.y).rotate(l);return typeof i=="object"?u=u.translate(i.x||0,i.y||0):u=u.translate(0,i),o||(u=u.rotate(-l)),u}onMouseDown(t){if(this.guard(t))return;t.stopPropagation(),t.preventDefault();const e=this.options.onClick;typeof e=="function"&&de(e,this.cellView,{e:t,view:this.cellView,cell:this.cellView.cell,btn:this})}}(function(n){n.config({name:"button",useCellGeometry:!0,events:{mousedown:"onMouseDown",touchstart:"onMouseDown"}})})(dd||(dd={}));(function(n){n.Remove=n.define({name:"button-remove",markup:[{tagName:"circle",selector:"button",attrs:{r:7,fill:"#FF1D00",cursor:"pointer"}},{tagName:"path",selector:"icon",attrs:{d:"M -3 -3 3 3 M -3 3 3 -3",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],distance:60,offset:0,useCellGeometry:!0,onClick({view:t,btn:e}){e.parent.remove(),t.cell.remove({ui:!0,toolId:e.cid})}})})(dd||(dd={}));var tFt=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e};class dS extends Wn.ToolItem{onRender(){if(ri(this.container,this.prefixClassName("cell-tool-boundary")),this.options.attrs){const t=this.options.attrs,{class:e}=t,i=tFt(t,["class"]);Pi(this.container,db(i)),e&&ri(this.container,e)}this.update()}update(){const t=this.cellView,e=this.options,{useCellGeometry:i,rotate:r}=e,o=Ef(e.padding);let a=rot(t,i).moveAndExpand({x:-o.left,y:-o.top,width:o.left+o.right,height:o.top+o.bottom});const s=t.cell;if(s.isNode()){const l=s.getAngle();if(l)if(r){const h=s.getBBox().getCenter();lI(this.container,l,h.x,h.y,{absolute:!0})}else a=a.bbox(l)}return Pi(this.container,a.toJSON()),this}}(function(n){n.config({name:"boundary",tagName:"rect",padding:10,useCellGeometry:!0,attrs:{fill:"none",stroke:"#333","stroke-width":.5,"stroke-dasharray":"5, 5","pointer-events":"none"}})})(dS||(dS={}));class vb extends Wn.ToolItem{constructor(){super(...arguments),this.handles=[]}get vertices(){return this.cellView.cell.getVertices()}onRender(){return this.addClass(this.prefixClassName("edge-tool-vertices")),this.options.addable&&this.updatePath(),this.resetHandles(),this.renderHandles(),this}update(){return this.vertices.length===this.handles.length?this.updateHandles():(this.resetHandles(),this.renderHandles()),this.options.addable&&this.updatePath(),this}resetHandles(){const t=this.handles;this.handles=[],t&&t.forEach(e=>{this.stopHandleListening(e),e.remove()})}renderHandles(){const t=this.vertices;for(let e=0,i=t.length;e<i;e+=1){const r=t[e],o=this.options.createHandle,a=this.options.processHandle,s=o({index:e,graph:this.graph,guard:l=>this.guard(l),attrs:this.options.attrs||{}});a&&a(s),s.updatePosition(r.x,r.y),this.stamp(s.container),this.container.appendChild(s.container),this.handles.push(s),this.startHandleListening(s)}}updateHandles(){const t=this.vertices;for(let e=0,i=t.length;e<i;e+=1){const r=t[e],o=this.handles[e];o&&o.updatePosition(r.x,r.y)}}updatePath(){const t=this.childNodes.connection;t&&t.setAttribute("d",this.cellView.getConnectionPathData())}startHandleListening(t){const e=this.cellView;e.can("vertexMovable")&&(t.on("change",this.onHandleChange,this),t.on("changing",this.onHandleChanging,this),t.on("changed",this.onHandleChanged,this)),e.can("vertexDeletable")&&t.on("remove",this.onHandleRemove,this)}stopHandleListening(t){const e=this.cellView;e.can("vertexMovable")&&(t.off("change",this.onHandleChange,this),t.off("changing",this.onHandleChanging,this),t.off("changed",this.onHandleChanged,this)),e.can("vertexDeletable")&&t.off("remove",this.onHandleRemove,this)}getNeighborPoints(t){const e=this.cellView,i=this.vertices,r=t>0?i[t-1]:e.sourceAnchor,o=t<i.length-1?i[t+1]:e.targetAnchor;return{prev:Q.create(r),next:Q.create(o)}}getMouseEventArgs(t){const e=this.normalizeEvent(t),{x:i,y:r}=this.graph.snapToGrid(e.clientX,e.clientY);return{e,x:i,y:r}}onHandleChange({e:t}){this.focus();const e=this.cellView;if(e.cell.startBatch("move-vertex",{ui:!0,toolId:this.cid}),!this.options.stopPropagation){const{e:i,x:r,y:o}=this.getMouseEventArgs(t);this.eventData(i,{start:{x:r,y:o}}),e.notifyMouseDown(i,r,o)}}onHandleChanging({handle:t,e}){const i=this.cellView,r=t.options.index,{e:o,x:a,y:s}=this.getMouseEventArgs(e),l={x:a,y:s};this.snapVertex(l,r),i.cell.setVertexAt(r,l,{ui:!0,toolId:this.cid}),t.updatePosition(l.x,l.y),this.options.stopPropagation||i.notifyMouseMove(o,a,s)}stopBatch(t){this.cell.stopBatch("move-vertex",{ui:!0,toolId:this.cid}),t&&this.cell.stopBatch("add-vertex",{ui:!0,toolId:this.cid})}onHandleChanged({e:t}){const e=this.options,i=this.cellView;if(e.addable&&this.updatePath(),!e.removeRedundancies){this.stopBatch(this.eventData(t).vertexAdded);return}i.removeRedundantLinearVertices({ui:!0,toolId:this.cid})&&this.render(),this.blur(),this.stopBatch(this.eventData(t).vertexAdded);const{e:o,x:a,y:s}=this.getMouseEventArgs(t);if(!this.options.stopPropagation){i.notifyMouseUp(o,a,s);const{start:l}=this.eventData(o);if(l){const{x:h,y:u}=l;h===a&&u===s&&i.onClick(o,a,s)}}i.checkMouseleave(o),e.onChanged&&e.onChanged({edge:i.cell,edgeView:i})}snapVertex(t,e){const i=this.options.snapRadius||0;if(i>0){const r=this.getNeighborPoints(e),o=r.prev,a=r.next;Math.abs(t.x-o.x)<i?t.x=o.x:Math.abs(t.x-a.x)<i&&(t.x=a.x),Math.abs(t.y-o.y)<i?t.y=r.prev.y:Math.abs(t.y-a.y)<i&&(t.y=a.y)}}onHandleRemove({handle:t,e}){if(this.options.removable){const i=t.options.index,r=this.cellView;r.cell.removeVertexAt(i,{ui:!0}),this.options.addable&&this.updatePath(),r.checkMouseleave(this.normalizeEvent(e))}}allowAddVertex(t){const e=this.guard(t),i=this.options.addable&&this.cellView.can("vertexAddable"),r=this.options.modifiers?sv.isMatch(t,this.options.modifiers):!0;return!e&&i&&r}onPathMouseDown(t){const e=this.cellView;if(!this.allowAddVertex(t))return;t.stopPropagation(),t.preventDefault();const i=this.normalizeEvent(t),r=this.graph.snapToGrid(i.clientX,i.clientY).toJSON();e.cell.startBatch("add-vertex",{ui:!0,toolId:this.cid});const o=e.getVertexIndex(r.x,r.y);this.snapVertex(r,o),e.cell.insertVertex(r,o,{ui:!0,toolId:this.cid}),this.render();const a=this.handles[o];this.eventData(i,{vertexAdded:!0}),a.onMouseDown(i)}onRemove(){this.resetHandles()}}(function(n){class t extends Vi{get graph(){return this.options.graph}constructor(i){super(),this.options=i,this.render(),this.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown",dblclick:"onDoubleClick"})}render(){this.container=Vi.createElement("circle",!0);const i=this.options.attrs;if(typeof i=="function"){const r=n.getDefaults();this.setAttrs(Object.assign(Object.assign({},r.attrs),i(this)))}else this.setAttrs(i);this.addClass(this.prefixClassName("edge-tool-vertex"))}updatePosition(i,r){this.setAttrs({cx:i,cy:r})}onMouseDown(i){this.options.guard(i)||(i.stopPropagation(),i.preventDefault(),this.graph.view.undelegateEvents(),this.delegateDocumentEvents({mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},i.data),this.emit("change",{e:i,handle:this}))}onMouseMove(i){this.emit("changing",{e:i,handle:this})}onMouseUp(i){this.emit("changed",{e:i,handle:this}),this.undelegateDocumentEvents(),this.graph.view.delegateEvents()}onDoubleClick(i){this.emit("remove",{e:i,handle:this})}}n.Handle=t})(vb||(vb={}));(function(n){const t=Ms.prefix("edge-tool-vertex-path");n.config({name:"vertices",snapRadius:20,addable:!0,removable:!0,removeRedundancies:!0,stopPropagation:!0,attrs:{r:6,fill:"#333",stroke:"#fff",cursor:"move","stroke-width":2},createHandle:e=>new n.Handle(e),markup:[{tagName:"path",selector:"connection",className:t,attrs:{fill:"none",stroke:"transparent","stroke-width":10,cursor:"pointer"}}],events:{[`mousedown .${t}`]:"onPathMouseDown",[`touchstart .${t}`]:"onPathMouseDown"}})})(vb||(vb={}));class mb extends Wn.ToolItem{constructor(){super(...arguments),this.handles=[]}get vertices(){return this.cellView.cell.getVertices()}update(){return this.render(),this}onRender(){ri(this.container,this.prefixClassName("edge-tool-segments")),this.resetHandles();const t=this.cellView,e=[...this.vertices];e.unshift(t.sourcePoint),e.push(t.targetPoint);for(let i=0,r=e.length;i<r-1;i+=1){const o=e[i],a=e[i+1],s=this.renderHandle(o,a,i);this.stamp(s.container),this.handles.push(s)}return this}renderHandle(t,e,i){const r=this.options.createHandle({index:i,graph:this.graph,guard:o=>this.guard(o),attrs:this.options.attrs||{}});return this.options.processHandle&&this.options.processHandle(r),this.updateHandle(r,t,e),this.container.appendChild(r.container),this.startHandleListening(r),r}startHandleListening(t){t.on("change",this.onHandleChange,this),t.on("changing",this.onHandleChanging,this),t.on("changed",this.onHandleChanged,this)}stopHandleListening(t){t.off("change",this.onHandleChange,this),t.off("changing",this.onHandleChanging,this),t.off("changed",this.onHandleChanged,this)}resetHandles(){const t=this.handles;this.handles=[],t&&t.forEach(e=>{this.stopHandleListening(e),e.remove()})}shiftHandleIndexes(t){const e=this.handles;for(let i=0,r=e.length;i<r;i+=1)e[i].options.index+=t}resetAnchor(t,e){const i=this.cellView.cell,r={ui:!0,toolId:this.cid};e?i.prop([t,"anchor"],e,r):i.removeProp([t,"anchor"],r)}snapHandle(t,e,i){const r=t.options.axis,o=t.options.index,l=this.cellView.cell.getVertices(),h=l[o-2]||i.sourceAnchor,u=l[o+1]||i.targetAnchor,d=this.options.snapRadius;return Math.abs(e[r]-h[r])<d?e[r]=h[r]:Math.abs(e[r]-u[r])<d&&(e[r]=u[r]),e}onHandleChanging({handle:t,e}){const i=this.graph,r=this.options,o=this.cellView,a=r.anchor,s=t.options.axis,l=t.options.index-1,h=this.getEventData(e),u=this.normalizeEvent(e),d=i.snapToGrid(u.clientX,u.clientY),c=this.snapHandle(t,d.clone(),h),f=sn(this.vertices);let g=f[l],p=f[l+1];const v=o.sourceView,m=o.sourceBBox;let y=!1,b=!1;if(g?l===0?m.containsPoint(g)?(f.shift(),this.shiftHandleIndexes(-1),y=!0):(g[s]=c[s],b=!0):g[s]=c[s]:(g=o.sourceAnchor.toJSON(),g[s]=c[s],m.containsPoint(g)?y=!0:(f.unshift(g),this.shiftHandleIndexes(1),b=!0)),typeof a=="function"&&v){if(y){const S=h.sourceAnchor.clone();S[s]=c[s];const A=de(a,o,S,v,o.sourceMagnet||v.container,"source",o,this);this.resetAnchor("source",A)}b&&this.resetAnchor("source",h.sourceAnchorDef)}const _=o.targetView,w=o.targetBBox;let C=!1,x=!1;if(p?l===f.length-2?w.containsPoint(p)?(f.pop(),C=!0):(p[s]=c[s],x=!0):p[s]=c[s]:(p=o.targetAnchor.toJSON(),p[s]=c[s],w.containsPoint(p)?C=!0:(f.push(p),x=!0)),typeof a=="function"&&_){if(C){const S=h.targetAnchor.clone();S[s]=c[s];const A=de(a,o,S,_,o.targetMagnet||_.container,"target",o,this);this.resetAnchor("target",A)}x&&this.resetAnchor("target",h.targetAnchorDef)}Q.equalPoints(f,this.vertices)||this.cellView.cell.setVertices(f,{ui:!0,toolId:this.cid}),this.updateHandle(t,g,p,0),r.stopPropagation||o.notifyMouseMove(u,d.x,d.y)}onHandleChange({handle:t,e}){const i=this.options,r=this.handles,o=this.cellView,a=t.options.index;if(Array.isArray(r)){for(let s=0,l=r.length;s<l;s+=1)s!==a&&r[s].hide();if(this.focus(),this.setEventData(e,{sourceAnchor:o.sourceAnchor.clone(),targetAnchor:o.targetAnchor.clone(),sourceAnchorDef:sn(this.cell.prop(["source","anchor"])),targetAnchorDef:sn(this.cell.prop(["target","anchor"]))}),this.cell.startBatch("move-segment",{ui:!0,toolId:this.cid}),!i.stopPropagation){const s=this.normalizeEvent(e),l=this.graph.snapToGrid(s.clientX,s.clientY);o.notifyMouseDown(s,l.x,l.y)}}}onHandleChanged({e:t}){const e=this.options,i=this.cellView;e.removeRedundancies&&i.removeRedundantLinearVertices({ui:!0,toolId:this.cid});const r=this.normalizeEvent(t),o=this.graph.snapToGrid(r.clientX,r.clientY);this.render(),this.blur(),this.cell.stopBatch("move-segment",{ui:!0,toolId:this.cid}),e.stopPropagation||i.notifyMouseUp(r,o.x,o.y),i.checkMouseleave(r),e.onChanged&&e.onChanged({edge:i.cell,edgeView:i})}updateHandle(t,e,i,r=0){const o=this.options.precision||0,a=Math.abs(e.x-i.x)<o,s=Math.abs(e.y-i.y)<o;if(a||s){const l=new Ut(e,i);if(l.length()<this.options.threshold)t.hide();else{const u=l.getCenter(),d=a?"x":"y";u[d]+=r||0;const c=l.vector().vectorAngle(new Q(1,0));t.updatePosition(u.x,u.y,c,this.cellView),t.show(),t.options.axis=d}}else t.hide()}onRemove(){this.resetHandles()}}(function(n){class t extends Vi{constructor(i){super(),this.options=i,this.render(),this.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown"})}render(){this.container=Vi.createElement("rect",!0);const i=this.options.attrs;if(typeof i=="function"){const r=n.getDefaults();this.setAttrs(Object.assign(Object.assign({},r.attrs),i(this)))}else this.setAttrs(i);this.addClass(this.prefixClassName("edge-tool-segment"))}updatePosition(i,r,o,a){const s=a.getClosestPoint(new Q(i,r))||new Q(i,r);let l=lr().translate(s.x,s.y);if(s.equals({x:i,y:r}))l=l.rotate(o);else{let u=new Ut(i,r,s.x,s.y).vector().vectorAngle(new Q(1,0));u!==0&&(u+=90),l=l.rotate(u)}this.setAttrs({transform:Jv(l),cursor:o%180===0?"row-resize":"col-resize"})}onMouseDown(i){this.options.guard(i)||(this.trigger("change",{e:i,handle:this}),i.stopPropagation(),i.preventDefault(),this.options.graph.view.undelegateEvents(),this.delegateDocumentEvents({mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},i.data))}onMouseMove(i){this.emit("changing",{e:i,handle:this})}onMouseUp(i){this.emit("changed",{e:i,handle:this}),this.undelegateDocumentEvents(),this.options.graph.view.delegateEvents()}show(){this.container.style.display=""}hide(){this.container.style.display="none"}}n.Handle=t})(mb||(mb={}));(function(n){n.config({name:"segments",precision:.5,threshold:40,snapRadius:10,stopPropagation:!0,removeRedundancies:!0,attrs:{width:20,height:8,x:-10,y:-4,rx:4,ry:4,fill:"#333",stroke:"#fff","stroke-width":2},createHandle:t=>new n.Handle(t),anchor:not})})(mb||(mb={}));class cS extends Wn.ToolItem{get type(){return this.options.type}onRender(){ri(this.container,this.prefixClassName(`edge-tool-${this.type}-anchor`)),this.toggleArea(!1),this.update()}update(){const t=this.type;return this.cellView.getTerminalView(t)?(this.updateAnchor(),this.updateArea(),this.container.style.display=""):this.container.style.display="none",this}updateAnchor(){const t=this.childNodes;if(!t)return;const e=t.anchor;if(!e)return;const i=this.type,r=this.cellView,o=this.options,a=r.getTerminalAnchor(i),s=r.cell.prop([i,"anchor"]);e.setAttribute("transform",`translate(${a.x}, ${a.y})`);const l=s?o.customAnchorAttrs:o.defaultAnchorAttrs;l&&Object.keys(l).forEach(h=>{e.setAttribute(h,l[h])})}updateArea(){const t=this.childNodes;if(!t)return;const e=t.area;if(!e)return;const i=this.type,r=this.cellView,o=r.getTerminalView(i);if(o){const a=o.cell,s=r.getTerminalMagnet(i);let l=this.options.areaPadding||0;Number.isFinite(l)||(l=0);let h,u,d;o.isEdgeElement(s)?(h=o.getBBox(),u=0,d=h.getCenter()):(h=o.getUnrotatedBBoxOfElement(s),u=a.getAngle(),d=h.getCenter(),u&&d.rotate(-u,a.getBBox().getCenter())),h.inflate(l),Pi(e,{x:-h.width/2,y:-h.height/2,width:h.width,height:h.height,transform:`translate(${d.x}, ${d.y}) rotate(${u})`})}}toggleArea(t){if(this.childNodes){const e=this.childNodes.area;e&&(e.style.display=t?"":"none")}}onMouseDown(t){this.guard(t)||(t.stopPropagation(),t.preventDefault(),this.graph.view.undelegateEvents(),this.options.documentEvents&&this.delegateDocumentEvents(this.options.documentEvents),this.focus(),this.toggleArea(this.options.restrictArea),this.cell.startBatch("move-anchor",{ui:!0,toolId:this.cid}))}resetAnchor(t){const e=this.type,i=this.cell;t?i.prop([e,"anchor"],t,{rewrite:!0,ui:!0,toolId:this.cid}):i.removeProp([e,"anchor"],{ui:!0,toolId:this.cid})}onMouseMove(t){const e=this.type,i=this.cellView,r=i.getTerminalView(e);if(r==null)return;const o=this.normalizeEvent(t),a=r.cell,s=i.getTerminalMagnet(e);let l=this.graph.coord.clientToLocalPoint(o.clientX,o.clientY);const h=this.options.snap;if(typeof h=="function"){const c=de(h,i,l,r,s,e,i,this);l=Q.create(c)}if(this.options.restrictArea)if(r.isEdgeElement(s)){const c=r.getClosestPoint(l);c&&(l=c)}else{const c=r.getUnrotatedBBoxOfElement(s),f=a.getAngle(),g=a.getBBox().getCenter(),p=l.clone().rotate(f,g);c.containsPoint(p)||(l=c.getNearestPointToPoint(p).rotate(-f,g))}let u;const d=this.options.anchor;typeof d=="function"&&(u=de(d,i,l,r,s,e,i,this)),this.resetAnchor(u),this.update()}onMouseUp(t){this.graph.view.delegateEvents(),this.undelegateDocumentEvents(),this.blur(),this.toggleArea(!1);const e=this.cellView;this.options.removeRedundancies&&e.removeRedundantLinearVertices({ui:!0,toolId:this.cid}),this.cell.stopBatch("move-anchor",{ui:!0,toolId:this.cid})}onDblClick(){const t=this.options.resetAnchor;t&&this.resetAnchor(t===!0?void 0:t),this.update()}}(function(n){n.config({tagName:"g",markup:[{tagName:"circle",selector:"anchor",attrs:{cursor:"pointer"}},{tagName:"rect",selector:"area",attrs:{"pointer-events":"none",fill:"none",stroke:"#33334F","stroke-dasharray":"2,4",rx:5,ry:5}}],events:{mousedown:"onMouseDown",touchstart:"onMouseDown",dblclick:"onDblClick"},documentEvents:{mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},customAnchorAttrs:{"stroke-width":4,stroke:"#33334F",fill:"#FFFFFF",r:5},defaultAnchorAttrs:{"stroke-width":2,stroke:"#FFFFFF",fill:"#33334F",r:6},areaPadding:6,snapRadius:10,resetAnchor:!0,restrictArea:!0,removeRedundancies:!0,anchor:not,snap(t,e,i,r,o,a){const s=a.options.snapRadius||0,l=r==="source",h=l?0:-1,u=this.cell.getVertexAt(h)||this.getTerminalAnchor(l?"target":"source");return u&&(Math.abs(u.x-t.x)<s&&(t.x=u.x),Math.abs(u.y-t.y)<s&&(t.y=u.y)),t}})})(cS||(cS={}));const eFt=cS.define({name:"source-anchor",type:"source"}),iFt=cS.define({name:"target-anchor",type:"target"});var nFt=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e};class fS extends Wn.ToolItem{get type(){return this.options.type}get ratio(){return this.options.ratio}init(){if(this.options.attrs){const t=this.options.attrs,{class:e}=t,i=nFt(t,["class"]);this.setAttrs(i,this.container),e&&ri(this.container,e)}}onRender(){ri(this.container,this.prefixClassName(`edge-tool-${this.type}-arrowhead`)),this.update()}update(){const t=this.ratio,e=this.cellView,i=e.getTangentAtRatio(t),r=i?i.start:e.getPointAtRatio(t),o=i&&i.vector().vectorAngle(new Q(1,0))||0;if(!r)return this;const a=lr().translate(r.x,r.y).rotate(o);return av(this.container,a,{absolute:!0}),this}onMouseDown(t){if(this.guard(t))return;t.stopPropagation(),t.preventDefault();const e=this.cellView;if(e.can("arrowheadMovable")){e.cell.startBatch("move-arrowhead",{ui:!0,toolId:this.cid});const i=this.graph.snapToGrid(t.clientX,t.clientY),r=e.prepareArrowheadDragging(this.type,{x:i.x,y:i.y,options:Object.assign(Object.assign({},this.options),{toolId:this.cid})});this.cellView.setEventData(t,r),this.delegateDocumentEvents(this.options.documentEvents,t.data),e.graph.view.undelegateEvents(),this.container.style.pointerEvents="none"}this.focus()}onMouseMove(t){const e=this.normalizeEvent(t),i=this.graph.snapToGrid(e.clientX,e.clientY);this.cellView.onMouseMove(e,i.x,i.y),this.update()}onMouseUp(t){this.undelegateDocumentEvents();const e=this.normalizeEvent(t),i=this.cellView,r=this.graph.snapToGrid(e.clientX,e.clientY);i.onMouseUp(e,r.x,r.y),this.graph.view.delegateEvents(),this.blur(),this.container.style.pointerEvents="",i.cell.stopBatch("move-arrowhead",{ui:!0,toolId:this.cid})}}(function(n){n.config({tagName:"path",isSVGElement:!0,events:{mousedown:"onMouseDown",touchstart:"onMouseDown"},documentEvents:{mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"}})})(fS||(fS={}));const rFt=fS.define({name:"source-arrowhead",type:"source",ratio:0,attrs:{d:"M 10 -8 -10 0 10 8 Z",fill:"#333",stroke:"#fff","stroke-width":2,cursor:"move"}}),oFt=fS.define({name:"target-arrowhead",type:"target",ratio:1,attrs:{d:"M -10 -8 10 0 -10 8 Z",fill:"#333",stroke:"#fff","stroke-width":2,cursor:"move"}});class cv extends Wn.ToolItem{constructor(){super(...arguments),this.labelIndex=-1,this.distance=.5,this.dblClick=this.onCellDblClick.bind(this)}onRender(){const t=this.cellView;t&&t.on("cell:dblclick",this.dblClick)}createElement(){const t=[this.prefixClassName(`${this.cell.isEdge()?"edge":"node"}-tool-editor`),this.prefixClassName("cell-tool-editor")];this.editor=Wn.createElement("div",!1),this.addClass(t,this.editor),this.editor.contentEditable="true",this.container.appendChild(this.editor)}removeElement(){this.undelegateDocumentEvents(),this.editor&&(this.container.removeChild(this.editor),this.editor=null)}updateEditor(){const{cell:t,editor:e}=this;if(!e)return;const{style:i}=e;t.isNode()?this.updateNodeEditorTransform():t.isEdge()&&this.updateEdgeEditorTransform();const{attrs:r}=this.options;i.fontSize=`${r.fontSize}px`,i.fontFamily=r.fontFamily,i.color=r.color,i.backgroundColor=r.backgroundColor;const o=this.getCellText()||"";return e.innerText=o,this.setCellText(""),this}updateNodeEditorTransform(){const{graph:t,cell:e,editor:i}=this;if(!i)return;let r=Q.create(),o=20,a="",{x:s,y:l}=this.options;const{width:h,height:u}=this.options;if(typeof s<"u"&&typeof l<"u"){const f=e.getBBox();s=_s(s,f.width),l=_s(l,f.height),r=f.topLeft.translate(s,l),o=f.width-s*2}else{const f=e.getBBox();r=f.center,o=f.width-4,a="translate(-50%, -50%)"}const d=t.scale(),{style:c}=i;r=t.localToGraph(r),c.left=`${r.x}px`,c.top=`${r.y}px`,c.transform=`scale(${d.sx}, ${d.sy}) ${a}`,c.minWidth=`${o}px`,typeof h=="number"&&(c.width=`${h}px`),typeof u=="number"&&(c.height=`${u}px`)}updateEdgeEditorTransform(){if(!this.event)return;const{graph:t,editor:e}=this;if(!e)return;let i=Q.create(),r=20;const{style:o}=e,a=this.event.target,s=a.parentElement;if(s&&x_(s,this.prefixClassName("edge-label"))){const u=s.getAttribute("data-index")||"0";this.labelIndex=parseInt(u,10);const d=s.getAttribute("transform"),{translation:c}=kM(d);i=new Q(c.tx,c.ty),r=bi.getBBox(a).width}else{if(!this.options.labelAddable)return this;i=t.clientToLocal(Q.create(this.event.clientX,this.event.clientY));const d=this.cellView.path.closestPointLength(i);this.distance=d,this.labelIndex=-1}i=t.localToGraph(i);const h=t.scale();o.left=`${i.x}px`,o.top=`${i.y}px`,o.minWidth=`${r}px`,o.transform=`scale(${h.sx}, ${h.sy}) translate(-50%, -50%)`}onDocumentMouseUp(t){if(this.editor&&t.target!==this.editor){const e=this.editor.innerText.replace(/\n$/,"")||"";this.setCellText(e!==""?e:null),this.removeElement()}}onCellDblClick({e:t}){this.editor||(t.stopPropagation(),this.removeElement(),this.event=t,this.createElement(),this.updateEditor(),this.autoFocus(),this.delegateDocumentEvents(this.options.documentEvents))}onMouseDown(t){t.stopPropagation()}autoFocus(){setTimeout(()=>{this.editor&&(this.editor.focus(),this.selectText())})}selectText(){if(window.getSelection&&this.editor){const t=document.createRange(),e=window.getSelection();t.selectNodeContents(this.editor),e.removeAllRanges(),e.addRange(t)}}getCellText(){const{getText:t}=this.options;if(typeof t=="function")return de(t,this.cellView,{cell:this.cell,index:this.labelIndex});if(typeof t=="string"){if(this.cell.isNode())return this.cell.attr(t);if(this.cell.isEdge()&&this.labelIndex!==-1)return this.cell.prop(`labels/${this.labelIndex}/attrs/${t}`)}}setCellText(t){const e=this.options.setText;if(typeof e=="function"){de(e,this.cellView,{cell:this.cell,value:t,index:this.labelIndex,distance:this.distance});return}if(typeof e=="string"){if(this.cell.isNode()){t!==null&&this.cell.attr(e,t);return}if(this.cell.isEdge()){const i=this.cell;if(this.labelIndex===-1){if(t){const r={position:{distance:this.distance},attrs:{}};Zv(r,`attrs/${e}`,t),i.appendLabel(r)}}else t!==null?i.prop(`labels/${this.labelIndex}/attrs/${e}`,t):typeof this.labelIndex=="number"&&i.removeLabelAt(this.labelIndex)}}}onRemove(){const t=this.cellView;t&&t.off("cell:dblclick",this.dblClick),this.removeElement()}}(function(n){n.config({tagName:"div",isSVGElement:!1,events:{mousedown:"onMouseDown",touchstart:"onMouseDown"},documentEvents:{mouseup:"onDocumentMouseUp",touchend:"onDocumentMouseUp",touchcancel:"onDocumentMouseUp"}})})(cv||(cv={}));(function(n){n.NodeEditor=n.define({attrs:{fontSize:14,fontFamily:"Arial, helvetica, sans-serif",color:"#000",backgroundColor:"#fff"},getText:"text/text",setText:"text/text"}),n.EdgeEditor=n.define({attrs:{fontSize:14,fontFamily:"Arial, helvetica, sans-serif",color:"#000",backgroundColor:"#fff"},labelAddable:!0,getText:"label/text",setText:"label/text"})})(cv||(cv={}));var oot=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e},fv;(function(n){n.presets={boundary:dS,button:dd,"button-remove":dd.Remove,"node-editor":cv.NodeEditor},n.registry=Dn.create({type:"node tool",process(t,e){if(typeof e=="function")return e;let i=Wn.ToolItem;const{inherit:r}=e,o=oot(e,["inherit"]);if(r){const a=this.get(r);a==null?this.onNotFound(r,"inherited"):i=a}return o.name==null&&(o.name=t),i.define.call(i,o)}}),n.registry.register(n.presets,!0)})(fv||(fv={}));var gv;(function(n){n.presets={boundary:dS,vertices:vb,segments:mb,button:dd,"button-remove":dd.Remove,"source-anchor":eFt,"target-anchor":iFt,"source-arrowhead":rFt,"target-arrowhead":oFt,"edge-editor":cv.EdgeEditor},n.registry=Dn.create({type:"edge tool",process(t,e){if(typeof e=="function")return e;let i=Wn.ToolItem;const{inherit:r}=e,o=oot(e,["inherit"]);if(r){const a=this.get(r);a==null?this.onNotFound(r,"inherited"):i=a}return o.name==null&&(o.name=t),i.define.call(i,o)}}),n.registry.register(n.presets,!0)})(gv||(gv={}));const aFt=Kh("center"),sFt=Kh("topCenter"),lFt=Kh("bottomCenter"),hFt=Kh("leftMiddle"),uFt=Kh("rightMiddle"),dFt=Kh("topLeft"),cFt=Kh("topRight"),fFt=Kh("bottomLeft"),gFt=Kh("bottomRight");function Kh(n){return function(t,e,i,r={}){const o=r.rotate?t.getUnrotatedBBoxOfElement(e):t.getBBoxOfElement(e),a=o[n];a.x+=_s(r.dx,o.width),a.y+=_s(r.dy,o.height);const s=t.cell;return r.rotate?a.rotate(-s.getAngle(),s.getBBox().getCenter()):a}}function IM(n){return function(t,e,i,r){if(i instanceof Element){const o=this.graph.findViewByElem(i);let a;if(o)if(o.isEdgeElement(i)){const s=r.fixedAt!=null?r.fixedAt:"50%";a=aot(o,s)}else a=o.getBBoxOfElement(i).getCenter();else a=new Q;return n.call(this,t,e,a,r)}return n.apply(this,arguments)}}function aot(n,t){const e=Nh(t),i=typeof t=="string"?parseFloat(t):t;return e?n.getPointAtRatio(i/100):n.getPointAtLength(i)}const pFt=function(n,t,e,i){const r=Ri.normalize(n.cell.getAngle()),o=n.getBBoxOfElement(t),a=o.getCenter(),s=o.getTopLeft(),l=o.getBottomRight();let h=i.padding;if(Number.isFinite(h)||(h=0),s.y+h<=e.y&&e.y<=l.y-h){const u=e.y-a.y;a.x+=r===0||r===180?0:u*1/Math.tan(Ri.toRad(r)),a.y+=u}else if(s.x+h<=e.x&&e.x<=l.x-h){const u=e.x-a.x;a.y+=r===90||r===270?0:u*Math.tan(Ri.toRad(r)),a.x+=u}return a},vFt=IM(pFt),mFt=function(n,t,e,i,r){const o=n.cell.getConnectionPoint(this.cell,r);return(i.dx||i.dy)&&o.translate(i.dx||0,i.dy||0),o},yFt=function(n,t,e,i){let r,o=0,a;const s=n.cell;i.rotate?(r=n.getUnrotatedBBoxOfElement(t),a=s.getBBox().getCenter(),o=s.getAngle()):r=n.getBBoxOfElement(t);const l=i.padding;l!=null&&Number.isFinite(l)&&r.inflate(l),i.rotate&&e.rotate(o,a);const h=r.getNearestSideToPoint(e);let u;switch(h){case"left":u=r.getLeftMiddle();break;case"right":u=r.getRightMiddle();break;case"top":u=r.getTopCenter();break;case"bottom":u=r.getBottomCenter();break}const d=i.direction;return d==="H"?(h==="top"||h==="bottom")&&(e.x<=r.x+r.width?u=r.getLeftMiddle():u=r.getRightMiddle()):d==="V"&&(e.y<=r.y+r.height?u=r.getTopCenter():u=r.getBottomCenter()),i.rotate?u.rotate(-o,a):u},bFt=IM(yFt),_Ft=Object.freeze(Object.defineProperty({__proto__:null,bottom:lFt,bottomLeft:fFt,bottomRight:gFt,center:aFt,left:hFt,midSide:bFt,nodeCenter:mFt,orth:vFt,right:uFt,top:sFt,topLeft:dFt,topRight:cFt},Symbol.toStringTag,{value:"Module"}));var pv;(function(n){n.presets=_Ft,n.registry=Dn.create({type:"node endpoint"}),n.registry.register(n.presets,!0)})(pv||(pv={}));const CFt=function(n,t,e,i){let r=i.ratio!=null?i.ratio:.5;return r>1&&(r/=100),n.getPointAtRatio(r)},wFt=function(n,t,e,i){const r=i.length!=null?i.length:20;return n.getPointAtLength(r)},sot=function(n,t,e,i){const r=n.getClosestPoint(e);return r??new Q},xFt=IM(sot),SFt=function(n,t,e,i){const o=n.getConnection(),a=n.getConnectionSubdivisions(),s=new Ut(e.clone().translate(0,1e6),e.clone().translate(0,-1e6)),l=new Ut(e.clone().translate(1e6,0),e.clone().translate(-1e6,0)),h=s.intersect(o,{segmentSubdivisions:a}),u=l.intersect(o,{segmentSubdivisions:a}),d=[];return h&&d.push(...h),u&&d.push(...u),d.length>0?e.closest(d):i.fallbackAt!=null?aot(n,i.fallbackAt):de(sot,this,n,t,e,i)},AFt=IM(SFt),TFt=Object.freeze(Object.defineProperty({__proto__:null,closest:xFt,length:wFt,orth:AFt,ratio:CFt},Symbol.toStringTag,{value:"Module"}));var vv;(function(n){n.presets=TFt,n.registry=Dn.create({type:"edge endpoint"}),n.registry.register(n.presets,!0)})(vv||(vv={}));function OM(n,t,e){let i;if(typeof e=="object"){if(Number.isFinite(e.y)){const o=new Ut(t,n),{start:a,end:s}=o.parallel(e.y);t=a,n=s}i=e.x}else i=e;if(i==null||!Number.isFinite(i))return n;const r=n.distance(t);return i===0&&r>0?n:n.move(t,-Math.min(i,r-1))}function gS(n){const t=n.getAttribute("stroke-width");return t===null?0:parseFloat(t)||0}function MFt(n){if(n==null)return null;let t=n;do{let e=t.tagName;if(typeof e!="string")return null;if(e=e.toUpperCase(),e==="G")t=t.firstElementChild;else if(e==="TITLE")t=t.nextElementSibling;else break}while(t);return t}const lot=function(n,t,e,i){const r=t.getBBoxOfElement(e);i.stroked&&r.inflate(gS(e)/2);const o=n.intersect(r),a=o&&o.length?n.start.closest(o):n.end;return OM(a,n.start,i.offset)},RFt=function(n,t,e,i,r){const o=t.cell,a=o.isNode()?o.getAngle():0;if(a===0)return de(lot,this,n,t,e,i,r);const s=t.getUnrotatedBBoxOfElement(e);i.stroked&&s.inflate(gS(e)/2);const l=s.getCenter(),h=n.clone().rotate(a,l),u=h.setLength(1e6).intersect(s),d=u&&u.length?h.start.closest(u).rotate(-a,l):n.end;return OM(d,n.start,i.offset)},PFt=function(n,t,e,i){let r,o;const a=n.end,s=i.selector;if(typeof s=="string"?r=t.findOne(s):Array.isArray(s)?r=FF(e,s):r=MFt(e),!ld(r)){if(r===e||!ld(e))return a;r=e}const l=t.getShapeOfElement(r),h=t.getMatrixOfElement(r),u=t.getRootTranslatedMatrix(),d=t.getRootRotatedMatrix(),c=u.multiply(d).multiply(h),f=c.inverse(),g=bi.transformLine(n,f),p=g.start.clone(),v=t.getDataOfElement(r);if(i.insideout===!1){v.shapeBBox==null&&(v.shapeBBox=l.bbox());const _=v.shapeBBox;if(_!=null&&_.containsPoint(p))return a}i.extrapolate===!0&&g.setLength(1e6);let m;if(De.isPath(l)){const _=i.precision||2;v.segmentSubdivisions==null&&(v.segmentSubdivisions=l.getSegmentSubdivisions({precision:_})),m={precision:_,segmentSubdivisions:v.segmentSubdivisions},o=g.intersect(l,m)}else o=g.intersect(l);o?Array.isArray(o)&&(o=p.closest(o)):i.sticky===!0&&(Tt.isRectangle(l)?o=l.getNearestPointToPoint(p):Ts.isEllipse(l)?o=l.intersectsWithLineFromCenterToPoint(p):o=l.closestPoint(p,m));const y=o?bi.transformPoint(o,c):a;let b=i.offset||0;return i.stroked!==!1&&(typeof b=="object"?(b=Object.assign({},b),b.x==null&&(b.x=0),b.x+=gS(r)/2):b+=gS(r)/2),OM(y,n.start,b)};function BFt(n,t,e=0){const{start:i,end:r}=n;let o,a,s,l;switch(t){case"left":l="x",o=r,a=i,s=-1;break;case"right":l="x",o=i,a=r,s=1;break;case"top":l="y",o=r,a=i,s=-1;break;case"bottom":l="y",o=i,a=r,s=1;break;default:return}i[l]<r[l]?o[l]=a[l]:a[l]=o[l],Number.isFinite(e)&&(o[l]+=s*e,a[l]+=s*e)}const kFt=function(n,t,e,i){const{alignOffset:r,align:o}=i;return o&&BFt(n,o,r),OM(n.end,n.start,i.offset)},LFt=Object.freeze(Object.defineProperty({__proto__:null,anchor:kFt,bbox:lot,boundary:PFt,rect:RFt},Symbol.toStringTag,{value:"Module"}));var mv;(function(n){n.presets=LFt,n.registry=Dn.create({type:"connection point"}),n.registry.register(n.presets,!0)})(mv||(mv={}));const EFt=function(n){return[...n]},DFt=function(n,t,e){const i=t.side||"bottom",r=Ef(t.padding||40),o=e.sourceBBox,a=e.targetBBox,s=o.getCenter(),l=a.getCenter();let h,u,d;switch(i){case"top":d=-1,h="y",u="height";break;case"left":d=-1,h="x",u="width";break;case"right":d=1,h="x",u="width";break;case"bottom":default:d=1,h="y",u="height";break}return s[h]+=d*(o[u]/2+r[i]),l[h]+=d*(a[u]/2+r[i]),d*(s[h]-l[h])>0?l[h]=s[h]:s[h]=l[h],[s.toJSON(),...n,l.toJSON()]};function c1(n){return new Tt(n.x,n.y,0,0)}function pS(n={}){const t=Ef(n.padding||20);return{x:-t.left,y:-t.top,width:t.left+t.right,height:t.top+t.bottom}}function hot(n,t={}){return n.sourceBBox.clone().moveAndExpand(pS(t))}function uot(n,t={}){return n.targetBBox.clone().moveAndExpand(pS(t))}function IFt(n,t={}){return n.sourceAnchor?n.sourceAnchor:hot(n,t).getCenter()}function OFt(n,t={}){return n.targetAnchor?n.targetAnchor:uot(n,t).getCenter()}const dot=function(n,t,e){let i=hot(e,t),r=uot(e,t);const o=IFt(e,t),a=OFt(e,t);i=i.union(c1(o)),r=r.union(c1(a));const s=n.map(u=>Q.create(u));s.unshift(o),s.push(a);let l=null;const h=[];for(let u=0,d=s.length-1;u<d;u+=1){let c=null;const f=s[u],g=s[u+1],p=ga.getBearing(f,g)!=null;if(u===0)u+1===d?i.intersectsWithRect(r.clone().inflate(1))?c=ga.insideNode(f,g,i,r):p||(c=ga.nodeToNode(f,g,i,r)):i.containsPoint(g)?c=ga.insideNode(f,g,i,c1(g).moveAndExpand(pS(t))):p||(c=ga.nodeToVertex(f,g,i));else if(u+1===d){const v=p&&ga.getBearing(g,f)===l;r.containsPoint(f)||v?c=ga.insideNode(f,g,c1(f).moveAndExpand(pS(t)),r,l):p||(c=ga.vertexToNode(f,g,r,l))}else p||(c=ga.vertexToVertex(f,g,l));c?(h.push(...c.points),l=c.direction):l=ga.getBearing(f,g),u+1<d&&h.push(g)}return h};var ga;(function(n){const t={N:"S",S:"N",E:"W",W:"E"},e={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function i(d,c,f){let g=new Q(d.x,c.y);return f.containsPoint(g)&&(g=new Q(c.x,d.y)),g}function r(d,c){return d[c==="W"||c==="E"?"width":"height"]}n.getBBoxSize=r;function o(d,c){return d.x===c.x?d.y>c.y?"N":"S":d.y===c.y?d.x>c.x?"W":"E":null}n.getBearing=o;function a(d,c,f){const g=new Q(d.x,c.y),p=new Q(c.x,d.y),v=o(d,g),m=o(d,p),y=f?t[f]:null,b=v===f||v!==y&&(m===y||m!==f)?g:p;return{points:[b],direction:o(b,c)}}n.vertexToVertex=a;function s(d,c,f){const g=i(d,c,f);return{points:[g],direction:o(g,c)}}n.nodeToVertex=s;function l(d,c,f,g){const p=[new Q(d.x,c.y),new Q(c.x,d.y)],v=p.filter(b=>!f.containsPoint(b)),m=v.filter(b=>o(b,d)!==g);let y;if(m.length>0)return y=m.filter(b=>o(d,b)===g).pop(),y=y||m[0],{points:[y],direction:o(y,c)};{y=Lut(p,v)[0];const b=Q.create(c).move(y,-r(f,g)/2);return{points:[i(b,d,f),b],direction:o(b,c)}}}n.vertexToNode=l;function h(d,c,f,g){let p=s(c,d,g);const v=p.points[0];if(f.containsPoint(v)){p=s(d,c,f);const m=p.points[0];if(g.containsPoint(m)){const y=Q.create(d).move(m,-r(f,o(d,m))/2),b=Q.create(c).move(v,-r(g,o(c,v))/2),_=new Ut(y,b).getCenter(),w=s(d,_,f),C=a(_,c,w.direction);p.points=[w.points[0],C.points[0]],p.direction=C.direction}}return p}n.nodeToNode=h;function u(d,c,f,g,p){const v=f.union(g).inflate(1),m=v.getCenter(),y=m.distance(c)>m.distance(d),b=y?c:d,_=y?d:c;let w,C,x;p?(w=Q.fromPolar(v.width+v.height,e[p],b),w=v.getNearestPointToPoint(w).move(w,-1)):w=v.getNearestPointToPoint(b).move(b,1),C=i(w,_,v);let S;w.round().equals(C.round())?(C=Q.fromPolar(v.width+v.height,Ri.toRad(w.theta(b))+Math.PI/2,_),C=v.getNearestPointToPoint(C).move(_,1).round(),x=i(w,C,v),S=y?[C,x,w]:[w,x,C]):S=y?[C,w]:[w,C];const A=o(y?w:C,c);return{points:S,direction:A}}n.insideNode=u})(ga||(ga={}));const HFt={step:10,maxLoopCount:2e3,precision:1,maxDirectionChange:90,perpendicular:!0,excludeTerminals:[],excludeNodes:[],excludeShapes:[],startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost(){return Su(this.step,this)},directions(){const n=Su(this.step,this),t=Su(this.cost,this);return[{cost:t,offsetX:n,offsetY:0},{cost:t,offsetX:-n,offsetY:0},{cost:t,offsetX:0,offsetY:n},{cost:t,offsetX:0,offsetY:-n}]},penalties(){const n=Su(this.step,this);return{0:0,45:n/2,90:n/2}},paddingBox(){const n=Su(this.step,this);return{x:-n,y:-n,width:2*n,height:2*n}},fallbackRouter:dot,draggingRouter:null,snapToGrid:!0};function Su(n,t){return typeof n=="function"?n.call(t):n}function zFt(n){const t=Object.keys(n).reduce((e,i)=>{const r=e;return i==="fallbackRouter"||i==="draggingRouter"||i==="fallbackRoute"?r[i]=n[i]:r[i]=Su(n[i],n),e},{});if(t.padding){const e=Ef(t.padding);t.paddingBox={x:-e.left,y:-e.top,width:e.left+e.right,height:e.top+e.bottom}}return t.directions.forEach(e=>{const i=new Q(0,0),r=new Q(e.offsetX,e.offsetY);e.angle=Ri.normalize(i.theta(r))}),t}const W9=1,V9=2;class FFt{constructor(){this.items=[],this.hash={},this.values={}}add(t,e){this.hash[t]?this.items.splice(this.items.indexOf(t),1):this.hash[t]=W9,this.values[t]=e;const i=Eut(this.items,t,r=>this.values[r]);this.items.splice(i,0,t)}pop(){const t=this.items.shift();return t&&(this.hash[t]=V9),t}isOpen(t){return this.hash[t]===W9}isClose(t){return this.hash[t]===V9}isEmpty(){return this.items.length===0}}class NFt{constructor(t){this.options=t,this.mapGridSize=100,this.map={}}build(t,e){const i=this.options,r=i.excludeTerminals.reduce((h,u)=>{const d=e[u];if(d){const c=t.getCell(d.cell);c&&h.push(c)}return h},[]);let o=[];const a=t.getCell(e.getSourceCellId());a&&(o=PN(o,a.getAncestors().map(h=>h.id)));const s=t.getCell(e.getTargetCellId());s&&(o=PN(o,s.getAncestors().map(h=>h.id)));const l=this.mapGridSize;return t.getNodes().reduce((h,u)=>{const d=r.some(v=>v.id===u.id),c=u.shape?i.excludeShapes.includes(u.shape):!1,f=i.excludeNodes.some(v=>typeof v=="string"?u.id===v:v===u),g=o.includes(u.id),p=c||d||f||g;if(u.isVisible()&&!p){const v=u.getBBox().moveAndExpand(i.paddingBox),m=v.getOrigin().snapToGrid(l),y=v.getCorner().snapToGrid(l);for(let b=m.x;b<=y.x;b+=l)for(let _=m.y;_<=y.y;_+=l){const w=new Q(b,_).toString();h[w]==null&&(h[w]=[]),h[w].push(v)}}return h},this.map),this}isAccessible(t){const e=t.clone().snapToGrid(this.mapGridSize).toString(),i=this.map[e];return i?i.every(r=>!r.containsPoint(t)):!0}}function cot(n,t){const e=n.sourceBBox.clone();return t&&t.paddingBox?e.moveAndExpand(t.paddingBox):e}function fot(n,t){const e=n.targetBBox.clone();return t&&t.paddingBox?e.moveAndExpand(t.paddingBox):e}function got(n,t){return n.sourceAnchor?n.sourceAnchor:cot(n,t).getCenter()}function WFt(n,t){return n.targetAnchor?n.targetAnchor:fot(n,t).getCenter()}function GB(n,t,e,i,r){const o=360/e,a=n.theta(VFt(n,t,i,r)),s=Ri.normalize(a+o/2);return o*Math.floor(s/o)}function VFt(n,t,e,i){const r=i.step,o=t.x-n.x,a=t.y-n.y,s=o/e.x,l=a/e.y,h=s*r,u=l*r;return new Q(n.x+h,n.y+u)}function G9(n,t){const e=Math.abs(n-t);return e>180?360-e:e}function GFt(n,t){const e=t.step;return t.directions.forEach(i=>{i.gridOffsetX=i.offsetX/e*n.x,i.gridOffsetY=i.offsetY/e*n.y}),t.directions}function $Ft(n,t,e){return{source:t.clone(),x:$9(e.x-t.x,n),y:$9(e.y-t.y,n)}}function $9(n,t){if(!n)return t;const e=Math.abs(n),i=Math.round(e/t);if(!i)return e;const r=i*t,a=(e-r)/i;return t+a}function jFt(n,t){const e=t.source,i=Mi.snapToGrid(n.x-e.x,t.x)+e.x,r=Mi.snapToGrid(n.y-e.y,t.y)+e.y;return new Q(i,r)}function P0(n,t){return n.round(t)}function Lw(n,t,e){return P0(jFt(n.clone(),t),e)}function uy(n){return n.toString()}function $B(n){return new Q(n.x===0?0:Math.abs(n.x)/n.x,n.y===0?0:Math.abs(n.y)/n.y)}function j9(n,t){let e=1/0;for(let i=0,r=t.length;i<r;i+=1){const o=n.manhattanDistance(t[i]);o<e&&(e=o)}return e}function U9(n,t,e,i,r){const o=r.precision,a=r.directionMap,s=n.diff(t.getCenter()),l=Object.keys(a).reduce((h,u)=>{if(e.includes(u)){const d=a[u],c=new Q(n.x+d.x*(Math.abs(s.x)+t.width),n.y+d.y*(Math.abs(s.y)+t.height)),g=new Ut(n,c).intersect(t)||[];let p,v=null;for(let m=0;m<g.length;m+=1){const y=g[m],b=n.squaredDistance(y);(p==null||b>p)&&(p=b,v=y)}if(v){let m=Lw(v,i,o);t.containsPoint(m)&&(m=Lw(m.translate(d.x*i.x,d.y*i.y),i,o)),h.push(m)}}return h},[]);return t.containsPoint(n)||l.push(Lw(n,i,o)),l}function UFt(n,t,e,i,r){const o=[];let a=$B(r.diff(e)),s=uy(e),l=n[s],h;for(;l;){h=t[s];const c=$B(h.diff(l));c.equals(a)||(o.unshift(h),a=c),s=uy(l),l=n[s]}const u=t[s];return $B(u.diff(i)).equals(a)||o.unshift(u),o}function YFt(n,t,e,i,r){const o=r.precision;let a,s;Tt.isRectangle(t)?a=P0(got(n,r).clone(),o):a=P0(t.clone(),o),Tt.isRectangle(e)?s=P0(WFt(n,r).clone(),o):s=P0(e.clone(),o);const l=$Ft(r.step,a,s),h=a,u=s;let d,c;if(Tt.isRectangle(t)?d=U9(h,t,r.startDirections,l,r):d=[h],Tt.isRectangle(e)?c=U9(s,e,r.endDirections,l,r):c=[u],d=d.filter(f=>i.isAccessible(f)),c=c.filter(f=>i.isAccessible(f)),d.length>0&&c.length>0){const f=new FFt,g={},p={},v={};for(let T=0,M=d.length;T<M;T+=1){const R=d[T],L=uy(R);f.add(L,j9(R,c)),g[L]=R,v[L]=0}const m=r.previousDirectionAngle,y=m===void 0;let b,_;const w=GFt(l,r),C=w.length,x=c.reduce((T,M)=>{const R=uy(M);return T.push(R),T},[]),S=Q.equalPoints(d,c);let A=r.maxLoopCount;for(;!f.isEmpty()&&A>0;){const T=f.pop(),M=g[T],R=p[T],L=v[T],B=M.equals(h),P=R==null;let k;if(P?y?B?k=null:k=GB(h,M,C,l,r):k=m:k=GB(R,M,C,l,r),!(P&&S)&&x.indexOf(T)>=0)return r.previousDirectionAngle=k,UFt(p,g,M,h,u);for(let D=0;D<C;D+=1){b=w[D];const I=b.angle;if(_=G9(k,I),!(y&&B)&&_>r.maxDirectionChange)continue;const O=Lw(M.clone().translate(b.gridOffsetX||0,b.gridOffsetY||0),l,o),H=uy(O);if(f.isClose(H)||!i.isAccessible(O))continue;if(x.indexOf(H)>=0&&!O.equals(u)){const X=GB(O,u,C,l,r);if(G9(I,X)>r.maxDirectionChange)continue}const F=b.cost,N=B?0:r.penalties[_],$=L+F+N;(!f.isOpen(H)||$<v[H])&&(g[H]=O,p[H]=M,v[H]=$,f.add(H,$+j9(O,c)))}A-=1}}return r.fallbackRoute?de(r.fallbackRoute,this,h,u,r):null}function XFt(n,t=10){if(n.length<=1)return n;for(let e=0,i=n.length;e<i-1;e+=1){const r=n[e],o=n[e+1];if(r.x===o.x){const a=t*Math.round(r.x/t);r.x!==a&&(r.x=a,o.x=a)}else if(r.y===o.y){const a=t*Math.round(r.y/t);r.y!==a&&(r.y=a,o.y=a)}}return n}const qFt=function(n,t,e){const i=zFt(t),r=cot(e,i),o=fot(e,i),a=got(e,i),s=new NFt(i).build(e.graph.model,e.cell),l=n.map(f=>Q.create(f)),h=[];let u=a,d,c;for(let f=0,g=l.length;f<=g;f+=1){let p=null;if(d=c||r,c=l[f],c==null){c=o;const m=e.cell;if((m.getSourceCellId()==null||m.getTargetCellId()==null)&&typeof i.draggingRouter=="function"){const b=d===r?a:d,_=c.getOrigin();p=de(i.draggingRouter,e,b,_,i)}}if(p==null&&(p=YFt(e,d,c,s,i)),p===null)return de(i.fallbackRouter,this,n,i,e);const v=p[0];v&&v.equals(u)&&p.shift(),u=p[p.length-1]||u,h.push(...p)}return i.snapToGrid?XFt(h,e.graph.grid.getGridSize()):h},pot=function(n,t,e){return de(qFt,this,n,Object.assign(Object.assign({},HFt),t),e)},KFt={maxDirectionChange:45,directions(){const n=Su(this.step,this),t=Su(this.cost,this),e=Math.ceil(Math.sqrt(n*n<<1));return[{cost:t,offsetX:n,offsetY:0},{cost:e,offsetX:n,offsetY:n},{cost:t,offsetX:0,offsetY:n},{cost:e,offsetX:-n,offsetY:n},{cost:t,offsetX:-n,offsetY:0},{cost:e,offsetX:-n,offsetY:-n},{cost:t,offsetX:0,offsetY:-n},{cost:e,offsetX:n,offsetY:-n}]},fallbackRoute(n,t,e){const i=n.theta(t),r=[];let o={x:t.x,y:n.y},a={x:n.x,y:t.y};if(i%180>90){const b=o;o=a,a=b}const s=i%90<45?o:a,l=new Ut(n,s),h=90*Math.ceil(i/90),u=Q.fromPolar(l.squaredLength(),Ri.toRad(h+135),s),d=new Ut(t,u),c=l.intersectsWithLine(d),f=c||t,g=c?f:n,p=360/e.directions.length,v=g.theta(t),m=Ri.normalize(v+p/2),y=p*Math.floor(m/p);return e.previousDirectionAngle=y,f&&r.push(f.round()),r.push(t),r}},ZFt=function(n,t,e){return de(pot,this,n,Object.assign(Object.assign({},KFt),t),e)},JFt=function(n,t,e){const i=t.offset||32,r=t.min==null?16:t.min;let o=0,a=t.direction;const s=e.sourceBBox,l=e.targetBBox,h=s.getCenter(),u=l.getCenter();if(typeof i=="number"&&(o=i),a==null){let m=l.left-s.right,y=l.top-s.bottom;m>=0&&y>=0?a=m>=y?"L":"T":m<=0&&y>=0?(m=s.left-l.right,m>=0?a=m>=y?"R":"T":a="T"):m>=0&&y<=0?(y=s.top-l.bottom,y>=0?a=m>=y?"L":"B":a="L"):(m=s.left-l.right,y=s.top-l.bottom,m>=0&&y>=0?a=m>=y?"R":"B":m<=0&&y>=0?a="B":m>=0&&y<=0?a="R":a=Math.abs(m)>Math.abs(y)?"R":"B")}a==="H"?a=u.x-h.x>=0?"L":"R":a==="V"&&(a=u.y-h.y>=0?"T":"B"),i==="center"&&(a==="L"?o=(l.left-s.right)/2:a==="R"?o=(s.left-l.right)/2:a==="T"?o=(l.top-s.bottom)/2:a==="B"&&(o=(s.top-l.bottom)/2));let d,c,f;const g=a==="L"||a==="R";if(g){if(u.y===h.y)return[...n];f=a==="L"?1:-1,d="x",c="width"}else{if(u.x===h.x)return[...n];f=a==="T"?1:-1,d="y",c="height"}const p=h.clone(),v=u.clone();if(p[d]+=f*(s[c]/2+o),v[d]-=f*(l[c]/2+o),g){const m=p.x,y=v.x,b=s.width/2+r,_=l.width/2+r;u.x>h.x?y<=m&&(p.x=Math.max(y,h.x+b),v.x=Math.min(m,u.x-_)):y>=m&&(p.x=Math.min(y,h.x-b),v.x=Math.max(m,u.x+_))}else{const m=p.y,y=v.y,b=s.height/2+r,_=l.height/2+r;u.y>h.y?y<=m&&(p.y=Math.max(y,h.y+b),v.y=Math.min(m,u.y-_)):y>=m&&(p.y=Math.min(y,h.y-b),v.y=Math.max(m,u.y+_))}return[p.toJSON(),...n,v.toJSON()]};function kg(n,t){if(t!=null&&t!==!1){const e=typeof t=="boolean"?0:t;if(e>0){const i=Q.create(n[1]).move(n[2],e),r=Q.create(n[1]).move(n[0],e);return[i.toJSON(),...n,r.toJSON()]}{const i=n[1];return[Object.assign({},i),...n,Object.assign({},i)]}}return n}const QFt=function(n,t,e){const i=t.width||50,o=(t.height||80)/2,a=t.angle||"auto",s=e.sourceAnchor,l=e.targetAnchor,h=e.sourceBBox,u=e.targetBBox;if(s.equals(l)){const d=m=>{const y=Ri.toRad(m),b=Math.sin(y),_=Math.cos(y),w=new Q(s.x+_*i,s.y+b*i),C=new Q(w.x-_*o,w.y-b*o),x=C.clone().rotate(-90,w),S=C.clone().rotate(90,w);return[x.toJSON(),w.toJSON(),S.toJSON()]},c=m=>{const y=s.clone().move(m,-1),b=new Ut(y,m);return!h.containsPoint(m)&&!h.intersectsWithLine(b)},f=[0,90,180,270,45,135,225,315];if(typeof a=="number")return kg(d(a),t.merge);const g=h.getCenter();if(g.equals(s))return kg(d(0),t.merge);const p=g.angleBetween(s,g.clone().translate(1,0));let v=d(p);if(c(v[1]))return kg(v,t.merge);for(let m=1,y=f.length;m<y;m+=1)if(v=d(p+f[m]),c(v[1]))return kg(v,t.merge);return kg(v,t.merge)}{const d=new Ut(s,l);let c=d.parallel(-i),f=c.getCenter(),g=c.start.clone().move(c.end,o),p=c.end.clone().move(c.start,o);const v=d.parallel(-1),m=new Ut(v.start,f),y=new Ut(v.end,f);if((h.containsPoint(f)||u.containsPoint(f)||h.intersectsWithLine(m)||h.intersectsWithLine(y)||u.intersectsWithLine(m)||u.intersectsWithLine(y))&&(c=d.parallel(i),f=c.getCenter(),g=c.start.clone().move(c.end,o),p=c.end.clone().move(c.start,o)),t.merge){const b=new Ut(s,l),_=new Ut(f,b.center).setLength(Number.MAX_SAFE_INTEGER),w=h.intersectsWithLine(_),C=u.intersectsWithLine(_),x=w?Array.isArray(w)?w:[w]:[];C&&(Array.isArray(C)?x.push(...C):x.push(C));const S=b.center.closest(x);S?(e.sourceAnchor=S.clone(),e.targetAnchor=S.clone()):(e.sourceAnchor=b.center.clone(),e.targetAnchor=b.center.clone())}return kg([g.toJSON(),f.toJSON(),p.toJSON()],t.merge)}},t3t=Object.freeze(Object.defineProperty({__proto__:null,er:JFt,loop:QFt,manhattan:pot,metro:ZFt,normal:EFt,oneSide:DFt,orth:dot},Symbol.toStringTag,{value:"Module"}));var zu;(function(n){n.presets=t3t,n.registry=Dn.create({type:"router"}),n.registry.register(n.presets,!0)})(zu||(zu={}));const e3t=function(n,t,e,i={}){const r=[n,...e,t],o=new Rn(r),a=new De(o);return i.raw?a:a.serialize()},i3t=function(n,t,e,i={}){const r=e.length===3?0:1,o=Q.create(e[0+r]),a=Q.create(e[2+r]),s=Q.create(e[1+r]);if(!Q.equals(n,t)){const h=new Q((n.x+t.x)/2,(n.y+t.y)/2),u=h.angleBetween(Q.create(n).rotate(90,h),s);u>1&&(o.rotate(180-u,h),a.rotate(180-u,h),s.rotate(180-u,h))}const l=`
     M ${n.x} ${n.y}
     Q ${o.x} ${o.y} ${s.x} ${s.y}
     Q ${a.x} ${a.y} ${t.x} ${t.y}
  `;return i.raw?De.parse(l):l},n3t=function(n,t,e,i={}){const r=new De;r.appendSegment(De.createSegment("M",n));const o=1/3,a=2/3,s=i.radius||10;let l,h;for(let u=0,d=e.length;u<d;u+=1){const c=Q.create(e[u]),f=e[u-1]||n,g=e[u+1]||t;l=h||c.distance(f)/2,h=c.distance(g)/2;const p=-Math.min(s,l),v=-Math.min(s,h),m=c.clone().move(f,p).round(),y=c.clone().move(g,v).round(),b=new Q(o*m.x+a*c.x,a*c.y+o*m.y),_=new Q(o*y.x+a*c.x,a*c.y+o*y.y);r.appendSegment(De.createSegment("L",m)),r.appendSegment(De.createSegment("C",b,_,y))}return r.appendSegment(De.createSegment("L",t)),i.raw?r:r.serialize()},r3t=function(n,t,e,i={}){let r,o=i.direction;if(e&&e.length!==0){const a=[n,...e,t],s=Zo.throughPoints(a);r=new De(s)}else if(r=new De,r.appendSegment(De.createSegment("M",n)),o||(o=Math.abs(n.x-t.x)>=Math.abs(n.y-t.y)?"H":"V"),o==="H"){const a=(n.x+t.x)/2;r.appendSegment(De.createSegment("C",a,n.y,a,t.y,t.x,t.y))}else{const a=(n.y+t.y)/2;r.appendSegment(De.createSegment("C",n.x,a,t.x,a,t.x,t.y))}return i.raw?r:r.serialize()},Y9=1,f1=1/3,g1=2/3;function o3t(n){let t=n.graph._jumpOverUpdateList;if(t==null&&(t=n.graph._jumpOverUpdateList=[],n.graph.on("cell:mouseup",()=>{const e=n.graph._jumpOverUpdateList;setTimeout(()=>{for(let i=0;i<e.length;i+=1)e[i].update()})}),n.graph.on("model:reseted",()=>{t=n.graph._jumpOverUpdateList=[]})),t.indexOf(n)<0){t.push(n);const e=()=>t.splice(t.indexOf(n),1);n.cell.once("change:connector",e),n.cell.once("removed",e)}}function jB(n,t,e=[]){const i=[n,...e,t],r=[];return i.forEach((o,a)=>{const s=i[a+1];s!=null&&r.push(new Ut(o,s))}),r}function a3t(n,t){const e=[];return t.forEach(i=>{const r=n.intersectsWithLine(i);r&&e.push(r)}),e}function X9(n,t){return new Ut(n,t).squaredLength()}function s3t(n,t,e){return t.reduce((i,r,o)=>{if(vS.includes(r))return i;const a=i.pop()||n,s=Q.create(r).move(a.start,-e);let l=Q.create(r).move(a.start,+e);const h=t[o+1];if(h!=null){const c=l.distance(h);c<=e&&(l=h.move(a.start,c),vS.push(h))}else if(s.distance(a.end)<e*2+Y9)return i.push(a),i;if(l.distance(a.start)<e*2+Y9)return i.push(a),i;const d=new Ut(s,l);return yb.push(d),i.push(new Ut(a.start,s),d,new Ut(l,a.end)),i},[])}function q9(n,t,e,i){const r=new De;let o;return o=De.createSegment("M",n[0].start),r.appendSegment(o),n.forEach((a,s)=>{if(yb.includes(a)){let l,h,u,d;if(e==="arc"){l=-90,h=a.start.diff(a.end),(h.x<0||h.x===0&&h.y<0)&&(l+=180);const f=a.getCenter(),g=new Ut(f,a.end).rotate(l,f);let p;p=new Ut(a.start,f),u=p.pointAt(2/3).rotate(l,a.start),d=g.pointAt(1/3).rotate(-l,g.end),o=De.createSegment("C",u,d,g.end),r.appendSegment(o),p=new Ut(f,a.end),u=g.pointAt(1/3).rotate(l,g.end),d=p.pointAt(1/3).rotate(-l,a.end),o=De.createSegment("C",u,d,a.end),r.appendSegment(o)}else if(e==="gap")o=De.createSegment("M",a.end),r.appendSegment(o);else if(e==="cubic"){l=a.start.theta(a.end);const c=t*.6;let f=t*1.35;h=a.start.diff(a.end),(h.x<0||h.x===0&&h.y<0)&&(f*=-1),u=new Q(a.start.x+c,a.start.y+f).rotate(l,a.start),d=new Q(a.end.x-c,a.end.y+f).rotate(l,a.end),o=De.createSegment("C",u,d,a.end),r.appendSegment(o)}}else{const l=n[s+1];i===0||!l||yb.includes(l)?(o=De.createSegment("L",a.end),r.appendSegment(o)):l3t(i,r,a.end,a.start,l.end)}}),r}function l3t(n,t,e,i,r){const o=e.distance(i)/2,a=e.distance(r)/2,s=-Math.min(n,o),l=-Math.min(n,a),h=e.clone().move(i,s).round(),u=e.clone().move(r,l).round(),d=new Q(f1*h.x+g1*e.x,g1*e.y+f1*h.y),c=new Q(f1*u.x+g1*e.x,g1*e.y+f1*u.y);let f;f=De.createSegment("L",h),t.appendSegment(f),f=De.createSegment("C",d,c,u),t.appendSegment(f)}let yb,vS;const h3t=function(n,t,e,i={}){yb=[],vS=[],o3t(this);const r=i.size||5,o=i.type||"arc",a=i.radius||0,s=i.ignoreConnectors||["smooth"],l=this.graph,u=l.model.getEdges();if(u.length===1)return q9(jB(n,t,e),r,o,a);const d=this.cell,c=u.indexOf(d),f=l.options.connecting.connector||{},g=u.filter((_,w)=>{const C=_.getConnector()||f;return s.includes(C.name)?!1:w>c?C.name!=="jumpover":!0}),p=g.map(_=>l.findViewByCell(_)),v=jB(n,t,e),m=p.map(_=>_==null?[]:_===this?v:jB(_.sourcePoint,_.targetPoint,_.routePoints)),y=[];v.forEach(_=>{const w=g.reduce((C,x,S)=>{if(x!==d){const A=a3t(_,m[S]);C.push(...A)}return C},[]).sort((C,x)=>X9(_.start,C)-X9(_.start,x));w.length>0?y.push(...s3t(_,w,r)):y.push(_)});const b=q9(y,r,o,a);return yb=[],vS=[],i.raw?b:b.serialize()},u3t=Object.freeze(Object.defineProperty({__proto__:null,jumpover:h3t,loop:i3t,normal:e3t,rounded:n3t,smooth:r3t},Symbol.toStringTag,{value:"Module"}));var gf;(function(n){n.presets=u3t,n.registry=Dn.create({type:"connector"}),n.registry.register(n.presets,!0)})(gf||(gf={}));var d3t=function(n,t,e,i){var r=arguments.length,o=r<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(t,e,o):a(t,e))||o);return r>3&&o&&Object.defineProperty(t,e,o),o};class vot extends Qo{constructor(t={}){super(),this.pending=!1,this.changing=!1,this.data={},this.mutate(sn(t)),this.changed={}}mutate(t,e={}){const i=e.unset===!0,r=e.silent===!0,o=[],a=this.changing;this.changing=!0,a||(this.previous=sn(this.data),this.changed={});const s=this.data,l=this.previous,h=this.changed;if(Object.keys(t).forEach(u=>{const d=u,c=t[d];bh(s[d],c)||o.push(d),bh(l[d],c)?delete h[d]:h[d]=c,i?delete s[d]:s[d]=c}),!r&&o.length>0&&(this.pending=!0,this.pendingOptions=e,o.forEach(u=>{this.emit("change:*",{key:u,options:e,store:this,current:s[u],previous:l[u]})})),a)return this;if(!r)for(;this.pending;)this.pending=!1,this.emit("changed",{current:s,previous:l,store:this,options:this.pendingOptions});return this.pending=!1,this.changing=!1,this.pendingOptions=null,this}get(t,e){if(t==null)return this.data;const i=this.data[t];return i??e}getPrevious(t){if(this.previous){const e=this.previous[t];return e??void 0}}set(t,e,i){return t!=null&&(typeof t=="object"?this.mutate(t,e):this.mutate({[t]:e},i)),this}remove(t,e){const r={};let o;if(typeof t=="string")r[t]=void 0,o=e;else if(Array.isArray(t))t.forEach(a=>r[a]=void 0),o=e;else{for(const a in this.data)r[a]=void 0;o=t}return this.mutate(r,Object.assign(Object.assign({},o),{unset:!0})),this}getByPath(t){return FF(this.data,t,"/")}setByPath(t,e,i={}){const o=Array.isArray(t)?[...t]:t.split("/"),a=Array.isArray(t)?t.join("/"):t,s=o[0],l=o.length;if(i.propertyPath=a,i.propertyValue=e,i.propertyPathArray=o,l===1)this.set(s,e,i);else{const h={};let u=h,d=s;for(let g=1;g<l;g+=1){const p=o[g],v=Number.isFinite(Number(p));u=u[d]=v?[]:{},d=p}Zv(h,o,e,"/");const c=sn(this.data);i.rewrite&&A9(c,t,"/");const f=zn(c,h);this.set(s,f[s],i)}return this}removeByPath(t,e){const i=Array.isArray(t)?t:t.split("/"),r=i[0];if(i.length===1)this.remove(r,e);else{const o=i.slice(1),a=sn(this.get(r));a&&A9(a,o),this.set(r,a,e)}return this}hasChanged(t){return t==null?Object.keys(this.changed).length>0:t in this.changed}getChanges(t){if(t==null)return this.hasChanged()?sn(this.changed):null;const e=this.changing?this.previous:this.data,i={};let r;for(const o in t){const a=t[o];bh(e[o],a)||(i[o]=a,r=!0)}return r?sn(i):null}toJSON(){return sn(this.data)}clone(){const t=this.constructor;return new t(this.data)}dispose(){this.off(),this.data={},this.previous={},this.changed={},this.pending=!1,this.changing=!1,this.pendingOptions=null,this.trigger("disposed",{store:this})}}d3t([Qo.dispose()],vot.prototype,"dispose",null);class bb{constructor(t){this.cell=t,this.ids={},this.cache={}}get(){return Object.keys(this.ids)}start(t,e,i={},r="/"){const o=this.cell.getPropByPath(t),a=Dut(i,bb.defaultOptions),s=this.getTiming(a.timing),l=this.getInterp(a.interp,o,e);let h=0;const u=Array.isArray(t)?t.join(r):t,d=Array.isArray(t)?t:t.split(r),c=()=>{const f=new Date().getTime();h===0&&(h=f);let p=(f-h)/a.duration;p<1?this.ids[u]=requestAnimationFrame(c):p=1;const v=l(s(p));this.cell.setPropByPath(d,v),i.progress&&i.progress(Object.assign({progress:p,currentValue:v},this.getArgs(u))),p===1&&(this.cell.notify("transition:complete",this.getArgs(u)),i.complete&&i.complete(this.getArgs(u)),this.cell.notify("transition:finish",this.getArgs(u)),i.finish&&i.finish(this.getArgs(u)),this.clean(u))};return setTimeout(()=>{this.stop(t,void 0,r),this.cache[u]={startValue:o,targetValue:e,options:a},this.ids[u]=requestAnimationFrame(c),this.cell.notify("transition:start",this.getArgs(u)),i.start&&i.start(this.getArgs(u))},i.delay),this.stop.bind(this,t,r,i)}stop(t,e={},i="/"){const r=Array.isArray(t)?t:t.split(i);return Object.keys(this.ids).filter(o=>bh(r,o.split(i).slice(0,r.length))).forEach(o=>{cancelAnimationFrame(this.ids[o]);const a=this.cache[o],s=this.getArgs(o),l=Object.assign(Object.assign({},a.options),e),h=l.jumpedToEnd;h&&a.targetValue!=null&&(this.cell.setPropByPath(o,a.targetValue),this.cell.notify("transition:end",Object.assign({},s)),this.cell.notify("transition:complete",Object.assign({},s)),l.complete&&l.complete(Object.assign({},s)));const u=Object.assign({jumpedToEnd:h},s);this.cell.notify("transition:stop",Object.assign({},u)),l.stop&&l.stop(Object.assign({},u)),this.cell.notify("transition:finish",Object.assign({},s)),l.finish&&l.finish(Object.assign({},s)),this.clean(o)}),this}clean(t){delete this.ids[t],delete this.cache[t]}getTiming(t){return typeof t=="string"?If[t]:t}getInterp(t,e,i){return t?t(e,i):typeof i=="number"?Gc.number(e,i):typeof i=="string"?i[0]==="#"?Gc.color(e,i):Gc.unit(e,i):Gc.object(e,i)}getArgs(t){const e=this.cache[t];return{path:t,startValue:e.startValue,targetValue:e.targetValue,cell:this.cell}}}(function(n){n.defaultOptions={delay:10,duration:100,timing:"linear"}})(bb||(bb={}));var c3t=function(n,t,e,i){var r=arguments.length,o=r<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(t,e,o):a(t,e))||o);return r>3&&o&&Object.defineProperty(t,e,o),o},mot=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e};class Fe extends Qo{static config(t){const{markup:e,propHooks:i,attrHooks:r}=t,o=mot(t,["markup","propHooks","attrHooks"]);e!=null&&(this.markup=e),i&&(this.propHooks=this.propHooks.slice(),Array.isArray(i)?this.propHooks.push(...i):typeof i=="function"?this.propHooks.push(i):Object.values(i).forEach(a=>{typeof a=="function"&&this.propHooks.push(a)})),r&&(this.attrHooks=Object.assign(Object.assign({},this.attrHooks),r)),this.defaults=zn({},this.defaults,o)}static getMarkup(){return this.markup}static getDefaults(t){return t?this.defaults:sn(this.defaults)}static getAttrHooks(){return this.attrHooks}static applyPropHooks(t,e){return this.propHooks.reduce((i,r)=>r?de(r,t,i):i,e)}get[Symbol.toStringTag](){return Fe.toStringTag}constructor(t={}){super();const i=this.constructor.getDefaults(!0),r=zn({},this.preprocess(i),this.preprocess(t));this.id=r.id||rS(),this.store=new vot(r),this.animation=new bb(this),this.setup(),this.init(),this.postprocess(t)}init(){}get model(){return this._model}set model(t){this._model!==t&&(this._model=t)}preprocess(t,e){const i=t.id,o=this.constructor.applyPropHooks(this,t);return i==null&&e!==!0&&(o.id=rS()),o}postprocess(t){}setup(){this.store.on("change:*",t=>{const{key:e,current:i,previous:r,options:o}=t;this.notify("change:*",{key:e,options:o,current:i,previous:r,cell:this}),this.notify(`change:${e}`,{options:o,current:i,previous:r,cell:this});const a=e;(a==="source"||a==="target")&&this.notify("change:terminal",{type:a,current:i,previous:r,options:o,cell:this})}),this.store.on("changed",({options:t})=>this.notify("changed",{options:t,cell:this}))}notify(t,e){this.trigger(t,e);const i=this.model;return i&&(i.notify(`cell:${t}`,e),this.isNode()?i.notify(`node:${t}`,Object.assign(Object.assign({},e),{node:this})):this.isEdge()&&i.notify(`edge:${t}`,Object.assign(Object.assign({},e),{edge:this}))),this}isNode(){return!1}isEdge(){return!1}isSameStore(t){return this.store===t.store}get view(){return this.store.get("view")}get shape(){return this.store.get("shape","")}getProp(t,e){return t==null?this.store.get():this.store.get(t,e)}setProp(t,e,i){if(typeof t=="string")this.store.set(t,e,i);else{const r=this.preprocess(t,!0);this.store.set(zn({},this.getProp(),r),e),this.postprocess(t)}return this}removeProp(t,e){return typeof t=="string"||Array.isArray(t)?this.store.removeByPath(t,e):this.store.remove(e),this}hasChanged(t){return t==null?this.store.hasChanged():this.store.hasChanged(t)}getPropByPath(t){return this.store.getByPath(t)}setPropByPath(t,e,i={}){return this.model&&(t==="children"?this._children=e?e.map(r=>this.model.getCell(r)).filter(r=>r!=null):null:t==="parent"&&(this._parent=e?this.model.getCell(e):null)),this.store.setByPath(t,e,i),this}removePropByPath(t,e={}){const i=Array.isArray(t)?t:t.split("/");return i[0]==="attrs"&&(e.dirty=!0),this.store.removeByPath(i,e),this}prop(t,e,i){return t==null?this.getProp():typeof t=="string"||Array.isArray(t)?arguments.length===1?this.getPropByPath(t):e==null?this.removePropByPath(t,i||{}):this.setPropByPath(t,e,i||{}):this.setProp(t,e||{})}previous(t){return this.store.getPrevious(t)}get zIndex(){return this.getZIndex()}set zIndex(t){t==null?this.removeZIndex():this.setZIndex(t)}getZIndex(){return this.store.get("zIndex")}setZIndex(t,e={}){return this.store.set("zIndex",t,e),this}removeZIndex(t={}){return this.store.remove("zIndex",t),this}toFront(t={}){const e=this.model;if(e){let i=e.getMaxZIndex(),r;t.deep?(r=this.getDescendants({deep:!0,breadthFirst:!0}),r.unshift(this)):r=[this],i=i-r.length+1;const o=e.total();let a=e.indexOf(this)!==o-r.length;a||(a=r.some((s,l)=>s.getZIndex()!==i+l)),a&&this.batchUpdate("to-front",()=>{i+=r.length,r.forEach((s,l)=>{s.setZIndex(i+l,t)})})}return this}toBack(t={}){const e=this.model;if(e){let i=e.getMinZIndex(),r;t.deep?(r=this.getDescendants({deep:!0,breadthFirst:!0}),r.unshift(this)):r=[this];let o=e.indexOf(this)!==0;o||(o=r.some((a,s)=>a.getZIndex()!==i+s)),o&&this.batchUpdate("to-back",()=>{i-=r.length,r.forEach((a,s)=>{a.setZIndex(i+s,t)})})}return this}get markup(){return this.getMarkup()}set markup(t){t==null?this.removeMarkup():this.setMarkup(t)}getMarkup(){let t=this.store.get("markup");return t==null&&(t=this.constructor.getMarkup()),t}setMarkup(t,e={}){return this.store.set("markup",t,e),this}removeMarkup(t={}){return this.store.remove("markup",t),this}get attrs(){return this.getAttrs()}set attrs(t){t==null?this.removeAttrs():this.setAttrs(t)}getAttrs(){const t=this.store.get("attrs");return t?Object.assign({},t):{}}setAttrs(t,e={}){if(t==null)this.removeAttrs(e);else{const i=r=>this.store.set("attrs",r,e);if(e.overwrite===!0)i(t);else{const r=this.getAttrs();e.deep===!1?i(Object.assign(Object.assign({},r),t)):i(zn({},r,t))}}return this}replaceAttrs(t,e={}){return this.setAttrs(t,Object.assign(Object.assign({},e),{overwrite:!0}))}updateAttrs(t,e={}){return this.setAttrs(t,Object.assign(Object.assign({},e),{deep:!1}))}removeAttrs(t={}){return this.store.remove("attrs",t),this}getAttrDefinition(t){if(!t)return null;const i=this.constructor.getAttrHooks()||{};let r=i[t]||Ml.registry.get(t);if(!r){const o=BT(t);r=i[o]||Ml.registry.get(o)}return r||null}getAttrByPath(t){return t==null||t===""?this.getAttrs():this.getPropByPath(this.prefixAttrPath(t))}setAttrByPath(t,e,i={}){return this.setPropByPath(this.prefixAttrPath(t),e,i),this}removeAttrByPath(t,e={}){return this.removePropByPath(this.prefixAttrPath(t),e),this}prefixAttrPath(t){return Array.isArray(t)?["attrs"].concat(t):`attrs/${t}`}attr(t,e,i){return t==null?this.getAttrByPath():typeof t=="string"||Array.isArray(t)?arguments.length===1?this.getAttrByPath(t):e==null?this.removeAttrByPath(t,i||{}):this.setAttrByPath(t,e,i||{}):this.setAttrs(t,e||{})}get visible(){return this.isVisible()}set visible(t){this.setVisible(t)}setVisible(t,e={}){return this.store.set("visible",t,e),this}isVisible(){return this.store.get("visible")!==!1}show(t={}){return this.isVisible()||this.setVisible(!0,t),this}hide(t={}){return this.isVisible()&&this.setVisible(!1,t),this}toggleVisible(t,e={}){const i=typeof t=="boolean"?t:!this.isVisible(),r=typeof t=="boolean"?e:t;return i?this.show(r):this.hide(r),this}get data(){return this.getData()}set data(t){this.setData(t)}getData(){return this.store.get("data")}setData(t,e={}){if(t==null)this.removeData(e);else{const i=r=>this.store.set("data",r,e);if(e.overwrite===!0)i(t);else{const r=this.getData();e.deep===!1?i(typeof t=="object"?Object.assign(Object.assign({},r),t):t):i(zn({},r,t))}}return this}replaceData(t,e={}){return this.setData(t,Object.assign(Object.assign({},e),{overwrite:!0}))}updateData(t,e={}){return this.setData(t,Object.assign(Object.assign({},e),{deep:!1}))}removeData(t={}){return this.store.remove("data",t),this}get parent(){return this.getParent()}get children(){return this.getChildren()}getParentId(){return this.store.get("parent")}getParent(){const t=this.getParentId();if(t&&this.model){const e=this.model.getCell(t);return this._parent=e,e}return null}getChildren(){const t=this.store.get("children");if(t&&t.length&&this.model){const e=t.map(i=>{var r;return(r=this.model)===null||r===void 0?void 0:r.getCell(i)}).filter(i=>i!=null);return this._children=e,[...e]}return null}hasParent(){return this.parent!=null}isParentOf(t){return t!=null&&t.getParent()===this}isChildOf(t){return t!=null&&this.getParent()===t}eachChild(t,e){return this.children&&this.children.forEach(t,e),this}filterChild(t,e){return this.children?this.children.filter(t,e):[]}getChildCount(){return this.children==null?0:this.children.length}getChildIndex(t){return this.children==null?-1:this.children.indexOf(t)}getChildAt(t){return this.children!=null&&t>=0?this.children[t]:null}getAncestors(t={}){const e=[];let i=this.getParent();for(;i;)e.push(i),i=t.deep!==!1?i.getParent():null;return e}getDescendants(t={}){if(t.deep!==!1){if(t.breadthFirst){const e=[],i=this.getChildren()||[];for(;i.length>0;){const r=i.shift(),o=r.getChildren();e.push(r),o&&i.push(...o)}return e}{const e=this.getChildren()||[];return e.forEach(i=>{e.push(...i.getDescendants(t))}),e}}return this.getChildren()||[]}isDescendantOf(t,e={}){if(t==null)return!1;if(e.deep!==!1){let i=this.getParent();for(;i;){if(i===t)return!0;i=i.getParent()}return!1}return this.isChildOf(t)}isAncestorOf(t,e={}){return t==null?!1:t.isDescendantOf(this,e)}contains(t){return this.isAncestorOf(t)}getCommonAncestor(...t){return Fe.getCommonAncestor(this,...t)}setParent(t,e={}){return this._parent=t,t?this.store.set("parent",t.id,e):this.store.remove("parent",e),this}setChildren(t,e={}){return this._children=t,t!=null?this.store.set("children",t.map(i=>i.id),e):this.store.remove("children",e),this}unembed(t,e={}){const i=this.children;if(i!=null&&t!=null){const r=this.getChildIndex(t);r!==-1&&(i.splice(r,1),t.setParent(null,e),this.setChildren(i,e))}return this}embed(t,e={}){return t.addTo(this,e),this}addTo(t,e={}){return Fe.isCell(t)?t.addChild(this,e):t.addCell(this,e),this}insertTo(t,e,i={}){return t.insertChild(this,e,i),this}addChild(t,e={}){return this.insertChild(t,void 0,e)}insertChild(t,e,i={}){if(t!=null&&t!==this){const r=t.getParent(),o=this!==r;let a=e;if(a==null&&(a=this.getChildCount(),o||(a-=1)),r){const l=r.getChildren();if(l){const h=l.indexOf(t);h>=0&&(t.setParent(null,i),l.splice(h,1),r.setChildren(l,i))}}let s=this.children;if(s==null?(s=[],s.push(t)):s.splice(a,0,t),t.setParent(this,i),this.setChildren(s,i),o&&this.model){const l=this.model.getIncomingEdges(this),h=this.model.getOutgoingEdges(this);l&&l.forEach(u=>u.updateParent(i)),h&&h.forEach(u=>u.updateParent(i))}this.model&&this.model.addCell(t,i)}return this}removeFromParent(t={}){const e=this.getParent();if(e!=null){const i=e.getChildIndex(this);e.removeChildAt(i,t)}return this}removeChild(t,e={}){const i=this.getChildIndex(t);return this.removeChildAt(i,e)}removeChildAt(t,e={}){const i=this.getChildAt(t);return this.children!=null&&i!=null&&(this.unembed(i,e),i.remove(e)),i}remove(t={}){return this.batchUpdate("remove",()=>{const e=this.getParent();e&&e.removeChild(this,t),t.deep!==!1&&this.eachChild(i=>i.remove(t)),this.model&&this.model.removeCell(this,t)}),this}transition(t,e,i={},r="/"){return this.animation.start(t,e,i,r)}stopTransition(t,e,i="/"){return this.animation.stop(t,e,i),this}getTransitions(){return this.animation.get()}translate(t,e,i){return this}scale(t,e,i,r){return this}addTools(t,e,i){const r=Array.isArray(t)?t:[t],o=typeof e=="string"?e:null,a=typeof e=="object"?e:typeof i=="object"?i:{};if(a.reset)return this.setTools({name:o,items:r,local:a.local},a);let s=sn(this.getTools());if(s==null||o==null||s.name===o)return s==null&&(s={}),s.items||(s.items=[]),s.name=o,s.items=[...s.items,...r],this.setTools(Object.assign({},s),a)}setTools(t,e={}){return t==null?this.removeTools():this.store.set("tools",Fe.normalizeTools(t),e),this}getTools(){return this.store.get("tools")}removeTools(t={}){return this.store.remove("tools",t),this}hasTools(t){const e=this.getTools();return e==null?!1:t==null?!0:e.name===t}hasTool(t){const e=this.getTools();return e==null?!1:e.items.some(i=>typeof i=="string"?i===t:i.name===t)}removeTool(t,e={}){const i=sn(this.getTools());if(i){let r=!1;const o=i.items.slice(),a=s=>{o.splice(s,1),r=!0};if(typeof t=="number")a(t);else for(let s=o.length-1;s>=0;s-=1){const l=o[s];(typeof l=="string"?l===t:l.name===t)&&a(s)}r&&(i.items=o,this.setTools(i,e))}return this}getBBox(t){return new Tt}getConnectionPoint(t,e){return new Q}toJSON(t={}){const e=Object.assign({},this.store.get()),i=Object.prototype.toString,r=this.isNode()?"node":this.isEdge()?"edge":"cell";if(!e.shape){const g=this.constructor;throw new Error(`Unable to serialize ${r} missing "shape" prop, check the ${r} "${g.name||i.call(g)}"`)}const o=this.constructor,a=t.diff===!0,s=e.attrs||{},l=o.getDefaults(!0),h=a?this.preprocess(l,!0):l,u=h.attrs||{},d={};Object.entries(e).forEach(([g,p])=>{if(p!=null&&!Array.isArray(p)&&typeof p=="object"&&!Uh(p))throw new Error(`Can only serialize ${r} with plain-object props, but got a "${i.call(p)}" type of key "${g}" on ${r} "${this.id}"`);if(g!=="attrs"&&g!=="shape"&&a){const v=h[g];bh(p,v)&&delete e[g]}}),Object.keys(s).forEach(g=>{const p=s[g],v=u[g];Object.keys(p).forEach(m=>{const y=p[m],b=v?v[m]:null;y!=null&&typeof y=="object"&&!Array.isArray(y)?Object.keys(y).forEach(_=>{const w=y[_];if(v==null||b==null||!d0(b)||!bh(b[_],w)){d[g]==null&&(d[g]={}),d[g][m]==null&&(d[g][m]={});const C=d[g][m];C[_]=w}}):(v==null||!bh(b,y))&&(d[g]==null&&(d[g]={}),d[g][m]=y)})});const c=Object.assign(Object.assign({},e),{attrs:iK(d)?void 0:d});c.attrs==null&&delete c.attrs;const f=c;return f.angle===0&&delete f.angle,sn(f)}clone(t={}){if(!t.deep){const i=Object.assign({},this.store.get());t.keepId||delete i.id,delete i.parent,delete i.children;const r=this.constructor;return new r(i)}return Fe.deepClone(this)[this.id]}findView(t){return t.findViewByCell(this)}startBatch(t,e={},i=this.model){return this.notify("batch:start",{name:t,data:e,cell:this}),i&&i.startBatch(t,Object.assign(Object.assign({},e),{cell:this})),this}stopBatch(t,e={},i=this.model){return i&&i.stopBatch(t,Object.assign(Object.assign({},e),{cell:this})),this.notify("batch:stop",{name:t,data:e,cell:this}),this}batchUpdate(t,e,i){const r=this.model;this.startBatch(t,i,r);const o=e();return this.stopBatch(t,i,r),o}dispose(){this.removeFromParent(),this.store.dispose()}}Fe.defaults={};Fe.attrHooks={};Fe.propHooks=[];c3t([Qo.dispose()],Fe.prototype,"dispose",null);(function(n){function t(e){return typeof e=="string"?{items:[e]}:Array.isArray(e)?{items:e}:e.items?e:{items:[e]}}n.normalizeTools=t})(Fe||(Fe={}));(function(n){n.toStringTag=`X6.${n.name}`;function t(e){if(e==null)return!1;if(e instanceof n)return!0;const i=e[Symbol.toStringTag],r=e;return(i==null||i===n.toStringTag)&&typeof r.isNode=="function"&&typeof r.isEdge=="function"&&typeof r.prop=="function"&&typeof r.attr=="function"}n.isCell=t})(Fe||(Fe={}));(function(n){function t(...o){const a=o.filter(l=>l!=null).map(l=>l.getAncestors()).sort((l,h)=>l.length-h.length);return a.shift().find(l=>a.every(h=>h.includes(l)))||null}n.getCommonAncestor=t;function e(o,a={}){let s=null;for(let l=0,h=o.length;l<h;l+=1){const u=o[l];let d=u.getBBox(a);if(d){if(u.isNode()){const c=u.getAngle();c!=null&&c!==0&&(d=d.bbox(c))}s=s==null?d:s.union(d)}}return s}n.getCellsBBox=e;function i(o){const a=[o,...o.getDescendants({deep:!0})];return n.cloneCells(a)}n.deepClone=i;function r(o){const a=eK(o),s=a.reduce((l,h)=>(l[h.id]=h.clone(),l),{});return a.forEach(l=>{const h=s[l.id];if(h.isEdge()){const c=h.getSourceCellId(),f=h.getTargetCellId();c&&s[c]&&h.setSource(Object.assign(Object.assign({},h.getSource()),{cell:s[c].id})),f&&s[f]&&h.setTarget(Object.assign(Object.assign({},h.getTarget()),{cell:s[f].id}))}const u=l.getParent();u&&s[u.id]&&h.setParent(s[u.id]);const d=l.getChildren();if(d&&d.length){const c=d.reduce((f,g)=>(s[g.id]&&f.push(s[g.id]),f),[]);c.length>0&&h.setChildren(c)}}),s}n.cloneCells=r})(Fe||(Fe={}));(function(n){n.config({propHooks(t){var{tools:e}=t,i=mot(t,["tools"]);return e&&(i.tools=n.normalizeTools(e)),i}})})(Fe||(Fe={}));var yv;(function(n){let t,e;function i(a,s){return s?t!=null&&t.exist(a):e!=null&&e.exist(a)}n.exist=i;function r(a){t=a}n.setEdgeRegistry=r;function o(a){e=a}n.setNodeRegistry=o})(yv||(yv={}));class f3t{constructor(t){this.ports=[],this.groups={},this.init(sn(t))}getPorts(){return this.ports}getGroup(t){return t!=null?this.groups[t]:null}getPortsByGroup(t){return this.ports.filter(e=>e.group===t||e.group==null&&t==null)}getPortsLayoutByGroup(t,e){const i=this.getPortsByGroup(t),r=t?this.getGroup(t):null,o=r?r.position:null,a=o?o.name:null;let s;if(a!=null){const d=ff.registry.get(a);if(d==null)return ff.registry.onNotFound(a);s=d}else s=ff.presets.left;const l=i.map(d=>d&&d.position&&d.position.args||{}),h=o&&o.args||{};return s(l,e,h).map((d,c)=>{const f=i[c];return{portLayout:d,portId:f.id,portSize:f.size,portAttrs:f.attrs,labelSize:f.label.size,labelLayout:this.getPortLabelLayout(f,Q.create(d.position),e)}})}init(t){const{groups:e,items:i}=t;e!=null&&Object.keys(e).forEach(r=>{this.groups[r]=this.parseGroup(e[r])}),Array.isArray(i)&&i.forEach(r=>{this.ports.push(this.parsePort(r))})}parseGroup(t){return Object.assign(Object.assign({},t),{label:this.getLabel(t,!0),position:this.getPortPosition(t.position,!0)})}parsePort(t){const e=Object.assign({},t),i=this.getGroup(t.group)||{};return e.markup=e.markup||i.markup,e.attrs=zn({},i.attrs,e.attrs),e.position=this.createPosition(i,e),e.label=zn({},i.label,this.getLabel(e)),e.zIndex=this.getZIndex(i,e),e.size=Object.assign(Object.assign({},i.size),e.size),e}getZIndex(t,e){return typeof e.zIndex=="number"?e.zIndex:typeof t.zIndex=="number"||t.zIndex==="auto"?t.zIndex:"auto"}createPosition(t,e){return zn({name:"left",args:{}},t.position,{args:e.args})}getPortPosition(t,e=!1){if(t==null){if(e)return{name:"left",args:{}}}else{if(typeof t=="string")return{name:t,args:{}};if(Array.isArray(t))return{name:"absolute",args:{x:t[0],y:t[1]}};if(typeof t=="object")return t}return{args:{}}}getPortLabelPosition(t,e=!1){if(t==null){if(e)return{name:"left",args:{}}}else{if(typeof t=="string")return{name:t,args:{}};if(typeof t=="object")return t}return{args:{}}}getLabel(t,e=!1){const i=t.label||{};return i.position=this.getPortLabelPosition(i.position,e),i}getPortLabelLayout(t,e,i){const r=t.label.position.name||"left",o=t.label.position.args||{},a=dv.registry.get(r)||dv.presets.left;return a?a(e,i,o):null}}var HM=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e};let Qn=class yot extends Fe{get[Symbol.toStringTag](){return yot.toStringTag}constructor(t={}){super(t),this.initPorts()}preprocess(t,e){const{x:i,y:r,width:o,height:a}=t,s=HM(t,["x","y","width","height"]);if(i!=null||r!=null){const l=s.position;s.position=Object.assign(Object.assign({},l),{x:i??(l?l.x:0),y:r??(l?l.y:0)})}if(o!=null||a!=null){const l=s.size;s.size=Object.assign(Object.assign({},l),{width:o??(l?l.width:0),height:a??(l?l.height:0)})}return super.preprocess(s,e)}isNode(){return!0}size(t,e,i){return t===void 0?this.getSize():typeof t=="number"?this.setSize(t,e,i):this.setSize(t,e)}getSize(){const t=this.store.get("size");return t?Object.assign({},t):{width:1,height:1}}setSize(t,e,i){return typeof t=="object"?this.resize(t.width,t.height,e):this.resize(t,e,i),this}resize(t,e,i={}){this.startBatch("resize",i);const r=i.direction;if(r){const o=this.getSize();switch(r){case"left":case"right":e=o.height;break;case"top":case"bottom":t=o.width;break}let s={right:0,"top-right":0,top:1,"top-left":1,left:2,"bottom-left":2,bottom:3,"bottom-right":3}[r];const l=Ri.normalize(this.getAngle()||0);i.absolute&&(s+=Math.floor((l+45)/90),s%=4);const h=this.getBBox();let u;s===0?u=h.getBottomLeft():s===1?u=h.getCorner():s===2?u=h.getTopRight():u=h.getOrigin();const d=u.clone().rotate(-l,h.getCenter()),c=Math.sqrt(t*t+e*e)/2;let f=s*Math.PI/2;f+=Math.atan(s%2===0?e/t:t/e),f-=Ri.toRad(l);const p=Q.fromPolar(c,f,d).clone().translate(t/-2,e/-2);this.store.set("size",{width:t,height:e},i),this.setPosition(p.x,p.y,i)}else this.store.set("size",{width:t,height:e},i);return this.stopBatch("resize",i),this}scale(t,e,i,r={}){const o=this.getBBox().scale(t,e,i??void 0);return this.startBatch("scale",r),this.setPosition(o.x,o.y,r),this.resize(o.width,o.height,r),this.stopBatch("scale"),this}position(t,e,i){return typeof t=="number"?this.setPosition(t,e,i):this.getPosition(t)}getPosition(t={}){if(t.relative){const i=this.getParent();if(i!=null&&i.isNode()){const r=this.getPosition(),o=i.getPosition();return{x:r.x-o.x,y:r.y-o.y}}}const e=this.store.get("position");return e?Object.assign({},e):{x:0,y:0}}setPosition(t,e,i={}){let r,o,a;if(typeof t=="object"?(r=t.x,o=t.y,a=e||{}):(r=t,o=e,a=i||{}),a.relative){const s=this.getParent();if(s!=null&&s.isNode()){const l=s.getPosition();r+=l.x,o+=l.y}}if(a.deep){const s=this.getPosition();this.translate(r-s.x,o-s.y,a)}else this.store.set("position",{x:r,y:o},a);return this}translate(t=0,e=0,i={}){if(t===0&&e===0)return this;i.translateBy=i.translateBy||this.id;const r=this.getPosition();if(i.restrict!=null&&i.translateBy===this.id){const a=this.getBBox({deep:!0}),s=i.restrict,l=r.x-a.x,h=r.y-a.y,u=Math.max(s.x+l,Math.min(s.x+s.width+l-a.width,r.x+t)),d=Math.max(s.y+h,Math.min(s.y+s.height+h-a.height,r.y+e));t=u-r.x,e=d-r.y}const o={x:r.x+t,y:r.y+e};return i.tx=t,i.ty=e,i.transition?(typeof i.transition!="object"&&(i.transition={}),this.transition("position",o,Object.assign(Object.assign({},i.transition),{interp:Gc.object})),this.eachChild(a=>{var s;((s=i.exclude)===null||s===void 0?void 0:s.includes(a))||a.translate(t,e,i)})):(this.startBatch("translate",i),this.store.set("position",o,i),this.eachChild(a=>{var s;((s=i.exclude)===null||s===void 0?void 0:s.includes(a))||a.translate(t,e,i)}),this.stopBatch("translate",i)),this}angle(t,e){return t==null?this.getAngle():this.rotate(t,e)}getAngle(){return this.store.get("angle",0)}rotate(t,e={}){const i=this.getAngle();if(e.center){const r=this.getSize(),o=this.getPosition(),a=this.getBBox().getCenter();a.rotate(i-t,e.center);const s=a.x-r.width/2-o.x,l=a.y-r.height/2-o.y;this.startBatch("rotate",{angle:t,options:e}),this.setPosition(o.x+s,o.y+l,e),this.rotate(t,Object.assign(Object.assign({},e),{center:null})),this.stopBatch("rotate")}else this.store.set("angle",e.absolute?t:(i+t)%360,e);return this}getBBox(t={}){if(t.deep){const e=this.getDescendants({deep:!0,breadthFirst:!0});return e.push(this),Fe.getCellsBBox(e)}return Tt.fromPositionAndSize(this.getPosition(),this.getSize())}getConnectionPoint(t,e){const i=this.getBBox(),r=i.getCenter(),o=t.getTerminal(e);if(o==null)return r;const a=o.port;if(!a||!this.hasPort(a))return r;const s=this.getPort(a);if(!s||!s.group)return r;const h=this.getPortsPosition(s.group)[a].position,u=Q.create(h).translate(i.getOrigin()),d=this.getAngle();return d&&u.rotate(-d,r),u}fit(t={}){const i=(this.getChildren()||[]).filter(h=>h.isNode());if(i.length===0)return this;this.startBatch("fit-embeds",t),t.deep&&i.forEach(h=>h.fit(t));let{x:r,y:o,width:a,height:s}=Fe.getCellsBBox(i);const l=Ef(t.padding);return r-=l.left,o-=l.top,a+=l.left+l.right,s+=l.bottom+l.top,this.store.set({position:{x:r,y:o},size:{width:a,height:s}},t),this.stopBatch("fit-embeds"),this}get portContainerMarkup(){return this.getPortContainerMarkup()}set portContainerMarkup(t){this.setPortContainerMarkup(t)}getDefaultPortContainerMarkup(){return this.store.get("defaultPortContainerMarkup")||Ni.getPortContainerMarkup()}getPortContainerMarkup(){return this.store.get("portContainerMarkup")||this.getDefaultPortContainerMarkup()}setPortContainerMarkup(t,e={}){return this.store.set("portContainerMarkup",Ni.clone(t),e),this}get portMarkup(){return this.getPortMarkup()}set portMarkup(t){this.setPortMarkup(t)}getDefaultPortMarkup(){return this.store.get("defaultPortMarkup")||Ni.getPortMarkup()}getPortMarkup(){return this.store.get("portMarkup")||this.getDefaultPortMarkup()}setPortMarkup(t,e={}){return this.store.set("portMarkup",Ni.clone(t),e),this}get portLabelMarkup(){return this.getPortLabelMarkup()}set portLabelMarkup(t){this.setPortLabelMarkup(t)}getDefaultPortLabelMarkup(){return this.store.get("defaultPortLabelMarkup")||Ni.getPortLabelMarkup()}getPortLabelMarkup(){return this.store.get("portLabelMarkup")||this.getDefaultPortLabelMarkup()}setPortLabelMarkup(t,e={}){return this.store.set("portLabelMarkup",Ni.clone(t),e),this}get ports(){const t=this.store.get("ports",{items:[]});return t.items==null&&(t.items=[]),t}getPorts(){return sn(this.ports.items)}getPortsByGroup(t){return this.getPorts().filter(e=>e.group===t)}getPort(t){return sn(this.ports.items.find(e=>e.id&&e.id===t))}getPortAt(t){return this.ports.items[t]||null}hasPorts(){return this.ports.items.length>0}hasPort(t){return this.getPortIndex(t)!==-1}getPortIndex(t){const e=typeof t=="string"?t:t.id;return e!=null?this.ports.items.findIndex(i=>i.id===e):-1}getPortsPosition(t){const e=this.getSize();return this.port.getPortsLayoutByGroup(t,new Tt(0,0,e.width,e.height)).reduce((r,o)=>{const a=o.portLayout;return r[o.portId]={position:Object.assign({},a.position),angle:a.angle||0},r},{})}getPortProp(t,e){return this.getPropByPath(this.prefixPortPath(t,e))}setPortProp(t,e,i,r){if(typeof e=="string"||Array.isArray(e)){const s=this.prefixPortPath(t,e),l=i;return this.setPropByPath(s,l,r)}const o=this.prefixPortPath(t),a=e;return this.setPropByPath(o,a,i)}removePortProp(t,e,i){return typeof e=="string"||Array.isArray(e)?this.removePropByPath(this.prefixPortPath(t,e),i):this.removePropByPath(this.prefixPortPath(t),e)}portProp(t,e,i,r){return e==null?this.getPortProp(t):typeof e=="string"||Array.isArray(e)?arguments.length===2?this.getPortProp(t,e):i==null?this.removePortProp(t,e,r):this.setPortProp(t,e,i,r):this.setPortProp(t,e,i)}prefixPortPath(t,e){const i=this.getPortIndex(t);if(i===-1)throw new Error(`Unable to find port with id: "${t}"`);return e==null||e===""?["ports","items",`${i}`]:Array.isArray(e)?["ports","items",`${i}`,...e]:`ports/items/${i}/${e}`}addPort(t,e){const i=[...this.ports.items];return i.push(t),this.setPropByPath("ports/items",i,e),this}addPorts(t,e){return this.setPropByPath("ports/items",[...this.ports.items,...t],e),this}insertPort(t,e,i){const r=[...this.ports.items];return r.splice(t,0,e),this.setPropByPath("ports/items",r,i),this}removePort(t,e={}){return this.removePortAt(this.getPortIndex(t),e)}removePortAt(t,e={}){if(t>=0){const i=[...this.ports.items];i.splice(t,1),e.rewrite=!0,this.setPropByPath("ports/items",i,e)}return this}removePorts(t,e){let i;if(Array.isArray(t)){if(i=e||{},t.length){i.rewrite=!0;const o=[...this.ports.items].filter(a=>!t.some(s=>{const l=typeof s=="string"?s:s.id;return a.id===l}));this.setPropByPath("ports/items",o,i)}}else i=t||{},i.rewrite=!0,this.setPropByPath("ports/items",[],i);return this}getParsedPorts(){return this.port.getPorts()}getParsedGroups(){return this.port.groups}getPortsLayoutByGroup(t,e){return this.port.getPortsLayoutByGroup(t,e)}initPorts(){this.updatePortData(),this.on("change:ports",()=>{this.processRemovedPort(),this.updatePortData()})}processRemovedPort(){const t=this.ports,e={};t.items.forEach(a=>{a.id&&(e[a.id]=!0)});const i={};(this.store.getPrevious("ports")||{items:[]}).items.forEach(a=>{a.id&&!e[a.id]&&(i[a.id]=!0)});const o=this.model;o&&!iK(i)&&(o.getConnectedEdges(this,{incoming:!0}).forEach(l=>{const h=l.getTargetPortId();h&&i[h]&&l.remove()}),o.getConnectedEdges(this,{outgoing:!0}).forEach(l=>{const h=l.getSourcePortId();h&&i[h]&&l.remove()}))}validatePorts(){const t={},e=[];return this.ports.items.forEach(i=>{typeof i!="object"&&e.push(`Invalid port ${i}.`),i.id==null&&(i.id=this.generatePortId()),t[i.id]&&e.push("Duplicitied port id."),t[i.id]=!0}),e}generatePortId(){return rS()}updatePortData(){const t=this.validatePorts();if(t.length>0)throw this.store.set("ports",this.store.getPrevious("ports")),new Error(t.join(" "));const e=this.port?this.port.getPorts():null;this.port=new f3t(this.ports);const i=this.port.getPorts(),r=e?i.filter(a=>e.find(s=>s.id===a.id)?null:a):[...i],o=e?e.filter(a=>i.find(s=>s.id===a.id)?null:a):[];r.length>0&&this.notify("ports:added",{added:r,cell:this,node:this}),o.length>0&&this.notify("ports:removed",{removed:o,cell:this,node:this})}};Qn.defaults={angle:0,position:{x:0,y:0},size:{width:1,height:1}};(function(n){n.toStringTag=`X6.${n.name}`;function t(e){if(e==null)return!1;if(e instanceof n)return!0;const i=e[Symbol.toStringTag],r=e;return(i==null||i===n.toStringTag)&&typeof r.isNode=="function"&&typeof r.isEdge=="function"&&typeof r.prop=="function"&&typeof r.attr=="function"&&typeof r.size=="function"&&typeof r.position=="function"}n.isNode=t})(Qn||(Qn={}));(function(n){n.config({propHooks(t){var{ports:e}=t,i=HM(t,["ports"]);return e&&(i.ports=Array.isArray(e)?{items:e}:e),i}})})(Qn||(Qn={}));(function(n){n.registry=Dn.create({type:"node",process(t,e){if(yv.exist(t,!0))throw new Error(`Node with name '${t}' was registered by anthor Edge`);if(typeof e=="function")return e.config({shape:t}),e;let i=n;const{inherit:r}=e,o=HM(e,["inherit"]);if(r)if(typeof r=="string"){const s=this.get(r);s==null?this.onNotFound(r,"inherited"):i=s}else i=r;o.constructorName==null&&(o.constructorName=t);const a=i.define.call(i,o);return a.config({shape:t}),a}}),yv.setNodeRegistry(n.registry)})(Qn||(Qn={}));(function(n){let t=0;function e(o){return o?NF(o):(t+=1,`CustomNode${t}`)}function i(o){const{constructorName:a,overwrite:s}=o,l=HM(o,["constructorName","overwrite"]),h=zF(e(a||l.shape),this);return h.config(l),l.shape&&n.registry.register(l.shape,h,s),h}n.define=i;function r(o){const a=o.shape||"rect",s=n.registry.get(a);return s?new s(o):n.registry.onNotFound(a)}n.create=r})(Qn||(Qn={}));var zM=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e};let cn=class bot extends Fe{get[Symbol.toStringTag](){return bot.toStringTag}constructor(t={}){super(t)}preprocess(t,e){const{source:i,sourceCell:r,sourcePort:o,sourcePoint:a,target:s,targetCell:l,targetPort:h,targetPoint:u}=t,c=zM(t,["source","sourceCell","sourcePort","sourcePoint","target","targetCell","targetPort","targetPoint"]),f=g=>typeof g=="string"||typeof g=="number";if(i!=null)if(Fe.isCell(i))c.source={cell:i.id};else if(f(i))c.source={cell:i};else if(Q.isPoint(i))c.source=i.toJSON();else if(Array.isArray(i))c.source={x:i[0],y:i[1]};else{const g=i.cell;Fe.isCell(g)?c.source=Object.assign(Object.assign({},i),{cell:g.id}):c.source=i}if(r!=null||o!=null){let g=c.source;if(r!=null){const p=f(r)?r:r.id;g?g.cell=p:g=c.source={cell:p}}o!=null&&g&&(g.port=o)}else a!=null&&(c.source=Q.create(a).toJSON());if(s!=null)if(Fe.isCell(s))c.target={cell:s.id};else if(f(s))c.target={cell:s};else if(Q.isPoint(s))c.target=s.toJSON();else if(Array.isArray(s))c.target={x:s[0],y:s[1]};else{const g=s.cell;Fe.isCell(g)?c.target=Object.assign(Object.assign({},s),{cell:g.id}):c.target=s}if(l!=null||h!=null){let g=c.target;if(l!=null){const p=f(l)?l:l.id;g?g.cell=p:g=c.target={cell:p}}h!=null&&g&&(g.port=h)}else u!=null&&(c.target=Q.create(u).toJSON());return super.preprocess(c,e)}setup(){super.setup(),this.on("change:labels",t=>this.onLabelsChanged(t)),this.on("change:vertices",t=>this.onVertexsChanged(t))}isEdge(){return!0}disconnect(t={}){return this.store.set({source:{x:0,y:0},target:{x:0,y:0}},t),this}get source(){return this.getSource()}set source(t){this.setSource(t)}getSource(){return this.getTerminal("source")}getSourceCellId(){return this.source.cell}getSourcePortId(){return this.source.port}setSource(t,e,i={}){return this.setTerminal("source",t,e,i)}get target(){return this.getTarget()}set target(t){this.setTarget(t)}getTarget(){return this.getTerminal("target")}getTargetCellId(){return this.target.cell}getTargetPortId(){return this.target.port}setTarget(t,e,i={}){return this.setTerminal("target",t,e,i)}getTerminal(t){return Object.assign({},this.store.get(t))}setTerminal(t,e,i,r={}){if(Fe.isCell(e))return this.store.set(t,zn({},i,{cell:e.id}),r),this;const o=e;return Q.isPoint(e)||o.x!=null&&o.y!=null?(this.store.set(t,zn({},i,{x:o.x,y:o.y}),r),this):(this.store.set(t,sn(e),r),this)}getSourcePoint(){return this.getTerminalPoint("source")}getTargetPoint(){return this.getTerminalPoint("target")}getTerminalPoint(t){const e=this[t];if(Q.isPointLike(e))return Q.create(e);const i=this.getTerminalCell(t);return i?i.getConnectionPoint(this,t):new Q}getSourceCell(){return this.getTerminalCell("source")}getTargetCell(){return this.getTerminalCell("target")}getTerminalCell(t){if(this.model){const e=t==="source"?this.getSourceCellId():this.getTargetCellId();if(e)return this.model.getCell(e)}return null}getSourceNode(){return this.getTerminalNode("source")}getTargetNode(){return this.getTerminalNode("target")}getTerminalNode(t){let e=this;const i={};for(;e&&e.isEdge();){if(i[e.id])return null;i[e.id]=!0,e=e.getTerminalCell(t)}return e&&e.isNode()?e:null}get router(){return this.getRouter()}set router(t){t==null?this.removeRouter():this.setRouter(t)}getRouter(){return this.store.get("router")}setRouter(t,e,i){return typeof t=="object"?this.store.set("router",t,e):this.store.set("router",{name:t,args:e},i),this}removeRouter(t={}){return this.store.remove("router",t),this}get connector(){return this.getConnector()}set connector(t){t==null?this.removeConnector():this.setConnector(t)}getConnector(){return this.store.get("connector")}setConnector(t,e,i){return typeof t=="object"?this.store.set("connector",t,e):this.store.set("connector",{name:t,args:e},i),this}removeConnector(t={}){return this.store.remove("connector",t)}getDefaultLabel(){const t=this.constructor,e=this.store.get("defaultLabel")||t.defaultLabel||{};return sn(e)}get labels(){return this.getLabels()}set labels(t){this.setLabels(t)}getLabels(){return[...this.store.get("labels",[])].map(t=>this.parseLabel(t))}setLabels(t,e={}){return this.store.set("labels",Array.isArray(t)?t:[t],e),this}insertLabel(t,e,i={}){const r=this.getLabels(),o=r.length;let a=e!=null&&Number.isFinite(e)?e:o;return a<0&&(a=o+a+1),r.splice(a,0,this.parseLabel(t)),this.setLabels(r,i)}appendLabel(t,e={}){return this.insertLabel(t,-1,e)}getLabelAt(t){const e=this.getLabels();return t!=null&&Number.isFinite(t)?this.parseLabel(e[t]):null}setLabelAt(t,e,i={}){if(t!=null&&Number.isFinite(t)){const r=this.getLabels();r[t]=this.parseLabel(e),this.setLabels(r,i)}return this}removeLabelAt(t,e={}){const i=this.getLabels(),r=t!=null&&Number.isFinite(t)?t:-1,o=i.splice(r,1);return this.setLabels(i,e),o.length?o[0]:null}parseLabel(t){return typeof t=="string"?this.constructor.parseStringLabel(t):t}onLabelsChanged({previous:t,current:e}){const i=t&&e?e.filter(o=>t.find(a=>o===a||bh(o,a))?null:o):e?[...e]:[],r=t&&e?t.filter(o=>e.find(a=>o===a||bh(o,a))?null:o):t?[...t]:[];i.length>0&&this.notify("labels:added",{added:i,cell:this,edge:this}),r.length>0&&this.notify("labels:removed",{removed:r,cell:this,edge:this})}get vertices(){return this.getVertices()}set vertices(t){this.setVertices(t)}getVertices(){return[...this.store.get("vertices",[])]}setVertices(t,e={}){const i=Array.isArray(t)?t:[t];return this.store.set("vertices",i.map(r=>Q.toJSON(r)),e),this}insertVertex(t,e,i={}){const r=this.getVertices(),o=r.length;let a=e!=null&&Number.isFinite(e)?e:o;return a<0&&(a=o+a+1),r.splice(a,0,Q.toJSON(t)),this.setVertices(r,i)}appendVertex(t,e={}){return this.insertVertex(t,-1,e)}getVertexAt(t){return t!=null&&Number.isFinite(t)?this.getVertices()[t]:null}setVertexAt(t,e,i={}){if(t!=null&&Number.isFinite(t)){const r=this.getVertices();r[t]=e,this.setVertices(r,i)}return this}removeVertexAt(t,e={}){const i=this.getVertices(),r=t!=null&&Number.isFinite(t)?t:-1;return i.splice(r,1),this.setVertices(i,e)}onVertexsChanged({previous:t,current:e}){const i=t&&e?e.filter(o=>t.find(a=>Q.equals(o,a))?null:o):e?[...e]:[],r=t&&e?t.filter(o=>e.find(a=>Q.equals(o,a))?null:o):t?[...t]:[];i.length>0&&this.notify("vertexs:added",{added:i,cell:this,edge:this}),r.length>0&&this.notify("vertexs:removed",{removed:r,cell:this,edge:this})}getDefaultMarkup(){return this.store.get("defaultMarkup")||Ni.getEdgeMarkup()}getMarkup(){return super.getMarkup()||this.getDefaultMarkup()}translate(t,e,i={}){return i.translateBy=i.translateBy||this.id,i.tx=t,i.ty=e,this.applyToPoints(r=>({x:(r.x||0)+t,y:(r.y||0)+e}),i)}scale(t,e,i,r={}){return this.applyToPoints(o=>Q.create(o).scale(t,e,i).toJSON(),r)}applyToPoints(t,e={}){const i={},r=this.getSource(),o=this.getTarget();Q.isPointLike(r)&&(i.source=t(r)),Q.isPointLike(o)&&(i.target=t(o));const a=this.getVertices();return a.length>0&&(i.vertices=a.map(t)),this.store.set(i,e),this}getBBox(){return this.getPolyline().bbox()}getConnectionPoint(){return this.getPolyline().pointAt(.5)}getPolyline(){const t=[this.getSourcePoint(),...this.getVertices().map(e=>Q.create(e)),this.getTargetPoint()];return new Rn(t)}updateParent(t){let e=null;const i=this.getSourceCell(),r=this.getTargetCell(),o=this.getParent();return i&&r&&(i===r||i.isDescendantOf(r)?e=r:r.isDescendantOf(i)?e=i:e=Fe.getCommonAncestor(i,r)),o&&e&&e.id!==o.id&&o.unembed(this,t),e&&(!o||o.id!==e.id)&&e.embed(this,t),e}hasLoop(t={}){const e=this.getSource(),i=this.getTarget(),r=e.cell,o=i.cell;if(!r||!o)return!1;let a=r===o;if(!a&&t.deep&&this._model){const s=this.getSourceCell(),l=this.getTargetCell();s&&l&&(a=s.isAncestorOf(l,t)||l.isAncestorOf(s,t))}return a}getFragmentAncestor(){const t=[this,this.getSourceNode(),this.getTargetNode()].filter(e=>e!=null);return this.getCommonAncestor(...t)}isFragmentDescendantOf(t){const e=this.getFragmentAncestor();return!!e&&(e.id===t.id||e.isDescendantOf(t))}};cn.defaults={};(function(n){function t(e,i){const r=e,o=i;return r.cell===o.cell?r.port===o.port||r.port==null&&o.port==null:!1}n.equalTerminals=t})(cn||(cn={}));(function(n){n.defaultLabel={markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}],attrs:{text:{fill:"#000",fontSize:14,textAnchor:"middle",textVerticalAnchor:"middle",pointerEvents:"none"},rect:{ref:"label",fill:"#fff",rx:3,ry:3,refWidth:1,refHeight:1,refX:0,refY:0}},position:{distance:.5}};function t(e){return{attrs:{label:{text:e}}}}n.parseStringLabel=t})(cn||(cn={}));(function(n){n.toStringTag=`X6.${n.name}`;function t(e){if(e==null)return!1;if(e instanceof n)return!0;const i=e[Symbol.toStringTag],r=e;return(i==null||i===n.toStringTag)&&typeof r.isNode=="function"&&typeof r.isEdge=="function"&&typeof r.prop=="function"&&typeof r.attr=="function"&&typeof r.disconnect=="function"&&typeof r.getSource=="function"&&typeof r.getTarget=="function"}n.isEdge=t})(cn||(cn={}));(function(n){n.registry=Dn.create({type:"edge",process(t,e){if(yv.exist(t,!1))throw new Error(`Edge with name '${t}' was registered by anthor Node`);if(typeof e=="function")return e.config({shape:t}),e;let i=n;const{inherit:r="edge"}=e,o=zM(e,["inherit"]);if(typeof r=="string"){const s=this.get(r||"edge");s==null&&r?this.onNotFound(r,"inherited"):i=s}else i=r;o.constructorName==null&&(o.constructorName=t);const a=i.define.call(i,o);return a.config({shape:t}),a}}),yv.setEdgeRegistry(n.registry)})(cn||(cn={}));(function(n){let t=0;function e(o){return o?NF(o):(t+=1,`CustomEdge${t}`)}function i(o){const{constructorName:a,overwrite:s}=o,l=zM(o,["constructorName","overwrite"]),h=zF(e(a||l.shape),this);return h.config(l),l.shape&&n.registry.register(l.shape,h,s),h}n.define=i;function r(o){const a=o.shape||"edge",s=n.registry.get(a);return s?new s(o):n.registry.onNotFound(a)}n.create=r})(cn||(cn={}));(function(n){const t="basic.edge";n.config({shape:t,propHooks(e){const{label:i,vertices:r}=e,o=zM(e,["label","vertices"]);if(i){o.labels==null&&(o.labels=[]);const a=typeof i=="string"?n.parseStringLabel(i):i;o.labels.push(a)}return r&&Array.isArray(r)&&(o.vertices=r.map(a=>Q.create(a).toJSON())),o}}),n.registry.register(t,n)})(cn||(cn={}));var g3t=function(n,t,e,i){var r=arguments.length,o=r<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(t,e,o):a(t,e))||o);return r>3&&o&&Object.defineProperty(t,e,o),o};class pI extends Qo{constructor(t,e={}){super(),this.length=0,this.comparator=e.comparator||"zIndex",this.clean(),t&&this.reset(t,{silent:!0})}toJSON(){return this.cells.map(t=>t.toJSON())}add(t,e,i){let r,o;typeof e=="number"?(r=e,o=Object.assign({merge:!1},i)):(r=this.length,o=Object.assign({merge:!1},e)),r>this.length&&(r=this.length),r<0&&(r+=this.length+1);const a=Array.isArray(t)?t:[t],s=this.comparator&&typeof e!="number"&&o.sort!==!1,l=this.comparator||null;let h=!1;const u=[],d=[];return a.forEach(c=>{const f=this.get(c);f?o.merge&&!c.isSameStore(f)&&(f.setProp(c.getProp(),i),d.push(f),s&&!h&&(l==null||typeof l=="function"?h=f.hasChanged():typeof l=="string"?h=f.hasChanged(l):h=l.some(g=>f.hasChanged(g)))):(u.push(c),this.reference(c))}),u.length&&(s&&(h=!0),this.cells.splice(r,0,...u),this.length=this.cells.length),h&&this.sort({silent:!0}),o.silent||(u.forEach((c,f)=>{const g={cell:c,index:r+f,options:o};this.trigger("added",g),o.dryrun||c.notify("added",Object.assign({},g))}),h&&this.trigger("sorted"),(u.length||d.length)&&this.trigger("updated",{added:u,merged:d,removed:[],options:o})),this}remove(t,e={}){const i=Array.isArray(t)?t:[t],r=this.removeCells(i,e);return!e.silent&&r.length>0&&this.trigger("updated",{options:e,removed:r,added:[],merged:[]}),Array.isArray(t)?r:r[0]}removeCells(t,e){const i=[];for(let r=0;r<t.length;r+=1){const o=this.get(t[r]);if(o==null)continue;const a=this.cells.indexOf(o);this.cells.splice(a,1),this.length-=1,delete this.map[o.id],i.push(o),this.unreference(o),e.dryrun||o.remove(),e.silent||(this.trigger("removed",{cell:o,index:a,options:e}),e.dryrun||o.notify("removed",{cell:o,index:a,options:e}))}return i}reset(t,e={}){const i=this.cells.slice();if(i.forEach(r=>this.unreference(r)),this.clean(),this.add(t,Object.assign({silent:!0},e)),!e.silent){const r=this.cells.slice();this.trigger("reseted",{options:e,previous:i,current:r});const o=[],a=[];r.forEach(s=>{i.some(h=>h.id===s.id)||o.push(s)}),i.forEach(s=>{r.some(h=>h.id===s.id)||a.push(s)}),this.trigger("updated",{options:e,added:o,removed:a,merged:[]})}return this}push(t,e){return this.add(t,this.length,e)}pop(t){const e=this.at(this.length-1);return this.remove(e,t)}unshift(t,e){return this.add(t,0,e)}shift(t){const e=this.at(0);return this.remove(e,t)}get(t){if(t==null)return null;const e=typeof t=="string"||typeof t=="number"?t:t.id;return this.map[e]||null}has(t){return this.get(t)!=null}at(t){return t<0&&(t+=this.length),this.cells[t]||null}first(){return this.at(0)}last(){return this.at(-1)}indexOf(t){return this.cells.indexOf(t)}toArray(){return this.cells.slice()}sort(t={}){return this.comparator!=null&&(this.cells=Iut(this.cells,this.comparator),t.silent||this.trigger("sorted")),this}clone(){const t=this.constructor;return new t(this.cells.slice(),{comparator:this.comparator})}reference(t){this.map[t.id]=t,t.on("*",this.notifyCellEvent,this)}unreference(t){t.off("*",this.notifyCellEvent,this),delete this.map[t.id]}notifyCellEvent(t,e){const i=e.cell;this.trigger(`cell:${t}`,e),i&&(i.isNode()?this.trigger(`node:${t}`,Object.assign(Object.assign({},e),{node:i})):i.isEdge()&&this.trigger(`edge:${t}`,Object.assign(Object.assign({},e),{edge:i})))}clean(){this.length=0,this.cells=[],this.map={}}dispose(){this.reset([])}}g3t([pI.dispose()],pI.prototype,"dispose",null);var p3t=function(n,t,e,i){var r=arguments.length,o=r<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(t,e,o):a(t,e))||o);return r>3&&o&&Object.defineProperty(t,e,o),o};class Cs extends Qo{get[Symbol.toStringTag](){return Cs.toStringTag}constructor(t=[]){super(),this.batches={},this.addings=new WeakMap,this.nodes={},this.edges={},this.outgoings={},this.incomings={},this.collection=new pI(t),this.setup()}notify(t,e){this.trigger(t,e);const i=this.graph;return i&&(t==="sorted"||t==="reseted"||t==="updated"?i.trigger(`model:${t}`,e):i.trigger(t,e)),this}setup(){const t=this.collection;t.on("sorted",()=>this.notify("sorted",null)),t.on("updated",e=>this.notify("updated",e)),t.on("cell:change:zIndex",()=>this.sortOnChangeZ()),t.on("added",({cell:e})=>{this.onCellAdded(e)}),t.on("removed",e=>{const i=e.cell;this.onCellRemoved(i,e.options),this.notify("cell:removed",e),i.isNode()?this.notify("node:removed",Object.assign(Object.assign({},e),{node:i})):i.isEdge()&&this.notify("edge:removed",Object.assign(Object.assign({},e),{edge:i}))}),t.on("reseted",e=>{this.onReset(e.current),this.notify("reseted",e)}),t.on("edge:change:source",({edge:e})=>this.onEdgeTerminalChanged(e,"source")),t.on("edge:change:target",({edge:e})=>{this.onEdgeTerminalChanged(e,"target")})}sortOnChangeZ(){this.collection.sort()}onCellAdded(t){const e=t.id;t.isEdge()?(t.updateParent(),this.edges[e]=!0,this.onEdgeTerminalChanged(t,"source"),this.onEdgeTerminalChanged(t,"target")):this.nodes[e]=!0}onCellRemoved(t,e){const i=t.id;if(t.isEdge()){delete this.edges[i];const r=t.getSource(),o=t.getTarget();if(r&&r.cell){const a=this.outgoings[r.cell],s=a?a.indexOf(i):-1;s>=0&&(a.splice(s,1),a.length===0&&delete this.outgoings[r.cell])}if(o&&o.cell){const a=this.incomings[o.cell],s=a?a.indexOf(i):-1;s>=0&&(a.splice(s,1),a.length===0&&delete this.incomings[o.cell])}}else delete this.nodes[i];e.clear||(e.disconnectEdges?this.disconnectConnectedEdges(t,e):this.removeConnectedEdges(t,e)),t.model===this&&(t.model=null)}onReset(t){this.nodes={},this.edges={},this.outgoings={},this.incomings={},t.forEach(e=>this.onCellAdded(e))}onEdgeTerminalChanged(t,e){const i=e==="source"?this.outgoings:this.incomings,r=t.previous(e);if(r&&r.cell){const a=Fe.isCell(r.cell)?r.cell.id:r.cell,s=i[a],l=s?s.indexOf(t.id):-1;l>=0&&(s.splice(l,1),s.length===0&&delete i[a])}const o=t.getTerminal(e);if(o&&o.cell){const a=Fe.isCell(o.cell)?o.cell.id:o.cell,s=i[a]||[];s.indexOf(t.id)===-1&&s.push(t.id),i[a]=s}}prepareCell(t,e){return!t.model&&(!e||!e.dryrun)&&(t.model=this),t.zIndex==null&&t.setZIndex(this.getMaxZIndex()+1,{silent:!0}),t}resetCells(t,e={}){return t.map(i=>this.prepareCell(i,Object.assign(Object.assign({},e),{dryrun:!0}))),this.collection.reset(t,e),t.map(i=>this.prepareCell(i,{options:e})),this}clear(t={}){const e=this.getCells();if(e.length===0)return this;const i=Object.assign(Object.assign({},t),{clear:!0});return this.batchUpdate("clear",()=>{const r=e.sort((o,a)=>{const s=o.isEdge()?1:2,l=a.isEdge()?1:2;return s-l});for(;r.length>0;){const o=r.shift();o&&o.remove(i)}},i),this}addNode(t,e={}){const i=Qn.isNode(t)?t:this.createNode(t);return this.addCell(i,e),i}updateNode(t,e={}){const i=this.createNode(t),r=i.getProp();return i.dispose(),this.updateCell(r,e)}createNode(t){return Qn.create(t)}addEdge(t,e={}){const i=cn.isEdge(t)?t:this.createEdge(t);return this.addCell(i,e),i}createEdge(t){return cn.create(t)}updateEdge(t,e={}){const i=this.createEdge(t),r=i.getProp();return i.dispose(),this.updateCell(r,e)}addCell(t,e={}){return Array.isArray(t)?this.addCells(t,e):(!this.collection.has(t)&&!this.addings.has(t)&&(this.addings.set(t,!0),this.collection.add(this.prepareCell(t,e),e),t.eachChild(i=>this.addCell(i,e)),this.addings.delete(t)),this)}addCells(t,e={}){const i=t.length;if(i===0)return this;const r=Object.assign(Object.assign({},e),{position:i-1,maxPosition:i-1});return this.startBatch("add",Object.assign(Object.assign({},r),{cells:t})),t.forEach(o=>{this.addCell(o,r),r.position-=1}),this.stopBatch("add",Object.assign(Object.assign({},r),{cells:t})),this}updateCell(t,e={}){const i=t.id&&this.getCell(t.id);return i?this.batchUpdate("update",()=>(Object.entries(t).forEach(([r,o])=>i.setProp(r,o,e)),!0),t):!1}removeCell(t,e={}){const i=typeof t=="string"?this.getCell(t):t;return i&&this.has(i)?this.collection.remove(i,e):null}updateCellId(t,e){if(t.id===e)return;this.startBatch("update",{id:e}),t.prop("id",e);const i=t.clone({keepId:!0});return this.addCell(i),this.getConnectedEdges(t).forEach(o=>{const a=o.getSourceCell(),s=o.getTargetCell();a===t&&o.setSource(Object.assign(Object.assign({},o.getSource()),{cell:e})),s===t&&o.setTarget(Object.assign(Object.assign({},o.getTarget()),{cell:e}))}),this.removeCell(t),this.stopBatch("update",{id:e}),i}removeCells(t,e={}){return t.length?this.batchUpdate("remove",()=>t.map(i=>this.removeCell(i,e))):[]}removeConnectedEdges(t,e={}){const i=this.getConnectedEdges(t);return i.forEach(r=>{r.remove(e)}),i}disconnectConnectedEdges(t,e={}){const i=typeof t=="string"?t:t.id;this.getConnectedEdges(t).forEach(r=>{const o=r.getSourceCellId(),a=r.getTargetCellId();o===i&&r.setSource({x:0,y:0},e),a===i&&r.setTarget({x:0,y:0},e)})}has(t){return this.collection.has(t)}total(){return this.collection.length}indexOf(t){return this.collection.indexOf(t)}getCell(t){return this.collection.get(t)}getCells(){return this.collection.toArray()}getFirstCell(){return this.collection.first()}getLastCell(){return this.collection.last()}getMinZIndex(){const t=this.collection.first();return t&&t.getZIndex()||0}getMaxZIndex(){const t=this.collection.last();return t&&t.getZIndex()||0}getCellsFromCache(t){return t?Object.keys(t).map(e=>this.getCell(e)).filter(e=>e!=null):[]}getNodes(){return this.getCellsFromCache(this.nodes)}getEdges(){return this.getCellsFromCache(this.edges)}getOutgoingEdges(t){const e=typeof t=="string"?t:t.id,i=this.outgoings[e];return i?i.map(r=>this.getCell(r)).filter(r=>r&&r.isEdge()):null}getIncomingEdges(t){const e=typeof t=="string"?t:t.id,i=this.incomings[e];return i?i.map(r=>this.getCell(r)).filter(r=>r&&r.isEdge()):null}getConnectedEdges(t,e={}){const i=[],r=typeof t=="string"?this.getCell(t):t;if(r==null)return i;const o={},a=e.indirect;let s=e.incoming,l=e.outgoing;s==null&&l==null&&(s=l=!0);const h=(u,d)=>{const c=d?this.getOutgoingEdges(u):this.getIncomingEdges(u);if(c?.forEach(f=>{o[f.id]||(i.push(f),o[f.id]=!0,a&&(s&&h(f,!1),l&&h(f,!0)))}),a&&u.isEdge()){const f=d?u.getTargetCell():u.getSourceCell();f&&f.isEdge()&&(o[f.id]||(i.push(f),h(f,d)))}};if(l&&h(r,!0),s&&h(r,!1),e.deep){const u=r.getDescendants({deep:!0}),d={};u.forEach(f=>{f.isNode()&&(d[f.id]=!0)});const c=(f,g)=>{const p=g?this.getOutgoingEdges(f.id):this.getIncomingEdges(f.id);p?.forEach(v=>{if(!o[v.id]){const m=v.getSourceCell(),y=v.getTargetCell();if(!e.enclosed&&m&&d[m.id]&&y&&d[y.id])return;i.push(v),o[v.id]=!0}})};u.forEach(f=>{f.isEdge()||(l&&c(f,!0),s&&c(f,!1))})}return i}isBoundary(t,e){const i=typeof t=="string"?this.getCell(t):t,r=e?this.getIncomingEdges(i):this.getOutgoingEdges(i);return r==null||r.length===0}getBoundaryNodes(t){const e=[];return Object.keys(this.nodes).forEach(i=>{if(this.isBoundary(i,t)){const r=this.getCell(i);r&&e.push(r)}}),e}getRoots(){return this.getBoundaryNodes(!0)}getLeafs(){return this.getBoundaryNodes(!1)}isRoot(t){return this.isBoundary(t,!0)}isLeaf(t){return this.isBoundary(t,!1)}getNeighbors(t,e={}){let i=e.incoming,r=e.outgoing;i==null&&r==null&&(i=r=!0);const a=this.getConnectedEdges(t,e).reduce((s,l)=>{const h=l.hasLoop(e),u=l.getSourceCell(),d=l.getTargetCell();return i&&u&&u.isNode()&&!s[u.id]&&(h||u!==t&&(!e.deep||!u.isDescendantOf(t)))&&(s[u.id]=u),r&&d&&d.isNode()&&!s[d.id]&&(h||d!==t&&(!e.deep||!d.isDescendantOf(t)))&&(s[d.id]=d),s},{});if(t.isEdge()){if(i){const s=t.getSourceCell();s&&s.isNode()&&!a[s.id]&&(a[s.id]=s)}if(r){const s=t.getTargetCell();s&&s.isNode()&&!a[s.id]&&(a[s.id]=s)}}return Object.keys(a).map(s=>a[s])}isNeighbor(t,e,i={}){let r=i.incoming,o=i.outgoing;return r==null&&o==null&&(r=o=!0),this.getConnectedEdges(t,i).some(a=>{const s=a.getSourceCell(),l=a.getTargetCell();return!!(r&&s&&s.id===e.id||o&&l&&l.id===e.id)})}getSuccessors(t,e={}){const i=[];return this.search(t,(r,o)=>{r!==t&&this.matchDistance(o,e.distance)&&i.push(r)},Object.assign(Object.assign({},e),{outgoing:!0})),i}isSuccessor(t,e,i={}){let r=!1;return this.search(t,(o,a)=>{if(o===e&&o!==t&&this.matchDistance(a,i.distance))return r=!0,!1},Object.assign(Object.assign({},i),{outgoing:!0})),r}getPredecessors(t,e={}){const i=[];return this.search(t,(r,o)=>{r!==t&&this.matchDistance(o,e.distance)&&i.push(r)},Object.assign(Object.assign({},e),{incoming:!0})),i}isPredecessor(t,e,i={}){let r=!1;return this.search(t,(o,a)=>{if(o===e&&o!==t&&this.matchDistance(a,i.distance))return r=!0,!1},Object.assign(Object.assign({},i),{incoming:!0})),r}matchDistance(t,e){return e==null?!0:typeof e=="function"?e(t):Array.isArray(e)&&e.includes(t)?!0:t===e}getCommonAncestor(...t){const e=[];return t.forEach(i=>{i&&(Array.isArray(i)?e.push(...i):e.push(i))}),Fe.getCommonAncestor(...e)}getSubGraph(t,e={}){const i=[],r={},o=[],a=[],s=l=>{r[l.id]||(i.push(l),r[l.id]=l,l.isEdge()&&a.push(l),l.isNode()&&o.push(l))};return t.forEach(l=>{s(l),e.deep&&l.getDescendants({deep:!0}).forEach(u=>s(u))}),a.forEach(l=>{const h=l.getSourceCell(),u=l.getTargetCell();h&&!r[h.id]&&(i.push(h),r[h.id]=h,h.isNode()&&o.push(h)),u&&!r[u.id]&&(i.push(u),r[u.id]=u,u.isNode()&&o.push(u))}),o.forEach(l=>{this.getConnectedEdges(l,e).forEach(u=>{const d=u.getSourceCell(),c=u.getTargetCell();!r[u.id]&&d&&r[d.id]&&c&&r[c.id]&&(i.push(u),r[u.id]=u)})}),i}cloneSubGraph(t,e={}){const i=this.getSubGraph(t,e);return this.cloneCells(i)}cloneCells(t){return Fe.cloneCells(t)}getNodesFromPoint(t,e){const i=typeof t=="number"?{x:t,y:e||0}:t;return this.getNodes().filter(r=>r.getBBox().containsPoint(i))}getNodesInArea(t,e,i,r,o){const a=typeof t=="number"?new Tt(t,e,i,r):Tt.create(t),s=typeof t=="number"?o:e,l=s&&s.strict;return this.getNodes().filter(h=>{const u=h.getBBox();return l?a.containsRect(u):a.isIntersectWithRect(u)})}getEdgesInArea(t,e,i,r,o){const a=typeof t=="number"?new Tt(t,e,i,r):Tt.create(t),s=typeof t=="number"?o:e,l=s&&s.strict;return this.getEdges().filter(h=>{const u=h.getBBox();return u.width===0?u.inflate(1,0):u.height===0&&u.inflate(0,1),l?a.containsRect(u):a.isIntersectWithRect(u)})}getNodesUnderNode(t,e={}){const i=t.getBBox();return(e.by==null||e.by==="bbox"?this.getNodesInArea(i):this.getNodesFromPoint(i[e.by])).filter(o=>t.id!==o.id&&!o.isDescendantOf(t))}getAllCellsBBox(){return this.getCellsBBox(this.getCells())}getCellsBBox(t,e={}){return Fe.getCellsBBox(t,e)}search(t,e,i={}){i.breadthFirst?this.breadthFirstSearch(t,e,i):this.depthFirstSearch(t,e,i)}breadthFirstSearch(t,e,i={}){const r=[],o={},a={};for(r.push(t),a[t.id]=0;r.length>0;){const s=r.shift();if(s==null||o[s.id]||(o[s.id]=!0,de(e,this,s,a[s.id])===!1))continue;this.getNeighbors(s,i).forEach(h=>{a[h.id]=a[s.id]+1,r.push(h)})}}depthFirstSearch(t,e,i={}){const r=[],o={},a={};for(r.push(t),a[t.id]=0;r.length>0;){const s=r.pop();if(s==null||o[s.id]||(o[s.id]=!0,de(e,this,s,a[s.id])===!1))continue;const l=this.getNeighbors(s,i),h=r.length;l.forEach(u=>{a[u.id]=a[s.id]+1,r.splice(h,0,u)})}}getShortestPath(t,e,i={}){const r={};this.getEdges().forEach(h=>{const u=h.getSourceCellId(),d=h.getTargetCellId();u&&d&&(r[u]||(r[u]=[]),r[d]||(r[d]=[]),r[u].push(d),i.directed||r[d].push(u))});const o=typeof t=="string"?t:t.id,a=uI.run(r,o,i.weight),s=[];let l=typeof e=="string"?e:e.id;for(a[l]&&s.push(l);l=a[l];)s.unshift(l);return s}translate(t,e,i){return this.getCells().filter(r=>!r.hasParent()).forEach(r=>r.translate(t,e,i)),this}resize(t,e,i){return this.resizeCells(t,e,this.getCells(),i)}resizeCells(t,e,i,r={}){const o=this.getCellsBBox(i);if(o){const a=Math.max(t/o.width,0),s=Math.max(e/o.height,0),l=o.getOrigin();i.forEach(h=>h.scale(a,s,l,r))}return this}toJSON(t={}){return Cs.toJSON(this.getCells(),t)}parseJSON(t){return Cs.fromJSON(t)}fromJSON(t,e={}){const i=this.parseJSON(t);return this.resetCells(i,e),this}startBatch(t,e={}){return this.batches[t]=(this.batches[t]||0)+1,this.notify("batch:start",{name:t,data:e}),this}stopBatch(t,e={}){return this.batches[t]=(this.batches[t]||0)-1,this.notify("batch:stop",{name:t,data:e}),this}batchUpdate(t,e,i={}){this.startBatch(t,i);const r=e();return this.stopBatch(t,i),r}hasActiveBatch(t=Object.keys(this.batches)){return(Array.isArray(t)?t:[t]).some(i=>this.batches[i]>0)}dispose(){this.collection.dispose()}}p3t([Cs.dispose()],Cs.prototype,"dispose",null);(function(n){n.toStringTag=`X6.${n.name}`;function t(e){if(e==null)return!1;if(e instanceof n)return!0;const i=e[Symbol.toStringTag],r=e;return(i==null||i===n.toStringTag)&&typeof r.addNode=="function"&&typeof r.addEdge=="function"&&r.collection!=null}n.isModel=t})(Cs||(Cs={}));(function(n){function t(i,r={}){return{cells:i.map(o=>o.toJSON(r))}}n.toJSON=t;function e(i){const r=[];return Array.isArray(i)?r.push(...i):(i.cells&&r.push(...i.cells),i.nodes&&i.nodes.forEach(o=>{o.shape==null&&(o.shape="rect"),r.push(o)}),i.edges&&i.edges.forEach(o=>{o.shape==null&&(o.shape="edge"),r.push(o)})),r.map(o=>{const a=o.shape;if(a){if(Qn.registry.exist(a))return Qn.create(o);if(cn.registry.exist(a))return cn.create(o)}throw new Error("The `shape` should be specified when creating a node/edge instance")})}n.fromJSON=e})(Cs||(Cs={}));var v3t=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e};let cd=class extends Qn{get label(){return this.getLabel()}set label(t){this.setLabel(t)}getLabel(){return this.getAttrByPath("text/text")}setLabel(t,e){return t==null?this.removeLabel():this.setAttrByPath("text/text",t,e),this}removeLabel(){return this.removeAttrByPath("text/text"),this}};(function(n){n.bodyAttr={fill:"#ffffff",stroke:"#333333",strokeWidth:2},n.labelAttr={fontSize:14,fill:"#000000",refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle",fontFamily:"Arial, helvetica, sans-serif"},n.config({attrs:{text:Object.assign({},n.labelAttr)},propHooks(t){const{label:e}=t,i=v3t(t,["label"]);return e&&Zv(i,"attrs/text/text",e),i},visible:!0})})(cd||(cd={}));var m3t=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e};function y3t(n,t="body"){return[{tagName:n,selector:t},{tagName:"text",selector:"label"}]}function b3t(n="xlink:href"){return e=>{const{imageUrl:i,imageWidth:r,imageHeight:o}=e,a=m3t(e,["imageUrl","imageWidth","imageHeight"]);if(i!=null||r!=null||o!=null){const s=()=>{if(a.attrs){const l=a.attrs.image;i!=null&&(l[n]=i),r!=null&&(l.width=r),o!=null&&(l.height=o),a.attrs.image=l}};a.attrs?(a.attrs.image==null&&(a.attrs.image={}),s()):(a.attrs={image:{}},s())}return a}}function tm(n,t,e={}){const i={constructorName:n,markup:y3t(n,e.selector),attrs:{[n]:Object.assign({},cd.bodyAttr)}};return(e.parent||cd).define(zn(i,t,{shape:n}))}tm("rect",{attrs:{body:{refWidth:"100%",refHeight:"100%"}}});const _3t=cn.define({shape:"edge",markup:[{tagName:"path",selector:"wrap",groupSelector:"lines",attrs:{fill:"none",cursor:"pointer",stroke:"transparent",strokeLinecap:"round"}},{tagName:"path",selector:"line",groupSelector:"lines",attrs:{fill:"none",pointerEvents:"none"}}],attrs:{lines:{connection:!0,strokeLinejoin:"round"},wrap:{strokeWidth:10},line:{stroke:"#333",strokeWidth:2,targetMarker:"classic"}}});tm("ellipse",{attrs:{body:{refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%"}}});var C3t=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e};class bv extends cd{get points(){return this.getPoints()}set points(t){this.setPoints(t)}getPoints(){return this.getAttrByPath("body/refPoints")}setPoints(t,e){return t==null?this.removePoints():this.setAttrByPath("body/refPoints",bv.pointsToString(t),e),this}removePoints(){return this.removeAttrByPath("body/refPoints"),this}}(function(n){function t(e){return typeof e=="string"?e:e.map(i=>Array.isArray(i)?i.join(","):Q.isPointLike(i)?`${i.x}, ${i.y}`:"").join(" ")}n.pointsToString=t,n.config({propHooks(e){const{points:i}=e,r=C3t(e,["points"]);if(i){const o=t(i);o&&Zv(r,"attrs/body/refPoints",o)}return r}})})(bv||(bv={}));tm("polygon",{},{parent:bv});tm("polyline",{},{parent:bv});var w3t=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e};cd.define({shape:"path",markup:[{tagName:"rect",selector:"bg"},{tagName:"path",selector:"body"},{tagName:"text",selector:"label"}],attrs:{bg:{refWidth:"100%",refHeight:"100%",fill:"none",stroke:"none",pointerEvents:"all"},body:{fill:"none",stroke:"#000",strokeWidth:2}},propHooks(n){const{path:t}=n,e=w3t(n,["path"]);return t&&Zv(e,"attrs/body/refD",t),e}});var x3t=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e};cd.define({shape:"text-block",markup:[{tagName:"rect",selector:"body"},sd.SUPPORT_FOREIGNOBJECT?{tagName:"foreignObject",selector:"foreignObject",children:[{tagName:"div",ns:nr.xhtml,selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]}:{tagName:"text",selector:"label",attrs:{textAnchor:"middle"}}],attrs:{body:Object.assign(Object.assign({},cd.bodyAttr),{refWidth:"100%",refHeight:"100%"}),foreignObject:{refWidth:"100%",refHeight:"100%"},label:{style:{fontSize:14}}},propHooks(n){const{text:t}=n,e=x3t(n,["text"]);return t&&Zv(e,"attrs/label/text",t),e},attrHooks:{text:{set(n,{cell:t,view:e,refBBox:i,elem:r,attrs:o}){if(r instanceof HTMLElement)r.textContent=n;else{const a=o.style||{},s={text:n,width:-5,height:"100%"},l=Object.assign({textVerticalAnchor:"middle"},a),h=Ml.presets.textWrap;return de(h.set,this,s,{cell:t,view:e,elem:r,refBBox:i,attrs:l}),{fill:a.color||null}}},position(n,{refBBox:t,elem:e}){if(e instanceof SVGElement)return t.getCenter()}}}});tm("image",{attrs:{image:{refWidth:"100%",refHeight:"100%"}},propHooks:b3t()},{selector:"image"});tm("circle",{attrs:{body:{refCx:"50%",refCy:"50%",refR:"50%"}}});class Rs extends kn{constructor(){super(...arguments),this.portsCache={}}get[Symbol.toStringTag](){return Rs.toStringTag}getContainerClassName(){const t=[super.getContainerClassName(),this.prefixClassName("node")];return this.can("nodeMovable")||t.push(this.prefixClassName("node-immovable")),t.join(" ")}updateClassName(t){const e=t.target;if(e.hasAttribute("magnet")){const i=this.prefixClassName("port-unconnectable");this.can("magnetConnectable")?za(e,i):ri(e,i)}else{const i=this.prefixClassName("node-immovable");this.can("nodeMovable")?this.removeClass(i):this.addClass(i)}}isNodeView(){return!0}confirmUpdate(t,e={}){let i=t;return this.hasAction(i,"ports")&&(this.removePorts(),this.cleanPortsCache()),this.hasAction(i,"render")?(this.render(),i=this.removeAction(i,["render","update","resize","translate","rotate","ports","tools"])):(i=this.handleAction(i,"resize",()=>this.resize(),"update"),i=this.handleAction(i,"update",()=>this.update(),"ports"),i=this.handleAction(i,"translate",()=>this.translate()),i=this.handleAction(i,"rotate",()=>this.rotate()),i=this.handleAction(i,"ports",()=>this.renderPorts()),i=this.handleAction(i,"tools",()=>{this.getFlag("tools")===t?this.renderTools():this.updateTools(e)})),i}update(t){this.cleanCache(),this.removePorts();const e=this.cell,i=e.getSize(),r=e.getAttrs();this.updateAttrs(this.container,r,{attrs:t===r?null:t,rootBBox:new Tt(0,0,i.width,i.height),selectors:this.selectors}),this.renderPorts()}renderMarkup(){const t=this.cell.markup;if(t){if(typeof t=="string")throw new TypeError("Not support string markup.");return this.renderJSONMarkup(t)}throw new TypeError("Invalid node markup.")}renderJSONMarkup(t){const e=this.parseJSONMarkup(t,this.container);this.selectors=e.selectors,this.container.appendChild(e.fragment)}render(){return this.empty(),this.renderMarkup(),this.resize(),this.updateTransform(),this.renderTools(),this}resize(){this.cell.getAngle()&&this.rotate(),this.update()}translate(){this.updateTransform()}rotate(){this.updateTransform()}getTranslationString(){const t=this.cell.getPosition();return`translate(${t.x},${t.y})`}getRotationString(){const t=this.cell.getAngle();if(t){const e=this.cell.getSize();return`rotate(${t},${e.width/2},${e.height/2})`}}updateTransform(){let t=this.getTranslationString();const e=this.getRotationString();e&&(t+=` ${e}`),this.container.setAttribute("transform",t)}findPortElem(t,e){const i=t?this.portsCache[t]:null;if(!i)return null;const r=i.portContentElement,o=i.portContentSelectors||{};return this.findOne(e,r,o)}cleanPortsCache(){this.portsCache={}}removePorts(){Object.values(this.portsCache).forEach(t=>{ov(t.portElement)})}renderPorts(){const t=this.container,e=[];t.childNodes.forEach(a=>{e.push(a)});const i=this.cell.getParsedPorts(),r=BN(i,"zIndex"),o="auto";r[o]&&r[o].forEach(a=>{const s=this.getPortElement(a);t.append(s),e.push(s)}),Object.keys(r).forEach(a=>{if(a!==o){const s=parseInt(a,10);this.appendPorts(r[a],s,e)}}),this.updatePorts()}appendPorts(t,e,i){const r=t.map(o=>this.getPortElement(o));i[e]||e<0?YF(i[Math.max(e,0)],r):A_(this.container,r)}getPortElement(t){const e=this.portsCache[t.id];return e?e.portElement:this.createPortElement(t)}createPortElement(t){let e=Ni.renderMarkup(this.cell.getPortContainerMarkup());const i=e.elem;if(i==null)throw new Error("Invalid port container markup.");e=Ni.renderMarkup(this.getPortMarkup(t));const r=e.elem,o=e.selectors;if(r==null)throw new Error("Invalid port markup.");this.setAttrs({port:t.id,"port-group":t.group},r);let a="x6-port";t.group&&(a+=` x6-port-${t.group}`),ri(i,a),ri(i,"x6-port"),ri(r,"x6-port-body"),i.appendChild(r);let s=o,l,h;if(this.existPortLabel(t)){if(e=Ni.renderMarkup(this.getPortLabelMarkup(t.label)),l=e.elem,h=e.selectors,l==null)throw new Error("Invalid port label markup.");if(o&&h){for(const d in h)if(o[d]&&d!==this.rootSelector)throw new Error("Selectors within port must be unique.");s=Object.assign(Object.assign({},o),h)}ri(l,"x6-port-label"),i.appendChild(l)}return this.portsCache[t.id]={portElement:i,portSelectors:s,portLabelElement:l,portLabelSelectors:h,portContentElement:r,portContentSelectors:o},this.graph.options.onPortRendered&&this.graph.options.onPortRendered({port:t,node:this.cell,container:i,selectors:s,labelContainer:l,labelSelectors:h,contentContainer:r,contentSelectors:o}),i}updatePorts(){const t=this.cell.getParsedGroups(),e=Object.keys(t);e.length===0?this.updatePortGroup():e.forEach(i=>this.updatePortGroup(i))}updatePortGroup(t){const e=Tt.fromSize(this.cell.getSize()),i=this.cell.getPortsLayoutByGroup(t,e);for(let r=0,o=i.length;r<o;r+=1){const a=i[r],s=a.portId,l=this.portsCache[s]||{},h=a.portLayout;if(this.applyPortTransform(l.portElement,h),a.portAttrs!=null){const d={selectors:l.portSelectors||{}};a.portSize&&(d.rootBBox=Tt.fromSize(a.portSize)),this.updateAttrs(l.portElement,a.portAttrs,d)}const u=a.labelLayout;if(u&&l.portLabelElement&&(this.applyPortTransform(l.portLabelElement,u,-(h.angle||0)),u.attrs)){const d={selectors:l.portLabelSelectors||{}};a.labelSize&&(d.rootBBox=Tt.fromSize(a.labelSize)),this.updateAttrs(l.portLabelElement,u.attrs,d)}}}applyPortTransform(t,e,i=0){const r=e.angle,o=e.position,a=lr().rotate(i).translate(o.x||0,o.y||0).rotate(r||0);av(t,a,{absolute:!0})}getPortMarkup(t){return t.markup||this.cell.portMarkup}getPortLabelMarkup(t){return t.markup||this.cell.portLabelMarkup}existPortLabel(t){return t.attrs&&t.attrs.text}getEventArgs(t,e,i){const r=this,o=r.cell,a=o;return e==null||i==null?{e:t,view:r,node:o,cell:a}:{e:t,x:e,y:i,view:r,node:o,cell:a}}getPortEventArgs(t,e,i){const r=this,o=r.cell,a=o;return i?{e:t,x:i.x,y:i.y,view:r,node:o,cell:a,port:e}:{e:t,view:r,node:o,cell:a,port:e}}notifyMouseDown(t,e,i){super.onMouseDown(t,e,i),this.notify("node:mousedown",this.getEventArgs(t,e,i))}notifyMouseMove(t,e,i){super.onMouseMove(t,e,i),this.notify("node:mousemove",this.getEventArgs(t,e,i))}notifyMouseUp(t,e,i){super.onMouseUp(t,e,i),this.notify("node:mouseup",this.getEventArgs(t,e,i))}notifyPortEvent(t,e,i){const r=this.findAttr("port",e.target);if(r){const o=e.type;t==="node:port:mouseenter"?e.type="mouseenter":t==="node:port:mouseleave"&&(e.type="mouseleave"),this.notify(t,this.getPortEventArgs(e,r,i)),e.type=o}}onClick(t,e,i){super.onClick(t,e,i),this.notify("node:click",this.getEventArgs(t,e,i)),this.notifyPortEvent("node:port:click",t,{x:e,y:i})}onDblClick(t,e,i){super.onDblClick(t,e,i),this.notify("node:dblclick",this.getEventArgs(t,e,i)),this.notifyPortEvent("node:port:dblclick",t,{x:e,y:i})}onContextMenu(t,e,i){super.onContextMenu(t,e,i),this.notify("node:contextmenu",this.getEventArgs(t,e,i)),this.notifyPortEvent("node:port:contextmenu",t,{x:e,y:i})}onMouseDown(t,e,i){this.isPropagationStopped(t)||(this.notifyMouseDown(t,e,i),this.notifyPortEvent("node:port:mousedown",t,{x:e,y:i}),this.startNodeDragging(t,e,i))}onMouseMove(t,e,i){const r=this.getEventData(t),o=r.action;if(o==="magnet")this.dragMagnet(t,e,i);else{if(o==="move"){const s=r.targetView||this;s.dragNode(t,e,i),s.notify("node:moving",{e:t,x:e,y:i,view:s,cell:s.cell,node:s.cell})}this.notifyMouseMove(t,e,i),this.notifyPortEvent("node:port:mousemove",t,{x:e,y:i})}this.setEventData(t,r)}onMouseUp(t,e,i){const r=this.getEventData(t),o=r.action;o==="magnet"?this.stopMagnetDragging(t,e,i):(this.notifyMouseUp(t,e,i),this.notifyPortEvent("node:port:mouseup",t,{x:e,y:i}),o==="move"&&(r.targetView||this).stopNodeDragging(t,e,i));const a=r.targetMagnet;a&&this.onMagnetClick(t,a,e,i),this.checkMouseleave(t)}onMouseOver(t){super.onMouseOver(t),this.notify("node:mouseover",this.getEventArgs(t)),this.notifyPortEvent("node:port:mouseenter",t),this.notifyPortEvent("node:port:mouseover",t)}onMouseOut(t){super.onMouseOut(t),this.notify("node:mouseout",this.getEventArgs(t)),this.notifyPortEvent("node:port:mouseleave",t),this.notifyPortEvent("node:port:mouseout",t)}onMouseEnter(t){this.updateClassName(t),super.onMouseEnter(t),this.notify("node:mouseenter",this.getEventArgs(t))}onMouseLeave(t){super.onMouseLeave(t),this.notify("node:mouseleave",this.getEventArgs(t))}onMouseWheel(t,e,i,r){super.onMouseWheel(t,e,i,r),this.notify("node:mousewheel",Object.assign({delta:r},this.getEventArgs(t,e,i)))}onMagnetClick(t,e,i,r){const o=this.graph;o.view.getMouseMovedCount(t)>o.options.clickThreshold||this.notify("node:magnet:click",Object.assign({magnet:e},this.getEventArgs(t,i,r)))}onMagnetDblClick(t,e,i,r){this.notify("node:magnet:dblclick",Object.assign({magnet:e},this.getEventArgs(t,i,r)))}onMagnetContextMenu(t,e,i,r){this.notify("node:magnet:contextmenu",Object.assign({magnet:e},this.getEventArgs(t,i,r)))}onMagnetMouseDown(t,e,i,r){this.startMagnetDragging(t,i,r)}onCustomEvent(t,e,i,r){this.notify("node:customevent",Object.assign({name:e},this.getEventArgs(t,i,r))),super.onCustomEvent(t,e,i,r)}prepareEmbedding(t){const e=this.graph,r=this.getEventData(t).cell||this.cell,o=e.findViewByCell(r),a=e.snapToGrid(t.clientX,t.clientY);this.notify("node:embed",{e:t,node:r,view:o,cell:r,x:a.x,y:a.y,currentParent:r.getParent()})}processEmbedding(t,e){const i=e.cell||this.cell,r=e.graph||this.graph,o=r.options.embedding,a=o.findParent;let s=typeof a=="function"?de(a,r,{view:this,node:this.cell}).filter(c=>Fe.isCell(c)&&this.cell.id!==c.id&&!c.isDescendantOf(this.cell)):r.model.getNodesUnderNode(i,{by:a});if(o.frontOnly&&s.length>0){const c=BN(s,"zIndex"),f=Out(Object.keys(c).map(g=>parseInt(g,10)));f&&(s=c[f])}s=s.filter(c=>c.visible);let l=null;const h=e.candidateEmbedView,u=o.validate;for(let c=s.length-1;c>=0;c-=1){const f=s[c];if(h&&h.cell.id===f.id){l=h;break}else{const g=f.findView(r);if(u&&de(u,r,{child:this.cell,parent:g.cell,childView:this,parentView:g})){l=g;break}}}this.clearEmbedding(e),l&&l.highlight(null,{type:"embedding"}),e.candidateEmbedView=l;const d=r.snapToGrid(t.clientX,t.clientY);this.notify("node:embedding",{e:t,cell:i,node:i,view:r.findViewByCell(i),x:d.x,y:d.y,currentParent:i.getParent(),candidateParent:l?l.cell:null})}clearEmbedding(t){const e=t.candidateEmbedView;e&&(e.unhighlight(null,{type:"embedding"}),t.candidateEmbedView=null)}finalizeEmbedding(t,e){this.graph.startBatch("embedding");const i=e.cell||this.cell,r=e.graph||this.graph,o=r.findViewByCell(i),a=i.getParent(),s=e.candidateEmbedView;if(s?(s.unhighlight(null,{type:"embedding"}),e.candidateEmbedView=null,(a==null||a.id!==s.cell.id)&&s.cell.insertChild(i,void 0,{ui:!0})):a&&a.unembed(i,{ui:!0}),r.model.getConnectedEdges(i,{deep:!0}).forEach(l=>{l.updateParent({ui:!0})}),o&&s){const l=r.snapToGrid(t.clientX,t.clientY);o.notify("node:embedded",{e:t,cell:i,x:l.x,y:l.y,node:i,view:r.findViewByCell(i),previousParent:a,currentParent:i.getParent()})}this.graph.stopBatch("embedding")}getDelegatedView(){let t=this.cell,e=this;for(;e&&!t.isEdge();){if(!t.hasParent()||e.can("stopDelegateOnDragging"))return e;t=t.getParent(),e=this.graph.findViewByCell(t)}return null}validateMagnet(t,e,i){if(e.getAttribute("magnet")!=="passive"){const r=this.graph.options.connecting.validateMagnet;return r?de(r,this.graph,{e:i,magnet:e,view:t,cell:t.cell}):!0}return!1}startMagnetDragging(t,e,i){if(!this.can("magnetConnectable"))return;t.stopPropagation();const r=t.currentTarget,o=this.graph;this.setEventData(t,{targetMagnet:r}),this.validateMagnet(this,r,t)?(o.options.magnetThreshold<=0&&this.startConnectting(t,r,e,i),this.setEventData(t,{action:"magnet"}),this.stopPropagation(t)):this.onMouseDown(t,e,i),o.view.delegateDragEvents(t,this)}startConnectting(t,e,i,r){this.graph.model.startBatch("add-edge");const o=this.createEdgeFromMagnet(e,i,r);o.setEventData(t,o.prepareArrowheadDragging("target",{x:i,y:r,isNewEdge:!0,fallbackAction:"remove"})),this.setEventData(t,{edgeView:o}),o.notifyMouseDown(t,i,r)}getDefaultEdge(t,e){let i;const r=this.graph.options.connecting.createEdge;return r&&(i=de(r,this.graph,{sourceMagnet:e,sourceView:t,sourceCell:t.cell})),i}createEdgeFromMagnet(t,e,i){const r=this.graph,o=r.model,a=this.getDefaultEdge(this,t);return a.setSource(Object.assign(Object.assign({},a.getSource()),this.getEdgeTerminal(t,e,i,a,"source"))),a.setTarget(Object.assign(Object.assign({},a.getTarget()),{x:e,y:i})),a.addTo(o,{async:!1,ui:!0}),a.findView(r)}dragMagnet(t,e,i){const r=this.getEventData(t),o=r.edgeView;if(o)o.onMouseMove(t,e,i),this.autoScrollGraph(t.clientX,t.clientY);else{const a=this.graph,s=a.options.magnetThreshold,l=this.getEventTarget(t),h=r.targetMagnet;if(s==="onleave"){if(h===l||h.contains(l))return}else if(a.view.getMouseMovedCount(t)<=s)return;this.startConnectting(t,h,e,i)}}stopMagnetDragging(t,e,i){const o=this.eventData(t).edgeView;o&&(o.onMouseUp(t,e,i),this.graph.model.stopBatch("add-edge"))}notifyUnhandledMouseDown(t,e,i){this.notify("node:unhandled:mousedown",{e:t,x:e,y:i,view:this,cell:this.cell,node:this.cell})}notifyNodeMove(t,e,i,r,o){let a=[o];const s=this.graph.getPlugin("selection");if(s&&s.isSelectionMovable()){const l=s.getSelectedCells();l.includes(o)&&(a=l.filter(h=>h.isNode()))}a.forEach(l=>{this.notify(t,{e,x:i,y:r,cell:l,node:l,view:l.findView(this.graph)})})}getRestrictArea(t){const e=this.graph.options.translating.restrict,i=typeof e=="function"?de(e,this.graph,t):e;return typeof i=="number"?this.graph.transform.getGraphArea().inflate(i):i===!0?this.graph.transform.getGraphArea():i||null}startNodeDragging(t,e,i){const r=this.getDelegatedView();if(r==null||!r.can("nodeMovable"))return this.notifyUnhandledMouseDown(t,e,i);this.setEventData(t,{targetView:r,action:"move"});const o=Q.create(r.cell.getPosition());r.setEventData(t,{moving:!1,offset:o.diff(e,i),restrict:this.getRestrictArea(r)})}dragNode(t,e,i){const r=this.cell,o=this.graph,a=o.getGridSize(),s=this.getEventData(t),l=s.offset,h=s.restrict;s.moving||(s.moving=!0,this.addClass("node-moving"),this.notifyNodeMove("node:move",t,e,i,this.cell)),this.autoScrollGraph(t.clientX,t.clientY);const u=Mi.snapToGrid(e+l.x,a),d=Mi.snapToGrid(i+l.y,a);r.setPosition(u,d,{restrict:h,deep:!0,ui:!0}),o.options.embedding.enabled&&(s.embedding||(this.prepareEmbedding(t),s.embedding=!0),this.processEmbedding(t,s))}stopNodeDragging(t,e,i){const r=this.getEventData(t);r.embedding&&this.finalizeEmbedding(t,r),r.moving&&(this.removeClass("node-moving"),this.notifyNodeMove("node:moved",t,e,i,this.cell)),r.moving=!1,r.embedding=!1}autoScrollGraph(t,e){const i=this.graph.getPlugin("scroller");i&&i.autoScroll(t,e)}}(function(n){n.toStringTag=`X6.${n.name}`;function t(e){if(e==null)return!1;if(e instanceof n)return!0;const i=e[Symbol.toStringTag],r=e;return(i==null||i===n.toStringTag)&&typeof r.isNodeView=="function"&&typeof r.isEdgeView=="function"&&typeof r.confirmUpdate=="function"&&typeof r.update=="function"&&typeof r.findPortElem=="function"&&typeof r.resize=="function"&&typeof r.rotate=="function"&&typeof r.translate=="function"}n.isNodeView=t})(Rs||(Rs={}));Rs.config({isSvgElement:!0,priority:0,bootstrap:["render"],actions:{view:["render"],markup:["render"],attrs:["update"],size:["resize","ports","tools"],angle:["rotate","tools"],position:["translate","tools"],ports:["ports"],tools:["tools"]}});Rs.registry.register("node",Rs,!0);var S3t=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e};class Wh extends kn{constructor(){super(...arguments),this.POINT_ROUNDING=2,this.labelDestroyFn={}}get[Symbol.toStringTag](){return Wh.toStringTag}getContainerClassName(){return[super.getContainerClassName(),this.prefixClassName("edge")].join(" ")}get sourceBBox(){const t=this.sourceView;if(!t){const i=this.cell.getSource();return new Tt(i.x,i.y)}const e=this.sourceMagnet;return t.isEdgeElement(e)?new Tt(this.sourceAnchor.x,this.sourceAnchor.y):t.getBBoxOfElement(e||t.container)}get targetBBox(){const t=this.targetView;if(!t){const i=this.cell.getTarget();return new Tt(i.x,i.y)}const e=this.targetMagnet;return t.isEdgeElement(e)?new Tt(this.targetAnchor.x,this.targetAnchor.y):t.getBBoxOfElement(e||t.container)}isEdgeView(){return!0}confirmUpdate(t,e={}){let i=t;if(this.hasAction(i,"source")){if(!this.updateTerminalProperties("source"))return i;i=this.removeAction(i,"source")}if(this.hasAction(i,"target")){if(!this.updateTerminalProperties("target"))return i;i=this.removeAction(i,"target")}return this.hasAction(i,"render")?(this.render(),i=this.removeAction(i,["render","update","labels","tools"]),i):(i=this.handleAction(i,"update",()=>this.update(e)),i=this.handleAction(i,"labels",()=>this.onLabelsChange(e)),i=this.handleAction(i,"tools",()=>this.renderTools()),i)}render(){return this.empty(),this.renderMarkup(),this.labelContainer=null,this.renderLabels(),this.update(),this.renderTools(),this}renderMarkup(){const t=this.cell.markup;if(t){if(typeof t=="string")throw new TypeError("Not support string markup.");return this.renderJSONMarkup(t)}throw new TypeError("Invalid edge markup.")}renderJSONMarkup(t){const e=this.parseJSONMarkup(t,this.container);this.selectors=e.selectors,this.container.append(e.fragment)}customizeLabels(){if(this.labelContainer){const t=this.cell,e=t.labels;for(let i=0,r=e.length;i<r;i+=1){const o=e[i],a=this.labelCache[i],s=this.labelSelectors[i],l=this.graph.options.onEdgeLabelRendered;if(l){const h=l({edge:t,label:o,container:a,selectors:s});h&&(this.labelDestroyFn[i]=h)}}}}destroyCustomizeLabels(){const t=this.cell.labels;if(this.labelCache&&this.labelSelectors&&this.labelDestroyFn)for(let e=0,i=t.length;e<i;e+=1){const r=this.labelDestroyFn[e],o=this.labelCache[e],a=this.labelSelectors[e];r&&o&&a&&r({edge:this.cell,label:t[e],container:o,selectors:a})}this.labelDestroyFn={}}renderLabels(){const t=this.cell,e=t.getLabels(),i=e.length;let r=this.labelContainer;if(this.labelCache={},this.labelSelectors={},i<=0)return r&&r.parentNode&&r.parentNode.removeChild(r),this;r?this.empty(r):(r=Os("g"),this.addClass(this.prefixClassName("edge-labels"),r),this.labelContainer=r);for(let o=0,a=e.length;o<a;o+=1){const s=e[o],l=this.normalizeLabelMarkup(this.parseLabelMarkup(s.markup));let h,u;if(l)h=l.node,u=l.selectors;else{const c=t.getDefaultLabel(),f=this.normalizeLabelMarkup(this.parseLabelMarkup(c.markup));h=f.node,u=f.selectors}h.setAttribute("data-index",`${o}`),r.appendChild(h);const d=this.rootSelector;if(u[d])throw new Error("Ambiguous label root selector.");u[d]=h,this.labelCache[o]=h,this.labelSelectors[o]=u}return r.parentNode==null&&this.container.appendChild(r),this.updateLabels(),this.customizeLabels(),this}onLabelsChange(t={}){this.destroyCustomizeLabels(),this.shouldRerenderLabels(t)?this.renderLabels():this.updateLabels(),this.updateLabelPositions()}shouldRerenderLabels(t={}){const e=this.cell.previous("labels");if(e==null)return!0;if("propertyPathArray"in t&&"propertyValue"in t){const i=t.propertyPathArray||[],r=i.length;if(r>1){const o=i[1];if(e[o]){if(r===2)return typeof t.propertyValue=="object"&&Z_(t.propertyValue,"markup");if(i[2]!=="markup")return!1}}}return!0}parseLabelMarkup(t){return t?typeof t=="string"?this.parseLabelStringMarkup(t):this.parseJSONMarkup(t):null}parseLabelStringMarkup(t){const e=se.createVectors(t),i=document.createDocumentFragment();for(let r=0,o=e.length;r<o;r+=1){const a=e[r].node;i.appendChild(a)}return{fragment:i,selectors:{}}}normalizeLabelMarkup(t){if(t==null)return;const e=t.fragment;if(!(e instanceof DocumentFragment)||!e.hasChildNodes())throw new Error("Invalid label markup.");let i;const r=e.childNodes;return r.length>1||r[0].nodeName.toUpperCase()!=="G"?i=se.create("g").append(e):i=se.create(r[0]),i.addClass(this.prefixClassName("edge-label")),{node:i.node,selectors:t.selectors}}updateLabels(){if(this.labelContainer){const t=this.cell,e=t.labels,i=this.can("edgeLabelMovable"),r=t.getDefaultLabel();for(let o=0,a=e.length;o<a;o+=1){const s=this.labelCache[o],l=this.labelSelectors[o];s.setAttribute("cursor",i?"move":"default");const h=e[o],u=zn({},r.attrs,h.attrs);this.updateAttrs(s,u,{selectors:l,rootBBox:h.size?Tt.fromSize(h.size):void 0})}}}renderTools(){const t=this.cell.getTools();return this.addTools(t),this}update(t={}){this.cleanCache(),this.updateConnection(t);const e=this.cell.getAttrs(),{text:i}=e,r=S3t(e,["text"]);return r!=null&&this.updateAttrs(this.container,r,{selectors:this.selectors}),this.updateLabelPositions(),this.updateTools(t),this}removeRedundantLinearVertices(t={}){const e=this.cell,i=e.getVertices(),r=[this.sourceAnchor,...i,this.targetAnchor],o=r.length,a=new Rn(r);a.simplify({threshold:.01});const s=a.points.map(h=>h.toJSON()),l=s.length;return o===l?0:(e.setVertices(s.slice(1,l-1),t),o-l)}getTerminalView(t){switch(t){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error(`Unknown terminal type '${t}'`)}}getTerminalAnchor(t){switch(t){case"source":return Q.create(this.sourceAnchor);case"target":return Q.create(this.targetAnchor);default:throw new Error(`Unknown terminal type '${t}'`)}}getTerminalConnectionPoint(t){switch(t){case"source":return Q.create(this.sourcePoint);case"target":return Q.create(this.targetPoint);default:throw new Error(`Unknown terminal type '${t}'`)}}getTerminalMagnet(t,e={}){switch(t){case"source":{if(e.raw)return this.sourceMagnet;const i=this.sourceView;return i?this.sourceMagnet||i.container:null}case"target":{if(e.raw)return this.targetMagnet;const i=this.targetView;return i?this.targetMagnet||i.container:null}default:throw new Error(`Unknown terminal type '${t}'`)}}updateConnection(t={}){const e=this.cell;if(t.translateBy&&e.isFragmentDescendantOf(t.translateBy)){const i=t.tx||0,r=t.ty||0;this.routePoints=new Rn(this.routePoints).translate(i,r).points,this.translateConnectionPoints(i,r),this.path.translate(i,r)}else{const i=e.getVertices(),r=this.findAnchors(i);this.sourceAnchor=r.source,this.targetAnchor=r.target,this.routePoints=this.findRoutePoints(i);const o=this.findConnectionPoints(this.routePoints,this.sourceAnchor,this.targetAnchor);this.sourcePoint=o.source,this.targetPoint=o.target;const a=this.findMarkerPoints(this.routePoints,this.sourcePoint,this.targetPoint);this.path=this.findPath(this.routePoints,a.source||this.sourcePoint,a.target||this.targetPoint)}this.cleanCache()}findAnchors(t){const e=this.cell,i=e.source,r=e.target,o=t[0],a=t[t.length-1];return r.priority&&!i.priority?this.findAnchorsOrdered("target",a,"source",o):this.findAnchorsOrdered("source",o,"target",a)}findAnchorsOrdered(t,e,i,r){let o,a;const s=this.cell,l=s[t],h=s[i],u=this.getTerminalView(t),d=this.getTerminalView(i),c=this.getTerminalMagnet(t),f=this.getTerminalMagnet(i);if(u){let g;e?g=Q.create(e):d?g=f:g=Q.create(h),o=this.getAnchor(l.anchor,u,c,g,t)}else o=Q.create(l);if(d){const g=Q.create(r||o);a=this.getAnchor(h.anchor,d,f,g,i)}else a=Q.isPointLike(h)?Q.create(h):new Q;return{[t]:o,[i]:a}}getAnchor(t,e,i,r,o){const a=e.isEdgeElement(i),s=this.graph.options.connecting;let l=typeof t=="string"?{name:t}:t;if(!l){const d=a?(o==="source"?s.sourceEdgeAnchor:s.targetEdgeAnchor)||s.edgeAnchor:(o==="source"?s.sourceAnchor:s.targetAnchor)||s.anchor;l=typeof d=="string"?{name:d}:d}if(!l)throw new Error("Anchor should be specified.");let h;const u=l.name;if(a){const d=vv.registry.get(u);if(typeof d!="function")return vv.registry.onNotFound(u);h=de(d,this,e,i,r,l.args||{},o)}else{const d=pv.registry.get(u);if(typeof d!="function")return pv.registry.onNotFound(u);h=de(d,this,e,i,r,l.args||{},o)}return h?h.round(this.POINT_ROUNDING):new Q}findRoutePoints(t=[]){const e=this.graph.options.connecting.router||zu.presets.normal,i=this.cell.getRouter()||e;let r;if(typeof i=="function")r=de(i,this,t,{},this);else{const o=typeof i=="string"?i:i.name,a=typeof i=="string"?{}:i.args||{},s=o?zu.registry.get(o):zu.presets.normal;if(typeof s!="function")return zu.registry.onNotFound(o);r=de(s,this,t,a,this)}return r==null?t.map(o=>Q.create(o)):r.map(o=>Q.create(o))}findConnectionPoints(t,e,i){const r=this.cell,o=this.graph.options.connecting,a=r.getSource(),s=r.getTarget(),l=this.sourceView,h=this.targetView,u=t[0],d=t[t.length-1];let c;if(l&&!l.isEdgeElement(this.sourceMagnet)){const g=this.sourceMagnet||l.container,p=u||i,v=new Ut(p,e),m=a.connectionPoint||o.sourceConnectionPoint||o.connectionPoint;c=this.getConnectionPoint(m,l,g,v,"source")}else c=e;let f;if(h&&!h.isEdgeElement(this.targetMagnet)){const g=this.targetMagnet||h.container,p=s.connectionPoint||o.targetConnectionPoint||o.connectionPoint,v=d||e,m=new Ut(v,i);f=this.getConnectionPoint(p,h,g,m,"target")}else f=i;return{source:c,target:f}}getConnectionPoint(t,e,i,r,o){const a=r.end;if(t==null)return a;const s=typeof t=="string"?t:t.name,l=typeof t=="string"?{}:t.args,h=mv.registry.get(s);if(typeof h!="function")return mv.registry.onNotFound(s);const u=de(h,this,r,e,i,l||{},o);return u?u.round(this.POINT_ROUNDING):a}findMarkerPoints(t,e,i){const r=d=>{const c=this.cell.getAttrs(),f=Object.keys(c);for(let g=0,p=f.length;g<p;g+=1){const v=c[f[g]];if(v[`${d}Marker`]||v[`${d}-marker`]){const m=v.strokeWidth||v["stroke-width"];if(m)return parseFloat(m);break}}return null},o=t[0],a=t[t.length-1];let s,l;const h=r("source");h&&(s=e.clone().move(o||i,-h));const u=r("target");return u&&(l=i.clone().move(a||e,-u)),this.sourceMarkerPoint=s||e.clone(),this.targetMarkerPoint=l||i.clone(),{source:s,target:l}}findPath(t,e,i){const r=this.cell.getConnector()||this.graph.options.connecting.connector;let o,a,s;if(typeof r=="string"?o=r:(o=r.name,a=r.args),o){const h=gf.registry.get(o);if(typeof h!="function")return gf.registry.onNotFound(o);s=h}else s=gf.presets.normal;const l=de(s,this,e,i,t,Object.assign(Object.assign({},a),{raw:!0}),this);return typeof l=="string"?De.parse(l):l}translateConnectionPoints(t,e){this.sourcePoint.translate(t,e),this.targetPoint.translate(t,e),this.sourceAnchor.translate(t,e),this.targetAnchor.translate(t,e),this.sourceMarkerPoint.translate(t,e),this.targetMarkerPoint.translate(t,e)}updateLabelPositions(){if(this.labelContainer==null)return this;if(!this.path)return this;const e=this.cell,i=e.getLabels();if(i.length===0)return this;const r=e.getDefaultLabel(),o=this.normalizeLabelPosition(r.position);for(let a=0,s=i.length;a<s;a+=1){const l=i[a],h=this.labelCache[a];if(!h)continue;const u=this.normalizeLabelPosition(l.position),d=zn({},o,u),c=this.getLabelTransformationMatrix(d);h.setAttribute("transform",Jv(c))}return this}updateTerminalProperties(t){const e=this.cell,i=this.graph,r=e[t],o=r&&r.cell,a=`${t}View`;if(!o)return this[a]=null,this.updateTerminalMagnet(t),!0;const s=i.getCellById(o);if(!s)throw new Error(`Edge's ${t} node with id "${o}" not exists`);const l=s.findView(i);return l?(this[a]=l,this.updateTerminalMagnet(t),!0):!1}updateTerminalMagnet(t){const e=`${t}Magnet`,i=this.getTerminalView(t);if(i){let r=i.getMagnetFromEdgeTerminal(this.cell[t]);r===i.container&&(r=null),this[e]=r}else this[e]=null}getLabelPositionAngle(t){const e=this.cell.getLabelAt(t);return e&&e.position&&typeof e.position=="object"&&e.position.angle||0}getLabelPositionArgs(t){const e=this.cell.getLabelAt(t);if(e&&e.position&&typeof e.position=="object")return e.position.options}getDefaultLabelPositionArgs(){const t=this.cell.getDefaultLabel();if(t&&t.position&&typeof t.position=="object")return t.position.options}mergeLabelPositionArgs(t,e){return t===null?null:t===void 0?e===null?null:e:zn({},e,t)}getConnection(){return this.path!=null?this.path.clone():null}getConnectionPathData(){if(this.path==null)return"";const t=this.cache.pathCache;return Z_(t,"data")||(t.data=this.path.serialize()),t.data||""}getConnectionSubdivisions(){if(this.path==null)return null;const t=this.cache.pathCache;return Z_(t,"segmentSubdivisions")||(t.segmentSubdivisions=this.path.getSegmentSubdivisions()),t.segmentSubdivisions}getConnectionLength(){if(this.path==null)return 0;const t=this.cache.pathCache;return Z_(t,"length")||(t.length=this.path.length({segmentSubdivisions:this.getConnectionSubdivisions()})),t.length}getPointAtLength(t){return this.path==null?null:this.path.pointAtLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()})}getPointAtRatio(t){return this.path==null?null:(Nh(t)&&(t=parseFloat(t)/100),this.path.pointAt(t,{segmentSubdivisions:this.getConnectionSubdivisions()}))}getTangentAtLength(t){return this.path==null?null:this.path.tangentAtLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()})}getTangentAtRatio(t){return this.path==null?null:this.path.tangentAt(t,{segmentSubdivisions:this.getConnectionSubdivisions()})}getClosestPoint(t){return this.path==null?null:this.path.closestPoint(t,{segmentSubdivisions:this.getConnectionSubdivisions()})}getClosestPointLength(t){return this.path==null?null:this.path.closestPointLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()})}getClosestPointRatio(t){return this.path==null?null:this.path.closestPointNormalizedLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()})}getLabelPosition(t,e,i,r){const o={distance:0};let a=0,s;typeof i=="number"?(a=i,s=r):s=i,s!=null&&(o.options=s);const l=s&&s.absoluteOffset,h=!(s&&s.absoluteDistance),u=s&&s.absoluteDistance&&s.reverseDistance,d=this.path,c={segmentSubdivisions:this.getConnectionSubdivisions()},f=new Q(t,e),g=d.closestPointT(f,c),p=this.getConnectionLength()||0;let v=d.lengthAtT(g,c);h&&(v=p>0?v/p:0),u&&(v=-1*(p-v)||1),o.distance=v;let m;l||(m=d.tangentAtT(g));let y;if(m)y=m.pointOffset(f);else{const b=d.pointAtT(g),_=f.diff(b);y={x:_.x,y:_.y}}return o.offset=y,o.angle=a,o}normalizeLabelPosition(t){return typeof t=="number"?{distance:t}:t}getLabelTransformationMatrix(t){const e=this.normalizeLabelPosition(t),i=e.options||{},r=e.angle||0,o=e.distance,a=o>0&&o<=1;let s=0;const l={x:0,y:0},h=e.offset;h&&(typeof h=="number"?s=h:(h.x!=null&&(l.x=h.x),h.y!=null&&(l.y=h.y)));const u=l.x!==0||l.y!==0||s===0,d=i.keepGradient,c=i.ensureLegibility,f=this.path,g={segmentSubdivisions:this.getConnectionSubdivisions()},p=a?o*this.getConnectionLength():o,v=f.tangentAtLength(p,g);let m,y=r;if(v){if(u)m=v.start,m.translate(l);else{const b=v.clone();b.rotate(-90,v.start),b.setLength(s),m=b.end}d&&(y=v.angle()+r,c&&(y=Ri.normalize((y+90)%180-90)))}else m=f.start,u&&m.translate(l);return lr().translate(m.x,m.y).rotate(y)}getVertexIndex(t,e){const r=this.cell.getVertices(),o=this.getClosestPointLength(new Q(t,e));let a=0;if(o!=null)for(const s=r.length;a<s;a+=1){const l=r[a],h=this.getClosestPointLength(l);if(h!=null&&o<h)break}return a}getEventArgs(t,e,i){const r=this,o=r.cell,a=o;return e==null||i==null?{e:t,view:r,edge:o,cell:a}:{e:t,x:e,y:i,view:r,edge:o,cell:a}}notifyUnhandledMouseDown(t,e,i){this.notify("edge:unhandled:mousedown",{e:t,x:e,y:i,view:this,cell:this.cell,edge:this.cell})}notifyMouseDown(t,e,i){super.onMouseDown(t,e,i),this.notify("edge:mousedown",this.getEventArgs(t,e,i))}notifyMouseMove(t,e,i){super.onMouseMove(t,e,i),this.notify("edge:mousemove",this.getEventArgs(t,e,i))}notifyMouseUp(t,e,i){super.onMouseUp(t,e,i),this.notify("edge:mouseup",this.getEventArgs(t,e,i))}onClick(t,e,i){super.onClick(t,e,i),this.notify("edge:click",this.getEventArgs(t,e,i))}onDblClick(t,e,i){super.onDblClick(t,e,i),this.notify("edge:dblclick",this.getEventArgs(t,e,i))}onContextMenu(t,e,i){super.onContextMenu(t,e,i),this.notify("edge:contextmenu",this.getEventArgs(t,e,i))}onMouseDown(t,e,i){this.notifyMouseDown(t,e,i),this.startEdgeDragging(t,e,i)}onMouseMove(t,e,i){const r=this.getEventData(t);switch(r.action){case"drag-label":{this.dragLabel(t,e,i);break}case"drag-arrowhead":{this.dragArrowhead(t,e,i);break}case"drag-edge":{this.dragEdge(t,e,i);break}}return this.notifyMouseMove(t,e,i),r}onMouseUp(t,e,i){const r=this.getEventData(t);switch(r.action){case"drag-label":{this.stopLabelDragging(t,e,i);break}case"drag-arrowhead":{this.stopArrowheadDragging(t,e,i);break}case"drag-edge":{this.stopEdgeDragging(t,e,i);break}}return this.notifyMouseUp(t,e,i),this.checkMouseleave(t),r}onMouseOver(t){super.onMouseOver(t),this.notify("edge:mouseover",this.getEventArgs(t))}onMouseOut(t){super.onMouseOut(t),this.notify("edge:mouseout",this.getEventArgs(t))}onMouseEnter(t){super.onMouseEnter(t),this.notify("edge:mouseenter",this.getEventArgs(t))}onMouseLeave(t){super.onMouseLeave(t),this.notify("edge:mouseleave",this.getEventArgs(t))}onMouseWheel(t,e,i,r){super.onMouseWheel(t,e,i,r),this.notify("edge:mousewheel",Object.assign({delta:r},this.getEventArgs(t,e,i)))}onCustomEvent(t,e,i,r){if(urt(t.target,"edge-tool",this.container)){if(t.stopPropagation(),this.can("useEdgeTools")){if(e==="edge:remove"){this.cell.remove({ui:!0});return}this.notify("edge:customevent",Object.assign({name:e},this.getEventArgs(t,i,r)))}this.notifyMouseDown(t,i,r)}else this.notify("edge:customevent",Object.assign({name:e},this.getEventArgs(t,i,r))),super.onCustomEvent(t,e,i,r)}onLabelMouseDown(t,e,i){this.notifyMouseDown(t,e,i),this.startLabelDragging(t,e,i),this.getEventData(t).stopPropagation&&t.stopPropagation()}startEdgeDragging(t,e,i){if(!this.can("edgeMovable")){this.notifyUnhandledMouseDown(t,e,i);return}this.setEventData(t,{x:e,y:i,moving:!1,action:"drag-edge"})}dragEdge(t,e,i){const r=this.getEventData(t);r.moving||(r.moving=!0,this.addClass("edge-moving"),this.notify("edge:move",{e:t,x:e,y:i,view:this,cell:this.cell,edge:this.cell})),this.cell.translate(e-r.x,i-r.y,{ui:!0}),this.setEventData(t,{x:e,y:i}),this.notify("edge:moving",{e:t,x:e,y:i,view:this,cell:this.cell,edge:this.cell})}stopEdgeDragging(t,e,i){const r=this.getEventData(t);r.moving&&(this.removeClass("edge-moving"),this.notify("edge:moved",{e:t,x:e,y:i,view:this,cell:this.cell,edge:this.cell})),r.moving=!1}prepareArrowheadDragging(t,e){const i=this.getTerminalMagnet(t),r={action:"drag-arrowhead",x:e.x,y:e.y,isNewEdge:e.isNewEdge===!0,terminalType:t,initialMagnet:i,initialTerminal:QL(this.cell[t]),fallbackAction:e.fallbackAction||"revert",getValidateConnectionArgs:this.createValidateConnectionArgs(t),options:e.options};return this.beforeArrowheadDragging(r),r}createValidateConnectionArgs(t){const e=[];e[4]=t,e[5]=this;let i,r=0,o=0;t==="source"?(r=2,i="target"):(o=2,i="source");const a=this.cell[i],s=a.cell;if(s){let l;const h=e[r]=this.graph.findViewByCell(s);h&&(l=h.getMagnetFromEdgeTerminal(a),l===h.container&&(l=void 0)),e[r+1]=l}return(l,h)=>(e[o]=l,e[o+1]=l.container===h?void 0:h,e)}beforeArrowheadDragging(t){t.zIndex=this.cell.zIndex,this.cell.toFront();const e=this.container.style;t.pointerEvents=e.pointerEvents,e.pointerEvents="none",this.graph.options.connecting.highlight&&this.highlightAvailableMagnets(t)}afterArrowheadDragging(t){t.zIndex!=null&&(this.cell.setZIndex(t.zIndex,{ui:!0}),t.zIndex=null);const e=this.container;e.style.pointerEvents=t.pointerEvents||"",this.graph.options.connecting.highlight&&this.unhighlightAvailableMagnets(t)}validateConnection(t,e,i,r,o,a,s){const l=this.graph.options.connecting,h=l.allowLoop,u=l.allowNode,d=l.allowEdge,c=l.allowPort,f=l.allowMulti,g=l.validateConnection,p=a?a.cell:null,v=o==="target"?i:t,m=o==="target"?r:e;let y=!0;const b=_=>{const w=o==="source"?s?s.port:null:p?p.getSourcePortId():null,C=o==="target"?s?s.port:null:p?p.getTargetPortId():null;return de(_,this.graph,{edge:p,edgeView:a,sourceView:t,targetView:i,sourcePort:w,targetPort:C,sourceMagnet:e,targetMagnet:r,sourceCell:t?t.cell:null,targetCell:i?i.cell:null,type:o})};if(h!=null&&(typeof h=="boolean"?!h&&t===i&&(y=!1):y=b(h)),y&&c!=null&&(typeof c=="boolean"?!c&&m&&(y=!1):y=b(c)),y&&d!=null&&(typeof d=="boolean"?!d&&Wh.isEdgeView(v)&&(y=!1):y=b(d)),y&&u!=null&&m==null&&(typeof u=="boolean"?!u&&Rs.isNodeView(v)&&(y=!1):y=b(u)),y&&f!=null&&a){const _=a.cell,w=o==="source"?s:_.getSource(),C=o==="target"?s:_.getTarget(),x=s?this.graph.getCellById(s.cell):null;if(w&&C&&w.cell&&C.cell&&x)if(typeof f=="function")y=b(f);else{const S=this.graph.model.getConnectedEdges(x,{outgoing:o==="source",incoming:o==="target"});S.length&&(f==="withPort"?S.some(T=>{const M=T.getSource(),R=T.getTarget();return M&&R&&M.cell===w.cell&&R.cell===C.cell&&M.port!=null&&M.port===w.port&&R.port!=null&&R.port===C.port})&&(y=!1):f||S.some(T=>{const M=T.getSource(),R=T.getTarget();return M&&R&&M.cell===w.cell&&R.cell===C.cell})&&(y=!1))}}return y&&g!=null&&(y=b(g)),y}allowConnectToBlank(t){const e=this.graph,r=e.options.connecting.allowBlank;if(typeof r!="function")return!!r;const o=e.findViewByCell(t),a=t.getSourceCell(),s=t.getTargetCell(),l=e.findViewByCell(a),h=e.findViewByCell(s);return de(r,e,{edge:t,edgeView:o,sourceCell:a,targetCell:s,sourceView:l,targetView:h,sourcePort:t.getSourcePortId(),targetPort:t.getTargetPortId(),sourceMagnet:o.sourceMagnet,targetMagnet:o.targetMagnet})}validateEdge(t,e,i){const r=this.graph;if(!this.allowConnectToBlank(t)){const a=t.getSourceCellId(),s=t.getTargetCellId();if(!(a&&s))return!1}const o=r.options.connecting.validateEdge;return o?de(o,r,{edge:t,type:e,previous:i}):!0}arrowheadDragging(t,e,i,r){r.x=e,r.y=i,r.currentTarget!==t&&(r.currentMagnet&&r.currentView&&r.currentView.unhighlight(r.currentMagnet,{type:"magnetAdsorbed"}),r.currentView=this.graph.findViewByElem(t),r.currentView?(r.currentMagnet=r.currentView.findMagnet(t),r.currentMagnet&&this.validateConnection(...r.getValidateConnectionArgs(r.currentView,r.currentMagnet),r.currentView.getEdgeTerminal(r.currentMagnet,e,i,this.cell,r.terminalType))?r.currentView.highlight(r.currentMagnet,{type:"magnetAdsorbed"}):r.currentMagnet=null):r.currentMagnet=null),r.currentTarget=t,this.cell.prop(r.terminalType,{x:e,y:i},Object.assign(Object.assign({},r.options),{ui:!0}))}arrowheadDragged(t,e,i){const r=t.currentView,o=t.currentMagnet;if(!o||!r)return;r.unhighlight(o,{type:"magnetAdsorbed"});const a=t.terminalType,s=r.getEdgeTerminal(o,e,i,this.cell,a);this.cell.setTerminal(a,s,{ui:!0})}snapArrowhead(t,e,i){const r=this.graph,{snap:o,allowEdge:a}=r.options.connecting,s=typeof o=="object"&&o.radius||50,l=typeof o=="object"&&o.anchor||"center",h=r.renderer.findViewsInArea({x:t-s,y:e-s,width:2*s,height:2*s},{nodeOnly:!0});if(a){const _=r.renderer.findEdgeViewsFromPoint({x:t,y:e},s).filter(w=>w!==this);h.push(..._)}const u=i.closestView||null,d=i.closestMagnet||null;i.closestView=null,i.closestMagnet=null;let c,f=Number.MAX_SAFE_INTEGER;const g=new Q(t,e);h.forEach(_=>{if(_.container.getAttribute("magnet")!=="false"){if(_.isNodeView())c=l==="center"?_.cell.getBBox().getCenter().distance(g):_.cell.getBBox().getNearestPointToPoint(g).distance(g);else if(_.isEdgeView()){const w=_.getClosestPoint(g);w?c=w.distance(g):c=Number.MAX_SAFE_INTEGER}c<s&&c<f&&(d===_.container||this.validateConnection(...i.getValidateConnectionArgs(_,null),_.getEdgeTerminal(_.container,t,e,this.cell,i.terminalType)))&&(f=c,i.closestView=_,i.closestMagnet=_.container)}_.container.querySelectorAll("[magnet]").forEach(w=>{if(w.getAttribute("magnet")!=="false"){const C=_.getBBoxOfElement(w);c=g.distance(C.getCenter()),c<s&&c<f&&(d===w||this.validateConnection(...i.getValidateConnectionArgs(_,w),_.getEdgeTerminal(w,t,e,this.cell,i.terminalType)))&&(f=c,i.closestView=_,i.closestMagnet=w)}})});let p;const v=i.terminalType,m=i.closestView,y=i.closestMagnet,b=d!==y;if(u&&b&&u.unhighlight(d,{type:"magnetAdsorbed"}),m){if(!b)return;m.highlight(y,{type:"magnetAdsorbed"}),p=m.getEdgeTerminal(y,t,e,this.cell,v)}else p={x:t,y:e};this.cell.setTerminal(v,p,{},Object.assign(Object.assign({},i.options),{ui:!0}))}snapArrowheadEnd(t){const e=t.closestView,i=t.closestMagnet;e&&i&&(e.unhighlight(i,{type:"magnetAdsorbed"}),t.currentMagnet=e.findMagnet(i)),t.closestView=null,t.closestMagnet=null}finishEmbedding(t){this.graph.options.embedding.enabled&&this.cell.updateParent()&&(t.zIndex=null)}fallbackConnection(t){switch(t.fallbackAction){case"remove":this.cell.remove({ui:!0});break;case"revert":default:this.cell.prop(t.terminalType,t.initialTerminal,{ui:!0});break}}notifyConnectionEvent(t,e){const i=t.terminalType,r=t.initialTerminal,o=this.cell[i];if(o&&!cn.equalTerminals(r,o)){const s=this.graph,l=r,h=l.cell?s.getCellById(l.cell):null,u=l.port,d=h?s.findViewByCell(h):null,c=h||t.isNewEdge?null:Q.create(r).toJSON(),f=o,g=f.cell?s.getCellById(f.cell):null,p=f.port,v=g?s.findViewByCell(g):null,m=g?null:Q.create(o).toJSON();this.notify("edge:connected",{e,previousCell:h,previousPort:u,previousView:d,previousPoint:c,currentCell:g,currentView:v,currentPort:p,currentPoint:m,previousMagnet:t.initialMagnet,currentMagnet:t.currentMagnet,edge:this.cell,view:this,type:i,isNew:t.isNewEdge})}}highlightAvailableMagnets(t){const e=this.graph,i=e.model.getCells();t.marked={};for(let r=0,o=i.length;r<o;r+=1){const a=e.findViewByCell(i[r]);if(!a||a.cell.id===this.cell.id)continue;const s=Array.prototype.slice.call(a.container.querySelectorAll("[magnet]"));a.container.getAttribute("magnet")!=="false"&&s.push(a.container);const l=s.filter(h=>this.validateConnection(...t.getValidateConnectionArgs(a,h),a.getEdgeTerminal(h,t.x,t.y,this.cell,t.terminalType)));if(l.length>0){for(let h=0,u=l.length;h<u;h+=1)a.highlight(l[h],{type:"magnetAvailable"});a.highlight(null,{type:"nodeAvailable"}),t.marked[a.cell.id]=l}}}unhighlightAvailableMagnets(t){const e=t.marked||{};Object.keys(e).forEach(i=>{const r=this.graph.findViewByCell(i);r&&(e[i].forEach(a=>{r.unhighlight(a,{type:"magnetAvailable"})}),r.unhighlight(null,{type:"nodeAvailable"}))}),t.marked=null}startArrowheadDragging(t,e,i){if(!this.can("arrowheadMovable")){this.notifyUnhandledMouseDown(t,e,i);return}const o=t.target.getAttribute("data-terminal"),a=this.prepareArrowheadDragging(o,{x:e,y:i});this.setEventData(t,a)}dragArrowhead(t,e,i){const r=this.getEventData(t);this.graph.options.connecting.snap?this.snapArrowhead(e,i,r):this.arrowheadDragging(this.getEventTarget(t),e,i,r)}stopArrowheadDragging(t,e,i){const r=this.graph,o=this.getEventData(t);r.options.connecting.snap?this.snapArrowheadEnd(o):this.arrowheadDragged(o,e,i),this.validateEdge(this.cell,o.terminalType,o.initialTerminal)?(this.finishEmbedding(o),this.notifyConnectionEvent(o,t)):this.fallbackConnection(o),this.afterArrowheadDragging(o)}startLabelDragging(t,e,i){if(this.can("edgeLabelMovable")){const r=t.currentTarget,o=parseInt(r.getAttribute("data-index"),10),a=this.getLabelPositionAngle(o),s=this.getLabelPositionArgs(o),l=this.getDefaultLabelPositionArgs(),h=this.mergeLabelPositionArgs(s,l);this.setEventData(t,{index:o,positionAngle:a,positionArgs:h,stopPropagation:!0,action:"drag-label"})}else this.setEventData(t,{stopPropagation:!0});this.graph.view.delegateDragEvents(t,this)}dragLabel(t,e,i){const r=this.getEventData(t),o=this.cell.getLabelAt(r.index),a=zn({},o,{position:this.getLabelPosition(e,i,r.positionAngle,r.positionArgs)});this.cell.setLabelAt(r.index,a)}stopLabelDragging(t,e,i){}}(function(n){n.toStringTag=`X6.${n.name}`;function t(e){if(e==null)return!1;if(e instanceof n)return!0;const i=e[Symbol.toStringTag],r=e;return(i==null||i===n.toStringTag)&&typeof r.isNodeView=="function"&&typeof r.isEdgeView=="function"&&typeof r.confirmUpdate=="function"&&typeof r.update=="function"&&typeof r.getConnection=="function"}n.isEdgeView=t})(Wh||(Wh={}));Wh.config({isSvgElement:!0,priority:1,bootstrap:["render","source","target"],actions:{view:["render"],markup:["render"],attrs:["update"],source:["source","update"],target:["target","update"],router:["update"],connector:["update"],labels:["labels"],defaultLabel:["labels"],tools:["tools"],vertices:["vertices","update"]}});Wh.registry.register("edge",Wh,!0);var A3t=function(n,t,e,i){var r=arguments.length,o=r<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(t,e,o):a(t,e))||o);return r>3&&o&&Object.defineProperty(t,e,o),o};class Rl extends Vi{get disposeContainer(){return!1}get options(){return this.graph.options}constructor(t){super(),this.graph=t;const{selectors:e,fragment:i}=Ni.parseJSONMarkup(Rl.markup);this.background=e.background,this.grid=e.grid,this.svg=e.svg,this.defs=e.defs,this.viewport=e.viewport,this.primer=e.primer,this.stage=e.stage,this.decorator=e.decorator,this.overlay=e.overlay,this.container=this.options.container,this.restore=Rl.snapshoot(this.container),ri(this.container,this.prefixClassName("graph")),A_(this.container,i),this.delegateEvents()}delegateEvents(){const t=this.constructor;return super.delegateEvents(t.events),this}guard(t,e){return t.type==="mousedown"&&t.button===2||this.options.guard&&this.options.guard(t,e)?!0:t.data&&t.data.guarded!==void 0?t.data.guarded:!(e&&e.cell&&Fe.isCell(e.cell)||this.svg===t.target||this.container===t.target||this.svg.contains(t.target))}findView(t){return this.graph.findViewByElem(t)}onDblClick(t){this.options.preventDefaultDblClick&&t.preventDefault();const e=this.normalizeEvent(t),i=this.findView(e.target);if(this.guard(e,i))return;const r=this.graph.snapToGrid(e.clientX,e.clientY);i?i.onDblClick(e,r.x,r.y):this.graph.trigger("blank:dblclick",{e,x:r.x,y:r.y})}onClick(t){if(this.getMouseMovedCount(t)<=this.options.clickThreshold){const e=this.normalizeEvent(t),i=this.findView(e.target);if(this.guard(e,i))return;const r=this.graph.snapToGrid(e.clientX,e.clientY);i?i.onClick(e,r.x,r.y):this.graph.trigger("blank:click",{e,x:r.x,y:r.y})}}isPreventDefaultContextMenu(t){let e=this.options.preventDefaultContextMenu;return typeof e=="function"&&(e=de(e,this.graph,{view:t})),e}onContextMenu(t){const e=this.normalizeEvent(t),i=this.findView(e.target);if(this.isPreventDefaultContextMenu(i)&&t.preventDefault(),this.guard(e,i))return;const r=this.graph.snapToGrid(e.clientX,e.clientY);i?i.onContextMenu(e,r.x,r.y):this.graph.trigger("blank:contextmenu",{e,x:r.x,y:r.y})}delegateDragEvents(t,e){t.data==null&&(t.data={}),this.setEventData(t,{currentView:e||null,mouseMovedCount:0,startPosition:{x:t.clientX,y:t.clientY}});const i=this.constructor;this.delegateDocumentEvents(i.documentEvents,t.data),this.undelegateEvents()}getMouseMovedCount(t){return this.getEventData(t).mouseMovedCount||0}onMouseDown(t){const e=this.normalizeEvent(t),i=this.findView(e.target);if(this.guard(e,i))return;this.options.preventDefaultMouseDown&&t.preventDefault();const r=this.graph.snapToGrid(e.clientX,e.clientY);i?i.onMouseDown(e,r.x,r.y):(this.options.preventDefaultBlankAction&&["touchstart"].includes(e.type)&&t.preventDefault(),this.graph.trigger("blank:mousedown",{e,x:r.x,y:r.y})),this.delegateDragEvents(e,i)}onMouseMove(t){const e=this.getEventData(t),i=e.startPosition;if(i&&i.x===t.clientX&&i.y===t.clientY||(e.mouseMovedCount==null&&(e.mouseMovedCount=0),e.mouseMovedCount+=1,e.mouseMovedCount<=this.options.moveThreshold))return;const o=this.normalizeEvent(t),a=this.graph.snapToGrid(o.clientX,o.clientY),s=e.currentView;s?s.onMouseMove(o,a.x,a.y):this.graph.trigger("blank:mousemove",{e:o,x:a.x,y:a.y}),this.setEventData(o,e)}onMouseUp(t){this.undelegateDocumentEvents();const e=this.normalizeEvent(t),i=this.graph.snapToGrid(e.clientX,e.clientY),o=this.getEventData(t).currentView;if(o?o.onMouseUp(e,i.x,i.y):this.graph.trigger("blank:mouseup",{e,x:i.x,y:i.y}),!t.isPropagationStopped()){const a=new yl(t,{type:"click",data:t.data});this.onClick(a)}t.stopImmediatePropagation(),this.delegateEvents()}onMouseOver(t){const e=this.normalizeEvent(t),i=this.findView(e.target);if(!this.guard(e,i))if(i)i.onMouseOver(e);else{if(this.container===e.target)return;this.graph.trigger("blank:mouseover",{e})}}onMouseOut(t){const e=this.normalizeEvent(t),i=this.findView(e.target);if(!this.guard(e,i))if(i)i.onMouseOut(e);else{if(this.container===e.target)return;this.graph.trigger("blank:mouseout",{e})}}onMouseEnter(t){const e=this.normalizeEvent(t),i=this.findView(e.target);if(this.guard(e,i))return;const r=this.graph.findViewByElem(e.relatedTarget);if(i){if(r===i)return;i.onMouseEnter(e)}else{if(r)return;this.graph.trigger("graph:mouseenter",{e})}}onMouseLeave(t){const e=this.normalizeEvent(t),i=this.findView(e.target);if(this.guard(e,i))return;const r=this.graph.findViewByElem(e.relatedTarget);if(i){if(r===i)return;i.onMouseLeave(e)}else{if(r)return;this.graph.trigger("graph:mouseleave",{e})}}onMouseWheel(t){const e=this.normalizeEvent(t),i=this.findView(e.target);if(this.guard(e,i))return;const r=e.originalEvent,o=this.graph.snapToGrid(r.clientX,r.clientY),a=Math.max(-1,Math.min(1,r.wheelDelta||-r.detail));i?i.onMouseWheel(e,o.x,o.y,a):this.graph.trigger("blank:mousewheel",{e,delta:a,x:o.x,y:o.y})}onCustomEvent(t){const e=t.currentTarget,i=e.getAttribute("event")||e.getAttribute("data-event");if(i){const r=this.findView(e);if(r){const o=this.normalizeEvent(t);if(this.guard(o,r))return;const a=this.graph.snapToGrid(o.clientX,o.clientY);r.onCustomEvent(o,i,a.x,a.y)}}}handleMagnetEvent(t,e){const i=t.currentTarget,r=i.getAttribute("magnet");if(r&&r.toLowerCase()!=="false"){const o=this.findView(i);if(o){const a=this.normalizeEvent(t);if(this.guard(a,o))return;const s=this.graph.snapToGrid(a.clientX,a.clientY);de(e,this.graph,o,a,i,s.x,s.y)}}}onMagnetMouseDown(t){this.handleMagnetEvent(t,(e,i,r,o,a)=>{e.onMagnetMouseDown(i,r,o,a)})}onMagnetDblClick(t){this.handleMagnetEvent(t,(e,i,r,o,a)=>{e.onMagnetDblClick(i,r,o,a)})}onMagnetContextMenu(t){const e=this.findView(t.target);this.isPreventDefaultContextMenu(e)&&t.preventDefault(),this.handleMagnetEvent(t,(i,r,o,a,s)=>{i.onMagnetContextMenu(r,o,a,s)})}onLabelMouseDown(t){const e=t.currentTarget,i=this.findView(e);if(i){const r=this.normalizeEvent(t);if(this.guard(r,i))return;const o=this.graph.snapToGrid(r.clientX,r.clientY);i.onLabelMouseDown(r,o.x,o.y)}}onImageDragStart(){return!1}dispose(){this.undelegateEvents(),this.undelegateDocumentEvents(),this.restore(),this.restore=()=>{}}}A3t([Vi.dispose()],Rl.prototype,"dispose",null);(function(n){const t=`${Ms.prefixCls}-graph`;n.markup=[{ns:nr.xhtml,tagName:"div",selector:"background",className:`${t}-background`},{ns:nr.xhtml,tagName:"div",selector:"grid",className:`${t}-grid`},{ns:nr.svg,tagName:"svg",selector:"svg",className:`${t}-svg`,attrs:{width:"100%",height:"100%","xmlns:xlink":nr.xlink},children:[{tagName:"defs",selector:"defs"},{tagName:"g",selector:"viewport",className:`${t}-svg-viewport`,children:[{tagName:"g",selector:"primer",className:`${t}-svg-primer`},{tagName:"g",selector:"stage",className:`${t}-svg-stage`},{tagName:"g",selector:"decorator",className:`${t}-svg-decorator`},{tagName:"g",selector:"overlay",className:`${t}-svg-overlay`}]}]}];function e(i){const r=i.cloneNode();return i.childNodes.forEach(o=>r.appendChild(o)),()=>{for(S_(i);i.attributes.length>0;)i.removeAttribute(i.attributes[0].name);for(let o=0,a=r.attributes.length;o<a;o+=1){const s=r.attributes[o];i.setAttribute(s.name,s.value)}r.childNodes.forEach(o=>i.appendChild(o))}}n.snapshoot=e})(Rl||(Rl={}));(function(n){const t=Ms.prefixCls;n.events={dblclick:"onDblClick",contextmenu:"onContextMenu",touchstart:"onMouseDown",mousedown:"onMouseDown",mouseover:"onMouseOver",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousewheel:"onMouseWheel",DOMMouseScroll:"onMouseWheel",[`mouseenter  .${t}-cell`]:"onMouseEnter",[`mouseleave  .${t}-cell`]:"onMouseLeave",[`mouseenter  .${t}-cell-tools`]:"onMouseEnter",[`mouseleave  .${t}-cell-tools`]:"onMouseLeave",[`mousedown   .${t}-cell [event]`]:"onCustomEvent",[`touchstart  .${t}-cell [event]`]:"onCustomEvent",[`mousedown   .${t}-cell [data-event]`]:"onCustomEvent",[`touchstart  .${t}-cell [data-event]`]:"onCustomEvent",[`dblclick    .${t}-cell [magnet]`]:"onMagnetDblClick",[`contextmenu .${t}-cell [magnet]`]:"onMagnetContextMenu",[`mousedown   .${t}-cell [magnet]`]:"onMagnetMouseDown",[`touchstart  .${t}-cell [magnet]`]:"onMagnetMouseDown",[`dblclick    .${t}-cell [data-magnet]`]:"onMagnetDblClick",[`contextmenu .${t}-cell [data-magnet]`]:"onMagnetContextMenu",[`mousedown   .${t}-cell [data-magnet]`]:"onMagnetMouseDown",[`touchstart  .${t}-cell [data-magnet]`]:"onMagnetMouseDown",[`dragstart   .${t}-cell image`]:"onImageDragStart",[`mousedown   .${t}-edge .${t}-edge-label`]:"onLabelMouseDown",[`touchstart  .${t}-edge .${t}-edge-label`]:"onLabelMouseDown"},n.documentEvents={mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"}})(Rl||(Rl={}));const T3t=`.x6-graph {
  position: relative;
  overflow: hidden;
  outline: none;
  touch-action: none;
}
.x6-graph-background,
.x6-graph-grid,
.x6-graph-svg {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}
.x6-graph-background-stage,
.x6-graph-grid-stage,
.x6-graph-svg-stage {
  user-select: none;
}
.x6-graph.x6-graph-pannable {
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}
.x6-graph.x6-graph-panning {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
  user-select: none;
}
.x6-node {
  cursor: move;
  /* stylelint-disable-next-line */
}
.x6-node.x6-node-immovable {
  cursor: default;
}
.x6-node * {
  -webkit-user-drag: none;
}
.x6-node .scalable * {
  vector-effect: non-scaling-stroke;
}
.x6-node [magnet='true'] {
  cursor: crosshair;
  transition: opacity 0.3s;
}
.x6-node [magnet='true']:hover {
  opacity: 0.7;
}
.x6-node foreignObject {
  display: block;
  overflow: visible;
  background-color: transparent;
}
.x6-node foreignObject > body {
  position: static;
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0;
  overflow: visible;
  background-color: transparent;
}
.x6-edge .source-marker,
.x6-edge .target-marker {
  vector-effect: non-scaling-stroke;
}
.x6-edge .connection {
  stroke-linejoin: round;
  fill: none;
}
.x6-edge .connection-wrap {
  cursor: move;
  opacity: 0;
  fill: none;
  stroke: #000;
  stroke-width: 15;
  stroke-linecap: round;
  stroke-linejoin: round;
}
.x6-edge .connection-wrap:hover {
  opacity: 0.4;
  stroke-opacity: 0.4;
}
.x6-edge .vertices {
  cursor: move;
  opacity: 0;
}
.x6-edge .vertices .vertex {
  fill: #1abc9c;
}
.x6-edge .vertices .vertex :hover {
  fill: #34495e;
  stroke: none;
}
.x6-edge .vertices .vertex-remove {
  cursor: pointer;
  fill: #fff;
}
.x6-edge .vertices .vertex-remove-area {
  cursor: pointer;
  opacity: 0.1;
}
.x6-edge .vertices .vertex-group:hover .vertex-remove-area {
  opacity: 1;
}
.x6-edge .arrowheads {
  cursor: move;
  opacity: 0;
}
.x6-edge .arrowheads .arrowhead {
  fill: #1abc9c;
}
.x6-edge .arrowheads .arrowhead :hover {
  fill: #f39c12;
  stroke: none;
}
.x6-edge .tools {
  cursor: pointer;
  opacity: 0;
}
.x6-edge .tools .tool-options {
  display: none;
}
.x6-edge .tools .tool-remove circle {
  fill: #f00;
}
.x6-edge .tools .tool-remove path {
  fill: #fff;
}
.x6-edge:hover .vertices,
.x6-edge:hover .arrowheads,
.x6-edge:hover .tools {
  opacity: 1;
}
.x6-highlight-opacity {
  opacity: 0.3;
}
.x6-cell-tool-editor {
  position: relative;
  display: inline-block;
  min-height: 1em;
  margin: 0;
  padding: 0;
  line-height: 1;
  white-space: normal;
  text-align: center;
  vertical-align: top;
  overflow-wrap: normal;
  outline: none;
  transform-origin: 0 0;
  -webkit-user-drag: none;
}
.x6-edge-tool-editor {
  border: 1px solid #275fc5;
  border-radius: 2px;
}
`;class ur extends Fh{get options(){return this.graph.options}get model(){return this.graph.model}get view(){return this.graph.view}constructor(t){super(),this.graph=t,this.init()}init(){}}var M3t=function(n,t,e,i){var r=arguments.length,o=r<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(t,e,o):a(t,e))||o);return r>3&&o&&Object.defineProperty(t,e,o),o};class vI extends ur{init(){IOt("core",T3t)}dispose(){OOt("core")}}M3t([vI.dispose()],vI.prototype,"dispose",null);var R3t=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e},_b;(function(n){function t(e){const{grid:i,panning:r,mousewheel:o,embedding:a}=e,s=R3t(e,["grid","panning","mousewheel","embedding"]),l=e.container;if(l!=null)s.width==null&&(s.width=l.clientWidth),s.height==null&&(s.height=l.clientHeight);else throw new Error("Ensure the container of the graph is specified and valid");const h=zn({},n.defaults,s),u={size:10,visible:!1};return typeof i=="number"?h.grid={size:i,visible:!1}:typeof i=="boolean"?h.grid=Object.assign(Object.assign({},u),{visible:i}):h.grid=Object.assign(Object.assign({},u),i),["panning","mousewheel","embedding"].forEach(c=>{const f=e[c];typeof f=="boolean"?h[c].enabled=f:h[c]=Object.assign(Object.assign({},h[c]),f)}),h}n.get=t})(_b||(_b={}));(function(n){n.defaults={x:0,y:0,scaling:{min:.01,max:16},grid:{size:10,visible:!1},background:!1,panning:{enabled:!1,eventTypes:["leftMouseDown"]},mousewheel:{enabled:!1,factor:1.2,zoomAtMousePosition:!0},highlighting:{default:{name:"stroke",args:{padding:3}},nodeAvailable:{name:"className",args:{className:Ms.prefix("available-node")}},magnetAvailable:{name:"className",args:{className:Ms.prefix("available-magnet")}}},connecting:{snap:!1,allowLoop:!0,allowNode:!0,allowEdge:!1,allowPort:!0,allowBlank:!0,allowMulti:!0,highlight:!1,anchor:"center",edgeAnchor:"ratio",connectionPoint:"boundary",router:"normal",connector:"normal",validateConnection({type:t,sourceView:e,targetView:i}){return(t==="target"?i:e)!=null},createEdge(){return new _3t}},translating:{restrict:!1},embedding:{enabled:!1,findParent:"bbox",frontOnly:!0,validate:()=>!0},moveThreshold:0,clickThreshold:0,magnetThreshold:0,preventDefaultDblClick:!0,preventDefaultMouseDown:!1,preventDefaultContextMenu:!0,preventDefaultBlankAction:!0,interacting:{edgeLabelMovable:!1},async:!0,virtual:!1,guard:()=>!1}})(_b||(_b={}));var P3t=function(n,t,e,i){var r=arguments.length,o=r<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(t,e,o):a(t,e))||o);return r>3&&o&&Object.defineProperty(t,e,o),o},B3t=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e};class QF extends ur{get elem(){return this.view.grid}get grid(){return this.options.grid}init(){this.startListening(),this.draw(this.grid)}startListening(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)}stopListening(){this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this)}setVisible(t){this.grid.visible!==t&&(this.grid.visible=t,this.update())}getGridSize(){return this.grid.size}setGridSize(t){this.grid.size=Math.max(t,1),this.update()}show(){this.setVisible(!0),this.update()}hide(){this.setVisible(!1),this.update()}clear(){this.elem.style.backgroundImage=""}draw(t){this.clear(),this.instance=null,Object.assign(this.grid,t),this.patterns=this.resolveGrid(t),this.update()}update(t={}){const e=this.grid.size;if(e<=1||!this.grid.visible)return this.clear();const i=this.graph.matrix(),r=this.getInstance(),o=Array.isArray(t)?t:[t];this.patterns.forEach((l,h)=>{const u=`pattern_${h}`,d=i.a||1,c=i.d||1,{update:f,markup:g}=l,p=B3t(l,["update","markup"]),v=Object.assign(Object.assign(Object.assign({},p),o[h]),{sx:d,sy:c,ox:i.e||0,oy:i.f||0,width:e*d,height:e*c});r.has(u)||r.add(u,se.create("pattern",{id:u,patternUnits:"userSpaceOnUse"},se.createVectors(g)).node);const m=r.get(u);typeof f=="function"&&f(m.childNodes[0],v);let y=v.ox%v.width;y<0&&(y+=v.width);let b=v.oy%v.height;b<0&&(b+=v.height),Pi(m,{x:y,y:b,width:v.width,height:v.height})});const a=new XMLSerializer().serializeToString(r.root),s=`url(data:image/svg+xml;base64,${btoa(a)})`;this.elem.style.backgroundImage=s}getInstance(){return this.instance||(this.instance=new Hu),this.instance}resolveGrid(t){if(!t)return[];const e=t.type;if(e==null)return[Object.assign(Object.assign({},Hu.presets.dot),t.args)];const i=Hu.registry.get(e);if(i){let r=t.args||[];return Array.isArray(r)||(r=[r]),Array.isArray(i)?i.map((o,a)=>Object.assign(Object.assign({},o),r[a])):[Object.assign(Object.assign({},i),r[0])]}return Hu.registry.onNotFound(e)}dispose(){this.stopListening(),this.clear()}}P3t([ur.dispose()],QF.prototype,"dispose",null);class _ot extends ur{get container(){return this.graph.view.container}get viewport(){return this.graph.view.viewport}get stage(){return this.graph.view.stage}init(){this.resize()}getMatrix(){const t=this.viewport.getAttribute("transform");return t!==this.viewportTransformString&&(this.viewportMatrix=this.viewport.getCTM(),this.viewportTransformString=t),lr(this.viewportMatrix)}setMatrix(t){const e=lr(t),i=Jv(e);this.viewport.setAttribute("transform",i),this.viewportMatrix=e,this.viewportTransformString=i}resize(t,e){let i=t===void 0?this.options.width:t,r=e===void 0?this.options.height:e;this.options.width=i,this.options.height=r,typeof i=="number"&&(i=Math.round(i)),typeof r=="number"&&(r=Math.round(r)),this.container.style.width=i==null?"":`${i}px`,this.container.style.height=r==null?"":`${r}px`;const o=this.getComputedSize();return this.graph.trigger("resize",Object.assign({},o)),this}getComputedSize(){let t=this.options.width,e=this.options.height;return kN(t)||(t=this.container.clientWidth),kN(e)||(e=this.container.clientHeight),{width:t,height:e}}getScale(){return TOt(this.getMatrix())}scale(t,e=t,i=0,r=0){if(t=this.clampScale(t),e=this.clampScale(e),i||r){const a=this.getTranslation(),s=a.tx-i*(t-1),l=a.ty-r*(e-1);(s!==a.tx||l!==a.ty)&&this.translate(s,l)}const o=this.getMatrix();return o.a=t,o.d=e,this.setMatrix(o),this.graph.trigger("scale",{sx:t,sy:e,ox:i,oy:r}),this}clampScale(t){const e=this.graph.options.scaling;return Oa(t,e.min||.01,e.max||16)}getZoom(){return this.getScale().sx}zoom(t,e){e=e||{};let i=t,r=t;const o=this.getScale(),a=this.getComputedSize();let s=a.width/2,l=a.height/2;if(e.absolute||(i+=o.sx,r+=o.sy),e.scaleGrid&&(i=Math.round(i/e.scaleGrid)*e.scaleGrid,r=Math.round(r/e.scaleGrid)*e.scaleGrid),e.maxScale&&(i=Math.min(e.maxScale,i),r=Math.min(e.maxScale,r)),e.minScale&&(i=Math.max(e.minScale,i),r=Math.max(e.minScale,r)),e.center&&(s=e.center.x,l=e.center.y),i=this.clampScale(i),r=this.clampScale(r),s||l){const h=this.getTranslation(),u=s-(s-h.tx)*(i/o.sx),d=l-(l-h.ty)*(r/o.sy);(u!==h.tx||d!==h.ty)&&this.translate(u,d)}return this.scale(i,r),this}getRotation(){return MOt(this.getMatrix())}rotate(t,e,i){if(e==null||i==null){const o=bi.getBBox(this.stage);e=o.width/2,i=o.height/2}const r=this.getMatrix().translate(e,i).rotate(t).translate(-e,-i);return this.setMatrix(r),this}getTranslation(){return ROt(this.getMatrix())}translate(t,e){const i=this.getMatrix();i.e=t||0,i.f=e||0,this.setMatrix(i);const r=this.getTranslation();return this.options.x=r.tx,this.options.y=r.ty,this.graph.trigger("translate",Object.assign({},r)),this}setOrigin(t,e){return this.translate(t||0,e||0)}fitToContent(t,e,i,r){if(typeof t=="object"){const b=t;t=b.gridWidth||1,e=b.gridHeight||1,i=b.padding||0,r=b}else t=t||1,e=e||1,i=i||0,r==null&&(r={});const o=Ef(i),a=r.border||0,s=r.contentArea?Tt.create(r.contentArea):this.getContentArea(r);a>0&&s.inflate(a);const l=this.getScale(),h=this.getTranslation(),u=l.sx,d=l.sy;s.x*=u,s.y*=d,s.width*=u,s.height*=d;let c=Math.max(Math.ceil((s.width+s.x)/t),1)*t,f=Math.max(Math.ceil((s.height+s.y)/e),1)*e,g=0,p=0;(r.allowNewOrigin==="negative"&&s.x<0||r.allowNewOrigin==="positive"&&s.x>=0||r.allowNewOrigin==="any")&&(g=Math.ceil(-s.x/t)*t,g+=o.left,c+=g),(r.allowNewOrigin==="negative"&&s.y<0||r.allowNewOrigin==="positive"&&s.y>=0||r.allowNewOrigin==="any")&&(p=Math.ceil(-s.y/e)*e,p+=o.top,f+=p),c+=o.right,f+=o.bottom,c=Math.max(c,r.minWidth||0),f=Math.max(f,r.minHeight||0),c=Math.min(c,r.maxWidth||Number.MAX_SAFE_INTEGER),f=Math.min(f,r.maxHeight||Number.MAX_SAFE_INTEGER);const v=this.getComputedSize(),m=c!==v.width||f!==v.height;return(g!==h.tx||p!==h.ty)&&this.translate(g,p),m&&this.resize(c,f),new Tt(-g/u,-p/d,c/u,f/d)}scaleContentToFit(t={}){this.scaleContentToFitImpl(t)}scaleContentToFitImpl(t={},e=!0){let i,r;if(t.contentArea){const m=t.contentArea;i=this.graph.localToGraph(m),r=Q.create(m)}else i=this.getContentBBox(t),r=this.graph.graphToLocal(i);if(!i.width||!i.height)return;const o=Ef(t.padding),a=t.minScale||0,s=t.maxScale||Number.MAX_SAFE_INTEGER,l=t.minScaleX||a,h=t.maxScaleX||s,u=t.minScaleY||a,d=t.maxScaleY||s;let c;if(t.viewportArea)c=t.viewportArea;else{const m=this.getComputedSize(),y=this.getTranslation();c={x:y.tx,y:y.ty,width:m.width,height:m.height}}c=Tt.create(c).moveAndExpand({x:o.left,y:o.top,width:-o.left-o.right,height:-o.top-o.bottom});const f=this.getScale();let g=c.width/i.width*f.sx,p=c.height/i.height*f.sy;t.preserveAspectRatio!==!1&&(g=p=Math.min(g,p));const v=t.scaleGrid;if(v&&(g=v*Math.floor(g/v),p=v*Math.floor(p/v)),g=Oa(g,l,h),p=Oa(p,u,d),this.scale(g,p),e){const m=this.options,y=c.x-r.x*g-m.x,b=c.y-r.y*p-m.y;this.translate(y,b)}}getContentArea(t={}){return t.useCellGeometry!==!1?this.model.getAllCellsBBox()||new Tt:bi.getBBox(this.stage)}getContentBBox(t={}){return this.graph.localToGraph(this.getContentArea(t))}getGraphArea(){const t=Tt.fromSize(this.getComputedSize());return this.graph.graphToLocal(t)}zoomToRect(t,e={}){const i=Tt.create(t),r=this.graph;e.contentArea=i,e.viewportArea==null&&(e.viewportArea={x:r.options.x,y:r.options.y,width:this.options.width,height:this.options.height}),this.scaleContentToFitImpl(e,!1);const o=i.getCenter();return this.centerPoint(o.x,o.y),this}zoomToFit(t={}){return this.zoomToRect(this.getContentArea(t),t)}centerPoint(t,e){const i=this.getComputedSize(),r=this.getScale(),o=this.getTranslation(),a=i.width/2,s=i.height/2;t=typeof t=="number"?t:a,e=typeof e=="number"?e:s,t=a-t*r.sx,e=s-e*r.sy,(o.tx!==t||o.ty!==e)&&this.translate(t,e)}centerContent(t){const i=this.graph.getContentArea(t).getCenter();this.centerPoint(i.x,i.y)}centerCell(t){return this.positionCell(t,"center")}positionPoint(t,e,i){const r=this.getComputedSize();e=_s(e,Math.max(0,r.width)),e<0&&(e=r.width+e),i=_s(i,Math.max(0,r.height)),i<0&&(i=r.height+i);const o=this.getTranslation(),a=this.getScale(),s=e-t.x*a.sx,l=i-t.y*a.sy;(o.tx!==s||o.ty!==l)&&this.translate(s,l)}positionRect(t,e){const i=Tt.create(t);switch(e){case"center":return this.positionPoint(i.getCenter(),"50%","50%");case"top":return this.positionPoint(i.getTopCenter(),"50%",0);case"top-right":return this.positionPoint(i.getTopRight(),"100%",0);case"right":return this.positionPoint(i.getRightMiddle(),"100%","50%");case"bottom-right":return this.positionPoint(i.getBottomRight(),"100%","100%");case"bottom":return this.positionPoint(i.getBottomCenter(),"50%","100%");case"bottom-left":return this.positionPoint(i.getBottomLeft(),0,"100%");case"left":return this.positionPoint(i.getLeftMiddle(),0,"50%");case"top-left":return this.positionPoint(i.getTopLeft(),0,0);default:return this}}positionCell(t,e){const i=t.getBBox();return this.positionRect(i,e)}positionContent(t,e){const i=this.graph.getContentArea(e);return this.positionRect(i,t)}}var k3t=function(n,t,e,i){var r=arguments.length,o=r<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(t,e,o):a(t,e))||o);return r>3&&o&&Object.defineProperty(t,e,o),o};class t3 extends ur{get elem(){return this.view.background}init(){this.startListening(),this.options.background&&this.draw(this.options.background)}startListening(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)}stopListening(){this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this)}updateBackgroundImage(t={}){let e=t.size||"auto auto",i=t.position||"center";const r=this.graph.transform.getScale(),o=this.graph.translate();if(typeof i=="object"){const a=o.tx+r.sx*(i.x||0),s=o.ty+r.sy*(i.y||0);i=`${a}px ${s}px`}typeof e=="object"&&(e=Tt.fromSize(e).scale(r.sx,r.sy),e=`${e.width}px ${e.height}px`),this.elem.style.backgroundSize=e,this.elem.style.backgroundPosition=i}drawBackgroundImage(t,e={}){if(!(t instanceof HTMLImageElement)){this.elem.style.backgroundImage="";return}const i=this.optionsCache;if(i&&i.image!==e.image)return;let r;const o=e.opacity,a=e.size;let s=e.repeat||"no-repeat";const l=pb.registry.get(s);if(typeof l=="function"){const u=e.quality||1;t.width*=u,t.height*=u;const d=l(t,e);if(!(d instanceof HTMLCanvasElement))throw new Error("Background pattern must return an HTML Canvas instance");r=d.toDataURL("image/png"),e.repeat&&s!==e.repeat?s=e.repeat:s="repeat",typeof a=="object"?(a.width*=d.width/t.width,a.height*=d.height/t.height):a===void 0&&(e.size={width:d.width/u,height:d.height/u})}else r=t.src,a===void 0&&(e.size={width:t.width,height:t.height});i!=null&&typeof e.size=="object"&&e.image===i.image&&e.repeat===i.repeat&&e.quality===i.quality&&(i.size=QL(e.size));const h=this.elem.style;h.backgroundImage=`url(${r})`,h.backgroundRepeat=s,h.opacity=o==null||o>=1?"":`${o}`,this.updateBackgroundImage(e)}updateBackgroundColor(t){this.elem.style.backgroundColor=t||""}updateBackgroundOptions(t){this.graph.options.background=t}update(){this.optionsCache&&this.updateBackgroundImage(this.optionsCache)}draw(t){const e=t||{};if(this.updateBackgroundOptions(t),this.updateBackgroundColor(e.color),e.image){this.optionsCache=QL(e);const i=document.createElement("img");i.onload=()=>this.drawBackgroundImage(i,t),i.setAttribute("crossorigin","anonymous"),i.src=e.image}else this.drawBackgroundImage(null),this.optionsCache=null}clear(){this.draw()}dispose(){this.clear(),this.stopListening()}}k3t([ur.dispose()],t3.prototype,"dispose",null);var L3t=function(n,t,e,i){var r=arguments.length,o=r<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(t,e,o):a(t,e))||o);return r>3&&o&&Object.defineProperty(t,e,o),o};class e3 extends ur{get widgetOptions(){return this.options.panning}get pannable(){return this.widgetOptions&&this.widgetOptions.enabled===!0}init(){this.onRightMouseDown=this.onRightMouseDown.bind(this),this.onSpaceKeyDown=this.onSpaceKeyDown.bind(this),this.onSpaceKeyUp=this.onSpaceKeyUp.bind(this),this.startListening(),this.updateClassName()}startListening(){this.graph.on("blank:mousedown",this.onMouseDown,this),this.graph.on("node:unhandled:mousedown",this.onMouseDown,this),this.graph.on("edge:unhandled:mousedown",this.onMouseDown,this),vr.on(this.graph.container,"mousedown",this.onRightMouseDown),vr.on(document.body,{keydown:this.onSpaceKeyDown,keyup:this.onSpaceKeyUp}),this.mousewheelHandle=new Srt(this.graph.container,this.onMouseWheel.bind(this),this.allowMouseWheel.bind(this)),this.mousewheelHandle.enable()}stopListening(){this.graph.off("blank:mousedown",this.onMouseDown,this),this.graph.off("node:unhandled:mousedown",this.onMouseDown,this),this.graph.off("edge:unhandled:mousedown",this.onMouseDown,this),vr.off(this.graph.container,"mousedown",this.onRightMouseDown),vr.off(document.body,{keydown:this.onSpaceKeyDown,keyup:this.onSpaceKeyUp}),this.mousewheelHandle&&this.mousewheelHandle.disable()}allowPanning(t,e){return t.spaceKey=this.isSpaceKeyPressed,this.pannable&&sv.isMatch(t,this.widgetOptions.modifiers,e)}startPanning(t){const e=this.view.normalizeEvent(t);this.clientX=e.clientX,this.clientY=e.clientY,this.panning=!0,this.updateClassName(),vr.on(document.body,{"mousemove.panning touchmove.panning":this.pan.bind(this),"mouseup.panning touchend.panning":this.stopPanning.bind(this),"mouseleave.panning":this.stopPanning.bind(this)}),vr.on(window,"mouseup.panning",this.stopPanning.bind(this))}pan(t){const e=this.view.normalizeEvent(t),i=e.clientX-this.clientX,r=e.clientY-this.clientY;this.clientX=e.clientX,this.clientY=e.clientY,this.graph.translateBy(i,r)}stopPanning(t){this.panning=!1,this.updateClassName(),vr.off(document.body,".panning"),vr.off(window,".panning")}updateClassName(){const t=this.view.container,e=this.view.prefixClassName("graph-panning"),i=this.view.prefixClassName("graph-pannable");this.pannable?this.panning?(ri(t,e),za(t,i)):(za(t,e),ri(t,i)):(za(t,e),za(t,i))}onMouseDown({e:t}){if(!this.allowBlankMouseDown(t))return;const e=this.graph.getPlugin("selection"),i=e&&e.allowRubberband(t,!0);(this.allowPanning(t,!0)||this.allowPanning(t)&&!i)&&this.startPanning(t)}onRightMouseDown(t){const e=this.widgetOptions.eventTypes;e?.includes("rightMouseDown")&&t.button===2&&this.allowPanning(t,!0)&&this.startPanning(t)}onMouseWheel(t,e,i){this.graph.translateBy(-e,-i)}onSpaceKeyDown(t){t.which===32&&(this.isSpaceKeyPressed=!0)}onSpaceKeyUp(t){t.which===32&&(this.isSpaceKeyPressed=!1)}allowBlankMouseDown(t){const e=this.widgetOptions.eventTypes;return e?.includes("leftMouseDown")&&t.button===0||e?.includes("mouseWheelDown")&&t.button===1}allowMouseWheel(t){var e;return this.pannable&&!t.ctrlKey&&((e=this.widgetOptions.eventTypes)===null||e===void 0?void 0:e.includes("mouseWheel"))}autoPanning(t,e){const r=this.graph.getGraphArea();let o=0,a=0;t<=r.left+10&&(o=-10),e<=r.top+10&&(a=-10),t>=r.right-10&&(o=10),e>=r.bottom-10&&(a=10),(o!==0||a!==0)&&this.graph.translateBy(-o,-a)}enablePanning(){this.pannable||(this.widgetOptions.enabled=!0,this.updateClassName())}disablePanning(){this.pannable&&(this.widgetOptions.enabled=!1,this.updateClassName())}dispose(){this.stopListening()}}L3t([ur.dispose()],e3.prototype,"dispose",null);var E3t=function(n,t,e,i){var r=arguments.length,o=r<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(t,e,o):a(t,e))||o);return r>3&&o&&Object.defineProperty(t,e,o),o};class i3 extends ur{constructor(){super(...arguments),this.cumulatedFactor=1}get widgetOptions(){return this.options.mousewheel}init(){this.container=this.graph.container,this.target=this.widgetOptions.global?document:this.container,this.mousewheelHandle=new Srt(this.target,this.onMouseWheel.bind(this),this.allowMouseWheel.bind(this)),this.widgetOptions.enabled&&this.enable(!0)}get disabled(){return this.widgetOptions.enabled!==!0}enable(t){(this.disabled||t)&&(this.widgetOptions.enabled=!0,this.mousewheelHandle.enable())}disable(){this.disabled||(this.widgetOptions.enabled=!1,this.mousewheelHandle.disable())}allowMouseWheel(t){const e=this.widgetOptions.guard;return(e==null||e(t))&&sv.isMatch(t,this.widgetOptions.modifiers)}onMouseWheel(t){const e=this.widgetOptions.guard;if((e==null||e(t))&&sv.isMatch(t,this.widgetOptions.modifiers)){const i=this.widgetOptions.factor||1.2;this.currentScale==null&&(this.startPos={x:t.clientX,y:t.clientY},this.currentScale=this.graph.transform.getScale().sx),t.deltaY<0?this.currentScale<.15?this.cumulatedFactor=(this.currentScale+.01)/this.currentScale:(this.cumulatedFactor=Math.round(this.currentScale*i*20)/20/this.currentScale,this.cumulatedFactor===1&&(this.cumulatedFactor=1.05)):this.currentScale<=.15?this.cumulatedFactor=(this.currentScale-.01)/this.currentScale:(this.cumulatedFactor=Math.round(this.currentScale*(1/i)*20)/20/this.currentScale,this.cumulatedFactor===1&&(this.cumulatedFactor=.95)),this.cumulatedFactor=Math.max(.01,Math.min(this.currentScale*this.cumulatedFactor,160)/this.currentScale);const o=this.currentScale;let a=this.graph.transform.clampScale(o*this.cumulatedFactor);const s=this.widgetOptions.minScale||Number.MIN_SAFE_INTEGER,l=this.widgetOptions.maxScale||Number.MAX_SAFE_INTEGER;if(a=Oa(a,s,l),a!==o)if(this.widgetOptions.zoomAtMousePosition){const u=!!this.graph.getPlugin("scroller")?this.graph.clientToLocal(this.startPos):this.graph.clientToGraph(this.startPos);this.graph.zoom(a,{absolute:!0,center:u.clone()})}else this.graph.zoom(a,{absolute:!0});this.currentScale=null,this.cumulatedFactor=1}}dispose(){this.disable()}}E3t([Fh.dispose()],i3.prototype,"dispose",null);var D3t=function(n,t,e,i){var r=arguments.length,o=r<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(t,e,o):a(t,e))||o);return r>3&&o&&Object.defineProperty(t,e,o),o};class Cot extends ur{init(){this.resetRenderArea=Hut(this.resetRenderArea,200,{leading:!0}),this.resetRenderArea(),this.startListening()}startListening(){this.graph.on("translate",this.resetRenderArea,this),this.graph.on("scale",this.resetRenderArea,this),this.graph.on("resize",this.resetRenderArea,this)}stopListening(){this.graph.off("translate",this.resetRenderArea,this),this.graph.off("scale",this.resetRenderArea,this),this.graph.off("resize",this.resetRenderArea,this)}enableVirtualRender(){this.options.virtual=!0,this.resetRenderArea()}disableVirtualRender(){this.options.virtual=!1,this.graph.renderer.setRenderArea(void 0)}resetRenderArea(){if(this.options.virtual){const t=this.graph.getGraphArea();this.graph.renderer.setRenderArea(t)}}dispose(){this.stopListening()}}D3t([ur.dispose()],Cot.prototype,"dispose",null);class I3t{constructor(){this.isFlushing=!1,this.isFlushPending=!1,this.scheduleId=0,this.queue=[],this.frameInterval=33,this.initialTime=Date.now()}queueJob(t){if(t.priority&hh.PRIOR)t.cb();else{const e=this.findInsertionIndex(t);e>=0&&this.queue.splice(e,0,t)}}queueFlush(){!this.isFlushing&&!this.isFlushPending&&(this.isFlushPending=!0,this.scheduleJob())}queueFlushSync(){!this.isFlushing&&!this.isFlushPending&&(this.isFlushPending=!0,this.flushJobsSync())}clearJobs(){this.queue.length=0,this.isFlushing=!1,this.isFlushPending=!1,this.cancelScheduleJob()}flushJobs(){this.isFlushPending=!1,this.isFlushing=!0;const t=this.getCurrentTime();let e;for(;(e=this.queue.shift())&&(e.cb(),!(this.getCurrentTime()-t>=this.frameInterval)););this.isFlushing=!1,this.queue.length&&this.queueFlush()}flushJobsSync(){this.isFlushPending=!1,this.isFlushing=!0;let t;for(;t=this.queue.shift();)try{t.cb()}catch{}this.isFlushing=!1}findInsertionIndex(t){let e=0,i=this.queue.length,r=i-1;const o=t.priority;for(;e<=r;){const a=(r-e>>1)+e;o<=this.queue[a].priority?e=a+1:(i=a,r=a-1)}return i}scheduleJob(){"requestIdleCallback"in window?(this.scheduleId&&this.cancelScheduleJob(),this.scheduleId=window.requestIdleCallback(this.flushJobs.bind(this),{timeout:100})):(this.scheduleId&&this.cancelScheduleJob(),this.scheduleId=window.setTimeout(this.flushJobs.bind(this)))}cancelScheduleJob(){"cancelIdleCallback"in window?(this.scheduleId&&window.cancelIdleCallback(this.scheduleId),this.scheduleId=0):(this.scheduleId&&clearTimeout(this.scheduleId),this.scheduleId=0)}getCurrentTime(){return typeof performance=="object"&&typeof performance.now=="function"?performance.now():Date.now()-this.initialTime}}var hh;(function(n){n[n.Update=2]="Update",n[n.RenderEdge=4]="RenderEdge",n[n.RenderNode=8]="RenderNode",n[n.PRIOR=1048576]="PRIOR"})(hh||(hh={}));var O3t=function(n,t,e,i){var r=arguments.length,o=r<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(t,e,o):a(t,e))||o);return r>3&&o&&Object.defineProperty(t,e,o),o};class Gn extends Fh{get model(){return this.graph.model}get container(){return this.graph.view.stage}constructor(t){super(),this.views={},this.willRemoveViews={},this.queue=new I3t,this.graph=t,this.init()}init(){this.startListening(),this.renderViews(this.model.getCells())}startListening(){this.model.on("reseted",this.onModelReseted,this),this.model.on("cell:added",this.onCellAdded,this),this.model.on("cell:removed",this.onCellRemoved,this),this.model.on("cell:change:zIndex",this.onCellZIndexChanged,this),this.model.on("cell:change:visible",this.onCellVisibleChanged,this)}stopListening(){this.model.off("reseted",this.onModelReseted,this),this.model.off("cell:added",this.onCellAdded,this),this.model.off("cell:removed",this.onCellRemoved,this),this.model.off("cell:change:zIndex",this.onCellZIndexChanged,this),this.model.off("cell:change:visible",this.onCellVisibleChanged,this)}onModelReseted({options:t}){this.queue.clearJobs(),this.removeZPivots(),this.resetViews();const e=this.model.getCells();this.renderViews(e,Object.assign(Object.assign({},t),{queue:e.map(i=>i.id)}))}onCellAdded({cell:t,options:e}){this.renderViews([t],e)}onCellRemoved({cell:t}){this.removeViews([t])}onCellZIndexChanged({cell:t,options:e}){const i=this.views[t.id];i&&this.requestViewUpdate(i.view,Gn.FLAG_INSERT,e,hh.Update,!0)}onCellVisibleChanged({cell:t,current:e}){this.toggleVisible(t,!!e)}requestViewUpdate(t,e,i={},r=hh.Update,o=!0){const a=t.cell.id,s=this.views[a];if(!s)return;s.flag=e,s.options=i,(t.hasAction(e,["translate","resize","rotate"])||i.async===!1)&&(r=hh.PRIOR,o=!1),this.queue.queueJob({id:a,priority:r,cb:()=>{this.renderViewInArea(t,e,i);const u=i.queue;if(u){const d=u.indexOf(t.cell.id);d>=0&&u.splice(d,1),u.length===0&&this.graph.trigger("render:done")}}}),this.getEffectedEdges(t).forEach(u=>{this.requestViewUpdate(u.view,u.flag,i,r,!1)}),o&&this.flush()}setRenderArea(t){this.renderArea=t,this.flushWaitingViews()}isViewMounted(t){if(t==null)return!1;const e=this.views[t.cell.id];return e?e.state===Gn.ViewState.MOUNTED:!1}renderViews(t,e={}){t.sort((i,r)=>i.isNode()&&r.isEdge()?-1:0),t.forEach(i=>{const r=i.id,o=this.views;let a=0,s=o[r];if(s)a=Gn.FLAG_INSERT;else{const l=this.createCellView(i);l&&(l.graph=this.graph,a=Gn.FLAG_INSERT|l.getBootstrapFlag(),s={view:l,flag:a,options:e,state:Gn.ViewState.CREATED},this.views[r]=s)}s&&this.requestViewUpdate(s.view,a,e,this.getRenderPriority(s.view),!1)}),this.flush()}renderViewInArea(t,e,i={}){const r=t.cell,o=r.id,a=this.views[o];if(!a)return;let s=0;this.isUpdatable(t)?(s=this.updateView(t,e,i),a.flag=s):a.state===Gn.ViewState.MOUNTED?(s=this.updateView(t,e,i),a.flag=s):a.state=Gn.ViewState.WAITING,s&&r.isEdge()&&(s&t.getFlag(["source","target"]))===0&&this.queue.queueJob({id:o,priority:hh.RenderEdge,cb:()=>{this.updateView(t,e,i)}})}removeViews(t){t.forEach(e=>{const i=e.id,r=this.views[i];r&&(this.willRemoveViews[i]=r,delete this.views[i],this.queue.queueJob({id:i,priority:this.getRenderPriority(r.view),cb:()=>{this.removeView(r.view)}}))}),this.flush()}flush(){this.graph.options.async?this.queue.queueFlush():this.queue.queueFlushSync()}flushWaitingViews(){Object.values(this.views).forEach(t=>{if(t&&t.state===Gn.ViewState.WAITING){const{view:e,flag:i,options:r}=t;this.requestViewUpdate(e,i,r,this.getRenderPriority(e),!1)}}),this.flush()}updateView(t,e,i={}){if(t==null)return 0;if(kn.isCellView(t)){if(e&Gn.FLAG_REMOVE)return this.removeView(t.cell),0;e&Gn.FLAG_INSERT&&(this.insertView(t),e^=Gn.FLAG_INSERT)}return e?t.confirmUpdate(e,i):0}insertView(t){const e=this.views[t.cell.id];if(e){const i=t.cell.getZIndex(),r=this.addZPivot(i);this.container.insertBefore(t.container,r),t.cell.isVisible()||this.toggleVisible(t.cell,!1),e.state=Gn.ViewState.MOUNTED,this.graph.trigger("view:mounted",{view:t})}}resetViews(){this.willRemoveViews=Object.assign(Object.assign({},this.views),this.willRemoveViews),Object.values(this.willRemoveViews).forEach(t=>{t&&this.removeView(t.view)}),this.views={},this.willRemoveViews={}}removeView(t){const e=t.cell,i=this.willRemoveViews[e.id];i&&t&&(i.view.remove(),delete this.willRemoveViews[e.id],this.graph.trigger("view:unmounted",{view:t}))}toggleVisible(t,e){const i=this.model.getConnectedEdges(t);for(let o=0,a=i.length;o<a;o+=1){const s=i[o];if(e){const l=s.getSourceCell(),h=s.getTargetCell();if(l&&!l.isVisible()||h&&!h.isVisible())continue;this.toggleVisible(s,!0)}else this.toggleVisible(s,!1)}const r=this.views[t.id];r&&T_(r.view.container,{display:e?"unset":"none"})}addZPivot(t=0){this.zPivots==null&&(this.zPivots={});const e=this.zPivots;let i=e[t];if(i)return i;i=e[t]=document.createComment(`z-index:${t+1}`);let r=-1/0;for(const a in e){const s=+a;s<t&&s>r&&(r=s,t-1)}const o=this.container;if(r!==-1/0){const a=e[r];o.insertBefore(i,a.nextSibling)}else o.insertBefore(i,o.firstChild);return i}removeZPivots(){this.zPivots&&Object.values(this.zPivots).forEach(t=>{t&&t.parentNode&&t.parentNode.removeChild(t)}),this.zPivots={}}createCellView(t){const e={graph:this.graph},i=this.graph.options.createCellView;if(i){const o=de(i,this.graph,t);if(o)return new o(t,e);if(o===null)return null}const r=t.view;if(r!=null&&typeof r=="string"){const o=kn.registry.get(r);return o?new o(t,e):kn.registry.onNotFound(r)}return t.isNode()?new Rs(t,e):t.isEdge()?new Wh(t,e):null}getEffectedEdges(t){const e=[],i=t.cell,r=this.model.getConnectedEdges(i);for(let o=0,a=r.length;o<a;o+=1){const s=r[o],l=this.views[s.id];if(!l)continue;const h=l.view;if(!this.isViewMounted(h))continue;const u=["update"];s.getTargetCell()===i&&u.push("target"),s.getSourceCell()===i&&u.push("source"),e.push({id:s.id,view:h,flag:h.getFlag(u)})}return e}isUpdatable(t){if(t.isNodeView())return this.renderArea?this.renderArea.isIntersectWithRect(t.cell.getBBox()):!0;if(t.isEdgeView()){const e=t.cell,i=e.getSourceCell(),r=e.getTargetCell();if(this.renderArea&&i&&r)return this.renderArea.isIntersectWithRect(i.getBBox())||this.renderArea.isIntersectWithRect(r.getBBox())}return!0}getRenderPriority(t){return t.cell.isNode()?hh.RenderNode:hh.RenderEdge}dispose(){this.stopListening(),Object.keys(this.views).forEach(t=>{this.views[t].view.dispose()}),this.views={}}}O3t([Fh.dispose()],Gn.prototype,"dispose",null);(function(n){n.FLAG_INSERT=1<<30,n.FLAG_REMOVE=1<<29,n.FLAG_RENDER=(1<<26)-1})(Gn||(Gn={}));(function(n){(function(t){t[t.CREATED=0]="CREATED",t[t.MOUNTED=1]="MOUNTED",t[t.WAITING=2]="WAITING"})(n.ViewState||(n.ViewState={}))})(Gn||(Gn={}));var H3t=function(n,t,e,i){var r=arguments.length,o=r<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(t,e,o):a(t,e))||o);return r>3&&o&&Object.defineProperty(t,e,o),o};class n3 extends ur{constructor(){super(...arguments),this.schedule=new Gn(this.graph)}requestViewUpdate(t,e,i={}){this.schedule.requestViewUpdate(t,e,i)}isViewMounted(t){return this.schedule.isViewMounted(t)}setRenderArea(t){this.schedule.setRenderArea(t)}findViewByElem(t){if(t==null)return null;const e=this.options.container,i=typeof t=="string"?e.querySelector(t):t instanceof Element?t:t[0];if(i){const r=this.graph.view.findAttr("data-cell-id",i);if(r){const o=this.schedule.views;if(o[r])return o[r].view}}return null}findViewByCell(t){if(t==null)return null;const e=Fe.isCell(t)?t.id:t,i=this.schedule.views;return i[e]?i[e].view:null}findViewsFromPoint(t){const e={x:t.x,y:t.y};return this.model.getCells().map(i=>this.findViewByCell(i)).filter(i=>i!=null?bi.getBBox(i.container,{target:this.view.stage}).containsPoint(e):!1)}findEdgeViewsFromPoint(t,e=5){return this.model.getEdges().map(i=>this.findViewByCell(i)).filter(i=>{if(i!=null){const r=i.getClosestPoint(t);if(r)return r.distance(t)<=e}return!1})}findViewsInArea(t,e={}){const i=Tt.create(t);return this.model.getCells().map(r=>this.findViewByCell(r)).filter(r=>{if(r){if(e.nodeOnly&&!r.isNodeView())return!1;const o=bi.getBBox(r.container,{target:this.view.stage});return o.width===0?o.inflate(1,0):o.height===0&&o.inflate(0,1),e.strict?i.containsRect(o):i.isIntersectWithRect(o)}return!1})}dispose(){this.schedule.dispose()}}H3t([ur.dispose()],n3.prototype,"dispose",null);var K9=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e};class wot extends ur{get cid(){return this.graph.view.cid}get svg(){return this.view.svg}get defs(){return this.view.defs}isDefined(t){return this.svg.getElementById(t)!=null}filter(t){let e=t.id;const i=t.name;if(e||(e=`filter-${i}-${this.cid}-${NB(JSON.stringify(t))}`),!this.isDefined(e)){const r=uv.registry.get(i);if(r==null)return uv.registry.onNotFound(i);const o=r(t.args||{}),a=Object.assign(Object.assign({x:-1,y:-1,width:3,height:3,filterUnits:"objectBoundingBox"},t.attrs),{id:e});se.create(Ni.sanitize(o),a).appendTo(this.defs)}return e}gradient(t){let e=t.id;const i=t.type;if(e||(e=`gradient-${i}-${this.cid}-${NB(JSON.stringify(t))}`),!this.isDefined(e)){const o=t.stops.map(l=>{const h=l.opacity!=null&&Number.isFinite(l.opacity)?l.opacity:1;return`<stop offset="${l.offset}" stop-color="${l.color}" stop-opacity="${h}"/>`}),a=`<${i}>${o.join("")}</${i}>`,s=Object.assign({id:e},t.attrs);se.create(a,s).appendTo(this.defs)}return e}marker(t){const{id:e,refX:i,refY:r,markerUnits:o,markerOrient:a,tagName:s,children:l}=t,h=K9(t,["id","refX","refY","markerUnits","markerOrient","tagName","children"]);let u=e;if(u||(u=`marker-${this.cid}-${NB(JSON.stringify(t))}`),!this.isDefined(u)){s!=="path"&&delete h.d;const d=se.create("marker",{refX:i,refY:r,id:u,overflow:"visible",orient:a??"auto",markerUnits:o||"userSpaceOnUse"},l?l.map(c=>{var{tagName:f}=c,g=K9(c,["tagName"]);return se.create(`${f}`||"path",db(Object.assign(Object.assign({},h),g)))}):[se.create(s||"path",db(h))]);this.defs.appendChild(d.node)}return u}remove(t){const e=this.svg.getElementById(t);e&&e.parentNode&&e.parentNode.removeChild(e)}}class xot extends ur{getClientMatrix(){return lr(this.view.stage.getScreenCTM())}getClientOffset(){const t=this.view.svg.getBoundingClientRect();return new Q(t.left,t.top)}getPageOffset(){return this.getClientOffset().translate(window.scrollX,window.scrollY)}snapToGrid(t,e){return(typeof t=="number"?this.clientToLocalPoint(t,e):this.clientToLocalPoint(t.x,t.y)).snapToGrid(this.graph.getGridSize())}localToGraphPoint(t,e){const i=Q.create(t,e);return bi.transformPoint(i,this.graph.matrix())}localToClientPoint(t,e){const i=Q.create(t,e);return bi.transformPoint(i,this.getClientMatrix())}localToPagePoint(t,e){return(typeof t=="number"?this.localToGraphPoint(t,e):this.localToGraphPoint(t)).translate(this.getPageOffset())}localToGraphRect(t,e,i,r){const o=Tt.create(t,e,i,r);return bi.transformRectangle(o,this.graph.matrix())}localToClientRect(t,e,i,r){const o=Tt.create(t,e,i,r);return bi.transformRectangle(o,this.getClientMatrix())}localToPageRect(t,e,i,r){return(typeof t=="number"?this.localToGraphRect(t,e,i,r):this.localToGraphRect(t)).translate(this.getPageOffset())}graphToLocalPoint(t,e){const i=Q.create(t,e);return bi.transformPoint(i,this.graph.matrix().inverse())}clientToLocalPoint(t,e){const i=Q.create(t,e);return bi.transformPoint(i,this.getClientMatrix().inverse())}clientToGraphPoint(t,e){const i=Q.create(t,e);return bi.transformPoint(i,this.graph.matrix().multiply(this.getClientMatrix().inverse()))}pageToLocalPoint(t,e){const r=Q.create(t,e).diff(this.getPageOffset());return this.graphToLocalPoint(r)}graphToLocalRect(t,e,i,r){const o=Tt.create(t,e,i,r);return bi.transformRectangle(o,this.graph.matrix().inverse())}clientToLocalRect(t,e,i,r){const o=Tt.create(t,e,i,r);return bi.transformRectangle(o,this.getClientMatrix().inverse())}clientToGraphRect(t,e,i,r){const o=Tt.create(t,e,i,r);return bi.transformRectangle(o,this.graph.matrix().multiply(this.getClientMatrix().inverse()))}pageToLocalRect(t,e,i,r){const o=Tt.create(t,e,i,r),a=this.getPageOffset();return o.x-=a.x,o.y-=a.y,this.graphToLocalRect(o)}}var z3t=function(n,t,e,i){var r=arguments.length,o=r<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(t,e,o):a(t,e))||o);return r>3&&o&&Object.defineProperty(t,e,o),o};class mS extends ur{constructor(){super(...arguments),this.highlights={}}init(){this.startListening()}startListening(){this.graph.on("cell:highlight",this.onCellHighlight,this),this.graph.on("cell:unhighlight",this.onCellUnhighlight,this)}stopListening(){this.graph.off("cell:highlight",this.onCellHighlight,this),this.graph.off("cell:unhighlight",this.onCellUnhighlight,this)}onCellHighlight({view:t,magnet:e,options:i={}}){const r=this.resolveHighlighter(i);if(!r)return;const o=this.getHighlighterId(e,r);if(!this.highlights[o]){const a=r.highlighter;a.highlight(t,e,Object.assign({},r.args)),this.highlights[o]={cellView:t,magnet:e,highlighter:a,args:r.args}}}onCellUnhighlight({magnet:t,options:e={}}){const i=this.resolveHighlighter(e);if(!i)return;const r=this.getHighlighterId(t,i);this.unhighlight(r)}resolveHighlighter(t){const e=this.options;let i=t.highlighter;if(i==null){const s=t.type;i=s&&e.highlighting[s]||e.highlighting.default}if(i==null)return null;const r=typeof i=="string"?{name:i}:i,o=r.name,a=Ah.registry.get(o);return a==null?Ah.registry.onNotFound(o):(Ah.check(o,a),{name:o,highlighter:a,args:r.args||{}})}getHighlighterId(t,e){return $F(t),e.name+t.id+JSON.stringify(e.args)}unhighlight(t){const e=this.highlights[t];e&&(e.highlighter.unhighlight(e.cellView,e.magnet,e.args),delete this.highlights[t])}dispose(){Object.keys(this.highlights).forEach(t=>this.unhighlight(t)),this.stopListening()}}z3t([mS.dispose()],mS.prototype,"dispose",null);var F3t=function(n,t,e,i){var r=arguments.length,o=r<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(t,e,o):a(t,e))||o);return r>3&&o&&Object.defineProperty(t,e,o),o};class Sot extends ur{getScroller(){const t=this.graph.getPlugin("scroller");return t&&t.options.enabled?t:null}getContainer(){const t=this.getScroller();return t?t.container.parentElement:this.graph.container.parentElement}getSensorTarget(){const t=this.options.autoResize;if(t)return typeof t=="boolean"?this.getContainer():t}init(){if(this.options.autoResize){const e=this.getSensorTarget();e&&lS.bind(e,()=>{const i=e.offsetWidth,r=e.offsetHeight;this.resize(i,r)})}}resize(t,e){const i=this.getScroller();i?i.resize(t,e):this.graph.transform.resize(t,e)}dispose(){lS.clear(this.graph.container)}}F3t([ur.dispose()],Sot.prototype,"dispose",null);var N3t=function(n,t,e,i){var r=arguments.length,o=r<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(t,e,o):a(t,e))||o);return r>3&&o&&Object.defineProperty(t,e,o),o};class Po extends Qo{get container(){return this.options.container}get[Symbol.toStringTag](){return Po.toStringTag}constructor(t){super(),this.installedPlugins=new Set,this.options=_b.get(t),this.css=new vI(this),this.view=new Rl(this),this.defs=new wot(this),this.coord=new xot(this),this.transform=new _ot(this),this.highlight=new mS(this),this.grid=new QF(this),this.background=new t3(this),this.options.model?this.model=this.options.model:(this.model=new Cs,this.model.graph=this),this.renderer=new n3(this),this.panning=new e3(this),this.mousewheel=new i3(this),this.virtualRender=new Cot(this),this.size=new Sot(this)}isNode(t){return t.isNode()}isEdge(t){return t.isEdge()}resetCells(t,e={}){return this.model.resetCells(t,e),this}clearCells(t={}){return this.model.clear(t),this}toJSON(t={}){return this.model.toJSON(t)}parseJSON(t){return this.model.parseJSON(t)}fromJSON(t,e={}){return this.model.fromJSON(t,e),this}getCellById(t){return this.model.getCell(t)}addNode(t,e={}){return this.model.addNode(t,e)}addNodes(t,e={}){return this.addCell(t.map(i=>Qn.isNode(i)?i:this.createNode(i)),e)}createNode(t){return this.model.createNode(t)}removeNode(t,e={}){return this.model.removeCell(t,e)}addEdge(t,e={}){return this.model.addEdge(t,e)}addEdges(t,e={}){return this.addCell(t.map(i=>cn.isEdge(i)?i:this.createEdge(i)),e)}removeEdge(t,e={}){return this.model.removeCell(t,e)}createEdge(t){return this.model.createEdge(t)}addCell(t,e={}){return this.model.addCell(t,e),this}removeCell(t,e={}){return this.model.removeCell(t,e)}removeCells(t,e={}){return this.model.removeCells(t,e)}removeConnectedEdges(t,e={}){return this.model.removeConnectedEdges(t,e)}disconnectConnectedEdges(t,e={}){return this.model.disconnectConnectedEdges(t,e),this}hasCell(t){return this.model.has(t)}getCells(){return this.model.getCells()}getCellCount(){return this.model.total()}getNodes(){return this.model.getNodes()}getEdges(){return this.model.getEdges()}getOutgoingEdges(t){return this.model.getOutgoingEdges(t)}getIncomingEdges(t){return this.model.getIncomingEdges(t)}getConnectedEdges(t,e={}){return this.model.getConnectedEdges(t,e)}getRootNodes(){return this.model.getRoots()}getLeafNodes(){return this.model.getLeafs()}isRootNode(t){return this.model.isRoot(t)}isLeafNode(t){return this.model.isLeaf(t)}getNeighbors(t,e={}){return this.model.getNeighbors(t,e)}isNeighbor(t,e,i={}){return this.model.isNeighbor(t,e,i)}getSuccessors(t,e={}){return this.model.getSuccessors(t,e)}isSuccessor(t,e,i={}){return this.model.isSuccessor(t,e,i)}getPredecessors(t,e={}){return this.model.getPredecessors(t,e)}isPredecessor(t,e,i={}){return this.model.isPredecessor(t,e,i)}getCommonAncestor(...t){return this.model.getCommonAncestor(...t)}getSubGraph(t,e={}){return this.model.getSubGraph(t,e)}cloneSubGraph(t,e={}){return this.model.cloneSubGraph(t,e)}cloneCells(t){return this.model.cloneCells(t)}getNodesFromPoint(t,e){return this.model.getNodesFromPoint(t,e)}getNodesInArea(t,e,i,r,o){return this.model.getNodesInArea(t,e,i,r,o)}getNodesUnderNode(t,e={}){return this.model.getNodesUnderNode(t,e)}searchCell(t,e,i={}){return this.model.search(t,e,i),this}getShortestPath(t,e,i={}){return this.model.getShortestPath(t,e,i)}getAllCellsBBox(){return this.model.getAllCellsBBox()}getCellsBBox(t,e={}){return this.model.getCellsBBox(t,e)}startBatch(t,e={}){this.model.startBatch(t,e)}stopBatch(t,e={}){this.model.stopBatch(t,e)}batchUpdate(t,e,i){const r=typeof t=="string"?t:"update",o=typeof t=="string"?e:t,a=typeof e=="function"?i:e;this.startBatch(r,a);const s=o();return this.stopBatch(r,a),s}updateCellId(t,e){return this.model.updateCellId(t,e)}findView(t){return Fe.isCell(t)?this.findViewByCell(t):this.findViewByElem(t)}findViews(t){return Tt.isRectangleLike(t)?this.findViewsInArea(t):Q.isPointLike(t)?this.findViewsFromPoint(t):[]}findViewByCell(t){return this.renderer.findViewByCell(t)}findViewByElem(t){return this.renderer.findViewByElem(t)}findViewsFromPoint(t,e){const i=typeof t=="number"?{x:t,y:e}:t;return this.renderer.findViewsFromPoint(i)}findViewsInArea(t,e,i,r,o){const a=typeof t=="number"?{x:t,y:e,width:i,height:r}:t,s=typeof t=="number"?o:e;return this.renderer.findViewsInArea(a,s)}matrix(t){return typeof t>"u"?this.transform.getMatrix():(this.transform.setMatrix(t),this)}resize(t,e){const i=this.getPlugin("scroller");return i?i.resize(t,e):this.transform.resize(t,e),this}scale(t,e=t,i=0,r=0){return typeof t>"u"?this.transform.getScale():(this.transform.scale(t,e,i,r),this)}zoom(t,e){const i=this.getPlugin("scroller");if(i){if(typeof t>"u")return i.zoom();i.zoom(t,e)}else{if(typeof t>"u")return this.transform.getZoom();this.transform.zoom(t,e)}return this}zoomTo(t,e={}){const i=this.getPlugin("scroller");return i?i.zoom(t,Object.assign(Object.assign({},e),{absolute:!0})):this.transform.zoom(t,Object.assign(Object.assign({},e),{absolute:!0})),this}zoomToRect(t,e={}){const i=this.getPlugin("scroller");return i?i.zoomToRect(t,e):this.transform.zoomToRect(t,e),this}zoomToFit(t={}){const e=this.getPlugin("scroller");return e?e.zoomToFit(t):this.transform.zoomToFit(t),this}rotate(t,e,i){return typeof t>"u"?this.transform.getRotation():(this.transform.rotate(t,e,i),this)}translate(t,e){return typeof t>"u"?this.transform.getTranslation():(this.transform.translate(t,e),this)}translateBy(t,e){const i=this.translate(),r=i.tx+t,o=i.ty+e;return this.translate(r,o)}getGraphArea(){return this.transform.getGraphArea()}getContentArea(t={}){return this.transform.getContentArea(t)}getContentBBox(t={}){return this.transform.getContentBBox(t)}fitToContent(t,e,i,r){return this.transform.fitToContent(t,e,i,r)}scaleContentToFit(t={}){return this.transform.scaleContentToFit(t),this}center(t){return this.centerPoint(t)}centerPoint(t,e,i){const r=this.getPlugin("scroller");return r?r.centerPoint(t,e,i):this.transform.centerPoint(t,e),this}centerContent(t){const e=this.getPlugin("scroller");return e?e.centerContent(t):this.transform.centerContent(t),this}centerCell(t,e){const i=this.getPlugin("scroller");return i?i.centerCell(t,e):this.transform.centerCell(t),this}positionPoint(t,e,i,r={}){const o=this.getPlugin("scroller");return o?o.positionPoint(t,e,i,r):this.transform.positionPoint(t,e,i),this}positionRect(t,e,i){const r=this.getPlugin("scroller");return r?r.positionRect(t,e,i):this.transform.positionRect(t,e),this}positionCell(t,e,i){const r=this.getPlugin("scroller");return r?r.positionCell(t,e,i):this.transform.positionCell(t,e),this}positionContent(t,e){const i=this.getPlugin("scroller");return i?i.positionContent(t,e):this.transform.positionContent(t,e),this}snapToGrid(t,e){return this.coord.snapToGrid(t,e)}pageToLocal(t,e,i,r){return Tt.isRectangleLike(t)?this.coord.pageToLocalRect(t):typeof t=="number"&&typeof e=="number"&&typeof i=="number"&&typeof r=="number"?this.coord.pageToLocalRect(t,e,i,r):this.coord.pageToLocalPoint(t,e)}localToPage(t,e,i,r){return Tt.isRectangleLike(t)?this.coord.localToPageRect(t):typeof t=="number"&&typeof e=="number"&&typeof i=="number"&&typeof r=="number"?this.coord.localToPageRect(t,e,i,r):this.coord.localToPagePoint(t,e)}clientToLocal(t,e,i,r){return Tt.isRectangleLike(t)?this.coord.clientToLocalRect(t):typeof t=="number"&&typeof e=="number"&&typeof i=="number"&&typeof r=="number"?this.coord.clientToLocalRect(t,e,i,r):this.coord.clientToLocalPoint(t,e)}localToClient(t,e,i,r){return Tt.isRectangleLike(t)?this.coord.localToClientRect(t):typeof t=="number"&&typeof e=="number"&&typeof i=="number"&&typeof r=="number"?this.coord.localToClientRect(t,e,i,r):this.coord.localToClientPoint(t,e)}localToGraph(t,e,i,r){return Tt.isRectangleLike(t)?this.coord.localToGraphRect(t):typeof t=="number"&&typeof e=="number"&&typeof i=="number"&&typeof r=="number"?this.coord.localToGraphRect(t,e,i,r):this.coord.localToGraphPoint(t,e)}graphToLocal(t,e,i,r){return Tt.isRectangleLike(t)?this.coord.graphToLocalRect(t):typeof t=="number"&&typeof e=="number"&&typeof i=="number"&&typeof r=="number"?this.coord.graphToLocalRect(t,e,i,r):this.coord.graphToLocalPoint(t,e)}clientToGraph(t,e,i,r){return Tt.isRectangleLike(t)?this.coord.clientToGraphRect(t):typeof t=="number"&&typeof e=="number"&&typeof i=="number"&&typeof r=="number"?this.coord.clientToGraphRect(t,e,i,r):this.coord.clientToGraphPoint(t,e)}defineFilter(t){return this.defs.filter(t)}defineGradient(t){return this.defs.gradient(t)}defineMarker(t){return this.defs.marker(t)}getGridSize(){return this.grid.getGridSize()}setGridSize(t){return this.grid.setGridSize(t),this}showGrid(){return this.grid.show(),this}hideGrid(){return this.grid.hide(),this}clearGrid(){return this.grid.clear(),this}drawGrid(t){return this.grid.draw(t),this}updateBackground(){return this.background.update(),this}drawBackground(t,e){const i=this.getPlugin("scroller");return i!=null&&(this.options.background==null||!e)?i.drawBackground(t,e):this.background.draw(t),this}clearBackground(t){const e=this.getPlugin("scroller");return e!=null&&(this.options.background==null||!t)?e.clearBackground(t):this.background.clear(),this}enableVirtualRender(){return this.virtualRender.enableVirtualRender(),this}disableVirtualRender(){return this.virtualRender.disableVirtualRender(),this}isMouseWheelEnabled(){return!this.mousewheel.disabled}enableMouseWheel(){return this.mousewheel.enable(),this}disableMouseWheel(){return this.mousewheel.disable(),this}toggleMouseWheel(t){return t==null?this.isMouseWheelEnabled()?this.disableMouseWheel():this.enableMouseWheel():t?this.enableMouseWheel():this.disableMouseWheel(),this}isPannable(){const t=this.getPlugin("scroller");return t?t.isPannable():this.panning.pannable}enablePanning(){const t=this.getPlugin("scroller");return t?t.enablePanning():this.panning.enablePanning(),this}disablePanning(){const t=this.getPlugin("scroller");return t?t.disablePanning():this.panning.disablePanning(),this}togglePanning(t){return t==null?this.isPannable()?this.disablePanning():this.enablePanning():t!==this.isPannable()&&(t?this.enablePanning():this.disablePanning()),this}use(t,...e){return this.installedPlugins.has(t)||(this.installedPlugins.add(t),t.init(this,...e)),this}getPlugin(t){return Array.from(this.installedPlugins).find(e=>e.name===t)}getPlugins(t){return Array.from(this.installedPlugins).filter(e=>t.includes(e.name))}enablePlugins(t){let e=t;Array.isArray(e)||(e=[e]);const i=this.getPlugins(e);return i?.forEach(r=>{var o;(o=r?.enable)===null||o===void 0||o.call(r)}),this}disablePlugins(t){let e=t;Array.isArray(e)||(e=[e]);const i=this.getPlugins(e);return i?.forEach(r=>{var o;(o=r?.disable)===null||o===void 0||o.call(r)}),this}isPluginEnabled(t){var e;const i=this.getPlugin(t);return(e=i?.isEnabled)===null||e===void 0?void 0:e.call(i)}disposePlugins(t){let e=t;Array.isArray(e)||(e=[e]);const i=this.getPlugins(e);return i?.forEach(r=>{r.dispose(),this.installedPlugins.delete(r)}),this}dispose(t=!0){t&&this.model.dispose(),this.css.dispose(),this.defs.dispose(),this.grid.dispose(),this.coord.dispose(),this.transform.dispose(),this.highlight.dispose(),this.background.dispose(),this.mousewheel.dispose(),this.panning.dispose(),this.view.dispose(),this.renderer.dispose(),this.installedPlugins.forEach(e=>{e.dispose()})}}N3t([Qo.dispose()],Po.prototype,"dispose",null);(function(n){n.View=Rl,n.Renderer=n3,n.MouseWheel=i3,n.DefsManager=wot,n.GridManager=QF,n.CoordManager=xot,n.TransformManager=_ot,n.HighlightManager=mS,n.BackgroundManager=t3,n.PanningManager=e3})(Po||(Po={}));(function(n){n.toStringTag=`X6.${n.name}`;function t(e){if(e==null)return!1;if(e instanceof n)return!0;const i=e[Symbol.toStringTag];return i==null||i===n.toStringTag}n.isGraph=t})(Po||(Po={}));(function(n){function t(e,i){const r=e instanceof HTMLElement?new n({container:e}):new n(e);return i!=null&&r.fromJSON(i),r}n.render=t})(Po||(Po={}));(function(n){n.registerNode=Qn.registry.register,n.registerEdge=cn.registry.register,n.registerView=kn.registry.register,n.registerAttr=Ml.registry.register,n.registerGrid=Hu.registry.register,n.registerFilter=uv.registry.register,n.registerNodeTool=fv.registry.register,n.registerEdgeTool=gv.registry.register,n.registerBackground=pb.registry.register,n.registerHighlighter=Ah.registry.register,n.registerPortLayout=ff.registry.register,n.registerPortLabelLayout=dv.registry.register,n.registerMarker=ud.registry.register,n.registerRouter=zu.registry.register,n.registerConnector=gf.registry.register,n.registerAnchor=pv.registry.register,n.registerEdgeAnchor=vv.registry.register,n.registerConnectionPoint=mv.registry.register})(Po||(Po={}));(function(n){n.unregisterNode=Qn.registry.unregister,n.unregisterEdge=cn.registry.unregister,n.unregisterView=kn.registry.unregister,n.unregisterAttr=Ml.registry.unregister,n.unregisterGrid=Hu.registry.unregister,n.unregisterFilter=uv.registry.unregister,n.unregisterNodeTool=fv.registry.unregister,n.unregisterEdgeTool=gv.registry.unregister,n.unregisterBackground=pb.registry.unregister,n.unregisterHighlighter=Ah.registry.unregister,n.unregisterPortLayout=ff.registry.unregister,n.unregisterPortLabelLayout=dv.registry.unregister,n.unregisterMarker=ud.registry.unregister,n.unregisterRouter=zu.registry.unregister,n.unregisterConnector=gf.registry.unregister,n.unregisterAnchor=pv.registry.unregister,n.unregisterEdgeAnchor=vv.registry.unregister,n.unregisterConnectionPoint=mv.registry.unregister})(Po||(Po={}));var W3t=function(n,t,e,i){var r=arguments.length,o=r<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(t,e,o):a(t,e))||o);return r>3&&o&&Object.defineProperty(t,e,o),o},V3t=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e};class _v extends Qn{}(function(n){class t extends Rs{init(){super.init(),this.cell.on("change:*",this.onCellChangeAny,this)}onCellChangeAny({key:i}){const r=n.shapeMaps[this.cell.shape];if(r){const{effect:o}=r;(!o||o.includes(i))&&this.renderHTMLComponent()}}confirmUpdate(i){const r=super.confirmUpdate(i);return this.handleAction(r,t.action,()=>this.renderHTMLComponent())}renderHTMLComponent(){const i=this.selectors&&this.selectors.foContent;if(i){S_(i);const r=n.shapeMaps[this.cell.shape];if(!r)return;let{html:o}=r;typeof o=="function"&&(o=o(this.cell)),o&&(typeof o=="string"?i.innerHTML=o:A_(i,o))}}dispose(){this.cell.off("change:*",this.onCellChangeAny,this)}}W3t([t.dispose()],t.prototype,"dispose",null),n.View=t,(function(e){e.action="html",e.config({bootstrap:[e.action],actions:{html:e.action}}),Rs.registry.register("html-view",e,!0)})(t=n.View||(n.View={}))})(_v||(_v={}));(function(n){n.config({view:"html-view",markup:[{tagName:"rect",selector:"body"},Object.assign({},Ni.getForeignObjectMarkup()),{tagName:"text",selector:"label"}],attrs:{body:{fill:"none",stroke:"none",refWidth:"100%",refHeight:"100%"},fo:{refWidth:"100%",refHeight:"100%"}}}),Qn.registry.register("html",n,!0)})(_v||(_v={}));(function(n){n.shapeMaps={};function t(e){const{shape:i,html:r,effect:o,inherit:a}=e,s=V3t(e,["shape","html","effect","inherit"]);if(!i)throw new Error("should specify shape in config");n.shapeMaps[i]={html:r,effect:o},Po.registerNode(i,Object.assign({inherit:a||"html"},s),!0)}n.register=t})(_v||(_v={}));ae([nPt]);ae([JRt]);ae([gSt,PSt,FSt,jSt,KSt,iAt,BAt,hTt,RTt,DTt,GTt,QTt,SMt,IMt,ZMt,e2t,d2t,y2t,P2t,I2t,j2t,yRt]);ae(Yyt);ae(bbt);ae(gtt);ae(y_t);ae(Ltt);ae(aCt);ae(ACt);ae(c1t);ae(k1t);ae(c_);ae(J1t);ae(ewt);ae(dwt);ae(bwt);ae(Rwt);ae(Dwt);ae($wt);ae(lxt);ae(het);ae(uet);ae(Rxt);ae(pet);ae(vet);ae(Ext);ae(Uxt);ae(qxt);ae(BPt);ae(eyt);var Qe;(function(n){n.default="default",n.grabing="grabing",n.scrolling="scrolling"})(Qe||(Qe={}));var eo;(function(n){n.FinishToStart="finish_to_start",n.StartToStart="start_to_start",n.FinishToFinish="finish_to_finish",n.StartToFinish="start_to_finish"})(eo||(eo={}));var _t;(function(n){n.Tasks_Separate="tasks_separate",n.Sub_Tasks_Inline="sub_tasks_inline",n.Sub_Tasks_Separate="sub_tasks_separate",n.Sub_Tasks_Arrange="sub_tasks_arrange",n.Sub_Tasks_Compact="sub_tasks_compact",n.Project_Sub_Tasks_Inline="project_sub_tasks_inline"})(_t||(_t={}));var ze;(function(n){n.TASK="task",n.PROJECT="project",n.MILESTONE="milestone"})(ze||(ze={}));const we={SCROLL:"scroll",CHANGE_DATE_RANGE:"change_date_range",CLICK_TASK_BAR:"click_task_bar",CONTEXTMENU_TASK_BAR:"contextmenu_task_bar",MOUSEENTER_TASK_BAR:"mouseenter_task_bar",MOUSELEAVE_TASK_BAR:"mouseleave_task_bar",CREATE_TASK_SCHEDULE:"create_task_schedule",CREATE_DEPENDENCY_LINK:"create_dependency_link",DELETE_DEPENDENCY_LINK:"delete_dependency_link",CLICK_DEPENDENCY_LINK_POINT:"click_dependency_link_point",CONTEXTMENU_DEPENDENCY_LINK:"contextmenu_dependency_link",CLICK_MARKLINE_CREATE:"click_markline_create",CLICK_MARKLINE_CONTENT:"click_markline_content",MOVE_END_TASK_BAR:"move_end_task_bar",PROGRESS_UPDATE:"progress_update"},G3t=Object.freeze(Object.defineProperty({__proto__:null,get DependencyType(){return eo},GANTT_EVENT_TYPE:we,get InteractionState(){return Qe},get TaskType(){return ze},get TasksShowMode(){return _t}},Symbol.toStringTag,{value:"Module"}));class pn{static GenAutoIncrementId(){return pn.auto_increment_id++}}pn.auto_increment_id=0;class ie{constructor(t){this.id=pn.GenAutoIncrementId(),this.registry=t}}const FM="named",Aot="inject",Tot="multi_inject",Mot="inversify:tagged",Rot="inversify:paramtypes";class r3{constructor(t,e){this.key=t,this.value=e}toString(){return this.key===FM?`named: ${String(this.value).toString()} `:`tagged: { key:${this.key.toString()}, value: ${String(this.value)} }`}}const wp=(function(n){var t;return(function(e){const i=typeof Symbol=="function",r=i&&Symbol.toPrimitive!==void 0?Symbol.toPrimitive:"@@toPrimitive",o=Object.getPrototypeOf(Function),a=Map,s=new WeakMap;function l(P,k,E,D){if(!C(E))throw new TypeError;return m(P,k,E,D)}function h(P,k,E){if(!C(k))throw new TypeError;return b(E)||(E=M(E)),f(P,k,E)}function u(P,k,E){if(!C(k))throw new TypeError;return b(E)||(E=M(E)),g(P,k,E)}function d(P,k,E){if(!C(k))throw new TypeError;return b(E)||(E=M(E)),p(P,k,E)}function c(P,k,E){let D=s.get(P);if(b(D)){if(!E)return;D=new a,s.set(P,D)}let I=D.get(k);if(b(I)){if(!E)return;I=new a,D.set(k,I)}return I}function f(P,k,E){if(g(P,k,E))return!0;const D=B(k);return!_(D)&&f(P,D,E)}function g(P,k,E){const D=c(k,E,!1);return!b(D)&&A(D.has(P))}function p(P,k,E){if(g(P,k,E))return v(P,k,E);const D=B(k);return _(D)?void 0:p(P,D,E)}function v(P,k,E){const D=c(k,E,!1);if(!b(D))return D.get(P)}function m(P,k,E,D){c(E,D,!0).set(P,k)}function y(P){if(P===null)return 1;switch(typeof P){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return P===null?1:6;default:return 6}}function b(P){return P===void 0}function _(P){return P===null}function w(P){return typeof P=="symbol"}function C(P){return typeof P=="object"?P!==null:typeof P=="function"}function x(P,k){switch(y(P)){case 0:case 1:case 2:case 3:case 4:case 5:return P}const E="string",D=L(P,r);if(D!==void 0){const I=D.call(P,E);if(C(I))throw new TypeError;return I}return S(P)}function S(P,k){{const E=P.toString;if(R(E)){const I=E.call(P);if(!C(I))return I}const D=P.valueOf;if(R(D)){const I=D.call(P);if(!C(I))return I}}throw new TypeError}function A(P){return!!P}function T(P){return""+P}function M(P){const k=x(P);return w(k)?k:T(k)}function R(P){return typeof P=="function"}function L(P,k){const E=P[k];if(E!=null){if(!R(E))throw new TypeError;return E}}function B(P){const k=Object.getPrototypeOf(P);if(typeof P!="function"||P===o||k!==o)return k;const E=P.prototype,D=E&&Object.getPrototypeOf(E);if(D==null||D===Object.prototype)return k;const I=D.constructor;return typeof I!="function"||I===P?k:I}e("defineMetadata",l),e("hasMetadata",h),e("hasOwnMetadata",u),e("getMetadata",d)})((t=n,function(e,i){typeof t[e]!="function"&&Object.defineProperty(t,e,{configurable:!0,writable:!0,value:i})})),n})({});function $3t(n,t,e,i){const r=[i];let o={};wp.hasOwnMetadata(n,t)&&(o=wp.getMetadata(n,t));let a=o[e];a===void 0&&(a=[]),a.push(...r),o[e]=a,wp.defineMetadata(n,o,t)}function j3t(n,t,e,i){$3t(Mot,n,e.toString(),i)}function Pot(n){return(t,e,i)=>{j3t(t,e,i,n)}}function Bot(n){return t=>(e,i,r)=>Pot(new r3(n,t))(e,i,r)}const Ce=Bot(Aot),kot=Bot(Tot);function wt(){return function(n){return wp.defineMetadata(Rot,null,n),n}}function Ln(n){return Pot(new r3(FM,n))}const Of={Singleton:"Singleton",Transient:"Transient"},Fu={ConstantValue:"ConstantValue",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid"};class o3{constructor(t,e){this.id=pn.GenAutoIncrementId(),this.activated=!1,this.serviceIdentifier=t,this.scope=e,this.type=Fu.Invalid,this.constraint=i=>!0,this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.dynamicValue=null}clone(){const t=new o3(this.serviceIdentifier,this.scope);return t.activated=t.scope===Of.Singleton&&this.activated,t.implementationType=this.implementationType,t.dynamicValue=this.dynamicValue,t.scope=this.scope,t.type=this.type,t.provider=this.provider,t.constraint=this.constraint,t.cache=this.cache,t}}class U3t{getConstructorMetadata(t){return{compilerGeneratedMetadata:wp.getMetadata(Rot,t),userGeneratedMetadata:wp.getMetadata(Mot,t)||{}}}getPropertiesMetadata(t){throw new Error("")}}const Y3t=n=>t=>{const e=i=>{if(i==null)return!1;if(i.key===n&&i.value===t)return!0;if(i.constructorArgsMetadata==null)return!1;const r=i.constructorArgsMetadata;for(let o=0;o<r.length;o++)if(r[o].key===n&&r[o].value===t)return!0;return!1};return e.metaData=new r3(n,t),e},X3t=Y3t(FM);class p1{constructor(t){this._binding=t}inRequestScope(){throw new Error("")}inSingletonScope(){return this._binding.scope=Of.Singleton,this}inTransientScope(){return this._binding.scope=Of.Transient,this}whenTargetNamed(t){return this._binding.constraint=X3t(t),this}}class q3t{constructor(t){this._binding=t}to(t){return this._binding.type=Fu.Instance,this._binding.implementationType=t,new p1(this._binding)}toSelf(){const t=this._binding.serviceIdentifier;return this.to(t)}toDynamicValue(t){return this._binding.type=Fu.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=t,this._binding.implementationType=null,new p1(this._binding)}toConstantValue(t){return this._binding.type=Fu.ConstantValue,this._binding.cache=t,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=Of.Singleton,new p1(this._binding)}toFactory(t){return this._binding.type=Fu.Factory,this._binding.factory=t,this._binding.scope=Of.Singleton,new p1(this._binding)}toService(t){this.toDynamicValue((e=>e.container.get(t)))}}let K3t=class{constructor(t){const e=t||{};e.defaultScope=e.defaultScope||Of.Transient,this.options=e,this.id=pn.GenAutoIncrementId(),this._bindingDictionary=new Map,this._metadataReader=new U3t}load(t){const e=this._getContainerModuleHelpersFactory()(t.id);t.registry(e.bindFunction,e.unbindFunction,e.isboundFunction,e.rebindFunction)}get(t){const e=this._getNotAllArgs(t,!1);return this._get(e)}getAll(t){const e=this._getAllArgs(t);return this._get(e)}getTagged(t,e,i){const r=this._getNotAllArgs(t,!1,e,i);return this._get(r)}getNamed(t,e){return this.getTagged(t,FM,e)}isBound(t){return this._bindingDictionary.has(t)}bind(t){const e=this.options.defaultScope,i=new o3(t,e),r=this._bindingDictionary.get(t)||[];return r.push(i),this._bindingDictionary.set(t,r),new q3t(i)}unbind(t){this._bindingDictionary.delete(t)}rebind(t){return this.unbind(t),this.bind(t)}_getContainerModuleHelpersFactory(){const t=(a,s)=>{a._binding.moduleId=s},e=a=>s=>{const l=this.bind(s);return t(l,a),l},i=()=>a=>this.unbind(a),r=()=>a=>this.isBound(a),o=a=>s=>{const l=this.rebind(s);return t(l,a),l};return a=>({bindFunction:e(a),isboundFunction:r(),rebindFunction:o(a),unbindFunction:i(),unbindAsyncFunction:s=>null})}_getNotAllArgs(t,e,i,r){return{avoidConstraints:!1,isMultiInject:e,serviceIdentifier:t,key:i,value:r}}_getAllArgs(t){return{avoidConstraints:!0,isMultiInject:!0,serviceIdentifier:t}}_get(t){const e=[];return this._bindingDictionary.get(t.serviceIdentifier).filter((i=>i.constraint(t))).forEach((i=>{e.push(this._resolveFromBinding(i))})),t.isMultiInject||e.length!==1?e:e[0]}_getChildRequest(t){const e=t.implementationType,{userGeneratedMetadata:i}=this._metadataReader.getConstructorMetadata(e),r=Object.keys(i),o=[];for(let a=0;a<r.length;a++){const s=i[a],l={};s.forEach((f=>{l[f.key]=f.value}));const h={inject:l[Aot],multiInject:l[Tot]},u=h.inject||h.multiInject,d={serviceIdentifier:u,constructorArgsMetadata:s},c=(this._bindingDictionary.get(u)||[]).filter((f=>f.constraint(d)));if(c.length){const f={injectIdentifier:u,metadata:s,bindings:c};o.push(f)}}return o}_resolveFromBinding(t){const e=this._getResolvedFromBinding(t);return this._saveToScope(t,e),e}_getResolvedFromBinding(t){let e;switch(t.type){case Fu.ConstantValue:case Fu.Function:e=t.cache;break;case Fu.Instance:e=this._resolveInstance(t,t.implementationType);break;default:e=t.dynamicValue({container:this})}return e}_resolveInstance(t,e){if(t.activated)return t.cache;const i=this._getChildRequest(t);return this._createInstance(e,i)}_createInstance(t,e){return e.length?new t(...this._resolveRequests(e)):new t}_resolveRequests(t){return t.map((e=>e.bindings.length>1?e.bindings.map((i=>this._resolveFromBinding(i))):this._resolveFromBinding(e.bindings[0])))}_saveToScope(t,e){t.scope===Of.Singleton&&(t.cache=e,t.activated=!0)}};const Qi=Symbol("ContributionProvider");class Lot{constructor(t,e){this.serviceIdentifier=t,this.container=e,Eot.setStore(this.serviceIdentifier,this)}getContributions(){return this.caches||(this.caches=[],this.container&&this.container.isBound(this.serviceIdentifier)&&this.caches.push(...this.container.getAll(this.serviceIdentifier))),this.caches}refresh(){this.caches&&(this.caches.length=0,this.container&&this.container.isBound(this.serviceIdentifier)&&this.caches.push(...this.container.getAll(this.serviceIdentifier)))}}function wr(n,t){n(Qi).toDynamicValue((({container:e})=>new Lot(t,e))).inSingletonScope().whenTargetNamed(t)}function Z3t(n,t){n(Qi).toDynamicValue((({container:e})=>new Lot(t,e))).whenTargetNamed(t)}class Eot{static getStore(t){return this.store.get(t)}static setStore(t,e){this.store.set(t,e)}static refreshAllContributions(){this.store.forEach((t=>{t.refresh()}))}}Eot.store=new Map;class J3t{constructor(t,e){this._args=t,this.name=e,this.taps=[]}tap(t,e){this._tap("sync",t,e)}unTap(t,e){const i=typeof t=="string"?t.trim():t.name;i&&(this.taps=this.taps.filter((r=>!(r.name===i&&(!e||r.fn===e)))))}_parseOptions(t,e,i){let r;if(typeof e=="string")r={name:e.trim()};else if(typeof e!="object"||e===null)throw new Error("Invalid tap options");if(typeof r.name!="string"||r.name==="")throw new Error("Missing name for tap");return r=Object.assign({type:t,fn:i},r),r}_tap(t,e,i){this._insert(this._parseOptions(t,e,i))}_insert(t){let e;typeof t.before=="string"?e=new Set([t.before]):Array.isArray(t.before)&&(e=new Set(t.before));let i=0;typeof t.stage=="number"&&(i=t.stage);let r=this.taps.length;for(;r>0;){r--;const o=this.taps[r];this.taps[r+1]=o;const a=o.stage||0;if(e){if(e.has(o.name)){e.delete(o.name);continue}if(e.size>0)continue}if(!(a>i)){r++;break}}this.taps[r]=t}}class Ir extends J3t{call(...t){this.taps.map((e=>e.fn)).forEach((e=>e(...t)))}}const NM=Symbol.for("EnvContribution"),a3=Symbol.for("VGlobal"),Kt=new K3t,s3=Symbol.for("RenderService");class Q3t{get renderService(){return this._renderService||(this._renderService=Kt.get(s3)),this._renderService}}const St=new Q3t;let Z9=0;class Dot{constructor(){this.nextAnimationFrameCbs=new Map,this._rafHandle=null,this.runAnimationFrame=t=>{this._rafHandle=null;const e=this.nextAnimationFrameCbs;this.nextAnimationFrameCbs=new Map,e.forEach((i=>i(t)))},this.tryRunAnimationFrameNextFrame=()=>{this._rafHandle===null&&this.nextAnimationFrameCbs.size!==0&&(this._rafHandle=St.global.getRequestAnimationFrame()(this.runAnimationFrame))}}addAnimationFrameCb(t){return this.nextAnimationFrameCbs.set(++Z9,t),this.tryRunAnimationFrameNextFrame(),Z9}removeAnimationFrameCb(t){return!!this.nextAnimationFrameCbs.has(t)&&(this.nextAnimationFrameCbs.delete(t),!0)}}class Iot{constructor(){this._listenerMap=new Map,this._eventListenerTransformer=t=>t}setEventListenerTransformer(t){this._eventListenerTransformer=t||(e=>e)}addEventListener(t,e,i){if(!e)return;const r=o=>{const a=this._eventListenerTransformer(o);typeof e=="function"?e(a):e.handleEvent&&e.handleEvent(a)};this._listenerMap.has(t)||this._listenerMap.set(t,new Map),this._listenerMap.get(t).set(e,r),this._nativeAddEventListener(t,r,i)}removeEventListener(t,e,i){var r;if(!e)return;const o=(r=this._listenerMap.get(t))===null||r===void 0?void 0:r.get(e);o&&(this._nativeRemoveEventListener(t,o,i),this._listenerMap.get(t).delete(e),this._listenerMap.get(t).size===0&&this._listenerMap.delete(t))}dispatchEvent(t){return this._nativeDispatchEvent(t)}clearAllEventListeners(){this._listenerMap.forEach(((t,e)=>{t.forEach(((i,r)=>{this._nativeRemoveEventListener(e,i,void 0)}))})),this._listenerMap.clear()}_nativeAddEventListener(t,e,i){throw new Error("_nativeAddEventListener must be implemented by derived classes")}_nativeRemoveEventListener(t,e,i){throw new Error("_nativeRemoveEventListener must be implemented by derived classes")}_nativeDispatchEvent(t){throw new Error("_nativeDispatchEvent must be implemented by derived classes")}}var tNt=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a},eNt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},J9=function(n,t){return function(e,i){t(e,i,n)}},iNt=function(n,t,e,i){return new(e||(e=Promise))((function(r,o){function a(h){try{l(i.next(h))}catch(u){o(u)}}function s(h){try{l(i.throw(h))}catch(u){o(u)}}function l(h){var u;h.done?r(h.value):(u=h.value,u instanceof e?u:new e((function(d){d(u)}))).then(a,s)}l((i=i.apply(n,t||[])).next())}))};let mI=class extends Iot{get env(){return this._env}get isImageAnonymous(){return this._isImageAnonymous}set isImageAnonymous(n){this._isImageAnonymous=n}get devicePixelRatio(){return this._env||this.setEnv("browser"),this.envContribution.getDevicePixelRatio()}get supportEvent(){return this._env||this.setEnv("browser"),this.envContribution.supportEvent}set supportEvent(n){this._env||this.setEnv("browser"),this.envContribution.supportEvent=n}get supportsTouchEvents(){return this._env||this.setEnv("browser"),this.envContribution.supportsTouchEvents}set supportsTouchEvents(n){this._env||this.setEnv("browser"),this.envContribution.supportsTouchEvents=n}get supportsPointerEvents(){return this._env||this.setEnv("browser"),this.envContribution.supportsPointerEvents}set supportsPointerEvents(n){this._env||this.setEnv("browser"),this.envContribution.supportsPointerEvents=n}get supportsMouseEvents(){return this._env||this.setEnv("browser"),this.envContribution.supportsMouseEvents}set supportsMouseEvents(n){this._env||this.setEnv("browser"),this.envContribution.supportsMouseEvents=n}get applyStyles(){return this._env||this.setEnv("browser"),this.envContribution.applyStyles}set applyStyles(n){this._env||this.setEnv("browser"),this.envContribution.applyStyles=n}constructor(n){super(),this.contributions=n,this._isImageAnonymous=!0,this._performanceRAFList=[],this.eventListenerTransformer=t=>t,this.id=pn.GenAutoIncrementId(),this.hooks={onSetEnv:new Ir(["lastEnv","env","global"])},this.measureTextMethod="native",this.optimizeVisible=!1}_nativeAddEventListener(n,t,e){return this._env||this.setEnv("browser"),this.envContribution.addEventListener(n,t,e)}_nativeRemoveEventListener(n,t,e){return this._env||this.setEnv("browser"),this.envContribution.removeEventListener(n,t,e)}_nativeDispatchEvent(n){return this._env||this.setEnv("browser"),this.envContribution.dispatchEvent(n)}bindContribution(n){const t=[];if(this.contributions.getContributions().forEach((e=>{const i=e.configure(this,n);i&&i.then&&t.push(i)})),t.length)return Promise.all(t)}getDynamicCanvasCount(){return this._env||this.setEnv("browser"),this.envContribution.getDynamicCanvasCount()}getStaticCanvasCount(){return this._env||this.setEnv("browser"),this.envContribution.getStaticCanvasCount()}setEnv(n,t){if(t&&t.force===!0||this._env!==n)return this.deactiveCurrentEnv(),this.activeEnv(n,t)}deactiveCurrentEnv(){this.envContribution&&this.envContribution.release()}activeEnv(n,t){const e=this._env;this._env=n;const i=this.bindContribution(t);if(i&&i.then)return i.then((()=>{this.envParams=t,this.hooks.onSetEnv.call(e,n,this)}));this.envParams=t,this.hooks.onSetEnv.call(e,n,this)}setActiveEnvContribution(n){this.envContribution=n}createCanvas(n){return this._env||this.setEnv("browser"),this.envContribution.createCanvas(n)}createOffscreenCanvas(n){return this._env||this.setEnv("browser"),this.envContribution.createOffscreenCanvas(n)}releaseCanvas(n){return this._env||this.setEnv("browser"),this.envContribution.releaseCanvas(n)}getRequestAnimationFrame(){return this._env||this.setEnv("browser"),this.envContribution.getRequestAnimationFrame()}getSpecifiedRequestAnimationFrame(n){this._env||this.setEnv("browser"),this._performanceRAFList[n]||(this._performanceRAFList[n]=new Dot);const t=this._performanceRAFList[n];return e=>t.addAnimationFrameCb(e)}getSpecifiedCancelAnimationFrame(n){if(this._env||this.setEnv("browser"),!this._performanceRAFList[n])return()=>!1;const t=this._performanceRAFList[n];return e=>t.removeAnimationFrameCb(e)}getCancelAnimationFrame(){return this._env||this.setEnv("browser"),this.envContribution.getCancelAnimationFrame()}getElementById(n){return this._env||this.setEnv("browser"),this.envContribution.getElementById?this.envContribution.getElementById(n):null}getRootElement(){return this._env||this.setEnv("browser"),this.envContribution.getRootElement?this.envContribution.getRootElement():null}getDocument(){return this._env||this.setEnv("browser"),this.envContribution.getDocument?this.envContribution.getDocument():null}mapToCanvasPoint(n,t){return this._env||this.setEnv("browser"),this.envContribution.mapToCanvasPoint?this.envContribution.mapToCanvasPoint(n,t):null}loadImage(n){return this._env||this.setEnv("browser"),this.envContribution.loadImage(n)}loadSvg(n){return this._env||this.setEnv("browser"),this.envContribution.loadSvg(n)}loadJson(n){return this._env||this.setEnv("browser"),this.envContribution.loadJson(n)}loadArrayBuffer(n){return this._env||this.setEnv("browser"),this.envContribution.loadArrayBuffer(n)}loadBlob(n){return this._env||this.setEnv("browser"),this.envContribution.loadBlob(n)}loadFont(n,t,e){return iNt(this,void 0,void 0,(function*(){return this._env||this.setEnv("browser"),this.envContribution.loadFont(n,t,e)}))}isChrome(){return this._isChrome!=null||(this._env||this.setEnv("browser"),this._isChrome=this._env==="browser"&&navigator.userAgent.indexOf("Chrome")>-1),this._isChrome}isSafari(){return this._isSafari!=null||(this._env||this.setEnv("browser"),this._isSafari=this._env==="browser"&&/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)),this._isSafari}getNativeAABBBounds(n){return this._env||this.setEnv("browser"),this.envContribution.getNativeAABBBounds(n)}removeDom(n){return this._env||this.setEnv("browser"),this.envContribution.removeDom(n)}createDom(n){return this._env||this.setEnv("browser"),this.envContribution.createDom(n)}updateDom(n,t){return this._env||this.setEnv("browser"),this.envContribution.updateDom(n,t)}getElementTop(n,t=!1){return this._env||this.setEnv("browser"),this.envContribution.getElementTop(n,t)}getElementLeft(n,t=!1){return this._env||this.setEnv("browser"),this.envContribution.getElementLeft(n,t)}getElementTopLeft(n,t=!1){return this._env||this.setEnv("browser"),this.envContribution.getElementTopLeft(n,t)}isMacOS(){return this._env||this.setEnv("browser"),this.envContribution.isMacOS()}copyToClipBoard(n){return this._env||this.setEnv("browser"),this.envContribution.copyToClipBoard(n)}};mI=tNt([wt(),J9(0,Ce(Qi)),J9(0,Ln(NM)),eNt("design:paramtypes",[Object])],mI);var pf;(function(n){n[n.estimate=0]="estimate",n[n.actualBounding=1]="actualBounding",n[n.fontBounding=2]="fontBounding"})(pf||(pf={}));var mo;(function(n){n[n.INITIAL=0]="INITIAL",n[n.RUNNING=1]="RUNNING",n[n.PAUSE=2]="PAUSE"})(mo||(mo={}));var dy;(function(n){n.wait="wait",n.from="from",n.to="to",n.customAnimate="customAnimate"})(dy||(dy={}));var Dr;(function(n){n[n.INITIAL=0]="INITIAL",n[n.RUNNING=1]="RUNNING",n[n.PAUSED=2]="PAUSED",n[n.END=3]="END"})(Dr||(Dr={}));var UB={exports:{}},Q9;function nNt(){return Q9||(Q9=1,(function(n){var t=Object.prototype.hasOwnProperty,e="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(e=!1));function r(l,h,u){this.fn=l,this.context=h,this.once=u||!1}function o(l,h,u,d,c){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new r(u,d||l,c),g=e?e+h:h;return l._events[g]?l._events[g].fn?l._events[g]=[l._events[g],f]:l._events[g].push(f):(l._events[g]=f,l._eventsCount++),l}function a(l,h){--l._eventsCount===0?l._events=new i:delete l._events[h]}function s(){this._events=new i,this._eventsCount=0}s.prototype.eventNames=function(){var h=[],u,d;if(this._eventsCount===0)return h;for(d in u=this._events)t.call(u,d)&&h.push(e?d.slice(1):d);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(u)):h},s.prototype.listeners=function(h){var u=e?e+h:h,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var c=0,f=d.length,g=new Array(f);c<f;c++)g[c]=d[c].fn;return g},s.prototype.listenerCount=function(h){var u=e?e+h:h,d=this._events[u];return d?d.fn?1:d.length:0},s.prototype.emit=function(h,u,d,c,f,g){var p=e?e+h:h;if(!this._events[p])return!1;var v=this._events[p],m=arguments.length,y,b;if(v.fn){switch(v.once&&this.removeListener(h,v.fn,void 0,!0),m){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,u),!0;case 3:return v.fn.call(v.context,u,d),!0;case 4:return v.fn.call(v.context,u,d,c),!0;case 5:return v.fn.call(v.context,u,d,c,f),!0;case 6:return v.fn.call(v.context,u,d,c,f,g),!0}for(b=1,y=new Array(m-1);b<m;b++)y[b-1]=arguments[b];v.fn.apply(v.context,y)}else{var _=v.length,w;for(b=0;b<_;b++)switch(v[b].once&&this.removeListener(h,v[b].fn,void 0,!0),m){case 1:v[b].fn.call(v[b].context);break;case 2:v[b].fn.call(v[b].context,u);break;case 3:v[b].fn.call(v[b].context,u,d);break;case 4:v[b].fn.call(v[b].context,u,d,c);break;default:if(!y)for(w=1,y=new Array(m-1);w<m;w++)y[w-1]=arguments[w];v[b].fn.apply(v[b].context,y)}}return!0},s.prototype.on=function(h,u,d){return o(this,h,u,d,!1)},s.prototype.once=function(h,u,d){return o(this,h,u,d,!0)},s.prototype.removeListener=function(h,u,d,c){var f=e?e+h:h;if(!this._events[f])return this;if(!u)return a(this,f),this;var g=this._events[f];if(g.fn)g.fn===u&&(!c||g.once)&&(!d||g.context===d)&&a(this,f);else{for(var p=0,v=[],m=g.length;p<m;p++)(g[p].fn!==u||c&&!g[p].once||d&&g[p].context!==d)&&v.push(g[p]);v.length?this._events[f]=v.length===1?v[0]:v:a(this,f)}return this},s.prototype.removeAllListeners=function(h){var u;return h?(u=e?e+h:h,this._events[u]&&a(this,u)):(this._events=new i,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=e,s.EventEmitter=s,n.exports=s})(UB)),UB.exports}var rNt=nNt();const ng=yH(rNt),P_=(n,t)=>Object.prototype.toString.call(n)===`[object ${t}]`,Cb=(n,t=!1)=>t?typeof n=="boolean":n===!0||n===!1||P_(n,"Boolean"),$c=n=>typeof n=="function",Ti=n=>n==null,Ho=n=>n!=null,Rc=n=>{const t=typeof n;return n!==null&&t==="object"||t==="function"},oNt=n=>typeof n=="object"&&n!==null,aNt=function(n){if(!oNt(n)||!P_(n,"Object"))return!1;if(Object.getPrototypeOf(n)===null)return!0;let t=n;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(n)===t},$i=n=>n===void 0,bl=(n,t=!1)=>{const e=typeof n;return t?e==="string":e==="string"||P_(n,"String")},$e=n=>Array.isArray?Array.isArray(n):P_(n,"Array"),Kn=(n,t=!1)=>{const e=typeof n;return t?e==="number":e==="number"||P_(n,"Number")},sNt=n=>new RegExp(/^(http(s)?:\/\/)\w+[^\s]+(\.[^\s]+){1,}$/).test(n),lNt=n=>new RegExp(/^data:image\/(?:gif|png|jpeg|bmp|webp|svg\+xml)(?:;charset=utf-8)?;base64,(?:[A-Za-z0-9]|[+/])+={0,2}/g).test(n),hNt=Object.prototype.hasOwnProperty,uNt=(n,t)=>n!=null&&hNt.call(n,t);function t7(n){return Object.prototype.toString.call(n)}function e7(n){return Object.keys(n)}function yI(n,t,e){if(n===t)return!0;if(typeof n!=typeof t||n==null||t==null)return!1;if(Number.isNaN(n)&&Number.isNaN(t))return!0;if(t7(n)!==t7(t)||$c(n)||typeof n!="object")return!1;if($e(n)){if(n.length!==t.length)return!1;for(let o=n.length-1;o>=0;o--)if(!yI(n[o],t[o]))return!1;return!0}if(!aNt(n))return!1;const i=e7(n),r=e7(t);if(i.length!==r.length)return!1;i.sort(),r.sort();for(let o=i.length-1;o>=0;o--)if(i[o]!=r[o])return!1;for(let o=i.length-1;o>=0;o--){const a=i[o];if(!yI(n[a],t[a]))return!1}return!0}function v1(n,t){if(!$e(n)||!$e(t)||n.length!==t.length)return!1;for(let e=0;e<n.length;e++)if(n[e]!==t[e])return!1;return!0}const dNt=typeof console<"u";function m1(n,t,e){const i=[t].concat([].slice.call(e))}var os;(function(n){n[n.None=0]="None",n[n.Error=1]="Error",n[n.Warn=2]="Warn",n[n.Info=3]="Info",n[n.Debug=4]="Debug"})(os||(os={}));let bo=class Io{static getInstance(t,e){return Io._instance&&Kn(t)?Io._instance.level(t):Io._instance||(Io._instance=new Io(t,e)),Io._instance}static setInstance(t){return Io._instance=t}static setInstanceLevel(t){Io._instance?Io._instance.level(t):Io._instance=new Io(t)}static clearInstance(){Io._instance=null}constructor(t=os.None,e){this._onErrorHandler=[],this._level=t,this._method=e}addErrorHandler(t){this._onErrorHandler.find((e=>e===t))||this._onErrorHandler.push(t)}removeErrorHandler(t){const e=this._onErrorHandler.findIndex((i=>i===t));e<0||this._onErrorHandler.splice(e,1)}callErrorHandler(...t){this._onErrorHandler.forEach((e=>e(...t)))}canLogInfo(){return this._level>=os.Info}canLogDebug(){return this._level>=os.Debug}canLogError(){return this._level>=os.Error}canLogWarn(){return this._level>=os.Warn}level(t){return arguments.length?(this._level=+t,this):this._level}error(...t){var e;return this._level>=os.Error&&(this._onErrorHandler.length?this.callErrorHandler(...t):m1((e=this._method)!==null&&e!==void 0?e:"error","ERROR",t)),this}warn(...t){return this._level>=os.Warn&&m1(this._method||"warn","WARN",t),this}info(...t){return this._level>=os.Info&&m1(this._method||"log","INFO",t),this}debug(...t){return this._level>=os.Debug&&m1(this._method||"log","DEBUG",t),this}};bo._instance=null;const cNt=1e-10,fNt=1e-10;function i7(n,t,e=fNt,i=cNt){const r=i,o=e*Math.max(n,t);return Math.abs(n-t)<=Math.max(r,o)}const gNt=function(n,t,e){return n<t?t:n>e?e:n},vi=1e-12,Ki=Math.PI,Ia=Ki/2,_r=2*Ki,le=2*Math.PI,Ke=Math.abs,je=Math.atan2,wn=Math.cos,Th=Math.max,xr=Math.min,Hi=Math.sin,ws=Math.sqrt,Lg=Math.pow;function pNt(n){return n>1?0:n<-1?Ki:Math.acos(n)}function n7(n){return n>=1?Ia:n<=-1?-Ia:Math.asin(n)}function r7(n,t,e,i,r){let o=e,a=i;return typeof n=="number"&&typeof e=="number"&&(o=(1-r)*n+r*e),typeof t=="number"&&typeof i=="number"&&(a=(1-r)*t+r*i),{x:o,y:a}}let ci=class Oot{constructor(t=0,e=0,i,r){this.x=0,this.y=0,this.x=t,this.y=e,this.x1=i,this.y1=r}clone(){return new Oot(this.x,this.y)}copyFrom(t){return this.x=t.x,this.y=t.y,this.x1=t.x1,this.y1=t.y1,this.defined=t.defined,this.context=t.context,this}set(t,e){return this.x=t,this.y=e,this}add(t){return Kn(t)?(this.x+=t,void(this.y+=t)):(this.x+=t.x,this.y+=t.y,this)}sub(t){return Kn(t)?(this.x-=t,void(this.y-=t)):(this.x-=t.x,this.y-=t.y,this)}multi(t){throw new Error("")}div(t){throw new Error("")}},fs=class{static distancePP(t,e){return ws(Lg(t.x-e.x,2)+Lg(t.y-e.y,2))}static distanceNN(t,e,i,r){return ws(Lg(t-i,2)+Lg(e-r,2))}static distancePN(t,e,i){return ws(Lg(e-t.x,2)+Lg(i-t.y,2))}static pointAtPP(t,e,i){return new ci((e.x-t.x)*i+t.x,(e.y-t.y)*i+t.y)}};function ap(n){return n*(Math.PI/180)}function vNt(n){return 180*n/Math.PI}const mNt=(n=0)=>{if(n<0)for(;n<-_r;)n+=_r;else if(n>0)for(;n>_r;)n-=_r;return n},yNt=mNt;function bNt(n,t,e){if(n===null)return t;if(t===null)return n;const{x11:i,x12:r,y11:o,y12:a,x21:s,x22:l,y21:h,y22:u}=_Nt(n,t);return i>=l||r<=s||o>=u||a<=h?{x1:0,y1:0,x2:0,y2:0}:{x1:Math.max(i,s),y1:Math.max(o,h),x2:Math.min(r,l),y2:Math.min(a,u)}}var o7;(function(n){n[n.NONE=0]="NONE",n[n.BBOX1=1]="BBOX1",n[n.BBOX2=2]="BBOX2"})(o7||(o7={}));const _Nt=(n,t,e)=>{let i=n.x1,r=n.x2,o=n.y1,a=n.y2,s=t.x1,l=t.x2,h=t.y1,u=t.y2;return{x11:i,x12:r,y11:o,y12:a,x21:s,x22:l,y21:h,y22:u}};function a7(n,t,e){return n&&t?!(n.x1>t.x2||n.x2<t.x1||n.y1>t.y2||n.y2<t.y1):!0}function YB(n,t){return Math.abs(t[0]*n[0]+t[1]*n[1])}function mh({x:n,y:t},e,i={x:0,y:0}){return{x:(n-i.x)*Math.cos(e)-(t-i.y)*Math.sin(e)+i.x,y:(n-i.x)*Math.sin(e)+(t-i.y)*Math.cos(e)+i.y}}function bI(n){return{x:(n.x1+n.x2)/2,y:(n.y1+n.y2)/2}}function s7(n,t){const e=t?ap(n.angle):n.angle,i=bI(n);return[mh({x:n.x1,y:n.y1},e,i),mh({x:n.x2,y:n.y1},e,i),mh({x:n.x2,y:n.y2},e,i),mh({x:n.x1,y:n.y2},e,i)]}function CNt(n,t,e=!1){const i=s7(n,e),r=s7(t,e),o=(v,m)=>[m.x-v.x,m.y-v.y],a=o(bI(n),bI(t)),s=o(i[0],i[1]),l=o(i[1],i[2]),h=o(r[0],r[1]),u=o(r[1],r[2]),d=e?ap(n.angle):n.angle;let c=e?ap(90-n.angle):n.angle+Ia;const f=e?ap(t.angle):t.angle;let g=e?ap(90-t.angle):t.angle+Ia;c>le&&(c-=le),g>le&&(g-=le);const p=(v,m,y,b)=>{const _=[Math.cos(m),Math.sin(m)];return v+(YB(_,y)+YB(_,b))/2>YB(_,a)};return p((n.x2-n.x1)/2,d,h,u)&&p((n.y2-n.y1)/2,c,h,u)&&p((t.x2-t.x1)/2,f,s,l)&&p((t.y2-t.y1)/2,g,s,l)}function Zd(n,t,e,i,r,o){if(o>t&&o>i||o<t&&o<i||i===t)return 0;const a=(o-t)/(i-t);let s=i<t?1:-1;a!==1&&a!==0||(s=i<t?.5:-.5);const l=a*(e-n)+n;return l===r?1/0:l>r?s:0}const l7=n=>{let t=n.charCodeAt(0),e=n.length===2?n.charCodeAt(1):0,i=t;return 55296<=t&&t<=56319&&56320<=e&&e<=57343&&(t&=1023,e&=1023,i=t<<10|e,i+=65536),i===12288||65281<=i&&i<=65376||65504<=i&&i<=65510?"F":i===8361||65377<=i&&i<=65470||65474<=i&&i<=65479||65482<=i&&i<=65487||65490<=i&&i<=65495||65498<=i&&i<=65500||65512<=i&&i<=65518?"H":4352<=i&&i<=4447||4515<=i&&i<=4519||4602<=i&&i<=4607||9001<=i&&i<=9002||11904<=i&&i<=11929||11931<=i&&i<=12019||12032<=i&&i<=12245||12272<=i&&i<=12283||12289<=i&&i<=12350||12353<=i&&i<=12438||12441<=i&&i<=12543||12549<=i&&i<=12589||12593<=i&&i<=12686||12688<=i&&i<=12730||12736<=i&&i<=12771||12784<=i&&i<=12830||12832<=i&&i<=12871||12880<=i&&i<=13054||13056<=i&&i<=19903||19968<=i&&i<=42124||42128<=i&&i<=42182||43360<=i&&i<=43388||44032<=i&&i<=55203||55216<=i&&i<=55238||55243<=i&&i<=55291||63744<=i&&i<=64255||65040<=i&&i<=65049||65072<=i&&i<=65106||65108<=i&&i<=65126||65128<=i&&i<=65131||110592<=i&&i<=110593||127488<=i&&i<=127490||127504<=i&&i<=127546||127552<=i&&i<=127560||127568<=i&&i<=127569||131072<=i&&i<=194367||177984<=i&&i<=196605||196608<=i&&i<=262141?"W":32<=i&&i<=126||162<=i&&i<=163||165<=i&&i<=166||i===172||i===175||10214<=i&&i<=10221||10629<=i&&i<=10630?"Na":i===161||i===164||167<=i&&i<=168||i===170||173<=i&&i<=174||176<=i&&i<=180||182<=i&&i<=186||188<=i&&i<=191||i===198||i===208||215<=i&&i<=216||222<=i&&i<=225||i===230||232<=i&&i<=234||236<=i&&i<=237||i===240||242<=i&&i<=243||247<=i&&i<=250||i===252||i===254||i===257||i===273||i===275||i===283||294<=i&&i<=295||i===299||305<=i&&i<=307||i===312||319<=i&&i<=322||i===324||328<=i&&i<=331||i===333||338<=i&&i<=339||358<=i&&i<=359||i===363||i===462||i===464||i===466||i===468||i===470||i===472||i===474||i===476||i===593||i===609||i===708||i===711||713<=i&&i<=715||i===717||i===720||728<=i&&i<=731||i===733||i===735||768<=i&&i<=879||913<=i&&i<=929||931<=i&&i<=937||945<=i&&i<=961||963<=i&&i<=969||i===1025||1040<=i&&i<=1103||i===1105||i===8208||8211<=i&&i<=8214||8216<=i&&i<=8217||8220<=i&&i<=8221||8224<=i&&i<=8226||8228<=i&&i<=8231||i===8240||8242<=i&&i<=8243||i===8245||i===8251||i===8254||i===8308||i===8319||8321<=i&&i<=8324||i===8364||i===8451||i===8453||i===8457||i===8467||i===8470||8481<=i&&i<=8482||i===8486||i===8491||8531<=i&&i<=8532||8539<=i&&i<=8542||8544<=i&&i<=8555||8560<=i&&i<=8569||i===8585||8592<=i&&i<=8601||8632<=i&&i<=8633||i===8658||i===8660||i===8679||i===8704||8706<=i&&i<=8707||8711<=i&&i<=8712||i===8715||i===8719||i===8721||i===8725||i===8730||8733<=i&&i<=8736||i===8739||i===8741||8743<=i&&i<=8748||i===8750||8756<=i&&i<=8759||8764<=i&&i<=8765||i===8776||i===8780||i===8786||8800<=i&&i<=8801||8804<=i&&i<=8807||8810<=i&&i<=8811||8814<=i&&i<=8815||8834<=i&&i<=8835||8838<=i&&i<=8839||i===8853||i===8857||i===8869||i===8895||i===8978||9312<=i&&i<=9449||9451<=i&&i<=9547||9552<=i&&i<=9587||9600<=i&&i<=9615||9618<=i&&i<=9621||9632<=i&&i<=9633||9635<=i&&i<=9641||9650<=i&&i<=9651||9654<=i&&i<=9655||9660<=i&&i<=9661||9664<=i&&i<=9665||9670<=i&&i<=9672||i===9675||9678<=i&&i<=9681||9698<=i&&i<=9701||i===9711||9733<=i&&i<=9734||i===9737||9742<=i&&i<=9743||9748<=i&&i<=9749||i===9756||i===9758||i===9792||i===9794||9824<=i&&i<=9825||9827<=i&&i<=9829||9831<=i&&i<=9834||9836<=i&&i<=9837||i===9839||9886<=i&&i<=9887||9918<=i&&i<=9919||9924<=i&&i<=9933||9935<=i&&i<=9953||i===9955||9960<=i&&i<=9983||i===10045||i===10071||10102<=i&&i<=10111||11093<=i&&i<=11097||12872<=i&&i<=12879||57344<=i&&i<=63743||65024<=i&&i<=65039||i===65533||127232<=i&&i<=127242||127248<=i&&i<=127277||127280<=i&&i<=127337||127344<=i&&i<=127386||917760<=i&&i<=917999||983040<=i&&i<=1048573||1048576<=i&&i<=1114109?"A":"N"};function Hot(n,t={},e){e||(e=1);const{fontStyle:i=t.fontStyle,fontVariant:r=t.fontVariant,fontWeight:o=t.fontWeight,fontSize:a=t.fontSize,fontFamily:s=t.fontFamily}=n;return(i?i+" ":"")+(r?r+" ":"")+(o?o+" ":"")+a*e+"px "+(s||"sans-serif")}let xp=class hc{constructor(t,e){this._numberCharSize=null,this._fullCharSize=null,this._letterCharSize=null,this._specialCharSizeMap={},this._canvas=null,this._context=null,this._contextSaved=!1,this._notSupportCanvas=!1,this._notSupportVRender=!1,this._userSpec={},this.specialCharSet=`-/: .,@%'"~`,this._option=t,this._userSpec=e??{},this.textSpec=this._initSpec(),Ho(t.specialCharSet)&&(this.specialCharSet=t.specialCharSet),this._standardMethod=Ho(t.getTextBounds)?this.fullMeasure.bind(this):this.measureWithNaiveCanvas.bind(this)}initContext(){if(this._notSupportCanvas)return!1;if(Ti(this._canvas)&&(Ho(this._option.getCanvasForMeasure)&&(this._canvas=this._option.getCanvasForMeasure()),Ti(this._canvas)&&typeof window<"u"&&window.document!==void 0&&globalThis&&Ho(globalThis.document)&&(this._canvas=globalThis.document.createElement("canvas"))),Ti(this._context)&&Ho(this._canvas)){const t=this._canvas.getContext("2d");Ho(t)&&(t.save(),t.font=Hot(this.textSpec),this._contextSaved=!0,this._context=t)}return!Ti(this._context)||(this._notSupportCanvas=!0,!1)}_initSpec(){var t,e,i;const{defaultFontParams:r={}}=this._option,{fontStyle:o=r.fontStyle,fontVariant:a=r.fontVariant,fontWeight:s=(t=r.fontWeight)!==null&&t!==void 0?t:"normal",fontSize:l=(e=r.fontSize)!==null&&e!==void 0?e:12,fontFamily:h=(i=r.fontFamily)!==null&&i!==void 0?i:"sans-serif",align:u,textAlign:d=u??"center",baseline:c,textBaseline:f=c??"middle",ellipsis:g,limit:p}=this._userSpec;let{lineHeight:v=l}=this._userSpec;if(bl(v)&&v[v.length-1]==="%"){const m=Number.parseFloat(v.substring(0,v.length-1))/100;v=l*m}return{fontStyle:o,fontVariant:a,fontFamily:h,fontSize:l,fontWeight:s,textAlign:d,textBaseline:f,ellipsis:g,limit:p,lineHeight:v}}measure(t,e){switch(e){case"vrender":case"canopus":return this.fullMeasure(t);case"canvas":return this.measureWithNaiveCanvas(t);case"simple":return this.quickMeasureWithoutCanvas(t);default:return this.quickMeasure(t)}}fullMeasure(t){if(Ti(t))return{width:0,height:0};if(Ti(this._option.getTextBounds)||!this._notSupportVRender)return this.measureWithNaiveCanvas(t);const{fontFamily:e,fontSize:i,fontWeight:r,textAlign:o,textBaseline:a,ellipsis:s,limit:l,lineHeight:h}=this.textSpec;let u;try{const d=this._option.getTextBounds({text:t,fontFamily:e,fontSize:i,fontWeight:r,textAlign:o,textBaseline:a,ellipsis:!!s,maxLineWidth:l||1/0,lineHeight:h});u={width:d.width(),height:d.height()}}catch{this._notSupportVRender=!0,u=this.measureWithNaiveCanvas(t)}return u}measureWithNaiveCanvas(t){return this._measureReduce(t,this._measureWithNaiveCanvas.bind(this))}_measureWithNaiveCanvas(t){var e;if(!this.initContext())return this._quickMeasureWithoutCanvas(t);const i=this._context.measureText(t),{fontSize:r,lineHeight:o}=this.textSpec;return{width:i.width,height:(e=o)!==null&&e!==void 0?e:r,fontBoundingBoxAscent:i.fontBoundingBoxAscent,fontBoundingBoxDescent:i.fontBoundingBoxDescent}}quickMeasure(t){return this._measureReduce(t,this._quickMeasure.bind(this))}_quickMeasure(t){const e={width:0,height:0};for(let i=0;i<t.length;i++){const r=t[i];let o=this._measureSpecialChar(r);Ti(o)&&hc.NUMBERS_CHAR_SET.includes(r)&&(o=this._measureNumberChar()),Ti(o)&&["F","W"].includes(l7(r))&&(o=this._measureFullSizeChar()),Ti(o)&&(o=this._measureLetterChar()),e.width+=o.width,e.height=Math.max(e.height,o.height),!Ti(o.fontBoundingBoxAscent)&&(e.fontBoundingBoxAscent=o.fontBoundingBoxAscent),!Ti(o.fontBoundingBoxDescent)&&(e.fontBoundingBoxDescent=o.fontBoundingBoxDescent)}return e}quickMeasureWithoutCanvas(t){return this._measureReduce(t,this._quickMeasureWithoutCanvas.bind(this))}_quickMeasureWithoutCanvas(t){var e;const i={width:0,height:0},{fontSize:r,lineHeight:o}=this.textSpec;for(let a=0;a<t.length;a++){const s=t[a],l=["F","W"].includes(l7(s))?1:.53;i.width+=l*r}return i.height=(e=o)!==null&&e!==void 0?e:r,i}_measureReduce(t,e){var i;const{fontSize:r,lineHeight:o}=this.textSpec,a={width:0,height:0};if(Ti(t))return a;if($e(t)){const s=t.filter(Ho).map((l=>l.toString()));return s.length===0?a:s.length===1?e(s[0]):{width:s.reduce(((l,h)=>Math.max(l,e(h).width)),0),height:s.length*(((i=o)!==null&&i!==void 0?i:r)+1)+1}}return e(t.toString())}_measureNumberChar(){if(Ti(this._numberCharSize)){const t=this._standardMethod(hc.NUMBERS_CHAR_SET);this._numberCharSize={width:t.width/hc.NUMBERS_CHAR_SET.length,height:t.height,fontBoundingBoxAscent:t.fontBoundingBoxAscent,fontBoundingBoxDescent:t.fontBoundingBoxDescent}}return this._numberCharSize}_measureFullSizeChar(){return Ti(this._fullCharSize)&&(this._fullCharSize=this._standardMethod(hc.FULL_SIZE_CHAR)),this._fullCharSize}_measureLetterChar(){if(Ti(this._letterCharSize)){const t=this._standardMethod(hc.ALPHABET_CHAR_SET);this._letterCharSize={width:t.width/hc.ALPHABET_CHAR_SET.length,height:t.height,fontBoundingBoxAscent:t.fontBoundingBoxAscent,fontBoundingBoxDescent:t.fontBoundingBoxDescent}}return this._letterCharSize}_measureSpecialChar(t){return Ho(this._specialCharSizeMap[t])?this._specialCharSizeMap[t]:this.specialCharSet.includes(t)?(this._specialCharSizeMap[t]=this._standardMethod(t),this._specialCharSizeMap[t]):null}release(){Ho(this._canvas)&&(this._canvas=null),Ho(this._context)&&(this._contextSaved&&(this._context.restore(),this._contextSaved=!1),this._context=null)}};xp.ALPHABET_CHAR_SET="abcdefghijklmnopqrstuvwxyz",xp.NUMBERS_CHAR_SET="0123456789",xp.FULL_SIZE_CHAR="";function l3(n,t,e){const{x1:i,y1:r,x2:o,y2:a}=t;return e.onlyTranslate()?(n!==t&&n.setValue(t.x1,t.y1,t.x2,t.y2),n.translate(e.e,e.f),t):(n.clear(),n.add(e.a*i+e.c*r+e.e,e.b*i+e.d*r+e.f),n.add(e.a*o+e.c*r+e.e,e.b*o+e.d*r+e.f),n.add(e.a*o+e.c*a+e.e,e.b*o+e.d*a+e.f),n.add(e.a*i+e.c*a+e.e,e.b*i+e.d*a+e.f),t)}let wb=class zot{constructor(t){t?this.setValue(t.x1,t.y1,t.x2,t.y2):this.clear()}clone(){return new zot(this)}clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this}empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE}equals(t){return this.x1===t.x1&&this.y1===t.y1&&this.x2===t.x2&&this.y2===t.y2}setValue(t=0,e=0,i=0,r=0){return this.x1=t,this.y1=e,this.x2=i,this.y2=r,this}set(t=0,e=0,i=0,r=0){return i<t?(this.x2=t,this.x1=i):(this.x1=t,this.x2=i),r<e?(this.y2=e,this.y1=r):(this.y1=e,this.y2=r),this}add(t=0,e=0){return t<this.x1&&(this.x1=t),e<this.y1&&(this.y1=e),t>this.x2&&(this.x2=t),e>this.y2&&(this.y2=e),this}expand(t=0){return $e(t)?(this.y1-=t[0],this.x2+=t[1],this.y2+=t[2],this.x1-=t[3]):(this.x1-=t,this.y1-=t,this.x2+=t,this.y2+=t),this}round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this}translate(t=0,e=0){return this.x1+=t,this.x2+=t,this.y1+=e,this.y2+=e,this}rotate(t=0,e=0,i=0){const r=this.rotatedPoints(t,e,i);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])}scale(t=0,e=0,i=0,r=0){const o=this.scalePoints(t,e,i,r);return this.clear().add(o[0],o[1]).add(o[2],o[3])}union(t){return t.x1<this.x1&&(this.x1=t.x1),t.y1<this.y1&&(this.y1=t.y1),t.x2>this.x2&&(this.x2=t.x2),t.y2>this.y2&&(this.y2=t.y2),this}intersect(t){return t.x1>this.x1&&(this.x1=t.x1),t.y1>this.y1&&(this.y1=t.y1),t.x2<this.x2&&(this.x2=t.x2),t.y2<this.y2&&(this.y2=t.y2),this}encloses(t){return t&&this.x1<=t.x1&&this.x2>=t.x2&&this.y1<=t.y1&&this.y2>=t.y2}alignsWith(t){return t&&(this.x1===t.x1||this.x2===t.x2||this.y1===t.y1||this.y2===t.y2)}intersects(t){return t&&!(this.x2<t.x1||this.x1>t.x2||this.y2<t.y1||this.y1>t.y2)}contains(t=0,e=0){return!(t<this.x1||t>this.x2||e<this.y1||e>this.y2)}containsPoint(t){return!(t.x<this.x1||t.x>this.x2||t.y<this.y1||t.y>this.y2)}width(){return this.empty()?0:this.x2-this.x1}height(){return this.empty()?0:this.y2-this.y1}scaleX(t=0){return this.x1*=t,this.x2*=t,this}scaleY(t=0){return this.y1*=t,this.y2*=t,this}transformWithMatrix(t){return l3(this,this,t),this}copy(t){return this.x1=t.x1,this.y1=t.y1,this.x2=t.x2,this.y2=t.y2,this}rotatedPoints(t,e,i){const{x1:r,y1:o,x2:a,y2:s}=this,l=Math.cos(t),h=Math.sin(t),u=e-e*l+i*h,d=i-e*h-i*l;return[l*r-h*o+u,h*r+l*o+d,l*r-h*s+u,h*r+l*s+d,l*a-h*o+u,h*a+l*o+d,l*a-h*s+u,h*a+l*s+d]}scalePoints(t,e,i,r){const{x1:o,y1:a,x2:s,y2:l}=this;return[t*o+(1-t)*i,e*a+(1-e)*r,t*s+(1-t)*i,e*l+(1-e)*r]}},sr=class extends wb{};class h3 extends wb{constructor(t,e=0){var i;super(t),t&&(this.angle=(i=t.angle)!==null&&i!==void 0?i:e)}intersects(t){return CNt(this,t)}setValue(t=0,e=0,i=0,r=0,o=0){return super.setValue(t,e,i,r),this.angle=o,this}clone(){return new h3(this)}getRotatedCorners(){const t={x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2};return[mh({x:this.x1,y:this.y1},this.angle,t),mh({x:this.x2,y:this.y1},this.angle,t),mh({x:this.x1,y:this.y2},this.angle,t),mh({x:this.x2,y:this.y2},this.angle,t)]}}let Fr=class Ew{constructor(t=1,e=0,i=0,r=1,o=0,a=0){this.a=t,this.b=e,this.c=i,this.d=r,this.e=o,this.f=a}equalToMatrix(t){return!(this.e!==t.e||this.f!==t.f||this.a!==t.a||this.d!==t.d||this.b!==t.b||this.c!==t.c)}equalTo(t,e,i,r,o,a){return!(this.e!==o||this.f!==a||this.a!==t||this.d!==r||this.b!==e||this.c!==i)}setValue(t,e,i,r,o,a){return this.a=t,this.b=e,this.c=i,this.d=r,this.e=o,this.f=a,this}reset(){return this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0,this}getInverse(){const t=this.a,e=this.b,i=this.c,r=this.d,o=this.e,a=this.f,s=new Ew,l=t*r-e*i;return s.a=r/l,s.b=-e/l,s.c=-i/l,s.d=t/l,s.e=(i*a-r*o)/l,s.f=-(t*a-e*o)/l,s}rotate(t){const e=Math.cos(t),i=Math.sin(t),r=this.a*e+this.c*i,o=this.b*e+this.d*i,a=this.a*-i+this.c*e,s=this.b*-i+this.d*e;return this.a=r,this.b=o,this.c=a,this.d=s,this}rotateByCenter(t,e,i){const r=Math.cos(t),o=Math.sin(t),a=(1-r)*e+o*i,s=(1-r)*i-o*e,l=r*this.a-o*this.b,h=o*this.a+r*this.b,u=r*this.c-o*this.d,d=o*this.c+r*this.d,c=r*this.e-o*this.f+a,f=o*this.e+r*this.f+s;return this.a=l,this.b=h,this.c=u,this.d=d,this.e=c,this.f=f,this}scale(t,e){return this.a*=t,this.b*=t,this.c*=e,this.d*=e,this}setScale(t,e){return this.b=this.b/this.a*t,this.c=this.c/this.d*e,this.a=t,this.d=e,this}transform(t,e,i,r,o,a){return this.multiply(t,e,i,r,o,a),this}translate(t,e){return this.e+=this.a*t+this.c*e,this.f+=this.b*t+this.d*e,this}transpose(){const{a:t,b:e,c:i,d:r,e:o,f:a}=this;return this.a=e,this.b=t,this.c=r,this.d=i,this.e=a,this.f=o,this}multiply(t,e,i,r,o,a){const s=this.a,l=this.b,h=this.c,u=this.d,d=s*t+h*e,c=l*t+u*e,f=s*i+h*r,g=l*i+u*r,p=s*o+h*a+this.e,v=l*o+u*a+this.f;return this.a=d,this.b=c,this.c=f,this.d=g,this.e=p,this.f=v,this}interpolate(t,e){const i=new Ew;return i.a=this.a+(t.a-this.a)*e,i.b=this.b+(t.b-this.b)*e,i.c=this.c+(t.c-this.c)*e,i.d=this.d+(t.d-this.d)*e,i.e=this.e+(t.e-this.e)*e,i.f=this.f+(t.f-this.f)*e,i}transformPoint(t,e){const{a:i,b:r,c:o,d:a,e:s,f:l}=this,h=i*a-r*o,u=a/h,d=-r/h,c=-o/h,f=i/h,g=(o*l-a*s)/h,p=-(i*l-r*s)/h,{x:v,y:m}=t;e.x=v*u+m*c+g,e.y=v*d+m*f+p}onlyTranslate(t=1){return this.a===t&&this.b===0&&this.c===0&&this.d===t}clone(){return new Ew(this.a,this.b,this.c,this.d,this.e,this.f)}toTransformAttrs(){const t=this.a,e=this.b,i=this.c,r=this.d,o=t*r-e*i,a={x:this.e,y:this.f,rotateDeg:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(t!==0||e!==0){const s=Math.sqrt(t*t+e*e);a.rotateDeg=e>0?Math.acos(t/s):-Math.acos(t/s),a.scaleX=s,a.scaleY=o/s,a.skewX=(t*i+e*r)/o,a.skewY=0}else if(i!==0||r!==0){const s=Math.sqrt(i*i+r*r);a.rotateDeg=Math.PI/2-(r>0?Math.acos(-i/s):-Math.acos(i/s)),a.scaleX=o/s,a.scaleY=s,a.skewX=0,a.skewY=(t*i+e*r)/o}return a.rotateDeg=vNt(a.rotateDeg),a}};function wNt(n,t,e,i,r,o,a,s){const l=t.a,h=t.b,u=t.c,d=t.d,c=t.e,f=t.f,g=wn(a),p=Hi(a);let v,m;s?(v=s[0],m=s[1]):(v=e,m=i);const y=v-e,b=m-i,_=l*g+u*p,w=h*g+d*p,C=u*g-l*p,x=d*g-h*p;n.a=r*_,n.b=r*w,n.c=o*C,n.d=o*x,n.e=c+l*v+u*m-_*y-C*b,n.f=f+h*v+d*m-w*y-x*b}class xNt{constructor(){this.CLEAN_THRESHOLD=1e3,this.L_TIME=1e3,this.R_COUNT=1,this.R_TIMESTAMP_MAX_SIZE=20}clearCache(t,e){const{CLEAN_THRESHOLD:i=this.CLEAN_THRESHOLD,L_TIME:r=this.L_TIME,R_COUNT:o=this.R_COUNT}=e;if(t.size<i)return 0;let a=0;const s=h=>{a++,t.delete(h)},l=Date.now();return t.forEach(((h,u)=>{if(h.timestamp.length<o)return s(u);let d=0;for(;l-h.timestamp[h.timestamp.length-1-d]<r&&(d++,!(d>=o)););if(d<o)return s(u);for(;l-h.timestamp[0]>r;)h.timestamp.shift()})),a}addLimitedTimestamp(t,e,i){const{R_TIMESTAMP_MAX_SIZE:r=this.R_TIMESTAMP_MAX_SIZE}=i;t.timestamp.length>r&&t.timestamp.shift(),t.timestamp.push(e)}clearTimeStamp(t,e){const{L_TIME:i=this.L_TIME}=e,r=Date.now();t.forEach((o=>{for(;r-o.timestamp[0]>i;)o.timestamp.shift()}))}clearItemTimestamp(t,e){const{L_TIME:i=this.L_TIME}=e,r=Date.now();for(;r-t.timestamp[0]>i;)t.timestamp.shift()}}function h7(n,t,e){t/=100,e/=100;const i=(1-Math.abs(2*e-1))*t,r=i*(1-Math.abs(n/60%2-1)),o=e-i/2;let a=0,s=0,l=0;return 0<=n&&n<60?(a=i,s=r,l=0):60<=n&&n<120?(a=r,s=i,l=0):120<=n&&n<180?(a=0,s=i,l=r):180<=n&&n<240?(a=0,s=r,l=i):240<=n&&n<300?(a=r,s=0,l=i):300<=n&&n<360&&(a=i,s=0,l=r),a=Math.round(255*(a+o)),s=Math.round(255*(s+o)),l=Math.round(255*(l+o)),{r:a,g:s,b:l}}function Fot(n,t,e){n/=255,t/=255,e/=255;const i=Math.min(n,t,e),r=Math.max(n,t,e),o=r-i;let a=0,s=0,l=0;return a=o===0?0:r===n?(t-e)/o%6:r===t?(e-n)/o+2:(n-t)/o+4,a=Math.round(60*a),a<0&&(a+=360),l=(r+i)/2,s=o===0?0:o/(1-Math.abs(2*l-1)),s=+(100*s).toFixed(1),l=+(100*l).toFixed(1),{h:a,s,l}}const SNt=/^#([0-9a-f]{3,8})$/,u7={transparent:4294967040},XB={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function y1(n){return((n=Math.max(0,Math.min(255,Math.round(n)||0)))<16?"0":"")+n.toString(16)}function Not(n){return Kn(n)?new Fa(n>>16,n>>8&255,255&n,1):$e(n)?new Fa(n[0],n[1],n[2]):new Fa(255,255,255)}function ANt(n){return Kn(n)?new Fa(n>>>24,n>>>16&255,n>>>8&255,255&n):$e(n)?new Fa(n[0],n[1],n[2],n[3]):new Fa(255,255,255,1)}function qB(n){return n<.04045?.0773993808*n:Math.pow(.9478672986*n+.0521327014,2.4)}function KB(n){return n<.0031308?12.92*n:1.055*Math.pow(n,.41666)-.055}const d7=(n,t)=>{const e=SNt.exec(n);if(t||e){const i=parseInt(e[1],16),r=e[1].length;return r===3?new Fa((i>>8&15)+((i>>8&15)<<4),(i>>4&15)+((i>>4&15)<<4),(15&i)+((15&i)<<4),1):r===6?Not(i):r===8?new Fa(i>>24&255,i>>16&255,i>>8&255,(255&i)/255):null}};let c7=class uc{static Brighter(t,e=1){return e===1?t:new uc(t).brighter(e).toRGBA()}static SetOpacity(t,e=1){return e===1?t:new uc(t).setOpacity(e).toRGBA()}static getColorBrightness(t,e="hsl"){const i=t instanceof uc?t:new uc(t);switch(e){case"hsv":default:return i.getHSVBrightness();case"hsl":return i.getHSLBrightness();case"lum":return i.getLuminance();case"lum2":return i.getLuminance2();case"lum3":return i.getLuminance3();case"wcag":return i.getLuminanceWCAG()}}static parseColorString(t){if(Ho(u7[t]))return ANt(u7[t]);if(Ho(XB[t]))return Not(XB[t]);const e=`${t}`.trim().toLowerCase(),i=d7(e);if(i!==void 0)return i;if(/^(rgb|RGB|rgba|RGBA)/.test(e)){const r=e.replace(/(?:\(|\)|rgba|RGBA|rgb|RGB)*/g,"").split(",");return new Fa(parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10),parseFloat(r[3]))}if(/^(hsl|HSL|hsla|HSLA)/.test(e)){const r=e.replace(/(?:\(|\)|hsla|HSLA|hsl|HSL)*/g,"").split(","),o=h7(parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10));return new Fa(o.r,o.g,o.b,parseFloat(r[3]))}}constructor(t){const e=uc.parseColorString(t);e?this.color=e:this.color=new Fa(255,255,255)}toRGBA(){return this.color.formatRgb()}toString(){return this.color.formatRgb()}toHex(){return this.color.formatHex()}toHsl(){return this.color.formatHsl()}brighter(t){const{r:e,g:i,b:r}=this.color;return this.color.r=Math.max(0,Math.min(255,Math.floor(e*t))),this.color.g=Math.max(0,Math.min(255,Math.floor(i*t))),this.color.b=Math.max(0,Math.min(255,Math.floor(r*t))),this}add(t){const{r:e,g:i,b:r}=this.color;return this.color.r+=Math.min(255,e+t.color.r),this.color.g+=Math.min(255,i+t.color.g),this.color.b+=Math.min(255,r+t.color.b),this}sub(t){return this.color.r=Math.max(0,this.color.r-t.color.r),this.color.g=Math.max(0,this.color.g-t.color.g),this.color.b=Math.max(0,this.color.b-t.color.b),this}multiply(t){const{r:e,g:i,b:r}=this.color;return this.color.r=Math.max(0,Math.min(255,Math.floor(e*t.color.r))),this.color.g=Math.max(0,Math.min(255,Math.floor(i*t.color.g))),this.color.b=Math.max(0,Math.min(255,Math.floor(r*t.color.b))),this}getHSVBrightness(){return Math.max(this.color.r,this.color.g,this.color.b)/255}getHSLBrightness(){return .5*(Math.max(this.color.r,this.color.g,this.color.b)/255+Math.min(this.color.r,this.color.g,this.color.b)/255)}setHsl(t,e,i){const r=this.color.opacity,o=Fot(this.color.r,this.color.g,this.color.b),a=h7(Ti(t)?o.h:gNt(t,0,360),Ti(e)?o.s:e>=0&&e<=1?100*e:e,Ti(i)?o.l:i<=1&&i>=0?100*i:i);return this.color=new Fa(a.r,a.g,a.b,r),this}setRGB(t,e,i){return!Ti(t)&&(this.color.r=t),!Ti(e)&&(this.color.g=e),!Ti(i)&&(this.color.b=i),this}setHex(t){const e=`${t}`.trim().toLowerCase(),i=d7(e,!0);return i??this}setColorName(t){const e=XB[t.toLowerCase()];return e!==void 0&&this.setHex(e),this}setScalar(t){return this.color.r=t,this.color.g=t,this.color.b=t,this}setOpacity(t=1){return this.color.opacity=t,this}getLuminance(){return(.2126*this.color.r+.7152*this.color.g+.0722*this.color.b)/255}getLuminance2(){return(.2627*this.color.r+.678*this.color.g+.0593*this.color.b)/255}getLuminance3(){return(.299*this.color.r+.587*this.color.g+.114*this.color.b)/255}getLuminanceWCAG(){const t=this.color.r/255,e=this.color.g/255,i=this.color.b/255;let r,o,a;return r=t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4),o=e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4),a=i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4),.2126*r+.7152*o+.0722*a}clone(){return new uc(this.color.toString())}copyGammaToLinear(t,e=2){return this.color.r=Math.pow(t.color.r,e),this.color.g=Math.pow(t.color.g,e),this.color.b=Math.pow(t.color.b,e),this}copyLinearToGamma(t,e=2){const i=e>0?1/e:1;return this.color.r=Math.pow(t.color.r,i),this.color.g=Math.pow(t.color.g,i),this.color.b=Math.pow(t.color.b,i),this}convertGammaToLinear(t){return this.copyGammaToLinear(this,t),this}convertLinearToGamma(t){return this.copyLinearToGamma(this,t),this}copySRGBToLinear(t){return this.color.r=qB(t.color.r),this.color.g=qB(t.color.g),this.color.b=qB(t.color.b),this}copyLinearToSRGB(t){return this.color.r=KB(t.color.r),this.color.g=KB(t.color.g),this.color.b=KB(t.color.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}},Fa=class{constructor(t,e,i,r){this.r=isNaN(+t)?255:Math.max(0,Math.min(255,+t)),this.g=isNaN(+e)?255:Math.max(0,Math.min(255,+e)),this.b=isNaN(+i)?255:Math.max(0,Math.min(255,+i)),Ho(r)?this.opacity=isNaN(+r)?1:Math.max(0,Math.min(1,+r)):this.opacity=1}formatHex(){return`#${y1(this.r)+y1(this.g)+y1(this.b)+(this.opacity===1?"":y1(255*this.opacity))}`}formatRgb(){const t=this.opacity;return`${t===1?"rgb(":"rgba("}${this.r},${this.g},${this.b}${t===1?")":`,${t})`}`}formatHsl(){const t=this.opacity,{h:e,s:i,l:r}=Fot(this.r,this.g,this.b);return`${t===1?"hsl(":"hsla("}${e},${i}%,${r}%${t===1?")":`,${t})`}`}toString(){return this.formatHex()}};const TNt=_r-1e-8;class u3{constructor(t){this.init(t)}init(t){this.bounds=t}arc(t,e,i,r,o,a){if(Math.abs(o-r)>TNt)return this.bounds.add(t-i,e-i),void this.bounds.add(t+i,e+i);let s,l,h,u,d=1/0,c=-1/0,f=1/0,g=-1/0;function p(v){h=i*Math.cos(v),u=i*Math.sin(v),h<d&&(d=h),h>c&&(c=h),u<f&&(f=u),u>g&&(g=u)}if(p(r),p(o),o!==r)if((r%=_r)<0&&(r+=_r),(o%=_r)<0&&(o+=_r),o<r&&(a=!a,s=r,r=o,o=s),a)for(o-=_r,s=r-r%Ia,l=0;l<4&&s>o;++l,s-=Ia)p(s);else for(s=r-r%Ia+Ia,l=0;l<4&&s<o;++l,s+=Ia)p(s);this.bounds.add(t+d,e+f),this.bounds.add(t+c,e+g)}arcTo(t,e,i,r,o){this.bounds.add(t,e)}bezierCurveTo(t,e,i,r,o,a){this.bounds.add(t,e),this.bounds.add(i,r),this.bounds.add(o,a)}closePath(){}ellipse(){throw new Error("ellipse")}lineTo(t,e){this.bounds.add(t,e)}moveTo(t,e){this.bounds.add(t,e)}quadraticCurveTo(t,e,i,r){this.bounds.add(t,e),this.bounds.add(i,r)}rect(t,e,i,r){this.bounds.add(t,e),this.bounds.add(t+i,e+r)}clear(){this.bounds.clear()}release(...t){}}class MNt{constructor(){this._curves=[],this.bounds=new sr}get curves(){return this._curves}getCurveLengths(){return this._curves.map((t=>t.getLength()))}getPointAt(t){return{x:0,y:0}}getLength(){return 0}getBounds(){return this.bounds}}const RNt=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/gi,PNt={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7},xe={A:0,AT:1,C:2,Z:3,E:4,L:5,M:6,Q:7,R:8};let ZB,f7,b1,g7,JB,_1;function BNt(n){if(!n)return[];const t=n.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);if(t===null)return[];let e,i;const r=[];for(let o=0,a=t.length;o<a;o++)if(ZB=t[o],f7=ZB.slice(1),b1=ZB[0],e=[b1],i=f7.match(RNt),i!==null){for(let s=0,l=i.length;s<l;s++)g7=i[s],JB=parseFloat(g7),Number.isNaN(JB)||e.push(JB);if(_1=PNt[b1],e.length-1>_1){let s,l=b1;for(let h=1,u=e.length;h<u;h+=_1){s=[l];for(let d=h,c=h+_1;d<c;d++)s.push(e[d]);r.push(s),l==="m"?l="l":l==="M"&&(l="L")}}else r.push(e)}else r.push(e);return r}var si;(function(n){n[n.NONE=0]="NONE",n[n.UPDATE_BOUNDS=1]="UPDATE_BOUNDS",n[n.UPDATE_SHAPE=2]="UPDATE_SHAPE",n[n.CLEAR_SHAPE=253]="CLEAR_SHAPE",n[n.UPDATE_SHAPE_AND_BOUNDS=3]="UPDATE_SHAPE_AND_BOUNDS",n[n.INIT=179]="INIT",n[n.CLEAR_BOUNDS=254]="CLEAR_BOUNDS",n[n.UPDATE_GLOBAL_MATRIX=32]="UPDATE_GLOBAL_MATRIX",n[n.CLEAR_GLOBAL_MATRIX=223]="CLEAR_GLOBAL_MATRIX",n[n.UPDATE_LOCAL_MATRIX=16]="UPDATE_LOCAL_MATRIX",n[n.CLEAR_LOCAL_MATRIX=239]="CLEAR_LOCAL_MATRIX",n[n.UPDATE_GLOBAL_LOCAL_MATRIX=48]="UPDATE_GLOBAL_LOCAL_MATRIX",n[n.UPDATE_LAYOUT=128]="UPDATE_LAYOUT",n[n.CLEAR_LAYOUT=127]="CLEAR_LAYOUT"})(si||(si={}));var xb;(function(n){n[n.GLOBAL=1]="GLOBAL",n[n.LOCAL=16]="LOCAL",n[n.GLOBAL_ACCURATE=3]="GLOBAL_ACCURATE",n[n.LOCAL_ACCURATE=48]="LOCAL_ACCURATE"})(xb||(xb={}));var Yr;(function(n){n[n.INIT=0]="INIT",n[n.DEFAULT=1]="DEFAULT",n[n.STATE=2]="STATE",n[n.ANIMATE_BIND=10]="ANIMATE_BIND",n[n.ANIMATE_PLAY=11]="ANIMATE_PLAY",n[n.ANIMATE_START=12]="ANIMATE_START",n[n.ANIMATE_UPDATE=13]="ANIMATE_UPDATE",n[n.ANIMATE_END=14]="ANIMATE_END",n[n.TRANSLATE=20]="TRANSLATE",n[n.TRANSLATE_TO=21]="TRANSLATE_TO",n[n.SCALE=22]="SCALE",n[n.SCALE_TO=23]="SCALE_TO",n[n.ROTATE=24]="ROTATE",n[n.ROTATE_TO=25]="ROTATE_TO"})(Yr||(Yr={}));var ti;(function(n){n[n.ROW=1]="ROW",n[n.COLUMN=2]="COLUMN"})(ti||(ti={}));var Sb;(function(n){n[n.CubicBezierCurve=0]="CubicBezierCurve",n[n.QuadraticBezierCurve=1]="QuadraticBezierCurve",n[n.ArcCurve=2]="ArcCurve",n[n.LineCurve=3]="LineCurve",n[n.EllipseCurve=4]="EllipseCurve",n[n.MoveCurve=5]="MoveCurve"})(Sb||(Sb={}));var Oe;(function(n){n[n.beforeFillStroke=0]="beforeFillStroke",n[n.afterFillStroke=1]="afterFillStroke"})(Oe||(Oe={}));function kNt(n,t,e,i,r,o,a,s,l){const h=ap(a),u=Math.sin(h),d=Math.cos(h),c=d*(s-n)*.5+u*(l-t)*.5,f=d*(l-t)*.5-u*(s-n)*.5;let g=c*c/((e=Math.abs(e))*e)+f*f/((i=Math.abs(i))*i);g>1&&(g=Math.sqrt(g),e*=g,i*=g);const p=d/e,v=u/e,m=-u/i,y=d/i,b=p*s+v*l,_=m*s+y*l,w=p*n+v*t,C=m*n+y*t;let x=1/((w-b)*(w-b)+(C-_)*(C-_))-.25;x<0&&(x=0);let S=Math.sqrt(x);o===r&&(S=-S);const A=.5*(b+w)-S*(C-_),T=.5*(_+C)+S*(w-b),M=Math.atan2(_-T,b-A);let R=Math.atan2(C-T,w-A)-M;R<0&&o===1?R+=_r:R>0&&o===0&&(R-=_r);const L=Math.ceil(Math.abs(R/(Ia+.001))),B=[];for(let P=0;P<L;++P){const k=M+P*R/L,E=M+(P+1)*R/L;B[P]=[A,T,k,E,e,i,u,d]}return B}function LNt(n){const t=n[0],e=n[1],i=n[2],r=n[3],o=n[4],a=n[5],s=n[6],l=n[7],h=l*o,u=-s*a,d=s*o,c=l*a,f=Math.cos(i),g=Math.sin(i),p=Math.cos(r),v=Math.sin(r),m=.5*(r-i),y=Math.sin(.5*m),b=8/3*y*y/Math.sin(m),_=t+f-b*g,w=e+g+b*f,C=t+p,x=e+v,S=C+b*v,A=x-b*p;return[h*_+u*w,d*_+c*w,h*S+u*A,d*S+c*A,h*C+u*x,d*C+c*x]}function p7(n,t,e,i){const r=kNt(i[5],i[6],i[0],i[1],i[3],i[4],i[2],t,e);for(let o=0;o<r.length;++o){const a=LNt(r[o]);n.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5])}}const ENt=(n,t,e,i,r,o,a,s=!1)=>{const l=2*Math.PI,h=(t%l+l)%l;let u,d=(e%l+l)%l;s?(d>=h&&(d-=l),u=d-h):(d<=h&&(d+=l),u=d-h);const c=Math.ceil(Math.abs(u)/(.5*Math.PI)),f=u/c;for(let g=0;g<c;g++){const p=h+f*g,v=h+f*(g+1),m=4/3*Math.tan(Math.abs(f)/4),y=Math.cos(p),b=Math.sin(p),_=Math.cos(v),w=Math.sin(v),C=y*o+i,x=b*a+r,S=_*o+i,A=w*a+r,T=s?-1:1,M=o*m*T,R=a*m*T;n.push(C-M*b,x+R*y,S+M*w,A-R*_,S,A)}},DNt=[(n,t,e,i,r,o,a)=>t.arc(n[1]*r+e,n[2]*o+i,n[3]*(r+o)/2,n[4],n[5],n[6],a),(n,t,e,i,r,o,a)=>t.arcTo(n[1]*r+e,n[2]*o+i,n[3]*r+e,n[4]*o+i,n[5]*(r+o)/2,a),(n,t,e,i,r,o,a)=>t.bezierCurveTo(n[1]*r+e,n[2]*o+i,n[3]*r+e,n[4]*o+i,n[5]*r+e,n[6]*o+i,a),(n,t,e,i)=>t.closePath(),(n,t,e,i,r,o)=>t.ellipse(n[1]*r+e,n[2]*o+i,n[3]*r,n[4]*o,n[5],n[6],n[7],n[8]),(n,t,e,i,r,o,a)=>t.lineTo(n[1]*r+e,n[2]*o+i,a),(n,t,e,i,r,o,a)=>t.moveTo(n[1]*r+e,n[2]*o+i,a),(n,t,e,i,r,o,a)=>t.quadraticCurveTo(n[1]*r+e,n[2]*o+i,n[3]*r+e,n[4]*o+i,a),(n,t,e,i,r,o,a)=>t.rect(n[1]*r+e,n[2]*o+i,n[3]*r,n[4]*o,a)];function Vh(n,t,e=0,i=0,r=1,o=1,a){for(let s=0;s<n.length;s++){const l=n[s];DNt[l[0]](l,t,e,i,r,o,a)}}class d3{getLength(t){return t!=null?this.calcProjLength(t):(Number.isFinite(this.length)||(this.length=this.calcLength()),this.length)}}function Wot(n,t){let e=0;const i=n.length;for(let r=0;r<i;r++){const o=n[r],a=t[r],s=n[(r+1)%i],l=t[(r+1)%i];e+=fs.distanceNN(o,a,s,l)}return e/2}function INt(n,t,e,i,r){return Wot([n.x,t.x,e.x,i.x],[n.y,t.y,e.y,i.y])}function v7(n,t,e,i,r){const o=1-r;return o*o*o*n+3*t*r*o*o+3*e*r*r*o+i*r*r*r}function Vot(n,t,e,i,r){const o=v7(n.x,t.x,e.x,i.x,r),a=v7(n.y,t.y,e.y,i.y,r);return new ci(o,a)}function m7(n,t,e,i){const r=1-i;return r*r*n+2*r*i*t+i*i*e}function Got(n,t,e,i){const r=m7(n.x,t.x,e.x,i),o=m7(n.y,t.y,e.y,i);return new ci(r,o)}function ONt(n,t,e,i){return Wot([n.x,t.x,e.x],[n.y,t.y,e.y])}function Cv(n,t){const{p0:e,p1:i,p2:r,p3:o}=n,a=Vot(e,i,r,o,t),s=fs.pointAtPP(e,i,t),l=fs.pointAtPP(i,r,t),h=fs.pointAtPP(r,o,t),u=fs.pointAtPP(s,l,t),d=fs.pointAtPP(l,h,t);return[new yS(e,s,u,a),new yS(a,d,h,o)]}class yS extends d3{constructor(t,e,i,r){super(),this.type=Sb.CubicBezierCurve,this.p0=t,this.p1=e,this.p2=i,this.p3=r}_validPoint(){return Number.isFinite(this.p0.x+this.p0.y+this.p1.x+this.p1.y+this.p2.x+this.p2.y+this.p3.x+this.p3.y)}getPointAt(t){if(this.defined!==!1)return Vot(this.p0,this.p1,this.p2,this.p3,t);throw new Error("definedfalsegetPointAt")}calcLength(){return this._validPoint()?INt(this.p0,this.p1,this.p2,this.p3):60}calcProjLength(t){return t===ti.ROW?Ke(this.p0.x-this.p3.x):t===ti.COLUMN?Ke(this.p0.y-this.p3.y):0}getAngleAt(t){const e=Th(t-.01,0),i=xr(t+.01,1),r=this.getPointAt(e),o=this.getPointAt(i);return je(o.y-r.y,o.x-r.x)}draw(t,e,i,r,o,a){if(t.moveTo(this.p0.x*r+e,this.p0.y*o+i),a>=1)t.bezierCurveTo(this.p1.x*r+e,this.p1.y*o+i,this.p2.x*r+e,this.p2.y*o+i,this.p3.x*r+e,this.p3.y*o+i);else if(a>0){const[s]=Cv(this,a);t.bezierCurveTo(s.p1.x*r+e,s.p1.y*o+i,s.p2.x*r+e,s.p2.y*o+i,s.p3.x*r+e,s.p3.y*o+i)}}includeX(t){const e=xr(this.p0.x,this.p1.x,this.p2.x,this.p3.x),i=Th(this.p0.x,this.p1.x,this.p2.x,this.p3.x);return t>=e&&t<=i}getYAt(t){const e=xr(this.p0.x,this.p1.x,this.p2.x,this.p3.x),i=(t-e)/(Th(this.p0.x,this.p1.x,this.p2.x,this.p3.x)-e);return this.getPointAt(i).y}}function y7(n,t){const{p0:e,p1:i}=n,r=fs.pointAtPP(e,i,t);return[new bS(e,r),new bS(r,i)]}class bS extends d3{constructor(t,e){super(),this.type=Sb.LineCurve,this.p0=t,this.p1=e}getPointAt(t){if(this.defined!==!1)return fs.pointAtPP(this.p0,this.p1,t);throw new Error("definedfalsegetPointAt")}getAngleAt(t){return this.angle==null&&(this.angle=je(this.p1.y-this.p0.y,this.p1.x-this.p0.x)),this.angle}_validPoint(){return Number.isFinite(this.p0.x+this.p0.y+this.p1.x+this.p1.y)}calcLength(){return this._validPoint()?fs.distancePP(this.p0,this.p1):60}calcProjLength(t){return t===ti.ROW?Ke(this.p0.x-this.p1.x):t===ti.COLUMN?Ke(this.p0.y-this.p1.y):0}draw(t,e,i,r,o,a){if(t.moveTo(this.p0.x*r+e,this.p0.y*o+i),a>=1)t.lineTo(this.p1.x*r+e,this.p1.y*o+i);else if(a>0){const s=this.getPointAt(a);t.lineTo(s.x*r+e,s.y*o+i)}}includeX(t){return t>=this.p0.x&&t<=this.p1.x||t>=this.p1.x&&t<=this.p0.x}getYAt(t){if(this.includeX(t)){let e=this.p0,i=this.p1;this.p0.x>this.p1.x&&(e=this.p1,i=this.p0);const r=(t-e.x)/(i.x-e.x);return e.y+r*(i.y-e.y)}return 1/0}}class WM{get endX(){return this._lastX}get endY(){return this._lastY}constructor(t,e){this.init(t,e)}init(t,e){this._lastX=this._lastY=this._startX=this._startY=0,this.curveType=t,this.direction=e,this.curves=[]}bezierCurveTo(t,e,i,r,o,a,s,l){const h=new yS(new ci(this._lastX,this._lastY),new ci(t,e),new ci(i,r),new ci(o,a));h.originP1=this._lastOriginP,h.originP2=l,h.defined=s,this.curves.push(h),this._lastX=o,this._lastY=a,this._lastOriginP=l}closePath(){if(this.curves.length<2)return;const t=this.curves[this.curves.length-1];this.lineTo(this._startX,this._startY,t.defined,this._startOriginP)}ellipse(){throw new Error("SegContextellipse")}lineTo(t,e,i,r){const o=this.addLinearCurve(t,e,i,this._lastOriginP,r);this.curves.push(o),this._lastX=t,this._lastY=e,this._lastOriginP=r}moveTo(t,e,i){return this._lastX=this._startX=t,this._lastY=this._startY=e,this._lastOriginP=i,this._startOriginP=i,this}quadraticCurveTo(t,e,i,r){throw new Error("SegContextquadraticCurveTo")}clear(){this.curves=[],this.length=NaN}tryUpdateLength(t){return this.getLength(t)}addLinearCurve(t,e,i,r,o){const a=new bS(new ci(this._lastX,this._lastY),new ci(t,e));return a.originP1=r,a.originP2=o,a.defined=i,a}getPointAt(t){throw new Error("")}getCurveLengths(){return[]}getLength(t){var e,i;if(t===ti.COLUMN){if(!this.curves.length)return 0;const r=this.curves[0],o=this.curves[this.curves.length-1],a=(e=o.p3)!==null&&e!==void 0?e:o.p1;return Ke(r.p0.y-a.y)}if(t===ti.ROW){if(!this.curves.length)return 0;const r=this.curves[0],o=this.curves[this.curves.length-1],a=(i=o.p3)!==null&&i!==void 0?i:o.p1;return Ke(r.p0.x-a.x)}return Number.isFinite(this.length)||(this.length=this.curves.reduce(((r,o)=>r+o.getLength()),0)),this.length}}class HNt extends WM{bezierCurveTo(t,e,i,r,o,a,s,l){return super.bezierCurveTo(e,t,r,i,a,o,s,l)}lineTo(t,e,i,r){return super.lineTo(e,t,i,r)}moveTo(t,e,i){return super.moveTo(e,t,i)}clear(){return super.clear()}}function rg(n,t,e=1){let i=!1;for(let r=0,o=t.length;r<=o;r++)r>=o===i&&((i=!i)?n.lineStart():n.lineEnd()),i&&n.point(t[r])}function em(n,t,e){const i=t??(Ke(e[e.length-1].x-e[0].x)>Ke(e[e.length-1].y-e[0].y)?ti.ROW:ti.COLUMN);return n==="monotoneY"?new HNt(n,i):new WM(n,i)}class $ot{constructor(t,e){this.context=t,e&&(this.startPoint=e)}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0,this.startPoint&&this.point(this.startPoint)}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this.context.closePath(),this._line=1-this._line}point(t){const e=t.x,i=t.y;switch(this._point){case 0:this._point=1,this._line?this.context.lineTo(e,i,this._lastDefined!==!1&&t.defined!==!1,t):this.context.moveTo(e,i,t);break;case 1:this._point=2;default:this.context.lineTo(e,i,this._lastDefined!==!1&&t.defined!==!1,t)}this._lastDefined=t.defined}tryUpdateLength(){return this.context.tryUpdateLength()}}function B_(n,t={}){const{direction:e,startPoint:i}=t;if(n.length<2-+!!i)return null;const r=em("linear",e,n);return zNt(new $ot(r,i),n),r}function zNt(n,t){return rg(n,t,1)}function b7(n,t,e,i,r){n.context.bezierCurveTo((2*n._x0+n._x1)/3,(2*n._y0+n._y1)/3,(n._x0+2*n._x1)/3,(n._y0+2*n._y1)/3,(n._x0+4*n._x1+t)/6,(n._y0+4*n._y1+e)/6,i,n.lastPoint1)}class FNt{constructor(t,e){this.context=t,this.startPoint=e}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0,this.startPoint&&this.point(this.startPoint)}lineEnd(){this._point===2&&b7(this,6*this._x1-(this._x0+4*this._x1),6*this._y1-(this._y0+4*this._y1),this._lastDefined1!==!1&&this._lastDefined2!==!1,this.lastPoint1),(this._line||this._line!==0&&this._point===1)&&this.context.closePath(),this._line=1-this._line}point(t){const e=t.x,i=t.y;switch(this._point){case 0:this._point=1,this._line?this.context.lineTo(e,i,this._lastDefined1!==!1&&this._lastDefined2!==!1,t):this.context.moveTo(e,i,t);break;case 1:this._point=2;break;default:b7(this,e,i,this._lastDefined1!==!1&&this._lastDefined2!==!1)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=i,this._lastDefined1=this._lastDefined2,this._lastDefined2=t.defined,this.lastPoint0=this.lastPoint1,this.lastPoint1=t}tryUpdateLength(){return this.context.tryUpdateLength()}}function NNt(n,t){return rg(n,t,2)}function WNt(n,t={}){const{direction:e,startPoint:i}=t;if(n.length<2-+!!i)return null;if(n.length<3-+!!i)return B_(n,t);const r=em("basis",e,n);return NNt(new FNt(r,i),n),r}function _7(n){return n<0?-1:1}function C7(n,t,e){const i=n._x1-n._x0,r=t-n._x1,o=(n._y1-n._y0)/(i||Number(r<0&&-0)),a=(e-n._y1)/(r||Number(i<0&&-0)),s=(o*r+a*i)/(i+r);return(_7(o)+_7(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function w7(n,t){const e=n._x1-n._x0;return e?(3*(n._y1-n._y0)/e-t)/2:t}function QB(n,t,e,i,r){const o=n._x0,a=n._y0,s=n._x1,l=n._y1,h=(s-o)/3;n.context.bezierCurveTo(o+h,a+h*t,s-h,l-h*e,s,l,i,n.lastPoint1)}class jot{constructor(t,e){this.context=t,this.startPoint=e}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0,this.startPoint&&this.point(this.startPoint)}lineEnd(){switch(this._point){case 2:this.context.lineTo(this._x1,this._y1,this._lastDefined1!==!1&&this._lastDefined2!==!1,this.lastPoint1);break;case 3:QB(this,this._t0,w7(this,this._t0),this._lastDefined1!==!1&&this._lastDefined2!==!1,this.lastPoint1)}(this._line||this._line!==0&&this._point===1)&&this.context.closePath(),this._line=1-this._line}point(t){let e=NaN;const i=t.x,r=t.y;switch(this._point){case 0:this._point=1,this._line?this.context.lineTo(i,r,this._lastDefined1!==!1&&this._lastDefined2!==!1,t):this.context.moveTo(i,r,t);break;case 1:this._point=2;break;case 2:this._point=3,QB(this,w7(this,e=C7(this,i,r)),e,this._lastDefined1!==!1&&this._lastDefined2!==!1);break;default:QB(this,this._t0,e=C7(this,i,r),this._lastDefined1!==!1&&this._lastDefined2!==!1)}this._x0=this._x1,this._x1=i,this._y0=this._y1,this._y1=r,this._t0=e,this._lastDefined1=this._lastDefined2,this._lastDefined2=t.defined!==!1,this.lastPoint0=this.lastPoint1,this.lastPoint1=t}tryUpdateLength(){return this.context.tryUpdateLength()}}class VNt extends jot{constructor(t,e){super(t,e)}point(t){return super.point({y:t.x,x:t.y,defined:t.defined})}}function GNt(n,t){return rg(n,t,2)}function $Nt(n,t={}){const{direction:e,startPoint:i}=t;if(n.length<2-+!!i)return null;if(n.length<3-+!!i)return B_(n,t);const r=em("monotoneX",e,n);return GNt(new jot(r,i),n),r}function jNt(n,t){return rg(n,t,2)}function UNt(n,t={}){const{direction:e,startPoint:i}=t;if(n.length<2-+!!i)return null;if(n.length<3-+!!i)return B_(n,t);const r=em("monotoneY",e,n);return jNt(new VNt(r,i),n),r}let Uot=class{constructor(t,e=.5,i){this.context=t,this._t=e,this.startPoint=i}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._x=this._y=NaN,this._point=0,this.startPoint&&this.point(this.startPoint)}lineEnd(){0<this._t&&this._t<1&&this._point===2&&this.context.lineTo(this._x,this._y,this._lastDefined!==!1,this.lastPoint),(this._line||this._line!==0&&this._point===1)&&this.context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)}point(t){const e=t.x,i=t.y;switch(this._point){case 0:this._point=1,this._line?this.context.lineTo(e,i,this._lastDefined!==!1&&t.defined!==!1,t):this.context.moveTo(e,i,t);break;case 1:this._point=2;default:if(this._t<=0)this.context.lineTo(this._x,i,this._lastDefined!==!1&&t.defined!==!1,this.lastPoint),this.context.lineTo(e,i,this._lastDefined!==!1&&t.defined!==!1,t);else{const r=this._x*(1-this._t)+e*this._t;this._t===.5?this.context.lineTo(r,this._y,this._lastDefined!==!1,this.lastPoint):this.context.lineTo(r,this._y,this._lastDefined!==!1&&t.defined!==!1,this.lastPoint),this.context.lineTo(r,i,this._lastDefined!==!1&&t.defined!==!1,t)}}this._lastDefined=t.defined,this._x=e,this._y=i,this.lastPoint=t}tryUpdateLength(){return this.context.tryUpdateLength()}};class YNt extends Uot{lineEnd(){this.context.closePath()}}function tk(n,t,e={}){const{direction:i,startPoint:r}=e;if(n.length<2-+!!r)return null;const o=new WM("step",i??(Ke(n[n.length-1].x-n[0].x)>Ke(n[n.length-1].y-n[0].y)?ti.ROW:ti.COLUMN));return Yot(new Uot(o,t,r),n),o}function Yot(n,t){return rg(n,t,1)}function XNt(n,t,e={}){const{direction:i,startPoint:r}=e;if(n.length<2-+!!r)return null;const o=new WM("step",i??(Ke(n[n.length-1].x-n[0].x)>Ke(n[n.length-1].y-n[0].y)?ti.ROW:ti.COLUMN));return Yot(new YNt(o,t,r),n),o}class qNt extends $ot{lineEnd(){this.context.closePath()}}function KNt(n,t={}){const{direction:e,startPoint:i}=t;if(n.length<2-+!!i)return null;const r=em("linear",e,n);return ZNt(new qNt(r,i),n),r}function ZNt(n,t){return rg(n,t,1)}function Xot(n,t,e,i,r){let o=n._x1,a=n._y1,s=n._x2,l=n._y2;if(n._l01_a>vi){const h=2*n._l01_2a+3*n._l01_a*n._l12_a+n._l12_2a,u=3*n._l01_a*(n._l01_a+n._l12_a);o=(o*h-n._x0*n._l12_2a+n._x2*n._l01_2a)/u,a=(a*h-n._y0*n._l12_2a+n._y2*n._l01_2a)/u}if(n._l23_a>vi){const h=2*n._l23_2a+3*n._l23_a*n._l12_a+n._l12_2a,u=3*n._l23_a*(n._l23_a+n._l12_a);s=(s*h+n._x1*n._l23_2a-t*n._l12_2a)/u,l=(l*h+n._y1*n._l23_2a-e*n._l12_2a)/u}n.context.bezierCurveTo(o,a,s,l,n._x2,n._y2,i,n.lastPoint1)}class JNt{constructor(t,e=.5,i){this.context=t,this.startPoint=i,this._alpha=e}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0}lineEnd(){switch(this._point){case 2:this.context.lineTo(this._x2,this._y2,this._lastDefined1!==!1&&this._lastDefined2!==!1,this.lastPoint1);break;case 3:this.point({x:this._x2,y:this._y2})}(this._line||this._line!==0&&this._point===1)&&this.context.closePath(),this._line=1-this._line}point(t){const{x:e,y:i}=t;if(this._point){const r=this._x2-e,o=this._y2-i;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+o*o,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this.context.lineTo(e,i,this._lastDefined1!==!1&&this._lastDefined2!==!1):this.context.moveTo(e,i);break;case 1:this._point=2;break;case 2:this._point=3;default:Xot(this,e,i,this._lastDefined1!==!1&&this._lastDefined2!==!1)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=i,this._lastDefined1=this._lastDefined2,this._lastDefined2=t.defined,this.lastPoint0=this.lastPoint1,this.lastPoint1=t}tryUpdateLength(){return this.context.tryUpdateLength()}}function qot(n,t){return function(e,i,r={}){const{direction:o,startPoint:a}=r;if(e.length<2-+!!a)return null;if(e.length<3-+!!a)return B_(e,r);const s=em(n,o,e),l=new t(s,i,a);return rg(l,e,2),s}}const QNt=qot("catmullRom",JNt);class t5t{constructor(t,e=.5,i){this.context=t,this.startPoint=i,this._alpha=e}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0}lineEnd(){switch(this._point){case 1:this.context.moveTo(this._x3,this._y3,this.lastPoint1),this.context.closePath();break;case 2:this.context.lineTo(this._x3,this._y3,this._lastDefined1!==!1&&this._lastDefined2!==!1,this.lastPoint1),this.context.closePath();break;case 3:this.point({x:this._x3,y:this._y3}),this.point({x:this._x4,y:this._y4}),this.point({x:this._x5,y:this._y5})}}point(t){const{x:e,y:i}=t;if(this._point){const r=this._x2-e,o=this._y2-i;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+o*o,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=i;break;case 1:this._point=2,this.context.moveTo(this._x4=e,this._y4=i,t);break;case 2:this._point=3,this._x5=e,this._y5=i;break;default:Xot(this,e,i,this._lastDefined1!==!1&&this._lastDefined2!==!1)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=i,this._lastDefined1=this._lastDefined2,this._lastDefined2=t.defined,this.lastPoint0=this.lastPoint1,this.lastPoint1=t}tryUpdateLength(){return this.context.tryUpdateLength()}}const e5t=qot("catmullRomClosed",t5t);function i5t(n,t){const{p0:e,p1:i,p2:r}=n,o=Got(e,i,r,t),a=fs.pointAtPP(e,i,t),s=fs.pointAtPP(i,r,t);return[new _I(e,a,o),new _I(o,s,r)]}class _I extends d3{constructor(t,e,i){super(),this.type=Sb.QuadraticBezierCurve,this.p0=t,this.p1=e,this.p2=i}_validPoint(){return Number.isFinite(this.p0.x+this.p0.y+this.p1.x+this.p1.y+this.p2.x+this.p2.y)}getPointAt(t){if(this.defined!==!1)return Got(this.p0,this.p1,this.p2,t);throw new Error("definedfalsegetPointAt")}calcLength(){return this._validPoint()?ONt(this.p0,this.p1,this.p2):60}calcProjLength(t){return t===ti.ROW?Ke(this.p0.x-this.p2.x):t===ti.COLUMN?Ke(this.p0.y-this.p2.y):0}getAngleAt(t){const e=Th(t-.01,0),i=xr(t+.01,1),r=this.getPointAt(e),o=this.getPointAt(i);return je(o.y-r.y,o.x-r.x)}draw(t,e,i,r,o,a){if(t.moveTo(this.p0.x*r+e,this.p0.y*o+i),a>=1)t.quadraticCurveTo(this.p1.x*r+e,this.p1.y*o+i,this.p2.x*r+e,this.p2.y*o+i);else if(a>0){const[s]=i5t(this,a);t.quadraticCurveTo(s.p1.x*r+e,s.p1.y*o+i,s.p2.x*r+e,s.p2.y*o+i)}}getYAt(t){throw new Error("QuadraticBezierCurvegetYAt")}includeX(t){throw new Error("QuadraticBezierCurveincludeX")}}class n5t{constructor(t){this.path=t,this._lastX=this._lastY=this._startX=this._startY=0}moveTo(t,e){return this._lastX=this._startX=t,this._lastY=this._startY=e,this}lineTo(t,e){const i=this.addLinearCurve(t,e);this.path.addCurve(i),this._lastX=t,this._lastY=e}addLinearCurve(t,e){return new bS(new ci(this._lastX,this._lastY),new ci(t,e))}quadraticCurveTo(t,e,i,r){const o=new _I(new ci(this._lastX,this._lastY),new ci(t,e),new ci(i,r));this.path.addCurve(o),this._lastX=i,this._lastY=r}bezierCurveTo(t,e,i,r,o,a){const s=new yS(new ci(this._lastX,this._lastY),new ci(t,e),new ci(i,r),new ci(o,a));this.path.addCurve(s),this._lastX=o,this._lastY=a}arcTo(t,e,i,r,o){throw new Error("CurveContextarcTo")}ellipse(t,e,i,r,o,a,s,l){throw new Error("CurveContextellipse")}rect(t,e,i,r){throw new Error("CurveContextrect")}arc(t,e,i,r,o,a){throw new Error("CurveContextarc")}closePath(){this.path.curves.length<2||this.lineTo(this._startX,this._startY)}}function jc(n,t,e){var i,r;switch(t){case"linear":default:return B_(n,e);case"basis":return WNt(n,e);case"monotoneX":return $Nt(n,e);case"monotoneY":return UNt(n,e);case"step":return tk(n,.5,e);case"stepClosed":return XNt(n,.5,e);case"stepBefore":return tk(n,0,e);case"stepAfter":return tk(n,1,e);case"catmullRom":return QNt(n,(i=e?.curveTension)!==null&&i!==void 0?i:.5,e);case"catmullRomClosed":return e5t(n,(r=e?.curveTension)!==null&&r!==void 0?r:.5,e);case"linearClosed":return KNt(n,e)}}class An extends MNt{constructor(t){super(),this.commandList=[],t&&(this._ctx=t),this._boundsContext=new u3(this.bounds)}get curves(){return this.tryBuildCurves()}setCtx(t){this._ctx=t}moveTo(t,e){return this.commandList.push([xe.M,t,e]),this._ctx&&this._ctx.moveTo(t,e),this}lineTo(t,e){return this.commandList.push([xe.L,t,e]),this._ctx&&this._ctx.lineTo(t,e),this}quadraticCurveTo(t,e,i,r){return this.commandList.push([xe.Q,t,e,i,r]),this._ctx&&this._ctx.quadraticCurveTo(t,e,i,r),this}bezierCurveTo(t,e,i,r,o,a){return this.commandList.push([xe.C,t,e,i,r,o,a]),this._ctx&&this._ctx.bezierCurveTo(t,e,i,r,o,a),this}arcTo(t,e,i,r,o){return this.commandList.push([xe.AT,t,e,i,r,o]),this._ctx&&this._ctx.arcTo(t,e,i,r,o),this}ellipse(t,e,i,r,o,a,s,l){return this.commandList.push([xe.E,t,e,i,r,o,a,s,l]),this._ctx&&this._ctx.ellipse(t,e,i,r,o,a,s,l),this}rect(t,e,i,r){return this.commandList.push([xe.R,t,e,i,r]),this._ctx&&this._ctx.rect(t,e,i,r),this}arc(t,e,i,r,o,a){return this.commandList.push([xe.A,t,e,i,r,o,a]),this._ctx&&this._ctx.arc(t,e,i,r,o,a),this}closePath(){return this.commandList.push([xe.Z]),this._ctx&&this._ctx.closePath(),this}addCurve(t){this._curves.push(t)}clear(){this.transformCbList=null,this.commandList.length=0,this._curves.length=0}beginPath(){this.clear()}tryBuildCurves(){if(!this._curves||!this._curves.length){const t=new n5t(this);Vh(this.commandList,t,0,0,1,1)}return this._curves}toString(){if(!this.toStringCbList){const i=[];i[xe.M]=r=>`M${r[1]} ${r[2]}`,i[xe.L]=r=>`L${r[1]} ${r[2]}`,i[xe.Q]=r=>`Q${r[1]} ${r[2]} ${r[3]} ${r[4]}`,i[xe.C]=r=>`C${r[1]} ${r[2]} ${r[3]} ${r[4]} ${r[5]} ${r[6]}`,i[xe.A]=r=>{const o=[],a=r[1],s=r[2],l=r[3],h=r[4],u=r[5],d=r[6];ENt(o,h,u,a,s,l,l,d);let c="";for(let f=0;f<o.length;f+=6)c+=`C${o[f]} ${o[f+1]} ${o[f+2]} ${o[f+3]} ${o[f+4]} ${o[f+5]}`;return c},i[xe.R]=r=>`M${r[1]} ${r[2]} h${r[3]} v${r[4]} H${r[1]}Z`,i[xe.Z]=r=>"Z",this.toStringCbList=i}const t=this.toStringCbList;let e="";return this.commandList.forEach((i=>{e+=t[i[0]](i)})),e}fromString(t,e,i,r,o){this.clear();const a=BNt(t);return this._runCommandStrList(a,e,i,r,o),this._updateBounds(),this}fromLine(t){const{points:e,curveType:i,clipRangeByDimension:r}=t.attribute;if(!e)return;const o=jc(e,i);r==="x"?this.direction=ti.ROW:r==="y"?this.direction=ti.COLUMN:r==="auto"&&(this.direction=o.direction),this._curves=o.curves}fromCustomPath2D(t,e,i,r,o){return this.clear(),this._runCommandList(t.commandList,e,i,r,o),this._updateBounds(),this}transform(t,e,i,r){const o=this.commandList;if(!this.transformCbList){const a=[];a[xe.M]=this.moveToTransform,a[xe.L]=this.lineToTransform,a[xe.Q]=this.quadraticCurveToTransform,a[xe.C]=this.bezierCurveToTransform,a[xe.AT]=this.arcToTransform,a[xe.E]=this.ellipseTransform,a[xe.R]=this.rectTransform,a[xe.A]=this.arcTransform,a[xe.Z]=this.closePathTransform,this.transformCbList=a}o.forEach((a=>{this.transformCbList[a[0]](a,t,e,i,r)})),this._updateBounds()}moveToTransform(t,e,i,r,o){t[1]=t[1]*r+e,t[2]=t[2]*o+i}lineToTransform(t,e,i,r,o){t[1]=t[1]*r+e,t[2]=t[2]*o+i}quadraticCurveToTransform(t,e,i,r,o){t[1]=t[1]*r+e,t[2]=t[2]*o+i,t[3]=t[3]*r+e,t[4]=t[4]*o+i}bezierCurveToTransform(t,e,i,r,o){t[1]=t[1]*r+e,t[2]=t[2]*o+i,t[3]=t[3]*r+e,t[4]=t[4]*o+i,t[5]=t[5]*r+e,t[6]=t[6]*o+i}arcToTransform(t,e,i,r,o){t[1]=t[1]*r+e,t[2]=t[2]*o+i,t[3]=t[3]*r+e,t[4]=t[4]*o+i,t[5]=t[5]*(r+o)/2}ellipseTransform(t,e,i,r,o){t[1]=t[1]*r+e,t[2]=t[2]*o+i,t[3]=t[3]*r,t[4]=t[4]*o}rectTransform(t,e,i,r,o){t[1]=t[1]*r+e,t[2]=t[2]*o+i,t[3]=t[3]*r,t[4]=t[4]*o}arcTransform(t,e,i,r,o){t[1]=t[1]*r+e,t[2]=t[2]*o+i,t[3]=t[3]*(r+o)/2}closePathTransform(){}_runCommandStrList(t,e=0,i=0,r=1,o=1){let a,s,l,h,u,d=null,c=0,f=0,g=0,p=0;for(let v=0,m=t.length;v<m;++v){switch(a=t[v],r===1&&o===1||(a=r5t(a,r,o)),a[0]){case"l":c+=a[1],f+=a[2],this.lineTo(c+e,f+i);break;case"L":c=a[1],f=a[2],this.lineTo(c+e,f+i);break;case"h":c+=a[1],this.lineTo(c+e,f+i);break;case"H":c=a[1],this.lineTo(c+e,f+i);break;case"v":f+=a[1],this.lineTo(c+e,f+i);break;case"V":f=a[1],this.lineTo(c+e,f+i);break;case"m":c+=a[1],f+=a[2],this.moveTo(c+e,f+i);break;case"M":c=a[1],f=a[2],this.moveTo(c+e,f+i);break;case"c":s=c+a[5],l=f+a[6],g=c+a[3],p=f+a[4],this.bezierCurveTo(c+a[1]+e,f+a[2]+i,g+e,p+i,s+e,l+i),c=s,f=l;break;case"C":c=a[5],f=a[6],g=a[3],p=a[4],this.bezierCurveTo(a[1]+e,a[2]+i,g+e,p+i,c+e,f+i);break;case"s":s=c+a[3],l=f+a[4],d[0].match(/[CcSs]/)===null?(g=c,p=f):(g=2*c-g,p=2*f-p),h=c+a[1],u=f+a[2],this.bezierCurveTo(g+e,p+i,h+e,u+i,s+e,l+i),g=h,p=u,c=s,f=l;break;case"S":s=a[3],l=a[4],d[0].match(/[CcSs]/)===null?(g=c,p=f):(g=2*c-g,p=2*f-p),h=a[1],u=a[2],this.bezierCurveTo(g+e,p+i,h+e,u+i,s+e,l+i),g=h,p=u,c=s,f=l;break;case"q":s=c+a[3],l=f+a[4],g=c+a[1],p=f+a[2],this.quadraticCurveTo(g+e,p+i,s+e,l+i),c=s,f=l;break;case"Q":s=a[3],l=a[4],this.quadraticCurveTo(a[1]+e,a[2]+i,s+e,l+i),c=s,f=l,g=a[1],p=a[2];break;case"t":s=c+a[1],l=f+a[2],d[0].match(/[QqTt]/)===null?(g=c,p=f):d[0]==="t"?(g=2*c-h,p=2*f-u):d[0]==="q"&&(g=2*c-g,p=2*f-p),h=g,u=p,this.quadraticCurveTo(g+e,p+i,s+e,l+i),c=s,f=l,g=c+a[1],p=f+a[2];break;case"T":s=a[1],l=a[2],g=2*c-g,p=2*f-p,this.quadraticCurveTo(g+e,p+i,s+e,l+i),c=s,f=l;break;case"a":p7(this,c+e,f+i,[a[1],a[2],a[3],a[4],a[5],a[6]+c+e,a[7]+f+i]),c+=a[6],f+=a[7];break;case"A":p7(this,c+e,f+i,[a[1],a[2],a[3],a[4],a[5],a[6]+e,a[7]+i]),c=a[6],f=a[7];break;case"z":case"Z":this.closePath()}d=a}}_runCommandList(t,e=0,i=0,r=1,o=1){if(e!==0||i!==0||r!==1||o!==1)for(let a=0,s=t.length;a<s;++a){const l=t[a].slice();switch(l[0]){case xe.L:this.lineToTransform(l,e,i,r,o);break;case xe.M:this.moveToTransform(l,e,i,r,o);break;case xe.C:this.bezierCurveToTransform(l,e,i,r,o);break;case xe.Q:this.quadraticCurveToTransform(l,e,i,r,o);break;case xe.A:this.arcToTransform(l,e,i,r,o);break;case xe.E:this.ellipseTransform(l,e,i,r,o);break;case xe.R:this.rectTransform(l,e,i,r,o);break;case xe.AT:this.arcToTransform(l,e,i,r,o);break;case xe.Z:this.closePath()}}else this.commandList=t.map((a=>a.slice()))}_updateBounds(){this.bounds.clear(),Vh(this.commandList,this._boundsContext)}release(){this.commandList=[],this._boundsContext=null,this._ctx=null}getLength(){if(this.direction===ti.COLUMN){if(!this._curves.length)return 0;const t=this._curves[0],e=this._curves[this._curves.length-1];return Ke(t.p0.y-e.p1.y)}if(this.direction===ti.ROW){if(!this._curves.length)return 0;const t=this._curves[0],e=this._curves[this._curves.length-1];return Ke(t.p0.x-e.p1.x)}return this._curves.reduce(((t,e)=>t+e.getLength()),0)}getYAt(t){if(!this.curves)return 1/0;for(let e=0;e<this.curves.length;e++){const i=this.curves[e];if(i.includeX(t))return i.getYAt(t)}return 1/0}getAttrAt(t){if(!this._curves)return{pos:{x:0,y:0},angle:0};let e,i=0;for(let o=0;o<this._curves.length;o++){e=this._curves[o];const a=e.getLength(this.direction);if(i+a>=t)break;i+=a}const r=(t-i)/e.getLength(this.direction);return{pos:e.getPointAt(r),angle:e.getAngleAt(r)}}drawWithClipRange(t,e,i,r,o){this.tryBuildCurves();const a=this.getLength()*o;let s=0;for(let l=0;l<this._curves.length;l++){const h=this._curves[l],u=h.getLength(this.direction);if(!(s+u<=a)){const d=1-(s+u-a)/u;h.draw(t,i,r,e,e,d);break}h.draw(t,i,r,e,e,1),s+=u}}}const ha=["l",0,0,0,0,0,0,0];function r5t(n,t,e){const i=ha[0]=n[0];if(i==="a"||i==="A")ha[1]=t*n[1],ha[2]=e*n[2],ha[3]=n[3],ha[4]=n[4],ha[5]=n[5],ha[6]=t*n[6],ha[7]=e*n[7];else if(i==="h"||i==="H")ha[1]=t*n[1];else if(i==="v"||i==="V")ha[1]=e*n[1];else for(let r=1,o=n.length;r<o;++r)ha[r]=(r%2==1?t:e)*n[r];return ha}const o5t={alignSelf:"auto"},$n={x:0,y:0,z:0,dx:0,dy:0,dz:0,scrollX:0,scrollY:0,scaleX:1,scaleY:1,scaleZ:1,angle:0,alpha:0,beta:0,scaleCenter:[0,0],anchor:[0,0],anchor3d:[0,0],postMatrix:new Fr},Kot={fillOpacity:1,fill:!1,shadowBlur:0,shadowColor:"black",shadowOffsetX:0,shadowOffsetY:0},ek={strokeOpacity:1,lineDash:[],lineDashOffset:0,lineWidth:1,lineCap:"butt",lineJoin:"miter",miterLimit:10,strokeBoundsBuffer:2,stroke:!1},Zot=Object.assign({outerBorder:Object.assign(Object.assign({},ek),{distance:0}),innerBorder:Object.assign(Object.assign({},ek),{distance:0})},ek),So={text:"",maxLineWidth:1/0,maxWidth:1/0,textAlign:"left",textBaseline:"alphabetic",fontSize:16,fontFamily:`PingFang SC,Microsoft Yahei,system-ui,-apple-system,segoe ui,
    Roboto,Helvetica,Arial,sans-serif, apple color emoji,segoe ui emoji,segoe ui symbol`,fontWeight:"",ellipsis:"",fontVariant:"",fontStyle:"",lineHeight:void 0,underline:0,lineThrough:0,scaleIn3d:!1,direction:"horizontal",wordBreak:"break-all",ignoreBuf:!1,verticalMode:0,wrap:!1,whiteSpace:"no-wrap",heightLimit:1/0,lineClamp:1/0,suffixPosition:"end",underlineDash:[],underlineOffset:0,disableAutoClipedPoptip:void 0,measureMode:pf.fontBounding,keepCenterInLine:!1},a5t={pickStrokeBuffer:0},s5t=Object.assign(Object.assign(Object.assign(Object.assign({forceBoundsWidth:void 0,forceBoundsHeight:void 0,opacity:1,background:null,autoAnimateTexture:!1,textureRatio:1,textureOptions:null,backgroundOpacity:1,backgroundCornerRadius:0,texture:null,textureColor:"black",textureSize:10,texturePadding:2,backgroundMode:"no-repeat",backgroundFit:!0,backgroundKeepAspectRatio:!1,backgroundClip:!0,backgroundScale:1,backgroundOffsetX:0,backgroundOffsetY:0,blur:0,filter:"",cursor:null,html:null,react:null,vue:null},Kot),Zot),o5t),a5t),Jot={connectedType:"none",connectedStyle:{},connectedX:NaN,connectedY:NaN},l5t={_debug_bounds:!1},ji=Object.assign(Object.assign(Object.assign({strokeSeg:null,renderable:!0,pickable:!0,shadowGraphic:void 0,childrenPickable:!0,fillPickable:!0,strokePickable:!0,visible:!0,zIndex:0,layout:null,boundsPadding:0,fillStrokeOrder:0,renderStyle:"default",pickMode:"accurate",customPickShape:null,boundsMode:"accurate",keepDirIn3d:!0,shadowRootIdx:1,globalZIndex:1,globalCompositeOperation:"",overflow:"hidden",shadowPickMode:"graphic",keepStrokeScale:!1,clipConfig:null,roughStyle:null},l5t),s5t),$n),h5t=Object.assign(Object.assign({},ji),{startAngle:0,endAngle:le,innerRadius:0,outerRadius:1,innerPadding:0,outerPadding:0,cornerRadius:0,padRadius:0,padAngle:0,cap:!1,forceShowCap:!1}),u5t=Object.assign(Object.assign(Object.assign({},ji),Jot),{points:[],segments:[],curveType:"linear",clipRange:1,closePath:!1,curveTension:1}),d5t=Object.assign(Object.assign({},ji),{radius:1,startAngle:0,endAngle:le}),c5t=Object.assign(Object.assign({},ji),{width:0,height:0,cornerRadius:0,path:[],clip:!1,visibleAll:!0,display:"relative",flexDirection:"row",flexWrap:"wrap",justifyContent:"flex-start",alignItems:"flex-start",alignContent:"flex-start",baseOpacity:1,cornerType:"round"}),f5t=Object.assign(Object.assign({},ji),{path:"",width:0,height:0,cornerRadius:0,clip:!1}),g5t=Object.assign(Object.assign(Object.assign({},ji),Jot),{points:[],segments:[],curveType:"linear",clipRange:1,clipRangeByDimension:"default",closePath:!1,curveTension:1}),p5t=Object.assign(Object.assign({},ji),{path:new An,fillStrokeOrder:1,clipRange:1,customPath:()=>{bo.getInstance().warn("")}}),v5t=Object.assign(Object.assign({},ji),{points:[],cornerRadius:0,closePath:!0}),m5t=Object.assign(Object.assign({},ji),{width:100,height:100,spikes:5,thickness:.5}),y5t=Object.assign(Object.assign({},ji),{width:0,height:0,x1:0,y1:0,strokeBoundsBuffer:0,cornerRadius:0,cornerType:"round",drawStrokeWhenZeroWH:!1});Object.assign(Object.assign({},ji),{width:0,height:0,x1:0,y1:0,cornerRadius:0,length:0,cornerType:"round",drawStrokeWhenZeroWH:!1});const b5t=Object.assign(Object.assign({},ji),{symbolType:"circle",size:10,keepDirIn3d:!0,clipRange:1}),Qot=Object.assign(Object.assign(Object.assign({},ji),So),{strokeBoundsBuffer:0,keepDirIn3d:!0}),nh=Object.assign(Object.assign(Object.assign({},ji),So),{upgradeAttrs:null,editable:!1,editOptions:null,ascentDescentMode:"actual",width:300,height:300,ellipsis:!0,wordBreak:"break-word",verticalDirection:"top",textAlign:"left",textBaseline:"top",layoutDirection:"horizontal",textConfig:[],disableAutoWrapLine:!1,maxHeight:void 0,maxWidth:void 0,singleLine:!1}),Ab=Object.assign(Object.assign({repeatX:"no-repeat",repeatY:"no-repeat",image:"",width:0,height:0,maxWidth:500,maxHeight:500},ji),{fill:!0,cornerRadius:0,cornerType:"round"}),_5t=Object.assign(Object.assign({},Ab),{backgroundShowMode:"never",backgroundWidth:0,backgroundHeight:0,textAlign:"left",textBaseline:"middle",direction:"horizontal",margin:0,id:"",width:20,height:20,backgroundFill:"rgba(101, 117, 168, 0.1)",backgroundFillOpacity:1,backgroundStroke:!1,backgroundStrokeOpacity:1,backgroundRadius:4,opacity:1}),C5t=(function(){const n={linearGradient:/^(linear\-gradient)/i,radialGradient:/^(radial\-gradient)/i,conicGradient:/^(conic\-gradient)/i,sideOrCorner:/^to (left (top|bottom)|right (top|bottom)|top (left|right)|bottom (left|right)|left|right|top|bottom)/i,extentKeywords:/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,positionKeywords:/^(left|center|right|top|bottom)/i,pixelValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,percentageValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,emValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,angleValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,fromAngleValue:/^from\s*(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,startCall:/^\(/,endCall:/^\)/,comma:/^,/,hexColor:/(^\#[0-9a-fA-F]+)/,literalColor:/^([a-zA-Z]+)/,rgbColor:/^(rgb\(\d{1,3},\s*\d{1,3},\s*\d{1,3}\))/i,rgbaColor:/^(rgba\(\d{1,3},\s*\d{1,3},\s*\d{1,3},\s*((\d\.\d+)|\d{1,3})\))/i};let t="";function e(_){const w=new Error(t+": "+_);throw w.source=t,w}function i(){const _=f(r);return t.length>0&&e("Invalid input not EOF"),_}function r(){return o("linear",n.linearGradient,a)||o("radial",n.radialGradient,l)||o("conic",n.conicGradient,s)}function o(_,w,C){return(function(x,S){const A=y(x);if(A){y(n.startCall)||e("Missing (");const T=S(A);return y(n.endCall)||e("Missing )"),T}})(w,(function(x){const S=C();return S&&(y(n.comma)||e("Missing comma before color stops")),{type:_,orientation:S,colorStops:f(g)}}))}function a(){return m("directional",n.sideOrCorner,1)||m("angular",n.angleValue,1)}function s(){return m("angular",n.fromAngleValue,1)}function l(){let _,w,C=h();return C&&(_=[],_.push(C),w=t,y(n.comma)&&(C=h(),C?_.push(C):t=w)),_}function h(){let _=(function(){const w=m("shape",/^(circle)/i,0);return w&&(w.style=v()||u()),w})()||(function(){const w=m("shape",/^(ellipse)/i,0);return w&&(w.style=p()||u()),w})();if(_)_.at=d();else{const w=u();if(w){_=w;const C=d();C&&(_.at=C)}else{const C=c();C&&(_={type:"default-radial",at:C})}}return _}function u(){return m("extent-keyword",n.extentKeywords,1)}function d(){if(m("position",/^at/,0)){const _=c();return _||e("Missing positioning value"),_}}function c(){const _={x:p(),y:p()};if(_.x||_.y)return{type:"position",value:_}}function f(_){let w=_();const C=[];if(w)for(C.push(w);y(n.comma);)w=_(),w?C.push(w):e("One extra comma");return C}function g(){const _=m("hex",n.hexColor,1)||m("rgba",n.rgbaColor,1)||m("rgb",n.rgbColor,1)||m("literal",n.literalColor,0);return _||e("Expected color definition"),_.length=p(),_}function p(){return m("%",n.percentageValue,1)||m("position-keyword",n.positionKeywords,1)||v()}function v(){return m("px",n.pixelValue,1)||m("em",n.emValue,1)}function m(_,w,C){const x=y(w);if(x)return{type:_,value:x[C]}}function y(_){const w=/^[\n\r\t\s]+/.exec(t);w&&b(w[0].length);const C=_.exec(t);return C&&b(C[0].length),C}function b(_){t=t.substr(_)}return function(_){return t=_.toString(),i()}})();class sh{static IsGradient(t){return!(typeof t=="string"&&!t.includes("gradient"))}static IsGradientStr(t){return typeof t=="string"&&t.includes("gradient")}static Parse(t){if(sh.IsGradientStr(t))try{const e=C5t(t)[0];if(e){if(e.type==="linear")return sh.ParseLinear(e);if(e.type==="radial")return sh.ParseRadial(e);if(e.type==="conic")return sh.ParseConic(e)}}catch{return t}return t}static processColorStops(t){if(!t||t.length===0)return[];if(t.some((e=>e.length))){const e=t.map((i=>({color:i.value,offset:i.length?parseFloat(i.length.value)/100:-1})));e[0].offset<0&&(e[0].offset=0),e[e.length-1].offset<0&&(e[e.length-1].offset=1);for(let i=1;i<e.length-1;i++)if(e[i].offset<0){const r=i-1;let o=i+1;for(;o<e.length&&e[o].offset<0;)o++;const a=e[r].offset,s=e[o].offset,l=o-r;for(let h=1;h<l;h++)e[r+h].offset=a+(s-a)*h/l;i=o-1}return e}return t.map(((e,i)=>{const r=t.length>1?i/(t.length-1):0;return{color:e.value,offset:r}}))}static ParseConic(t){const{orientation:e,colorStops:i=[]}=t,r=Ki/2,o=parseFloat(e.value)/180*Ki-r;return{gradient:"conical",x:.5,y:.5,startAngle:o,endAngle:o+le,stops:sh.processColorStops(i)}}static ParseRadial(t){const{colorStops:e=[]}=t;return{gradient:"radial",x0:.5,y0:.5,x1:.5,y1:.5,r0:0,r1:1,stops:sh.processColorStops(e)}}static ParseLinear(t){const{orientation:e,colorStops:i=[]}=t,r=Ki/2;let o=e.type==="angular"?parseFloat(e.value)/180*Ki:0;for(;o<0;)o+=le;for(;o>=le;)o-=le;let a=0,s=0,l=0,h=0;return o<r?(a=0,s=1,l=Math.sin(o),h=s-Math.cos(o)):o<Ki?(a=0,s=0,l=Math.cos(o-r),h=Math.sin(o-r)):o<Ki+r?(a=1,s=0,l=a-Math.sin(o-Ki),h=Math.cos(o-Ki)):(a=1,l=a-Math.cos(o-r-Ki),h-=Math.sin(o-r-Ki)),{gradient:"linear",x0:a,y0:s,x1:l,y1:h,stops:sh.processColorStops(i)}}}function Dl(n,t,e){let i=t;const{a:r,b:o,c:a,d:s}=n.currentMatrix,l=Math.sign(r)*Math.sqrt(r*r+o*o),h=Math.sign(s)*Math.sqrt(a*a+s*s);return l+h===0?0:(i=i/Math.abs(l+h)*2*e,i)}function _S(n,t,e,i=0,r=0){var o,a,s,l;if(!t||t===!0)return"black";let h,u;if($e(t))for(let d=0;d<t.length&&(u=t[d],!u);d++);else u=t;if(u=sh.Parse(u),typeof u=="string")return u;if(e.AABBBounds&&(!e.attribute||e.attribute.scaleX!==0||e.attribute.scaleY!==0)){const d=e.AABBBounds;let c=d.x2-d.x1,f=d.y2-d.y1,g=d.x1-i,p=d.y1-r;if(e.attribute){const{scaleX:v=1,scaleY:m=1,angle:y=0}=e.attribute;c/=v,f/=m,g/=v,p/=m,(y||v!==1||m!==1)&&(g=(o=e.x1WithoutTransform)!==null&&o!==void 0?o:0,p=(a=e.y1WithoutTransform)!==null&&a!==void 0?a:0,c=(s=e.widthWithoutTransform)!==null&&s!==void 0?s:c,f=(l=e.heightWithoutTransform)!==null&&l!==void 0?l:f)}u.gradient==="linear"?h=w5t(n,u,g,p,c,f):u.gradient==="conical"?h=S5t(n,u,g,p,c,f):u.gradient==="radial"&&(h=x5t(n,u,g,p,c,f))}return h||"orange"}function w5t(n,t,e,i,r,o){var a,s,l,h;const u=n.createLinearGradient(e+((a=t.x0)!==null&&a!==void 0?a:0)*r,i+((s=t.y0)!==null&&s!==void 0?s:0)*o,e+((l=t.x1)!==null&&l!==void 0?l:1)*r,i+((h=t.y1)!==null&&h!==void 0?h:0)*o);return t.stops.forEach((d=>{u.addColorStop(d.offset,d.color)})),u}function x5t(n,t,e,i,r,o){var a,s,l,h,u,d;const c=n.createRadialGradient(e+((a=t.x0)!==null&&a!==void 0?a:.5)*r,i+((s=t.y0)!==null&&s!==void 0?s:.5)*o,Math.max(r,o)*((l=t.r0)!==null&&l!==void 0?l:0),e+((h=t.x1)!==null&&h!==void 0?h:.5)*r,i+((u=t.y1)!==null&&u!==void 0?u:.5)*o,Math.max(r,o)*((d=t.r1)!==null&&d!==void 0?d:.5));return t.stops.forEach((f=>{c.addColorStop(f.offset,f.color)})),c}function S5t(n,t,e,i,r,o){var a,s;const l=n.createConicGradient(e+((a=t.x)!==null&&a!==void 0?a:0)*r,i+((s=t.y)!==null&&s!==void 0?s:0)*o,t.startAngle,t.endAngle);return t.stops.forEach((h=>{l.addColorStop(h.offset,h.color)})),l.GetPattern?l.GetPattern(r+e,o+i,void 0):l}const c3={horizontal:{width:"width",height:"height",left:"left",top:"top",x:"x",y:"y",bottom:"bottom"},vertical:{width:"height",height:"width",left:"top",top:"left",x:"y",y:"x",bottom:"right"}},tat={fill:!0,stroke:!1},CS=/\w|\(|\)|-/,eat=/[.?!,;:/]/,A5t=/\S/,iat=(n,t)=>{let e=t.fontSize||16;switch(t.script){case"super":case"sub":e*=.8}n.setTextStyle({textAlign:"left",textBaseline:t.textBaseline||"alphabetic",fontStyle:t.fontStyle||"",fontWeight:t.fontWeight||"",fontSize:e,fontFamily:t.fontFamily})};function T5t(n,t,e){const i=t&&t.fill||tat.fill,{fillOpacity:r=1,opacity:o=1}=t;n.globalAlpha=r*o,n.fillStyle=e?_S(n,i,{AABBBounds:e}):i,iat(n,t)}function M5t(n,t){const e=t&&t.stroke||tat.stroke;if(!e)return void(n.globalAlpha=0);const{strokeOpacity:i=1,opacity:r=1}=t;n.globalAlpha=i*r,n.lineWidth=t&&typeof t.lineWidth=="number"?t.lineWidth:1,n.strokeStyle=e,iat(n,t)}function Dw(n,t,e,i,r){if(n.length<=1||!t||t<=0)return 0;const o=St.graphicUtil.textMeasure;let a=i,s=n.slice(0,a),l=Math.floor(o.measureText(s,e).width),h=n.slice(0,a+1),u=Math.floor(o.measureText(h,e).width);for(;l>t||u<=t;){if(l>t?a--:a++,a>n.length){a=n.length;break}if(a<0){a=0;break}s=n.slice(0,a),l=Math.floor(o.measureText(s,e).width),h=n.slice(0,a+1),u=Math.floor(o.measureText(h,e).width)}return r&&(a=Iw(n,a)),a}function Iw(n,t,e=!1){let i=t;for(;CS.test(n[i-1])&&CS.test(n[i])||eat.test(n[i]);)if(i--,i<=0)return e?R5t(n,t):t;return i}function R5t(n,t){let e=t;for(;CS.test(n[e+1])&&CS.test(n[e])||eat.test(n[e]);)if(e++,e>=n.length)return e;return e+1}function Pc(n,t,e="actual"){var i;if(n==="")return{ascent:0,height:0,descent:0,width:0};const r=St.graphicUtil.textMeasure.measureText(n,t),o={ascent:0,height:0,descent:0,width:0},a=e==="actual"?r.actualBoundingBoxAscent:r.fontBoundingBoxAscent,s=e==="actual"?r.actualBoundingBoxDescent:r.fontBoundingBoxDescent;typeof a!="number"||typeof s!="number"?(o.width=Math.floor(r.width),o.height=t.fontSize||0,o.ascent=o.height,o.descent=0):(o.width=Math.floor(r.width),o.height=Math.floor(a+s),o.ascent=Math.floor(a),o.descent=o.height-o.ascent);const l=(i=t.space)!==null&&i!==void 0?i:0;return o.width+=l,o}var P5t=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a};let CI=class{constructor(){this.id="ATextMeasure"}configure(n,t){this.canvas=n.canvas,this.context=n.context,n.bindTextMeasure(this)}_measureTextWithoutAlignBaseline(n,t,e){this.context.setTextStyleWithoutAlignBaseline(t);const i=this.context.measureText(n);return e?this.compatibleMetrics(i,t):i}_measureTextWithAlignBaseline(n,t,e){this.context.setTextStyle(t);const i=this.context.measureText(n);return e?this.compatibleMetrics(i,t):i}compatibleMetrics(n,t){if(n.actualBoundingBoxAscent==null||n.actualBoundingBoxDescent==null||n.fontBoundingBoxAscent==null||n.fontBoundingBoxDescent==null){n={width:n.width};const{ascent:e,descent:i}=this.measureTextBoundADscentEstimate(t);n.actualBoundingBoxAscent=e,n.actualBoundingBoxDescent=i,n.fontBoundingBoxAscent=e,n.fontBoundingBoxDescent=i}if(n.actualBoundingBoxLeft==null||n.actualBoundingBoxRight==null){n={width:n.width,actualBoundingBoxAscent:n.actualBoundingBoxAscent,actualBoundingBoxDescent:n.actualBoundingBoxDescent,fontBoundingBoxAscent:n.fontBoundingBoxAscent,fontBoundingBoxDescent:n.fontBoundingBoxDescent};const{left:e,right:i}=this.measureTextBoundLeftRightEstimate(t);n.actualBoundingBoxLeft=e,n.actualBoundingBoxRight=i}return n}estimate(n,{fontSize:t=Qot.fontSize}){let e=0,i=0;for(let r=0;r<n.length;r++)n.charCodeAt(r)<128?e++:i++;return{width:~~(.8*e*t+i*t),height:t}}measureTextWidth(n,t,e){return this.context?(e=e??this._measureTextWithoutAlignBaseline(n,t)).width:this.estimate(n,t).width}measureTextBoundsWidth(n,t,e){return this.context?(e=e??this._measureTextWithoutAlignBaseline(n,t)).width:this.estimate(n,t).width}measureTextBoundsLeftRight(n,t,e){return this.context?{left:(e=e??this._measureTextWithAlignBaseline(n,t,!0)).actualBoundingBoxLeft,right:e.actualBoundingBoxRight}:this.measureTextBoundLeftRightEstimate(t)}measureTextPixelHeight(n,t,e){var i;return this.context?(e=e??this._measureTextWithoutAlignBaseline(n,t,!0),Math.abs(e.actualBoundingBoxAscent-e.actualBoundingBoxDescent)):(i=t.fontSize)!==null&&i!==void 0?i:So.fontSize}measureTextPixelADscent(n,t,e){return this.context?{ascent:(e=e??this._measureTextWithAlignBaseline(n,t,!0)).actualBoundingBoxAscent,descent:e.actualBoundingBoxDescent}:this.measureTextBoundADscentEstimate(t)}measureTextBoundHieght(n,t,e){var i;return this.context?(e=e??this._measureTextWithoutAlignBaseline(n,t,!0),Math.abs(e.fontBoundingBoxAscent-e.fontBoundingBoxDescent)):(i=t.fontSize)!==null&&i!==void 0?i:So.fontSize}measureTextBoundADscent(n,t,e){return this.context?{ascent:(e=e??this._measureTextWithAlignBaseline(n,t,!0)).fontBoundingBoxAscent,descent:e.fontBoundingBoxDescent}:this.measureTextBoundADscentEstimate(t)}measureTextBoundADscentEstimate(n){var t;const e=(t=n.fontSize)!==null&&t!==void 0?t:So.fontSize;return{ascent:.79*e,descent:.21*e}}measureTextBoundLeftRightEstimate(n){var t;const e=(t=n.fontSize)!==null&&t!==void 0?t:So.fontSize,{textAlign:i}=n;return i==="center"?{left:e/2,right:e/2}:i==="right"||i==="end"?{left:e,right:0}:{left:0,right:e}}measureTextPixelADscentAndWidth(n,t,e){if(!this.context)return Object.assign(Object.assign({},this.measureTextBoundADscentEstimate(t)),{width:this.estimate(n,t).width});const i=this._measureTextWithoutAlignBaseline(n,t,!0);if(e===pf.actualBounding)return{ascent:i.actualBoundingBoxAscent,descent:i.actualBoundingBoxDescent,width:i.width};if(e===pf.estimate)return Object.assign(Object.assign({},this.measureTextBoundADscentEstimate(t)),{width:i.width});if(e===pf.fontBounding){let r=i.fontBoundingBoxAscent,o=i.fontBoundingBoxDescent;if(i.actualBoundingBoxDescent&&o<i.actualBoundingBoxDescent){const a=i.actualBoundingBoxDescent-o;o+=a,r-=a}else if(i.actualBoundingBoxAscent&&r<i.actualBoundingBoxAscent){const a=i.actualBoundingBoxAscent-r;r+=a,o-=a}return{ascent:r,descent:o,width:i.width}}return{ascent:i.actualBoundingBoxAscent,descent:i.actualBoundingBoxDescent,width:i.width}}measureText(n,t){return this.context?(this.context.setTextStyleWithoutAlignBaseline(t),this.context.measureText(n)):this.estimate(n,t)}clipTextVertical(n,t,e,i){if(n.length===0)return{verticalList:n,width:0};const{fontSize:r=12}=t;n.forEach((l=>{l.width=l.direction===0?r:this.measureTextWidth(l.text,t)}));const o=[];let a=0,s=0;for(;s<n.length&&a+n[s].width<e;s++)a+=n[s].width,o.push(n[s]);if(n[s]&&n[s].text.length>1){const l=this._clipText(n[s].text,t,e-a,0,n[s].text.length-1,"end",!1);if(i&&l.str!==n[s].text){let h="",u=0;for(let f=0;f<s;f++){const g=n[f];h+=g.text,u+=g.text.length}h+=n[s].text;const d=u+l.str.length;let c=Iw(h,d);c-=u,c!==l.str.length-1&&(l.str=l.str.substring(0,c),l.width=this.measureTextWidth(l.str,t))}o.push(Object.assign(Object.assign({},n[s]),{text:l.str,width:l.width})),a+=l.width}return{verticalList:o,width:a}}clipText(n,t,e,i,r){if(n.length===0)return{str:"",width:0};let o=this.measureTextWidth(n,t);if(o<=e)return{str:n,width:o};if(o=this.measureTextWidth(n[0],t),o>e)return{str:"",width:0};const a=this._clipText(n,t,e,0,n.length-1,"end",!1);if(i&&a.str!==n){let s=Iw(n,a.str.length,r);s!==a.str.length&&(s>a.str.length&&(a.wordBreaked=s,s=a.str.length),a.str=n.substring(0,s),a.width=this.measureTextWidth(a.str,t))}return a}_clipText(n,t,e,i,r,o,a){let s;if(o==="start")s=this._clipTextStart(n,t,e,i,r),a&&(s.result=a+s.str);else if(o==="middle"){const l=this._clipTextMiddle(n,t,e,"","",0,0,1);s={str:"none",width:l.width,result:l.left+a+l.right}}else s=this._clipTextEnd(n,t,e,i,r),a&&(s.result=s.str+a);return s}_clipTextEnd(n,t,e,i,r){if(i===r){bo.getInstance().warn(`_clipTextEnd${n}, ${i}, ${r}`);const h=n.substring(0,r+1);return{str:h,width:this.measureTextWidth(h,t)}}const o=Math.floor((i+r)/2),a=n.substring(0,o+1),s=this.measureTextWidth(a,t);let l;if(s>e){if(a.length<=1)return{str:"",width:0};const h=n.substring(0,o);return l=this.measureTextWidth(h,t),l<=e?{str:h,width:l}:this._clipTextEnd(n,t,e,i,o)}if(s<e){if(o>=n.length-1)return{str:n,width:this.measureTextWidth(n,t)};const h=n.substring(0,o+2);return l=this.measureTextWidth(h,t),l>=e?{str:a,width:s}:this._clipTextEnd(n,t,e,o,r)}return{str:a,width:s}}_clipTextStart(n,t,e,i,r){const o=Math.ceil((i+r)/2),a=n.substring(o-1,n.length),s=this.measureTextWidth(a,t);let l;if(s>e){if(a.length<=1)return{str:"",width:0};const h=n.substring(o,n.length);return l=this.measureTextWidth(h,t),l<=e?{str:h,width:l}:this._clipTextStart(n,t,e,o,n.length)}if(s<e){if(o<=0)return{str:n,width:this.measureTextWidth(n,t)};const h=n.substring(o-2,n.length);return l=this.measureTextWidth(h,t),l>=e?{str:a,width:s}:this._clipTextStart(n,t,e,i,o)}return{str:a,width:s}}_clipTextMiddle(n,t,e,i,r,o,a,s){const l=n.substring(0,s),h=this.measureTextWidth(l,t);if(h+a>e)return{left:i,right:r,width:o+a};const u=n.substring(n.length-s,n.length),d=this.measureTextWidth(u,t);return h+d>e?{left:l,right:r,width:h+a}:this._clipTextMiddle(n,t,e,l,u,h,d,s+1)}clipTextWithSuffixVertical(n,t,e,i,r,o){if(i==="")return this.clipTextVertical(n,t,e,r);if(n.length===0)return{verticalList:n,width:0};const a=this.clipTextVertical(n,t,e,r);if(a.verticalList.length===n.length&&a.verticalList[a.verticalList.length-1].width===n[n.length-1].width)return a;const s=this.measureTextWidth(i,t);if(s>e)return a;let l;if(e-=s,o==="start"){const h=this.revertVerticalList(n);l=this.clipTextVertical(h,t,e,r);const u=this.revertVerticalList(l.verticalList);u.unshift({text:i,direction:1,width:s}),l.verticalList=u}else if(o==="middle"){const h=this.clipTextVertical(n,t,e/2,r),u=this.revertVerticalList(n),d=this.clipTextVertical(u,t,e/2,r);h.verticalList.push({text:i,direction:1,width:s}),this.revertVerticalList(d.verticalList).forEach((c=>h.verticalList.push(c))),l={verticalList:h.verticalList,width:h.width+d.width}}else l=this.clipTextVertical(n,t,e,r),l.verticalList.push({text:i,direction:1,width:s});return l.width+=s,l}revertVerticalList(n){return n.reverse().map((t=>{const e=t.text.split("").reverse().join("");return Object.assign(Object.assign({},t),{text:e})}))}clipTextWithSuffix(n,t,e,i,r,o,a=!1){if(i==="")return this.clipText(n,t,e,r);if(n.length===0)return{str:"",width:0};const s=this.measureTextWidth(n,t);if(!a&&s<=e)return{str:n,width:s};const l=this.measureTextWidth(i,t);if(l>e)return{str:"",width:0};if(a&&s+l<=e)return{str:n+i,width:s+l};e-=l;const h=this._clipText(n,t,e,0,n.length-1,o,i);if(r&&h.str!==n){const u=Iw(n,h.str.length);u!==h.str.length&&(h.result=n.substring(0,u),h.width=this.measureTextWidth(h.str,t))}else a&&h.str===n&&(h.result=n+i);return h.str=h.result,h.width+=l,h}};CI=P5t([wt()],CI);var B5t=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a};const Mh=Symbol.for("TextMeasureContribution");let wv=class extends CI{constructor(){super(...arguments),this.id="DefaultTextMeasureContribution"}};wv=B5t([wt()],wv);const nat=Symbol.for("CanvasFactory"),k5t=Symbol.for("Context2dFactory");function wI(n){return Kt.getNamed(nat,St.global.env)(n)}const rat=1e-4,x7=Math.sqrt(3),C1=1/3;function Nu(n){return n>-Tb&&n<Tb}function oat(n){return n>Tb||n<-Tb}const ol=[0,0],La=[0,0],Sp=[0,0];function Ap(n,t){return(n[0]-t[0])*(n[0]-t[0])+(n[1]-t[1])*(n[1]-t[1])}function uh(n,t,e,i){const r=1-i;return r*(r*n+2*i*t)+i*i*e}function dh(n,t,e,i,r){const o=1-r;return o*o*(o*n+3*r*t)+r*r*(r*i+3*o*e)}function L5t(n,t,e,i,r){const o=n-2*t+e,a=2*(t-n),s=n-i;let l=0;if(Nu(o)){if(oat(a)){const h=-s/a;h>=0&&h<=1&&(r[l++]=h)}}else{const h=a*a-4*o*s;if(Nu(h)){const u=-a/(2*o);u>=0&&u<=1&&(r[l++]=u)}else if(h>0){const u=Math.sqrt(h),d=(-a+u)/(2*o),c=(-a-u)/(2*o);d>=0&&d<=1&&(r[l++]=d),c>=0&&c<=1&&(r[l++]=c)}}return l}function E5t(n,t,e){const i=n+e-2*t;return i===0?.5:(n-t)/i}function D5t(n,t,e,i,r,o,a,s,l){let h=0,u=.005,d=1/0;ol[0]=a,ol[1]=s;for(let c=0;c<1;c+=.05){La[0]=uh(n,e,r,c),La[1]=uh(t,i,o,c);const f=Ap(ol,La);f<d&&(h=c,d=f)}d=1/0;for(let c=0;c<32&&!(u<rat);c++){const f=h-u,g=h+u;La[0]=uh(n,e,r,f),La[1]=uh(t,i,o,f);const p=Ap(La,ol);if(f>=0&&p<d)h=f,d=p;else{Sp[0]=uh(n,e,r,g),Sp[1]=uh(t,i,o,g);const v=Ap(Sp,ol);g<=1&&v<d?(h=g,d=v):u*=.5}}return Math.sqrt(d)}function I5t(n,t,e,i,r,o,a,s,l,h,u){let d,c,f,g,p=0,v=.005,m=1/0;ol[0]=l,ol[1]=h;for(let y=0;y<1;y+=.05)La[0]=dh(n,e,r,a,y),La[1]=dh(t,i,o,s,y),f=Ap(ol,La),f<m&&(p=y,m=f);m=1/0;for(let y=0;y<32&&!(v<rat);y++)d=p-v,c=p+v,La[0]=dh(n,e,r,a,d),La[1]=dh(t,i,o,s,d),f=Ap(La,ol),d>=0&&f<m?(p=d,m=f):(Sp[0]=dh(n,e,r,a,c),Sp[1]=dh(t,i,o,s,c),g=Ap(Sp,ol),c<=1&&g<m?(p=c,m=g):v*=.5);return Math.sqrt(m)}function w1(n){return(n%=le)<0&&(n+=le),n}function O5t(n,t,e,i,r,o,a,s,l){if(a===0)return!1;const h=a;return l>t+h&&l>i+h&&l>o+h||l<t-h&&l<i-h&&l<o-h||s>n+h&&s>e+h&&s>r+h||s<n-h&&s<e-h&&s<r-h?!1:D5t(n,t,e,i,r,o,s,l)<=h/2}function H5t(n,t,e,i,r,o,a,s,l,h,u){if(l===0)return!1;const d=l;return u>t+d&&u>i+d&&u>o+d&&u>s+d||u<t-d&&u<i-d&&u<o-d&&u<s-d||h>n+d&&h>e+d&&h>r+d&&h>a+d||h<n-d&&h<e-d&&h<r-d&&h<a-d?!1:I5t(n,t,e,i,r,o,a,s,h,u)<=d/2}function z5t(n,t,e,i,r,o,a,s,l){if(a===0)return!1;const h=a;s-=n,l-=t;const u=Math.sqrt(s*s+l*l);if(u-h>e||u+h<e)return!1;if(Math.abs(i-r)%le<1e-4)return!0;if(o){const c=i;i=w1(r),r=w1(c)}else i=w1(i),r=w1(r);i>r&&(r+=le);let d=Math.atan2(l,s);return d<0&&(d+=le),d>=i&&d<=r||d+le>=i&&d+le<=r}function Eg(n,t,e,i,r,o,a){if(r===0)return!1;const s=r,l=r/2;let h=0,u=n;if(a>t+l&&a>i+l||a<t-l&&a<i-l||o>n+l&&o>e+l||o<n-l&&o<e-l)return!1;if(n===e)return Math.abs(o-n)<=s/2;h=(t-i)/(n-e),u=(n*i-e*t)/(n-e);const d=h*o-a+u;return d*d/(h*h+1)<=s/2*s/2}const Tb=1e-4;function F5t(n,t,e,i,r,o){const a=i+3*(t-e)-n,s=3*(e-2*t+n),l=3*(t-n),h=n-r,u=s*s-3*a*l,d=s*l-9*a*h,c=l*l-3*s*h;let f=0;if(Nu(u)&&Nu(d))if(Nu(s))o[0]=0;else{const g=-l/s;g>=0&&g<=1&&(o[f++]=g)}else{const g=d*d-4*u*c;if(Nu(g)){const p=d/u,v=-s/a+p,m=-p/2;v>=0&&v<=1&&(o[f++]=v),m>=0&&m<=1&&(o[f++]=m)}else if(g>0){const p=Math.sqrt(g);let v=u*s+1.5*a*(-d+p),m=u*s+1.5*a*(-d-p);v=v<0?-Math.pow(-v,C1):Math.pow(v,C1),m=m<0?-Math.pow(-m,C1):Math.pow(m,C1);const y=(-s-(v+m))/(3*a);y>=0&&y<=1&&(o[f++]=y)}else{const p=(2*u*s-3*a*d)/(2*Math.sqrt(u*u*u)),v=Math.acos(p)/3,m=Math.sqrt(u),y=Math.cos(v),b=(-s-2*m*y)/(3*a),_=(-s+m*(y+x7*Math.sin(v)))/(3*a),w=(-s+m*(y-x7*Math.sin(v)))/(3*a);b>=0&&b<=1&&(o[f++]=b),_>=0&&_<=1&&(o[f++]=_),w>=0&&w<=1&&(o[f++]=w)}}return f}function N5t(n,t,e,i,r){const o=6*e-12*t+6*n,a=9*t+3*i-3*n-9*e,s=3*t-3*n;let l=0;if(Nu(a)){if(oat(o)){const h=-s/o;h>=0&&h<=1&&(r[l++]=h)}}else{const h=o*o-4*a*s;if(Nu(h))r[0]=-o/(2*a);else if(h>0){const u=Math.sqrt(h),d=(-o+u)/(2*a),c=(-o-u)/(2*a);d>=0&&d<=1&&(r[l++]=d),c>=0&&c<=1&&(r[l++]=c)}}return l}function W5t(n,t){return Math.abs(n-t)<Tb}const Zr=[-1,-1,-1],xa=[-1,-1];function V5t(){const n=xa[0];xa[0]=xa[1],xa[1]=n}function G5t(n,t,e,i,r,o,a,s,l,h){if(h>t&&h>i&&h>o&&h>s||h<t&&h<i&&h<o&&h<s)return 0;const u=F5t(t,i,o,s,h,Zr);if(u===0)return 0;let d=0,c=-1,f=0,g=0;for(let p=0;p<u;p++){const v=Zr[p],m=v===0||v===1?.5:1;dh(n,e,r,a,v)<l||(c<0&&(c=N5t(t,i,o,s,xa),xa[1]<xa[0]&&c>1&&V5t(),f=dh(t,i,o,s,xa[0]),c>1&&(g=dh(t,i,o,s,xa[1]))),c===2?v<xa[0]?d+=f<t?m:-m:v<xa[1]?d+=g<f?m:-m:d+=s<g?m:-m:v<xa[0]?d+=f<t?m:-m:d+=s<f?m:-m)}return d}function $5t(n,t,e,i,r,o,a,s){if(s>t&&s>i&&s>o||s<t&&s<i&&s<o)return 0;const l=L5t(t,i,o,s,Zr);if(l===0)return 0;const h=E5t(t,i,o);if(h>=0&&h<=1){let d=0;const c=uh(t,i,o,h);for(let f=0;f<l;f++){const g=Zr[f]===0||Zr[f]===1?.5:1;uh(n,e,r,Zr[f])<a||(Zr[f]<h?d+=c<t?g:-g:d+=o<c?g:-g)}return d}const u=Zr[0]===0||Zr[0]===1?.5:1;return uh(n,e,r,Zr[0])<a?0:o<t?u:-u}function j5t(n,t,e,i,r,o,a,s){if((s-=t)>e||s<-e)return 0;const l=Math.sqrt(e*e-s*s);Zr[0]=-l,Zr[1]=l;const h=Math.abs(i-r);if(h<1e-4)return 0;if(h>=le-1e-4){i=0,r=le;const d=o?1:-1;return a>=Zr[0]+n&&a<=Zr[1]+n?d:0}if(i>r){const d=i;i=r,r=d}i<0&&(i+=le,r+=le);let u=0;for(let d=0;d<2;d++){const c=Zr[d];if(c+n>a){let f=Math.atan2(s,c),g=o?1:-1;f<0&&(f=le+f),(f>=i&&f<=r||f+le>=i&&f+le<=r)&&(f>Ki/2&&f<1.5*Ki&&(g=-g),u+=g)}}return u}function ik(n){return Math.round(n/Ki*1e8)/1e8%2*Ki}function U5t(n,t){let e=ik(n[0]);e<0&&(e+=le);const i=e-n[0];let r=n[1];r+=i,!t&&r-e>=le?r=e+le:t&&e-r>=le?r=e-le:!t&&e>r?r=e+(le-ik(e-r)):t&&e<r&&(r=e-(le-ik(r-e))),n[0]=e,n[1]=r}const Ym=[0,0];function aat(n,t,e,i,r){const o=n,a=n.length;let s,l,h=0,u=0,d=0,c=0,f=0;for(let g=0;g<a;g++){const p=o[g],v=g===0;p[0]===xe.M&&g>1&&(e||(h+=Zd(u,d,c,f,i,r))),v&&(u=p[1],d=p[2],c=u,f=d);const m=p[0],y=p[1],b=p[2],_=p[3],w=p[4],C=p[5],x=p[6];let S=w,A=C;Ym[0]=S,Ym[1]=A,U5t(Ym,!!p[6]),S=Ym[0],A=Ym[1];const T=S,M=A-S,R=!!(1-(p[6]?0:1)),L=(i-y)*_/_+y;switch(m){case xe.M:c=y,f=b,u=c,d=f;break;case xe.L:if(e){if(Eg(u,d,y,b,t,i,r))return!0}else h+=Zd(u,d,y,b,i,r)||0;u=y,d=b;break;case xe.C:if(e){if(H5t(u,d,y,b,_,w,C,x,t,i,r))return!0}else h+=G5t(u,d,y,b,_,w,C,x,i,r)||0;u=C,d=x;break;case xe.Q:if(e){if(O5t(u,d,y,b,_,w,t,i,r))return!0}else h+=$5t(u,d,y,b,_,w,i,r)||0;u=_,d=w;break;case xe.A:if(s=Math.cos(T)*_+y,l=Math.sin(T)*_+b,v?(c=s,f=l):h+=Zd(u,d,s,l,i,r),e){if(z5t(y,b,_,T,T+M,R,t,L,r))return!0}else h+=j5t(y,b,_,T,T+M,R,L,r);u=Math.cos(T+M)*_+y,d=Math.sin(T+M)*_+b;break;case xe.R:if(c=u=y,f=d=b,s=c+_,l=f+w,e){if(Eg(c,f,s,f,t,i,r)||Eg(s,f,s,l,t,i,r)||Eg(s,l,c,l,t,i,r)||Eg(c,l,c,f,t,i,r))return!0}else h+=Zd(s,f,s,l,i,r),h+=Zd(c,l,c,f,i,r);break;case xe.Z:if(e){if(Eg(u,d,c,f,t,i,r))return!0}else h+=Zd(u,d,c,f,i,r);u=c,d=f}}return e||W5t(d,f)||(h+=Zd(u,d,c,f,i,r)||0),h!==0}function Y5t(n,t,e){return aat(n,0,!1,t,e)}function X5t(n,t,e,i){return aat(n,t,!0,e,i)}class q5t{constructor(){this.pools=[],this.allocatedCanvas=[]}shareCanvas(){return this.allocatedCanvas.length?this.allocatedCanvas[0]:this.getCommonCanvas()}getCommonCanvas(){return this._commonCanvas||(this._commonCanvas=this.allocate({width:100,height:100,dpr:2})),this._commonCanvas}allocate(t){if(!this.pools.length){const i=wI(Object.assign({nativeCanvas:St.global.createCanvas(t)},t));return this.allocatedCanvas.push(i),i}const e=this.pools.pop();return e.resize(t.width,t.height),e.dpr=t.dpr,e}allocateByObj(t){if(!this.pools.length){const i={width:t.width/t.dpr,height:t.height/t.dpr,dpr:t.dpr},r=wI(Object.assign({nativeCanvas:St.global.createCanvas(i)},i));return this.allocatedCanvas.push(r),r}const e=this.pools.pop();return e.width=t.width,e.height=t.height,e}free(t){this.pools.push(t)}get length(){return this.pools.length}release(...t){this.pools=[]}}const vf=new q5t;var K5t=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a},Z5t=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)};const Mb=Symbol.for("VWindow"),f3=Symbol.for("WindowHandlerContribution");let xI=class extends Iot{get width(){if(this._handler){const n=this._handler.getWH();return this._width=n.width}return this._width}get height(){if(this._handler){const n=this._handler.getWH();return this._height=n.height}return this._height}get dpr(){return this._handler.getDpr()}constructor(){super(),this.hooks={onChange:new Ir(["x","y","width","height"])},this.active=()=>{const n=this.global;!n.env||this.actived||(Kt.getNamed(f3,n.env).configure(this,n),this.actived=!0)},this._uid=pn.GenAutoIncrementId(),this.global=St.global,this.postInit()}_nativeAddEventListener(n,t,e){return this._handler.addEventListener(n,t,e)}_nativeRemoveEventListener(n,t,e){return this._handler.removeEventListener(n,t,e)}_nativeDispatchEvent(n){return this._handler.dispatchEvent(n)}postInit(){this.global.hooks.onSetEnv.tap("window",this.active),this.active()}get style(){var n;return(n=this._handler.getStyle())!==null&&n!==void 0?n:{}}set style(n){this._handler.setStyle(n)}create(n){var t,e;this._handler.createWindow(n);const i=this._handler.getWH();this._width=i.width,this._height=i.height,n.viewBox?this.setViewBox(n.viewBox):n.canvasControled!==!1?this.setViewBox({x1:0,y1:0,x2:this._width,y2:this._height}):this.setViewBox({x1:0,y1:0,x2:(t=n.width)!==null&&t!==void 0?t:this._width,y2:(e=n.height)!==null&&e!==void 0?e:this._height}),this.title=this._handler.getTitle(),this.resizable=!0}setWindowHandler(n){this._handler=n}setDpr(n){return this._handler.setDpr(n)}resize(n,t){return this._handler.resizeWindow(n,t)}configure(){throw new Error("")}release(){return this.global.hooks.onSetEnv.unTap("window",this.active),this.clearAllEventListeners(),this._handler.releaseWindow()}getContext(){return this._handler.getContext()}getNativeHandler(){return this._handler.getNativeHandler()}getImageBuffer(n){return this._handler.getImageBuffer?this._handler.getImageBuffer(n):null}getBoundingClientRect(){return this._handler.getBoundingClientRect()}getContainer(){return this._handler.container}clearViewBox(n){this._handler.clearViewBox(n)}setViewBox(n){this._handler.setViewBox(n)}setViewBoxTransform(n,t,e,i,r,o){this._handler.setViewBoxTransform(n,t,e,i,r,o)}getViewBox(){return this._handler.getViewBox()}getViewBoxTransform(){return this._handler.getViewBoxTransform()}pointTransform(n,t){const e=this._handler.getViewBox(),i={x:n,y:t};return this._handler.getViewBoxTransform().transformPoint({x:n,y:t},i),i.x-=e.x1,i.y-=e.y1,i}hasSubView(){const n=this._handler.getViewBox();return!(n.x1===0&&n.y1===0&&i7(this.width,n.width())&&i7(this.height,n.height()))}isVisible(n){return this._handler.isVisible(n)}onVisibleChange(n){return this._handler.onVisibleChange(n)}getTopLeft(n){return this._handler.getTopLeft(n)}};xI=K5t([wt(),Z5t("design:paramtypes",[])],xI);var sat=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a},lat=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},S7=function(n,t){return function(e,i){t(e,i,n)}};let SI=class{get canvas(){return this.tryInitCanvas(),this._canvas}get context(){return this.tryInitCanvas(),this._context}constructor(n){this.contributions=n,this.configured=!1,this.global=St.global,this._textMeasureMap=new Map,this.global.hooks.onSetEnv.tap("graphic-util",((t,e,i)=>{this.configured=!1,this.configure(i,e)}))}get textMeasure(){return this._textMeasure||this.configure(this.global,this.global.env),this._textMeasure}getTextMeasureInstance(n){return n?this._textMeasureMap.get(n)||this.textMeasure:this.textMeasure}configure(n,t){this.configured||(this.contributions.getContributions().forEach((e=>{e.configure(this,t)})),this.configured=!0)}tryInitCanvas(){if(!this._canvas){const n=vf.shareCanvas();this._canvas=n,this._context=n.getContext("2d")}}bindTextMeasure(n){this._textMeasure&&n.id!=="DefaultTextMeasureContribution"||(this._textMeasure=n),this._textMeasureMap.has(n.id)||this._textMeasureMap.set(n.id,n)}measureText(n,t,e="native"){var i;this.configure(this.global,this.global.env);const r=this.global.measureTextMethod;this.global.measureTextMethod=e;const o={width:this._textMeasure.measureTextWidth(n,t),height:(i=t.fontSize)!==null&&i!==void 0?i:So.fontSize};return this.global.measureTextMethod=r,o}createTextMeasureInstance(n,t,e){return this.configure(this.global,this.global.env),new xp(Object.assign({defaultFontParams:{fontFamily:So.fontFamily,fontSize:So.fontSize},getCanvasForMeasure:e||(()=>this.canvas),getTextBounds:void 0,specialCharSet:`-/: .,@%'"~`+xp.ALPHABET_CHAR_SET+xp.ALPHABET_CHAR_SET.toUpperCase()},t??{}),n)}drawGraphicToCanvas(n,t,e){if(!t.defaultLayer)return null;const i=Kt.get(Mb),r=n.AABBBounds,o=r.width(),a=r.height(),s=-r.x1,l=-r.y1;i.create({viewBox:{x1:s,y1:l,x2:r.x2,y2:r.y2},width:o,height:a,canvas:e,dpr:t.window.dpr,canvasControled:!0,offscreen:!0,title:""});const h=t.params.optimize.disableCheckGraphicWidthOutRange;t.params.optimize.disableCheckGraphicWidthOutRange=!0,t.defaultLayer.getNativeHandler().drawTo(i,[n],{transMatrix:i.getViewBoxTransform(),viewBox:i.getViewBox(),stage:t,layer:t.defaultLayer,renderService:t.renderService,background:"transparent",clear:!0,updateBounds:!1}),t.params.optimize.disableCheckGraphicWidthOutRange=h;const u=i.getNativeHandler();return u.nativeCanvas?u.nativeCanvas:null}};SI=sat([wt(),S7(0,Ce(Qi)),S7(0,Ln(Mh)),lat("design:paramtypes",[Object])],SI);var wu;(function(n){n[n.transform=0]="transform",n[n.matrix=1]="matrix"})(wu||(wu={}));const mn=new Fr;let AI=class{constructor(){this.matrix=new Fr}init(n){return this.mode=wu.transform,this.originTransform=n,this.matrix.reset(),this}fromMatrix(n,t){return this.mode=wu.matrix,this.outSourceMatrix=n,this.outTargetMatrix=t,this}scaleMatrix(n,t,e){const i=this.outSourceMatrix;if(mn.setValue(i.a,i.b,i.c,i.d,i.e,i.f),this.outTargetMatrix.reset(),e){const{x:r,y:o}=e;this.outTargetMatrix.translate(r,o),this.outTargetMatrix.scale(n,t),this.outTargetMatrix.translate(-r,-o)}else this.outTargetMatrix.scale(n,t);return this.outTargetMatrix.multiply(mn.a,mn.b,mn.c,mn.d,mn.e,mn.f),this}rotateMatrix(n,t){const e=this.outSourceMatrix;if(mn.setValue(e.a,e.b,e.c,e.d,e.e,e.f),this.outTargetMatrix.reset(),t){const{x:i,y:r}=t;this.outTargetMatrix.translate(i,r),this.outTargetMatrix.rotate(n),this.outTargetMatrix.translate(-i,-r)}else this.outTargetMatrix.rotate(n);return this.outTargetMatrix.multiply(mn.a,mn.b,mn.c,mn.d,mn.e,mn.f),this}scale(n,t,e){return this.mode===wu.matrix?this.scaleMatrix(n,t,e):this}rotate(n,t){return this.mode===wu.matrix?this.rotateMatrix(n,t):this}translateMatrix(n,t){const e=this.outSourceMatrix;return mn.setValue(e.a,e.b,e.c,e.d,e.e,e.f),this.outTargetMatrix.reset(),this.outTargetMatrix.translate(n,t),this.outTargetMatrix.multiply(mn.a,mn.b,mn.c,mn.d,mn.e,mn.f),this}translate(n,t){return this.mode===wu.matrix?this.translateMatrix(n,t):this}simplify(n){return this.mode===wu.matrix?this.simplifyMatrix(n):this}simplifyMatrix(n){return this}};AI=sat([wt(),lat("design:paramtypes",[])],AI);const Lr={arc:h5t,area:u5t,circle:d5t,line:g5t,path:p5t,symbol:b5t,text:Qot,rect:y5t,polygon:v5t,star:m5t,richtext:nh,richtextIcon:_5t,image:Ab,group:c5t,glyph:f5t},nk=Object.keys(Lr);function J5t(){return{arc:Object.assign({},Lr.arc),area:Object.assign({},Lr.area),circle:Object.assign({},Lr.circle),line:Object.assign({},Lr.line),path:Object.assign({},Lr.path),symbol:Object.assign({},Lr.symbol),text:Object.assign({},Lr.text),rect:Object.assign({},Lr.rect),polygon:Object.assign({},Lr.polygon),star:Object.assign({},Lr.star),richtext:Object.assign({},Lr.richtext),richtextIcon:Object.assign({},Lr.richtextIcon),image:Object.assign({},Lr.image),group:Object.assign({},Lr.group),glyph:Object.assign({},Lr.glyph)}}function x1(n,t){Object.keys(t).forEach((e=>{n[e]=t[e]}))}const A7=J5t();class Rb{constructor(){this.initTheme(),this.dirty=!1}initTheme(){this._defaultTheme={},nk.forEach((t=>{this._defaultTheme[t]=Object.create(A7[t])})),this.combinedTheme=this._defaultTheme}getTheme(t){if(!t)return this.combinedTheme;if(!this.dirty)return this.combinedTheme;let e={};const i=this.getParentWithTheme(t);return i&&(e=i.theme),this.applyTheme(t,e),this.combinedTheme}getParentWithTheme(t){for(;t.parent;)if((t=t.parent).theme)return t;return null}applyTheme(t,e,i=!1){if(this.dirty){const r=this.getParentWithTheme(t);if(r){const o=r.theme;(o.dirty||i)&&o.applyTheme(r,e,!0)}this.userTheme?this.doCombine(r&&r.theme.combinedTheme):(r?this.combinedTheme=r.theme.combinedTheme:(this.combinedTheme=this._defaultTheme,bo.getInstance().warn("")),this.dirty=!1)}return this.combinedTheme}doCombine(t){const e=this.userTheme,i=this.combinedTheme;nk.forEach((r=>{const o=Object.create(A7[r]);t&&t[r]&&x1(o,t[r]),i[r]&&x1(o,i[r]),e[r]&&x1(o,e[r]),this.combinedTheme[r]=o})),e.common&&nk.forEach((r=>{x1(this.combinedTheme[r],e.common)})),this.dirty=!1}setTheme(t,e){let i=this.userTheme;i?Object.keys(t).forEach((r=>{i[r]?Object.assign(i[r],t[r]):i[r]=Object.assign({},t[r])})):i=t,this.userTheme=i,this.dirty=!0,this.dirtyChildren(e)}resetTheme(t,e){this.userTheme=t,this.dirty=!0,this.dirtyChildren(e)}dirtyChildren(t){t.forEachChildren((e=>{e.isContainer&&(e.theme&&(e.theme.dirty=!0),this.dirtyChildren(e))}))}}const hat=new Rb;function he(n,t){return n.glyphHost?he(n.glyphHost):t?(n.isContainer,t):Q5t(n)||n.attachedThemeGraphic&&he(n.attachedThemeGraphic)||hat.getTheme()}function Q5t(n){let t;if(t=n.isContainer?n:n.parent,t){for(;t&&!t.theme;)t=t.parent;return t?(t.theme||t.createTheme(),t.theme.getTheme(t)):hat.getTheme()}return null}var tWt=function(n,t,e,i){return new(e||(e=Promise))((function(r,o){function a(h){try{l(i.next(h))}catch(u){o(u)}}function s(h){try{l(i.throw(h))}catch(u){o(u)}}function l(h){var u;h.done?r(h.value):(u=h.value,u instanceof e?u:new e((function(d){d(u)}))).then(a,s)}l((i=i.apply(n,t||[])).next())}))};let eWt=class extends ng{get previousSibling(){return this._prev}get nextSibling(){return this._next}get children(){return this.getChildren()}get firstChild(){return this._firstChild}get lastChild(){return this._lastChild}get count(){return this._count}get childrenCount(){return this._idMap?this._idMap.size:0}constructor(){super(),this._uid=pn.GenAutoIncrementId(),this._firstChild=null,this._lastChild=null,this.parent=null,this._count=1}forEachChildren(t,e=!1){if(e){let i=this._lastChild,r=0;for(;i;){if(t(i,r++))return;i=i._prev}}else{let i=this._firstChild,r=0;for(;i;){if(t(i,r++))return;i=i._next}}}forEachChildrenAsync(t,e=!1){return tWt(this,void 0,void 0,(function*(){if(e){let i=this._lastChild,r=0;for(;i;){let o=t(i,r++);if(o.then&&(o=yield o),o)return;i=i._prev}}else{let i=this._firstChild,r=0;for(;i;){let o=t(i,r++);if(o.then&&(o=yield o),o)return;i=i._next}}}))}forEach(t){return this.forEachChildren(t)}appendChild(t,e=!0){if(this._uid===t._uid)return null;if(!e&&t.isAncestorsOf(this))throw new Error("Node::appendChildappend");return t.parent&&t.parent.removeChild(t),t.parent=this,this._lastChild?(this._lastChild._next=t,t._prev=this._lastChild,this._lastChild=t):(this._firstChild=this._lastChild=t,t._prev=t._next=null),this._idMap||(this._idMap=new Map),this._idMap.set(t._uid,t),this.setCount(t.count),this._structEdit=!0,t}appendChildArrHighPerformance(t,e=!1){return t}insertBefore(t,e){if(!e)return this.appendChild(t);if(this===t||t===e)return null;if(t.isAncestorsOf(this))throw new Error("Node::insertBeforeinsert");return e.parent!==this?null:(t.parent&&t.parent.removeChild(t),t.parent=this,t._prev=e._prev,e._prev?e._prev._next=t:this._firstChild=t,e._prev=t,t._next=e,this._idMap||(this._idMap=new Map),this._idMap.set(t._uid,t),this._structEdit=!0,this.setCount(t.count),t)}insertAfter(t,e){if(!e)return this.appendChild(t);if(this===t||t===e)return null;if(t.isAncestorsOf(this))throw new Error("Node::insertAfterinsert");return e.parent!==this?null:(t.parent&&t.parent.removeChild(t),t.parent=this,e._next?(e._next._prev=t,t._next=e._next):this._lastChild=t,e._next=t,t._prev=e,this._idMap||(this._idMap=new Map),this._idMap.set(t._uid,t),this._structEdit=!0,this.setCount(t.count),t)}insertInto(t,e){if(!this._ignoreWarn&&this._nodeList&&bo.getInstance().warn("insertIntoKeepIdxinsertInto"),e>=this.childrenCount)return this.appendChild(t);if(this===t)return null;if(t.isAncestorsOf(this))throw new Error("Node::insertBeforeinsert");if(t.parent&&t.parent.removeChild(t),t.parent=this,e===0)t._next=this._firstChild,this._firstChild&&(this._firstChild._prev=t),t._prev=null,this._firstChild=t;else{let i=this._firstChild;for(let r=0;r<e;r++){if(!i)return null;r>0&&(i=i._next)}if(!i)return null;t._next=i._next,t._prev=i,i._next=t,t._next&&(t._next._prev=t)}return this._idMap||(this._idMap=new Map),this._idMap.set(t._uid,t),this._structEdit=!0,this.setCount(t.count),t}insertIntoKeepIdx(t,e){if(this._nodeList||(this._nodeList=this.children),this._nodeList[e]){const o=this._nodeList[e];return this._nodeList.splice(e,0,t),this.insertBefore(t,o)}let i;this._nodeList[e]=t;for(let o=e-1;o>=0&&(i=this._nodeList[o],!i);o--);if(i)return i._next?this.insertBefore(t,i._next):this.appendChild(t);this._ignoreWarn=!0;const r=this.insertInto(t,0);return this._ignoreWarn=!1,r}removeChild(t){if(!this._idMap||!this._idMap.has(t._uid))return null;if(this._idMap.delete(t._uid),this._nodeList){const e=this._nodeList.findIndex((i=>i===t));e>=0&&this._nodeList.splice(e,1)}return t._prev?t._prev._next=t._next:this._firstChild=t._next,t._next?t._next._prev=t._prev:this._lastChild=t._prev,t.parent=null,t._prev=null,t._next=null,this._structEdit=!0,this.setCount(-t.count),t}delete(){this.parent&&this.parent.removeChild(this)}removeAllChild(t){if(!this._idMap)return;this._nodeList&&(this._nodeList.length=0);let e=this._firstChild;for(;e;){const i=e._next;e.parent=null,e._prev=null,e._next=null,e=e._next,e=i}this._firstChild=null,this._lastChild=null,this._idMap.clear(),this._structEdit=!0,this.setCount(1-this._count)}replaceChild(t,e){throw new Error("")}find(t,e=!1){let i=null;return this.forEachChildren(((r,o)=>!(r===this||!t(r,o))&&(i=r,!0))),e&&this.forEachChildren((r=>{if(r.isContainer){const o=r.find(t,!0);if(o)return i=o,!0}return!1})),i}findAll(t,e=!1){let i=[];return this.forEachChildren(((r,o)=>{r!==this&&t(r,o)&&i.push(r)})),e&&this.forEachChildren((r=>{if(r.isContainer){const o=r.findAll(t,!0);o.length&&(i=i.concat(o))}})),i}getElementById(t){return this.find((e=>e.id===t),!0)}findChildById(t){return this.getElementById(t)}findChildByUid(t){return this._idMap&&this._idMap.get(t)||null}getElementsByName(t){return this.findAll((e=>e.name===t),!0)}findChildrenByName(t){return this.getElementsByName(t)}getElementsByType(t){return this.findAll((e=>e.type===t),!0)}getChildByName(t,e=!1){return this.find((i=>i.name===t),e)}getChildAt(t){let e=this._firstChild;if(!e)return null;for(let i=0;i<t;i++){if(!e._next)return null;e=e._next}return e}at(t){return this.getChildAt(t)}containNode(t){if(!this._idMap)return!1;if(this._idMap.has(t._uid))return!0;let e=this._firstChild;for(;e;){if(e.containNode(t))return!0;e=e._next}return!1}getRootNode(){let t=this.parent;for(;t?.parent;)t=t.parent;return t||this}hasChildNodes(){return this._firstChild!==null}addChild(t){return this.appendChild(t)}add(t){return this.appendChild(t)}getChildren(){const t=[];let e=this._firstChild;for(;e;)t.push(e),e=e._next;return t}isChildOf(t){return!!this.parent&&this.parent._uid===t._uid}isParentOf(t){return t.isChildOf(this)}isDescendantsOf(t){let e=this.parent;if(!e)return!1;do{if(e._uid===t._uid)return!0;e=e.parent}while(e!==null);return!1}isAncestorsOf(t){return t.isDescendantsOf(this)}getAncestor(t){throw new Error("")}setAllDescendantsProps(t,e){let i=this._firstChild;for(;i;)i[t]=e,i.setAllDescendantsProps(t,e),i=i._next}setCount(t){this._count+=t;let e=this.parent;if(e)do e._count+=t,e=e.parent;while(e!==null)}clone(){throw new Error("")}cloneTo(t){throw new Error("")}getParent(){return this.parent}del(t){return this.removeChild(t)}addEventListener(t,e,i){const r=Cb(i,!0)&&i||Rc(i)&&i.capture,o=Rc(i)&&i.once,a=$c(e)?void 0:e;return t=r?`${t}capture`:t,e=$c(e)?e:e.handleEvent,o?super.once(t,e,a):super.on(t,e,a),this}on(t,e,i){return this.addEventListener(t,e,i)}removeEventListener(t,e,i){const r=Cb(i,!0)&&i||Rc(i)&&i.capture,o=$c(e)?void 0:e;t=r?`${t}capture`:t,e=$c(e)?e:e.handleEvent;const a=Rc(i)&&i.once;return super.off(t,e,o,a),this}off(t,e,i){return this.removeEventListener(t,e,i)}once(t,e,i){return Rc(i)?(i.once=!0,this.addEventListener(t,e,i)):this.addEventListener(t,e,{once:!0})}removeAllEventListeners(){return super.removeAllListeners(),this}removeAllListeners(){return this.removeAllEventListeners()}dispatchEvent(t,...e){return super.emit(t.type,t,...e),!t.defaultPrevented}emit(t,e){return this.dispatchEvent(t,e)}release(){this.removeAllListeners()}};class k_{get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get x(){return this.canvas.x}get y(){return this.canvas.y}get canvasX(){return this.canvas.x}get canvasY(){return this.canvas.y}get viewX(){return this.viewport.x}get viewY(){return this.viewport.y}constructor(t){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=k_.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer={x:0,y:0},this.page={x:0,y:0},this.canvas={x:0,y:0},this.viewport={x:0,y:0},this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=t}composedPath(){return!this.manager||this.path&&this.path[this.path.length-1]===this.target||(this.path=this.target?this.manager.propagationPath(this.target):[]),this.composedDetailPath(),this.path}composedDetailPath(){return this.pickParams&&this.pickParams.graphic?(this.detailPath=this.path.slice(),this._composedDetailPath(this.pickParams)):this.detailPath=this.path.slice(),this.detailPath}_composedDetailPath(t){if(t&&t.graphic){const e=t.graphic;if(e.stage){const i=e.stage.eventSystem.manager.propagationPath(e);this.detailPath.push(i),this._composedDetailPath(t.params)}}}preventDefault(){try{this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault()}catch{this.nativeEvent.preventDefault&&$c(this.nativeEvent.preventDefault)&&this.nativeEvent.preventDefault()}this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){try{this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.stopPropagation()}catch{this.nativeEvent.stopPropagation&&$c(this.nativeEvent.stopPropagation)&&this.nativeEvent.stopPropagation()}this.propagationStopped=!0}initEvent(){}initUIEvent(){}clone(){throw new Error("Method not implemented.")}}class wS extends k_{constructor(){super(...arguments),this.client={x:0,y:0},this.movement={x:0,y:0},this.offset={x:0,y:0},this.global={x:0,y:0},this.screen={x:0,y:0}}get clientX(){return this.client.x}get clientY(){return this.client.y}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getModifierState(t){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(t)}initMouseEvent(t,e,i,r,o,a,s,l,h,u,d,c,f,g,p){throw new Error("Method not implemented.")}}class zo extends wS{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}clone(){var t,e,i;const r=new zo(this.manager);r.eventPhase=r.NONE,r.currentTarget=null,r.path=[],r.detailPath=[],r.target=null,r.nativeEvent=this.nativeEvent,r.originalEvent=this.originalEvent,(t=this.manager)===null||t===void 0||t.copyPointerData(this,r),(e=this.manager)===null||e===void 0||e.copyMouseData(this,r),(i=this.manager)===null||i===void 0||i.copyData(this,r),r.target=this.target,r.path=this.composedPath().slice();const o=this.composedDetailPath();return r.detailPath=o&&o.slice(),r.type=this.type,r}}class Xu extends wS{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}clone(){var t,e,i;const r=new Xu(this.manager);r.eventPhase=r.NONE,r.currentTarget=null,r.path=[],r.detailPath=[],r.target=null,r.nativeEvent=this.nativeEvent,r.originalEvent=this.originalEvent,(t=this.manager)===null||t===void 0||t.copyWheelData(this,r),(e=this.manager)===null||e===void 0||e.copyMouseData(this,r),(i=this.manager)===null||i===void 0||i.copyData(this,r),r.target=this.target,r.path=this.composedPath().slice();const o=this.composedDetailPath();return r.detailPath=o&&o.slice(),r.type=this.type,r}}Xu.DOM_DELTA_PIXEL=0,Xu.DOM_DELTA_LINE=1,Xu.DOM_DELTA_PAGE=2;class g3 extends k_{constructor(t,e){super(),this.type=t,this.detail=e}}const uat="*",Uc=typeof performance=="object"&&performance.now?performance:Date;function hu(n){return n==="mouse"||n==="pen"}let iWt=class{constructor(t,e){this.dispatch=new ng,this.cursorTarget=null,this.pauseNotify=!1,this.mappingState={trackingData:{}},this.eventPool=new Map,this.onPointerDown=(i,r)=>{if(!(i instanceof zo))return void bo.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event");const o=this.createPointerEvent(i,i.type,r);if(this.dispatchEvent(o,"pointerdown"),o.pointerType==="touch")this.dispatchEvent(o,"touchstart");else if(hu(o.pointerType)){const a=o.button===2;this.dispatchEvent(o,a?"rightdown":"mousedown")}this.trackingData(i.pointerId).pressTargetsByButton[i.button]=o.composedPath(),this.freeEvent(o)},this.onPointerMove=(i,r)=>{var o,a;if(!(i instanceof zo))return void bo.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event");const s=this.createPointerEvent(i,i.type,r),l=hu(s.pointerType),h=this.trackingData(i.pointerId),u=this.findMountedTarget(h.overTargets);if(h.overTargets&&u&&u!==this.rootTarget&&u!==s.target){const d=i.type==="mousemove"?"mouseout":"pointerout",c=this.createPointerEvent(i,d,u||void 0);if(this.dispatchEvent(c,"pointerout"),l&&this.dispatchEvent(c,"mouseout"),!s.composedPath().includes(u)){const f=this.createPointerEvent(i,"pointerleave",u||void 0);for(f.eventPhase=f.AT_TARGET;f.target&&!s.composedPath().includes(f.target);)f.currentTarget=f.target,this.notifyTarget(f),l&&this.notifyTarget(f,"mouseleave"),f.target=f.target.parent;this.freeEvent(f)}this.freeEvent(c)}if(u!==s.target){const d=i.type==="mousemove"?"mouseover":"pointerover",c=this.clonePointerEvent(s,d);this.dispatchEvent(c,"pointerover"),l&&this.dispatchEvent(c,"mouseover");let f=u?.parent;for(;f&&f!==this.rootTarget.parent&&f!==s.target;)f=f.parent;if(!f||f===this.rootTarget.parent){const g=this.clonePointerEvent(s,"pointerenter");g.eventPhase=g.AT_TARGET;let p=g.target;const v=new Set;let m=u;for(;m&&m!==this.rootTarget;)v.add(m),m=m.parent;for(;p&&p!==u&&p!==this.rootTarget.parent;)v.has(p)||(g.currentTarget=p,this.notifyTarget(g),l&&this.notifyTarget(g,"mouseenter")),p=p.parent;this.freeEvent(g)}this.freeEvent(c)}this.dispatchEvent(s,"pointermove"),s.pointerType==="touch"&&this.dispatchEvent(s,"touchmove"),l&&(this.dispatchEvent(s,"mousemove"),this.cursorTarget=s.target,this.cursor=((a=(o=s.target)===null||o===void 0?void 0:o.attribute)===null||a===void 0?void 0:a.cursor)||this.rootTarget.getCursor()),h.overTargets=s.composedPath(),this.freeEvent(s)},this.onPointerOver=(i,r)=>{var o,a;if(!(i instanceof zo))return void bo.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event");const s=this.trackingData(i.pointerId),l=this.createPointerEvent(i,i.type,r),h=hu(l.pointerType);this.dispatchEvent(l,"pointerover"),h&&this.dispatchEvent(l,"mouseover"),l.pointerType==="mouse"&&(this.cursorTarget=l.target,this.cursor=((a=(o=l.target)===null||o===void 0?void 0:o.attribute)===null||a===void 0?void 0:a.cursor)||this.rootTarget.getCursor());const u=this.clonePointerEvent(l,"pointerenter");for(u.eventPhase=u.AT_TARGET;u.target&&u.target!==this.rootTarget.parent;)u.currentTarget=u.target,this.notifyTarget(u),h&&this.notifyTarget(u,"mouseenter"),u.target=u.target.parent;s.overTargets=l.composedPath(),this.freeEvent(l),this.freeEvent(u)},this.onPointerOut=(i,r)=>{if(!(i instanceof zo))return void bo.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event");const o=this.trackingData(i.pointerId);if(o.overTargets){const a=hu(i.pointerType),s=this.findMountedTarget(o.overTargets),l=this.createPointerEvent(i,"pointerout",s||void 0);this.dispatchEvent(l),a&&this.dispatchEvent(l,"mouseout");const h=this.createPointerEvent(i,"pointerleave",s||void 0);for(h.eventPhase=h.AT_TARGET;h.target&&h.target!==this.rootTarget.parent;)h.currentTarget=h.target,this.notifyTarget(h),a&&this.notifyTarget(h,"mouseleave"),h.target=h.target.parent;o.overTargets=[],this.freeEvent(l),this.freeEvent(h)}this.cursorTarget=null,this.cursor=""},this.onPointerUp=(i,r)=>{var o;if(!(i instanceof zo))return void bo.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event");const a=Uc.now(),s=this.createPointerEvent(i,i.type,r);if(this.dispatchEvent(s,"pointerup"),s.pointerType==="touch")this.dispatchEvent(s,"touchend");else if(hu(s.pointerType)){const d=s.button===2;this.dispatchEvent(s,d?"rightup":"mouseup")}const l=this.trackingData(i.pointerId),h=this.findMountedTarget(l.pressTargetsByButton[i.button]);let u=h;if(h&&!s.composedPath().includes(h)){let d=h;for(;d&&!s.composedPath().includes(d);){if(s.currentTarget=d,this.notifyTarget(s,"pointerupoutside"),s.pointerType==="touch")this.notifyTarget(s,"touchendoutside");else if(hu(s.pointerType)){const c=s.button===2;this.notifyTarget(s,c?"rightupoutside":"mouseupoutside")}d=d.parent}delete l.pressTargetsByButton[i.button],u=d}if(u){const d=this.clonePointerEvent(s,"click");d.target=u,d.path=[],d.detailPath=[],l.clicksByButton[i.button]||(l.clicksByButton[i.button]={clickCount:0,target:d.target,timeStamp:a});const c=l.clicksByButton[i.button];c.target===d.target&&a-c.timeStamp<((o=this._config.clickInterval)!==null&&o!==void 0?o:200)?++c.clickCount:c.clickCount=1,c.target=d.target,c.timeStamp=a,d.detail=c.clickCount,hu(d.pointerType)?(this.dispatchEvent(d,"click"),c.clickCount===2&&this.dispatchEvent(d,"dblclick")):d.pointerType==="touch"&&this._config.supportsTouchEvents&&(this.dispatchEvent(d,"tap"),c.clickCount===2&&this.dispatchEvent(d,"dbltap")),this.dispatchEvent(d,"pointertap"),this.freeEvent(d)}this.freeEvent(s)},this.onPointerUpOutside=(i,r)=>{if(!(i instanceof zo))return void bo.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event");const o=this.trackingData(i.pointerId),a=this.findMountedTarget(o.pressTargetsByButton[i.button]),s=this.createPointerEvent(i,i.type,r);if(a){let l=a;for(;l;)s.currentTarget=l,this.notifyTarget(s,"pointerupoutside"),s.pointerType==="touch"?this.notifyTarget(s,"touchendoutside"):hu(s.pointerType)&&this.notifyTarget(s,s.button===2?"rightupoutside":"mouseupoutside"),l=l.parent;delete o.pressTargetsByButton[i.button]}this.freeEvent(s)},this.onWheel=(i,r)=>{if(!(i instanceof Xu))return void bo.getInstance().warn("EventManager cannot map a non-wheel event as a wheel event");const o=this.createWheelEvent(i,r);this.dispatchEvent(o),this.freeEvent(o)},this.rootTarget=t,this.mappingTable={},this._config=Object.assign({clickInterval:200},e),this.addEventMapping("pointerdown",this.onPointerDown),this.addEventMapping("pointermove",this.onPointerMove),this.addEventMapping("pointerout",this.onPointerOut),this.addEventMapping("pointerleave",this.onPointerOut),this.addEventMapping("pointerover",this.onPointerOver),this.addEventMapping("pointerup",this.onPointerUp),this.addEventMapping("pointerupoutside",this.onPointerUpOutside),this.addEventMapping("wheel",this.onWheel)}addEventMapping(t,e){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:e,priority:0}),this.mappingTable[t].sort(((i,r)=>i.priority-r.priority))}dispatchEvent(t,e){t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,e),this.dispatch.emit(e||t.type,t)}mapEvent(t){var e,i,r,o,a,s,l;if(!this.rootTarget)return;const h=this.mappingTable[t.type];let u;const d=`${t.canvasX}-${t.canvasY}`;if(!((e=this._prePointTargetCache)===null||e===void 0)&&e[d]&&(!((r=(i=this._prePointTargetCache)===null||i===void 0?void 0:i[d])===null||r===void 0)&&r.stage)&&((a=(o=this._prePointTargetCache)===null||o===void 0?void 0:o[d])===null||a===void 0?void 0:a.stage.renderCount)===((s=this._prePointTargetCache)===null||s===void 0?void 0:s.stageRenderCount)?u=this._prePointTargetCache[d]:(u=this.pickTarget(t.viewX,t.viewY,t),t.pickParams||(this._prePointTargetCache={[d]:u,stageRenderCount:(l=u?.stage.renderCount)!==null&&l!==void 0?l:-1})),h)for(let c=0,f=h.length;c<f;c++)h[c].fn(t,u);else bo.getInstance().warn(`[EventManager]: Event mapping not defined for ${t.type}`)}propagate(t,e){if(!t.target)return;const i=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(let r=0,o=i.length-1;r<o;r++)if(t.currentTarget=i[r],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,e),!t.propagationStopped&&!t.propagationImmediatelyStopped){t.eventPhase=t.BUBBLING_PHASE;for(let r=i.length-2;r>=0;r--)if(t.currentTarget=i[r],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return}}propagationPath(t){const e=[t];for(let i=0;i<2048&&t!==this.rootTarget&&t.parent;i++){if(!t.parent)throw new Error("Cannot find propagation path to disconnected target");e.push(t.parent),t=t.parent}return e.reverse(),e}notifyTarget(t,e){if(this.pauseNotify)return;e=e??t.type;const i=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?`${e}capture`:e;this.notifyListeners(t,i),t.eventPhase===t.AT_TARGET&&this.notifyListeners(t,e)}findMountedTarget(t){if(!t)return null;let e=t[0];for(let i=1;i<t.length&&t[i].parent===e;i++)e=t[i];return e}createPointerEvent(t,e,i){var r,o;const a=this.allocateEvent(zo);return this.copyPointerData(t,a),this.copyMouseData(t,a),this.copyData(t,a),a.nativeEvent=t.nativeEvent,a.originalEvent=t,a.target=i||this.pickTarget((r=a.viewX)!==null&&r!==void 0?r:a.global.x,(o=a.viewY)!==null&&o!==void 0?o:a.global.y,a),typeof e=="string"&&(a.type=e),a}createWheelEvent(t,e){var i,r;const o=this.allocateEvent(Xu);return this.copyWheelData(t,o),this.copyMouseData(t,o),this.copyData(t,o),o.nativeEvent=t.nativeEvent,o.originalEvent=t,o.target=e||this.pickTarget((i=o.viewX)!==null&&i!==void 0?i:o.global.x,(r=o.viewY)!==null&&r!==void 0?r:o.global.y,o),o}clonePointerEvent(t,e){const i=this.allocateEvent(zo);i.nativeEvent=t.nativeEvent,i.originalEvent=t.originalEvent,this.copyPointerData(t,i),this.copyMouseData(t,i),this.copyData(t,i),i.target=t.target,i.path=t.composedPath().slice();const r=t.composedDetailPath();return i.detailPath=r&&r.slice(),i.type=e??i.type,i}copyWheelData(t,e){e.deltaMode=t.deltaMode,e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ}copyPointerData(t,e){t instanceof zo&&e instanceof zo&&(e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist)}copyMouseData(t,e){t instanceof wS&&e instanceof wS&&(e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.ctrlKey=t.ctrlKey,e.shiftKey=t.shiftKey,e.metaKey=t.metaKey,["client","movement","canvas","screen","global","offset","viewport"].forEach((i=>{e[i].x=t[i].x,e[i].y=t[i].y})))}copyData(t,e){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=Uc.now(),e.type=t.type,e.detail=t.detail,e.view=t.view,e.which=t.which,e.layer.x=t.layer.x,e.layer.y=t.layer.y,e.page.x=t.page.x,e.page.y=t.page.y,e.pickParams=t.pickParams}trackingData(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]}allocateEvent(t){var e;this.eventPool.has(t)||this.eventPool.set(t,[]);const i=((e=this.eventPool.get(t))===null||e===void 0?void 0:e.pop())||new t(this);return i.eventPhase=i.NONE,i.currentTarget=null,i.path=[],i.detailPath=[],i.target=null,i}freeEvent(t){var e;if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventManager!");const i=t.constructor;this.eventPool.has(i)||this.eventPool.set(i,[]),(e=this.eventPool.get(i))===null||e===void 0||e.push(t)}notifyListeners(t,e){const i=t.currentTarget._events[e];if(i)if("fn"in i)i.once&&t.currentTarget.removeEventListener(e,i.fn,{once:!0}),i.fn.call(i.context,t);else for(let r=0,o=i.length;r<o&&!t.propagationImmediatelyStopped;r++)i[r].once&&t.currentTarget.removeEventListener(e,i[r].fn,{once:!0}),i[r].fn.call(i[r].context,t);this.emitDelegation(t,e)}emitDelegation(t,e){const i=t.currentTarget._events[uat];if(i)if("fn"in i)i.fn.call(i.context,t,e);else for(let r=0,o=i.length;r<o&&!t.propagationImmediatelyStopped;r++)i[r].fn.call(i[r].context,t,e)}pickTarget(t,e,i){let r;const o=this.rootTarget.pick(t,e);return r=o&&o.graphic?o.graphic:o&&o.group?o.group:this.rootTarget.AABBBounds.contains(t,e)?this.rootTarget:null,i&&(i.pickParams=o.params),r}release(){this.dispatch.removeAllListeners(),this.eventPool.clear(),this.rootTarget=null,this.mappingTable=null,this.mappingState=null,this.cursorTarget=null}};const nWt={dispatchEvent(n){var t;if(!(n instanceof k_))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return n.defaultPrevented=!1,n.path=[],n.detailPath&&(n.detailPath=[]),n.target=this,(t=n?.manager)===null||t===void 0||t.dispatchEvent(n),!n.defaultPrevented},emit(n,t){return this.dispatchEvent(new g3(n,t))}},rWt={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"};class oWt{constructor(t){this.resolution=1,this.onPointerDown=u=>{if(this.supportsTouchEvents&&u.pointerType==="touch")return;const d=this.normalizeToPointerData(u);this.autoPreventDefault&&d[0].isNormalized&&(u.cancelable||!("cancelable"in u))&&u.preventDefault();for(let c=0,f=d.length;c<f;c++){const g=d[c],p=this.bootstrapEvent(this.rootPointerEvent,g);this.manager.mapEvent(p)}this.setCursor(this.manager.cursor,this.manager.cursorTarget),this.rootPointerEvent.nativeEvent=null},this.onPointerMove=u=>{if(this.supportsTouchEvents&&u.pointerType==="touch"||this.isEventOutsideOfTargetElement(u))return;const d=this.normalizeToPointerData(u);for(let c=0,f=d.length;c<f;c++){const g=this.bootstrapEvent(this.rootPointerEvent,d[c]);this.manager.mapEvent(g)}this.setCursor(this.manager.cursor,this.manager.cursorTarget),this.rootPointerEvent.nativeEvent=null},this.onPointerUp=u=>{if(this.supportsTouchEvents&&u.pointerType==="touch")return;const d=this.isEventOutsideOfTargetViewPort(u)?"outside":"",c=this.normalizeToPointerData(u);for(let f=0,g=c.length;f<g;f++){const p=this.bootstrapEvent(this.rootPointerEvent,c[f]);p.type+=d,this.manager.mapEvent(p)}this.setCursor(this.manager.cursor,this.manager.cursorTarget),this.rootPointerEvent.nativeEvent=null},this.onPointerOverOut=u=>{if(this.supportsTouchEvents&&u.pointerType==="touch")return;const d=this.normalizeToPointerData(u);for(let c=0,f=d.length;c<f;c++){const g=this.bootstrapEvent(this.rootPointerEvent,d[c]);this.manager.mapEvent(g)}this.setCursor(this.manager.cursor,this.manager.cursorTarget),this.rootPointerEvent.nativeEvent=null},this.onWheel=u=>{const d=this.normalizeWheelEvent(u);this.manager.mapEvent(d)};const{targetElement:e,resolution:i,rootNode:r,global:o,autoPreventDefault:a=!1,clickInterval:s,supportsTouchEvents:l=o.supportsTouchEvents,supportsPointerEvents:h=o.supportsPointerEvents}=t;this.manager=new iWt(r,{clickInterval:s,supportsTouchEvents:l}),this.globalObj=o,this.supportsPointerEvents=h,this.supportsTouchEvents=l,this.supportsMouseEvents=o.supportsMouseEvents,this.applyStyles=o.applyStyles,this.autoPreventDefault=a,this.eventsAdded=!1,this.rootPointerEvent=new zo,this.rootWheelEvent=new Xu,this.cursorStyles={default:"inherit",pointer:"pointer"},this.resolution=i,this.setTargetElement(e)}release(){this.removeEvents(),this.manager&&this.manager.release(),this.domElement=null,this.manager=null,this.globalObj=null}setCursor(t,e){if(!e&&!this.manager.rootTarget.window._handler.canvas.controled)return;t||(t="default");const{applyStyles:i,domElement:r}=this;if(this.currentCursor===t)return;this.currentCursor=t;const o=this.cursorStyles[t];o?typeof o=="string"&&i?r.style.cursor=o:typeof o=="function"?o(t):typeof o=="object"&&i&&Object.assign(r.style,o):i&&bl(t)&&!uNt(this.cursorStyles,t)&&(r.style.cursor=t)}setTargetElement(t){this.removeEvents(),this.domElement=t,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;const{globalObj:t,domElement:e}=this;this.supportsPointerEvents?(t.getDocument()?(t.addEventListener("pointermove",this.onPointerMove,!0),t.addEventListener("pointerup",this.onPointerUp,!0)):(e.addEventListener("pointermove",this.onPointerMove,!0),e.addEventListener("pointerup",this.onPointerUp,!0)),e.addEventListener("pointerdown",this.onPointerDown,!0),e.addEventListener("pointerleave",this.onPointerOverOut,!0),e.addEventListener("pointerover",this.onPointerOverOut,!0)):(t.getDocument()?(t.addEventListener("mousemove",this.onPointerMove,!0),t.addEventListener("mouseup",this.onPointerUp,!0)):(e.addEventListener("mousemove",this.onPointerMove,!0),e.addEventListener("mouseup",this.onPointerUp,!0)),e.addEventListener("mousedown",this.onPointerDown,!0),e.addEventListener("mouseout",this.onPointerOverOut,!0),e.addEventListener("mouseover",this.onPointerOverOut,!0)),this.supportsTouchEvents&&(e.addEventListener("touchstart",this.onPointerDown,!0),e.addEventListener("touchend",this.onPointerUp,!0),e.addEventListener("touchmove",this.onPointerMove,!0)),e.addEventListener("wheel",this.onWheel,{capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;const{globalObj:t,domElement:e}=this;this.supportsPointerEvents?(t.getDocument()?(t.removeEventListener("pointermove",this.onPointerMove,!0),t.removeEventListener("pointerup",this.onPointerUp,!0)):(e.removeEventListener("pointermove",this.onPointerMove,!0),e.removeEventListener("pointerup",this.onPointerUp,!0)),e.removeEventListener("pointerdown",this.onPointerDown,!0),e.removeEventListener("pointerleave",this.onPointerOverOut,!0),e.removeEventListener("pointerover",this.onPointerOverOut,!0)):(t.getDocument()?(t.removeEventListener("mousemove",this.onPointerMove,!0),t.removeEventListener("mouseup",this.onPointerUp,!0)):(e.removeEventListener("mousemove",this.onPointerMove,!0),e.removeEventListener("mouseup",this.onPointerUp,!0)),e.removeEventListener("mousedown",this.onPointerDown,!0),e.removeEventListener("mouseout",this.onPointerOverOut,!0),e.removeEventListener("mouseover",this.onPointerOverOut,!0)),this.supportsTouchEvents&&(e.removeEventListener("touchstart",this.onPointerDown,!0),e.removeEventListener("touchend",this.onPointerUp,!0),e.removeEventListener("touchmove",this.onPointerMove,!0)),e.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapToViewportPoint(t){return this.domElement.pointTransform?this.domElement.pointTransform(t.x,t.y):t}mapToCanvasPoint(t){var e,i;const r=(e=this.globalObj)===null||e===void 0?void 0:e.mapToCanvasPoint(t,this.domElement);if(r)return r;let o=0,a=0;if(t.changedTouches){const l=(i=t.changedTouches[0])!==null&&i!==void 0?i:{};o=l.clientX||0,a=l.clientY||0}else o=t.clientX||0,a=t.clientY||0;const s=this.domElement.getBoundingClientRect();return{x:o-s.left,y:a-s.top}}normalizeToPointerData(t){const e=[];if(this.supportsTouchEvents&&t.changedTouches&&t.changedTouches.length)for(let i=0,r=t.changedTouches.length;i<r;i++){const o=t.changedTouches[i];$i(o.button)&&(o.button=0),$i(o.buttons)&&(o.buttons=1),$i(o.isPrimary)&&(o.isPrimary=t.touches.length===1&&t.type==="touchstart"),$i(o.width)&&(o.width=o.radiusX||1),$i(o.height)&&(o.height=o.radiusY||1),$i(o.tiltX)&&(o.tiltX=0),$i(o.tiltY)&&(o.tiltY=0),$i(o.pointerType)&&(o.pointerType="touch"),$i(o.pointerId)&&(o.pointerId=o.identifier||0),$i(o.pressure)&&(o.pressure=o.force||.5),$i(o.twist)&&(o.twist=0),$i(o.tangentialPressure)&&(o.tangentialPressure=0),$i(o.layerX)&&(o.layerX=o.offsetX=o.clientX),$i(o.layerY)&&(o.layerY=o.offsetY=o.clientY),o.isNormalized=!0,o.type=t.type,e.push(o)}else if(this.globalObj.supportsMouseEvents&&(!(t instanceof MouseEvent)||this.supportsPointerEvents&&t instanceof PointerEvent))e.push(t);else{const i=t;$i(i.isPrimary)&&(i.isPrimary=!0),$i(i.width)&&(i.width=1),$i(i.height)&&(i.height=1),$i(i.tiltX)&&(i.tiltX=0),$i(i.tiltY)&&(i.tiltY=0),$i(i.pointerType)&&(i.pointerType="mouse"),$i(i.pointerId)&&(i.pointerId=1),$i(i.pressure)&&(i.pressure=.5),$i(i.twist)&&(i.twist=0),$i(i.tangentialPressure)&&(i.tangentialPressure=0),i.isNormalized=!0,e.push(i)}return e}normalizeWheelEvent(t){const e=this.rootWheelEvent;this.transferMouseData(e,t),e.deltaMode=t.deltaMode,e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ;const{x:i,y:r}=this.mapToCanvasPoint(t);e.canvas.x=i,e.canvas.y=r,e.global.x=i,e.global.y=r,e.offset.x=i,e.offset.y=r;const{x:o,y:a}=this.mapToViewportPoint(e);return e.viewport.x=o,e.viewport.y=a,e.nativeEvent=t,e.type=t.type,e}bootstrapEvent(t,e){t.originalEvent=null,t.nativeEvent=e,t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,this.transferMouseData(t,e);const{x:i,y:r}=this.mapToCanvasPoint(e);t.canvas.x=i,t.canvas.y=r,t.global.x=i,t.global.y=r,t.offset.x=i,t.offset.y=r;const{x:o,y:a}=this.mapToViewportPoint(t);return t.viewport.x=o,t.viewport.y=a,t.isTrusted=e.isTrusted,t.type==="pointerleave"&&(t.type="pointerout"),t.type.startsWith("mouse")&&(t.type=t.type.replace("mouse","pointer")),t.type.startsWith("touch")&&(t.type=rWt[t.type]||t.type),t}transferMouseData(t,e){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=Uc.now(),t.type=e.type,t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.x=e.clientX,t.client.y=e.clientY,t.ctrlKey=e.ctrlKey,t.shiftKey=e.shiftKey,t.metaKey=e.metaKey,t.movement.x=e.movementX,t.movement.y=e.movementY,t.page.x=e.pageX,t.page.y=e.pageY,t.relatedTarget=null}isEventOutsideOfTargetViewPort(t){if(this.isEventOutsideOfTargetElement(t))return!0;if(this.domElement.getViewBox){const e=this.mapToViewportPoint(this.mapToCanvasPoint(t)),i=this.domElement.getViewBox(),r=i.width(),o=i.height();return!(e.x<r&&e.y<o&&e.x>0&&e.y>0)}return!1}isEventOutsideOfTargetElement(t){let e=t.target;return t.composedPath&&t.composedPath().length>0&&(e=t.composedPath()[0]),e!==(this.domElement.getNativeHandler?this.domElement.getNativeHandler().nativeCanvas:this.domElement)}pauseTriggerEvent(){this.manager.pauseNotify=!0}resumeTriggerEvent(){this.manager.pauseNotify=!1}}class ai{static GetImage(t,e){var i;const r=ai.cache.get(t);r?r.loadState==="fail"?St.global.getRequestAnimationFrame()((()=>{e.imageLoadFail(t)})):r.loadState==="init"||r.loadState==="loading"?(i=r.waitingMark)===null||i===void 0||i.push(e):e&&e.imageLoadSuccess(t,r.data):ai.loadImage(t,e)}static GetSvg(t,e){var i;let r=ai.cache.get(t);r?r.loadState==="fail"?St.global.getRequestAnimationFrame()((()=>{e.imageLoadFail(t)})):r.loadState==="init"||r.loadState==="loading"?(i=r.waitingMark)===null||i===void 0||i.push(e):e&&e.imageLoadSuccess(t,r.data):(r={type:"image",loadState:"init"},ai.cache.set(t,r),r.dataPromise=St.global.loadSvg(t),r.dataPromise?(r.waitingMark=[e],r.dataPromise.then((o=>{var a;r.loadState=o?.data?"success":"fail",r.data=o?.data,(a=r.waitingMark)===null||a===void 0||a.map(((s,l)=>{o?.data?(r.loadState="success",r.data=o.data,s.imageLoadSuccess(t,o.data)):(r.loadState="fail",s.imageLoadFail(t))})),r.waitingMark&&(r.waitingMark=[])}))):(r.loadState="fail",e.imageLoadFail(t)))}static GetFile(t,e){let i=ai.cache.get(t);return i?i.loadState==="fail"?Promise.reject():i.loadState==="init"||i.loadState==="loading"?i.dataPromise.then((r=>r.data)):Promise.resolve(i.data):(i={type:e,loadState:"init"},ai.cache.set(t,i),e==="arrayBuffer"?i.dataPromise=St.global.loadArrayBuffer(t):e==="blob"?i.dataPromise=St.global.loadBlob(t):e==="json"&&(i.dataPromise=St.global.loadJson(t)),i.dataPromise.then((r=>r.data)))}static loading(){setTimeout((()=>{if(!ai.isLoading&&ai.toLoadAueue.length){ai.isLoading=!0;const t=ai.toLoadAueue.splice(0,10),e=[];t.forEach((i=>{const{url:r,marks:o}=i,a={type:"image",loadState:"init"};if(ai.cache.set(r,a),a.dataPromise=St.global.loadImage(r),a.dataPromise){a.waitingMark=o;const s=a.dataPromise.then((l=>{var h;a.loadState=l?.data?"success":"fail",a.data=l?.data,(h=a.waitingMark)===null||h===void 0||h.map(((u,d)=>{l?.data?(a.loadState="success",a.data=l.data,u.imageLoadSuccess(r,l.data)):(a.loadState="fail",u.imageLoadFail(r))})),a.waitingMark&&(a.waitingMark=[])}));e.push(s)}else a.loadState="fail",o.forEach((s=>s.imageLoadFail(r)))})),Promise.all(e).then((()=>{ai.isLoading=!1,this.onLoadSuccessCb.forEach((i=>i())),ai.loading()})).catch((i=>{ai.isLoading=!1,this.onLoadSuccessCb.forEach((r=>r())),ai.loading()}))}}),0)}static loadImage(t,e){const i=T7(t,ai.toLoadAueue);if(i!==-1)return ai.toLoadAueue[i].marks.push(e),void ai.loading();ai.toLoadAueue.push({url:t,marks:[e]}),ai.loading()}static improveImageLoading(t){const e=T7(t,ai.toLoadAueue);if(e!==-1){const i=ai.toLoadAueue.splice(e,1);ai.toLoadAueue.unshift(i[0])}}static onLoadSuccess(t){this.onLoadSuccessCb.push(t)}}function T7(n,t){for(let e=0;e<t.length;e++)if(t[e].url===n)return e;return-1}ai.cache=new Map,ai.isLoading=!1,ai.toLoadAueue=[],ai.onLoadSuccessCb=[];var M7;(function(n){n[n.Top=1]="Top",n[n.Right=2]="Right",n[n.Bottom=4]="Bottom",n[n.Left=8]="Left",n[n.ALL=15]="ALL"})(M7||(M7={}));const jl=[!1,!1,!1,!1],aWt=n=>{var t;let e=!0;if(Cb(n,!0)){for(let i=0;i<4;i++)jl[i]=n,e&&(e=!((t=jl[i])!==null&&t!==void 0&&!t));e=n}else if(Array.isArray(n))for(let i=0;i<4;i++)jl[i]=!!n[i],e&&(e=!!jl[i]);else jl[0]=!1,jl[1]=!1,jl[2]=!1,jl[3]=!1;return{isFullStroke:e,stroke:jl}},Xm=[0,0,0,0],xS=n=>n?$e(n)?n.length===0?0:n.length===1?n[0]:n.length===2?(Xm[0]=n[0],Xm[2]=n[0],Xm[1]=n[1],Xm[3]=n[1],Xm):n:n:0,Dg=[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],S1=[1,2,3,0,1,2,3,0];function TI(n,t,e,i){for(;n>=le;)n-=le;for(;n<0;)n+=le;for(;n>t;)t+=le;Dg[0].x=e,Dg[1].y=e,Dg[2].x=-e,Dg[3].y=-e;const r=Math.ceil(n/Ia)%4,o=Math.ceil(t/Ia)%4;if(i.add(wn(n)*e,Hi(n)*e),i.add(wn(t)*e,Hi(t)*e),r!==o||t-n>Ki){let a=!1;for(let s=0;s<S1.length;s++)if(a||r!==S1[s]){if(a&&o===S1[s])break;if(a){const l=Dg[S1[s]];i.add(l.x,l.y)}}else{a=!0;const l=Dg[r];i.add(l.x,l.y)}}}function MI(n,t,e){const{x:i,y:r}=r7(n.x,n.y,t.x,t.y,e),{x:o,y:a}=r7(n.x1,n.y1,t.x1,t.y1,e),s=new ci(i,r,o,a);return s.defined=t.defined,s}function VM(n,t,e){if(!n||!t)return[];Array.isArray(n)||(n=[n]),Array.isArray(t)||(t=[t]);let i=[];if(n.length>t.length){i=t.map((r=>{const o=new ci(r.x,r.y,r.x1,r.y1);return o.defined=r.defined,o}));for(let r=0;r<t.length;r++)i[r]=MI(n[r],t[r],e)}else{i=t.map((r=>{const o=new ci(r.x,r.y,r.x1,r.y1);return o.defined=r.defined,o}));for(let r=0;r<n.length;r++)i[r]=MI(n[r],t[r],e)}return i}function A1(n,t){if($e(n)){let e;for(let i=0;i<n.length&&e===void 0;i++)e=n[i][t];return e}return n[t]}class GM{constructor(t=GM.TimeOut){this.durations=[],this.timeout=t,this.lastDate=0,this.durationsListThreshold=30}call(t){return this.lastDate=Date.now(),setTimeout((()=>{this.appendDuration(Date.now()-this.lastDate),t(0)}),this.timeout,!0)}clear(t){clearTimeout(t)}appendDuration(t){this.durations.push(t),this.durations.length>this.durationsListThreshold&&this.durations.shift(),this.timeout=Math.min(Math.max(this.durations.reduce(((e,i)=>e+i),0)/this.durations.length,1e3/60),1e3/30)}}GM.TimeOut=1e3/60;const R7=new GM,sWt=(n,t)=>bl(n)&&n[n.length-1]==="%"?t*(Number.parseFloat(n.substring(0,n.length-1))/100):n,L_=(n,t)=>{const e=sWt(n,t);return isNaN(e)?e:Math.max(t,e)};class vn{bounds(t,e){if(Kn(t)){const i=t/2;e.x1=-i,e.x2=i,e.y1=-i,e.y2=i}else e.x1=-t[0]/2,e.x2=t[0]/2,e.y1=-t[1]/2,e.y2=t[1]/2}parseSize(t){return Kn(t)?t:Math.min(t[0],t[1])}}function P7(n,t,e,i,r){return r?n.arc(e,i,t,0,_r,!1,r):n.arc(e,i,t,0,_r),!1}class lWt extends vn{constructor(){super(...arguments),this.type="circle",this.pathStr="M0.5,0A0.5,0.5,0,1,1,-0.5,0A0.5,0.5,0,1,1,0.5,0"}draw(t,e,i,r,o){return P7(t,this.parseSize(e)/2,i,r,o)}drawOffset(t,e,i,r,o,a){return P7(t,this.parseSize(e)/2+o,i,r,a)}drawToSvgPath(t,e,i,r){const o=this.parseSize(t)/2;return`M ${e-o}, ${i} a ${o},${o} 0 1,0 ${2*o},0 a ${o},${o} 0 1,0 -${2*o},0`}}const hWt=new lWt;function uWt(n,t,e,i,r){return n.moveTo(-3*t+e,-t+i,r),n.lineTo(-t+e,-t+i,r),n.lineTo(-t+e,-3*t+i,r),n.lineTo(t+e,-3*t+i,r),n.lineTo(t+e,-t+i,r),n.lineTo(3*t+e,-t+i,r),n.lineTo(3*t+e,t+i,r),n.lineTo(t+e,t+i,r),n.lineTo(t+e,3*t+i,r),n.lineTo(-t+e,3*t+i,r),n.lineTo(-t+e,t+i,r),n.lineTo(-3*t+e,t+i,r),n.closePath(),!0}function dWt(n,t,e,i,r,o){return n.moveTo(-3*t+e-r,-t+i-r,o),n.lineTo(-t+e-r,-t+i-r,o),n.lineTo(-t+e-r,-3*t+i-r,o),n.lineTo(t+e+r,-3*t+i-r,o),n.lineTo(t+e+r,-t+i-r,o),n.lineTo(3*t+e+r,-t+i-r,o),n.lineTo(3*t+e+r,t+i+r,o),n.lineTo(t+e+r,t+i+r,o),n.lineTo(t+e+r,3*t+i+r,o),n.lineTo(-t+e-r,3*t+i+r,o),n.lineTo(-t+e-r,t+i+r,o),n.lineTo(-3*t+e-r,t+i+r,o),n.closePath(),!0}class cWt extends vn{constructor(){super(...arguments),this.type="cross",this.pathStr="M-0.5,-0.2L-0.5,0.2L-0.2,0.2L-0.2,0.5L0.2,0.5L0.2,0.2L0.5,0.2L0.5,-0.2L0.2,-0.2L0.2,-0.5L-0.2,-0.5L-0.2,-0.2Z"}draw(t,e,i,r,o){return uWt(t,this.parseSize(e)/6,i,r,o)}drawOffset(t,e,i,r,o,a){return dWt(t,this.parseSize(e)/6,i,r,o,a)}}const fWt=new cWt;function rk(n,t,e,i,r){return n.moveTo(e,i-t,r),n.lineTo(t+e,i,r),n.lineTo(e,i+t,r),n.lineTo(e-t,i,r),n.closePath(),!0}class gWt extends vn{constructor(){super(...arguments),this.type="diamond",this.pathStr="M-0.5,0L0,-0.5L0.5,0L0,0.5Z"}draw(t,e,i,r,o){return rk(t,this.parseSize(e)/2,i,r,o)}drawFitDir(t,e,i,r,o){return rk(t,this.parseSize(e)/2,i,r,o)}drawOffset(t,e,i,r,o,a){return rk(t,this.parseSize(e)/2+o,i,r,a)}}const pWt=new gWt;function B7(n,t,e,i){const r=2*t;return n.rect(e-t,i-t,r,r),!1}class vWt extends vn{constructor(){super(...arguments),this.type="square",this.pathStr="M-0.5,-0.5h1v1h-1Z"}draw(t,e,i,r){return B7(t,this.parseSize(e)/2,i,r)}drawOffset(t,e,i,r,o){return B7(t,this.parseSize(e)/2+o,i,r)}}const mWt=new vWt;function k7(n,t,e,i,r=0){return n.moveTo(e+t+2*r,t+i+r),n.lineTo(e-t-2*r,t+i+r),n.lineTo(e,i-t-2*r),n.closePath(),!0}class dat extends vn{constructor(){super(...arguments),this.type="triangleUp",this.pathStr="M0.5,0.5 L-0.5,0.5 L0,-0.5 Z"}draw(t,e,i,r){return k7(t,this.parseSize(e)/2,i,r)}drawOffset(t,e,i,r,o){return k7(t,this.parseSize(e)/2,i,r,o)}}const yWt=new dat;class bWt extends dat{constructor(){super(...arguments),this.type="triangle"}}const _Wt=new bWt,cat=Math.sin(Math.PI/10)/Math.sin(7*Math.PI/10),CWt=Math.sin(_r/10)*cat,wWt=-Math.cos(_r/10)*cat;function L7(n,t,e,i){const r=CWt*t,o=wWt*t;n.moveTo(e,-t+i),n.lineTo(r+e,o+i);for(let a=1;a<5;++a){const s=_r*a/5,l=Math.cos(s),h=Math.sin(s);n.lineTo(h*t+e,-l*t+i),n.lineTo(l*r-h*o+e,h*r+l*o+i)}return n.closePath(),!0}class xWt extends vn{constructor(){super(...arguments),this.type="star",this.pathStr="M0 -1L0.22451398828979266 -0.3090169943749474L0.9510565162951535 -0.30901699437494745L0.3632712640026804 0.1180339887498948L0.5877852522924732 0.8090169943749473L8.326672684688674e-17 0.3819660112501051L-0.587785252292473 0.8090169943749476L-0.3632712640026804 0.11803398874989487L-0.9510565162951536 -0.30901699437494723L-0.22451398828979274 -0.30901699437494734Z"}draw(t,e,i,r){return L7(t,this.parseSize(e)/2,i,r)}drawOffset(t,e,i,r,o){return L7(t,this.parseSize(e)/2+o,i,r)}}const SWt=new xWt,AWt=ws(3);function E7(n,t,e,i){const r=t,o=r/AWt,a=o/5,s=t;return n.moveTo(0+e,-r+i),n.lineTo(o/2+e,i),n.lineTo(a/2+e,i),n.lineTo(a/2+e,s+i),n.lineTo(-a/2+e,s+i),n.lineTo(-a/2+e,i),n.lineTo(-o/2+e,i),n.closePath(),!0}class TWt extends vn{constructor(){super(...arguments),this.type="arrow",this.pathStr="M-0.07142857142857142,0.5L0.07142857142857142,0.5L0.07142857142857142,-0.0625L0.2,-0.0625L0,-0.5L-0.2,-0.0625L-0.07142857142857142,-0.0625Z"}draw(t,e,i,r){return E7(t,this.parseSize(e)/2,i,r)}drawOffset(t,e,i,r,o){return E7(t,this.parseSize(e)/2+o,i,r)}}const MWt=new TWt;function D7(n,t,e,i){const r=2*t;return n.moveTo(e,-t+i),n.lineTo(r/3/2+e,t+i),n.lineTo(-r/3/2+e,t+i),n.closePath(),!0}class RWt extends vn{constructor(){super(...arguments),this.type="wedge",this.pathStr="M0,-0.5773502691896257L-0.125,0.28867513459481287L0.125,0.28867513459481287Z"}draw(t,e,i,r){return D7(t,this.parseSize(e)/2,i,r)}drawOffset(t,e,i,r,o){return D7(t,this.parseSize(e)/2+o,i,r)}}const PWt=new RWt;function I7(n,t,e,i){return n.moveTo(-t+e,i),n.lineTo(e,t+i),!1}class BWt extends vn{constructor(){super(...arguments),this.type="stroke",this.pathStr=""}draw(t,e,i,r){return I7(t,this.parseSize(e)/2,i,r)}drawOffset(t,e,i,r,o){return I7(t,this.parseSize(e)/2+o,i,r)}}const kWt=new BWt,ua=-.5,da=ws(3)/2,O7=1/ws(12);function H7(n,t,e,i){const r=t/2,o=t*O7,a=r,s=t*O7+t,l=-a,h=s;return n.moveTo(r+e,o+i),n.lineTo(a+e,s+i),n.lineTo(l+e,h+i),n.lineTo(ua*r-da*o+e,da*r+ua*o+i),n.lineTo(ua*a-da*s+e,da*a+ua*s+i),n.lineTo(ua*l-da*h+e,da*l+ua*h+i),n.lineTo(ua*r+da*o+e,ua*o-da*r+i),n.lineTo(ua*a+da*s+e,ua*s-da*a+i),n.lineTo(ua*l+da*h+e,ua*h-da*l+i),n.closePath(),!1}class LWt extends vn{constructor(){super(...arguments),this.type="wye",this.pathStr="M0.25 0.14433756729740646L0.25 0.6443375672974064L-0.25 0.6443375672974064L-0.25 0.14433756729740643L-0.6830127018922193 -0.10566243270259357L-0.4330127018922193 -0.5386751345948129L0 -0.28867513459481287L0.4330127018922193 -0.5386751345948129L0.6830127018922193 -0.10566243270259357Z"}draw(t,e,i,r){return H7(t,this.parseSize(e)/2,i,r)}drawOffset(t,e,i,r,o){return H7(t,this.parseSize(e)/2+o,i,r)}}const EWt=new LWt;function z7(n,t,e,i,r){return n.moveTo(-t+e-2*r,i),n.lineTo(t+e+r,t+i+2*r),n.lineTo(t+e+r,i-t-2*r),n.closePath(),!0}class DWt extends vn{constructor(){super(...arguments),this.type="triangleLeft",this.pathStr="M-0.5,0 L0.5,0.5 L0.5,-0.5 Z"}draw(t,e,i,r){return z7(t,this.parseSize(e)/2,i,r,0)}drawOffset(t,e,i,r,o){return z7(t,this.parseSize(e)/2,i,r,o)}}const IWt=new DWt;function F7(n,t,e,i,r=0){return n.moveTo(e-t-r,t+i+2*r),n.lineTo(t+e+2*r,i),n.lineTo(e-t-r,i-t-2*r),n.closePath(),!0}class OWt extends vn{constructor(){super(...arguments),this.type="triangleRight",this.pathStr="M-0.5,0.5 L0.5,0 L-0.5,-0.5 Z"}draw(t,e,i,r){return F7(t,this.parseSize(e)/2,i,r)}drawOffset(t,e,i,r,o){return F7(t,this.parseSize(e)/2,i,r,o)}}const HWt=new OWt;function N7(n,t,e,i,r=0){return n.moveTo(e-t-2*r,i-t-r),n.lineTo(e+t+2*r,i-t-r),n.lineTo(e,i+t+2*r),n.closePath(),!0}class zWt extends vn{constructor(){super(...arguments),this.type="triangleDown",this.pathStr="M-0.5,-0.5 L0.5,-0.5 L0,0.5 Z"}draw(t,e,i,r){return N7(t,this.parseSize(e)/2,i,r)}drawOffset(t,e,i,r,o){return N7(t,this.parseSize(e)/2,i,r,o)}}const FWt=new zWt,RI=ws(3);function W7(n,t,e,i){const r=t*RI;return n.moveTo(e,i+-r/3*2),n.lineTo(t+e,i+r),n.lineTo(e-t,i+r),n.closePath(),!0}class NWt extends vn{constructor(){super(...arguments),this.type="thinTriangle",this.pathStr="M0,-0.5773502691896257L-0.5,0.28867513459481287L0.5,0.28867513459481287Z"}draw(t,e,i,r){return W7(t,this.parseSize(e)/2/RI,i,r)}drawOffset(t,e,i,r,o){return W7(t,this.parseSize(e)/2/RI+o,i,r)}}const WWt=new NWt;function V7(n,t,e,i){const r=2*t;return n.moveTo(t+e,i-r),n.lineTo(e-t,i),n.lineTo(t+e,r+i),!0}class VWt extends vn{constructor(){super(...arguments),this.type="arrow2Left",this.pathStr="M 0.25 -0.5 L -0.25 0 l 0.25 0.5"}draw(t,e,i,r){return V7(t,this.parseSize(e)/4,i,r)}drawOffset(t,e,i,r,o){return V7(t,this.parseSize(e)/4+o,i,r)}}const GWt=new VWt;function G7(n,t,e,i){const r=2*t;return n.moveTo(e-t,i-r),n.lineTo(e+t,i),n.lineTo(e-t,r+i),!0}class $Wt extends vn{constructor(){super(...arguments),this.type="arrow2Right",this.pathStr="M -0.25 -0.5 l 0.25 0 l -0.25 0.5"}draw(t,e,i,r){return G7(t,this.parseSize(e)/4,i,r)}drawOffset(t,e,i,r,o){return G7(t,this.parseSize(e)/4+o,i,r)}}const jWt=new $Wt;function $7(n,t,e,i){const r=2*t;return n.moveTo(e-r,i+t),n.lineTo(e,i-t),n.lineTo(e+r,i+t),!0}class UWt extends vn{constructor(){super(...arguments),this.type="arrow2Up",this.pathStr="M -0.5 0.25 L 0 -0.25 l 0.5 0.25"}draw(t,e,i,r){return $7(t,this.parseSize(e)/4,i,r)}drawOffset(t,e,i,r,o){return $7(t,this.parseSize(e)/4+o,i,r)}}const YWt=new UWt;function j7(n,t,e,i){const r=2*t;return n.moveTo(e-r,i-t),n.lineTo(e,i+t),n.lineTo(e+r,i-t),!0}class XWt extends vn{constructor(){super(...arguments),this.type="arrow2Down",this.pathStr="M -0.5 -0.25 L 0 0.25 l 0.5 -0.25"}draw(t,e,i,r){return j7(t,this.parseSize(e)/4,i,r)}drawOffset(t,e,i,r,o){return j7(t,this.parseSize(e)/4+o,i,r)}}const qWt=new XWt;function U7(n,t,e,i,r){return n.moveTo(e,i-t),n.lineTo(e,i+t),!0}class KWt extends vn{constructor(){super(...arguments),this.type="lineV",this.pathStr="M0,-0.5L0,0.5"}draw(t,e,i,r,o){return U7(t,this.parseSize(e)/2,i,r)}drawOffset(t,e,i,r,o,a){return U7(t,this.parseSize(e)/2+o,i,r)}drawToSvgPath(t,e,i,r){const o=this.parseSize(t)/2;return`M ${e}, ${i-o} L ${e},${i+o}`}}const ZWt=new KWt;function Y7(n,t,e,i,r){return n.moveTo(e-t,i),n.lineTo(e+t,i),!0}class JWt extends vn{constructor(){super(...arguments),this.type="lineH",this.pathStr="M-0.5,0L0.5,0"}draw(t,e,i,r,o){return Y7(t,this.parseSize(e)/2,i,r)}drawOffset(t,e,i,r,o,a){return Y7(t,this.parseSize(e)/2+o,i,r)}drawToSvgPath(t,e,i,r){const o=this.parseSize(t)/2;return`M ${e-o}, ${i} L ${e+o},${i}`}}const QWt=new JWt;function X7(n,t,e,i,r){return n.moveTo(e-t,i-t),n.lineTo(e+t,i+t),n.moveTo(e+t,i-t),n.lineTo(e-t,i+t),!0}class t4t extends vn{constructor(){super(...arguments),this.type="close",this.pathStr="M-0.5,-0.5L0.5,0.5,M0.5,-0.5L-0.5,0.5"}draw(t,e,i,r,o){return X7(t,this.parseSize(e)/2,i,r)}drawOffset(t,e,i,r,o,a){return X7(t,this.parseSize(e)/2+o,i,r)}drawToSvgPath(t,e,i,r){const o=this.parseSize(t)/2;return`M ${e-o}, ${i-o} L ${e+o},${i+o} M ${e+o}, ${i-o} L ${e-o},${i+o}`}}const e4t=new t4t;function q7(n,t,e,i){return n.rect(e-t[0]/2,i-t[1]/2,t[0],t[1]),!1}function K7(n,t,e,i){const r=t,o=t/2;return n.rect(e-r/2,i-o/2,r,o),!1}class i4t extends vn{constructor(){super(...arguments),this.type="rect",this.pathStr="M -0.5,0.25 L 0.5,0.25 L 0.5,-0.25,L -0.5,-0.25 Z"}draw(t,e,i,r){return Kn(e)?K7(t,e,i,r):q7(t,e,i,r)}drawWithClipRange(t,e,i,r,o,a,s){Kn(e)&&(e=[e,e/2]);const l=2*(e[0]+e[1])*o,h=[{x:i+e[0]/2,y:r-e[1]/2},{x:i+e[0]/2,y:r+e[1]/2},{x:i-e[0]/2,y:r+e[1]/2},{x:i-e[0]/2,y:r-e[1]/2}];let u=0,d=h[3];t.moveTo(d.x,d.y);for(let c=0;c<h.length;c++){const f=h[c],g=Math.sqrt((f.x-d.x)*(f.x-d.x)+(f.y-d.y)*(f.y-d.y));if(u+g>l){const p=(f.x-d.x)*(l-u)/g,v=(f.y-d.y)*(l-u)/g;t.lineTo(d.x+p,d.y+v);break}t.lineTo(f.x,f.y),d=f,u+=g}return!1}drawOffset(t,e,i,r,o){return Kn(e)?K7(t,e+2*o,i,r):q7(t,[e[0]+2*o,e[1]+2*o],i,r)}}const n4t=new i4t,qm=new sr;class Z7{constructor(t,e,i=!1){this.pathStr="",this.type=t,$e(e)?this.svgCache=e:this.path=e,this.isSvg=i}drawOffset(t,e,i,r,o,a,s){return e=this.parseSize(e),this.isSvg?!!this.svgCache&&(this.svgCache.forEach((l=>{t.beginPath(),Vh(l.path.commandList,t,i,r,e,e),s&&s(l.path,l.attribute)})),!1):(Vh(this.path.commandList,t,i,r,e+o,e+o),!1)}draw(t,e,i,r,o,a){return e=this.parseSize(e),this.drawOffset(t,e,i,r,0,o,a)}parseSize(t){return Kn(t)?t:Math.min(t[0],t[1])}drawWithClipRange(t,e,i,r,o,a,s){return e=this.parseSize(e),this.isSvg?!!this.svgCache&&(this.svgCache.forEach((l=>{l.path.drawWithClipRange(t,e,i,r,o),s&&s(l.path,l.attribute)})),!1):(this.path.drawWithClipRange(t,e,i,r,o),!1)}bounds(t,e){if(t=this.parseSize(t),this.isSvg)return this.svgCache?(e.clear(),void this.svgCache.forEach((({path:i})=>{qm.x1=i.bounds.x1*t,qm.y1=i.bounds.y1*t,qm.x2=i.bounds.x2*t,qm.y2=i.bounds.y2*t,e.union(qm)}))):void 0;this.path.bounds&&(e.x1=this.path.bounds.x1*t,e.y1=this.path.bounds.y1*t,e.x2=this.path.bounds.x2*t,e.y2=this.path.bounds.y2*t)}}const r4t=[hWt,fWt,pWt,mWt,WWt,_Wt,SWt,MWt,PWt,kWt,EWt,IWt,HWt,yWt,FWt,GWt,jWt,YWt,qWt,n4t,ZWt,QWt,e4t],fat={};r4t.forEach((n=>{fat[n.type]=n}));const o4t={arrowLeft:"M 0.25 -0.5 L -0.25 0 l 0.5 0.5",arrowRight:"M -0.25 -0.5 l 0.5 0.5 l -0.5 0.5",rectRound:"M 0.3 -0.5 C 0.41 -0.5 0.5 -0.41 0.5 -0.3 C 0.5 -0.3 0.5 0.3 0.5 0.3 C 0.5 0.41 0.41 0.5 0.3 0.5 C 0.3 0.5 -0.3 0.5 -0.3 0.5 C -0.41 0.5 -0.5 0.41 -0.5 0.3 C -0.5 0.3 -0.5 -0.3 -0.5 -0.3 C -0.5 -0.41 -0.41 -0.5 -0.3 -0.5 C -0.3 -0.5 0.3 -0.5 0.3 -0.5 Z",roundLine:"M 1.2392 -0.258 L -1.3432 -0.258 C -1.4784 -0.258 -1.588 -0.1436 -1.588 -0.002 c 0 0.1416 0.1096 0.256 0.2448 0.256 l 2.5824 0 c 0.1352 0 0.2448 -0.1144 0.2448 -0.256 C 1.484 -0.1436 1.3744 -0.258 1.2392 -0.258 z"};function a4t(n,t){const e=[];let i=t.exec(n);for(;i;){const r=[];r.startIndex=t.lastIndex-i[0].length;const o=i.length;for(let a=0;a<o;a++)r.push(i[a]);e.push(r),i=t.exec(n)}return e}class ok{constructor(t){this.tagname=t,this.child=[],this[":@"]={}}add(t,e){t==="__proto__"&&(t="#__proto__"),this.child.push({[t]:e})}addChild(t){t.tagname==="__proto__"&&(t.tagname="#__proto__"),t[":@"]&&Object.keys(t[":@"]).length>0?this.child.push({[t.tagname]:t.child,":@":t[":@"]}):this.child.push({[t.tagname]:t.child})}}function J7(n,t,e,i){const r=n.indexOf(t,e);if(r===-1)throw new Error(i);return r+t.length-1}function s4t(n,t,e=">"){let i,r="";for(let o=t;o<n.length;o++){let a=n[o];if(i)a===i&&(i="");else if(a==='"'||a==="'")i=a;else if(a===e[0]){if(!e[1])return{data:r,index:o};if(n[o+1]===e[1])return{data:r,index:o}}else a==="	"&&(a=" ");r+=a}}function Q7(n,t,e,i=">"){const r=s4t(n,t+1,i);if(!r)return;let o=r.data;const a=r.index,s=o.search(/\s/);let l=o,h=!0;return s!==-1&&(l=o.substr(0,s).replace(/\s\s*$/,""),o=o.substr(s+1)),{tagName:l,tagExp:o,closeIndex:a,attrExpPresent:h,rawTagName:l}}const l4t=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");class h4t{constructor(t){this.currentNode=null,this.options=t,this.tagsNodeStack=[],this.docTypeEntities={}}addChild(t,e,i){const r=e.tagname;typeof r=="string"&&(e.tagname=r),t.addChild(e)}buildAttributesMap(t,e,i){const r={};if(!t)return;const o=a4t(t,l4t),a=o.length;for(let s=0;s<a;s++){const l=o[s][1],h=o[s][4],u=l;l&&(r[u]=h===void 0||(isNaN(h)?h:Number(h)))}return r}parseXml(t){t=t.replace(/\r\n?/g,`
`);const e=new ok("!xml");let i=e,r="",o="";for(let a=0;a<t.length;a++)if(t[a]==="<")if(t[a+1]==="/"){const s=J7(t,">",a,"Closing Tag is not closed."),l=o.lastIndexOf(".");o=o.substring(0,l),i=this.tagsNodeStack.pop(),i&&i.child&&r&&i.child[i.child.length-1][":@"]&&(i.child[i.child.length-1][":@"].text=r),r="",a=s}else if(t[a+1]==="?")a=Q7(t,a,!1,"?>").closeIndex+1;else if(t.substr(a+1,3)==="!--")a=J7(t,"-->",a+4,"Comment is not closed.");else{const s=Q7(t,a);let l=s.tagName,h=s.tagExp;const u=s.attrExpPresent,d=s.closeIndex;if(l!==e.tagname&&(o+=o?"."+l:l),h.length>0&&h.lastIndexOf("/")===h.length-1){l[l.length-1]==="/"?(l=l.substr(0,l.length-1),o=o.substr(0,o.length-1),h=l):h=h.substr(0,h.length-1);const c=new ok(l);l!==h&&u&&(c[":@"]=this.buildAttributesMap(h,o,l)),this.addChild(i,c,o),o=o.substr(0,o.lastIndexOf("."))}else{const c=new ok(l);this.tagsNodeStack.push(i),l!==h&&u&&(c[":@"]=this.buildAttributesMap(h,o,l)),this.addChild(i,c,o),i=c}r="",a=d}else r+=t[a];return e.child}}function u4t(n,t){return gat(n)}function gat(n,t){const e={};for(let i=0;i<n.length;i++){const r=n[i],o=d4t(r);if(o!==void 0&&r[o]){const a=gat(r[o]);f4t(a),r[":@"]&&c4t(a,r[":@"]),e[o]!==void 0&&e.hasOwnProperty(o)?(Array.isArray(e[o])||(e[o]=[e[o]]),e[o].push(a)):e[o]=a}}return e}function d4t(n){const t=Object.keys(n);for(let e=0;e<t.length;e++){const i=t[e];if(i!==":@")return i}}function c4t(n,t,e){if(t){const i=Object.keys(t),r=i.length;for(let o=0;o<r;o++){const a=i[o];n[a]=t[a]}}}function f4t(n){return Object.keys(n).length===0}class $M{constructor(t){this.options=Object.assign({},$M.defaultOptions,t)}valid(t){return t.startsWith("<")}parse(t){if(!this.valid)return!1;const e=new h4t(this.options).parseXml(t);return u4t(e,this.options)}}$M.defaultOptions={};function g4t(n){return n.startsWith("<svg")||n.startsWith("<?xml")}function SS(n,t,e,i=0){return n.expand(t+(i/2+(e?p4t(e,t):0))),n}function p4t(n,t){return n?t:0}let v4t=0;function dr(){return v4t++}var Tp;(function(n){n[n.HORIZONTAL=0]="HORIZONTAL",n[n.VERTICAL=1]="VERTICAL"})(Tp||(Tp={}));function m4t(n){const t=[];let e=0,i="";for(let r=0;r<n.length;r++)_4t(n[r])?e?i+=n[r]:(e=1,i=n[r]):(e&&(t.push({text:i,direction:Tp.VERTICAL}),i="",e=0),t.push({text:n[r],direction:Tp.HORIZONTAL}));return i&&t.push({text:i,direction:Tp.VERTICAL}),t}const y4t=["","","","","","","","","",""],pat=new Map;y4t.forEach((n=>pat.set(n,!0)));const b4t=[""],vat=new Map;function _4t(n){if(pat.has(n))return!0;if(vat.has(n))return!1;let t=!1;return n.codePointAt(0)<256&&(t=!0),t}b4t.forEach((n=>vat.set(n,!0)));const jM=dr(),C4t=dr(),p3=dr(),UM=dr();dr();const v3=dr(),YM=dr(),E_=dr(),XM=dr(),qM=dr();dr();const m3=dr();dr();const y3=dr();dr();const KM=dr(),ZM=dr(),b3=Symbol.for("GraphicService"),mat=Symbol.for("GraphicCreator"),yat={"stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-width":"lineWidth","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity",stroke:"stroke",fill:"fill"},w4t=Object.keys(yat),x4t={duration:200,easing:"cubicOut"};function bat(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function S4t(n,t,e){const i=Math.sin(e),r=Math.cos(e),o=t[4],a=t[5],s=t[6],l=t[7],h=t[8],u=t[9],d=t[10],c=t[11];return t!==n&&(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n[4]=o*r+h*i,n[5]=a*r+u*i,n[6]=s*r+d*i,n[7]=l*r+c*i,n[8]=h*r-o*i,n[9]=u*r-a*i,n[10]=d*r-s*i,n[11]=c*r-l*i,n}function A4t(n,t,e){const i=Math.sin(e),r=Math.cos(e),o=t[0],a=t[1],s=t[2],l=t[3],h=t[8],u=t[9],d=t[10],c=t[11];return t!==n&&(n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n[0]=o*r-h*i,n[1]=a*r-u*i,n[2]=s*r-d*i,n[3]=l*r-c*i,n[8]=o*i+h*r,n[9]=a*i+u*r,n[10]=s*i+d*r,n[11]=l*i+c*r,n}function T4t(n,t,e){const i=Math.sin(e),r=Math.cos(e),o=t[0],a=t[1],s=t[2],l=t[3],h=t[4],u=t[5],d=t[6],c=t[7];return t!==n&&(n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n[0]=o*r+h*i,n[1]=a*r+u*i,n[2]=s*r+d*i,n[3]=l*r+c*i,n[4]=h*r-o*i,n[5]=u*r-a*i,n[6]=d*r-s*i,n[7]=c*r-l*i,n}function Km(n,t,e){const i=e[0],r=e[1],o=e[2];let a,s,l,h,u,d,c,f,g,p,v,m;return t===n?(n[12]=t[0]*i+t[4]*r+t[8]*o+t[12],n[13]=t[1]*i+t[5]*r+t[9]*o+t[13],n[14]=t[2]*i+t[6]*r+t[10]*o+t[14],n[15]=t[3]*i+t[7]*r+t[11]*o+t[15]):(a=t[0],s=t[1],l=t[2],h=t[3],u=t[4],d=t[5],c=t[6],f=t[7],g=t[8],p=t[9],v=t[10],m=t[11],n[0]=a,n[1]=s,n[2]=l,n[3]=h,n[4]=u,n[5]=d,n[6]=c,n[7]=f,n[8]=g,n[9]=p,n[10]=v,n[11]=m,n[12]=a*i+u*r+g*o+t[12],n[13]=s*i+d*r+p*o+t[13],n[14]=l*i+c*r+v*o+t[14],n[15]=h*i+f*r+m*o+t[15]),n}function PI(n,t){n[0]=t.a,n[1]=t.b,n[2]=0,n[3]=0,n[4]=t.c,n[5]=t.d,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=t.e,n[13]=t.f,n[14]=0,n[15]=1}function M4t(n,t,e){const i=e[0],r=e[1],o=e[2];return n[0]=t[0]*i,n[1]=t[1]*i,n[2]=t[2]*i,n[3]=t[3]*i,n[4]=t[4]*r,n[5]=t[5]*r,n[6]=t[6]*r,n[7]=t[7]*r,n[8]=t[8]*o,n[9]=t[9]*o,n[10]=t[10]*o,n[11]=t[11]*o,n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n}function D_(n,t,e){const i=t[0],r=t[1],o=t[2],a=t[3],s=t[4],l=t[5],h=t[6],u=t[7],d=t[8],c=t[9],f=t[10],g=t[11],p=t[12],v=t[13],m=t[14],y=t[15];let b=e[0],_=e[1],w=e[2],C=e[3];return n[0]=b*i+_*s+w*d+C*p,n[1]=b*r+_*l+w*c+C*v,n[2]=b*o+_*h+w*f+C*m,n[3]=b*a+_*u+w*g+C*y,b=e[4],_=e[5],w=e[6],C=e[7],n[4]=b*i+_*s+w*d+C*p,n[5]=b*r+_*l+w*c+C*v,n[6]=b*o+_*h+w*f+C*m,n[7]=b*a+_*u+w*g+C*y,b=e[8],_=e[9],w=e[10],C=e[11],n[8]=b*i+_*s+w*d+C*p,n[9]=b*r+_*l+w*c+C*v,n[10]=b*o+_*h+w*f+C*m,n[11]=b*a+_*u+w*g+C*y,b=e[12],_=e[13],w=e[14],C=e[15],n[12]=b*i+_*s+w*d+C*p,n[13]=b*r+_*l+w*c+C*v,n[14]=b*o+_*h+w*f+C*m,n[15]=b*a+_*u+w*g+C*y,n}function Qa(n,t,e){const i=t[0],r=t[1],o=t[2];let a=e[3]*i+e[7]*r+e[11]*o+e[15];return a=a||1,n[0]=(e[0]*i+e[4]*r+e[8]*o+e[12])/a,n[1]=(e[1]*i+e[5]*r+e[9]*o+e[13])/a,n[2]=(e[2]*i+e[6]*r+e[10]*o+e[14])/a,n}function t$(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}class R4t{constructor(){this.pools=[]}allocate(t,e,i,r,o,a){if(!this.pools.length)return new Fr(t,e,i,r,o,a);const s=this.pools.pop();return s.a=t,s.b=e,s.c=i,s.d=r,s.e=o,s.f=a,s}allocateByObj(t){if(!this.pools.length)return new Fr(t.a,t.b,t.c,t.d,t.e,t.f);const e=this.pools.pop();return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e.e=t.e,e.f=t.f,e}free(t){this.pools.push(t)}get length(){return this.pools.length}release(...t){this.pools=[]}}class _3{constructor(){this.pools=[]}static identity(t){return bat(t)}allocate(){if(!this.pools.length)return t$();const t=this.pools.pop();return _3.identity(t),t}allocateByObj(t){let e;e=this.pools.length?this.pools.pop():t$();for(let i=0;i<e.length;i++)e[i]=t[i];return e}free(t){t&&this.pools.push(t)}get length(){return this.pools.length}release(...t){this.pools=[]}}const ar=new R4t,Tn=new _3;var P4t=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a},B4t=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)};const k4t=new Fr(1,0,0,1,0,0),Ig={x:0,y:0};let BI=class{get nativeContext(){return this.path}constructor(n,t){this.matrix=new Fr(1,0,0,1,0,0),this.stack=[],this.dpr=t,this.applyedMatrix=new Fr(1,0,0,1,0,0),this.path=new An,this._clearMatrix=new Fr(1,0,0,1,0,0)}getCanvas(){throw new Error("getCanvas")}getContext(){throw new Error("getContext")}setTransformForCurrent(n=!1){!n&&this.applyedMatrix.equalToMatrix(this.matrix)||(this.applyedMatrix=this.cloneMatrix(this.matrix))}get currentMatrix(){return this.matrix}cloneMatrix(n){return ar.allocateByObj(n)}clear(){this.save(),this.resetTransform(),this.restore()}reset(){this.matrix.setValue(1,0,0,1,0,0),this.applyedMatrix=new Fr(1,0,0,1,0,0),this.stack.length=0}restore(){this.stack.length>0&&(ar.free(this.matrix),this.matrix=this.stack.pop(),this.setTransformForCurrent())}highPerformanceRestore(){this.stack.length>0&&(ar.free(this.matrix),this.matrix=this.stack.pop())}rotate(n,t=!0){this.matrix.rotate(n),t&&this.setTransformForCurrent()}save(){const n=this.cloneMatrix(this.matrix);this.stack.push(n)}highPerformanceSave(){const n=this.cloneMatrix(this.matrix);this.stack.push(n)}scale(n,t,e=!0){this.matrix.scale(n,t),e&&this.setTransformForCurrent()}setScale(n,t,e=!0){this.matrix.setScale(n,t),e&&this.setTransformForCurrent()}scalePoint(n,t,e,i,r=!0){this.translate(e,i,!1),this.scale(n,t,!1),this.translate(-e,-i,!1),r&&this.setTransformForCurrent()}setTransform(n,t,e,i,r,o,a=!0,s=this.dpr){this.matrix.setValue(s*n,s*t,s*e,s*i,s*r,s*o),a&&this.setTransformForCurrent()}setTransformFromMatrix(n,t=!0,e=this.dpr){this.matrix.setValue(n.a*e,n.b*e,n.c*e,n.d*e,n.e*e,n.f*e),t&&this.setTransformForCurrent()}resetTransform(n=!0,t=this.dpr){this.setTransform(t,0,0,t,0,0),n&&this.setTransformForCurrent()}transform(n,t,e,i,r,o,a=!0){this.matrix.multiply(n,t,e,i,r,o),a&&this.setTransformForCurrent()}transformFromMatrix(n,t){this.matrix.multiply(n.a,n.b,n.c,n.d,n.e,n.f),t&&this.setTransformForCurrent()}translate(n,t,e=!0){this.matrix.translate(n,t),e&&this.setTransformForCurrent()}rotateDegrees(n,t=!0){const e=n*Math.PI/180;this.rotate(e,t)}rotateAbout(n,t,e,i=!0){this.translate(t,e,!1),this.rotate(n,!1),this.translate(-t,-e,!1),i&&this.setTransformForCurrent()}rotateDegreesAbout(n,t,e,i=!0){this.translate(t,e,!1),this.rotateDegrees(n,!1),this.translate(-t,-e,!1),i&&this.setTransformForCurrent()}beginPath(){this.path.clear()}clip(n,t){}arc(n,t,e,i,r,o){this.path.arc(n,t,e,i,r,o)}arcTo(n,t,e,i,r){this.path.arcTo(n,t,e,i,r)}bezierCurveTo(n,t,e,i,r,o){this.path.bezierCurveTo(n,t,e,i,r,o)}closePath(){this.path.closePath()}ellipse(n,t,e,i,r,o,a,s){}lineTo(n,t){this.path.lineTo(n,t)}moveTo(n,t){this.path.moveTo(n,t)}quadraticCurveTo(n,t,e,i){this.path.quadraticCurveTo(n,t,e,i)}rect(n,t,e,i){this.path.rect(n,t,e,i)}createImageData(n,t){return null}createLinearGradient(n,t,e,i){throw new Error("createLinearGradient")}createPattern(n,t){throw new Error("createPattern")}createRadialGradient(n,t,e,i,r,o){throw new Error("createRadialGradient")}createConicGradient(n,t,e,i){return null}fill(n,t){}fillRect(n,t,e,i){this.path.rect(n,t,e,i)}clearRect(n,t,e,i){}fillText(n,t,e){}getImageData(n,t,e,i){return null}getLineDash(){return[]}isPointInPath(n,t){return this.matrix.transformPoint({x:n,y:t},Ig),Y5t(this.path.commandList,Ig.x,Ig.y)}isPointInStroke(n,t){if(!this.lineWidth)return!1;this.matrix.transformPoint({x:n,y:t},Ig);const e=Dl(this,this.lineWidth,this.dpr);return X5t(this.path.commandList,e,Ig.x,Ig.y)}measureText(n){throw new Error("measureText")}putImageData(n,t,e){throw new Error("measureText")}setLineDash(n){}stroke(n){}strokeRect(n,t,e,i){this.path.rect(n,t,e,i)}strokeText(n,t,e){}drawImage(){}setCommonStyle(n,t,e,i,r){}_setCommonStyle(n,t,e,i){}setStrokeStyle(n,t,e,i,r){}_setStrokeStyle(n,t,e,i){}setTextStyleWithoutAlignBaseline(n,t){}setTextStyle(n,t){}draw(){}clearMatrix(n=!0,t=this.dpr){this.setTransformFromMatrix(k4t,n,t)}setClearMatrix(n,t,e,i,r,o){this._clearMatrix.setValue(n,t,e,i,r,o)}onlyTranslate(n=this.dpr){return this.matrix.a===n&&this.matrix.b===0&&this.matrix.c===0&&this.matrix.d===n}release(...n){this.stack.forEach((t=>ar.free(t))),this.stack.length=0}};BI=P4t([wt(),B4t("design:paramtypes",[Object,Number])],BI);const ak={WIDTH:500,HEIGHT:500,DPR:1};class C3{get displayWidth(){return this._pixelWidth/this._dpr}get displayHeight(){return this._pixelHeight/this._dpr}get id(){return this._id}get x(){return this._x}set x(t){this._x=t}get y(){return this._y}set y(t){this._y=t}get nativeCanvas(){return this._nativeCanvas}set nativeCanvas(t){this._nativeCanvas=t}get width(){return this._pixelWidth}set width(t){this._pixelWidth=t,this._displayWidth=t/(this._dpr||1)}get height(){return this._pixelHeight}set height(t){this._pixelHeight=t,this._displayHeight=t/(this._dpr||1)}getContext(t){return this._context}get visiable(){return this._visiable}set visiable(t){this._visiable=t,t?this.show():this.hide()}get dpr(){return this._dpr}set dpr(t){this._dpr=t,this.resize(this._displayWidth,this._displayHeight)}constructor(t){var e;const{nativeCanvas:i,width:r=ak.WIDTH,height:o=ak.HEIGHT,dpr:a=ak.DPR,x:s,y:l,id:h,canvasControled:u=!0}=t;this._x=s??0,this._y=l??0,this._pixelWidth=r*a,this._pixelHeight=o*a,this._visiable=t.visiable!==!1,this.controled=u,this._displayWidth=r,this._displayHeight=o,this._dpr=a,this._nativeCanvas=i,this._id=(e=i.id)!==null&&e!==void 0?e:h,h&&(i.id=h),this.init(t)}getNativeCanvas(){return this._nativeCanvas}hide(){}show(){}applyPosition(){}resetStyle(t){}resize(t,e){}toDataURL(t,e){return""}readPixels(t,e,i,r){return this._context.getImageData(t,e,i,r)}convertToBlob(t){throw new Error("")}transferToImageBitmap(){throw new Error("")}release(...t){this.controled&&this._nativeCanvas.parentElement&&this._nativeCanvas.parentElement.removeChild(this._nativeCanvas)}}C3.env="browser";var xs;(function(n){n[n.Color255=0]="Color255",n[n.Color1=1]="Color1"})(xs||(xs={}));class _n{static Get(t,e=xs.Color1,i=[0,0,0,1]){if(e===xs.Color1){const a=_n.store1[t];if(a)return i[0]=a[0],i[1]=a[1],i[2]=a[2],i[3]=a[3],i;const s=c7.parseColorString(t);if(s){const l=[s.r/255,s.g/255,s.b/255,s.opacity];_n.store1[t]=l,_n.store255[t]=[s.r,s.g,s.b,s.opacity],i[0]=l[0],i[1]=l[1],i[2]=l[2],i[3]=l[3]}return i}const r=_n.store255[t];if(r)return i[0]=r[0],i[1]=r[1],i[2]=r[2],i[3]=r[3],i;const o=c7.parseColorString(t);return o&&(_n.store1[t]=[o.r/255,o.g/255,o.b/255,o.opacity],_n.store255[t]=[o.r,o.g,o.b,o.opacity],i[0]=o.r,i[1]=o.g,i[2]=o.b,i[3]=o.opacity),i}static Set(t,e,i){if(e===xs.Color1){if(_n.store1[t])return;_n.store1[t]=i,_n.store255[t]=[Math.floor(255*i[0]),Math.floor(255*i[1]),Math.floor(255*i[2]),Math.floor(255*i[3])]}else{if(_n.store255[t])return;_n.store255[t]=i,_n.store1[t]=[i[0]/255,i[1]/255,i[2]/255,i[3]]}}}_n.store255={},_n.store1={};function T1(n,t=!1){return Array.isArray(n)&&Kn(n[0])?t?`rgb(${Math.round(n[0])},${Math.round(n[1])},${Math.round(n[2])},${n[3].toFixed(2)})`:`rgb(${Math.round(n[0])},${Math.round(n[1])},${Math.round(n[2])})`:n}function Hf(n,t,e,i,r){return Array.isArray(n)&&!Kn(n[0])||Array.isArray(t)&&!Kn(t[0])?new Array(4).fill(0).map(((o,a)=>{var s,l;return e$($e(n)?(s=n[a])!==null&&s!==void 0?s:n[0]:n,$e(t)?(l=t[a])!==null&&l!==void 0?l:t[0]:t,e,i)})):e$(n,t,e,i)}function e$(n,t,e,i,r){if(!n||!t)return n&&T1(n)||t&&T1(t)||!1;let o,a,s=!1,l=!1;if(Array.isArray(n)?o=n:typeof n=="string"?o=_n.Get(n,xs.Color255):s=!0,Array.isArray(t)?a=t:typeof t=="string"?a=_n.Get(t,xs.Color255):l=!0,s!==l){const h=s?n:t,u=s?t:n,d=Object.assign(Object.assign({},h),{stops:h.stops.map((c=>Object.assign(Object.assign({},c),{color:T1(u)})))});return s?Hf(h,d,e,i):Hf(d,h,e,i)}if(s){if(n.gradient===t.gradient){const h=n,u=t,d=h.stops,c=u.stops;if(d.length!==c.length)return!1;if(h.gradient==="linear")return L4t(h,u,e);if(h.gradient==="radial")return E4t(h,u,e);if(h.gradient==="conical")return D4t(h,u,e)}return!1}return T1(I4t(o,a,e),i)}function L4t(n,t,e){const i=n.stops,r=t.stops;return{gradient:"linear",x0:n.x0+(t.x0-n.x0)*e,x1:n.x1+(t.x1-n.x1)*e,y0:n.y0+(t.y0-n.y0)*e,y1:n.y1+(t.y1-n.y1)*e,stops:new Array(i.length).fill(0).map(((o,a)=>({color:w3(i[a].color,r[a].color,e),offset:i[a].offset+(r[a].offset-i[a].offset)*e})))}}function E4t(n,t,e){const i=n.stops,r=t.stops;return{gradient:"radial",x0:n.x0+(t.x0-n.x0)*e,x1:n.x1+(t.x1-n.x1)*e,y0:n.y0+(t.y0-n.y0)*e,y1:n.y1+(t.y1-n.y1)*e,r0:n.r0+(t.r0-n.r0)*e,r1:n.r1+(t.r1-n.r1)*e,stops:new Array(i.length).fill(0).map(((o,a)=>({color:w3(i[a].color,r[a].color,e),offset:i[a].offset+(r[a].offset-i[a].offset)*e})))}}function D4t(n,t,e){const i=n.stops,r=t.stops;return{gradient:"conical",startAngle:n.startAngle+(t.startAngle-n.startAngle)*e,endAngle:n.endAngle+(t.endAngle-n.endAngle)*e,x:n.x+(t.x-n.x)*e,y:n.y+(t.y-n.y)*e,stops:new Array(i.length).fill(0).map(((o,a)=>({color:w3(i[a].color,r[a].color,e),offset:i[a].offset+(r[a].offset-i[a].offset)*e})))}}function I4t(n,t,e){return[n[0]+(t[0]-n[0])*e,n[1]+(t[1]-n[1])*e,n[2]+(t[2]-n[2])*e,n[3]+(t[3]-n[3])*e]}function i$(n,t,e){return`rgba(${n[0]+(t[0]-n[0])*e},${n[1]+(t[1]-n[1])*e},${n[2]+(t[2]-n[2])*e},${n[3]+(t[3]-n[3])*e})`}const Ul=[0,0,0,0],Zm=[0,0,0,0];function w3(n,t,e){return _n.Get(n,xs.Color255,Ul),_n.Get(t,xs.Color255,Zm),`rgba(${Math.round(Ul[0]+(Zm[0]-Ul[0])*e)},${Math.round(Ul[1]+(Zm[1]-Ul[1])*e)},${Math.round(Ul[2]+(Zm[2]-Ul[2])*e)},${Ul[3]+(Zm[3]-Ul[3])*e})`}class Aa{static GetCanvas(){try{return Aa.canvas||(Aa.canvas=St.global.createCanvas({})),Aa.canvas}catch{return null}}static GetCtx(){if(!Aa.ctx){const t=Aa.GetCanvas();Aa.ctx=t.getContext("2d")}return Aa.ctx}}class Bc extends xNt{static getInstance(){return Bc._instance||(Bc._instance=new Bc),Bc._instance}constructor(t=[],e=100){super(),this.cacheParams={CLEAN_THRESHOLD:100,L_TIME:1e3},this.dataMap=new Map;const i=Aa.GetCanvas(),r=Aa.GetCtx();if(i.width=e,i.height=1,!r)return;if(r.translate(0,0),!r)throw new Error("ctx");const o=r.createLinearGradient(0,0,e,0);t.forEach((a=>{o.addColorStop(a[0],a[1])})),r.fillStyle=o,r.fillRect(0,0,e,1),this.rgbaSet=r.getImageData(0,0,e,1).data}getColor(t){const e=this.rgbaSet.slice(4*t,4*t+4);return`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]/255})`}GetOrCreate(t,e,i,r,o=[],a=100){let s=`${t}${e}${i}${r}`;o.forEach((h=>s+=h.join())),s+=a;let l=this.dataMap.get(s);return l||(l={data:new Bc(o,a),timestamp:[]},this.addLimitedTimestamp(l,Date.now(),{}),this.dataMap.set(s,l)),this.clearCache(this.dataMap,this.cacheParams),l.data}}class Or{static GetSize(t){for(let e=0;e<Or.ImageSize.length;e++)if(Or.ImageSize[e]>=t)return Or.ImageSize[e];return t}static Get(t,e,i,r,o,a,s){const l=Or.GenKey(t,e,i,r,o),h=Or.cache[l];if(!h||h.length===0)return null;for(let u=0;u<h.length;u++)if(h[u].width>=a&&h[u].height>=s)return h[u].pattern;return null}static Set(t,e,i,r,o,a,s,l){const h=Or.GenKey(t,e,i,r,o);Or.cache[h]?Or.cache[h].push({width:s,height:l,pattern:a}):Or.cache[h]=[{width:s,height:l,pattern:a}]}static GenKey(t,e,i,r,o){return`${e},${i},${r},${o},${t.join()}`}}Or.cache={},Or.ImageSize=[20,40,80,160,320,640,1280,2560];function O4t(n,t,e,i){const{stops:r,startAngle:o,endAngle:a}=i;for(;e<0;)e+=le;for(;e>le;)e-=le;if(e<o||e>a)return r[0].color;let s,l,h=(e-o)/(a-o);for(let u=0;u<r.length;u++)if(r[u].offset>=h){s=r[u-1],l=r[u];break}return h=(h-s.offset)/(l.offset-s.offset),Hf(s.color,l.color,h,!1)}function H4t(n,t,e,i,r,o,a,s,l){const h=Math.floor(180*r/Math.PI),u=Aa.GetCanvas(),d=Aa.GetCtx();if(!d)return null;const c=Or.GetSize(s),f=Or.GetSize(l);let g=Or.Get(t,e,i,o,a,c,f);if(g)return g;const p=Math.sqrt(Math.max(Math.max(Math.pow(e,2)+Math.pow(i,2),Math.pow(c-e,2)+Math.pow(i,2)),Math.max(Math.pow(c-e,2)+Math.pow(f-i,2),Math.pow(e,2)+Math.pow(f-i,2)))),v=h+1,m=r/Math.max(1,v-1),y=Bc.getInstance().GetOrCreate(e,i,c,f,t,v),b=2*Math.PI*p/360;u.width=c,u.height=f,d.setTransform(1,0,0,1,0,0),d.clearRect(0,0,c,f),d.translate(e,i),d.rotate(o);for(let w=0,C=v-1;w<C&&!(o+w*m>a);w++){const x=y.getColor(w);d.beginPath(),d.rotate(m),d.moveTo(0,0),d.lineTo(p,-2*b),d.lineTo(p,0),d.fillStyle=x,d.closePath(),d.fill()}const _=d.getImageData(0,0,c,f);return u.width=_.width,u.height=_.height,d.putImageData(_,0,0),g=n.createPattern(u,"no-repeat"),g&&Or.Set(t,e,i,o,a,g,c,f),g}const M1=new sr,z4t=new Fr;new sr;const ta=["lineWidth","scaleX","scaleY","angle","anchor","visible"],n$=["x","y"],r$=["scaleX","scaleY"],o$=["angle"],Jm=new ci,Ka={strokeSeg:1,boundsPadding:2,pickMode:1,boundsMode:1,customPickShape:1,pickable:1,childrenPickable:1,visible:1,zIndex:1,layout:1,keepDirIn3d:1,globalZIndex:1,outerBorder:1,innerBorder:1,lineDash:1,lineCap:1,lineJoin:1,miterLimit:2,strokeBoundsBuffer:2,scaleCenter:1,anchor:1,anchor3d:1,postMatrix:1,backgroundMode:2,background:1,texture:1,cursor:1,html:1};class Pn extends eWt{static mixin(t){const e=Object.keys(t);for(let i=0;i<e.length;++i){const r=e[i];Object.defineProperty(Pn.prototype,r,Object.getOwnPropertyDescriptor(t,r))}}get AABBBounds(){return this.tryUpdateAABBBounds()}get OBBBounds(){return this.tryUpdateOBBBounds()}get globalAABBBounds(){return this.tryUpdateGlobalAABBBounds()}get transMatrix(){return this.tryUpdateLocalTransMatrix(!0)}get globalTransMatrix(){return this.tryUpdateGlobalTransMatrix(!0)}constructor(t={}){var e;super(),this._AABBBounds=new sr,this._updateTag=si.INIT,this.attribute=t,this.valid=this.isValid(),this.updateAABBBoundsStamp=0,t.background?this.loadImage((e=t.background.background)!==null&&e!==void 0?e:t.background,!0):t.shadowGraphic&&this.setShadowGraphic(t.shadowGraphic)}getGraphicService(){var t,e;return(e=(t=this.stage)===null||t===void 0?void 0:t.graphicService)!==null&&e!==void 0?e:St.graphicService}getAttributes(){return this.attribute}setMode(t){t==="3d"?this.set3dMode():this.set2dMode()}set3dMode(){this.in3dMode=!0}set2dMode(){this.in3dMode=!1}getOffsetXY(t,e=!1){var i,r;const{dx:o=t.dx,dy:a=t.dy}=this.attribute;if(e&&this.parent){const s=this.parent.attribute;Jm.x=o+((i=s.scrollX)!==null&&i!==void 0?i:0),Jm.y=a+((r=s.scrollY)!==null&&r!==void 0?r:0)}else Jm.x=o,Jm.y=a;return Jm}onAnimateBind(t){this._emitCustomEvent("animate-bind",t)}tryUpdateAABBBounds(){const t=this.attribute.boundsMode==="imprecise";if(!this.shouldUpdateAABBBounds())return this._AABBBounds;if(!this.valid)return this._AABBBounds.clear(),this._AABBBounds;this.getGraphicService().beforeUpdateAABBBounds(this,this.stage,!0,this._AABBBounds);const e=this.doUpdateAABBBounds(t);return this.getGraphicService().afterUpdateAABBBounds(this,this.stage,this._AABBBounds,this,!0),this.attribute.boundsMode==="empty"&&e.clear(),e}tryUpdateOBBBounds(){return this._OBBBounds||(this._OBBBounds=new h3),this.tryUpdateAABBBounds(),this.updateOBBBoundsStamp===this.updateAABBBoundsStamp?this._OBBBounds:(this.updateOBBBoundsStamp=this.updateAABBBoundsStamp,this.valid?this.doUpdateOBBBounds():(this._OBBBounds.clear(),this._OBBBounds))}combindShadowAABBBounds(t){if(this.shadowRoot){const e=this.shadowRoot.AABBBounds.clone();t.union(e)}}doUpdateOBBBounds(){return this._OBBBounds}getClipPath(){const{clipConfig:t}=this.attribute;if(!t)return null;this.clipPathMap||(this.clipPathMap=new Map);const{shape:e}=t;let i=this.clipPathMap.get(e)||null;return i||(this.clipPathMap.size>10&&this.clipPathMap.clear(),i=this.parsePath(e),i&&this.clipPathMap.set(e,i)),i}parsePath(t){if(!t)return null;let e=fat[t];if(e||(e=Pn.userSymbolMap[t],e))return e;const i=o4t[t];if(g4t(t=i||t)===!0){const h=new $M,{svg:u}=h.parse(t);if(!u)return null;const d=$e(u.path)?u.path:[u.path];M1.clear();const c=[];d.forEach((m=>{const y=new An().fromString(m.d),b={};w4t.forEach((_=>{m[_]&&(b[yat[_]]=m[_])})),c.push({path:y,attribute:b}),M1.union(y.bounds)}));const f=M1.width(),g=M1.height(),p=1/Th(f,g);c.forEach((m=>m.path.transform(0,0,p,p)));const v=new Z7(t,c,!0);return Pn.userSymbolMap[t]=v,v}const r=new An().fromString(t),o=r.bounds.width(),a=r.bounds.height(),s=1/Th(o,a);r.transform(0,0,s,s);const l=new Z7(t,r);return Pn.userSymbolMap[t]=l,l}doUpdateAABBBounds(t){this.updateAABBBoundsStamp++;const e=this.getGraphicTheme();this._AABBBounds.clear();const i=this.attribute,r=this.updateAABBBounds(i,e,this._AABBBounds,t),{boundsPadding:o=e.boundsPadding}=i,a=xS(o);return a&&r.expand(a),this.clearUpdateBoundTag(),r}updatePathProxyAABBBounds(t){const e=typeof this.pathProxy=="function"?this.pathProxy(this.attribute):this.pathProxy;if(!e)return!1;const i=new u3(t);return Vh(e.commandList,i,0,0),!0}tryUpdateGlobalAABBBounds(){const t=this.AABBBounds;return this._globalAABBBounds?this._globalAABBBounds.setValue(t.x1,t.y1,t.x2,t.y2):this._globalAABBBounds=t.clone(),this._globalAABBBounds.empty()||this.parent&&this._globalAABBBounds.transformWithMatrix(this.parent.globalTransMatrix),this._globalAABBBounds}tryUpdateGlobalTransMatrix(t=!0){if(this._globalTransMatrix){if(this.parent){const e=this.parent.globalTransMatrix;this._globalTransMatrix.setValue(e.a,e.b,e.c,e.d,e.e,e.f)}}else this._globalTransMatrix=this.parent?this.parent.globalTransMatrix.clone():this.transMatrix.clone();return this.shouldUpdateGlobalMatrix()&&this.doUpdateGlobalMatrix(),this._globalTransMatrix}shouldUpdateGlobalMatrix(){return!0}tryUpdateLocalTransMatrix(t=!0){return this._transMatrix||(this._transMatrix=new Fr),this.shouldUpdateLocalMatrix()&&(this.doUpdateLocalMatrix(),t&&this.clearUpdateLocalPositionTag()),this._transMatrix}shouldUpdateAABBBounds(){return this.shadowRoot?(!!(this._updateTag&si.UPDATE_BOUNDS)||this.shadowRoot.shouldUpdateAABBBounds())&&this.getGraphicService().validCheck(this.attribute,this.getGraphicTheme(),this._AABBBounds,this):!!(this._updateTag&si.UPDATE_BOUNDS)&&this.getGraphicService().validCheck(this.attribute,this.getGraphicTheme(),this._AABBBounds,this)}shouldSelfChangeUpdateAABBBounds(){return this.shadowRoot?!!(this._updateTag&si.UPDATE_BOUNDS)||this.shadowRoot.shouldUpdateAABBBounds():!!(this._updateTag&si.UPDATE_BOUNDS)}shouldUpdateLocalMatrix(){return!!(this._updateTag&si.UPDATE_LOCAL_MATRIX)}isValid(){var t,e;const i=this.attribute;return Number.isFinite(((t=i.x)!==null&&t!==void 0?t:0)+((e=i.y)!==null&&e!==void 0?e:0))}_validNumber(t){return t==null||Number.isFinite(t)}shouldUpdateShape(){return!!(this._updateTag&si.UPDATE_SHAPE)}clearUpdateShapeTag(){this._updateTag&=si.CLEAR_SHAPE}containsPoint(t,e,i,r){if(!r)return!1;if(i===xb.GLOBAL){const o=new ci(t,e);this.parent&&this.parent.globalTransMatrix.transformPoint(o,o),t=o.x,e=o.y}return r.containsPoint(this,{x:t,y:e})}setWidthHeightWithoutTransform(t){this.widthWithoutTransform=t.x2-t.x1,this.heightWithoutTransform=t.y2-t.y1}setAttributesAndPreventAnimate(t,e=!1,i,r){this.setAttributes(t,e,i),this.animates&&this.animates.forEach((o=>{(o.priority!==1/0||r)&&Object.keys(t).forEach((a=>{o.preventAttr(a)}))}))}setAttributes(t,e=!1,i){t&&((t=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate(t,this.attribute,null,i)||t).background?this.loadImage(t.background,!0):t.shadowGraphic&&this.setShadowGraphic(t.shadowGraphic),this._setAttributes(t,e,i))}_setAttributes(t,e=!1,i){const r=Object.keys(t);for(let o=0;o<r.length;o++){const a=r[o];this.attribute[a]=t[a]}this.valid=this.isValid(),this.updateShapeAndBoundsTagSetted()||!e&&!this.needUpdateTags(r)?this.addUpdateBoundTag():this.addUpdateShapeAndBoundsTag(),this.addUpdatePositionTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(i)}setAttribute(t,e,i,r){var o;const a=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({[t]:e},this.attribute,t,r);a?this._setAttributes(a,i,r):Ti((o=this.normalAttrs)===null||o===void 0?void 0:o[t])?(this.attribute[t]=e,this.valid=this.isValid(),this.updateShapeAndBoundsTagSetted()||!i&&!this.needUpdateTag(t)?this.addUpdateBoundTag():this.addUpdateShapeAndBoundsTag(),this.addUpdatePositionTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(r)):this.normalAttrs[t]=e,t==="background"?this.loadImage(e,!0):t==="shadowGraphic"&&this.setShadowGraphic(e)}needUpdateTags(t,e=ta){for(let i=0;i<e.length;i++){const r=e[i];if(t.indexOf(r)!==-1)return!0}return!1}needUpdateTag(t,e=ta){for(let i=0;i<e.length;i++)if(t===e[i])return!0;return!1}initAttributes(t){const e={type:Yr.INIT};t=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate(t,this.attribute,null,e)||t,this.attribute=t,t.background?this.loadImage(t.background,!0):t.shadowGraphic&&this.setShadowGraphic(t.shadowGraphic),this._updateTag=si.INIT,this.valid=this.isValid(),this.onAttributeUpdate(e)}translate(t,e){var i,r;if(t===0&&e===0)return this;const o={type:Yr.TRANSLATE},a=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({x:t,y:e},this.attribute,n$,o);a&&(t=a.x,e=a.y,delete a.x,delete a.y,this._setAttributes(a));const s=this.attribute,l=s.postMatrix;return l?St.transformUtil.fromMatrix(l,l).translate(t,e):(s.x=((i=s.x)!==null&&i!==void 0?i:$n.x)+t,s.y=((r=s.y)!==null&&r!==void 0?r:$n.y)+e),this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(o),this}translateTo(t,e){const i=this.attribute;if(i.x===t&&i.y===e)return this;const r={type:Yr.TRANSLATE_TO},o=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({x:t,y:e},this.attribute,n$,r);return o?(this._setAttributes(o,!1,r),this):(i.x=t,i.y=e,this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(r),this)}scale(t,e,i){var r,o;if(t===1&&e===1)return this;const a={type:Yr.SCALE},s=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({scaleX:t,scaleY:e,scaleCenter:i},this.attribute,r$,a);s&&(t=s.scaleX,e=s.scaleY,delete s.scaleX,delete s.scaleY,this._setAttributes(s));const l=this.attribute;if(i){let{postMatrix:h}=this.attribute;h||(h=new Fr,l.postMatrix=h),St.transformUtil.fromMatrix(h,h).scale(t,e,i)}else l.scaleX=((r=l.scaleX)!==null&&r!==void 0?r:$n.scaleX)*t,l.scaleY=((o=l.scaleY)!==null&&o!==void 0?o:$n.scaleY)*e;return this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(a),this}scaleTo(t,e){const i=this.attribute;if(i.scaleX===t&&i.scaleY===e)return this;const r={type:Yr.SCALE_TO},o=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({scaleX:t,scaleY:e},this.attribute,r$,r);return o?(this._setAttributes(o,!1,r),this):(i.scaleX=t,i.scaleY=e,this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(r),this)}rotate(t,e){var i;if(t===0)return this;const r={type:Yr.ROTATE},o=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({angle:t,rotateCenter:e},this.attribute,o$,r);o&&(delete o.angle,this._setAttributes(o,!1,r));const a=this.attribute;if(e){let{postMatrix:s}=this.attribute;s||(s=new Fr,a.postMatrix=s),St.transformUtil.fromMatrix(s,s).rotate(t,e)}else a.angle=((i=a.angle)!==null&&i!==void 0?i:$n.angle)+t;return this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(r),this}rotateTo(t){const e=this.attribute;if(e.angle===t)return this;const i={type:Yr.ROTATE_TO},r=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate(t,this.attribute,o$,i);return r?(this._setAttributes(r,!1,i),this):(e.angle=t,this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(i),this)}skewTo(t,e){return this}onAttributeUpdate(t){t&&t.skipUpdateCallback||(this.getGraphicService().onAttributeUpdate(this),this._emitCustomEvent("afterAttributeUpdate",t))}update(t){t?(t.bounds&&this.tryUpdateAABBBounds(),t.trans&&this.tryUpdateLocalTransMatrix()):(this.tryUpdateAABBBounds(),this.tryUpdateLocalTransMatrix())}hasState(t){return!(!this.currentStates||!this.currentStates.length)&&(!!Ti(t)||this.currentStates.includes(t))}getState(t){var e;return(e=this.states)===null||e===void 0?void 0:e[t]}applyStateAttrs(t,e,i,r){var o,a;if(i){const s=Object.keys(t),l=this.getNoWorkAnimateAttr(),h={};let u;s.forEach((c=>{l[c]?(u||(u={}),u[c]=t[c]):h[c]=r&&t[c]===void 0?this.getDefaultAttribute(c):t[c]}));const d=(a=(o=this.context&&this.context.stateAnimateConfig)!==null&&o!==void 0?o:this.stateAnimateConfig)!==null&&a!==void 0?a:x4t;this.applyAnimationState(["state"],[{name:"state",animation:{type:"state",to:h,duration:d.duration,easing:d.easing}}]),u&&this.setAttributesAndPreventAnimate(u,!1,{type:Yr.STATE})}else this.stopStateAnimates(),this.setAttributesAndPreventAnimate(t,!1,{type:Yr.STATE}),this.finalAttribute&&Object.assign(this.finalAttribute,t);this._emitCustomEvent("afterStateUpdate",{type:Yr.STATE})}updateNormalAttrs(t){const e={};this.normalAttrs?(Object.keys(t).forEach((i=>{i in this.normalAttrs?(e[i]=this.normalAttrs[i],delete this.normalAttrs[i]):e[i]=this.getNormalAttribute(i)})),Object.keys(this.normalAttrs).forEach((i=>{t[i]=this.normalAttrs[i]}))):Object.keys(t).forEach((i=>{e[i]=this.getNormalAttribute(i)})),this.normalAttrs=e}stopStateAnimates(t="end"){this.animates&&this.animates.forEach((e=>{e.stateNames&&(e.stop(t),this.animates.delete(e.id))}))}getNormalAttribute(t){var e,i;const r=this.attribute[t];return this.animates?(e=this.finalAttribute)===null||e===void 0?void 0:e[t]:r??((i=this.finalAttribute)===null||i===void 0?void 0:i[t])}clearStates(t){this.hasState()&&this.normalAttrs?(this.currentStates=[],this.applyStateAttrs(this.normalAttrs,this.currentStates,t,!0)):this.currentStates=[],this.normalAttrs=null}removeState(t,e){if(this.currentStates){const i=$e(t)?o=>!t.includes(o):o=>o!==t,r=this.currentStates.filter(i);r.length!==this.currentStates.length&&this.useStates(r,e)}}toggleState(t,e){if(this.hasState(t))this.removeState(t,e);else if((this.currentStates?this.currentStates.indexOf(t):-1)<0){const i=this.currentStates?this.currentStates.slice():[];i.push(t),this.useStates(i,e)}}addState(t,e,i){var r;if(this.currentStates&&this.currentStates.includes(t)&&(e||this.currentStates.length===1))return;const o=e&&(!((r=this.currentStates)===null||r===void 0)&&r.length)?this.currentStates.concat([t]):[t];this.useStates(o,i)}useStates(t,e){var i;if(!t.length)return void this.clearStates(e);if(!(((i=this.currentStates)===null||i===void 0?void 0:i.length)!==t.length||t.some(((o,a)=>this.currentStates[a]!==o))))return;const r={};t.forEach((o=>{var a;const s=this.stateProxy?this.stateProxy(o,t):(a=this.states)===null||a===void 0?void 0:a[o];s&&Object.assign(r,s)})),this.updateNormalAttrs(r),this.currentStates=t,this.applyStateAttrs(r,t,e)}addUpdateBoundTag(){this._updateTag|=si.UPDATE_BOUNDS,this.parent&&this.parent.addChildUpdateBoundTag(),this.glyphHost&&this.glyphHost.addUpdateBoundTag()}addUpdateShapeTag(){this._updateTag|=si.UPDATE_SHAPE}addUpdateShapeAndBoundsTag(){this._updateTag|=si.UPDATE_SHAPE_AND_BOUNDS,this.parent&&this.parent.addChildUpdateBoundTag(),this.glyphHost&&this.glyphHost.addUpdateBoundTag()}updateShapeAndBoundsTagSetted(){return(this._updateTag&si.UPDATE_SHAPE_AND_BOUNDS)===si.UPDATE_SHAPE_AND_BOUNDS}clearUpdateBoundTag(){this._updateTag&=si.CLEAR_BOUNDS}addUpdatePositionTag(){this.shadowRoot&&this.shadowRoot.addUpdateGlobalPositionTag(),this._updateTag|=si.UPDATE_GLOBAL_LOCAL_MATRIX}addUpdateGlobalPositionTag(){this.shadowRoot&&this.shadowRoot.addUpdateGlobalPositionTag(),this._updateTag|=si.UPDATE_GLOBAL_MATRIX}clearUpdateLocalPositionTag(){this._updateTag&=si.CLEAR_LOCAL_MATRIX}clearUpdateGlobalPositionTag(){this._updateTag&=si.CLEAR_GLOBAL_MATRIX}addUpdateLayoutTag(){this._updateTag|=si.UPDATE_LAYOUT}clearUpdateLayoutTag(){this._updateTag&=si.CLEAR_LAYOUT}needUpdateLayout(){return!!(this._updateTag&si.UPDATE_LAYOUT)}getAnchor(t,e,i){const r=[0,0],o=()=>{if(e.b)return e.b;const a=this.clone();return a.attribute.angle=0,a.attribute.scaleCenter=null,i&&(a.attribute.scaleX=1,a.attribute.scaleY=1),e.b=a.AABBBounds,e.b};if(typeof t[0]=="string"){const a=parseFloat(t[0])/100,s=o();r[0]=s.x1+(s.x2-s.x1)*a}else r[0]=t[0];if(typeof t[1]=="string"){const a=parseFloat(t[1])/100,s=o();r[1]=s.y1+(s.y2-s.y1)*a}else r[1]=t[1];return r}doUpdateLocalMatrix(){const{x:t=$n.x,y:e=$n.y,scaleX:i=$n.scaleX,scaleY:r=$n.scaleY,angle:o=$n.angle,scaleCenter:a,anchor:s,postMatrix:l}=this.attribute;let h=[0,0];const u={};if(s&&o&&(h=this.getAnchor(s,u)),!a||i===1&&r===1)wNt(this._transMatrix,this._transMatrix.reset(),t,e,i,r,o,s&&h);else{const c=this._transMatrix;c.reset(),c.translate(h[0],h[1]),c.rotate(o),c.translate(-h[0],-h[1]),c.translate(t,e),h=this.getAnchor(a,u,!0),St.transformUtil.fromMatrix(c,c).scale(i,r,{x:h[0],y:h[1]})}const d=this.getOffsetXY($n);if(this._transMatrix.e+=d.x,this._transMatrix.f+=d.y,l){const c=z4t.setValue(l.a,l.b,l.c,l.d,l.e,l.f),f=this._transMatrix;c.multiply(f.a,f.b,f.c,f.d,f.e,f.f),f.setValue(c.a,c.b,c.c,c.d,c.e,c.f)}}doUpdateGlobalMatrix(){if(this.parent){this._globalTransMatrix.multiply(this.transMatrix.a,this.transMatrix.b,this.transMatrix.c,this.transMatrix.d,this.transMatrix.e,this.transMatrix.f);const{scrollX:t=0,scrollY:e=0}=this.parent.attribute;this._globalTransMatrix.translate(t,e)}}setStage(t,e){if(this.stage!==t){if(this.stage=t,this.layer=e,this.setStageToShadowRoot(t,e),this.animates&&this.animates.size){const i=t.getTimeline();this.animates.forEach((r=>{r.timeline.isGlobal&&(r.setTimeline(i),i.addAnimate(r))}))}this._onSetStage&&this._onSetStage(this,t,e),this.getGraphicService().onSetStage(this,t)}}setStageToShadowRoot(t,e){this.shadowRoot&&this.shadowRoot.setStage(t,e)}onAddStep(t){}onStop(t){t&&this.setAttributes(t,!1,{type:Yr.ANIMATE_END})}getDefaultAttribute(t){return this.getGraphicTheme()[t]}getComputedAttribute(t){var e;return(e=this.attribute[t])!==null&&e!==void 0?e:this.getDefaultAttribute(t)}onSetStage(t,e=!1){this._onSetStage=t,e&&this.stage&&t(this,this.stage)}attachShadow(t){return t&&(t.shadowHost=this),this.shadowRoot=t??St.graphicService.creator.shadowRoot(this),this.addUpdateBoundTag(),this.shadowRoot.setStage(this.stage,this.layer),this.shadowRoot}detachShadow(){this.shadowRoot&&(this.addUpdateBoundTag(),this.shadowRoot.release(!0),this.shadowRoot=null)}toJson(){return{attribute:this.attribute,_uid:this._uid,type:this.type,name:this.name,children:this.children.map((t=>t.toJson()))}}createPathProxy(t){return bl(t,!0)?this.pathProxy=new An().fromString(t):this.pathProxy=new An,this.pathProxy}loadImage(t,e=!1){if(!t||e&&F4t(t))return;const i=t;this.resources||(this.resources=new Map);const r={data:"init",state:null};this.resources.set(i,r),typeof t=="string"?(r.state="loading",t.startsWith("<svg")?(ai.GetSvg(t,this),this.backgroundImg=this.backgroundImg||e):(sNt(t)||t.includes("/")||lNt(t))&&(ai.GetImage(t,this),this.backgroundImg=this.backgroundImg||e)):Rc(t)?(r.state="success",r.data=t,this.backgroundImg=this.backgroundImg||e):r.state="fail"}setShadowGraphic(t){t?this.attachShadow().add(t):this.detachShadow()}imageLoadSuccess(t,e,i){if(!this.resources)return;const r=this.resources.get(t);r&&(r.state="success",r.data=e,i&&i(),this.addUpdateBoundTag(),this.stage&&this.stage.renderNextFrame())}imageLoadFail(t,e){if(!this.resources)return;const i=this.resources.get(t);i&&(i.state="fail",e&&e())}_stopAnimates(t){t&&t.forEach((e=>{e.stop()}))}stopAnimates(t=!1){this._stopAnimates(this.animates),this.shadowRoot&&this.shadowRoot.stopAnimates(!0),this.isContainer&&t&&this.forEachChildren((e=>{e.stopAnimates(t)}))}release(){this.releaseStatus="released",this.stopAnimates(),St.graphicService.onRelease(this)}_emitCustomEvent(t,e){var i,r;if(this._events&&t in this._events){const o=new g3(t,e);o.bubbles=!1,o.manager=(r=(i=this.stage)===null||i===void 0?void 0:i.eventSystem)===null||r===void 0?void 0:r.manager,this.dispatchEvent(o)}}toCustomPath(){var t,e,i;const r=(i=(e=((t=this.stage)===null||t===void 0?void 0:t.renderService)||St.renderService)===null||e===void 0?void 0:e.drawContribution)===null||i===void 0?void 0:i.getRenderContribution(this);if(r){const o=new BI(null,1);return r.drawShape(this,o,0,0,{},{}),o.path}return null}}function F4t(n){return!(!n.fill&&!n.stroke)}Pn.userSymbolMap={},Pn.mixin(nWt);var a$;(function(n){n[n.LESS_GROUP=0]="LESS_GROUP",n[n.MORE_GROUP=1]="MORE_GROUP"})(a$||(a$={}));let _e=class kI extends Pn{constructor(t){super(t),this.type="group",this.parent=null,this.isContainer=!0,this.numberType=v3,this._childUpdateTag=si.UPDATE_BOUNDS}setMode(t){t==="3d"?this.set3dMode():this.set2dMode()}set3dMode(){this.in3dMode=!0}set2dMode(){this.in3dMode=!1}setTheme(t){return this.theme||(this.theme=new Rb),this.theme.setTheme(t,this)}createTheme(){this.theme||(this.theme=new Rb)}visibleAll(t){this.setAttribute("visible",t),this.forEachChildren((e=>{e.isContainer&&e.visibleAll?e.visibleAll(t):e.setAttribute("visible",t)}))}hideAll(){this.visibleAll(!1)}showAll(){this.visibleAll(!0)}containsPoint(t,e,i){if(i===xb.GLOBAL){const r=new ci(t,e);return this.parent&&this.parent.globalTransMatrix.transformPoint(r,r),this.AABBBounds.contains(r.x,r.y)}return this.AABBBounds.contains(t,e)}shouldUpdateAABBBounds(){return!!super.shouldUpdateAABBBounds()||!!(this._childUpdateTag&si.UPDATE_BOUNDS)}tryUpdateAABBBounds(){if(!this.shouldUpdateAABBBounds())return this._AABBBounds;this.getGraphicService().beforeUpdateAABBBounds(this,this.stage,!0,this._AABBBounds);const t=this.shouldSelfChangeUpdateAABBBounds(),e=this.doUpdateAABBBounds();return this.addUpdateLayoutTag(),this.getGraphicService().afterUpdateAABBBounds(this,this.stage,this._AABBBounds,this,t),this.attribute.boundsMode==="empty"&&e.clear(),e}doUpdateLocalMatrix(){const{x:t=$n.x,y:e=$n.y,dx:i=$n.dx,dy:r=$n.dy,scaleX:o=$n.scaleX,scaleY:a=$n.scaleY,angle:s=$n.angle,postMatrix:l}=this.attribute;if(t!==0||e!==0||i!==0||r!==0||o!==1||a!==1||s!==0||l)return super.doUpdateLocalMatrix();this._transMatrix.reset()}getGraphicTheme(){return he(this).group}updateAABBBounds(t,e,i){const r=i;i=i.clone();const{width:o,height:a,path:s,clip:l=e.clip}=t;if(s&&s.length?s.forEach((h=>{i.union(h.AABBBounds)})):o!=null&&a!=null&&i.set(0,0,Math.max(0,o),Math.max(0,a)),!l){this.forEachChildren((d=>{i.union(d.AABBBounds)}));const{scrollX:h=0,scrollY:u=0}=t;i.translate(h,u)}return St.graphicService.updateTempAABBBounds(i),St.graphicService.transformAABBBounds(t,i,e,!1,this),r.copy(i),r}doUpdateAABBBounds(){this.updateAABBBoundsStamp++;const t=super.doUpdateAABBBounds();return this.parent&&this.parent.addChildUpdateBoundTag(),this._emitCustomEvent("AAABBBoundsChange"),t}clearUpdateBoundTag(){this._updateTag&=si.CLEAR_BOUNDS,this._childUpdateTag&=si.CLEAR_BOUNDS}addUpdateBoundTag(){this._updateTag|=si.UPDATE_BOUNDS,this.parent&&this.parent.addChildUpdateBoundTag()}addChildUpdateBoundTag(){this._childUpdateTag&si.UPDATE_BOUNDS||(this._childUpdateTag|=si.UPDATE_BOUNDS,this.parent&&this.parent.addChildUpdateBoundTag())}getTheme(){return this.theme.getTheme(this)}incrementalAppendChild(t){const e=super.appendChild(t);return this.stage&&e&&(e.stage=this.stage,e.layer=this.layer),this.addUpdateBoundTag(),this.getGraphicService().onAddIncremental(t,this,this.stage),e}incrementalClearChild(){super.removeAllChild(),this.addUpdateBoundTag(),this.getGraphicService().onClearIncremental(this,this.stage)}_updateChildToStage(t){return this.stage&&t&&t.setStage(this.stage,this.layer),this.addUpdateBoundTag(),t}appendChild(t,e=!0){const i=super.appendChild(t);return e&&this.stage&&i&&i.setStage(this.stage,this.layer),this.addUpdateBoundTag(),i}insertBefore(t,e){return this._updateChildToStage(super.insertBefore(t,e))}insertAfter(t,e){return this._updateChildToStage(super.insertAfter(t,e))}insertInto(t,e){return this._updateChildToStage(super.insertInto(t,e))}removeChild(t){const e=super.removeChild(t);return this.getGraphicService().onRemove(t),t.stage=null,this.addUpdateBoundTag(),e}removeAllChild(t=!1){this.forEachChildren((e=>{this.getGraphicService().onRemove(e),t&&e.isContainer&&e.removeAllChild(t)})),super.removeAllChild(),this.addUpdateBoundTag()}setStage(t,e){this.stage!==t&&(this.stage=t,this.layer=e,this.setStageToShadowRoot(t,e),this._onSetStage&&this._onSetStage(this,t,e),this.getGraphicService().onSetStage(this,t),this.forEachChildren((i=>{i.setStage(t,this.layer)})))}addUpdatePositionTag(){super.addUpdatePositionTag(),this.forEachChildren((t=>{t.isContainer&&t.addUpdateGlobalPositionTag()}))}addUpdateGlobalPositionTag(){super.addUpdateGlobalPositionTag(),this.forEachChildren((t=>{t.isContainer&&t.addUpdateGlobalPositionTag()}))}tryUpdateGlobalTransMatrix(t=!0){if(this.shouldUpdateGlobalMatrix()){if(this._globalTransMatrix){if(this.parent){const e=this.parent.globalTransMatrix;this._globalTransMatrix.setValue(e.a,e.b,e.c,e.d,e.e,e.f)}}else this._globalTransMatrix=this.parent?this.parent.globalTransMatrix.clone():this.transMatrix.clone();this.doUpdateGlobalMatrix(),t&&this.clearUpdateGlobalPositionTag()}return this._globalTransMatrix}shouldUpdateGlobalMatrix(){return!!(this._updateTag&si.UPDATE_GLOBAL_MATRIX)}_getChildByName(t,e){return this.find((i=>i.name===t),e)}createOrUpdateChild(t,e,i){let r=this._getChildByName(t);return r?r.setAttributes(e):(r=St.graphicService.creator[i](e),r.name=t,this.add(r)),r}clone(){return new kI(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return kI.NOWORK_ANIMATE_ATTR}release(t){t&&this.forEachChildren((e=>{e.release(t)})),super.release()}};_e.NOWORK_ANIMATE_ATTR=Ka;function AS(n){return new _e(n)}class N4t extends _e{get offscreen(){return this.layerHandler.offscreen}get layerMode(){return this.layerHandler.type}get width(){return this.stage?this.stage.width:0}get height(){return this.stage?this.stage.height:0}get viewWidth(){return this.stage?this.stage.viewWidth:0}get viewHeight(){return this.stage?this.stage.viewHeight:0}get dirtyBound(){throw new Error("")}get dpr(){return this._dpr}constructor(t,e,i,r){var o;super({}),this.stage=t,this.global=e,this.window=i,this.main=r.main,this.layerHandler=r.layerHandler,this.layerHandler.init(this,i,{main:r.main,canvasId:r.canvasId,width:this.viewWidth,height:this.viewHeight,zIndex:(o=r.zIndex)!==null&&o!==void 0?o:0}),this.layer=this,this.subLayers=new Map,this.theme=new Rb,this.background="rgba(0, 0, 0, 0)",this.afterDrawCbs=[]}combineSubLayer(t=!0){const e=Array.from(this.subLayers.values()).sort(((i,r)=>i.zIndex-r.zIndex));this.layerHandler.merge(e.map((i=>(i.layer.subLayers.size&&i.layer.combineSubLayer(t),i.layer.getNativeHandler())))),t&&e.forEach((i=>{i.group&&(i.group.incremental=0)})),e.forEach((i=>{St.layerService.releaseLayer(this.stage,i.layer)})),this.subLayers.clear()}getNativeHandler(){return this.layerHandler}setStage(t,e){super.setStage(t,this)}pick(t,e){throw new Error("")}tryRenderSecondaryLayer(t,e){this.layerHandler.secondaryHandlers&&this.layerHandler.secondaryHandlers.length&&this.layerHandler.secondaryHandlers.forEach((i=>{i.layer.renderCount=this.renderCount,i.layer.render(t,e)}))}render(t,e){var i;this.layerHandler.render([this],{renderService:t.renderService,stage:this.stage,layer:this,viewBox:t.viewBox,transMatrix:t.transMatrix,background:(i=t.background)!==null&&i!==void 0?i:this.background,updateBounds:t.updateBounds},e),this.afterDrawCbs.forEach((r=>r(this))),this.tryRenderSecondaryLayer(t,e)}resize(t,e){this.layerHandler.resize(t,e)}resizeView(t,e){this.layerHandler.resizeView(t,e)}setDpr(t){this.layerHandler.setDpr(t)}afterDraw(t){this.afterDrawCbs.push(t)}startAnimate(t){throw new Error("")}setToFrame(t){throw new Error("")}prepare(t,e){}release(){super.release(),this.layerHandler.release(),this.subLayers&&this.subLayers.forEach((t=>{St.layerService.releaseLayer(this.stage,t.layer)}))}drawTo(t,e){var i;this.layerHandler.drawTo(t,[this],Object.assign({background:(i=e.background)!==null&&i!==void 0?i:this.background,renderService:e.renderService,viewBox:e.viewBox,transMatrix:e.transMatrix,stage:this.stage,layer:this},e)),this.afterDrawCbs.forEach((r=>r(this)))}}const _at=Symbol.for("TransformUtil"),Cat=Symbol.for("GraphicUtil"),x3=Symbol.for("LayerService"),wat=Symbol.for("StaticLayerHandlerContribution"),W4t=Symbol.for("DynamicLayerHandlerContribution"),V4t=Symbol.for("VirtualLayerHandlerContribution");var B0,G4t=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a},$4t=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)};let k0=B0=class{static GenerateLayerId(){return`${B0.idprefix}_${B0.prefix_count++}`}constructor(){this.layerMap=new Map,this.global=St.global}tryInit(){this.inited||(this.staticLayerCountInEnv=this.global.getStaticCanvasCount(),this.dynamicLayerCountInEnv=this.global.getDynamicCanvasCount(),this.inited=!0)}getStageLayer(n){return this.layerMap.get(n)}getRecommendedLayerType(n){return n||(this.staticLayerCountInEnv!==0?"static":this.dynamicLayerCountInEnv!==0?"dynamic":"virtual")}getLayerHandler(n){let t;return t=n==="static"?Kt.get(wat):n==="dynamic"?Kt.get(W4t):Kt.get(V4t),t}createLayer(n,t={main:!1}){var e;this.tryInit();let i=this.getRecommendedLayerType(t.layerMode);i=t.main||t.canvasId?"static":i;const r=this.getLayerHandler(i),o=new N4t(n,this.global,n.window,Object.assign(Object.assign({main:!1},t),{layerMode:i,canvasId:(e=t.canvasId)!==null&&e!==void 0?e:B0.GenerateLayerId(),layerHandler:r})),a=this.layerMap.get(n)||[];return a.push(o),this.layerMap.set(n,a),this.staticLayerCountInEnv--,o}prepareStageLayer(n){let t;n.forEachChildren((e=>{const i=e.getNativeHandler();i.type==="virtual"?(i.mainHandler=t,t.secondaryHandlers.push(i)):(t=i,t.secondaryHandlers=[])}))}releaseLayer(n,t){t.release();const e=this.layerMap.get(n)||[];this.layerMap.set(n,e.filter((i=>i!==t)))}layerCount(n){return(this.layerMap.get(n)||[]).length}restLayerCount(n){return this.global.env==="browser"?10:0}releaseStage(n){this.layerMap.delete(n)}};k0.idprefix="visactor_layer",k0.prefix_count=0,k0=B0=G4t([wt(),$4t("design:paramtypes",[])],k0);const j4t=new ie((n=>{n(a3).to(mI).inSingletonScope(),n(Mb).to(xI),n(Cat).to(SI).inSingletonScope(),n(_at).to(AI).inSingletonScope(),n(x3).to(k0).inSingletonScope()}));function xv(n,t){return!(!n&&!t)}function Pb(n,t){let e;return e=$e(n)?n.some((i=>i||i===void 0)):!!n,e&&t>0}function zf(n,t,e){return e&&n*t>0}function xat(n,t,e,i,r){return r&&n*t>0&&e!==0&&i!==0}function LI(n,t){return n*t>0}function Sat(n,t,e,i,r){return r?n*t>0:n*t>0&&e!==0&&i!==0}function U4t(n,t,e,i,r,o,a,s){const l=e-n,h=i-t,u=a-r,d=s-o;let c=d*l-u*h;return c*c<vi?[]:(c=(u*(t-o)-d*(n-r))/c,[n+c*l,t+c*h])}function Wu(n,t,e,i,r,o,a){const s=n-e,l=t-i,h=(a?o:-o)/Math.sqrt(s*s+l*l),u=h*l,d=-h*s,c=n+u,f=t+d,g=e+u,p=i+d,v=(c+g)/2,m=(f+p)/2,y=g-c,b=p-f,_=y*y+b*b,w=r-o,C=c*p-g*f,x=(b<0?-1:1)*Math.sqrt(Math.max(0,w*w*_-C*C));let S=(C*b-y*x)/_,A=(-C*y-b*x)/_;const T=(C*b+y*x)/_,M=(-C*y+b*x)/_,R=S-v,L=A-m,B=T-v,P=M-m;return R*R+L*L>B*B+P*P&&(S=T,A=M),{cx:S,cy:A,x01:-u,y01:-d,x11:S*(r/w-1),y11:A*(r/w-1)}}function Aat(n,t,e,i,r){const o=Ke(e-t),a=n.getParsedCornerRadius(),s=$e(a),{outerDeltaAngle:l,innerDeltaAngle:h,outerStartAngle:u,outerEndAngle:d,innerEndAngle:c,innerStartAngle:f}=n.getParsePadAngle(t,e),g=s?a[0]:a,p=s?a[1]:a,v=s?a[2]:a,m=s?a[3]:a,y=Math.max(p,g),b=Math.max(v,m);let _=y,w=b;const C=r*wn(u),x=r*Hi(u),S=i*wn(c),A=i*Hi(c);let T,M,R,L;if((b>vi||y>vi)&&(T=r*wn(d),M=r*Hi(d),R=i*wn(f),L=i*Hi(f),o<Ki)){const B=U4t(C,x,R,L,T,M,S,A);if(B){const P=C-B[0],k=x-B[1],E=T-B[0],D=M-B[1],I=1/Hi(pNt((P*E+k*D)/(ws(P*P+k*k)*ws(E*E+D*D)))/2),O=ws(B[0]*B[0]+B[1]*B[1]);w=xr(b,(i-O)/(I-1)),_=xr(y,(r-O)/(I+1))}}return{outerDeltaAngle:l,xors:C,yors:x,xirs:R,yirs:L,xore:T,yore:M,xire:S,yire:A,limitedOcr:_,limitedIcr:w,outerCornerRadiusStart:g,outerCornerRadiusEnd:p,maxOuterCornerRadius:y,maxInnerCornerRadius:b,outerStartAngle:u,outerEndAngle:d,innerDeltaAngle:h,innerEndAngle:c,innerStartAngle:f,innerCornerRadiusStart:m,innerCornerRadiusEnd:v}}function EI(n,t,e,i,r,o,a){const{startAngle:s,endAngle:l}=n.getParsedAngle(),h=Ke(l-s),u=l>s;let d=!1;if(r<o){const c=r;r=o,o=c}if(r<=vi)t.moveTo(e,i);else if(h>=le-vi)t.moveTo(e+r*wn(s),i+r*Hi(s)),t.arc(e,i,r,s,l,!u),o>vi&&(t.moveTo(e+o*wn(l),i+o*Hi(l)),t.arc(e,i,o,l,s,u));else{const{outerDeltaAngle:c,xors:f,yors:g,xirs:p,yirs:v,limitedOcr:m,outerCornerRadiusStart:y,outerCornerRadiusEnd:b,maxOuterCornerRadius:_,xore:w,yore:C,xire:x,yire:S,outerStartAngle:A,outerEndAngle:T,limitedIcr:M,innerDeltaAngle:R,innerEndAngle:L,innerStartAngle:B,innerCornerRadiusStart:P,innerCornerRadiusEnd:k,maxInnerCornerRadius:E}=Aat(n,s,l,o,r);if(c<.001)a&&(a[3]||a[1])&&t.moveTo(e+f,i+g),d=!0;else if(m>vi){const D=xr(y,m),I=xr(b,m),O=Wu(p,v,f,g,r,D,Number(u)),H=Wu(w,C,x,S,r,I,Number(u));m<_&&D===I?!a||a[0]?(t.moveTo(e+O.cx+O.x01,i+O.cy+O.y01),t.arc(e+O.cx,i+O.cy,m,je(O.y01,O.x01),je(H.y01,H.x01),!u)):t.moveTo(e+O.cx+m*wn(je(H.y01,H.x01)),i+O.cy+m*Hi(je(H.y01,H.x01))):!a||a[0]?(t.moveTo(e+O.cx+O.x01,i+O.cy+O.y01),D>0&&t.arc(e+O.cx,i+O.cy,D,je(O.y01,O.x01),je(O.y11,O.x11),!u),t.arc(e,i,r,je(O.cy+O.y11,O.cx+O.x11),je(H.cy+H.y11,H.cx+H.x11),!u),I>0&&t.arc(e+H.cx,i+H.cy,I,je(H.y11,H.x11),je(H.y01,H.x01),!u)):I>0?t.moveTo(e+H.cx+I*wn(je(H.y01,H.x01)),i+H.cy+I*Hi(je(H.y01,H.x01))):t.moveTo(e+w,i+r*Hi(T))}else!a||a[0]?(t.moveTo(e+f,i+g),t.arc(e,i,r,A,T,!u)):t.moveTo(e+r*wn(T),i+r*Hi(T));if(!(o>vi)||R<.001)!a||a[1]?t.lineTo(e+x,i+S):t.moveTo(e+x,i+S),d=!0;else if(M>vi){const D=xr(P,M),I=xr(k,M),O=Wu(x,S,w,C,o,-I,Number(u)),H=Wu(f,g,p,v,o,-D,Number(u));if(!a||a[1]?t.lineTo(e+O.cx+O.x01,i+O.cy+O.y01):t.moveTo(e+O.cx+O.x01,i+O.cy+O.y01),M<E&&D===I){const F=je(H.y01,H.x01);!a||a[2]?t.arc(e+O.cx,i+O.cy,M,je(O.y01,O.x01),F,!u):t.moveTo(e+O.cx+wn(F),i+O.cy+Hi(F))}else!a||a[2]?(I>0&&t.arc(e+O.cx,i+O.cy,I,je(O.y01,O.x01),je(O.y11,O.x11),!u),t.arc(e,i,o,je(O.cy+O.y11,O.cx+O.x11),je(H.cy+H.y11,H.cx+H.x11),u),D>0&&t.arc(e+H.cx,i+H.cy,D,je(H.y11,H.x11),je(H.y01,H.x01),!u)):D>0?t.moveTo(e+H.cx+D*wn(je(H.y01,H.x01)),i+H.cy+D*Hi(je(H.y01,H.x01))):t.moveTo(e+p,i+v)}else!a||a[1]?t.lineTo(e+x,i+S):t.moveTo(e+x,i+S),!a||a[2]?t.arc(e,i,o,L,B,u):t.moveTo(e+o*wn(B),i+o*Hi(B))}return a?a[3]&&t.lineTo(e+r*wn(s),i+r*Hi(s)):t.closePath(),d}const DI=Symbol.for("ArcRenderContribution"),Y4t=Symbol.for("AreaRenderContribution"),II=Symbol.for("CircleRenderContribution"),ma=Symbol.for("GroupRenderContribution"),Yc=Symbol.for("ImageRenderContribution"),OI=Symbol.for("PathRenderContribution"),HI=Symbol.for("PolygonRenderContribution"),Xc=Symbol.for("RectRenderContribution"),zI=Symbol.for("SymbolRenderContribution"),TS=Symbol.for("TextRenderContribution"),S3=Symbol.for("InteractiveSubRenderContribution");function Sv(n,t){return n==="end"||n==="right"?-t:n==="center"?-t/2:0}function Bb(n,t,e,i=0){return n==="middle"?-t/2:n==="top"?0:n==="bottom"?i-t:n&&n!=="alphabetic"?0:(e||(e=t),-(t-e)/2-.79*e)}var X4t=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a},q4t=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},K4t=function(n,t){return function(e,i){t(e,i,n)}};function Tat(n,t,e){var i;const{x:r=e.x,y:o=e.y,z:a=e.z,dx:s=e.dx,dy:l=e.dy,dz:h=e.dz,scaleX:u=e.scaleX,scaleY:d=e.scaleY,scaleZ:c=e.scaleZ,alpha:f=e.alpha,beta:g=e.beta,angle:p=e.angle,anchor3d:v=t.attribute.anchor,anchor:m}=t.attribute,y=[0,0,0];if(v){if(typeof v[0]=="string"){const b=parseFloat(v[0])/100,_=t.AABBBounds;y[0]=_.x1+(_.x2-_.x1)*b}else y[0]=v[0];if(typeof v[1]=="string"){const b=parseFloat(v[1])/100,_=t.AABBBounds;y[1]=_.x1+(_.x2-_.x1)*b}else y[1]=v[1];y[2]=(i=v[2])!==null&&i!==void 0?i:0}if(bat(n),Km(n,n,[r+s,o+l,a+h]),Km(n,n,[y[0],y[1],y[2]]),S4t(n,n,g),A4t(n,n,f),Km(n,n,[-y[0],-y[1],y[2]]),M4t(n,n,[u,d,c]),p){const b=Tn.allocate(),_=[0,0];if(m){if(typeof v[0]=="string"){const w=parseFloat(v[0])/100,C=t.AABBBounds;_[0]=C.x1+(C.x2-C.x1)*w}else _[0]=v[0];if(typeof v[1]=="string"){const w=parseFloat(v[1])/100,C=t.AABBBounds;_[1]=C.x1+(C.x2-C.x1)*w}else _[1]=v[1]}Km(b,b,[_[0],_[1],0]),T4t(b,b,p),Km(b,b,[-_[0],-_[1],0]),D_(n,n,b)}}function Z4t(n){const{alpha:t,beta:e}=n.attribute;return t||e}let FI=class{constructor(n){this.creator=n,this.hooks={onAttributeUpdate:new Ir(["graphic"]),onSetStage:new Ir(["graphic","stage"]),onRemove:new Ir(["graphic"]),onRelease:new Ir(["graphic"]),onAddIncremental:new Ir(["graphic","group","stage"]),onClearIncremental:new Ir(["graphic","group","stage"]),beforeUpdateAABBBounds:new Ir(["graphic","stage","willUpdate","aabbBounds"]),afterUpdateAABBBounds:new Ir(["graphic","stage","aabbBounds","globalAABBBounds","selfChange"]),clearAABBBounds:new Ir(["graphic","stage","aabbBounds"])},this.tempAABBBounds1=new sr,this.tempAABBBounds2=new sr}onAttributeUpdate(n){this.hooks.onAttributeUpdate.taps.length&&this.hooks.onAttributeUpdate.call(n)}onSetStage(n,t){this.hooks.onSetStage.taps.length&&this.hooks.onSetStage.call(n,t)}onRemove(n){this.hooks.onRemove.taps.length&&this.hooks.onRemove.call(n)}onRelease(n){this.hooks.onRelease.taps.length&&this.hooks.onRelease.call(n)}onAddIncremental(n,t,e){this.hooks.onAddIncremental.taps.length&&this.hooks.onAddIncremental.call(n,t,e)}onClearIncremental(n,t){this.hooks.onClearIncremental.taps.length&&this.hooks.onClearIncremental.call(n,t)}beforeUpdateAABBBounds(n,t,e,i){this.hooks.beforeUpdateAABBBounds.taps.length&&this.hooks.beforeUpdateAABBBounds.call(n,t,e,i)}afterUpdateAABBBounds(n,t,e,i,r){this.hooks.afterUpdateAABBBounds.taps.length&&this.hooks.afterUpdateAABBBounds.call(n,t,e,i,r)}clearAABBBounds(n,t,e){this.hooks.clearAABBBounds.taps.length&&this.hooks.clearAABBBounds.call(n,t,e)}updatePathProxyAABBBounds(n,t){const e=typeof t.pathProxy=="function"?t.pathProxy(t.attribute):t.pathProxy;if(!e)return!1;const i=new u3(n);return Vh(e.commandList,i,0,0),!0}updateHTMLTextAABBBounds(n,t,e,i){const{textAlign:r,textBaseline:o}=n;if(n.forceBoundsHeight!=null){const a=Kn(n.forceBoundsHeight)?n.forceBoundsHeight:n.forceBoundsHeight(),s=Bb(o,a,a);e.set(e.x1,s,e.x2,s+a)}if(n.forceBoundsWidth!=null){const a=Kn(n.forceBoundsWidth)?n.forceBoundsWidth:n.forceBoundsWidth(),s=Sv(r,a);e.set(s,e.y1,s+a,e.y2)}}combindShadowAABBBounds(n,t){if(t&&t.shadowRoot){const e=t.shadowRoot.AABBBounds;n.union(e)}}transformAABBBounds(n,t,e,i,r){if(!t.empty()){const{scaleX:s=e.scaleX,scaleY:l=e.scaleY,stroke:h=e.stroke,shadowBlur:u=e.shadowBlur,lineWidth:d=e.lineWidth,pickStrokeBuffer:c=e.pickStrokeBuffer,strokeBoundsBuffer:f=e.strokeBoundsBuffer}=n,g=this.tempAABBBounds1,p=this.tempAABBBounds2;if(h&&d){const v=(d+c)/Math.abs(s+l);SS(g,v,i,f),t.union(g),g.setValue(p.x1,p.y1,p.x2,p.y2)}if(u){const{shadowOffsetX:v=e.shadowOffsetX,shadowOffsetY:m=e.shadowOffsetY}=n,y=u/Math.abs(s+l)*2;SS(g,y,!1,f+1),g.translate(v,m),t.union(g)}}if(this.combindShadowAABBBounds(t,r),t.empty())return;let o=!0;const a=r.transMatrix;r&&r.isContainer&&(o=!(a.a===1&&a.b===0&&a.c===0&&a.d===1&&a.e===0&&a.f===0)),o&&l3(t,t,a)}validCheck(n,t,e,i){if(!i||n.forceBoundsHeight!=null||n.forceBoundsWidth!=null||i.shadowRoot||i.isContainer)return!0;const{visible:r=t.visible}=n;return!(!i.valid||!r)||(e.empty()||(i.parent&&e.transformWithMatrix(i.parent.globalTransMatrix),this.clearAABBBounds(i,i.stage,e),e.clear()),!1)}updateTempAABBBounds(n){const t=this.tempAABBBounds1,e=this.tempAABBBounds2;return t.setValue(n.x1,n.y1,n.x2,n.y2),e.setValue(n.x1,n.y1,n.x2,n.y2),{tb1:t,tb2:e}}};FI=X4t([wt(),K4t(0,Ce(mat)),q4t("design:paramtypes",[Object])],FI);const I_=(n,t,e)=>{const{outerBorder:i,shadowBlur:r=t.shadowBlur}=n;if(i){const o=t.outerBorder,{distance:a=o.distance,lineWidth:s=o.lineWidth}=i;e.expand(a+(r+s)/2)}return e},s$=["radius","startAngle","endAngle",...ta];let Ff=class NI extends Pn{constructor(t={radius:1}){super(t),this.type="circle",this.numberType=UM}isValid(){return super.isValid()&&this._isValid()}_isValid(){const{startAngle:t,endAngle:e,radius:i}=this.attribute;return this._validNumber(t)&&this._validNumber(e)&&this._validNumber(i)}getGraphicTheme(){return he(this).circle}updateAABBBounds(t,e,i,r){this.updatePathProxyAABBBounds(i)||(r?this.updateCircleAABBBoundsImprecise(t,e,i):this.updateCircleAABBBoundsAccurate(t,e,i));const{tb1:o,tb2:a}=St.graphicService.updateTempAABBBounds(i);return I_(t,e,o),i.union(o),o.setValue(a.x1,a.y1,a.x2,a.y2),this.widthWithoutTransform=i.x2-i.x1,this.heightWithoutTransform=i.y2-i.y1,St.graphicService.transformAABBBounds(t,i,e,!1,this),i}updateCircleAABBBoundsImprecise(t,e,i){const{radius:r=e.radius}=t;return i.set(-r,-r,r,r),i}updateCircleAABBBoundsAccurate(t,e,i){const{startAngle:r=e.startAngle,endAngle:o=e.endAngle,radius:a=e.radius}=t;return o-r>le-vi?i.set(-a,-a,a,a):TI(r,o,a,i),i}needUpdateTags(t){return super.needUpdateTags(t,s$)}needUpdateTag(t){return super.needUpdateTag(t,s$)}toCustomPath(){var t,e,i;let r=super.toCustomPath();if(r)return r;const o=this.attribute,a=(t=o.radius)!==null&&t!==void 0?t:this.getDefaultAttribute("radius"),s=(e=o.startAngle)!==null&&e!==void 0?e:this.getDefaultAttribute("startAngle"),l=(i=o.endAngle)!==null&&i!==void 0?i:this.getDefaultAttribute("endAngle");return r=new An,r.arc(0,0,a,s,l),r}clone(){return new NI(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return NI.NOWORK_ANIMATE_ATTR}};Ff.NOWORK_ANIMATE_ATTR=Ka;function Mat(n){return new Ff(n)}class WI{constructor(t,e,i){this.fontFamily=t,this.textOptions=e,this.textMeasure=i}LayoutBBox(t,e,i,r){if(t.xOffset=e==="left"||e==="start"?0:e==="center"?t.width/-2:e==="right"||e==="end"?-t.width:0,i==="top")t.yOffset=0;else if(i==="middle")t.yOffset=t.height/-2;else if(i==="alphabetic"){let o=.79;if(r.length===1){const a=r[0];o=a.ascent/(a.ascent+a.descent)}t.yOffset=t.height*-o}else t.yOffset=-t.height;return t}GetLayoutByLines(t,e,i,r,o="",a,s){const{lineWidth:l,suffixPosition:h="end",measureMode:u=pf.actualBounding,keepCenterInLine:d=!1}=s??{};t=t.map((p=>p.toString()));const c=[],f=[0,0];if(typeof l=="number"&&l!==1/0){let p;for(let v=0,m=t.length;v<m;v++){const y=this.textMeasure.measureTextPixelADscentAndWidth(t[v],this.textOptions,u);let b=t[v].toString();if(y.width>l){const _=this.textMeasure.clipTextWithSuffix(t[v],this.textOptions,l,o,a,h);b=_.str,p=_.width}else p=y.width;c.push({str:b,width:p,ascent:y.ascent,descent:y.descent,keepCenterInLine:d})}f[0]=l}else{let p,v,m=0;for(let y=0,b=t.length;y<b;y++){v=t[y];const _=this.textMeasure.measureTextPixelADscentAndWidth(t[y],this.textOptions,u);p=_.width,m=Math.max(m,p),c.push({str:v,width:p,ascent:_.ascent,descent:_.descent,keepCenterInLine:d})}f[0]=m}f[1]=c.length*r,f[0]=c.reduce(((p,v)=>Math.max(p,v.width)),0);const g={xOffset:0,yOffset:0,width:f[0],height:f[1]};return this.LayoutBBox(g,e,i,c),this.layoutWithBBox(g,c,e,i,r)}layoutWithBBox(t,e,i,r,o){const a=[0,0],s=e.length*o;r==="top"||(r==="middle"?a[1]=(t.height-s)/2:r==="bottom"&&(a[1]=t.height-s));for(let l=0;l<e.length;l++)this.lineOffset(t,e[l],i,r,o,a);return{bbox:t,lines:e,fontFamily:this.fontFamily,fontSize:this.textOptions.fontSize,fontWeight:this.textOptions.fontWeight,lineHeight:o,textAlign:i,textBaseline:r}}lineOffset(t,e,i,r,o,a){if(i==="left"||i==="start"?e.leftOffset=0:i==="center"?e.leftOffset=(t.width-e.width)/2:i!=="right"&&i!=="end"||(e.leftOffset=t.width-e.width),e.topOffset=o/2+(e.ascent-e.descent)/2+a[1],!e.keepCenterInLine){const l=e.ascent+e.descent+0;if(l<o-0&&(r==="bottom"?e.topOffset+=(o-l)/2:r==="top"&&(e.topOffset-=(o-l)/2)),r==="alphabetic"){const h=o/(e.ascent+e.descent);e.topOffset=o/2+(e.ascent-e.descent)/2*h+a[1]}}return a[1]+=o,e}}const l$=["text","maxLineWidth","maxWidth","textAlign","textBaseline","heightLimit","lineClamp","fontSize","fontFamily","fontWeight","ellipsis","lineHeight","direction","wordBreak","heightLimit","lineClamp",...ta];let tn=class mu extends Pn{get font(){const t=this.getGraphicTheme();return this._font||(this._font=Hot(this.attribute,t)),this._font}get clipedText(){var t;const e=this.attribute,i=this.getGraphicTheme(),r=this.getMaxWidth(i);return Number.isFinite(r)?(this.tryUpdateAABBBounds(),this.cache.clipedText):((t=e.text)!==null&&t!==void 0?t:i.text).toString()}get clipedWidth(){return this.tryUpdateAABBBounds(),this.cache.clipedWidth}get cliped(){var t,e;const i=this.getGraphicTheme(),r=this.attribute,o=this.getMaxWidth(i);if(!Number.isFinite(o))return!1;const{text:a}=this.attribute;if(this.tryUpdateAABBBounds(),(e=(t=this.cache)===null||t===void 0?void 0:t.layoutData)===null||e===void 0?void 0:e.lines){let s="";return this.cache.layoutData.lines.forEach((l=>{s+=l.str})),(Array.isArray(a)?a.join(""):a).toString()!==s}return r.direction==="vertical"&&this.cache.verticalList&&this.cache.verticalList[0]?this.cache.verticalList[0].map((s=>s.text)).join("")!==r.text.toString():this.clipedText!=null&&this.clipedText!==r.text.toString()}get multilineLayout(){return this.tryUpdateAABBBounds(),this.cache.layoutData}get isMultiLine(){return Array.isArray(this.attribute.text)||this.attribute.whiteSpace==="normal"}constructor(t={text:"",fontSize:16}){super(t),this.type="text",this.numberType=ZM,this.cache={}}isValid(){return super.isValid()&&this._isValid()}_isValid(){const{text:t}=this.attribute;return $e(t)?!t.every((e=>e==null||e==="")):t!=null&&t!==""}getGraphicTheme(){return he(this).text}doUpdateOBBBounds(){const t=this.getGraphicTheme();this._OBBBounds.clear();const e=this.attribute,{angle:i=t.angle}=e;if(!i){const h=this.AABBBounds;return this._OBBBounds.setValue(h.x1,h.y1,h.x2,h.y2),this._OBBBounds}this.obbText||(this.obbText=new mu({})),this.obbText.setAttributes(Object.assign(Object.assign({},e),{angle:0}));const r=this.obbText.AABBBounds,{x:o,y:a}=e,s={x:(r.x1+r.x2)/2,y:(r.y1+r.y2)/2},l=mh(s,i,{x:o,y:a});return this._OBBBounds.copy(r),this._OBBBounds.translate(l.x-s.x,l.y-s.y),this._OBBBounds.angle=i,this._OBBBounds}updateAABBBounds(t,e,i){const{text:r=e.text}=this.attribute;Array.isArray(r)?this.updateMultilineAABBBounds(r):this.updateSingallineAABBBounds(r);const{tb1:o}=St.graphicService.updateTempAABBBounds(i),{scaleX:a=e.scaleX,scaleY:s=e.scaleY,shadowBlur:l=e.shadowBlur,strokeBoundsBuffer:h=e.strokeBoundsBuffer}=t;if(l){const u=l/Math.abs(a+s);SS(o,u,!0,h),i.union(o)}return St.graphicService.combindShadowAABBBounds(i,this),t.forceBoundsHeight==null&&t.forceBoundsWidth==null||St.graphicService.updateHTMLTextAABBBounds(t,e,i),this.widthWithoutTransform=i.x2-i.x1,this.heightWithoutTransform=i.y2-i.y1,l3(i,i,this.transMatrix),i}updateSingallineAABBBounds(t){this.updateMultilineAABBBounds([t]);const e=this.cache.layoutData;if(e&&e.lines&&e.lines.length){const i=e.lines[0];this.cache.clipedText=i.str,this.cache.clipedWidth=i.width}return this._AABBBounds}updateMultilineAABBBounds(t){const e=this.getGraphicTheme(),{direction:i=e.direction,underlineOffset:r=e.underlineOffset}=this.attribute,o=i==="horizontal"?this.updateHorizontalMultilineAABBBounds(t):this.updateVerticalMultilineAABBBounds(t);return i==="horizontal"&&r&&this._AABBBounds.add(this._AABBBounds.x1,this._AABBBounds.y2+r),o}guessLineHeightBuf(t){return t?.1*t:0}updateHorizontalMultilineAABBBounds(t){var e,i;const r=this.getGraphicTheme(),o=this.attribute,{fontFamily:a=r.fontFamily,textAlign:s=r.textAlign,textBaseline:l=r.textBaseline,fontSize:h=r.fontSize,fontWeight:u=r.fontWeight,ellipsis:d=r.ellipsis,maxLineWidth:c,stroke:f=r.stroke,wrap:g=r.wrap,measureMode:p=r.measureMode,lineWidth:v=r.lineWidth,whiteSpace:m=r.whiteSpace,suffixPosition:y=r.suffixPosition,ignoreBuf:b=r.ignoreBuf,keepCenterInLine:_=r.keepCenterInLine}=o,w=b?0:this.guessLineHeightBuf(h),C=this.getLineHeight(o,r,w);if(m==="normal"||g)return this.updateWrapAABBBounds(t);if(!this.shouldUpdateShape()&&(!((e=this.cache)===null||e===void 0)&&e.layoutData)){const T=this.cache.layoutData.bbox;return this._AABBBounds.set(T.xOffset,T.yOffset,T.xOffset+T.width,T.yOffset+T.height),f&&this._AABBBounds.expand(v/2),this._AABBBounds}const x=St.graphicUtil.getTextMeasureInstance(this.textMeasureId||((i=this.stage)===null||i===void 0?void 0:i.textMeasureId)),S=new WI(a,{fontSize:h,fontWeight:u,fontFamily:a,lineHeight:C},x).GetLayoutByLines(t,s,l,C,d===!0?r.ellipsis:d||void 0,!1,{lineWidth:c,suffixPosition:y,measureMode:p,keepCenterInLine:_}),{bbox:A}=S;return this.cache.layoutData=S,this.clearUpdateShapeTag(),this._AABBBounds.set(A.xOffset,A.yOffset,A.xOffset+A.width,A.yOffset+A.height),f&&this._AABBBounds.expand(v/2),this._AABBBounds}updateWrapAABBBounds(t){var e,i,r,o;const a=this.getGraphicTheme(),{fontFamily:s=a.fontFamily,textAlign:l=a.textAlign,textBaseline:h=a.textBaseline,fontSize:u=a.fontSize,ellipsis:d=a.ellipsis,maxLineWidth:c,stroke:f=a.stroke,lineWidth:g=a.lineWidth,wordBreak:p=a.wordBreak,fontWeight:v=a.fontWeight,ignoreBuf:m=a.ignoreBuf,measureMode:y=a.measureMode,suffixPosition:b=a.suffixPosition,heightLimit:_=0,lineClamp:w,keepCenterInLine:C=a.keepCenterInLine}=this.attribute,x=m?0:this.guessLineHeightBuf(u),S=this.getLineHeight(this.attribute,a,x);if(!this.shouldUpdateShape()&&(!((e=this.cache)===null||e===void 0)&&e.layoutData)){const D=this.cache.layoutData.bbox;return this._AABBBounds.set(D.xOffset,D.yOffset,D.xOffset+D.width,D.yOffset+D.height),f&&this._AABBBounds.expand(g/2),this._AABBBounds}const A=St.graphicUtil.getTextMeasureInstance(this.textMeasureId||((i=this.stage)===null||i===void 0?void 0:i.textMeasureId)),T={fontSize:u,fontWeight:v,fontFamily:s,lineHeight:S},M=new WI(s,T,A),R=$e(t)?t.map((D=>D.toString())):[t.toString()],L=[],B=[0,0];let P=1/0;if(_>0&&(P=Math.max(Math.floor(_/S),1)),w&&(P=Math.min(P,w)),typeof c=="number"&&c!==1/0){if(c>0)for(let I=0;I<R.length;I++){const O=R[I];let H=!0;if(I===P-1){const V=A.clipTextWithSuffix(O,T,c,d,!1,b,I!==R.length-1),X=A.measureTextPixelADscentAndWidth(V.str,T,y);L.push({str:V.str,width:V.width,ascent:X.ascent,descent:X.descent,keepCenterInLine:C});break}const F=A.clipText(O,T,c,p!=="break-all",p==="keep-all");if(O!==""&&F.str===""||F.wordBreaked){if(d){const V=A.clipTextWithSuffix(O,T,c,d,!1,b);F.str=(r=V.str)!==null&&r!==void 0?r:"",F.width=(o=V.width)!==null&&o!==void 0?o:0}else F.str="",F.width=0;H=!1}const N=A.measureTextPixelADscentAndWidth(F.str,T,y);L.push({str:F.str,width:F.width,ascent:N.ascent,descent:N.descent,keepCenterInLine:C});let $=F.str.length;if(!F.wordBreaked||O!==""&&F.str===""||(H=!0,$=F.wordBreaked),F.str.length!==O.length){if(H){let V=O.substring($);p==="keep-all"&&(V=V.replace(/^\s+/g,"")),R.splice(I+1,0,V)}}}let D=0;L.forEach((I=>{D=Math.max(D,I.width)})),B[0]=D}else{let D,I,O=0;for(let H=0,F=R.length;H<F;H++){if(H===P-1){const $=A.clipTextWithSuffix(R[H],T,c,d,!1,b),V=A.measureTextPixelADscentAndWidth($.str,T,y);L.push({str:$.str,width:$.width,ascent:V.ascent,descent:V.descent,keepCenterInLine:C}),O=Math.max(O,$.width);break}I=R[H],D=A.measureTextWidth(I,T),O=Math.max(O,D);const N=A.measureTextPixelADscentAndWidth(I,T,y);L.push({str:I,width:D,ascent:N.ascent,descent:N.descent,keepCenterInLine:C})}B[0]=O}B[1]=L.length*S;const k={xOffset:0,yOffset:0,width:B[0],height:B[1]};M.LayoutBBox(k,l,h,L);const E=M.layoutWithBBox(k,L,l,h,S);return this.cache.layoutData=E,this.clearUpdateShapeTag(),this._AABBBounds.set(k.xOffset,k.yOffset,k.xOffset+k.width,k.yOffset+k.height),f&&this._AABBBounds.expand(g/2),this._AABBBounds}updateVerticalMultilineAABBBounds(t){var e,i,r;const o=this.getGraphicTheme(),a=St.graphicUtil.getTextMeasureInstance(this.textMeasureId||((e=this.stage)===null||e===void 0?void 0:e.textMeasureId));let s;const l=this.attribute,{maxLineWidth:h=o.maxLineWidth,ellipsis:u=o.ellipsis,fontFamily:d=o.fontFamily,fontSize:c=o.fontSize,fontWeight:f=o.fontWeight,stroke:g=o.stroke,lineWidth:p=o.lineWidth,verticalMode:v=o.verticalMode,suffixPosition:m=o.suffixPosition}=l,y=this.getLineHeight(l,o,0);let{textAlign:b=o.textAlign,textBaseline:_=o.textBaseline}=l;if(!v){const A=b;b=(i=mu.baselineMapAlign[_])!==null&&i!==void 0?i:"left",_=(r=mu.alignMapBaseline[A])!==null&&r!==void 0?r:"top"}if(s=0,!this.shouldUpdateShape()&&this.cache){this.cache.verticalList.forEach((R=>{const L=R.reduce(((B,P)=>B+P.width),0);s=Th(L,s)}));const A=Sv(b,s),T=this.cache.verticalList.length*y,M=Bb(_,T,c);return this._AABBBounds.set(M,A,M+T,A+s),g&&this._AABBBounds.expand(p/2),this._AABBBounds}const w=t.map((A=>m4t(A.toString())));w.forEach(((A,T)=>{if(Number.isFinite(h))if(u){const M=u===!0?o.ellipsis:u,R=a.clipTextWithSuffixVertical(A,{fontSize:c,fontWeight:f,fontFamily:d},h,M,!1,m);w[T]=R.verticalList,s=R.width}else{const M=a.clipTextVertical(A,{fontSize:c,fontWeight:f,fontFamily:d},h,!1);w[T]=M.verticalList,s=M.width}else s=0,A.forEach((M=>{const R=M.direction===Tp.HORIZONTAL?c:a.measureTextWidth(M.text,{fontSize:c,fontWeight:f,fontFamily:d});s+=R,M.width=R}))})),this.cache.verticalList=w,this.clearUpdateShapeTag(),this.cache.verticalList.forEach((A=>{const T=A.reduce(((M,R)=>M+R.width),0);s=Th(T,s)}));const C=Sv(b,s),x=this.cache.verticalList.length*y,S=Bb(_,x,c);return this._AABBBounds.set(S,C,S+x,C+s),g&&this._AABBBounds.expand(p/2),this._AABBBounds}getMaxWidth(t){var e,i;const r=this.attribute;return(i=(e=r.maxLineWidth)!==null&&e!==void 0?e:r.maxWidth)!==null&&i!==void 0?i:t.maxWidth}getLineHeight(t,e,i){var r;return(r=L_(t.lineHeight,t.fontSize||e.fontSize))!==null&&r!==void 0?r:(t.fontSize||e.fontSize)+i}needUpdateTags(t,e=l$){return super.needUpdateTags(t,e)}needUpdateTag(t,e=l$){return super.needUpdateTag(t,e)}_interpolate(t,e,i,r,o){t==="text"&&(o.text=r)}clone(){return new mu(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return mu.NOWORK_ANIMATE_ATTR}getBaselineMapAlign(){return mu.baselineMapAlign}getAlignMapBaseline(){return mu.alignMapBaseline}};tn.NOWORK_ANIMATE_ATTR=Object.assign({ellipsis:1,wordBreak:1,direction:1,textAlign:1,textBaseline:1,fontFamily:1,fontWeight:1},Ka),tn.baselineMapAlign={top:"left",bottom:"right",middle:"center"},tn.alignMapBaseline={left:"top",right:"bottom",center:"middle"};function kb(n){return new tn(n)}const R1=["heightLimit","lineClamp"];class A3 extends tn{constructor(t){super(Object.assign(Object.assign({},t),{wrap:!0}))}_isValid(){const{text:t}=this.attribute;return $e(t)?!t.every((e=>e==null||e==="")):t!=null&&t!==""}updateMultilineAABBBounds(t){var e,i,r,o,a;const s=this.getGraphicTheme(),{fontFamily:l=s.fontFamily,textAlign:h=s.textAlign,textBaseline:u=s.textBaseline,fontSize:d=s.fontSize,ellipsis:c=s.ellipsis,maxLineWidth:f,stroke:g=s.stroke,lineWidth:p=s.lineWidth,wordBreak:v=s.wordBreak,fontWeight:m=s.fontWeight,ignoreBuf:y=s.ignoreBuf,heightLimit:b=0,suffixPosition:_=s.suffixPosition,lineClamp:w}=this.attribute,C=(e=L_(this.attribute.lineHeight,this.attribute.fontSize||s.fontSize))!==null&&e!==void 0?e:this.attribute.fontSize||s.fontSize,x=y?0:2;if(!this.shouldUpdateShape()&&(!((i=this.cache)===null||i===void 0)&&i.layoutData)){const k=this.cache.layoutData.bbox;return this._AABBBounds.set(k.xOffset,k.yOffset,k.xOffset+k.width,k.yOffset+k.height),g&&this._AABBBounds.expand(p/2),this._AABBBounds}const S=St.graphicUtil.getTextMeasureInstance(this.textMeasureId||((r=this.stage)===null||r===void 0?void 0:r.textMeasureId)),A=new WI(l,{fontSize:d,fontWeight:m,fontFamily:l},S),T=t.map((k=>k.toString())),M=[],R=[0,0];let L=1/0;if(b>0&&(L=Math.max(Math.floor(b/C),1)),w&&(L=Math.min(L,w)),typeof f=="number"&&f!==1/0){if(f>0)for(let E=0;E<T.length;E++){const D=T[E];let I=!0;if(E===L-1){const H=A.textMeasure.clipTextWithSuffix(D,A.textOptions,f,c,!1,_);M.push({str:H.str,width:H.width,ascent:0,descent:0,keepCenterInLine:!1});break}const O=A.textMeasure.clipText(D,A.textOptions,f,v==="break-word");if(D!==""&&O.str===""){if(c){const H=A.textMeasure.clipTextWithSuffix(D,A.textOptions,f,c,!1,_);O.str=(o=H.str)!==null&&o!==void 0?o:"",O.width=(a=H.width)!==null&&a!==void 0?a:0}else O.str="",O.width=0;I=!1}if(M.push({str:O.str,width:O.width,ascent:0,descent:0,keepCenterInLine:!1}),O.str.length!==D.length){if(I){const H=D.substring(O.str.length);T.splice(E+1,0,H)}}}let k=0;M.forEach((E=>{k=Math.max(k,E.width)})),R[0]=k}else{let k,E,D=0;for(let I=0,O=T.length;I<O;I++){if(I===L-1){const H=A.textMeasure.clipTextWithSuffix(T[I],A.textOptions,f,c,!1,_);M.push({str:H.str,width:H.width,ascent:0,descent:0,keepCenterInLine:!1}),D=Math.max(D,H.width);break}E=T[I],k=A.textMeasure.measureTextWidth(E,A.textOptions,v==="break-word"),D=Math.max(D,k),M.push({str:E,width:k,ascent:0,descent:0,keepCenterInLine:!1})}R[0]=D}R[1]=M.length*(C+x);const B={xOffset:0,yOffset:0,width:R[0],height:R[1]};A.LayoutBBox(B,h,u);const P=A.layoutWithBBox(B,M,h,u,C);return this.cache.layoutData=P,this.clearUpdateShapeTag(),this._AABBBounds.set(B.xOffset,B.yOffset,B.xOffset+B.width,B.yOffset+B.height),g&&this._AABBBounds.expand(p/2),this._AABBBounds}needUpdateTags(t){for(let e=0;e<R1.length;e++){const i=R1[e];if(t.indexOf(i)!==-1)return!0}return super.needUpdateTags(t)}needUpdateTag(t){for(let e=0;e<R1.length;e++)if(t===R1[e])return!0;return super.needUpdateTag(t)}getNoWorkAnimateAttr(){return A3.NOWORK_ANIMATE_ATTR}}function J4t(n){return new A3(n)}const Q4t=(n,t,e)=>{const{outerBorder:i,shadowBlur:r=t.shadowBlur,strokeBoundsBuffer:o=t.strokeBoundsBuffer}=n;if(i){const a=t.outerBorder,{distance:s=a.distance,lineWidth:l=a.lineWidth}=i;SS(e,s+(r+l)/2,!0,o)}return e},h$=["symbolType","size",...ta];let Rat=class VI extends Pn{constructor(t={symbolType:"circle"}){super(t),this.type="symbol",this.numberType=KM}getParsedPath(){return this.shouldUpdateShape()&&(this._parsedPath=this.doUpdateParsedPath(),this.clearUpdateShapeTag()),this._parsedPath}getParsedPath2D(t=0,e=0,i=1){let r=null;try{r=new Path2D}catch{return null}const o=this.getParsedPath();if(!o)return null;o.draw(r,i,t,e)}isValid(){return super.isValid()&&this._isValid()}_isValid(){const{size:t}=this.attribute;return $e(t)?t.length===2&&t.every(this._validNumber):this._validNumber(t)}doUpdateParsedPath(){const{symbolType:t="circle"}=this.attribute;return super.parsePath(t)}getGraphicTheme(){return he(this).symbol}updateAABBBounds(t,e,i,r){this.updatePathProxyAABBBounds(i)||(r?this.updateSymbolAABBBoundsImprecise(t,e,i):this.updateSymbolAABBBoundsAccurate(t,e,i));const{tb1:o,tb2:a}=St.graphicService.updateTempAABBBounds(i);Q4t(t,e,o),i.union(o),o.setValue(a.x1,a.y1,a.x2,a.y2),this.widthWithoutTransform=i.x2-i.x1,this.heightWithoutTransform=i.y2-i.y1,this.x1WithoutTransform=i.x1,this.y1WithoutTransform=i.y1;const{lineJoin:s=e.lineJoin}=t;return St.graphicService.transformAABBBounds(t,i,e,s==="miter",this),i}updateSymbolAABBBoundsImprecise(t,e,i){const{size:r=e.size}=t;if($e(r))i.set(-r[0]/2,-r[1]/2,r[0]/2,r[1]/2);else{const o=r/2;i.set(-o,-o,o,o)}return i}updateSymbolAABBBoundsAccurate(t,e,i){const{size:r=e.size}=t;return this.getParsedPath().bounds(r,i),i}needUpdateTags(t){return super.needUpdateTags(t,h$)}needUpdateTag(t){return super.needUpdateTag(t,h$)}toCustomPath(){const t=this.getParsedPath(),e=this.attribute.size,i=$e(e)?e:[e,e];return t.path?new An().fromCustomPath2D(t.path,0,0,i[0],i[1]):new An().fromString(t.pathStr,0,0,i[0],i[1])}clone(){return new VI(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return VI.NOWORK_ANIMATE_ATTR}};Rat.NOWORK_ANIMATE_ATTR=Object.assign({symbolType:1},Ka);function Av(n){return new Rat(n)}const u$=["segments","points","curveType","curveTension",...ta];let O_=class GI extends Pn{constructor(t={}){super(t),this.type="line",this.numberType=E_}isValid(){return super.isValid()&&this._isValid()}_isValid(){if(this.pathProxy)return!0;const{points:t,segments:e}=this.attribute;return e?e.length!==0:!!t&&!(t.length<=1)}_interpolate(t,e,i,r,o){t==="points"&&(o.points=VM(i,r,e))}getGraphicTheme(){return he(this).line}updateAABBBounds(t,e,i){this.updatePathProxyAABBBounds(i)||(t.segments?this.updateLineAABBBoundsBySegments(t,e,i):this.updateLineAABBBoundsByPoints(t,e,i)),St.graphicService.updateTempAABBBounds(i),this.widthWithoutTransform=i.x2-i.x1,this.heightWithoutTransform=i.y2-i.y1;const{lineJoin:r=e.lineJoin}=t;return St.graphicService.transformAABBBounds(t,i,e,r==="miter",this),i}updateLineAABBBoundsByPoints(t,e,i,r){const{points:o=e.points,connectedType:a}=t,s=i;return o.forEach((l=>{l.defined===!1&&a!=="connect"||s.add(l.x,l.y)})),s}updateLineAABBBoundsBySegments(t,e,i,r){const{segments:o=e.segments,connectedType:a}=t,s=i;return o.forEach((l=>{l.points.forEach((h=>{h.defined===!1&&a!=="connect"||s.add(h.x,h.y)}))})),s}needUpdateTags(t){return super.needUpdateTags(t,u$)}needUpdateTag(t){return super.needUpdateTag(t,u$)}toCustomPath(){let t=super.toCustomPath();if(t)return t;const e=this.attribute;t=new An;const i=e.segments,r=o=>{if(o&&o.length){let a=!0;o.forEach((s=>{s.defined!==!1&&(a?t.moveTo(s.x,s.y):t.lineTo(s.x,s.y),a=!1)}))}};return i&&i.length?i.forEach((o=>{r(o.points)})):e.points&&r(e.points),t}clone(){return new GI(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return GI.NOWORK_ANIMATE_ATTR}};O_.NOWORK_ANIMATE_ATTR=Object.assign({segments:1,curveType:1},Ka);function Wi(n){return new O_(n)}const tVt=n=>{if(!n)return{x:0,y:0,width:0,height:0};let t=Ti(n.width)?n.x1-n.x:n.width,e=Ti(n.height)?n.y1-n.y:n.height,i=0,r=0;return t<0?(i=t,t=-t):Number.isNaN(t)&&(t=0),e<0?(r=e,e=-e):Number.isNaN(e)&&(e=0),{x:i,y:r,width:t,height:e}},d$=["width","x1","y1","height","cornerRadius",...ta];let og=class $I extends Pn{constructor(t){super(t),this.type="rect",this.numberType=m3}isValid(){return super.isValid()&&this._isValid()}_isValid(){return!0}getGraphicTheme(){return he(this).rect}updateAABBBounds(t,e,i){if(!this.updatePathProxyAABBBounds(i)){let{width:a,height:s}=t;const{x1:l,y1:h,x:u,y:d}=t;a=a??l-u,s=s??h-d,(isFinite(a)||isFinite(s)||isFinite(u)||isFinite(d))&&i.set(0,0,a||0,s||0)}const{tb1:r,tb2:o}=St.graphicService.updateTempAABBBounds(i);return I_(t,e,r),i.union(r),r.setValue(o.x1,o.y1,o.x2,o.y2),this.widthWithoutTransform=i.x2-i.x1,this.heightWithoutTransform=i.y2-i.y1,St.graphicService.transformAABBBounds(t,i,e,!1,this),i}needUpdateTags(t){return super.needUpdateTags(t,d$)}needUpdateTag(t){return super.needUpdateTag(t,d$)}toCustomPath(){let t=super.toCustomPath();if(t)return t;const e=this.attribute,{x:i,y:r,width:o,height:a}=tVt(e);return t=new An,t.moveTo(i,r),t.rect(i,r,o,a),t}clone(){return new $I(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return $I.NOWORK_ANIMATE_ATTR}};og.NOWORK_ANIMATE_ATTR=Ka;function ei(n){return new og(n)}class eVt{constructor(t,e,i,r,o,a,s,l,h,u,d,c,f,g){this.left=t,this.top=e,this.width=i,this.height=r,this.actualHeight=0,this.bottom=e+r,this.right=t+i,this.ellipsis=o,this.wordBreak=a,this.verticalDirection=s,this.lines=[],this.globalAlign=l,this.globalBaseline=h,this.layoutDirection=u,this.directionKey=c3[this.layoutDirection],this.isWidthMax=d,this.isHeightMax=c,this.singleLine=f,g?(g.clear(),this.icons=g):this.icons=new Map}draw(t,e){const{width:i,height:r}=this.getActualSize(),o=this.isWidthMax?Math.min(this.width,i):this.width||i||0;let a=this.isHeightMax?Math.min(this.height,r):this.height||r||0;a=Math.min(a,r);let s=0;switch(this.globalBaseline){case"top":s=0;break;case"middle":s=-a/2;break;case"bottom":s=-a}let l=0;this.globalAlign==="right"||this.globalAlign==="end"?l=-o:this.globalAlign==="center"&&(l=-o/2);let h=this[this.directionKey.height];this.singleLine&&(h=this.lines[0].height+1);let u=!1;if(this.verticalDirection==="middle")if(this.actualHeight>=h&&h!==0)for(let d=0;d<this.lines.length;d++){const{top:c,height:f}=this.lines[d];if(c+f<this[this.directionKey.top]||c+f>this[this.directionKey.top]+h)return u;let g=!1;this.ellipsis&&this.lines[d+1]&&this.lines[d+1].top+this.lines[d+1].height>this[this.directionKey.top]+h&&(g=!0,u=!0),this.lines[d].draw(t,g,this.lines[d][this.directionKey.left]+l,this.lines[d][this.directionKey.top]+s,this.ellipsis,e)}else{const d=Math.floor((h-this.actualHeight)/2);this.layoutDirection==="vertical"?l+=d:s+=d;for(let c=0;c<this.lines.length;c++)this.lines[c].draw(t,!1,this.lines[c][this.directionKey.left]+l,this.lines[c][this.directionKey.top]+s,this.ellipsis,e)}else if(this.verticalDirection==="bottom"&&this.layoutDirection!=="vertical")for(let d=0;d<this.lines.length;d++){const{top:c,height:f}=this.lines[d],g=h-this.lines[d].top-this.lines[d].height;if(h===0)this.lines[d].draw(t,!1,l,g+s,this.ellipsis,e);else{if(g+f>this[this.directionKey.top]+h||g<this[this.directionKey.top])return u;{let p=!1;this.ellipsis&&this.lines[d+1]&&g-this.lines[d+1].height<this[this.directionKey.top]&&(p=!0,u=!0),this.lines[d].draw(t,p,l,g+s,this.ellipsis,e)}}}else{this.verticalDirection==="bottom"&&this.layoutDirection==="vertical"&&this.singleLine&&this.isWidthMax&&(l+=this.lines[0].height+1);for(let d=0;d<this.lines.length;d++){this.verticalDirection==="bottom"&&this.layoutDirection==="vertical"&&(l-=this.lines[d].height+this.lines[d].top);const{top:c,height:f}=this.lines[d];if(h===0)this.lines[d].draw(t,!1,this.lines[d][this.directionKey.left]+l,this.lines[d][this.directionKey.top]+s,this.ellipsis,e);else{if(c+f<this[this.directionKey.top]||c+f>this[this.directionKey.top]+h)return u;{let g=!1;this.ellipsis&&this.lines[d+1]&&this.lines[d+1].top+this.lines[d+1].height>this[this.directionKey.top]+h&&(g=!0,u=!0),this.lines[d].draw(t,g,this.lines[d][this.directionKey.left]+l,this.lines[d][this.directionKey.top]+s,this.ellipsis,e)}}}}return u}getActualSize(){return this.ellipsis?this.getActualSizeWidthEllipsis():this.getRawActualSize()}getRawActualSize(){let t=0,e=0;for(let i=0;i<this.lines.length;i++){const r=this.lines[i];r.actualWidth>t&&(t=r.actualWidth),e+=r.height}return{width:this.layoutDirection==="vertical"?e:t,height:this.layoutDirection==="vertical"?t:e}}getActualSizeWidthEllipsis(){let t=0,e=0;const{width:i,height:r}=this.getRawActualSize();this.width,this.height;let o=this[this.directionKey.height];if(this.singleLine&&(o=this.lines[0].height+1),this.verticalDirection==="middle")if(this.actualHeight>=o&&o!==0)for(let a=0;a<this.lines.length;a++){const{top:s,height:l}=this.lines[a];if(!(s+l<this[this.directionKey.top]||s+l>this[this.directionKey.top]+o))if(this.ellipsis&&this.lines[a+1]&&this.lines[a+1].top+this.lines[a+1].height>this[this.directionKey.top]+o){const h=this.ellipsis===!0?"...":this.ellipsis||"",u=this.lines[a].getWidthWithEllips(h);u>t&&(t=u),e+=this.lines[a].height}else this.lines[a].actualWidth>t&&(t=this.lines[a].actualWidth),e+=this.lines[a].height}else{Math.floor((o-this.actualHeight)/2);for(let a=0;a<this.lines.length;a++)this.lines[a].actualWidth>t&&(t=this.lines[a].actualWidth),e+=this.lines[a].height}else if(this.verticalDirection==="bottom")for(let a=0;a<this.lines.length;a++){const{top:s,height:l}=this.lines[a],h=o-this.lines[a].top-this.lines[a].height;if(o===0)this.lines[a].actualWidth>t&&(t=this.lines[a].actualWidth),e+=this.lines[a].height;else if(!(h+l>this[this.directionKey.top]+o||h<this[this.directionKey.top]))if(this.ellipsis&&this.lines[a+1]&&h-this.lines[a+1].height<this[this.directionKey.top]){const u=this.ellipsis===!0?"...":this.ellipsis||"",d=this.lines[a].getWidthWithEllips(u);d>t&&(t=d),e+=this.lines[a].height}else this.lines[a].actualWidth>t&&(t=this.lines[a].actualWidth),e+=this.lines[a].height}else for(let a=0;a<this.lines.length;a++){const{top:s,height:l}=this.lines[a];if(o===0)this.lines[a].actualWidth>t&&(t=this.lines[a].actualWidth),e+=this.lines[a].height;else if(!(s+l<this[this.directionKey.top]||s+l>this[this.directionKey.top]+o))if(this.ellipsis&&this.lines[a+1]&&this.lines[a+1].top+this.lines[a+1].height>this[this.directionKey.top]+o){const h=this.ellipsis===!0?"...":this.ellipsis||"",u=this.lines[a].getWidthWithEllips(h);u>t&&(t=u),e+=this.lines[a].height}else this.lines[a].actualWidth>t&&(t=this.lines[a].actualWidth),e+=this.lines[a].height}return{width:this.layoutDirection==="vertical"?e:t,height:this.layoutDirection==="vertical"?t:e}}}function Qm(n,t,e,i){const r=Math.round(n),o=Math.round(e),a=Math.round(t),s=Math.round(i);return{left:n>r?r:r-.5,top:e>o?o:o-.5,right:a>t?a:a+.5,bottom:s>i?s:s+.5}}class qc{constructor(t,e,i,r){var o,a;this.fontSize=i.fontSize||16,this.textBaseline=i.textBaseline||"alphabetic",this.ascentDescentMode=r;const s=L_(i.lineHeight,this.fontSize);this.lineHeight=typeof s=="number"?s>this.fontSize?s:this.fontSize:Math.floor(1.2*this.fontSize),this.height=this.lineHeight;const{ascent:l,height:h,descent:u,width:d}=Pc(t,i,this.ascentDescentMode);let c=0,f=0,g=0;this.height>h&&(c=(this.height-h)/2,f=Math.ceil(c),g=Math.floor(c)),this.textBaseline==="top"?(this.ascent=c,this.descent=h-c):this.textBaseline==="bottom"?(this.ascent=h-c,this.descent=c):this.textBaseline==="middle"?(this.ascent=this.height/2,this.descent=this.height/2):(this.ascent=l+f,this.descent=u+g),this.length=t.length,this.width=d||0,this.text=t||"",this.newLine=e||!1,this.character=i,this.left=0,this.top=0,this.ellipsis="normal",this.ellipsisWidth=0,this.ellipsisOtherParagraphWidth=0,this.space=i.space,this.dx=(o=i.dx)!==null&&o!==void 0?o:0,this.dy=(a=i.dy)!==null&&a!==void 0?a:0,i.direction==="vertical"&&(this.direction=i.direction,this.widthOrigin=this.width,this.heightOrigin=this.height,this.width=this.heightOrigin,this.height=this.widthOrigin,this.lineHeight=this.height),this.ellipsisStr="..."}updateWidth(){const{width:t}=Pc(this.text,this.character,this.ascentDescentMode);this.width=t,this.direction==="vertical"&&(this.widthOrigin=this.width,this.width=this.heightOrigin,this.height=this.widthOrigin)}drawBackground(t,e,i,r,o,a,s){if(this.text===""||this.text===`
`||!this.character.background||this.character.backgroundOpacity&&!(this.character.backgroundOpacity>0))return;let l=e+i,h=this.text,u=this.left+r;l+=this.top;let d=this.direction;if(this.verticalEllipsis)h=this.ellipsisStr,d="vertical",l-=this.ellipsisWidth/2;else{if(this.ellipsis==="hide")return;if(this.ellipsis==="add")h+=this.ellipsisStr,a!=="right"&&a!=="end"||(u-=this.ellipsisWidth);else if(this.ellipsis==="replace"){const f=Dw(h,(d==="vertical"?this.height:this.width)-this.ellipsisWidth+this.ellipsisOtherParagraphWidth,this.character,h.length-1);if(h=h.slice(0,f),h+=this.ellipsisStr,(a==="right"||a==="end")&&d!=="vertical"){const{width:g}=Pc(this.text.slice(f),this.character,this.ascentDescentMode);u-=this.ellipsisWidth-g}}}const c=Qm(u,u+(this.widthOrigin||this.width),e,e+s);return Object.assign(Object.assign({},c),{fillStyle:this.character.background,globalAlpha:this.character.backgroundOpacity})}draw(t,e,i,r,o,a,s){var l;let h=e+i,u=this.text,d=this.left+r+((l=this.space)!==null&&l!==void 0?l:0)/2;h+=this.top;let c=this.direction;if(this.verticalEllipsis)u=this.ellipsisStr,c="vertical",h-=this.ellipsisWidth/2;else{if(this.ellipsis==="hide")return;if(this.ellipsis==="add")u+=this.ellipsisStr,a!=="right"&&a!=="end"||(d-=this.ellipsisWidth);else if(this.ellipsis==="replace"){const g=Dw(u,(c==="vertical"?this.height:this.width)-this.ellipsisWidth+this.ellipsisOtherParagraphWidth,this.character,u.length-1);if(u=u.slice(0,g),u+=this.ellipsisStr,(a==="right"||a==="end")&&c!=="vertical"){const{width:p}=Pc(this.text.slice(g),this.character,this.ascentDescentMode);d-=this.ellipsisWidth-p}}}switch(this.character.script){case"super":h-=this.ascent*(1/3);break;case"sub":h+=this.descent/2}c==="vertical"&&(t.save(),t.rotateAbout(Math.PI/2,d,h),t.translate(-this.heightOrigin||-this.lineHeight/2,-this.descent/2),t.translate(d,h),d=0,h=0);const{lineWidth:f=1}=this.character;if(this.character.stroke&&f&&t.strokeText(u,d+this.dx,h+this.dy),this.character.fill&&t.fillText(u,d+this.dx,h+this.dy),this.character.fill){if(this.character.lineThrough||this.character.underline){if(this.character.underline){const g=1+h,p=Qm(d,d+(this.widthOrigin||this.width),g,g+(this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1));t.fillRect(p.left,1+h,p.right-p.left,this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1)}if(this.character.lineThrough){const g=1+h-this.ascent/2,p=Qm(d,d+(this.widthOrigin||this.width),g,g+(this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1));t.fillRect(p.left,1+h-this.ascent/2,p.right-p.left,this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1)}}else if(this.character.textDecoration==="underline"){const g=1+h,p=Qm(d,d+(this.widthOrigin||this.width),g,g+(this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1));t.fillRect(p.left,1+h,p.right-p.left,this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1)}else if(this.character.textDecoration==="line-through"){const g=1+h-this.ascent/2,p=Qm(d,d+(this.widthOrigin||this.width),g,g+(this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1));t.fillRect(p.left,1+h-this.ascent/2,p.right-p.left,this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1)}}c==="vertical"&&t.restore()}getWidthWithEllips(t){let e=this.text;const i=t==="vertical"?this.height:this.width;if(this.ellipsis==="hide")return i;if(this.ellipsis==="add")return i+this.ellipsisWidth;if(this.ellipsis==="replace"){const r=Dw(e,i-this.ellipsisWidth+this.ellipsisOtherParagraphWidth,this.character,e.length-1);e=e.slice(0,r),e+=this.ellipsisStr;const{width:o}=Pc(this.text.slice(r),this.character,this.ascentDescentMode);return i+this.ellipsisWidth-o}return i}}function iVt(n,t){const e=n.text.slice(0,t),i=n.text.slice(t);return[new qc(e,n.newLine,n.character,n.ascentDescentMode),new qc(i,!0,n.character,n.ascentDescentMode)]}const c$=["width","height","image",...ta];let ea=class jI extends Pn{constructor(t){super(t),this.type="image",this.numberType=YM,this.loadImage(this.attribute.image)}getImageElement(){const{image:t}=this.attribute;if(!t||!this.resources)return null;const e=this.resources.get(t);return e.state!=="success"?null:e.data}get width(){return this.tryUpdateAABBBounds(),this._actualWidth}get height(){return this.tryUpdateAABBBounds(),this._actualHeight}get repeatX(){var t;return(t=this.attribute.repeatX)!==null&&t!==void 0?t:"no-repeat"}set repeatX(t){this.attribute.repeatX===t&&(this.attribute.repeatX=t)}get repeatY(){var t;return(t=this.attribute.repeatY)!==null&&t!==void 0?t:"no-repeat"}set repeatY(t){this.attribute.repeatY===t&&(this.attribute.repeatY=t)}get image(){return this.attribute.image}set image(t){t!==this.attribute.image&&(this.attribute.image=t,this.loadImage(this.attribute.image))}imageLoadSuccess(t,e,i){super.imageLoadSuccess(t,e,(()=>{this.successCallback&&this.successCallback()})),this.addUpdateBoundTag()}imageLoadFail(t,e){super.imageLoadFail(t,(()=>{this.failCallback&&this.failCallback()}))}setAttributes(t,e,i){return t.image&&this.loadImage(t.image),super.setAttributes(t,e,i)}setAttribute(t,e,i,r){return t==="image"&&this.loadImage(e),super.setAttribute(t,e,i,r)}getGraphicTheme(){return he(this).image}updateAABBBounds(t,e,i){if(!this.updatePathProxyAABBBounds(i)){const{maxWidth:a=e.maxWidth,maxHeight:s=e.maxHeight}=t;let{width:l,height:h}=t;if(l==null||h==null){const u=this.getImageElement();if(u){const d=u.width,c=u.height;if(l!=null)h=l*(c/d);else if(h!=null)l=h*(d/c);else{const f=d/c;f>a/s?(l=a,h=a/f):(h=s,l=s*f)}}else l=a,h=s}this._actualWidth=l,this._actualHeight=h,i.set(0,0,l,h)}const{tb1:r,tb2:o}=St.graphicService.updateTempAABBBounds(i);return I_(t,e,r),i.union(r),r.setValue(o.x1,o.y1,o.x2,o.y2),this.widthWithoutTransform=i.x2-i.x1,this.heightWithoutTransform=i.y2-i.y1,St.graphicService.transformAABBBounds(t,i,e,!1,this),i}getDefaultAttribute(t){return Ab[t]}needUpdateTags(t){return super.needUpdateTags(t,c$)}needUpdateTag(t){return super.needUpdateTag(t,c$)}clone(){return new jI(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return jI.NOWORK_ANIMATE_ATTR}};ea.NOWORK_ANIMATE_ATTR=Object.assign({image:1,repeatX:1,repeatY:1},Ka);function JM(n){return new ea(n)}class tl extends ea{constructor(t){if(super(t),this._x=0,this._y=0,this._hovered=!1,this._marginArray=[0,0,0,0],t.backgroundShowMode==="always"&&(this._hovered=!0),t.margin){const e=xS(t.margin);this._marginArray=typeof e=="number"?[e,e,e,e]:e}this.onBeforeAttributeUpdate=(e,i,r)=>{if($e(r)&&r.indexOf("margin")!==-1||r==="margin")if(i.margin){const o=xS(i.margin);this._marginArray=typeof o=="number"?[o,o,o,o]:o}else this._marginArray=[0,0,0,0]}}get width(){var t;return((t=this.attribute.width)!==null&&t!==void 0?t:0)+this._marginArray[1]+this._marginArray[3]}get height(){var t;return((t=this.attribute.height)!==null&&t!==void 0?t:0)+this._marginArray[0]+this._marginArray[2]}tryUpdateAABBBounds(){if(!this.shouldUpdateAABBBounds())return this._AABBBounds;this.doUpdateAABBBounds();const{width:t=Ab.width,height:e=Ab.height}=this.attribute,{backgroundWidth:i=t,backgroundHeight:r=e}=this.attribute,o=(i-t)/2,a=(r-e)/2;return this._AABBBounds.expand([0,2*o,2*a,0]),this._AABBBounds}setHoverState(t){this.attribute.backgroundShowMode==="hover"&&this._hovered!==t&&(this._hovered=t)}}class nVt{constructor(t,e,i,r,o,a,s,l){this.left=t,this.width=e,this.baseline=i,this.ascent=r,this.descent=o,this.top=i-r,this.paragraphs=a.map((u=>u)),this.textAlign=(this.paragraphs[0]instanceof tl?this.paragraphs[0].attribute.textAlign:this.paragraphs[0].character.textAlign)||"left",this.direction=s,this.directionKey=c3[this.direction],this.actualWidth=0;let h=0;this.paragraphs.forEach(((u,d)=>{if(d===0&&u instanceof qc){const c=A5t.exec(u.text);c?.index!==0&&(u.text=u.text.slice(c?.index),u.updateWidth())}this.actualWidth+=u[this.directionKey.width],h=Math.max(u[this.directionKey.height],h)})),this.height=h,this.blankWidth=l?0:this.width-this.actualWidth,this.calcOffset(e,l)}calcOffset(t,e){const i=this.directionKey,r=this.height;let o=this.left,a=0;this.actualWidth<t&&!e&&(this.textAlign==="right"||this.textAlign==="end"?o=t-this.actualWidth:this.textAlign==="center"?o=(t-this.actualWidth)/2:this.textAlign==="justify"&&(this.paragraphs.length<2?o=(t-this.actualWidth)/2:a=(t-this.actualWidth)/(this.paragraphs.length-1))),this.paragraphs.map((function(s){s instanceof tl?(s["_"+i.x]=o,o+=s[i.width]+a,s["_"+i.y]=s.attribute.textBaseline==="top"?0:s.attribute.textBaseline==="bottom"?r-s.height:(r-s.height)/2):(s[i.left]=o,o+=s[i.width]+a)}))}draw(t,e,i,r,o,a){if(o&&(e||this.paragraphs.some((d=>d.overflow)))){let d=!0,c=!1;for(let g=this.paragraphs.length-1;g>=0;g--){const p=this.paragraphs[g];if(p.overflow)d=d&&p.text==="";else if(d){c=!0;break}}let f=0;if(!c)for(let g=this.paragraphs.length-1;g>=0;g--){const p=this.paragraphs[g];if(p.overflow){if(p.text==="")break;continue}if(p instanceof tl)break;if(this.direction==="vertical"&&p.direction!=="vertical"){p.verticalEllipsis=!0;break}const v=o===!0?"...":o||"";p.ellipsisStr=v;const{width:m}=Pc(v,p.character,p.ascentDescentMode),y=m||0;if(y<=this.blankWidth+f){e&&(p.ellipsis="add");break}if(y<=this.blankWidth+f+p.width){p.ellipsis="replace",p.ellipsisWidth=y,p.ellipsisOtherParagraphWidth=this.blankWidth+f;break}p.ellipsis="hide",f+=p.width}}let s="",l=-1,h=[];const u=[h];this.paragraphs.forEach(((d,c)=>{if(d instanceof tl)return;const f=d.drawBackground(t,r,this.ascent,i,c===0,this.textAlign,this.height);f&&(s===f.fillStyle&&l===f.globalAlpha||(h=[],u.push(h),s=f.fillStyle,l=f.globalAlpha),h.push(f))})),u.forEach((d=>{if(d.length===0)return;const c=d[0],f=d[d.length-1];t.fillStyle=c.fillStyle,t.globalAlpha=c.globalAlpha,t.fillRect(c.left,c.top,f.right-c.left,f.bottom-c.top)})),this.paragraphs.forEach(((d,c)=>{if(d instanceof tl)return d.setAttributes({x:i+d._x,y:r+d._y}),void a(d,t,i+d._x,r+d._y,this.ascent);const f={x1:this.left,y1:this.top,x2:this.left+this.actualWidth,y2:this.top+this.height};M5t(t,d.character),T5t(t,d.character,f),d.draw(t,r,this.ascent,i,c===0,this.textAlign,this.height)}))}getWidthWithEllips(t){let e=0;for(let r=this.paragraphs.length-1;r>=0;r--){const o=this.paragraphs[r];if(o instanceof tl)break;const{width:a}=Pc(t,o.character,o.ascentDescentMode),s=a||0;if(s<=this.blankWidth+e){o.ellipsis="add",o.ellipsisWidth=s;break}if(s<=this.blankWidth+e+o.width){o.ellipsis="replace",o.ellipsisWidth=s,o.ellipsisOtherParagraphWidth=this.blankWidth+e;break}o.ellipsis="hide",e+=o.width}let i=0;return this.paragraphs.forEach(((r,o)=>{i+=r instanceof tl?r.width:r.getWidthWithEllips(this.direction)})),i}}class rVt{constructor(t){this.frame=t,this.width=this.frame.width,this.height=this.frame.height,this.lineWidth=0,this.y=this.frame.top,this.maxAscent=0,this.maxDescent=0,this.maxAscentForBlank=0,this.maxDescentForBlank=0,this.lineBuffer=[],this.direction=t.layoutDirection,this.directionKey=c3[this.direction]}store(t){if(t instanceof tl){this.frame.icons.set(t.richtextId,t),this.lineBuffer.push(t),this.lineWidth+=t[this.directionKey.width];let e=0,i=0;t.attribute.textBaseline==="top"?(e=0,i=t.height):t.attribute.textBaseline==="bottom"?(e=t.height,i=0):(e=t.height/2,i=t.height/2),this.maxAscent=Math.max(this.maxAscent,e),this.maxDescent=Math.max(this.maxDescent,i)}else this.lineBuffer.push(t),t.text.length!==0?(this.lineWidth+=t[this.directionKey.width],this.maxAscent=Math.max(this.maxAscent,t.ascent),this.maxDescent=Math.max(this.maxDescent,t.descent)):(this.maxAscentForBlank=Math.max(this.maxAscentForBlank,t.ascent),this.maxDescentForBlank=Math.max(this.maxDescentForBlank,t.descent))}send(){if(this.lineBuffer.length===0)return;const t=this.maxAscent===0?this.maxAscentForBlank:this.maxAscent,e=this.maxDescent===0?this.maxDescentForBlank:this.maxDescent,i=new nVt(this.frame.left,this[this.directionKey.width],this.y+t,t,e,this.lineBuffer,this.direction,this.direction==="horizontal"?this.frame.isWidthMax:this.frame.isHeightMax);this.frame.lines.push(i),this.frame.actualHeight+=i.height,this.y+=i.height,this.lineBuffer.length=0,this.lineWidth=this.maxAscent=this.maxDescent=this.maxAscentForBlank=this.maxDescentForBlank=0}deal(t,e=!1){t instanceof tl?this.direction==="horizontal"&&this.width===0||this.direction==="vertical"&&this.height===0||this.lineWidth+t[this.directionKey.width]<=this[this.directionKey.width]?this.store(t):this.lineBuffer.length===0?(this.store(t),this.send()):(this.send(),this.deal(t)):typeof this.width!="number"||this.width<0||(t.newLine&&this.send(),(t.text.length!==0||this.newLine)&&(this.direction==="horizontal"&&this.width===0||this.direction==="vertical"&&this.height===0||this.lineWidth+t[this.directionKey.width]<=this[this.directionKey.width]?this.store(t):this.lineWidth===this[this.directionKey.width]?(this.send(),this.deal(t)):this.cut(t,e)))}cut(t,e){const i=this[this.directionKey.width]-this.lineWidth||0,r=Math.ceil(i/t[this.directionKey.width]*t.length)||0,o=Dw(t.text,i,t.character,r,this.frame.wordBreak==="break-word");if(o!==0){const[a,s]=iVt(t,o);this.store(a),e?this.send():this.deal(s)}else this.lineBuffer.length!==0&&(this.send(),this.deal(t))}}let UI=!1;try{UI=Intl&&typeof Intl.Segmenter=="function"}catch{UI=!1}const f$=["width","height","ellipsis","wordBreak","verticalDirection","maxHeight","maxWidth","textAlign","textBaseline","textConfig","layoutDirection","fill","stroke","fontSize","fontFamily","fontStyle","fontWeight","lineWidth","opacity","fillOpacity","strokeOpacity",...ta];class Fi extends Pn{constructor(t){super(t),this.type="richtext",this._currentHoverIcon=null,this.numberType=y3,this.onBeforeAttributeUpdate=(e,i,r)=>{for(const o in e)if(o==="hoverIconId"){if(e[o]===i[o])continue;const a=this._frameCache.icons.get(e[o]);this.updateHoverIconState(a)}}}get width(){var t;return(t=this.attribute.width)!==null&&t!==void 0?t:nh.width}set width(t){this.attribute.width!==t&&(this.attribute.width=t,this.addUpdateShapeAndBoundsTag())}get height(){var t;return(t=this.attribute.height)!==null&&t!==void 0?t:nh.height}set height(t){this.attribute.height!==t&&(this.attribute.height=t,this.addUpdateShapeAndBoundsTag())}get maxWidth(){return this.attribute.maxWidth}set maxWidth(t){this.attribute.maxWidth!==t&&(this.attribute.maxWidth=t,this.addUpdateShapeAndBoundsTag())}get maxHeight(){return this.attribute.maxHeight}set maxHeight(t){this.attribute.maxHeight!==t&&(this.attribute.maxHeight=t,this.addUpdateShapeAndBoundsTag())}get ellipsis(){var t;return(t=this.attribute.ellipsis)!==null&&t!==void 0?t:nh.ellipsis}set ellipsis(t){this.attribute.ellipsis!==t&&(this.attribute.ellipsis=t,this.addUpdateShapeAndBoundsTag())}get wordBreak(){var t;return(t=this.attribute.wordBreak)!==null&&t!==void 0?t:nh.wordBreak}set wordBreak(t){this.attribute.wordBreak!==t&&(this.attribute.wordBreak=t,this.addUpdateShapeAndBoundsTag())}get verticalDirection(){var t;return(t=this.attribute.verticalDirection)!==null&&t!==void 0?t:nh.verticalDirection}set verticalDirection(t){this.attribute.verticalDirection!==t&&(this.attribute.verticalDirection=t,this.addUpdateShapeAndBoundsTag())}get textAlign(){var t;return(t=this.attribute.textAlign)!==null&&t!==void 0?t:nh.textAlign}set textAlign(t){this.attribute.textAlign!==t&&(this.attribute.textAlign=t,this.addUpdateShapeAndBoundsTag())}get textBaseline(){var t;return(t=this.attribute.textBaseline)!==null&&t!==void 0?t:nh.textBaseline}set textBaseline(t){this.attribute.textBaseline!==t&&(this.attribute.textBaseline=t,this.addUpdateShapeAndBoundsTag())}get textConfig(){var t;return(t=this.attribute.textConfig)!==null&&t!==void 0?t:nh.textConfig}set textConfig(t){this.attribute.textConfig=t,this.addUpdateShapeAndBoundsTag()}getGraphicTheme(){return he(this).richtext}static AllSingleCharacter(t){return t.lines?t.lines.every((e=>e.paragraphs.every((i=>!(i.text&&bl(i.text)&&Fi.splitText(i.text).length>1))))):t.every((e=>e.isComposing||!(e.text&&bl(e.text)&&Fi.splitText(e.text).length>1)))}static splitText(t){if(UI){const e=new Intl.Segmenter(void 0,{granularity:"grapheme"}),i=[];for(const{segment:r}of e.segment(t))i.push(r);return i}return Array.from(t)}static TransformTextConfig2SingleCharacter(t){const e=[];return t.forEach((i=>{const r=Fi.splitText(i.text.toString());if(bl(i.text)&&r.length>1)for(let o=0;o<r.length;o++){const a=r[o];e.push(Object.assign(Object.assign({},i),{text:a}))}else e.push(i)})),e}updateAABBBounds(t,e,i){var r,o,a,s;const{width:l=e.width,height:h=e.height,maxWidth:u=e.maxWidth,maxHeight:d=e.maxHeight,textAlign:c=e.textAlign,textBaseline:f=(o=(r=t.textBaseline)!==null&&r!==void 0?r:e.textBaseline)!==null&&o!==void 0?o:"top",editOptions:g}=t;if(l>0&&h>0)i.set(0,0,l,h);else{const m=this.getFrameCache(),{width:y,height:b}=m.getActualSize();let _=l||y||0,w=h||b||0;w=typeof d=="number"&&w>d?d:w||0,_=typeof u=="number"&&_>u?u:_||0,i.set(0,0,_,w)}g&&g.keepHeightWhileEmpty&&!i.height()&&!(!((a=t.textConfig)===null||a===void 0)&&a.length)&&(i.y2=i.y1+((s=t.fontSize)!==null&&s!==void 0?s:12),i.x2=i.x1+2);let p=0;switch(f){case"top":p=0;break;case"middle":p=-i.height()/2;break;case"bottom":p=-i.height()}let v=0;switch(c){case"left":v=0;break;case"center":v=-i.width()/2;break;case"right":v=-i.width()}return h||(this.verticalDirection==="middle"?p-=i.height()/2:this.verticalDirection==="bottom"&&(p-=i.height())),i.translate(v,p),St.graphicService.updateTempAABBBounds(i),t.forceBoundsHeight==null&&t.forceBoundsWidth==null||St.graphicService.updateHTMLTextAABBBounds(t,e,i),this.widthWithoutTransform=i.x2-i.x1,this.heightWithoutTransform=i.y2-i.y1,St.graphicService.transformAABBBounds(t,i,e,!1,this),i.width()===0&&i.height()===0&&i.clear(),i}needUpdateTags(t){return super.needUpdateTags(t,f$)}needUpdateTag(t){return super.needUpdateTag(t,f$)}getFrameCache(){return this.shouldUpdateShape()&&(this.doUpdateFrameCache(),this.clearUpdateShapeTag()),this._frameCache}get cliped(){const t=this.getFrameCache();if(t.actualHeight>t.height)return!0;const{disableAutoWrapLine:e}=this.attribute;if(e)for(let i=0;i<t.lines.length;i++){const r=t.lines[i];for(let o=0;o<r.paragraphs.length;o++){const a=r.paragraphs[o];if(a.overflow&&a.text!=="")return!0}}return!1}combinedStyleToCharacter(t){const{fill:e,stroke:i,fontSize:r,fontFamily:o,fontStyle:a,fontWeight:s,lineWidth:l,opacity:h,fillOpacity:u,lineHeight:d,strokeOpacity:c,upgradeAttrs:f}=this.attribute,g=Object.assign({fill:e,stroke:i,fontSize:r,fontFamily:o,fontStyle:a,fontWeight:s,lineWidth:l,opacity:h,fillOpacity:u,strokeOpacity:c},t);return f?.lineHeight&&(g.lineHeight=d),g}doUpdateFrameCache(t){var e;const{maxWidth:i,maxHeight:r,width:o,height:a,ellipsis:s,wordBreak:l,verticalDirection:h,textAlign:u,textBaseline:d,layoutDirection:c,singleLine:f,disableAutoWrapLine:g,editable:p,ascentDescentMode:v,upgradeAttrs:m}=this.attribute,y=m&&m.multiBreakLine;let{textConfig:b=[]}=this.attribute;p&&b.length>0&&!Fi.AllSingleCharacter(b)&&(b=Fi.TransformTextConfig2SingleCharacter(b),this.attribute.textConfig=b);const _=[],w=t??b;for(let R=0;R<w.length;R++)if("image"in w[R]){const L=this.combinedStyleToCharacter(w[R]);L.lineWidth=void 0;const B=L.id&&this._frameCache&&this._frameCache.icons&&this._frameCache.icons.get(L.id);if(B)_.push(B);else{const P=new tl(L);P.successCallback=()=>{var k;this.addUpdateBoundTag(),(k=this.stage)===null||k===void 0||k.renderNextFrame()},P.richtextId=L.id,_.push(P)}}else{const L=this.combinedStyleToCharacter(w[R]);if(Kn(L.text)&&(L.text=`${L.text}`),L.text&&L.text.includes(`
`)){const B=L.text.split(`
`);for(let P=0;P<B.length;P++)if(P===0)_.push(new qc(B[P],!1,L,v));else if(B[P]||R===w.length-1)_.push(new qc(B[P],!0,L,v));else{const k=this.combinedStyleToCharacter(w[R+1]);_.push(new qc(B[P],!0,k,v))}}else L.text&&_.push(new qc(L.text,!1,L,v))}const C=typeof i=="number"&&Number.isFinite(i)&&i>0,x=typeof r=="number"&&Number.isFinite(r)&&r>0,S=typeof o=="number"&&Number.isFinite(o)&&o>0&&(!C||o<=i),A=typeof a=="number"&&Number.isFinite(a)&&a>0&&(!x||a<=r),T=new eVt(0,0,(S?o:C?i:0)||0,(A?a:x?r:0)||0,s,l,h,u,d,c||"horizontal",!S&&C,!A&&x,f||!1,(e=this._frameCache)===null||e===void 0?void 0:e.icons),M=new rVt(T);if(M.newLine=y,g){let R=0,L=!1;for(let B=0;B<_.length;B++){const P=_[B];L?(P.overflow=!0,P.left=1/0,P.top=1/0,!P.newLine&&T.lines[T.lines.length-1].paragraphs.push(P)):M.deal(P,!0),T.lines.length!==R&&(R=T.lines.length,M.lineBuffer.length=0,P.overflow=!0,P.left=1e3,P.top=1e3,T.lines[T.lines.length-1].paragraphs.push(P),L=!0),P.newLine&&(L=!1,M.lineWidth=0),M.send()}}else for(let R=0;R<_.length;R++)M.deal(_[R]);if(M.send(),!(T.layoutDirection==="horizontal"?S:A)){const R=T.getActualSizeWidthEllipsis();let L=T.layoutDirection==="horizontal"?R.width:R.height;(T.layoutDirection==="horizontal"?C:x)&&(L=Math.min(L,T.layoutDirection==="horizontal"?i:r)),T.lines.forEach((function(B){B.calcOffset(L,!1)}))}y&&T.lines.forEach((R=>{const L=R.paragraphs;R.paragraphs=R.paragraphs.filter((B=>B.text!=="")),R.paragraphs.length===0&&L.length&&(L[0].text=`
`,R.paragraphs.push(L[0]))})),this._frameCache=T}clone(){return new Fi(Object.assign({},this.attribute))}setStage(t,e){super.setStage(t,e),this.getFrameCache().icons.forEach((i=>{i.setStage(t,e)}))}bindIconEvent(){this.addEventListener("pointermove",(t=>{const e=this.pickIcon(t.global);e&&e===this._currentHoverIcon||(e?this.setAttribute("hoverIconId",e.richtextId):!e&&this._currentHoverIcon&&this.setAttribute("hoverIconId",void 0))})),this.addEventListener("pointerleave",(t=>{this._currentHoverIcon&&this.setAttribute("hoverIconId",void 0)}))}updateHoverIconState(t){var e,i,r,o,a;t?((e=this._currentHoverIcon)===null||e===void 0||e.setHoverState(!1),this._currentHoverIcon=t,this._currentHoverIcon.setHoverState(!0),(i=this.stage)===null||i===void 0||i.setCursor(t.attribute.cursor),(r=this.stage)===null||r===void 0||r.renderNextFrame()):(this._currentHoverIcon.setHoverState(!1),this._currentHoverIcon=null,(o=this.stage)===null||o===void 0||o.setCursor(),(a=this.stage)===null||a===void 0||a.renderNextFrame())}pickIcon(t){const e=this.getFrameCache(),{e:i,f:r}=this.globalTransMatrix;let o;return e.icons.forEach(((a,s)=>{var l,h;const u=a.AABBBounds.clone();u.translate(a._marginArray[3],a._marginArray[0]),u.containsPoint({x:t.x-i,y:t.y-r})&&(o=a,o.globalX=((l=o.attribute.x)!==null&&l!==void 0?l:0)+i+a._marginArray[3],o.globalY=((h=o.attribute.y)!==null&&h!==void 0?h:0)+r+a._marginArray[0])})),o}getNoWorkAnimateAttr(){return Fi.NOWORK_ANIMATE_ATTR}}Fi.NOWORK_ANIMATE_ATTR=Object.assign({ellipsis:1,wordBreak:1,verticalDirection:1,textAlign:1,textBaseline:1,textConfig:1,layoutDirection:1},Ka);function oVt(n){return new Fi(n)}const g$=["path","customPath",...ta];class Tv extends Pn{constructor(t){super(t),this.type="path",this.numberType=XM}get pathShape(){return this.tryUpdateAABBBounds(),this.getParsedPathShape()}isValid(){return super.isValid()&&this._isValid()}_isValid(){const{path:t}=this.attribute;return t!=null&&t!==""}getParsedPathShape(){const t=this.getGraphicTheme();if(!this.valid)return t.path;const e=this.attribute;return e.path instanceof An?e.path:(Ti(this.cache)&&this.doUpdatePathShape(),this.cache instanceof An?this.cache:t.path)}getGraphicTheme(){return he(this).path}updateAABBBounds(t,e,i){if(!this.updatePathProxyAABBBounds(i)){const s=this.getParsedPathShape();i.union(s.getBounds())}const{tb1:r,tb2:o}=St.graphicService.updateTempAABBBounds(i);I_(t,e,r),i.union(r),r.setValue(o.x1,o.y1,o.x2,o.y2),this.widthWithoutTransform=i.x2-i.x1,this.heightWithoutTransform=i.y2-i.y1;const{lineJoin:a=e.lineJoin}=t;return St.graphicService.transformAABBBounds(t,i,e,a==="miter",this),i}doUpdateAABBBounds(t){return this.doUpdatePathShape(),super.doUpdateAABBBounds(t)}doUpdatePathShape(){const t=this.attribute;bl(t.path,!0)?this.cache=new An().fromString(t.path):t.customPath&&(this.cache=new An,t.customPath(this.cache,this))}needUpdateTags(t){return super.needUpdateTags(t,g$)}needUpdateTag(t){return super.needUpdateTag(t,g$)}toCustomPath(){return new An().fromCustomPath2D(this.getParsedPathShape(),0,0)}clone(){return new Tv(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return Tv.NOWORK_ANIMATE_ATTR}}Tv.NOWORK_ANIMATE_ATTR=Object.assign({path:1,customPath:1},Ka);function aVt(n){return new Tv(n)}const p$=["segments","points","curveType","curveTension",...ta];class Lb extends Pn{constructor(t){super(t),this.type="area",this.numberType=p3}isValid(){return super.isValid()&&this._isValid()}_isValid(){if(this.pathProxy)return!0;const{points:t,segments:e}=this.attribute;return e?e.length!==0:!!t&&t.length!==0}getGraphicTheme(){return he(this).area}updateAABBBounds(t,e,i){this.updatePathProxyAABBBounds(i)||(t.segments?this.updateAreaAABBBoundsBySegments(t,e,i):this.updateAreaAABBBoundsByPoints(t,e,i)),St.graphicService.updateTempAABBBounds(i),this.setWidthHeightWithoutTransform(i);const{lineJoin:r=e.lineJoin}=t;return St.graphicService.transformAABBBounds(t,i,e,r==="miter",this),i}updateAreaAABBBoundsByPoints(t,e,i,r){const{points:o=e.points}=t,a=i;return o.forEach((s=>{var l,h;a.add(s.x,s.y),a.add((l=s.x1)!==null&&l!==void 0?l:s.x,(h=s.y1)!==null&&h!==void 0?h:s.y)})),a}updateAreaAABBBoundsBySegments(t,e,i,r){const{segments:o=e.segments}=t,a=i;return o.forEach((s=>{s.points.forEach((l=>{var h,u;a.add(l.x,l.y),a.add((h=l.x1)!==null&&h!==void 0?h:l.x,(u=l.y1)!==null&&u!==void 0?u:l.y)}))})),a}_interpolate(t,e,i,r,o){t==="points"&&(o.points=VM(i,r,e))}needUpdateTags(t){return super.needUpdateTags(t,p$)}needUpdateTag(t){return super.needUpdateTag(t,p$)}toCustomPath(){let t=super.toCustomPath();if(t)return t;t=new An;const e=this.attribute,i=e.segments,r=o=>{if(o&&o.length){let a=!0;const s=[];if(o.forEach((l=>{var h,u;l.defined!==!1&&(a?t.moveTo(l.x,l.y):t.lineTo(l.x,l.y),s.push({x:(h=l.x1)!==null&&h!==void 0?h:l.x,y:(u=l.y1)!==null&&u!==void 0?u:l.y}),a=!1)})),s.length){for(let l=s.length-1;l>=0;l--)t.lineTo(s[l].x,s[l].y);t.closePath()}}};return e.points?r(e.points):i&&i.length&&i.forEach((o=>{r(o.points)})),t}clone(){return new Lb(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return Lb.NOWORK_ANIMATE_ATTR}}Lb.NOWORK_ANIMATE_ATTR=Object.assign({segments:1,curveType:1},Ka);const v$=["innerRadius","outerRadius","startAngle","endAngle","cornerRadius","padAngle","padRadius","cap",...ta];let H_=class YI extends Pn{constructor(t){super(t),this.type="arc",this.numberType=jM}isValid(){return super.isValid()&&this._isValid()}_isValid(){const{startAngle:t,endAngle:e,outerRadius:i,innerRadius:r}=this.attribute;return this._validNumber(t)&&this._validNumber(e)&&this._validNumber(i)&&this._validNumber(r)}getParsedCornerRadius(){const t=this.getGraphicTheme(),{cornerRadius:e=t.cornerRadius,innerPadding:i=t.innerPadding,outerPadding:r=t.outerPadding}=this.attribute;let{outerRadius:o=t.outerRadius,innerRadius:a=t.innerRadius}=this.attribute;if(o+=r,a-=i,e===0||e==="0%")return 0;const s=Math.abs(o-a),l=h=>Math.min(Kn(h,!0)?h:s*parseFloat(h)/100,s/2);if($e(e)){const h=e.map((u=>l(u)||0));return h.length===0?[h[0],h[0],h[0],h[0]]:h.length===2?[h[0],h[1],h[0],h[1]]:(h.length===3&&h.push(0),h)}return l(e)}getParsedAngle(){const t=this.getGraphicTheme();let{startAngle:e=t.startAngle,endAngle:i=t.endAngle}=this.attribute;const{cap:r=t.cap}=this.attribute,o=i-e>=0?1:-1,a=i-e;if(e=yNt(e),i=e+a,r&&Ke(a)<le-vi){let s=1,l=1;r.length&&(s=Number(r[0]),l=Number(r[1]));let{outerRadius:h=t.outerRadius,innerRadius:u=t.innerRadius}=this.attribute;const{outerPadding:d=t.outerPadding,innerPadding:c=t.innerPadding}=this.attribute;h+=d,u-=c;const f=Math.abs(h-u)/2,g=f/h;if(f>vi&&h>vi)return{startAngle:e-o*g*s,endAngle:i+o*g*l,sc:o*g*s,ec:o*g*l}}return{startAngle:e,endAngle:i}}getParsePadAngle(t,e){const i=this.getGraphicTheme(),{innerPadding:r=i.innerPadding,outerPadding:o=i.outerPadding,padAngle:a=i.padAngle}=this.attribute;let{outerRadius:s=i.outerRadius,innerRadius:l=i.innerRadius}=this.attribute;s+=o,l-=r;const{padRadius:h=ws(s*s+l*l)}=this.attribute,u=Ke(e-t);let d=t,c=e,f=t,g=e;const p=a/2;let v=u,m=u;if(p>vi&&h>vi){const y=e>t?1:-1;let b=n7(Number(h)/l*Hi(p)),_=n7(Number(h)/s*Hi(p));return(v-=2*b)>vi?(b*=y,f+=b,g-=b):(v=0,f=g=(t+e)/2),(m-=2*_)>vi?(_*=y,d+=_,c-=_):(m=0,d=c=(t+e)/2),{outerStartAngle:d,outerEndAngle:c,innerStartAngle:f,innerEndAngle:g,innerDeltaAngle:v,outerDeltaAngle:m}}return{outerStartAngle:d,outerEndAngle:c,innerStartAngle:f,innerEndAngle:g,innerDeltaAngle:v,outerDeltaAngle:m}}getGraphicTheme(){return he(this).arc}updateAABBBounds(t,e,i,r){this.updatePathProxyAABBBounds(i)||(r?this.updateArcAABBBoundsImprecise(t,e,i):this.updateArcAABBBoundsAccurate(t,e,i));const{tb1:o,tb2:a}=St.graphicService.updateTempAABBBounds(i);I_(t,e,o),i.union(o),o.setValue(a.x1,a.y1,a.x2,a.y2),this.setWidthHeightWithoutTransform(i);const{lineJoin:s=e.lineJoin}=t;return St.graphicService.transformAABBBounds(t,i,e,s==="miter",this),i}updateArcAABBBoundsImprecise(t,e,i){let{outerRadius:r=e.outerRadius,innerRadius:o=e.innerRadius}=t;const{outerPadding:a=e.outerPadding,innerPadding:s=e.innerPadding}=t;return r+=a,o-=s,r<o&&(r=o),i.set(-r,-r,r,r),i}updateArcAABBBoundsAccurate(t,e,i){let{outerRadius:r=e.outerRadius,innerRadius:o=e.innerRadius}=t;const{outerPadding:a=e.outerPadding,innerPadding:s=e.innerPadding}=t;if(r+=a,o-=s,r<o){const u=r;r=o,o=u}let{endAngle:l=e.endAngle,startAngle:h=e.startAngle}=t;if(h>l){const u=h;h=l,l=u}return r<=vi?i.set(0,0,0,0):Math.abs(l-h)>le-vi?i.set(-r,-r,r,r):(TI(h,l,r,i),TI(h,l,o,i)),i}needUpdateTags(t){return super.needUpdateTags(t,v$)}needUpdateTag(t){return super.needUpdateTag(t,v$)}toCustomPath(){var t,e,i,r;let o=super.toCustomPath();if(o)return o;const a=this.attribute,{startAngle:s,endAngle:l}=this.getParsedAngle();let h=((t=a.innerRadius)!==null&&t!==void 0?t:0)-((e=a.innerPadding)!==null&&e!==void 0?e:0),u=((i=a.outerRadius)!==null&&i!==void 0?i:0)-((r=a.outerPadding)!==null&&r!==void 0?r:0);const d=Ke(l-s),c=l>s;if(u<h){const f=u;u=h,h=f}if(o=new An,u<=vi)o.moveTo(0,0);else if(d>=le-vi)o.moveTo(0+u*wn(s),0+u*Hi(s)),o.arc(0,0,u,s,l,!c),h>vi&&(o.moveTo(0+h*wn(l),0+h*Hi(l)),o.arc(0,0,h,l,s,c));else{const f=u*wn(s),g=u*Hi(s),p=h*wn(l),v=h*Hi(l);o.moveTo(0+f,0+g),o.arc(0,0,u,s,l,!c),o.lineTo(0+p,0+v),o.arc(0,0,h,l,s,c),o.closePath()}return o}clone(){return new YI(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return YI.NOWORK_ANIMATE_ATTR}};H_.NOWORK_ANIMATE_ATTR=Object.assign({cap:1},Ka);function MS(n){return new H_(n)}const m$=["points","cornerRadius",...ta];class Nf extends Pn{constructor(t){super(t),this.type="polygon",this.numberType=qM}isValid(){return super.isValid()&&this._isValid()}_isValid(){const{points:t}=this.attribute;return t&&t.length>=2}getGraphicTheme(){return he(this).polygon}updateAABBBounds(t,e,i){this.updatePathProxyAABBBounds(i)||this.updatePolygonAABBBoundsImprecise(t,e,i),St.graphicService.updateTempAABBBounds(i),this.widthWithoutTransform=i.x2-i.x1,this.heightWithoutTransform=i.y2-i.y1;const{lineJoin:r=e.lineJoin}=t;return St.graphicService.transformAABBBounds(t,i,e,r==="miter",this),i}updatePolygonAABBBoundsImprecise(t,e,i){const{points:r=e.points}=t;return r.forEach((o=>{i.add(o.x,o.y)})),i}_interpolate(t,e,i,r,o){t==="points"&&(o.points=VM(i,r,e))}needUpdateTags(t){return super.needUpdateTags(t,m$)}needUpdateTag(t){return super.needUpdateTag(t,m$)}toCustomPath(){let t=super.toCustomPath();if(t)return t;const e=this.attribute.points;return t=new An,e.forEach(((i,r)=>{r===0?t.moveTo(i.x,i.y):t.lineTo(i.x,i.y)})),t.closePath(),t}clone(){return new Nf(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return Nf.NOWORK_ANIMATE_ATTR}}Nf.NOWORK_ANIMATE_ATTR=Ka;function Pat(n){return new Nf(n)}class sVt extends _e{constructor(t){super({x:0,y:0}),this.type="shadowroot",this.shadowHost=t}clearUpdateBoundTag(){super.clearUpdateBoundTag(),this.shadowHost&&this.shadowHost.clearUpdateBoundTag()}addUpdateBoundTag(){super.addUpdateBoundTag(),this.shadowHost&&this.shadowHost.addUpdateBoundTag()}addUpdateShapeAndBoundsTag(){super.addUpdateShapeAndBoundsTag(),this.shadowHost&&this.shadowHost.addUpdateBoundTag()}tryUpdateGlobalTransMatrix(t=!0){if(this.shouldUpdateGlobalMatrix()){const e=this.transMatrix;this._globalTransMatrix?this._globalTransMatrix.setValue(e.a,e.b,e.c,e.d,e.e,e.f):this._globalTransMatrix=e.clone(),this.doUpdateGlobalMatrix(),t&&this.clearUpdateGlobalPositionTag()}return this._globalTransMatrix}doUpdateGlobalMatrix(){if(this.shadowHost){const t=this.shadowHost.globalTransMatrix;this._globalTransMatrix.multiply(t.a,t.b,t.c,t.d,t.e,t.f)}}tryUpdateGlobalAABBBounds(){return this._globalAABBBounds?this._globalAABBBounds.setValue(this._AABBBounds.x1,this._AABBBounds.y1,this._AABBBounds.x2,this._AABBBounds.y2):this._globalAABBBounds=this._AABBBounds.clone(),this.shadowHost&&this._globalAABBBounds.transformWithMatrix(this.shadowHost.globalTransMatrix),this._globalAABBBounds}}function lVt(n){return new sVt(n)}class hVt{constructor(){this.store=new Map}RegisterGraphicCreator(t,e){this.store.set(t,e),this[t]=e}CreateGraphic(t,e){const i=this.store.get(t);return i?i(e):null}}const Nt=new hVt;let P1;function QM(n){return P1||(P1=Nt.CreateGraphic("text",{})),P1.initAttributes(n),P1.AABBBounds}var uVt=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a},dVt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},y$=function(n,t){return function(e,i){t(e,i,n)}};class t2{constructor(){this.time=Oe.beforeFillStroke,this.useStyle=!0,this.order=0}drawShape(t,e,i,r,o,a,s,l,h,u,d,c,f){var g;const{background:p,backgroundOpacity:v=(g=t.attribute.fillOpacity)!==null&&g!==void 0?g:h.backgroundOpacity,opacity:m=h.opacity,backgroundMode:y=h.backgroundMode,backgroundFit:b=h.backgroundFit,backgroundKeepAspectRatio:_=h.backgroundKeepAspectRatio,backgroundScale:w=h.backgroundScale,backgroundOffsetX:C=h.backgroundOffsetX,backgroundOffsetY:x=h.backgroundOffsetY,backgroundClip:S=h.backgroundClip}=t.attribute;if(p)if(t.backgroundImg&&t.resources){const A=t.resources.get(p);if(A.state!=="success"||!A.data)return;if(e.save(),t.parent&&!t.transMatrix.onlyTranslate()){const M=he(t.parent).group,{scrollX:R=M.scrollX,scrollY:L=M.scrollY}=t.parent.attribute;e.setTransformFromMatrix(t.parent.globalTransMatrix,!0),e.translate(R,L)}S&&e.clip();const T=t.AABBBounds;e.setCommonStyle(t,t.attribute,i,r,h),e.globalAlpha=v*m,this.doDrawImage(e,A.data,T,{backgroundMode:y,backgroundFit:b,backgroundKeepAspectRatio:_,backgroundScale:w,backgroundOffsetX:C,backgroundOffsetY:x}),e.restore(),t.transMatrix.onlyTranslate()||e.setTransformForCurrent()}else e.highPerformanceSave(),e.setCommonStyle(t,t.attribute,i,r,h),e.globalAlpha=v*m,e.fillStyle=p,e.fill(),e.highPerformanceRestore()}doDrawImage(t,e,i,r){const{backgroundMode:o,backgroundFit:a,backgroundKeepAspectRatio:s,backgroundScale:l=1,backgroundOffsetX:h=0,backgroundOffsetY:u=0}=r,d=i.width(),c=i.height();let f=d,g=c;if(o==="no-repeat")if(a)if(s){const p=Math.max(d/e.width,c/e.height);t.drawImage(e,i.x1+h,i.y1+u,e.width*p*l,e.height*p*l)}else t.drawImage(e,i.x1,i.y1,i.width(),i.height());else{const p=e.width*l,v=e.height*l;t.drawImage(e,i.x1+h,i.y1+u,p,v)}else{if(a&&o!=="repeat"&&(e.width||e.height)){const m=e.width,y=e.height;o==="repeat-x"?(f=m*(c/y),g=c):o==="repeat-y"&&(g=y*(d/m),f=d);const b=t.dpr,_=vf.allocate({width:f,height:g,dpr:b}),w=_.getContext("2d");w&&(w.inuse=!0,w.clearMatrix(),w.setTransformForCurrent(!0),w.clearRect(0,0,f,g),w.drawImage(e,0,0,f,g),e=_.nativeCanvas),vf.free(_)}const p=t.dpr,v=t.createPattern(e,o);v.setTransform&&v.setTransform(new DOMMatrix([1/p,0,0,1/p,0,0])),t.fillStyle=v,t.translate(i.x1,i.y1),t.fillRect(0,0,d,c),t.translate(-i.x1,-i.y1)}}}const wd=new t2;let Ps=class{constructor(n){this.subRenderContribitions=n,this.time=Oe.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(n,t,e,i,r,o,a,s,l,h,u,d,c){this._subRenderContribitions||(this._subRenderContribitions=this.subRenderContribitions.getContributions()),this._subRenderContribitions.forEach((f=>{f.render(n,t,e,i,r,o,a,s,l,h,u,d,c)}))}};Ps=uVt([wt(),y$(0,Ce(Qi)),y$(0,Ln(S3)),dVt("design:paramtypes",[Object])],Ps);class cVt{constructor(){this.time=Oe.beforeFillStroke,this.useStyle=!0,this.order=0}drawShape(t,e,i,r,o,a,s,l,h,u,d,c,f){var g,p;const{clipConfig:v}=t.attribute;if(!v)return;const m=t.getClipPath();if(!m)return;const y=!(d||c),b=t.AABBBounds,_=(g=t.attribute.width)!==null&&g!==void 0?g:b.width(),w=(p=t.attribute.height)!==null&&p!==void 0?p:b.height();y&&e.save(),e.beginPath(),m.draw(e,[_,w],i+_/2,r+w/2,0)===!1&&e.closePath(),d&&d(e,t.attribute,h,!0),y&&e.clip()}}const fVt=new cVt;class gVt{constructor(){this.time=Oe.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(t,e,i,r,o,a,s,l,h,u,d,c,f){const{clipConfig:g}=t.attribute;g&&t.getClipPath()&&(d||c||e.restore())}}const pVt=new gVt;function vVt(n){return n<=.5?4*n-1:-4*n+3}function mVt(n,t,e,i,r,o,a){const{fill:s="orange",percent:l=.6,frequency:h=4,opacity:u,phi:d=0}=r;let{amplitude:c=10}=r;c*=vVt(t);const f=i*(1-l),g=e,p=Math.max(Math.round(g/70),2);n.beginPath(),n.moveTo(0+o,i+a),n.lineTo(0+o,f+a);const v=g/h*t,m=g/Math.PI/(2*h);for(let y=0;y<g;y+=p){const b=c*Math.sin((y+v+d)/m+d);n.lineTo(y+o,f+b+a)}n.lineTo(g+o,i+a),n.closePath(),n.fillStyle=s,isFinite(u)&&(n.globalAlpha=u),n.fill()}class T3{constructor(){this.time=Oe.afterFillStroke,this.useStyle=!0,this.order=10,this._tempSymbolGraphic=null}createCommonPattern(t,e,i,r,o){const a=(t-2*e)/2,s=r.dpr,l=vf.allocate({width:t,height:t,dpr:s}),h=l.getContext("2d");if(!h)return null;h.inuse=!0,h.clearMatrix(),h.setTransformForCurrent(!0),h.clearRect(0,0,t,t),o(a,h);const u=r.createPattern(l.nativeCanvas,"repeat");return u.setTransform&&u.setTransform(new DOMMatrix([1/s,0,0,1/s,0,0])),vf.free(l),u}createCirclePattern(t,e,i,r){return this.createCommonPattern(t,e,i,r,((o,a)=>{a.fillStyle=i,a.arc(o,o,o,0,le),a.fill()}))}createDiamondPattern(t,e,i,r){return this.createCommonPattern(t,e,i,r,((o,a)=>{const s=t/2,l=s;a.fillStyle=i,a.moveTo(s,l-o),a.lineTo(o+s,l),a.lineTo(s,l+o),a.lineTo(s-o,l),a.closePath(),a.fill()}))}createRectPattern(t,e,i,r){return this.createCommonPattern(t,e,i,r,((o,a)=>{const s=e,l=s;a.fillStyle=i,a.fillRect(s,l,2*o,2*o)}))}createVerticalLinePattern(t,e,i,r){return this.createCommonPattern(t,e,i,r,((o,a)=>{const s=e;a.fillStyle=i,a.fillRect(s,0,2*o,t)}))}createHorizontalLinePattern(t,e,i,r){return this.createCommonPattern(t,e,i,r,((o,a)=>{const s=e;a.fillStyle=i,a.fillRect(0,s,t,2*o)}))}createBiasLRLinePattern(t,e,i,r){return this.createCommonPattern(t,e,i,r,((o,a)=>{a.strokeStyle=i,a.lineWidth=o,a.moveTo(0,0),a.lineTo(t,t);const s=t/2,l=-s;a.moveTo(s,l),a.lineTo(s+t,l+t),a.moveTo(-s,-l),a.lineTo(-s+t,-l+t),a.stroke()}))}createBiasRLLinePattern(t,e,i,r){return this.createCommonPattern(t,e,i,r,((o,a)=>{a.strokeStyle=i,a.lineWidth=o,a.moveTo(t,0),a.lineTo(0,t);const s=t/2,l=s;a.moveTo(t+s,l),a.lineTo(s,l+t),a.moveTo(t-s,-l),a.lineTo(-s,-l+t),a.stroke()}))}createGridPattern(t,e,i,r){return this.createCommonPattern(t,e,i,r,((o,a)=>{const s=e,l=s;a.fillStyle=i,a.fillRect(s,l,o,o),a.fillRect(s+o,l+o,o,o)}))}initTextureMap(t,e){this.textureMap=new Map}drawShape(t,e,i,r,o,a,s,l,h,u,d,c,f){this.textureMap||this.initTextureMap(e,t.stage);const{texture:g=h.texture,textureColor:p=h.textureColor,textureSize:v=h.textureSize,texturePadding:m=h.texturePadding}=t.attribute;g&&this.drawTexture(g,t,e,i,r,h,p,v,m)}drawTexture(t,e,i,r,o,a,s,l,h){var u;const{textureRatio:d=a.textureRatio,textureOptions:c=null}=e.attribute;let f=this.textureMap.get(t);if(!f)switch(t){case"circle":f=this.createCirclePattern(l,h,s,i);break;case"diamond":f=this.createDiamondPattern(l,h,s,i);break;case"rect":f=this.createRectPattern(l,h,s,i);break;case"vertical-line":f=this.createVerticalLinePattern(l,h,s,i);break;case"horizontal-line":f=this.createHorizontalLinePattern(l,h,s,i);break;case"bias-lr":f=this.createBiasLRLinePattern(l,h,s,i);break;case"bias-rl":f=this.createBiasRLLinePattern(l,h,s,i);break;case"grid":f=this.createGridPattern(l,h,s,i)}if(c&&c.dynamicTexture){const{gridConfig:g={},useNewCanvas:p}=c,v=e.AABBBounds;r=v.x1,o=v.y1;const m=i;let y;if(p){y=vf.allocate({width:v.width(),height:v.height(),dpr:i.dpr});const B=y.getContext("2d");B.clearRect(0,0,v.width(),v.height()),r=0,o=0,i=B}if(m.save(),e.parent&&!e.transMatrix.onlyTranslate()){const{scrollX:B=0,scrollY:P=0}=e.parent.attribute;m.setTransformFromMatrix(e.parent.globalTransMatrix),m.translate(B,P,!0)}m.setCommonStyle(e,e.attribute,r,o,a),m.clip();const b=v.width(),_=v.height(),w=h,C=l,x=g.columns?g.columns:Math.ceil(b/C),S=g.rows?g.rows:Math.ceil(_/C),A=g.gutterColumn?g.gutterColumn:2*w,T=g.gutterRow?g.gutterRow:2*w;this._tempSymbolGraphic||(this._tempSymbolGraphic=Av({}));const M=g.columns?b/g.columns:C,R=g.rows?_/g.rows:C;this._tempSymbolGraphic.setAttributes({size:[M-A,R-T],symbolType:t});const L=this._tempSymbolGraphic.getParsedPath();for(let B=0;B<S;B++)for(let P=0;P<x;P++){const k=r+C/2+P*C,E=o+C/2+B*C;(u=c.beforeDynamicTexture)===null||u===void 0||u.call(c,i,B,P,S,x,d,e,v.width(),v.height()),i.beginPath(),L.draw(i,Math.min(M-A,R-T),k,E,0)===!1&&i.closePath(),i.fillStyle=s,c.dynamicTexture(i,B,P,S,x,d,e,v.width(),v.height())}p&&(m.globalAlpha=1,m.drawImage(y.nativeCanvas,0,0,y.nativeCanvas.width,y.nativeCanvas.height,v.x1,v.y1,v.width()*m.dpr,v.height()*m.dpr)),m.restore()}else if(f)i.highPerformanceSave(),i.setCommonStyle(e,e.attribute,r,o,a),i.fillStyle=f,i.fill(),i.highPerformanceRestore();else if(t==="wave"){i.save(),i.setCommonStyle(e,e.attribute,r,o,a),i.clip();const g=e.AABBBounds;mVt(i,d,g.width(),g.height(),Object.assign(Object.assign({},c||{}),{fill:s}),r+g.x1-r,o+g.y1-o),i.restore()}}}const im=new T3;class yVt{constructor(){this.time=Oe.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(t,e,i,r,o,a,s,l,h,u,d,c){const{outerBorder:f,innerBorder:g}=t.attribute,p=f&&f.visible!==!1,v=g&&g.visible!==!1;if(!p&&!v)return;const{innerPadding:m=h.innerPadding,outerPadding:y=h.outerPadding,startAngle:b=h.startAngle,endAngle:_=h.endAngle,opacity:w=h.opacity,x:C=h.x,y:x=h.y,scaleX:S=h.scaleX,scaleY:A=h.scaleY,keepStrokeScale:T=h.keepStrokeScale}=t.attribute;let{innerRadius:M=h.innerRadius,outerRadius:R=h.outerRadius}=t.attribute;R+=y,M-=m;const L=(B,P)=>{const k=!(!B||!B.stroke),{distance:E=h[P].distance}=B,D=T?E:Dl(e,E,e.dpr),I=E/R,O=P==="outerBorder"?1:-1;if(t.setAttributes({outerRadius:R+O*D,innerRadius:M-O*D,startAngle:b-O*I,endAngle:_+O*I}),e.beginPath(),EI(t,e,i,r,R+O*D,M-O*D),e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,h),c)c(e,B,h[P]);else if(k){const H=h[P].opacity;h[P].opacity=w,e.setStrokeStyle(t,B,(C-i)/S,(x-r)/A,h[P]),h[P].opacity=H,e.stroke()}};p&&L(f,"outerBorder"),v&&L(g,"innerBorder"),t.setAttributes({outerRadius:R,innerRadius:M,startAngle:b,endAngle:_})}}const bVt=new yVt,_Vt=im,CVt=wd;class wVt{constructor(){this.time=Oe.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(t,e,i,r,o,a,s,l,h,u,d,c){const{outerBorder:f,innerBorder:g}=t.attribute,p=f&&f.visible!==!1,v=g&&g.visible!==!1;if(!p&&!v)return;const{radius:m=h.radius,startAngle:y=h.startAngle,endAngle:b=h.endAngle,opacity:_=h.opacity,x:w=h.x,y:C=h.y,scaleX:x=h.scaleX,scaleY:S=h.scaleY,keepStrokeScale:A=h.keepStrokeScale}=t.attribute,T=(M,R)=>{const L=!(!M||!M.stroke),{distance:B=h[R].distance}=M,P=A?B:Dl(e,B,e.dpr),k=R==="outerBorder"?1:-1;if(e.beginPath(),e.arc(i,r,m+k*P,y,b),e.closePath(),e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,h),c)c(e,M,h[R]);else if(L){const E=h[R].opacity;h[R].opacity=_,e.setStrokeStyle(t,M,(w-i)/x,(C-r)/S,h[R]),h[R].opacity=E,e.stroke()}};p&&T(f,"outerBorder"),v&&T(g,"innerBorder")}}const xVt=new wVt,SVt=im,AVt=wd;class TVt extends t2{constructor(){super(...arguments),this.time=Oe.beforeFillStroke}drawShape(t,e,i,r,o,a,s,l,h,u,d,c){const{background:f,backgroundMode:g=h.backgroundMode,backgroundFit:p=h.backgroundFit,backgroundKeepAspectRatio:v=h.backgroundKeepAspectRatio,backgroundScale:m=h.backgroundScale,backgroundOffsetX:y=h.backgroundOffsetX,backgroundOffsetY:b=h.backgroundOffsetY}=t.attribute;if(f)if(t.backgroundImg&&t.resources){const _=t.resources.get(f);if(_.state!=="success"||!_.data)return;e.highPerformanceSave(),e.setTransformFromMatrix(t.parent.globalTransMatrix,!0);const w=t.AABBBounds;this.doDrawImage(e,_.data,w,{backgroundMode:g,backgroundFit:p,backgroundKeepAspectRatio:v,backgroundScale:m,backgroundOffsetX:y,backgroundOffsetY:b}),e.highPerformanceRestore(),e.setTransformForCurrent()}else e.highPerformanceSave(),e.fillStyle=f,e.fill(),e.highPerformanceRestore()}}const b$=new TVt,B1=Ki/2;function Il(n,t,e,i,r,o,a=!0,s){let l;if(Array.isArray(a)&&(s=a,a=!0),i<0&&(t+=i,i=-i),r<0&&(e+=r,r=-r),Kn(o,!0))l=[o=Ke(o),o,o,o];else if(Array.isArray(o)){const x=o;let S,A;switch(x.length){case 0:l=[0,0,0,0];break;case 1:S=Ke(x[0]),l=[S,S,S,S];break;case 2:case 3:S=Ke(x[0]),A=Ke(x[1]),l=[S,A,S,A];break;default:l=x,l[0]=Ke(l[0]),l[1]=Ke(l[1]),l[2]=Ke(l[2]),l[3]=Ke(l[3])}}else l=[0,0,0,0];if(i<0||l[0]+l[1]+l[2]+l[3]<1e-12)return n.rect(t,e,i,r);const[h,u,d,c]=[[t,e],[t+i,e],[t+i,e+r],[t,e+r]],f=Math.min(i/2,r/2),g=[Math.min(f,l[0]),Math.min(f,l[1]),Math.min(f,l[2]),Math.min(f,l[3])],p=[h[0]+g[0],h[1]],v=[h[0],h[1]+g[0]],m=[u[0]-g[1],u[1]],y=[u[0],u[1]+g[1]],b=[d[0]-g[2],d[1]],_=[d[0],d[1]-g[2]],w=[c[0]+g[3],c[1]],C=[c[0],c[1]-g[3]];if(n.moveTo(p[0],p[1]),a){if(s&&s[0]?s[0](p[0],p[1],m[0],m[1]):n.lineTo(m[0],m[1]),!v1(m,y)){s&&s[0]&&n.moveTo(m[0],m[1]);const x=m[0],S=m[1]+g[1];n.arc(x,S,g[1],-B1,0,!1)}if(s&&s[1]?s[1](y[0],y[1],_[0],_[1]):n.lineTo(_[0],_[1]),!v1(b,_)){const x=_[0]-g[2],S=_[1];s&&s[1]&&n.moveTo(_[0],_[1]),n.arc(x,S,g[2],0,B1,!1)}if(s&&s[2]?s[2](b[0],b[1],w[0],w[1]):n.lineTo(w[0],w[1]),!v1(w,C)){const x=w[0],S=w[1]-g[3];s&&s[2]&&n.moveTo(w[0],w[1]),n.arc(x,S,g[3],B1,Ki,!1)}if(s&&s[3]?s[3](C[0],C[1],v[0],v[1]):n.lineTo(v[0],v[1]),!v1(p,v)){const x=p[0],S=p[1]+g[0];s&&s[3]&&n.moveTo(v[0],v[1]),n.arc(x,S,g[0],Ki,Ki+B1,!1)}}else s&&s[0]?s[0](p[0],p[1],m[0],m[1]):n.lineTo(m[0],m[1]),s&&s[1]?s[1](m[0],m[1],b[0],b[1]):n.lineTo(b[0],b[1]),s&&s[2]?s[2](b[0],b[1],w[0],w[1]):n.lineTo(w[0],w[1]),s&&s[2]?s[2](w[0],w[1],p[0],p[1]):n.lineTo(p[0],p[1]);return!s&&n.closePath(),n}var Bat=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a};class kat{constructor(){this.time=Oe.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(t,e,i,r,o,a,s,l,h,u,d,c){const{outerBorder:f,innerBorder:g}=t.attribute,p=f&&f.visible!==!1,v=g&&g.visible!==!1;if(!p&&!v)return;const{cornerRadius:m=h.cornerRadius,cornerType:y=h.cornerType,opacity:b=h.opacity,x:_=h.x,y:w=h.y,scaleX:C=h.scaleX,scaleY:x=h.scaleY,x1:S,y1:A,keepStrokeScale:T=h.keepStrokeScale}=t.attribute;let{width:M,height:R}=t.attribute;M=(M??S-i)||0,R=(R??A-r)||0;const L=(B,P)=>{const k=!(!B||!B.stroke),E=P==="outerBorder"?-1:1,{distance:D=h[P].distance}=B,I=T?D:Dl(e,D,e.dpr),O=i+E*I,H=r+E*I,F=2*I;if(m===0||$e(m)&&m.every((N=>N===0))?(e.beginPath(),e.rect(O,H,M-E*F,R-E*F)):(e.beginPath(),Il(e,O,H,M-E*F,R-E*F,m,y!=="bevel")),e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,h),c)c(e,B,h[P]);else if(k){const N=h[P].opacity;h[P].opacity=b,e.setStrokeStyle(t,B,(_-i)/C,(w-r)/x,h[P]),h[P].opacity=N,e.stroke()}};p&&L(f,"outerBorder"),v&&L(g,"innerBorder")}}let Mv=class{constructor(){this.time=Oe.beforeFillStroke,this.useStyle=!0,this.order=0}drawShape(t,e,i,r,o,a,s,l,h,u,d,c,f){const{stroke:g=h.stroke}=t.attribute;Array.isArray(g)&&g.some((p=>p===!1))&&(f.doStroke=!1)}};Mv=Bat([wt()],Mv);let Rv=class{constructor(){this.time=Oe.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(t,e,i,r,o,a,s,l,h,u,d,c){const{x1:f,y1:g,x:p=h.x,y:v=h.y,stroke:m=h.stroke,cornerRadius:y=h.cornerRadius,cornerType:b=h.cornerType}=t.attribute;let{width:_,height:w}=t.attribute;if(_=(_??f-p)||0,w=(w??g-v)||0,Array.isArray(m)&&m.some((C=>C===!1))){if(e.setStrokeStyle(t,t.attribute,i,r,h),!(y===0||$e(y)&&y.every((C=>C===0)))){let C,x=0;return Il(e,i,r,_,w,y,b!=="bevel",new Array(4).fill(0).map(((S,A)=>(T,M,R,L)=>{m[A]&&(x===A-1&&m[A]===C||(e.setStrokeStyle(t,Object.assign(Object.assign({},t.attribute),{stroke:m[A]}),i,r,h),e.beginPath(),e.moveTo(T,M),C=m[A]),x=A,e.lineTo(R,L),e.stroke(),A===3&&e.beginPath())}))),void e.stroke()}if(e.beginPath(),e.moveTo(i,r),m[0]?e.lineTo(i+_,r):e.moveTo(i+_,r),m[1]?e.lineTo(i+_,r+w):e.moveTo(i+_,r+w),m[2]?e.lineTo(i,r+w):e.moveTo(i,r+w),m[3]){const C=m[0]?r-e.lineWidth/2:r;e.lineTo(i,C)}else e.moveTo(i,r);e.stroke()}}};Rv=Bat([wt()],Rv);const MVt=new kat,RVt=im,PVt=wd;class BVt extends kat{constructor(){super(...arguments),this.time=Oe.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(t,e,i,r,o,a,s,l,h,u,d,c){return super.drawShape(t,e,i,r,o,a,s,l,h,u,d,c)}}const kVt=new BVt,LVt=wd;class EVt{constructor(){this.time=Oe.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(t,e,i,r,o,a,s,l,h,u,d,c){const f=t.getParsedPath();if(!f)return;const{outerBorder:g,innerBorder:p}=t.attribute,v=g&&g.visible!==!1,m=p&&p.visible!==!1;if(!v&&!m)return;const{size:y=h.size,opacity:b=h.opacity,x:_=h.x,y:w=h.y,scaleX:C=h.scaleX,scaleY:x=h.scaleY,keepStrokeScale:S=h.keepStrokeScale}=t.attribute,A=(T,M)=>{const R=!(!T||!T.stroke),{distance:L=h[M].distance}=T,B=S?L:Dl(e,L,e.dpr),P=M==="outerBorder"?1:-1;if(e.beginPath(),f.drawOffset(e,y,i,r,P*B)===!1&&e.closePath(),e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,h),c)c(e,T,h[M]);else if(R){const k=h[M].opacity;h[M].opacity=b,e.setStrokeStyle(t,T,(_-i)/C,(w-r)/x,h[M]),h[M].opacity=k,e.stroke()}};v&&A(g,"outerBorder"),m&&A(p,"innerBorder")}}class DVt{constructor(){this.time=Oe.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(t,e,i,r,o,a,s,l,h,u,d,c,f){const{clipRange:g=h.clipRange,x:p=h.x,y:v=h.y,z:m=h.z,size:y=h.size,scaleX:b=h.scaleX,scaleY:_=h.scaleY}=t.attribute,w=t.getParsedPath();w&&g<1&&g>0&&(e.beginPath(),w.drawWithClipRange&&w.drawWithClipRange(e,y,i,r,g,m,((C,x)=>{var S,A,T,M;if(t._parsedPath.svgCache){const R=Object.assign({},x);R.fill=(S=x.fill)!==null&&S!==void 0?S:t.attribute.fill,R.opacity=(A=x.opacity)!==null&&A!==void 0?A:t.attribute.opacity,R.fillOpacity=t.attribute.fillOpacity,R.stroke=(T=x.stroke)!==null&&T!==void 0?T:t.attribute.stroke,R.lineWidth=(M=x.lineWidth)!==null&&M!==void 0?M:t.attribute.lineWidth,x=R}x.stroke&&(c?c(e,t.attribute,h):l&&(e.setStrokeStyle(t,x,(p-i)/b,(v-r)/_,h),e.stroke()))})),a&&!w.isSvg&&(c?c(e,t.attribute,h):l&&(e.setStrokeStyle(t,t.attribute,(p-i)/b,(v-r)/_,h),e.stroke())))}}const IVt=new EVt,OVt=new DVt,HVt=im,zVt=wd;class FVt extends T3{constructor(){super(...arguments),this.time=Oe.afterFillStroke}drawShape(t,e,i,r,o,a,s,l,h,u,d,c,f){var g,p,v,m;this.textureMap||this.initTextureMap(e,t.stage);const{attribute:y=t.attribute}=f||{},{texture:b=(g=t.attribute.texture)!==null&&g!==void 0?g:A1(h,"texture"),textureColor:_=(p=t.attribute.textureColor)!==null&&p!==void 0?p:A1(h,"textureColor"),textureSize:w=(v=t.attribute.textureSize)!==null&&v!==void 0?v:A1(h,"textureSize"),texturePadding:C=(m=t.attribute.texturePadding)!==null&&m!==void 0?m:A1(h,"texturePadding")}=y;b&&this.drawTexture(b,t,e,i,r,h,_,w,C)}}const nn={x:0,y:0,z:0,lastModelMatrix:null};class ko{init(t){t&&(this._renderContribitions=t.getContributions()),this._renderContribitions||(this._renderContribitions=[]),this.builtinContributions||(this.builtinContributions=[]),this.builtinContributions.push(fVt),this.builtinContributions.push(pVt),this.builtinContributions.forEach((e=>this._renderContribitions.push(e))),this._renderContribitions.length&&(this._renderContribitions.sort(((e,i)=>i.order-e.order)),this._beforeRenderContribitions=this._renderContribitions.filter((e=>e.time===Oe.beforeFillStroke)),this._afterRenderContribitions=this._renderContribitions.filter((e=>e.time===Oe.afterFillStroke)))}reInit(){this.init(this.graphicRenderContributions)}beforeRenderStep(t,e,i,r,o,a,s,l,h,u,d,c,f){this._beforeRenderContribitions&&this._beforeRenderContribitions.forEach((g=>{g.supportedAppName&&t.stage&&t.stage.params&&t.stage.params.context&&t.stage.params.context.appName&&!(Array.isArray(g.supportedAppName)?g.supportedAppName:[g.supportedAppName]).includes(t.stage.params.context.appName)||g.drawShape(t,e,i,r,o,a,s,l,h,u,d,c,f)}))}afterRenderStep(t,e,i,r,o,a,s,l,h,u,d,c,f){this._afterRenderContribitions&&this._afterRenderContribitions.forEach((g=>{g.supportedAppName&&t.stage&&t.stage.params&&t.stage.params.context&&t.stage.params.context.appName&&!(Array.isArray(g.supportedAppName)?g.supportedAppName:[g.supportedAppName]).includes(t.stage.params.context.appName)||g.drawShape(t,e,i,r,o,a,s,l,h,u,d,c,f)}))}drawPathProxy(t,e,i,r,o,a,s,l){if(!t.pathProxy)return!1;const h=he(t,a?.theme)[t.type.replace("3d","")],{fill:u=h.fill,stroke:d=h.stroke,opacity:c=h.opacity,fillOpacity:f=h.fillOpacity,lineWidth:g=h.lineWidth,strokeOpacity:p=h.strokeOpacity,visible:v=h.visible,x:m=h.x,y=h.y}=t.attribute,b=zf(c,f,u),_=LI(c,p),w=xv(u),C=Pb(d,g);if(!v||!w&&!C||!(b||_||s||l))return!0;e.beginPath();const x=typeof t.pathProxy=="function"?t.pathProxy(t.attribute):t.pathProxy;return Vh(x.commandList,e,i,r),e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,h),this.beforeRenderStep(t,e,i,r,w,C,b,_,h,o,s,l),C&&(l?l(e,t.attribute,h):_&&(e.setStrokeStyle(t,t.attribute,i-m,r-y,h),e.stroke())),w&&(s?s(e,t.attribute,h):b&&(e.setCommonStyle(t,t.attribute,i-m,r-y,h),e.fill())),this.afterRenderStep(t,e,i,r,w,C,b,_,h,o,s,l),!0}valid(t,e,i,r){const{fill:o=e.fill,background:a,stroke:s=e.stroke,opacity:l=e.opacity,fillOpacity:h=e.fillOpacity,lineWidth:u=e.lineWidth,strokeOpacity:d=e.strokeOpacity,visible:c=e.visible}=t.attribute,f=zf(l,h,o),g=LI(l,d),p=xv(o,a),v=Pb(s,u);return!(!t.valid||!c)&&!(!p&&!v)&&!!(f||g||i||r||a)&&{fVisible:f,sVisible:g,doFill:p,doStroke:v}}transform(t,e,i,r=!1){const{x:o=e.x,y:a=e.y,z:s=e.z,scaleX:l=e.scaleX,scaleY:h=e.scaleY,angle:u=e.angle,postMatrix:d}=t.attribute,c=i.modelMatrix,f=i.camera;nn.x=o,nn.y=a,nn.z=s,nn.lastModelMatrix=c;const g=f&&(r||Z4t(t)),p=g?t.transMatrix.onlyTranslate()&&!d:l===1&&h===1&&u===0&&!d;if(g){const v=Tn.allocate(),m=Tn.allocate();Tat(m,t,e),D_(v,c||v,m),nn.x=0,nn.y=0,nn.z=0,i.modelMatrix=v,i.setTransform(1,0,0,1,0,0,!0),Tn.free(m)}if(p&&!c){const v=t.getOffsetXY(e);nn.x+=v.x,nn.y+=v.y,nn.z=s,i.setTransformForCurrent()}else if(g)nn.x=0,nn.y=0,nn.z=0,i.setTransform(1,0,0,1,0,0,!0);else if(f&&i.project){const v=t.getOffsetXY(e);nn.x+=v.x,nn.y+=v.y,this.transformWithoutTranslate(i,nn.x,nn.y,nn.z,l,h,u)}else i.transformFromMatrix(t.transMatrix,!0),nn.x=0,nn.y=0,nn.z=0;return nn}transformUseContext2d(t,e,i,r){const o=r.camera;if(this.camera=o,o){const a=t.AABBBounds,s=a.x2-a.x1,l=a.y2-a.y1,h=r.project(0,0,i),u=r.project(s,0,i),d=r.project(s,l,i),c={x:0,y:0},f={x:s,y:0},g={x:s,y:l};r.camera=null;const p=1/(c.x*(g.y-f.y)-f.x*g.y+g.x*f.y+(f.x-g.x)*c.y),v=-(c.y*(d.x-u.x)-f.y*d.x+g.y*u.x+(f.y-g.y)*h.x)*p,m=(f.y*d.y+c.y*(u.y-d.y)-g.y*u.y+(g.y-f.y)*h.y)*p,y=(c.x*(d.x-u.x)-f.x*d.x+g.x*u.x+(f.x-g.x)*h.x)*p,b=-(f.x*d.y+c.x*(u.y-d.y)-g.x*u.y+(g.x-f.x)*h.y)*p,_=(c.x*(g.y*u.x-f.y*d.x)+c.y*(f.x*d.x-g.x*u.x)+(g.x*f.y-f.x*g.y)*h.x)*p,w=(c.x*(g.y*u.y-f.y*d.y)+c.y*(f.x*d.y-g.x*u.y)+(g.x*f.y-f.x*g.y)*h.y)*p;r.setTransform(v,m,y,b,_,w,!0)}}restoreTransformUseContext2d(t,e,i,r){this.camera&&(r.camera=this.camera)}transformWithoutTranslate(t,e,i,r,o,a,s){const l=t.project(e,i,r);t.translate(l.x,l.y,!1),t.scale(o,a,!1),t.rotate(s,!1),t.translate(-l.x,-l.y,!1),t.setTransformForCurrent()}_draw(t,e,i,r,o,a){const{context:s}=r;if(!s)return;const{renderable:l}=t.attribute;if(l===!1)return;s.highPerformanceSave();const h=this.transform(t,e,s,i),{x:u,y:d,z:c,lastModelMatrix:f}=h;this.z=c,this.drawPathProxy(t,s,u,d,r,o)||(this.drawShape(t,s,u,d,r,o,null,null,a),this.z=0,s.modelMatrix!==f&&Tn.free(s.modelMatrix),s.modelMatrix=f),s.highPerformanceRestore()}}var NVt=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a},WVt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},_$=function(n,t){return function(e,i){t(e,i,n)}};let RS=class extends ko{constructor(n){super(),this.graphicRenderContributions=n,this.numberType=jM,this.builtinContributions=[bVt,CVt,_Vt],this.init(n)}drawArcTailCapPath(n,t,e,i,r,o,a,s){const l=s-a,h=n.getParsedAngle(),u=h.startAngle;let d=h.endAngle;d=s;const c=d>u;let f=!1;if(r<o){const k=r;r=o,o=k}const{xors:g,yors:p,xirs:v,yirs:m,limitedOcr:y,outerCornerRadiusStart:b,outerCornerRadiusEnd:_,maxOuterCornerRadius:w,xore:C,yore:x,xire:S,yire:A,limitedIcr:T,innerDeltaAngle:M,innerStartAngle:R,innerCornerRadiusStart:L,innerCornerRadiusEnd:B,maxInnerCornerRadius:P}=Aat(n,u,d,o,r);if(y>vi){const k=xr(b,y),E=xr(_,y),D=Wu(v,m,g,p,r,k,Number(c)),I=Wu(C,x,S,A,r,E,Number(c));if(y<w&&k===E)t.moveTo(e+D.cx+D.x01,i+D.cy+D.y01),t.arc(e+D.cx,i+D.cy,y,je(D.y01,D.x01),je(I.y01,I.x01),!c);else{const O=d-l-.03,H=je(I.y11,I.x11);t.arc(e,i,r,O,H,!c),E>0&&t.arc(e+I.cx,i+I.cy,E,je(I.y11,I.x11),je(I.y01,I.x01),!c)}}else t.moveTo(e+g,i+p);if(!(o>vi)||M<.001)t.lineTo(e+S,i+A),f=!0;else if(T>vi){const k=xr(L,T),E=xr(B,T),D=Wu(S,A,C,x,o,-E,Number(c)),I=Wu(g,p,v,m,o,-k,Number(c));if(t.lineTo(e+D.cx+D.x01,i+D.cy+D.y01),T<P&&k===E){const O=je(I.y01,I.x01);t.arc(e+D.cx,i+D.cy,T,je(D.y01,D.x01),O,!c)}else{E>0&&t.arc(e+D.cx,i+D.cy,E,je(D.y01,D.x01),je(D.y11,D.x11),!c);const O=je(D.cy+D.y11,D.cx+D.x11),H=d-l-.03;t.arc(e,i,o,O,H,c)}}else t.lineTo(e+o*wn(R),i+o*Hi(R));return f}drawShape(n,t,e,i,r,o,a,s,l){l=l??he(n,o?.theme).arc;const{fill:h=l.fill,stroke:u=l.stroke,x:d=l.x,y:c=l.y,fillStrokeOrder:f=l.fillStrokeOrder}=n.attribute,g=this.valid(n,l,a,s);if(!g)return;const{fVisible:p,sVisible:v,doFill:m,doStroke:y}=g,{outerPadding:b=l.outerPadding,innerPadding:_=l.innerPadding,cap:w=l.cap,forceShowCap:C=l.forceShowCap}=n.attribute;let{outerRadius:x=l.outerRadius,innerRadius:S=l.innerRadius}=n.attribute;x+=b,S-=_;let A=0;const T=(Cb(w)&&w||w[0])&&h.gradient==="conical";if(T){const{sc:B,startAngle:P,endAngle:k}=n.getParsedAngle();Ke(k-P)<le-vi&&(A=B||0,h.startAngle-=A,h.endAngle-=A)}let M=!1;const{isFullStroke:R,stroke:L}=aWt(u);if((m||R)&&(t.beginPath(),EI(n,t,e,i,x,S),M=!0,t.setShadowBlendStyle&&t.setShadowBlendStyle(n,n.attribute,l),this.beforeRenderStep(n,t,e,i,m,y,p,v,l,r,a,s),f?(this._runStroke(n,t,e,i,l,y,R,v,s),this._runFill(n,t,e,i,l,m,p,d,c,a)):(this._runFill(n,t,e,i,l,m,p,d,c,a),this._runStroke(n,t,e,i,l,y,R,v,s))),!R&&y&&(t.beginPath(),EI(n,t,e,i,x,S,L),M||this.beforeRenderStep(n,t,e,i,m,y,p,v,l,r,a,s),s?s(t,n.attribute,l):v&&(t.setStrokeStyle(n,n.attribute,e,i,l),t.stroke())),(Cb(w)&&w||w[1])&&C){const{startAngle:B,endAngle:P}=n.getParsedAngle();if(Ke(P-B)>=le-vi){t.beginPath();const k=Math.abs(x-S)/2/x,{endAngle:E=l.endAngle,fill:D=l.fill}=n.attribute,I=E;this.drawArcTailCapPath(n,t,e,i,x,S,I,I+k),M||this.beforeRenderStep(n,t,e,i,m,y,p,v,l,r,a,s);const O=()=>{if(m){const F=D;if(F.gradient==="conical"){const N=O4t(0,0,E,F);a||zf&&(t.setCommonStyle(n,n.attribute,e,i,l),t.fillStyle=N,t.fill())}}},H=()=>{y&&(s||v&&(t.setStrokeStyle(n,n.attribute,e,i,l),t.stroke()))};O(),H()}}this.afterRenderStep(n,t,e,i,m,y,p,v,l,r,a,s),T&&(h.startAngle+=A,h.endAngle+=A)}_runFill(n,t,e,i,r,o,a,s,l,h){o&&(h?h(t,n.attribute,r):a&&(t.setCommonStyle(n,n.attribute,s-e,l-i,r),t.fill()))}_runStroke(n,t,e,i,r,o,a,s,l){o&&a&&(l?l(t,n.attribute,r):s&&(t.setStrokeStyle(n,n.attribute,e,i,r),t.stroke()))}draw(n,t,e,i){const r=he(n,i?.theme).arc;this._draw(n,r,!1,e,i,r)}};RS=NVt([wt(),_$(0,Ce(Qi)),_$(0,Ln(DI)),WVt("design:paramtypes",[Object])],RS);var VVt=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a},GVt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},C$=function(n,t){return function(e,i){t(e,i,n)}};let PS=class extends ko{constructor(n){super(),this.graphicRenderContributions=n,this.numberType=UM,this.builtinContributions=[xVt,AVt,SVt],this.init(n)}drawShape(n,t,e,i,r,o,a,s){const l=he(n,o?.theme).circle,{radius:h=l.radius,startAngle:u=l.startAngle,endAngle:d=l.endAngle,x:c=l.x,y:f=l.y,fillStrokeOrder:g=l.fillStrokeOrder}=n.attribute,p=this.valid(n,l,a,s);if(!p)return;const{fVisible:v,sVisible:m,doFill:y,doStroke:b}=p;t.beginPath(),t.arc(e,i,h,u,d),t.closePath(),t.setShadowBlendStyle&&t.setShadowBlendStyle(n,n.attribute,l),this.beforeRenderStep(n,t,e,i,y,b,v,m,l,r,a,s);const _=()=>{y&&(a?a(t,n.attribute,l):v&&(t.setCommonStyle(n,n.attribute,c-e,f-i,l),t.fill()))},w=()=>{b&&(s?s(t,n.attribute,l):m&&(t.setStrokeStyle(n,n.attribute,c-e,f-i,l),t.stroke()))};g?(w(),_()):(_(),w()),this.afterRenderStep(n,t,e,i,y,b,v,m,l,r,a,s)}draw(n,t,e,i){const r=he(n,i?.theme).circle;this._draw(n,r,!1,e,i)}};PS=VVt([wt(),C$(0,Ce(Qi)),C$(0,Ln(II)),GVt("design:paramtypes",[Object])],PS);function BS(n,t,e,i){if(!t.p1)return;const{offsetX:r=0,offsetY:o=0,offsetZ:a=0}=i||{};if(e===1)t.p2&&t.p3?n.bezierCurveTo(r+t.p1.x,o+t.p1.y,r+t.p2.x,o+t.p2.y,r+t.p3.x,o+t.p3.y,a):n.lineTo(r+t.p1.x,o+t.p1.y,a);else if(t.p2&&t.p3){const[s]=Cv(t,e);n.bezierCurveTo(r+s.p1.x,o+s.p1.y,r+s.p2.x,o+s.p2.y,r+s.p3.x,o+s.p3.y,a)}else{const s=t.getPointAt(e);n.lineTo(r+s.x,o+s.y,a)}}function w$(n,t,e,i,r,o,a){var s;let l=t.p0,h=i;if(e&&e.originP1===e.originP2&&(l=e.p0),t.defined)i||(n.lineTo(l.x+r,l.y+o,a),h=!i);else{const{originP1:u,originP2:d}=t;let c;if(u&&u.defined!==!1&&!e?c=l:u&&d.defined!==!1&&(c=(s=t.p3)!==null&&s!==void 0?s:t.p1),i){h=!i;const f=c?c.x:t.p0.x,g=c?c.y:t.p0.y;n.moveTo(f+r,g+o,a)}else c&&(h=!i,n.lineTo(c.x+r,c.y+o,a))}return h}function Lat(n,t,e,i,r){const{offsetX:o=0,offsetY:a=0,offsetZ:s=0,mode:l="none",drawConnect:h=!1}=r||{};if(h&&l==="none"||!t)return;let u=!0;const{curves:d}=t;if(e>=1){if(h){let m,y=!0;d.forEach(((b,_)=>{b.originP1!==b.originP2&&(y=w$(n,b,m,y,o,a,s)),m=b}))}else d.forEach((m=>{m.defined?(u&&n.moveTo(m.p0.x+o,m.p0.y+a,s),BS(n,m,1,r),u=!1):u=!0}));return}if(e<=0)return;let c;i==="x"?c=ti.ROW:i==="y"?c=ti.COLUMN:i==="auto"&&(c=t.direction);const f=e*t.tryUpdateLength(c);let g=0,p=!0,v=null;for(let m=0,y=d.length;m<y;m++){const b=d[m],_=b.getLength(c),w=(f-g)/_;if(g+=_,w<0)break;if(h){if(b.originP1===b.originP2){v=b;continue}p=w$(n,b,v,p,o,a,s),v=b}else{if(!b.defined){u=!0;continue}u&&n.moveTo(b.p0.x+o,b.p0.y+a,s),BS(n,b,xr(w,1),r),u=!1}}}function $Vt(n,t,e,i){const{offsetX:r=0,offsetY:o=0}=i||{},a=t?t.points[t.points.length-1]:e.points[0];n.moveTo(a.x+r,a.y+o),e.points.forEach((s=>{s.defined!==!1?n.lineTo(s.x+r,s.y+o):n.moveTo(s.x+r,s.y+o)}))}function jVt(n,t,e,i){const{offsetX:r=0,offsetY:o=0}=i||{},{points:a}=e,s=[];for(let l=0;l<a.length;l++)a[l].defined;s.push(a),s.forEach(((l,h)=>{var u,d,c,f;const g=t&&h===0?t.points[t.points.length-1]:l[0];n.moveTo(g.x+r,g.y+o),l.forEach((p=>{p.defined!==!1?n.lineTo(p.x+r,p.y+o):n.moveTo(p.x+r,p.y+o)}));for(let p=l.length-1;p>=0;p--){const v=l[p];n.lineTo((u=v.x1)!==null&&u!==void 0?u:v.x,(d=v.y1)!==null&&d!==void 0?d:v.y)}n.lineTo((c=g.x1)!==null&&c!==void 0?c:g.x,(f=g.y1)!==null&&f!==void 0?f:g.y),n.closePath()}))}var UVt=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a};let Eb=class extends ko{constructor(){super(...arguments),this.numberType=E_}draw(n,t,e,i){const r=he(n,i?.theme).line;this._draw(n,r,!1,e,i)}drawSegmentItem(n,t,e,i,r,o,a,s,l,h,u,d,c,f,g){var p;if(!t)return;n.beginPath();const v=(p=this.z)!==null&&p!==void 0?p:0;Lat(n,t,l,h,{offsetX:u,offsetY:d,offsetZ:v}),c.cache&&!$e(c.cache)&&c.cache.curves.every((b=>b.defined))&&c.attribute.curveType&&c.attribute.curveType.includes("Closed")&&n.closePath(),n.setShadowBlendStyle&&n.setShadowBlendStyle(c,a,s);const{x:m=0,x:y=0}=a;return e!==!1&&(f?f(n,a,s):r&&(n.setCommonStyle(c,a,m-u,y-d,s),n.fill())),i!==!1&&(g?g(n,a,s):o&&(n.setStrokeStyle(c,a,m-u,y-d,s),n.stroke())),!1}drawLinearLineHighPerformance(n,t,e,i,r,o,a,s,l,h,u,d,c){var f;t.beginPath();const g=(f=this.z)!==null&&f!==void 0?f:0,{points:p}=n.attribute,v=p[0];t.moveTo(v.x+a,v.y+s,g);for(let b=1;b<p.length;b++){const _=p[b];t.lineTo(_.x+a,_.y+s,g)}t.setShadowBlendStyle&&t.setShadowBlendStyle(n,n.attribute,l);const{x:m=0,x:y=0}=n.attribute;e!==!1&&(d?d(t,n.attribute,l):r&&(t.setCommonStyle(n,n.attribute,m-a,y-s,l),t.fill())),i!==!1&&(c?c(t,n.attribute,l):o&&(t.setStrokeStyle(n,n.attribute,m-a,y-s,l),t.stroke()))}drawShape(n,t,e,i,r,o,a,s){const l=he(n,o?.theme).line,{fill:h=l.fill,stroke:u=l.stroke,fillOpacity:d=l.fillOpacity,strokeOpacity:c=l.strokeOpacity,segments:f,points:g,closePath:p,curveTension:v=l.curveTension,connectedType:m=l.connectedType}=n.attribute;if(!this.valid(n,l,a,s))return;let{curveType:y=l.curveType}=n.attribute;p&&y==="linear"&&(y="linearClosed");const{clipRange:b=l.clipRange,clipRangeByDimension:_=l.clipRangeByDimension}=n.attribute;if(b===1&&!f&&!g.some((C=>C.defined===!1))&&y==="linear")return this.drawLinearLineHighPerformance(n,t,!!h,!!u,d,c,e,i,l,r,o,a,s);function w(C,x){return x==="none"?C:C.filter((S=>S.defined!==!1))}if(n.shouldUpdateShape()){const{points:C,segments:x}=n.attribute,S=C;if(x&&x.length){let A,T;if(n.cache=x.map(((M,R)=>{if(M.points.length<=1&&R===0)return M.points[0]&&(T={endX:M.points[0].x,endY:M.points[0].y,curves:[{defined:M.points[0].defined!==!1}]}),null;R===1?A={x:T.endX,y:T.endY,defined:T.curves[T.curves.length-1].defined}:R>1&&(A.x=T.endX,A.y=T.endY,A.defined=T.curves[T.curves.length-1].defined);const L=jc(w(M.points,m),y,{startPoint:A,curveTension:v});return T=L,L})).filter((M=>!!M)),y==="linearClosed"){let M;for(let R=0;R<n.cache.length;R++){const L=n.cache[R];for(let B=0;B<L.curves.length;B++)if(L.curves[B].defined){M=L.curves[B].p0;break}if(M)break}n.cache[n.cache.length-1]&&n.cache[n.cache.length-1].lineTo(M.x,M.y,!0)}}else{if(!C||!C.length)return n.cache=null,void n.clearUpdateShapeTag();n.cache=jc(w(S,m),y,{curveTension:v})}n.clearUpdateShapeTag()}if(Array.isArray(n.cache)){const C=n.attribute.segments.filter((x=>x.points.length));if(C[0].points.length===1&&C.shift(),b===1){let x=!1;n.cache.forEach(((S,A)=>{x||(x=this.drawSegmentItem(t,S,!!h,!!u,d,c,C[A],[l,n.attribute],b,_,e,i,n,a,s))}))}else{const x=n.cache.reduce(((M,R)=>M+R.getLength()),0),S=b*x;let A=0,T=!1;n.cache.forEach(((M,R)=>{if(T)return;const L=M.getLength(),B=(S-A)/L;A+=L,B>0&&(T=this.drawSegmentItem(t,M,!!h,!!u,d,c,C[R],[l,n.attribute],xr(B,1),_,e,i,n,a,s))}))}}else this.drawSegmentItem(t,n.cache,!!h,!!u,d,c,n.attribute,l,b,_,e,i,n,a,s)}};Eb=UVt([wt()],Eb);function YVt(n,t,e,i){var r;const{top:o,bottom:a}=t;if(o.curves.length!==a.curves.length)return;if(e>=1){const m=[],y=[];let b=!0;for(let _=0,w=o.curves.length;_<w;_++){const C=o.curves[_];b!==C.defined?(b?(k1(n,m,y,i),m.length=0,y.length=0):(m.push(C),y.push(a.curves[w-_-1])),b=!b):b&&(m.push(C),y.push(a.curves[w-_-1]))}return void k1(n,m,y,i)}if(e<=0)return;let{direction:s}=i||{};const{curves:l}=o,h=(r=l[l.length-1].p3)!==null&&r!==void 0?r:l[l.length-1].p1,u=Ke(h.x-l[0].p0.x),d=Ke(h.y-l[0].p0.y);s=s??(u>d?ti.ROW:ti.COLUMN),Number.isFinite(u)||(s=ti.COLUMN),Number.isFinite(d)||(s=ti.ROW);const c=e*(s===ti.ROW?u:d);let f=0,g=!0;const p=[],v=[];for(let m=0,y=o.curves.length;m<y;m++){const b=o.curves[m],_=b.getLength(s),w=(c-f)/_;if(w<0)break;f+=_;let C=null,x=null;g!==b.defined?(g?(k1(n,p,v,i),p.length=0,v.length=0):(C=b,x=a.curves[y-m-1]),g=!g):g&&(C=b,x=a.curves[y-m-1]),C&&x&&(w<1&&(C=C.p2&&C.p3?Cv(C,w)[0]:y7(C,w)[0],x=x.p2&&x.p3?Cv(x,1-w)[1]:y7(x,1-w)[1]),C.defined=g,x.defined=g,p.push(C),v.push(x)),C=null,x=null}k1(n,p,v,i)}function k1(n,t,e,i){const{offsetX:r=0,offsetY:o=0,offsetZ:a=0}=i||{};let s=!0;t.forEach((l=>{l.defined?(s&&n.moveTo(l.p0.x+r,l.p0.y+o,a),BS(n,l,1,i),s=!1):s=!0})),s=!0;for(let l=e.length-1;l>=0;l--){const h=e[l];h.defined?(s&&n.lineTo(h.p0.x+r,h.p0.y+o,a),BS(n,h,1,i),s=!1):s=!0}n.closePath()}const XVt=new FVt,qVt=wd;var KVt=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a},ZVt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},x$=function(n,t){return function(e,i){t(e,i,n)}};let XI=class extends ko{constructor(n){super(),this.graphicRenderContributions=n,this.numberType=p3,this.builtinContributions=[XVt,qVt],this.init(n)}drawLinearAreaHighPerformance(n,t,e,i,r,o,a,s,l,h,u,d,c){var f,g,p;const{points:v}=n.attribute;if(v.length<2)return;t.beginPath();const m=(f=this.z)!==null&&f!==void 0?f:0,y=v[0];t.moveTo(y.x+a,y.y+s,m);for(let w=1;w<v.length;w++){const C=v[w];t.lineTo(C.x+a,C.y+s,m)}for(let w=v.length-1;w>=0;w--){const C=v[w];t.lineTo(((g=C.x1)!==null&&g!==void 0?g:C.x)+a,((p=C.y1)!==null&&p!==void 0?p:C.y)+s,m)}t.closePath(),t.setShadowBlendStyle&&t.setShadowBlendStyle(n,n.attribute,l),this.beforeRenderStep(n,t,a,s,!!r,!1,e,!1,l,h,d,null,{attribute:n.attribute});const{x:b=0,x:_=0}=n.attribute;e!==!1&&(d?d(t,n.attribute,l):r&&(t.setCommonStyle(n,n.attribute,b-a,_-s,l),t.fill())),this.afterRenderStep(n,t,a,s,!!r,!1,e,!1,l,h,d,null,{attribute:n.attribute}),(()=>{var w,C;if(i){const{stroke:x=l&&l.stroke}=n.attribute;if($e(x)&&(x[0]||x[2])&&x[1]===!1){if(t.beginPath(),x[0]){t.moveTo(y.x+a,y.y+s,m);for(let S=1;S<v.length;S++){const A=v[S];t.lineTo(A.x+a,A.y+s,m)}}else if(x[2]){const S=v[v.length-1];t.moveTo(S.x+a,S.y+s,m);for(let A=v.length-2;A>=0;A--){const T=v[A];t.lineTo(((w=T.x1)!==null&&w!==void 0?w:T.x)+a,((C=T.y1)!==null&&C!==void 0?C:T.y)+s,m)}}}c?c(t,n.attribute,l):(t.setStrokeStyle(n,n.attribute,b-a,_-s,l),t.stroke())}})()}drawShape(n,t,e,i,r,o,a,s){var l,h,u,d,c,f;const g=he(n,o?.theme).area,{fill:p=g.fill,stroke:v=g.stroke,fillOpacity:m=g.fillOpacity,z:y=g.z,strokeOpacity:b=g.strokeOpacity,curveTension:_=g.curveTension,connectedType:w=g.connectedType}=n.attribute,C=this.valid(n,g,a,s);if(!C)return;const{doFill:x}=C,S=C.doStroke&&C.sVisible,{clipRange:A=g.clipRange,closePath:T,points:M,segments:R}=n.attribute;let{curveType:L=g.curveType}=n.attribute;function B(P,k){return k!=="connect"?P:P.filter((E=>E.defined!==!1))}if(T&&L==="linear"&&(L="linearClosed"),A===1&&!R&&!M.some((P=>P.defined===!1))&&L==="linear")return this.drawLinearAreaHighPerformance(n,t,!!p,S,m,b,e,i,g,r,o,a,s);if(n.shouldUpdateShape()){if(R&&R.length){let P,k;const E=R.map(((O,H)=>{if(O.points.length<=1&&H===0)return O.points[0]&&(k={endX:O.points[0].x,endY:O.points[0].y}),null;H===1?P={x:k.endX,y:k.endY}:H>1&&(P.x=k.endX,P.y=k.endY);const F=jc(B(O.points,w),L,{startPoint:P,curveTension:_});return k=F,F})).filter((O=>!!O));let D;const I=[];for(let O=R.length-1;O>=0;O--){const H=R[O].points,F=[];for(let N=H.length-1;N>=0;N--)F.push({x:(l=H[N].x1)!==null&&l!==void 0?l:H[N].x,y:(h=H[N].y1)!==null&&h!==void 0?h:H[N].y});if(O!==0){const N=R[O-1].points,$=N[N.length-1];$&&F.push({x:(u=$.x1)!==null&&u!==void 0?u:$.x,y:(d=$.y1)!==null&&d!==void 0?d:$.y})}F.length>1&&(D=jc(B(F,w),L==="stepBefore"?"stepAfter":L==="stepAfter"?"stepBefore":L,{curveTension:_}),I.unshift(D))}n.cacheArea=I.map(((O,H)=>({top:E[H],bottom:O})))}else{if(!M||!M.length)return n.cacheArea=null,void n.clearUpdateShapeTag();{const P=B(M,w),k=[];for(let I=P.length-1;I>=0;I--)k.push({x:(c=P[I].x1)!==null&&c!==void 0?c:P[I].x,y:(f=P[I].y1)!==null&&f!==void 0?f:P[I].y});const E=jc(P,L,{curveTension:_}),D=jc(k,L==="stepBefore"?"stepAfter":L==="stepAfter"?"stepBefore":L,{curveTension:_});n.cacheArea={top:E,bottom:D}}}n.clearUpdateShapeTag()}if(Array.isArray(n.cacheArea)){const P=n.attribute.segments.filter((k=>k.points.length));if(P[0].points.length===1&&P.shift(),A===1){let k=!1;n.cacheArea.forEach(((E,D)=>{k||(k=this.drawSegmentItem(t,E,x,m,S,b,P[D],[g,n.attribute],A,e,i,y,n,r,a,s))}))}else{const k=n.cacheArea.reduce(((O,H)=>O+H.top.getLength()),0),E=A*k;let D=0,I=!1;n.cacheArea.forEach(((O,H)=>{if(I)return;const F=O.top.getLength(),N=(E-D)/F;D+=F,N>0&&(I=this.drawSegmentItem(t,O,x,m,S,b,P[H],[g,n.attribute],xr(N,1),e,i,y,n,r,a,s))}))}}else this.drawSegmentItem(t,n.cacheArea,x,m,S,b,n.attribute,g,A,e,i,y,n,r,a,s)}draw(n,t,e,i){const r=he(n,i?.theme).area;this._draw(n,r,!1,e,i)}drawSegmentItem(n,t,e,i,r,o,a,s,l,h,u,d,c,f,g,p){return this._drawSegmentItem(n,t,e,i,r,o,a,s,l,h,u,d,c,f,g,p)}_drawSegmentItem(n,t,e,i,r,o,a,s,l,h,u,d,c,f,g,p){if(!(t&&t.top&&t.bottom&&t.top.curves&&t.top.curves.length&&t.bottom.curves&&t.bottom.curves.length))return;n.beginPath();const{points:v,segments:m}=c.attribute;let y,b,_=ti.ROW;if(m){const A=m[m.length-1];b=m[0].points[0],y=A.points[A.points.length-1]}else b=v[0],y=v[v.length-1];const w=Ke(y.x-b.x),C=Ke(y.y-b.y);_=y.x1==null?ti.ROW:y.y1==null?ti.COLUMN:Number.isFinite(w+C)?w>C?ti.ROW:ti.COLUMN:ti.ROW,YVt(n,t,l,{offsetX:h,offsetY:u,offsetZ:d,direction:_}),this.beforeRenderStep(c,n,h,u,!!i,!1,e,!1,s,f,g,null,{attribute:a}),n.setShadowBlendStyle&&n.setShadowBlendStyle(c,a,s);const{x=0,x:S=0}=a;return e!==!1&&(g?g(n,a,s):i&&(n.setCommonStyle(c,a,x-h,S-u,s),n.fill())),this.afterRenderStep(c,n,h,u,!!i,!1,e,!1,s,f,g,null,{attribute:a}),(()=>{if(r!==!1)if(p)p(n,a,s);else{const{stroke:A=s&&s[1]&&s[1].stroke}=a;$e(A)&&(A[0]||A[2])&&A[1]===!1&&(n.beginPath(),Lat(n,A[0]?t.top:t.bottom,l,_===ti.ROW?"x":"y",{offsetX:h,offsetY:u,offsetZ:d})),n.setStrokeStyle(c,a,x-h,S-u,s),n.stroke()}})(),!1}};XI=KVt([wt(),x$(0,Ce(Qi)),x$(0,Ln(Y4t)),ZVt("design:paramtypes",[Object])],XI);const JVt=im,QVt=wd;var t6t=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a},e6t=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},S$=function(n,t){return function(e,i){t(e,i,n)}};let kS=class extends ko{constructor(n){super(),this.graphicRenderContributions=n,this.numberType=XM,this.builtinContributions=[QVt,JVt],this.init(n)}drawShape(n,t,e,i,r,o,a,s){var l,h,u;const d=(l=this.tempTheme)!==null&&l!==void 0?l:he(n,o?.theme).path,{x:c=d.x,y:f=d.y,fillStrokeOrder:g=d.fillStrokeOrder}=n.attribute,p=(h=this.z)!==null&&h!==void 0?h:0,v=this.valid(n,d,a,s);if(!v)return;const{fVisible:m,sVisible:y,doFill:b,doStroke:_}=v;if(t.beginPath(),n.pathShape)Vh(n.pathShape.commandList,t,e,i,1,1,p);else{const x=(u=n.attribute.path)!==null&&u!==void 0?u:d.path;Vh(x.commandList,t,e,i,1,1,p)}t.setShadowBlendStyle&&t.setShadowBlendStyle(n,n.attribute,d),this.beforeRenderStep(n,t,e,i,b,_,m,y,d,r,a,s);const w=()=>{_&&(s?s(t,n.attribute,d):y&&(t.setStrokeStyle(n,n.attribute,c-e,f-i,d),t.stroke()))},C=()=>{b&&(a?a(t,n.attribute,d):m&&(t.setCommonStyle(n,n.attribute,c-e,f-i,d),t.fill()))};g?(w(),C()):(C(),w()),this.afterRenderStep(n,t,e,i,b,_,m,y,d,r,a,s)}draw(n,t,e,i){const r=he(n,i?.theme).path;this.tempTheme=r,this._draw(n,r,!1,e,i),this.tempTheme=null}};kS=t6t([wt(),S$(0,Ce(Qi)),S$(0,Ln(OI)),e6t("design:paramtypes",[Object])],kS);var i6t=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a},n6t=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},A$=function(n,t){return function(e,i){t(e,i,n)}};let LS=class extends ko{constructor(n){super(),this.graphicRenderContributions=n,this.type="rect",this.numberType=m3,this.builtinContributions=[MVt,PVt,RVt],this.init(n)}drawShape(n,t,e,i,r,o,a,s,l){l=l??he(n,o?.theme).rect;const{fill:h=l.fill,background:u,stroke:d=l.stroke,cornerRadius:c=l.cornerRadius,cornerType:f=l.cornerType,opacity:g=l.opacity,fillOpacity:p=l.fillOpacity,lineWidth:v=l.lineWidth,strokeOpacity:m=l.strokeOpacity,visible:y=l.visible,x1:b,y1:_,x:w=l.x,y:C=l.y,fillStrokeOrder:x=l.fillStrokeOrder,drawStrokeWhenZeroWH:S=l.drawStrokeWhenZeroWH}=n.attribute;let{width:A,height:T}=n.attribute;A=(A??b-w)||0,T=(T??_-C)||0;const M=xat(g,p,A,T,h),R=Sat(g,m,A,T,S),L=xv(h,u),B=Pb(d,v);if(!n.valid||!y||!L&&!B||!(M||R||a||s||u))return;c===0||$e(c)&&c.every((k=>k===0))?(t.beginPath(),t.rect(e,i,A,T)):(t.beginPath(),Il(t,e,i,A,T,c,f!=="bevel"));const P={doFill:L,doStroke:B};t.setShadowBlendStyle&&t.setShadowBlendStyle(n,n.attribute,l),this.beforeRenderStep(n,t,e,i,L,B,M,R,l,r,a,s,P),x?(this._runStroke(n,t,e,i,l,P,R,w,C,s),this._runFill(n,t,e,i,l,P,M,w,C,a)):(this._runFill(n,t,e,i,l,P,M,w,C,a),this._runStroke(n,t,e,i,l,P,R,w,C,s)),this.afterRenderStep(n,t,e,i,L,B,M,R,l,r,a,s)}_runFill(n,t,e,i,r,o,a,s,l,h){o.doFill&&(h?h(t,n.attribute,r):a&&(t.setCommonStyle(n,n.attribute,s-e,l-i,r),t.fill()))}_runStroke(n,t,e,i,r,o,a,s,l,h){o.doStroke&&(h?h(t,n.attribute,r):a&&(t.setStrokeStyle(n,n.attribute,s-e,l-i,r),t.stroke()))}draw(n,t,e,i){const r=he(n,i?.theme).rect;this._draw(n,r,!1,e,i,r)}};LS=i6t([wt(),A$(0,Ce(Qi)),A$(0,Ln(Xc)),n6t("design:paramtypes",[Object])],LS);var r6t=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a},o6t=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},T$=function(n,t){return function(e,i){t(e,i,n)}};let ES=class extends ko{constructor(n){super(),this.graphicRenderContributions=n,this.numberType=KM,this.builtinContributions=[IVt,zVt,HVt,OVt],this.init(n)}drawShape(n,t,e,i,r,o,a,s,l){var h;l=l??he(n,o?.theme).symbol;const{size:u=l.size,x:d=l.x,y:c=l.y,scaleX:f=l.scaleX,scaleY:g=l.scaleY,fillStrokeOrder:p=l.fillStrokeOrder,clipRange:v=l.clipRange}=n.attribute,m=this.valid(n,l,a,s);if(!m)return;const{fVisible:y,sVisible:b,doFill:_,doStroke:w}=m,C=n.getParsedPath();if(!C)return;const{keepDirIn3d:x=l.keepDirIn3d}=n.attribute,S=(h=this.z)!==null&&h!==void 0?h:0;t.beginPath();let A=e,T=i,M=S;const R=t.camera;if(x&&R&&t.project){const L=t.project(e,i,S);t.camera=null,$e(u)?(u[0]*f,u[1]*g):u*f,A=L.x,T=L.y,M=void 0}C.draw(t,u,A,T,M,((L,B)=>{var P,k,E,D;if(n._parsedPath.svgCache){const H=Object.assign({},B);H.fill=(P=B.fill)!==null&&P!==void 0?P:n.attribute.fill,H.opacity=(k=B.opacity)!==null&&k!==void 0?k:n.attribute.opacity,H.fillOpacity=n.attribute.fillOpacity,H.stroke=(E=B.stroke)!==null&&E!==void 0?E:n.attribute.stroke,H.lineWidth=(D=B.lineWidth)!==null&&D!==void 0?D:n.attribute.lineWidth,B=H}const I=()=>{B.fill&&(a?a(t,n.attribute,l):(t.setCommonStyle(n,B,d-e,c-i,l),t.fill()))},O=()=>{B.stroke&&(s?s(t,n.attribute,l):b&&v>=1&&(t.setStrokeStyle(n,B,(d-e)/f,(c-i)/g,l),t.stroke()))};p?(O(),I()):(I(),O())}))===!1&&t.closePath(),t.camera=R,t.setShadowBlendStyle&&t.setShadowBlendStyle(n,n.attribute,l),this.beforeRenderStep(n,t,e,i,_,w,y,b,l,r,a,s),p?(this._runStroke(n,t,e,i,l,w,b,d,c,C,v,f,g,s),this._runFill(n,t,e,i,l,_,y,d,c,C,a)):(this._runFill(n,t,e,i,l,_,y,d,c,C,a),this._runStroke(n,t,e,i,l,w,b,d,c,C,v,f,g,s)),this.afterRenderStep(n,t,e,i,_,w,y,b,l,r,a,s)}_runFill(n,t,e,i,r,o,a,s,l,h,u){o&&!h.isSvg&&(u?u(t,n.attribute,r):a&&(t.setCommonStyle(n,n.attribute,s-e,l-i,r),t.fill()))}_runStroke(n,t,e,i,r,o,a,s,l,h,u,d,c,f){o&&!h.isSvg&&(f?f(t,n.attribute,r):a&&u>=1&&(t.setStrokeStyle(n,n.attribute,(s-e)/d,(l-i)/c,r),t.stroke()))}draw(n,t,e,i){const r=he(n,i?.theme).symbol;this._draw(n,r,!1,e,i)}};ES=r6t([wt(),T$(0,Ce(Qi)),T$(0,Ln(zI)),o6t("design:paramtypes",[Object])],ES);class a6t{constructor(){this.pools=[];for(let t=0;t<10;t++)this.pools.push(new sr)}allocate(t,e,i,r){if(!this.pools.length)return new sr().setValue(t,e,i,r);const o=this.pools.pop();return o.x1=t,o.y1=e,o.x2=i,o.y2=r,o}allocateByObj(t){if(!this.pools.length)return new sr(t);const e=this.pools.pop();return e.x1=t.x1,e.y1=t.y1,e.x2=t.x2,e.y2=t.y2,e}free(t){this.pools.push(t)}get length(){return this.pools.length}release(...t){this.pools=[]}}const DS=new a6t;class s6t extends t2{constructor(){super(...arguments),this.time=Oe.beforeFillStroke}drawShape(t,e,i,r,o,a,s,l,h,u,d,c){var f,g,p,v,m,y,b,_,w,C;const{backgroundMode:x=h.backgroundMode,backgroundFit:S=h.backgroundFit,backgroundKeepAspectRatio:A=h.backgroundKeepAspectRatio}=t.attribute;let T,{background:M}=t.attribute;if(!M)return;const R=()=>{t.type==="richtext"&&(e.restore(),e.save(),T&&e.setTransformFromMatrix(T,!0,1))};let L;t.type==="richtext"&&(T=e.currentMatrix.clone(),e.restore(),e.save(),e.setTransformForCurrent());const B=Rc(M)&&M.background,P=t.transMatrix.onlyTranslate();if(B){const k=t.AABBBounds,E=((f=M.x)!==null&&f!==void 0?f:k.x1)+((g=M.dx)!==null&&g!==void 0?g:0),D=((p=M.y)!==null&&p!==void 0?p:k.y1)+((v=M.dy)!==null&&v!==void 0?v:0),I=(m=M.width)!==null&&m!==void 0?m:k.width(),O=(y=M.height)!==null&&y!==void 0?y:k.height();if(L=DS.allocate(E,D,E+I,D+O),M=M.background,!P){const H=L.width(),F=L.height();L.set(((b=M.x)!==null&&b!==void 0?b:0)+((_=M.dx)!==null&&_!==void 0?_:0),((w=M.y)!==null&&w!==void 0?w:0)+((C=M.dy)!==null&&C!==void 0?C:0),H,F)}}else L=t.AABBBounds,P||(L=QM(Object.assign(Object.assign({},t.attribute),{angle:0,scaleX:1,scaleY:1,x:0,y:0,dx:0,dy:0})).clone());if(t.backgroundImg&&t.resources){const k=t.resources.get(M);if(k.state!=="success"||!k.data)return void R();e.highPerformanceSave(),P&&e.setTransformFromMatrix(t.parent.globalTransMatrix,!0),e.setCommonStyle(t,t.attribute,i,r,h),this.doDrawImage(e,k.data,L,{backgroundMode:x,backgroundFit:S,backgroundKeepAspectRatio:A}),e.highPerformanceRestore(),e.setTransformForCurrent()}else{const{backgroundCornerRadius:k}=t.attribute;e.highPerformanceSave(),e.setCommonStyle(t,t.attribute,i,r,h),e.fillStyle=M,k?(Il(e,L.x1,L.y1,L.width(),L.height(),k,!0),e.fill()):e.fillRect(L.x1,L.y1,L.width(),L.height()),e.highPerformanceRestore()}B&&DS.free(L),R()}}const Eat=new s6t;var l6t=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a},h6t=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},M$=function(n,t){return function(e,i){t(e,i,n)}};let qI=class extends ko{constructor(n){super(),this.graphicRenderContributions=n,this.numberType=ZM,this.builtinContributions=[Eat],this.init(n)}drawShape(n,t,e,i,r,o,a,s){var l,h,u;const d=he(n,o?.theme).text,{text:c,underline:f=d.underline,lineThrough:g=d.lineThrough,keepDirIn3d:p=d.keepDirIn3d,direction:v=d.direction,fontSize:m=d.fontSize,verticalMode:y=d.verticalMode,x:b=d.x,y:_=d.y}=n.attribute,w=(l=L_(n.attribute.lineHeight,m))!==null&&l!==void 0?l:m,C=this.valid(n,d,a,s);if(!C)return;const{fVisible:x,sVisible:S,doFill:A,doStroke:T}=C,M=!p,R=this.z||0;t.beginPath(),t.setShadowBlendStyle&&t.setShadowBlendStyle(n,n.attribute,d),this.beforeRenderStep(n,t,e,i,A,T,x,S,d,r,a,s),M&&this.transformUseContext2d(n,d,R,t);const L=(B,P,k,E)=>{let D=e+P;const I=i+k;if(E){t.highPerformanceSave(),D+=m;const O=ar.allocate(1,0,0,1,0,0);O.rotateByCenter(Math.PI/2,D,I),t.transformFromMatrix(O,!0),ar.free(O)}T&&(s?s(t,n.attribute,d):S&&(t.setStrokeStyle(n,n.attribute,b-e,_-i,d),t.strokeText(B,D,I,R))),A&&(a?a(t,n.attribute,d):x&&(t.setCommonStyle(n,n.attribute,b-e,_-i,d),t.fillText(B,D,I,R))),E&&(t.highPerformanceRestore(),t.setTransformForCurrent())};if(t.setTextStyleWithoutAlignBaseline(n.attribute,d,R),v==="horizontal"){const{multilineLayout:B}=n;if(!B)return void t.highPerformanceRestore();const{xOffset:P,yOffset:k}=B.bbox;T&&(s?s(t,n.attribute,d):S&&(t.setStrokeStyle(n,n.attribute,b-e,_-i,d),B.lines.forEach((E=>{t.strokeText(E.str,(E.leftOffset||0)+P+e,(E.topOffset||0)+k+i,R)})))),A&&(a?a(t,n.attribute,d):x&&(t.setCommonStyle(n,n.attribute,b-e,_-i,d),B.lines.forEach((E=>{t.fillText(E.str,(E.leftOffset||0)+P+e,(E.topOffset||0)+k+i,R),this.drawUnderLine(f,g,n,(E.leftOffset||0)+P+e,(E.topOffset||0)+k+i,E.descent,(E.descent-E.ascent)/2,R,d,t,{width:E.width})}))))}else{let{textAlign:B=d.textAlign,textBaseline:P=d.textBaseline}=n.attribute;if(!y){const F=B;B=(h=n.getBaselineMapAlign()[P])!==null&&h!==void 0?h:"left",P=(u=n.getAlignMapBaseline()[F])!==null&&u!==void 0?u:"top"}n.tryUpdateAABBBounds();const k=n.cache,{verticalList:E}=k;t.textAlign="left",t.textBaseline="top";const D=w*E.length;let I=0;E.forEach((F=>{const N=F.reduce((($,V)=>$+(V.width||0)),0);I=Th(N,I)}));let O=0,H=0;P==="bottom"?H=-D:P==="middle"&&(H=-D/2),B==="center"?O-=I/2:B==="right"&&(O-=I),E.forEach(((F,N)=>{const $=F.reduce(((Z,tt)=>Z+(tt.width||0)),0),V=I-$;let X=O;B==="center"?X+=V/2:B==="right"&&(X+=V),F.forEach((Z=>{const{text:tt,width:K,direction:rt}=Z;L(tt,D-(N+1)*w+H,X,rt),X+=K}))}))}M&&this.restoreTransformUseContext2d(n,d,R,t),this.afterRenderStep(n,t,e,i,A,T,x,S,d,r,a,s)}draw(n,t,e,i){const r=he(n,i?.theme).text,{keepDirIn3d:o=r.keepDirIn3d}=n.attribute,a=!o;this._draw(n,r,a,e,i)}drawUnderLine(n,t,e,i,r,o,a,s,l,h,u){if(t+n<=0)return;const{textAlign:d=l.textAlign,fill:c=l.fill,opacity:f=l.opacity,underlineOffset:g=l.underlineOffset,underlineDash:p=l.underlineDash,fillOpacity:v=l.fillOpacity}=e.attribute,m=!Ti(u),y=m?u.width:e.clipedWidth,b=m?0:Sv(d,y),_={lineWidth:0,stroke:c,opacity:f,strokeOpacity:v};if(n){_.lineWidth=n,h.setStrokeStyle(e,_,i,r,l),p&&h.setLineDash(p),h.beginPath();const w=r+o+g;h.moveTo(i+b,w,s),h.lineTo(i+b+y,w,s),h.stroke()}if(t){_.lineWidth=t,h.setStrokeStyle(e,_,i,r,l),h.beginPath();const w=r+a;h.moveTo(i+b,w,s),h.lineTo(i+b+y,w,s),h.stroke()}}};qI=l6t([wt(),M$(0,Ce(Qi)),M$(0,Ln(TS)),h6t("design:paramtypes",[Object])],qI);function Dat(n,t,e,i){if(t&&t.length){n.moveTo(t[0].x+e,t[0].y+i);for(let r=1;r<t.length;r++)n.lineTo(t[r].x+e,t[r].y+i)}}function u6t(n,t,e,i,r,o=!0){var a;if(t.length<3)return void Dat(n,t,e,i);let s=0,l=t.length-1;o||(s+=1,l-=1,n.moveTo(t[0].x+e,t[0].y+i));for(let h=s;h<=l;h++){const u=t[h===0?l:(h-1)%t.length],d=t[h%t.length],c=t[(h+1)%t.length],f=d.x-u.x,g=d.y-u.y,p=d.x-c.x,v=d.y-c.y,m=(Math.atan2(g,f)-Math.atan2(v,p))/2,y=Math.abs(Math.tan(m));let b=Array.isArray(r)?(a=r[h%t.length])!==null&&a!==void 0?a:0:r,_=b/y;const w=L1(f,g),C=L1(p,v),x=Math.min(w,C);_>x&&(_=x,b=x*y);const S=sk(d,_,w,f,g),A=sk(d,_,C,p,v),T=2*d.x-S.x-A.x,M=2*d.y-S.y-A.y,R=L1(T,M),L=sk(d,L1(_,b),R,T,M);let B=Math.atan2(S.y-L.y,S.x-L.x);const P=Math.atan2(A.y-L.y,A.x-L.x);let k=P-B;k<0&&(B=P,k=-k),k>Math.PI&&(k-=Math.PI),h===0?n.moveTo(S.x+e,S.y+i):n.lineTo(S.x+e,S.y+i),k&&n.arcTo(d.x+e,d.y+i,A.x+e,A.y+i,b),n.lineTo(A.x+e,A.y+i)}o||n.lineTo(t[l+1].x+e,t[l+1].y+i)}function L1(n,t){return Math.sqrt(n*n+t*t)}function sk(n,t,e,i,r){const o=t/e;return{x:n.x-i*o,y:n.y-r*o}}const d6t=im,c6t=wd;var f6t=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a},g6t=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},R$=function(n,t){return function(e,i){t(e,i,n)}};let KI=class extends ko{constructor(n){super(),this.graphicRenderContributions=n,this.numberType=qM,this.builtinContributions=[c6t,d6t],this.init(n)}drawShape(n,t,e,i,r,o,a,s){const l=he(n,o?.theme).polygon,{points:h=l.points,cornerRadius:u=l.cornerRadius,x:d=l.x,y:c=l.y,closePath:f=l.closePath,fillStrokeOrder:g=l.fillStrokeOrder}=n.attribute,p=this.valid(n,l,a,s);if(!p)return;const{fVisible:v,sVisible:m,doFill:y,doStroke:b}=p;t.beginPath(),u<=0||$e(u)&&u.every((C=>C===0))?Dat(t.camera?t:t.nativeContext,h,e,i):u6t(t.camera?t:t.nativeContext,h,e,i,u,f),f&&t.closePath(),t.setShadowBlendStyle&&t.setShadowBlendStyle(n,n.attribute,l),this.beforeRenderStep(n,t,e,i,y,b,v,m,l,r,a,s);const _=()=>{y&&(a?a(t,n.attribute,l):v&&(t.setCommonStyle(n,n.attribute,d-e,c-i,l),t.fill()))},w=()=>{b&&(s?s(t,n.attribute,l):m&&(t.setStrokeStyle(n,n.attribute,d-e,c-i,l),t.stroke()))};g?(w(),_()):(_(),w()),this.afterRenderStep(n,t,e,i,y,b,v,m,l,r,a,s)}draw(n,t,e,i){const r=he(n,i?.theme).polygon;this._draw(n,r,!1,e,i)}};KI=f6t([wt(),R$(0,Ce(Qi)),R$(0,Ln(HI)),g6t("design:paramtypes",[Object])],KI);var p6t=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a},v6t=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},P$=function(n,t){return function(e,i){t(e,i,n)}};let ZI=class{constructor(n){this.groupRenderContribitions=n,this.numberType=v3}reInit(){this._groupRenderContribitions=this.groupRenderContribitions.getContributions()||[],this._groupRenderContribitions.push(b$)}drawShape(n,t,e,i,r,o,a,s,l){const{clip:h,fill:u,stroke:d,background:c}=n.attribute;if(!(h||u||d||c))return;l=l??he(n,o?.theme).group;const{opacity:f=l.opacity,width:g=l.width,height:p=l.height,fillOpacity:v=l.fillOpacity,strokeOpacity:m=l.strokeOpacity,cornerRadius:y=l.cornerRadius,path:b=l.path,lineWidth:_=l.lineWidth,visible:w=l.visible,fillStrokeOrder:C=l.fillStrokeOrder,cornerType:x=l.cornerType,x:S=l.x,y:A=l.y}=n.attribute,T=xat(f,v,g,p,u),M=Sat(f,m,g,p),R=xv(u,c),L=Pb(d,_);if(!n.valid||!w||!h&&(!R&&!L||!(T||M||a||s||c)))return;if(b&&b.length&&r.drawContribution){const E=t.disableFill,D=t.disableStroke,I=t.disableBeginPath;t.disableFill=!0,t.disableStroke=!0,t.disableBeginPath=!0,b.forEach((O=>{r.drawContribution.getRenderContribution(O).draw(O,r.renderService,r,o)})),t.disableFill=E,t.disableStroke=D,t.disableBeginPath=I}else y===0||$e(y)&&y.every((E=>E===0))?(t.beginPath(),t.rect(e,i,g,p)):(t.beginPath(),Il(t,e,i,g,p,y,x!=="bevel"));this._groupRenderContribitions||(this._groupRenderContribitions=this.groupRenderContribitions.getContributions()||[],this._groupRenderContribitions.push(b$));const B={doFill:R,doStroke:L};t.setShadowBlendStyle&&t.setShadowBlendStyle(n,n.attribute,l),this._groupRenderContribitions.forEach((E=>{E.time===Oe.beforeFillStroke&&E.drawShape(n,t,e,i,R,L,T,M,l,r,a,s,B)})),h&&t.clip();const P=()=>{B.doFill&&(a?a(t,n.attribute,l):T&&(t.setCommonStyle(n,n.attribute,S-e,A-i,l),t.fill()))},k=()=>{B.doStroke&&(s?s(t,n.attribute,l):M&&(t.setStrokeStyle(n,n.attribute,S-e,A-i,l),t.stroke()))};C?(k(),P()):(P(),k()),this._groupRenderContribitions.forEach((E=>{E.time===Oe.afterFillStroke&&E.drawShape(n,t,e,i,R,L,T,M,l,r,a,s)}))}draw(n,t,e,i){var r,o;const{context:a}=e;if(!a)return;const{clip:s,baseOpacity:l=1,drawMode:h}=n.attribute,u=a.nativeContext,d=a.canvas.nativeCanvas;if(h>0){const{x:m,y,width:b,height:_}=n.attribute,w=a.canvas,C=St.global.createCanvas({width:w.width,height:w.height,dpr:1}),x=C.getContext("2d"),S=a.nativeContext.getTransform();x.setTransform(S.a,S.b,S.c,S.d,S.e,S.f),h===1&&(x.save(),x.clearRect(0,0,w.width,w.height),x.beginPath(),x.rect(m,y,b,_),x.clip(),x.drawImage(w.nativeCanvas,0,0,w.width,w.height,0,0,w.displayWidth,w.displayHeight),x.restore()),a.nativeContext=x,w.nativeCanvas=C}s?a.save():a.highPerformanceSave();const c=a.baseGlobalAlpha;a.baseGlobalAlpha*=l;const f=a.modelMatrix;if(a.camera){const m=he(n,i?.theme).group,y=Tn.allocate(),b=Tn.allocate();Tat(b,n,m),D_(y,f||y,b),a.modelMatrix=y,Tn.free(b),a.setTransform(1,0,0,1,0,0,!0)}else a.transformFromMatrix(n.transMatrix,!0);a.beginPath(),i.skipDraw?this.drawShape(n,a,0,0,e,i,(()=>!1),(()=>!1)):this.drawShape(n,a,0,0,e,null,null,null);const{scrollX:g,scrollY:p}=n.attribute;let v;if((g||p)&&a.translate(g,p),i&&i.renderInGroup&&(v=i.renderInGroup((r=i.renderInGroupParams)===null||r===void 0?void 0:r.skipSort,n,e,(o=i.renderInGroupParams)===null||o===void 0?void 0:o.nextM)),a.modelMatrix!==f&&Tn.free(a.modelMatrix),a.modelMatrix=f,a.baseGlobalAlpha=c,h>0){const{x:m,y,width:b,height:_}=n.attribute,w=a.nativeContext,C=a.canvas.nativeCanvas;u.save(),u.setTransform(a.dpr,0,0,a.dpr,0,0,!0),h===1&&w.rect(m,y,b,_),u.drawImage(C,0,0,C.width,C.height,0,0,a.canvas.displayWidth,a.canvas.displayHeight);const x=w.getTransform();u.setTransform(x.a,x.b,x.c,x.d,x.e,x.f),a.nativeContext=u,a.canvas.nativeCanvas=d,u.restore()}v&&v.then?v.then((()=>{s?a.restore():a.highPerformanceRestore()})):s?a.restore():a.highPerformanceRestore()}};ZI=p6t([wt(),P$(0,Ce(Qi)),P$(0,Ln(ma)),v6t("design:paramtypes",[Object])],ZI);var m6t=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a},y6t=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},B$=function(n,t){return function(e,i){t(e,i,n)}};const b6t=["","repeat-x","repeat-y","repeat"];let JI=class extends ko{constructor(n){super(),this.graphicRenderContributions=n,this.numberType=YM,this.builtinContributions=[kVt,LVt],this.init(n)}drawShape(n,t,e,i,r,o,a,s){const l=he(n).image,{repeatX:h=l.repeatX,repeatY:u=l.repeatY,x:d=l.x,y:c=l.y,cornerRadius:f=l.cornerRadius,fillStrokeOrder:g=l.fillStrokeOrder,cornerType:p=l.cornerType,image:v}=n.attribute,m=this.valid(n,l,a);if(!m)return;const{fVisible:y,sVisible:b,doFill:_,doStroke:w}=m;if(!v||!n.resources)return;const C=n.resources.get(v);if(C.state!=="success")return;const x=n.width,S=n.height;t.beginPath();let A=!1;f===0||$e(f)&&f.every((R=>R===0))?t.rect(e,i,x,S):(Il(t,e,i,x,S,f,p!=="bevel"),A=!0),t.setShadowBlendStyle&&t.setShadowBlendStyle(n,n.attribute,l);const T=()=>{if(_){if(a)a(t,n.attribute,l);else if(y){t.setCommonStyle(n,n.attribute,e,i,l);let R=0;if(h==="repeat"&&(R|=1),u==="repeat"&&(R|=2),R){const L=t.createPattern(C.data,b6t[R]);t.fillStyle=L,t.translate(e,i,!0),t.fillRect(0,0,x,S),t.translate(-e,-i,!0)}else t.drawImage(C.data,e,i,x,S)}}},M=()=>{w&&(s?s(t,n.attribute,l):b&&(t.setStrokeStyle(n,n.attribute,d-e,c-i,l),t.stroke()))};g?(M(),A&&(t.save(),t.clip()),this.beforeRenderStep(n,t,e,i,_,!1,y,!1,l,r,a),T(),A&&t.restore()):(A&&(t.save(),t.clip()),this.beforeRenderStep(n,t,e,i,_,!1,y,!1,l,r,a),T(),A&&t.restore(),M()),this.afterRenderStep(n,t,e,i,_,!1,y,!1,l,r,a)}draw(n,t,e){const{image:i}=n.attribute;if(!i||!n.resources)return;const r=n.resources.get(i);if(r.state==="loading"&&bl(i))return void ai.improveImageLoading(i);if(r.state!=="success")return;const{context:o}=t.drawParams;if(!o)return;const a=he(n).image;this._draw(n,a,!1,e)}};JI=m6t([wt(),B$(0,Ce(Qi)),B$(0,Ln(Yc)),y6t("design:paramtypes",[Object])],JI);const Iat=Symbol.for("IncrementalDrawContribution"),IS=Symbol.for("ArcRender"),OS=Symbol.for("CircleRender"),co=Symbol.for("GraphicRender"),k$=Symbol.for("GroupRender"),HS=Symbol.for("LineRender"),zS=Symbol.for("PathRender"),FS=Symbol.for("PolygonRender"),NS=Symbol.for("RectRender"),WS=Symbol.for("SymbolRender"),QI=Symbol.for("TextRender"),tO=Symbol.for("RichTextRender"),eO=Symbol.for("ImageRender"),M3=Symbol.for("DrawContribution"),Oat=(n,t,e,i)=>{let r,o=!1,a=!1;if(t.forEachChildren((s=>(o=s.numberType===C4t,!o))),t.forEachChildren((s=>(a=!!s.findFace,!a))),o){const s=t.getChildren(),l=[...s];l.sort(((h,u)=>{var d,c,f,g;let p=((c=(d=h.attribute.startAngle)!==null&&d!==void 0?d:0+h.attribute.endAngle)!==null&&c!==void 0?c:0)/2,v=((g=(f=u.attribute.startAngle)!==null&&f!==void 0?f:0+u.attribute.endAngle)!==null&&g!==void 0?g:0)/2;for(;p<0;)p+=le;for(;v<0;)v+=le;return v-p})),l.forEach((h=>{h._next=null,h._prev=null})),t.removeAllChild(),t.update(),l.forEach((h=>{t.appendChild(h)})),i.hack_pieFace="outside",r=e(o,a),r&&r.graphic||(i.hack_pieFace="inside",r=e(o,a)),r&&r.graphic||(i.hack_pieFace="top",r=e(o,a)),t.removeAllChild(),s.forEach((h=>{h._next=null,h._prev=null})),s.forEach((h=>{t.appendChild(h)}))}else if(a){const s=t.getChildren(),l=s.map((h=>({ave_z:h.findFace().vertices.map((u=>{var d;return n.view(u[0],u[1],(d=u[2]+h.attribute.z)!==null&&d!==void 0?d:0)[2]})).reduce(((u,d)=>u+d),0),g:h})));l.sort(((h,u)=>u.ave_z-h.ave_z)),t.removeAllChild(),l.forEach((h=>{h.g._next=null,h.g._prev=null})),t.update(),l.forEach((h=>{t.add(h.g)})),r=e(o,a),t.removeAllChild(),s.forEach((h=>{h._next=null,h._prev=null})),t.update(),s.forEach((h=>{t.add(h)}))}else r=e(o,a);return r};var _6t=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a},C6t=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)};const Db=Symbol.for("DrawItemInterceptor"),L$=new sr,E$=new sr;class w6t{constructor(){this.order=1}afterDrawItem(t,e,i,r,o){return t.attribute.shadowRootIdx==null&&t.shadowRoot&&t.shadowRoot.attribute.shadowRootIdx<0||(t.attribute.shadowRootIdx>0||!t.attribute.shadowRootIdx||t.shadowRoot&&t.shadowRoot.attribute.shadowRootIdx>0)&&this.drawItem(t,e,i,r,o),!1}beforeDrawItem(t,e,i,r,o){return t.attribute.shadowRootIdx==null&&t.shadowRoot&&t.shadowRoot.attribute.shadowRootIdx>0||(t.attribute.shadowRootIdx<0||t.shadowRoot&&t.shadowRoot.attribute.shadowRootIdx<0)&&this.drawItem(t,e,i,r,o),!1}drawItem(t,e,i,r,o){if(!t.shadowRoot)return!1;const{context:a}=i;if(a.highPerformanceSave(),a.transformFromMatrix(t.transMatrix,!0),r.dirtyBounds&&r.backupDirtyBounds){L$.copy(r.dirtyBounds),E$.copy(r.backupDirtyBounds);const s=t.globalTransMatrix.getInverse();r.dirtyBounds.copy(r.backupDirtyBounds).transformWithMatrix(s),r.backupDirtyBounds.copy(r.dirtyBounds)}return r.renderGroup(t.shadowRoot,i,ar.allocate(1,0,0,1,0,0)),a.highPerformanceRestore(),r.dirtyBounds&&r.backupDirtyBounds&&(r.dirtyBounds.copy(L$),r.backupDirtyBounds.copy(E$)),!0}}class x6t{constructor(){this.order=1}afterDrawItem(t,e,i,r,o){return t.attribute._debug_bounds&&this.drawItem(t,e,i,r,o),!1}drawItem(t,e,i,r,o){if(!t.attribute._debug_bounds)return!1;const{context:a}=i;a.highPerformanceSave(),t.parent&&a.setTransformFromMatrix(t.parent.globalTransMatrix,!0),t.glyphHost&&t.glyphHost.parent&&a.setTransformFromMatrix(t.glyphHost.parent.globalTransMatrix,!0);const s=t.AABBBounds;return t.attribute._debug_bounds!==!0&&t.attribute._debug_bounds(a,t),a.strokeRect(s.x1,s.y1,s.width(),s.height()),a.highPerformanceRestore(),!0}}let VS=class{constructor(){this.order=1,this.interceptors=[new w6t,new A6t,new S6t,new x6t]}afterDrawItem(n,t,e,i,r){if((!n.in3dMode||e.in3dInterceptor)&&!n.shadowRoot&&!n.attribute._debug_bounds&&!(n.baseGraphic||n.attribute.globalZIndex||n.interactiveGraphic))return!1;for(let o=0;o<this.interceptors.length;o++)if(this.interceptors[o].afterDrawItem&&this.interceptors[o].afterDrawItem(n,t,e,i,r))return!0;return!1}beforeDrawItem(n,t,e,i,r){if((!n.in3dMode||e.in3dInterceptor)&&!n.shadowRoot&&!n.attribute._debug_bounds&&!(n.baseGraphic||n.attribute.globalZIndex||n.interactiveGraphic))return!1;for(let o=0;o<this.interceptors.length;o++)if(this.interceptors[o].beforeDrawItem&&this.interceptors[o].beforeDrawItem(n,t,e,i,r))return!0;return!1}};VS=_6t([wt(),C6t("design:paramtypes",[])],VS);class S6t{constructor(){this.order=1}beforeDrawItem(t,e,i,r,o){return!this.processing&&(t.baseGraphic?this.beforeDrawInteractive(t,e,i,r,o):this.beforeSetInteractive(t,e,i,r,o))}beforeSetInteractive(t,e,i,r,o){let a=t.interactiveGraphic;if(t.attribute.globalZIndex){a||(a=t.clone(),t.interactiveGraphic=a,a.baseGraphic=t),a.setAttributes({globalZIndex:0,zIndex:t.attribute.globalZIndex},!1,{skipUpdateCallback:!0}),i.stage.tryInitInteractiveLayer();const s=i.stage.getLayer("_builtin_interactive");return s&&this.getShadowRoot(s).add(a),!0}if(a){i.stage.tryInitInteractiveLayer();const s=i.stage.getLayer("_builtin_interactive");s&&this.getShadowRoot(s).removeChild(a),t.interactiveGraphic=null,a.baseGraphic=null}return!1}beforeDrawInteractive(t,e,i,r,o){const a=t.baseGraphic;let s=!!a.stage,l=a.parent;for(;s&&l&&l.stage!==l;)s=!!l.stage,l=l.parent;if(!s){const h=i.stage.getLayer("_builtin_interactive");return h&&this.getShadowRoot(h).removeChild(t),!0}if(a){this.processing=!0;const{context:h}=i;return h.highPerformanceSave(),h.setTransformFromMatrix(a.parent.globalTransMatrix,!0),a.isContainer?r.renderGroup(a,i,a.parent.globalTransMatrix):r.renderItem(a,i),h.highPerformanceRestore(),this.processing=!1,!0}return!1}getShadowRoot(t){var e;let i=t.getElementById("_interactive_group");return i||(i=Nt.CreateGraphic("group",{}),i.id="_interactive_group",t.add(i)),(e=i.shadowRoot)!==null&&e!==void 0?e:i.attachShadow()}}class A6t{constructor(){this.order=1}beforeDrawItem(t,e,i,r,o){if(!t.in3dMode||i.in3dInterceptor)return!1;i.in3dInterceptor=!0;const{context:a,stage:s}=e.drawParams;a.canvas,a.save(),this.initCanvasCtx(a),a.camera=s.camera;const l=a.currentMatrix;l.a/=a.dpr,l.b/=a.dpr,l.c/=a.dpr,l.d/=a.dpr,l.e/=a.dpr,l.f/=a.dpr;const h=Tn.allocate();PI(h,l);const u=a.modelMatrix;if(u){if(h){const d=Tn.allocate();a.modelMatrix=D_(d,u,h)}}else a.modelMatrix=h;return a.setTransform(1,0,0,1,0,0,!0),t.isContainer?Oat(a,t,((d,c)=>r.renderGroup(t,i,t.parent.globalTransMatrix,!d&&c)),i):r.renderItem(t,i),a.camera=null,a.restore(),a.modelMatrix!==u&&Tn.free(a.modelMatrix),a.modelMatrix=u,i.in3dInterceptor=!1,!0}initCanvasCtx(t){t.setTransformForCurrent()}}var T6t=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a},M6t=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},R6t=function(n,t){return function(e,i){t(e,i,n)}};let iO=class{constructor(n){this.drawContribution=n}prepare(n){n&&this.renderTreeRoots.forEach((t=>{this._prepare(t,n)}))}_prepare(n,t){n.forEachChildren((e=>{this._prepare(e,t)})),n.update({bounds:t,trans:!0})}prepareRenderList(){}beforeDraw(n){}draw(n){this.drawContribution.draw(this,Object.assign({},this.drawParams))}afterDraw(n){this.drawContribution.afterDraw&&this.drawContribution.afterDraw(this,Object.assign({},this.drawParams))}reInit(){this.drawContribution.reInit()}render(n,t){this.renderTreeRoots=n,this.drawParams=t;const e=t.updateBounds;this.prepare(e),this.prepareRenderList(),this.beforeDraw(t),this.draw(t),this.afterDraw(t),this.drawParams=null}};iO=T6t([wt(),R6t(0,Ce(M3)),M6t("design:paramtypes",[Object])],iO);const P6t=new ie((n=>{n(s3).to(iO)})),Mp=Symbol.for("PickerService"),D$=Symbol.for("GlobalPickerService"),sp=Symbol.for("PickItemInterceptor"),GS=Symbol.for("PickServiceInterceptor");var e2=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a};let $S=class{constructor(){this.order=1}afterPickItem(n,t,e,i,r){if(n.graphic){let o=n.graphic;for(;o.parent;)o=o.parent;o.shadowHost&&(n.params={shadowTarget:n.graphic},n.graphic=o.shadowHost)}return n}};$S=e2([wt()],$S);let jS=class{constructor(){this.order=1}afterPickItem(n,t,e,i,r){return n.attribute.shadowRootIdx>0||!n.attribute.shadowRootIdx?this._pickItem(n,t,e,i,r):null}beforePickItem(n,t,e,i,r){return n.attribute.shadowRootIdx<0?this._pickItem(n,t,e,i,r):null}_pickItem(n,t,e,i,r){var o;if(!n.shadowRoot)return null;const{parentMatrix:a}=r||{};if(!a)return null;const s=t.pickContext;s.highPerformanceSave();const l=(o=he(n))===null||o===void 0?void 0:o[n.type],{shadowPickMode:h=l?.shadowPickMode}=n.attribute,u=n.shadowRoot,d=ar.allocateByObj(a),c=new ci(d.a*e.x+d.c*e.y+d.e,d.b*e.x+d.d*e.y+d.f),f=t.pickGroup(u,c,d,i);return s.highPerformanceRestore(),!f.graphic&&f.group&&h==="full"&&(f.graphic=f.group),f}};jS=e2([wt()],jS);let US=class{constructor(){this.order=1}beforePickItem(n,t,e,i,r){const o=n.baseGraphic;if(o&&o.parent){const a=new ci(e.x,e.y),s=t.pickContext;s.highPerformanceSave();const l=o.parent.globalTransMatrix;l.transformPoint(a,a);const h=o.isContainer?t.pickGroup(o,a.clone(),l,i):t.pickItem(o,a.clone(),l,i);return s.highPerformanceRestore(),h}return null}};US=e2([wt()],US);let YS=class{constructor(){this.order=1}beforePickItem(n,t,e,i,r){if(!n.in3dMode||i.in3dInterceptor)return null;const o=t.pickContext,a=n.stage;if(!o||!a)return null;if(i.in3dInterceptor=!0,o.save(),this.initCanvasCtx(o),o.camera=a.camera,n.isContainer){const s=Oat(o,n,(()=>t.pickGroup(n,e,r.parentMatrix,i)),i);return o.camera=null,i.in3dInterceptor=!1,o.restore(),s}return o.restore(),null}initCanvasCtx(n){n.setTransformForCurrent()}};YS=e2([wt()],YS);const B6t=new ie(((n,t,e)=>{e(Mp)||(n(D$).toSelf(),n(Mp).toService(D$)),n(YS).toSelf().inSingletonScope(),n(sp).toService(YS),n(jS).toSelf().inSingletonScope(),n(sp).toService(jS),n(US).toSelf().inSingletonScope(),n(sp).toService(US),wr(n,sp),n($S).toSelf().inSingletonScope(),n(GS).toService($S),wr(n,GS)})),k6t=new ie((n=>{n(b3).to(FI),n(mat).toConstantValue(Nt)})),Ib=Symbol.for("AutoEnablePlugins"),Hat=Symbol.for("PluginService");var L6t=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a},E6t=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},I$=function(n,t){return function(e,i){t(e,i,n)}};let nO=class{constructor(n){this.autoEnablePlugins=n,this.onStartupFinishedPlugin=[],this.onRegisterPlugin=[],this.actived=!1}active(n,t){this.stage=n,this.actived=!0;const{pluginList:e}=t;e&&Kt.isBound(Ib)&&this.autoEnablePlugins.getContributions().forEach((i=>{e.includes(i.name)&&this.register(i)}))}findPluginsByName(n){const t=[];return this.onStartupFinishedPlugin.forEach((e=>{e.name===n&&t.push(e)})),this.onRegisterPlugin.forEach((e=>{e.name===n&&t.push(e)})),t}register(n){n.activeEvent==="onStartupFinished"?this.onStartupFinishedPlugin.push(n):n.activeEvent==="onRegister"&&(this.onRegisterPlugin.push(n),n.activate(this))}unRegister(n){n.activeEvent==="onStartupFinished"?this.onStartupFinishedPlugin.splice(this.onStartupFinishedPlugin.indexOf(n),1):n.activeEvent==="onRegister"&&this.onRegisterPlugin.splice(this.onStartupFinishedPlugin.indexOf(n),1),n.deactivate(this)}release(...n){this.onStartupFinishedPlugin.forEach((t=>{t.deactivate(this)})),this.onStartupFinishedPlugin=[],this.onRegisterPlugin.forEach((t=>{t.deactivate(this)})),this.onRegisterPlugin=[]}};nO=L6t([wt(),I$(0,Ce(Qi)),I$(0,Ln(Ib)),E6t("design:paramtypes",[Object])],nO);const D6t=new ie((n=>{n(Hat).to(nO),Z3t(n,Ib)})),I6t=new ie((n=>{wr(n,NM)})),O6t=new ie((n=>{n(Mh).to(wv).inSingletonScope(),wr(n,Mh)}));var H6t=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a},z6t=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)};let XS=class{constructor(){this.type="static",this.offscreen=!1,this.global=St.global}setDpr(n){this.canvas.dpr=n}init(n,t,e){if(this.layer=n,this.window=t,e.main)this.main=!0,this.context=t.getContext(),this.canvas=this.context.getCanvas();else{let i;this.main=!1,e.canvasId&&(i=this.global.getElementById(e.canvasId)),i||(i=this.global.createCanvas({width:t.width,height:t.height})),i.style&&(i.style["pointer-events"]="none");const r=t.getContext().getCanvas().nativeCanvas,o=wI({nativeCanvas:i,width:t.width,height:t.height,dpr:t.dpr,id:e.canvasId,canvasControled:!0,container:t.getContainer(),x:r.offsetLeft,y:r.offsetTop});o.applyPosition(),this.canvas=o,this.context=o.getContext()}}resize(n,t){this.canvas.resize(n,t)}resizeView(n,t){}render(n,t,e){var i;if(!this.main){const r=this.window.getContext().getCanvas().nativeCanvas;!r||this.canvas.x===r.offsetLeft&&this.canvas.y===r.offsetTop||(this.canvas.x=r.offsetLeft,this.canvas.y=r.offsetTop,this.canvas.applyPosition())}t.renderService.render(n,Object.assign(Object.assign({context:this.context,clear:(i=t.background)!==null&&i!==void 0?i:"#ffffff"},t),e))}merge(n){n.forEach((t=>{const e=t.getContext().canvas.nativeCanvas;this.context.drawImage(e,0,0)}))}prepare(n,t){}drawTo(n,t,e){var i;const r=n.getContext();e.renderService.render(t,Object.assign(Object.assign({context:r},e),{clear:e.clear?(i=e.background)!==null&&i!==void 0?i:"#fff":void 0}))}getContext(){return this.context}release(){this.canvas.release()}};XS=H6t([wt(),z6t("design:paramtypes",[])],XS);const F6t=new ie((n=>{n(XS).toSelf(),n(wat).toService(XS)}));function N6t(n){n.load(I6t),n.load(O6t),n.load(F6t)}var W6t=function(n,t,e,i){return new(e||(e=Promise))((function(r,o){function a(h){try{l(i.next(h))}catch(u){o(u)}}function s(h){try{l(i.throw(h))}catch(u){o(u)}}function l(h){var u;h.done?r(h.value):(u=h.value,u instanceof e?u:new e((function(d){d(u)}))).then(a,s)}l((i=i.apply(n,t||[])).next())}))};function zat(n,t,e){const i={},r=[];return n.forEachChildren((o=>{const{zIndex:a=t}=o.attribute;i[a]?i[a].push(o):(i[a]=[o],r.push(a))}),e),r.sort(((o,a)=>e?a-o:o-a)),{childMap:i,zIdxArray:r}}function Fat(n,t,e,i=!1,r=!1){let o=!1;if(r)o=!0;else{let a;n.forEachChildren(((s,l)=>{const{zIndex:h=t}=s.attribute;if(l===0)a=h;else if(a!==h)return o=!0,!0;return!1}),i)}if(o){const{childMap:a,zIdxArray:s}=zat(n,t,i);let l=!1;for(let h=0;h<s.length&&!l;h++){const u=a[s[h]];r&&u.sort(((d,c)=>{var f,g;return(i?-1:1)*(((f=c.attribute.z)!==null&&f!==void 0?f:0)-((g=d.attribute.z)!==null&&g!==void 0?g:0))}));for(let d=0;d<u.length;d++)if(e(u[d],d)){l=!0;break}}}else n.forEachChildren(e,i)}function O$(n,t,e,i=!1){return W6t(this,void 0,void 0,(function*(){yield n.forEachChildrenAsync(e,i)}))}function V6t(n,t,e,i=!1){let r=!1;n.forEachChildren(((s,l)=>{const{zIndex:h=e}=s.attribute;if(l!==0){if(h!==void 0)return r=!0,!0}return!1}),i);let o=null,a=!1;if(r){const{childMap:s,zIdxArray:l}=zat(n,e,i);let h=!1;for(let u=0;u<l.length&&!h;u++){const d=s[l[u]];for(let c=0;c<d.length;c++){if(a){h=!0,o=d[c];break}d[c]._uid!==t||(a=!0)}}}else n.forEachChildren((s=>a?(o=s,!0):(s._uid===t&&(a=!0),!1)),i);return o}var G6t=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a},$6t=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},lk=function(n,t){return function(e,i){t(e,i,n)}};let qS=class{constructor(n,t){this.contributions=n,this.drawItemInterceptorContributions=t,this._renderInGroup=(e,i,r,o)=>{var a;e?i.forEachChildren((s=>{r.break||(s.isContainer?this.renderGroup(s,r,o):this.renderItem(s,r))})):Fat(i,ji.zIndex,(s=>{r.break||(s.isContainer?this.renderGroup(s,r,o):this.renderItem(s,r))}),!1,!!(!((a=r.context)===null||a===void 0)&&a.camera))},this.currentRenderMap=new Map,this.defaultRenderMap=new Map,this.styleRenderMap=new Map,this.dirtyBounds=new wb,this.backupDirtyBounds=new wb,this.global=St.global,this.layerService=St.layerService,$e(this.contributions)||(this.contributions=[this.contributions]),this.init()}reInit(){this.init(),this.contributions.forEach((n=>{n.reInit()}))}init(){this.contributions.forEach((n=>{if(n.style){const t=this.styleRenderMap.get(n.style)||new Map;t.set(n.numberType,n),this.styleRenderMap.set(n.style,t)}else this.defaultRenderMap.set(n.numberType,n)})),this.InterceptorContributions=this.drawItemInterceptorContributions.getContributions().sort(((n,t)=>n.order-t.order))}prepareForDraw(n,t){t.updateBounds?this.useDirtyBounds=!0:this.useDirtyBounds=!t.stage.params.optimize.disableCheckGraphicWidthOutRange}draw(n,t){var e;this.prepareForDraw(n,t),t.drawContribution=this,this.currentRenderMap=this.styleRenderMap.get(t.renderStyle)||this.defaultRenderMap,this.currentRenderService=n;const{context:i,stage:r,viewBox:o,transMatrix:a}=t;if(!i)return;const s=this.dirtyBounds.setValue(0,0,o.width(),o.height());if(r.dirtyBounds&&!r.dirtyBounds.empty()){const h=bNt(s,r.dirtyBounds);s.x1=Math.floor(h.x1),s.y1=Math.floor(h.y1),s.x2=Math.ceil(h.x2),s.y2=Math.ceil(h.y2)}const l=i.dpr%1;(l||l!==.5)&&(s.x1=Math.floor(s.x1*i.dpr)/i.dpr,s.y1=Math.floor(s.y1*i.dpr)/i.dpr,s.x2=Math.ceil(s.x2*i.dpr)/i.dpr,s.y2=Math.ceil(s.y2*i.dpr)/i.dpr),this.backupDirtyBounds.copy(s),i.reset(!1),i.save(),i.setClearMatrix(a.a,a.b,a.c,a.d,a.e,a.f),i.clearMatrix(!1),i.translate(o.x1,o.y1,!0),i.beginPath(),i.rect(s.x1,s.y1,s.width(),s.height()),i.clip(),r.camera&&(this.dirtyBounds.setValue(-1/0,-1/0,1/0,1/0),this.backupDirtyBounds.setValue(-1/0,-1/0,1/0,1/0)),this.clearScreen(n,i,t),!((e=n.drawParams)===null||e===void 0)&&e.stage&&n.drawParams.stage.hooks.afterClearScreen.call(n.drawParams),n.renderTreeRoots.sort(((h,u)=>{var d,c;return((d=h.attribute.zIndex)!==null&&d!==void 0?d:ji.zIndex)-((c=u.attribute.zIndex)!==null&&c!==void 0?c:ji.zIndex)})).forEach((h=>{h.isContainer?this.renderGroup(h,t,ar.allocate(1,0,0,1,0,0)):this.renderItem(h,t)})),i.restore(),i.draw()}doRegister(){throw new Error("")}_findNextGraphic(n){let t=n.parent,e=n._uid;for(;t;){const i=V6t(t,e,ji.zIndex);if(i)return i;e=t._uid,t=t.parent}return null}renderGroup(n,t,e,i){if(t.break||n.attribute.visibleAll===!1)return;if(n.incremental&&(t.startAtId==null||t.startAtId===n._uid))return t.break=!0,void this._increaseRender(n,t);if(this.useDirtyBounds&&!a7(n.AABBBounds,this.dirtyBounds)&&n.attribute.boundsMode!=="empty")return;let r,o=e;if(this.useDirtyBounds){r=DS.allocateByObj(this.dirtyBounds);const a=n.transMatrix;o=ar.allocateByObj(e).multiply(a.a,a.b,a.c,a.d,a.e,a.f),this.dirtyBounds.copy(this.backupDirtyBounds).transformWithMatrix(o.getInverse())}t.isGroupScroll=!(!n.attribute.scrollX&&!n.attribute.scrollY),this.renderItem(n,t,{renderInGroupParams:{skipSort:i,nextM:o},renderInGroup:this._renderInGroup}),this.useDirtyBounds&&(this.dirtyBounds.copy(r),DS.free(r),ar.free(o))}_increaseRender(n,t){const{layer:e,stage:i}=t,{subLayers:r}=e;let o=r.get(n._uid);o||(o={layer:this.layerService.createLayer(i),zIndex:r.size,group:n},r.set(n._uid,o));const a=o.layer.getNativeHandler().getContext(),s=o.drawContribution||Kt.get(Iat);s.dirtyBounds.setValue(-1/0,-1/0,1/0,1/0),s.backupDirtyBounds.setValue(-1/0,-1/0,1/0,1/0),s.draw(this.currentRenderService,Object.assign(Object.assign({},t),{drawContribution:s,clear:"transparent",layer:o.layer,context:a,startAtId:n._uid,break:!1})),o.drawContribution=s;const l=this._findNextGraphic(n);if(l)if(l.isContainer&&l.incremental)this._increaseRender(l,t);else{let h=r.get(l._uid);h||(h={layer:this.layerService.createLayer(i),zIndex:r.size},r.set(l._uid,h));const u=h.layer.getNativeHandler().getContext();this.draw(this.currentRenderService,Object.assign(Object.assign({},t),{drawContribution:s,clear:"transparent",layer:h.layer,context:u,startAtId:l._uid,break:!1}))}}getRenderContribution(n){let t;return t||(t=this.selectRenderByNumberType(n.numberType,n)),t||(t=this.selectRenderByType(n.type)),t}renderItem(n,t,e){if(this.InterceptorContributions.length)for(let s=0;s<this.InterceptorContributions.length;s++){const l=this.InterceptorContributions[s];if(l.beforeDrawItem&&l.beforeDrawItem(n,this.currentRenderService,t,this,e))return}const i=this.getRenderContribution(n);if(!i)return;let r,o=!1;if(t.isGroupScroll){const{scrollX:s=0,scrollY:l=0}=n.parent.attribute;o=!0,this.scrollMatrix||(this.scrollMatrix=ar.allocate(1,0,0,1,0,0)),this.scrollMatrix.translate(-s,-l)}if(o&&(r=this.dirtyBounds.clone().transformWithMatrix(this.scrollMatrix)),this.useDirtyBounds&&!n.isContainer&&n.attribute.boundsMode!=="empty"&&!a7(n.AABBBounds,r??this.dirtyBounds)){if(o&&n.parent){const{scrollX:s=0,scrollY:l=0}=n.parent.attribute;this.scrollMatrix&&this.scrollMatrix.translate(s,l)}return}const a=t.startAtId!=null&&n._uid!==t.startAtId;if(n._uid===t.startAtId&&(t.startAtId=null),e&&(e.skipDraw=a),a?n.isContainer&&i.draw(n,this.currentRenderService,t,e):i.draw(n,this.currentRenderService,t,e),o&&n.parent){const{scrollX:s=0,scrollY:l=0}=n.parent.attribute;this.scrollMatrix&&this.scrollMatrix.translate(s,l)}if(this.InterceptorContributions.length)for(let s=0;s<this.InterceptorContributions.length;s++){const l=this.InterceptorContributions[s];if(l.afterDrawItem&&l.afterDrawItem(n,this.currentRenderService,t,this))return}}selectRenderByType(n){return bo.getInstance().warn(""),null}selectRenderByNumberType(n,t){let e;if(t.attribute.renderStyle){const i=this.styleRenderMap.get(t.attribute.renderStyle);e=i&&i.get(n)}return e||this.currentRenderMap.get(n)||this.defaultRenderMap.get(n)}clearScreen(n,t,e){var i,r,o;const{clear:a,viewBox:s}=e,l=s.width(),h=s.height();if(a){t.clearRect(0,0,l,h),!((i=n.drawParams)===null||i===void 0)&&i.stage&&n.drawParams.stage.hooks.afterClearRect.call(n.drawParams);const u=(r=n.drawParams)===null||r===void 0?void 0:r.stage;if(u&&(t.globalAlpha=(o=u.attribute.opacity)!==null&&o!==void 0?o:1),u&&u.backgroundImg&&u.resources){const d=u.resources.get(a);d&&d.state==="success"&&d.data&&t.drawImage(d.data,0,0,l,h)}else t.fillStyle=_S(t,a,{AABBBounds:{x1:0,y1:0,x2:0+l,y2:0+h}},0,0),t.fillRect(0,0,l,h)}}afterDraw(n,t){}};qS=G6t([wt(),lk(0,kot(co)),lk(1,Ce(Qi)),lk(1,Ln(Db)),$6t("design:paramtypes",[Array,Object])],qS);var j6t=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a};let KS=class extends Eb{constructor(){super(...arguments),this.numberType=E_}drawShape(n,t,e,i,r,o,a,s){if(n.incremental&&r.multiGraphicOptions){const{startAtIdx:l,length:h}=r.multiGraphicOptions,{segments:u=[]}=n.attribute;if(l>u.length)return;const d=he(n).line,{fill:c=d.fill,stroke:f=d.stroke,opacity:g=d.opacity,fillOpacity:p=d.fillOpacity,strokeOpacity:v=d.strokeOpacity,lineWidth:m=d.lineWidth,visible:y=d.visible}=n.attribute,b=zf(g,p,c),_=LI(g,v),w=xv(c),C=Pb(f,m);if(!n.valid||!y||!w&&!C||!(b||_||a||s))return;const{context:x}=r;for(let S=l;S<l+h;S++)this.drawIncreaseSegment(n,x,u[S-1],u[S],n.attribute.segments[S],[d,n.attribute],e,i)}else super.drawShape(n,t,e,i,r,o,a,s)}drawIncreaseSegment(n,t,e,i,r,o,a,s){i&&(t.beginPath(),$Vt(t.nativeContext,e,i,{offsetX:a,offsetY:s}),t.setShadowBlendStyle&&t.setShadowBlendStyle(n,r,o),t.setStrokeStyle(n,r,a,s,o),t.stroke())}};KS=j6t([wt()],KS);var U6t=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a};let rO=class extends XI{constructor(){super(...arguments),this.numberType=p3}drawShape(n,t,e,i,r,o,a){if(n.incremental&&r.multiGraphicOptions){const{startAtIdx:s,length:l}=r.multiGraphicOptions,{segments:h=[]}=n.attribute;if(s>h.length)return;const u=he(n).area,{fill:d=u.fill,fillOpacity:c=u.fillOpacity,opacity:f=u.opacity,visible:g=u.visible}=n.attribute,p=zf(f,c,d),v=xv(d);if(!n.valid||!g||!v||!p&&!a)return;for(let m=s;m<s+l;m++)this.drawIncreaseSegment(n,t,h[m-1],h[m],n.attribute.segments[m],[u,n.attribute],e,i)}else super.drawShape(n,t,e,i,r,o,a)}drawIncreaseSegment(n,t,e,i,r,o,a,s){i&&(t.beginPath(),jVt(t.camera?t:t.nativeContext,e,i,{offsetX:a,offsetY:s}),t.setShadowBlendStyle&&t.setShadowBlendStyle(n,r,o),t.setCommonStyle(n,r,a,s,o),t.fill())}};rO=U6t([wt()],rO);var lp,Y6t=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a},X6t=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},t0=function(n,t){return function(e,i){t(e,i,n)}},js=function(n,t,e,i){return new(e||(e=Promise))((function(r,o){function a(h){try{l(i.next(h))}catch(u){o(u)}}function s(h){try{l(i.throw(h))}catch(u){o(u)}}function l(h){var u;h.done?r(h.value):(u=h.value,u instanceof e?u:new e((function(d){d(u)}))).then(a,s)}l((i=i.apply(n,t||[])).next())}))};(function(n){n[n.NORMAL=0]="NORMAL",n[n.STOP=1]="STOP"})(lp||(lp={}));let oO=class extends qS{constructor(n,t,e,i){super(n,i),this.contributions=n,this.lineRender=t,this.areaRender=e,this.drawItemInterceptorContributions=i,this.rendering=!1,this.currFrameStartAt=0,this.currentIdx=0,this.status=lp.NORMAL,this.checkingForDrawPromise=null,this.hooks={completeDraw:new Ir([])},this.defaultRenderMap.set(this.lineRender.numberType,this.lineRender),this.defaultRenderMap.set(this.areaRender.numberType,this.areaRender)}draw(n,t){return js(this,void 0,void 0,(function*(){if(this.checkingForDrawPromise)return;this.lastRenderService=n,this.lastDrawContext=t,this.checkingForDrawPromise=this.checkForDraw(t);const e=yield this.checkingForDrawPromise;if(this.checkingForDrawPromise=null,e)return;this.currentRenderService=n;const{context:i,viewBox:r}=t;i&&(i.inuse=!0,i.clearMatrix(),i.setTransformForCurrent(!0),i.save(),t.restartIncremental&&this.clearScreen(this.currentRenderService,i,t),i.translate(r.x1,r.y1,!0),i.save(),n.renderTreeRoots.sort(((o,a)=>{var s,l;return((s=o.attribute.zIndex)!==null&&s!==void 0?s:ji.zIndex)-((l=a.attribute.zIndex)!==null&&l!==void 0?l:ji.zIndex)})).forEach((o=>{this.renderGroup(o,t)})),this.hooks.completeDraw.tap("top-draw",(()=>{i.restore(),i.restore(),i.draw(),i.inuse=!1,this.rendering=!1})))}))}_increaseRender(n,t){return js(this,void 0,void 0,(function*(){this.rendering=!0,yield this._renderIncrementalGroup(n,t)}))}_renderIncrementalGroup(n,t){return js(this,void 0,void 0,(function*(){this.count=n.count,yield new Promise((e=>{this.renderItem(n,t,{drawingCb:()=>js(this,void 0,void 0,(function*(){if(n.count!==2)yield O$(n,ji.zIndex,((i,r)=>{if(this.status===lp.STOP)return!0;if(i.isContainer||r<this.currentIdx)return!1;const o=this.currFrameStartAt+n.incremental;return r<o&&(this.currentIdx=r+1,this.renderItem(i,t)),r===o-1&&(this.currFrameStartAt=this.currentIdx,this.waitToNextFrame())})),e(!1);else{const i=n.getChildAt(0);if(i.incremental&&i.attribute.segments)for(i.incrementalAt||(i.incrementalAt=0);i.incrementalAt<i.attribute.segments.length;)t.multiGraphicOptions={startAtIdx:i.incrementalAt,length:i.incremental},this.renderItem(i,t),i.incrementalAt+=i.incremental,yield this.waitToNextFrame();else this.renderItem(i,t);e(!1)}}))})})),this.hooks.completeDraw.call()}))}waitToNextFrame(){return js(this,void 0,void 0,(function*(){return new Promise((n=>{this.global.getRequestAnimationFrame()((()=>{n(!1)}))}))}))}checkForDraw(n){return js(this,void 0,void 0,(function*(){let t=this.rendering;return n.restartIncremental&&(t=!1,yield this.forceStop(),this.resetToInit()),t}))}forceStop(){return js(this,void 0,void 0,(function*(){this.rendering&&(this.status=lp.STOP,yield new Promise((n=>{this.hooks.completeDraw.tap("stopCb",(()=>{this.status=lp.NORMAL,this.hooks.completeDraw.taps=this.hooks.completeDraw.taps.filter((t=>t.name!=="stopCb")),n(!1)}))})))}))}resetToInit(){this.currFrameStartAt=0,this.currentIdx=0}renderGroup(n,t){return js(this,void 0,void 0,(function*(){if(!t.break&&n.attribute.visibleAll!==!1)return n.incremental&&t.startAtId===n._uid?(yield this._increaseRender(n,t),void(t.break=!0)):void(yield new Promise((e=>{this.renderItem(n,t,{drawingCb:()=>js(this,void 0,void 0,(function*(){yield O$(n,ji.zIndex,(i=>js(this,void 0,void 0,(function*(){t.break||i.isContainer&&(yield this.renderGroup(i,t))})))),e(!1)}))})})))}))}};oO=Y6t([wt(),t0(0,kot(co)),t0(1,Ce(KS)),t0(2,Ce(rO)),t0(3,Ce(Qi)),t0(3,Ln(Db)),X6t("design:paramtypes",[Array,Object,Object,Object])],oO);const q6t=new ie((n=>{n(t2).toSelf().inSingletonScope(),n(T3).toSelf().inSingletonScope(),n(M3).to(qS),n(Iat).to(oO),n(k$).to(ZI).inSingletonScope(),n(co).toService(k$),wr(n,ma),n(Ps).toSelf().inSingletonScope(),wr(n,S3),wr(n,co),n(VS).toSelf().inSingletonScope(),n(Db).toService(VS),wr(n,Db)}));function K6t(n){n.load(q6t)}function Ob(){Ob.__loaded||(Ob.__loaded=!0,Kt.load(j4t),Kt.load(k6t),Kt.load(P6t),Kt.load(B6t),Kt.load(D6t),N6t(Kt),K6t(Kt))}Ob.__loaded=!1,Ob();const jt=Kt.get(a3);St.global=jt;const Z6t=Kt.get(Cat);St.graphicUtil=Z6t;const J6t=Kt.get(_at);St.transformUtil=J6t;const Q6t=Kt.get(b3);St.graphicService=Q6t;const tGt=Kt.get(x3);St.layerService=tGt;class eGt{constructor(){this.name="AutoRenderPlugin",this.activeEvent="onRegister",this._uid=pn.GenAutoIncrementId(),this.key=this.name+this._uid,this.handleChange=t=>{t.glyphHost&&(t=t.glyphHost),t.stage===this.pluginService.stage&&t.stage!=null&&t.stage.renderNextFrame()}}activate(t){this.pluginService=t;const e=this.pluginService.stage;e&&(e.graphicService.hooks.onAttributeUpdate.tap(this.key,this.handleChange),e.graphicService.hooks.onSetStage.tap(this.key,this.handleChange),e.graphicService.hooks.onRemove.tap(this.key,this.handleChange))}deactivate(t){const e=r=>r.filter((o=>o.name!==this.key)),i=this.pluginService.stage;i&&(i.graphicService.hooks.onAttributeUpdate.taps=e(i.graphicService.hooks.onAttributeUpdate.taps),i.graphicService.hooks.onSetStage.taps=e(i.graphicService.hooks.onSetStage.taps),i.graphicService.hooks.onRemove.taps=e(i.graphicService.hooks.onRemove.taps))}}class iGt{constructor(){this.name="AutoRefreshPlugin",this.activeEvent="onRegister",this._uid=pn.GenAutoIncrementId(),this.key=this.name+this._uid,this.handleChange=t=>{t.glyphHost&&(t=t.glyphHost),t.stage===this.pluginService.stage&&t.stage!=null&&t.stage.renderNextFrame()}}activate(t){this.pluginService=t,this.dpr=St.global.devicePixelRatio,this.refresh()}refresh(){this._refreshByMediaQuery()||this._refreshByRaf()}_refreshByRaf(){const t=St.global.getRequestAnimationFrame();this.rafId=t((()=>{St.global.devicePixelRatio!==this.dpr&&(this.dpr=St.global.devicePixelRatio,this.pluginService.stage.setDpr(this.dpr,!0)),this.refresh()}))}_refreshByMediaQuery(){try{const t=`(resolution: ${window.devicePixelRatio}dppx)`,e=()=>{window.devicePixelRatio!==this.dpr&&(this.dpr=window.devicePixelRatio,this.pluginService.stage.setDpr(this.dpr,!0))},i=matchMedia(t);i&&i.addEventListener("change",e),this.autoRefreshCbs||(this.autoRefreshCbs=[]),this.autoRefreshCbs.push((()=>{i&&i.removeEventListener("change",e)}))}catch{return!1}return!0}deactivate(t){var e;const i=St.global.getCancelAnimationFrame();i&&this.rafId&&i(this.rafId),(e=this.autoRefreshCbs)===null||e===void 0||e.forEach((r=>{r()})),this.autoRefreshCbs=void 0}}class nGt{constructor(){this.name="IncrementalAutoRenderPlugin",this.activeEvent="onRegister",this.nextFrameRenderGroupSet=new Set,this.willNextFrameRender=!1,this.nextUserParams={},this._uid=pn.GenAutoIncrementId(),this.key=this.name+this._uid}activate(t){this.pluginService=t;const e=this.pluginService.stage;e&&(e.graphicService.hooks.onAddIncremental.tap(this.key,((i,r,o)=>{i.glyphHost&&(i=i.glyphHost),i.stage===t.stage&&i.stage!=null&&(this.nextUserParams.startAtId=r._uid,this.renderNextFrame(r))})),e.graphicService.hooks.onClearIncremental.tap(this.key,((i,r)=>{i.stage===t.stage&&i.stage!=null&&(this.nextUserParams.startAtId=i._uid,this.nextUserParams.restartIncremental=!0,this.renderNextFrame(i))})))}deactivate(t){const e=this.pluginService.stage;e&&(e.graphicService.hooks.onAddIncremental.taps=e.graphicService.hooks.onAddIncremental.taps.filter((i=>i.name!==this.key)),e.graphicService.hooks.onClearIncremental.taps=e.graphicService.hooks.onClearIncremental.taps.filter((i=>i.name!==this.key)))}renderNextFrame(t){this.nextFrameRenderGroupSet.add(t),this.willNextFrameRender||(this.willNextFrameRender=!0,St.global.getRequestAnimationFrame()((()=>{this._doRenderInThisFrame(),this.willNextFrameRender=!1})))}_doRenderInThisFrame(){const t=this.pluginService.stage;this.nextFrameRenderGroupSet.size&&(this.nextFrameRenderGroupSet.forEach((e=>{const i=e.layer;if(!i||!e.layer.subLayers)return;const r=e.layer.subLayers.get(e._uid);r&&r.drawContribution&&r.drawContribution.draw(t.renderService,Object.assign({stage:t,layer:i,viewBox:t.window.getViewBox(),transMatrix:t.window.getViewBoxTransform(),clear:"transparent",renderService:t.renderService,updateBounds:!1,startAtId:e._uid,context:r.layer.getNativeHandler().getContext()},this.nextUserParams))})),this.nextUserParams={},this.nextFrameRenderGroupSet.clear())}}const H$=new sr;class rGt{constructor(){this.name="DirtyBoundsPlugin",this.activeEvent="onRegister",this._uid=pn.GenAutoIncrementId(),this.key=this.name+this._uid}activate(t){this.pluginService=t,t.stage.hooks.afterRender.tap(this.key,(i=>{i&&i===this.pluginService.stage&&i.dirtyBounds.clear()}));const e=this.pluginService.stage;e&&(e.graphicService.hooks.beforeUpdateAABBBounds.tap(this.key,((i,r,o,a)=>{i.glyphHost&&(i=i.glyphHost),r&&r===this.pluginService.stage&&r.renderCount&&(i.isContainer&&!i.shouldSelfChangeUpdateAABBBounds()||o&&(H$.setValue(a.x1,a.y1,a.x2,a.y2),r.dirty(H$,i.parent&&i.parent.globalTransMatrix)))})),e.graphicService.hooks.afterUpdateAABBBounds.tap(this.key,((i,r,o,a,s)=>{r&&r===this.pluginService.stage&&r.renderCount&&(i.isContainer&&!s||r.dirty(a.globalAABBBounds))})),e.graphicService.hooks.clearAABBBounds.tap(this.key,((i,r,o)=>{r&&r===this.pluginService.stage&&r.renderCount&&r&&r.dirty(o)})),e.graphicService.hooks.onRemove.tap(this.key,(i=>{const r=i.stage;r&&r===this.pluginService.stage&&r.renderCount&&r&&r.dirty(i.globalAABBBounds)})))}deactivate(t){const e=this.pluginService.stage;e&&(e.graphicService.hooks.beforeUpdateAABBBounds.taps=e.graphicService.hooks.beforeUpdateAABBBounds.taps.filter((i=>i.name!==this.key)),e.graphicService.hooks.afterUpdateAABBBounds.taps=e.graphicService.hooks.afterUpdateAABBBounds.taps.filter((i=>i.name!==this.key)),e.graphicService.hooks.clearAABBBounds.taps=e.graphicService.hooks.clearAABBBounds.taps.filter((i=>i.name!==this.key)),e.hooks.afterRender.taps=e.hooks.afterRender.taps.filter((i=>i.name!==this.key)),e.graphicService.hooks.onRemove.taps=e.graphicService.hooks.onRemove.taps.filter((i=>i.name!==this.key)))}}let kc;function Nat(){if(kc==null)try{const n=document.createElement("canvas"),t=n.getContext("2d");kc=!!(window&&n.getBoundingClientRect&&requestAnimationFrame&&window.devicePixelRatio&&t&&t.isPointInPath&&t.isPointInStroke),kc&&(kc=!!document.createElement)}catch{kc=!1}}function R3(){Nat();const n=St.global&&St.global.env;return n?n==="browser":kc}function oGt(){Nat();const n=St.global&&St.global.env;return n?n==="node":!kc}let xu=class aO{static registerPlugin(t,e){aO._pluginClasses[t]=e}static getPlugin(t){return aO._pluginClasses[t]}};xu._pluginClasses={};const z$={BACKGROUND:"white"};class aGt extends _e{set viewBox(t){this.window.setViewBox(t)}get viewBox(){return this.window.getViewBox()}get x(){return this.window.getViewBox().x1}set x(t){const e=this.window.getViewBox();e.translate(t-e.x1,0),this.window.setViewBox(e)}get y(){return this.window.getViewBox().y1}set y(t){const e=this.window.getViewBox();e.translate(0,t-e.y1),this.window.setViewBox(e)}get width(){return this.window.width}set width(t){this.resize(t,this.height)}get viewWidth(){return this.window.getViewBox().width()}set viewWidth(t){this.resizeView(t,this.viewHeight)}get viewHeight(){return this.window.getViewBox().height()}set viewHeight(t){this.resizeView(this.viewWidth,t)}get height(){return this.window.height}set height(t){this.resize(this.width,t)}get dpr(){return this.window.dpr}set dpr(t){this.setDpr(t)}get background(){var t;return(t=this._background)!==null&&t!==void 0?t:z$.BACKGROUND}set background(t){this._background=t}get defaultLayer(){return this.at(0)}get eventSystem(){return this._eventSystem}get ticker(){return this._ticker}set ticker(t){t.bindStage(this),this._ticker&&this._ticker.removeListener("tick",this.afterTickCb),t.addTimeline(this.timeline),this._ticker=t,this._ticker.on("tick",this.afterTickCb)}constructor(t={}){var e,i;super({}),this.tickedBeforeRender=!0,this._onVisibleChange=r=>{if(!(this._skipRender<0))if(r){if(this.dirtyBounds){const o=this.window.getViewBox();this.dirtyBounds.setValue(o.x1,o.y1,o.width(),o.height())}this._skipRender>1&&this.renderNextFrame(),this._skipRender=0}else this._skipRender=1},this.beforeRender=r=>{this._beforeRenderList.forEach((o=>o(r)))},this.afterClearScreen=r=>{this._afterClearScreen&&this._afterClearScreen(r)},this.afterClearRect=r=>{this._afterClearRect&&this._afterClearRect(r)},this.afterRender=r=>{this.renderCount++,this._afterRenderList.forEach((o=>o(r))),this._afterNextRenderCbs&&this._afterNextRenderCbs.forEach((o=>o(r))),this._afterNextRenderCbs=null,this.tickedBeforeRender=!1},this.afterTickCb=()=>{this.tickedBeforeRender=!0,this.state!=="rendering"&&this.renderNextFrame()},this.params=t,this.theme=new Rb,this.hooks={beforeRender:new Ir(["stage"]),afterRender:new Ir(["stage"]),afterClearScreen:new Ir(["stage"]),afterClearRect:new Ir(["stage"])},this.global=St.global,!this.global.env&&R3()&&this.global.setEnv("browser"),this.window=Kt.get(Mb),this.renderService=Kt.get(s3),this.pluginService=Kt.get(Hat),this.layerService=Kt.get(x3),this.graphicService=Kt.get(b3),this.pluginService.active(this,t),this._beforeRenderList=[],this._afterRenderList=[],this.window.create({width:t.width,height:t.height,viewBox:t.viewBox,container:t.container,dpr:t.dpr||this.global.devicePixelRatio,canvasControled:t.canvasControled!==!1,title:t.title||"",canvas:t.canvas}),this.state="normal",this.renderCount=0,this.tryInitEventSystem(),this._background=(e=t.background)!==null&&e!==void 0?e:z$.BACKGROUND,this.appendChild(this.layerService.createLayer(this,{main:!0})),this.nextFrameRenderLayerSet=new Set,this.willNextFrameRender=!1,this.stage=this,this.renderStyle=t.renderStyle,t.autoRender&&this.enableAutoRender(),t.autoRefresh&&this.enableAutoRefresh(),t.disableDirtyBounds===!1&&this.enableDirtyBounds(),t.enableHtmlAttribute&&this.enableHtmlAttribute(t.enableHtmlAttribute),t.ReactDOM&&this.enableReactAttribute(t.ReactDOM),t.enableLayout&&this.enableLayout(),this.hooks.beforeRender.tap("constructor",this.beforeRender),this.hooks.afterRender.tap("constructor",this.afterRender),t.beforeRender&&this._beforeRenderList.push(t.beforeRender),t.afterRender&&this._afterRenderList.push(t.afterRender),this.hooks.afterClearScreen.tap("constructor",this.afterClearScreen),this.hooks.afterClearRect.tap("constructor",this.afterClearRect),this._afterClearScreen=t.afterClearScreen,this._afterClearRect=t.afterClearRect,this.supportInteractiveLayer=t.interactiveLayer!==!1,t.optimize||(t.optimize={tickRenderMode:"effect"}),this.optmize(t.optimize),t.background&&bl(this._background)&&this._background.includes("/")&&this.setAttributes({background:this._background}),this.initAnimate(t),this.rafId=(i=t.rafId)!==null&&i!==void 0?i:Math.floor(6*Math.random())}initAnimate(t){var e;this.createTicker&&this.createTimeline&&(this._ticker=t.ticker||this.createTicker(this),this._ticker.bindStage(this),((e=this.params.optimize)===null||e===void 0?void 0:e.tickRenderMode)==="performance"&&this._ticker.setFPS(30),this.timeline=this.createTimeline(),this._ticker.addTimeline(this.timeline),this._ticker.on("tick",this.afterTickCb))}startAnimate(){this._ticker&&this.timeline&&(this._ticker.start(),this.timeline.resume())}pauseRender(t=-1){this._skipRender=t}resumeRender(){this._skipRender=0}tryInitEventSystem(){this.global.supportEvent&&!this._eventSystem&&(this._eventSystem=new oWt(Object.assign({targetElement:this.window,resolution:this.window.dpr||this.global.devicePixelRatio,rootNode:this,global:this.global,supportsPointerEvents:this.params.supportsPointerEvents,supportsTouchEvents:this.params.supportsTouchEvents},this.params.event)))}preventRender(t){t?this._skipRender=-1/0:this.params.optimize.skipRenderWithOutRange!==!1?this._skipRender=this.window.isVisible()?0:1:this._skipRender=0}optmize(t){this.optmizeRender(t.skipRenderWithOutRange),this.params.optimize=t}optmizeRender(t=!1){t&&(this._skipRender=this._skipRender<0?this._skipRender:this.window.isVisible()?0:1,this.window.onVisibleChange(this._onVisibleChange))}getTimeline(){return this.timeline}get3dOptions(t){const{center:e={x:this.width/2,y:this.height/2,z:0,dx:0,dy:0,dz:0},light:i={},alpha:r=0,beta:o=0,camera:a,fieldRatio:s=1,fieldDepth:l}=t;return Object.assign(Object.assign({},t),{center:e,light:i,alpha:r,beta:o,camera:a,fieldRatio:s,fieldDepth:l})}set3dOptions(t){var e,i,r,o,a,s;this.option3d=t;const l=this.get3dOptions(t),{light:h,center:u,camera:d,alpha:c,beta:f,fieldRatio:g,fieldDepth:p}=l,{dir:v=[1,1,-1],color:m="white",ambient:y}=h,b=((e=u.x)!==null&&e!==void 0?e:this.width/2)+((i=u.dx)!==null&&i!==void 0?i:0),_=((r=u.y)!==null&&r!==void 0?r:this.height/2)+((o=u.dy)!==null&&o!==void 0?o:0),w=[b,_,((a=u.z)!==null&&a!==void 0?a:0)+((s=u.dz)!==null&&s!==void 0?s:0)];let C=0,x=0,S=0;d||(C=Math.sin(c)+b,x=Math.sin(f)+_,S=Math.cos(c)*Math.cos(f)*1);const A=xu.getPlugin("DirectionalLight");A&&(this.light=new A(v,m,y));const T={left:0,right:this.width,top:0,bottom:this.height,fieldRatio:g,fieldDepth:p,viewParams:{pos:[C,x,S],center:w,up:[0,1,0]}};if(this.camera)this.camera.params=T;else{const M=xu.getPlugin("OrthoCamera");M&&(this.camera=new M(T))}t.enableView3dTransform&&this.enableView3dTransform()}setBeforeRender(t){this._beforeRenderList.push(t)}removeBeforeRender(t){this._beforeRenderList=this._beforeRenderList.filter((e=>e!==t))}setAfterRender(t){this._afterRenderList.push(t)}removeAfterRender(t){this._afterRenderList=this._afterRenderList.filter((e=>e!==t))}afterNextRender(t){this._afterNextRenderCbs||(this._afterNextRenderCbs=[]),this._afterNextRenderCbs.push(t)}enableView3dTransform(){if(this.view3dTranform)return;this.view3dTranform=!0;const t=xu.getPlugin("ViewTransform3dPlugin");t&&this.pluginService.register(new t)}disableView3dTranform(){this.view3dTranform&&(this.view3dTranform=!1,this.pluginService.findPluginsByName("ViewTransform3dPlugin").forEach((t=>{this.pluginService.unRegister(t)})))}enableAutoRender(){this.autoRender||(this.autoRender=!0,this.pluginService.register(new eGt))}disableAutoRender(){this.autoRender&&(this.autoRender=!1,this.pluginService.findPluginsByName("AutoRenderPlugin").forEach((t=>{this.pluginService.unRegister(t)})))}enableAutoRefresh(){this.autoRefresh||(this.autoRefresh=!0,this.pluginService.register(new iGt))}disableAutoRefresh(){this.autoRefresh&&(this.autoRefresh=!1,this.pluginService.findPluginsByName("AutoRefreshPlugin").forEach((t=>{this.pluginService.unRegister(t)})))}enableIncrementalAutoRender(){this.increaseAutoRender||(this.increaseAutoRender=!0,this.pluginService.register(new nGt))}disableIncrementalAutoRender(){this.increaseAutoRender&&(this.increaseAutoRender=!1,this.pluginService.findPluginsByName("IncrementalAutoRenderPlugin").forEach((t=>{this.pluginService.unRegister(t)})))}enableDirtyBounds(){if(this.dirtyBounds)return;this.dirtyBounds=new wb;let t=this.pluginService.findPluginsByName("DirtyBoundsPlugin")[0];t?t.activate(this.pluginService):(t=new rGt,this.pluginService.register(t))}disableDirtyBounds(){this.dirtyBounds&&(this.dirtyBounds=null,this.pluginService.findPluginsByName("DirtyBoundsPlugin").forEach((t=>{this.pluginService.unRegister(t)})))}enableLayout(){if(this._enableLayout)return;this._enableLayout=!0;const t=xu.getPlugin("FlexLayoutPlugin");t&&this.pluginService.register(new t)}disableLayout(){this._enableLayout&&(this._enableLayout=!1,this.pluginService.findPluginsByName("FlexLayoutPlugin").forEach((t=>{this.pluginService.unRegister(t)})))}enableHtmlAttribute(t){if(this.htmlAttribute)return;const e=xu.getPlugin("HtmlAttributePlugin");e&&(this.htmlAttribute=t,this.pluginService.register(new e))}disableHtmlAttribute(){this.htmlAttribute&&(this.htmlAttribute=!1,this.pluginService.findPluginsByName("HtmlAttributePlugin").forEach((t=>{this.pluginService.unRegister(t)})))}enableReactAttribute(t){if(this.reactAttribute)return;const e=xu.getPlugin("ReactAttributePlugin");e&&(this.reactAttribute=t,this.pluginService.register(new e))}disableReactAttribute(){this.reactAttribute&&(this.reactAttribute=!1,this.pluginService.findPluginsByName("ReactAttributePlugin").forEach((t=>{this.pluginService.unRegister(t)})))}getPluginsByName(t){return this.pluginService.findPluginsByName(t)}tryUpdateAABBBounds(){const t=this.window.getViewBox();return this._AABBBounds.setValue(t.x1,t.y1,t.x2,t.y2),this._AABBBounds}combineLayer(t,e){throw new Error("")}createLayer(t,e){if(this.releaseStatus==="released")return;const i=this.layerService.createLayer(this,{main:!1,layerMode:e,canvasId:t});return this.appendChild(i),i}sortLayer(t){const e=this.children;e.sort(t),this.removeAllChild(),e.forEach((i=>{this.appendChild(i)}))}removeLayer(t){return this.removeChild(this.findChildByUid(t))}tryInitInteractiveLayer(){this.releaseStatus!=="released"&&this.supportInteractiveLayer&&!this.interactiveLayer&&(this.interactiveLayer=this.createLayer(),this.interactiveLayer.name="_builtin_interactive",this.interactiveLayer.attribute.pickable=!1,this.nextFrameRenderLayerSet.add(this.interactiveLayer))}clearViewBox(t){this.window.clearViewBox(t)}render(t,e){if(this.releaseStatus==="released")return;this.startAnimate();const i=this.state;this.state="rendering",this.layerService.prepareStageLayer(this),this._skipRender||(this.lastRenderparams=e,this.hooks.beforeRender.call(this),this._skipRender||(this.renderLayerList(this.children),this.combineLayersToWindow(),this.nextFrameRenderLayerSet.clear()),this.hooks.afterRender.call(this)),this.state=i,this._skipRender&&this._skipRender++}combineLayersToWindow(){if(this.global.env==="harmony"){const t=this.window.getContext().nativeContext;this.forEachChildren(((e,i)=>{if(i>0){const r=e.getNativeHandler().getContext().canvas.nativeCanvas.nativeCanvas._c.transferToImageBitmap();t.transferFromImageBitmap(r)}}))}}renderNextFrame(t,e){this.nextFrameRenderLayerSet.size!==this.childrenCount&&(t||this).forEach((i=>{this.nextFrameRenderLayerSet.add(i)})),this.willNextFrameRender||(this.willNextFrameRender=!0,this.global.getSpecifiedRequestAnimationFrame(this.rafId)((()=>{this._doRenderInThisFrame(),this.willNextFrameRender=!1})))}_doRenderInThisFrame(){if(this.releaseStatus==="released")return;this.startAnimate();const t=this.state;this.state="rendering",this.layerService.prepareStageLayer(this),this.nextFrameRenderLayerSet.size&&!this._skipRender&&(this.hooks.beforeRender.call(this),this._skipRender||(this.renderLayerList(Array.from(this.nextFrameRenderLayerSet.values()),this.lastRenderparams||{}),this.combineLayersToWindow(),this.nextFrameRenderLayerSet.clear()),this.hooks.afterRender.call(this)),this.state=t,this._skipRender&&this._skipRender++}renderLayerList(t,e){const i=[];for(let r=0;r<t.length;r++){let o=t[r];o.layerMode==="virtual"&&(o=o.getNativeHandler().mainHandler.layer),i.includes(o)||i.push(o)}i.forEach((r=>{r.renderCount>this.renderCount||(r.renderCount=this.renderCount+1,r===this.interactiveLayer&&this.dirtyBounds&&this.dirtyBounds.clear(),r.render({renderService:this.renderService,background:r===this.defaultLayer?this.background:void 0,updateBounds:!(!this.dirtyBounds||this.dirtyBounds.empty()),viewBox:this.window.getViewBox(),transMatrix:this.window.getViewBoxTransform()},Object.assign({renderStyle:this.renderStyle},e)))})),this.interactiveLayer&&!t.includes(this.interactiveLayer)&&(this.dirtyBounds&&this.dirtyBounds.clear(),this.interactiveLayer.render({renderService:this.renderService,updateBounds:!(!this.dirtyBounds||this.dirtyBounds.empty()),viewBox:this.window.getViewBox(),transMatrix:this.window.getViewBoxTransform()},Object.assign({renderStyle:this.renderStyle},e)))}resizeWindow(t,e,i=!0){this.window.resize(t,e),i&&this.render()}resize(t,e,i=!0){this.releaseStatus!=="released"&&(this.window.hasSubView()||this.viewBox.setValue(this.viewBox.x1,this.viewBox.y1,this.viewBox.x1+t,this.viewBox.y1+e),this.window.resize(t,e),this.forEachChildren((r=>{r.resize(t,e)})),this.camera&&this.option3d&&this.set3dOptions(this.option3d),i&&this.render())}resizeView(t,e,i=!0){this.releaseStatus!=="released"&&(this.viewBox.setValue(this.viewBox.x1,this.viewBox.y1,this.viewBox.x1+t,this.viewBox.y1+e),this.forEachChildren((r=>{r.resizeView(t,e)})),this.camera&&(this.camera.params=Object.assign(Object.assign({},this.camera.params),{right:this.width,bottom:this.height})),i&&this.render())}setViewBox(t,e,i,r,o){let a=!0;typeof t=="object"?(this.viewBox.setValue(t.x1,t.y1,t.x2,t.y2),e===!1&&(a=!1)):(this.viewBox.setValue(t,e,t+i,e+r),o===!1&&(a=!1)),this.forEachChildren((s=>{s.resizeView(this.viewBox.width(),this.viewBox.height())})),a&&this.render()}setDpr(t,e=!0){this.forEachChildren((i=>{i.setDpr(t)})),e&&this.render()}setOrigin(t,e){throw new Error("")}export(t){throw new Error("")}pick(t,e){if(this.releaseStatus==="released")return;const i=this.getPickerService().pick(this.children,new ci(t,e),{bounds:this.AABBBounds});return!(!i?.graphic&&!i?.group)&&i}setToFrame(t){throw new Error("")}release(){var t,e;super.release(),this.hooks.beforeRender.unTap("constructor",this.beforeRender),this.hooks.afterRender.unTap("constructor",this.afterRender),this.eventSystem&&this.eventSystem.release(),this.layerService.releaseStage(this),this.pluginService.release(),this.forEach((i=>{i.release()})),this.interactiveLayer&&(this.interactiveLayer.forEachChildren((i=>{i.setStage&&i.setStage(null,null),this.interactiveLayer.removeChild(i)})),this.interactiveLayer.release()),this.window.release(),(t=this._ticker)===null||t===void 0||t.remTimeline(this==null?void 0:this.timeline),(e=this._ticker)===null||e===void 0||e.removeListener("tick",this.afterTickCb),this.renderService.renderTreeRoots=[]}setStage(t){}dirty(t,e){this.releaseStatus!=="released"&&(e&&t.transformWithMatrix(e),this.dirtyBounds.empty()&&this.dirtyBounds.setValue(t.x1,t.y1,t.x2,t.y2),this.dirtyBounds.union(t))}getLayer(t){return this.children.filter((e=>e.name===t))[0]}renderTo(t){this.releaseStatus!=="released"&&this.forEachChildren(((e,i)=>{e.drawTo(t,{renderService:this.renderService,viewBox:t.getViewBox(),transMatrix:t.getViewBoxTransform(),background:e===this.defaultLayer?this.background:void 0,clear:i===0,updateBounds:!(!this.dirtyBounds||this.dirtyBounds.empty())})}))}renderToNewWindow(t=!0,e){if(this.releaseStatus==="released")return;const i=Kt.get(Mb),r=e?-e.x1:0,o=e?-e.y1:0,a=e?e.x2:this.viewWidth,s=e?e.y2:this.viewHeight,l=e?e.width():this.viewWidth,h=e?e.height():this.viewHeight;return i.create({viewBox:{x1:r,y1:o,x2:a,y2:s},width:l,height:h,dpr:this.window.dpr,canvasControled:!0,offscreen:!0,title:""}),this.renderTo(i),i}toCanvas(t=!0,e){if(this.releaseStatus==="released")return;const i=this.renderToNewWindow(t,e).getNativeHandler();return i.nativeCanvas?i.nativeCanvas:null}setCursor(t){this._cursor=t,this.eventSystem.setCursor(t,"ignore")}getCursor(){return this._cursor}eventPointTransform(t){const e=this.global.mapToCanvasPoint(t,this.window);return this.stage.window.pointTransform(e.x,e.y)}pauseTriggerEvent(){this._eventSystem&&this._eventSystem.pauseTriggerEvent()}resumeTriggerEvent(){this._eventSystem&&this._eventSystem.resumeTriggerEvent()}getPickerService(){return this.pickerService||(this.pickerService=Kt.get(Mp)),this.pickerService}reInit(){this.renderService.reInit(),this.pickerService.reInit()}}function Wat(n){return new aGt(n)}var sGt=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a},lGt=function(n,t,e,i){return new(e||(e=Promise))((function(r,o){function a(h){try{l(i.next(h))}catch(u){o(u)}}function s(h){try{l(i.throw(h))}catch(u){o(u)}}function l(h){var u;h.done?r(h.value):(u=h.value,u instanceof e?u:new e((function(d){d(u)}))).then(a,s)}l((i=i.apply(n,t||[])).next())}))};let ZS=class{configure(n,...t){n.env===this.type&&n.setActiveEnvContribution(this)}getNativeAABBBounds(n){return new sr}removeDom(n){return!1}createDom(n){return null}updateDom(n,t){return!1}getDynamicCanvasCount(){return 999}getStaticCanvasCount(){return 999}getElementById(n){return document.getElementById(n)}getRootElement(){return document.body}loadJson(n){const t=fetch(n).then((e=>e.json()));return t.then((e=>({data:e,state:"success"}))).catch((()=>({data:null,state:"fail"}))),t}loadArrayBuffer(n){return fetch(n).then((t=>t.arrayBuffer())).then((t=>({data:t,loadState:"success"}))).catch((()=>({data:null,loadState:"fail"})))}loadBlob(n){return fetch(n).then((t=>t.blob())).then((t=>({data:t,loadState:"success"}))).catch((()=>({data:null,loadState:"fail"})))}getElementTop(n,t){return 0}getElementLeft(n,t){return 0}getElementTopLeft(n,t){return{top:0,left:0}}loadFont(n,t,e){return lGt(this,void 0,void 0,(function*(){return{loadState:"fail"}}))}isMacOS(){return!1}copyToClipBoard(n){return Promise.resolve(null)}};ZS=sGt([wt()],ZS);var hGt=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a},uGt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)};let JS=class{constructor(){this._uid=pn.GenAutoIncrementId(),this.viewBox=new sr,this.modelMatrix=new Fr(1,0,0,1,0,0)}onChange(n){this._onChangeCb=n}configure(n,t){t.env===this.type&&n.setWindowHandler(this)}release(...n){this.releaseWindow()}isVisible(n){return!0}onVisibleChange(n){}getTopLeft(n){return{top:0,left:0}}setViewBox(n){this.viewBox.setValue(n.x1,n.y1,n.x2,n.y2)}getViewBox(){return this.viewBox}setViewBoxTransform(n,t,e,i,r,o){this.modelMatrix.setValue(n,t,e,i,r,o)}getViewBoxTransform(){return this.modelMatrix}};JS=hGt([wt(),uGt("design:paramtypes",[])],JS);var dGt=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a},cGt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},E1=function(n,t){return function(e,i){t(e,i,n)}};let sO=class{constructor(n,t){this.pickItemInterceptorContributions=n,this.pickServiceInterceptorContributions=t,this.type="default",this.global=St.global}reInit(){this._init()}_init(){this.InterceptorContributions=this.pickItemInterceptorContributions.getContributions().sort(((n,t)=>n.order-t.order)),this.pickerServiceInterceptorContributions=this.pickServiceInterceptorContributions.getContributions().sort(((n,t)=>n.order-t.order))}pick(n,t,e){let i={graphic:null,group:null};e.pickerService=this;const r=e.bounds.width(),o=e.bounds.height();if(!new sr().setValue(0,0,r,o).containsPoint(t))return i;this.pickContext&&(this.pickContext.inuse=!0),e.pickContext=this.pickContext,this.pickContext&&this.pickContext.clearMatrix(!0,1);const a=new Fr(1,0,0,1,0,0);let s;for(let l=n.length-1;l>=0&&(i=n[l].isContainer?this.pickGroup(n[l],t,a,e):this.pickItem(n[l],t,a,e),!i.graphic);l--)s||(s=i.group);if(i.graphic||(i.group=s),this.pickContext&&(this.pickContext.inuse=!1),this.pickerServiceInterceptorContributions.length)for(let l=0;l<this.pickerServiceInterceptorContributions.length;l++){const h=this.pickerServiceInterceptorContributions[l];h.afterPickItem&&(i=h.afterPickItem(i,this,t,e,{parentMatrix:a}))}return i}containsPoint(n,t,e){var i;return!!(!((i=this.pickItem(n,t,null,e??{pickContext:this.pickContext,pickerService:this}))===null||i===void 0)&&i.graphic)}pickGroup(n,t,e,i){let r={group:null,graphic:null};if(n.attribute.visibleAll===!1)return r;const o=i.pickContext,a=o.modelMatrix;if(o.camera){const f=n.transMatrix,g=Tn.allocate();if(PI(g,f),a){if(g){const p=Tn.allocate();o.modelMatrix=D_(p,a,g),Tn.free(g)}}else PI(g,n.globalTransMatrix),o.modelMatrix=g}if(this.InterceptorContributions.length)for(let f=0;f<this.InterceptorContributions.length;f++){const g=this.InterceptorContributions[f];if(g.beforePickItem){const p=g.beforePickItem(n,this,t,i,{parentMatrix:e});if(p)return o.modelMatrix!==a&&Tn.free(o.modelMatrix),o.modelMatrix=a,p}}const s=n.transMatrix,l=ar.allocateByObj(e),h=new ci(t.x,t.y);l.transformPoint(h,h);const u=n.AABBBounds.containsPoint(h);if(!u&&!n.stage.camera)return r;const d=this.pickItem(n,h.clone(),e,i);d&&d.graphic&&(r.graphic=d.graphic,r.params=d.params);const c=n.attribute.pickable!==!1&&u;return l.multiply(s.a,s.b,s.c,s.d,s.e,s.f),n.attribute.childrenPickable===!1||d&&d.graphic||Fat(n,ji.zIndex,(f=>{if(f.isContainer){const g=new ci(t.x,t.y),p=he(n).group,{scrollX:v=p.scrollX,scrollY:m=p.scrollY}=n.attribute;g.x-=v,g.y-=m,r=this.pickGroup(f,g,l,i)}else{const g=new ci(t.x,t.y);l.transformPoint(g,g);const p=he(n).group,{scrollX:v=p.scrollX,scrollY:m=p.scrollY}=n.attribute;g.x-=v,g.y-=m;const y=this.pickItem(f,g,e,i);y&&y.graphic&&(r.graphic=y.graphic,r.params=y.params)}return!!r.graphic||!!r.group}),!0,!!o.camera),o.modelMatrix!==a&&Tn.free(o.modelMatrix),o.modelMatrix=a,r.graphic||r.group||!c||n.stage.camera||(r.group=n),ar.free(l),r}selectPicker(n){return this.pickerMap.get(n.numberType)||null}};sO=dGt([wt(),E1(0,Ce(Qi)),E1(0,Ln(sp)),E1(1,Ce(Qi)),E1(1,Ln(GS)),cGt("design:paramtypes",[Object,Object])],sO);function fGt(n,t,e){const i={};for(const r in t)r in n&&yI(n[r],t[r])||(i[r]=t[r]);return i}let F$=!1;const gGt=new ie((n=>{F$||(F$=!0,n(RS).toSelf().inSingletonScope(),n(IS).to(RS).inSingletonScope(),n(co).toService(IS),n(DI).toService(Ps),wr(n,DI))}));let N$=!1;const pGt=new ie((n=>{N$||(N$=!0,n(LS).toSelf().inSingletonScope(),n(NS).to(LS).inSingletonScope(),n(co).toService(NS),n(Rv).toSelf(),n(Mv).toSelf(),n(Xc).toService(Rv),n(Xc).toService(Mv),n(Xc).toService(Ps),wr(n,Xc))}));let W$=!1;const vGt=new ie((n=>{W$||(W$=!0,n(Eb).toSelf().inSingletonScope(),n(KS).toSelf().inSingletonScope(),n(HS).to(Eb).inSingletonScope(),n(co).toService(HS))}));let V$=!1;const mGt=new ie((n=>{V$||(V$=!0,n(ES).toSelf().inSingletonScope(),n(WS).to(ES).inSingletonScope(),n(co).toService(WS),n(zI).toService(Ps),wr(n,zI))}));let G$=!1;const yGt=new ie((n=>{G$||(G$=!0,n(PS).toSelf().inSingletonScope(),n(OS).to(PS).inSingletonScope(),n(co).toService(OS),n(II).toService(Ps),wr(n,II))}));let $$=!1;const bGt=new ie((n=>{$$||($$=!0,n(QI).to(qI).inSingletonScope(),n(co).toService(QI),n(TS).toService(Ps),wr(n,TS))}));let j$=!1;const _Gt=new ie((n=>{j$||(j$=!0,n(kS).toSelf().inSingletonScope(),n(zS).to(kS).inSingletonScope(),n(co).toService(zS),n(OI).toService(Ps),wr(n,OI))}));let U$=!1;const CGt=new ie((n=>{U$||(U$=!0,n(FS).to(KI).inSingletonScope(),n(co).toService(FS),n(HI).toService(Ps),wr(n,HI))}));var wGt=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a},xGt=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)};let lO=class extends ko{constructor(){super(),this.numberType=y3,this.builtinContributions=[Eat],this.init()}drawShape(n,t,e,i,r){const o=he(n).richtext,{strokeOpacity:a=o.strokeOpacity,opacity:s=o.opacity,fillOpacity:l=o.fillOpacity,visible:h=o.visible}=n.attribute;if(!n.valid||!h)return;const u=zf(s,l,!0),d=zf(s,a,!0);u&&(t.setShadowBlendStyle&&t.setShadowBlendStyle(n,n.attribute,o),t.translate(e,i),this.beforeRenderStep(n,t,e,i,u,d,u,d,o,r),n.getFrameCache().draw(t,this.drawIcon),this.afterRenderStep(n,t,e,i,u,d,u,d,o,r))}drawIcon(n,t,e,i,r){var o;const a=he(n).richtextIcon,{width:s=a.width,height:l=a.height,opacity:h=a.opacity,image:u,backgroundFill:d=a.backgroundFill,backgroundFillOpacity:c=a.backgroundFillOpacity,backgroundStroke:f=a.backgroundStroke,backgroundStrokeOpacity:g=a.backgroundStrokeOpacity,backgroundRadius:p=a.backgroundRadius,margin:v}=n.attribute,{backgroundWidth:m=s,backgroundHeight:y=l}=n.attribute;if(v&&(e+=n._marginArray[3],i+=n._marginArray[0]),n._hovered){const _=(m-s)/2,w=(y-l)/2;p===0?(t.beginPath(),t.rect(e-_,i-w,m,y)):(t.beginPath(),Il(t,e-_,i-w,m,y,p,!0)),d&&(t.globalAlpha=c,t.fillStyle=d,t.fill()),f&&(t.globalAlpha=g,t.strokeStyle=f,t.stroke())}const b=u&&((o=n?.resources)===null||o===void 0?void 0:o.get(u));b&&b.state==="success"&&(t.globalAlpha=h,t.drawImage(b.data,e,i,s,l))}draw(n,t,e){const i=he(n).richtext;this._draw(n,i,!1,e)}};lO=wGt([wt(),xGt("design:paramtypes",[])],lO);let Y$=!1;const SGt=new ie((n=>{Y$||(Y$=!0,n(tO).to(lO).inSingletonScope(),n(co).toService(tO))}));let X$=!1;const AGt=new ie((n=>{X$||(X$=!0,n(eO).to(JI).inSingletonScope(),n(co).toService(eO),n(Yc).toService(Ps),wr(n,Yc))}));function TGt(){Nt.RegisterGraphicCreator("arc",MS)}function MGt(){Nt.RegisterGraphicCreator("circle",Mat)}function RGt(){Nt.RegisterGraphicCreator("group",AS)}function PGt(){Nt.RegisterGraphicCreator("image",JM)}function BGt(){Nt.RegisterGraphicCreator("line",Wi)}function kGt(){Nt.RegisterGraphicCreator("path",aVt)}function LGt(){Nt.RegisterGraphicCreator("polygon",Pat)}function EGt(){Nt.RegisterGraphicCreator("rect",ei)}function DGt(){Nt.RegisterGraphicCreator("richtext",oVt)}function IGt(){Nt.RegisterGraphicCreator("symbol",Av)}function OGt(){Nt.RegisterGraphicCreator("text",kb)}function HGt(){Nt.RegisterGraphicCreator("shadowRoot",lVt)}function zGt(){Nt.RegisterGraphicCreator("wrapText",J4t)}const q$=new sr;class FGt{constructor(){this.name="FlexLayoutPlugin",this.activeEvent="onRegister",this.id=pn.GenAutoIncrementId(),this.key=this.name+this.id,this.tempBounds=new sr}pauseLayout(t){this.pause=t}tryLayoutChildren(t){t.firstChild&&this.tryLayout(t.firstChild)}tryLayout(t,e=!0){if(this.pause)return;const i=t.parent;if(!(e||i&&t.needUpdateLayout()))return;const r=he(i).group,{display:o=r.display}=i.attribute;if(o!=="flex")return;const{flexDirection:a=r.flexDirection,flexWrap:s=r.flexWrap,alignItems:l=r.alignItems,clip:h=r.clip}=i.attribute,{alignContent:u=l??r.alignContent}=i.attribute;let{width:d,height:c,justifyContent:f=r.justifyContent}=i.attribute;const g=i.getChildren();if(d==null||c==null){let S=0,A=0,T=0;if(g.forEach((M=>{const R=this.getAABBBounds(M);R.empty()||(a==="column"||a==="column-reverse"?(A+=R.height(),S=Math.max(S,R.width())):(S+=R.width(),A=Math.max(A,R.height())),T+=R.x1,T+=R.y1,T+=R.x2,T+=R.y2)})),!isFinite(T))return;d=S,c=A}i.attribute.width==null?i.attribute.width=d:d=i.attribute.width,i.attribute.height==null?i.attribute.height=c:c=i.attribute.height,this.tempBounds.copy(i._AABBBounds);const p={main:{len:d,field:"x"},cross:{len:c,field:"y"}},v=p.main,m=p.cross;a!=="column"&&a!=="column-reverse"||(v.len=c,m.len=d,v.field="y",m.field="x"),a!=="row-reverse"&&a!=="column-reverse"||(f==="flex-start"?f="flex-end":f==="flex-end"?f="flex-start":g.reverse());let y=0,b=0;const _=[];g.forEach((S=>{const A=this.getAABBBounds(S);if(A.empty())return;const T=v.field==="x"?A.width():A.height(),M=m.field==="x"?A.width():A.height();_.push({mainLen:T,crossLen:M}),y+=T,b=Math.max(b,M)}));const w=[];if(y>v.len&&s==="wrap"){let S=0,A=0;_.forEach((({mainLen:T,crossLen:M},R)=>{S+T>v.len?S===0?(w.push({idx:R,mainLen:S+T,crossLen:M}),S=0,A=0):(w.push({idx:R-1,mainLen:S,crossLen:A}),S=T,A=M):(S+=T,A=Math.max(A,M))})),w.push({idx:_.length-1,mainLen:S,crossLen:A})}else w.push({idx:_.length-1,mainLen:y,crossLen:b});let C=0;if(w.forEach((S=>{this.layoutMain(i,g,f,v,_,C,S),C=S.idx+1})),b=w.reduce(((S,A)=>S+A.crossLen),0),w.length===1){const S={"flex-start":0,"flex-end":m.len,center:m.len/2};this.layoutCross(g,l,m,S,_,w[0],0)}else if(u==="flex-start"){C=0;let S=0;w.forEach(((A,T)=>{const M={"flex-start":S,"flex-end":S+A.crossLen,center:S+A.crossLen/2};this.layoutCross(g,"flex-start",m,M,_,w[T],C),C=A.idx+1,S+=A.crossLen}))}else if(u==="center"){C=0;let S=Math.max(0,(m.len-b)/2);w.forEach(((A,T)=>{const M={"flex-start":S,"flex-end":S+A.crossLen,center:S+A.crossLen/2};this.layoutCross(g,"center",m,M,_,w[T],C),C=A.idx+1,S+=A.crossLen}))}else if(u==="space-around"){C=0;const S=Math.max(0,(m.len-b)/w.length/2);let A=S;w.forEach(((T,M)=>{const R={"flex-start":A,"flex-end":A+T.crossLen,center:A+T.crossLen/2};this.layoutCross(g,"flex-start",m,R,_,w[M],C),C=T.idx+1,A+=T.crossLen+2*S}))}else if(u==="space-between"){C=0;const S=Math.max(0,(m.len-b)/(2*w.length-2));let A=0;w.forEach(((T,M)=>{const R={"flex-start":A,"flex-end":A+T.crossLen,center:A+T.crossLen/2};this.layoutCross(g,"flex-start",m,R,_,w[M],C),C=T.idx+1,A+=T.crossLen+2*S}))}g.forEach(((S,A)=>{S.addUpdateBoundTag(),S.addUpdatePositionTag(),S.clearUpdateLayoutTag()})),i.addUpdateLayoutTag();const x=this.getAABBBounds(i);h||this.tempBounds.equals(x)||this.tryLayout(i,!1)}getAABBBounds(t){this.skipBoundsTrigger=!0;const e=t.AABBBounds;return this.skipBoundsTrigger=!1,e}updateChildPos(t,e,i){return t+(e??0)-i}layoutMain(t,e,i,r,o,a,s){if(i==="flex-start"){let l=0;for(let h=a;h<=s.idx;h++){const u=l+Us(e[h],r.field),d=this.getAABBBounds(e[h]);!d.empty()&&(e[h].attribute[r.field]=this.updateChildPos(u,e[h].attribute[r.field],d[`${r.field}1`])),l+=o[h].mainLen}}else if(i==="flex-end"){let l=r.len;for(let h=s.idx;h>=a;h--){l-=o[h].mainLen;const u=l+Us(e[h],r.field),d=this.getAABBBounds(e[h]);!d.empty()&&(e[h].attribute[r.field]=this.updateChildPos(u,e[h].attribute[r.field],d[`${r.field}1`]))}}else if(i==="space-around")if(s.mainLen>=r.len){let l=0;for(let h=a;h<=s.idx;h++){const u=l+Us(e[h],r.field),d=this.getAABBBounds(e[h]);!d.empty()&&(e[h].attribute[r.field]=this.updateChildPos(u,e[h].attribute[r.field],d[`${r.field}1`])),l+=o[h].mainLen}}else{const l=s.idx-a+1,h=(r.len-s.mainLen)/l/2;let u=h;for(let d=a;d<=s.idx;d++){const c=u+Us(e[d],r.field),f=this.getAABBBounds(e[d]);!f.empty()&&(e[d].attribute[r.field]=this.updateChildPos(c,e[d].attribute[r.field],f[`${r.field}1`])),u+=o[d].mainLen+2*h}}else if(i==="space-between")if(s.mainLen>=r.len){let l=0;for(let h=a;h<=s.idx;h++){const u=l+Us(e[h],r.field),d=this.getAABBBounds(e[h]);!d.empty()&&(e[h].attribute[r.field]=this.updateChildPos(u,e[h].attribute[r.field],d[`${r.field}1`])),l+=o[h].mainLen}}else{const l=s.idx-a+1,h=(r.len-s.mainLen)/(2*l-2);let u=0;for(let d=a;d<=s.idx;d++){const c=u+Us(e[d],r.field),f=this.getAABBBounds(e[d]);!f.empty()&&(e[d].attribute[r.field]=this.updateChildPos(c,e[d].attribute[r.field],f[`${r.field}1`])),u+=o[d].mainLen+2*h}}else if(i==="center"){let l=(r.len-s.mainLen)/2;for(let h=a;h<=s.idx;h++){const u=l+Us(e[h],r.field),d=this.getAABBBounds(e[h]);!d.empty()&&(e[h].attribute[r.field]=this.updateChildPos(u,e[h].attribute[r.field],d[`${r.field}1`])),l+=o[h].mainLen}}}layoutCross(t,e,i,r,o,a,s){var l;for(let h=s;h<=a.idx;h++){const u=t[h];let{alignSelf:d}=u.attribute;d&&d!=="auto"||(d=e);const c=this.getAABBBounds(u),f=(l=r[d])!==null&&l!==void 0?l:r["flex-start"];d==="flex-end"?!c.empty()&&(u.attribute[i.field]=this.updateChildPos(f-o[h].crossLen+Us(u,i.field),u.attribute[i.field],c[`${i.field}1`])):d==="center"?!c.empty()&&(u.attribute[i.field]=this.updateChildPos(f-o[h].crossLen/2+Us(u,i.field),u.attribute[i.field],c[`${i.field}1`])):!c.empty()&&(u.attribute[i.field]=this.updateChildPos(f+Us(u,i.field),u.attribute[i.field],c[`${i.field}1`]))}}activate(t){this.pluginService=t;const e=this.pluginService.stage;e&&(e.graphicService.hooks.onAttributeUpdate.tap(this.key,(i=>{i.glyphHost&&(i=i.glyphHost),i.stage&&i.stage===this.pluginService.stage&&this.tryLayout(i,!1)})),e.graphicService.hooks.beforeUpdateAABBBounds.tap(this.key,((i,r,o,a)=>{i.glyphHost&&(i=i.glyphHost),r&&r===this.pluginService.stage&&i.isContainer&&!this.skipBoundsTrigger&&q$.copy(a)})),e.graphicService.hooks.afterUpdateAABBBounds.tap(this.key,((i,r,o,a,s)=>{r&&r===this.pluginService.stage&&i.isContainer&&!this.skipBoundsTrigger&&(q$.equals(o)||this.tryLayout(i,!1))})),e.graphicService.hooks.onSetStage.tap(this.key,(i=>{i.glyphHost&&(i=i.glyphHost),this.tryLayout(i,!1)})))}deactivate(t){const e=this.pluginService.stage;e&&(e.graphicService.hooks.onAttributeUpdate.taps=e.graphicService.hooks.onAttributeUpdate.taps.filter((i=>i.name!==this.key)),e.graphicService.hooks.beforeUpdateAABBBounds.taps=e.graphicService.hooks.beforeUpdateAABBBounds.taps.filter((i=>i.name!==this.key)),e.graphicService.hooks.afterUpdateAABBBounds.taps=e.graphicService.hooks.afterUpdateAABBBounds.taps.filter((i=>i.name!==this.key)),e.graphicService.hooks.onSetStage.taps=e.graphicService.hooks.onSetStage.taps.filter((i=>i.name!==this.key)))}}function Us(n,t){return 0}const K$=()=>{xu.registerPlugin("FlexLayoutPlugin",FGt)},nm=(n,t)=>Object.prototype.toString.call(n)===`[object ${t}]`,QS=(n,t=!1)=>t?typeof n=="boolean":n===!0||n===!1||nm(n,"Boolean"),Zi=n=>typeof n=="function",fe=n=>n==null,Lt=n=>n!=null,Bs=n=>{const t=typeof n;return n!==null&&t==="object"||t==="function"},NGt=n=>typeof n=="object"&&n!==null,cy=function(n){if(!NGt(n)||!nm(n,"Object"))return!1;if(Object.getPrototypeOf(n)===null)return!0;let t=n;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(n)===t},P3=(n,t=!1)=>{const e=typeof n;return t?e==="string":e==="string"||nm(n,"String")},ni=n=>Array.isArray?Array.isArray(n):nm(n,"Array"),B3=function(n){return n!==null&&typeof n!="function"&&Number.isFinite(n.length)},WGt=n=>nm(n,"Date"),pr=(n,t=!1)=>{const e=typeof n;return t?e==="number":e==="number"||nm(n,"Number")},hn=n=>pr(n)&&Number.isFinite(n),VGt=n=>({}).toString.call(n).replace(/^\[object /,"").replace(/]$/,""),GGt=Object.prototype,$Gt=function(n){const t=n&&n.constructor;return n===(typeof t=="function"&&t.prototype||GGt)},jGt=Object.prototype.hasOwnProperty;function fi(n){if(fe(n))return!0;if(B3(n))return!n.length;const t=VGt(n);if(t==="Map"||t==="Set")return!n.size;if($Gt(n))return!Object.keys(n).length;for(const e in n)if(jGt.call(n,e))return!1;return!0}const Jr=(n,t,e)=>{const i=P3(t)?t.split("."):t;for(let r=0;r<i.length;r++)n=n?n[i[r]]:void 0;return n===void 0?e:n};function Vat(n,t,e){let i;if(!Lt(n)||typeof n!="object"||t)return n;const r=ni(n),o=n.length;i=r?new Array(o):typeof n=="object"?{}:QS(n)||pr(n)||P3(n)?n:WGt(n)?new Date(+n):void 0;const a=r?void 0:Object.keys(Object(n));let s=-1;if(i)for(;++s<(a||n).length;){const l=a?a[s]:s,h=n[l];i[l]=Vat(h,t)}return i}function Gat(n,t,e=!1,i=!1){if(t){if(n===t)return;if(Lt(t)&&typeof t=="object"){const r=Object(t),o=[];for(const l in r)o.push(l);let{length:a}=o,s=-1;for(;a--;){const l=o[++s];!Lt(r[l])||typeof r[l]!="object"||i&&ni(n[l])?$at(n,l,r[l]):UGt(n,t,l,e,i)}}}}function UGt(n,t,e,i=!1,r=!1){const o=n[e],a=t[e];let s=t[e],l=!0;if(ni(a)){if(i)s=[];else if(ni(o))s=o;else if(B3(o)){s=new Array(o.length);let h=-1;const u=o.length;for(;++h<u;)s[h]=o[h]}}else cy(a)?(s=o??{},typeof o!="function"&&typeof o=="object"||(s={})):l=!1;l&&Gat(s,a,i,r),$at(n,e,s)}function $at(n,t,e){(e!==void 0&&!YGt(n[t],e)||e===void 0&&!(t in n))&&(n[t]=e)}function YGt(n,t){return n===t||Number.isNaN(n)&&Number.isNaN(t)}function Qt(n,...t){let e=-1;const i=t.length;for(;++e<i;)Gat(n,t[e],!0);return n}function XGt(n){if(!n)return[];if(Object.keys)return Object.keys(n);const t=[];for(const e in n)n.hasOwnProperty(e)&&t.push(e);return t}function qGt(n,t,e){const i=XGt(t);for(let r=0;r<i.length;r++){const o=i[r];(e?t[o]!=null:n[o]==null)&&(n[o]=t[o])}return n}function KGt(n,t,e=!0){if(n="prototype"in n?n.prototype:n,t="prototype"in t?t.prototype:t,Object.getOwnPropertyNames){const i=Object.getOwnPropertyNames(t);for(let r=0;r<i.length;r++){const o=i[r];o!=="constructor"&&(e?t[o]!=null:n[o]==null)&&(n[o]=t[o])}}else qGt(n,t,e)}function tA(n){return Lt(n)?ni(n)?n:[n]:[]}function hp(n){if(B3(n))return n[n.length-1]}const jat=(n,t)=>{var e;if(n.length===0)return;let i=n[0];for(let r=1;r<n.length;r++){const o=n[r];((e=void 0)!==null&&e!==void 0?e:o-i)>0&&(i=o)}return i},k3=(n,t)=>{var e;if(n.length===0)return;let i=n[0];for(let r=1;r<n.length;r++){const o=n[r];((e=void 0)!==null&&e!==void 0?e:o-i)<0&&(i=o)}return i};function hO(n){if(!ni(n))return[n];const t=[];for(const e of n)t.push(...hO(e));return t}function ZGt(n,t,e){Lt(t)||(t=n,n=0),Lt(e)||(e=1);let i=-1;const r=0|Math.max(0,Math.ceil((t-n)/e)),o=new Array(r);for(;++i<r;)o[i]=n+i*e;return o}function JGt(n,t){return n<t?-1:n>t?1:n>=t?0:NaN}function QGt(n){return Number(n)}function t8t(n,t,e=0,i){for(fe(i)&&(i=n.length);e<i;){const r=e+i>>>1;JGt(n[r],t)>0?i=r:e=r+1}return e}const e8t=(n,t,e)=>{let i=n,r=t;for(;i<r;){const o=Math.floor((i+r)/2);e(o)>=0?r=o:i=o+1}return i},i8t=1e-10,n8t=1e-10;function Kc(n,t,e=n8t,i=i8t){const r=i,o=e*Math.max(n,t);return Math.abs(n-t)<=Math.max(r,o)}const Uat=n=>{let t=null,e=null;return(...i)=>(t&&i.every(((r,o)=>r===t[o]))||(t=i,e=n(...i)),e)},No=function(n,t,e){return n<t?t:n>e?e:n},dc=(n,t,e)=>{let[i,r]=n;r<i&&(i=n[1],r=n[0]);const o=r-i;return o>=e-t?[t,e]:(i=Math.min(Math.max(i,t),e-o),[i,i+o])};function r8t(n,t){let e;return n>t&&(e=n,n=t,t=e),i=>Math.max(n,Math.min(t,i))}let eA=!1;try{eA=typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"}catch{eA=!1}function Yat(n,t,e){let i,r,o,a,s,l,h=0,u=!1,d=!1,c=!0;const f=!t&&t!==0&&eA;if(typeof n!="function")throw new TypeError("Expected a function");function g(_){const w=i,C=r;return i=r=void 0,h=_,a=n.apply(C,w),a}function p(_,w){return f?(cancelAnimationFrame(s),requestAnimationFrame(_)):setTimeout(_,w)}function v(_){const w=_-l;return l===void 0||w>=t||w<0||d&&_-h>=o}function m(){const _=Date.now();if(v(_))return y(_);s=p(m,(function(w){const C=w-h,x=t-(w-l);return d?Math.min(x,o-C):x})(_))}function y(_){return s=void 0,c&&i?g(_):(i=r=void 0,a)}function b(..._){const w=Date.now(),C=v(w);if(i=_,r=this,l=w,C){if(s===void 0)return(function(x){return h=x,s=p(m,t),u?g(x):a})(l);if(d)return s=p(m,t),g(l)}return s===void 0&&(s=p(m,t)),a}return t=+t||0,Bs(e)&&(u=!!e.leading,d="maxWait"in e,d&&(o=Math.max(hn(e.maxWait)?e.maxWait:0,t)),c="trailing"in e?!!e.trailing:c),b.cancel=function(){s!==void 0&&(function(_){if(f)return cancelAnimationFrame(_);clearTimeout(_)})(s),h=0,i=l=r=s=void 0},b.flush=function(){return s===void 0?a:y(Date.now())},b.pending=function(){return s!==void 0},b}eA=!1;function Xat(n,t,e){let i=!0,r=!0;if(typeof n!="function")throw new TypeError("Expected a function");return Bs(e)&&(i="leading"in e?!!e.leading:i,r="trailing"in e?!!e.trailing:r),Yat(n,t,{leading:i,trailing:r,maxWait:t})}function Ow(n,t){return e=>n*(1-e)+t*e}function o8t(n,t){return function(e){return Math.round(n*(1-e)+t*e)}}function a8t(n,t){const e=n.valueOf(),i=t.valueOf(),r=new Date;return o=>(r.setTime(e*(1-o)+i*o),r)}const ya=Math.PI,Z$=ya/2,D1=2*Math.PI,J$=Math.abs,I1=Math.max,iA=Math.min;function s8t(n,t){return n[0]*t[1]-n[1]*t[0]}function Zc(n){return n*(Math.PI/180)}function l8t(n,t,e){return t?{x:n.x+t*Math.cos(e),y:n.y+t*Math.sin(e)}:{x:n.x,y:n.y}}function Q$(n){for(;n<0;)n+=2*Math.PI;for(;n>=2*Math.PI;)n-=2*Math.PI;return n}function h8t(n,t,e){if(n===null)return t;if(t===null)return n;const{x11:i,x12:r,y11:o,y12:a,x21:s,x22:l,y21:h,y22:u}=qat(n,t);return i>=l||r<=s||o>=u||a<=h?{x1:0,y1:0,x2:0,y2:0}:{x1:Math.max(i,s),y1:Math.max(o,h),x2:Math.min(r,l),y2:Math.min(a,u)}}var up;(function(n){n[n.NONE=0]="NONE",n[n.BBOX1=1]="BBOX1",n[n.BBOX2=2]="BBOX2"})(up||(up={}));const qat=(n,t,e)=>{let i=n.x1,r=n.x2,o=n.y1,a=n.y2,s=t.x1,l=t.x2,h=t.y1,u=t.y2;return{x11:i,x12:r,y11:o,y12:a,x21:s,x22:l,y21:h,y22:u}};function u8t(n,t,e){if(!n||!t)return up.NONE;const{x11:i,x12:r,y11:o,y12:a,x21:s,x22:l,y21:h,y22:u}=qat(n,t);return i>s&&r<l&&o>h&&a<u?up.BBOX1:s>i&&l<r&&h>o&&u<a?up.BBOX2:up.NONE}function d8t(n,t,e){return n&&t?!(n.x1>t.x2||n.x2<t.x1||n.y1>t.y2||n.y2<t.y1):!0}function hk(n,t){return Math.abs(t[0]*n[0]+t[1]*n[1])}function L0({x:n,y:t},e,i={x:0,y:0}){return{x:(n-i.x)*Math.cos(e)-(t-i.y)*Math.sin(e)+i.x,y:(n-i.x)*Math.sin(e)+(t-i.y)*Math.cos(e)+i.y}}function uO(n){return{x:(n.x1+n.x2)/2,y:(n.y1+n.y2)/2}}function tj(n,t){const e=t?Zc(n.angle):n.angle,i=uO(n);return[L0({x:n.x1,y:n.y1},e,i),L0({x:n.x2,y:n.y1},e,i),L0({x:n.x2,y:n.y2},e,i),L0({x:n.x1,y:n.y2},e,i)]}function c8t(n,t,e=!1){const i=tj(n,e),r=tj(t,e),o=(v,m)=>[m.x-v.x,m.y-v.y],a=o(uO(n),uO(t)),s=o(i[0],i[1]),l=o(i[1],i[2]),h=o(r[0],r[1]),u=o(r[1],r[2]),d=e?Zc(n.angle):n.angle;let c=e?Zc(90-n.angle):n.angle+Z$;const f=e?Zc(t.angle):t.angle;let g=e?Zc(90-t.angle):t.angle+Z$;c>D1&&(c-=D1),g>D1&&(g-=D1);const p=(v,m,y,b)=>{const _=[Math.cos(m),Math.sin(m)];return v+(hk(_,y)+hk(_,b))/2>hk(_,a)};return p((n.x2-n.x1)/2,d,h,u)&&p((n.y2-n.y1)/2,c,h,u)&&p((t.x2-t.x1)/2,f,s,l)&&p((t.y2-t.y1)/2,g,s,l)}const ej=n=>{let t=n.charCodeAt(0),e=n.length===2?n.charCodeAt(1):0,i=t;return 55296<=t&&t<=56319&&56320<=e&&e<=57343&&(t&=1023,e&=1023,i=t<<10|e,i+=65536),i===12288||65281<=i&&i<=65376||65504<=i&&i<=65510?"F":i===8361||65377<=i&&i<=65470||65474<=i&&i<=65479||65482<=i&&i<=65487||65490<=i&&i<=65495||65498<=i&&i<=65500||65512<=i&&i<=65518?"H":4352<=i&&i<=4447||4515<=i&&i<=4519||4602<=i&&i<=4607||9001<=i&&i<=9002||11904<=i&&i<=11929||11931<=i&&i<=12019||12032<=i&&i<=12245||12272<=i&&i<=12283||12289<=i&&i<=12350||12353<=i&&i<=12438||12441<=i&&i<=12543||12549<=i&&i<=12589||12593<=i&&i<=12686||12688<=i&&i<=12730||12736<=i&&i<=12771||12784<=i&&i<=12830||12832<=i&&i<=12871||12880<=i&&i<=13054||13056<=i&&i<=19903||19968<=i&&i<=42124||42128<=i&&i<=42182||43360<=i&&i<=43388||44032<=i&&i<=55203||55216<=i&&i<=55238||55243<=i&&i<=55291||63744<=i&&i<=64255||65040<=i&&i<=65049||65072<=i&&i<=65106||65108<=i&&i<=65126||65128<=i&&i<=65131||110592<=i&&i<=110593||127488<=i&&i<=127490||127504<=i&&i<=127546||127552<=i&&i<=127560||127568<=i&&i<=127569||131072<=i&&i<=194367||177984<=i&&i<=196605||196608<=i&&i<=262141?"W":32<=i&&i<=126||162<=i&&i<=163||165<=i&&i<=166||i===172||i===175||10214<=i&&i<=10221||10629<=i&&i<=10630?"Na":i===161||i===164||167<=i&&i<=168||i===170||173<=i&&i<=174||176<=i&&i<=180||182<=i&&i<=186||188<=i&&i<=191||i===198||i===208||215<=i&&i<=216||222<=i&&i<=225||i===230||232<=i&&i<=234||236<=i&&i<=237||i===240||242<=i&&i<=243||247<=i&&i<=250||i===252||i===254||i===257||i===273||i===275||i===283||294<=i&&i<=295||i===299||305<=i&&i<=307||i===312||319<=i&&i<=322||i===324||328<=i&&i<=331||i===333||338<=i&&i<=339||358<=i&&i<=359||i===363||i===462||i===464||i===466||i===468||i===470||i===472||i===474||i===476||i===593||i===609||i===708||i===711||713<=i&&i<=715||i===717||i===720||728<=i&&i<=731||i===733||i===735||768<=i&&i<=879||913<=i&&i<=929||931<=i&&i<=937||945<=i&&i<=961||963<=i&&i<=969||i===1025||1040<=i&&i<=1103||i===1105||i===8208||8211<=i&&i<=8214||8216<=i&&i<=8217||8220<=i&&i<=8221||8224<=i&&i<=8226||8228<=i&&i<=8231||i===8240||8242<=i&&i<=8243||i===8245||i===8251||i===8254||i===8308||i===8319||8321<=i&&i<=8324||i===8364||i===8451||i===8453||i===8457||i===8467||i===8470||8481<=i&&i<=8482||i===8486||i===8491||8531<=i&&i<=8532||8539<=i&&i<=8542||8544<=i&&i<=8555||8560<=i&&i<=8569||i===8585||8592<=i&&i<=8601||8632<=i&&i<=8633||i===8658||i===8660||i===8679||i===8704||8706<=i&&i<=8707||8711<=i&&i<=8712||i===8715||i===8719||i===8721||i===8725||i===8730||8733<=i&&i<=8736||i===8739||i===8741||8743<=i&&i<=8748||i===8750||8756<=i&&i<=8759||8764<=i&&i<=8765||i===8776||i===8780||i===8786||8800<=i&&i<=8801||8804<=i&&i<=8807||8810<=i&&i<=8811||8814<=i&&i<=8815||8834<=i&&i<=8835||8838<=i&&i<=8839||i===8853||i===8857||i===8869||i===8895||i===8978||9312<=i&&i<=9449||9451<=i&&i<=9547||9552<=i&&i<=9587||9600<=i&&i<=9615||9618<=i&&i<=9621||9632<=i&&i<=9633||9635<=i&&i<=9641||9650<=i&&i<=9651||9654<=i&&i<=9655||9660<=i&&i<=9661||9664<=i&&i<=9665||9670<=i&&i<=9672||i===9675||9678<=i&&i<=9681||9698<=i&&i<=9701||i===9711||9733<=i&&i<=9734||i===9737||9742<=i&&i<=9743||9748<=i&&i<=9749||i===9756||i===9758||i===9792||i===9794||9824<=i&&i<=9825||9827<=i&&i<=9829||9831<=i&&i<=9834||9836<=i&&i<=9837||i===9839||9886<=i&&i<=9887||9918<=i&&i<=9919||9924<=i&&i<=9933||9935<=i&&i<=9953||i===9955||9960<=i&&i<=9983||i===10045||i===10071||10102<=i&&i<=10111||11093<=i&&i<=11097||12872<=i&&i<=12879||57344<=i&&i<=63743||65024<=i&&i<=65039||i===65533||127232<=i&&i<=127242||127248<=i&&i<=127277||127280<=i&&i<=127337||127344<=i&&i<=127386||917760<=i&&i<=917999||983040<=i&&i<=1048573||1048576<=i&&i<=1114109?"A":"N"};function f8t(n,t={},e){e||(e=1);const{fontStyle:i=t.fontStyle,fontVariant:r=t.fontVariant,fontWeight:o=t.fontWeight,fontSize:a=t.fontSize,fontFamily:s=t.fontFamily}=n;return(i?i+" ":"")+(r?r+" ":"")+(o?o+" ":"")+a*e+"px "+(s||"sans-serif")}let Rp=class cc{constructor(t,e){this._numberCharSize=null,this._fullCharSize=null,this._letterCharSize=null,this._specialCharSizeMap={},this._canvas=null,this._context=null,this._contextSaved=!1,this._notSupportCanvas=!1,this._notSupportVRender=!1,this._userSpec={},this.specialCharSet=`-/: .,@%'"~`,this._option=t,this._userSpec=e??{},this.textSpec=this._initSpec(),Lt(t.specialCharSet)&&(this.specialCharSet=t.specialCharSet),this._standardMethod=Lt(t.getTextBounds)?this.fullMeasure.bind(this):this.measureWithNaiveCanvas.bind(this)}initContext(){if(this._notSupportCanvas)return!1;if(fe(this._canvas)&&(Lt(this._option.getCanvasForMeasure)&&(this._canvas=this._option.getCanvasForMeasure()),fe(this._canvas)&&typeof window<"u"&&window.document!==void 0&&globalThis&&Lt(globalThis.document)&&(this._canvas=globalThis.document.createElement("canvas"))),fe(this._context)&&Lt(this._canvas)){const t=this._canvas.getContext("2d");Lt(t)&&(t.save(),t.font=f8t(this.textSpec),this._contextSaved=!0,this._context=t)}return!fe(this._context)||(this._notSupportCanvas=!0,!1)}_initSpec(){var t,e,i;const{defaultFontParams:r={}}=this._option,{fontStyle:o=r.fontStyle,fontVariant:a=r.fontVariant,fontWeight:s=(t=r.fontWeight)!==null&&t!==void 0?t:"normal",fontSize:l=(e=r.fontSize)!==null&&e!==void 0?e:12,fontFamily:h=(i=r.fontFamily)!==null&&i!==void 0?i:"sans-serif",align:u,textAlign:d=u??"center",baseline:c,textBaseline:f=c??"middle",ellipsis:g,limit:p}=this._userSpec;let{lineHeight:v=l}=this._userSpec;if(P3(v)&&v[v.length-1]==="%"){const m=Number.parseFloat(v.substring(0,v.length-1))/100;v=l*m}return{fontStyle:o,fontVariant:a,fontFamily:h,fontSize:l,fontWeight:s,textAlign:d,textBaseline:f,ellipsis:g,limit:p,lineHeight:v}}measure(t,e){switch(e){case"vrender":case"canopus":return this.fullMeasure(t);case"canvas":return this.measureWithNaiveCanvas(t);case"simple":return this.quickMeasureWithoutCanvas(t);default:return this.quickMeasure(t)}}fullMeasure(t){if(fe(t))return{width:0,height:0};if(fe(this._option.getTextBounds)||!this._notSupportVRender)return this.measureWithNaiveCanvas(t);const{fontFamily:e,fontSize:i,fontWeight:r,textAlign:o,textBaseline:a,ellipsis:s,limit:l,lineHeight:h}=this.textSpec;let u;try{const d=this._option.getTextBounds({text:t,fontFamily:e,fontSize:i,fontWeight:r,textAlign:o,textBaseline:a,ellipsis:!!s,maxLineWidth:l||1/0,lineHeight:h});u={width:d.width(),height:d.height()}}catch{this._notSupportVRender=!0,u=this.measureWithNaiveCanvas(t)}return u}measureWithNaiveCanvas(t){return this._measureReduce(t,this._measureWithNaiveCanvas.bind(this))}_measureWithNaiveCanvas(t){var e;if(!this.initContext())return this._quickMeasureWithoutCanvas(t);const i=this._context.measureText(t),{fontSize:r,lineHeight:o}=this.textSpec;return{width:i.width,height:(e=o)!==null&&e!==void 0?e:r,fontBoundingBoxAscent:i.fontBoundingBoxAscent,fontBoundingBoxDescent:i.fontBoundingBoxDescent}}quickMeasure(t){return this._measureReduce(t,this._quickMeasure.bind(this))}_quickMeasure(t){const e={width:0,height:0};for(let i=0;i<t.length;i++){const r=t[i];let o=this._measureSpecialChar(r);fe(o)&&cc.NUMBERS_CHAR_SET.includes(r)&&(o=this._measureNumberChar()),fe(o)&&["F","W"].includes(ej(r))&&(o=this._measureFullSizeChar()),fe(o)&&(o=this._measureLetterChar()),e.width+=o.width,e.height=Math.max(e.height,o.height),!fe(o.fontBoundingBoxAscent)&&(e.fontBoundingBoxAscent=o.fontBoundingBoxAscent),!fe(o.fontBoundingBoxDescent)&&(e.fontBoundingBoxDescent=o.fontBoundingBoxDescent)}return e}quickMeasureWithoutCanvas(t){return this._measureReduce(t,this._quickMeasureWithoutCanvas.bind(this))}_quickMeasureWithoutCanvas(t){var e;const i={width:0,height:0},{fontSize:r,lineHeight:o}=this.textSpec;for(let a=0;a<t.length;a++){const s=t[a],l=["F","W"].includes(ej(s))?1:.53;i.width+=l*r}return i.height=(e=o)!==null&&e!==void 0?e:r,i}_measureReduce(t,e){var i;const{fontSize:r,lineHeight:o}=this.textSpec,a={width:0,height:0};if(fe(t))return a;if(ni(t)){const s=t.filter(Lt).map((l=>l.toString()));return s.length===0?a:s.length===1?e(s[0]):{width:s.reduce(((l,h)=>Math.max(l,e(h).width)),0),height:s.length*(((i=o)!==null&&i!==void 0?i:r)+1)+1}}return e(t.toString())}_measureNumberChar(){if(fe(this._numberCharSize)){const t=this._standardMethod(cc.NUMBERS_CHAR_SET);this._numberCharSize={width:t.width/cc.NUMBERS_CHAR_SET.length,height:t.height,fontBoundingBoxAscent:t.fontBoundingBoxAscent,fontBoundingBoxDescent:t.fontBoundingBoxDescent}}return this._numberCharSize}_measureFullSizeChar(){return fe(this._fullCharSize)&&(this._fullCharSize=this._standardMethod(cc.FULL_SIZE_CHAR)),this._fullCharSize}_measureLetterChar(){if(fe(this._letterCharSize)){const t=this._standardMethod(cc.ALPHABET_CHAR_SET);this._letterCharSize={width:t.width/cc.ALPHABET_CHAR_SET.length,height:t.height,fontBoundingBoxAscent:t.fontBoundingBoxAscent,fontBoundingBoxDescent:t.fontBoundingBoxDescent}}return this._letterCharSize}_measureSpecialChar(t){return Lt(this._specialCharSizeMap[t])?this._specialCharSizeMap[t]:this.specialCharSet.includes(t)?(this._specialCharSizeMap[t]=this._standardMethod(t),this._specialCharSizeMap[t]):null}release(){Lt(this._canvas)&&(this._canvas=null),Lt(this._context)&&(this._contextSaved&&(this._context.restore(),this._contextSaved=!1),this._context=null)}};Rp.ALPHABET_CHAR_SET="abcdefghijklmnopqrstuvwxyz",Rp.NUMBERS_CHAR_SET="0123456789",Rp.FULL_SIZE_CHAR="";const ij=(n,t)=>Math.max(t.x1-n.x2,n.x1-t.x2,t.y1-n.y2,n.y1-t.y2),g8t=(n,t)=>{const e=[{x:Math.cos(n.angle),y:Math.sin(n.angle)},{x:-Math.sin(n.angle),y:Math.cos(n.angle)},{x:Math.cos(t.angle),y:Math.sin(n.angle)},{x:-Math.sin(t.angle),y:Math.cos(n.angle)}];function i(o,a,s){const l=o.getRotatedCorners().map((h=>h.x*a+h.y*s));return{min:Math.min(...l),max:Math.max(...l)}}let r=0;for(const o of e){const a=i(n,o.x,o.y),s=i(t,o.x,o.y);let l;l=a.max<s.min?s.min-a.max:s.max<a.min?a.min-s.max:0,r=Math.max(r,l)}return r};function p8t(n,t,e){const{x1:i,y1:r,x2:o,y2:a}=t;return e.onlyTranslate()?(n!==t&&n.setValue(t.x1,t.y1,t.x2,t.y2),n.translate(e.e,e.f),t):(n.clear(),n.add(e.a*i+e.c*r+e.e,e.b*i+e.d*r+e.f),n.add(e.a*o+e.c*r+e.e,e.b*o+e.d*r+e.f),n.add(e.a*o+e.c*a+e.e,e.b*o+e.d*a+e.f),n.add(e.a*i+e.c*a+e.e,e.b*i+e.d*a+e.f),t)}let Kat=class Zat{constructor(t){t?this.setValue(t.x1,t.y1,t.x2,t.y2):this.clear()}clone(){return new Zat(this)}clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this}empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE}equals(t){return this.x1===t.x1&&this.y1===t.y1&&this.x2===t.x2&&this.y2===t.y2}setValue(t=0,e=0,i=0,r=0){return this.x1=t,this.y1=e,this.x2=i,this.y2=r,this}set(t=0,e=0,i=0,r=0){return i<t?(this.x2=t,this.x1=i):(this.x1=t,this.x2=i),r<e?(this.y2=e,this.y1=r):(this.y1=e,this.y2=r),this}add(t=0,e=0){return t<this.x1&&(this.x1=t),e<this.y1&&(this.y1=e),t>this.x2&&(this.x2=t),e>this.y2&&(this.y2=e),this}expand(t=0){return ni(t)?(this.y1-=t[0],this.x2+=t[1],this.y2+=t[2],this.x1-=t[3]):(this.x1-=t,this.y1-=t,this.x2+=t,this.y2+=t),this}round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this}translate(t=0,e=0){return this.x1+=t,this.x2+=t,this.y1+=e,this.y2+=e,this}rotate(t=0,e=0,i=0){const r=this.rotatedPoints(t,e,i);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])}scale(t=0,e=0,i=0,r=0){const o=this.scalePoints(t,e,i,r);return this.clear().add(o[0],o[1]).add(o[2],o[3])}union(t){return t.x1<this.x1&&(this.x1=t.x1),t.y1<this.y1&&(this.y1=t.y1),t.x2>this.x2&&(this.x2=t.x2),t.y2>this.y2&&(this.y2=t.y2),this}intersect(t){return t.x1>this.x1&&(this.x1=t.x1),t.y1>this.y1&&(this.y1=t.y1),t.x2<this.x2&&(this.x2=t.x2),t.y2<this.y2&&(this.y2=t.y2),this}encloses(t){return t&&this.x1<=t.x1&&this.x2>=t.x2&&this.y1<=t.y1&&this.y2>=t.y2}alignsWith(t){return t&&(this.x1===t.x1||this.x2===t.x2||this.y1===t.y1||this.y2===t.y2)}intersects(t){return t&&!(this.x2<t.x1||this.x1>t.x2||this.y2<t.y1||this.y1>t.y2)}contains(t=0,e=0){return!(t<this.x1||t>this.x2||e<this.y1||e>this.y2)}containsPoint(t){return!(t.x<this.x1||t.x>this.x2||t.y<this.y1||t.y>this.y2)}width(){return this.empty()?0:this.x2-this.x1}height(){return this.empty()?0:this.y2-this.y1}scaleX(t=0){return this.x1*=t,this.x2*=t,this}scaleY(t=0){return this.y1*=t,this.y2*=t,this}transformWithMatrix(t){return p8t(this,this,t),this}copy(t){return this.x1=t.x1,this.y1=t.y1,this.x2=t.x2,this.y2=t.y2,this}rotatedPoints(t,e,i){const{x1:r,y1:o,x2:a,y2:s}=this,l=Math.cos(t),h=Math.sin(t),u=e-e*l+i*h,d=i-e*h-i*l;return[l*r-h*o+u,h*r+l*o+d,l*r-h*s+u,h*r+l*s+d,l*a-h*o+u,h*a+l*o+d,l*a-h*s+u,h*a+l*s+d]}scalePoints(t,e,i,r){const{x1:o,y1:a,x2:s,y2:l}=this;return[t*o+(1-t)*i,e*a+(1-e)*r,t*s+(1-t)*i,e*l+(1-e)*r]}},Hb=class extends Kat{};function dO(n,t,e){t/=100,e/=100;const i=(1-Math.abs(2*e-1))*t,r=i*(1-Math.abs(n/60%2-1)),o=e-i/2;let a=0,s=0,l=0;return 0<=n&&n<60?(a=i,s=r,l=0):60<=n&&n<120?(a=r,s=i,l=0):120<=n&&n<180?(a=0,s=i,l=r):180<=n&&n<240?(a=0,s=r,l=i):240<=n&&n<300?(a=r,s=0,l=i):300<=n&&n<360&&(a=i,s=0,l=r),a=Math.round(255*(a+o)),s=Math.round(255*(s+o)),l=Math.round(255*(l+o)),{r:a,g:s,b:l}}function L3(n,t,e){n/=255,t/=255,e/=255;const i=Math.min(n,t,e),r=Math.max(n,t,e),o=r-i;let a=0,s=0,l=0;return a=o===0?0:r===n?(t-e)/o%6:r===t?(e-n)/o+2:(n-t)/o+4,a=Math.round(60*a),a<0&&(a+=360),l=(r+i)/2,s=o===0?0:o/(1-Math.abs(2*l-1)),s=+(100*s).toFixed(1),l=+(100*l).toFixed(1),{h:a,s,l}}const v8t=/^#([0-9a-f]{3,8})$/,nj={transparent:4294967040},Hw={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function O1(n){return((n=Math.max(0,Math.min(255,Math.round(n)||0)))<16?"0":"")+n.toString(16)}function Jat(n){return pr(n)?new io(n>>16,n>>8&255,255&n,1):ni(n)?new io(n[0],n[1],n[2]):new io(255,255,255)}function m8t(n){return pr(n)?new io(n>>>24,n>>>16&255,n>>>8&255,255&n):ni(n)?new io(n[0],n[1],n[2],n[3]):new io(255,255,255,1)}function uk(n){return n<.04045?.0773993808*n:Math.pow(.9478672986*n+.0521327014,2.4)}function dk(n){return n<.0031308?12.92*n:1.055*Math.pow(n,.41666)-.055}const rj=(n,t)=>{const e=v8t.exec(n);if(t||e){const i=parseInt(e[1],16),r=e[1].length;return r===3?new io((i>>8&15)+((i>>8&15)<<4),(i>>4&15)+((i>>4&15)<<4),(15&i)+((15&i)<<4),1):r===6?Jat(i):r===8?new io(i>>24&255,i>>16&255,i>>8&255,(255&i)/255):null}};let zw=class fc{static Brighter(t,e=1){return e===1?t:new fc(t).brighter(e).toRGBA()}static SetOpacity(t,e=1){return e===1?t:new fc(t).setOpacity(e).toRGBA()}static getColorBrightness(t,e="hsl"){const i=t instanceof fc?t:new fc(t);switch(e){case"hsv":default:return i.getHSVBrightness();case"hsl":return i.getHSLBrightness();case"lum":return i.getLuminance();case"lum2":return i.getLuminance2();case"lum3":return i.getLuminance3();case"wcag":return i.getLuminanceWCAG()}}static parseColorString(t){if(Lt(nj[t]))return m8t(nj[t]);if(Lt(Hw[t]))return Jat(Hw[t]);const e=`${t}`.trim().toLowerCase(),i=rj(e);if(i!==void 0)return i;if(/^(rgb|RGB|rgba|RGBA)/.test(e)){const r=e.replace(/(?:\(|\)|rgba|RGBA|rgb|RGB)*/g,"").split(",");return new io(parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10),parseFloat(r[3]))}if(/^(hsl|HSL|hsla|HSLA)/.test(e)){const r=e.replace(/(?:\(|\)|hsla|HSLA|hsl|HSL)*/g,"").split(","),o=dO(parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10));return new io(o.r,o.g,o.b,parseFloat(r[3]))}}constructor(t){const e=fc.parseColorString(t);e?this.color=e:this.color=new io(255,255,255)}toRGBA(){return this.color.formatRgb()}toString(){return this.color.formatRgb()}toHex(){return this.color.formatHex()}toHsl(){return this.color.formatHsl()}brighter(t){const{r:e,g:i,b:r}=this.color;return this.color.r=Math.max(0,Math.min(255,Math.floor(e*t))),this.color.g=Math.max(0,Math.min(255,Math.floor(i*t))),this.color.b=Math.max(0,Math.min(255,Math.floor(r*t))),this}add(t){const{r:e,g:i,b:r}=this.color;return this.color.r+=Math.min(255,e+t.color.r),this.color.g+=Math.min(255,i+t.color.g),this.color.b+=Math.min(255,r+t.color.b),this}sub(t){return this.color.r=Math.max(0,this.color.r-t.color.r),this.color.g=Math.max(0,this.color.g-t.color.g),this.color.b=Math.max(0,this.color.b-t.color.b),this}multiply(t){const{r:e,g:i,b:r}=this.color;return this.color.r=Math.max(0,Math.min(255,Math.floor(e*t.color.r))),this.color.g=Math.max(0,Math.min(255,Math.floor(i*t.color.g))),this.color.b=Math.max(0,Math.min(255,Math.floor(r*t.color.b))),this}getHSVBrightness(){return Math.max(this.color.r,this.color.g,this.color.b)/255}getHSLBrightness(){return .5*(Math.max(this.color.r,this.color.g,this.color.b)/255+Math.min(this.color.r,this.color.g,this.color.b)/255)}setHsl(t,e,i){const r=this.color.opacity,o=L3(this.color.r,this.color.g,this.color.b),a=dO(fe(t)?o.h:No(t,0,360),fe(e)?o.s:e>=0&&e<=1?100*e:e,fe(i)?o.l:i<=1&&i>=0?100*i:i);return this.color=new io(a.r,a.g,a.b,r),this}setRGB(t,e,i){return!fe(t)&&(this.color.r=t),!fe(e)&&(this.color.g=e),!fe(i)&&(this.color.b=i),this}setHex(t){const e=`${t}`.trim().toLowerCase(),i=rj(e,!0);return i??this}setColorName(t){const e=Hw[t.toLowerCase()];return e!==void 0&&this.setHex(e),this}setScalar(t){return this.color.r=t,this.color.g=t,this.color.b=t,this}setOpacity(t=1){return this.color.opacity=t,this}getLuminance(){return(.2126*this.color.r+.7152*this.color.g+.0722*this.color.b)/255}getLuminance2(){return(.2627*this.color.r+.678*this.color.g+.0593*this.color.b)/255}getLuminance3(){return(.299*this.color.r+.587*this.color.g+.114*this.color.b)/255}getLuminanceWCAG(){const t=this.color.r/255,e=this.color.g/255,i=this.color.b/255;let r,o,a;return r=t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4),o=e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4),a=i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4),.2126*r+.7152*o+.0722*a}clone(){return new fc(this.color.toString())}copyGammaToLinear(t,e=2){return this.color.r=Math.pow(t.color.r,e),this.color.g=Math.pow(t.color.g,e),this.color.b=Math.pow(t.color.b,e),this}copyLinearToGamma(t,e=2){const i=e>0?1/e:1;return this.color.r=Math.pow(t.color.r,i),this.color.g=Math.pow(t.color.g,i),this.color.b=Math.pow(t.color.b,i),this}convertGammaToLinear(t){return this.copyGammaToLinear(this,t),this}convertLinearToGamma(t){return this.copyLinearToGamma(this,t),this}copySRGBToLinear(t){return this.color.r=uk(t.color.r),this.color.g=uk(t.color.g),this.color.b=uk(t.color.b),this}copyLinearToSRGB(t){return this.color.r=dk(t.color.r),this.color.g=dk(t.color.g),this.color.b=dk(t.color.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}},io=class{constructor(t,e,i,r){this.r=isNaN(+t)?255:Math.max(0,Math.min(255,+t)),this.g=isNaN(+e)?255:Math.max(0,Math.min(255,+e)),this.b=isNaN(+i)?255:Math.max(0,Math.min(255,+i)),Lt(r)?this.opacity=isNaN(+r)?1:Math.max(0,Math.min(1,+r)):this.opacity=1}formatHex(){return`#${O1(this.r)+O1(this.g)+O1(this.b)+(this.opacity===1?"":O1(255*this.opacity))}`}formatRgb(){const t=this.opacity;return`${t===1?"rgb(":"rgba("}${this.r},${this.g},${this.b}${t===1?")":`,${t})`}`}formatHsl(){const t=this.opacity,{h:e,s:i,l:r}=L3(this.r,this.g,this.b);return`${t===1?"hsl(":"hsla("}${e},${i}%,${r}%${t===1?")":`,${t})`}`}toString(){return this.formatHex()}};function y8t(n){let t="",e="",i="";const r=n[0]==="#"?1:0;for(let o=r;o<n.length;o++)n[o]!=="#"&&(o<r+2?t+=n[o]:o<r+4?e+=n[o]:o<r+6&&(i+=n[o]));return[parseInt(t,16),parseInt(e,16),parseInt(i,16)]}function b8t(n,t,e){return Number((1<<24)+(n<<16)+(t<<8)+e).toString(16).slice(1)}function _8t(n,t){const e=n.r,i=t.r,r=n.g,o=t.g,a=n.b,s=t.b,l=n.opacity,h=t.opacity;return u=>{const d=Math.round(e*(1-u)+i*u),c=Math.round(r*(1-u)+o*u),f=Math.round(a*(1-u)+s*u);return new io(d,c,f,l*(1-u)+h*u)}}const C8t=Object.freeze(Object.defineProperty({__proto__:null,Color:zw,DEFAULT_COLORS:Hw,RGB:io,hexToRgb:y8t,hslToRgb:dO,interpolateRgb:_8t,rgbToHex:b8t,rgbToHsl:L3},Symbol.toStringTag,{value:"Module"}));function Pl(n){if(hn(n))return[n,n,n,n];if(ni(n)){const t=n.length;if(t===1){const e=n[0];return[e,e,e,e]}if(t===2){const[e,i]=n;return[e,i,e,i]}if(t===3){const[e,i,r]=n;return[e,i,r,i]}if(t===4)return n}if(Bs(n)){const{top:t=0,right:e=0,bottom:i=0,left:r=0}=n;return[t,e,i,r]}return[0,0,0,0]}const w8t=["x","y","dx","dy","scaleX","scaleY","angle","anchor","postMatrix","visible","clip","pickable","childrenPickable","zIndex","cursor"];class na extends _e{constructor(t,e){super(t),this._skipRenderAttributes=w8t,e?.mode&&(this.mode=e.mode,this.setMode(e.mode)),e?.skipDefault&&(this.skipDefault=!0),this.setTheme({common:{strokeBoundsBuffer:0}}),this.attribute=t,this.onSetStage((()=>{this.render(),this.bindEvents()}))}setAttribute(t,e,i,r){const o=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({[t]:e},this.attribute,t,r);if(o)return this._setAttributes(o,i);cy(this.attribute[t])&&cy(e)&&!Zi(this.attribute[t])&&!Zi(e)?Qt(this.attribute[t],e):this.attribute[t]=e,this._skipRenderAttributes.includes(t)||this.render(),this.valid=this.isValid(),this.updateShapeAndBoundsTagSetted()||!i&&!this.needUpdateTag(t)?this.addUpdateBoundTag():this.addUpdateShapeAndBoundsTag(),this.addUpdatePositionTag(),this.onAttributeUpdate()}setAttributes(t,e,i){return t=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate(t,this.attribute,null,i)||t,this._setAttributes(t,e)}_setAttributes(t,e){const i=Object.keys(t);this._mergeAttributes(t,i),i.every((r=>this._skipRenderAttributes.includes(r)))||this.render(),this.valid=this.isValid(),this.updateShapeAndBoundsTagSetted()||!e&&!this.needUpdateTags(i)?this.addUpdateBoundTag():this.addUpdateShapeAndBoundsTag(),this.addUpdatePositionTag(),this.onAttributeUpdate()}_mergeAttributes(t,e){fe(e)&&(e=Object.keys(t));for(let i=0;i<e.length;i++){const r=e[i];!cy(this.attribute[r])||Zi(this.attribute[r])||Zi(t[r])?this.attribute[r]=t[r]:Qt(this.attribute[r],t[r])}}bindEvents(){}_getNodeId(t){var e;return`${(e=this.id)!==null&&e!==void 0?e:this._uid}-${this.name}-${t}`}_dispatchEvent(t,e){var i;const r=new g3(t,e);r.manager=(i=this.stage)===null||i===void 0?void 0:i.eventSystem.manager,this.dispatchEvent(r)}eventPosToStagePos(t){var e,i;const r={x:0,y:0},o=(i=(e=this.stage)===null||e===void 0?void 0:e.eventPointTransform(t))!==null&&i!==void 0?i:{x:0,y:0};return this.globalTransMatrix.transformPoint(o,r),r}}const xd=Symbol.for("MathPickerContribution"),oj=Symbol.for("MathArcPicker"),aj=Symbol.for("MathCirclePicker"),nA=Symbol.for("MathImagePicker"),sj=Symbol.for("MathLinePicker"),lj=Symbol.for("MathPathPicker"),hj=Symbol.for("MathRectPicker"),uj=Symbol.for("MathSymbolPicker"),dj=Symbol.for("MathTextPicker"),cj=Symbol.for("MathPolygonPicker"),fj=Symbol.for("CanvasArcPicker"),gj=Symbol.for("CanvasCirclePicker"),pj=Symbol.for("CanvasImagePicker"),vj=Symbol.for("CanvasLinePicker"),mj=Symbol.for("CanvasPathPicker"),yj=Symbol.for("CanvasRectPicker"),bj=Symbol.for("CanvasSymbolPicker"),_j=Symbol.for("CanvasTextPicker"),Cj=Symbol.for("CanvasPolygonPicker"),wj=Symbol.for("CanvasRichTextPicker"),xj=Symbol.for("CanvasGroupPicker"),Bo=Symbol.for("CanvasPickerContribution"),E3=(n,t)=>Object.prototype.toString.call(n)===`[object ${t}]`,x8t=n=>typeof n=="function",ck=(n,t=!1)=>{const e=typeof n;return t?e==="string":e==="string"||E3(n,"String")},Qat=n=>Array.isArray?Array.isArray(n):E3(n,"Array"),D3=(n,t=!1)=>{const e=typeof n;return t?e==="number":e==="number"||E3(n,"Number")},Sj=n=>D3(n)&&Number.isFinite(n),S8t=typeof console<"u";function H1(n,t,e){const i=[t].concat([].slice.call(e))}var as;(function(n){n[n.None=0]="None",n[n.Error=1]="Error",n[n.Warn=2]="Warn",n[n.Info=3]="Info",n[n.Debug=4]="Debug"})(as||(as={}));let tst=class Oo{static getInstance(t,e){return Oo._instance&&D3(t)?Oo._instance.level(t):Oo._instance||(Oo._instance=new Oo(t,e)),Oo._instance}static setInstance(t){return Oo._instance=t}static setInstanceLevel(t){Oo._instance?Oo._instance.level(t):Oo._instance=new Oo(t)}static clearInstance(){Oo._instance=null}constructor(t=as.None,e){this._onErrorHandler=[],this._level=t,this._method=e}addErrorHandler(t){this._onErrorHandler.find((e=>e===t))||this._onErrorHandler.push(t)}removeErrorHandler(t){const e=this._onErrorHandler.findIndex((i=>i===t));e<0||this._onErrorHandler.splice(e,1)}callErrorHandler(...t){this._onErrorHandler.forEach((e=>e(...t)))}canLogInfo(){return this._level>=as.Info}canLogDebug(){return this._level>=as.Debug}canLogError(){return this._level>=as.Error}canLogWarn(){return this._level>=as.Warn}level(t){return arguments.length?(this._level=+t,this):this._level}error(...t){var e;return this._level>=as.Error&&(this._onErrorHandler.length?this.callErrorHandler(...t):H1((e=this._method)!==null&&e!==void 0?e:"error","ERROR",t)),this}warn(...t){return this._level>=as.Warn&&H1(this._method||"warn","WARN",t),this}info(...t){return this._level>=as.Info&&H1(this._method||"log","INFO",t),this}debug(...t){return this._level>=as.Debug&&H1(this._method||"log","DEBUG",t),this}};tst._instance=null;const A8t=Math.PI,Aj=2*Math.PI;function T8t(n){return 180*n/Math.PI}function Tj(n,t={},e){e||(e=1);const{fontStyle:i=t.fontStyle,fontVariant:r=t.fontVariant,fontWeight:o=t.fontWeight,fontSize:a=t.fontSize,fontFamily:s=t.fontFamily}=n;return(i?i+" ":"")+(r?r+" ":"")+(o?o+" ":"")+a*e+"px "+(s||"sans-serif")}function M8t(n,t,e){const{x1:i,y1:r,x2:o,y2:a}=t;return e.onlyTranslate()?(n!==t&&n.setValue(t.x1,t.y1,t.x2,t.y2),n.translate(e.e,e.f),t):(n.clear(),n.add(e.a*i+e.c*r+e.e,e.b*i+e.d*r+e.f),n.add(e.a*o+e.c*r+e.e,e.b*o+e.d*r+e.f),n.add(e.a*o+e.c*a+e.e,e.b*o+e.d*a+e.f),n.add(e.a*i+e.c*a+e.e,e.b*i+e.d*a+e.f),t)}let R8t=class est{constructor(t){t?this.setValue(t.x1,t.y1,t.x2,t.y2):this.clear()}clone(){return new est(this)}clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this}empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE}equals(t){return this.x1===t.x1&&this.y1===t.y1&&this.x2===t.x2&&this.y2===t.y2}setValue(t=0,e=0,i=0,r=0){return this.x1=t,this.y1=e,this.x2=i,this.y2=r,this}set(t=0,e=0,i=0,r=0){return i<t?(this.x2=t,this.x1=i):(this.x1=t,this.x2=i),r<e?(this.y2=e,this.y1=r):(this.y1=e,this.y2=r),this}add(t=0,e=0){return t<this.x1&&(this.x1=t),e<this.y1&&(this.y1=e),t>this.x2&&(this.x2=t),e>this.y2&&(this.y2=e),this}expand(t=0){return Qat(t)?(this.y1-=t[0],this.x2+=t[1],this.y2+=t[2],this.x1-=t[3]):(this.x1-=t,this.y1-=t,this.x2+=t,this.y2+=t),this}round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this}translate(t=0,e=0){return this.x1+=t,this.x2+=t,this.y1+=e,this.y2+=e,this}rotate(t=0,e=0,i=0){const r=this.rotatedPoints(t,e,i);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])}scale(t=0,e=0,i=0,r=0){const o=this.scalePoints(t,e,i,r);return this.clear().add(o[0],o[1]).add(o[2],o[3])}union(t){return t.x1<this.x1&&(this.x1=t.x1),t.y1<this.y1&&(this.y1=t.y1),t.x2>this.x2&&(this.x2=t.x2),t.y2>this.y2&&(this.y2=t.y2),this}intersect(t){return t.x1>this.x1&&(this.x1=t.x1),t.y1>this.y1&&(this.y1=t.y1),t.x2<this.x2&&(this.x2=t.x2),t.y2<this.y2&&(this.y2=t.y2),this}encloses(t){return t&&this.x1<=t.x1&&this.x2>=t.x2&&this.y1<=t.y1&&this.y2>=t.y2}alignsWith(t){return t&&(this.x1===t.x1||this.x2===t.x2||this.y1===t.y1||this.y2===t.y2)}intersects(t){return t&&!(this.x2<t.x1||this.x1>t.x2||this.y2<t.y1||this.y1>t.y2)}contains(t=0,e=0){return!(t<this.x1||t>this.x2||e<this.y1||e>this.y2)}containsPoint(t){return!(t.x<this.x1||t.x>this.x2||t.y<this.y1||t.y>this.y2)}width(){return this.empty()?0:this.x2-this.x1}height(){return this.empty()?0:this.y2-this.y1}scaleX(t=0){return this.x1*=t,this.x2*=t,this}scaleY(t=0){return this.y1*=t,this.y2*=t,this}transformWithMatrix(t){return M8t(this,this,t),this}copy(t){return this.x1=t.x1,this.y1=t.y1,this.x2=t.x2,this.y2=t.y2,this}rotatedPoints(t,e,i){const{x1:r,y1:o,x2:a,y2:s}=this,l=Math.cos(t),h=Math.sin(t),u=e-e*l+i*h,d=i-e*h-i*l;return[l*r-h*o+u,h*r+l*o+d,l*r-h*s+u,h*r+l*s+d,l*a-h*o+u,h*a+l*o+d,l*a-h*s+u,h*a+l*s+d]}scalePoints(t,e,i,r){const{x1:o,y1:a,x2:s,y2:l}=this;return[t*o+(1-t)*i,e*a+(1-e)*r,t*s+(1-t)*i,e*l+(1-e)*r]}},I3=class extends R8t{};class cl{constructor(t=1,e=0,i=0,r=1,o=0,a=0){this.a=t,this.b=e,this.c=i,this.d=r,this.e=o,this.f=a}equalToMatrix(t){return!(this.e!==t.e||this.f!==t.f||this.a!==t.a||this.d!==t.d||this.b!==t.b||this.c!==t.c)}equalTo(t,e,i,r,o,a){return!(this.e!==o||this.f!==a||this.a!==t||this.d!==r||this.b!==e||this.c!==i)}setValue(t,e,i,r,o,a){return this.a=t,this.b=e,this.c=i,this.d=r,this.e=o,this.f=a,this}reset(){return this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0,this}getInverse(){const t=this.a,e=this.b,i=this.c,r=this.d,o=this.e,a=this.f,s=new cl,l=t*r-e*i;return s.a=r/l,s.b=-e/l,s.c=-i/l,s.d=t/l,s.e=(i*a-r*o)/l,s.f=-(t*a-e*o)/l,s}rotate(t){const e=Math.cos(t),i=Math.sin(t),r=this.a*e+this.c*i,o=this.b*e+this.d*i,a=this.a*-i+this.c*e,s=this.b*-i+this.d*e;return this.a=r,this.b=o,this.c=a,this.d=s,this}rotateByCenter(t,e,i){const r=Math.cos(t),o=Math.sin(t),a=(1-r)*e+o*i,s=(1-r)*i-o*e,l=r*this.a-o*this.b,h=o*this.a+r*this.b,u=r*this.c-o*this.d,d=o*this.c+r*this.d,c=r*this.e-o*this.f+a,f=o*this.e+r*this.f+s;return this.a=l,this.b=h,this.c=u,this.d=d,this.e=c,this.f=f,this}scale(t,e){return this.a*=t,this.b*=t,this.c*=e,this.d*=e,this}setScale(t,e){return this.b=this.b/this.a*t,this.c=this.c/this.d*e,this.a=t,this.d=e,this}transform(t,e,i,r,o,a){return this.multiply(t,e,i,r,o,a),this}translate(t,e){return this.e+=this.a*t+this.c*e,this.f+=this.b*t+this.d*e,this}transpose(){const{a:t,b:e,c:i,d:r,e:o,f:a}=this;return this.a=e,this.b=t,this.c=r,this.d=i,this.e=a,this.f=o,this}multiply(t,e,i,r,o,a){const s=this.a,l=this.b,h=this.c,u=this.d,d=s*t+h*e,c=l*t+u*e,f=s*i+h*r,g=l*i+u*r,p=s*o+h*a+this.e,v=l*o+u*a+this.f;return this.a=d,this.b=c,this.c=f,this.d=g,this.e=p,this.f=v,this}interpolate(t,e){const i=new cl;return i.a=this.a+(t.a-this.a)*e,i.b=this.b+(t.b-this.b)*e,i.c=this.c+(t.c-this.c)*e,i.d=this.d+(t.d-this.d)*e,i.e=this.e+(t.e-this.e)*e,i.f=this.f+(t.f-this.f)*e,i}transformPoint(t,e){const{a:i,b:r,c:o,d:a,e:s,f:l}=this,h=i*a-r*o,u=a/h,d=-r/h,c=-o/h,f=i/h,g=(o*l-a*s)/h,p=-(i*l-r*s)/h,{x:v,y:m}=t;e.x=v*u+m*c+g,e.y=v*d+m*f+p}onlyTranslate(t=1){return this.a===t&&this.b===0&&this.c===0&&this.d===t}clone(){return new cl(this.a,this.b,this.c,this.d,this.e,this.f)}toTransformAttrs(){const t=this.a,e=this.b,i=this.c,r=this.d,o=t*r-e*i,a={x:this.e,y:this.f,rotateDeg:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(t!==0||e!==0){const s=Math.sqrt(t*t+e*e);a.rotateDeg=e>0?Math.acos(t/s):-Math.acos(t/s),a.scaleX=s,a.scaleY=o/s,a.skewX=(t*i+e*r)/o,a.skewY=0}else if(i!==0||r!==0){const s=Math.sqrt(i*i+r*r);a.rotateDeg=Math.PI/2-(r>0?Math.acos(-i/s):-Math.acos(i/s)),a.scaleX=o/s,a.scaleY=s,a.skewX=0,a.skewY=(t*i+e*r)/o}return a.rotateDeg=T8t(a.rotateDeg),a}}const P8t={onPointerDown:"pointerdown",onPointerUp:"pointerup",onPointerUpOutside:"pointerupoutside",onPointerTap:"pointertap",onPointerOver:"pointerover",onPointerMove:"pointermove",onPointerEnter:"pointerenter",onPointerLeave:"pointerleave",onPointerOut:"pointerout",onMouseDown:"mousedown",onMouseUp:"mouseup",onMouseUpOutside:"mouseupoutside",onMouseMove:"mousemove",onMouseOver:"mouseover",onMouseOut:"mouseout",onMouseEnter:"mouseenter",onMouseLeave:"mouseleave",onPinch:"pinch",onPinchStart:"pinchstart",onPinchEnd:"pinchend",onPan:"pan",onPanStart:"panstart",onPanEnd:"panend",onDrag:"drag",onDragStart:"dragstart",onDragEnter:"dragenter",onDragLeave:"dragleave",onDragOver:"dragover",onDragEnd:"dragend",onRightDown:"rightdown",onRightUp:"rightup",onRightUpOutside:"rightupoutside",onTouchStart:"touchstart",onTouchEnd:"touchend",onTouchEndOutside:"touchendoutside",onTouchMove:"touchmove",onTouchCancel:"touchcancel",onPress:"press",onPressUp:"pressup",onPressEnd:"pressend",onSwipe:"swipe",onDrop:"drop",onWeel:"wheel",onClick:"click",onDblClick:"dblclick"},Mj=(n,t)=>{const e=t.x-n.x,i=t.y-n.y;return Math.abs(e)>Math.abs(i)?e>0?"right":"left":i>0?"down":"up"},z1=(n,t)=>{const e=Math.abs(t.x-n.x),i=Math.abs(t.y-n.y);return Math.sqrt(e*e+i*i)},B8t=n=>{const t=n.length;if(t===1)return{x:Math.round(n[0].x),y:Math.round(n[0].y)};let e=0,i=0,r=0;for(;r<t;)e+=n[r].x,i+=n[r].y,r++;return{x:Math.round(e/t),y:Math.round(i/t)}};class k8t extends ng{constructor(t,e={}){var i,r,o,a,s,l,h,u,d,c;super(),this.cachedEvents=[],this.startPoints=[],this.processEvent={},this.throttleTimer=0,this.emitThrottles=[],this.lastTapTarget=null,this.onStart=f=>{this.startTime=Uc.now();const{cachedEvents:g,startPoints:p}=this;f&&g.push(f.clone()),p.length=g.length;for(let v=0;v<g.length;v++){const{x:m,y}=g[v],b={x:m,y};p[v]=b}if(p.length!==1)this.startDistance=z1(p[0],p[1]),this.center=B8t([p[0],p[1]]);else{const v=g[0];this.pressTimeout=setTimeout((()=>{v.direction="none",v.deltaX=0,v.deltaY=0,v.points=p,this.triggerStartEvent("press",v),this.triggerEvent("press",v),this.eventType="press",this.direction="none",this.pressTimeout=null}),this.config.press.time)}},this.onMove=f=>{this.clearPressTimeout();const{startPoints:g,cachedEvents:p}=this;if(!g.length)return;const v=f.clone(),{x:m,y,pointerId:b}=v;for(let A=0,T=p.length;A<T;A++)if(b===p[A].pointerId){p[A]=v;break}const _={x:m,y},w=p.map((A=>({x:A.x,y:A.y}))),C=Uc.now();if(this.prevMoveTime=this.lastMoveTime,this.prevMovePoint=this.lastMovePoint,this.lastMoveTime=C,this.lastMovePoint=_,g.length===1){const A=g[0],T=m-A.x,M=y-A.y,R=this.direction||Mj(A,_);this.direction=R;const L=this.getEventType(_);return v.direction=R,v.deltaX=T,v.deltaY=M,v.points=w,this.triggerStartEvent(L,v),void this.triggerEvent(L,v)}const{startDistance:x}=this,S=z1(w[0],w[1]);v.scale=S/x,v.center=this.center,v.points=w,this.triggerStartEvent("pinch",v),this.triggerEvent("pinch",v)},this.onEnd=f=>{const g=f.clone(),{cachedEvents:p,startPoints:v}=this,m=p.map((y=>({x:y.x,y:y.y})));if(g.points=m,this.triggerEndEvent(g),p.length===1){const y=Uc.now(),b=this.lastMoveTime;if(y-b<100){const _=b-(this.prevMoveTime||this.startTime);if(_>0){const w=this.prevMovePoint||v[0],C=this.lastMovePoint||v[0],x=z1(w,C),S=x/_;if(S>this.config.swipe.velocity&&x>this.config.swipe.threshold)return g.velocity=S,g.direction=Mj(w,C),this.triggerEvent("swipe",g),this.cachedEvents=[],this.startPoints=[],void this.reset()}}y-this.startTime<this.config.press.time&&(y-this.lastTapTime<this.config.tap.interval&&f.target===this.lastTapTarget?this.tapCount++:this.tapCount=1,this.lastTapTime=y,this.lastTapTarget=f.target,this.tapCount===1?this.triggerEvent("tap",g):this.tapCount===2&&(this.triggerEvent("doubletap",g),this.tapCount=0))}for(let y=0,b=p.length;y<b;y++)if(p[y].pointerId===g.pointerId){p.splice(y,1),v.splice(y,1);break}this.reset(),p.length>0&&this.onStart()},this.element=t,this.tapCount=0,this.lastTapTime=0,this.config={press:{time:(r=(i=e?.press)===null||i===void 0?void 0:i.time)!==null&&r!==void 0?r:251,threshold:(a=(o=e?.press)===null||o===void 0?void 0:o.threshold)!==null&&a!==void 0?a:9},swipe:{threshold:(l=(s=e?.swipe)===null||s===void 0?void 0:s.threshold)!==null&&l!==void 0?l:10,velocity:(u=(h=e?.swipe)===null||h===void 0?void 0:h.velocity)!==null&&u!==void 0?u:.3},tap:{interval:(c=(d=e?.tap)===null||d===void 0?void 0:d.interval)!==null&&c!==void 0?c:300}},this.initEvents()}initEvents(){const{element:t}=this;t&&(t.addEventListener("pointerdown",this.onStart),t.addEventListener("pointermove",this.onMove),t.addEventListener("pointerup",this.onEnd),t.addEventListener("pointerleave",this.onEnd),t.addEventListener("pointerupoutside",this.onEnd))}removeEvents(){const{element:t}=this;t&&(t.removeEventListener("pointerdown",this.onStart),t.removeEventListener("pointermove",this.onMove),t.removeEventListener("pointerup",this.onEnd),t.removeEventListener("pointerleave",this.onEnd),t.removeEventListener("pointerupoutside",this.onEnd))}release(){this.removeEvents(),this.element=null}getEventType(t){const{eventType:e,startTime:i,startPoints:r}=this;if(e==="press")return e;let o;return o=Uc.now()-i>this.config.press.time&&z1(r[0],t)<this.config.press.threshold?"press":"pan",this.eventType=o,o}enable(t){this.processEvent[t]=!0}isProcess(t){return this.processEvent[t]}pushEvent(t,e){const{emitThrottles:i}=this,r={type:t,ev:e};for(let o=0,a=i.length;o<a;o++)if(i[o].type===t)return void i.splice(o,1,r);i.push(r)}clearPressTimeout(){this.pressTimeout&&(clearTimeout(this.pressTimeout),this.pressTimeout=null)}reset(){this.clearPressTimeout(),this.startTime=0,this.startDistance=0,this.direction=null,this.eventType=null,this.prevMoveTime=0,this.prevMovePoint=null,this.lastMoveTime=0,this.lastMovePoint=null}triggerEvent(t,e){this.pushEvent(t,e);const{throttleTimer:i,emitThrottles:r}=this;i||(this.throttleTimer=St.global.getRequestAnimationFrame()((()=>{St.global.getCancelAnimationFrame()(this.throttleTimer),this.throttleTimer=null;for(let o=0,a=r.length;o<a;o++){const{type:s,ev:l}=r[o];this.emitEvent(s,l)}this.emitThrottles.length=0})))}triggerStartEvent(t,e){this.isProcess(t)||(this.enable(t),this.triggerEvent(`${t}start`,e))}triggerEndEvent(t){const e=this.processEvent;Object.keys(e).forEach((i=>{this.triggerEvent(`${i}end`,t),i==="press"&&this.triggerEvent(`${i}up`,t),delete e[i]}))}emitEvent(t,e){if(!this.element)return;const i=this.element._events[uat];if(i)if("fn"in i)i.fn.call(i.context,e,t);else for(let r=0,o=i.length;r<o&&!e.propagationImmediatelyStopped;r++)i[r].fn.call(i[r].context,e,t);this.emit(t,e)}}var L8t=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a},E8t=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)};const ye=[0,0,0],D8t=(n,t,e,i,r,o,a,s)=>{if(s)for(;e>t;)e-=Aj;else for(;e<t;)e+=Aj;const l=A8t/3*(e>t?1:-1);let h=t,u=h;for(;u!==e;){u=l>0?Math.min(u+l,e):Math.max(u+l,e);const d=Math.abs(u-h),c=4*Math.tan(d/4)/3,f=u<h?-1:1,g=Math.cos(h),p=Math.sin(h),v=Math.cos(u),m=Math.sin(u),y=g*o+i,b=p*a+r,_=v*o+i,w=m*a+r,C=o*c*f,x=a*c*f;n.push([y-C*p,b+x*g,_+C*m,w-x*v,_,w]),h=u}};let Pp=class{set fillStyle(n){this.nativeContext.fillStyle=n}get fillStyle(){return this.nativeContext.fillStyle}set font(n){n!==this._font&&(this._font=n,this.nativeContext.font=n)}get font(){var n;return(n=this._font)!==null&&n!==void 0?n:this.nativeContext.font}set globalAlpha(n){this.nativeContext.globalAlpha=n*this.baseGlobalAlpha}get globalAlpha(){return this.nativeContext.globalAlpha}set lineCap(n){this.nativeContext.lineCap=n}get lineCap(){return this.nativeContext.lineCap}set lineDashOffset(n){this.nativeContext.lineDashOffset=n}get lineDashOffset(){return this.nativeContext.lineDashOffset}set lineJoin(n){this.nativeContext.lineJoin=n}get lineJoin(){return this.nativeContext.lineJoin}set lineWidth(n){this.nativeContext.lineWidth=n}get lineWidth(){return this.nativeContext.lineWidth}set miterLimit(n){this.nativeContext.miterLimit=n}get miterLimit(){return this.nativeContext.miterLimit}set shadowBlur(n){this.nativeContext.shadowBlur=n}get shadowBlur(){return this.nativeContext.shadowBlur}set shadowColor(n){this.nativeContext.shadowColor=n}get shadowColor(){return this.nativeContext.shadowColor}set shadowOffsetX(n){this.nativeContext.shadowOffsetX=n}get shadowOffsetX(){return this.nativeContext.shadowOffsetX}set shadowOffsetY(n){this.nativeContext.shadowOffsetY=n}get shadowOffsetY(){return this.nativeContext.shadowOffsetY}set strokeStyle(n){this.nativeContext.strokeStyle=n}get strokeStyle(){return this.nativeContext.strokeStyle}set textAlign(n){this.nativeContext.textAlign=n}get textAlign(){return this.nativeContext.textAlign}set textBaseline(n){this.nativeContext.textBaseline=n}get textBaseline(){return this.nativeContext.textBaseline}get inuse(){return!!this._inuse}set inuse(n){n!==!!this._inuse&&(this._inuse=n,n?(this.nativeContext.save(),this.reset()):this.nativeContext.restore())}constructor(n,t){this.fillAttributes=Object.assign(Object.assign({},Kot),{opacity:1}),this.strokeAttributes=Object.assign(Object.assign({},Zot),{opacity:1}),this.textAttributes=Object.assign(Object.assign({},So),{opacity:1}),this._clearShadowStyle=!1,this._clearFilterStyle=!1,this._clearGlobalCompositeOperationStyle=!1;const e=n.nativeCanvas.getContext("2d");if(!e)throw new Error("2d");this.nativeContext=e,this.canvas=n,this.matrix=new cl(1,0,0,1,0,0),this.stack=[],this.dpr=t,this.applyedMatrix=new cl(1,0,0,1,0,0),this._clearMatrix=new cl(1,0,0,1,0,0),this.baseGlobalAlpha=1}reset(n=!0){this.stack.length&&tst.getInstance().warn("bugmatrix"),this.matrix.setValue(1,0,0,1,0,0),this.applyedMatrix=new cl(1,0,0,1,0,0),this.stack.length=0,n&&this.nativeContext.setTransform(1,0,0,1,0,0)}getCanvas(){return this.canvas}getContext(){return this.nativeContext}setTransformForCurrent(n=!1){!n&&this.applyedMatrix.equalToMatrix(this.matrix)||(this.applyedMatrix.setValue(this.matrix.a,this.matrix.b,this.matrix.c,this.matrix.d,this.matrix.e,this.matrix.f),this.nativeContext.setTransform(this.matrix.a,this.matrix.b,this.matrix.c,this.matrix.d,this.matrix.e,this.matrix.f))}get currentMatrix(){return this.matrix}cloneMatrix(n){return ar.allocateByObj(n)}clear(){this.save(),this.resetTransform(),this.nativeContext.clearRect(0,0,this.canvas.width,this.canvas.height),this.restore()}restore(){this.nativeContext.restore(),this.stack.length>0&&(ar.free(this.matrix),this.matrix=this.stack.pop(),this.setTransformForCurrent(!0)),this.font="",this._clearFilterStyle=!1,this._clearShadowStyle=!1}highPerformanceRestore(){this.stack.length>0&&(ar.free(this.matrix),this.matrix=this.stack.pop())}rotate(n,t=!0){this.matrix.rotate(n),t&&this.setTransformForCurrent()}save(){const n=this.cloneMatrix(this.matrix);this.stack.push(n),this.nativeContext.save()}highPerformanceSave(){const n=this.cloneMatrix(this.matrix);this.stack.push(n)}scale(n,t,e=!0){this.matrix.scale(n,t),e&&this.setTransformForCurrent()}setScale(n,t,e=!0){this.matrix.setScale(n,t),e&&this.setTransformForCurrent()}scalePoint(n,t,e,i,r=!0){this.translate(e,i,!1),this.scale(n,t,!1),this.translate(-e,-i,!1),r&&this.setTransformForCurrent()}setTransform(n,t,e,i,r,o,a=!0,s=this.dpr){this.matrix.setValue(s*n,s*t,s*e,s*i,s*r,s*o),a&&this.setTransformForCurrent()}setTransformFromMatrix(n,t=!0,e=this.dpr){this.matrix.setValue(n.a*e,n.b*e,n.c*e,n.d*e,n.e*e,n.f*e),t&&this.setTransformForCurrent()}resetTransform(n=!0,t=this.dpr){this.setTransform(t,0,0,t,0,0),n&&this.setTransformForCurrent()}transform(n,t,e,i,r,o,a=!0){this.matrix.multiply(n,t,e,i,r,o),a&&this.setTransformForCurrent()}transformFromMatrix(n,t){this.matrix.multiply(n.a,n.b,n.c,n.d,n.e,n.f),t&&this.setTransformForCurrent()}translate(n,t,e=!0){this.matrix.translate(n,t),e&&this.setTransformForCurrent()}rotateDegrees(n,t=!0){const e=n*Math.PI/180;this.rotate(e,t)}rotateAbout(n,t,e,i=!0){this.translate(t,e,!1),this.rotate(n,!1),this.translate(-t,-e,!1),i&&this.setTransformForCurrent()}rotateDegreesAbout(n,t,e,i=!0){this.translate(t,e,!1),this.rotateDegrees(n,!1),this.translate(-t,-e,!1),i&&this.setTransformForCurrent()}beginPath(){this.disableBeginPath||this.nativeContext.beginPath()}clip(n,t){n?typeof n=="string"?this.nativeContext.clip(n):this.nativeContext.clip(n,t):this.nativeContext.clip()}arc(n,t,e,i,r,o,a){if(a=a||0,this.camera){const s=[];D8t(s,i,r,n,t,e,e,o);for(let l=0;l<s.length;++l){const h=s[l];this.bezierCurveTo(h[0],h[1],h[2],h[3],h[4],h[5],a)}}else this.nativeContext.arc(n,t,Math.max(0,e),i,r,o)}arcTo(n,t,e,i,r){this.nativeContext.arcTo(n,t,e,i,r)}bezierCurveTo(n,t,e,i,r,o,a){if(a=a||0,this.camera){let s=a,l=a;this.modelMatrix&&(Qa(ye,[n,t,a],this.modelMatrix),n=ye[0],t=ye[1],s=ye[2],Qa(ye,[e,i,a],this.modelMatrix),e=ye[0],i=ye[1],l=ye[2],Qa(ye,[r,o,a],this.modelMatrix),r=ye[0],o=ye[1],a=ye[2]);let h=this.camera.vp(r,o,a);r=h.x,o=h.y,h=this.camera.vp(n,t,s),n=h.x,t=h.y,h=this.camera.vp(e,i,l),e=h.x,i=h.y}this.nativeContext.bezierCurveTo(n,t,e,i,r,o)}closePath(){this.nativeContext.closePath()}ellipse(n,t,e,i,r,o,a,s){s==null?this.nativeContext.ellipse(n,t,e,i,r,o,a):this.nativeContext.ellipse(n,t,e,i,r,o,a,s)}lineTo(n,t,e){if(e=e||0,this.camera){this.modelMatrix&&(Qa(ye,[n,t,e],this.modelMatrix),n=ye[0],t=ye[1],e=ye[2]);const i=this.camera.vp(n,t,e);n=i.x,t=i.y}this.nativeContext.lineTo(n,t)}moveTo(n,t,e){if(e=e||0,this.camera){this.modelMatrix&&(Qa(ye,[n,t,e],this.modelMatrix),n=ye[0],t=ye[1],e=ye[2]);const i=this.camera.vp(n,t,e);n=i.x,t=i.y}this.nativeContext.moveTo(n,t)}quadraticCurveTo(n,t,e,i,r){if(r=r||0,this.camera){let o=r;this.modelMatrix&&(Qa(ye,[n,t,r],this.modelMatrix),n=ye[0],t=ye[1],o=ye[2],Qa(ye,[e,i,r],this.modelMatrix),e=ye[0],i=ye[1],r=ye[2]);let a=this.camera.vp(e,i,r);e=a.x,i=a.y,a=this.camera.vp(n,t,o),n=a.x,t=a.y}this.nativeContext.quadraticCurveTo(n,t,e,i)}rect(n,t,e,i,r){r=r||0,this.camera?(this.moveTo(n,t,r),this.lineTo(n+e,t,r),this.lineTo(n+e,t+i,r),this.lineTo(n,t+i,r),this.closePath()):this.nativeContext.rect(n,t,e,i)}createImageData(){const n=arguments;return n.length===2?this.nativeContext.createImageData(n[0],n[1]):n.length===1?this.nativeContext.createImageData(n[0]):null}createLinearGradient(n,t,e,i){return isFinite(n+t+e+i)||(n=0,t=0,e=0,i=0),this.nativeContext.createLinearGradient(n,t,e,i)}createPattern(n,t){return n.width===0||n.height===0?null:this.nativeContext.createPattern(n,t)}createRadialGradient(n,t,e,i,r,o){return this.nativeContext.createRadialGradient(n,t,e,i,r,o)}createConicGradient(n,t,e,i){if(this.nativeContext.createConicGradient&&Math.abs(i-e-2*Math.PI)<.001)return this.nativeContext.createConicGradient(e,n,t);let r,o=!1;const a=this;return{stops:[],addColorStop(s,l){this.stops.push([s,l]),o=!0},GetPattern(s,l,h){return o&&(h||(h=i-e),r=H4t(a,this.stops,n,t,h,e,i,s,l),o=!1),r}}}fill(n,t){this.disableFill||(n?this.nativeContext.fill(n):this.nativeContext.fill())}fillRect(n,t,e,i){this.nativeContext.fillRect(n,t,e,i)}clearRect(n,t,e,i){this.nativeContext.clearRect(n,t,e,i)}project(n,t,e){if(e=e||0,this.camera){this.modelMatrix&&(Qa(ye,[n,t,e],this.modelMatrix),n=ye[0],t=ye[1],e=ye[2]);const i=this.camera.vp(n,t,e);n=i.x,t=i.y}return{x:n,y:t}}view(n,t,e){return e=e||0,this.camera?(this.modelMatrix&&(Qa(ye,[n,t,e],this.modelMatrix),n=ye[0],t=ye[1],e=ye[2]),this.camera.view(n,t,e)):[n,t,e]}fillText(n,t,e,i){if(i=i||0,this.camera){this.modelMatrix&&(Qa(ye,[t,e,i],this.modelMatrix),t=ye[0],e=ye[1],i=ye[2]);const r=this.camera.vp(t,e,i);t=r.x,e=r.y}this.nativeContext.fillText(n,t,e)}getImageData(n,t,e,i){return this.nativeContext.getImageData(n,t,e,i)}getLineDash(){return this.nativeContext.getLineDash()}isPointInPath(n,t){return this.nativeContext.isPointInPath(n,t)}isPointInStroke(n,t){return this.nativeContext.isPointInStroke(n,t)}measureText(n,t=St.global.measureTextMethod){var e,i;if(!t||t==="native")return this.nativeContext.measureText(n);this.mathTextMeasure||(this.mathTextMeasure=St.graphicUtil.createTextMeasureInstance({},{},(()=>this.canvas.nativeCanvas)));const r=(e=this.fontFamily)!==null&&e!==void 0?e:So.fontFamily,o=(i=this.fontSize)!==null&&i!==void 0?i:So.fontSize;return this.mathTextMeasure.textSpec.fontFamily===r&&this.mathTextMeasure.textSpec.fontSize===o||(this.mathTextMeasure.textSpec.fontFamily=r,this.mathTextMeasure.textSpec.fontSize=o,this.mathTextMeasure._numberCharSize=null,this.mathTextMeasure._fullCharSize=null,this.mathTextMeasure._letterCharSize=null,this.mathTextMeasure._specialCharSizeMap={}),this.mathTextMeasure.measure(n,t)}putImageData(n,t,e){this.nativeContext.putImageData(n,t,e)}setLineDash(n){const t=arguments,e=this.nativeContext;this.nativeContext.setLineDash?t[0]&&e.setLineDash(t[0]):"mozDash"in e?e.mozDash=t[0]:"webkitLineDash"in e&&(e.webkitLineDash=t[0])}stroke(n){this.disableStroke||(n?this.nativeContext.stroke(n):this.nativeContext.stroke())}strokeRect(n,t,e,i){this.nativeContext.strokeRect(n,t,e,i)}strokeText(n,t,e,i){if(i=i||0,this.camera){this.modelMatrix&&(Qa(ye,[t,e,i],this.modelMatrix),t=ye[0],e=ye[1],i=ye[2]);const r=this.camera.vp(t,e,i);t=r.x,e=r.y}this.nativeContext.strokeText(n,t,e)}drawImage(){const n=this.nativeContext,t=arguments;t.length===3?n.drawImage(t[0],t[1],t[2]):t.length===5?n.drawImage(t[0],t[1],t[2],t[3],t[4]):t.length===9&&n.drawImage(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}setCommonStyle(n,t,e,i,r){if(Array.isArray(r)){if(r.length<=1)return this._setCommonStyle(n,t,e,i,r[0]);const o=Object.create(r[0]);return r.forEach(((a,s)=>{s!==0&&Object.assign(o,a)})),this._setCommonStyle(n,t,e,i,o)}return this._setCommonStyle(n,t,e,i,r)}_setCommonStyle(n,t,e,i,r){const o=this.nativeContext;r||(r=this.fillAttributes);const{fillOpacity:a=r.fillOpacity,opacity:s=r.opacity,fill:l=r.fill}=t;o.globalAlpha=a*s*this.baseGlobalAlpha,a>1e-12&&s>1e-12&&(o.fillStyle=_S(this,l,n,e,i))}setShadowBlendStyle(n,t,e){if(Array.isArray(e)){if(e.length<=1)return this._setShadowBlendStyle(n,e[0]);const i=Object.create(e[0]);return e.forEach(((r,o)=>{o!==0&&Object.assign(i,r)})),this._setShadowBlendStyle(n,t,i)}return this._setShadowBlendStyle(n,t,e)}_setShadowBlendStyle(n,t,e){const i=this.nativeContext;e||(e=this.fillAttributes);const{opacity:r=e.opacity,shadowBlur:o=e.shadowBlur,shadowOffsetX:a=e.shadowOffsetX,shadowOffsetY:s=e.shadowOffsetY,blur:l=e.blur,globalCompositeOperation:h=e.globalCompositeOperation}=t;if(!(r<=1e-12)){if(a||s||o){const{shadowColor:u=e.shadowColor,shadowOffsetX:d=e.shadowOffsetX,shadowOffsetY:c=e.shadowOffsetY}=t;i.shadowBlur=o*this.dpr,i.shadowColor=u,i.shadowOffsetX=d*this.dpr,i.shadowOffsetY=c*this.dpr,this._clearShadowStyle=!0}else this._clearShadowStyle&&(i.shadowBlur=0,i.shadowOffsetX=0,i.shadowOffsetY=0);l?(i.filter=`blur(${l}px)`,this._clearFilterStyle=!0):this._clearFilterStyle&&(i.filter="blur(0px)",this._clearFilterStyle=!1),h?(i.globalCompositeOperation=h,this._clearGlobalCompositeOperationStyle=!0):this._clearGlobalCompositeOperationStyle&&(i.globalCompositeOperation="source-over",this._clearGlobalCompositeOperationStyle=!1)}}setStrokeStyle(n,t,e,i,r){if(Array.isArray(r)){if(r.length<=1)return this._setStrokeStyle(n,t,e,i,r[0]);const o=Object.create(r[0]);return r.forEach(((a,s)=>{s!==0&&Object.assign(o,a)})),this._setStrokeStyle(n,t,e,i,o)}return this._setStrokeStyle(n,t,e,i,r)}_setStrokeStyle(n,t,e,i,r){const o=this.nativeContext;r||(r=this.strokeAttributes);const{strokeOpacity:a=r.strokeOpacity,opacity:s=r.opacity}=t;if(o.globalAlpha=a*s*this.baseGlobalAlpha,a>1e-12&&s>1e-12){const{lineWidth:l=r.lineWidth,stroke:h=r.stroke,lineJoin:u=r.lineJoin,lineDash:d=r.lineDash,lineDashOffset:c=r.lineDashOffset,lineCap:f=r.lineCap,miterLimit:g=r.miterLimit,keepStrokeScale:p=r.keepStrokeScale}=t;o.lineWidth=p?l:Dl(this,l,this.dpr),o.strokeStyle=_S(this,h,n,e,i),o.lineJoin=u,d&&(o.setLineDash(d),o.lineDashOffset=c),o.lineCap=f,o.miterLimit=g}}setTextStyleWithoutAlignBaseline(n,t,e){const i=this.nativeContext;t||(t=this.textAttributes);const{scaleIn3d:r=t.scaleIn3d}=n;n.font?this.font=n.font:this.font=Tj(n,t,r&&this.camera&&this.camera.getProjectionScale(e));const{fontFamily:o=t.fontFamily,fontSize:a=t.fontSize}=n;this.fontFamily=o,this.fontSize=a,i.textAlign="left",i.textBaseline="alphabetic"}setTextStyle(n,t,e){var i,r;const o=this.nativeContext;t||(t=this.textAttributes),n.font?this.font=n.font:this.font=Tj(n,t,this.camera&&this.camera.getProjectionScale(e));const{fontFamily:a=t.fontFamily,fontSize:s=t.fontSize}=n;this.fontFamily=a,this.fontSize=s,o.textAlign=(i=n.textAlign)!==null&&i!==void 0?i:t.textAlign,o.textBaseline=(r=n.textBaseline)!==null&&r!==void 0?r:t.textBaseline}draw(){}clearMatrix(n=!0,t=this.dpr){this.setTransformFromMatrix(this._clearMatrix,n,t)}setClearMatrix(n,t,e,i,r,o){this._clearMatrix.setValue(n,t,e,i,r,o)}onlyTranslate(n=this.dpr){return this.matrix.a===n&&this.matrix.b===0&&this.matrix.c===0&&this.matrix.d===n}release(...n){this.stack.forEach((t=>ar.free(t))),this.stack.length=0}};Pp.env="browser",Pp=L8t([wt(),E8t("design:paramtypes",[Object,Number])],Pp);var I8t=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a},O8t=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)};let Bp=class extends C3{constructor(n){super(n)}init(n){const{container:t}=n;if(typeof t=="string"){const e=St.global.getElementById(t);e&&(this._container=e)}else this._container=t;this._context=new Pp(this,this._dpr),this.initStyle()}initStyle(){if(!this.controled)return;const{nativeCanvas:n}=this;n.width=this._pixelWidth,n.height=this._pixelHeight,!n.style||this.setCanvasStyle(n,this._x,this._y,this._displayWidth,this._displayHeight),this._container&&this._container.appendChild(n),this.visiable||this.hide()}hide(){this._nativeCanvas&&(this._nativeCanvas.style.display="none")}show(){this._nativeCanvas&&(this._nativeCanvas.style.display="block")}applyPosition(){const n=this._nativeCanvas;n.style.position="absolute",n.style.top=`${this._y}px`,n.style.left=`${this._x}px`}resetStyle(n){if(!this.controled)return;const{width:t=this._displayWidth,height:e=this._displayHeight,dpr:i=this._dpr,x:r=this._x,y:o=this._y}=n,{nativeCanvas:a}=this;a.width=t*i,a.height=e*i,!a.style||this.setCanvasStyle(a,r,o,t,e),n.id&&(a.id=n.id),this.visiable||this.hide()}setCanvasStyle(n,t,e,i,r){this.controled&&(n.style.width=`${i}px`,n.style.height=`${r}px`)}toDataURL(n,t){return n==="image/jpeg"?this._nativeCanvas.toDataURL(n,t):n==="image/png"?this._nativeCanvas.toDataURL(n):this._nativeCanvas.toDataURL(n,t)}resize(n,t){this.controled&&(this._pixelWidth=n*this._dpr,this._pixelHeight=t*this._dpr,this._displayWidth=n,this._displayHeight=t,this._nativeCanvas.style&&(this._nativeCanvas.style.width=`${n}px`,this._nativeCanvas.style.height=`${t}px`),this._nativeCanvas.width=this._pixelWidth,this._nativeCanvas.height=this._pixelHeight,this._context.dpr=this._dpr)}};Bp.env="browser",Bp=I8t([wt(),O8t("design:paramtypes",[Object])],Bp);function ist(n,t){return new ie((e=>{e(nat).toDynamicValue((()=>i=>new n(i))).whenTargetNamed(n.env),e(k5t).toDynamicValue((()=>(i,r)=>new t(i,r))).whenTargetNamed(t.env)}))}const H8t=ist(Bp,Pp);var z8t=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a},F8t=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},Jd=function(n,t){return function(e,i){t(e,i,n)}};let dp=class extends sO{constructor(n,t,e,i){super(e,i),this.contributions=n,this.drawContribution=t,this.pickItemInterceptorContributions=e,this.pickServiceInterceptorContributions=i,this.global.hooks.onSetEnv.tap("canvas-picker-service",((r,o,a)=>{this.configure(a,o)})),this.configure(this.global,this.global.env),this.pickerMap=new Map,this.init()}init(){this.contributions.getContributions().forEach((n=>{this.pickerMap.set(n.numberType,n)})),super._init()}configure(n,t){this.pickCanvas=vf.shareCanvas(),this.pickContext=this.pickCanvas.getContext("2d")}pickItem(n,t,e,i){if(n.attribute.pickable===!1)return null;if(this.InterceptorContributions.length)for(let l=0;l<this.InterceptorContributions.length;l++){const h=this.InterceptorContributions[l];if(h.beforePickItem){const u=h.beforePickItem(n,this,t,i,{parentMatrix:e});if(u)return u}}const r=this.pickerMap.get(n.numberType);if(!r)return null;const o=r.contains(n,t,i),a=o?n:null,s={graphic:a,params:o};if(a)return s;if(this.InterceptorContributions.length)for(let l=0;l<this.InterceptorContributions.length;l++){const h=this.InterceptorContributions[l];if(h.afterPickItem){const u=h.afterPickItem(n,this,t,i,{parentMatrix:e});if(u)return u}}return s}};dp=z8t([wt(),Jd(0,Ce(Qi)),Jd(0,Ln(Bo)),Jd(1,Ce(M3)),Jd(2,Ce(Qi)),Jd(2,Ln(sp)),Jd(3,Ce(Qi)),Jd(3,Ln(GS)),F8t("design:paramtypes",[Object,Object,Object,Object])],dp);var N8t=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a};let cO=class{constructor(){this.type="group",this.numberType=v3}contains(n,t,e){return!1}};cO=N8t([wt()],cO);const rA=new ie(((n,t,e,i)=>{rA.__vloaded||(rA.__vloaded=!0,n(xj).to(cO).inSingletonScope(),n(Bo).toService(xj),wr(n,Bo))}));rA.__vloaded=!1;const W8t=new ie(((n,t,e,i)=>{e(dp)||n(dp).toSelf().inSingletonScope(),e(Mp)?i(Mp).toService(dp):n(Mp).toService(dp)}));function V8t(n){n.load(rA),n.load(W8t)}var E0,G8t=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a},$8t=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)};let Au=E0=class extends JS{get container(){return this.canvas.nativeCanvas.parentElement}static GenerateCanvasId(){return`${E0.idprefix}_${E0.prefix_count++}`}constructor(){super(),this.type="browser",this._canvasIsIntersecting=!0,this.global=St.global,this.viewBox=new I3,this.modelMatrix=new cl(1,0,0,1,0,0)}getTitle(){return this.canvas.id&&this.canvas.id.toString()}getWH(){return{width:this.canvas.width/(this.canvas.dpr||1),height:this.canvas.height/(this.canvas.dpr||1)}}getXY(){return this.canvas.nativeCanvas.getBoundingClientRect()}createWindow(n){n.canvas?this.createWindowByCanvas(n):this.createWindowByConfig(n),this.postInit()}postInit(){if(this.global.optimizeVisible)try{this.observerCanvas()}catch{}}isElementVisible(n){const t=n.getBoundingClientRect(),e=window.innerWidth||document.documentElement.clientWidth,i=window.innerHeight||document.documentElement.clientHeight;return!(t.right<0||t.bottom<0||t.left>e||t.top>i)}observerCanvas(){this._canvasIsIntersecting=this.isElementVisible(this.canvas.nativeCanvas);const n=new IntersectionObserver(((t,e)=>{t.forEach((i=>{this._canvasIsIntersecting!==i.isIntersecting?(this._canvasIsIntersecting=i.isIntersecting,this._onVisibleChangeCb&&this._onVisibleChangeCb(i.isIntersecting)):this._canvasIsIntersecting=i.isIntersecting}))}));n&&n.observe(this.canvas.nativeCanvas)}createWindowByConfig(n){const t=this.global.createCanvas({width:n.width,height:n.height});let e;if(e=typeof n.container=="string"?this.global.getElementById(n.container):n.container?n.container:this.global.getRootElement(),!e)throw new Error("containerId");n.offscreen?e=null:e.appendChild(t);const i={width:n.width,height:n.height,dpr:n.dpr,nativeCanvas:t,container:e,id:E0.GenerateCanvasId(),canvasControled:!0};this.canvas=new Bp(i)}createWindowByCanvas(n){var t;let e;if(typeof n.canvas=="string"){if(e=this.global.getElementById(n.canvas),!e)throw new Error("canvasId canvasdom")}else e=n.canvas;if(!e)throw new Error("canvas");let i=n.width,r=n.height;if(i==null||r==null||!n.canvasControled){const a=e.getBoundingClientRect();i=a.width,r=a.height}let o=n.dpr;o==null&&(o=(t=e.getContext("2d").pixelRatio)!==null&&t!==void 0?t:e.width/i),this.canvas=new Bp({width:i,height:r,dpr:o,nativeCanvas:e,canvasControled:n.canvasControled})}releaseWindow(){this.canvas.release()}resizeWindow(n,t){this.canvas.resize(n,t)}setDpr(n){this.canvas.dpr=n}getContext(){return this.canvas.getContext()}getNativeHandler(){return this.canvas}getDpr(){return this.canvas.dpr}addEventListener(n,t,e){return this.canvas.nativeCanvas.addEventListener(n,t,e)}removeEventListener(n,t,e){return this.canvas.nativeCanvas.removeEventListener(n,t,e)}dispatchEvent(n){return this.canvas.nativeCanvas.dispatchEvent(n)}getStyle(){var n;return(n=this.canvas.nativeCanvas.style)!==null&&n!==void 0?n:{}}setStyle(n){this.canvas.nativeCanvas.style=n}getBoundingClientRect(){const n=this.canvas.nativeCanvas,t=this.getWH();return n.parentElement?this.canvas.nativeCanvas.getBoundingClientRect():{x:0,y:0,width:t.width,height:t.height,left:0,top:0,right:0,bottom:0}}clearViewBox(n){const t=this.viewBox,e=this.getContext(),i=this.getDpr();e.nativeContext.save(),e.nativeContext.setTransform(i,0,0,i,0,0),e.clearRect(t.x1,t.y1,t.x2-t.x1,t.y2-t.y1),n&&(e.fillStyle=n,e.fillRect(t.x1,t.y1,t.x2-t.x1,t.y2-t.y1)),e.nativeContext.restore()}isVisible(n){return this._canvasIsIntersecting}onVisibleChange(n){this._onVisibleChangeCb=n}getTopLeft(n){return this.global.getElementTopLeft(this.canvas.nativeCanvas,n)}};Au.env="browser",Au.idprefix="visactor_window",Au.prefix_count=0,Au=E0=G8t([wt(),$8t("design:paramtypes",[])],Au);const j8t=new ie((n=>{n(Au).toSelf(),n(f3).toDynamicValue((t=>t.container.get(Au))).whenTargetNamed(Au.env)}));var U8t=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a},Y8t=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},X8t=function(n,t,e,i){return new(e||(e=Promise))((function(r,o){function a(h){try{l(i.next(h))}catch(u){o(u)}}function s(h){try{l(i.throw(h))}catch(u){o(u)}}function l(h){var u;h.done?r(h.value):(u=h.value,u instanceof e?u:new e((function(d){d(u)}))).then(a,s)}l((i=i.apply(n,t||[])).next())}))};class q8t{get x1(){return this.dom.getBoundingClientRect().left}get x2(){return this.dom.getBoundingClientRect().right}get y1(){return this.dom.getBoundingClientRect().top}get y2(){return this.dom.getBoundingClientRect().bottom}get width(){return this.dom.getBoundingClientRect().width}get height(){return this.dom.getBoundingClientRect().height}constructor(t){this.dom=t}}function Rj(n,t=!1){const e=document.createElement("img");if(St.global.isImageAnonymous&&(e.crossOrigin="anonymous"),t){const i=new Blob([n],{type:"image/svg+xml"});n=window.URL.createObjectURL(i)}return e.src=n,e.complete?Promise.resolve(e):new Promise(((i,r)=>{e.onload=()=>{i(e)},e.onerror=()=>{r(new Error(""))}}))}let oA=class extends ZS{constructor(){super(),this.type="browser",this.supportEvent=!0;try{this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.supportsMouseEvents=!!globalThis.MouseEvent}catch{this.supportsTouchEvents=!1,this.supportsPointerEvents=!1,this.supportsPointerEvents=!1}this.applyStyles=!0}mapToCanvasPoint(n,t){var e,i;let r=0,o=0,a=0,s=0;if(n.changedTouches){const l=(e=n.changedTouches[0])!==null&&e!==void 0?e:{};r=l.clientX||0,o=l.clientY||0,a=r,s=o}else r=n.clientX||0,o=n.clientY||0,a=n.offsetX||0,s=n.offsetY||0;if(t){const l=r,h=o,u=t.getBoundingClientRect(),d=(i=t.getNativeHandler)===null||i===void 0?void 0:i.call(t).nativeCanvas;let c,f;return d&&(c=u.width/d.offsetWidth,f=u.height/d.offsetHeight),{x:(l-u.left)/(Sj(c)?c:1),y:(h-u.top)/(Sj(f)?f:1)}}return{x:a,y:s}}getNativeAABBBounds(n){let t=n;if(typeof n=="string"&&(t=new DOMParser().parseFromString(n,"text/html").firstChild,t.lastChild&&(t=t.lastChild.firstChild)),t.getBoundingClientRect){const e=t.getBoundingClientRect();return new q8t(e)}return new I3}removeDom(n){return n.parentElement.removeChild(n),!0}updateDom(n,t){const{width:e,height:i,style:r}=t;return r&&(ck(r)?n.setAttribute("style",r):Object.keys(r).forEach((o=>{n.style[o]=r[o]}))),e!=null&&(n.style.width=`${e}px`),i!=null&&(n.style.height=`${i}px`),!0}createDom(n){const{tagName:t="div",parent:e}=n,i=document.createElement(t);if(this.updateDom(i,n),e){const r=ck(e)?this.getElementById(e):e;r&&r.appendChild&&r.appendChild(i)}return i}loadImage(n){return Rj(n,!1).then((t=>({data:t,loadState:"success"}))).catch((()=>({data:null,loadState:"fail"})))}loadSvg(n){return Rj(n,!0).then((t=>({data:t,loadState:"success"}))).catch((()=>({data:null,loadState:"fail"})))}createCanvas(n){var t,e;const i=document.createElement("canvas");n.id&&(i.id=(t=n.id)!==null&&t!==void 0?t:pn.GenAutoIncrementId().toString());const r=(e=n.dpr)!==null&&e!==void 0?e:window.devicePixelRatio;return n.width&&n.height&&(i.style.width=`${n.width}px`,i.style.height=`${n.height}px`,i.width=n.width*r,i.height=n.height*r),i}createOffscreenCanvas(n){var t;const e=(t=n.dpr)!==null&&t!==void 0?t:window.devicePixelRatio;return new OffscreenCanvas(n.width*e,n.height*e)}releaseCanvas(n){let t;t=typeof n=="string"?document.getElementById(n):n,t&&t.parentElement&&t.parentElement.removeChild(t)}getDevicePixelRatio(){return window.devicePixelRatio}getRequestAnimationFrame(){return window.requestAnimationFrame}getCancelAnimationFrame(){return window.cancelAnimationFrame}addEventListener(n,t,e){return document.addEventListener(n,t,e)}removeEventListener(n,t,e){return document.removeEventListener(n,t,e)}dispatchEvent(n){return document.dispatchEvent(n)}getElementById(n){return document.getElementById(n)}getRootElement(){return document.body}getDocument(){return document}release(...n){}getElementTop(n,t){let e=n.offsetTop,i=n.offsetParent;for(;i!==null;)e+=i.offsetTop,i=i.offsetParent;return e}getElementLeft(n,t){let e=n.offsetLeft,i=n.offsetParent;for(;i!==null;)e+=i.offsetLeft,i=i.offsetParent;return e}getElementTopLeft(n,t){let e=n.offsetTop,i=n.offsetLeft,r=n.offsetParent;for(;r!==null;)e+=r.offsetTop,i+=r.offsetLeft,r=r.offsetParent;return{top:e,left:i}}loadFont(n,t,e){return X8t(this,void 0,void 0,(function*(){return new FontFace(n,ck(t)?`url(${t})`:t,e).load().then((function(i){return document.fonts.add(i),{loadState:"success"}})).catch((function(i){return{loadState:"fail"}}))}))}isMacOS(){if(this._isMacOS===void 0)try{this._isMacOS=navigator.platform.toUpperCase().indexOf("MAC")>=0}catch{this._isMacOS=!1}return this._isMacOS}copyToClipBoard(n){return navigator.clipboard.writeText(n).then((()=>{})).catch((t=>{}))}};oA=U8t([wt(),Y8t("design:paramtypes",[])],oA);const aA=new ie((n=>{aA.isBrowserBound||(aA.isBrowserBound=!0,n(oA).toSelf().inSingletonScope(),n(NM).toService(oA))}));aA.isBrowserBound=!1;function sA(n,t=!0){sA.__loaded||(sA.__loaded=!0,n.load(aA),n.load(H8t),n.load(j8t),t&&V8t(n))}sA.__loaded=!1;class Ol{contains(t,e,i){if(!t.AABBBounds.containsPoint(e))return!1;if(t.attribute.pickMode==="imprecise"||!this.canvasRenderer)return!0;const{pickContext:r}=i??{};if(!r)return!1;const o=t.getGraphicTheme();r.highPerformanceSave();let{x:a=o.x,y:s=o.y}=t.attribute;if(t.transMatrix.onlyTranslate()){const u=t.getOffsetXY(o);a+=u.x,s+=u.y,r.setTransformForCurrent()}else a=0,s=0,r.transformFromMatrix(t.transMatrix,!0);let l=!1,h=!1;return this.canvasRenderer.drawShape(t,r,a,s,{},null,((u,d,c,f)=>!(!l&&!h)||(l=u.isPointInPath(e.x,e.y),h=f||h,l)),((u,d,c,f)=>{if(l||h)return!0;const g=d.lineWidth||c.lineWidth,p=d.pickStrokeBuffer||c.pickStrokeBuffer,v=d.keepStrokeScale||c.keepStrokeScale;return r.lineWidth=v?g+p:Dl(r,g+p,r.dpr),l=u.isPointInStroke(e.x,e.y),h=f||h,l})),r.highPerformanceRestore(),l}}var K8t=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a},Z8t=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},J8t=function(n,t){return function(e,i){t(e,i,n)}};let fO=class extends Ol{constructor(n){super(),this.canvasRenderer=n,this.type="arc",this.numberType=jM}};fO=K8t([wt(),J8t(0,Ce(IS)),Z8t("design:paramtypes",[Object])],fO);let Pj=!1;const Q8t=new ie(((n,t,e,i)=>{Pj||(Pj=!0,n(oj).to(fO).inSingletonScope(),n(xd).toService(oj))}));var t9t=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a},e9t=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},i9t=function(n,t){return function(e,i){t(e,i,n)}};let gO=class extends Ol{constructor(n){super(),this.canvasRenderer=n,this.type="circle",this.numberType=UM}};gO=t9t([wt(),i9t(0,Ce(OS)),e9t("design:paramtypes",[Object])],gO);let Bj=!1;const n9t=new ie(((n,t,e,i)=>{Bj||(Bj=!0,n(aj).to(gO).inSingletonScope(),n(xd).toService(aj))}));var r9t=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a};let Pv=class{constructor(){this.type="image",this.numberType=YM}contains(n,t,e){const{pickContext:i}=e??{};return!!i&&!!n.AABBBounds.containsPoint(t)}};Pv=r9t([wt()],Pv);let kj=!1;const o9t=new ie(((n,t,e,i)=>{kj||(kj=!0,n(nA).to(Pv).inSingletonScope(),n(Pv).toService(nA))}));var a9t=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a},s9t=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},l9t=function(n,t){return function(e,i){t(e,i,n)}};let pO=class extends Ol{constructor(n){super(),this.canvasRenderer=n,this.type="line",this.numberType=E_}};pO=a9t([wt(),l9t(0,Ce(HS)),s9t("design:paramtypes",[Object])],pO);let Lj=!1;const h9t=new ie(((n,t,e,i)=>{Lj||(Lj=!0,n(sj).to(pO).inSingletonScope(),n(xd).toService(sj))}));var u9t=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a},d9t=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},c9t=function(n,t){return function(e,i){t(e,i,n)}};let vO=class extends Ol{constructor(n){super(),this.canvasRenderer=n,this.type="polygon",this.numberType=qM}};vO=u9t([wt(),c9t(0,Ce(FS)),d9t("design:paramtypes",[Object])],vO);let Ej=!1;const f9t=new ie(((n,t,e,i)=>{Ej||(Ej=!0,n(cj).to(vO).inSingletonScope(),n(xd).toService(cj))}));var g9t=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a},p9t=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},v9t=function(n,t){return function(e,i){t(e,i,n)}};let mO=class extends Ol{constructor(n){super(),this.canvasRenderer=n,this.type="path",this.numberType=XM}};mO=g9t([wt(),v9t(0,Ce(zS)),p9t("design:paramtypes",[Object])],mO);let Dj=!1;const m9t=new ie(((n,t,e,i)=>{Dj||(Dj=!0,n(lj).to(mO).inSingletonScope(),n(xd).toService(lj))})),fk=new I3;class nst{constructor(){this.type="rect",this.numberType=m3}contains(t,e,i){if(!t.AABBBounds.containsPoint(e))return!1;if(t.attribute.pickMode==="imprecise")return!0;const{pickContext:r}=i??{};if(!r)return!1;const o=t.getGraphicTheme(),{cornerRadius:a=o.cornerRadius}=t.attribute;let{x:s=o.x,y:l=o.y}=t.attribute;r.highPerformanceSave();let h=!0;if(t.transMatrix.onlyTranslate()){const d=t.getOffsetXY(o);s+=d.x,l+=d.y,r.setTransformForCurrent()}else s=0,l=0,h=!1,r.transformFromMatrix(t.transMatrix,!0);let u=!0;if(!h||t.shadowRoot||D3(a,!0)&&a!==0||Qat(a)&&a.some((d=>d!==0)))u=!1,this.canvasRenderer.drawShape(t,r,s,l,{},null,((d,c,f)=>!!u||(u=d.isPointInPath(e.x,e.y),u)),((d,c,f)=>{if(u)return!0;const g=c.lineWidth||f.lineWidth,p=c.pickStrokeBuffer||f.pickStrokeBuffer,v=c.keepStrokeScale||f.keepStrokeScale;return r.lineWidth=v?g+p:Dl(r,g+p,r.dpr),u=d.isPointInStroke(e.x,e.y),u}));else{const{fill:d=o.fill,stroke:c=o.stroke,lineWidth:f=o.lineWidth}=t.attribute;if(d)u=!0;else if(c){const g=t.AABBBounds;fk.setValue(g.x1,g.y1,g.x2,g.y2),fk.expand(-f/2),u=!fk.containsPoint(e)}}return r.highPerformanceRestore(),u}}var y9t=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a},b9t=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},_9t=function(n,t){return function(e,i){t(e,i,n)}};let yO=class extends nst{constructor(n){super(),this.canvasRenderer=n}};yO=y9t([wt(),_9t(0,Ce(NS)),b9t("design:paramtypes",[Object])],yO);let Ij=!1;const C9t=new ie(((n,t,e,i)=>{Ij||(Ij=!0,n(hj).to(yO).inSingletonScope(),n(xd).toService(hj))}));let Oj=!1;const w9t=new ie(((n,t,e,i)=>{Oj||(Oj=!0,n(nA).to(Pv).inSingletonScope(),n(Pv).toService(nA))}));var x9t=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a},S9t=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},A9t=function(n,t){return function(e,i){t(e,i,n)}};let bO=class extends Ol{constructor(n){super(),this.canvasRenderer=n,this.type="symbol",this.numberType=KM}};bO=x9t([wt(),A9t(0,Ce(WS)),S9t("design:paramtypes",[Object])],bO);let Hj=!1;const T9t=new ie(((n,t,e,i)=>{Hj||(Hj=!0,n(uj).to(bO).inSingletonScope(),n(xd).toService(uj))}));var M9t=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a};let _O=class{constructor(){this.type="text",this.numberType=ZM}contains(n,t,e){return!!n.AABBBounds.containsPoint(t)}};_O=M9t([wt()],_O);let zj=!1;const R9t=new ie(((n,t,e,i)=>{zj||(zj=!0,n(dj).to(_O).inSingletonScope(),n(xd).toService(dj))}));var P9t=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a},B9t=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)};let fy=class extends Pp{constructor(n,t){super(n,t);const e=n.nativeCanvas.getContext("2d");if(!e)throw new Error("2d");this.nativeContext=e,this.canvas=n,this.matrix=new cl(1,0,0,1,0,0),this.stack=[],this.dpr=t??1}release(...n){}};fy.env="node",fy=P9t([wt(),B9t("design:paramtypes",[Object,Number])],fy);var k9t=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a},L9t=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)};let kp=class extends C3{constructor(n){super(n)}init(){this._context=new fy(this,this._dpr),this.nativeCanvas.width=this._pixelWidth,this.nativeCanvas.height=this._pixelHeight}release(...n){this._nativeCanvas.release&&x8t(this._nativeCanvas.release)&&this._nativeCanvas.release()}};kp.env="node",kp=k9t([wt(),L9t("design:paramtypes",[Object])],kp);const E9t=ist(kp,fy);var D9t=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a},I9t=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},O9t=function(n,t){return function(e,i){t(e,i,n)}};let Lp=class extends JS{get container(){return null}constructor(n){super(),this.global=n,this.type="node"}getTitle(){return""}getWH(){return{width:this.canvas.displayWidth,height:this.canvas.displayHeight}}getXY(){return{x:0,y:0}}createWindow(n){n.canvas?this.createWindowByCanvas(n):this.createWindowByConfig(n)}createWindowByConfig(n){const t=this.global.createCanvas({width:n.width,height:n.height}),e={width:n.width,height:n.height,dpr:n.dpr,nativeCanvas:t,id:pn.GenAutoIncrementId().toString(),canvasControled:!0};this.canvas=new kp(e)}createWindowByCanvas(n){var t;const e=n.canvas,i=(t=n.dpr)!==null&&t!==void 0?t:1;let r=n.width,o=n.height;r!=null&&o!=null&&n.canvasControled||(r=e.width/i,o=e.height/i),this.canvas=new kp({width:r,height:o,dpr:i,nativeCanvas:e,canvasControled:n.canvasControled})}releaseWindow(){this.canvas.release()}resizeWindow(n,t){this.canvas.resize(n,t)}setDpr(n){this.canvas.dpr=n}getContext(){return this.canvas.getContext()}getNativeHandler(){return this.canvas}getDpr(){return this.canvas.dpr}getImageBuffer(n="image/png"){return this.canvas.nativeCanvas.toBuffer(n)}addEventListener(n,t,e){}dispatchEvent(n){return!0}removeEventListener(n,t,e){}getStyle(){}setStyle(n){}getBoundingClientRect(){return null}clearViewBox(n){}};Lp.env="node",Lp=D9t([wt(),O9t(0,Ce(a3)),I9t("design:paramtypes",[Object])],Lp);const H9t=new ie((n=>{n(Lp).toSelf(),n(f3).toDynamicValue((t=>t.container.get(Lp))).whenTargetNamed(Lp.env)}));var z9t=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a};let lA=class extends ZS{constructor(){super(...arguments),this.type="node",this._lastTime=0,this.supportEvent=!1}configure(n,t){n.env===this.type&&(n.setActiveEnvContribution(this),this.pkg=t)}getDynamicCanvasCount(){return 0}getStaticCanvasCount(){return 999}loadJson(n){const t=fetch(n).then((e=>e.json()));return t.then((e=>({data:e,state:"success"}))).catch((()=>({data:null,state:"fail"}))),t}loadArrayBuffer(n){return fetch(n).then((t=>t.arrayBuffer())).then((t=>({data:t,loadState:"success"}))).catch((()=>({data:null,loadState:"fail"})))}loadImage(n){const{loadImage:t}=this.pkg;return t?t(n).then((e=>({loadState:e?"success":"fail",data:e}))).catch((()=>({loadState:"fail",data:null}))):Promise.reject(new Error("node-canvas loadImage could not be found!"))}loadSvg(n){const t=this.pkg.Resvg;if(!t)return Promise.reject(new Error("@resvg/resvg-js svgParser could not be found!"));const e=new t(n).render().asPng();return this.loadImage(e)}createCanvas(n){return this.pkg.createCanvas(n.width,n.height)}releaseCanvas(n){}getDevicePixelRatio(){return 1}getRequestAnimationFrame(){return function(n){return R7.call(n)}}getCancelAnimationFrame(){return n=>{R7.clear(n)}}addEventListener(n,t,e){}removeEventListener(n,t,e){}getElementById(n){return null}getRootElement(){return null}dispatchEvent(n){}release(...n){}createOffscreenCanvas(n){}};lA=z9t([wt()],lA);const hA=new ie((n=>{hA.isNodeBound||(hA.isNodeBound=!0,n(lA).toSelf().inSingletonScope(),n(NM).toService(lA))}));hA.isNodeBound=!1;function uA(n,t=!0){uA.__loaded||(uA.__loaded=!0,n.load(hA),n.load(E9t),n.load(H9t))}uA.__loaded=!1;var F9t=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a},N9t=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},W9t=function(n,t){return function(e,i){t(e,i,n)}};let CO=class extends Ol{constructor(n){super(),this.canvasRenderer=n,this.type="arc",this.numberType=jM}};CO=F9t([wt(),W9t(0,Ce(IS)),N9t("design:paramtypes",[Object])],CO);let Fj=!1;const V9t=new ie(((n,t,e,i)=>{Fj||(Fj=!0,n(fj).to(CO).inSingletonScope(),n(Bo).toService(fj))}));var G9t=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a},$9t=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},j9t=function(n,t){return function(e,i){t(e,i,n)}};let wO=class extends nst{constructor(n){super(),this.canvasRenderer=n}};wO=G9t([wt(),j9t(0,Ce(NS)),$9t("design:paramtypes",[Object])],wO);let Nj=!1;const U9t=new ie(((n,t,e,i)=>{Nj||(Nj=!0,n(yj).to(wO).inSingletonScope(),n(Bo).toService(yj))}));class rst extends ko{contains(t,e,i){if(!t.AABBBounds.containsPoint(e))return!1;if(t.attribute.pickMode==="imprecise")return!0;const{pickContext:r}=i??{};if(!r)return!1;r.highPerformanceSave();const o=t.getGraphicTheme(),a=this.transform(t,o,r),{x:s,y:l,z:h,lastModelMatrix:u}=a;let d=e;if(r.camera){d=e.clone();const f=t.parent.globalTransMatrix;d.x=f.a*e.x+f.c*e.y+f.e,d.y=f.b*e.x+f.d*e.y+f.f}this.canvasRenderer.z=h;let c=!1;return this.canvasRenderer.drawShape(t,r,s,l,{},null,(f=>!!c||(c=f.isPointInPath(d.x,d.y),c)),((f,g,p)=>{if(c)return!0;const v=g.lineWidth||p.lineWidth,m=g.pickStrokeBuffer||p.pickStrokeBuffer,y=g.keepStrokeScale||p.keepStrokeScale;return r.lineWidth=y?v+m:Dl(r,v+m,r.dpr),c=f.isPointInStroke(d.x,d.y),c})),this.canvasRenderer.z=0,r.modelMatrix!==u&&Tn.free(r.modelMatrix),r.modelMatrix=u,r.highPerformanceRestore(),c}}var Y9t=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a},X9t=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},q9t=function(n,t){return function(e,i){t(e,i,n)}};let xO=class extends rst{constructor(n){super(),this.canvasRenderer=n,this.type="line",this.numberType=E_}};xO=Y9t([wt(),q9t(0,Ce(HS)),X9t("design:paramtypes",[Object])],xO);let Wj=!1;const K9t=new ie(((n,t,e,i)=>{Wj||(Wj=!0,n(vj).to(xO).inSingletonScope(),n(Bo).toService(vj))}));class ost extends ko{contains(t,e,i){const{pickContext:r}=i??{};if(!r)return!1;const o=t.getGraphicTheme();r.highPerformanceSave();const a=this.transform(t,o,r),{x:s,y:l,z:h,lastModelMatrix:u}=a;let d=e;if(r.camera){d=e.clone();const f=t.parent.globalTransMatrix;d.x=f.a*e.x+f.c*e.y+f.e,d.y=f.b*e.x+f.d*e.y+f.f}this.canvasRenderer.z=h;let c=!1;return this.canvasRenderer.drawShape(t,r,s,l,i,null,((f,g,p)=>!!c||(c=f.isPointInPath(d.x,d.y),c))),this.canvasRenderer.z=0,r.modelMatrix!==u&&Tn.free(r.modelMatrix),r.modelMatrix=u,r.highPerformanceRestore(),c}}var Z9t=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a},J9t=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},Q9t=function(n,t){return function(e,i){t(e,i,n)}};let SO=class extends ost{constructor(n){super(),this.canvasRenderer=n,this.type="symbol",this.numberType=KM}contains(n,t,e){const{pickContext:i}=e??{};if(!i)return!1;const r=n.getParsedPath();if(!i.camera){if(!n.AABBBounds.containsPoint(t))return!1;if(r.isSvg||n.attribute.pickMode==="imprecise")return!0}i.highPerformanceSave();const o=n.getGraphicTheme(),a=this.transform(n,o,i),{x:s,y:l,z:h,lastModelMatrix:u}=a;let d=t;if(i.camera){d=t.clone();const f=n.parent.globalTransMatrix;d.x=f.a*t.x+f.c*t.y+f.e,d.y=f.b*t.x+f.d*t.y+f.f}this.canvasRenderer.z=h;let c=!1;return this.canvasRenderer.drawShape(n,i,s,l,{},null,((f,g,p)=>!!c||(c=f.isPointInPath(d.x,d.y),c)),((f,g,p)=>{if(c)return!0;const v=g.lineWidth||p.lineWidth,m=g.pickStrokeBuffer||p.pickStrokeBuffer,y=g.keepStrokeScale||p.keepStrokeScale;return i.lineWidth=y?v+m:Dl(i,v+m,i.dpr),c=f.isPointInStroke(d.x,d.y),c})),this.canvasRenderer.z=0,i.modelMatrix!==u&&Tn.free(i.modelMatrix),i.modelMatrix=u,i.highPerformanceRestore(),c}};SO=Z9t([wt(),Q9t(0,Ce(WS)),J9t("design:paramtypes",[Object])],SO);let Vj=!1;const t7t=new ie(((n,t,e,i)=>{Vj||(Vj=!0,n(bj).to(SO).inSingletonScope(),n(Bo).toService(bj))}));var e7t=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a},i7t=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},n7t=function(n,t){return function(e,i){t(e,i,n)}};let AO=class extends Ol{constructor(n){super(),this.canvasRenderer=n,this.type="circle",this.numberType=UM}};AO=e7t([wt(),n7t(0,Ce(OS)),i7t("design:paramtypes",[Object])],AO);let Gj=!1;const r7t=new ie(((n,t,e,i)=>{Gj||(Gj=!0,n(gj).to(AO).inSingletonScope(),n(Bo).toService(gj))}));var o7t=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a},a7t=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},s7t=function(n,t){return function(e,i){t(e,i,n)}};let TO=class extends ost{constructor(n){super(),this.canvasRenderer=n,this.type="text",this.numberType=ZM}contains(n,t,e){const{pickContext:i}=e??{};if(!i)return!1;const r=n.AABBBounds;if(!i.camera)return!!r.containsPoint(t);i.highPerformanceSave();const o=n.getGraphicTheme(),{keepDirIn3d:a=o.keepDirIn3d}=n.attribute,s=!a,l=this.transform(n,o,i,s),{x:h,y:u,z:d,lastModelMatrix:c}=l;this.canvasRenderer.z=d;let f=t;if(i.camera){f=t.clone();const p=n.parent.globalTransMatrix;f.x=p.a*t.x+p.c*t.y+p.e,f.y=p.b*t.x+p.d*t.y+p.f}let g=!1;return this.canvasRenderer.drawShape(n,i,h,u,{},null,((p,v,m)=>{if(g)return!0;const{fontSize:y=o.fontSize,textBaseline:b=o.textBaseline,textAlign:_=o.textAlign}=n.attribute,w=n.AABBBounds,C=w.height(),x=w.width(),S=Bb(b,C,y),A=Sv(_,x);return p.rect(A+h,S+u,x,C,d),g=p.isPointInPath(f.x,f.y),g}),((p,v,m)=>g)),this.canvasRenderer.z=0,i.modelMatrix!==c&&Tn.free(i.modelMatrix),i.modelMatrix=c,i.highPerformanceRestore(),g}};TO=o7t([wt(),s7t(0,Ce(QI)),a7t("design:paramtypes",[Object])],TO);let $j=!1;const l7t=new ie(((n,t,e,i)=>{$j||($j=!0,n(_j).to(TO).inSingletonScope(),n(Bo).toService(_j))}));var h7t=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a},u7t=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},d7t=function(n,t){return function(e,i){t(e,i,n)}};let MO=class extends rst{constructor(n){super(),this.canvasRenderer=n,this.type="path",this.numberType=XM}};MO=h7t([wt(),d7t(0,Ce(zS)),u7t("design:paramtypes",[Object])],MO);let jj=!1;const c7t=new ie(((n,t,e,i)=>{jj||(jj=!0,n(mj).to(MO).inSingletonScope(),n(Bo).toService(mj))}));var f7t=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a},g7t=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},p7t=function(n,t){return function(e,i){t(e,i,n)}};let RO=class extends Ol{constructor(n){super(),this.canvasRenderer=n,this.type="polygon",this.numberType=qM}};RO=f7t([wt(),p7t(0,Ce(FS)),g7t("design:paramtypes",[Object])],RO);let Uj=!1;const v7t=new ie(((n,t,e,i)=>{Uj||(Uj=!0,n(Cj).to(RO).inSingletonScope(),n(Bo).toService(Cj))}));var m7t=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a},y7t=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},b7t=function(n,t){return function(e,i){t(e,i,n)}};let PO=class{constructor(n){this.canvasRenderer=n,this.type="richtext",this.numberType=y3}contains(n,t,e){return!!n.AABBBounds.containsPoint(t)}};PO=m7t([wt(),b7t(0,Ce(tO)),y7t("design:paramtypes",[Object])],PO);let Yj=!1;const _7t=new ie(((n,t,e,i)=>{Yj||(Yj=!0,n(wj).to(PO).inSingletonScope(),n(Bo).toService(wj))}));var C7t=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a},w7t=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},x7t=function(n,t){return function(e,i){t(e,i,n)}};let BO=class extends Ol{constructor(n){super(),this.canvasRenderer=n,this.type="image",this.numberType=YM}};BO=C7t([wt(),x7t(0,Ce(eO)),w7t("design:paramtypes",[Object])],BO);let Xj=!1;const S7t=new ie(((n,t,e,i)=>{Xj||(Xj=!0,n(pj).to(BO).inSingletonScope(),n(Bo).toService(pj))}));var Yl={},gk={},Xl={},qj;function ast(){if(qj)return Xl;qj=1,Object.defineProperty(Xl,"__esModule",{value:!0}),Xl.loop=Xl.conditional=Xl.parse=void 0;var n=function i(r,o){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:a;if(Array.isArray(o))o.forEach(function(h){return i(r,h,a,s)});else if(typeof o=="function")o(r,a,s,i);else{var l=Object.keys(o)[0];Array.isArray(o[l])?(s[l]={},i(r,o[l],a,s[l])):s[l]=o[l](r,a,s,i)}return a};Xl.parse=n;var t=function(r,o){return function(a,s,l,h){o(a,s,l)&&h(a,r,s,l)}};Xl.conditional=t;var e=function(r,o){return function(a,s,l,h){for(var u=[],d=a.pos;o(a,s,l);){var c={};if(h(a,r,s,c),a.pos===d)break;d=a.pos,u.push(c)}return u}};return Xl.loop=e,Xl}var yn={},Kj;function sst(){if(Kj)return yn;Kj=1,Object.defineProperty(yn,"__esModule",{value:!0}),yn.readBits=yn.readArray=yn.readUnsigned=yn.readString=yn.peekBytes=yn.readBytes=yn.peekByte=yn.readByte=yn.buildStream=void 0;var n=function(d){return{data:d,pos:0}};yn.buildStream=n;var t=function(){return function(d){return d.data[d.pos++]}};yn.readByte=t;var e=function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return function(c){return c.data[c.pos+d]}};yn.peekByte=e;var i=function(d){return function(c){return c.data.subarray(c.pos,c.pos+=d)}};yn.readBytes=i;var r=function(d){return function(c){return c.data.subarray(c.pos,c.pos+d)}};yn.peekBytes=r;var o=function(d){return function(c){return Array.from(i(d)(c)).map(function(f){return String.fromCharCode(f)}).join("")}};yn.readString=o;var a=function(d){return function(c){var f=i(2)(c);return d?(f[1]<<8)+f[0]:(f[0]<<8)+f[1]}};yn.readUnsigned=a;var s=function(d,c){return function(f,g,p){for(var v=typeof c=="function"?c(f,g,p):c,m=i(d),y=new Array(v),b=0;b<v;b++)y[b]=m(f);return y}};yn.readArray=s;var l=function(d,c,f){for(var g=0,p=0;p<f;p++)g+=d[c+p]&&Math.pow(2,f-p-1);return g},h=function(d){return function(c){for(var f=t()(c),g=new Array(8),p=0;p<8;p++)g[7-p]=!!(f&1<<p);return Object.keys(d).reduce(function(v,m){var y=d[m];return y.length?v[m]=l(g,y.index,y.length):v[m]=g[y.index],v},{})}};return yn.readBits=h,yn}var Zj;function A7t(){return Zj||(Zj=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var t=ast(),e=sst(),i={blocks:function(c){for(var f=0,g=[],p=c.data.length,v=0,m=(0,e.readByte)()(c);m!==f&&m;m=(0,e.readByte)()(c)){if(c.pos+m>=p){var y=p-c.pos;g.push((0,e.readBytes)(y)(c)),v+=y;break}g.push((0,e.readBytes)(m)(c)),v+=m}for(var b=new Uint8Array(v),_=0,w=0;w<g.length;w++)b.set(g[w],_),_+=g[w].length;return b}},r=(0,t.conditional)({gce:[{codes:(0,e.readBytes)(2)},{byteSize:(0,e.readByte)()},{extras:(0,e.readBits)({future:{index:0,length:3},disposal:{index:3,length:3},userInput:{index:6},transparentColorGiven:{index:7}})},{delay:(0,e.readUnsigned)(!0)},{transparentColorIndex:(0,e.readByte)()},{terminator:(0,e.readByte)()}]},function(d){var c=(0,e.peekBytes)(2)(d);return c[0]===33&&c[1]===249}),o=(0,t.conditional)({image:[{code:(0,e.readByte)()},{descriptor:[{left:(0,e.readUnsigned)(!0)},{top:(0,e.readUnsigned)(!0)},{width:(0,e.readUnsigned)(!0)},{height:(0,e.readUnsigned)(!0)},{lct:(0,e.readBits)({exists:{index:0},interlaced:{index:1},sort:{index:2},future:{index:3,length:2},size:{index:5,length:3}})}]},(0,t.conditional)({lct:(0,e.readArray)(3,function(d,c,f){return Math.pow(2,f.descriptor.lct.size+1)})},function(d,c,f){return f.descriptor.lct.exists}),{data:[{minCodeSize:(0,e.readByte)()},i]}]},function(d){return(0,e.peekByte)()(d)===44}),a=(0,t.conditional)({text:[{codes:(0,e.readBytes)(2)},{blockSize:(0,e.readByte)()},{preData:function(c,f,g){return(0,e.readBytes)(g.text.blockSize)(c)}},i]},function(d){var c=(0,e.peekBytes)(2)(d);return c[0]===33&&c[1]===1}),s=(0,t.conditional)({application:[{codes:(0,e.readBytes)(2)},{blockSize:(0,e.readByte)()},{id:function(c,f,g){return(0,e.readString)(g.blockSize)(c)}},i]},function(d){var c=(0,e.peekBytes)(2)(d);return c[0]===33&&c[1]===255}),l=(0,t.conditional)({comment:[{codes:(0,e.readBytes)(2)},i]},function(d){var c=(0,e.peekBytes)(2)(d);return c[0]===33&&c[1]===254}),h=[{header:[{signature:(0,e.readString)(3)},{version:(0,e.readString)(3)}]},{lsd:[{width:(0,e.readUnsigned)(!0)},{height:(0,e.readUnsigned)(!0)},{gct:(0,e.readBits)({exists:{index:0},resolution:{index:1,length:3},sort:{index:4},size:{index:5,length:3}})},{backgroundColorIndex:(0,e.readByte)()},{pixelAspectRatio:(0,e.readByte)()}]},(0,t.conditional)({gct:(0,e.readArray)(3,function(d,c){return Math.pow(2,c.lsd.gct.size+1)})},function(d,c){return c.lsd.gct.exists}),{frames:(0,t.loop)([r,s,l,o,a],function(d){var c=(0,e.peekByte)()(d);return c===33||c===44})}],u=h;n.default=u})(gk)),gk}var e0={},Jj;function T7t(){if(Jj)return e0;Jj=1,Object.defineProperty(e0,"__esModule",{value:!0}),e0.deinterlace=void 0;var n=function(e,i){for(var r=new Array(e.length),o=e.length/i,a=function(f,g){var p=e.slice(g*i,(g+1)*i);r.splice.apply(r,[f*i,i].concat(p))},s=[0,4,2,1],l=[8,8,4,2],h=0,u=0;u<4;u++)for(var d=s[u];d<o;d+=l[u])a(d,h),h++;return r};return e0.deinterlace=n,e0}var i0={},Qj;function M7t(){if(Qj)return i0;Qj=1,Object.defineProperty(i0,"__esModule",{value:!0}),i0.lzw=void 0;var n=function(e,i,r){var o=4096,a=-1,s=r,l,h,u,d,c,f,g,x,p,v,C,m,S,A,M,T,y=new Array(r),b=new Array(o),_=new Array(o),w=new Array(o+1);for(m=e,h=1<<m,c=h+1,l=h+2,g=a,d=m+1,u=(1<<d)-1,p=0;p<h;p++)b[p]=0,_[p]=p;var C,x,S,A,T,M;for(C=x=S=A=T=M=0,v=0;v<s;){if(A===0){if(x<d){C+=i[M]<<x,x+=8,M++;continue}if(p=C&u,C>>=d,x-=d,p>l||p==c)break;if(p==h){d=m+1,u=(1<<d)-1,l=h+2,g=a;continue}if(g==a){w[A++]=_[p],g=p,S=p;continue}for(f=p,p==l&&(w[A++]=S,p=g);p>h;)w[A++]=_[p],p=b[p];S=_[p]&255,w[A++]=S,l<o&&(b[l]=g,_[l]=S,l++,(l&u)===0&&l<o&&(d++,u+=l)),g=f}A--,y[T++]=w[A],v++}for(v=T;v<s;v++)y[v]=0;return y};return i0.lzw=n,i0}var tU;function R7t(){if(tU)return Yl;tU=1,Object.defineProperty(Yl,"__esModule",{value:!0}),Yl.decompressFrames=Yl.decompressFrame=Yl.parseGIF=void 0;var n=o(A7t()),t=ast(),e=sst(),i=T7t(),r=M7t();function o(u){return u&&u.__esModule?u:{default:u}}var a=function(d){var c=new Uint8Array(d);return(0,t.parse)((0,e.buildStream)(c),n.default)};Yl.parseGIF=a;var s=function(d){for(var c=d.pixels.length,f=new Uint8ClampedArray(c*4),g=0;g<c;g++){var p=g*4,v=d.pixels[g],m=d.colorTable[v]||[0,0,0];f[p]=m[0],f[p+1]=m[1],f[p+2]=m[2],f[p+3]=v!==d.transparentIndex?255:0}return f},l=function(d,c,f){if(d.image){var g=d.image,p=g.descriptor.width*g.descriptor.height,v=(0,r.lzw)(g.data.minCodeSize,g.data.blocks,p);g.descriptor.lct.interlaced&&(v=(0,i.deinterlace)(v,g.descriptor.width));var m={pixels:v,dims:{top:d.image.descriptor.top,left:d.image.descriptor.left,width:d.image.descriptor.width,height:d.image.descriptor.height}};return g.descriptor.lct&&g.descriptor.lct.exists?m.colorTable=g.lct:m.colorTable=c,d.gce&&(m.delay=(d.gce.delay||10)*10,m.disposalType=d.gce.extras.disposal,d.gce.extras.transparentColorGiven&&(m.transparentIndex=d.gce.transparentColorIndex)),f&&(m.patch=s(m)),m}};Yl.decompressFrame=l;var h=function(d,c){return d.frames.filter(function(f){return f.image}).map(function(f){return l(f,d.gct,c)})};return Yl.decompressFrames=h,Yl}var eU=R7t();const Hl=R3();function dA(){dA.__loaded||(dA.__loaded=!0,TGt(),Kt.load(gGt),Kt.load(Hl?V9t:Q8t))}dA.__loaded=!1;const P7t=dA;function cA(){cA.__loaded||(cA.__loaded=!0,MGt(),Kt.load(yGt),Kt.load(Hl?r7t:n9t))}cA.__loaded=!1;const lst=cA;function fA(){fA.__loaded||(fA.__loaded=!0,RGt())}fA.__loaded=!1;const Lo=fA;function gA(){gA.__loaded||(gA.__loaded=!0,PGt(),Kt.load(AGt),Kt.load(Hl?S7t:o9t))}gA.__loaded=!1;const i2=gA;function pA(){pA.__loaded||(pA.__loaded=!0,BGt(),Kt.load(vGt),Kt.load(Hl?K9t:h9t))}pA.__loaded=!1;const O3=pA;function vA(){vA.__loaded||(vA.__loaded=!0,kGt(),Kt.load(_Gt),Kt.load(Hl?c7t:m9t))}vA.__loaded=!1;const B7t=vA;function mA(){mA.__loaded||(mA.__loaded=!0,LGt(),Kt.load(CGt),Kt.load(Hl?v7t:f9t))}mA.__loaded=!1;const k7t=mA;function yA(){yA.__loaded||(yA.__loaded=!0,EGt(),Kt.load(pGt),Kt.load(Hl?U9t:C9t))}yA.__loaded=!1;const Zh=yA;function bA(){bA.__loaded||(bA.__loaded=!0,DGt(),Kt.load(SGt),Kt.load(Hl?_7t:w9t))}bA.__loaded=!1;const n2=bA;function _A(){_A.__loaded||(_A.__loaded=!0,HGt())}_A.__loaded=!1;const L7t=_A;function CA(){CA.__loaded||(CA.__loaded=!0,IGt(),Kt.load(mGt),Kt.load(Hl?t7t:T9t))}CA.__loaded=!1;const rm=CA;function wA(){wA.__loaded||(wA.__loaded=!0,OGt(),Kt.load(bGt),Kt.load(Hl?l7t:R9t))}wA.__loaded=!1;const zl=wA;function xA(){xA.__loaded||(xA.__loaded=!0,zGt())}xA.__loaded=!1;const E7t=xA;function hst(){Lo(),Zh()}const ust="PingFang SC,Helvetica Neue,Microsoft Yahei,system-ui,-apple-system,segoe ui,Roboto,Helvetica,Arial,sans-serif,apple color emoji,segoe ui emoji,segoe ui symbol",D7t=14;var to;(function(n){n.selected="selected",n.selectedReverse="selected_reverse",n.hover="hover",n.hoverReverse="hover_reverse"})(to||(to={}));const Og={[to.selectedReverse]:{},[to.selected]:{},[to.hover]:{},[to.hoverReverse]:{}},iU={container:"",width:30,height:30,style:{}},I7t="scrollDown",O7t="scrollDrag",H7t="scrollUp";function gy(){return jt.env==="browser"?["pointerup","pointerleave","pointercancel"]:["pointerup","pointerleave","pointerupoutside"]}const nU={debounce:Yat,throttle:Xat};hst();class Gh extends na{constructor(t,e){super(e?.skipDefault?t:Qt({},Gh.defaultAttributes,t)),this.name="scrollbar",this._handleTouchMove=i=>{Lt(this._prePos)&&i.preventDefault()},this._onRailPointerDown=i=>{const{viewX:r,viewY:o}=i,{direction:a,width:s,height:l,range:h}=this.attribute,u=this._sliderSize,[d,c]=this._getScrollRange();let f;if(a==="vertical"){const g=o-this._viewPosition.y,p=No(g-u/2,d,c);f=g/l,this._slider.setAttribute("y",p,!0)}else{const g=r-this._viewPosition.x,p=No(g-u/2,d,c);f=g/s,this._slider.setAttribute("x",p,!0)}this.setScrollRange([f-(h[1]-h[0])/2,f+(h[1]-h[0])/2],!1),this.stage&&!this.stage.autoRender&&this.stage.renderNextFrame()},this._onSliderPointerDown=i=>{this._clearDragEvents();const{stopSliderDownPropagation:r=!0}=this.attribute;r&&i.stopPropagation();const{direction:o}=this.attribute,{x:a,y:s}=this.stage.eventPointTransform(i);this._prePos=o==="horizontal"?a:s,this._dispatchEvent(I7t,{pos:this._prePos,event:i});const l=gy(),h=jt.env==="browser"?jt:this.stage;h.addEventListener("pointermove",this._onSliderPointerMoveWithDelay,{capture:!0}),l.forEach((u=>{h.addEventListener(u,this._onSliderPointerUp)}))},this._computeScrollValue=i=>{const{direction:r}=this.attribute,{x:o,y:a}=this.stage.eventPointTransform(i);let s,l,h=0;const{width:u,height:d}=this.getSliderRenderBounds();return r==="vertical"?(l=a,h=l-this._prePos,s=h/d):(l=o,h=l-this._prePos,s=h/u),[l,s]},this._onSliderPointerMove=i=>{const{stopSliderMovePropagation:r=!0}=this.attribute;r&&i.stopPropagation();const o=this.getScrollRange(),[a,s]=this._computeScrollValue(i);this.setScrollRange([o[0]+s,o[1]+s],!0),this._prePos=a},this._onSliderPointerMoveWithDelay=this.attribute.delayTime===0?this._onSliderPointerMove:nU[this.attribute.delayType](this._onSliderPointerMove,this.attribute.delayTime),this._onSliderPointerUp=i=>{const{range:r,limitRange:o=[0,1]}=this.attribute,a=this.getScrollRange(),[s,l]=this._computeScrollValue(i),h=[a[0]+l,a[1]+l];this._prePos=null,this._dispatchEvent(H7t,{pre:r,value:dc(h,o[0],o[1])}),this._clearDragEvents()}}setScrollRange(t,e=!0){const{direction:i="horizontal",limitRange:r=[0,1],range:o,realTime:a=!0}=this.attribute,s=dc(t,r[0],r[1]);if(e){const l=this._getSliderPos(s);if(this._slider){const h=l[1]-l[0];this._sliderSize=h,i==="horizontal"?this._slider.setAttributes({x:l[0],width:h},!0):this._slider.setAttributes({y:l[0],height:h},!0),this.stage&&!this.stage.autoRender&&this.stage.renderNextFrame()}}this.attribute.range=s,a&&this._dispatchEvent(O7t,{pre:o,value:s})}getScrollRange(){return this.attribute.range}bindEvents(){if(this.attribute.disableTriggerEvent)return;const{delayType:t="throttle",delayTime:e=0}=this.attribute;this._rail&&this._rail.addEventListener("pointerdown",nU[t](this._onRailPointerDown,e)),this._slider&&this._slider.addEventListener("pointerdown",this._onSliderPointerDown),(jt.env==="browser"?jt:this.stage).addEventListener("touchmove",this._handleTouchMove,{passive:!1})}render(){this._reset();const{direction:t="horizontal",width:e,height:i,range:r,limitRange:o=[0,1],railStyle:a,sliderStyle:s,padding:l=2}=this.attribute,h=this.createOrUpdateChild("scrollbar-container",{},"group"),u=h.createOrUpdateChild("scrollbar-rail",Object.assign({x:0,y:0,width:e,height:i},a),"rect");this._rail=u;const d=this.getSliderRenderBounds(),c=this._getSliderPos(dc(r,o[0],o[1])),f=c[1]-c[0];let g;this._sliderSize=f,g=t==="horizontal"?{x:c[0],y:d.y1,width:f,height:d.height}:{x:d.x1,y:c[0],width:d.width,height:f};const p=h.createOrUpdateChild("slider",Object.assign(Object.assign(Object.assign(Object.assign({},g),{cornerRadius:this._getDefaultSliderCornerRadius()}),s),{boundsPadding:Pl(l),pickMode:"imprecise"}),"rect");this._slider=p,this._container=h;const v=this._container.AABBBounds;this._viewPosition={x:v.x1,y:v.y1}}getSliderRenderBounds(){if(this._sliderRenderBounds)return this._sliderRenderBounds;const{width:t,height:e,padding:i=2}=this.attribute,[r,o,a,s]=Pl(i),l={x1:s,y1:r,x2:t-o,y2:e-a,width:Math.max(0,t-(s+o)),height:Math.max(0,e-(r+a))};return this._sliderRenderBounds=l,l}_getDefaultSliderCornerRadius(){const{direction:t,round:e}=this.attribute;if(e){const{width:i,height:r}=this.getSliderRenderBounds();return t==="horizontal"?r:i}return 0}_getSliderPos(t){const{direction:e}=this.attribute,{width:i,height:r,x1:o,y1:a}=this.getSliderRenderBounds();return e==="horizontal"?[i*t[0]+o,i*t[1]+o]:[r*t[0]+a,r*t[1]+a]}_getScrollRange(){if(this._sliderLimitRange)return this._sliderLimitRange;const{limitRange:t=[0,1],direction:e}=this.attribute,[i,r]=dc(t,0,1),{width:o,height:a,x1:s,y1:l}=this.getSliderRenderBounds(),h=this._sliderSize;return e==="horizontal"?dc([s+i*o,s+r*o],s,o-h):dc([l+i*a,l+r*a],l,a-h)}_clearDragEvents(){const t=gy(),e=jt.env==="browser"?jt:this.stage;e.removeEventListener("pointermove",this._onSliderPointerMoveWithDelay,{capture:!0}),t.forEach((i=>{e.removeEventListener(i,this._onSliderPointerUp)}))}_reset(){this._sliderRenderBounds=null,this._sliderLimitRange=null}release(t){super.release(t),(jt.env==="browser"?jt:this.stage).addEventListener("touchmove",this._handleTouchMove,{passive:!1}),this._clearDragEvents()}}Gh.defaultAttributes={direction:"horizontal",round:!0,sliderSize:20,sliderStyle:{fill:"rgba(0, 0, 0, .5)"},railStyle:{fill:"rgba(0, 0, 0, .0)"},padding:2,scrollRange:[0,1],delayType:"throttle",delayTime:0,realTime:!0};function Wf(n,t){n.forEachChildren((e=>{const i=t(e);e.isContainer&&!i&&Wf(e,t)}))}function dst(n,t){return[n[0]*t,n[1]*t]}function cst(n){const[t,e]=n;return Math.sqrt(t*t+e*e)}function z7t(n){let t=cst(n);return t>0&&(t=1/t),[n[0]*t,n[1]*t]}function F7t(n,t){const[e,i]=n,[r,o]=t,a=Math.sqrt((e*e+i*i)*(r*r+o*o)),s=a&&(e*r+i*o)/a;return Math.acos(Math.min(Math.max(s,-1),1))}function N7t(n,t,e){const i=F7t(n,t),r=s8t(n,t)>=0;return e?r?2*Math.PI-i:i:r?i:2*Math.PI-i}const fst=(n,t,e,i)=>new Rp(Object.assign({defaultFontParams:Object.assign({fontFamily:ust,fontSize:D7t},i),getTextBounds:QM,specialCharSet:`-/: .,@%'"~`+Rp.ALPHABET_CHAR_SET+Rp.ALPHABET_CHAR_SET.toUpperCase()},{}),n);function r2(n,t,e={}){if(!n)return{width:0,height:0};const i=QM({text:n,fontFamily:t.fontFamily||e.fontFamily||ust,fontSize:t.fontSize||e.fontSize||12,fontWeight:t.fontWeight||e.fontWeight,textAlign:t.textAlign||"center",textBaseline:t.textBaseline,ellipsis:!!t.ellipsis,maxLineWidth:t.maxLineWidth||1/0,lineHeight:t.fontSize||e.fontSize||12});return{width:i.width(),height:i.height()}}function W7t(n,t="type"){return gst(n,t)==="rich"}function gst(n,t="type"){var e,i;return Bs(n.text)&&"type"in n.text?(e=n.text.type)!==null&&e!==void 0?e:"text":t in n&&(i=n[t])!==null&&i!==void 0?i:"text"}function pst(n){var t,e;return Lt(n.maxLineWidth)&&(n.maxWidth=n.maxLineWidth,delete n.maxLineWidth),n.width=(t=n.width)!==null&&t!==void 0?t:0,n.height=(e=n.height)!==null&&e!==void 0?e:0,n.textConfig=n.text.text||n.text,n}function V7t(n){const{text:t,_originText:e}=n,{text:i}=t;return n.html=i,n.text=e,n.renderable=!1,n}function G7t(n){const{text:t,_originText:e}=n,{text:i}=t;return n.react=i,n.text=e,n.renderable=!1,n}function kO(n,t="type"){const e=gst(n,t);return e==="rich"?Nt.richtext(pst(n)):(e==="html"?n=V7t(n):e==="react"&&(n=G7t(n)),Nt.text(n))}function vst(){Lo(),Zh(),rm(),n2(),zl()}var rU=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]])}return e};vst();let om=class LO extends na{getBgRect(){return this._bgRect}getTextShape(){return this._textShape}constructor(t,e){super(e?.skipDefault?t:Qt({},LO.defaultAttributes,t)),this.name="tag",this._tagStates=[],this._rectStates=[],this._symbolStates=[],this._textStates=[]}render(){var t,e,i;this.cacheStates();const{text:r="",textStyle:o={},shape:a={},panel:s={},space:l=4,minWidth:h,maxWidth:u,padding:d=4,visible:c,state:f,type:g,textAlwaysCenter:p,containerTextAlign:v}=this.attribute,m=Pl(d),y=this.createOrUpdateChild("tag-content",{x:0,y:0,zIndex:1},"group");let b,_=-m[3],w=-m[0],C=m[1]+m[3],x=m[0]+m[2],S=0,A=0;const{visible:T}=a,M=rU(a,["visible"]);if(QS(T)){const V=M?.size||10,X=pr(V)?V:Math.max(V[0],V[1]);b=y.createOrUpdateChild("tag-shape",Object.assign(Object.assign({symbolType:"circle",size:V,strokeBoundsBuffer:0},M),{visible:T,x:X/2,y:X/2}),"symbol"),fi(f?.shape)||(b.states=f.shape),T&&(A=X+l)}let R,L,B;if(C+=A,S+=A,W7t({text:r})||g==="rich"){const V=Object.assign(Object.assign(Object.assign({},pst(Object.assign({type:g,text:r},o))),o),{visible:Lt(r)&&c!==!1,x:S,y:0});fe(V.lineHeight)&&(V.lineHeight=o.fontSize),R=y.createOrUpdateChild("tag-text",V,"richtext"),L=R.AABBBounds.width(),B=R.AABBBounds.height()}else{const V=Object.assign(Object.assign({text:Bs(r)&&"type"in r&&r.type==="text"?r.text:r,visible:Lt(r)&&c!==!1,lineHeight:o?.fontSize},o),{x:S,y:0});fe(V.lineHeight)&&(V.lineHeight=o.fontSize),R=y.createOrUpdateChild("tag-text",V,"text");const X=r2(V.text,o,(e=(t=this.stage)===null||t===void 0?void 0:t.getTheme())===null||e===void 0?void 0:e.text);L=X.width,B=X.height}C+=L;const P=(i=a.size)!==null&&i!==void 0?i:10,k=pr(P)?P:Math.max(P[0],P[1]);x+=Math.max(B,a.visible?k:0);const{textAlign:E,textBaseline:D}=o;(Lt(h)||Lt(u))&&(Lt(h)&&C<h&&(C=h),Lt(u)&&C>u&&(C=u,R.setAttribute("maxLineWidth",u-m[1]-m[2]))),_=0,w=0;let I=0;E==="left"||E==="start"?I=1:E==="right"||E==="end"?I=-1:E==="center"&&(I=0),I?I<0?(_-=C,b&&b.setAttribute("x",(b.attribute.x||0)-L),y.setAttribute("x",-m[1]-A)):I>0&&y.setAttribute("x",m[3]):(_-=C/2,b&&b.setAttribute("x",(b.attribute.x||0)-L/2),y.setAttribute("x",-A/2));const O=v==="right"||v==="end",H=v==="left"||v==="start",F=(V,X)=>{R.type==="richtext"?R.setAttributes({x:V,textAlign:X,textConfig:tA(R.attribute.textConfig).map((Z=>Object.assign(Object.assign({},Z),{textAlign:X})))}):R.setAttributes({x:V,textAlign:X})};if((v?v==="center":p)&&I){const V=C-m[1]-m[3],X=L+A,Z=I===1?(V-X)/2+A+L/2:m[0]+A-(C/2+X/2-A)+L/2;if(F(Z,"center"),b){const tt=Z-L/2-A+k/2;b.setAttributes({x:tt})}}if(H&&I!==1){const V=C-m[1]-m[3],X=I===0?-V/2+A/2:-C+m[3]+m[1]+A;if(F(X+A,"left"),b){const Z=X+k/2;b.setAttributes({x:Z})}}if(O&&I!==-1){const V=C-m[1]-m[3],X=I===0?V/2+A/2:V;if(F(X,"right"),b){const Z=X-L-A+k/2;b.setAttributes({x:Z})}}D==="middle"?(w-=x/2,b&&b.setAttribute("y",0)):D==="bottom"?(w-=x,b&&b.setAttribute("y",-B/2),y.setAttribute("y",-m[2])):D==="top"&&(y.setAttribute("y",m[0]),b&&b.setAttribute("y",B/2)),fi(f?.text)||(R.states=f.text);const{visible:N}=s,$=rU(s,["visible"]);if(c&&QS(N)){const V=this.createOrUpdateChild("tag-panel",Object.assign(Object.assign({},$),{visible:N&&!!r,width:C,height:x,x:_,y:w}),"rect");if(fi(f?.panel)||(V.states=f.panel),$.customShape){const X=$.customShape;V.pathProxy=Z=>X(this,Z,new An)}this._bgRect=V}this._textShape=R,this._symbol=b,this.resetStates()}initAttributes(t,e){t=e?.skipDefault?t:Qt({},LO.defaultAttributes,t),super.initAttributes(t),this.render()}addState(t,e,i){super.addState(t,e,i),this._textShape&&this._textShape.addState(t,e,i),this._bgRect&&this._bgRect.addState(t,e,i),this._symbol&&this._symbol.addState(t,e,i)}removeState(t,e){super.removeState(t,e),this._textShape&&this._textShape.removeState(t,e),this._bgRect&&this._bgRect.removeState(t,e),this._symbol&&this._symbol.removeState(t,e)}cacheStates(){var t,e,i,r,o,a,s,l,h,u,d,c,f,g;this._tagStates=(e=(t=this.currentStates)===null||t===void 0?void 0:t.slice())!==null&&e!==void 0?e:[],this._rectStates=(o=(r=(i=this._bgRect)===null||i===void 0?void 0:i.currentStates)===null||r===void 0?void 0:r.slice())!==null&&o!==void 0?o:[],this._symbolStates=(l=(s=(a=this._symbol)===null||a===void 0?void 0:a.currentStates)===null||s===void 0?void 0:s.slice())!==null&&l!==void 0?l:[],this._textStates=(d=(u=(h=this._textShape)===null||h===void 0?void 0:h.currentStates)===null||u===void 0?void 0:u.slice())!==null&&d!==void 0?d:[],this.clearStates(),(c=this._bgRect)===null||c===void 0||c.clearStates(),(f=this._symbol)===null||f===void 0||f.clearStates(),(g=this._textShape)===null||g===void 0||g.clearStates()}resetStates(){var t,e,i;this._tagStates.length&&this.useStates(this._tagStates),this._rectStates.length&&((t=this._bgRect)===null||t===void 0||t.useStates(this._rectStates)),this._symbolStates.length&&((e=this._symbol)===null||e===void 0||e.useStates(this._symbolStates)),this._textStates.length&&((i=this._textShape)===null||i===void 0||i.useStates(this._textStates))}};om.defaultAttributes={visible:!0,textStyle:{fontSize:12,fill:"#000",textAlign:"left",textBaseline:"top"},space:4,padding:4,shape:{fill:"#000"}};const mst={visible:!0,position:"auto",titleStyle:{fontSize:16,fill:"#08979c"},contentStyle:{fontSize:12,fill:"green"},panel:{visible:!0,fill:"#e6fffb",size:12,space:0,stroke:"#87e8de",lineWidth:1,cornerRadius:4}},yst={poptip:Qt({},mst)};function $7t(){Lo(),zl(),rm(),Zh()}function j7t(n){Qt(yst.poptip,mst,n)}var U7t=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]])}return e};const oU=new Hb;$7t();const aU="M -0.5 -0.5, L -0.5 0.5, L 0.5 -0.5, Z",sU="M -0.5 -0.5, L -0.5 0.5, L 0.5 0.5, Z",lU="M -0.5 -0.5, L 0.5 -0.5, L 0.5 0.5, Z",hU="M 0.5 -0.5, L 0.5 0.5, L -0.5 0.5, Z",Y7t={tl:aU,tr:lU,bl:sU,br:hU,lt:aU,lb:sU,rt:lU,rb:hU};class Bv extends na{constructor(t,e){super(e?.skipDefault?t:Qt({},Bv.defaultAttributes,t)),this.name="poptip",this.positionList=["top","tl","tr","bottom","bl","br","left","lt","lb","right","rt","rb"]}render(){var t,e,i,r,o,a,s,l,h;const{titleStyle:u={},position:d,contentStyle:c={},panel:f,logoSymbol:g,poptipAnchor:p="position",logoText:v,logoTextStyle:m={},triangleMode:y="default",space:b=4,minWidth:_=0,maxWidth:w=1/0,padding:C=4,maxWidthPercent:x,visible:S,state:A,dx:T=0,dy:M=0,positionBounds:R}=this.attribute;let{title:L="",content:B=""}=this.attribute;L=this.attribute.titleFormatMethod?this.attribute.titleFormatMethod(L):L,B=this.attribute.contentFormatMethod?this.attribute.contentFormatMethod(B):B;const P=Pl(C),k=this.createOrUpdateChild("poptip-content",{x:0,y:0,zIndex:1},"group");this.group=k;const E=w-P[1]-P[3],D=Lt(L)&&S!==!1,I=Object.assign(Object.assign({text:ni(L)?L:[L],visible:D,wrap:!0},u),{x:P[3],y:P[0],maxLineWidth:E,textAlign:"left",textBaseline:"top"}),O=k.createOrUpdateChild("poptip-title",I,"text");fi(A?.title)||(O.states=A.title);const H=O.AABBBounds,F=H.height(),N=H.width();let $=F+b;D||($=0);const V=Lt(B)&&S!==!1,X=Object.assign(Object.assign({text:ni(B)?B:[B],visible:V,wrap:!0},c),{x:P[3],y:P[0]+$,maxLineWidth:E,textAlign:"left",textBaseline:"top"}),Z=k.createOrUpdateChild("poptip-content",X,"text");fi(A?.content)||(Z.states=A.content);const tt=Z.AABBBounds,K=tt.height(),rt=tt.width();V&&($+=K),this.titleShape=O,this.contentShape=Z;let q=I1(N+P[1]+P[3],rt+P[1]+P[3]);q>w?q=w:q<_&&(q=_);let it=P[0]+P[2]+$;const{visible:nt,square:W}=f,G=U7t(f,["visible","square"]);if(W){const pt=I1(q,it);q=pt;const bt=pt-it;it=pt,O.setAttributes({dy:bt/2}),Z.setAttributes({dy:bt/2})}const j=(t=G.size)!==null&&t!==void 0?t:12,U=ni(j)?[j[0]+((e=G.space)!==null&&e!==void 0?e:0),j[1]+((i=G.space)!==null&&i!==void 0?i:0)]:j+((r=G.space)!==null&&r!==void 0?r:0),J=(o=G.lineWidth)!==null&&o!==void 0?o:1,ot=this.stage?[(a=this.stage.viewWidth)!==null&&a!==void 0?a:this.stage.width,(s=this.stage.viewHeight)!==null&&s!==void 0?s:this.stage.height]:void 0;if(ot){const pt=this.AABBBounds,bt=(l=this.attribute.x)!==null&&l!==void 0?l:pt.x1,me=ot[0]-pt.x1;let He=Math.max(bt,me);const Ai=(ni(j)?j[0]:12)+3;if(He=Math.min(He-Ai,He*x),He<q){q=He;const Pe=P[1]+P[3];O.setAttribute("maxLineWidth",He-Pe),Z.setAttribute("maxLineWidth",He-Pe),it=P[0]+P[2],D&&(it+=O.AABBBounds.height()+b),it+=Z.AABBBounds.height()}}const st=d==="auto"||ni(d),lt=ni(d)?d:this.positionList;let ft,vt=-1/0;for(let pt=0;pt<lt.length+1;pt++){const bt=st?lt[pt===lt.length?ft:pt]:d;let me="arrow2Left",He=(ni(j)?j[0]:j)/4,Ai=0;bt==="top"||bt==="bottom"||bt==="left"||bt==="right"?me="arrow2Left":y==="concise"&&(me=Y7t[bt],He=["tl","bl","rt","rb"].includes(bt)?(ni(j)?j[0]:j)/2:-(ni(j)?j[0]:j)/2,Ai=["tl","tr","lb","rb"].includes(bt)?-(ni(j)?j[1]:j)/2:(ni(j)?j[1]:j)/2);const{angle:Pe,offset:On}=this.getAngleAndOffset(bt,q,it,ni(U)?U:[U,U-J],me);let en,Xi={x:0,y:0};if(p==="bounds"&&R&&(Xi=this.calculateAnchorPoint(bt,R)),QS(nt)){let re;en=k.createOrUpdateChild("poptip-symbol-panel",Object.assign(Object.assign({},G),{visible:nt&&(V||D),x:He,y:Ai,strokeBoundsBuffer:-1,boundsPadding:-2,anchor:[0,0],symbolType:me,angle:Pe,dx:On[0],dy:On[1]-((h=G.space)!==null&&h!==void 0?h:0),size:j,zIndex:9}),"symbol"),fi(A?.panel)||(en.states=A.panel),re=f.panelSymbolType?k.createOrUpdateChild("poptip-rect-panel",Object.assign(Object.assign({},G),{visible:nt&&(V||D),x:0,y:0,symbolType:"rect",size:[q,it],zIndex:-8}),"symbol"):k.createOrUpdateChild("poptip-rect-panel",Object.assign(Object.assign({},G),{visible:nt&&(V||D),x:0,y:0,width:q,height:it,zIndex:-8}),"rect"),fi(A?.panel)||(re.states=A.panel)}if(k.setAttributes({x:-On[0]+T+Xi.x,y:-On[1]+M+Xi.y,anchor:[He,Ai]}),g){const{size:re=12}=g,wi=ni(re)?re:[re,re];wi[1]==="auto"&&(wi[1]=it),wi[0]==="auto"&&(wi[0]=it);const ii=wi[0];k.createOrUpdateChild("poptip-logo",Object.assign(Object.assign({},g),{x:0,y:it/2,visible:nt&&(V||D),zIndex:10,size:wi}),"symbol"),k.setAttributes({x:-On[0]+T+ii/2,y:-On[1]+M}),v&&k.createOrUpdateChild("poptip-logo-text",Object.assign(Object.assign({},m),{x:0,y:it/2,visible:nt&&(V||D),text:v,textAlign:"center",textBaseline:"middle",zIndex:10}),"text")}if(!ot)break;{oU.setValue(0,0,q,it).transformWithMatrix(k.globalTransMatrix);const re=oU,wi=new Kat().setValue(0,0,ot[0],ot[1]);if(st){if(u8t(re,wi))break;{const ii=h8t(re,wi),qi=(ii.x2-ii.x1)*(ii.y2-ii.y1);qi>vt&&(vt=qi,ft=pt)}}if(["top","bottom","left","right"].includes(bt)){const ii=bt==="top"||bt==="bottom",qi=bt==="left"||bt==="right";let Gr=!1;if(ii?Gr=bt==="top"&&re.y1<0||bt==="bottom"&&re.y2>wi.y2:qi&&(Gr=bt==="left"&&re.x1<0||bt==="right"&&re.x2>wi.x2),!Gr){let kt=0;const ki=(ni(j)?j[1]:j)/2;ii?(re.x1<0?kt=-re.x1:re.x2>wi.x2&&(kt=wi.x2-re.x2),k.setAttribute("x",k.attribute.x+kt),en.setAttribute("dx",iA(I1(en.attribute.dx-kt,ki),re.width()-ki))):qi&&(re.y1<0?kt=-re.y1:re.y2>wi.y2&&(kt=wi.y2-re.y2),k.setAttribute("y",k.attribute.y+kt),en.setAttribute("dy",iA(I1(en.attribute.dy-kt,ki),re.height()-ki)));break}}if(!st)break}}}calculateAnchorPoint(t,e){if(!e)return{x:0,y:0};const{x:i,y:r}=this.attribute,{x1:o,y1:a,x2:s,y2:l}=e,h=s-o,u=l-a;switch(t){case"top":case"tl":case"tr":return{x:o+h/2-i,y:a-r};case"bottom":case"bl":case"br":return{x:o+h/2-i,y:l-r};case"left":case"lt":case"lb":return{x:o-i,y:a+u/2-r};case"right":case"rt":case"rb":return{x:s-i,y:a+u/2-r};default:return{x:0,y:0}}}getAngleAndOffset(t,e,i,r,o){const a=o==="arrow2Left"?r[1]/2:r[1];switch(t){case"tl":return{angle:o==="arrow2Left"?ya/2*3:0,offset:o==="arrow2Left"?[e/4,i+a]:[0,i+a]};case"top":return{angle:ya/2*3,offset:[e/2,i+a]};case"tr":return{angle:o==="arrow2Left"?ya/2*3:0,offset:o==="arrow2Left"?[e/4*3,i+a]:[e,i+a]};case"rt":return{angle:0,offset:o==="arrow2Left"?[-a,i/5]:[-a,0]};case"right":return{angle:0,offset:[-a,i/2]};case"rb":return{angle:0,offset:o==="arrow2Left"?[-a,i/5*4]:[-a,i]};case"bl":return{angle:o==="arrow2Left"?ya/2:0,offset:o==="arrow2Left"?[e/4,-a]:[0,-a]};case"bottom":return{angle:ya/2,offset:[e/2,-a]};case"br":return{angle:o==="arrow2Left"?ya/2:0,offset:o==="arrow2Left"?[e/4*3,-a]:[e,-a]};case"lt":return{angle:o==="arrow2Left"?ya:0,offset:o==="arrow2Left"?[e+a,i/5]:[e+a,0]};case"left":return{angle:ya,offset:[e+a,i/2]};case"lb":return{angle:o==="arrow2Left"?ya:0,offset:o==="arrow2Left"?[e+a,i/5*4]:[e+a,i]}}}}Bv.defaultAttributes={position:"rt",visible:!0,title:null,content:null,titleStyle:{fontSize:12,fill:"#000",textAlign:"left",textBaseline:"top"},contentStyle:{fontSize:12,fill:"#000",textAlign:"left",textBaseline:"top"},panel:{},maxWidthPercent:.8,space:8,padding:10};var X7t=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a};function q7t(n,t){return Qt(n,yst.poptip,t),n}let py=class{render(n,t,e,i,r,o,a,s,l,h,u,d,c){var f,g;if(n._showPoptip===1){const{visible:p,visibleCb:v}=n.attribute.poptip||{};if(p===!1||v&&v(n)===!1)return;const m={};Qt(m,Bv.defaultAttributes,n.attribute.poptip?n.attribute.poptip:{}),this.poptipComponent?this.poptipComponent.initAttributes(m):this.poptipComponent=new Bv(m);let y=n.attribute.poptip||{};if(n.type==="text"&&y.title==null&&y.content==null){const w={};q7t(w,y),y=w,y.content=(f=y.content)!==null&&f!==void 0?f:n.attribute.text}const b=n.globalTransMatrix;this.poptipComponent.setAttributes(Object.assign(Object.assign({visibleAll:!0,pickable:!1,childrenPickable:!1,poptipAnchor:"bounds"},y),{x:b.e,y:b.f,positionBounds:n.globalAABBBounds})),h.stage.tryInitInteractiveLayer();const _=h.stage.getLayer("_builtin_interactive");_&&_.add(this.poptipComponent)}else n._showPoptip===2&&(n._showPoptip=0,this.poptipComponent&&(this.poptipComponent.setAttributes({visibleAll:!1}),(g=this.poptipComponent.parent)===null||g===void 0||g.removeChild(this.poptipComponent),this.poptipComponent=null))}};py=X7t([wt()],py);var bst=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a};class _st{constructor(){this.activeEvent="onRegister",this._uid=pn.GenAutoIncrementId(),this.poptip=t=>{const e=t.target;this.needHide(e)?this.unpoptip(t):e!==this.activeGraphic&&(this.needShow(e)&&(e.setAttributes({}),e._showPoptip=1),this.activeGraphic&&(this.activeGraphic.setAttributes({}),this.activeGraphic._showPoptip=2),this.setActiveGraphic(e,!0))},this.unpoptip=t=>{this.activeGraphic&&(this.activeGraphic.setAttributes({}),this.activeGraphic._showPoptip=2,this.setActiveGraphic(null,!0))}}activate(t){this.pluginService=t;const{stage:e}=this.pluginService;e.addEventListener("pointerover",this.poptip)}needHide(t){return t.isContainer||!t.attribute}needShow(t){return!!t.attribute.poptip}setActiveGraphic(t,e){this.activeGraphic=t,this.pluginService.stage.renderNextFrame()}deactivate(t){const{stage:e}=this.pluginService;e.removeEventListener("pointerover",this.poptip)}}let vy=class extends _st{constructor(){super(...arguments),this.name="poptip",this.key=this.name+this._uid}};vy=bst([wt()],vy);let my=class extends _st{constructor(){super(...arguments),this.name="poptipForText",this.key=this.name+this._uid,this.pointerlave=n=>{const{stage:t}=this.pluginService;n.target===t&&this.unpoptip(n)}}activate(n){super.activate(n);const{stage:t}=this.pluginService;t.addEventListener("pointerleave",this.pointerlave)}needHide(n){return n.type!=="text"||!n.cliped||n.isContainer||!n.attribute||n.attribute.disableAutoClipedPoptip}needShow(n){return!0}deactivate(n){const{stage:t}=this.pluginService;super.deactivate(n),t.removeEventListener("pointerleave",this.pointerlave)}};my=bst([wt()],my);const K7t=new ie(((n,t,e,i)=>{e(py)||(n(py).toSelf().inSingletonScope(),n(S3).toService(py)),e(vy)||(n(vy).toSelf(),n(Ib).toService(vy)),e(my)||(n(my).toSelf(),n(Ib).toService(my))}));function Z7t(){Kt.load(K7t)}function J7t(){Lo(),O3(),k7t(),rm()}J7t();class o2 extends na{getStartAngle(){return Q$(this._startAngle)}getEndAngle(){return Q$(this._endAngle)}getMainSegmentPoints(){return this._mainSegmentPoints}constructor(t,e){super(e?.skipDefault?t:Qt({},o2.defaultAttributes,t)),this.name="segment",this.key="segment",this.lines=[]}render(){this.removeAllChild(!0),this._reset();const{startSymbol:t,endSymbol:e,lineStyle:i,state:r,visible:o=!0,multiSegment:a,mainSegmentIndex:s}=this.attribute;if(!o)return;this._computeLineAngle();const l=this._getMainSegmentPoints(),h=this._renderSymbol(t,l,"start"),u=this._renderSymbol(e,l,"end");if(this.startSymbol=h,this.endSymbol=u,a){const d=[...this.attribute.points];if(hn(s))d[s]=this._clipPoints(d[s]);else{const c=this._clipPoints(hO(d));d[0][0]=c[0],d[d.length-1][d[d.length-1].length-1]=c[c.length-1]}d.forEach(((c,f)=>{var g,p;const v=Nt.line(Object.assign(Object.assign({points:c},ni(i)?(g=i[f])!==null&&g!==void 0?g:i[i.length-1]:i),{fill:!1}));v.name=`${this.name}-line`,v.id=this._getNodeId("line"+f),fi(r?.line)||(v.states=ni(r.line)?(p=r.line[f])!==null&&p!==void 0?p:r.line[r.line.length-1]:r.line),this.add(v),this.lines.push(v)}))}else{let d=Nt.line;tA(i)[0].cornerRadius&&(d=Nt.polygon);const c=d(Object.assign(Object.assign({points:this._clipPoints(this.attribute.points)},tA(i)[0]),{fill:!1,closePath:!1}));c.name=`${this.name}-line`,c.id=this._getNodeId("line"),fi(r?.line)||(c.states=[].concat(r.line)[0]),this.add(c),this.lines.push(c)}}_computeStartRotate(t){return t+Math.PI/2}_computeEndRotate(t){return t+Math.PI/2}_renderSymbol(t,e,i){if(!e.length)return;const{autoRotate:r=!0}=t;let o;if(t&&t.visible){const a=this.getStartAngle(),s=this.getEndAngle(),{state:l}=this.attribute,h=e[0],u=e[e.length-1],{refX:d=0,refY:c=0,refAngle:f=0,style:g,symbolType:p,size:v=12}=t;let m,y;i==="start"?(m={x:h.x+(hn(a)?d*Math.cos(a)+c*Math.cos(a-Math.PI/2):0),y:h.y+(hn(a)?d*Math.sin(a)+c*Math.sin(a-Math.PI/2):0)},y=this._computeStartRotate(this._startAngle)):(m={x:u.x+(hn(s)?d*Math.cos(s)+c*Math.cos(s-Math.PI/2):0),y:u.y+(hn(s)?d*Math.sin(s)+c*Math.sin(s-Math.PI/2):0)},y=this._computeEndRotate(this._endAngle)),o=Nt.symbol(Object.assign(Object.assign(Object.assign({},m),{symbolType:p,size:v,angle:r?y+f:0,strokeBoundsBuffer:0}),g)),o.name=`${this.name}-${i}-symbol`,o.id=this._getNodeId(`${i}-symbol`),fi(l?.symbol)||(o.states=l.symbol),i==="start"?fi(l?.startSymbol)||(o.states=l.startSymbol):fi(l?.endSymbol)||(o.states=l.endSymbol),this.add(o)}return o}_getMainSegmentPoints(){if(this._mainSegmentPoints)return this._mainSegmentPoints;const{points:t,multiSegment:e,mainSegmentIndex:i}=this.attribute;let r;return r=e?hn(i)?t[i]:hO(t):t,this._mainSegmentPoints=r,r}_clipPoints(t){const{startSymbol:e={},endSymbol:i={}}=this.attribute;let r=t;if(e.visible){const o=e.clip?e.size||10:0;r=[{x:t[0].x-o/2*(Math.cos(this._startAngle)||0),y:t[0].y-o/2*(Math.sin(this._startAngle)||0)},...r.slice(1)]}if(i.visible){const o=i.clip?i.size||10:0,a={x:t[t.length-1].x-o/2*(Math.cos(this._endAngle)||0),y:t[t.length-1].y-o/2*(Math.sin(this._endAngle)||0)};r=[...r.slice(0,r.length-1),a]}return r}_computeLineAngle(){const t=this._getMainSegmentPoints();if(t.length<=1)return;const e=t[0],i=t[1],r=t[t.length-2],o=t[t.length-1],a=[e.x-i.x,e.y-i.y],s=Math.atan2(a[1],a[0]),l=[o.x-r.x,o.y-r.y],h=Math.atan2(l[1],l[0]);this._startAngle=s,this._endAngle=h}_reset(){this.startSymbol=null,this.endSymbol=null,this._startAngle=null,this._endAngle=null,this._mainSegmentPoints=null}}o2.defaultAttributes={visible:!0,lineStyle:{lineWidth:1,stroke:"#000"},startSymbol:{visible:!1,autoRotate:!0,symbolType:"triangle",size:12,refX:0,refY:0,refAngle:0,style:{fill:"#000",zIndex:1}},endSymbol:{visible:!1,autoRotate:!0,symbolType:"triangle",size:12,refX:0,refY:0,refAngle:0,style:{fill:"#000",zIndex:1}}};var mr;(function(n){n.innerView="inner-view",n.axisContainer="axis-container",n.labelContainer="axis-label-container",n.tickContainer="axis-tick-container",n.tick="axis-tick",n.subTick="axis-sub-tick",n.label="axis-label",n.title="axis-title",n.gridContainer="axis-grid-container",n.grid="axis-grid",n.gridRegion="axis-grid-region",n.line="axis-line",n.background="axis-background",n.axisLabelBackground="axis-label-background",n.axisBreak="axis-break",n.axisBreakSymbol="axis-break-symbol"})(mr||(mr={}));var cp;(function(n){n.selected="selected",n.selectedReverse="selected_reverse",n.hover="hover",n.hoverReverse="hover_reverse"})(cp||(cp={}));const Hg={[cp.selectedReverse]:{},[cp.selected]:{},[cp.hover]:{},[cp.hoverReverse]:{}},Q7t=999,EO={title:{space:4,padding:0,textStyle:{fontSize:12,fill:"#333333",fontWeight:"normal",fillOpacity:1}},label:{visible:!0,inside:!1,space:4,padding:0,style:{fontSize:12,fill:"#333",fontWeight:"normal",fillOpacity:1}},tick:{visible:!0,inside:!1,alignWithLabel:!0,length:4,style:{lineWidth:1,stroke:"#000",strokeOpacity:1}},subTick:{visible:!1,inside:!1,count:4,length:2,style:{lineWidth:1,stroke:"#999",strokeOpacity:1}},line:{visible:!0,style:{lineWidth:1,stroke:"#000",strokeOpacity:1}}},uU={size:8,stroke:"#000",lineWidth:1,zIndex:1};function t$t(n){const t=n.AABBBounds;return{x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2,centerX:n.attribute.x,centerY:n.attribute.y,angle:n.attribute.angle}}function e$t(n){n.forEach((t=>{if(t.rotatedBounds||!t.attribute.angle)return;const e=t$t(t),i=L0({x:t.attribute.x,y:t.attribute.y},e.angle,{x:e.centerX,y:e.centerY}),r=i.x-e.centerX,o=i.y-e.centerY;e.x1+=r,e.x2+=r,e.y1+=o,e.y2+=o,e.centerX+=r,e.centerY+=o,t.rotatedBounds=e}))}function i$t(n,t){var e,i;return!((e=n.OBBBounds)===null||e===void 0)&&e.empty()||!((i=t.OBBBounds)===null||i===void 0)&&i.empty()?d8t(n.AABBBounds,t.AABBBounds)&&(!n.rotatedBounds||!t.rotatedBounds||c8t(n.rotatedBounds,t.rotatedBounds,!0)):n.OBBBounds.intersects(t.OBBBounds)}const Cst=Math.sin(Math.PI/10);function wst(n,t=Cst){const e=!fe(n)&&n!==0,i=e?Math.cos(n):1;return e&&Math.abs(i)<=t}function H3(n,t=Cst){const e=!fe(n)&&n!==0,i=e?Math.sin(n):0;return!e||Math.abs(i)<=t}function n$t(n,t){return{x:n.x+t[0],y:n.y+t[1]}}function r$t(n={}){var t,e;const{style:i={},angle:r=.5*Math.PI}=n,o=Qt({},uU,i),a=(t=o.size)!==null&&t!==void 0?t:uU.size;return Object.assign(Object.assign({},o),{symbolType:(e=o.symbolType)!==null&&e!==void 0?e:`M ${-a/2} ${a*Math.sin(r)} L ${a/2} ${-a*Math.sin(r)}`,symbolSize:a})}function o$t(n){const t={};return Wf(n,(e=>{e.type!=="group"&&e.id&&(t[e.id]=e)})),t}function xst(n,t){return{x:n.x+t[0],y:n.y+t[1]}}function dU(n,t,e,i=!1,r=!1){const o=[t.x-e.x,t.y-e.y];return dst(o,(i?-1:1)*(r?-1:1)*n/cst(o))}function a$t(n,t,e,i,r){const o=l8t({x:0,y:0},e,n),a=xst(o,dU(i,o,t,r));return n$t(a,dU(i||1,a,t,r))}function ms(n,t,e){var i;const r=(i=n.attribute)===null||i===void 0?void 0:i.angle;if(H3(r,Number.EPSILON))return e>ij(n.AABBBounds,t.AABBBounds);const o=n.OBBBounds,a=t.OBBBounds;return!o||!a||o.empty()||a.empty()?e>ij(n.AABBBounds,t.AABBBounds):o.intersects(a)||e>g8t(o,a)}function DO(n,t){for(let e,i=1,r=n.length,o=n[0];i<r;o=e,++i)if(e=n[i],ms(o,e,t))return!0;return!1}const s$t=(n,t,e)=>{const i=n.target;return i!==e&&i.name&&!fi(i.states)?(i.addState(to.hover,!0),Wf(t,(r=>{r!==i&&r.name&&!fi(r.states)&&r.addState(to.hoverReverse,!0)})),i):e},l$t=(n,t,e)=>e&&(Wf(t,(i=>{i.name&&!fi(i.states)&&(i.removeState(to.hoverReverse),i.removeState(to.hover))})),null),h$t=(n,t,e)=>{const i=n.target;return e===i&&i.hasState(to.selected)?(Wf(t,(r=>{r.name&&!fi(r.states)&&(r.removeState(to.selectedReverse),r.removeState(to.selected))})),null):i.name&&!fi(i.states)?(i.addState(to.selected,!0),Wf(t,(r=>{r!==i&&r.name&&!fi(r.states)&&r.addState(to.selectedReverse,!0)})),i):e};class u$t extends na{_prepareAnimate(t){if(this.attribute.animation!==!1){const{animation:e,animationEnter:i,animationExit:r,animationUpdate:o}=this.attribute,a=Bs(e)?e:{};this._animationConfig={enter:i!==!1&&Qt({},t,a,i??{}),exit:r!==!1&&Qt({},t,a,r??{}),update:o!==!1&&(ni(o)?o:Qt({},t,a,o??{}))}}else this._animationConfig={enter:!1,exit:!1,update:!1}}}const d$t={type:"default",duration:300,easing:"linear"};class c$t extends u$t{constructor(){super(...arguments),this.name="axis",this.data=[],this.tickLineItems=[],this.subTickLineItems=[],this.axisLabelLayerSize={},this.axisLabelsContainer=null,this._onHover=t=>{this._lastHover=s$t(t,this.axisContainer,this._lastHover)},this._onUnHover=t=>{this._lastHover=l$t(t,this.axisContainer,this._lastHover)},this._onClick=t=>{this._lastSelect=h$t(t,this.axisContainer,this._lastSelect)}}getInnerView(){return this._innerView}getPrevInnerView(){return this._prevInnerView}getBoundsWithoutRender(t){const e=Vat(this.attribute);e.scale=this.attribute.scale,this.attribute=t;const i=Nt.group({x:this.attribute.x,y:this.attribute.y});return this.add(i),this._renderInner(i),this.removeChild(i),this.attribute=e,i.AABBBounds}render(){this._prepare(),this._prevInnerView=this._innerView&&o$t(this._innerView),this.removeAllChild(!0),this._innerView=Nt.group({x:0,y:0,pickable:!1}),this.add(this._innerView),this._renderInner(this._innerView),this._bindEvent(),this.runAnimation()}_prepare(){this._prepareAnimate(d$t)}_bindEvent(){if(this.attribute.disableTriggerEvent)return;const{hover:t,select:e}=this.attribute;t&&(this._innerView.addEventListener("pointermove",this._onHover),this._innerView.addEventListener("pointerout",this._onUnHover)),e&&this._innerView.addEventListener("pointerdown",this._onClick)}_renderInner(t){const{title:e,label:i,tick:r,line:o,items:a}=this.attribute,s=Nt.group({x:0,y:0,zIndex:1,pickable:!1});if(s.name=mr.axisContainer,s.id=this._getNodeId("container"),s.setMode(this.mode),this.axisContainer=s,t.add(s),o&&o.visible&&this.renderLine(s),a&&a.length&&(this.data=this._transformItems(a[0]),r&&r.visible&&this.renderTicks(s),i&&i.visible)){const l=Nt.group({x:0,y:0,pickable:!1});l.name=mr.labelContainer,l.id=this._getNodeId("label-container"),this.axisLabelsContainer=l,s.add(l),a.forEach(((h,u)=>{const d=this.renderLabels(l,h,u),c=d.getChildren();this.beforeLabelsOverlap(c,h,d,u,a.length),this.handleLabelsOverlap(c,h,d,u,a.length),this.afterLabelsOverlap(c,h,d,u,a.length);let f=0,g=0,p="center",v="middle",m=0;c.forEach(((y,b)=>{var _;const w=y.attribute,C=(_=w.angle)!==null&&_!==void 0?_:0,x=y.AABBBounds;let S=x.width(),A=x.height();C&&(S=Math.abs(S*Math.cos(C)),A=Math.abs(A*Math.sin(C))),f=Math.max(f,S),g=Math.max(g,A),p=w.textAlign,v=w.textBaseline,b===0&&(m=w.x)})),this.axisLabelLayerSize[u]={width:f,height:g,labelPos:m,textAlign:p,textBaseline:v}}))}e&&e.visible&&this.renderTitle(s)}renderTicks(t){const e=this.getTickLineItems(),i=Nt.group({x:0,y:0,pickable:!1});i.name=mr.tickContainer,i.id=this._getNodeId("tick-container"),t.add(i),e.forEach(((o,a)=>{var s;const l=Nt.line(Object.assign({},this._getTickLineAttribute("tick",o,a,e)));if(l.name=mr.tick,l.id=this._getNodeId(o.id),fi((s=this.attribute.tick)===null||s===void 0?void 0:s.state))l.states=Og;else{const h=this.data[a],u=Qt({},Og,this.attribute.tick.state);Object.keys(u).forEach((d=>{Zi(u[d])&&(u[d]=u[d](h.rawValue,a,h,this.data))})),l.states=u}i.add(l)})),this.tickLineItems=e;const{subTick:r}=this.attribute;if(r&&r.visible){const o=this.getSubTickLineItems();o.length&&o.forEach(((a,s)=>{const l=Nt.line(Object.assign({},this._getTickLineAttribute("subTick",a,s,e)));if(l.name=mr.subTick,l.id=this._getNodeId(`${s}`),fi(r.state))l.states=Og;else{const h=Qt({},Og,r.state);Object.keys(h).forEach((u=>{Zi(h[u])&&(h[u]=h[u](a.value,s,a,e))})),l.states=h}i.add(l)})),this.subTickLineItems=o}}renderLabels(t,e,i){const{dataFilter:r}=this.attribute.label;r&&Zi(r)&&(e=r(e,i));const o=this._transformItems(e),a=Nt.group({x:0,y:0,pickable:!1});return a.name=`${mr.labelContainer}-layer-${i}`,a.id=this._getNodeId(`label-container-layer-${i}`),t.add(a),o.forEach(((s,l)=>{var h;const u=this._getLabelAttribute(s,l,o,i),d=kO(u);if(d.name=mr.label,d.id=this._getNodeId(`layer${i}-label-${s.id}`),fi((h=this.attribute.label)===null||h===void 0?void 0:h.state))d.states=Og;else{const c=Qt({},Og,this.attribute.label.state);Object.keys(c).forEach((f=>{Zi(c[f])&&(c[f]=c[f](s,l,o,i))})),d.states=c}d.data=Object.assign(Object.assign({},s),{index:l,layer:i}),a.add(d)})),a}renderTitle(t){const e=this.getTitleAttribute(),i=new om(Object.assign({},e));i.name=mr.title,i.id=this._getNodeId("title"),t.add(i)}getVerticalCoord(t,e,i){return xst(t,this.getVerticalVector(e,i,t))}getTickLineItems(){const{tick:t}=this.attribute,e=this.data,i=[],{alignWithLabel:r,inside:o=!1,length:a,dataFilter:s}=t;let l=1;return e.length>=2&&(l=e[1].value-e[0].value),(s&&Zi(s)?s(e):e).forEach((h=>{let u=h.point,d=h.value;if(!r){const f=h.value-l/2;if(this.isInValidValue(f))return;u=this.getTickCoord(f),d=f}const c=this.getVerticalCoord(u,a,o);if(this.mode==="3d"){const f=this.getVerticalVector(a,o,u);let g=0,p=0;J$(f[0])>J$(f[1])?g=ya/2*(c.x>u.x?1:-1):p=ya/2*(c.y>u.y?-1:1),i.push({start:u,end:c,value:d,id:`tick-${h.id}`,anchor:[u.x,u.y],alpha:g,beta:p})}else i.push({start:u,end:c,value:d,id:`tick-${h.id}`})})),i}getSubTickLineItems(){const{subTick:t}=this.attribute,e=[],{count:i=4,inside:r=!1,length:o=2}=t,a=this.tickLineItems,s=a.length;if(s>=2)for(let l=0;l<s-1;l++){const h=a[l],u=a[l+1];for(let d=0;d<i;d++){const c=(d+1)/(i+1),f=(1-c)*h.value+c*u.value,g=this.getTickCoord(f),p=this.getVerticalCoord(g,o,r);e.push({start:g,end:p,value:f,id:`sub-tick-${f}`})}}return e}_getTickLineAttribute(t,e,i,r){let o=Jr(this.attribute,`${t}.style`);const a=this.data[i];o=Zi(o)?Qt({},Jr(EO,`${t}.style`),t==="tick"?o(a.rawValue,i,a,this.data):o(e.value,i,e,r)):o;const{start:s,end:l,anchor:h,alpha:u,beta:d}=e;return Object.assign({points:[s,l],anchor:h,alpha:u,beta:d},o)}_getLabelAttribute(t,e,i,r){var o,a;const{space:s=4,inside:l=!1,formatMethod:h,type:u="text",text:d}=this.attribute.label;let c=s,f=0;!((o=this.attribute.tick)===null||o===void 0)&&o.visible&&this.attribute.tick.inside===l&&(f=this.attribute.tick.length||4),!((a=this.attribute.subTick)===null||a===void 0)&&a.visible&&this.attribute.subTick.inside===l&&(f=Math.max(f,this.attribute.subTick.length||2)),c+=f;const g=this.getRelativeVector(t.point);r>0&&(g[1]===0?c+=(this.axisLabelLayerSize[r-1].height+Jr(this.attribute,"label.space",4))*r:c+=(this.axisLabelLayerSize[r-1].width+Jr(this.attribute,"label.space",4))*r);const p=this.getVerticalCoord(t.point,c,l),v=this.getVerticalVector(c||1,l,p),m=h?h(`${t.label}`,t,e,i,r):t.label;let{style:y}=this.attribute.label;y=Zi(y)?Qt({},EO.label.style,y(t,e,i,r)):y;const b=this.getLabelAlign(v,l,y.angle);return y=Qt(b,y),Zi(y.text)&&(y.text=y.text({label:t.label,value:t.rawValue,index:t.index,layer:r})),Object.assign(Object.assign(Object.assign({},this.getLabelPosition(p,v,m,y)),{text:d??m,_originText:t.label,lineHeight:y?.fontSize,type:u}),y)}getLabelPosition(t,e,i,r){return t}_transformItems(t){const e=[];return t.forEach((i=>{var r;e.push(Object.assign(Object.assign({},i),{point:this.getTickCoord(i.value),id:(r=i.id)!==null&&r!==void 0?r:i.label}))})),e}runAnimation(){const t=this.lastScale;if(this.attribute.scale){const e=this.attribute.scale;this.lastScale=e.clone(),this.lastScale.range([0,1])}if(this.attribute.animation&&this.applyAnimationState){const e=this.getInnerView(),i=this.getPrevInnerView();if(!i)return;const r=this._animationConfig;this._newElementAttrMap={},Wf(e,(o=>{var a;if(o.type!=="group"&&o.id){const s=i[o.id];if(o.setFinalAttributes(o.attribute),s){s.release();const l=s.attribute,h=o.getFinalAttribute(),u=fGt(l,h);let d=Object.keys(u).length>0;if("opacity"in l&&h.opacity!==l.opacity&&(u.opacity=(a=h.opacity)!==null&&a!==void 0?a:1,d=!0),r.update&&d){this._newElementAttrMap[o.id]={state:"update",node:o,attrs:o.attribute};const c=s.attribute;o.setAttributes(c),o.applyAnimationState(["update"],[{name:"update",animation:Object.assign(Object.assign({selfOnly:!0},r.update),{type:"axisUpdate",customParameters:{config:r.update,diffAttrs:u,lastScale:t}})}])}}else r.enter&&(this._newElementAttrMap[o.id]={state:"enter",node:o,attrs:o.attribute},o.applyAnimationState(["enter"],[{name:"enter",animation:Object.assign(Object.assign({},r.enter),{type:"axisEnter",selfOnly:!0,customParameters:{config:r.enter,lastScale:t,getTickCoord:this.getTickCoord.bind(this)}})}]))}}))}}release(){super.release(),this._prevInnerView=null,this._innerView=null}}const cU={parity:function(n){return n.filter(((t,e)=>e%2?t.setAttribute("opacity",0):1))},greedy:function(n,t){let e;return n.filter(((i,r)=>r&&ms(e,i,t)?i.setAttribute("opacity",0):(e=i,1)))}};function f$t(n){let t;return t=n.OBBBounds.empty()?n.AABBBounds:n.OBBBounds,t.width()>1&&t.height()>1}function g$t(n){return n.forEach((t=>t.setAttribute("opacity",1))),n}function fU(n,t,e,i,r=!1){if(e&&!n.attribute.opacity){const o=t.length;if(o>1){n.setAttribute("opacity",1);for(let a=0;a<o;a++){const s=r?t[o-1-a]:t[a];if(!i(s))break;s.setAttribute("opacity",0)}}}}function p$t(n,t){if(fi(n))return;const e=n.filter(f$t);if(fi(e))return;let i;i=g$t(e);const{method:r="parity",separation:o=0}=t,a=Zi(r)?r:cU[r]||cU.parity;if(i.length>=3&&DO(i,o)){do i=a(i,o);while(i.length>=3&&DO(i,o));const s=(c,f,g=!0)=>g&&c<3||f,l=s(i.length,t.firstVisible,!1);let h=s(i.length,t.lastVisible);const u=e[0],d=hp(e);ms(u,d,o)&&l&&h&&(d.setAttribute("opacity",0),h=!1),fU(u,i,l,(c=>ms(c,u,o))),fU(d,i,h,(c=>ms(c,d,o)||!(!l||c===u)&&ms(c,u,o)),!0)}e.forEach((s=>{s.setAttribute("visible",!!s.attribute.opacity)}))}function v$t(n,t){if(fi(n))return;const{orient:e,labelRotateAngle:i=[0,45,90]}=t;if(i.length===0||n.some((a=>!!a.attribute.angle)))return;let r=0,o=0;for(i&&i.length>0&&(o=i.length);r<o;){const a=i[r++];if(n.forEach((s=>{s.attribute.angle=Zc(a)})),y$t(e,n),!m$t(n))break}}function m$t(n){for(let t=1;t<n.length;t++)if(i$t(n[t-1],n[t]))return!0;return!1}function y$t(n,t){n!=="bottom"&&n!=="top"||_$t(n,t),n!=="left"&&n!=="right"||b$t(n,t),e$t(t)}function a2(n=0){if(n<0)for(;n<0;)n+=2*Math.PI;if(n>0)for(;n>=2*Math.PI;)n-=2*Math.PI;return n}function b$t(n,t){t.forEach(((e,i)=>{e.attribute.angle&&e.setAttributes(Object.assign(Object.assign({},Ast(n,e.attribute.angle)),{angle:a2(e.attribute.angle)}))}))}function _$t(n,t){t.forEach((e=>{e.attribute.angle&&e.setAttributes(Object.assign(Object.assign({},Sst(n,e.attribute.angle)),{angle:a2(e.attribute.angle)}))}))}function Sst(n,t=0){let e=["center","left","left","left","center","right","right","right","left"],i=["top","top","middle","bottom","bottom","bottom","middle","top","top"];n==="top"&&(e=["center","right","right","right","center","left","left","left","right"],i=["bottom","bottom","middle","top","top","top","middle","bottom","bottom"]);const r=(t=a2(t))/(.5*Math.PI);let o;return o=r===Math.floor(r)?2*Math.floor(r):2*Math.floor(r)+1,{textAlign:e[o],textBaseline:i[o]}}function Ast(n,t=0){let e=["right","right","center","left","left","left","center","right","right"],i=["middle","middle","top","top","middle","middle","bottom","bottom","middle"];n==="right"&&(e=["left","left","center","right","right","right","center","left","left"],i=["middle","middle","bottom","bottom","middle","middle","top","middle","middle"]);const r=(t=a2(t))/(.5*Math.PI);let o;return o=r===Math.floor(r)?2*Math.floor(r):2*Math.floor(r)+1,{textAlign:e[o],textBaseline:i[o]}}function C$t(n){return hn(n)?{left:n,right:n}:Bs(n)?{left:n.left||0,right:n.right||0}:{left:0,right:0}}function w$t(n,t){const{limitLength:e,verticalLimitLength:i,ellipsis:r="...",orient:o,axisLength:a}=t;if(fi(n)||!hn(e))return;const s=C$t(t.overflowLimitLength),l=n[0],h=l.attribute.angle,u=!fe(h),d=u?Math.cos(h):1,c=u?Math.sin(h):0,f=H3(h),g=wst(h),p=o==="top"||o==="bottom",v=l.attribute.direction,m=!f&&!g&&p&&(n.length<2||n.some((y=>Math.abs(y.AABBBounds.width()-l.AABBBounds.width())>=2)))&&l.AABBBounds.width()>Math.abs(e/c);n.forEach((y=>{var b;if(p&&(g&&Math.floor(y.AABBBounds.height())<=e||f&&Math.floor(y.AABBBounds.width())<=i)||!p&&(v==="vertical"&&Math.floor(y.AABBBounds.height())<=i||v!=="vertical"&&(f&&Math.floor(y.AABBBounds.width())<=e||g&&Math.floor(y.AABBBounds.height())<=i)))return;let _=null;if(f||g)_=p?f?i:e:v==="vertical"||g?i:e;else if(p){const{x1:w,x2:C}=y.AABBBounds,x=c/d,S=Math.abs(e/c);if(m&&x>0&&w<=a+s.right&&e/x+w>a+s.right){const A=(a-w+s.right)/Math.abs(d);_=Math.min(A,S)}else if(m&&x<0&&C>=-s.left&&e/x+C<-s.left){const A=(C+s.left)/Math.abs(d);_=Math.min(A,S)}else _=S}else _=Math.abs(e/d);hn(y.attribute.maxLineWidth)&&(_=hn(_)?Math.min(y.attribute.maxLineWidth,_):y.attribute.maxLineWidth),y.setAttributes({maxLineWidth:_,ellipsis:(b=y.attribute.ellipsis)!==null&&b!==void 0?b:r})}))}function x$t(n,t){const{limitLength:e,axisLength:i,ellipsis:r="...",orient:o}=t;if(fi(n)||!hn(e))return;const a=n[0].attribute.angle,s=H3(a),l=wst(a),h=o==="top"||o==="bottom";let u=i/n.length;n.forEach(((d,c)=>{var f,g,p,v,m;if(h){if(l&&Math.floor(d.AABBBounds.height())<=e)return;if(s){const _=gU(d.attribute.x,(f=n[c+1])===null||f===void 0?void 0:f.attribute.x,(g=n[c-1])===null||g===void 0?void 0:g.attribute.x);hn(_)&&(u=iA(u,_))}}else{if(l){const _=gU(d.attribute.y,(p=n[c+1])===null||p===void 0?void 0:p.attribute.y,(v=n[c-1])===null||v===void 0?void 0:v.attribute.y);hn(_)&&(u=iA(u,_))}if(s&&Math.floor(d.AABBBounds.width())<=e)return}let y=null,b=null;h?l?(y=e,b=u):(y=u,b=e):l?(y=u,b=e):(y=e,b=u),d.setAttributes({maxLineWidth:y,ellipsis:(m=d.attribute.ellipsis)!==null&&m!==void 0?m:r,whiteSpace:"normal",heightLimit:b})}))}function gU(n,t,e){let i;return hn(t)&&(i=Math.abs(t-n)),hn(e)&&(i=hn(i)?Math.min(Math.abs(n-e),i):Math.abs(n-e)),i}function S$t(n,t,e,i,r){i==="left"||i==="right"?r==="left"?n.forEach((o=>{var a;o.setAttributes({dx:((a=o.attribute.dx)!==null&&a!==void 0?a:0)+t-o.AABBBounds.x1})})):r==="right"?n.forEach((o=>{var a;o.setAttributes({dx:((a=o.attribute.dx)!==null&&a!==void 0?a:0)+t+e-o.AABBBounds.x2})})):r==="center"&&n.forEach((o=>{var a;o.setAttributes({dx:((a=o.attribute.dx)!==null&&a!==void 0?a:0)+t+e/2-(o.AABBBounds.x1+o.AABBBounds.x2)/2})})):i!=="bottom"&&i!=="top"||(r==="top"?n.forEach((o=>{var a;o.setAttributes({dy:((a=o.attribute.dy)!==null&&a!==void 0?a:0)+t-o.AABBBounds.y1})})):r==="bottom"?n.forEach((o=>{var a;o.setAttributes({dy:((a=o.attribute.dy)!==null&&a!==void 0?a:0)+t+e-o.AABBBounds.y2})})):r==="middle"&&n.forEach((o=>{var a;o.setAttributes({dy:((a=o.attribute.dy)!==null&&a!==void 0?a:0)+t+e/2-(o.AABBBounds.y1+o.AABBBounds.y2)/2})})))}class A$t{isInValidValue(t){return t<0||t>1}getTickCoord(t){const{start:e}=this.attribute,i=this.getRelativeVector();return{x:e.x+i[0]*t,y:e.y+i[1]*t}}getRelativeVector(t){const{start:e,end:i}=this.attribute;return[i.x-e.x,i.y-e.y]}getVerticalVector(t,e=!1,i){const{verticalFactor:r=1}=this.attribute,o=this.getRelativeVector(),a=z7t(o),s=[a[1],-1*a[0]];return dst(s,t*(e?1:-1)*r)}}const z3=(n,t)=>Object.prototype.toString.call(n)===`[object ${t}]`,lh=n=>typeof n=="function",Ui=n=>n==null,Nr=n=>n!=null,pU=(n,t=!1)=>{const e=typeof n;return t?e==="string":e==="string"||z3(n,"String")},IO=n=>Array.isArray?Array.isArray(n):z3(n,"Array"),Mr=(n,t=!1)=>{const e=typeof n;return t?e==="number":e==="number"||z3(n,"Number")},fd=n=>Mr(n)&&Number.isFinite(n);function T$t(n){if(!n)return[];if(Object.keys)return Object.keys(n);const t=[];for(const e in n)n.hasOwnProperty(e)&&t.push(e);return t}function M$t(n,t,e){const i=T$t(t);for(let r=0;r<i.length;r++){const o=i[r];(e?t[o]!=null:n[o]==null)&&(n[o]=t[o])}return n}function vU(n,t,e=!0){if(n="prototype"in n?n.prototype:n,t="prototype"in t?t.prototype:t,Object.getOwnPropertyNames){const i=Object.getOwnPropertyNames(t);for(let r=0;r<i.length;r++){const o=i[r];o!=="constructor"&&(e?t[o]!=null:n[o]==null)&&(n[o]=t[o])}}else M$t(n,t,e)}const R$t=1e-10,P$t=1e-10;function Tst(n,t,e=P$t,i=R$t){const r=i,o=e*Math.max(n,t);return Math.abs(n-t)<=Math.max(r,o)}const Qd=2*Math.PI,pk=Math.sqrt,zg=Math.pow;class F3{constructor(t=0,e=0,i,r){this.x=0,this.y=0,this.x=t,this.y=e,this.x1=i,this.y1=r}clone(){return new F3(this.x,this.y)}copyFrom(t){return this.x=t.x,this.y=t.y,this.x1=t.x1,this.y1=t.y1,this.defined=t.defined,this.context=t.context,this}set(t,e){return this.x=t,this.y=e,this}add(t){return Mr(t)?(this.x+=t,void(this.y+=t)):(this.x+=t.x,this.y+=t.y,this)}sub(t){return Mr(t)?(this.x-=t,void(this.y-=t)):(this.x-=t.x,this.y-=t.y,this)}multi(t){throw new Error("")}div(t){throw new Error("")}}class F1{static distancePP(t,e){return pk(zg(t.x-e.x,2)+zg(t.y-e.y,2))}static distanceNN(t,e,i,r){return pk(zg(t-i,2)+zg(e-r,2))}static distancePN(t,e,i){return pk(zg(e-t.x,2)+zg(i-t.y,2))}static pointAtPP(t,e,i){return new F3((e.x-t.x)*i+t.x,(e.y-t.y)*i+t.y)}}class oe{constructor(){}static linear(t){return t}static none(){return this.linear}static get(t){return t<-1?t=-1:t>1&&(t=1),function(e){return t===0?e:t<0?e*(e*-t+1+t):e*((2-e)*t+(1-t))}}static getPowIn(t){return function(e){return Math.pow(e,t)}}static getPowOut(t){return function(e){return 1-Math.pow(1-e,t)}}static getPowInOut(t){return function(e){return(e*=2)<1?.5*Math.pow(e,t):1-.5*Math.abs(Math.pow(2-e,t))}}static getBackIn(t){return function(e){return e*e*((t+1)*e-t)}}static getBackOut(t){return function(e){return--e*e*((t+1)*e+t)+1}}static getBackInOut(t){return t*=1.525,function(e){return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}}static sineIn(t){return 1-Math.cos(t*Math.PI/2)}static sineOut(t){return Math.sin(t*Math.PI/2)}static sineInOut(t){return-(Math.cos(Math.PI*t)-1)/2}static expoIn(t){return t===0?0:Math.pow(2,10*t-10)}static expoOut(t){return t===1?1:1-Math.pow(2,-10*t)}static expoInOut(t){return t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2}static circIn(t){return-(Math.sqrt(1-t*t)-1)}static circOut(t){return Math.sqrt(1- --t*t)}static circInOut(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}static bounceOut(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}static bounceIn(t){return 1-oe.bounceOut(1-t)}static bounceInOut(t){return t<.5?.5*oe.bounceIn(2*t):.5*oe.bounceOut(2*t-1)+.5}static getElasticIn(t,e){return function(i){if(i===0||i===1)return i;const r=e/Qd*Math.asin(1/t);return-t*Math.pow(2,10*(i-=1))*Math.sin((i-r)*Qd/e)}}static getElasticOut(t,e){return function(i){if(i===0||i===1)return i;const r=e/Qd*Math.asin(1/t);return t*Math.pow(2,-10*i)*Math.sin((i-r)*Qd/e)+1}}static getElasticInOut(t,e){return function(i){const r=e/Qd*Math.asin(1/t);return(i*=2)<1?t*Math.pow(2,10*(i-=1))*Math.sin((i-r)*Qd/e)*-.5:t*Math.pow(2,-10*(i-=1))*Math.sin((i-r)*Qd/e)*.5+1}}static registerFunc(t,e){oe[t]=e}}function B$t(n,t){const e=1/t;let i=1;for(;n>e;)n-=e,i*=-1;const r=i*n/e;return r>0?r:1+r}oe.quadIn=oe.getPowIn(2),oe.quadOut=oe.getPowOut(2),oe.quadInOut=oe.getPowInOut(2),oe.cubicIn=oe.getPowIn(3),oe.cubicOut=oe.getPowOut(3),oe.cubicInOut=oe.getPowInOut(3),oe.quartIn=oe.getPowIn(4),oe.quartOut=oe.getPowOut(4),oe.quartInOut=oe.getPowInOut(4),oe.quintIn=oe.getPowIn(5),oe.quintOut=oe.getPowOut(5),oe.quintInOut=oe.getPowInOut(5),oe.backIn=oe.getBackIn(1.7),oe.backOut=oe.getBackOut(1.7),oe.backInOut=oe.getBackInOut(1.7),oe.elasticIn=oe.getElasticIn(1,.3),oe.elasticOut=oe.getElasticOut(1,.3),oe.elasticInOut=oe.getElasticInOut(1,.3*1.5),oe.easeInOutQuad=n=>(n/=.5)<1?.5*Math.pow(n,2):-.5*((n-=2)*n-2),oe.easeOutElastic=n=>{const t=2*Math.PI/3;return n===0?0:n===1?1:Math.pow(2,-10*n)*Math.sin((10*n-.75)*t)+1},oe.easeInOutElastic=n=>{const t=2*Math.PI/4.5;return n===0?0:n===1?1:n<.5?-Math.pow(2,20*n-10)*Math.sin((20*n-11.125)*t)/2:Math.pow(2,-20*n+10)*Math.sin((20*n-11.125)*t)/2+1};for(let n=0;n<10;n++)oe[`flicker${n}`]=t=>B$t(t,n);for(let n=2;n<10;n++)oe[`aIn${n}`]=t=>n*t*t+(1-n)*t;function Ii(n,t,e){return n+(t-n)*e}class k$t{constructor(){this.opacity=(t,e,i,r,o,a)=>{a.attribute.opacity=Ii(e,i,r)},this.baseOpacity=(t,e,i,r,o,a)=>{a.attribute.baseOpacity=Ii(e,i,r)},this.fillOpacity=(t,e,i,r,o,a)=>{a.attribute.fillOpacity=Ii(e,i,r)},this.strokeOpacity=(t,e,i,r,o,a)=>{a.attribute.strokeOpacity=Ii(e,i,r)},this.zIndex=(t,e,i,r,o,a)=>{a.attribute.zIndex=Ii(e,i,r)},this.backgroundOpacity=(t,e,i,r,o,a)=>{a.attribute.backgroundOpacity=Ii(e,i,r)},this.shadowOffsetX=(t,e,i,r,o,a)=>{a.attribute.shadowOffsetX=Ii(e,i,r)},this.shadowOffsetY=(t,e,i,r,o,a)=>{a.attribute.shadowOffsetY=Ii(e,i,r)},this.shadowBlur=(t,e,i,r,o,a)=>{a.attribute.shadowBlur=Ii(e,i,r)},this.fill=(t,e,i,r,o,a)=>{a.attribute.fill=Hf(e,i,r,!1)},this.fillPure=(t,e,i,r,o,a)=>{a.attribute.fill=o.fromParsedProps.fill?i$(o.fromParsedProps.fill,o.toParsedProps.fill,r):o.toParsedProps.fill},this.stroke=(t,e,i,r,o,a)=>{a.attribute.stroke=Hf(e,i,r,!1)},this.strokePure=(t,e,i,r,o,a)=>{a.attribute.stroke=o.fromParsedProps.stroke?i$(o.fromParsedProps.stroke,o.toParsedProps.stroke,r):o.toParsedProps.stroke},this.width=(t,e,i,r,o,a)=>{a.attribute.width=Ii(e,i,r),a.addUpdateBoundTag()},this.height=(t,e,i,r,o,a)=>{a.attribute.height=Ii(e,i,r),a.addUpdateBoundTag()},this.x=(t,e,i,r,o,a)=>{a.attribute.x=Ii(e,i,r),a.addUpdateBoundTag(),a.addUpdatePositionTag()},this.y=(t,e,i,r,o,a)=>{a.attribute.y=Ii(e,i,r),a.addUpdateBoundTag(),a.addUpdatePositionTag()},this.dx=(t,e,i,r,o,a)=>{a.attribute.dx=Ii(e,i,r),a.addUpdateBoundTag(),a.addUpdatePositionTag()},this.dy=(t,e,i,r,o,a)=>{a.attribute.dy=Ii(e,i,r),a.addUpdateBoundTag(),a.addUpdatePositionTag()},this.angle=(t,e,i,r,o,a)=>{a.attribute.angle=Ii(e,i,r),a.addUpdateBoundTag(),a.addUpdatePositionTag()},this.scaleX=(t,e,i,r,o,a)=>{a.attribute.scaleX=Ii(e,i,r),a.addUpdateBoundTag(),a.addUpdatePositionTag()},this.scaleY=(t,e,i,r,o,a)=>{a.attribute.scaleY=Ii(e,i,r),a.addUpdateBoundTag(),a.addUpdatePositionTag()},this.lineWidth=(t,e,i,r,o,a)=>{a.attribute.lineWidth=Ii(e,i,r),a.addUpdateBoundTag()},this.startAngle=(t,e,i,r,o,a)=>{a.attribute.startAngle=Ii(e,i,r),a.addUpdateBoundTag()},this.endAngle=(t,e,i,r,o,a)=>{a.attribute.endAngle=Ii(e,i,r),a.addUpdateBoundTag()},this.radius=(t,e,i,r,o,a)=>{a.attribute.radius=Ii(e,i,r),a.addUpdateBoundTag()},this.outerRadius=(t,e,i,r,o,a)=>{a.attribute.outerRadius=Ii(e,i,r),a.addUpdateBoundTag()},this.innerRadius=(t,e,i,r,o,a)=>{a.attribute.innerRadius=Ii(e,i,r),a.addUpdateBoundTag()},this.size=(t,e,i,r,o,a)=>{a.attribute.size=Ii(e,i,r),a.addUpdateBoundTag()},this.points=(t,e,i,r,o,a)=>{a.attribute.points=VM(e,i,r),a.addUpdateBoundTag()}}}const n0=new k$t;function mU(n,t,e,i,r,o){if(Number.isFinite(e)&&Number.isFinite(t))return o.attribute[n]=t+(e-t)*i,!0;if(Array.isArray(e)&&Array.isArray(t)&&e.length===t.length){const a=[];let s=!0;for(let l=0;l<e.length;l++){const h=t[l],u=h+(e[l]-h)*i;if(!Number.isFinite(u)){s=!1;break}a.push(u)}return s&&(o.attribute[n]=a),!0}return!1}function yU(){}class SA{constructor(t,e,i,r){var o;this._startTime=0,this._hasFirstRun=!1,this._syncAttributeUpdate=()=>{this.target.setAttributes(this.target.attribute)},this.type=t,this.props=e,this.duration=i,this.easing=r?typeof r=="function"?r:(o=oe[r])!==null&&o!==void 0?o:oe.linear:oe.linear,t==="wait"&&(this.onUpdate=yU),this.id=pn.GenAutoIncrementId(),this.syncAttributeUpdate=yU}bind(t,e){this.target=t,this.animate=e,this.onBind(),this.syncAttributeUpdate()}append(t){this.next=t,t.prev=this,t.setStartTime(this.getStartTime()+this.duration,!1)}updateDownstreamStartTimes(){let t=this.next,e=this._startTime+this.duration;for(;t;)t.setStartTime(e,!1),e+=t.duration,t=t.next;this.animate.updateDuration()}getLastProps(){return this.prev?this.prev.props||{}:this.animate.getStartProps()}setDuration(t,e=!0){this.duration=t,e&&this.updateDownstreamStartTimes()}getDuration(){return this.duration}determineInterpolateUpdateFunction(){if(!this.props)return;const t=[];this.propKeys.forEach((e=>{if(e==="fill"||e==="stroke"){const i=this.fromProps[e],r=this.props[e];if(pU(i)&&pU(r)){const o=_n.Get(i,xs.Color255),a=_n.Get(r,xs.Color255);this.fromParsedProps||(this.fromParsedProps={}),this.toParsedProps||(this.toParsedProps={}),this.fromParsedProps[e]=o,this.toParsedProps[e]=a,t.push(n0[e==="fill"?"fillPure":"strokePure"])}else n0[e]?t.push(n0[e]):t.push(mU)}else n0[e]?t.push(n0[e]):t.push(mU)})),this.interpolateUpdateFunctions=t}setStartTime(t,e=!0){this._startTime=t,e&&this.updateDownstreamStartTimes()}getStartTime(){return this._startTime}onBind(){this.target.type==="glyph"&&(this.syncAttributeUpdate=this._syncAttributeUpdate)}onFirstRun(){}onStart(){if(!this._hasFirstRun){this._hasFirstRun=!0,this.fromProps=this.getLastProps();const t=this.animate.getStartProps();this.propKeys&&this.propKeys.forEach((e=>{var i;this.fromProps[e]=(i=this.fromProps[e])!==null&&i!==void 0?i:t[e]})),this.determineInterpolateUpdateFunction(),this.tryPreventConflict(),this.trySyncStartProps(),this.onFirstRun()}}tryPreventConflict(){const t=this.animate;this.target.animates.forEach((e=>{if(e===t||e.priority>t.priority||e.priority===1/0)return;const i=e.getStartProps();this.propKeys.forEach((r=>{i[r]!=null&&e.preventAttr(r)}))}))}deleteSelfAttr(t){var e;delete this.props[t],this.fromProps&&delete this.fromProps[t];const i=this.propKeys.indexOf(t);i!==-1&&(this.propKeys.splice(i,1),(e=this.interpolateUpdateFunctions)===null||e===void 0||e.splice(i,1))}trySyncStartProps(){this.propKeys.forEach((t=>{this.fromProps[t]=this.animate.target.getComputedAttribute(t)}))}update(t,e,i){if(this.onStart(),!this.props||!this.propKeys)return;const r=this.easing(e);this.animate.interpolateUpdateFunction?this.animate.interpolateUpdateFunction(this.fromProps,this.props,r,this,this.target):this.interpolateUpdateFunctions.forEach(((o,a)=>{if(!this.animate.validAttr(this.propKeys[a]))return;const s=this.propKeys[a];o(s,this.fromProps[s],this.props[s],r,this,this.target)})),this.onUpdate(t,r,i),this.syncAttributeUpdate()}onUpdate(t,e,i){}onEnd(t){this.target.setAttributes(this.props),t?this._endCb=t:this._endCb&&this._endCb(this.animate,this)}getEndProps(){return this.props}getFromProps(){return this.fromProps}getMergedEndProps(){return this.getEndProps()}stop(){}release(){}}class L$t extends SA{constructor(t,e,i,r){super(t,e,i,r)}onStart(){super.onStart();const t=this.getFromProps();this.target.setAttributes(t)}update(t,e,i){this.onStart()}determineInterpolateUpdateFunction(){}}class N3 extends ng{get animateCount(){return this._animateCount}constructor(){super(),this.head=null,this.tail=null,this.animateMap=new Map,this._animateCount=0,this._playSpeed=1,this._totalDuration=0,this._startTime=0,this._currentTime=0,this._animationEndFlag=!0,this.id=pn.GenAutoIncrementId(),this.paused=!1}isRunning(){return!this.paused&&this._animateCount>0}forEachAccessAnimate(t){let e=this.head,i=0;for(;e;){const r=e.next;t(e.animate,i),i++,e=r}}addAnimate(t){const e={animate:t,next:null,prev:null};this.head?this.tail&&(this.tail.next=e,e.prev=this.tail,this.tail=e):(this.head=e,this.tail=e),this.animateMap.set(t,e),this._animateCount++,this._totalDuration=Math.max(this._totalDuration,t.getStartTime()+t.getDuration())}pause(){this.paused=!0}resume(){this.paused=!1}tick(t){if(this.paused)return;this._animationEndFlag&&(this._animationEndFlag=!1,this.emit("animationStart"));const e=t*this._playSpeed;this._currentTime+=e,this.forEachAccessAnimate(((i,r)=>{i.status===Dr.END?this.removeAnimate(i,!0):i.status!==Dr.RUNNING&&i.status!==Dr.INITIAL||i.advance(e)})),this._animateCount===0&&(this._animationEndFlag=!0,this.emit("animationEnd"))}clear(){this.forEachAccessAnimate((t=>{t.release()})),this.head=null,this.tail=null,this.animateMap.clear(),this._animateCount=0,this._totalDuration=0}removeAnimate(t,e=!0){const i=this.animateMap.get(t);i&&(e&&(t._onRemove&&t._onRemove.forEach((r=>r())),t.release()),i.prev?i.prev.next=i.next:this.head=i.next,i.next?i.next.prev=i.prev:this.tail=i.prev,this.animateMap.delete(t),this._animateCount--,t.getStartTime()+t.getDuration()>=this._totalDuration&&this.recalculateTotalDuration())}recalculateTotalDuration(){this._totalDuration=0,this.forEachAccessAnimate((t=>{this._totalDuration=Math.max(this._totalDuration,t.getStartTime()+t.getDuration())}))}getTotalDuration(){return this._totalDuration}getPlaySpeed(){return this._playSpeed}setPlaySpeed(t){this._playSpeed=t}getPlayState(){return this.paused?"paused":this.animateCount===0?"stopped":"playing"}setStartTime(t){this._startTime=t}getStartTime(){return this._startTime}getCurrentTime(){return this._currentTime}setCurrentTime(t){this._currentTime=t}}const W3=new N3;W3.isGlobal=!0;class Mst{constructor(t=pn.GenAutoIncrementId(),e=W3,i){this.id=t,this.status=Dr.INITIAL,this._timeline=e,e.addAnimate(this),this.slience=i,this._startTime=0,this._duration=0,this._totalDuration=0,this._loopCount=0,this._currentLoop=0,this._bounce=!1,this._firstStep=null,this._lastStep=null,this._startProps={},this._endProps={},this._preventAttrs=new Set,this.currentTime=0,this.interpolateUpdateFunction=null,this.priority=0}getStartProps(){return this._startProps}getEndProps(){return this._endProps}setTimeline(t){this._timeline=t}getTimeline(){return this._timeline}get timeline(){return this._timeline}bind(t){return this.target=t,this.target.animates||(this.target.animates=new Map),this.target.animates.set(this.id,this),this.onRemove((()=>{this.stop(),this.target.animates.delete(this.id)})),this.target.onAnimateBind&&!this.slience&&this.target.onAnimateBind(this),this.target.animationAttribute||(this.target.animationAttribute={}),this}to(t,e=300,i="linear"){const r=new SA(dy.to,t,e,i);return r.bind(this.target,this),this.updateStepAfterAppend(r),this}wait(t){const e=new L$t(dy.wait,{},t,"linear");return e.bind(this.target,this),this.updateStepAfterAppend(e),this}updateStepAfterAppend(t){this._firstStep?(this._lastStep.append(t),this._lastStep=t):(this._firstStep=t,this._lastStep=t),this.parseStepProps(t),this.updateDuration()}parseStepProps(t){this._lastStep&&(t.propKeys=t.propKeys||Object.keys(t.props),Object.keys(this._endProps).forEach((e=>{var i;t.props[e]=(i=t.props[e])!==null&&i!==void 0?i:this._endProps[e]})),t.propKeys.forEach((e=>{this._endProps[e]=t.props[e]})))}reSyncProps(){if(!this._lastStep)return;this._endProps={};let t=this._firstStep;for(;t;)Object.keys(this._endProps).forEach((e=>{var i;t.props[e]=(i=t.props[e])!==null&&i!==void 0?i:this._endProps[e]})),t.propKeys.forEach((e=>{this._endProps[e]=t.props[e]})),t=t.next}from(t,e=300,i="linear"){const r=new SA(dy.from,t,e,i);return this._firstStep?(this._lastStep.append(r),this._lastStep=r):(this._firstStep=r,this._lastStep=r),this.updateDuration(),this}play(t){return t.bind(this.target,this),this.updateStepAfterAppend(t),this}pause(){this.status===Dr.RUNNING&&(this.status=Dr.PAUSED)}resume(){this.status===Dr.PAUSED&&(this.status=Dr.RUNNING)}onStart(t){var e;t?(this._onStart||(this._onStart=[]),this._onStart.push(t)):((e=this._onStart)===null||e===void 0||e.forEach((i=>i())),Object.keys(this._endProps).forEach((i=>{this._startProps[i]=this.target.getComputedAttribute(i)})))}onEnd(t){var e;t?(this._onEnd||(this._onEnd=[]),this._onEnd.push(t)):(e=this._onEnd)===null||e===void 0||e.forEach((i=>i()))}onFrame(t){t&&(this._onFrame||(this._onFrame=[]),this._onFrame.push(t))}onRemove(t){var e;t?(this._onRemove||(this._onRemove=[]),this._onRemove.push(t)):(e=this._onRemove)===null||e===void 0||e.forEach((i=>i()))}preventAttr(t){this._preventAttrs.add(t),delete this._startProps[t],delete this._endProps[t];let e=this._firstStep;for(;e;)e.deleteSelfAttr(t),e=e.next}preventAttrs(t){t.forEach((e=>this._preventAttrs.add(e)))}validAttr(t){return!this._preventAttrs.has(t)}runCb(t){var e;return(e=this._lastStep)===null||e===void 0||e.onEnd(t),this}startAt(t){return this._startTime=t,this}customInterpolate(t,e,i,r,o,a){return!1}getFromValue(){return this._startProps}getToValue(){return this._endProps}stop(t){let e=this._firstStep;for(;e;)e.stop(),e=e.next;this.status!==Dr.END&&this.onEnd(),this.status=Dr.END,this.target&&(t==="start"?this.target.setAttributes(this._startProps):t==="end"?this.target.setAttributes(this._endProps):t&&this.target.setAttributes(t))}release(){this.status=Dr.END,this._onRemove&&this._onRemove.forEach((t=>t())),this._onStart=[],this._onFrame=[],this._onEnd=[],this._onRemove=[],this.forEachStep((t=>{t.release()}))}getDuration(){return this._duration}getStartTime(){return this._startTime}afterAll(t){if(!t||t.length===0)return this;let e=0;return t.forEach((i=>{const r=i.getStartTime()+i.getTotalDuration();e=Math.max(e,r)})),this.startAt(e)}after(t){if(!t)return this;const e=t.getStartTime()+t.getTotalDuration();return this.startAt(e)}parallel(t){return t?(this.startAt(t.getStartTime()),this):this}loop(t){return t===!0?t=1/0:t===!1&&(t=0),this._loopCount=t,this.updateDuration(),this}bounce(t){return this._bounce=t,this}advance(t){var e,i,r;if(this.status===Dr.END)return;const o=this.currentTime+t;if(o<this._startTime)return void(this.currentTime=o);if(o>=this._startTime+this._totalDuration)return(e=this._lastStep)===null||e===void 0||e.onUpdate(!0,1,{}),(i=this._lastStep)===null||i===void 0||i.onEnd(),this.onEnd(),void(this.status=Dr.END);this.status=Dr.RUNNING,this.currentTime<=this._startTime&&this.onStart(),this.currentTime=o;let a=o-this._startTime,s=!1,l=!1;if(this._loopCount>0){a=(o-this._startTime)%this._duration;const c=Math.floor((o-this._startTime)/this._duration);s=c>this._currentLoop,this._currentLoop=c,l=this._bounce&&c%2==1,l&&(a=this._duration-a)}s&&!l&&this.target.setAttributes(this._startProps);let h=null;if(this._lastStep===this._firstStep)h=this._firstStep;else{let c=this._firstStep;for(;c;){const f=c.getStartTime(),g=c.getDuration();if(a>=f&&a<=f+g){h=c;break}c=c.next}}if(!h)return;h!==this.lastRunStep&&((r=this.lastRunStep)===null||r===void 0||r.onEnd()),this.lastRunStep=h;const u=(a-h.getStartTime())/h.getDuration(),d=u>=1;h.update(d,u,{}),d&&(h.onEnd(),this.lastRunStep=null)}updateDuration(){this._lastStep?(this._duration=this._lastStep.getStartTime()+this._lastStep.getDuration(),this._totalDuration=this._duration*(this._loopCount+1)):this._duration=0}getTotalDuration(){return this._totalDuration}getLoop(){return this._loopCount}forEachStep(t){let e=this._firstStep;for(;e;)t(e),e=e.next}}const E$t=new Dot;class D$t{constructor(){this.released=!1}tick(t,e){E$t.addAnimationFrameCb((()=>{if(!this.released)return e(this)}))}release(){this.released=!0}getTime(){return Date.now()}}class Rst extends ng{constructor(t){super(),this.timelines=[],this.frameTimeHistory=[],this.handleTick=(e,i)=>{const{once:r=!1}=i??{};if(this.ifCanStop())return this.stop(),!1;const o=e.getTime();this._lastTickTime=o,this.lastFrameTime<0&&(this.lastFrameTime=o-this.interval+this.timeOffset,this.frameTimeHistory.push(this.lastFrameTime));const a=o-this.lastFrameTime,s=this.checkSkip(a);return s||(this._handlerTick(a),this.lastFrameTime=o,this.frameTimeHistory.push(this.lastFrameTime)),r||e.tick(this.interval,this.handleTick),!s},this._handlerTick=e=>{this.status===mo.RUNNING&&(this.tickCounts++,this.timelines.forEach((i=>{i.tick(e)})),this.emit("tick",e))},this.init(),this.lastFrameTime=-1,this.tickCounts=0,this.stage=t,this.autoStop=!0,this.interval=16,this.computeTimeOffsetAndJitter()}bindStage(t){this.stage=t}computeTimeOffsetAndJitter(){this.timeOffset=Math.floor(Math.random()*this.interval),this._jitter=Math.min(Math.max(.2*this.interval,6),.7*this.interval)}init(){this.interval=16,this.status=mo.INITIAL,St.global.hooks.onSetEnv.tap("graph-ticker",(()=>{this.initHandler(!1)})),St.global.env&&this.initHandler(!1)}addTimeline(t){this.timelines.push(t)}remTimeline(t){this.timelines=this.timelines.filter((e=>e!==t))}getTimelines(){return this.timelines}initHandler(t=!1){this.setupTickHandler(t)}setupTickHandler(t=!1){if(!t&&this.tickerHandler)return!0;const e=new D$t;return this.tickerHandler&&this.tickerHandler.release(),this.tickerHandler=e,!0}setInterval(t){this.interval=t,this.computeTimeOffsetAndJitter()}getInterval(){return this.interval}setFPS(t){this.setInterval(Math.floor(1e3/t))}getFPS(){return 1e3/this.interval}tick(t){this.tickerHandler.tick(t,(e=>this.handleTick(e,{once:!0})))}tickTo(t){this.tickerHandler.tickTo&&this.tickerHandler.tickTo(t,(e=>{this.handleTick(e,{once:!0})}))}pause(){return this.status!==mo.INITIAL&&(this.status=mo.PAUSE,!0)}resume(){return this.status!==mo.INITIAL&&(this.status=mo.RUNNING,!0)}ifCanStop(){return!!(this.autoStop&&(!this.timelines.length||this.timelines.every((t=>!t.isRunning()))))}start(t=!1){return this.status===mo.RUNNING||!this.tickerHandler||!t&&(this.status===mo.PAUSE||this.ifCanStop())?!1:(this.status=mo.RUNNING,this.tickerHandler.tick(0,this.handleTick),!0)}stop(){this.status=mo.INITIAL,this.setupTickHandler(!0),this.lastFrameTime=-1}trySyncTickStatus(){this.status===mo.INITIAL&&this.timelines.some((t=>t.isRunning()))?this.start():this.status===mo.RUNNING&&this.timelines.every((t=>!t.isRunning()))&&this.stop()}release(){var t;this.stop(),this.timelines=[],(t=this.tickerHandler)===null||t===void 0||t.release(),this.tickerHandler=null,this.lastFrameTime=-1}checkSkip(t){var e,i,r;return((r=(i=(e=this.stage)===null||e===void 0?void 0:e.params)===null||i===void 0?void 0:i.optimize)===null||r===void 0?void 0:r.tickRenderMode)==="performance"?!1:t<this.interval+2*(Math.random()-.5)*this._jitter}}class Jc{constructor(){this.transitions=new Map,this.registerDefaultTransitions()}static getInstance(){return Jc.instance||(Jc.instance=new Jc),Jc.instance}registerDefaultTransitions(){this.registerTransition("appear","*",(()=>({allowTransition:!0,stopOriginalTransition:!1}))),this.registerTransition("appear","appear",(()=>({allowTransition:!1,stopOriginalTransition:!1}))),this.registerTransition("appear","disappear",(()=>({allowTransition:!0,stopOriginalTransition:!0}))),this.registerTransition("appear","exit",(()=>({allowTransition:!0,stopOriginalTransition:!0}))),this.registerTransition("normal","*",(()=>({allowTransition:!0,stopOriginalTransition:!1}))),this.registerTransition("normal","normal",(()=>({allowTransition:!1,stopOriginalTransition:!1}))),this.registerTransition("normal","disappear",(()=>({allowTransition:!0,stopOriginalTransition:!0}))),this.registerTransition("normal","exit",(()=>({allowTransition:!0,stopOriginalTransition:!0}))),this.registerTransition("exit","*",(()=>({allowTransition:!1,stopOriginalTransition:!1}))),this.registerTransition("exit","disappear",(()=>({allowTransition:!0,stopOriginalTransition:!0}))),this.registerTransition("exit","enter",(()=>({allowTransition:!0,stopOriginalTransition:!0}))),this.registerTransition("exit","exit",(()=>({allowTransition:!1,stopOriginalTransition:!1}))),this.registerTransition("enter","*",(()=>({allowTransition:!0,stopOriginalTransition:!1}))),this.registerTransition("enter","enter",(()=>({allowTransition:!1,stopOriginalTransition:!1}))),this.registerTransition("enter","disappear",(()=>({allowTransition:!0,stopOriginalTransition:!0}))),this.registerTransition("enter","exit",(()=>({allowTransition:!0,stopOriginalTransition:!0}))),this.registerTransition("disappear","*",(()=>({allowTransition:!1,stopOriginalTransition:!1}))),this.registerTransition("disappear","appear",(()=>({allowTransition:!0,stopOriginalTransition:!0}))),this.registerTransition("update","*",(()=>({allowTransition:!0,stopOriginalTransition:!1}))),this.registerTransition("update","disappear",(()=>({allowTransition:!0,stopOriginalTransition:!0}))),this.registerTransition("update","exit",(()=>({allowTransition:!0,stopOriginalTransition:!0}))),this.registerTransition("state","*",(()=>({allowTransition:!0,stopOriginalTransition:!1}))),this.registerTransition("state","disappear",(()=>({allowTransition:!0,stopOriginalTransition:!0}))),this.registerTransition("state","exit",(()=>({allowTransition:!0,stopOriginalTransition:!0})))}isTransitionAllowed(t,e,i){var r,o,a,s;let l=(r=this.transitions.get(t))===null||r===void 0?void 0:r.get(e);return l?l(i,t):(l=(o=this.transitions.get(t))===null||o===void 0?void 0:o.get("*"),l?l(i,t):(l=(a=this.transitions.get("*"))===null||a===void 0?void 0:a.get(e),l?l(i,t):(l=(s=this.transitions.get("*"))===null||s===void 0?void 0:s.get("*"),l?l(i,t):{allowTransition:!0,stopOriginalTransition:!0})))}registerTransition(t,e,i){let r=this.transitions.get(t);r||(r=new Map,this.transitions.set(t,r)),r.set(e,i)}}Jc.getInstance();class Bt{static registerBuiltInAnimate(t,e){Bt.builtInAnimateMap[t]=e}constructor(t){this._animates=[],this._startCallbacks=[],this._endCallbacks=[],this._started=!1,this._activeCount=0,this._target=t}get started(){return this._started}onStart(t){t?(this._startCallbacks.push(t),this._started&&this._activeCount>0&&t()):this._startCallbacks.forEach((e=>{e()}))}onEnd(t){t?this._endCallbacks.push(t):this._endCallbacks.forEach((e=>{e()}))}_trackAnimation(t){this._animates.push(t),this._activeCount++,this._activeCount!==1||this._started||(this._started=!0,this.onStart()),t.onEnd((()=>{this._activeCount--;const e=this._animates.indexOf(t);e>=0&&this._animates.splice(e,1),this._activeCount===0&&this._started&&(this._started=!1,this.onEnd())}))}parseParams(t,e,i){var r,o;const a=this.resolveValue(t.totalTime,void 0,void 0),s=this.resolveValue(t.startTime,void 0,0),l=Object.assign({},t);l.oneByOneDelay=0,l.startTime=s,l.totalTime=a;const h=this.resolveValue(t.oneByOne,i,!1);if(e){const u=l.timeSlices;IO(u)||(l.timeSlices=[u]);let d=0;l.timeSlices=l.timeSlices.map((g=>{const p=this.resolveValue(g.delay,i,0),v=this.resolveValue(g.delayAfter,i,0),m=this.resolveValue(g.duration,i,300);return d+=p+m+v,Object.assign(Object.assign({},g),{delay:p,delayAfter:v,duration:m})}));let c=0;h&&(c=typeof h=="number"?h:h?d:0),l.oneByOneDelay=c;let f=1;if(a){const g=d+c*(this._target.count-2);f=a?a/g:1}l.timeSlices=l.timeSlices.map((g=>{let p=g.effects;return Array.isArray(p)||(p=[p]),Object.assign(Object.assign({},g),{delay:g.delay*f,delayAfter:g.delayAfter*f,duration:g.duration*f,effects:p.map((v=>{var m,y;const b=(m=v.custom)!==null&&m!==void 0?m:Bt.builtInAnimateMap[(y=v.type)!==null&&y!==void 0?y:"fromTo"],_=b&&lh(b)?/^class\s/.test(Function.prototype.toString.call(b))?1:2:0;return Object.assign(Object.assign({},v),{custom:b,customType:_})}))})})),l.oneByOneDelay=c*f,l.startTime=s*f}else{const u=this.resolveValue(t.delay,i,0),d=this.resolveValue(t.delayAfter,i,0),c=this.resolveValue(t.duration,i,300);let f=0;h&&(f=typeof h=="number"?h:h?u+d+c:0),l.oneByOneDelay=f,l.custom=(r=t.custom)!==null&&r!==void 0?r:Bt.builtInAnimateMap[(o=t.type)!==null&&o!==void 0?o:"fromTo"];const g=l.custom&&lh(l.custom)?/^class\s/.test(Function.prototype.toString.call(l.custom))?1:2:0;if(l.customType=g,a){const p=u+d+c+f*(this._target.count-2),v=a?a/p:1;l.delay=u*v,l.delayAfter=d*v,l.duration=c*v,l.oneByOneDelay=f*v,l.startTime=s}}return l}execute(t){Array.isArray(t)?t.forEach((e=>this._execute(e))):this._execute(t)}_execute(t){if(t.selfOnly)return this._executeItem(t,this._target,0,1);const e="timeSlices"in t;let i;e&&t.partitioner&&(i=(i??this._target.getChildren()).filter((o=>{var a,s;return t.partitioner((s=(a=o.context)===null||a===void 0?void 0:a.data)===null||s===void 0?void 0:s[0],o,{})}))),e&&t.sort&&(i=i??this._target.getChildren(),i.sort(((o,a)=>{var s,l,h,u;return t.sort((l=(s=o.context)===null||s===void 0?void 0:s.data)===null||l===void 0?void 0:l[0],(u=(h=a.context)===null||h===void 0?void 0:h.data)===null||u===void 0?void 0:u[0],o,a,{})})));const r=e?(o,a,s)=>{const l=this.parseParams(t,e,o),h=this.executeTimelineItem(l,o,a,s);h&&this._trackAnimation(h)}:(o,a,s)=>{const l=this.parseParams(t,e,o),h=this.executeTypeConfigItem(l,o,a,s);h&&this._trackAnimation(h)};i?i.forEach(((o,a)=>r(o,a,i.length))):this._target.count<=1?r(this._target,0,1):this._target.forEachChildren(((o,a)=>r(o,a,this._target.count-1)))}executeTypeConfigItem(t,e,i,r){var o,a,s,l,h,u,d,c;const{type:f="fromTo",channel:g,customParameters:p,easing:v="linear",delay:m=0,delayAfter:y=0,duration:b=300,startTime:_=0,oneByOneDelay:w=0,loop:C,bounce:x,priority:S=0,options:A,custom:T,customType:M,controlOptions:R}=t,L=e.animate();L.priority=S;const B=lh(m)?m((a=(o=e.context)===null||o===void 0?void 0:o.data)===null||a===void 0?void 0:a[0],e,{}):m,P=(l=(s=e.context)===null||s===void 0?void 0:s.data)===null||l===void 0?void 0:l[0],k=(h=e.context)===null||h===void 0?void 0:h.indexKey;P&&k&&(i=(u=P[k])!==null&&u!==void 0?u:i),L.startAt(_);const E=i*w+B;E>0&&L.wait(E);let D=null,I=t.to,O=t.from;I||(D||(D=this.createPropsFromChannel(g,e)),I=D.props),O||(D||(D=this.createPropsFromChannel(g,e)),O=D.from),this._handleRunAnimate(L,T,M,O,I,b,v,p,R,A,f,e);let H=0;w&&(H=w*(r-i-1));const F=lh(y)?y((c=(d=e.context)===null||d===void 0?void 0:d.data)===null||c===void 0?void 0:c[0],e,{}):y;return F>0&&(H+=F),H>0&&L.wait(H),C&&C>0&&L.loop(C),x&&L.bounce(!0),L}_handleRunAnimate(t,e,i,r,o,a,s,l,h,u,d,c){var f,g,p,v,m,y;if(e&&i){const b=Object.assign({width:((f=c.stage)===null||f===void 0?void 0:f.width)||0,height:((g=c.stage)===null||g===void 0?void 0:g.height)||0,group:this._target.parent},this.resolveValue(l,c)),_=lh(u)?u.call(null,(v=b&&((p=b.data)===null||p===void 0?void 0:p[0]))!==null&&v!==void 0?v:(y=(m=c.context)===null||m===void 0?void 0:m.data)===null||y===void 0?void 0:y[0],c,b):u;b.options=_,b.controlOptions=h,i===1?this.createCustomAnimation(t,e,r,o,a,s,b):i===2&&this.createCustomInterpolatorAnimation(t,e,o,a,s,b)}else d==="to"?t.to(o,a,s):d==="from"&&t.from(o,a,s)}executeTimelineItem(t,e,i,r){var o,a,s,l;const{timeSlices:h,startTime:u=0,loop:d,bounce:c,oneByOneDelay:f,priority:g,controlOptions:p}=t,v=(a=(o=e.context)===null||o===void 0?void 0:o.data)===null||a===void 0?void 0:a[0],m=(s=e.context)===null||s===void 0?void 0:s.indexKey;v&&m&&(i=(l=v[m])!==null&&l!==void 0?l:i);const y=e.animate();return y.priority=g,y.startAt(u),y.wait(i*f),d&&d>0&&y.loop(d),c&&y.bounce(!0),(Array.isArray(h)?h:[h]).forEach((b=>{this.applyTimeSliceToAnimate(b,y,e,p)})),f&&y.wait(f*(r-i-1)),y}applyTimeSliceToAnimate(t,e,i,r){var o,a,s,l;const{effects:h,duration:u=300,delay:d=0,delayAfter:c=0}=t,f=lh(d)?d((a=(o=i.context)===null||o===void 0?void 0:o.data)===null||a===void 0?void 0:a[0],i,{}):d,g=lh(c)?c((l=(s=i.context)===null||s===void 0?void 0:s.data)===null||l===void 0?void 0:l[0],i,{}):c;f>0&&e.wait(f),(Array.isArray(h)?h:[h]).forEach((p=>{var v;const{type:m="fromTo",channel:y,customParameters:b,easing:_="linear",options:w}=p;let C=null,x=p.to,S=p.from;x||(C||(C=this.createPropsFromChannel(y,i)),x=C.props),S||(C||(C=this.createPropsFromChannel(y,i)),S=C.from);const A=(v=p.custom)!==null&&v!==void 0?v:Bt.builtInAnimateMap[m],T=p.customType;this._handleRunAnimate(e,A,T,S,x,u,_,b,r,w,m,i)})),g>0&&e.wait(g)}createCustomInterpolatorAnimation(t,e,i,r,o,a){Object.keys(i).forEach((l=>{t.target.getComputedAttribute(l)})),t.interpolateUpdateFunction=(l,h,u,d,c)=>{e(u,l,h,d,c,t.target,a)},t.to(i,r,o)}createCustomAnimation(t,e,i,r,o,a,s){const l=new e(i,r,o,a,s);t.play(l)}createPropsFromChannel(t,e){const i={};let r=null;return t?(Array.isArray(t)?t.forEach((o=>{var a,s;const l=(s=(a=e.context)===null||a===void 0?void 0:a.diffAttrs)===null||s===void 0?void 0:s[o];l!==void 0&&(i[o]=l)})):Object.keys(t).forEach((o=>{var a,s,l,h;const u=t[o];u.to!==void 0&&(typeof u.to=="function"?i[o]=u.to((s=(a=e.context)===null||a===void 0?void 0:a.data)===null||s===void 0?void 0:s[0],e,{}):i[o]=u.to),u.from!==void 0&&(r||(r={}),typeof u.from=="function"?r[o]=u.from((h=(l=e.context)===null||l===void 0?void 0:l.data)===null||h===void 0?void 0:h[0],e,{}):r[o]=u.from)})),{from:r,props:i}):{from:r,props:i}}resolveValue(t,e,i){var r,o;return t===void 0?i:typeof t=="function"&&e?t((o=(r=e.context)===null||r===void 0?void 0:r.data)===null||o===void 0?void 0:o[0],e,{}):t}executeItem(t,e,i=0,r=1){return Array.isArray(t)?t.map((o=>this._executeItem(o,e,i,r))).filter(Boolean):[this._executeItem(t,e,i,r)].filter(Boolean)}_executeItem(t,e,i=0,r=1){if(!e)return null;const o="timeSlices"in t;let a=null;const s=this.parseParams(t,o);return a=o?this.executeTimelineItem(s,e,i,r):this.executeTypeConfigItem(s,e,i,r),a&&this._trackAnimation(a),a}stop(t){for(;this._animates.length>0;){const e=this._animates.pop();e?.stop(t)}this._animates=[],this._activeCount=0,this._started&&(this._started=!1,this.onEnd())}}Bt.builtInAnimateMap={};const Ys={APPEAR:"appear",DISAPPEAR:"disappear",UPDATE:"update",HIGHLIGHT:"highlight",UNHIGHLIGHT:"unhighlight"};class I$t{constructor(t){this.graphic=t}registerState(t){this.states||(this.states=new Map),this.states.set(t.name,t)}clearStates(){var t;(t=this.states)===null||t===void 0||t.clear()}}class O$t{constructor(t){this.stateList=null,this.graphic=t}applyState(t,e,i){const r=Jc.getInstance(),o=[],a=[];if(this.stateList&&this.stateList.length?t.forEach(((s,l)=>{const h={allowTransition:!0};this.stateList.forEach((u=>{const d=r.isTransitionAllowed(u.state,s,this.graphic);h.allowTransition=h.allowTransition&&d.allowTransition})),h.allowTransition&&(a.push({state:s,animationConfig:IO(e[l])?e[l].map((u=>u.animation)):e[l].animation,executor:new Bt(this.graphic)}),this.stateList.forEach((u=>{r.isTransitionAllowed(u.state,s,this.graphic).stopOriginalTransition&&o.push(u)})))})):t.forEach(((s,l)=>{a.push({state:s,animationConfig:IO(e[l])?e[l].map((h=>h.animation)):e[l].animation,executor:new Bt(this.graphic)})})),o.forEach((s=>{s.executor.stop()})),a.length){a[0].executor.execute(a[0].animationConfig);for(let s=0;s<a.length;s++){const l=a[s+1],h=a[s];h.executor.onEnd((()=>{l&&l.executor.execute(l.animationConfig),this.stateList=this.stateList.filter((u=>u!==h)),s===a.length-1&&i&&i(!1)}))}}else i&&i(!0);this.stateList?this.stateList=this.stateList.filter((s=>!o.includes(s))):this.stateList=[],this.stateList.push(...a)}applyAppearState(t,e){this.applyState([Ys.APPEAR],[{name:Ys.APPEAR,animation:t}],e)}applyDisappearState(t,e){this.applyState([Ys.DISAPPEAR],[{name:Ys.DISAPPEAR,animation:t}],e)}applyUpdateState(t,e){this.applyState([Ys.UPDATE],[{name:Ys.UPDATE,animation:t}],e)}applyHighlightState(t,e){this.applyState([Ys.HIGHLIGHT],[{name:Ys.HIGHLIGHT,animation:t}],e)}applyUnhighlightState(t,e){this.applyState([Ys.UNHIGHLIGHT],[{name:Ys.UNHIGHLIGHT,animation:t}],e)}stopState(t,e){var i;const r=(i=this.stateList)===null||i===void 0?void 0:i.find((o=>o.state===t));r&&r.executor.stop(e)}clearState(){var t;(t=this.stateList)===null||t===void 0||t.forEach((e=>{e.executor.stop()})),this.stateList=null}reApplyState(t){var e;const i=(e=this.stateList)===null||e===void 0?void 0:e.find((r=>r.state===t));if(i&&i.executor.started){const r=this.stateList.slice();i.executor.stop(),this.stateList=r,i.executor.execute(i.animationConfig)}}}class V3{_getAnimationStateManager(t){return t._animationStateManager||(t._animationStateManager=new O$t(t)),t._animationStateManager}_getAnimationStateStore(t){return t._animationStateStore||(t._animationStateStore=new I$t(t)),t._animationStateStore}registerAnimationState(t){return this._getAnimationStateStore(this).registerState(t),this}applyAnimationState(t,e,i){return this._getAnimationStateManager(this).applyState(t,e,i),this}applyAppearState(t,e){return this._getAnimationStateManager(this).applyAppearState(t,e),this}applyDisappearState(t,e){return this._getAnimationStateManager(this).applyDisappearState(t,e),this}applyUpdateState(t,e){return this._getAnimationStateManager(this).applyUpdateState(t,e),this}applyHighlightState(t,e){return this._getAnimationStateManager(this).applyHighlightState(t,e),this}applyUnhighlightState(t,e){return this._getAnimationStateManager(this).applyUnhighlightState(t,e),this}stopAnimationState(t,e,i=!1){return this._getAnimationStateManager(this).stopState(t,e),i&&this.isContainer&&this.forEachChildren((r=>{r.stopAnimationState(t,e,i)})),this}clearAnimationStates(){const t=this._animationStateManager;return t&&t.clearState(),this}reApplyAnimationState(t,e=!1){const i=this._animationStateManager;return i&&i.reApplyState(t),e&&this.isContainer&&this.forEachChildren((r=>{r.reApplyAnimationState(t,e)})),this}static extend(t){return new V3()._getAnimationStateManager(t),t}}class H$t{getAttributes(t=!1){return t&&this.finalAttribute?this.finalAttribute:this.attribute}animate(t){var e,i,r;const o=new Mst(t?.id,(i=(e=t?.timeline)!==null&&e!==void 0?e:this.stage&&this.stage.getTimeline())!==null&&i!==void 0?i:W3,t?.slience);if(o.bind(this),t){const{onStart:a,onEnd:s,onRemove:l}=t;a!=null&&o.onStart(a),s!=null&&o.onEnd(s),l!=null&&o.onRemove(l)}return(r=this.stage)===null||r===void 0||r.ticker.start(),o}createTimeline(){return new N3}createTicker(t){return new Rst(t)}setFinalAttributes(t){this.finalAttribute||(this.finalAttribute={}),Object.assign(this.finalAttribute,t)}initFinalAttributes(t){this.finalAttribute=t}initAnimateExecutor(){this._animateExecutor||(this._animateExecutor=new Bt(this))}executeAnimation(t){return this.initAnimateExecutor(),this._animateExecutor.execute(t),this}executeAnimations(t){return this.initAnimateExecutor(),t.forEach((e=>{this._animateExecutor.execute(e)})),this}getFinalAttribute(){return this.finalAttribute}getGraphicAttribute(t,e=!1){return!e&&this.finalAttribute?this.finalAttribute[t]:this.attribute[t]}pauseAnimation(t=!1){this.animates&&this.animates.forEach((e=>e.pause())),t&&this.isContainer&&this.forEachChildren((e=>{e.pauseAnimation(t)}))}resumeAnimation(t=!1){this.animates&&this.animates.forEach((e=>e.resume())),t&&this.isContainer&&this.forEachChildren((e=>{e.resumeAnimation(t)}))}stopAnimation(t=!1){this.animates&&this.animates.forEach((e=>e.stop())),t&&this.isContainer&&this.forEachChildren((e=>{e.stopAnimation(t)}))}}function z$t(){vU(Pn,V3),vU(Pn,H$t)}class Me extends SA{constructor(t,e,i,r,o){super("customAnimate",e,i,r),this.type="customAnimate",this.customFrom=t,this.params=o,this.from=t,this.to=e}update(t,e,i){if(this.onStart(),!this.props||!this.propKeys)return;const r=this.easing(e);this.onUpdate(t,r,i),this.syncAttributeUpdate()}setProps(t){this.props=t,this.propKeys=Object.keys(t),this.animate.reSyncProps()}}class am extends Me{completeBind(t){this.setStartTime(0),this._animator&&this._animator.start(),this.setDuration(t.getDuration())}stop(){this._animator&&this._animator.stop()}}class Pst extends Me{constructor(t,e,i,r,o){super(t,e,i,r,o),this.willCallBeforeStageRender=!0,this.willCallAfterStageRender=!0,this._beforeStageRender=()=>{if(!this.willCallBeforeStageRender)return;this.willCallBeforeStageRender=!1;const a=this.target.stage,s=a.window.getContext().canvas.nativeCanvas,l=this.beforeStageRender(a,s);l&&this.renderToStage(a,l)},this._afterStageRender=()=>{if(!this.willCallAfterStageRender)return;this.willCallAfterStageRender=!1;const a=this.target.stage,s=a.window.getContext().canvas.nativeCanvas,l=this.afterStageRender(a,s);l&&this.renderToStage(a,l)},this.props={}}beforeStageRender(t,e){return!1}afterStageRender(t,e){return!1}onFirstRun(){super.onFirstRun(),this.target.stage.setBeforeRender(this._beforeStageRender),this.target.stage.setAfterRender(this._afterStageRender),this.target.stage.disableDirtyBounds()}stop(){super.stop(),this.target.stage.removeBeforeRender(this._beforeStageRender),this.target.stage.removeAfterRender(this._afterStageRender)}onUpdate(t,e,i){super.onUpdate(t,e,i),this.willCallBeforeStageRender=!0,this.willCallAfterStageRender=!0}renderToStage(t,e){const i=t.window.getContext().canvas.nativeCanvas,r=i.getContext("2d");return!!r&&(r.clearRect(0,0,i.width,i.height),r.drawImage(e,0,0),i)}}class F$t{constructor(t){this.tasks=[],this.started=!1,this.completed=0,this.totalDuration=0,this.onStartCallbacks=[],this.onEndCallbacks=[],this.onUpdateCallbacks=[],this.component=t}animate(t,e){return this.started?this:(this.tasks.push({graphic:t,config:e}),this)}onStart(t){return this.onStartCallbacks.push(t),this}onEnd(t){return this.onEndCallbacks.push(t),this}onUpdate(t){return this.onUpdateCallbacks.push(t),this}start(){return this.started?this:(this.started=!0,this.completed=0,this.onStartCallbacks.forEach((t=>t())),this.tasks.length===0?(setTimeout((()=>{this.onEndCallbacks.forEach((t=>t()))}),0),this):(this.tasks.forEach((t=>{const e=new Bt(t.graphic);e.onEnd((()=>{this.completed++,this.completed===this.tasks.length&&this.onEndCallbacks.forEach((r=>r()))}));const i=e.executeItem(t.config,t.graphic);t.animate=i,i.forEach((r=>{this.totalDuration=Math.max(this.totalDuration,r.getStartTime()+r.getDuration())}))})),this))}deleteSelfAttr(t){this.tasks.forEach((e=>{e.animate&&e.animate.forEach((i=>i.preventAttr(t)))}))}stop(t){return this.tasks.forEach((e=>{e.animate&&e.animate.forEach((i=>i.stop(t)))})),this.started&&this.completed!==this.tasks.length&&(this.onEndCallbacks.forEach((e=>e())),this.completed=this.tasks.length),this}getDuration(){return this.totalDuration}}function sm(n){return new F$t(n)}class N$t extends Me{constructor(t,e,i,r,o){super(t,e,i,r,o),this.formatTemplate=null,this.decimalLength=o?.decimalLength,o?.formatTemplate&&o.formatTemplate.includes("{{var}}")&&(this.formatTemplate=o.formatTemplate)}onFirstRun(){var t,e,i;const r=this.getLastProps(),o=this.getEndProps(),a=(t=r.text)!==null&&t!==void 0?t:0,s=(e=o.text)!==null&&e!==void 0?e:0;this.valid=!0;let l=0,h=0,u="",d="",c=0;if(typeof a=="number"){l=a;const f=a.toString().split(".")[1]||"";c=Math.max(c,f.length)}else{if(typeof a!="string")return void(this.valid=!1);if(a.endsWith("%")){u="%";const f=a.substring(0,a.length-1).replace(/,/g,"");if(l=parseFloat(f)/100,isNaN(l))return void(this.valid=!1);const g=f.split(".")[1]||"";c=Math.max(c,g.length+2)}else{const f=a.replace(/,/g,"");if(l=parseFloat(f),isNaN(l))return void(this.valid=!1);a.includes(",")&&(u=",");const g=f.split(".")[1]||"";c=Math.max(c,g.length)}}if(typeof s=="number"){h=s;const f=s.toString().split(".")[1]||"";c=Math.max(c,f.length)}else{if(typeof s!="string")return void(this.valid=!1);if(s.endsWith("%")){d="%";const f=s.substring(0,s.length-1).replace(/,/g,"");if(h=parseFloat(f)/100,isNaN(h))return void(this.valid=!1);const g=f.split(".")[1]||"";c=Math.max(c,g.length+2)}else{const f=s.replace(/,/g,"");if(h=parseFloat(f),isNaN(h))return void(this.valid=!1);s.includes(",")&&(d=",");const g=f.split(".")[1]||"";c=Math.max(c,g.length)}}if(!((i=this.params)===null||i===void 0)&&i.format){switch(this.params.format){case"percent":this.format="%";break;case"thousandth":this.format=",";break;case"none":this.format="";break;default:this.format=d||u}this.format==="%"&&d!=="%"&&u!=="%"&&this.decimalLength===void 0&&(this.decimalLength=2),this.format==="%"||d!=="%"&&u!=="%"||(l*=100,h*=100)}else this.format=d||u;this.fromNumber=l,this.toNumber=h,this.decimalLength===void 0&&(this.decimalLength=c)}onEnd(t){super.onEnd(t),t||this.props&&this.target.setAttributes(this.props)}onUpdate(t,e,i){if(!this.valid)return;const r=this.fromNumber+(this.toNumber-this.fromNumber)*e;let o="";const a=this.format,s=(a==="%"?100*r:r).toFixed(this.decimalLength);let l,h=s;if(parseFloat(s)===Math.floor(parseFloat(s))&&(h=Math.floor(parseFloat(s))),a==="%")l=`${h}%`;else if(a===","){const u=h.toString().split(".");u[0]=u[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),l=u.join(".")}else l=h;o=this.formatTemplate?this.formatTemplate.replace("{{var}}",l.toString()):l,this.target.setAttribute("text",o)}}class zb extends Me{constructor(t,e,i,r,o){super(t,e,i,r,o),this.fromText="",this.toText="",this.showCursor=!1,this.cursorChar="|",this.blinkCursor=!0,this.beforeText="",this.afterText="",o?.showCursor!==void 0&&(this.showCursor=o.showCursor),o?.cursorChar!==void 0&&(this.cursorChar=o.cursorChar),o?.blinkCursor!==void 0&&(this.blinkCursor=o.blinkCursor),o?.beforeText!==void 0&&(this.beforeText=o.beforeText),o?.afterText!==void 0&&(this.afterText=o.afterText)}onFirstRun(){var t,e;const i=this.getLastProps(),r=this.getEndProps(),o=(t=i.text)!==null&&t!==void 0?t:"",a=(e=r.text)!==null&&e!==void 0?e:"";this.valid=!0,this.fromText=o.toString(),this.toText=a.toString(),this.toText||this.toText===""||(this.valid=!1)}onEnd(t){super.onEnd(t),t||(this.showCursor&&!this.blinkCursor?this.target.setAttribute("text",this.beforeText+this.toText+this.cursorChar+this.afterText):this.target.setAttribute("text",this.beforeText+this.toText+this.afterText))}onUpdate(t,e,i){if(!this.valid)return;const r=this.toText.length,o=this.fromText.length;let a,s;o>r?(a=Math.round(o-(o-r)*e),s=this.fromText.substring(0,a)):(a=Math.round(o+(r-o)*e),s=this.toText.startsWith(this.fromText)?this.toText.substring(0,a):a<=o?this.fromText.substring(0,a):this.toText.substring(0,a-o+Math.min(o,a)));let l=this.beforeText+s+this.afterText;this.showCursor&&(this.blinkCursor?Math.floor(e/.1)%2==0&&(l=this.beforeText+s+this.cursorChar+this.afterText):l=this.beforeText+s+this.cursorChar+this.afterText),this.target.setAttribute("text",l)}}class Bst extends Me{constructor(t,e,i,r,o){super(t,e,i,r,o)}onBind(){var t,e,i;super.onBind();const r=this.target.getFinalAttribute(),o=(t=this.target.attribute)!==null&&t!==void 0?t:{},a={},s=(e=this.from)!==null&&e!==void 0?e:{};this.keys.forEach((h=>{var u,d,c;a[h]=(u=r?.[h])!==null&&u!==void 0?u:1,s[h]=(c=(d=s[h])!==null&&d!==void 0?d:o[h])!==null&&c!==void 0?c:0}));const l=this.target.getFinalAttribute();l&&this.target.setAttributes(l),this.props=a,this.propKeys=this.keys,this.from=s,this.to=a,((i=this.params.controlOptions)===null||i===void 0?void 0:i.immediatelyApply)!==!1&&this.target.setAttributes(s)}onUpdate(t,e,i){const r=this.target.attribute;this.propKeys.forEach((o=>{r[o]=this.from[o]+(this.to[o]-this.from[o])*e})),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class kst extends Me{constructor(t,e,i,r,o){super(t,e,i,r,o)}onBind(){super.onBind();const t=this.target.attribute,e={},i={};this.keys.forEach((r=>{var o;e[r]=0,i[r]=(o=t[r])!==null&&o!==void 0?o:1})),this.props=e,this.propKeys=this.keys,this.from=i,this.to=e,Object.assign(this.target.attribute,i),this.target.addUpdatePositionTag(),this.target.addUpdateBoundTag()}onEnd(t){super.onEnd(t)}onUpdate(t,e,i){const r=this.target.attribute;this.propKeys.forEach((o=>{r[o]=this.from[o]+(this.to[o]-this.from[o])*e})),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class W$t extends Bst{constructor(t,e,i,r,o){super(t,e,i,r,o),this.keys=["clipRange"],this.from={clipRange:0}}onFirstRun(){var t;super.onFirstRun();const{clipDimension:e}=((t=this.params)===null||t===void 0?void 0:t.options)||{};e&&(this.target.attribute.clipRangeByDimension=e)}}class V$t extends kst{constructor(t,e,i,r,o){super(t,e,i,r,o),this.keys=["clipRange"]}}class G$t extends Bst{constructor(t,e,i,r,o){super(t,e,i,r,o),this.keys=["opacity","fillOpacity","strokeOpacity"],this.from={opacity:0,fillOpacity:0,strokeOpacity:0}}}class $$t extends kst{constructor(t,e,i,r,o){super(t,e,i,r,o),this.keys=["opacity","fillOpacity","strokeOpacity"]}}const j$t=(n,t,e)=>{const i=n.getFinalAttribute();return t&&t.orient==="anticlockwise"?{from:{startAngle:i?.endAngle},to:{startAngle:i?.startAngle}}:{from:{endAngle:i?.startAngle},to:{endAngle:i?.endAngle}}},U$t=(n,t,e)=>{const i=n.getFinalAttribute();if(t&&t.orient==="anticlockwise"){const o=Mr(t.overall)?t.overall:2*Math.PI;return{from:{startAngle:o,endAngle:o},to:{startAngle:i?.startAngle,endAngle:i?.endAngle}}}const r=Mr(t?.overall)?t.overall:0;return{from:{startAngle:r,endAngle:r},to:{startAngle:i?.startAngle,endAngle:i?.endAngle}}},Y$t=(n,t,e)=>{var i;return((i=t?.overall)!==null&&i!==void 0&&i)!==!1?U$t(n,t):j$t(n,t)},X$t=(n,t,e)=>{const i=n.attribute;return t&&t.orient==="anticlockwise"?{from:{startAngle:i.startAngle},to:{startAngle:i?.endAngle}}:{from:{endAngle:i.endAngle},to:{endAngle:i?.startAngle}}},q$t=(n,t,e)=>{const i=n.attribute;if(t&&t.orient==="anticlockwise"){const o=Mr(t.overall)?t.overall:2*Math.PI;return{from:{startAngle:i.startAngle,endAngle:i.endAngle},to:{startAngle:o,endAngle:o}}}const r=Mr(t?.overall)?t.overall:0;return{from:{startAngle:i.startAngle,endAngle:i.endAngle},to:{startAngle:r,endAngle:r}}};class Lst extends Me{constructor(t,e,i,r,o){super(t,e,i,r,o)}determineUpdateFunction(){this.propKeys?this.propKeys&&this.propKeys.length>1?this._updateFunction=this.updateAngle:this.propKeys[0]==="startAngle"?this._updateFunction=this.updateStartAngle:this.propKeys[0]==="endAngle"?this._updateFunction=this.updateEndAngle:this.valid=!1:this.valid=!1}deleteSelfAttr(t){delete this.props[t],this.fromProps&&delete this.fromProps[t];const e=this.propKeys.indexOf(t);e!==-1&&this.propKeys.splice(e,1),this.propKeys&&this.propKeys.length>1?this._updateFunction=this.updateAngle:this.propKeys[0]==="startAngle"?this._updateFunction=this.updateStartAngle:this.propKeys[0]==="endAngle"?this._updateFunction=this.updateEndAngle:this._updateFunction=null}updateStartAngle(t){this.target.attribute.startAngle=this.from.startAngle+(this.to.startAngle-this.from.startAngle)*t}updateEndAngle(t){this.target.attribute.endAngle=this.from.endAngle+(this.to.endAngle-this.from.endAngle)*t}updateAngle(t){this.updateStartAngle(t),this.updateEndAngle(t)}onUpdate(t,e,i){this._updateFunction&&(this._updateFunction(e),this.target.addUpdateShapeAndBoundsTag())}}class K$t extends Lst{onBind(){var t,e,i;super.onBind();const{from:r,to:o}=Y$t(this.target,this.params.options,this.params),a=(e=(t=this.target.context)===null||t===void 0?void 0:t.lastAttrs)!==null&&e!==void 0?e:r;this.props=o,this.propKeys=Object.keys(o).filter((l=>o[l]!=null)),this.from=a,this.to=o;const s=this.target.getFinalAttribute();s&&this.target.setAttributes(s),((i=this.params.controlOptions)===null||i===void 0?void 0:i.immediatelyApply)!==!1&&this.target.setAttributes(a),this.determineUpdateFunction()}}class Z$t extends Lst{onBind(){super.onBind();const{from:t,to:e}=(i=this.target,r=this.params.options,this.params,((o=r?.overall)!==null&&o!==void 0&&o)!==!1?q$t(i,r):X$t(i,r));var i,r,o;const a=t;this.props=e,this.propKeys=Object.keys(e).filter((s=>e[s]!=null)),this.from=a??this.target.attribute,this.to=e,this.determineUpdateFunction()}}const J$t=(n,t,e)=>{const i=n.getFinalAttribute();switch(t?.direction){case"x":{const r=i.x,o=i.x1,a=i.width;return{from:Nr(a)?{x:r+a/2,x1:void 0,width:0}:{x:(r+o)/2,x1:(r+o)/2,width:void 0},to:{x:r,x1:o,width:a}}}case"y":{const r=i.y,o=i.y1,a=i.height;return{from:Nr(a)?{y:r+a/2,y1:void 0,height:0}:{y:(r+o)/2,y1:(r+o)/2,height:void 0},to:{y:r,y1:o,height:a}}}default:{const r=i.x,o=i.x1,a=i.width,s=i.y,l=i.y1,h=i.height,u={};return Nr(a)?(u.x=r+a/2,u.width=0,u.x1=void 0):(u.x=(r+o)/2,u.x1=(r+o)/2,u.width=void 0),Nr(h)?(u.y=s+h/2,u.height=0,u.y1=void 0):(u.y=(s+l)/2,u.y1=(s+l)/2,u.height=void 0),{from:u,to:{x:r,y:s,x1:o,y1:l,width:a,height:h}}}}},Q$t=(n,t,e)=>{const i=n.attribute;switch(t?.direction){case"x":{const r=i.x,o=i.x1,a=i.width;return{to:Nr(a)?{x:r+a/2,x1:void 0,width:0}:{x:(r+o)/2,x1:(r+o)/2,width:void 0}}}case"y":{const r=i.y,o=i.y1,a=i.height;return{to:Nr(a)?{y:r+a/2,y1:void 0,height:0}:{y:(r+o)/2,y1:(r+o)/2,height:void 0}}}default:{const r=i.x,o=i.y,a=i.x1,s=i.y1,l=i.width,h=i.height,u={};return Nr(l)?(u.x=r+l/2,u.width=0,u.x1=void 0):(u.x=(r+a)/2,u.x1=(r+a)/2,u.width=void 0),Nr(h)?(u.y=o+h/2,u.height=0,u.y1=void 0):(u.y=(o+s)/2,u.y1=(o+s)/2,u.height=void 0),{to:u}}}};class tjt extends Me{constructor(t,e,i,r,o){super(t,e,i,r,o)}onBind(){var t,e,i;super.onBind();const{from:r,to:o}=J$t(this.target,this.params.options,this.params),a=(e=(t=this.target.context)===null||t===void 0?void 0:t.lastAttrs)!==null&&e!==void 0?e:r;this.props=o,this.propKeys=Object.keys(o).filter((l=>o[l]!=null)),this.from=a,this.to=o;const s=this.target.getFinalAttribute();s&&this.target.setAttributes(s),((i=this.params.controlOptions)===null||i===void 0?void 0:i.immediatelyApply)!==!1&&this.target.setAttributes(a)}onEnd(t){super.onEnd(t)}onUpdate(t,e,i){const r=this.target.attribute;this.propKeys.forEach((o=>{r[o]=this.from[o]+(this.to[o]-this.from[o])*e})),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class ejt extends Me{constructor(t,e,i,r,o){super(t,e,i,r,o)}onBind(){super.onBind();const{from:t,to:e}=Q$t(this.target,this.params.options,this.params);this.props=e,this.propKeys=Object.keys(e).filter((i=>e[i]!=null)),this.from=t??this.target.attribute,this.to=e}onEnd(t){super.onEnd(t)}onUpdate(t,e,i){const r=this.target.attribute;this.propKeys.forEach((o=>{r[o]=this.from[o]+(this.to[o]-this.from[o])*e})),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}function ijt(n,t,e){const i=n.getFinalAttribute(),r=i.y,o=i.y1,a=i.height;if(t&&t.orient==="negative"){const l=Nr(a)?Math.max(r,r+a):Math.max(r,o);return{from:{y:l,y1:Ui(o)?void 0:l,height:Ui(a)?void 0:0},to:{y:r,y1:o,height:a}}}const s=Nr(a)?Math.min(r,r+a):Math.min(r,o);return{from:{y:s,y1:Ui(o)?void 0:s,height:Ui(a)?void 0:0},to:{y:r,y1:o,height:a}}}function njt(n,t,e){var i,r,o;const a=n.getFinalAttribute(),s=a.y,l=a.y1,h=a.height;let u;return t&&t.orient==="negative"?Mr(t.overall)?u=t.overall:e.group?(u=(o=(i=e.groupHeight)!==null&&i!==void 0?i:(r=t.layoutRect)===null||r===void 0?void 0:r.height)!==null&&o!==void 0?o:e.group.getBounds().height(),e.groupHeight=u):u=e.height:u=Mr(t?.overall)?t.overall:0,{from:{y:u,y1:Ui(l)?void 0:u,height:Ui(h)?void 0:0},to:{y:s,y1:l,height:h}}}const rjt=(n,t,e)=>{var i;return((i=t?.overall)!==null&&i!==void 0&&i)!==!1?njt(n,t,e):ijt(n,t)};class ojt extends Me{constructor(t,e,i,r,o){super(t,e,i,r,o)}onBind(){var t,e,i;super.onBind();const{from:r,to:o}=rjt(this.target,this.params.options,this.params),a=(e=(t=this.target.context)===null||t===void 0?void 0:t.lastAttrs)!==null&&e!==void 0?e:r;this.props=o,this.propKeys=Object.keys(o).filter((l=>o[l]!=null)),this.from=a,this.to=o;const s=this.target.getFinalAttribute();s&&this.target.setAttributes(s),((i=this.params.controlOptions)===null||i===void 0?void 0:i.immediatelyApply)!==!1&&this.target.setAttributes(a)}onEnd(t){super.onEnd(t)}onUpdate(t,e,i){const r=this.target.attribute;this.propKeys.forEach((o=>{r[o]=this.from[o]+(this.to[o]-this.from[o])*e})),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}function ajt(n,t,e){const i=n.getFinalAttribute(),r=i.y,o=i.y1,a=i.height;if(t&&t.orient==="negative"){const l=Nr(a)?Math.max(r,r+a):Math.max(r,o);return{to:{y:l,y1:Ui(o)?void 0:l,height:Ui(a)?void 0:0}}}const s=Nr(a)?Math.min(r,r+a):Math.min(r,o);return{to:{y:s,y1:Ui(o)?void 0:s,height:Ui(a)?void 0:0}}}function sjt(n,t,e){var i,r,o;const a=n.getFinalAttribute(),s=a.y1,l=a.height;let h;return t&&t.orient==="negative"?Mr(t.overall)?h=t.overall:e.group?(h=(o=(i=e.groupHeight)!==null&&i!==void 0?i:(r=t.layoutRect)===null||r===void 0?void 0:r.height)!==null&&o!==void 0?o:e.group.getBounds().height(),e.groupHeight=h):h=e.height:h=Mr(t?.overall)?t.overall:0,{to:{y:h,y1:Ui(s)?void 0:h,height:Ui(l)?void 0:0}}}class ljt extends Me{constructor(t,e,i,r,o){super(t,e,i,r,o)}onBind(){super.onBind();const{from:t,to:e}=(i=this.target,r=this.params.options,o=this.params,((a=r?.overall)!==null&&a!==void 0&&a)!==!1?sjt(i,r,o):ajt(i,r));var i,r,o,a;this.props=e,this.propKeys=Object.keys(e).filter((s=>e[s]!=null)),this.from=t??this.target.attribute,this.to=e}onEnd(t){super.onEnd(t)}onUpdate(t,e,i){const r=this.target.attribute;this.propKeys.forEach((o=>{r[o]=this.from[o]+(this.to[o]-this.from[o])*e})),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}const Est=(n,t,e)=>{const i=n.getFinalAttribute().points,r={x:0,y:0};return i.forEach((o=>{r.x+=o.x,r.y+=o.y})),r.x/=i.length,r.y/=i.length,t&&t.center&&(fd(t.center.x)&&(r.x=t.center.x),fd(t.center.y)&&(r.y=t.center.y)),n.type==="area"&&(r.x1=r.x,r.y1=r.y),i.map((o=>Object.assign({},o,r)))},hjt=(n,t,e)=>{const i=n.getFinalAttribute();return{from:{points:Est(n,t)},to:{points:i.points}}};class lm extends Me{constructor(t,e,i,r,o){super(t,e,i,r,o)}onUpdate(t,e,i){var r,o;const a=(r=this.from)===null||r===void 0?void 0:r.points,s=(o=this.to)===null||o===void 0?void 0:o.points;a&&s&&(this.target.attribute.points=a.map(((l,h)=>MI(a[h],s[h],e))),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag())}}class ujt extends lm{onBind(){var t;if(super.onBind(),["area","line","polygon"].includes(this.target.type)){const{from:e,to:i}=hjt(this.target,this.params.options,this.params);this.props=i,this.propKeys=Object.keys(i).filter((o=>i[o]!=null)),this.from=e,this.to=i;const r=this.target.getFinalAttribute();r&&this.target.setAttributes(r),((t=this.params.controlOptions)===null||t===void 0?void 0:t.immediatelyApply)!==!1&&this.target.setAttributes(e)}else this.valid=!1}}class djt extends lm{onBind(){if(super.onBind(),["area","line"].includes(this.target.type)){const i=this.target.getFinalAttribute(),{from:r,to:o}=(t=this.target,e=this.params.options,this.params,{from:{points:t.getFinalAttribute().points},to:{points:Est(t,e)}});this.props=o,this.propKeys=Object.keys(o).filter((a=>o[a]!=null)),this.from=r||i,this.to=o}else this.valid=!1;var t,e}}const Dst=(n,t,e)=>n.getFinalAttribute().points.map((i=>{if(t&&t.orient==="negative"){let r=n.stage.viewWidth;return n.parent.parent.parent&&(r=n.parent.parent.parent.AABBBounds.width()),Object.assign(Object.assign({},i),{x:r,y:i.y,x1:r,y1:i.y1,defined:i.defined!==!1})}return Object.assign(Object.assign({},i),{x:0,y:i.y,x1:0,y1:i.y1,defined:i.defined!==!1})})),cjt=(n,t,e)=>{const i=n.getFinalAttribute();return{from:{points:Dst(n,t)},to:{points:i.points}}};class fjt extends lm{onBind(){var t;if(super.onBind(),["area","line","polygon"].includes(this.target.type)){const{from:e,to:i}=cjt(this.target,this.params.options,this.params);this.props=i,this.propKeys=Object.keys(i).filter((o=>i[o]!=null)),this.from=e,this.to=i;const r=this.target.getFinalAttribute();r&&this.target.setAttributes(r),((t=this.params.controlOptions)===null||t===void 0?void 0:t.immediatelyApply)!==!1&&this.target.setAttributes(e)}else this.valid=!1}}class gjt extends lm{onBind(){if(super.onBind(),["area","line"].includes(this.target.type)){const i=this.target.getFinalAttribute(),{from:r,to:o}=(t=this.target,e=this.params.options,this.params,{from:{points:t.getFinalAttribute().points},to:{points:Dst(t,e)}});this.props=o,this.propKeys=Object.keys(o).filter((a=>o[a]!=null)),this.from=r||i,this.to=o}else this.valid=!1;var t,e}}const Ist=(n,t,e)=>n.getFinalAttribute().points.map((i=>{if(t&&t.orient==="negative"){let r=n.stage.viewHeight;return n.parent.parent.parent&&(r=n.parent.parent.parent.AABBBounds.height()),Object.assign(Object.assign({},i),{x:i.x,y:r,x1:i.x1,y1:r,defined:i.defined!==!1})}return Object.assign(Object.assign({},i),{x:i.x,y:0,x1:i.x1,y1:0,defined:i.defined!==!1})})),pjt=(n,t,e)=>{const i=n.getFinalAttribute();return{from:{points:Ist(n,t)},to:{points:i.points}}};class vjt extends lm{onBind(){var t;if(super.onBind(),["area","line","polygon"].includes(this.target.type)){const{from:e,to:i}=pjt(this.target,this.params.options,this.params);this.props=i,this.propKeys=Object.keys(i).filter((o=>i[o]!=null)),this.from=e,this.to=i;const r=this.target.getFinalAttribute();r&&this.target.setAttributes(r),((t=this.params.controlOptions)===null||t===void 0?void 0:t.immediatelyApply)!==!1&&this.target.setAttributes(e)}else this.valid=!1}}class mjt extends lm{onBind(){if(super.onBind(),["area","line","polygon"].includes(this.target.type)){const{from:i,to:r}=(t=this.target,e=this.params.options,this.params,{from:{points:t.getFinalAttribute().points},to:{points:Ist(t,e)}});this.props=r,this.propKeys=Object.keys(r).filter((o=>r[o]!=null)),this.from=i??this.target.attribute,this.to=r}else this.valid=!1;var t,e}}const yjt=(n,t,e)=>{const i=n.getFinalAttribute();return t&&t.orient==="inside"?{from:{innerRadius:i?.outerRadius},to:{innerRadius:i?.innerRadius}}:{from:{outerRadius:i?.innerRadius},to:{outerRadius:i?.outerRadius}}},bjt=(n,t,e)=>{const i=n.getFinalAttribute(),r=Mr(t?.overall)?t.overall:0;return{from:{innerRadius:r,outerRadius:r},to:{innerRadius:i?.innerRadius,outerRadius:i?.outerRadius}}},_jt=(n,t,e)=>{var i;return((i=t?.overall)!==null&&i!==void 0&&i)!==!1?bjt(n,t):yjt(n,t)},Cjt=(n,t,e)=>{const i=n.getFinalAttribute();return t&&t.orient==="inside"?{from:{innerRadius:i?.innerRadius},to:{innerRadius:i?.outerRadius}}:{from:{outerRadius:i?.outerRadius},to:{outerRadius:i?.innerRadius}}},wjt=(n,t,e)=>{const i=n.getFinalAttribute(),r=Mr(t?.overall)?t.overall:0;return{from:{innerRadius:i?.innerRadius,outerRadius:i?.outerRadius},to:{innerRadius:r,outerRadius:r}}};class Ost extends Me{constructor(t,e,i,r,o){super(t,e,i,r,o)}onUpdate(t,e,i){const r=this.target.attribute;this.propKeys.forEach((o=>{r[o]=this.from[o]+(this.to[o]-this.from[o])*e})),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class xjt extends Ost{onBind(){var t,e,i;super.onBind();const{from:r,to:o}=_jt(this.target,this.params.options,this.params),a=(e=(t=this.target.context)===null||t===void 0?void 0:t.lastAttrs)!==null&&e!==void 0?e:r;this.props=o,this.propKeys=Object.keys(o).filter((l=>o[l]!=null)),this.from=a,this.to=o;const s=this.target.getFinalAttribute();s&&this.target.setAttributes(s),((i=this.params.controlOptions)===null||i===void 0?void 0:i.immediatelyApply)!==!1&&this.target.setAttributes(a)}}class Sjt extends Ost{onBind(){super.onBind();const{to:t}=(e=this.target,i=this.params.options,this.params,((r=i?.overall)!==null&&r!==void 0&&r)!==!1?wjt(e,i):Cjt(e,i));var e,i,r;this.props=t,this.propKeys=Object.keys(t).filter((o=>t[o]!=null)),this.from=this.target.attribute,this.to=t}}function Ajt(n,t,e){const i=n.getFinalAttribute(),r=i.x,o=i.x1,a=i.width;if(t&&t.orient==="negative"){const l=Nr(a)?Math.max(r,r+a):Math.max(r,o);return{from:{x:l,x1:Ui(o)?void 0:l,width:Ui(a)?void 0:0},to:{x:r,x1:o,width:a}}}const s=Nr(a)?Math.min(r,r+a):Math.min(r,o);return{from:{x:s,x1:Ui(o)?void 0:s,width:Ui(a)?void 0:0},to:{x:r,x1:o,width:a}}}function Tjt(n,t,e){var i;const r=n.getFinalAttribute(),o=r.x,a=r.x1,s=r.width;let l;return t&&t.orient==="negative"?Mr(t.overall)?l=t.overall:e.group?(l=(i=e.groupWidth)!==null&&i!==void 0?i:e.group.getBounds().width(),e.groupWidth=l):l=e.width:l=Mr(t?.overall)?t?.overall:0,{from:{x:l,x1:Ui(a)?void 0:l,width:Ui(s)?void 0:0},to:{x:o,x1:a,width:s}}}const Mjt=(n,t,e)=>{var i;return((i=t?.overall)!==null&&i!==void 0&&i)!==!1?Tjt(n,t,e):Ajt(n,t)};function Rjt(n,t,e){const i=n.getFinalAttribute(),r=i.x,o=i.x1,a=i.width;if(t&&t.orient==="negative"){const l=Nr(a)?Math.max(r,r+a):Math.max(r,o);return{to:{x:l,x1:Ui(o)?void 0:l,width:Ui(a)?void 0:0}}}const s=Nr(a)?Math.min(r,r+a):Math.min(r,o);return{to:{x:s,x1:Ui(o)?void 0:s,width:Ui(a)?void 0:0}}}function Pjt(n,t,e){var i;const r=n.getFinalAttribute(),o=r.x1,a=r.width;let s;return t&&t.orient==="negative"?Mr(t.overall)?s=t.overall:e.group?(s=(i=e.groupWidth)!==null&&i!==void 0?i:e.group.getBounds().width(),e.groupWidth=s):s=e.width:s=Mr(t?.overall)?t.overall:0,{to:{x:s,x1:Ui(o)?void 0:s,width:Ui(a)?void 0:0}}}class Bjt extends Me{constructor(t,e,i,r,o){super(t,e,i,r,o)}onBind(){var t,e,i;super.onBind();const{from:r,to:o}=Mjt(this.target,this.params.options,this.params),a=(e=(t=this.target.context)===null||t===void 0?void 0:t.lastAttrs)!==null&&e!==void 0?e:r;this.props=o,this.propKeys=Object.keys(o).filter((l=>o[l]!=null)),this.from=a,this.to=o;const s=this.target.getFinalAttribute();s&&this.target.setAttributes(s),((i=this.params.controlOptions)===null||i===void 0?void 0:i.immediatelyApply)!==!1&&this.target.setAttributes(a)}onEnd(t){super.onEnd(t)}onUpdate(t,e,i){const r=this.target.attribute;this.propKeys.forEach((o=>{r[o]=this.from[o]+(this.to[o]-this.from[o])*e})),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class kjt extends Me{constructor(t,e,i,r,o){super(t,e,i,r,o)}onBind(){super.onBind();const{from:t,to:e}=(i=this.target,r=this.params.options,o=this.params,((a=r?.overall)!==null&&a!==void 0&&a)!==!1?Pjt(i,r,o):Rjt(i,r));var i,r,o,a;this.props=e,this.propKeys=Object.keys(e).filter((s=>e[s]!=null)),this.from=t??this.target.attribute,this.to=e}onEnd(t){super.onEnd(t)}onUpdate(t,e,i){const r=this.target.attribute;this.propKeys.forEach((o=>{r[o]=this.from[o]+(this.to[o]-this.from[o])*e})),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class Ljt extends am{onBind(){super.onBind();const t=sm(this.target);this._animator=t;const e=this.duration,i=this.easing,r=this.target,{symbolStartOuterType:o="scale",titleType:a="typewriter",titlePanelType:s="scale"}=this.params,l=e/10;let h,u;if(r._symbolStart.setAttributes({scaleX:0,scaleY:0}),t.animate(r._symbolStart,{type:"to",to:{scaleX:1,scaleY:1},duration:5*l,easing:i}),o==="scale"?(h={scaleX:0,scaleY:0},u={scaleX:1,scaleY:1}):(h={clipRange:0},u={clipRange:1}),r._symbolStartOuter.setAttributes(h),t.animate(r._symbolStartOuter,{type:"to",to:u,duration:5*l,easing:i}),r._symbolEnd.setAttributes({scaleX:0,scaleY:0}),t.animate(r._symbolEnd,{type:"to",to:{scaleX:1,scaleY:1},duration:2*l,delay:8*l,easing:i}),r._line.setAttributes({clipRange:0}),t.animate(r._line,{type:"to",to:{clipRange:1},duration:9*l,easing:i}),a==="typewriter"){const d=r._titleTop.attribute.text;r._titleTop.setAttributes({text:""}),t.animate(r._titleTop,{type:"custom",delay:5*l,duration:4*l,easing:"linear",to:{text:d},custom:zb});const c=r._titleBottom.attribute.text;r._titleBottom.setAttributes({text:""}),t.animate(r._titleBottom,{type:"custom",delay:5*l,duration:4*l,easing:"linear",to:{text:c},custom:zb})}else r._titleTop.setAttributes({dy:r._titleTop.AABBBounds.height()+10}),t.animate(r._titleTop,{type:"to",to:{dy:0},delay:5*l,duration:4*l,easing:"linear"}),r._titleBottom.setAttributes({dy:-(10+r._titleBottom.AABBBounds.height())}),t.animate(r._titleBottom,{type:"to",to:{dy:0},delay:5*l,duration:4*l,easing:"linear"});s==="scale"?[r._titleTopPanel,r._titleBottomPanel].forEach((d=>{var c;const f=(c=d.attribute.scaleX)!==null&&c!==void 0?c:1;d.setAttributes({scaleX:0}),t.animate(d,{type:"to",to:{scaleX:f},duration:e,easing:i})})):s==="stroke"&&[r._titleTopPanel,r._titleBottomPanel].forEach((d=>{const c=d.AABBBounds,f=2*(c.width()+c.height());d.setAttributes({lineDash:[0,10*f]}),t.animate(d,{type:"to",to:{lineDash:[f,10*f]},duration:e,easing:i})})),this.completeBind(t)}}class Ejt extends am{onBind(){super.onBind();const t=sm(this.target);this._animator=t;const e=this.duration,i=this.easing,r=this.target,{mode:o}=this.params;o==="scale"?t.animate(r._symbolStart,{type:"to",to:{scaleX:0,scaleY:0},duration:e,easing:i}):(t.animate(r._line,{type:"to",to:{clipRange:0},duration:e,easing:i}),t.animate(r._symbolStart,{type:"to",to:{scaleX:0,scaleY:0},duration:e/2,delay:e/2,easing:i}),t.animate(r._symbolEnd,{type:"to",to:{scaleX:0,scaleY:0},duration:e,easing:i}),t.animate(r._titleTop,{type:"to",to:{dy:r._titleTop.AABBBounds.height()+10},duration:e/2,easing:i}),t.animate(r._titleBottom,{type:"to",to:{dy:-(10+r._titleBottom.AABBBounds.height())},duration:e/2,easing:i}),t.animate(r._symbolStartOuter,{type:"to",to:{clipRange:0},duration:e/2,delay:e/2,easing:i}),t.animate(r._titleTopPanel,{type:"to",to:{scaleX:0},duration:e,easing:i}),t.animate(r._titleBottomPanel,{type:"to",to:{scaleX:0},duration:e,easing:i})),this.completeBind(t)}}class Djt extends am{onBind(){super.onBind();const t=sm(this.target);this._animator=t;const e=this.duration,i=this.easing,r=this.target,{wave:o}=this.params;if(r.setAttributes({scaleX:0,scaleY:0}),t.animate(r,{type:"to",to:{scaleX:1,scaleY:1},duration:e/3*2,easing:i}),r.titleShape&&t.animate(r.titleShape,{type:"custom",to:{text:r.titleShape.attribute.text},duration:e,easing:i,custom:zb}),r.contentShape&&t.animate(r.contentShape,{type:"custom",to:{text:r.contentShape.attribute.text},duration:e,easing:i,custom:zb}),o){const a=e/6;t.animate(r.group,{timeSlices:[{duration:a,effects:{type:"to",to:{angle:o},easing:i}},{duration:2*a,effects:{type:"to",to:{angle:-o},easing:i}},{duration:2*a,effects:{type:"to",to:{angle:o},easing:i}},{duration:a,effects:{type:"to",to:{angle:0},easing:i}}]})}this.completeBind(t)}}class Ijt extends am{onBind(){super.onBind();const t=sm(this.target);this._animator=t;const e=this.duration,i=this.easing,r=this.target;t.animate(r,{type:"to",to:{scaleX:0,scaleY:0},duration:e,easing:i}),this.completeBind(t)}}class Ojt extends Me{constructor(t,e,i,r,o){super(t,e,i,r,o),this.fromTextConfig=[],this.toTextConfig=[],this.originalTextConfig=[],this.showCursor=!1,this.cursorChar="|",this.blinkCursor=!0,this.fadeInChars=!1,this.fadeInDuration=.3,this.strokeFirst=!1,this.strokeToFillRatio=.3,o?.showCursor!==void 0&&(this.showCursor=o.showCursor),o?.cursorChar!==void 0&&(this.cursorChar=o.cursorChar),o?.blinkCursor!==void 0&&(this.blinkCursor=o.blinkCursor),o?.fadeInChars!==void 0&&(this.fadeInChars=o.fadeInChars),o?.fadeInDuration!==void 0&&(this.fadeInDuration=o.fadeInDuration),o?.strokeFirst!==void 0&&(this.strokeFirst=o.strokeFirst),o?.strokeToFillRatio!==void 0&&(this.strokeToFillRatio=o.strokeToFillRatio)}onFirstRun(){const t=this.getLastProps(),e=this.getEndProps();this.originalTextConfig=e.textConfig?[...e.textConfig]:[],this.valid=!0,this.originalTextConfig&&this.originalTextConfig.length!==0?(this.fromTextConfig=t.textConfig&&t.textConfig.length>0?Fi.TransformTextConfig2SingleCharacter(t.textConfig):[],this.toTextConfig=Fi.TransformTextConfig2SingleCharacter(this.originalTextConfig)):this.valid=!1}onEnd(t){super.onEnd(t),t||this.target.setAttribute("textConfig",this.originalTextConfig)}onUpdate(t,e,i){if(!this.valid)return;const r=this.toTextConfig.length,o=this.fromTextConfig.length,a=this.fadeInChars?1-this.fadeInDuration:1;let s,l;if(o>r)s=Math.round(o-(o-r)*e);else if(this.fadeInChars){const h=Math.min(1,e/a);s=Math.round(o+(r-o)*h)}else s=Math.round(o+(r-o)*e);if(l=o>r?this.fromTextConfig.slice(0,s):this.toTextConfig.slice(0,s).map(((h,u)=>{if("text"in h){const d=Object.assign({},h);if(this.strokeFirst){const c=u/r*a,f=Math.max(0,e-c),g=1-c,p=Math.min(1,f/(this.strokeToFillRatio*g));if("fill"in d&&d.fill&&(d.stroke=d.fill,p<1&&(d.fillOpacity=p)),this.fadeInChars){const v=Math.min(1,f/(this.fadeInDuration*g));d.opacity=Math.max(0,Math.min(1,v))}}else if(this.fadeInChars){const c=(e-u/r*a)/this.fadeInDuration;d.opacity=Math.max(0,Math.min(1,c))}return d}return h})),this.showCursor&&s<r){let h=!0;if(this.blinkCursor&&(h=Math.floor(e/.1)%2==0),h&&l.length>0){const u=l.length-1,d=l[u];if("text"in d)l[u]=Object.assign(Object.assign({},d),{text:String(d.text)+this.cursorChar});else{const c={text:this.cursorChar,fontSize:16};l.push(c)}}}this.target.setAttribute("textConfig",l)}}class Hjt extends Me{constructor(t,e,i,r,o){super(t,e,i,r,o),this.fromTextConfig=[],this.toTextConfig=[],this.originalTextConfig=[],this.showCursor=!1,this.cursorChar="|",this.blinkCursor=!0,this.beforeText="",this.afterText="",this.fadeOutChars=!1,this.fadeOutDuration=.3,this.direction="backward",o?.showCursor!==void 0&&(this.showCursor=o.showCursor),o?.cursorChar!==void 0&&(this.cursorChar=o.cursorChar),o?.blinkCursor!==void 0&&(this.blinkCursor=o.blinkCursor),o?.beforeText!==void 0&&(this.beforeText=o.beforeText),o?.afterText!==void 0&&(this.afterText=o.afterText),o?.fadeOutChars!==void 0&&(this.fadeOutChars=o.fadeOutChars),o?.fadeOutDuration!==void 0&&(this.fadeOutDuration=o.fadeOutDuration),o?.direction!==void 0&&(this.direction=o.direction),this.propKeys=["textConfig"]}onFirstRun(){const t=this.getLastProps(),e=this.getEndProps();this.originalTextConfig=t.textConfig?[...t.textConfig]:[],this.valid=!0,this.originalTextConfig&&this.originalTextConfig.length!==0?(this.fromTextConfig=Fi.TransformTextConfig2SingleCharacter(this.originalTextConfig),this.toTextConfig=e.textConfig&&e.textConfig.length>0?Fi.TransformTextConfig2SingleCharacter(e.textConfig):[]):this.valid=!1}onEnd(t){super.onEnd(t),t||(this.toTextConfig.length>0?this.target.setAttribute("textConfig",this.toTextConfig):this.target.setAttribute("textConfig",[]))}onUpdate(t,e,i){if(!this.valid)return;const r=this.fromTextConfig.length,o=this.fadeOutChars?1-this.fadeOutDuration:1;let a;if(this.direction==="forward"){if(this.fadeOutChars){const l=Math.min(1,e/o);a=Math.round(r*(1-l))}else a=Math.round(r*(1-e));let s=this.direction==="forward"?this.fromTextConfig.slice(r-a):this.fromTextConfig.slice(0,a);this.fadeOutChars&&(s=this.applyFadeEffect(s,e,r,a)),this.showCursor&&a>0&&(s=this.addCursor(s,e)),this.target.setAttribute("textConfig",s)}else{if(this.fadeOutChars){const l=Math.min(1,e/o);a=Math.round(r*(1-l))}else a=Math.round(r*(1-e));let s=this.fromTextConfig.slice(0,a);this.fadeOutChars&&(s=this.applyFadeEffect(s,e,r,a)),this.showCursor&&a>0&&(s=this.addCursor(s,e)),this.target.setAttribute("textConfig",s)}}applyFadeEffect(t,e,i,r){this.direction==="forward"&&i-r;const o=(e-(1-this.fadeOutDuration))/this.fadeOutDuration,a=Math.max(0,1-Math.min(1,o));return t.map(((s,l)=>{if(this.direction==="forward"){if(l===0&&"text"in s)return Object.assign(Object.assign({},s),{opacity:a})}else if(l===t.length-1&&"text"in s)return Object.assign(Object.assign({},s),{opacity:a});return s}))}addCursor(t,e){let i=!0;if(this.blinkCursor&&(i=Math.floor(e/.1)%2==0),i&&t.length>0){const r=this.direction==="forward"?0:t.length-1,o=t[r];if("text"in o){const a=[...t];return this.direction==="forward"?a[r]=Object.assign(Object.assign({},o),{text:this.cursorChar+String(o.text)}):a[r]=Object.assign(Object.assign({},o),{text:String(o.text)+this.cursorChar}),a}}return t}}class zjt extends Me{constructor(t,e,i,r,o){super(t,e,i,r,o),this.fromTextConfig=[],this.toTextConfig=[],this.originalTextConfig=[],this.singleCharConfig=[],this.fadeInDuration=.3,this.slideDirection="right",this.slideDistance=30,this.wordByWord=!1,this.wordRegex=/[a-zA-Z]+(-[a-zA-Z]+)*|[\u4e00-\u9fa5]+|[0-9]+|[^\s\w\u4e00-\u9fa5]/g,this.wordGroups=[],o?.fadeInDuration!==void 0&&(this.fadeInDuration=o.fadeInDuration),o?.slideDirection!==void 0&&(this.slideDirection=o.slideDirection),o?.slideDistance!==void 0&&(this.slideDistance=o.slideDistance),o?.wordByWord!==void 0&&(this.wordByWord=o.wordByWord),o?.wordRegex!==void 0&&(this.wordRegex=o.wordRegex)}onFirstRun(){const t=this.getLastProps(),e=this.getEndProps();this.originalTextConfig=e.textConfig?[...e.textConfig]:[],this.valid=!0,this.originalTextConfig&&this.originalTextConfig.length!==0?(this.fromTextConfig=t.textConfig&&t.textConfig.length>0?Fi.TransformTextConfig2SingleCharacter(t.textConfig):[],this.toTextConfig=Fi.TransformTextConfig2SingleCharacter(this.originalTextConfig),this.singleCharConfig=this.toTextConfig.map((i=>"text"in i?Object.assign(Object.assign({},i),{opacity:0,dx:this.getInitialDx(),dy:this.getInitialDy()}):Object.assign(Object.assign({},i),{opacity:0}))),this.wordByWord&&this.calculateWordGroups()):this.valid=!1}calculateWordGroups(){this.wordGroups=[];let t="";const e={};let i,r=0;for(this.toTextConfig.forEach(((a,s)=>{if("text"in a){const l=String(a.text);t+=l,e[r]=s,r++}})),this.wordRegex.lastIndex=0;(i=this.wordRegex.exec(t))!==null;){const a=i.index,s=i.index+i[0].length,l=[];for(let h=a;h<s;h++)e[h]!==void 0&&l.push(e[h]);l.length>0&&this.wordGroups.push(l)}const o=new Set;this.wordGroups.forEach((a=>{a.forEach((s=>o.add(s)))}));for(let a=0;a<this.toTextConfig.length;a++)"text"in this.toTextConfig[a]&&!o.has(a)&&this.wordGroups.push([a])}getInitialDx(){switch(this.slideDirection){case"left":return-this.slideDistance;case"right":return this.slideDistance;default:return 0}}getInitialDy(){switch(this.slideDirection){case"up":return-this.slideDistance;case"down":return this.slideDistance;default:return 0}}onEnd(t){super.onEnd(t),t||this.target.setAttribute("textConfig",this.originalTextConfig)}onUpdate(t,e,i){if(!this.valid)return;const r=1-this.fadeInDuration;let o;o=this.wordByWord&&this.wordGroups.length>0?this.updateByWord(e,r):this.updateByCharacter(e,r),this.target.setAttribute("textConfig",o)}updateByWord(t,e){const i=this.wordGroups.length,r=[...this.singleCharConfig];for(let o=0;o<this.wordGroups.length;o++){let a;if(a=this.slideDirection==="left"?(i-1-o)/i*e:o/i*e,t<a){for(const d of this.wordGroups[o]){const c=r[d];"text"in c&&(r[d]=Object.assign(Object.assign({},c),{opacity:0,dx:this.getInitialDx(),dy:this.getInitialDy()}))}continue}const s=(t-a)/this.fadeInDuration,l=Math.max(0,Math.min(1,s)),h=this.getInitialDx()*(1-l),u=this.getInitialDy()*(1-l);for(const d of this.wordGroups[o]){const c=r[d];"text"in c&&(r[d]=Object.assign(Object.assign({},c),{opacity:l,dx:h,dy:u}))}}return r}updateByCharacter(t,e){const i=this.toTextConfig.length,r=[...this.singleCharConfig];for(let o=0;o<r.length;o++){const a=r[o];if("text"in a){let s;if(s=this.slideDirection==="left"?(i-1-o)/i*e:o/i*e,t<s){r[o]=Object.assign(Object.assign({},a),{opacity:0,dx:this.getInitialDx(),dy:this.getInitialDy()});continue}const l=(t-s)/this.fadeInDuration,h=Math.max(0,Math.min(1,l)),u=this.getInitialDx()*(1-h),d=this.getInitialDy()*(1-h);r[o]=Object.assign(Object.assign({},a),{opacity:h,dx:u,dy:d})}}return r}}class Fjt extends Me{constructor(t,e,i,r,o){super(t,e,i,r,o),this.fromTextConfig=[],this.toTextConfig=[],this.originalTextConfig=[],this.singleCharConfig=[],this.fadeOutDuration=.3,this.slideDirection="right",this.slideDistance=30,this.wordByWord=!1,this.wordRegex=/[a-zA-Z]+(-[a-zA-Z]+)*|[\u4e00-\u9fa5]+|[0-9]+|[^\s\w\u4e00-\u9fa5]/g,this.wordGroups=[],this.reverseOrder=!1,o?.fadeOutDuration!==void 0&&(this.fadeOutDuration=o.fadeOutDuration),o?.slideDirection!==void 0&&(this.slideDirection=o.slideDirection),o?.slideDistance!==void 0&&(this.slideDistance=o.slideDistance),o?.wordByWord!==void 0&&(this.wordByWord=o.wordByWord),o?.wordRegex!==void 0&&(this.wordRegex=o.wordRegex),o?.reverseOrder!==void 0&&(this.reverseOrder=o.reverseOrder),this.propKeys=["textConfig"]}onFirstRun(){const t=this.getLastProps(),e=this.getEndProps();this.originalTextConfig=t.textConfig?[...t.textConfig]:[],this.valid=!0,this.originalTextConfig&&this.originalTextConfig.length!==0?(this.fromTextConfig=Fi.TransformTextConfig2SingleCharacter(this.originalTextConfig),this.toTextConfig=e.textConfig&&e.textConfig.length>0?Fi.TransformTextConfig2SingleCharacter(e.textConfig):[],this.singleCharConfig=this.fromTextConfig.map((i=>"text"in i?Object.assign(Object.assign({},i),{opacity:1,dx:0,dy:0}):Object.assign(Object.assign({},i),{opacity:1}))),this.wordByWord&&this.calculateWordGroups()):this.valid=!1}calculateWordGroups(){this.wordGroups=[];let t="";const e={};let i,r=0;for(this.fromTextConfig.forEach(((a,s)=>{if("text"in a){const l=String(a.text);t+=l,e[r]=s,r++}})),this.wordRegex.lastIndex=0;(i=this.wordRegex.exec(t))!==null;){const a=i.index,s=i.index+i[0].length,l=[];for(let h=a;h<s;h++)e[h]!==void 0&&l.push(e[h]);l.length>0&&this.wordGroups.push(l)}const o=new Set;this.wordGroups.forEach((a=>{a.forEach((s=>o.add(s)))}));for(let a=0;a<this.fromTextConfig.length;a++)"text"in this.fromTextConfig[a]&&!o.has(a)&&this.wordGroups.push([a])}getTargetDx(){switch(this.slideDirection){case"left":return-this.slideDistance;case"right":return this.slideDistance;default:return 0}}getTargetDy(){switch(this.slideDirection){case"up":return-this.slideDistance;case"down":return this.slideDistance;default:return 0}}onEnd(t){super.onEnd(t),t||(this.toTextConfig.length>0?this.target.setAttribute("textConfig",this.toTextConfig):this.target.setAttribute("textConfig",[]))}onUpdate(t,e,i){if(!this.valid)return;const r=1-this.fadeOutDuration;let o;o=this.wordByWord&&this.wordGroups.length>0?this.updateByWord(e,r):this.updateByCharacter(e,r),this.target.setAttribute("textConfig",o)}updateByWord(t,e){const i=this.wordGroups.length,r=[...this.singleCharConfig];for(let o=0;o<this.wordGroups.length;o++){let a;if(a=this.reverseOrder?this.slideDirection==="left"?o/i*e:(i-1-o)/i*e:this.slideDirection==="left"?(i-1-o)/i*e:o/i*e,t<a){for(const c of this.wordGroups[o]){const f=r[c];"text"in f&&(r[c]=Object.assign(Object.assign({},f),{opacity:1,dx:0,dy:0}))}continue}const s=(t-a)/this.fadeOutDuration,l=Math.max(0,Math.min(1,s)),h=this.getTargetDx()*l,u=this.getTargetDy()*l,d=1-l;for(const c of this.wordGroups[o]){const f=r[c];"text"in f&&(r[c]=Object.assign(Object.assign({},f),{opacity:d,dx:h,dy:u}))}}return r}updateByCharacter(t,e){const i=this.fromTextConfig.length,r=[...this.singleCharConfig];for(let o=0;o<r.length;o++){const a=r[o];if("text"in a){let s;if(s=this.reverseOrder?this.slideDirection==="left"?o/i*e:(i-1-o)/i*e:this.slideDirection==="left"?(i-1-o)/i*e:o/i*e,t<s){r[o]=Object.assign(Object.assign({},a),{opacity:1,dx:0,dy:0});continue}const l=(t-s)/this.fadeOutDuration,h=Math.max(0,Math.min(1,l)),u=this.getTargetDx()*h,d=this.getTargetDy()*h,c=1-h;r[o]=Object.assign(Object.assign({},a),{opacity:c,dx:u,dy:d})}}return r}}class Njt extends Me{constructor(t,e,i,r,o){super(t,e,i,r,o)}onBind(){var t,e,i,r,o,a,s,l,h,u,d;let c,f;super.onBind();const g=this.target.getFinalAttribute(),p=(t=this.target.attribute)!==null&&t!==void 0?t:{};switch((e=this.params)===null||e===void 0?void 0:e.direction){case"x":c={scaleX:(i=p.scaleX)!==null&&i!==void 0?i:0},f={scaleX:(r=g?.scaleX)!==null&&r!==void 0?r:1},this._updateFunction=this.updateX;break;case"y":c={scaleY:(o=p.scaleY)!==null&&o!==void 0?o:0},f={scaleY:(a=g?.scaleY)!==null&&a!==void 0?a:1},this._updateFunction=this.updateY;break;default:c={scaleX:(s=p.scaleX)!==null&&s!==void 0?s:0,scaleY:(l=p.scaleY)!==null&&l!==void 0?l:0},f={scaleX:(h=g?.scaleX)!==null&&h!==void 0?h:1,scaleY:(u=g?.scaleY)!==null&&u!==void 0?u:1},this._updateFunction=this.updateXY}const v=this.target.getFinalAttribute();v&&this.target.setAttributes(v),this.props=f,this.from=c,this.to=f,((d=this.params.controlOptions)===null||d===void 0?void 0:d.immediatelyApply)!==!1&&this.target.setAttributes(c)}onEnd(t){super.onEnd(t)}updateX(t){this.target.attribute.scaleX=this.from.scaleX+(this.to.scaleX-this.from.scaleX)*t}updateY(t){this.target.attribute.scaleY=this.from.scaleY+(this.to.scaleY-this.from.scaleY)*t}updateXY(t){this.updateX(t),this.updateY(t)}deleteSelfAttr(t){delete this.props[t],this.fromProps&&delete this.fromProps[t];const e=this.propKeys.indexOf(t);e!==-1&&this.propKeys.splice(e,1),this.propKeys&&this.propKeys.length>1?this._updateFunction=this.updateXY:this.propKeys[0]==="scaleX"?this._updateFunction=this.updateX:this.propKeys[0]==="scaleY"?this._updateFunction=this.updateY:this._updateFunction=null}onUpdate(t,e,i){this._updateFunction&&(this._updateFunction(e),this.target.addUpdatePositionTag(),this.target.addUpdateBoundTag())}}class Wjt extends Me{constructor(t,e,i,r,o){super(t,e,i,r,o)}onBind(){var t,e,i,r,o;let a,s;super.onBind();const l=this.target.attribute;switch((t=this.params)===null||t===void 0?void 0:t.direction){case"x":a={scaleX:(e=l?.scaleX)!==null&&e!==void 0?e:1},s={scaleX:0};break;case"y":a={scaleY:(i=l?.scaleY)!==null&&i!==void 0?i:1},s={scaleY:0};break;default:a={scaleX:(r=l?.scaleX)!==null&&r!==void 0?r:1,scaleY:(o=l?.scaleY)!==null&&o!==void 0?o:1},s={scaleX:0,scaleY:0}}this.props=s,this.from=a,this.to=s}onEnd(t){super.onEnd(t)}onUpdate(t,e,i){const r=this.target.attribute;this.propKeys.forEach((o=>{r[o]=this.from[o]+(this.to[o]-this.from[o])*e})),this.target.addUpdatePositionTag(),this.target.addUpdateBoundTag()}}class Vjt extends Me{constructor(t,e,i,r,o){super(t,e,i,r,o)}update(t,e,i){if(this.onStart(),!this.props||!this.propKeys)return;const r=this.easing(e);this.animate.interpolateUpdateFunction?this.animate.interpolateUpdateFunction(this.fromProps,this.props,r,this,this.target):this.interpolateUpdateFunctions.forEach(((o,a)=>{if(!this.animate.validAttr(this.propKeys[a]))return;const s=this.propKeys[a];o(s,this.fromProps[s],this.props[s],r,this,this.target)})),this.onUpdate(t,r,i),this.syncAttributeUpdate()}}class G3 extends Me{constructor(t,e,i,r,o){super(t,e,i,r,o)}onBind(){var t,e,i,r,o,a,s,l,h,u,d,c;super.onBind();const f=this.target.getFinalAttribute(),g=((t=this.params)===null||t===void 0?void 0:t.direction)||"right",p=((e=this.params)===null||e===void 0?void 0:e.distance)||50,v=(r=(i=this.params)===null||i===void 0?void 0:i.fromOpacity)!==null&&r!==void 0?r:0,m={opacity:v,baseOpacity:v},y={opacity:1,baseOpacity:1};g==="top"?(m.y=((o=f.y)!==null&&o!==void 0?o:0)-p,y.y=(a=f.y)!==null&&a!==void 0?a:0,this.propKeys=["opacity","baseOpacity","y"]):g==="bottom"?(m.y=((s=f.y)!==null&&s!==void 0?s:0)+p,y.y=(l=f.y)!==null&&l!==void 0?l:0,this.propKeys=["opacity","baseOpacity","y"]):g==="left"?(m.x=((h=f.x)!==null&&h!==void 0?h:0)-p,y.x=(u=f.x)!==null&&u!==void 0?u:0,this.propKeys=["opacity","baseOpacity","x"]):(m.x=((d=f.x)!==null&&d!==void 0?d:0)+p,y.x=(c=f.x)!==null&&c!==void 0?c:0,this.propKeys=["opacity","baseOpacity","x"]),this.from=m,this.to=y,this.props=y,this.target.setAttributes(m)}onUpdate(t,e,i){const r=this.target.attribute;this.propKeys.forEach((o=>{r[o]=this.from[o]+(this.to[o]-this.from[o])*e})),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class Hst extends Me{constructor(t,e,i,r,o){super(t,e,i,r,o)}onBind(){var t,e,i,r,o,a,s;super.onBind();const l=this.target.getFinalAttribute(),h=(e=(t=this.params)===null||t===void 0?void 0:t.fromScale)!==null&&e!==void 0?e:0,u=((i=this.params)===null||i===void 0?void 0:i.direction)||"xy",d=(o=(r=this.params)===null||r===void 0?void 0:r.fromOpacity)!==null&&o!==void 0?o:0,c={opacity:d,baseOpacity:d},f={opacity:1,baseOpacity:1};this.propKeys=["opacity","baseOpacity"],u!=="x"&&u!=="xy"||(c.scaleX=h,f.scaleX=(a=l.scaleX)!==null&&a!==void 0?a:1,this.propKeys.push("scaleX")),u!=="y"&&u!=="xy"||(c.scaleY=h,f.scaleY=(s=l.scaleY)!==null&&s!==void 0?s:1,this.propKeys.push("scaleY")),this.from=c,this.to=f,this.props=f,this.target.setAttributes(c)}onUpdate(t,e,i){const r=this.target.attribute;this.propKeys.forEach((o=>{r[o]=this.from[o]+(this.to[o]-this.from[o])*e})),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class zst extends Me{constructor(t,e,i,r,o){super(t,e,i,r,o)}onBind(){var t,e,i,r,o,a,s,l,h;super.onBind();const u=this.target.getFinalAttribute(),d=(e=(t=this.params)===null||t===void 0?void 0:t.fromAngle)!==null&&e!==void 0?e:2*Math.PI,c=(r=(i=this.params)===null||i===void 0?void 0:i.fromScale)!==null&&r!==void 0?r:0,f=(a=(o=this.params)===null||o===void 0?void 0:o.fromOpacity)!==null&&a!==void 0?a:0,g={opacity:f,baseOpacity:f,angle:d,scaleX:c,scaleY:c},p={opacity:1,baseOpacity:1,angle:(s=u.angle)!==null&&s!==void 0?s:0,scaleX:(l=u.scaleX)!==null&&l!==void 0?l:1,scaleY:(h=u.scaleY)!==null&&h!==void 0?h:1};this.propKeys=["opacity","baseOpacity","angle","scaleX","scaleY"],this.from=g,this.to=p,this.props=p,this.target.setAttributes(g)}onUpdate(t,e,i){const r=this.target.attribute;this.propKeys.forEach((o=>{r[o]=this.from[o]+(this.to[o]-this.from[o])*e})),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class Gjt extends Me{constructor(t,e,i,r,o){super(t,e,i,r,o),this.perimeter=0,this.originalAttributes={}}onBind(){var t,e,i,r,o,a,s,l,h,u,d,c,f,g,p,v,m,y;if(super.onBind(),this.originalAttributes=Object.assign({},this.target.getAttributes()),this.target.type==="rect"){const A=this.target.attribute,T=(t=A.width)!==null&&t!==void 0?t:100,M=(e=A.height)!==null&&e!==void 0?e:100;this.perimeter=2*(T+M)}else if(this.target.type==="circle"){const A=(i=this.target.attribute.radius)!==null&&i!==void 0?i:50;this.perimeter=2*Math.PI*A}else if(this.target.type==="ellipse"){const A=this.target.attribute,T=(r=A.radiusX)!==null&&r!==void 0?r:50,M=(o=A.radiusY)!==null&&o!==void 0?o:50;this.perimeter=2*Math.PI*Math.sqrt((T*T+M*M)/2)}else this.perimeter=1e3;const b=(s=(a=this.params)===null||a===void 0?void 0:a.lineWidth)!==null&&s!==void 0?s:2,_=(h=(l=this.params)===null||l===void 0?void 0:l.strokeColor)!==null&&h!==void 0?h:"black",w=(d=(u=this.params)===null||u===void 0?void 0:u.fromOpacity)!==null&&d!==void 0?d:1,C=(f=(c=this.params)===null||c===void 0?void 0:c.dashLength)!==null&&f!==void 0?f:this.perimeter,x=(p=(g=this.params)===null||g===void 0?void 0:g.showFill)!==null&&p!==void 0&&p,S=(m=(v=this.params)===null||v===void 0?void 0:v.fillOpacity)!==null&&m!==void 0?m:0;this.from={lineDash:[C,C],lineDashOffset:C,lineWidth:b,stroke:_,strokeOpacity:w},this.to={lineDash:[C,C],lineDashOffset:0,lineWidth:b,stroke:_,strokeOpacity:w},x?(this.from.fillOpacity=S,this.to.fillOpacity=(y=this.originalAttributes.fillOpacity)!==null&&y!==void 0?y:1):(this.from.fillOpacity=0,this.to.fillOpacity=0),this.propKeys=["lineDash","lineDashOffset","lineWidth","stroke","strokeOpacity","fillOpacity"],this.props=this.to,this.target.setAttributes(this.from)}onUpdate(t,e,i){var r;const o=this.target.attribute;o.lineDashOffset=this.from.lineDashOffset+(this.to.lineDashOffset-this.from.lineDashOffset)*e,!((r=this.params)===null||r===void 0)&&r.showFill&&(o.fillOpacity=this.from.fillOpacity+(this.to.fillOpacity-this.from.fillOpacity)*e)}onEnd(){var t;if(super.onEnd(),!(!((t=this.params)===null||t===void 0)&&t.showFill)){const e=Object.assign({},this.originalAttributes);e.fillOpacity=0,this.target.setAttributes(e)}}}class $jt extends Me{constructor(t,e,i,r,o){super(t,e,i,r,o),this.perimeter=0,this.originalAttributes={}}onFirstRun(){var t,e,i,r,o,a,s,l,h,u,d,c,f,g,p,v;if(this.originalAttributes=Object.assign({},this.target.getAttributes()),this.target.type==="rect"){const C=this.target.attribute,x=(t=C.width)!==null&&t!==void 0?t:100,S=(e=C.height)!==null&&e!==void 0?e:100;this.perimeter=2*(x+S)}else if(this.target.type==="circle"){const C=(i=this.target.attribute.radius)!==null&&i!==void 0?i:50;this.perimeter=2*Math.PI*C}else if(this.target.type==="ellipse"){const C=this.target.attribute,x=(r=C.radiusX)!==null&&r!==void 0?r:50,S=(o=C.radiusY)!==null&&o!==void 0?o:50;this.perimeter=2*Math.PI*Math.sqrt((x*x+S*S)/2)}else this.perimeter=1e3;const m=(s=(a=this.params)===null||a===void 0?void 0:a.lineWidth)!==null&&s!==void 0?s:2,y=(h=(l=this.params)===null||l===void 0?void 0:l.strokeColor)!==null&&h!==void 0?h:"black",b=(d=(u=this.params)===null||u===void 0?void 0:u.fromOpacity)!==null&&d!==void 0?d:1,_=(f=(c=this.params)===null||c===void 0?void 0:c.dashLength)!==null&&f!==void 0?f:this.perimeter,w=(p=(g=this.params)===null||g===void 0?void 0:g.showFill)!==null&&p!==void 0&&p;this.from={lineDash:[_,_],lineDashOffset:0,lineWidth:m,stroke:y,strokeOpacity:b},this.to={lineDash:[_,_],lineDashOffset:-_,lineWidth:m,stroke:y,strokeOpacity:b},w?(this.from.fillOpacity=(v=this.originalAttributes.fillOpacity)!==null&&v!==void 0?v:1,this.to.fillOpacity=0):(this.from.fillOpacity=0,this.to.fillOpacity=0),this.propKeys=["lineDash","lineDashOffset","lineWidth","stroke","strokeOpacity","fillOpacity"],this.props=this.to,this.target.setAttributes(this.from)}onUpdate(t,e,i){var r;const o=this.target.attribute;o.lineDashOffset=this.from.lineDashOffset+(this.to.lineDashOffset-this.from.lineDashOffset)*e,!((r=this.params)===null||r===void 0)&&r.showFill&&(o.fillOpacity=this.from.fillOpacity+(this.to.fillOpacity-this.from.fillOpacity)*e)}}class jjt extends Me{constructor(t,e,i,r,o){var a;super(t,e,i,r,o);const s=(a=o?.slideRatio)!==null&&a!==void 0?a:.5;this.slideInDuration=i*s,this.growInDuration=i*(1-s)}onBind(){var t,e,i,r,o,a;super.onBind();const s=new Bt(this.target);s.execute({type:"custom",custom:G3,customParameters:{direction:((t=this.params)===null||t===void 0?void 0:t.slideDirection)||"right",distance:((e=this.params)===null||e===void 0?void 0:e.slideDistance)||50,fromOpacity:(r=(i=this.params)===null||i===void 0?void 0:i.fromOpacity)!==null&&r!==void 0?r:0},duration:this.slideInDuration,easing:this.easing}),s.execute({type:"custom",custom:Hst,customParameters:{fromScale:((o=this.params)===null||o===void 0?void 0:o.fromScale)||.5,direction:((a=this.params)===null||a===void 0?void 0:a.scaleDirection)||"xy",fromOpacity:1},duration:this.growInDuration,easing:this.easing,delay:this.slideInDuration})}onUpdate(t,e,i){}}class Ujt extends Me{constructor(t,e,i,r,o){var a;super(t,e,i,r,o);const s=(a=o?.slideRatio)!==null&&a!==void 0?a:.5;this.slideInDuration=i*s,this.spinInDuration=i*(1-s)}onBind(){var t,e,i,r,o,a;super.onBind();const s=new Bt(this.target);s.execute({type:"custom",custom:G3,customParameters:{direction:((t=this.params)===null||t===void 0?void 0:t.slideDirection)||"right",distance:((e=this.params)===null||e===void 0?void 0:e.slideDistance)||50,fromOpacity:(r=(i=this.params)===null||i===void 0?void 0:i.fromOpacity)!==null&&r!==void 0?r:0},duration:this.slideInDuration,easing:this.easing}),s.execute({type:"custom",custom:zst,customParameters:{fromAngle:((o=this.params)===null||o===void 0?void 0:o.fromAngle)||Math.PI,fromScale:((a=this.params)===null||a===void 0?void 0:a.fromScale)||.5,fromOpacity:1},duration:this.spinInDuration,easing:this.easing,delay:this.slideInDuration})}onUpdate(t,e,i){}}class $3 extends Me{constructor(t,e,i,r,o){super(t,e,i,r,o)}onFirstRun(){var t,e,i,r,o,a,s,l,h,u,d,c,f,g;const p=this.target.getAttributes(),v=((t=this.params)===null||t===void 0?void 0:t.direction)||"right",m=((e=this.params)===null||e===void 0?void 0:e.distance)||50,y=(r=(i=this.params)===null||i===void 0?void 0:i.fromOpacity)!==null&&r!==void 0?r:1,b=(a=(o=this.params)===null||o===void 0?void 0:o.toOpacity)!==null&&a!==void 0?a:0,_={opacity:y,baseOpacity:y},w={opacity:b,baseOpacity:b};v==="top"?(_.y=(s=p.y)!==null&&s!==void 0?s:0,w.y=((l=p.y)!==null&&l!==void 0?l:0)-m,this.propKeys=["opacity","baseOpacity","y"]):v==="bottom"?(_.y=(h=p.y)!==null&&h!==void 0?h:0,w.y=((u=p.y)!==null&&u!==void 0?u:0)+m,this.propKeys=["opacity","baseOpacity","y"]):v==="left"?(_.x=(d=p.x)!==null&&d!==void 0?d:0,w.x=((c=p.x)!==null&&c!==void 0?c:0)-m,this.propKeys=["opacity","baseOpacity","x"]):(_.x=(f=p.x)!==null&&f!==void 0?f:0,w.x=((g=p.x)!==null&&g!==void 0?g:0)+m,this.propKeys=["opacity","baseOpacity","x"]),this.from=_,this.to=w,this.props=w}onUpdate(t,e,i){const r=this.target.attribute;this.propKeys.forEach((o=>{r[o]=this.from[o]+(this.to[o]-this.from[o])*e})),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class Fst extends Me{constructor(t,e,i,r,o){super(t,e,i,r,o)}onFirstRun(){var t,e,i,r,o,a,s,l,h;const u=this.target.getAttributes(),d=(e=(t=this.params)===null||t===void 0?void 0:t.fromScale)!==null&&e!==void 0?e:0,c=((i=this.params)===null||i===void 0?void 0:i.direction)||"xy",f=(o=(r=this.params)===null||r===void 0?void 0:r.fromOpacity)!==null&&o!==void 0?o:1,g=(s=(a=this.params)===null||a===void 0?void 0:a.toOpacity)!==null&&s!==void 0?s:0,p={opacity:f,baseOpacity:f},v={opacity:g,baseOpacity:g};this.propKeys=["opacity","baseOpacity"],c!=="x"&&c!=="xy"||(p.scaleX=(l=u.scaleX)!==null&&l!==void 0?l:1,v.scaleX=d,this.propKeys.push("scaleX")),c!=="y"&&c!=="xy"||(p.scaleY=(h=u.scaleY)!==null&&h!==void 0?h:1,v.scaleY=d,this.propKeys.push("scaleY")),this.from=p,this.to=v,this.props=v}onUpdate(t,e,i){const r=this.target.attribute;this.propKeys.forEach((o=>{r[o]=this.from[o]+(this.to[o]-this.from[o])*e})),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class Nst extends Me{constructor(t,e,i,r,o){super(t,e,i,r,o)}onFirstRun(){var t,e,i,r,o,a,s,l,h,u,d;const c=this.target.getAttributes(),f=(e=(t=this.params)===null||t===void 0?void 0:t.fromAngle)!==null&&e!==void 0?e:2*Math.PI,g=(r=(i=this.params)===null||i===void 0?void 0:i.fromScale)!==null&&r!==void 0?r:0,p=(a=(o=this.params)===null||o===void 0?void 0:o.fromOpacity)!==null&&a!==void 0?a:1,v=(l=(s=this.params)===null||s===void 0?void 0:s.toOpacity)!==null&&l!==void 0?l:0,m={opacity:p,baseOpacity:p,angle:(h=c.angle)!==null&&h!==void 0?h:0,scaleX:(u=c.scaleX)!==null&&u!==void 0?u:1,scaleY:(d=c.scaleY)!==null&&d!==void 0?d:1},y={opacity:v,baseOpacity:v,angle:f,scaleX:g,scaleY:g};this.propKeys=["opacity","baseOpacity","angle","scaleX","scaleY"],this.from=m,this.to=y,this.props=y}onUpdate(t,e,i){const r=this.target.attribute;this.propKeys.forEach((o=>{r[o]=this.from[o]+(this.to[o]-this.from[o])*e})),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class Yjt extends Me{constructor(t,e,i,r,o){var a;super(t,e,i,r,o);const s=(a=o?.slideRatio)!==null&&a!==void 0?a:.5;this.growOutDuration=i*(1-s),this.slideOutDuration=i*s}onFirstRun(){var t,e,i,r;const o=new Bt(this.target);o.execute({type:"custom",custom:Fst,customParameters:{fromScale:((t=this.params)===null||t===void 0?void 0:t.fromScale)||.5,direction:((e=this.params)===null||e===void 0?void 0:e.scaleDirection)||"xy",fromOpacity:1,toOpacity:1},duration:this.growOutDuration,easing:this.easing}),o.execute({type:"custom",custom:$3,customParameters:{direction:((i=this.params)===null||i===void 0?void 0:i.slideDirection)||"right",distance:((r=this.params)===null||r===void 0?void 0:r.slideDistance)||50,fromOpacity:1},duration:this.slideOutDuration,easing:this.easing,delay:this.growOutDuration})}onUpdate(t,e,i){}}class Xjt extends Me{constructor(t,e,i,r,o){var a;super(t,e,i,r,o);const s=(a=o?.slideRatio)!==null&&a!==void 0?a:.5;this.spinOutDuration=i*(1-s),this.slideOutDuration=i*s}onFirstRun(){var t,e,i,r;const o=new Bt(this.target);o.execute({type:"custom",custom:Nst,customParameters:{fromAngle:((t=this.params)===null||t===void 0?void 0:t.fromAngle)||Math.PI,fromScale:((e=this.params)===null||e===void 0?void 0:e.fromScale)||.5,fromOpacity:1,toOpacity:1},duration:this.spinOutDuration,easing:this.easing}),o.execute({type:"custom",custom:$3,customParameters:{direction:((i=this.params)===null||i===void 0?void 0:i.slideDirection)||"right",distance:((r=this.params)===null||r===void 0?void 0:r.slideDistance)||50,fromOpacity:1},duration:this.slideOutDuration,easing:this.easing,delay:this.spinOutDuration})}onUpdate(t,e,i){}}class qjt extends Me{constructor(t,e,i,r,o){super(t,e,i,r,o),this.originalAttributes={},this.pulseCount=3,this.pulseOpacity=.3,this.pulseScale=1.05,this.pulseColor=null,this.pulseColorIntensity=.2,this.strokeOnly=!1,this.fillOnly=!1,this.useScale=!0,this.useOpacity=!0,this.useStroke=!0,this.useFill=!0,this.useColor=!1,this.originalFill=null,this.originalStroke=null,o?.pulseCount!==void 0&&(this.pulseCount=o.pulseCount),o?.pulseScale!==void 0&&(this.pulseScale=o.pulseScale),o?.pulseColor!==void 0&&(this.pulseColor=o.pulseColor),o?.pulseColorIntensity!==void 0&&(this.pulseColorIntensity=o.pulseColorIntensity),o?.strokeOnly!==void 0&&(this.strokeOnly=o.strokeOnly),o?.fillOnly!==void 0&&(this.fillOnly=o.fillOnly),o?.useScale!==void 0&&(this.useScale=o.useScale),o?.useOpacity!==void 0&&(this.useOpacity=o.useOpacity),o?.useStroke!==void 0&&(this.useStroke=o.useStroke),o?.useFill!==void 0&&(this.useFill=o.useFill),o?.useColor!==void 0&&(this.useColor=o.useColor)}onBind(){super.onBind(),this.originalAttributes=Object.assign({},this.target.getAttributes()),this.useColor&&(this.originalFill=this.originalAttributes.fill||null,this.originalStroke=this.originalAttributes.stroke||null,this.pulseColor||(this.fillOnly&&this.originalFill?this.pulseColor=this.originalFill:this.strokeOnly&&this.originalStroke?this.pulseColor=this.originalStroke:this.originalFill?this.pulseColor=this.originalFill:this.originalStroke?this.pulseColor=this.originalStroke:this.pulseColor="#FFFFFF"))}onUpdate(t,e,i){const r=e*Math.PI*this.pulseCount,o=Math.abs(Math.sin(r)),a=this.target.attribute;if(this.useOpacity){const s=1+(this.pulseOpacity-1)*o;this.useStroke&&(a.strokeOpacity=(this.originalAttributes.strokeOpacity||1)*s),this.useFill&&(a.fillOpacity=(this.originalAttributes.fillOpacity||1)*s)}if(this.useScale){const s=1+(this.pulseScale-1)*o;a.scaleX=(this.originalAttributes.scaleX||1)*s,a.scaleY=(this.originalAttributes.scaleY||1)*s}this.useColor&&this.pulseColor&&this.applyColorPulse(a,o),this.target.addUpdateShapeAndBoundsTag(),this.target.addUpdatePositionTag()}applyColorPulse(t,e){const i=this.pulseColorIntensity*e;this.useFill&&this.originalFill&&this.pulseColor&&(t.fill=Hf(this.originalFill,this.pulseColor,i,!0)),this.useStroke&&this.originalStroke&&this.pulseColor&&(t.stroke=Hf(this.originalStroke,this.pulseColor,i,!0))}onEnd(){super.onEnd(),this.target.setAttributes(this.originalAttributes)}}class Kjt extends Me{constructor(t,e,i,r,o){super(t,e,i,r,o)}onBind(){var t,e;super.onBind();let{diffAttrs:i={}}=(t=this.target.context)!==null&&t!==void 0?t:{};const{options:r}=this.params;i=Object.assign({},i),!((e=r?.excludeChannels)===null||e===void 0)&&e.length&&r.excludeChannels.forEach((o=>{delete i[o]})),this.props=i}update(t,e,i){if(this.onStart(),!this.props||!this.propKeys)return;const r=this.easing(e);this.animate.interpolateUpdateFunction?this.animate.interpolateUpdateFunction(this.fromProps,this.props,r,this,this.target):this.interpolateUpdateFunctions.forEach(((o,a)=>{if(!this.animate.validAttr(this.propKeys[a]))return;const s=this.propKeys[a];o(s,this.fromProps[s],this.props[s],r,this,this.target)})),this.onUpdate(t,r,i)}}const Zjt=(n,t,e)=>{var i,r,o,a;const{offset:s=0,orient:l,direction:h,point:u,excludeChannels:d=[],layoutRect:c={}}=t??{};let f=0,g=0;l==="negative"&&(f=(i=c.width)!==null&&i!==void 0?i:n.stage.viewWidth,g=(r=c.height)!==null&&r!==void 0?r:n.stage.viewHeight),f+=s,g+=s;const p=lh(u)?u.call(null,(a=(o=n.context)===null||o===void 0?void 0:o.data)===null||a===void 0?void 0:a[0],n,e):u,v=n.getGraphicAttribute("x"),m=n.getGraphicAttribute("y"),y=d.includes("x")?v:p&&fd(p.x)?p.x:f,b=d.includes("y")?m:p&&fd(p.y)?p.y:g;switch(h){case"x":return{from:{x:d.includes("x")?v:y},to:{x:v}};case"y":return{from:{y:b},to:{y:m}};default:return{from:{x:y,y:b},to:{x:v,y:m}}}},Jjt=(n,t,e)=>{var i,r,o,a;const{offset:s=0,orient:l,direction:h,point:u}=t??{},d=e.group?e.group.AABBBounds:null,c=(i=d.width())!==null&&i!==void 0?i:e.width,f=(r=d.height())!==null&&r!==void 0?r:e.height,g=(l==="negative"?c:0)+s,p=(l==="negative"?f:0)+s,v=lh(u)?u.call(null,(a=(o=n.context)===null||o===void 0?void 0:o.data)===null||a===void 0?void 0:a[0],n,e):u,m=v&&fd(v.x)?v.x:g,y=v&&fd(v.y)?v.y:p;switch(h){case"x":return{from:{x:n.getGraphicAttribute("x")},to:{x:m}};case"y":return{from:{y:n.getGraphicAttribute("y")},to:{y}};default:return{from:{x:n.getGraphicAttribute("x"),y:n.getGraphicAttribute("y")},to:{x:m,y}}}};class Wst extends Me{constructor(t,e,i,r,o){super(t,e,i,r,o)}onUpdate(t,e,i){const r=this.target.attribute;this.propKeys.forEach((o=>{r[o]=this.from[o]+(this.to[o]-this.from[o])*e})),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class Qjt extends Wst{onBind(){var t;super.onBind();const{from:e,to:i}=Zjt(this.target,this.params.options,this.params);this.props=i,this.propKeys=Object.keys(i).filter((o=>i[o]!=null)),this.from=e,this.to=i;const r=this.target.getFinalAttribute();r&&this.target.setAttributes(r),((t=this.params.controlOptions)===null||t===void 0?void 0:t.immediatelyApply)!==!1&&this.target.setAttributes(e)}}class tUt extends Wst{onBind(){super.onBind();const{from:t,to:e}=Jjt(this.target,this.params.options,this.params);this.props=e,this.propKeys=Object.keys(e).filter((i=>e[i]!=null)),this.from=t,this.to=e}}const eUt=(n,t)=>{var e;const i=(e=n.getFinalAttribute().angle)!==null&&e!==void 0?e:0;let r=0;return r=Tst(i/(2*Math.PI),0)?Math.round(i/(2*Math.PI))*Math.PI*2:fd(t?.angle)?t.angle:t?.orient==="anticlockwise"?Math.ceil(i/(2*Math.PI))*Math.PI*2:Math.floor(i/(2*Math.PI))*Math.PI*2,{from:{angle:r},to:{angle:i}}},iUt=(n,t)=>{var e;const i=(e=n.getFinalAttribute().angle)!==null&&e!==void 0?e:0;let r=0;return r=Tst(i/(2*Math.PI),0)?Math.round(i/(2*Math.PI))*Math.PI*2:fd(t?.angle)?t.angle:t?.orient==="anticlockwise"?Math.ceil(i/(2*Math.PI))*Math.PI*2:Math.floor(i/(2*Math.PI))*Math.PI*2,{from:{angle:i},to:{angle:r}}};class Vst extends Me{constructor(t,e,i,r,o){super(t,e,i,r,o)}onUpdate(t,e,i){const r=this.target.attribute;this.propKeys.forEach((o=>{r[o]=this.from[o]+(this.to[o]-this.from[o])*e})),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class nUt extends Vst{onBind(){var t;super.onBind();const{from:e,to:i}=eUt(this.target,this.params.options);this.props=i,this.propKeys=["angle"],this.from=e,this.to=i;const r=this.target.getFinalAttribute();r&&this.target.setAttributes(r),((t=this.params.controlOptions)===null||t===void 0?void 0:t.immediatelyApply)!==!1&&this.target.setAttributes(e)}}class rUt extends Vst{onBind(){super.onBind();const{from:t,to:e}=iUt(this.target,this.params.options);this.props=e,this.propKeys=["angle"],this.from=t,this.to=e}}class oUt extends Me{constructor(t,e,i,r,o){var a;super(t,e,i,r,o),o&&(this.pathLength=o.path.getLength(),this.path=o.path,this.distance=o.distance,this.totalLength=this.distance*this.pathLength,this.initAngle=(a=o.initAngle)!==null&&a!==void 0?a:0,this.changeAngle=!!o.changeAngle,this.cb=o.cb)}onBind(){this.from={x:0,y:0},this.to=this.path.getAttrAt(this.totalLength).pos,this.props=this.to}onUpdate(t,e,i){const r={},o=this.totalLength*e,{pos:a,angle:s}=this.path.getAttrAt(o);r.x=a.x,r.y=a.y,this.changeAngle&&(r.angle=s+this.initAngle),this.cb&&this.cb(this.from,this.to,e,this.target),this.target.setAttributes(r)}}class aUt extends Me{constructor(t,e,i,r,o){super(t,e,i,r,o),this.from=t??{}}onBind(){var t,e;super.onBind(),Object.keys(this.from).forEach((r=>{this.props[r]==null&&(this.props[r]=this.target.getGraphicAttribute(r))}));const i=this.target.getFinalAttribute();((t=this.target.context)===null||t===void 0?void 0:t.animationState)==="appear"&&i&&this.target.setAttributes(i),((e=this.params.controlOptions)===null||e===void 0?void 0:e.immediatelyApply)!==!1&&this.target.setAttributes(this.from)}onFirstRun(){this.from=Object.assign(Object.assign({},this.getLastProps()),this.from);const t=this.animate.getStartProps();this.propKeys&&this.propKeys.forEach((e=>{var i;this.from[e]=(i=this.from[e])!==null&&i!==void 0?i:t[e]})),this.target.setAttributes(this.from)}deleteSelfAttr(t){super.deleteSelfAttr(t),delete this.from[t]}update(t,e,i){if(this.onStart(),!this.props||!this.propKeys)return;const r=this.easing(e);this.animate.interpolateUpdateFunction?this.animate.interpolateUpdateFunction(this.from,this.props,r,this,this.target):this.interpolateUpdateFunctions.forEach(((o,a)=>{if(!this.animate.validAttr(this.propKeys[a]))return;const s=this.propKeys[a];o(s,this.from[s],this.props[s],r,this,this.target)})),this.onUpdate(t,r,i),this.syncAttributeUpdate()}}class sUt extends Me{constructor(t,e,i,r,o){super(t,e,i,r,o)}getEndProps(){return{}}onStart(){this.target&&(this.target.type==="rect"?this.onStartRect():this.target.type==="line"?this.onStartLineOrArea("line"):this.target.type==="area"&&this.onStartLineOrArea("area"))}onStartLineOrArea(t){var e;const i=this.target.attachShadow(),r=St.graphicService.creator[t](Object.assign({},(e=this.params)===null||e===void 0?void 0:e.attribute));this[t]=r,r.pathProxy=new An,i.add(r)}onStartRect(){var t,e,i;const r=this.target.attachShadow(),o=(e=(t=this.params)===null||t===void 0?void 0:t.isHorizontal)===null||e===void 0||e,a=o?"height":"width",s=o?"width":"height",l=this.target.AABBBounds[a](),h=o?0:this.target.AABBBounds.y1,u=St.graphicService.creator.rect(Object.assign(Object.assign({[a]:l,fill:"#bcdeff",shadowBlur:30,shadowColor:"#bcdeff"},(i=this.params)===null||i===void 0?void 0:i.attribute),{x:0,y:h,[s]:0}));this.rect=u,r.add(u)}onBind(){}onEnd(){this.target.detachShadow()}onUpdate(t,e,i){return this.rect?this.onUpdateRect(t,e,i):this.line||this.area?this.onUpdateLineOrArea(t,e,i):void 0}onUpdateRect(t,e,i){var r,o,a,s,l,h,u,d,c,f,g,p,v,m,y,b;const _=(o=(r=this.params)===null||r===void 0?void 0:r.isHorizontal)===null||o===void 0||o,w=this.target.attribute;if(_){const C=(s=(a=w.width)!==null&&a!==void 0?a:Math.abs(w.x1-w.x))!==null&&s!==void 0?s:250,x=(h=(l=this.params)===null||l===void 0?void 0:l.streamLength)!==null&&h!==void 0?h:C,S=(c=(d=(u=this.params)===null||u===void 0?void 0:u.attribute)===null||d===void 0?void 0:d.width)!==null&&c!==void 0?c:60,A=-S,T=A+(x-A)*e,M=Math.max(T,0),R=Math.min(Math.min(T+S,S),x-T),L=R+M>C?Math.max(C-M,0):R;this.rect.setAttributes({x:M+Math.min(w.x1-w.x,0),width:L},!1,{type:Yr.ANIMATE_PLAY,animationState:{ratio:e,end:t}})}else{const C=(g=(f=w.height)!==null&&f!==void 0?f:Math.abs(w.y1-w.y))!==null&&g!==void 0?g:250,x=(v=(p=this.params)===null||p===void 0?void 0:p.streamLength)!==null&&v!==void 0?v:C,S=(b=(y=(m=this.params)===null||m===void 0?void 0:m.attribute)===null||y===void 0?void 0:y.height)!==null&&b!==void 0?b:60,A=C-(x+S)*e;let T=Math.min(A,C);const M=Math.min(C-A,S);let R;T<=0?(R=Math.max(T+M,0),T=0):R=M,this.rect.setAttributes({y:T+Math.min(w.y1-w.y,0),height:R},!1,{type:Yr.ANIMATE_PLAY,animationState:{ratio:e,end:t}})}}onUpdateLineOrArea(t,e,i){const r=this.line||this.area;if(!r)return;const o=r.pathProxy,a=this.target;a.cache||a.cacheArea?this._onUpdateLineOrAreaWithCache(o,a,t,e,i):this._onUpdateLineWithoutCache(o,a,t,e,i);const s=a.attribute;r.setAttributes(Object.assign({stroke:s.stroke},r.attribute)),r.addUpdateBoundTag()}_onUpdateLineOrAreaWithCache(t,e,i,r,o){var a,s;if(t.clear(),e.type==="line"){let l=e.cache;Array.isArray(l)||(l=[l]);const h=l.reduce(((d,c)=>d+c.getLength()),0),u=[];return l.forEach((d=>{d.curves.forEach((c=>u.push(c)))})),this._updateCurves(t,u,h,r)}if(e.type==="area"&&(!((s=(a=e.cacheArea)===null||a===void 0?void 0:a.top)===null||s===void 0)&&s.curves)){const l=e.cacheArea,h=l.top.curves.reduce(((u,d)=>u+d.getLength()),0);return this._updateCurves(t,l.top.curves,h,r)}}_updateCurves(t,e,i,r){var o,a;const s=i*r,l=Math.min(s+((a=(o=this.params)===null||o===void 0?void 0:o.streamLength)!==null&&a!==void 0?a:10),i);let h=0,u=!1;for(let d=0;d<e.length;d++)if(e[d].defined!==!1){const c=e[d],f=c.getLength(),g=1-(h+f-s)/f;let p,v=1-(h+f-l)/f;if(h<s&&h+f>s)if(u=!0,c.p2&&c.p3){const[m,y]=Cv(c,g);t.moveTo(y.p0.x,y.p0.y),p=y}else{const m=c.getPointAt(g);t.moveTo(m.x,m.y)}if(h<l&&h+f>l){if(c.p2&&c.p3){p&&(v=(l-s)/p.getLength());const[m]=Cv(p||c,v);t.bezierCurveTo(m.p1.x,m.p1.y,m.p2.x,m.p2.y,m.p3.x,m.p3.y)}else{const m=c.getPointAt(v);t.lineTo(m.x,m.y)}break}if(u)if(c.p2&&c.p3){const m=p||c;t.bezierCurveTo(m.p1.x,m.p1.y,m.p2.x,m.p2.y,m.p3.x,m.p3.y)}else t.lineTo(c.p1.x,c.p1.y);h+=f}}_onUpdateLineWithoutCache(t,e,i,r,o){var a,s;const{points:l,curveType:h}=e.attribute;if(!l||l.length<2||h!=="linear")return;let u=0;for(let p=1;p<l.length;p++)u+=F1.distancePP(l[p],l[p-1]);const d=u*r,c=Math.min(d+((s=(a=this.params)===null||a===void 0?void 0:a.streamLength)!==null&&s!==void 0?s:10),u),f=[];let g=0;for(let p=1;p<l.length;p++){const v=F1.distancePP(l[p],l[p-1]);if(g<d&&g+v>d&&f.push(F1.pointAtPP(l[p-1],l[p],1-(g+v-d)/v)),g<c&&g+v>c){f.push(F1.pointAtPP(l[p-1],l[p],1-(g+v-c)/v));break}f.length&&f.push(l[p]),g+=v}if(f.length&&!(f.length<2)){t.clear(),t.moveTo(f[0].x,f[0].y);for(let p=1;p<f.length;p++)t.lineTo(f[p].x,f[p].y)}}}class z_ extends Pst{constructor(t,e,i,r,o){super(t,e,i,r,o),this.webglCanvas=null,this.gl=null,this.program=null,this.currentAnimationRatio=0,this.animationTime=0}onUpdate(t,e,i){super.onUpdate(t,e,i),this.currentAnimationRatio=e,this.animationTime=e*Math.PI*2}getAnimationTime(){return this.currentAnimationRatio>0?this.animationTime:Date.now()/1e3}getDurationFromParent(){return this.duration||1e3}initWebGL(t){try{if(this.webglCanvas=jt.createCanvas({width:t.width,height:t.height,dpr:jt.devicePixelRatio}),!this.webglCanvas)return!1;this.webglCanvas.style.width=t.style.width||`${t.width}px`,this.webglCanvas.style.height=t.style.height||`${t.height}px`;let e=null;try{e=this.webglCanvas.getContext("webgl"),e||(e=this.webglCanvas.getContext("experimental-webgl"))}catch{}if(this.gl=e,!this.gl)return!1;const i=this.getShaderSources();return this.program=this.createShaderProgram(i.vertex,i.fragment),this.program!==null}catch{return!1}}createShaderProgram(t,e){if(!this.gl)return null;const i=this.createShader(this.gl.VERTEX_SHADER,t),r=this.createShader(this.gl.FRAGMENT_SHADER,e);if(!i||!r)return null;const o=this.gl.createProgram();return o?(this.gl.attachShader(o,i),this.gl.attachShader(o,r),this.gl.linkProgram(o),this.gl.getProgramParameter(o,this.gl.LINK_STATUS)?o:null):null}createShader(t,e){if(!this.gl)return null;const i=this.gl.createShader(t);return i?(this.gl.shaderSource(i,e),this.gl.compileShader(i),this.gl.getShaderParameter(i,this.gl.COMPILE_STATUS)?i:(this.gl.deleteShader(i),null)):null}setupWebGLState(t){this.gl&&this.webglCanvas&&(this.webglCanvas.width===t.width&&this.webglCanvas.height===t.height||(this.webglCanvas.width=t.width,this.webglCanvas.height=t.height),this.gl.viewport(0,0,this.webglCanvas.width,this.webglCanvas.height),this.gl.clearColor(0,0,0,0),this.gl.clear(this.gl.COLOR_BUFFER_BIT))}createFullScreenQuad(){if(!this.gl)return null;const t=new Float32Array([-1,-1,0,1,1,-1,1,1,-1,1,0,0,1,1,1,0]),e=this.gl.createBuffer();return this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e),this.gl.bufferData(this.gl.ARRAY_BUFFER,t,this.gl.STATIC_DRAW),e}createTextureFromCanvas(t){if(!this.gl)return null;const e=this.gl.createTexture();return this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,t),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),e}setupVertexAttributes(){if(!this.gl||!this.program)return;const t=this.gl.getAttribLocation(this.program,"a_position"),e=this.gl.getAttribLocation(this.program,"a_texCoord");this.gl.enableVertexAttribArray(t),this.gl.vertexAttribPointer(t,2,this.gl.FLOAT,!1,16,0),this.gl.enableVertexAttribArray(e),this.gl.vertexAttribPointer(e,2,this.gl.FLOAT,!1,16,8)}createOutputCanvas(t){const e=jt.createCanvas({width:t.width,height:t.height,dpr:jt.devicePixelRatio}),i=e.getContext("2d");return i?(i.clearRect(0,0,t.width,t.height),i.drawImage(t,0,0),{canvas:e,ctx:i}):null}getShaderSources(){return null}applyWebGLEffect(t){return null}applyCanvas2DEffect(t){return null}supportsWebGL(){return this.getShaderSources()!==null}supportsCanvas2D(){return this.applyCanvas2DEffect!==z_.prototype.applyCanvas2DEffect}release(){super.release(),this.gl&&(this.program&&(this.gl.deleteProgram(this.program),this.program=null),this.gl=null),this.webglCanvas&&(this.webglCanvas=null),this.currentAnimationRatio=0,this.animationTime=0}afterStageRender(t,e){let i=null;return this.supportsWebGL()&&(this.gl||this.initWebGL(e),this.gl)&&(i=this.applyWebGLEffect(e),i)||this.supportsCanvas2D()&&(i=this.applyCanvas2DEffect(e),i)?i:(this.supportsWebGL()||this.supportsCanvas2D(),e)}}class lUt extends z_{constructor(t,e,i,r,o){super(t,e,i,r,o)}getShaderSources(){return null}applyWebGLEffect(t){return null}}class Vf extends z_{constructor(t,e,i,r,o){super(t,e,i,r,o)}getShaderSources(){return null}applyWebGLEffect(t){return null}applyCanvas2DEffect(t){return null}supportsWebGL(){return this.getShaderSources!==Vf.prototype.getShaderSources&&this.getShaderSources()!==null}supportsCanvas2D(){return this.applyCanvas2DEffect!==Vf.prototype.applyCanvas2DEffect}afterStageRender(t,e){var i,r;let o=null;if(((r=(i=this.params)===null||i===void 0?void 0:i.options)===null||r===void 0?void 0:r.useWebGL)!==!1){if(this.supportsWebGL()&&(this.gl||this.initWebGL(e),this.gl)&&(o=this.applyWebGLEffect(e),o)||this.supportsCanvas2D()&&(o=this.applyCanvas2DEffect(e),o))return o}else if(this.supportsCanvas2D()&&(o=this.applyCanvas2DEffect(e),o))return o;return this.supportsWebGL()||this.supportsCanvas2D(),e}}class mi{static createTempCanvas(t,e,i){return jt.createCanvas({width:t,height:e,dpr:i||jt.devicePixelRatio})}static cloneImageData(t){const e=new Uint8ClampedArray(t.data);return new ImageData(e,t.width,t.height)}static lerp(t,e,i){return t*(1-i)+e*i}static smoothstep(t,e,i){const r=Math.max(0,Math.min(1,(i-t)/(e-t)));return r*r*(3-2*r)}static distance(t,e,i,r){const o=i-t,a=r-e;return Math.sqrt(o*o+a*a)}static normalizeAngle(t){return(t+Math.PI)/(2*Math.PI)}static pixelNoise(t,e,i){if(i<=0)return 0;const r=Math.floor(t/i)*i,o=Math.floor(e/i)*i,a=43758.5453*Math.sin(12.9898*r+78.233*o);return a-Math.floor(a)}static generateNoiseTexture(t,e){const i=new Uint8Array(t*e);for(let r=0;r<i.length;r++)i[r]=Math.floor(256*Math.random());return i}static applyCSSFilter(t,e){const i=this.createTempCanvas(t.width,t.height),r=i.getContext("2d");return r?(r.filter=e,r.drawImage(t,0,0),r.filter="none",i):t}static extractChannel(t,e){const{data:i,width:r,height:o}=t,a=new Uint8ClampedArray(i.length);for(let s=0;s<i.length;s+=4)a[s]=0,a[s+1]=0,a[s+2]=0,a[s+3]=i[s+3],e>=0&&e<=2&&(a[s+e]=i[s+e]);return new ImageData(a,r,o)}static blendImageData(t,e,i){const{data:r,width:o,height:a}=t,{data:s}=e,l=new Uint8ClampedArray(r.length);for(let h=0;h<r.length;h+=4)l[h]=Math.round(this.lerp(r[h],s[h],i)),l[h+1]=Math.round(this.lerp(r[h+1],s[h+1],i)),l[h+2]=Math.round(this.lerp(r[h+2],s[h+2],i)),l[h+3]=Math.round(this.lerp(r[h+3],s[h+3],i));return new ImageData(l,o,a)}static getLuminance(t,e,i){return .299*t+.587*e+.114*i}static applySepiaToPixel(t,e,i){return[Math.min(255,.393*t+.769*e+.189*i),Math.min(255,.349*t+.686*e+.168*i),Math.min(255,.272*t+.534*e+.131*i)]}static calculateDynamicStrength(t,e){return t*(e/(2*Math.PI))}}class kv{}kv.STANDARD_VERTEX_SHADER=`
    attribute vec2 a_position;
    attribute vec2 a_texCoord;
    varying vec2 v_texCoord;

    void main() {
      gl_Position = vec4(a_position, 0.0, 1.0);
      v_texCoord = a_texCoord;
    }
  `,kv.SHADER_FUNCTIONS=`
    // 
    float luminance(vec3 color) {
      return dot(color, vec3(0.299, 0.587, 0.114));
    }

    // 
    vec3 sepia(vec3 color) {
      float r = color.r * 0.393 + color.g * 0.769 + color.b * 0.189;
      float g = color.r * 0.349 + color.g * 0.686 + color.b * 0.168;
      float b = color.r * 0.272 + color.g * 0.534 + color.b * 0.131;
      return vec3(r, g, b);
    }

    // 
    float lerp(float a, float b, float t) {
      return a * (1.0 - t) + b * t;
    }


    // 
    float pixelNoise(vec2 coord, float pixelSize) {
      vec2 gridCoord = floor(coord / pixelSize) * pixelSize;
      return fract(sin(dot(gridCoord, vec2(12.9898, 78.233))) * 43758.5453123);
    }

    // 
    float calculateDynamicStrength(float baseStrength, float time) {
      return baseStrength * (time / 6.28318531); // 2
    }
  `;class hUt extends Vf{constructor(t,e,i,r,o){var a,s,l,h;super(t,e,i,r,o),this.noiseData=null;const u=(a=o?.options)===null||a===void 0?void 0:a.noiseScale,d=u!==void 0?Math.max(0,Math.floor(u)):8;this.dissolveConfig={dissolveType:((s=o?.options)===null||s===void 0?void 0:s.dissolveType)||"outward",useWebGL:((l=o?.options)===null||l===void 0?void 0:l.useWebGL)===void 0||o.options.useWebGL,noiseScale:d,fadeEdge:((h=o?.options)===null||h===void 0?void 0:h.fadeEdge)===void 0||o.options.fadeEdge}}getShaderSources(){return{vertex:kv.STANDARD_VERTEX_SHADER,fragment:`
      precision mediump float;
      uniform sampler2D u_texture;
      uniform sampler2D u_noiseTexture;
      uniform float u_time;
      uniform int u_dissolveType;
      uniform vec2 u_resolution;
      uniform float u_noiseScale;
      uniform bool u_fadeEdge;
      varying vec2 v_texCoord;

      ${kv.SHADER_FUNCTIONS}

      // 
      float outwardDissolve(vec2 uv, float time, float pixelSize, vec2 resolution) {
        vec2 center = vec2(0.5, 0.5);
        float distFromCenter = length(uv - center);
        float maxDist = length(vec2(0.5, 0.5));

        //  (01)
        float normalizedDist = distFromCenter / maxDist;

        // time
        // 
        float edgeThreshold = 1.2 - time * 1.5;

        // pixelSize > 0
        if (pixelSize > 0.0) {
          // 
          vec2 pixelCoord = uv * resolution; // 
          float noiseValue = pixelNoise(pixelCoord, pixelSize);
          float noiseInfluence = (noiseValue - 0.5) * 0.4; // 
          edgeThreshold += noiseInfluence;
          return normalizedDist > edgeThreshold ? 0.0 : 1.0;
        } else {
          // fadeEdge
          if (u_fadeEdge) {
            // 
            float fadeWidth = 0.15; // 
            return 1.0 - smoothstep(edgeThreshold - fadeWidth, edgeThreshold, normalizedDist);
          } else {
            // 01
            return normalizedDist > edgeThreshold ? 0.0 : 1.0;
          }
        }
      }

      // 
      float inwardDissolve(vec2 uv, float time, float pixelSize, vec2 resolution) {
        vec2 center = vec2(0.5, 0.5);
        float distFromCenter = length(uv - center);
        float maxDist = length(vec2(0.5, 0.5));

        float normalizedDist = distFromCenter / maxDist;

        // time
        // 
        float centerThreshold = time * 1.4;

        // pixelSize > 0
        if (pixelSize > 0.0) {
          vec2 pixelCoord = uv * resolution;
          float noiseValue = pixelNoise(pixelCoord, pixelSize);
          float noiseInfluence = (noiseValue - 0.5) * 0.4;
          centerThreshold += noiseInfluence;
          return normalizedDist < centerThreshold ? 0.0 : 1.0;
        } else {
          // fadeEdge
          if (u_fadeEdge) {
            // 
            float fadeWidth = 0.15; // 
            return smoothstep(centerThreshold, centerThreshold + fadeWidth, normalizedDist);
          } else {
            // 01
            return normalizedDist < centerThreshold ? 0.0 : 1.0;
          }
        }
      }

      // 
      float radialDissolve(vec2 uv, float time, float pixelSize, vec2 resolution) {
        vec2 center = vec2(0.5, 0.5);
        float angle = atan(uv.y - center.y, uv.x - center.x);
        float normalizedAngle = (angle + 3.14159) / (2.0 * 3.14159);

        // time
        // 
        float angleThreshold = time * 1.2;

        // pixelSize > 0
        if (pixelSize > 0.0) {
          vec2 pixelCoord = uv * resolution;
          float noiseValue = pixelNoise(pixelCoord, pixelSize);
          float noiseInfluence = (noiseValue - 0.5) * 0.3;
          angleThreshold += noiseInfluence;
          return normalizedAngle < angleThreshold ? 0.0 : 1.0;
        } else {
          // fadeEdge
          if (u_fadeEdge) {
            // 
            float fadeWidth = 0.08; // 
            return smoothstep(angleThreshold, angleThreshold + fadeWidth, normalizedAngle);
          } else {
            // 01
            return normalizedAngle < angleThreshold ? 0.0 : 1.0;
          }
        }
      }

      // 
      float leftToRightDissolve(vec2 uv, float time, float pixelSize, vec2 resolution) {
        // x=0x=1
        float dissolvePosition = time * 1.2; // 

        // pixelSize > 0
        if (pixelSize > 0.0) {
          vec2 pixelCoord = uv * resolution;
          float noiseValue = pixelNoise(pixelCoord, pixelSize);
          float noiseInfluence = (noiseValue - 0.5) * 0.3;
          dissolvePosition += noiseInfluence;
          return uv.x < dissolvePosition ? 0.0 : 1.0;
        } else {
          // fadeEdge
          if (u_fadeEdge) {
            // 
            float fadeWidth = 0.08; // 
            return smoothstep(dissolvePosition, dissolvePosition + fadeWidth, uv.x);
          } else {
            // 01
            return uv.x < dissolvePosition ? 0.0 : 1.0;
          }
        }
      }

      // 
      float rightToLeftDissolve(vec2 uv, float time, float pixelSize, vec2 resolution) {
        // x=1x=0
        float dissolvePosition = 1.0 - time * 1.2; // 

        // pixelSize > 0
        if (pixelSize > 0.0) {
          vec2 pixelCoord = uv * resolution;
          float noiseValue = pixelNoise(pixelCoord, pixelSize);
          float noiseInfluence = (noiseValue - 0.5) * 0.3;
          dissolvePosition += noiseInfluence;
          return uv.x > dissolvePosition ? 0.0 : 1.0;
        } else {
          // fadeEdge
          if (u_fadeEdge) {
            // 
            float fadeWidth = 0.08; // 
            return smoothstep(dissolvePosition - fadeWidth, dissolvePosition, uv.x);
          } else {
            // 01
            return uv.x > dissolvePosition ? 0.0 : 1.0;
          }
        }
      }

      // 
      float topToBottomDissolve(vec2 uv, float time, float pixelSize, vec2 resolution) {
        // y=0y=1
        float dissolvePosition = time * 1.2; // 

        // pixelSize > 0
        if (pixelSize > 0.0) {
          vec2 pixelCoord = uv * resolution;
          float noiseValue = pixelNoise(pixelCoord, pixelSize);
          float noiseInfluence = (noiseValue - 0.5) * 0.3;
          dissolvePosition += noiseInfluence;
          return uv.y < dissolvePosition ? 0.0 : 1.0;
        } else {
          // fadeEdge
          if (u_fadeEdge) {
            // 
            float fadeWidth = 0.08; // 
            return smoothstep(dissolvePosition, dissolvePosition + fadeWidth, uv.y);
          } else {
            // 01
            return uv.y < dissolvePosition ? 0.0 : 1.0;
          }
        }
      }

      // 
      float bottomToTopDissolve(vec2 uv, float time, float pixelSize, vec2 resolution) {
        // y=1y=0
        float dissolvePosition = 1.0 - time * 1.2; // 

        // pixelSize > 0
        if (pixelSize > 0.0) {
          vec2 pixelCoord = uv * resolution;
          float noiseValue = pixelNoise(pixelCoord, pixelSize);
          float noiseInfluence = (noiseValue - 0.5) * 0.3;
          dissolvePosition += noiseInfluence;
          return uv.y > dissolvePosition ? 0.0 : 1.0;
        } else {
          // fadeEdge
          if (u_fadeEdge) {
            // 
            float fadeWidth = 0.08; // 
            return smoothstep(dissolvePosition - fadeWidth, dissolvePosition, uv.y);
          } else {
            // 01
            return uv.y > dissolvePosition ? 0.0 : 1.0;
          }
        }
      }

      void main() {
        vec2 uv = v_texCoord;
        vec4 texColor = texture2D(u_texture, uv);

        float alpha = 1.0;

        // 
        if (u_dissolveType == 0) {
          alpha = outwardDissolve(uv, u_time, u_noiseScale, u_resolution);
        } else if (u_dissolveType == 1) {
          alpha = inwardDissolve(uv, u_time, u_noiseScale, u_resolution);
        } else if (u_dissolveType == 2) {
          alpha = radialDissolve(uv, u_time, u_noiseScale, u_resolution);
        } else if (u_dissolveType == 3) {
          alpha = leftToRightDissolve(uv, u_time, u_noiseScale, u_resolution);
        } else if (u_dissolveType == 4) {
          alpha = rightToLeftDissolve(uv, u_time, u_noiseScale, u_resolution);
        } else if (u_dissolveType == 5) {
          alpha = topToBottomDissolve(uv, u_time, u_noiseScale, u_resolution);
        } else if (u_dissolveType == 6) {
          alpha = bottomToTopDissolve(uv, u_time, u_noiseScale, u_resolution);
        }

        gl_FragColor = vec4(texColor.rgb, texColor.a * alpha);
      }
    `}}applyWebGLEffect(t){if(!this.gl||!this.program||!this.webglCanvas)return t;this.setupWebGLState(t);const e=this.createTextureFromCanvas(t);if(!e)return t;this.noiseData||(this.noiseData=mi.generateNoiseTexture(256,256));const i=this.gl.createTexture();this.gl.activeTexture(this.gl.TEXTURE1),this.gl.bindTexture(this.gl.TEXTURE_2D,i),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.LUMINANCE,256,256,0,this.gl.LUMINANCE,this.gl.UNSIGNED_BYTE,this.noiseData),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.REPEAT),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.REPEAT),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR);const r=this.createFullScreenQuad();return r?(this.gl.useProgram(this.program),this.setupVertexAttributes(),this.setUniforms(),this.gl.enable(this.gl.BLEND),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.gl.deleteTexture(e),this.gl.deleteTexture(i),this.gl.deleteBuffer(r),this.webglCanvas):t}setUniforms(){if(!this.gl||!this.program||!this.webglCanvas)return;const t=this.gl.getUniformLocation(this.program,"u_texture"),e=this.gl.getUniformLocation(this.program,"u_noiseTexture"),i=this.gl.getUniformLocation(this.program,"u_time"),r=this.gl.getUniformLocation(this.program,"u_dissolveType"),o=this.gl.getUniformLocation(this.program,"u_resolution"),a=this.gl.getUniformLocation(this.program,"u_noiseScale"),s=this.gl.getUniformLocation(this.program,"u_fadeEdge");this.gl.uniform1i(t,0),this.gl.uniform1i(e,1),this.gl.uniform1f(i,this.currentAnimationRatio),this.gl.uniform2f(o,this.webglCanvas.width,this.webglCanvas.height),this.gl.uniform1f(a,this.dissolveConfig.noiseScale),this.gl.uniform1i(s,this.dissolveConfig.fadeEdge?1:0),this.gl.uniform1i(r,{outward:0,inward:1,radial:2,leftToRight:3,rightToLeft:4,topToBottom:5,bottomToTop:6}[this.dissolveConfig.dissolveType]||0)}applyCanvas2DEffect(t){const e=this.createOutputCanvas(t);if(!e)return t;const{canvas:i,ctx:r}=e,o=r.getImageData(0,0,t.width,t.height),a=this.currentAnimationRatio;let s;switch(this.dissolveConfig.dissolveType){case"outward":s=this.applyOutwardDissolve(o,a);break;case"inward":s=this.applyInwardDissolve(o,a);break;case"radial":s=this.applyRadialDissolve(o,a);break;case"leftToRight":s=this.applyLeftToRightDissolve(o,a);break;case"rightToLeft":s=this.applyRightToLeftDissolve(o,a);break;case"topToBottom":s=this.applyTopToBottomDissolve(o,a);break;case"bottomToTop":s=this.applyBottomToTopDissolve(o,a);break;default:s=o}return r.putImageData(s,0,0),i}applyOutwardDissolve(t,e){const{data:i,width:r,height:o}=t,a=new Uint8ClampedArray(i.length);a.set(i);const s=r/2,l=o/2,h=Math.sqrt(s*s+l*l),u=this.dissolveConfig.noiseScale;for(let d=0;d<o;d++)for(let c=0;c<r;c++){const f=c-s,g=d-l,p=Math.sqrt(f*f+g*g)/h;let v=1.2-1.4*e,m=1;if(u>0)v+=.4*(mi.pixelNoise(c,d,u)-.5),m=p>v?0:1;else if(this.dissolveConfig.fadeEdge){const b=v-.15;m=p<b?1:p>v?0:1-(p-b)/(v-b)}else m=p>v?0:1;const y=4*(d*r+c);a[y+3]=Math.floor(a[y+3]*m)}return new ImageData(a,r,o)}applyInwardDissolve(t,e){const{data:i,width:r,height:o}=t,a=new Uint8ClampedArray(i.length);a.set(i);const s=r/2,l=o/2,h=Math.sqrt(s*s+l*l),u=this.dissolveConfig.noiseScale;for(let d=0;d<o;d++)for(let c=0;c<r;c++){const f=c-s,g=d-l,p=Math.sqrt(f*f+g*g)/h;let v=1.4*e,m=1;if(u>0)v+=.4*(mi.pixelNoise(c,d,u)-.5),m=p<v?0:1;else if(this.dissolveConfig.fadeEdge){const b=v+.15;m=p<v?0:p>b?1:(p-v)/(b-v)}else m=p<v?0:1;const y=4*(d*r+c);a[y+3]=Math.floor(a[y+3]*m)}return new ImageData(a,r,o)}applyRadialDissolve(t,e){const{data:i,width:r,height:o}=t,a=new Uint8ClampedArray(i.length);a.set(i);const s=r/2,l=o/2,h=this.dissolveConfig.noiseScale;for(let u=0;u<o;u++)for(let d=0;d<r;d++){const c=d-s,f=u-l,g=(Math.atan2(f,c)+Math.PI)/(2*Math.PI);let p=1.2*e,v=1;if(h>0)p+=.3*(mi.pixelNoise(d,u,h)-.5),v=g<p?0:1;else if(this.dissolveConfig.fadeEdge){const y=p+.08;v=g<p?0:g>y?1:(g-p)/(y-p)}else v=g<p?0:1;const m=4*(u*r+d);a[m+3]=Math.floor(a[m+3]*v)}return new ImageData(a,r,o)}applyLeftToRightDissolve(t,e){const{data:i,width:r,height:o}=t,a=new Uint8ClampedArray(i.length);a.set(i);const s=this.dissolveConfig.noiseScale;for(let l=0;l<o;l++)for(let h=0;h<r;h++){const u=h/r;let d=1.2*e,c=1;if(s>0)d+=.3*(mi.pixelNoise(h,l,s)-.5),c=u<d?0:1;else if(this.dissolveConfig.fadeEdge){const g=d+.08;c=u<d?0:u>g?1:(u-d)/(g-d)}else c=u<d?0:1;const f=4*(l*r+h);a[f+3]=Math.floor(a[f+3]*c)}return new ImageData(a,r,o)}applyRightToLeftDissolve(t,e){const{data:i,width:r,height:o}=t,a=new Uint8ClampedArray(i.length);a.set(i);const s=this.dissolveConfig.noiseScale;for(let l=0;l<o;l++)for(let h=0;h<r;h++){const u=h/r;let d=1-1.2*e,c=1;if(s>0)d+=.3*(mi.pixelNoise(h,l,s)-.5),c=u>d?0:1;else if(this.dissolveConfig.fadeEdge){const g=d-.08;c=u<g?1:u>d?0:1-(u-g)/(d-g)}else c=u>d?0:1;const f=4*(l*r+h);a[f+3]=Math.floor(a[f+3]*c)}return new ImageData(a,r,o)}applyTopToBottomDissolve(t,e){const{data:i,width:r,height:o}=t,a=new Uint8ClampedArray(i.length);a.set(i);const s=this.dissolveConfig.noiseScale;for(let l=0;l<o;l++)for(let h=0;h<r;h++){const u=l/o;let d=1.2*e,c=1;if(s>0)d+=.3*(mi.pixelNoise(h,l,s)-.5),c=u<d?0:1;else if(this.dissolveConfig.fadeEdge){const g=d+.08;c=u<d?0:u>g?1:(u-d)/(g-d)}else c=u<d?0:1;const f=4*(l*r+h);a[f+3]=Math.floor(a[f+3]*c)}return new ImageData(a,r,o)}applyBottomToTopDissolve(t,e){const{data:i,width:r,height:o}=t,a=new Uint8ClampedArray(i.length);a.set(i);const s=this.dissolveConfig.noiseScale;for(let l=0;l<o;l++)for(let h=0;h<r;h++){const u=l/o;let d=1-1.2*e,c=1;if(s>0)d+=.3*(mi.pixelNoise(h,l,s)-.5),c=u>d?0:1;else if(this.dissolveConfig.fadeEdge){const g=d-.08;c=u<g?1:u>d?0:1-(u-g)/(d-g)}else c=u>d?0:1;const f=4*(l*r+h);a[f+3]=Math.floor(a[f+3]*c)}return new ImageData(a,r,o)}}class uUt extends Vf{constructor(t,e,i,r,o){var a,s,l;super(t,e,i,r,o);const h=((a=o?.options)===null||a===void 0?void 0:a.strength)!==void 0?o.options.strength:1,u=Math.max(0,Math.min(1,h));this.colorConfig={effectType:((s=o?.options)===null||s===void 0?void 0:s.effectType)||"grayscale",strength:u,useWebGL:((l=o?.options)===null||l===void 0?void 0:l.useWebGL)===void 0||o.options.useWebGL}}getShaderSources(){return{vertex:kv.STANDARD_VERTEX_SHADER,fragment:`
      precision mediump float;
      uniform sampler2D u_texture;
      uniform float u_time;
      uniform float u_strength;
      uniform int u_effectType;
      uniform vec2 u_resolution;
      varying vec2 v_texCoord;

      ${kv.SHADER_FUNCTIONS}

      void main() {
        vec2 uv = v_texCoord;
        vec4 originalColor = texture2D(u_texture, uv);
        vec3 color = originalColor.rgb;

        // 
        float dynamicStrength = calculateDynamicStrength(u_strength, u_time);

        if (u_effectType == 0) {
          // 
          float gray = luminance(color);
          vec3 grayColor = vec3(gray);
          color = mix(color, grayColor, dynamicStrength);
        } else if (u_effectType == 1) {
          // 
          vec3 sepiaColor = sepia(color);
          color = mix(color, sepiaColor, dynamicStrength);
        }

        gl_FragColor = vec4(color, originalColor.a);
      }
    `}}applyWebGLEffect(t){if(!this.gl||!this.program||!this.webglCanvas)return null;this.setupWebGLState(t);const e=this.createTextureFromCanvas(t);if(!e)return null;const i=this.createFullScreenQuad();if(!i)return this.gl.deleteTexture(e),null;try{return this.gl.useProgram(this.program),this.setupVertexAttributes(),this.setColorUniforms(),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.webglCanvas}finally{this.gl.deleteTexture(e),this.gl.deleteBuffer(i)}}setColorUniforms(){if(!this.gl||!this.program)return;const t=this.getAnimationTime(),e=this.gl.getUniformLocation(this.program,"u_time"),i=this.gl.getUniformLocation(this.program,"u_strength"),r=this.gl.getUniformLocation(this.program,"u_effectType"),o=this.gl.getUniformLocation(this.program,"u_resolution");this.gl.uniform1f(e,t),this.gl.uniform1f(i,this.colorConfig.strength),this.gl.uniform2f(o,this.webglCanvas.width,this.webglCanvas.height),this.gl.uniform1i(r,{grayscale:0,sepia:1}[this.colorConfig.effectType]||0)}applyCanvas2DEffect(t){if(this.colorConfig.strength<=0){const r=this.createOutputCanvas(t);return r?r.canvas:null}if(this.canUseCSSFilter())return this.applyCSSFilter(t);const e=this.createOutputCanvas(t);if(!e)return null;const{ctx:i}=e;try{const r=i.getImageData(0,0,t.width,t.height),o=this.getAnimationTime();let a;switch(this.colorConfig.effectType){case"grayscale":default:a=this.applyGrayscaleEffect(r,this.colorConfig.strength,o);break;case"sepia":a=this.applySepiaEffect(r,this.colorConfig.strength,o)}return i.clearRect(0,0,t.width,t.height),i.putImageData(a,0,0),e.canvas}catch{return null}}canUseCSSFilter(){var t;return!!window.useFilterAPI&&typeof CSS<"u"&&((t=CSS.supports)===null||t===void 0?void 0:t.call(CSS,"filter","grayscale(1)"))}applyCSSFilter(t){try{const e=mi.createTempCanvas(t.width,t.height),i=e.getContext("2d");if(!i)return null;const r=this.getAnimationTime(),o=mi.calculateDynamicStrength(this.colorConfig.strength,r);let a="";return this.colorConfig.effectType==="grayscale"?a=`grayscale(${Math.min(1,o)})`:this.colorConfig.effectType==="sepia"&&(a=`sepia(${Math.min(1,o)})`),i.filter=a,i.drawImage(t,0,0),i.filter="none",e}catch{return null}}applyGrayscaleEffect(t,e,i){const{data:r,width:o,height:a}=t,s=new Uint8ClampedArray(r.length),l=mi.calculateDynamicStrength(e,i);for(let h=0;h<r.length;h+=4){const u=r[h],d=r[h+1],c=r[h+2],f=r[h+3],g=mi.getLuminance(u,d,c);s[h]=Math.round(mi.lerp(u,g,l)),s[h+1]=Math.round(mi.lerp(d,g,l)),s[h+2]=Math.round(mi.lerp(c,g,l)),s[h+3]=f}return new ImageData(s,o,a)}applySepiaEffect(t,e,i){const{data:r,width:o,height:a}=t,s=new Uint8ClampedArray(r.length),l=mi.calculateDynamicStrength(e,i);for(let h=0;h<r.length;h+=4){const u=r[h],d=r[h+1],c=r[h+2],f=r[h+3],[g,p,v]=mi.applySepiaToPixel(u,d,c);s[h]=Math.round(mi.lerp(u,g,l)),s[h+1]=Math.round(mi.lerp(d,p,l)),s[h+2]=Math.round(mi.lerp(c,v,l)),s[h+3]=f}return new ImageData(s,o,a)}afterStageRender(t,e){if(this.canUseCSSFilter()&&this.colorConfig.strength>0){const i=this.applyCSSFilter(e);if(i)return i}return super.afterStageRender(t,e)}}class dUt extends Vf{constructor(t,e,i,r,o){var a,s,l;super(t,e,i,r,o),this.distortionConfig={distortionType:((a=o?.options)===null||a===void 0?void 0:a.distortionType)||"wave",strength:((s=o?.options)===null||s===void 0?void 0:s.strength)||.3,useWebGL:((l=o?.options)===null||l===void 0?void 0:l.useWebGL)===void 0||o.options.useWebGL}}getShaderSources(){return{vertex:`
      attribute vec2 a_position;
      attribute vec2 a_texCoord;
      varying vec2 v_texCoord;

      void main() {
        gl_Position = vec4(a_position, 0.0, 1.0);
        v_texCoord = a_texCoord;
      }
    `,fragment:`
      precision mediump float;
      uniform sampler2D u_texture;
      uniform float u_time;
      uniform float u_strength;
      uniform int u_distortionType;
      uniform vec2 u_resolution;
      varying vec2 v_texCoord;

      // 
      vec2 wave(vec2 uv, float time, float strength) {
        float waveX = sin(uv.y * 10.0 + time * 3.0) * strength * 0.1;
        float waveY = sin(uv.x * 10.0 + time * 2.0) * strength * 0.1;
        return uv + vec2(waveX, waveY);
      }

      // 
      vec2 ripple(vec2 uv, float time, float strength) {
        vec2 center = vec2(0.5, 0.5);
        float distance = length(uv - center);
        float ripple = sin(distance * 20.0 - time * 5.0) * strength * 0.1;
        vec2 direction = normalize(uv - center);
        return uv + direction * ripple;
      }

      // 
      vec2 swirl(vec2 uv, float time, float strength) {
        vec2 center = vec2(0.5, 0.5);
        vec2 delta = uv - center;
        float dist = length(delta);
        float originalAngle = atan(delta.y, delta.x);
        float rotationAngle = dist * strength * time * 2.0;
        float finalAngle = originalAngle + rotationAngle;
        return center + dist * vec2(cos(finalAngle), sin(finalAngle));
      }

      void main() {
        vec2 uv = v_texCoord;

        // 
        if (u_distortionType == 0) {
          uv = wave(uv, u_time, u_strength);
        } else if (u_distortionType == 1) {
          uv = ripple(uv, u_time, u_strength);
        } else if (u_distortionType == 2) {
          uv = swirl(uv, u_time, u_strength);
        }

        // 
        if (uv.x < 0.0 || uv.x > 1.0 || uv.y < 0.0 || uv.y > 1.0) {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        } else {
          gl_FragColor = texture2D(u_texture, uv);
        }
      }
    `}}applyWebGLEffect(t){if(!this.gl||!this.program||!this.webglCanvas)return null;this.setupWebGLState(t);const e=this.createTextureFromCanvas(t);if(!e)return null;const i=this.createFullScreenQuad();if(!i)return this.gl.deleteTexture(e),null;try{return this.gl.useProgram(this.program),this.setupVertexAttributes(),this.setDistortionUniforms(),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.webglCanvas}finally{this.gl.deleteTexture(e),this.gl.deleteBuffer(i)}}setDistortionUniforms(){if(!this.gl||!this.program)return;const t=this.getAnimationTime(),e=this.gl.getUniformLocation(this.program,"u_time"),i=this.gl.getUniformLocation(this.program,"u_strength"),r=this.gl.getUniformLocation(this.program,"u_distortionType"),o=this.gl.getUniformLocation(this.program,"u_resolution");this.gl.uniform1f(e,t),this.gl.uniform1f(i,this.distortionConfig.strength),this.gl.uniform2f(o,this.webglCanvas.width,this.webglCanvas.height),this.gl.uniform1i(r,{wave:0,ripple:1,swirl:2}[this.distortionConfig.distortionType]||0)}applyCanvas2DEffect(t){const e=this.createOutputCanvas(t);if(!e)return null;const{ctx:i}=e;try{const r=i.getImageData(0,0,t.width,t.height),o=this.getAnimationTime();let a;switch(this.distortionConfig.distortionType){case"wave":a=this.applyWaveDistortion(r,this.distortionConfig.strength,o);break;case"ripple":a=this.applyRippleDistortion(r,this.distortionConfig.strength,o);break;case"swirl":a=this.applySwirlDistortion(r,this.distortionConfig.strength,o);break;default:a=r}return i.clearRect(0,0,t.width,t.height),i.putImageData(a,0,0),e.canvas}catch{return null}}applyWaveDistortion(t,e,i){const{data:r,width:o,height:a}=t,s=new Uint8ClampedArray(r.length);for(let l=0;l<a;l++)for(let h=0;h<o;h++){const u=Math.sin(.1*l+3*i)*e*20,d=Math.sin(.1*h+2*i)*e*20,c=Math.round(h-u),f=Math.round(l-d),g=4*(l*o+h);if(c>=0&&c<o&&f>=0&&f<a){const p=4*(f*o+c);s[g]=r[p],s[g+1]=r[p+1],s[g+2]=r[p+2],s[g+3]=r[p+3]}else s[g+3]=0}return new ImageData(s,o,a)}applyRippleDistortion(t,e,i){const{data:r,width:o,height:a}=t,s=new Uint8ClampedArray(r.length),l=o/2,h=a/2;for(let u=0;u<a;u++)for(let d=0;d<o;d++){const c=d-l,f=u-h,g=Math.sqrt(c*c+f*f),p=Math.sin(.2*g-5*i)*e*10,v=Math.atan2(f,c),m=Math.round(d-Math.cos(v)*p),y=Math.round(u-Math.sin(v)*p),b=4*(u*o+d);if(m>=0&&m<o&&y>=0&&y<a){const _=4*(y*o+m);s[b]=r[_],s[b+1]=r[_+1],s[b+2]=r[_+2],s[b+3]=r[_+3]}else s[b+3]=0}return new ImageData(s,o,a)}applySwirlDistortion(t,e,i){const{data:r,width:o,height:a}=t,s=new Uint8ClampedArray(r.length),l=o/2,h=a/2;for(let u=0;u<a;u++)for(let d=0;d<o;d++){const c=d-l,f=u-h,g=Math.sqrt(c*c+f*f),p=Math.atan2(f,c)+g*e*i*.02,v=Math.round(l+g*Math.cos(p)),m=Math.round(h+g*Math.sin(p)),y=4*(u*o+d);if(v>=0&&v<o&&m>=0&&m<a){const b=4*(m*o+v);s[y]=r[b],s[y+1]=r[b+1],s[y+2]=r[b+2],s[y+3]=r[b+3]}else s[y+3]=0}return new ImageData(s,o,a)}afterStageRender(t,e){return this.distortionConfig.strength<=0?e:super.afterStageRender(t,e)}}class cUt extends Vf{constructor(t,e,i,r,o){var a,s,l,h,u;super(t,e,i,r,o),this.particles=[],this.positionBuffer=null,this.colorBuffer=null,this.particleConfig={effectType:((a=o?.options)===null||a===void 0?void 0:a.effectType)||"gravity",count:((s=o?.options)===null||s===void 0?void 0:s.count)||4e3,size:((l=o?.options)===null||l===void 0?void 0:l.size)||20,strength:((h=o?.options)===null||h===void 0?void 0:h.strength)||1.5,useWebGL:((u=o?.options)===null||u===void 0?void 0:u.useWebGL)===void 0||o.options.useWebGL}}getShaderSources(){return{vertex:`
      attribute vec2 a_position;
      attribute vec4 a_color;
      attribute float a_size;

      uniform vec2 u_resolution;
      uniform float u_time;
      uniform float u_forceStrength;
      uniform int u_effectType;

      varying vec4 v_color;

      void main() {
        // 
        vec2 clipSpace = ((a_position / u_resolution) * 2.0) - 1.0;
        clipSpace.y = -clipSpace.y; // Y

        gl_Position = vec4(clipSpace, 0.0, 1.0);
        gl_PointSize = a_size;
        v_color = a_color;
      }
    `,fragment:`
      precision mediump float;
      varying vec4 v_color;

      void main() {
        // 
        vec2 coord = gl_PointCoord - vec2(0.5);
        float distance = length(coord);

        if (distance > 0.5) {
          discard;
        }

        // 
        gl_FragColor = vec4(v_color.rgb, v_color.a);
      }
    `}}applyWebGLEffect(t){if(!this.gl||!this.program||!this.webglCanvas)return null;this.setupWebGLState(t),this.particles.length===0&&this.extractParticles(t),this.updateParticles(t);const e=this.gl;return e.enable(e.BLEND),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),e.useProgram(this.program),this.prepareAndDrawParticles(e),this.webglCanvas}applyCanvas2DEffect(t){const e=this.createOutputCanvas(t);if(!e)return null;const{canvas:i,ctx:r}=e,o=this.currentAnimationRatio;switch(this.particleConfig.effectType){case"explode":this.applyCanvas2DExplode(r,t,o);break;case"gravity":this.applyCanvas2DGravity(r,t,o);break;case"vortex":this.applyCanvas2DVortex(r,t,o);break;default:r.globalAlpha=Math.max(0,1-o),r.drawImage(t,0,0)}return i}extractParticles(t){const e=mi.createTempCanvas(t.width,t.height,1),i=e.getContext("2d");if(!i)return;i.drawImage(t,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height).data;this.particles=[];const o=Math.max(1,Math.floor(Math.sqrt(e.width*e.height/(1.5*this.particleConfig.count))));for(let a=0;a<e.height;a+=o)for(let s=0;s<e.width;s+=o){const l=4*(a*e.width+s),h=r[l],u=r[l+1],d=r[l+2],c=r[l+3];if(c>5){const f=s/e.width*t.width,g=a/e.height*t.height,p={x:f,y:g,originX:f,originY:g,vx:0,vy:0,r:h/255,g:u/255,b:d/255,a:Math.max(.6,c/255),life:1,size:this.particleConfig.size*(1+.5*Math.random())};this.particles.push(p)}}}updateParticles(t){const e=t.width/2,i=t.height/2,r=this.currentAnimationRatio,o=this.getDurationFromParent(),a=o<2e3,s=a?Math.max(1.5,3e3/o):1,l=a?Math.min(2,2e3/o):1;this.particles.forEach((h=>{const u=h.x-e,d=h.y-i,c=Math.sqrt(u*u+d*d),f=Math.atan2(d,u);this.applyParticleForces(h,f,c,r,l,t),this.updateParticleProperties(h,r,a,s,l)}))}applyParticleForces(t,e,i,r,o,a){const s=this.getAnimationTime();switch(this.particleConfig.effectType){case"explode":const l=r*this.particleConfig.strength*o*5;t.vx+=Math.cos(e)*l,t.vy+=Math.sin(e)*l;break;case"gravity":this.applyGravityEffect(t,r,o,a,s);break;case"vortex":this.applyVortexEffect(t,r,o,a,e,i)}}applyGravityEffect(t,e,i,r,o){const a=(t.originX+.7*t.originY)/(r.width+r.height)*.8;if(e>a){const s=(e-a)/(1-a),l=this.particleConfig.strength*s*s*12*i;t.vy+=l;const h=Math.sin(3*o+.02*t.originX)*Math.cos(2*o+.015*t.originY);t.vx+=h*this.particleConfig.strength*2*i}}applyVortexEffect(t,e,i,r,o,a){const s=r.width/2,l=r.height/2,h=o+e*Math.PI*.8,u=a+e*Math.max(r.width,r.height)*.7*1.8,d=s+Math.cos(h)*u,c=l+Math.sin(h)*u,f=e*this.particleConfig.strength*.08*i;t.vx+=(d-t.x)*f,t.vy+=(c-t.y)*f}updateParticleProperties(t,e,i,r,o){const a=i?.99:.98;if(t.vx*=a,t.vy*=a,t.x+=t.vx,t.y+=t.vy,i){const s=Math.max(.1,.5/r);t.life=Math.max(0,1-e*s),t.a=Math.max(.2,t.life*Math.min(1,1.2*t.a)),t.size=Math.max(.7*this.particleConfig.size,this.particleConfig.size*(.5+.5*t.life))}else t.life=Math.max(0,1-.2*e),t.a=Math.max(.1,t.life*Math.min(1,1.5*t.a)),t.size=Math.max(.5*this.particleConfig.size,this.particleConfig.size*(.3+.7*t.life))}prepareAndDrawParticles(t){const e=new Float32Array(2*this.particles.length),i=new Float32Array(4*this.particles.length),r=new Float32Array(this.particles.length);this.particles.forEach(((o,a)=>{e[2*a]=o.x,e[2*a+1]=o.y,i[4*a]=o.r,i[4*a+1]=o.g,i[4*a+2]=o.b,i[4*a+3]=Math.max(.1,o.a),r[a]=Math.max(6,1.5*o.size)})),this.updateParticleBuffers(t,e,i,r),this.setParticleUniforms(t),t.drawArrays(t.POINTS,0,this.particles.length),this.cleanupTempBuffers(t)}updateParticleBuffers(t,e,i,r){this.positionBuffer||(this.positionBuffer=t.createBuffer()),t.bindBuffer(t.ARRAY_BUFFER,this.positionBuffer),t.bufferData(t.ARRAY_BUFFER,e,t.DYNAMIC_DRAW);const o=t.getAttribLocation(this.program,"a_position");t.enableVertexAttribArray(o),t.vertexAttribPointer(o,2,t.FLOAT,!1,0,0),this.colorBuffer||(this.colorBuffer=t.createBuffer()),t.bindBuffer(t.ARRAY_BUFFER,this.colorBuffer),t.bufferData(t.ARRAY_BUFFER,i,t.DYNAMIC_DRAW);const a=t.getAttribLocation(this.program,"a_color");t.enableVertexAttribArray(a),t.vertexAttribPointer(a,4,t.FLOAT,!1,0,0);const s=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,s),t.bufferData(t.ARRAY_BUFFER,r,t.DYNAMIC_DRAW);const l=t.getAttribLocation(this.program,"a_size");t.enableVertexAttribArray(l),t.vertexAttribPointer(l,1,t.FLOAT,!1,0,0),this._tempSizeBuffer=s}setParticleUniforms(t){const e=t.getUniformLocation(this.program,"u_resolution"),i=t.getUniformLocation(this.program,"u_time"),r=t.getUniformLocation(this.program,"u_forceStrength"),o=t.getUniformLocation(this.program,"u_effectType");t.uniform2f(e,this.webglCanvas.width,this.webglCanvas.height),t.uniform1f(i,this.getAnimationTime()),t.uniform1f(r,this.particleConfig.strength),t.uniform1i(o,{explode:0,vortex:1,gravity:2}[this.particleConfig.effectType]||0)}cleanupTempBuffers(t){const e=this._tempSizeBuffer;e&&(t.deleteBuffer(e),delete this._tempSizeBuffer)}applyCanvas2DExplode(t,e,i){const r=e.width/2,o=e.height/2;t.save(),t.globalAlpha=Math.max(0,1-i),t.translate(r,o);const a=1+.5*i;t.scale(a,a),t.translate(-r,-o),t.drawImage(e,0,0),t.restore()}applyCanvas2DGravity(t,e,i){t.save(),t.globalAlpha=Math.max(0,1-i);const r=i*e.height*.3;t.drawImage(e,0,r),t.restore()}applyCanvas2DVortex(t,e,i){const r=e.width/2,o=e.height/2;t.save(),t.globalAlpha=Math.max(0,1-i),t.translate(r,o),t.rotate(i*Math.PI*2),t.translate(-r,-o),t.drawImage(e,0,0),t.restore()}}class fUt extends lUt{constructor(t,e,i,r,o){var a,s;super(t,e,i,r,o),this.glitchConfig={effectType:((a=o?.options)===null||a===void 0?void 0:a.effectType)||"rgb-shift",intensity:((s=o?.options)===null||s===void 0?void 0:s.intensity)!==void 0?o.options.intensity:.5}}applyCanvas2DEffect(t){if(this.glitchConfig.intensity<=0){const e=this.createOutputCanvas(t);return e?e.canvas:null}try{switch(this.glitchConfig.effectType){case"rgb-shift":default:return this.applyRGBShiftGlitch(t);case"digital-distortion":return this.applyDigitalDistortionGlitch(t);case"scan-lines":return this.applyScanLineGlitch(t);case"data-corruption":return this.applyDataCorruptionGlitch(t)}}catch{return null}}applyRGBShiftGlitch(t){const e=this.createOutputCanvas(t);if(!e)return null;const{ctx:i}=e;try{i.clearRect(0,0,t.width,t.height);const r=mi.calculateDynamicStrength(this.glitchConfig.intensity,this.getAnimationTime()),o=Math.floor(20*r),a=this.generateRandomOffset(o),s=this.generateRandomOffset(o,.3),l=this.generateRandomOffset(-o),h=mi.createTempCanvas(t.width,t.height),u=h.getContext("2d");u.drawImage(t,0,0);const d=u.getImageData(0,0,t.width,t.height),c=mi.extractChannel(d,0),f=mi.extractChannel(d,1),g=mi.extractChannel(d,2);return i.globalCompositeOperation="screen",u.clearRect(0,0,t.width,t.height),u.putImageData(c,0,0),i.drawImage(h,a.x,a.y),u.clearRect(0,0,t.width,t.height),u.putImageData(f,0,0),i.drawImage(h,s.x,s.y),u.clearRect(0,0,t.width,t.height),u.putImageData(g,0,0),i.drawImage(h,l.x,l.y),i.globalCompositeOperation="source-over",e.canvas}catch{return null}}applyDigitalDistortionGlitch(t){const e=this.createOutputCanvas(t);if(!e)return null;const{ctx:i}=e;try{const r=i.getImageData(0,0,t.width,t.height),o=mi.calculateDynamicStrength(this.glitchConfig.intensity,this.getAnimationTime()),a=this.processDigitalDistortion(r,o);return i.clearRect(0,0,t.width,t.height),i.putImageData(a,0,0),e.canvas}catch{return null}}applyScanLineGlitch(t){const e=this.createOutputCanvas(t);if(!e)return null;const{ctx:i}=e;try{const r=mi.calculateDynamicStrength(this.glitchConfig.intensity,this.getAnimationTime()),o=Math.max(2,Math.floor(10-8*r));i.globalCompositeOperation="multiply";for(let s=0;s<t.height;s+=o)if(Math.random()<r){const l=.1+.4*r;i.fillStyle=`rgba(0, 0, 0, ${l})`,i.fillRect(0,s,t.width,1)}i.globalCompositeOperation="screen";const a=Math.floor(20*r);for(let s=0;s<a;s++){const l=Math.random()*t.height,h=.3*r;i.fillStyle=`rgba(255, 255, 255, ${h})`,i.fillRect(0,Math.floor(l),t.width,1)}return i.globalCompositeOperation="source-over",e.canvas}catch{return null}}applyDataCorruptionGlitch(t){const e=this.createOutputCanvas(t);if(!e)return null;const{ctx:i}=e;try{const r=i.getImageData(0,0,t.width,t.height),o=mi.calculateDynamicStrength(this.glitchConfig.intensity,this.getAnimationTime()),a=this.processDataCorruption(r,o);return i.clearRect(0,0,t.width,t.height),i.putImageData(a,0,0),e.canvas}catch{return null}}generateRandomOffset(t,e=1){return{x:(Math.random()-.5)*t,y:(Math.random()-.5)*t*e}}processDigitalDistortion(t,e){const{data:i,width:r,height:o}=t,a=new Uint8ClampedArray(i),s=Math.floor(20*e)+5,l=Math.floor(o/s);for(let u=0;u<s;u++)if(Math.random()<e){const d=u*l,c=Math.min(d+l,o),f=Math.floor((Math.random()-.5)*r*e*.1);this.shiftSliceHorizontal(a,r,o,d,c,f)}const h=.3*e;for(let u=0;u<i.length;u+=4)Math.random()<h&&(a[u]=255*Math.random(),a[u+1]=255*Math.random(),a[u+2]=255*Math.random());return new ImageData(a,r,o)}shiftSliceHorizontal(t,e,i,r,o,a){const s=new Uint8ClampedArray(4*e);for(let l=r;l<o;l++){const h=l*e*4;for(let u=0;u<4*e;u++)s[u]=t[h+u];for(let u=0;u<e;u++){const d=h+4*u,c=4*((u-a+e)%e);t[d]=s[c],t[d+1]=s[c+1],t[d+2]=s[c+2],t[d+3]=s[c+3]}}}processDataCorruption(t,e){const{data:i,width:r,height:o}=t,a=new Uint8ClampedArray(i),s=Math.floor(15*e)+5;for(let h=0;h<s;h++)if(Math.random()<e){const u=Math.floor(Math.random()*r),d=Math.floor(5*Math.random())+1,c=Math.random()<.5?0:255;for(let f=0;f<o;f++)for(let g=0;g<d&&u+g<r;g++){const p=4*(f*r+u+g);a[p]=c,a[p+1]=c,a[p+2]=c}}const l=Math.floor(20*e);for(let h=0;h<l;h++){const u=Math.floor(Math.random()*r),d=Math.floor(Math.random()*o),c=Math.floor(20*Math.random())+5,f=Math.floor(10*Math.random())+2;this.corruptBlock(a,r,o,u,d,c,f)}return new ImageData(a,r,o)}corruptBlock(t,e,i,r,o,a,s){for(let l=0;l<s&&o+l<i;l++)for(let h=0;h<a&&r+h<e;h++){const u=4*((o+l)*e+(r+h));Math.random()<.7&&(t[u]=255*Math.random(),t[u+1]=255*Math.random(),t[u+2]=255*Math.random())}}}class gUt extends Pst{constructor(t,e,i,r,o){var a,s;super(t,e,i,r,o),this.blurConfig={blurRadius:((a=o?.options)===null||a===void 0?void 0:a.blurRadius)||8,useOptimizedBlur:((s=o?.options)===null||s===void 0?void 0:s.useOptimizedBlur)===void 0||o.options.useOptimizedBlur}}applyCSSBlur(t,e){const i=jt.createCanvas({width:t.width,height:t.height,dpr:jt.devicePixelRatio}),r=i.getContext("2d");return r?(r.filter=`blur(${e}px)`,r.drawImage(t,0,0),r.filter="none",i):t}applyDownsampleBlur(t,e){const{width:i,height:r}=t,o=Math.max(1,Math.floor(e/2)),a=Math.floor(i/o),s=Math.floor(r/o),l=jt.createCanvas({width:a,height:s,dpr:1}),h=l.getContext("2d");if(!h)return t;const u=jt.createCanvas({width:i,height:r,dpr:1}),d=u.getContext("2d");return d?(d.putImageData(t,0,0),h.drawImage(u,0,0,a,s),h.filter=`blur(${e/o}px)`,h.drawImage(l,0,0),h.filter="none",d.clearRect(0,0,i,r),d.drawImage(l,0,0,i,r),d.getImageData(0,0,i,r)):t}afterStageRender(t,e){if(this.blurConfig.blurRadius<=0)return e;let i;if(this.blurConfig.useOptimizedBlur)i=this.applyCSSBlur(e,this.blurConfig.blurRadius);else{const o=jt.createCanvas({width:e.width,height:e.height,dpr:jt.devicePixelRatio}),a=o.getContext("2d");if(!a)return!1;a.clearRect(0,0,e.width,e.height),a.drawImage(e,0,0);const s=a.getImageData(0,0,e.width,e.height),l=this.applyDownsampleBlur(s,this.blurConfig.blurRadius);a.putImageData(l,0,0),i=o}const r=i.getContext("2d");return r&&(r.globalCompositeOperation="overlay",r.fillStyle="rgba(255, 255, 255, 0.1)",r.fillRect(0,0,i.width,i.height),r.globalCompositeOperation="source-over"),i}}class pUt extends z_{constructor(t,e,i,r,o){var a,s;super(t,e,i,r,o),this.pixelationConfig={maxPixelSize:((a=o?.options)===null||a===void 0?void 0:a.maxPixelSize)||20,method:((s=o?.options)===null||s===void 0?void 0:s.method)||"out"}}applyDownsamplePixelation(t,e){if(e<=1)return t;const{width:i,height:r}=t,o=Math.ceil(i/e),a=Math.ceil(r/e),s=jt.createCanvas({width:o,height:a,dpr:1}),l=s.getContext("2d");if(!l)return t;const h=jt.createCanvas({width:i,height:r,dpr:jt.devicePixelRatio}),u=h.getContext("2d");return u?(l.imageSmoothingEnabled=!1,u.imageSmoothingEnabled=!1,l.drawImage(t,0,0,o,a),u.drawImage(s,0,0,i,r),h):t}updateAnimationProgress(){return this.pixelationConfig.method==="in"?this.pixelationConfig.maxPixelSize-this.currentAnimationRatio*(this.pixelationConfig.maxPixelSize-1):1+this.currentAnimationRatio*(this.pixelationConfig.maxPixelSize-1)}afterStageRender(t,e){const i=this.updateAnimationProgress();return i<=1?e:this.applyDownsamplePixelation(e,i)}}const vUt=()=>{Bt.registerBuiltInAnimate("increaseCount",N$t),Bt.registerBuiltInAnimate("fromTo",aUt),Bt.registerBuiltInAnimate("scaleIn",Njt),Bt.registerBuiltInAnimate("scaleOut",Wjt),Bt.registerBuiltInAnimate("growHeightIn",ojt),Bt.registerBuiltInAnimate("growHeightOut",ljt),Bt.registerBuiltInAnimate("growWidthIn",Bjt),Bt.registerBuiltInAnimate("growWidthOut",kjt),Bt.registerBuiltInAnimate("growCenterIn",tjt),Bt.registerBuiltInAnimate("growCenterOut",ejt),Bt.registerBuiltInAnimate("clipIn",W$t),Bt.registerBuiltInAnimate("clipOut",V$t),Bt.registerBuiltInAnimate("fadeIn",G$t),Bt.registerBuiltInAnimate("fadeOut",$$t),Bt.registerBuiltInAnimate("growPointsIn",ujt),Bt.registerBuiltInAnimate("growPointsOut",djt),Bt.registerBuiltInAnimate("growPointsXIn",fjt),Bt.registerBuiltInAnimate("growPointsXOut",gjt),Bt.registerBuiltInAnimate("growPointsYIn",vjt),Bt.registerBuiltInAnimate("growPointsYOut",mjt),Bt.registerBuiltInAnimate("growAngleIn",K$t),Bt.registerBuiltInAnimate("growAngleOut",Z$t),Bt.registerBuiltInAnimate("growRadiusIn",xjt),Bt.registerBuiltInAnimate("growRadiusOut",Sjt),Bt.registerBuiltInAnimate("moveIn",Qjt),Bt.registerBuiltInAnimate("moveOut",tUt),Bt.registerBuiltInAnimate("rotateIn",nUt),Bt.registerBuiltInAnimate("rotateOut",rUt),Bt.registerBuiltInAnimate("update",Kjt),Bt.registerBuiltInAnimate("state",Vjt),Bt.registerBuiltInAnimate("labelItemAppear",Ljt),Bt.registerBuiltInAnimate("labelItemDisappear",Ejt),Bt.registerBuiltInAnimate("poptipAppear",Djt),Bt.registerBuiltInAnimate("poptipDisappear",Ijt),Bt.registerBuiltInAnimate("inputText",zb),Bt.registerBuiltInAnimate("inputRichText",Ojt),Bt.registerBuiltInAnimate("outputRichText",Hjt),Bt.registerBuiltInAnimate("slideRichText",zjt),Bt.registerBuiltInAnimate("slideOutRichText",Fjt),Bt.registerBuiltInAnimate("slideIn",G3),Bt.registerBuiltInAnimate("growIn",Hst),Bt.registerBuiltInAnimate("spinIn",zst),Bt.registerBuiltInAnimate("moveScaleIn",jjt),Bt.registerBuiltInAnimate("moveRotateIn",Ujt),Bt.registerBuiltInAnimate("strokeIn",Gjt),Bt.registerBuiltInAnimate("slideOut",$3),Bt.registerBuiltInAnimate("growOut",Fst),Bt.registerBuiltInAnimate("spinOut",Nst),Bt.registerBuiltInAnimate("moveScaleOut",Yjt),Bt.registerBuiltInAnimate("moveRotateOut",Xjt),Bt.registerBuiltInAnimate("strokeOut",$jt),Bt.registerBuiltInAnimate("pulse",qjt),Bt.registerBuiltInAnimate("MotionPath",oUt),Bt.registerBuiltInAnimate("streamLight",sUt),Bt.registerBuiltInAnimate("dissolve",hUt),Bt.registerBuiltInAnimate("grayscale",uUt),Bt.registerBuiltInAnimate("distortion",dUt),Bt.registerBuiltInAnimate("particle",cUt),Bt.registerBuiltInAnimate("glitch",fUt),Bt.registerBuiltInAnimate("gaussianBlur",gUt),Bt.registerBuiltInAnimate("pixelation",pUt)};class mUt extends am{onBind(){var t;const e=sm(this.target);this._animator=e;const i=this.duration,r=this.easing,{config:o,lastScale:a,getTickCoord:s}=this.params;let l=1;const h=this.target.data;if(a&&s&&h){l=.7;const u=s(a.scale(h.rawValue)),d=this.target.attribute.x,c=this.target.attribute.y;this.target.setAttributes({x:u.x,y:u.y}),e.animate(this.target,{type:"to",to:{x:d,y:c},duration:i,easing:r})}e.animate(this.target,{type:(t=o.type)!==null&&t!==void 0?t:"fadeIn",to:o.to,duration:i*l,easing:r}),this.completeBind(e)}}class yUt extends am{onBind(){const t=sm(this.target);this._animator=t;const e=this.duration,i=this.easing,{config:r,diffAttrs:o}=this.params;t.animate(this.target,{type:"to",to:Object.assign({},o),duration:e,easing:i,customParameters:{diffAttrs:Object.assign({},o)}}),this.completeBind(t)}deleteSelfAttr(t){super.deleteSelfAttr(t),this._animator.deleteSelfAttr(t)}tryPreventConflict(){}}function bUt(){Bt.registerBuiltInAnimate("axisEnter",mUt),Bt.registerBuiltInAnimate("axisUpdate",yUt)}function _Ut(){Lo(),O3(),n2(),zl(),bUt()}function CUt(){_Ut(),Zh()}var bU=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]])}return e};CUt();class Fb extends c$t{constructor(t,e){super(e?.skipDefault?t:Qt({},Fb.defaultAttributes,t),e)}_renderInner(t){var e;if(this._breaks=null,this.attribute.breaks&&this.attribute.breaks.length){const r=[];for(let o=0;o<this.attribute.breaks.length;o++){const a=this.attribute.breaks[o],{range:s,breakSymbol:l,rawRange:h}=a;r.push({startPoint:this.getTickCoord(s[0]),endPoint:this.getTickCoord(s[1]),range:s,breakSymbol:l,rawRange:h})}this._breaks=r}super._renderInner(t),this._breaks&&this._breaks.length&&this._breaks.forEach(((r,o)=>{const{startPoint:a,endPoint:s,breakSymbol:l,rawRange:h}=r;if(l?.visible!==!1){const u=Nt.group({zIndex:Q7t});u.name=mr.axisBreak,u.id=this._getNodeId(`${mr.axisBreak}-${o}`),u.data=h;const d=r$t(l),c=Nt.symbol(Object.assign({x:a.x,y:a.y},d));c.name=mr.axisBreakSymbol;const f=Nt.symbol(Object.assign({x:s.x,y:s.y},d));f.name=mr.axisBreakSymbol,u.add(c),u.add(f),t.add(u)}}));const{panel:i}=this.attribute;if(i&&i.visible){const r=this.axisContainer,o=r.AABBBounds,a=Nt.rect(Object.assign({x:o.x1,y:o.y1,width:o.width(),height:o.height()},i.style));a.name=mr.background,a.id=this._getNodeId("background"),a.states=Qt({},Hg,(e=i.state)!==null&&e!==void 0?e:{}),r.insertBefore(a,r.firstChild)}}renderLine(t){const{start:e,end:i,line:r}=this.attribute,o=r,{startSymbol:a,endSymbol:s,style:l,state:h}=o,u=bU(o,["startSymbol","endSymbol","style","state"]),d=Object.assign({startSymbol:a,endSymbol:s,lineStyle:l},u);if(this._breaks&&this._breaks.length){const f=[];let g=e;this._breaks.forEach((p=>{const{startPoint:v,endPoint:m}=p;f.push([g,v]),g=m})),f.push([g,i]),d.points=f,d.multiSegment=!0}else d.points=[e,i];fi(h)||(d.state={line:Qt({},Hg,h),symbol:Qt({},Hg,h)});const c=new o2(d);c.name=mr.line,c.id=this._getNodeId("line"),t.add(c)}getTextAlign(t){let e="center";return Kc(t[0],0)?Kc(t[1],0)?Object.is(t[1],-0)?e="start":Object.is(t[0],-0)&&(e="end"):e="center":t[0]>0?e="start":t[0]<0&&(e="end"),e}getTitleAttribute(){var t,e,i;const r=this.attribute.title,{position:o="middle",space:a=4,textStyle:s={},autoRotate:l=!0,shape:h,background:u,state:d={},maxWidth:c}=r,f=bU(r,["position","space","textStyle","autoRotate","shape","background","state","maxWidth"]);let g=.5;o==="start"?g=0:o==="end"&&(g=1);const{verticalFactor:p=1}=this.attribute,v=-1*p,m=this.getTickCoord(g),y=this.getRelativeVector();let b=0;if(!((t=this.attribute.label)===null||t===void 0)&&t.visible&&this.attribute.label.inside===!1){const L=+Jr(this.attribute,"label.space",4);b+=L;const B=Object.keys(this.axisLabelLayerSize).length;if(y[1]===0){const P=this.axisLabelsContainer?this.axisLabelsContainer.AABBBounds.height():0;isFinite(P)?b+=P+(B-1)*L:b=0}else if(y[0]===0)if(this.axisLabelsContainer&&this.axisLabelsContainer.AABBBounds&&!this.axisLabelsContainer.AABBBounds.empty()){const P=this.axisLabelLayerSize[0].labelPos,k=this.axisLabelsContainer.AABBBounds;b+=(v===1?k.x2>P?Math.min(k.x2-P,k.width()):0:k.x1<P?Math.min(P-k.x1,k.width()):0)+(B-1)*L}else b=0;else Object.keys(this.axisLabelLayerSize).forEach(((P,k)=>{b+=this.axisLabelLayerSize[P].width+(k>0?L:0)}))}let _=0;!((e=this.attribute.tick)===null||e===void 0)&&e.visible&&this.attribute.tick.inside===!1&&(_=this.attribute.tick.length||4),!((i=this.attribute.subTick)===null||i===void 0)&&i.visible&&this.attribute.subTick.inside===!1&&(_=Math.max(_,this.attribute.subTick.length||2));const w=_+b+a,C=this.getVerticalCoord(m,w,!1),x=this.getVerticalVector(w,!1,{x:0,y:0});let S,A,{angle:T}=f;if(S=o==="start"?"start":o==="end"?"end":"center",fe(T)&&l){T=N7t(y,[1,0],!0);const{verticalFactor:L=1}=this.attribute;A=-1*L===1?"bottom":"top"}else S=this.getTextAlign(x),A=this.getTextBaseline(x,!1);let M=c;if(fe(M)){const{verticalLimitSize:L,verticalMinSize:B,orient:P}=this.attribute,k=Math.min(L||1/0,B||1/0);if(hn(k))if(P==="bottom"||P==="top")if(T!==Math.PI/2){const E=Math.abs(Math.cos(T??0));M=E<1e-6?1/0:this.attribute.end.x/E}else M=k-w;else if(T&&T!==0){const E=Math.abs(Math.sin(T));M=E<1e-6?1/0:this.attribute.end.y/E}else M=k-w}const R=Object.assign(Object.assign(Object.assign({},C),f),{maxWidth:M,textStyle:Object.assign({textAlign:S,textBaseline:A},s),state:{text:Qt({},Hg,d.text),shape:Qt({},Hg,d.shape),panel:Qt({},Hg,d.background)}});return R.angle=T,h&&h.visible&&(R.shape=Object.assign({visible:!0},h.style),h.space&&(R.space=h.space)),u&&u.visible&&(R.panel=Object.assign({visible:!0},u.style)),R}getTextBaseline(t,e){let i="middle";const{verticalFactor:r=1}=this.attribute,o=(e?1:-1)*r;return Kc(t[1],0)?i=!Kc(t[0],0)||Object.is(t[0],-0)||Object.is(t[1],-0)?"middle":o===1?"bottom":"top":t[1]>0?i="top":t[1]<0&&(i="bottom"),i}getLabelAlign(t,e,i){const r=this.attribute.orient;if(["top","bottom","right","left"].includes(r)||t[0]===0&&t[1]===0){if(r==="top"||r==="bottom")return Sst(e?r==="bottom"?"top":"bottom":r,i);if(r==="left"||r==="right")return Ast(e?r==="left"?"right":"left":r,i)}return{textAlign:this.getTextAlign(t),textBaseline:this.getTextBaseline(t,e)}}beforeLabelsOverlap(t,e,i,r,o){var a,s,l,h;const{flush:u=!1}=this.attribute.label||{};if(u&&t.length){const{orient:d,start:c,end:f}=this.attribute,g=d==="bottom"||d==="top",p=t[0],v=hp(t),m=g?p.attribute.x>v.attribute.x:p.attribute.y<v.attribute.y;if(g){const y=m?v:p,b=m?p:v,_=c.x,w=f.x,C=y.AABBBounds.x1,x=b.AABBBounds.x2;C<_&&(y.attribute.angle?y.setAttributes({dx:((a=y.attribute.dx)!==null&&a!==void 0?a:0)+_-C}):y.setAttributes({x:_,textAlign:"left"})),x>w&&(b.attribute.angle?b.setAttributes({dx:((s=b.attribute.dx)!==null&&s!==void 0?s:0)+w-x}):b.setAttributes({x:w,textAlign:"right"}))}else{const y=m?v:p,b=m?p:v,_=y.AABBBounds.y2,w=b.AABBBounds.y1,C=c.y,x=f.y;w<C&&(b.attribute.angle?b.setAttributes({dy:((l=b.attribute.dy)!==null&&l!==void 0?l:0)+C-w}):b.setAttributes({y:C,textBaseline:"top"})),_>x&&(y.attribute.angle?y.setAttributes({dy:((h=y.attribute.dy)!==null&&h!==void 0?h:0)+x-_}):y.setAttributes({y:x,textBaseline:"bottom"}))}}}handleLabelsOverlap(t,e,i,r,o){if(fi(t))return;const{verticalLimitSize:a,label:s,orient:l}=this.attribute,h=this._getAxisLabelLimitLength(a,o),{layoutFunc:u,autoRotate:d,autoRotateAngle:c,autoLimit:f,limitEllipsis:g,autoHide:p,autoHideMethod:v,autoHideSeparation:m,lastVisible:y,firstVisible:b,autoWrap:_,overflowLimitLength:w}=s;if(Zi(u))u(t,e,r,this);else{if(d)v$t(t,{labelRotateAngle:c,orient:l});else if(_){const C=Math.abs(l==="left"||l==="right"?this.attribute.start.y-this.attribute.end.y:this.attribute.start.x-this.attribute.end.x);x$t(t,{orient:l,limitLength:h,axisLength:C,ellipsis:g})}if(!_&&f&&hn(h)&&h>0){const C=l==="left"||l==="right",x=Math.abs(C?this.attribute.start.y-this.attribute.end.y:this.attribute.start.x-this.attribute.end.x),S=C?x/t.length:p||d?1/0:x/t.length;w$t(t,{limitLength:h,verticalLimitLength:S,ellipsis:g,orient:l,axisLength:x,overflowLimitLength:w})}p&&p$t(t,{method:v,separation:m,lastVisible:y,firstVisible:b})}}afterLabelsOverlap(t,e,i,r,o){const{verticalLimitSize:a,orient:s}=this.attribute,l=s==="bottom"||s==="top",h=i.AABBBounds;let u=l?h.height():h.width();const{verticalMinSize:d}=this.attribute;if(hn(d)&&(!hn(a)||d<=a)){const c=this._getAxisLabelLimitLength(d,o);let f,g;u=Math.max(u,c),s==="left"?(f=h.x2-u,g=h.y1):s==="right"?(f=h.x1,g=h.y1):s==="top"?(f=h.x1,g=h.y2-u):s==="bottom"&&(f=h.x1,g=h.y1);const p=Nt.rect({x:f,y:g,width:l?h.width():u,height:l?u:h.height(),pickable:!1});p.name=mr.axisLabelBackground,p.id=this._getNodeId("axis-label-background"),i.insertBefore(p,i.firstChild)}if(Lt(this.attribute.label.containerAlign)){let c;s==="left"?c=h.x2-u:s==="right"?c=h.x1:s==="top"?c=h.y2-u:s==="bottom"&&(c=h.y1),S$t(t,c,u,s,this.attribute.label.containerAlign)}}_getAxisLabelLimitLength(t,e){var i,r,o,a,s;const{label:l,title:h,line:u,tick:d}=this.attribute,c=(i=l.space)!==null&&i!==void 0?i:4;let f=t,g=0,p=0;const v=u&&u.visible?(r=u.style.lineWidth)!==null&&r!==void 0?r:1:0,m=d&&d.visible?(o=d.length)!==null&&o!==void 0?o:4:0;if(h&&h.visible&&typeof h.text=="string"){g=r2(h.text,h.textStyle,(s=(a=this.stage)===null||a===void 0?void 0:a.getTheme())===null||s===void 0?void 0:s.text).height;const y=Pl(h.padding);p=h.space+y[0]+y[2]}return f&&(f=(f-c-p-g-v-m)/e),f}release(){super.release(),this._breaks=null}}Fb.defaultAttributes=EO,KGt(Fb,A$t);const Rh=n=>n.map(((t,e)=>({index:e,value:t}))),_U=(n,t,e=0)=>{const i=new Hb(n).expand(e/2),r=new Hb(t).expand(e/2);return i.intersects(r)},CU=12,N1=(n,t,e,i)=>e<n?Math.max(n-t/2,e):e>n?Math.min(n-t/2,e-t):e<i?e:e-t,OO=(n,t,e)=>{var i,r,o;const{labelStyle:a,axisOrientType:s,labelFlush:l,labelFormatter:h,startAngle:u=0}=e;let d=(i=a.angle)!==null&&i!==void 0?i:0;a.direction==="vertical"&&(d+=Zc(90));const c=["bottom","top"].includes(s),f=["left","right"].includes(s);let g=1,p=0;c||(f?(g=0,p=1):u&&(g=Math.cos(u),p=-Math.sin(u)));const v=fst(a),m=n.range();let y=[];for(let b=0;b<t.length;b++){const _=t[b],w=h?h(_):`${_}`;if(cy(w)){y=void 0;break}const{width:C,height:x}=v.quickMeasure(w),S=Math.max(C,12),A=Math.max(x,12),T=n.scale(_),M=g*T,R=p*T;let L,B,P=M,k=R;l&&c&&b===0?P=N1(M,S,m[0],m[m.length-1]):l&&c&&b===t.length-1?P=N1(M,S,m[m.length-1],m[0]):L=(r=a.textAlign)!==null&&r!==void 0?r:"center",L==="right"?P-=S:L==="center"&&(P-=S/2),l&&f&&b===0?k=N1(R,A,m[0],m[m.length-1]):l&&f&&b===t.length-1?k=N1(R,A,m[m.length-1],m[0]):B=(o=a.textBaseline)!==null&&o!==void 0?o:"middle",B==="bottom"?k-=A:B==="middle"&&(k-=A/2);const E=new Hb().set(P,k,P+S,k+A);d&&E.rotate(d,M,R),y.push(E)}return y},wUt=n=>["bottom","top","z"].includes(n);var Wo;(function(n){n.Identity="identity",n.Linear="linear",n.Log="log",n.Pow="pow",n.Sqrt="sqrt",n.Symlog="symlog",n.Time="time",n.Quantile="quantile",n.Quantize="quantize",n.Threshold="threshold",n.Ordinal="ordinal",n.Point="point",n.Band="band"})(Wo||(Wo={}));Object.values(Wo).forEach((n=>{}));function Gst(n){switch(n){case Wo.Linear:case Wo.Log:case Wo.Pow:case Wo.Sqrt:case Wo.Symlog:case Wo.Time:return!0;default:return!1}}function xUt(n){switch(n){case Wo.Ordinal:case Wo.Point:case Wo.Band:return!0;default:return!1}}function r0(n){return n}function HO(n,t){if(n=Number(n),t=Number(t),t-=n)return i=>(i-n)/t;const e=Number.isNaN(t)?NaN:.5;return()=>e}function wU(n,t,e){const i=n[0],r=n[1],o=t[0],a=t[1];let s,l;return r<i?(s=HO(r,i),l=e(a,o)):(s=HO(i,r),l=e(o,a)),h=>l(s(h))}function SUt(n,t){const e=(n[1]-n[0])/(t[1]-t[0]),i=n[0]-e*t[0];return[i,e+i]}function AUt(n,t,e){const i=Math.min(n.length,t.length)-1,r=new Array(i),o=new Array(i);let a=-1;for(n[i]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++a<i;)r[a]=HO(n[a],n[a+1]),o[a]=e(t[a],t[a+1]);return function(s){const l=t8t(n,s,1,i)-1;return o[l](r[l](s))}}let TUt=class{constructor(){this._rangeFactorStart=null,this._rangeFactorEnd=null}_calculateWholeRange(t){return this._wholeRange?this._wholeRange:Lt(this._rangeFactorStart)&&Lt(this._rangeFactorEnd)&&t.length===2?(this._wholeRange=SUt(t,[this._rangeFactorStart,this._rangeFactorEnd]),this._wholeRange):t}rangeFactor(t,e,i){return t?(t.length===2&&t.every((r=>r>=0&&r<=1))&&(this._wholeRange=null,t[0]===0&&t[1]===1?(this._rangeFactorStart=null,this._rangeFactorEnd=null):(this._rangeFactorStart=t[0],this._rangeFactorEnd=t[1])),this):i?(this._wholeRange=null,this._rangeFactorStart=null,this._rangeFactorEnd=null,this):Lt(this._rangeFactorStart)&&Lt(this._rangeFactorEnd)?[this._rangeFactorStart,this._rangeFactorEnd]:null}rangeFactorStart(t,e){var i;return fe(t)?this._rangeFactorStart:(t>=0&&t<=1&&(this._wholeRange=null,t!==0||!fe(this._rangeFactorEnd)&&this._rangeFactorEnd!==1?(this._rangeFactorStart=t,this._rangeFactorEnd=(i=this._rangeFactorEnd)!==null&&i!==void 0?i:1):(this._rangeFactorStart=null,this._rangeFactorEnd=null)),this)}rangeFactorEnd(t,e){var i;return fe(t)?this._rangeFactorEnd:(t>=0&&t<=1&&(this._wholeRange=null,t!==0||!fe(this._rangeFactorStart)&&this._rangeFactorStart!==0?(this._rangeFactorEnd=t,this._rangeFactorStart=(i=this._rangeFactorStart)!==null&&i!==void 0?i:0):(this._rangeFactorStart=null,this._rangeFactorEnd=null)),this)}generateFishEyeTransform(){var t;if(!this._fishEyeOptions)return void(this._fishEyeTransform=null);const{distortion:e=2,radiusRatio:i=.1,radius:r}=this._fishEyeOptions,o=this.range(),a=o[0],s=o[o.length-1],l=Math.min(a,s),h=Math.max(a,s),u=No((t=this._fishEyeOptions.focus)!==null&&t!==void 0?t:0,l,h),d=fe(r)?(h-l)*i:r;let c=Math.exp(e);c=c/(c-1)*d;const f=e/d;this._fishEyeTransform=g=>{const p=Math.abs(g-u);if(p>=d)return g;if(p<=1e-6)return u;const v=c*(1-Math.exp(-p*f))/p*.75+.25;return u+(g-u)*v}}unknown(t){return arguments.length?(this._unknown=t,this):this._unknown}get(t,e){var i;return(i=this==null?void 0:this[t])!==null&&i!==void 0?i:e}};const{interpolateRgb:vk}=C8t;function MUt(n,t){const e=typeof t;let i;if(fe(t)||e==="boolean")return()=>t;if(e==="number")return Ow(n,t);if(e==="string"){if(i=zw.parseColorString(t)){const r=vk(zw.parseColorString(n),i);return o=>r(o).formatRgb()}return Ow(Number(n),Number(t))}return t instanceof io?vk(n,t):t instanceof zw?vk(n.color,t.color):t instanceof Date?a8t(n,t):Ow(Number(n),Number(t))}let RUt=class extends TUt{constructor(t=r0,e=r0){super(),this._unknown=void 0,this.transformer=t,this.untransformer=e,this._forceAlign=!0,this._domain=[0,1],this._range=[0,1],this._clamp=r0,this._piecewise=wU,this._interpolate=MUt}calculateVisibleDomain(t){var e;return Lt(this._rangeFactorStart)&&Lt(this._rangeFactorEnd)&&t.length===2?[this.invert(t[0]),this.invert(t[1])]:(e=this._niceDomain)!==null&&e!==void 0?e:this._domain}fishEye(t,e,i){return t||i?(this._fishEyeOptions=t,this._fishEyeTransform=null,this.rescale(e)):this._fishEyeOptions}scale(t){var e;if(t=Number(t),Number.isNaN(t)||this._domainValidator&&!this._domainValidator(t))return this._unknown;this._output||(this._output=this._piecewise(((e=this._niceDomain)!==null&&e!==void 0?e:this._domain).map(this.transformer),this._calculateWholeRange(this._range),this._interpolate));const i=this._output(this.transformer(this._clamp(t)));return this._fishEyeTransform?this._fishEyeTransform(i):i}invert(t){var e;return this._input||(this._input=this._piecewise(this._calculateWholeRange(this._range),((e=this._niceDomain)!==null&&e!==void 0?e:this._domain).map(this.transformer),Ow)),this._clamp(this.untransformer(this._input(t)))}domain(t,e){var i;if(!t)return((i=this._niceDomain)!==null&&i!==void 0?i:this._domain).slice();this._domainValidator=null,this._niceType=null,this._niceDomain=null;const r=Array.from(t,QGt);return this._domain=r,this.rescale(e)}range(t,e){if(!t)return this._range.slice();const i=Array.from(t);return this._range=i,this.rescale(e)}rangeRound(t,e){const i=Array.from(t);return this._range=i,this._interpolate=o8t,this.rescale(e)}rescale(t){var e;if(t)return this;const i=(e=this._niceDomain)!==null&&e!==void 0?e:this._domain,r=i.length,o=this._range.length;let a=Math.min(r,o);if(r&&r<o&&this._forceAlign){const s=o-r+1,l=i[r-1],h=r>=2?(l-i[r-2])/s:0;for(let u=1;u<=s;u++)i[r-2+u]=l-h*(s-u);a=o}return this._autoClamp&&(this._clamp=r8t(i[0],i[a-1])),this._piecewise=a>2?AUt:wU,this._output=this._input=null,this._wholeRange=null,this.generateFishEyeTransform(),this}clamp(t,e,i){return arguments.length?(e?(this._autoClamp=!1,this._clamp=e):(this._autoClamp=!!t,this._clamp=t?void 0:r0),this.rescale(i)):this._clamp!==r0}interpolate(t,e){return arguments.length?(this._interpolate=t,this.rescale(e)):this._interpolate}ticks(t=10){return[]}tickData(t=10){const e=this.ticks(t);return(e??[]).map(((i,r)=>({index:r,tick:i,value:(this.scale(i)-this._range[0])/(this._range[1]-this._range[0])})))}rangeFactor(t,e){return t?(super.rangeFactor(t),this._output=this._input=null,this):super.rangeFactor()}rangeFactorStart(t,e){return fe(t)?super.rangeFactorStart():(super.rangeFactorStart(t),this._output=this._input=null,this)}rangeFactorEnd(t,e){return fe(t)?super.rangeFactorEnd():(super.rangeFactorEnd(t),this._output=this._input=null,this)}forceAlignDomainRange(t){return arguments.length?(this._forceAlign=t,this):this._forceAlign}};const PUt=Math.sqrt(50),BUt=Math.sqrt(10),kUt=Math.sqrt(2),W1=[1,2,5,10],xU=(n,t,e)=>{let i=1,r=n;const o=Math.floor((t-1)/2),a=Math.abs(n);return n>=0&&n<=Number.MIN_VALUE?r=0:n<0&&n>=-Number.MIN_VALUE?r=-(t-1):!e&&a<1?i=$st(a).step:(e||a>1)&&(r=Math.floor(n)-o*i),i>0?(n>0?r=Math.max(r,0):n<0&&(r=Math.min(r,-(t-1)*i)),ZGt(0,t).map((s=>r+s*i))):n>0?AA(0,-(t-1)/i,i):AA((t-1)/i,0,i)},LUt=Uat(((n,t,e,i)=>{let r,o,a,s,l=-1;if(e=+e,(n=+n)==(t=+t))return[n];if(Math.abs(n-t)<=Number.MIN_VALUE&&e>0)return[n];if((r=t<n)&&(o=n,n=t,t=o),s=j3(n,t,e).step,!isFinite(s))return[];if(s>0){let h=Math.round(n/s),u=Math.round(t/s);for(h*s<n&&++h,u*s>t&&--u,a=new Array(o=u-h+1);++l<o;)a[l]=(h+l)*s}else if(s<0&&i?.noDecimals){s=1;const h=Math.ceil(n),u=Math.floor(t);if(!(h<=u))return[];for(a=new Array(o=u-h+1);++l<o;)a[l]=h+l}else{s=-s;let h=Math.round(n*s),u=Math.round(t*s);for(h/s<n&&++h,u/s>t&&--u,a=new Array(o=u-h+1);++l<o;)a[l]=(h+l)/s}return r&&a.reverse(),a})),AA=(n,t,e)=>{let i,r,o=-1;if(e>0){let a=Math.floor(n/e),s=Math.ceil(t/e);for((a+1)*e<n&&++a,(s-1)*e>t&&--s,r=new Array(i=s-a+1);++o<i;)r[o]=(a+o)*e}else{e=-e;let a=Math.floor(n*e),s=Math.ceil(t*e);for((a+1)/e<n&&++a,(s-1)/e>t&&--s,r=new Array(i=s-a+1);++o<i;)r[o]=(a+o)/e}return r},EUt=(n,t,e)=>{let i;const r=n[0],o=n[n.length-1],a=t-n.length;if(o<=0){const h=[];for(i=a;i>=1;i--)h.push(r-i*e);return h.concat(n)}if(r>=0){for(i=1;i<=a;i++)n.push(o+i*e);return n}let s=[];const l=[];for(i=1;i<=a;i++)i%2==0?s=[r-Math.floor(i/2)*e].concat(s):l.push(o+Math.ceil(i/2)*e);return s.concat(n).concat(l)},DUt=Uat(((n,t,e,i)=>{let r,o,a;if(e=+e,(n=+n)==(t=+t)||Math.abs(n-t)<=Number.MIN_VALUE&&e>0)return xU(n,e,i?.noDecimals);(r=t<n)&&(a=n,n=t,t=a);const s=j3(n,t,e);let l=s.step;if(!isFinite(l))return[];if(l>0){let h=1;const{power:u,gap:d}=s,c=d===10?2*10**u:1*10**u;for(;h<=5&&(o=AA(n,t,l),o.length>e+1)&&e>2;)l+=c,h+=1;e>2&&o.length<e-1&&(o=EUt(o,e,l))}else i?.noDecimals&&l<0&&(l=1),o=AA(n,t,l);return r&&o.reverse(),o})),$st=n=>{const t=Math.floor(Math.log(n)/Math.LN10),e=n/10**t;let i=W1[0];return e>=PUt?i=W1[3]:e>=BUt?i=W1[2]:e>=kUt&&(i=W1[1]),t>=0?{step:i*10**t,gap:i,power:t}:{step:-(10**-t)/i,gap:i,power:t}};function j3(n,t,e){const i=(t-n)/Math.max(0,e);return $st(i)}function IUt(n,t,e){let i;if(e=+e,(n=+n)==(t=+t)&&e>0)return[n];if(e<=0||(i=OUt(n,t,e))===0||!isFinite(i))return[];const r=new Array(e);for(let o=0;o<e;o++)r[o]=n+o*i;return r}function OUt(n,t,e){return(t-n)/Math.max(1,e-1)}function HUt(n,t,e){let i,r,o=-1;if(e=+e,(r=(t=+t)<(n=+n))&&(i=n,n=t,t=i),!isFinite(e)||t-n<=e)return[n];const a=Math.floor((t-n)/e+1),s=new Array(a);for(;++o<a;)s[o]=n+o*e;return r&&s.reverse(),s}function mk(n,t=10){let e,i,r=0,o=n.length-1,a=n[r],s=n[o],l=10;for(s<a&&(i=a,a=s,s=i,i=r,r=o,o=i);l-- >0;){if(i=j3(a,s,t).step,i===e)return n[r]=a,n[o]=s,n;if(i>0)a=Math.floor(a/i)*i,s=Math.ceil(s/i)*i;else{if(!(i<0))break;a=Math.ceil(a*i)/i,s=Math.floor(s*i)/i}e=i}}function zUt(n,t){const e=pr(t.forceMin),i=pr(t.forceMax);let r=null;const o=[];let a=null;const s=e&&i?l=>l>=t.forceMin&&l<=t.forceMax:e?l=>l>=t.forceMin:i?l=>l<=t.forceMax:null;return e?o[0]=t.forceMin:pr(t.min)&&t.min<=Math.min(n[0],n[n.length-1])&&(o[0]=t.min),i?o[1]=t.forceMax:pr(t.max)&&t.max>=Math.max(n[0],n[n.length-1])&&(o[1]=t.max),pr(o[0])&&pr(o[1])?(a=n.slice(),a[0]=o[0],a[a.length-1]=o[1]):r=pr(o[0])||pr(o[1])?pr(o[0])?"max":"min":"all",{niceType:r,niceDomain:a,niceMinMax:o,domainValidator:s}}let FUt=class jst extends RUt{constructor(){super(...arguments),this.type=Wo.Linear}clone(){var t;const e=new jst;return e.domain(this._domain,!0).range(this._range,!0).unknown(this._unknown).clamp(this.clamp(),null,!0).interpolate(this._interpolate),this._niceType&&(e._niceType=this._niceType,e._domainValidator=this._domainValidator,e._niceDomain=(t=this._niceDomain)===null||t===void 0?void 0:t.slice()),e}tickFormat(){return()=>{}}d3Ticks(t=10,e){const i=this.calculateVisibleDomain(this._range);return LUt(i[0],i[i.length-1],t,e)}ticks(t=10,e){var i;if(Zi(e?.customTicks))return e.customTicks(this,t);if(Lt(this._rangeFactorStart)&&Lt(this._rangeFactorEnd)&&(this._rangeFactorStart>0||this._rangeFactorEnd<1)&&this._range.length===2||!this._niceType)return this.d3Ticks(t,e);const r=(i=this._niceDomain)!==null&&i!==void 0?i:this._domain,o=this._domain,a=r[0],s=r[r.length-1];let l=DUt(o[0],o[o.length-1],t,e);if(!l.length)return l;if(this._domainValidator)l=l.filter(this._domainValidator);else if((l[0]!==a||l[l.length-1]!==s)&&this._niceType){const h=r.slice();if(this._niceType==="all"?(h[0]=l[0],h[h.length-1]=l[l.length-1],this._niceDomain=h,this.rescale()):this._niceType==="min"&&l[0]!==a?(h[0]=l[0],this._niceDomain=h,this.rescale()):this._niceType==="max"&&l[l.length-1]!==s&&(h[h.length-1]=l[l.length-1],this._niceDomain=h,this.rescale()),this._niceType!=="all"){const u=Math.min(h[0],h[h.length-1]),d=Math.max(h[0],h[h.length-1]);l=l.filter((c=>c>=u&&c<=d))}}return l}forceTicks(t=10){const e=this.calculateVisibleDomain(this._range);return IUt(e[0],e[e.length-1],t)}stepTicks(t){const e=this.calculateVisibleDomain(this._range);return HUt(e[0],e[e.length-1],t)}nice(t=10,e){var i,r;const o=this._domain;let a=[];if(e){const s=zUt(o,e);if(a=s.niceMinMax,this._domainValidator=s.domainValidator,this._niceType=s.niceType,s.niceDomain)return this._niceDomain=s.niceDomain,this.rescale(),this}else this._niceType="all";if(this._niceType){const s=mk(o.slice(),t);this._niceType==="min"?s[s.length-1]=(i=a[1])!==null&&i!==void 0?i:s[s.length-1]:this._niceType==="max"&&(s[0]=(r=a[0])!==null&&r!==void 0?r:s[0]),this._niceDomain=s,this.rescale()}return this}niceMin(t=10){this._niceType="min";const e=this._domain[this._domain.length-1],i=mk(this.domain(),t);return i&&(i[i.length-1]=e,this._niceDomain=i,this.rescale()),this}niceMax(t=10){this._niceType="max";const e=this._domain[0],i=mk(this._domain.slice(),t);return i&&(i[0]=e,this._niceDomain=i,this.rescale()),this}};function yk(n,t,e,i){let r;const{breakData:o}=n;if(o&&o()){const{breakDomains:a}=o(),s=t.domain();r=[];for(let l=0;l<s.length-1;l++)i(e,[s[l],s[l+1]]).forEach((h=>{a.some((u=>h>=u[0]&&h<=u[1]))||r.push(h)}));t.domain(s)}else r=i(e);return r}function SU(n,t,e,i,r=!1){if(e&&!t.includes(n)){let o=t.length;if(o>1){r?t.push(n):t.unshift(n);for(let a=0;a<o;a++){const s=r?o-1-a:a;if(!i(t[s]))break;t.splice(s,1),a--,o--}}}}const NUt=(n,t)=>{var e,i,r,o;if(!Gst(n.type))return Rh(n.domain());const a=n.range(),s=Math.abs(a[a.length-1]-a[0]);if(s<2)return Rh([n.domain()[0]]);const{tickCount:l,forceTickCount:h,tickStep:u,noDecimals:d=!1,labelStyle:c,breakData:f}=t;let g;if(Lt(u))p=n.stepTicks(u),v=f&&f()?f().breakDomains:null,g=v&&v.length?p.filter((y=>v.every((b=>y<b[0]||y>b[1])))):p;else if(Lt(h))g=yk(t,n,h,((y,b)=>b&&b.length?n.domain(b,!0).forceTicks(y):n.forceTicks(y)));else if(t.tickMode==="d3"){const y=(e=Zi(l)?l({axisLength:s,labelStyle:c}):l)!==null&&e!==void 0?e:5;g=yk(t,n,y,((b,_)=>_&&_.length?n.domain(_,!0).d3Ticks(b,{noDecimals:d}):n.d3Ticks(b,{noDecimals:d})))}else{const y=(i=Zi(l)?l({axisLength:s,labelStyle:c}):l)!==null&&i!==void 0?i:5,b=Zi(t.tickMode)?t.tickMode:void 0;g=yk(t,n,y,((_,w)=>w&&w.length?n.domain(w,!0).ticks(_,{noDecimals:d,customTicks:b}):n.ticks(_,{noDecimals:d,customTicks:b})))}var p,v;const m=n.domain();if(t.labelFirstVisible&&m[0]!==g[0]&&!g.includes(m[0])&&g.unshift(m[0]),t.labelLastVisible&&m[m.length-1]!==g[g.length-1]&&!g.includes(m[m.length-1])&&g.push(m[m.length-1]),t.sampling&&g.length>1&&(t.coordinateType==="cartesian"||t.coordinateType==="polar"&&t.axisOrientType==="radius")){const{labelGap:y=4,labelFlush:b}=t,_=6;let w;if(g.length*_>s){const C=[],x=Math.floor(g.length*_/s);g.forEach(((S,A)=>{A%x!=0&&A!==g.length-1||C.push(S)})),w=(r=OO(n,C,t))===null||r===void 0?void 0:r.map(((S,A)=>({AABBBounds:S,value:C[A]})))}else w=(o=OO(n,g,t))===null||o===void 0?void 0:o.map(((C,x)=>({AABBBounds:C,value:g[x]})));if(w){const C=w[0],x=hp(w),S=f&&f()?AU.greedy:AU.parity;for(;w.length>=3&&DO(w,y);)w=S(w,y);const A=t.labelFirstVisible;let T=t.labelLastVisible;ms(C,x,y)&&w.includes(x)&&w.length>1&&A&&T&&(w.splice(w.indexOf(x),1),T=!1),SU(C,w,A,(R=>ms(R,C,y))),SU(x,w,T,(R=>ms(R,x,y)||!(!A||R===C)&&ms(R,C,y)),!0);const M=w.map((R=>R.value));M.length<3&&b&&(M.length>1&&M.pop(),hp(M)!==hp(g)&&M.push(hp(g))),g=M}}return Rh(g)},AU={parity:function(n){return n.filter(((t,e)=>e%2==0))},greedy:function(n,t){let e;return n.filter(((i,r)=>(!r||!ms(e,i,t))&&(e=i,!0)))}},TU=(n,t,e,i)=>{const r=OO(n,t,e);return r&&r.map((o=>i?[o.x1,o.x2,o.width()]:[o.y1,o.y2,o.height()]))},MU=(n,t,e=0)=>Math.max(n[0],t[0])-e/2<=Math.min(n[1],t[1])+e/2,RU=(n,t)=>n[1]<t[0]?t[0]-n[1]:t[1]<n[0]?n[0]-t[1]:0,WUt=(n,t)=>{var e;const i=n.domain();if(!i.length)return[];const{tickCount:r,forceTickCount:o,tickStep:a,labelGap:s=4,axisOrientType:l,labelStyle:h}=t,u=wUt(l),d=n.range(),c=n.calculateWholeRangeSize();if(c<2)return t.labelLastVisible?Rh([i[i.length-1]]):Rh([i[0]]);let f;if(Lt(a))f=n.stepTicks(a);else if(Lt(o))f=n.forceTicks(o);else if(Lt(r)){const g=Zi(r)?r({axisLength:c,labelStyle:h}):r;f=n.ticks(g)}else if(t.sampling){const g=((e=t.labelStyle.fontSize)!==null&&e!==void 0?e:12)+2,p=k3(d),v=jat(d);if(i.length<=c/g){const m=TU(n,i,t,u);if(m){const y=Math.min(...m.map((w=>w[2]))),b=(v-p)/i.length,_=VUt(i,m,s,t.labelLastVisible,Math.floor(y/b));f=n.stepTicks(_.step),t.labelLastVisible&&(_.delCount&&(f=f.slice(0,f.length-_.delCount)),f.push(i[i.length-1]))}}else{const m=[i[0],i[Math.floor(i.length/2)],i[i.length-1]],y=TU(n,m,t,u);if(y){let b=null;y.forEach((w=>{b?b[2]<w[2]&&(b=w):b=w}));const _=v-p-s>0?Math.ceil(i.length*(s+b[2])/(v-p-s)):i.length-1;f=n.stepTicks(_),!t.labelLastVisible||f.length&&f[f.length-1]===i[i.length-1]||(f.length&&Math.abs(n.scale(f[f.length-1])-n.scale(i[i.length-1]))<b[2]&&(f=f.slice(0,-1)),f.push(i[i.length-1]))}}}return fe(f)&&(f=n.domain()),Rh(f)},VUt=(n,t,e,i,r,o)=>{let a=0,s=0,l=-1,h=Number.MAX_VALUE;const u=f=>{let g=!0,p=0;do p+f<n.length&&MU(t[p],t[p+f],e)&&(g=!1),p+=f;while(g&&p<n.length);return g},d=e8t(r,n.length,(f=>u(f)?1:-1));let c=d;do if(c>d&&!u(c))c++;else{if(!i){s=c;break}{const f=n.length-1;let g,p=0;g=n.length%c>0?n.length-n.length%c+c:n.length;do{if(g-=c,g!==f&&!MU(t[g],t[f],e))break;p++}while(g>0);if(g===f){s=c,a=p;break}{const v=Math.floor(n.length/c)-p+1;if(v<l)break;{l=v;const m=RU(t[g],t[f]),y=g-c>=0?RU(t[g-c],t[g]):m,b=Math.abs(m-y);if(b<h&&(h=b,s=c,a=p),m<=y)break}}}c++}while(c<=n.length);return{step:s,delCount:a}},GUt=(n,t,e)=>{var i;const{labelStyle:r,getRadius:o,labelOffset:a,labelFormatter:s,inside:l}=e,h=o?.(),u=(i=r.angle)!==null&&i!==void 0?i:0,d=fst(r);return t.map((c=>{const f=s?s(c):`${c}`,{width:g,height:p}=d.quickMeasure(f),v=Math.max(g,CU),m=Math.max(p,CU),y=n.scale(c),b={x:0,y:0};let _=0,w=0;const C={align:r.textAlign,baseline:r.textBaseline},{x,y:S}=a$t(y,b,h,a,l);return C.align||(Kc(x,b.x)?C.baseline||(C.baseline=S>b.y?"top":"bottom"):x>b.x?C.align="left":x<b.x&&(C.align="right")),_=x+(C.align==="right"?-v:C.align==="left"?0:-v/2),w=S+(C.baseline==="bottom"?-m:C.baseline==="top"?0:-m/2),new Hb().set(_,w,_+v,w+m).rotate(u,_+v/2,w+m/2)}))},$Ut=(n,t)=>{const{tickCount:e,forceTickCount:i,tickStep:r,getRadius:o,labelOffset:a,labelGap:s=0,labelStyle:l}=t,h=o?.();if(!h)return Rh(n.domain());let u;if(Lt(r))u=n.stepTicks(r);else if(Lt(i))u=n.forceTicks(i);else if(Lt(e)){const d=n.range(),c=Math.abs(d[d.length-1]-d[0]),f=Zi(e)?e({axisLength:c,labelStyle:l}):e;u=n.ticks(f)}else if(t.sampling){const d=n.domain(),c=n.range(),f=GUt(n,d,t),g=k3(c),p=jat(c),v=Math.abs(p-g)*(h+a)/d.length,{step:m,delCount:y}=jUt(d,f,s,Math.floor(f.reduce(((b,_)=>Math.min(b,_.width(),_.height())),Number.MAX_VALUE)/v));u=n.stepTicks(m),u=u.slice(0,u.length-y)}else u=n.domain();return Rh(u)},jUt=(n,t,e,i)=>{let r=i;do{let a=!0;r++;let s=0;do s+r<n.length&&_U(t[s],t[s+r],e)&&(a=!1),s+=r;while(a&&s<n.length);if(a)break}while(r<=n.length);let o=0;if(n.length>2){let a=n.length-n.length%r;for(a>=n.length&&(a-=r);a>0&&_U(t[0],t[a]);)o++,a-=r}return{step:r,delCount:o}},UUt=(n,t)=>{if(Gst(n.type))return NUt(n,t);if(xUt(n.type)){if(t.coordinateType==="cartesian")return WUt(n,t);if(t.coordinateType==="polar"&&t.axisOrientType==="angle")return $Ut(n,t)}return Rh(n.domain())};function Ust(){Lo(),rm(),zl()}const Yst={space:8,style:{fill:"rgb(47, 69, 84)",cursor:"pointer",size:15},state:{disable:{fill:"rgb(170, 170, 170)",cursor:"not-allowed"},hover:{}}};Ust();class Nb extends na{getCurrent(){return this._current}constructor(t,e){super(e?.skipDefault?t:Qt({},Nb.defaultAttributes,t)),this.name="pager",this._current=1,this._onHover=i=>{const r=i.target;r.hasState("disable")||r.addState("hover")},this._onUnHover=i=>{i.target.removeState("hover")},this._onClick=i=>{const r=i.target;if(r.name==="preHandler"){if(this._current===1)return;this._current-=1,this._current===1?r.addState("disable"):r.removeState("disable"),this._dispatchEvent("toPrev",{current:this._current,total:this._total,direction:"pre",event:i})}if(r.name==="nextHandler"){if(this._current===this._total)return;this._current+=1,this._current===this._total?r.addState("disable"):r.removeState("disable"),this._dispatchEvent("toNext",{current:this._current,total:this._total,direction:"next",event:i})}this._current>1&&this.preHandler.removeState("disable"),this._current<this._total&&this.nextHandler.removeState("disable"),this.text.setAttribute("text",this._getPageText(this._current))}}render(){var t,e,i;this._reset();const{layout:r="horizontal",handler:o=Yst,total:a,defaultCurrent:s=1,textStyle:l,padding:h=0}=this.attribute;this._current=s;const u=Pl(h),d=r==="horizontal",c=Nt.group({x:0,y:0}),f=o.style||{},g=f.size||15,p=(t=o.space)!==null&&t!==void 0?t:8,v=o.state||{};let{preShape:m,nextShape:y}=o;m||(m=d?"triangleLeft":"triangleUp"),y||(y=d?"triangleRight":"triangleDown");const b=Nt.symbol(Object.assign(Object.assign({strokeBoundsBuffer:0,pickMode:"imprecise"},f),{x:0,y:0,symbolType:m,size:g}));b.states=v,b.name="preHandler",this.preHandler=b,c.add(b);const{width:_,height:w}=r2(this._getPageText(a),Object.assign({textAlign:"center",textBaseline:"middle"},l),(i=(e=this.stage)===null||e===void 0?void 0:e.getTheme())===null||i===void 0?void 0:i.text),C=pr(g)?g:g[0],x=pr(g)?g:g[1],S=Nt.text(Object.assign({x:d?C/2+p+_/2:0,y:d?0:x/2+p+w/2,text:this._getPageText(s),textAlign:"center",textBaseline:"middle",lineHeight:l?.fontSize},l));this.text=S,c.add(S);const A=Nt.symbol(Object.assign(Object.assign({strokeBoundsBuffer:0,pickMode:"imprecise"},f),{x:d?C+2*p+_:0,y:d?0:x+2*p+w,symbolType:y,size:g}));A.name="nextHandler",A.states=v,this.nextHandler=A,c.add(A),this._total===1?(b.addState("disable"),A.addState("disable")):this._current===1?b.addState("disable"):this._current===a&&A.addState("disable");const T=c.AABBBounds,M=T.width(),R=T.height();c.translateTo(0-T.x1+u[3],0-T.y1+u[0]),this.add(c),this.attribute.width=M+u[1]+u[3],this.attribute.height=R+u[0]+u[2],this._bindEvents()}_bindEvents(){this.attribute.disableTriggerEvent||(this.preHandler&&(this.preHandler.addEventListener("pointerenter",this._onHover),this.preHandler.addEventListener("pointerleave",this._onUnHover),this.preHandler.addEventListener("pointerdown",this._onClick)),this.nextHandler&&(this.nextHandler.addEventListener("pointerenter",this._onHover),this.nextHandler.addEventListener("pointerleave",this._onUnHover),this.nextHandler.addEventListener("pointerdown",this._onClick)))}_reset(){this.removeAllChild(!0),this._current=1,this._total=this.attribute.total,this.preHandler=this.nextHandler=this.text=null}_getPageText(t){const{pageFormatter:e}=this.attribute;return e?Zi(e)?e(t,this._total):`${e}`.replace("{current}",`${t}`).replace("{total}",`${this._total}`):`${t}/${this._total}`}setTotal(t){t!==this.attribute.total&&(this._total=t,this._current!==1&&this._current<=t?this.setAttributes({total:t,defaultCurrent:this._current}):this.setAttribute("total",t))}}Nb.defaultAttributes={handler:Yst,textStyle:{fill:"rgb(51, 51, 51)",fontSize:12}};const TA=10,Xst=8,qst=8,YUt=8,Fw=16,Nw=8,F_=12,zO=12;var Gt;(function(n){n.selected="selected",n.unSelected="unSelected",n.selectedHover="selectedHover",n.unSelectedHover="unSelectedHover",n.focus="focus"})(Gt||(Gt={}));var Ta;(function(n){n.legendItemHover="legendItemHover",n.legendItemUnHover="legendItemUnHover",n.legendItemClick="legendItemClick",n.legendItemAttributeUpdate="legendItemAttributeUpdate"})(Ta||(Ta={}));var fr;(function(n){n.innerView="innerView",n.title="legendTitle",n.item="legendItem",n.itemShape="legendItemShape",n.itemLabel="legendItemLabel",n.itemValue="legendItemValue",n.focus="legendItemFocus"})(fr||(fr={}));class U3 extends na{constructor(){super(...arguments),this.name="legend",this._title=null}render(){this.removeAllChild(!0);const{interactive:t=!0,title:e,padding:i=0}=this.attribute;this._parsedPadding=Pl(i);const r=Nt.group({x:this._parsedPadding[3],y:this._parsedPadding[0],pickable:t,childrenPickable:t});r.name=fr.innerView,this.add(r),this._innerView=r,e?.visible&&this._renderTitle(e),this._renderContent(),this._adjustLayout(),t&&this._bindEvents();const o=this._innerView.AABBBounds;this.attribute.width=o.width()+this._parsedPadding[1]+this._parsedPadding[3],this.attribute.height=o.height()+this._parsedPadding[0]+this._parsedPadding[2]}_renderTitle(t){const{text:e="",textStyle:i,padding:r=0,background:o,minWidth:a,maxWidth:s,shape:l}=t,h={x:0,y:0,text:e,textStyle:i,padding:Pl(r),minWidth:a,maxWidth:s};l&&l.visible&&(h.shape=Object.assign({visible:!0},l.style),Lt(l.space)&&(h.space=l.space)),o&&o.visible&&(h.panel=Object.assign({visible:!0},o.style));const u=new om(h);u.name=fr.title,this._title=u,this._innerView.add(u)}_adjustLayout(){var t;if(this._title){const e=this._innerView.AABBBounds.width(),i=this._title.AABBBounds.width(),r=(t=this.attribute.title)===null||t===void 0?void 0:t.align;r==="center"?this._title.setAttribute("x",(e-i)/2):r==="end"&&this._title.setAttribute("x",e-i)}}}function Y3(){Lo(),zl(),Zh(),rm()}function X3(){Lo(),vst()}function XUt(){X3(),Ust(),hst()}function qUt(){X3(),Y3()}function KUt(){X3(),Y3(),B7t()}var PU=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]])}return e};const ZUt={[Gt.focus]:{},[Gt.selected]:{},[Gt.selectedHover]:{},[Gt.unSelected]:{},[Gt.unSelectedHover]:{}};XUt();class s2 extends U3{constructor(t,e){super(e?.skipDefault?t:Qt({},s2.defaultAttributes,t)),this.name="discreteLegend",this._itemsContainer=null,this._itemHeightByUser=void 0,this._itemHeight=0,this._itemMaxWidth=0,this._contentMaxHeight=0,this._onHover=i=>{const r=i.target;if(r&&r.name&&r.name.startsWith(fr.item)){const o=r.delegate;if(this._lastActiveItem){if(this._lastActiveItem.id===o.id)return;this._unHover(this._lastActiveItem,i)}this._hover(o,i)}else this._lastActiveItem&&(this._unHover(this._lastActiveItem,i),this._lastActiveItem=null)},this._onUnHover=i=>{this._lastActiveItem&&(this._unHover(this._lastActiveItem,i),this._lastActiveItem=null)},this._onClick=i=>{var r,o,a,s;const l=i.target;if(l&&l.name&&l.name.startsWith(fr.item)){const h=l.delegate,{selectMode:u="multiple"}=this.attribute;if(l.name===fr.focus||u==="focus"){const d=h.hasState(Gt.focus);h.toggleState(Gt.focus),d?(r=this._itemsContainer)===null||r===void 0||r.getChildren().forEach((c=>{this._removeLegendItemState(c,[Gt.unSelected,Gt.unSelectedHover,Gt.focus],i),this._setLegendItemState(c,Gt.selected,i)})):(this._setLegendItemState(h,Gt.selected,i),this._removeLegendItemState(h,[Gt.unSelected,Gt.unSelectedHover],i),(o=this._itemsContainer)===null||o===void 0||o.getChildren().forEach((c=>{h!==c&&(this._removeLegendItemState(c,[Gt.selected,Gt.selectedHover,Gt.focus],i),this._setLegendItemState(c,Gt.unSelected,i))})))}else{(a=this._itemsContainer)===null||a===void 0||a.getChildren().forEach((g=>{g.removeState(Gt.focus)}));const{allowAllCanceled:d=!0}=this.attribute,c=h.hasState(Gt.selected),f=this._getSelectedLegends();if(u==="multiple"){if(d===!1&&c&&f.length===1)return void this._dispatchLegendEvent(Ta.legendItemClick,h,i);c?(this._removeLegendItemState(h,[Gt.selected,Gt.selectedHover],i),this._setLegendItemState(h,Gt.unSelected,i)):(this._setLegendItemState(h,Gt.selected,i),this._removeLegendItemState(h,[Gt.unSelected,Gt.unSelectedHover],i))}else this._setLegendItemState(h,Gt.selected,i),this._removeLegendItemState(h,[Gt.unSelected,Gt.unSelectedHover],i),(s=this._itemsContainer)===null||s===void 0||s.getChildren().forEach((g=>{h!==g&&(this._removeLegendItemState(g,[Gt.selected,Gt.selectedHover],i),this._setLegendItemState(g,Gt.unSelected,i))}))}this._dispatchLegendEvent(Ta.legendItemClick,h,i)}}}render(){super.render(),this._lastActiveItem=null}setSelected(t){var e;((e=this._itemsContainer)===null||e===void 0?void 0:e.getChildren()).forEach((i=>{const r=i.data;t.includes(r.label)?(this._setLegendItemState(i,Gt.selected),this._removeLegendItemState(i,[Gt.unSelected,Gt.unSelectedHover])):(this._removeLegendItemState(i,[Gt.selected,Gt.selectedHover]),this._setLegendItemState(i,Gt.unSelected))}))}_renderItems(){const{item:t={},maxCol:e=1,maxRow:i=2,maxWidth:r,defaultSelected:o,lazyload:a,autoPage:s}=this.attribute,{spaceCol:l=Fw,spaceRow:h=Nw,verticalAlign:u="middle"}=t,d=this._itemsContainer,{items:c,isHorizontal:f,startIndex:g,isScrollbar:p}=this._itemContext,v=p?1:f?i:e,m=this._contentMaxHeight;let y,{doWrap:b,maxWidthInCol:_,startX:w,startY:C,pages:x}=this._itemContext,S=0,A=0;const T=[];for(let M=g,R=c.length;M<R&&!(a&&x>this._itemContext.currentPage*v);M++){a&&(this._itemContext.startIndex=M+1),y=c[M],y.id||(y.id=y.label),y.index=M;let L=!0;ni(o)&&(L=o.includes(y.label));const B=this._renderEachItem(y,L,M,c),P=B.attribute.width,k=B.attribute.height;this._itemHeight=Math.max(this._itemHeight,k),_=Math.max(P,_),this._itemMaxWidth=Math.max(P,this._itemMaxWidth),f?(Lt(r)&&(p&&s?(x=Math.ceil((w+P)/r),b=x>1):w+P>r&&(b=!0,w>0&&(u!=="middle"&&u!=="bottom"||T.forEach((E=>{E.setAttributes({y:E.attribute.y+(A-E.attribute.height)/(u==="middle"?2:1)})})),x+=1,w=0,C+=A+h,A=0,T.length=0))),w===0&&C===0||B.setAttributes({x:w,y:C}),w+=l+P,A=Math.max(A,k),T.push(B)):(Lt(m)&&(p&&s?(x=Math.ceil((C+k)/m),b=x>1):m<=k?(x+=1,b=!0,C=0,M>0&&(w+=S+l)):m<C+k&&(x+=1,b=!0,C=0,w+=_+l,_=0)),w===0&&C===0||B.setAttributes({x:w,y:C}),C+=h+k),d.add(B),S=P}return!f||u!=="middle"&&u!=="bottom"||T.forEach((M=>{M.setAttributes({y:M.attribute.y+(A-M.attribute.height)/(u==="middle"?2:1)})})),this._itemContext.doWrap=b,this._itemContext.startX=w,this._itemContext.startY=C,this._itemContext.maxWidthInCol=_,this._itemContext.pages=x,this._itemContext.maxPages=v,p&&(this._itemContext.totalPage=x),a||(this._itemContext.startIndex=c.length),this._itemContext}_renderContent(){const{item:t={},items:e,reversed:i,maxWidth:r,maxHeight:o}=this.attribute;if(t.visible===!1||fi(e))return;let a=e;i&&(a=e?.reverse()),this._contentMaxHeight=Math.max(0,o-this._parsedPadding[0]-this._parsedPadding[2]);const s=Nt.group({x:0,y:0});this._itemsContainer=s;const{layout:l,autoPage:h}=this.attribute,u=l==="horizontal",{maxWidth:d,width:c,height:f}=t,g=[];Lt(d)&&g.push(d),Lt(c)&&g.push(c),g.length&&(Lt(r)&&g.push(r),this._itemWidthByUser=k3(g)),Lt(f)&&(this._itemHeightByUser=f);const p=this.attribute.pager;this._itemContext={currentPage:p&&p.defaultCurrent||1,doWrap:!1,maxWidthInCol:0,maxPages:1,pages:1,startX:0,startY:0,startIndex:0,items:a,isHorizontal:u,totalPage:1/0,isScrollbar:p&&p.type==="scrollbar",clipContainer:void 0},this._itemContext=this._renderItems();let v=!1;this._itemContext.doWrap&&h&&this._itemContext.pages>this._itemContext.maxPages&&(v=this._renderPagerComponent()),v||(s.setAttribute("y",this._title?this._title.AABBBounds.height()+Jr(this.attribute,"title.space",8):0),this._innerView.add(s))}_bindEvents(){if(this.attribute.disableTriggerEvent||!this._itemsContainer)return;const{hover:t=!0,select:e=!0}=this.attribute;if(t){let i="pointermove",r="pointerleave";Bs(t)&&(t.trigger&&(i=t.trigger),t.triggerOff&&(r=t.triggerOff)),this._itemsContainer.addEventListener(i,this._onHover),this._itemsContainer.addEventListener(r,this._onUnHover)}if(e){let i="pointerdown";Bs(e)&&e.trigger&&(i=e.trigger),this._itemsContainer.addEventListener(i,this._onClick)}}_autoEllipsis(t,e,i,r){var o,a;const{label:s,value:l}=this.attribute.item,h=r.AABBBounds,u=i.AABBBounds,d=h.width(),c=u.width();let f=!1;t==="labelFirst"?c>e?f=!0:r.setAttribute("maxLineWidth",e-c):t==="valueFirst"?d>e?f=!0:i.setAttribute("maxLineWidth",e-d):d+c>e&&(f=!0),f&&(r.setAttribute("maxLineWidth",Math.max(e*((o=s.widthRatio)!==null&&o!==void 0?o:.5),e-c)),i.setAttribute("maxLineWidth",Math.max(e*((a=l.widthRatio)!==null&&a!==void 0?a:.5),e-d)))}_renderEachItem(t,e,i,r){var o,a;const{id:s,label:l,value:h,shape:u}=t,{padding:d=0,focus:c,focusIconStyle:f,align:g,autoEllipsisStrategy:p}=this.attribute.item,{shape:v,label:m,value:y,background:b}=this.attribute.item,_=this._handleStyle(v,t,e,i,r),w=this._handleStyle(m,t,e,i,r),C=this._handleStyle(y,t,e,i,r),x=this._handleStyle(b,t,e,i,r),S=Pl(d);let A;b.visible===!1?(A=Nt.group({x:0,y:0,cursor:(o=x.style)===null||o===void 0?void 0:o.cursor}),this._appendDataToShape(A,fr.item,t,A)):(A=Nt.group(Object.assign({x:0,y:0},x.style)),this._appendDataToShape(A,fr.item,t,A,x.state)),A.id=`${s??l}-${i}`,A.addState(e?Gt.selected:Gt.unSelected);const T=Nt.group({x:0,y:0,pickable:!1});A.add(T);let M,R=0,L=0,B=0;if(v&&v.visible!==!1){const V=Jr(_,"style.size",TA);L=ni(V)?V[0]||0:V,B=Jr(v,"space",Xst);const X=Nt.symbol(Object.assign(Object.assign({x:0,y:0,symbolType:"circle",strokeBoundsBuffer:0},u),_.style));Object.keys(_.state||{}).forEach((Z=>{const tt=_.state[Z].fill||_.state[Z].stroke;u.fill&&fe(_.state[Z].fill)&&tt&&(_.state[Z].fill=tt),u.stroke&&fe(_.state[Z].stroke)&&tt&&(_.state[Z].stroke=tt)})),this._appendDataToShape(X,fr.itemShape,t,A,_.state),X.addState(e?Gt.selected:Gt.unSelected),T.add(X)}let P=0;if(c){const V=Jr(f,"size",TA);M=Nt.symbol(Object.assign(Object.assign({x:0,y:-V/2-1,strokeBoundsBuffer:0,boundsPadding:S},f),{visible:!0,pickMode:"imprecise"})),this._appendDataToShape(M,fr.focus,t,A),P=V}const k=m.formatMethod?m.formatMethod(l,t,i):l,E=Object.assign(Object.assign({x:L/2+B,y:0,textAlign:"start",textBaseline:"middle",lineHeight:(a=w.style)===null||a===void 0?void 0:a.fontSize},w.style),{text:k,_originText:m.formatMethod?l:void 0}),D=kO(E);this._appendDataToShape(D,fr.itemLabel,t,A,w.state),D.addState(e?Gt.selected:Gt.unSelected),T.add(D);const I=Jr(m,"space",qst);if(Lt(h)){const V=Jr(y,"space",c?YUt:0),X=y.formatMethod?y.formatMethod(h,t,i):h,Z=Object.assign(Object.assign({x:0,y:0,textAlign:"start",textBaseline:"middle",lineHeight:C.style.fontSize},C.style),{text:X,_originText:y.formatMethod?h:void 0}),tt=kO(Z);if(this._appendDataToShape(tt,fr.itemValue,t,A,C.state),tt.addState(e?Gt.selected:Gt.unSelected),this._itemWidthByUser){const K=this._itemWidthByUser-S[1]-S[3]-L-B-I-P-V;this._autoEllipsis(p,K,D,tt),y.alignRight?tt.setAttributes({textAlign:"right",x:this._itemWidthByUser-L/2-S[1]-S[3]-P-V}):tt.setAttribute("x",I+(D.AABBBounds.empty()?0:D.AABBBounds.x2))}else tt.setAttribute("x",I+(D.AABBBounds.empty()?0:D.AABBBounds.x2));R=V+(tt.AABBBounds.empty()?0:tt.AABBBounds.x2),T.add(tt)}else this._itemWidthByUser&&D.setAttribute("maxLineWidth",this._itemWidthByUser-S[1]-S[3]-L-B-P),R=I+(D.AABBBounds.empty()?0:D.AABBBounds.x2);M&&(M.setAttribute("x",R),T.add(M));const O=T.AABBBounds,H=O.width();if(g==="right"){const V=O.x2,X=O.x1;T.forEachChildren(((Z,tt)=>{Z.type!=="symbol"&&Z.attribute.textAlign!=="right"||Z===M?Z.setAttribute("x",X+V-Z.attribute.x-Z.AABBBounds.width()):Z.type!=="symbol"?Z.setAttributes({x:X+V-Z.attribute.x,textAlign:"left"}):Z.setAttribute("x",X+V-Z.attribute.x)}))}const F=O.height(),N=Lt(this.attribute.item.width)?this.attribute.item.width:H+S[1]+S[3],$=this._itemHeightByUser||F+S[0]+S[2];return A.attribute.width=N,A.attribute.height=$,M&&M.setAttribute("visible",!1),T.translateTo(-O.x1+S[3],-O.y1+S[0]),A}_createPager(t){var e,i;const{disableTriggerEvent:r,maxRow:o}=this.attribute,a=s=>s<=99?99:s<=999?999:9999;return this._itemContext.isHorizontal?new Nb(Object.assign(Object.assign({layout:o===1?"horizontal":"vertical",total:a(this._itemContext.pages)},Qt({handler:{preShape:"triangleUp",nextShape:"triangleDown"}},t)),{defaultCurrent:(e=this.attribute.pager)===null||e===void 0?void 0:e.defaultCurrent,disableTriggerEvent:r})):new Nb(Object.assign({layout:"horizontal",total:a(this._itemContext.pages),disableTriggerEvent:r,defaultCurrent:(i=this.attribute.pager)===null||i===void 0?void 0:i.defaultCurrent},t))}_createScrollbar(t,e){const{disableTriggerEvent:i}=this.attribute;return this._itemContext.isHorizontal?new Gh(Object.assign(Object.assign({direction:"horizontal",disableTriggerEvent:i,range:[0,.5],height:t.visible===!1?0:12},t),{width:e})):new Gh(Object.assign(Object.assign({direction:"vertical",width:t.visible===!1?0:12,range:[0,.5]},t),{height:e,disableTriggerEvent:i}))}_updatePositionOfPager(t,e,i){const{pager:r}=this.attribute,{totalPage:o,isHorizontal:a}=this._itemContext,s=r&&r.position||"middle";if(this._pagerComponent.setTotal(o),a){let l;l=s==="start"?t:s==="end"?t+i-this._pagerComponent.AABBBounds.height()/2:t+i/2-this._pagerComponent.AABBBounds.height()/2,this._pagerComponent.setAttributes({x:e-this._pagerComponent.AABBBounds.width(),y:l})}else{let l;l=s==="start"?0:s==="end"?e-this._pagerComponent.AABBBounds.width():(e-this._pagerComponent.AABBBounds.width())/2,this._pagerComponent.setAttributes({x:l,y:i-this._pagerComponent.AABBBounds.height()})}}_computeScrollbarDelta(){const{isHorizontal:t,clipContainer:e}=this._itemContext,i=this._itemsContainer.AABBBounds,r=e.AABBBounds;let o,a;return t?(a=r.width(),o=a/i.width()):(a=r.height(),o=a/i.height()),o}_updatePositionOfScrollbar(t,e,i){const{isHorizontal:r,currentPage:o,totalPage:a}=this._itemContext,s=(o-1)/a;this._pagerComponent.setScrollRange([s,s+this._computeScrollbarDelta()]),r?this._pagerComponent.setAttributes({x:0,y:i+e}):this._pagerComponent.setAttributes({x:t,y:i})}_bindEventsOfPager(t,e){const i=this.attribute.pager||{},{animation:r=!0,animationDuration:o=450,animationEasing:a="quadIn"}=i,s=this._itemContext.isScrollbar?u=>{const{value:d}=u.detail;let c;return c=d[0]===0?1:d[1]===1?this._itemContext.totalPage:d[0]*this._itemContext.totalPage+1,c}:u=>u.detail.current,l=u=>{const d=this._pagerComponent,c=d.getScrollRange(),{direction:f}=d.attribute,{width:g,height:p}=d.getSliderRenderBounds(),v=f==="vertical"?u.deltaY/p:u.deltaX/g;d.setScrollRange([c[0]+v,c[1]+v],!0),this.updateScrollMask()},h=u=>{const d=s(u);if(d!==this._itemContext.currentPage){if(this._itemContext.currentPage=d,this._itemContext&&this._itemContext.startIndex<this._itemContext.items.length){this._renderItems();const c=Math.ceil(this._itemContext.pages/this._itemContext.maxPages);if(this._itemContext.totalPage=c,this._itemContext.isScrollbar&&this._pagerComponent){const f=this._computeScrollbarDelta(),[g]=this._pagerComponent.getScrollRange();this._pagerComponent.setScrollRange([g,g+f])}}if(this._itemContext.isScrollbar){const[c]=this._pagerComponent.getScrollRange();let f;f=this._itemContext.isHorizontal?this._itemsContainer.AABBBounds.width():this._itemsContainer.AABBBounds.height();const g=f*c;this.updateScrollMask(),r?this._itemsContainer.animate().to({[e]:-g},o,a):this._itemsContainer.setAttribute(e,-g)}else r?this._itemsContainer.animate().to({[e]:-(d-1)*t},o,a):this._itemsContainer.setAttribute(e,-(d-1)*t)}};this._itemContext.isScrollbar?(this._pagerComponent.addEventListener("scrollDrag",h),this._pagerComponent.addEventListener("scrollUp",h),this.attribute.pager.roamScroll&&(this.addEventListener("wheel",(d=>d.nativeEvent.preventDefault())),this.addEventListener("wheel",Xat(l,50)))):(this._pagerComponent.addEventListener("toPrev",h),this._pagerComponent.addEventListener("toNext",h))}_renderPager(){const t=this._title?this._title.AABBBounds.height()+Jr(this.attribute,"title.space",8):0,{maxWidth:e,maxCol:i=1,maxRow:r=2,item:o={},pager:a={}}=this.attribute,{spaceCol:s=Fw,spaceRow:l=Nw}=o,h=this._itemsContainer,{space:u=zO,defaultCurrent:d=1}=a,c=PU(a,["space","defaultCurrent"]),{isHorizontal:f}=this._itemContext,g=this._contentMaxHeight;let p,v=0,m=0,y=0,b=0,_=0,w=0,C=1;if(f){if(m=(r-1)*l+this._itemHeight*r,v=e,p=this._createPager(c),this._pagerComponent=p,this._innerView.add(p),y=e-p.AABBBounds.width()-u,y<=0)return this._innerView.removeChild(p),!1;h.getChildren().forEach(((A,T)=>{const{width:M,height:R}=A.attribute;y<_+M&&(_=0,w+=R+l,C+=1),T>0&&A.setAttributes({x:_,y:w}),_+=s+M})),this._itemContext.startX=_,this._itemContext.startY=w,this._itemContext.pages=C;const S=Math.ceil(C/r);this._itemContext.totalPage=S,this._updatePositionOfPager(t,v,m)}else{if(v=this._itemMaxWidth*i+(i-1)*s,m=g,y=v,p=this._createPager(c),this._pagerComponent=p,this._innerView.add(p),b=g-p.AABBBounds.height()-u-t,b<=0)return this._innerView.removeChild(p),!1;h.getChildren().forEach(((A,T)=>{const{height:M}=A.attribute;b<w+M&&(w=0,_+=this._itemMaxWidth+s,C+=1),T>0&&A.setAttributes({x:_,y:w}),w+=l+M}));const S=Math.ceil(C/i);this._itemContext.totalPage=S,this._updatePositionOfPager(t,v,m)}d>1&&(f?h.setAttribute("y",-(d-1)*(m+l)):h.setAttribute("x",-(d-1)*(v+s)));const x=Nt.group({x:0,y:t,width:f?y:v,height:f?m:b,clip:!0,pickable:!1});return x.add(h),this._innerView.add(x),this._itemContext.clipContainer=x,this._bindEventsOfPager(f?m+l:v+s,f?"y":"x"),!0}_renderScrollbar(){var t;const e=this._title?this._title.AABBBounds.height()+Jr(this.attribute,"title.space",8):0,{maxWidth:i,item:r={},pager:o={}}=this.attribute,{spaceCol:a=Fw,spaceRow:s=Nw}=r,l=this._itemsContainer,{space:h=zO,defaultCurrent:u=1}=o,d=PU(o,["space","defaultCurrent"]),{isHorizontal:c}=this._itemContext,f=this._contentMaxHeight;let g,p=0,v=0,m=0,y=1;if(c)p=i,v=this._itemHeight,g=this._createScrollbar(d,p),this._pagerComponent=g,this._innerView.add(g);else{if(v=f-e,p=this._itemMaxWidth,g=this._createScrollbar(d,v),this._pagerComponent=g,this._innerView.add(g),v<=0)return this._innerView.removeChild(g),!1;const _=l.getChildren(),w=_.map((C=>C.attribute.height));if(w.length===1||w.every((C=>C===w[0]))){const C=w[0],x=v,S=Math.floor(x/(s+C));v=S*(s+C),y=Math.ceil(_.length/S)}else _.forEach(((C,x)=>{const{height:S}=C.attribute,A=y,T=m;y=Math.floor((m+S)/v)+1,m+=s+S,A!==y&&x===l.getChildren().length-1&&m-v>=1/3*S&&(v=T+S,y-=1)}));this._itemContext.totalPage=y,this._itemContext.pages=y}if(u>1)if(c){const _=this._itemsContainer.AABBBounds.width()-p;l.setAttribute("x",-Math.min((u-1)*(p+a),_))}else{const _=this._itemsContainer.AABBBounds.height()-v;l.setAttribute("y",-Math.min((u-1)*(v+s),_))}const b=Nt.group({x:0,y:e,width:p,height:v,clip:!0,pickable:!1});return b.add(l),this._innerView.add(b),this._itemContext.clipContainer=b,this._updatePositionOfScrollbar(p,v,e),!((t=o.scrollMask)===null||t===void 0)&&t.visible&&this.renderScrollMask(b),this._bindEventsOfPager(c?p:v,c?"x":"y"),!0}renderScrollMask(t){const{scrollMask:e={}}=this.attribute.pager,{visible:i=!0,gradientLength:r=16,gradientStops:o}=e;if(!i||!o)return;const a=t.AABBBounds.width(),s=t.AABBBounds.height(),l=this._itemContext.isHorizontal?a:s,h=o.map((c=>({offset:r*c.offset/l,color:c.color}))),u=o.map((c=>({offset:(l-r*c.offset)/l,color:c.color}))),d=Nt.rect({x:0,y:0,width:a,height:s});this._scrollMask=d,this._scrollMaskContext={startStops:h,endStops:u},this.updateScrollMask(),t.add(d)}updateScrollMask(){if(!this._scrollMask||!this._pagerComponent||!this._itemContext.isScrollbar)return;const[t,e]=this._pagerComponent.getScrollRange(),i=[];Kc(No(e,0,1),1)||i.push(...this._scrollMaskContext.endStops),Kc(No(t,0,1),0)||i.push(...this._scrollMaskContext.startStops),i.length&&(this._itemContext.isHorizontal?this._scrollMask.setAttributes({fill:{gradient:"linear",x0:0,y0:0,x1:1,y1:0,stops:i}}):this._scrollMask.setAttributes({fill:{gradient:"linear",x0:0,y0:0,x1:0,y1:1,stops:i}}))}_renderPagerComponent(){return this._itemContext.isScrollbar?this._renderScrollbar():this._renderPager(),!0}_hover(t,e){this._lastActiveItem=t,t.hasState(Gt.selected)?this._setLegendItemState(t,Gt.selectedHover,e):this._setLegendItemState(t,Gt.unSelectedHover,e);const i=t.getChildren()[0].find((r=>r.name===fr.focus),!1);i&&i.setAttribute("visible",!0),this._dispatchLegendEvent(Ta.legendItemHover,t,e)}_unHover(t,e){let i=!1;(t.hasState(Gt.unSelectedHover)||t.hasState(Gt.selectedHover))&&(i=!0),t.removeState(Gt.unSelectedHover),t.removeState(Gt.selectedHover),t.getChildren()[0].getChildren().forEach((o=>{i||!o.hasState(Gt.unSelectedHover)&&!o.hasState(Gt.selectedHover)||(i=!0),o.removeState(Gt.unSelectedHover),o.removeState(Gt.selectedHover)}));const r=t.getChildren()[0].find((o=>o.name===fr.focus),!1);r&&r.setAttribute("visible",!1),i&&this._dispatchLegendEvent(Ta.legendItemAttributeUpdate,t,e),this._dispatchLegendEvent(Ta.legendItemUnHover,t,e)}_setLegendItemState(t,e,i){let r=!1;t.hasState(e)||(r=!0),t.addState(e,!0),t.getChildren()[0].getChildren().forEach((o=>{o.name!==fr.focus&&(r||o.hasState(e)||(r=!0),o.addState(e,!0))})),r&&this._dispatchLegendEvent(Ta.legendItemAttributeUpdate,t,i)}_removeLegendItemState(t,e,i){let r=!1;e.forEach((o=>{!r&&t.hasState(o)&&(r=!0),t.removeState(o)})),t.getChildren()[0].getChildren().forEach((o=>{o.name!==fr.focus&&e.forEach((a=>{!r&&o.hasState(a)&&(r=!0),o.removeState(a)}))})),r&&this._dispatchLegendEvent(Ta.legendItemAttributeUpdate,t,i)}_getSelectedLegends(){var t;const e=[];return(t=this._itemsContainer)===null||t===void 0||t.getChildren().forEach((i=>{i.hasState(Gt.selected)&&e.push(i.data)})),e}_appendDataToShape(t,e,i,r,o={}){t.name=e,t.data=i,t.delegate=r,t.states=Qt({},ZUt,o)}_dispatchLegendEvent(t,e,i){const r=this._getSelectedLegends();r.sort(((a,s)=>a.index-s.index));const o=r.map((a=>a.label));this._dispatchEvent(t,{item:e,data:e.data,selected:e.hasState(Gt.selected),currentSelectedItems:r,currentSelected:o,event:i})}_handleStyle(t,e,i,r,o){const a={};return t.style&&(Zi(t.style)?a.style=t.style(e,i,r,o):a.style=t.style),t.state&&(a.state={},Object.keys(t.state).forEach((s=>{t.state[s]&&(Zi(t.state[s])?a.state[s]=t.state[s](e,i,r,o):a.state[s]=t.state[s])}))),a}release(){super.release(),this.removeAllEventListeners()}}s2.defaultAttributes={layout:"horizontal",title:{align:"start",space:F_,textStyle:{fontSize:12,fontWeight:"bold",fill:"#2C3542"}},item:{spaceCol:Fw,spaceRow:Nw,shape:{space:Xst,style:{size:TA,cursor:"pointer"},state:{selectedHover:{opacity:.85},unSelected:{opacity:.5}}},label:{space:qst,style:{fontSize:12,fill:"#2C3542",cursor:"pointer"},state:{selectedHover:{opacity:.85},unSelected:{fill:"#D8D8D8"}}},value:{alignRight:!1,style:{fontSize:12,fill:"#ccc",cursor:"pointer"},state:{selectedHover:{opacity:.85},unSelected:{fill:"#D8D8D8"}}},background:{style:{cursor:"pointer"}},focus:!1,focusIconStyle:{size:TA,symbolType:"M8 1C11.866 1 15 4.13401 15 8C15 11.866 11.866 15 8 15C4.13401 15 1 11.866 1 8C1 4.13401 4.13401 1 8 1ZM8.75044 2.55077L8.75 3.75H7.25L7.25006 2.5507C4.81247 2.88304 2.88304 4.81247 2.5507 7.25006L3.75 7.25V8.75L2.55077 8.75044C2.8833 11.1878 4.81264 13.117 7.25006 13.4493L7.25 12.25H8.75L8.75044 13.4492C11.1876 13.1167 13.1167 11.1876 13.4492 8.75044L12.25 8.75V7.25L13.4493 7.25006C13.117 4.81264 11.1878 2.8833 8.75044 2.55077ZM8 5.5C9.38071 5.5 10.5 6.61929 10.5 8C10.5 9.38071 9.38071 10.5 8 10.5C6.61929 10.5 5.5 9.38071 5.5 8C5.5 6.61929 6.61929 5.5 8 5.5ZM8 7C7.44772 7 7 7.44772 7 8C7 8.55228 7.44772 9 8 9C8.55228 9 9 8.55228 9 8C9 7.44772 8.55228 7 8 7Z",fill:"#333",cursor:"pointer"}},autoPage:!0,pager:{space:zO,handler:{style:{size:10},space:4}},hover:!0,select:!0,selectMode:"multiple",allowAllCanceled:!0};var cr;(function(n){n.innerView="innerView",n.railContainer="sliderRailContainer",n.rail="sliderRail",n.startText="sliderStartText",n.endText="sliderEndText",n.startHandler="sliderStartHandler",n.startHandlerText="startHandlerText",n.endHandler="sliderEndHandler",n.endHandlerText="sliderEndHandlerText",n.track="sliderTrack",n.trackContainer="sliderTrackContainer"})(cr||(cr={}));function bk(n){return ni(n)?n:[n,n]}function V1(n){return n?"ew-resize":"ns-resize"}Y3();class N_ extends na{get track(){return this._track}get currentValue(){return this._currentValue}get startHandler(){return this._startHandler}get endHandler(){return this._endHandler}get tooltipShape(){return this._tooltipShape}constructor(t,e){super(e?.skipDefault?t:Qt({},N_.defaultAttributes,t)),this.name="slider",this._isHorizontal=!0,this._startHandler=null,this._endHandler=null,this._startHandlerText=null,this._endHandlerText=null,this._currentHandler=null,this._currentValue={},this._onTooltipShow=i=>{this._isChanging||this._tooltipState&&this._tooltipState.isActive||(this._tooltipState?this._tooltipState.isActive=!0:this._tooltipState={isActive:!0},this._onTooltipUpdate(i),this._dispatchTooltipEvent("sliderTooltipShow"))},this._onTooltipUpdate=i=>{if(this._isChanging||!this._tooltipState||!this._tooltipState.isActive)return;const r=this._isHorizontal?this._rail.globalAABBBounds.width():this._rail.globalAABBBounds.height(),o=No(this._isHorizontal?(i.viewX-this._rail.globalAABBBounds.x1)/r:(i.viewY-this._rail.globalAABBBounds.y1)/r,0,1);o!==this._tooltipState.pos&&(this._tooltipState.pos=o,this._tooltipState.value=this.calculateValueByPos(o*r),this._updateTooltip(),this._dispatchTooltipEvent("sliderTooltipUpdate"))},this._onTooltipHide=()=>{const{tooltip:i}=this.attribute;i&&i.alwaysShow||(this._tooltipState=null,this._tooltipShape&&this._tooltipShape.setAttribute("visible",!1),this._tooltipText&&this._tooltipText.setAttribute("visible",!1),this._dispatchTooltipEvent("sliderTooltipHide"))},this._onHandlerPointerdown=i=>{this._clearAllDragEvents(),this._isChanging=!0;const{x:r,y:o}=this.stage.eventPointTransform(i);this._currentHandler=i.target,this._prePos=this._isHorizontal?r:o;const a=gy(),s=jt.env==="browser"?jt:this.stage;s.addEventListener("pointermove",this._onHandlerPointerMove,{capture:!0}),a.forEach((l=>{s.addEventListener(l,this._onHandlerPointerUp)}))},this._onHandlerPointerMove=i=>{var r,o;this._isChanging=!0;const{railWidth:a,railHeight:s,min:l,max:h}=this.attribute;if(h===l)return;const{x:u,y:d}=this.stage.eventPointTransform(i);let c,f,g,p=0;this._isHorizontal?(c=u,p=c-this._prePos,f=(o=this._currentHandler)===null||o===void 0?void 0:o.attribute.x,g=a):(c=d,p=c-this._prePos,f=(r=this._currentHandler)===null||r===void 0?void 0:r.attribute.y,g=s);const v=No(f+p,0,g),m=this.calculateValueByPos(v);this._currentHandler.type==="text"?this._updateHandlerText(this._currentHandler,v,m):this._updateHandler(this._currentHandler,v,m),this._updateTrack(),this._prePos=c,this._dispatchChangeEvent()},this._onHandlerPointerUp=i=>{this._isChanging=!1,this._currentHandler=null,this._clearAllDragEvents()},this._handleTouchMove=i=>{this._isChanging&&i.preventDefault()},this._onTrackPointerdown=i=>{this._clearAllDragEvents(),this._isChanging=!0;const{x:r,y:o}=this.stage.eventPointTransform(i);this._prePos=this._isHorizontal?r:o;const a=gy(),s=jt.env==="browser"?jt:this.stage;s.addEventListener("pointermove",this._onTrackPointerMove,{capture:!0}),a.forEach((l=>{s.addEventListener(l,this._onTrackPointerUp)}))},this._onTrackPointerMove=i=>{this._isChanging=!0;const{railWidth:r,railHeight:o,min:a,max:s,inverse:l}=this.attribute;if(s===a)return;const{startHandler:h,endHandler:u}=this._getHandlers();let d,c,f;const{x:g,y:p}=this.stage.eventPointTransform(i);this._isHorizontal?(d=g,c=this._track.attribute.width,f=r):(d=p,c=this._track.attribute.height,f=o);const v=d-this._prePos;if(h){const m=this._isHorizontal?h.attribute.x:h.attribute.y,y=l?No(m+v,c,f):No(m+v,0,f-c),b=this.calculateValueByPos(y);this._updateHandler(h,y,b)}if(u){const m=this._isHorizontal?u.attribute.x:u.attribute.y,y=l?No(m+v,0,f-c):No(m+v,c,f),b=this.calculateValueByPos(y),_=h?.attribute;this._updateHandler(u,y,b),this._track.setAttributes(this._isHorizontal?{x:Math.min(_.x,u.attribute.x),width:Math.abs(_.x-u.attribute.x)}:{y:Math.min(_.y,u.attribute.y),height:Math.abs(_.y-u.attribute.y)})}this._prePos=d,this._dispatchChangeEvent()},this._onTrackPointerUp=i=>{this._isChanging=!1,this._clearAllDragEvents()},this._onRailPointerDown=i=>{this._clearAllDragEvents(),this._isChanging=!0;const{railWidth:r,railHeight:o,min:a,max:s}=this.attribute;if(s===a)return;const l=this._startHandler,h=this._endHandler;let u,d,c;this._isHorizontal?(u=i.viewX-this._rail.globalAABBBounds.x1,d=l?.attribute.x,c=h?.attribute.x):(u=i.viewY-this._rail.globalAABBBounds.y1,d=l?.attribute.y,c=h?.attribute.y);const f=this.calculateValueByPos(u);if(Lt(c)){const g=Math.abs(u-d)>Math.abs(u-c)?h:l;this._updateHandler(g,u,f)}else this._updateHandler(l,u,f);this._updateTrack(),this._dispatchChangeEvent()}}calculatePosByValue(t,e){const{layout:i,railWidth:r,railHeight:o,min:a,max:s,inverse:l}=this.attribute;let h=0;return h=a===s?e==="start"?0:e==="end"?1:0:(t-a)/(s-a),(l?1-h:h)*(i==="vertical"?o:r)}calculateValueByPos(t){const{layout:e,railWidth:i,railHeight:r,min:o,max:a,inverse:s}=this.attribute,l=e==="vertical"?r:i;return o+(a-o)*(s?1-t/l:t/l)}setValue(t){const{min:e,max:i}=this.attribute;if(i===e)return;const[r,o]=tA(t),{startHandler:a,endHandler:s}=this._getHandlers();a&&this._updateHandler(a,this.calculatePosByValue(r),r),s&&this._updateHandler(s,this.calculatePosByValue(o),o),this._updateTrack()}render(){var t,e;this.removeAllChild(!0);const{layout:i="horizontal",railWidth:r,railHeight:o,startText:a,endText:s,min:l,max:h,showHandler:u=!0,showTooltip:d}=this.attribute;let{value:c}=this.attribute;fe(c)&&(c=[l,h]),this._currentValue={startValue:bk(c)[0],endValue:bk(c)[1]};const f=i==="horizontal";this._isHorizontal=f;const g=Nt.group({x:0,y:0});g.name=cr.innerView,this.add(g),this._innerView=g;let p,v=0;if(a&&a.visible){p=Nt.text(Object.assign({x:f?0:r/2,y:f?o/2:0,textAlign:f?"start":"center",textBaseline:f?"middle":"top",text:a.text,lineHeight:(t=a.style)===null||t===void 0?void 0:t.fontSize},a.style)),p.name=cr.startText,g.add(p);const _=Lt(a.space)?a.space:0;v+=(f?p.AABBBounds.width():p.AABBBounds.height())+_}const m=Nt.group({x:f?v:0,y:f?0:v});g.add(m);const y=Nt.group({x:0,y:0});let b;if(y.name=cr.railContainer,this._railContainer=y,m.add(y),this._mainContainer=m,this._renderRail(y),v+=f?r:o,s&&s.visible){const _=Lt(s.space)?s.space:0;b=Nt.text(Object.assign({x:f?v+_:r/2,y:f?o/2:v+_,textAlign:f?"start":"center",textBaseline:f?"middle":"top",text:s.text,lineHeight:(e=s.style)===null||e===void 0?void 0:e.fontSize},s.style)),b.name=cr.endText,g.add(b)}this._renderTrack(y),u&&(this._renderHandlers(m),this._bindEvents()),d&&(this._renderTooltip(),this._bindTooltipEvents())}_renderRail(t){const{railWidth:e,railHeight:i,railStyle:r,slidable:o}=this.attribute;let a="default";o!==!1&&(a="pointer");const s=Nt.rect(Object.assign({x:0,y:0,width:e,height:i,cursor:a},r));return s.name=cr.rail,t.add(s),this._rail=s,s}_renderHandlers(t){const{range:e,min:i,max:r,handlerSize:o=14,handlerStyle:a,handlerText:s,railHeight:l,railWidth:h,slidable:u}=this.attribute;let{value:d}=this.attribute;fe(d)&&(d=[i,r]);const c=s&&s.visible,f=this._isHorizontal,[g,p]=bk(d),v=this.calculatePosByValue(g,e?"start":"end"),m=this._renderHandler(Object.assign({x:f?v:h/2,y:f?l/2:v,size:o,strokeBoundsBuffer:0,cursor:u===!1?"default":V1(f)},a));if(m.name=cr.startHandler,this._startHandler=m,t.add(m),this._currentValue.startPos=v,c){const y=this._renderHandlerText(g,e?"start":"end");y.name=cr.startHandlerText,t.add(y),this._startHandlerText=y}if(e){const y=this.calculatePosByValue(p,"end"),b=this._renderHandler(Object.assign({x:f?y:h/2,y:f?l/2:y,size:o,strokeBoundsBuffer:0,cursor:u===!1?"default":V1(f)},a));if(b.name=cr.endHandler,this._endHandler=b,t.add(b),this._currentValue.endPos=y,c){const _=this._renderHandlerText(p,"end");_.name=cr.endHandlerText,t.add(_),this._endHandlerText=_}}}_renderTrack(t){const{range:e,min:i,max:r,railHeight:o,railWidth:a,trackStyle:s,railStyle:l,slidable:h,value:u}=this.attribute;let d,c;if(fe(u))e?(d=i,c=r):d=c=i;else if(e){const _=dc(u,i,r);d=_[0],c=_[1]}else d=i,c=No(u,i,r);const f=this._isHorizontal;e||(d=i);const g=Nt.group({x:0,y:0,width:a,height:o,cornerRadius:l?.cornerRadius,clip:!0,pickable:!1});g.name=cr.trackContainer;const p=Bs(e)&&e.draggableTrack===!0;let v;v=h===!1?"default":e===!1||p===!1?"pointer":V1(f);const m=this.calculatePosByValue(d,"start"),y=this.calculatePosByValue(c,e?"end":"start"),b=Nt.rect(Object.assign({x:f?Math.min(m,y):0,y:f?0:Math.min(m,y),width:f?Math.abs(y-m):a,height:f?o:Math.abs(y-m),cursor:v},s));b.name=cr.track,this._track=b,g.add(b),t.add(g)}_renderHandler(t){return Nt.symbol(t)}_renderHandlerText(t,e){var i,r,o;const{align:a,handlerSize:s=14,handlerText:l={},railHeight:h,railWidth:u,slidable:d}=this.attribute,c=this._isHorizontal,f=this.calculatePosByValue(t,e),g=(i=l.space)!==null&&i!==void 0?i:4,p={text:l.formatter?l.formatter(t):t.toFixed((r=l.precision)!==null&&r!==void 0?r:0),lineHeight:(o=l.style)===null||o===void 0?void 0:o.lineHeight,cursor:d===!1?"default":V1(c)};return c?a==="top"?(p.textBaseline="bottom",p.textAlign="center",p.x=f,p.y=(h-s)/2-g):(p.textBaseline="top",p.textAlign="center",p.x=f,p.y=(h+s)/2+g):a==="left"?(p.textBaseline="middle",p.textAlign="end",p.x=(u-s)/2-g,p.y=f):(p.textBaseline="middle",p.textAlign="start",p.x=(u+s)/2+g,p.y=f),Nt.text(Object.assign(Object.assign({},p),l.style))}_renderTooltip(){var t;const{tooltip:e,railHeight:i,railWidth:r,align:o}=this.attribute;e&&e.alwaysShow?this._tooltipState={value:this._currentValue.startValue,pos:this._currentValue.startPos}:this._tooltipState=null;const a=this._isHorizontal?0:r/2,s=this._isHorizontal?i/2:0;if(e&&e.shape){const c=Nt.symbol(Object.assign({pickable:!1,visible:!!this._tooltipState,x:a,y:s,symbolType:"circle"},e.shapeStyle));this._tooltipShape=c,this._mainContainer.add(c)}const l=e&&e.text||{},h=(t=l.space)!==null&&t!==void 0?t:6,u={pickable:!1,visible:!!this._tooltipState,text:""};this._isHorizontal?(u.x=a,u.y=o==="top"?s-i/2-h:s+i/2+h,u.textAlign="center",u.textBaseline=o==="top"?"bottom":"top"):(u.y=s,u.x=o==="left"?a-r/2-h:s+r/2+h,u.textAlign=o==="left"?"end":"start",u.textBaseline="middle");const d=Nt.text(Object.assign(Object.assign({},u),l.style));this._mainContainer.add(d),this._tooltipText=d,this._tooltipState&&this._updateTooltip()}_updateTooltip(){var t,e;if(!this._tooltipShape&&!this._tooltipText||!this._tooltipState)return;const{railWidth:i,railHeight:r}=this.attribute,o=this._isHorizontal?i:r,a=this._tooltipState.pos*o,s=this._isHorizontal?"x":"y";this._tooltipShape&&this._tooltipShape.setAttributes({visible:!0,[s]:a});const{align:l}=this.attribute;if(this._tooltipText){const h=this.attribute.tooltip&&this.attribute.tooltip.text||{};this._tooltipText.setAttributes({visible:!0,[s]:a,text:h.formatter?h.formatter(this._tooltipState.value):this._isHorizontal||l!=="left"?` ${this._tooltipState.value.toFixed((e=h.precision)!==null&&e!==void 0?e:0)}`:`${this._tooltipState.value.toFixed((t=h.precision)!==null&&t!==void 0?t:0)} `})}}_bindEvents(){if(this.attribute.disableTriggerEvent)return;const{slidable:t,range:e}=this.attribute;t&&(this._startHandler&&this._startHandler.addEventListener("pointerdown",this._onHandlerPointerdown),this._startHandlerText&&this._startHandlerText.addEventListener("pointerdown",this._onHandlerPointerdown),this._endHandler&&this._endHandler.addEventListener("pointerdown",this._onHandlerPointerdown),this._endHandlerText&&this._endHandlerText.addEventListener("pointerdown",this._onHandlerPointerdown),Bs(e)&&e.draggableTrack&&this._track.addEventListener("pointerdown",this._onTrackPointerdown),this._railContainer.addEventListener("pointerdown",this._onRailPointerDown),(jt.env==="browser"?jt:this.stage).addEventListener("touchmove",this._handleTouchMove,{passive:!1}))}_bindTooltipEvents(){this.attribute.disableTriggerEvent||(this._mainContainer.addEventListener("pointerenter",this._onTooltipShow),this._mainContainer.addEventListener("pointermove",this._onTooltipUpdate),this._mainContainer.addEventListener("pointerleave",this._onTooltipHide))}_clearAllDragEvents(){const t=gy(),e=jt.env==="browser"?jt:this.stage;e.removeEventListener("pointermove",this._onHandlerPointerMove,{capture:!0}),t.forEach((i=>{e.removeEventListener(i,this._onHandlerPointerUp)})),e.removeEventListener("pointermove",this._onTrackPointerMove,{capture:!0}),t.forEach((i=>{e.removeEventListener(i,this._onTrackPointerUp)}))}_updateTrack(){const{inverse:t,railWidth:e,railHeight:i}=this.attribute,r=this._startHandler,o=this._endHandler;if(this._isHorizontal){const a=r?.attribute.x;if(o){const s=o?.attribute.x;this._track.setAttributes({x:Math.min(a,s),width:Math.abs(a-s)})}else t?this._track.setAttributes({x:a,width:e-a}):this._track.setAttributes({width:a})}else{const a=r?.attribute.y;if(o){const s=o?.attribute.y;this._track.setAttributes({y:Math.min(a,s),height:Math.abs(a-s)})}else t?this._track.setAttributes({y:a,height:i-a}):this._track.setAttributes({height:a})}}_updateHandler(t,e,i){var r;const o=this._isHorizontal;t.setAttribute(o?"x":"y",e);const a=t.name===cr.startHandler?this._startHandlerText:this._endHandlerText;if(a){const{handlerText:s={}}=this.attribute;a.setAttributes({text:s.formatter?s.formatter(i):i.toFixed((r=s.precision)!==null&&r!==void 0?r:0),[o?"x":"y"]:e})}t.name===cr.startHandler?(this._currentValue.startValue=i,this._currentValue.startPos=e):(this._currentValue.endValue=i,this._currentValue.endPos=e)}_updateHandlerText(t,e,i){var r;const o=this._isHorizontal,{handlerText:a={}}=this.attribute;t.setAttributes({[o?"x":"y"]:e,text:a.formatter?a.formatter(i):i.toFixed((r=a.precision)!==null&&r!==void 0?r:0)});const s=t.name===cr.startHandlerText?this._startHandler:this._endHandler;s&&s.setAttributes({[o?"x":"y"]:e}),t.name===cr.startHandlerText?(this._currentValue.startValue=i,this._currentValue.startPos=e):(this._currentValue.endValue=i,this._currentValue.endPos=e)}_dispatchChangeEvent(){const t=!!this.attribute.range,e=this._currentValue;this._dispatchEvent("change",{value:t?[Math.min(e.endValue,e.startValue),Math.max(e.endValue,e.startValue)]:e.startValue,position:t?[Math.min(e.endPos,e.startPos),Math.max(e.endPos,e.startPos)]:e.startPos})}_dispatchTooltipEvent(t){this._dispatchEvent("sliderTooltip",{type:t,position:this._tooltipState&&this._tooltipState.pos,value:this._tooltipState&&this._tooltipState.value})}_getHandlers(){const{inverse:t}=this.attribute;let e=this._startHandler,i=this._endHandler;return i?(this._isHorizontal?(!t&&i.attribute.x<e?.attribute.x||t&&i.attribute.x>e?.attribute.x)&&([e,i]=[i,e]):(!t&&i.attribute.y<e?.attribute.y||t&&i.attribute.y>e?.attribute.y)&&([e,i]=[i,e]),{startHandler:e,endHandler:i}):{startHandler:e,endHandler:i}}release(t){super.release(t),(jt.env==="browser"?jt:this.stage).addEventListener("touchmove",this._handleTouchMove,{passive:!1}),this._clearAllDragEvents()}}N_.defaultAttributes={slidable:!0,layout:"horizontal",align:"bottom",height:8,showHandler:!0,handlerSize:14,handlerStyle:{symbolType:"circle",fill:"#fff",stroke:"#91caff",lineWidth:2},tooltip:{shapeStyle:{symbolType:"circle",fill:"#fff",stroke:"#91caff",lineWidth:2},text:{style:{fill:"#2C3542",fontSize:12}}},railStyle:{fill:"rgba(0,0,0,.04)"},trackStyle:{fill:"#91caff"},showValue:!0,valueStyle:{fill:"#2C3542",fontSize:12},startText:{style:{fill:"#2C3542",fontSize:12}},endText:{style:{fill:"#2C3542",fontSize:12}},handlerText:{visible:!0,space:4,precision:0,style:{fill:"#2C3542",fontSize:12}}};qUt();class l2 extends U3{constructor(t,e){super(e?.skipDefault?t:Qt({},l2.defaultAttributes,t)),this.name="colorLegend",this._onSliderToolipChange=i=>{const r=this._slider.tooltipShape;if(r&&i.detail&&!fe(i.detail.value)){const o=this._colorScale.scale(i.detail.value);r.setAttribute("fill",o)}this.dispatchEvent(i)},this._onSliderChange=i=>{this._updateColor(),this.dispatchEvent(i)}}setSelected(t){this._slider&&(this._slider.setValue(t),this._updateColor())}_renderContent(){const{colors:t,slidable:e,layout:i,align:r,min:o,max:a,value:s,railWidth:l,railHeight:h,showHandler:u=!0,handlerSize:d,handlerStyle:c,railStyle:f,trackStyle:g,startText:p,endText:v,handlerText:m,showTooltip:y,tooltip:b,inverse:_,disableTriggerEvent:w}=this.attribute,C=[],x=(a-o)/(t.length-1);for(let A=0;A<t.length;A++)C.push(o+x*A);this._colorScale=new FUt().domain(C,!0).range(t),this._color=this._getTrackColor();const S=new N_({x:0,y:0,range:{draggableTrack:!0},slidable:e,layout:i,align:r,min:o,max:a,value:s,railWidth:l,railHeight:h,showHandler:u,handlerSize:d,handlerStyle:c,railStyle:f,trackStyle:Object.assign({fill:this._color},g),startText:p,endText:v,handlerText:m,showTooltip:y,tooltip:b,disableTriggerEvent:w,inverse:_});this._innerView.add(S),this._slider=S,S.translateTo(0-S.AABBBounds.x1,(this._title?this._title.AABBBounds.height()+Jr(this.attribute,"title.space",F_):0)-S.AABBBounds.y1),this._updateColor()}_bindEvents(){this.attribute.disableTriggerEvent||this._slider&&(this._slider.addEventListener("change",this._onSliderChange),this._slider.addEventListener("sliderTooltip",this._onSliderToolipChange))}_getTrackColor(){const{colors:t,layout:e,inverse:i}=this.attribute;if(fi(t))return;const r=t.length;if(r===1)return t[0];const o=[];for(let l=0;l<r;l++){const h=l/(r-1);o.push({offset:h,color:t[l]})}const a=e==="horizontal",s={gradient:"linear",stops:o,x0:0,y0:0,x1:a?1:0,y1:a?0:1};return i&&(a?(s.x0=1,s.x1=0):(s.y0=1,s.y1=0)),s}_updateColor(){var t;const{layout:e="horizontal",colors:i,railWidth:r,railHeight:o}=this.attribute,{startHandler:a,endHandler:s,track:l,attribute:h}=this._slider,{startValue:u,endValue:d,startPos:c,endPos:f}=this._slider.currentValue,g=(t=h.handlerStyle)===null||t===void 0?void 0:t.fill;if(a&&!g){const v=this._colorScale.scale(u);a.setAttribute("fill",v)}if(s&&!g){const v=this._colorScale.scale(d);s.setAttribute("fill",v)}const p=e==="horizontal"?r:o;if(Math.abs(c-f)!==p&&i&&i.length>1){const v=this._color.stops,m=Math.min(c,f),y=Math.max(c,f),b=m/p,_=y/p,w=_-b,C=v.filter((R=>R.offset>b&&R.offset<_)),x=Math.min(u,d),S=Math.max(u,d),A=this._colorScale.scale(x),T=this._colorScale.scale(S),M=[{offset:0,color:A}];C.forEach((R=>{M.push({offset:(R.offset-b)/w,color:R.color})})),M.push({offset:1,color:T}),l.setAttribute("fill",Object.assign(Object.assign({},this._color),{stops:M}))}}}l2.defaultAttributes={layout:"horizontal",title:{align:"start",space:F_,textStyle:{fontSize:12,fontWeight:"bold",fill:"rgba(46, 47, 50, 1)"}},handlerSize:10,handlerStyle:{fill:null,lineWidth:4,stroke:"#fff",outerBorder:{distance:2,lineWidth:1,stroke:"#ccc"}},tooltip:{shapeStyle:{lineWidth:4,stroke:"#fff"}}};function JUt(n="bottom"){let t=0;return n==="top"?`
    M${t},-6L${t-3.5},-2.5
    v5
    h7
    v-5
    Z
`:n==="left"?(t=1,`
    M${t-6},0L${t-6+2.5},-3.5
    h5
    v7
    h-5
    Z
`):n==="right"?(t=-1,`
    M${t+6},0L${t+6-2.5},-3.5
    h-5
    v7
    h5
    Z
  `):`
    M${t},6L${t-3.5},2.5
    v-5
    h7
    v5
    Z
`}KUt();class h2 extends U3{constructor(t,e){super(e?.skipDefault?t:Qt({},h2.defaultAttributes,t)),this.name="sizeLegend",this._onSliderChange=i=>{this.dispatchEvent(i)},this._onSliderToolipChange=i=>{this.dispatchEvent(i)}}setSelected(t){this._slider&&this._slider.setValue(t)}_renderContent(){const{slidable:t,layout:e,align:i,min:r,max:o,value:a,railWidth:s,railHeight:l,showHandler:h=!0,handlerSize:u,handlerStyle:d,railStyle:c,trackStyle:f,startText:g,endText:p,handlerText:v,showTooltip:m,tooltip:y,sizeBackground:b,disableTriggerEvent:_,inverse:w}=this.attribute,C=Nt.group({x:0,y:0});this._innerView.add(C);const x=new N_({x:0,y:0,zIndex:1,range:{draggableTrack:!0},slidable:t,layout:e,align:i,min:r,max:o,value:a,railWidth:s,railHeight:l,showHandler:h,handlerSize:u,handlerStyle:Object.assign({symbolType:JUt(i)},d),railStyle:c,trackStyle:f,startText:g,endText:p,handlerText:v,showTooltip:m,tooltip:y,disableTriggerEvent:_,inverse:w});C.add(x);let S,A=0;e==="horizontal"?i==="top"?(S=`M0,0L${s},0L${w?0:s},12Z`,A=l):(S=`M0,12L${s},12L${w?0:s},0Z`,x.setAttribute("y",12)):i==="left"?S=`M${s},0L${s+12},${w?0:l}L${s},${l}Z`:(S=`M0,${w?0:l}L12,${l}L12,0Z`,x.setAttribute("x",12));const T=Nt.path(Object.assign(Object.assign({x:0,y:A,path:S},b),{zIndex:0}));C.add(T);const M=this._title?this._title.AABBBounds.height()+Jr(this.attribute,"title.space",F_):0;C.translate(0-C.AABBBounds.x1,M-C.AABBBounds.y1),this._slider=x}_bindEvents(){this.attribute.disableTriggerEvent||this._slider&&(this._slider.addEventListener("change",this._onSliderChange),this._slider.addEventListener("sliderTooltip",this._onSliderToolipChange))}}h2.defaultAttributes={layout:"horizontal",title:{align:"start",space:F_,textStyle:{fontSize:12,fontWeight:"bold",fill:"rgba(46, 47, 50, 1)"}},handlerSize:10,handlerStyle:{lineWidth:1,stroke:"#ccc",fill:"#fff"},sizeBackground:{fill:"rgba(20,20,20,0.1)"}};function QUt(){Lo(),zl(),n2()}QUt();let Kst=class Zst extends na{constructor(t,e){super(e?.skipDefault?t:Qt({},Zst.defaultAttributes,t)),this.name="title"}render(){var t,e,i,r,o,a,s,l,h,u,d,c,f,g,p,v,m,y,b,_;const{textType:w,text:C,subtextType:x,textStyle:S={},subtext:A,subtextStyle:T={},width:M,height:R,minWidth:L,maxWidth:B,minHeight:P,maxHeight:k,align:E,verticalAlign:D,padding:I=0}=this.attribute,O=Pl(I),H=this.createOrUpdateChild("title-container",{x:O[3],y:O[0],zIndex:1},"group"),F=(t=S.height)!==null&&t!==void 0?t:R;if(this.attribute.visible!==!1&&S.visible!==!1){const{width:K,maxHeight:rt,maxWidth:q,x:it=0,y:nt=0,ellipsis:W=!0,wordBreak:G="break-word",maxWidth:j,lineClamp:U}=S;if(w==="rich"||Lt(S.character)){const J=Object.assign({x:it,y:nt,width:(e=K??M)!==null&&e!==void 0?e:0,height:F??0,ellipsis:W==null||W,wordBreak:G??"break-word",maxHeight:rt??k,maxWidth:q??j,textConfig:(i=S.character)!==null&&i!==void 0?i:C},S);this._mainTitle=H.createOrUpdateChild("mainTitle",J,"richtext")}else if(w==="html"){const J=Object.assign({html:Object.assign(Object.assign({dom:C},iU),S),x:it,y:nt,width:(r=K??M)!==null&&r!==void 0?r:0,height:F??0,ellipsis:W,wordBreak:G,maxHeight:rt??k,maxWidth:q??j,textConfig:[]},S);this._mainTitle=H.createOrUpdateChild("mainTitle",J,"richtext")}else Lt(C)&&(this._mainTitle=H.createOrUpdateChild("mainTitle",Object.assign(Object.assign({text:ni(C)?C:[C],whiteSpace:"normal"},S),{maxLineWidth:(a=(o=S.maxLineWidth)!==null&&o!==void 0?o:K)!==null&&a!==void 0?a:M,heightLimit:(s=S.height)!==null&&s!==void 0?s:k,lineClamp:U,ellipsis:W,x:it,y:nt}),"text"))}const N=this._mainTitle?this._mainTitle.AABBBounds.height():0,$=this._mainTitle?this._mainTitle.AABBBounds.width():0;if(this.attribute.visible!==!1&&T.visible!==!1){const{width:K,height:rt,maxWidth:q,maxHeight:it,x:nt=0,y:W=0,ellipsis:G=!0,wordBreak:j="break-word",lineClamp:U}=T,J=Math.max(Number.MIN_VALUE,k-N);if(x==="rich"||Lt(T.character)){const ot=Object.assign({x:nt,y:W,width:(l=K??M)!==null&&l!==void 0?l:0,height:(h=rt??R)!==null&&h!==void 0?h:0,ellipsis:G,wordBreak:j,maxHeight:it??J,maxWidth:q??B,textConfig:(u=T.character)!==null&&u!==void 0?u:A},T);this._subTitle=H.createOrUpdateChild("subTitle",ot,"richtext")}else if(x==="html"){const ot=Object.assign({html:Object.assign(Object.assign({dom:A},iU),T),x:nt,y:W,width:(d=K??M)!==null&&d!==void 0?d:0,height:(c=rt??R)!==null&&c!==void 0?c:0,ellipsis:G,wordBreak:j,maxHeight:it??J,maxWidth:q??B,textConfig:[]},T);this._subTitle=H.createOrUpdateChild("subTitle",ot,"richtext")}else Lt(A)&&(this._subTitle=H.createOrUpdateChild("subTitle",Object.assign(Object.assign({text:ni(A)?A:[A],whiteSpace:"normal"},T),{maxLineWidth:(f=T.maxLineWidth)!==null&&f!==void 0?f:M,heightLimit:(g=T.heightLimit)!==null&&g!==void 0?g:J,lineClamp:U,ellipsis:G,x:0,y:N}),"text"))}const V=this._subTitle?this._subTitle.AABBBounds.height():0,X=this._subTitle?this._subTitle.AABBBounds.width():0;let Z=Math.max($,X),tt=N+((p=T.height)!==null&&p!==void 0?p:V);if(Lt(M)&&(Z=M),Lt(R)&&(tt=R),Lt(L)&&Z<L&&(Z=L),Lt(B)&&Z>B&&(Z=B),Lt(P)&&tt<P&&(tt=P),Lt(k)&&tt>k&&(tt=k),H.attribute.width=Z,H.attribute.height=tt,H.attribute.boundsPadding=O,this._mainTitle){if(Lt(E)||Lt(S.align)){const q=S.align?S.align:E,it=(v=S.width)!==null&&v!==void 0?v:Z;q==="center"?(this._mainTitle.setAttribute("x",it/2),this._mainTitle.setAttribute("textAlign","center")):q==="right"?(this._mainTitle.setAttribute("x",it),this._mainTitle.setAttribute("textAlign","right")):(this._mainTitle.setAttribute("x",0),this._mainTitle.setAttribute("textAlign","left"))}const K=S.verticalAlign?S.verticalAlign:D,rt=F??(this._mainTitle.AABBBounds.empty()?0:this._mainTitle.AABBBounds.height());K==="middle"?(this._mainTitle.setAttribute("y",rt/2),this._mainTitle.setAttribute("textBaseline","middle")):K==="bottom"?(this._mainTitle.setAttribute("y",rt),this._mainTitle.setAttribute("textBaseline","bottom")):(this._mainTitle.setAttribute("y",0),this._mainTitle.setAttribute("textBaseline","top"))}if(this._subTitle){if(Lt(E)||Lt(T.align)){const it=T.align?T.align:E,nt=(y=(m=T.width)!==null&&m!==void 0?m:S.width)!==null&&y!==void 0?y:Z;it==="center"?(this._subTitle.setAttribute("x",nt/2),this._subTitle.setAttribute("textAlign","center")):it==="right"?(this._subTitle.setAttribute("x",nt),this._subTitle.setAttribute("textAlign","right")):(this._subTitle.setAttribute("x",0),this._subTitle.setAttribute("textAlign","left"))}const K=T.verticalAlign?T.verticalAlign:D,rt=this._mainTitle?Lt(F)?this._mainTitle.AABBBounds.y1+Math.max(this._mainTitle.AABBBounds.empty()?0:this._mainTitle.AABBBounds.height(),F):this._mainTitle.AABBBounds.y2:0,q=(_=(b=T.height)!==null&&b!==void 0?b:R)!==null&&_!==void 0?_:this._subTitle.AABBBounds.empty()?0:this._subTitle.AABBBounds.height();K==="middle"?(this._subTitle.setAttribute("y",rt+q/2),this._subTitle.setAttribute("textBaseline","middle")):K==="bottom"?(this._subTitle.setAttribute("y",rt+q),this._subTitle.setAttribute("textBaseline","bottom")):(this._subTitle.setAttribute("y",rt),this._subTitle.setAttribute("textBaseline","top"))}}};Kst.defaultAttributes={textStyle:{ellipsis:"...",fill:"#333",fontSize:20,fontWeight:"bold",textAlign:"left",textBaseline:"top"},subtextStyle:{ellipsis:"...",fill:"#6F6F6F",fontSize:16,fontWeight:"normal",textAlign:"left",textBaseline:"top"}};function tYt(){Lo(),Zh(),zl(),i2()}const eYt='<svg width="200" height="200" viewBox="0 0 1024 1024" fill="#fff" xmlns="http://www.w3.org/2000/svg"><path d="M877.44815445 206.10060629a64.72691371 64.72691371 0 0 0-95.14856334 4.01306852L380.73381888 685.46812814 235.22771741 533.48933518a64.72691371 64.72691371 0 0 0-92.43003222-1.03563036l-45.82665557 45.82665443a64.72691371 64.72691371 0 0 0-0.90617629 90.61767965l239.61903446 250.10479331a64.72691371 64.72691371 0 0 0 71.19960405 15.14609778 64.33855261 64.33855261 0 0 0 35.08198741-21.23042702l36.24707186-42.71976334 40.5190474-40.77795556-3.36579926-3.49525333 411.40426297-486.74638962a64.72691371 64.72691371 0 0 0-3.88361443-87.64024149l-45.3088404-45.43829334z"></path></svg>',iYt='<svg width="200" height="200" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="none"><path stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width="5" d="M5 12h14"/></svg>';tYt();class $h extends na{constructor(t,e){super(e?.skipDefault?t:Qt({},$h.defaultAttributes,t)),this._handlePointerUp=()=>{this.attribute.disabled||(this.attribute.checked?(this.setAttribute("checked",!1),this.setAttribute("indeterminate",!1)):(this.setAttribute("checked",!0),this.setAttribute("indeterminate",!1)),this._dispatchEvent("checkbox_state_change",{eventType:"checkbox_state_change",checked:this.attribute.checked}),this.stage.renderNextFrame())},this.renderGroup(),this.onBeforeAttributeUpdate=(i,r,o)=>{"interactive"in i&&this.setAttribute("pickable",i.interactive),"disabled"in i&&this.setAttribute("cursor",i.disable?this.attribute.disableCursor:this.attribute.cursor)},this.addEventListener("pointerup",this._handlePointerUp)}render(){this.removeAllChild(!0),this.renderBox(),this.renderIcon(),this.renderText(),this.layout()}renderBox(){this._box=new og(Qt({},this.attribute.box));const t=this.attribute.checked||this.attribute.indeterminate;t&&this.attribute.disabled?this._box.setAttributes({fill:this.attribute.box.disableCheckedFill,stroke:this.attribute.box.disableCheckedStroke}):t?this._box.setAttributes({fill:this.attribute.box.checkedFill,stroke:this.attribute.box.checkedStroke}):this.attribute.disabled&&this._box.setAttributes({fill:this.attribute.box.disableFill}),this.appendChild(this._box)}renderIcon(){this._checkIcon=new ea(Qt({image:this.attribute.icon.checkIconImage},this.attribute.icon)),this.appendChild(this._checkIcon),this._indeterminateIcon=new ea(Qt({image:this.attribute.icon.indeterminateIconImage},this.attribute.icon)),this.appendChild(this._indeterminateIcon),this.attribute.checked?(this._checkIcon.setAttribute("visible",!0),this._indeterminateIcon.setAttribute("visible",!1)):this.attribute.indeterminate?(this._checkIcon.setAttribute("visible",!1),this._indeterminateIcon.setAttribute("visible",!0)):(this._checkIcon.setAttribute("visible",!1),this._indeterminateIcon.setAttribute("visible",!1))}renderText(){this._text=new tn(Qt({wrap:!0},this.attribute.text)),this.attribute.disabled&&this._text.setAttribute("fill",this.attribute.text.disableFill),this.appendChild(this._text)}renderGroup(){this.attribute.interactive||this.setAttribute("pickable",!1),this.attribute.disabled&&this.setAttribute("cursor",this.attribute.disableCursor)}layout(){const t=this.attribute.box.height,e=this.attribute.icon.height,i=this._text.AABBBounds.height(),r=Math.max(t,e,i),o=r/2-t/2,a=r/2-e/2,s=r/2-i/2,l=this.attribute.box.width,h=this.attribute.icon.width,u=Math.max(l,h),d=u/2-l/2,c=u/2-h/2,f=u+this.attribute.spaceBetweenTextAndIcon;this._box.setAttributes({x:d,y:o}),this._checkIcon.setAttributes({x:c,y:a}),this._indeterminateIcon.setAttributes({x:c,y:a}),this._text.setAttributes({x:f,y:s})}initAttributes(t,e){t=e?.skipDefault?t:Qt({},$h.defaultAttributes,t),super.initAttributes(t),this.renderGroup(),this.render()}}$h.defaultAttributes={interactive:!0,disabled:!1,checked:!1,indeterminate:!1,cursor:"pointer",disableCursor:"not-allowed",spaceBetweenTextAndIcon:8,text:{text:"text",fontSize:14,fill:"#000",disableFill:"rgb(201,205,212)",textBaseline:"top",pickable:!1},icon:{checkIconImage:eYt,indeterminateIconImage:iYt,width:10,height:10,pickable:!1},box:{width:14,height:14,cornerRadius:2,fill:"#fff",stroke:"rgb(229,230,235)",disableFill:"rgb(242,243,245)",checkedFill:"rgb(22, 93, 255)",checkedStroke:"rgb(22, 93, 255)",disableCheckedFill:"rgb(148, 191, 255)",disableCheckedStroke:"rgb(148, 191, 255)",pickable:!1}};function nYt(){Lo(),Zh(),E7t(),i2()}nYt();class Gf extends na{constructor(t,e){super(e?.skipDefault?t:Qt({},Gf.defaultAttributes,t)),this._handlePointerUp=()=>{this.attribute.disabled||this.attribute.checked||(this.setAttribute("checked",!0),this._dispatchEvent("radio_checked",{eventType:"radio_checked",target:this}),this.stage.renderNextFrame())},this.renderGroup(),this.onBeforeAttributeUpdate=(i,r,o)=>{"interactive"in i&&this.setAttribute("pickable",i.interactive),"disabled"in i&&this.setAttribute("cursor",i.disable?this.attribute.disableCursor:this.attribute.cursor)},this.addEventListener("pointerup",this._handlePointerUp)}render(){this.removeAllChild(!0),this.renderCircle(),this.renderText(),this.layout()}renderCircle(){this._circle=new H_(Qt({},this.attribute.circle));const t=this.attribute.checked;t&&this.attribute.disabled?this._circle.setAttributes({fill:this.attribute.circle.disableCheckedFill,stroke:this.attribute.circle.disableCheckedStroke}):t?this._circle.setAttributes({fill:this.attribute.circle.checkedFill,stroke:this.attribute.circle.checkedStroke}):this.attribute.disabled&&this._circle.setAttributes({fill:this.attribute.circle.disableFill}),this.appendChild(this._circle)}renderText(){this._text=new tn(Qt({},this.attribute.text)),this.attribute.disabled&&this._text.setAttribute("fill",this.attribute.text.disableFill),this.appendChild(this._text)}renderGroup(){this.attribute.interactive||this.setAttribute("pickable",!1),this.attribute.disabled&&this.setAttribute("cursor",this.attribute.disableCursor)}layout(){const t=2*(this.attribute.circle.outerRadius+this.attribute.circle.lineWidth),e=this._text.AABBBounds.height(),i=Math.max(t,e),r=i/2-t/2+this.attribute.circle.outerRadius+this.attribute.circle.lineWidth,o=i/2-e/2,a=2*(this.attribute.circle.outerRadius+this.attribute.circle.lineWidth),s=this.attribute.circle.outerRadius+this.attribute.circle.lineWidth,l=a+this.attribute.spaceBetweenTextAndIcon;this._circle.setAttributes({x:s,y:r}),this._text.setAttributes({x:l,y:o})}initAttributes(t,e){t=e?.skipDefault?t:Qt({},Gf.defaultAttributes,t),super.initAttributes(t),this.renderGroup(),this.render()}}Gf.defaultAttributes={interactive:!0,disabled:!1,checked:!1,cursor:"pointer",disableCursor:"not-allowed",spaceBetweenTextAndIcon:8,text:{text:"text",fontSize:14,fill:"#000",disableFill:"rgb(201,205,212)",textBaseline:"top",pickable:!1},circle:{outerRadius:7,innerRadius:3,startAngle:0,endAngle:2*Math.PI,lineWidth:1,fill:"#fff",stroke:"rgb(229,230,235)",disableFill:"rgb(242,243,245)",checkedFill:"rgb(22, 93, 255)",checkedStroke:"rgb(22, 93, 255)",disableCheckedFill:"rgb(148, 191, 255)",disableCheckedStroke:"rgb(148, 191, 255)",pickable:!1}};function rYt(){Lo(),zl(),i2()}const oYt='<svg t="1716726614852" class="icon" viewBox="0 0 1194 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2621" width="200" height="200"><path d="M1038.694079 367.237067c13.265507 23.342857-16.633865-40.004445-63.05621-40.004446H219.018794c-26.558738 0-46.46393 13.334815-63.05621 40.004446S0.006238 607.277601 0.006238 650.608819V940.647979a82.351494 82.351494 0 0 0 82.961402 83.349526H1111.702885a82.337632 82.337632 0 0 0 82.975264-83.349526V650.608819c0-43.331218-155.970208-283.371753-155.970208-283.371752zM730.066575 667.284269a136.328386 136.328386 0 0 1-132.738243 133.33429 133.417459 133.417459 0 0 1-132.738243-133.33429v-6.681269a40.6698 40.6698 0 0 0-36.497473-26.66963H73.015044l119.458874-220.02445s23.231965-40.004445 53.103614-40.004446h713.481918c26.544876 0 29.871649 10.008042 46.436207 40.004446L1128.33675 633.947231H769.904682c-26.184476 0-39.838107 7.623855-39.838107 33.337038zM338.505391 210.559919l-89.601086-86.69016a22.178487 22.178487 0 0 1 0-33.26773 21.984425 21.984425 0 0 1 33.170699 0l89.601087 86.676299a22.317102 22.317102 0 0 1 0 33.26773 24.950798 24.950798 0 0 1-33.1707 0z m252.197118-40.059891a25.532983 25.532983 0 0 1-6.639685-16.633865l-3.326773-126.694606A28.263709 28.263709 0 0 1 603.995739 0.515788c13.251646-3.326773 23.204242 10.021904 26.544877 23.342858V153.866163a28.249847 28.249847 0 0 1-23.259688 26.66963c-6.611961-3.312911-13.279369-3.312911-16.578419-10.035765z m235.646421 33.337038a22.372548 22.372548 0 0 1 0-33.337038l86.288175-90.030795a22.039871 22.039871 0 0 1 33.170699 0 22.289379 22.289379 0 0 1 0 33.364761l-82.961401 90.003072a25.962691 25.962691 0 0 1-36.483611 0z" fill="#8a8a8a" p-id="2622"></path></svg>';rYt();let Jst=class Qst extends na{constructor(t,e){super(e?.skipDefault?t:Qt({},Qst.defaultAttributes,t))}render(){this.removeAllChild(!0),this.renderIcon(),this.renderText(),this.layout()}renderIcon(){this._emptyTipIcon=new ea(Qt({image:this.attribute.icon.image},this.attribute.icon)),this.appendChild(this._emptyTipIcon)}renderText(){this._text=new tn(Qt({wrap:!0},this.attribute.text)),this.appendChild(this._text)}layout(){const t=this.attribute.icon.height,e=this._text.AABBBounds.height(),i=this.attribute.icon.width,{width:r,height:o,spaceBetweenTextAndIcon:a}=this.attribute;this._emptyTipIcon.setAttribute("x",r/2-i/2),this._emptyTipIcon.setAttribute("y",o/2-t/2-e/2-a/2),this._text.setAttribute("x",r/2),this._text.setAttribute("textAlign","center"),this._text.setAttribute("y",o/2+t/2+a/2),this._text.setAttribute("textBaseline","middle")}};Jst.defaultAttributes={spaceBetweenTextAndIcon:20,text:{text:"no data",fontSize:14,fill:"#000",disableFill:"rgb(201,205,212)",pickable:!1},icon:{image:oYt,width:100,height:100,pickable:!1}};function aYt(){Lo(),Zh(),zl(),lst()}aYt();class Wb extends na{constructor(t,e){super(e?.skipDefault?t:Qt({},Wb.defaultAttributes,t)),this._handlePointerUp=()=>{this.attribute.disabled||(this.attribute.checked?this.setAttribute("checked",!1):this.setAttribute("checked",!0),this._dispatchEvent("switch_state_change",{eventType:"switch_state_change",checked:this.attribute.checked}),this.stage.renderNextFrame())},this.renderGroup(),this.onBeforeAttributeUpdate=(i,r,o)=>{"interactive"in i&&this.setAttribute("pickable",i.interactive),"disabled"in i&&this.setAttribute("cursor",i.disable?this.attribute.disableCursor:this.attribute.cursor)},this.addEventListener("pointerup",this._handlePointerUp)}render(){this.removeAllChild(!0),this.renderBox(),this.renderCircle(),this.renderText(),this.layout()}renderBox(){this._box=new og(Qt({},this.attribute.box)),this.attribute.disabled&&this.attribute.checked?this._box.setAttributes({fill:this.attribute.box.disableCheckedFill}):this.attribute.disabled&&!this.attribute.checked?this._box.setAttributes({fill:this.attribute.box.disableUncheckedFill}):this.attribute.checked?this._box.setAttributes({fill:this.attribute.box.checkedFill}):this._box.setAttributes({fill:this.attribute.box.uncheckedFill}),this.appendChild(this._box)}renderCircle(){this._circle=new Ff(Qt({},this.attribute.circle)),this.appendChild(this._circle)}renderText(){var t,e,i;this._text=new tn(Qt({},(t=this.attribute.text)!==null&&t!==void 0?t:{})),this.attribute.checked&&(!((e=this.attribute.text)===null||e===void 0)&&e.checkedText)?this._text.setAttributes({text:this.attribute.text.checkedText}):!((i=this.attribute.text)===null||i===void 0)&&i.uncheckedText&&this._text.setAttributes({text:this.attribute.text.uncheckedText}),this.appendChild(this._text)}renderGroup(){this.attribute.interactive||this.setAttribute("pickable",!1),this.attribute.disabled&&this.setAttribute("cursor",this.attribute.disableCursor)}layout(){var t,e,i,r,o,a,s,l,h,u;const d=this.attribute.spaceBetweenTextAndCircle,c=this.attribute.circle.radius,f=this.attribute.box.height,g=2*c,p=this._text.AABBBounds.height(),v=Math.max(f,g,p),m=v/2-g/2+c,y=v/2-p/2,b=this.attribute.box.width,_=2*c,w=r2(((i=(e=(t=this.attribute.text)===null||t===void 0?void 0:t.checkedText)===null||e===void 0?void 0:e.length)!==null&&i!==void 0?i:0)>((a=(o=(r=this.attribute.text)===null||r===void 0?void 0:r.uncheckedText)===null||o===void 0?void 0:o.length)!==null&&a!==void 0?a:0)?(l=(s=this.attribute.text)===null||s===void 0?void 0:s.checkedText)!==null&&l!==void 0?l:"":(u=(h=this.attribute.text)===null||h===void 0?void 0:h.uncheckedText)!==null&&u!==void 0?u:"",this._text.attribute).width,C=Math.max(b,_+w+3*d),x=f/2-_/2+c,S=x+c+d;this._box.setAttributes({width:C,height:v}),this._circle.setAttributes({y:m,x:this.attribute.checked?C-x:x}),this._text.setAttributes({x:this.attribute.checked?C-S-w:S,y})}initAttributes(t,e){t=e?.skipDefault?t:Qt({},Wb.defaultAttributes,t),super.initAttributes(t),this.renderGroup(),this.render()}}Wb.defaultAttributes={interactive:!0,disabled:!1,checked:!1,cursor:"pointer",disableCursor:"not-allowed",circle:{radius:8,fill:"#FFF",pickable:!1},box:{width:40,height:24,cornerRadius:12,uncheckedFill:"rgb(201,205,212)",checkedFill:"#165DFF",disableUncheckedFill:"rgb(242,243,245)",disableCheckedFill:"rgb(148,191,255)",pickable:!1},text:{textAlign:"left",textBaseline:"top",pickable:!1},spaceBetweenTextAndCircle:6};let BU=!1;function tlt(){BU||(BU=!0,Ob(),R3()?sA(Kt):oGt()&&uA(Kt),P7t(),lst(),Lo(),i2(),O3(),Zh(),n2(),L7t(),rm(),zl(),K$(),Z7t(),K$())}function kU(n,t){let e=null;return function(...i){e||(n.apply(this,i),e=setTimeout((()=>{e=null}),t))}}function sYt(n,t){const e=new Date().getTime(),i=new Date(e+864e5*n);if(t){const r=i.getFullYear().toString(),o=(i.getMonth()+1).toString().padStart(2,"0"),a=i.getDate().toString().padStart(2,"0");return t=(t=(t=t.replace("yyyy",r)).replace("mm",o)).replace("dd",a)}return i}function al(n,t){const e=n.getFullYear().toString(),i=(n.getMonth()+1).toString().padStart(2,"0"),r=n.getDate().toString().padStart(2,"0");if((t=(t=(t=t.replace("yyyy",e)).replace("mm",i)).replace("dd",r)).length>10){const o=n.getHours().toString().padStart(2,"0"),a=n.getMinutes().toString().padStart(2,"0"),s=n.getSeconds().toString().padStart(2,"0");t=(t=(t=t.replace("hh",o)).replace("mm",a)).replace("ss",s)}return t}function lYt(n,t){const e=t.indexOf("yyyy"),i=t.indexOf("mm"),r=t.indexOf("dd"),o=i<e?i<r?0:1:i<r?1:2,a=r<e?r<i?0:1:r<i?1:2,s=parseInt(n[e<i?e<r?0:1:i<r?1:2],10),l=parseInt(n[o],10)-1,h=parseInt(n[a],10);if(isNaN(s)||s<1||isNaN(l)||l<0||l>11)return!1;const u=[31,uYt(s)?29:28,31,30,31,30,31,31,30,31,30,31];return!(isNaN(h)||h<1||h>u[l])}function hYt(n,t){if(t.includes("hh")||t.includes("mm")||t.includes("ss")){const e=t.indexOf("hh")>-1?t.indexOf("hh"):t.indexOf("HH"),i=parseInt(n[e],10),r=parseInt(n[e+1],10),o=n.length>e+2?parseInt(n[e+2],10):0;if(isNaN(i)||i<0||i>23||isNaN(r)||r<0||r>59||isNaN(o)||o<0||o>59)return!1}return!0}function uYt(n){return n%4==0&&n%100!=0||n%400==0}function G1(n){const t=["yyyy-mm-dd","dd-mm-yyyy","mm/dd/yyyy","yyyy/mm/dd","dd/mm/yyyy","yyyy.mm.dd","mm.dd.yyyy","dd.mm.yyyy"],e=["hh:mm:ss","hh:mm"],i=(n=n.trim()).split(" "),r=i[0],o=i[1];let a,s;if(r)for(let l=0;l<t.length;l++){const h=t[l],u=r.split(_k(h)),d=lYt(u,h);if(u.length===3&&d){a=h;break}}if(a&&o)for(let l=0;l<e.length;l++){const h=e[l],u=o.split(_k(h)),d=h.split(_k(h));if(hYt(u,h)&&u.length===d.length){s=h;break}}return r&&o&&a&&s?a+" "+s:r&&!o?a:"yyyy-mm-dd hh:mm:ss"}function _k(n){const t=n.match(/[^\w]/g);if(t){const e=t.map((i=>"\\"+i)).join("|");return new RegExp(e,"g")}return/[^\w]/}function elt(n,t){return n.replace(/\{([^}]+)\}/g,((e,i)=>{const r=i.split(".");let o=t;for(const a of r){if(!o.hasOwnProperty(a)){o=e;break}o=o[a]}return o}))}function W_(n){return Array.isArray(n)?n.length===3?[n[0],n[1],n[2],n[1]]:n.length===2?[n[0],n[1],n[0],n[1]]:n.length===1?[n[0],n[0],n[0],n[0]]:[n[0],n[1],n[2],n[3]]:[n,n,n,n]}function ilt(n){const t=new Date(n.getFullYear(),0,1);return Math.ceil(((n.getTime()+1-t.getTime())/864e5+1)/7)}function dYt(n,t="long"){const e=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],i=new Date(n);return t==="short"?e[i.getDay()].substr(0,3):t==="long"?e[i.getDay()]:'Invalid format specified. Please use "short" or "long".'}function cYt(n,t){const e=Object.getOwnPropertyDescriptor(n,t);return!!e&&(!!e.set||e.writable===!0)}function zi(n,t=!1){let e;if(n){if(e=new Date(n),typeof n=="string"){if(n.length>10)return t&&e.setHours(0,0,0,0),e;e.setHours(0,0,0,0)}}else e=new Date;return t&&e.setHours(0,0,0,0),e}function fYt(n,t=!1){let e;if(n){if(e=new Date(n),typeof n=="string"){if(n.length>10)return t&&e.setMinutes(59,59,999),e;e.setMinutes(59,59,999)}}else e=new Date;return t&&e.setMinutes(59,59,999),e}function gYt(n,t=!1){let e;if(n){if(e=new Date(n),typeof n=="string"){if(n.length>10)return t&&e.setSeconds(59,999),e;e.setSeconds(59,999)}}else e=new Date;return t&&e.setSeconds(59,999),e}function nlt(n,t=!1){let e;if(n){if(e=new Date(n),typeof n=="string"){if(n.length>10)return t&&e.setMilliseconds(999),e;e.setMilliseconds(999)}}else e=new Date;return t&&e.setMilliseconds(999),e}function Tu(n,t=!1){let e;if(n){if(e=new Date(n),typeof n=="string"){if(n.length>10)return t&&e.setHours(23,59,59,999),e;e.setHours(23,59,59,999)}}else e=new Date;return t&&e.setHours(23,59,59,999),e}function Lv(n,t,e,i){let r=new Date(t);switch(e){case"second":r.setMilliseconds(999);break;case"minute":r.setSeconds(59,999);break;case"hour":r.setMinutes(59,59,999);break;case"day":r.setHours(23,59,59,999);break;case"week":const s=6-r.getDay();r.setDate(r.getDate()+s),r.setHours(23,59,59,999);break;case"month":const l=new Date(r.getFullYear(),r.getMonth()+1,0).getDate();r.setDate(l),r.setHours(23,59,59,999);break;case"quarter":const h=r.getMonth(),u=h-h%3+2,d=new Date(r.getFullYear(),u+1,0).getDate();r.setMonth(u,d),r.setHours(23,59,59,999);break;case"year":r.setMonth(11,31),r.setHours(23,59,59,999);break;default:throw new Error("Invalid time scale")}const o=Xe(r,n,e,i,1),a=Math.ceil(o);if(a>o){const s=(a-o)*i,l=1e3,h=60*l,u=60*h,d=24*u,c=7*d;switch(new Date(r.getTime()+1),e){case"second":r.setTime(r.getTime()+s*l);break;case"minute":r.setTime(r.getTime()+s*h);break;case"hour":r.setTime(r.getTime()+s*u);break;case"day":r.setTime(r.getTime()+s*d);break;case"week":r.setTime(r.getTime()+s*c);break;case"month":r=new Date(r.getFullYear(),r.getMonth()+1+Math.round(s),0),r.setHours(23,59,59,999);break;case"quarter":const f=r.getMonth(),g=f-f%3+2;r=new Date(r.getFullYear(),g+Math.round(3*s)+1,0),r.setHours(23,59,59,999);break;case"year":r.setFullYear(r.getFullYear()+Math.floor(s)),r.setHours(23,59,59,999);break;default:throw new Error("Invalid time scale")}}return r}function $f(n,t,e="monday"){const i=new Date(n);switch(t){case"second":i.setMilliseconds(0);break;case"minute":i.setSeconds(0,0);break;case"hour":i.setMinutes(0,0,0);break;case"day":i.setHours(0,0,0,0);break;case"week":const r=i.getDay();let o=r;o=e==="monday"?r===0?-6:1-r:-r,i.setDate(i.getDate()+o),i.setHours(0,0,0,0);break;case"month":i.setDate(1),i.setHours(0,0,0,0);break;case"quarter":const a=i.getMonth(),s=a-a%3;i.setMonth(s,1),i.setHours(0,0,0,0);break;case"year":i.setMonth(0,1),i.setHours(0,0,0,0);break;default:throw new Error("Invalid time scale")}return i}function Xe(n,t,e,i,r=0){let o;const a=new Date(n.getTime()+r);switch(e){case"second":o=(a.getTime()-t.getTime())/1e3;break;case"minute":o=(a.getTime()-t.getTime())/6e4;break;case"hour":o=(a.getTime()-t.getTime())/36e5;break;case"day":o=(a.getTime()-t.getTime())/864e5;break;case"week":o=(a.getTime()-t.getTime())/6048e5;break;case"month":o=12*(a.getFullYear()-t.getFullYear())+(a.getMonth()-t.getMonth()),o+=(a.getDate()-t.getDate())/new Date(a.getFullYear(),a.getMonth()+1,0).getDate();break;case"quarter":o=4*(a.getFullYear()-t.getFullYear())+(a.getMonth()-t.getMonth())/3,o+=(a.getDate()-t.getDate())/(3*new Date(a.getFullYear(),a.getMonth()+1,0).getDate());break;case"year":o=a.getFullYear()-t.getFullYear(),o+=(a.getMonth()-t.getMonth())/12;break;default:throw new Error("Invalid time scale")}return o/i}class pYt{constructor(t){var e;this._scene=t,this.scrollLeft=0,this.scrollTop=0,this.x=0,this.y=t._gantt.getAllHeaderRowsHeight(),this.width=t.ganttGroup.attribute.width,this.height=t.ganttGroup.attribute.height-t.timelineHeader.group.attribute.height,this.rowHeight=t._gantt.parsedOptions.rowHeight,this.rowCount=t._gantt.itemCount,this.allGridWidth=t._gantt.getAllDateColsWidth(),this.allGridHeight=t._gantt.getAllTaskBarsHeight(),this.group=new _e({x:this.x,y:this.y,width:this.width,height:this.height,clip:!0,fill:(e=t._gantt.parsedOptions.grid)===null||e===void 0?void 0:e.backgroundColor}),this.group.name="grid-container",t.ganttGroup.addChild(this.group),this.createVerticalBackgroundRects(),this.createHorizontalBackgroundRects(),this.createVerticalLines(),this.createHorizontalLines(),this.createTimeLineHeaderBottomLine()}createTimeLineHeaderBottomLine(){var t,e,i,r,o,a;const s=this._scene._gantt.parsedOptions,l=(e=(t=s.horizontalSplitLine)===null||t===void 0?void 0:t.lineWidth)!==null&&e!==void 0?e:(i=s.timelineHeaderHorizontalLineStyle)===null||i===void 0?void 0:i.lineWidth,h=(1&l?-.5:0)+l/2,u=Wi({pickable:!1,stroke:(o=(r=s.horizontalSplitLine)===null||r===void 0?void 0:r.lineColor)!==null&&o!==void 0?o:(a=s.timelineHeaderHorizontalLineStyle)===null||a===void 0?void 0:a.lineColor,lineWidth:l+(1&l?1:0),points:[{x:0,y:h},{x:this._scene._gantt.getAllDateColsWidth(),y:h}]});u.name="timeLine-header-bottom-line",this.group.addChild(u)}createVerticalLines(){var t,e;const i=this._scene._gantt.parsedOptions.grid,r=(t=i.verticalLineDependenceOnTimeScale)!==null&&t!==void 0?t:this._scene._gantt.parsedOptions.reverseSortedTimelineScales[0].unit;if(i.verticalLine){this.verticalLineGroup=new _e({x:0,y:0,width:this.allGridWidth,height:this.allGridHeight}),this.verticalLineGroup.name="grid-vertical",this.group.appendChild(this.verticalLineGroup);const o=(e=this._scene._gantt.parsedOptions.reverseSortedTimelineScales.find((u=>u.unit===r)))!==null&&e!==void 0?e:this._scene._gantt.parsedOptions.reverseSortedTimelineScales[0],{unit:a,step:s}=this._scene._gantt.parsedOptions.reverseSortedTimelineScales[0],{timelineDates:l}=o,h=this._scene._gantt.parsedOptions.timelineColWidth;if(typeof i.verticalLine=="function")for(let u=0;u<l?.length-1;u++){const{endDate:d}=l[u],c=i.verticalLine({index:u,dateIndex:l[u].dateIndex,date:l[u].endDate,ganttInstance:this._scene._gantt}),f=Math.ceil(Xe(d,this._scene._gantt.parsedOptions.minDate,a,s,1)*h)+(1&c.lineWidth?.5:0),g=Wi({pickable:!1,stroke:c.lineColor,lineWidth:c.lineWidth,points:[{x:f,y:0},{x:f,y:this.allGridHeight}]});this.verticalLineGroup.appendChild(g)}else{const u=i.verticalLine;for(let d=0;d<l?.length-1;d++){const{endDate:c}=l[d],f=Math.ceil(Xe(c,this._scene._gantt.parsedOptions.minDate,a,s,1)*h)+(1&u.lineWidth?.5:0),g=Wi({pickable:!1,stroke:u.lineColor,lineWidth:u.lineWidth,points:[{x:f,y:0},{x:f,y:this.allGridHeight}]});this.verticalLineGroup.appendChild(g)}}}}createHorizontalLines(){const t=this._scene._gantt.parsedOptions.grid;if(t.horizontalLine)if(this.horizontalLineGroup=new _e({x:0,y:0,width:this.allGridWidth,height:this.allGridHeight}),this.horizontalLineGroup.name="grid-horizontal",this.group.appendChild(this.horizontalLineGroup),typeof t.horizontalLine=="function"){let e=.5;for(let i=0;i<this.rowCount-1;i++){const r=t.horizontalLine({index:i,ganttInstance:this._scene._gantt});e+=this._scene._gantt.getRowHeightByIndex(i);const o=Wi({pickable:!1,stroke:r.lineColor,lineWidth:r.lineWidth,points:[{x:0,y:e},{x:this.allGridWidth,y:e}]});this.horizontalLineGroup.appendChild(o)}}else{const e=t.horizontalLine;let i=0;1&e.lineWidth&&(i+=.5);for(let r=0;r<this.rowCount-1;r++){i+=this._scene._gantt.getRowHeightByIndex(r);const o=Wi({pickable:!1,stroke:e.lineColor,lineWidth:e.lineWidth,points:[{x:0,y:i},{x:this.allGridWidth,y:i}]});this.horizontalLineGroup.appendChild(o)}}}createVerticalBackgroundRects(){const t=this._scene._gantt.parsedOptions.grid.verticalBackgroundColor,e=this._scene._gantt.parsedOptions.grid.weekendBackgroundColor;if(t||e){this.verticalBackgroundRectsGroup=new _e({x:0,y:0,width:this.allGridWidth,height:this.allGridHeight}),this.verticalBackgroundRectsGroup.name="grid-vertical-background",this.group.appendChild(this.verticalBackgroundRectsGroup);const{timelineDates:i,unit:r,step:o}=this._scene._gantt.parsedOptions.reverseSortedTimelineScales[0],a=this._scene._gantt.parsedOptions.timelineColWidth;if(t||e)for(let s=0;s<=i?.length-1;s++){let l;if(!e||r!=="day"||o!==1||i[s].startDate.getDay()!==0&&i[s].startDate.getDay()!==6?typeof t=="function"?l=t({index:s,dateIndex:i[s].dateIndex,date:i[s].endDate,ganttInstance:this._scene._gantt}):t&&(l=t[s%t.length]):l=e,l){const h=Math.ceil(a*s),u=ei({pickable:!1,fill:l,x:h,y:0,width:a,height:this.allGridHeight});this.verticalBackgroundRectsGroup.appendChild(u)}}}}createHorizontalBackgroundRects(){const t=this._scene._gantt.parsedOptions.grid.horizontalBackgroundColor;if(t){this.horizontalBackgroundRectsGroup=new _e({x:0,y:0,width:this.allGridWidth,height:this.allGridHeight}),this.horizontalBackgroundRectsGroup.name="grid-horizontal-background",this.group.appendChild(this.horizontalBackgroundRectsGroup);let e=0;for(let i=0;i<=this.rowCount-1;i++){let r;r=typeof t=="function"?t({index:i,ganttInstance:this._scene._gantt}):t[i%t.length];const o=ei({pickable:!1,fill:r,x:0,y:e,width:this.allGridWidth,height:this._scene._gantt.getRowHeightByIndex(i)});this.horizontalBackgroundRectsGroup.appendChild(o),e+=this._scene._gantt.getRowHeightByIndex(i)}}}refresh(){this.width=this._scene.ganttGroup.attribute.width,this.height=this._scene.ganttGroup.attribute.height-this._scene.timelineHeader.group.attribute.height,this.group.setAttributes({width:this.width,height:this.height,y:this._scene._gantt.getAllHeaderRowsHeight()}),this.rowCount=this._scene._gantt.itemCount,this.allGridWidth=this._scene._gantt.getAllDateColsWidth(),this.allGridHeight=this._scene._gantt.getAllTaskBarsHeight(),this.group.removeAllChild(),this.createVerticalBackgroundRects(),this.createHorizontalBackgroundRects(),this.createVerticalLines(),this.createHorizontalLines(),this.createTimeLineHeaderBottomLine()}setX(t){var e,i,r,o;(e=this.verticalLineGroup)===null||e===void 0||e.setAttribute("x",t),(i=this.horizontalLineGroup)===null||i===void 0||i.setAttribute("x",t),(r=this.verticalBackgroundRectsGroup)===null||r===void 0||r.setAttribute("x",t),(o=this.horizontalBackgroundRectsGroup)===null||o===void 0||o.setAttribute("x",t)}setY(t){var e,i,r,o;(e=this.verticalLineGroup)===null||e===void 0||e.setAttribute("y",t),(i=this.horizontalLineGroup)===null||i===void 0||i.setAttribute("y",t),(r=this.verticalBackgroundRectsGroup)===null||r===void 0||r.setAttribute("y",t),(o=this.horizontalBackgroundRectsGroup)===null||o===void 0||o.setAttribute("y",t)}resize(){this.width=this._scene.ganttGroup.attribute.width,this.height=this._scene.ganttGroup.attribute.height-this._scene.timelineHeader.group.attribute.height,this.group.setAttribute("width",this.width),this.group.setAttribute("height",this.height)}}let Ma=class Er{static get mode(){return Er._mode||(Er._mode=vYt()),Er._mode}static set mode(t){Er._mode=t}static RegisterCreateCanvas(t){Er.CreateCanvas=t}static RegisterLoadImage(t){Er.LoadImage=t}static GetCreateCanvasFunc(){return Er.CreateCanvas?Er.CreateCanvas:Er.mode==="worker"?(t=200,e=200)=>new OffscreenCanvas(t,e):void 0}static RegisterRequestAnimationFrame(t){Er.RequestAnimationFrame=t()}static GetRequestAnimationFrame(){if(Er.RequestAnimationFrame)return Er.RequestAnimationFrame}static RegisterCancelAnimationFrame(t){Er.CancelAnimationFrame=t()}static GetCancelAnimationFrame(){if(Er.CancelAnimationFrame)return Er.CancelAnimationFrame}};function vYt(){let n="browser";try{window.type==="node"?n="node":typeof window>"u"||window.performance?typeof window>"u"&&(n="node"):n="miniApp"}catch{n="node"}return n}Ma.dpr=0;const hm=(n,t)=>Object.prototype.toString.call(n)===`[object ${t}]`,fl=(n,t=!1)=>t?typeof n=="boolean":n===!0||n===!1||hm(n,"Boolean"),ra=n=>typeof n=="function",We=n=>n==null,Y=n=>n!=null,Bn=n=>{const t=typeof n;return n!==null&&t==="object"||t==="function"},mYt=n=>typeof n=="object"&&n!==null,q3=function(n){if(!mYt(n)||!hm(n,"Object"))return!1;if(Object.getPrototypeOf(n)===null)return!0;let t=n;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(n)===t},Li=(n,t=!1)=>{const e=typeof n;return t?e==="string":e==="string"||hm(n,"String")},Rt=n=>Array.isArray?Array.isArray(n):hm(n,"Array"),K3=function(n){return n!==null&&typeof n!="function"&&Number.isFinite(n.length)},yYt=n=>hm(n,"Date"),yt=(n,t=!1)=>{const e=typeof n;return t?e==="number":e==="number"||hm(n,"Number")},Qc=n=>yt(n)&&Number.isFinite(n),bYt=n=>({}).toString.call(n).replace(/^\[object /,"").replace(/]$/,""),_Yt=Object.prototype,CYt=function(n){const t=n&&n.constructor;return n===(typeof t=="function"&&t.prototype||_Yt)},wYt=Object.prototype.hasOwnProperty;function Cr(n){if(We(n))return!0;if(K3(n))return!n.length;const t=bYt(n);if(t==="Map"||t==="Set")return!n.size;if(CYt(n))return!Object.keys(n).length;for(const e in n)if(wYt.call(n,e))return!1;return!0}const Ww=(n,t,e)=>{const i=Li(t)?t.split("."):t;for(let r=0;r<i.length;r++)n=n?n[i[r]]:void 0;return n===void 0?e:n};function ag(n,t,e){let i;if(!Y(n)||typeof n!="object"||t)return n;const r=Rt(n),o=n.length;i=r?new Array(o):typeof n=="object"?{}:fl(n)||yt(n)||Li(n)?n:yYt(n)?new Date(+n):void 0;const a=r?void 0:Object.keys(Object(n));let s=-1;if(i)for(;++s<(a||n).length;){const l=a?a[s]:s,h=n[l];e&&e.includes(l.toString())?i[l]=h:i[l]=ag(h,t,e)}return i}function rlt(n,t,e=!1,i=!1){if(t){if(n===t)return;if(Y(t)&&typeof t=="object"){const r=Object(t),o=[];for(const l in r)o.push(l);let{length:a}=o,s=-1;for(;a--;){const l=o[++s];!Y(r[l])||typeof r[l]!="object"||i&&Rt(n[l])?olt(n,l,r[l]):xYt(n,t,l,e,i)}}}}function xYt(n,t,e,i=!1,r=!1){const o=n[e],a=t[e];let s=t[e],l=!0;if(Rt(a)){if(i)s=[];else if(Rt(o))s=o;else if(K3(o)){s=new Array(o.length);let h=-1;const u=o.length;for(;++h<u;)s[h]=o[h]}}else q3(a)?(s=o??{},typeof o!="function"&&typeof o=="object"||(s={})):l=!1;l&&rlt(s,a,i,r),olt(n,e,s)}function olt(n,t,e){(e!==void 0&&!SYt(n[t],e)||e===void 0&&!(t in n))&&(n[t]=e)}function SYt(n,t){return n===t||Number.isNaN(n)&&Number.isNaN(t)}function oi(n,...t){let e=-1;const i=t.length;for(;++e<i;)rlt(n,t[e],!0);return n}function AYt(n,t){if(!n||!q3(n))return n;const e={};return Object.keys(n).forEach((i=>{const r=n[i];let o=!1;t.forEach((a=>{(Li(a)&&a===i||a instanceof RegExp&&i.match(a))&&(o=!0)})),o||(e[i]=r)})),e}function LU(n){return Object.prototype.toString.call(n)}function EU(n){return Object.keys(n)}function Vb(n,t,e){if(n===t)return!0;if(typeof n!=typeof t||n==null||t==null)return!1;if(Number.isNaN(n)&&Number.isNaN(t))return!0;if(LU(n)!==LU(t)||ra(n)||typeof n!="object")return!1;if(Rt(n)){if(n.length!==t.length)return!1;for(let o=n.length-1;o>=0;o--)if(!Vb(n[o],t[o]))return!1;return!0}if(!q3(n))return!1;const i=EU(n),r=EU(t);if(i.length!==r.length)return!1;i.sort(),r.sort();for(let o=i.length-1;o>=0;o--)if(i[o]!=r[o])return!1;for(let o=i.length-1;o>=0;o--){const a=i[o];if(!Vb(n[a],t[a]))return!1}return!0}function TYt(n){if(K3(n))return n[n.length-1]}const MYt=(n,t)=>{var e;if(n.length===0)return;let i=n[0];for(let r=1;r<n.length;r++){const o=n[r];((e=void 0)!==null&&e!==void 0?e:o-i)>0&&(i=o)}return i},RYt=(n,t)=>{var e;if(n.length===0)return;let i=n[0];for(let r=1;r<n.length;r++){const o=n[r];((e=void 0)!==null&&e!==void 0?e:o-i)<0&&(i=o)}return i};function PYt(n,t){if(!Rt(n)||!Rt(t)||n.length!==t.length)return!1;for(let e=0;e<n.length;e++)if(n[e]!==t[e])return!1;return!0}function MA(n){return n*(Math.PI/180)}const DU=n=>{let t=n.charCodeAt(0),e=n.length===2?n.charCodeAt(1):0,i=t;return 55296<=t&&t<=56319&&56320<=e&&e<=57343&&(t&=1023,e&=1023,i=t<<10|e,i+=65536),i===12288||65281<=i&&i<=65376||65504<=i&&i<=65510?"F":i===8361||65377<=i&&i<=65470||65474<=i&&i<=65479||65482<=i&&i<=65487||65490<=i&&i<=65495||65498<=i&&i<=65500||65512<=i&&i<=65518?"H":4352<=i&&i<=4447||4515<=i&&i<=4519||4602<=i&&i<=4607||9001<=i&&i<=9002||11904<=i&&i<=11929||11931<=i&&i<=12019||12032<=i&&i<=12245||12272<=i&&i<=12283||12289<=i&&i<=12350||12353<=i&&i<=12438||12441<=i&&i<=12543||12549<=i&&i<=12589||12593<=i&&i<=12686||12688<=i&&i<=12730||12736<=i&&i<=12771||12784<=i&&i<=12830||12832<=i&&i<=12871||12880<=i&&i<=13054||13056<=i&&i<=19903||19968<=i&&i<=42124||42128<=i&&i<=42182||43360<=i&&i<=43388||44032<=i&&i<=55203||55216<=i&&i<=55238||55243<=i&&i<=55291||63744<=i&&i<=64255||65040<=i&&i<=65049||65072<=i&&i<=65106||65108<=i&&i<=65126||65128<=i&&i<=65131||110592<=i&&i<=110593||127488<=i&&i<=127490||127504<=i&&i<=127546||127552<=i&&i<=127560||127568<=i&&i<=127569||131072<=i&&i<=194367||177984<=i&&i<=196605||196608<=i&&i<=262141?"W":32<=i&&i<=126||162<=i&&i<=163||165<=i&&i<=166||i===172||i===175||10214<=i&&i<=10221||10629<=i&&i<=10630?"Na":i===161||i===164||167<=i&&i<=168||i===170||173<=i&&i<=174||176<=i&&i<=180||182<=i&&i<=186||188<=i&&i<=191||i===198||i===208||215<=i&&i<=216||222<=i&&i<=225||i===230||232<=i&&i<=234||236<=i&&i<=237||i===240||242<=i&&i<=243||247<=i&&i<=250||i===252||i===254||i===257||i===273||i===275||i===283||294<=i&&i<=295||i===299||305<=i&&i<=307||i===312||319<=i&&i<=322||i===324||328<=i&&i<=331||i===333||338<=i&&i<=339||358<=i&&i<=359||i===363||i===462||i===464||i===466||i===468||i===470||i===472||i===474||i===476||i===593||i===609||i===708||i===711||713<=i&&i<=715||i===717||i===720||728<=i&&i<=731||i===733||i===735||768<=i&&i<=879||913<=i&&i<=929||931<=i&&i<=937||945<=i&&i<=961||963<=i&&i<=969||i===1025||1040<=i&&i<=1103||i===1105||i===8208||8211<=i&&i<=8214||8216<=i&&i<=8217||8220<=i&&i<=8221||8224<=i&&i<=8226||8228<=i&&i<=8231||i===8240||8242<=i&&i<=8243||i===8245||i===8251||i===8254||i===8308||i===8319||8321<=i&&i<=8324||i===8364||i===8451||i===8453||i===8457||i===8467||i===8470||8481<=i&&i<=8482||i===8486||i===8491||8531<=i&&i<=8532||8539<=i&&i<=8542||8544<=i&&i<=8555||8560<=i&&i<=8569||i===8585||8592<=i&&i<=8601||8632<=i&&i<=8633||i===8658||i===8660||i===8679||i===8704||8706<=i&&i<=8707||8711<=i&&i<=8712||i===8715||i===8719||i===8721||i===8725||i===8730||8733<=i&&i<=8736||i===8739||i===8741||8743<=i&&i<=8748||i===8750||8756<=i&&i<=8759||8764<=i&&i<=8765||i===8776||i===8780||i===8786||8800<=i&&i<=8801||8804<=i&&i<=8807||8810<=i&&i<=8811||8814<=i&&i<=8815||8834<=i&&i<=8835||8838<=i&&i<=8839||i===8853||i===8857||i===8869||i===8895||i===8978||9312<=i&&i<=9449||9451<=i&&i<=9547||9552<=i&&i<=9587||9600<=i&&i<=9615||9618<=i&&i<=9621||9632<=i&&i<=9633||9635<=i&&i<=9641||9650<=i&&i<=9651||9654<=i&&i<=9655||9660<=i&&i<=9661||9664<=i&&i<=9665||9670<=i&&i<=9672||i===9675||9678<=i&&i<=9681||9698<=i&&i<=9701||i===9711||9733<=i&&i<=9734||i===9737||9742<=i&&i<=9743||9748<=i&&i<=9749||i===9756||i===9758||i===9792||i===9794||9824<=i&&i<=9825||9827<=i&&i<=9829||9831<=i&&i<=9834||9836<=i&&i<=9837||i===9839||9886<=i&&i<=9887||9918<=i&&i<=9919||9924<=i&&i<=9933||9935<=i&&i<=9953||i===9955||9960<=i&&i<=9983||i===10045||i===10071||10102<=i&&i<=10111||11093<=i&&i<=11097||12872<=i&&i<=12879||57344<=i&&i<=63743||65024<=i&&i<=65039||i===65533||127232<=i&&i<=127242||127248<=i&&i<=127277||127280<=i&&i<=127337||127344<=i&&i<=127386||917760<=i&&i<=917999||983040<=i&&i<=1048573||1048576<=i&&i<=1114109?"A":"N"};function BYt(n,t={},e){e||(e=1);const{fontStyle:i=t.fontStyle,fontVariant:r=t.fontVariant,fontWeight:o=t.fontWeight,fontSize:a=t.fontSize,fontFamily:s=t.fontFamily}=n;return(i?i+" ":"")+(r?r+" ":"")+(o?o+" ":"")+a*e+"px "+(s||"sans-serif")}class Vo{constructor(t,e){this._numberCharSize=null,this._fullCharSize=null,this._letterCharSize=null,this._specialCharSizeMap={},this._canvas=null,this._context=null,this._contextSaved=!1,this._notSupportCanvas=!1,this._notSupportVRender=!1,this._userSpec={},this.specialCharSet=`-/: .,@%'"~`,this._option=t,this._userSpec=e??{},this.textSpec=this._initSpec(),Y(t.specialCharSet)&&(this.specialCharSet=t.specialCharSet),this._standardMethod=Y(t.getTextBounds)?this.fullMeasure.bind(this):this.measureWithNaiveCanvas.bind(this)}initContext(){if(this._notSupportCanvas)return!1;if(We(this._canvas)&&(Y(this._option.getCanvasForMeasure)&&(this._canvas=this._option.getCanvasForMeasure()),We(this._canvas)&&typeof window<"u"&&window.document!==void 0&&globalThis&&Y(globalThis.document)&&(this._canvas=globalThis.document.createElement("canvas"))),We(this._context)&&Y(this._canvas)){const t=this._canvas.getContext("2d");Y(t)&&(t.save(),t.font=BYt(this.textSpec),this._contextSaved=!0,this._context=t)}return!We(this._context)||(this._notSupportCanvas=!0,!1)}_initSpec(){var t,e,i;const{defaultFontParams:r={}}=this._option,{fontStyle:o=r.fontStyle,fontVariant:a=r.fontVariant,fontWeight:s=(t=r.fontWeight)!==null&&t!==void 0?t:"normal",fontSize:l=(e=r.fontSize)!==null&&e!==void 0?e:12,fontFamily:h=(i=r.fontFamily)!==null&&i!==void 0?i:"sans-serif",align:u,textAlign:d=u??"center",baseline:c,textBaseline:f=c??"middle",ellipsis:g,limit:p}=this._userSpec;let{lineHeight:v=l}=this._userSpec;if(Li(v)&&v[v.length-1]==="%"){const m=Number.parseFloat(v.substring(0,v.length-1))/100;v=l*m}return{fontStyle:o,fontVariant:a,fontFamily:h,fontSize:l,fontWeight:s,textAlign:d,textBaseline:f,ellipsis:g,limit:p,lineHeight:v}}measure(t,e){switch(e){case"vrender":case"canopus":return this.fullMeasure(t);case"canvas":return this.measureWithNaiveCanvas(t);case"simple":return this.quickMeasureWithoutCanvas(t);default:return this.quickMeasure(t)}}fullMeasure(t){if(We(t))return{width:0,height:0};if(We(this._option.getTextBounds)||!this._notSupportVRender)return this.measureWithNaiveCanvas(t);const{fontFamily:e,fontSize:i,fontWeight:r,textAlign:o,textBaseline:a,ellipsis:s,limit:l,lineHeight:h}=this.textSpec;let u;try{const d=this._option.getTextBounds({text:t,fontFamily:e,fontSize:i,fontWeight:r,textAlign:o,textBaseline:a,ellipsis:!!s,maxLineWidth:l||1/0,lineHeight:h});u={width:d.width(),height:d.height()}}catch{this._notSupportVRender=!0,u=this.measureWithNaiveCanvas(t)}return u}measureWithNaiveCanvas(t){return this._measureReduce(t,this._measureWithNaiveCanvas.bind(this))}_measureWithNaiveCanvas(t){var e;if(!this.initContext())return this._quickMeasureWithoutCanvas(t);const i=this._context.measureText(t),{fontSize:r,lineHeight:o}=this.textSpec;return{width:i.width,height:(e=o)!==null&&e!==void 0?e:r,fontBoundingBoxAscent:i.fontBoundingBoxAscent,fontBoundingBoxDescent:i.fontBoundingBoxDescent}}quickMeasure(t){return this._measureReduce(t,this._quickMeasure.bind(this))}_quickMeasure(t){const e={width:0,height:0};for(let i=0;i<t.length;i++){const r=t[i];let o=this._measureSpecialChar(r);We(o)&&Vo.NUMBERS_CHAR_SET.includes(r)&&(o=this._measureNumberChar()),We(o)&&["F","W"].includes(DU(r))&&(o=this._measureFullSizeChar()),We(o)&&(o=this._measureLetterChar()),e.width+=o.width,e.height=Math.max(e.height,o.height),!We(o.fontBoundingBoxAscent)&&(e.fontBoundingBoxAscent=o.fontBoundingBoxAscent),!We(o.fontBoundingBoxDescent)&&(e.fontBoundingBoxDescent=o.fontBoundingBoxDescent)}return e}quickMeasureWithoutCanvas(t){return this._measureReduce(t,this._quickMeasureWithoutCanvas.bind(this))}_quickMeasureWithoutCanvas(t){var e;const i={width:0,height:0},{fontSize:r,lineHeight:o}=this.textSpec;for(let a=0;a<t.length;a++){const s=t[a],l=["F","W"].includes(DU(s))?1:.53;i.width+=l*r}return i.height=(e=o)!==null&&e!==void 0?e:r,i}_measureReduce(t,e){var i;const{fontSize:r,lineHeight:o}=this.textSpec,a={width:0,height:0};if(We(t))return a;if(Rt(t)){const s=t.filter(Y).map((l=>l.toString()));return s.length===0?a:s.length===1?e(s[0]):{width:s.reduce(((l,h)=>Math.max(l,e(h).width)),0),height:s.length*(((i=o)!==null&&i!==void 0?i:r)+1)+1}}return e(t.toString())}_measureNumberChar(){if(We(this._numberCharSize)){const t=this._standardMethod(Vo.NUMBERS_CHAR_SET);this._numberCharSize={width:t.width/Vo.NUMBERS_CHAR_SET.length,height:t.height,fontBoundingBoxAscent:t.fontBoundingBoxAscent,fontBoundingBoxDescent:t.fontBoundingBoxDescent}}return this._numberCharSize}_measureFullSizeChar(){return We(this._fullCharSize)&&(this._fullCharSize=this._standardMethod(Vo.FULL_SIZE_CHAR)),this._fullCharSize}_measureLetterChar(){if(We(this._letterCharSize)){const t=this._standardMethod(Vo.ALPHABET_CHAR_SET);this._letterCharSize={width:t.width/Vo.ALPHABET_CHAR_SET.length,height:t.height,fontBoundingBoxAscent:t.fontBoundingBoxAscent,fontBoundingBoxDescent:t.fontBoundingBoxDescent}}return this._letterCharSize}_measureSpecialChar(t){return Y(this._specialCharSizeMap[t])?this._specialCharSizeMap[t]:this.specialCharSet.includes(t)?(this._specialCharSizeMap[t]=this._standardMethod(t),this._specialCharSizeMap[t]):null}release(){Y(this._canvas)&&(this._canvas=null),Y(this._context)&&(this._contextSaved&&(this._context.restore(),this._contextSaved=!1),this._context=null)}}Vo.ALPHABET_CHAR_SET="abcdefghijklmnopqrstuvwxyz",Vo.NUMBERS_CHAR_SET="0123456789",Vo.FULL_SIZE_CHAR="";function kYt(n,t,e){const{x1:i,y1:r,x2:o,y2:a}=t;return e.onlyTranslate()?(n!==t&&n.setValue(t.x1,t.y1,t.x2,t.y2),n.translate(e.e,e.f),t):(n.clear(),n.add(e.a*i+e.c*r+e.e,e.b*i+e.d*r+e.f),n.add(e.a*o+e.c*r+e.e,e.b*o+e.d*r+e.f),n.add(e.a*o+e.c*a+e.e,e.b*o+e.d*a+e.f),n.add(e.a*i+e.c*a+e.e,e.b*i+e.d*a+e.f),t)}class gd{constructor(t){t?this.setValue(t.x1,t.y1,t.x2,t.y2):this.clear()}clone(){return new gd(this)}clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this}empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE}equals(t){return this.x1===t.x1&&this.y1===t.y1&&this.x2===t.x2&&this.y2===t.y2}setValue(t=0,e=0,i=0,r=0){return this.x1=t,this.y1=e,this.x2=i,this.y2=r,this}set(t=0,e=0,i=0,r=0){return i<t?(this.x2=t,this.x1=i):(this.x1=t,this.x2=i),r<e?(this.y2=e,this.y1=r):(this.y1=e,this.y2=r),this}add(t=0,e=0){return t<this.x1&&(this.x1=t),e<this.y1&&(this.y1=e),t>this.x2&&(this.x2=t),e>this.y2&&(this.y2=e),this}expand(t=0){return Rt(t)?(this.y1-=t[0],this.x2+=t[1],this.y2+=t[2],this.x1-=t[3]):(this.x1-=t,this.y1-=t,this.x2+=t,this.y2+=t),this}round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this}translate(t=0,e=0){return this.x1+=t,this.x2+=t,this.y1+=e,this.y2+=e,this}rotate(t=0,e=0,i=0){const r=this.rotatedPoints(t,e,i);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])}scale(t=0,e=0,i=0,r=0){const o=this.scalePoints(t,e,i,r);return this.clear().add(o[0],o[1]).add(o[2],o[3])}union(t){return t.x1<this.x1&&(this.x1=t.x1),t.y1<this.y1&&(this.y1=t.y1),t.x2>this.x2&&(this.x2=t.x2),t.y2>this.y2&&(this.y2=t.y2),this}intersect(t){return t.x1>this.x1&&(this.x1=t.x1),t.y1>this.y1&&(this.y1=t.y1),t.x2<this.x2&&(this.x2=t.x2),t.y2<this.y2&&(this.y2=t.y2),this}encloses(t){return t&&this.x1<=t.x1&&this.x2>=t.x2&&this.y1<=t.y1&&this.y2>=t.y2}alignsWith(t){return t&&(this.x1===t.x1||this.x2===t.x2||this.y1===t.y1||this.y2===t.y2)}intersects(t){return t&&!(this.x2<t.x1||this.x1>t.x2||this.y2<t.y1||this.y1>t.y2)}contains(t=0,e=0){return!(t<this.x1||t>this.x2||e<this.y1||e>this.y2)}containsPoint(t){return!(t.x<this.x1||t.x>this.x2||t.y<this.y1||t.y>this.y2)}width(){return this.empty()?0:this.x2-this.x1}height(){return this.empty()?0:this.y2-this.y1}scaleX(t=0){return this.x1*=t,this.x2*=t,this}scaleY(t=0){return this.y1*=t,this.y2*=t,this}transformWithMatrix(t){return kYt(this,this,t),this}copy(t){return this.x1=t.x1,this.y1=t.y1,this.x2=t.x2,this.y2=t.y2,this}rotatedPoints(t,e,i){const{x1:r,y1:o,x2:a,y2:s}=this,l=Math.cos(t),h=Math.sin(t),u=e-e*l+i*h,d=i-e*h-i*l;return[l*r-h*o+u,h*r+l*o+d,l*r-h*s+u,h*r+l*s+d,l*a-h*o+u,h*a+l*o+d,l*a-h*s+u,h*a+l*s+d]}scalePoints(t,e,i,r){const{x1:o,y1:a,x2:s,y2:l}=this;return[t*o+(1-t)*i,e*a+(1-e)*r,t*s+(1-t)*i,e*l+(1-e)*r]}}class yy extends gd{}class LYt{constructor(t){this._gantt=t,this.createScrollBar(t.tableNoFrameWidth,t.tableNoFrameHeight-t.getAllHeaderRowsHeight())}createScrollBar(t,e){var i,r;const o=this._gantt.parsedOptions.scrollStyle.scrollRailColor,a=this._gantt.parsedOptions.scrollStyle.scrollSliderColor,s=this._gantt.parsedOptions.scrollStyle.scrollSliderCornerRadius,l=this._gantt.parsedOptions.scrollStyle.width;let h;h=Y(s)?{cornerRadius:s,fill:a}:{fill:a},(i=this._gantt.parsedOptions.scrollStyle)===null||i===void 0||i.visible,(r=this._gantt.parsedOptions.scrollStyle)===null||r===void 0||r.hoverOn,this.hScrollBar=new Gh({direction:"horizontal",x:2*-t,y:2*-e,width:t,height:l,padding:0,railStyle:{fill:o},sliderStyle:h,range:[0,.1],visible:!1}),this.hScrollBar.render(),this.hScrollBar.hideAll(),this.vScrollBar=new Gh({direction:"vertical",x:2*-t,y:2*-e,width:l,height:e,padding:0,railStyle:{fill:o},sliderStyle:h,range:[0,.1],visible:!1}),this.vScrollBar.render(),this.vScrollBar.hideAll()}refresh(){}hideVerticalScrollBar(){const t=this._gantt.parsedOptions.scrollStyle.visible;t!=="focus"&&t!=="scrolling"||(this.vScrollBar.setAttribute("visible",!1),this.vScrollBar.hideAll(),this._gantt.scenegraph.updateNextFrame())}showVerticalScrollBar(t){const e=this._gantt.parsedOptions.scrollStyle.visible;e!=="focus"&&e!=="scrolling"||(this.vScrollBar.setAttribute("visible",!0),this.vScrollBar.showAll(),this._gantt.scenegraph.updateNextFrame(),t&&(clearTimeout(this._clearVerticalScrollBar),this._clearVerticalScrollBar=setTimeout((()=>{this.hideVerticalScrollBar()}),1e3)))}hideHorizontalScrollBar(){const t=this._gantt.parsedOptions.scrollStyle.visible;t!=="focus"&&t!=="scrolling"||(this.hScrollBar.setAttribute("visible",!1),this.hScrollBar.hideAll(),this._gantt.scenegraph.updateNextFrame())}showHorizontalScrollBar(t){const e=this._gantt.parsedOptions.scrollStyle.visible;e!=="focus"&&e!=="scrolling"||(this.hScrollBar.setAttribute("visible",!0),this.hScrollBar.showAll(),this._gantt.scenegraph.updateNextFrame(),t&&(clearTimeout(this._clearHorizontalScrollBar),this._clearHorizontalScrollBar=setTimeout((()=>{this.hideHorizontalScrollBar()}),1e3)))}updateVerticalScrollBarPos(t){const e=this.vScrollBar.attribute.range,i=e[1]-e[0],r=t*(1-i);this.vScrollBar.setAttribute("range",[r,r+i]);const o=this.vScrollBar.AABBBounds&&this.vScrollBar.globalAABBBounds;this.vScrollBar._viewPosition={x:o.x1,y:o.y1}}updateHorizontalScrollBarPos(t){const e=this.hScrollBar.attribute.range,i=e[1]-e[0],r=t*(1-i);this.hScrollBar.setAttribute("range",[r,r+i]);const o=this.hScrollBar.AABBBounds&&this.hScrollBar.globalAABBBounds;this.hScrollBar._viewPosition={x:o.x1,y:o.y1}}updateScrollBar(){const t=this._gantt.stateManager.scroll.horizontalBarPos,e=this._gantt.stateManager.scroll.verticalBarPos,i=this._gantt.parsedOptions.scrollStyle,r=i?.width,o=i?.visible,a=Math.ceil(this._gantt.scenegraph.ganttGroup.attribute.width),s=Math.ceil(this._gantt.scenegraph.ganttGroup.attribute.height),l=this._gantt.getAllRowsHeight(),h=this._gantt.getAllDateColsWidth(),u=this._gantt.getAllHeaderRowsHeight();if(h>a){const d=Math.min(s,l),c=Math.max(.05,a/h),f=i.hoverOn;let g=0;g=i.barToSide?this._gantt.tableNoFrameHeight-(f?r:-this._gantt.scenegraph.ganttGroup.attribute.y)+this._gantt.tableY:d-(f?r:-this._gantt.scenegraph.ganttGroup.attribute.y)+this._gantt.tableY,this.hScrollBar.setAttributes({x:this._gantt.scenegraph.ganttGroup.attribute.x,y:g,width:a,range:[0,c],visible:o==="always"});const p=this.hScrollBar.AABBBounds&&this.hScrollBar.globalAABBBounds;this.hScrollBar._viewPosition={x:p.x1,y:p.y1},o==="always"&&this.hScrollBar.showAll()}else this.hScrollBar.setAttributes({x:2*-this._gantt.tableNoFrameWidth,y:2*-this._gantt.tableNoFrameHeight,width:0,visible:!1});if(l>s){const d=Math.min(a,h)+this._gantt.scenegraph.ganttGroup.attribute.x,c=Math.max(.05,(s-u)/(l-u));let f=0;const g=this._gantt.parsedOptions.scrollStyle.hoverOn;f=this._gantt.parsedOptions.scrollStyle.barToSide?this._gantt.tableNoFrameWidth-(g?r:-this._gantt.scenegraph.ganttGroup.attribute.x):d-(g?r:-this._gantt.scenegraph.ganttGroup.attribute.x),this.vScrollBar.setAttributes({x:f,y:u+(g?0:this._gantt.scenegraph.ganttGroup.attribute.y)+this._gantt.tableY,height:s-u,range:[0,c],visible:o==="always"});const p=this.vScrollBar.AABBBounds&&this.vScrollBar.globalAABBBounds;this.vScrollBar._viewPosition={x:p.x1,y:p.y1},o==="always"&&this.vScrollBar.showAll()}else this.vScrollBar.setAttributes({x:2*-this._gantt.tableNoFrameWidth,y:2*-this._gantt.tableNoFrameHeight,height:0,visible:!1});this._gantt.stateManager.setScrollLeft(t),this._gantt.stateManager.setScrollTop(e)}}function FO(n,t,e,i=!0){var r;let{deltaX:o,deltaY:a}=n;n.shiftKey&&n.deltaY&&(o=a,a=0);const[s,l]=EYt(o,a,{horizontal:1,vertical:1});s&&(t.setScrollLeft(t.scroll.horizontalBarPos+s),e.scenegraph.scrollbarComponent.showHorizontalScrollBar(!0)),l&&(t.setScrollTop(t.scroll.verticalBarPos+l),e.scenegraph.scrollbarComponent.showVerticalScrollBar(!0)),i&&t.resetInteractionState(),!((r=n.nativeEvent)===null||r===void 0)&&r.cancelable&&(t._gantt.parsedOptions.overscrollBehavior==="none"||Math.abs(a)>=Math.abs(o)&&a!==0&&alt(a,t)||Math.abs(a)<=Math.abs(o)&&o!==0&&slt(o,t))&&n.preventDefault()}function EYt(n,t,e){var i,r;const o=Math.abs(n/t),a=o<=.5?0:n,s=o>2?0:t;return[Math.ceil(a*((i=e.horizontal)!==null&&i!==void 0?i:0)),Math.ceil(s*((r=e.vertical)!==null&&r!==void 0?r:0))]}function alt(n,t){return t._gantt.getAllRowsHeight()-t._gantt.scenegraph.height!=0&&!DYt(n,t)&&!IYt(n,t)}function slt(n,t){return t._gantt.getAllDateColsWidth()-t._gantt.scenegraph.width!=0&&!OYt(n,t)&&!HYt(n,t)}function DYt(n,t){return t._gantt.getAllRowsHeight()-t._gantt.scenegraph.height!==0&&n<=0&&t.scroll.verticalBarPos<1}function IYt(n,t){const e=t._gantt.getAllRowsHeight()-t._gantt.scenegraph.height;return e!==0&&n>=0&&Math.abs(t.scroll.verticalBarPos-e)<1}function OYt(n,t){return t._gantt.getAllDateColsWidth()-t._gantt.scenegraph.width!==0&&n<=0&&t.scroll.horizontalBarPos<1}function HYt(n,t){const e=t._gantt.getAllDateColsWidth()-t._gantt.scenegraph.width;return e!==0&&n>=0&&Math.abs(t.scroll.horizontalBarPos-e)<1}function zYt(n){const t=n._gantt,e=t.stateManager,i=t.scenegraph;i.scrollbarComponent.vScrollBar.addEventListener("pointerover",(a=>{i.scrollbarComponent.showVerticalScrollBar()})),i.scrollbarComponent.hScrollBar.addEventListener("pointerover",(a=>{i.scrollbarComponent.showHorizontalScrollBar()})),i.scrollbarComponent.vScrollBar.addEventListener("pointerout",(a=>{e.interactionState!==Qe.scrolling&&i.scrollbarComponent.hideVerticalScrollBar()})),i.scrollbarComponent.hScrollBar.addEventListener("pointerout",(a=>{e.interactionState!==Qe.scrolling&&i.scrollbarComponent.hideHorizontalScrollBar()})),i.scrollbarComponent.vScrollBar.addEventListener("pointermove",(a=>{a.stopPropagation()})),i.scrollbarComponent.vScrollBar.addEventListener("scrollDown",(a=>{i._gantt.eventManager.isDown=!0})),i.scrollbarComponent.vScrollBar.addEventListener("pointerup",(()=>{i._gantt.eventManager.isDraging=!1,e.interactionState===Qe.scrolling&&e.updateInteractionState(Qe.default)})),i.scrollbarComponent.vScrollBar.addEventListener("pointerupoutside",(()=>{e.interactionState===Qe.scrolling&&e.updateInteractionState(Qe.default)})),i.scrollbarComponent.vScrollBar.addEventListener("scrollUp",(a=>{i._gantt.eventManager.isDraging=!1})),i.scrollbarComponent.hScrollBar.addEventListener("pointermove",(a=>{a.stopPropagation()})),i.scrollbarComponent.hScrollBar.addEventListener("pointerdown",(a=>{a.stopPropagation()})),i.scrollbarComponent.hScrollBar.addEventListener("scrollDown",(a=>{i._gantt.eventManager.isDown=!0,e.interactionState!==Qe.scrolling&&e.updateInteractionState(Qe.scrolling)})),i.scrollbarComponent.hScrollBar.addEventListener("pointerup",(()=>{e.interactionState===Qe.scrolling&&e.updateInteractionState(Qe.default)})),i.scrollbarComponent.hScrollBar.addEventListener("pointerupoutside",(()=>{e.interactionState===Qe.scrolling&&e.updateInteractionState(Qe.default)})),i.scrollbarComponent.hScrollBar.addEventListener("scrollUp",(a=>{i._gantt.eventManager.isDraging=!1}));const r=kU(e.updateVerticalScrollBar,20),o=kU(e.updateHorizontalScrollBar,20);i.scrollbarComponent.vScrollBar.addEventListener("scrollDrag",(a=>{i._gantt.eventManager.isDown&&(i._gantt.eventManager.isDraging=!0),e.interactionState!==Qe.scrolling&&e.updateInteractionState(Qe.scrolling);const s=a.detail.value[0]/(1-a.detail.value[1]+a.detail.value[0]);r(s,a)})),i.scrollbarComponent.hScrollBar.addEventListener("scrollDrag",(a=>{i._gantt.eventManager.isDown&&(i._gantt.eventManager.isDraging=!0),e.fastScrolling=!0,e.interactionState!==Qe.scrolling&&e.updateInteractionState(Qe.scrolling);const s=a.detail.value[0]/(1-a.detail.value[1]+a.detail.value[0]);o(s)}))}const RA={barColor:"blue",completedBarColor:"gray",width:30,cornerRadius:3,borderWidth:0,fontFamily:"Arial",fontSize:14};function FYt(n){RA.width=n}const NYt=typeof window>"u"||window.window===void 0;function Ep(n,t){const e=n+t.stateManager.scroll.horizontalBarPos,i=t.getDateColWidth(0);return Math.floor((e-i)/t.parsedOptions.timelineColWidth)+1}function Z3(n){var t,e,i,r,o;return n?n===!0?[{date:zi().toLocaleDateString(),content:"",scrollToMarkLine:!0,position:"left",style:{lineColor:"red",lineWidth:1}}]:Array.isArray(n)?n.map(((a,s)=>{var l,h,u,d;return Object.assign(Object.assign({},a),{date:a.date,scrollToMarkLine:a.scrollToMarkLine,position:(l=a.position)!==null&&l!==void 0?l:"left",style:{lineColor:((h=a.style)===null||h===void 0?void 0:h.lineColor)||"red",lineWidth:((u=a.style)===null||u===void 0?void 0:u.lineWidth)||1,lineDash:(d=a.style)===null||d===void 0?void 0:d.lineDash}})})):[Object.assign(Object.assign({},n),{date:n.date,scrollToMarkLine:(t=n.scrollToMarkLine)===null||t===void 0||t,position:(e=n.position)!==null&&e!==void 0?e:"left",style:{lineColor:((i=n.style)===null||i===void 0?void 0:i.lineColor)||"red",lineWidth:((r=n.style)===null||r===void 0?void 0:r.lineWidth)||1,lineDash:(o=n.style)===null||o===void 0?void 0:o.lineDash}})]:[]}function WYt(n){var t;return n?.hoverOn||n?.horizontalVisible&&n?.horizontalVisible==="none"||!n?.horizontalVisible&&n?.visible==="none"?0:(t=n?.width)!==null&&t!==void 0?t:7}function VYt(n){var t;return n?.hoverOn||n?.verticalVisible&&n?.verticalVisible==="none"||!n?.verticalVisible&&n?.visible==="none"?0:(t=n?.width)!==null&&t!==void 0?t:7}function IU(n){var t,e,i,r,o,a,s,l,h,u,d,c,f,g,p,v,m,y,b,_,w,C,x,S,A,T,M,R,L,B,P,k,E,D,I,O,H,F,N,$,V,X,Z,tt,K,rt,q,it,nt,W,G,j,U,J,ot,st,lt,ft,vt,pt,bt,me,He,Ai,Pe,On,en,Xi,re,wi,ii,qi,Gr,kt,ki,Mt,pm,sg,$r,Td,A2,T2,M2,R2,P2,B2,k2,L2,E2,D2,I2,O2,H2,z2,F2,N2,W2,V2,G2,$2,j2,U2,Y2,X2,q2,K2,Z2,J2,Q2,tR,eR,iR;const dt=n.options;n.parsedOptions.tasksShowMode=(t=dt?.tasksShowMode)!==null&&t!==void 0?t:_t.Tasks_Separate,n.parsedOptions.pixelRatio=(e=dt?.pixelRatio)!==null&&e!==void 0?e:1,n.parsedOptions.rowHeight=(i=dt?.rowHeight)!==null&&i!==void 0?i:40,n.parsedOptions.timelineColWidth=(o=(r=dt?.timelineHeader)===null||r===void 0?void 0:r.colWidth)!==null&&o!==void 0?o:60,n.parsedOptions.startDateField=(s=(a=dt.taskBar)===null||a===void 0?void 0:a.startDateField)!==null&&s!==void 0?s:"startDate",n.parsedOptions.endDateField=(h=(l=dt.taskBar)===null||l===void 0?void 0:l.endDateField)!==null&&h!==void 0?h:"endDate",n.parsedOptions.progressField=(d=(u=dt.taskBar)===null||u===void 0?void 0:u.progressField)!==null&&d!==void 0?d:"progress",n.parsedOptions.projectSubTasksExpandable=(c=dt?.projectSubTasksExpandable)===null||c===void 0||c;const{unit:nR,startOfWeek:MN,step:put}=n.parsedOptions.reverseSortedTimelineScales[0];n.parsedOptions.minDate=dt?.minDate?$f(new Date(dt.minDate),nR,MN):void 0,n.parsedOptions.maxDate=dt?.maxDate&&(!((f=n.parsedOptions)===null||f===void 0)&&f.minDate)?Lv((g=n.parsedOptions)===null||g===void 0?void 0:g.minDate,new Date(dt.maxDate),nR,put):void 0,n.parsedOptions._minDateTime=(p=n.parsedOptions.minDate)===null||p===void 0?void 0:p.getTime(),n.parsedOptions._maxDateTime=(v=n.parsedOptions.maxDate)===null||v===void 0?void 0:v.getTime(),n.parsedOptions.overscrollBehavior=(m=dt?.overscrollBehavior)!==null&&m!==void 0?m:"auto",n.parsedOptions.underlayBackgroundColor=(y=dt?.underlayBackgroundColor)!==null&&y!==void 0?y:"#FFF",n.parsedOptions.scrollStyle=Object.assign({},{scrollRailColor:"rgba(100, 100, 100, 0.2)",scrollSliderColor:"rgba(100, 100, 100, 0.5)",scrollSliderCornerRadius:4,width:10,visible:"always",hoverOn:!0,barToSide:!1},dt?.scrollStyle),n.parsedOptions.timelineHeaderHorizontalLineStyle=(b=dt?.timelineHeader)===null||b===void 0?void 0:b.horizontalLine,n.parsedOptions.timelineHeaderVerticalLineStyle=(_=dt?.timelineHeader)===null||_===void 0?void 0:_.verticalLine,n.parsedOptions.timelineHeaderBackgroundColor=(w=dt?.timelineHeader)===null||w===void 0?void 0:w.backgroundColor,n.parsedOptions.timeLineHeaderRowHeights=[],n.parsedOptions.timelineHeaderStyles=[];for(let Fs=0;Fs<n.parsedOptions.sortedTimelineScales.length;Fs++){const vut=n.parsedOptions.sortedTimelineScales[Fs].style;n.parsedOptions.timelineHeaderStyles.push(Object.assign({fontSize:20,fontWeight:"bold",textAlign:"center",textBaseline:"middle",color:"#000",backgroundColor:"#fff"},vut)),n.parsedOptions.timeLineHeaderRowHeights.push((x=(C=n.parsedOptions.sortedTimelineScales[Fs].rowHeight)!==null&&C!==void 0?C:dt?.headerRowHeight)!==null&&x!==void 0?x:40)}n.parsedOptions.grid=Object.assign({},dt?.grid),FYt(3*n.parsedOptions.rowHeight/4),n.parsedOptions.taskBarStyle=!((S=dt?.taskBar)===null||S===void 0)&&S.barStyle&&typeof((A=dt?.taskBar)===null||A===void 0?void 0:A.barStyle)=="function"?dt.taskBar.barStyle:Object.assign({},RA,(T=dt?.taskBar)===null||T===void 0?void 0:T.barStyle),n.parsedOptions.projectBarStyle=!((M=dt?.taskBar)===null||M===void 0)&&M.projectStyle&&typeof((R=dt?.taskBar)===null||R===void 0?void 0:R.projectStyle)=="function"?dt.taskBar.projectStyle:!((L=dt?.taskBar)===null||L===void 0)&&L.projectStyle?Object.assign({},RA,(B=dt?.taskBar)===null||B===void 0?void 0:B.projectStyle):n.parsedOptions.taskBarStyle,n.parsedOptions.taskBarMilestoneStyle=Object.assign(typeof n.parsedOptions.taskBarStyle=="function"?{}:{width:n.parsedOptions.taskBarStyle.width,borderColor:n.parsedOptions.taskBarStyle.borderColor,borderLineWidth:(P=n.parsedOptions.taskBarStyle.borderLineWidth)!==null&&P!==void 0?P:1,fillColor:n.parsedOptions.taskBarStyle.barColor,cornerRadius:0},{labelTextStyle:{fontSize:16,color:"red",fontFamily:"Arial",padding:4}},(k=dt?.taskBar)===null||k===void 0?void 0:k.milestoneStyle),n.parsedOptions.taskBarMilestoneHypotenuse=n.parsedOptions.taskBarMilestoneStyle.width*Math.sqrt(2),n.parsedOptions.dateFormat=dt?.dateFormat,n.parsedOptions.taskBarHoverStyle=Object.assign({barOverlayColor:"rgba(99, 144, 0, 0.4)"},(E=dt?.taskBar)===null||E===void 0?void 0:E.hoverBarStyle),n.parsedOptions.taskBarSelectable=(I=(D=dt?.taskBar)===null||D===void 0?void 0:D.selectable)===null||I===void 0||I,n.parsedOptions.taskBarSelectedStyle=Object.assign(typeof n.parsedOptions.taskBarStyle=="function"?{shadowBlur:6,shadowOffsetX:0,shadowOffsetY:0,borderLineWidth:1}:{shadowBlur:6,shadowOffsetX:0,shadowOffsetY:0,shadowColor:n.parsedOptions.taskBarStyle.barColor,borderColor:n.parsedOptions.taskBarStyle.barColor,borderLineWidth:1},(O=dt?.taskBar)===null||O===void 0?void 0:O.selectedBarStyle),n.parsedOptions.taskBarLabelText=(F=(H=dt?.taskBar)===null||H===void 0?void 0:H.labelText)!==null&&F!==void 0?F:"",n.parsedOptions.taskBarMoveable=($=(N=dt?.taskBar)===null||N===void 0?void 0:N.moveable)===null||$===void 0||$,n.parsedOptions.moveTaskBarToExtendDateRange=(X=(V=dt?.taskBar)===null||V===void 0?void 0:V.moveToExtendDateRange)===null||X===void 0||X,n.parsedOptions.taskBarResizable=(tt=(Z=dt?.taskBar)===null||Z===void 0?void 0:Z.resizable)===null||tt===void 0||tt,n.parsedOptions.taskBarProgressAdjustable=(rt=(K=dt?.taskBar)===null||K===void 0?void 0:K.progressAdjustable)!==null&&rt!==void 0&&rt,n.parsedOptions.taskBarDragOrder=(it=(q=dt?.taskBar)===null||q===void 0?void 0:q.dragOrder)===null||it===void 0||it,n.parsedOptions.taskBarLabelStyle={fontFamily:(G=(W=(nt=dt?.taskBar)===null||nt===void 0?void 0:nt.labelTextStyle)===null||W===void 0?void 0:W.fontFamily)!==null&&G!==void 0?G:"Arial",fontSize:(J=(U=(j=dt?.taskBar)===null||j===void 0?void 0:j.labelTextStyle)===null||U===void 0?void 0:U.fontSize)!==null&&J!==void 0?J:20,color:(lt=(st=(ot=dt?.taskBar)===null||ot===void 0?void 0:ot.labelTextStyle)===null||st===void 0?void 0:st.color)!==null&&lt!==void 0?lt:"#F01",outsideColor:(pt=(vt=(ft=dt?.taskBar)===null||ft===void 0?void 0:ft.labelTextStyle)===null||vt===void 0?void 0:vt.outsideColor)!==null&&pt!==void 0?pt:"#333333",textAlign:(He=(me=(bt=dt?.taskBar)===null||bt===void 0?void 0:bt.labelTextStyle)===null||me===void 0?void 0:me.textAlign)!==null&&He!==void 0?He:"left",textBaseline:(On=(Pe=(Ai=dt?.taskBar)===null||Ai===void 0?void 0:Ai.labelTextStyle)===null||Pe===void 0?void 0:Pe.textBaseline)!==null&&On!==void 0?On:"middle",padding:(re=(Xi=(en=dt?.taskBar)===null||en===void 0?void 0:en.labelTextStyle)===null||Xi===void 0?void 0:Xi.padding)!==null&&re!==void 0?re:[0,0,0,10],textOverflow:(ii=(wi=dt?.taskBar)===null||wi===void 0?void 0:wi.labelTextStyle)===null||ii===void 0?void 0:ii.textOverflow,orient:(Gr=(qi=dt?.taskBar)===null||qi===void 0?void 0:qi.labelTextStyle)===null||Gr===void 0?void 0:Gr.orient,orientHandleWithOverflow:(ki=(kt=dt?.taskBar)===null||kt===void 0?void 0:kt.labelTextStyle)===null||ki===void 0?void 0:ki.orientHandleWithOverflow},n.parsedOptions.taskBarCustomLayout=(Mt=dt?.taskBar)===null||Mt===void 0?void 0:Mt.customLayout,n.parsedOptions.taskBarCreatable=(sg=(pm=dt?.taskBar)===null||pm===void 0?void 0:pm.scheduleCreatable)!==null&&sg!==void 0?sg:!(n.parsedOptions.tasksShowMode!==_t.Sub_Tasks_Separate&&n.parsedOptions.tasksShowMode!==_t.Tasks_Separate),n.parsedOptions.taskBarCreationButtonStyle=Object.assign({lineColor:"rgb(99, 144, 0)",lineWidth:1,lineDash:[5,5],cornerRadius:4,backgroundColor:"#FFF"},(Td=($r=dt?.taskBar)===null||$r===void 0?void 0:$r.scheduleCreation)===null||Td===void 0?void 0:Td.buttonStyle),n.parsedOptions.taskBarCreationCustomLayout=(T2=(A2=dt?.taskBar)===null||A2===void 0?void 0:A2.scheduleCreation)===null||T2===void 0?void 0:T2.customLayout,n.parsedOptions.taskBarCreationMaxWidth=(R2=(M2=dt?.taskBar)===null||M2===void 0?void 0:M2.scheduleCreation)===null||R2===void 0?void 0:R2.maxWidth,n.parsedOptions.taskBarCreationMinWidth=(B2=(P2=dt?.taskBar)===null||P2===void 0?void 0:P2.scheduleCreation)===null||B2===void 0?void 0:B2.minWidth,n.parsedOptions.outerFrameStyle=Object.assign({borderColor:"#e1e4e8",borderLineWidth:1,cornerRadius:4},(k2=dt.frame)===null||k2===void 0?void 0:k2.outerFrameStyle),n.parsedOptions.markLine=Z3(dt?.markLine),(E2=(L2=n.parsedOptions.markLine)===null||L2===void 0?void 0:L2.length)!==null&&E2!==void 0&&E2&&(!((D2=n.parsedOptions.markLine)===null||D2===void 0)&&D2.every((Fs=>Fs.scrollToMarkLine===void 0))&&(n.parsedOptions.markLine[0].scrollToMarkLine=!0),!((I2=n.parsedOptions.markLine)===null||I2===void 0)&&I2.find((Fs=>Fs.scrollToMarkLine))&&(n.parsedOptions.scrollToMarkLineDate=$f(new Date((O2=n.parsedOptions.markLine)===null||O2===void 0?void 0:O2.find((Fs=>Fs.scrollToMarkLine)).date),nR,MN))),n.parsedOptions.verticalSplitLineHighlight=(H2=dt.frame)===null||H2===void 0?void 0:H2.verticalSplitLineHighlight,n.parsedOptions.verticalSplitLine=Object.assign({lineColor:(z2=n.parsedOptions.outerFrameStyle)===null||z2===void 0?void 0:z2.borderColor,lineWidth:(F2=n.parsedOptions.outerFrameStyle)===null||F2===void 0?void 0:F2.borderLineWidth},(N2=dt.frame)===null||N2===void 0?void 0:N2.verticalSplitLine),n.parsedOptions.horizontalSplitLine=(W2=dt.frame)===null||W2===void 0?void 0:W2.horizontalSplitLine,n.parsedOptions.verticalSplitLineMoveable=(V2=dt.frame)===null||V2===void 0?void 0:V2.verticalSplitLineMoveable,n.parsedOptions.taskKeyField=(G2=dt.taskKeyField)!==null&&G2!==void 0?G2:"id",n.parsedOptions.dependencyLinks=(j2=($2=dt.dependency)===null||$2===void 0?void 0:$2.links)!==null&&j2!==void 0?j2:[],n.parsedOptions.dependencyLinkCreatable=(Y2=(U2=dt.dependency)===null||U2===void 0?void 0:U2.linkCreatable)!==null&&Y2!==void 0&&Y2,n.parsedOptions.dependencyLinkSelectable=(q2=(X2=dt.dependency)===null||X2===void 0?void 0:X2.linkSelectable)===null||q2===void 0||q2,n.parsedOptions.dependencyLinkDeletable=(Z2=(K2=dt.dependency)===null||K2===void 0?void 0:K2.linkDeletable)!==null&&Z2!==void 0&&Z2,n.parsedOptions.dependencyLinkLineStyle=Object.assign({lineColor:"red",lineWidth:1},(J2=dt.dependency)===null||J2===void 0?void 0:J2.linkLineStyle),n.parsedOptions.dependencyLinkSelectedLineStyle=Object.assign({shadowBlur:4,shadowOffset:0,shadowColor:n.parsedOptions.dependencyLinkLineStyle.lineColor,lineColor:n.parsedOptions.dependencyLinkLineStyle.lineColor,lineWidth:n.parsedOptions.dependencyLinkLineStyle.lineWidth},(Q2=dt?.dependency)===null||Q2===void 0?void 0:Q2.linkSelectedLineStyle),n.parsedOptions.dependencyLinkLineCreatePointStyle=Object.assign({strokeColor:"red",fillColor:"white",radius:5,strokeWidth:1},(tR=dt?.dependency)===null||tR===void 0?void 0:tR.linkCreatePointStyle),n.parsedOptions.dependencyLinkLineCreatingPointStyle=Object.assign({strokeColor:"red",fillColor:"red",radius:5,strokeWidth:1},(eR=dt?.dependency)===null||eR===void 0?void 0:eR.linkCreatingPointStyle),n.parsedOptions.dependencyLinkLineCreatingStyle=Object.assign({lineColor:"red",lineWidth:1,lineDash:[5,5]},(iR=dt?.dependency)===null||iR===void 0?void 0:iR.linkCreatingLineStyle),n.parsedOptions.eventOptions=dt?.eventOptions,n.parsedOptions.keyboardOptions=dt?.keyboardOptions,n.parsedOptions.markLineCreateOptions=dt?.markLineCreateOptions}function GYt(n){var t,e,i,r;const o=n.options,{unit:a,startOfWeek:s,step:l}=n.parsedOptions.reverseSortedTimelineScales[0];n.parsedOptions.minDate=$f(new Date(n.parsedOptions.minDate),a,s),n.parsedOptions.maxDate=Lv(n.parsedOptions.minDate,new Date(n.parsedOptions.maxDate),a,l),n.parsedOptions._minDateTime=(t=n.parsedOptions.minDate)===null||t===void 0?void 0:t.getTime(),n.parsedOptions._maxDateTime=(e=n.parsedOptions.maxDate)===null||e===void 0?void 0:e.getTime(),n.parsedOptions.timeLineHeaderRowHeights=[],n.parsedOptions.timelineHeaderStyles=[];for(let h=0;h<n.parsedOptions.sortedTimelineScales.length;h++){const u=n.parsedOptions.sortedTimelineScales[h].style;n.parsedOptions.timelineHeaderStyles.push(Object.assign({fontSize:20,fontWeight:"bold",textAlign:"center",textBaseline:"middle",color:"#000",backgroundColor:"#fff"},u)),n.parsedOptions.timeLineHeaderRowHeights.push((r=(i=n.parsedOptions.sortedTimelineScales[h].rowHeight)!==null&&i!==void 0?i:o?.headerRowHeight)!==null&&r!==void 0?r:40)}}function $Yt(n,t,e){var i;const{unit:r,step:o,format:a}=e,s=[];for(;n<t;)if(r==="day"){const l=n.getFullYear(),h=n.getMonth(),u=n.getDate(),d=Tu(new Date(l,h,u+o-1),!0);d.getTime()>t.getTime()&&d.setTime(t.getTime());const c=n,f=a?.({dateIndex:u,startDate:c,endDate:d})||u.toString(),g={days:Math.abs(d.getTime()-n.getTime()+1)/864e5,startDate:c,endDate:d,step:o,unit:"day",title:f,dateIndex:u};s.push(g),n=new Date(l,h,u+o)}else if(r==="month"){const l=n.getFullYear(),h=n.getMonth(),u=Tu(new Date(l,h+o,0),!0);u.getTime()>t.getTime()&&u.setTime(t.getTime());const d=n,c=a?.({dateIndex:h+1,startDate:d,endDate:u})||(h+1).toString(),f={days:Math.abs(u.getTime()-n.getTime()+1)/864e5,startDate:d,step:o,unit:"month",endDate:u,title:c,dateIndex:h+1};s.push(f),n=new Date(l,h+o,1)}else if(r==="quarter"){const l=n.getFullYear(),h=Math.floor(n.getMonth()/3),u=Tu(new Date(l,3*(h+o),0),!0);u.getTime()>t.getTime()&&u.setTime(t.getTime());const d=n,c=a?.({dateIndex:h+1,startDate:d,endDate:u})||(h+1).toString(),f={days:Math.abs(u.getTime()-n.getTime()+1)/864e5,startDate:d,step:o,unit:"quarter",endDate:u,title:c,dateIndex:h+1};s.push(f),n=new Date(l,3*(h+o),1)}else if(r==="year"){const l=n.getFullYear(),h=Tu(new Date(l+o-1,11,31),!0);h.getTime()>t.getTime()&&h.setTime(t.getTime());const u=n,d=a?.({dateIndex:l,startDate:u,endDate:h})||l.toString(),c={days:Math.abs(h.getTime()-n.getTime()+1)/864e5,startDate:u,endDate:h,step:o,unit:"year",title:d,dateIndex:l};s.push(c),n=new Date(l+o,0,1)}else if(r==="week"){const l=(i=e.startOfWeek)!==null&&i!==void 0?i:"monday";let h=n.getDay();l==="monday"&&(h=h===0?6:h-1);const u=zi(n),d=Tu(n.getTime()+24*(7*o-h)*60*60*1e3-1,!0);d>t&&d.setTime(t.getTime());const c=ilt(u),f=a?.({dateIndex:c,startDate:u,endDate:d})||c.toString(),g={days:(d.getTime()-u.getTime()+1)/864e5,startDate:u,endDate:d,step:o,unit:"week",title:f,dateIndex:c};s.push(g),n.setTime(zi(n.getTime()+24*(7*o-h)*60*60*1e3,!0).getTime())}else if(r==="hour"){const l=n.getFullYear(),h=n.getMonth(),u=n.getDate(),d=n.getHours(),c=fYt(new Date(l,h,u,d+o-1),!0);c.getTime()>t.getTime()&&c.setTime(t.getTime());const f=n,g=a?.({dateIndex:d,startDate:f,endDate:c})||d.toString(),p={days:Math.abs(c.getTime()-n.getTime()+1)/864e5,startDate:f,endDate:c,step:o,unit:"hour",title:g,dateIndex:n.getHours()};s.push(p),n=new Date(l,h,u,d+o)}else if(r==="minute"){const l=n.getFullYear(),h=n.getMonth(),u=n.getDate(),d=n.getHours(),c=n.getMinutes(),f=gYt(new Date(l,h,u,d,c+o-1),!0);f.getTime()>t.getTime()&&f.setTime(t.getTime());const g=n,p=a?.({dateIndex:c,startDate:g,endDate:f})||c.toString(),v={days:Math.abs(f.getTime()-n.getTime()+1)/864e5,startDate:g,endDate:f,step:o,unit:"minute",title:p,dateIndex:n.getMinutes()};s.push(v),n=new Date(l,h,u,d,c+o)}else if(r==="second"){const l=n.getFullYear(),h=n.getMonth(),u=n.getDate(),d=n.getHours(),c=n.getMinutes(),f=n.getSeconds(),g=nlt(new Date(l,h,u,d,c,f+o-1),!0);g.getTime()>t.getTime()&&g.setTime(t.getTime());const p=n,v=a?.({dateIndex:f,startDate:p,endDate:g})||f.toString(),m={days:Math.abs(g.getTime()-n.getTime()+1)/864e5,startDate:p,endDate:g,step:o,unit:"second",title:v,dateIndex:n.getSeconds()};s.push(m),n=new Date(l,h,u,d,c,f+o)}return s}function V_(n,t,e,i,r){var o,a,s,l,h,u,d,c,f;let g=(o=n[3])!==null&&o!==void 0?o:10;t==="right"||t==="end"?g=i-0-((a=n[1])!==null&&a!==void 0?a:10):t==="center"&&(g=0+(i-0+((s=n[3])!==null&&s!==void 0?s:10)-((l=n[1])!==null&&l!==void 0?l:10))/2);let p=0+((h=n[0])!==null&&h!==void 0?h:10);return e==="bottom"||e==="alphabetic"||e==="ideographic"?p=r-0-((u=n[2])!==null&&u!==void 0?u:10):e==="middle"&&(p=0+(r-0-((d=n[0])!==null&&d!==void 0?d:10)-((c=n[2])!==null&&c!==void 0?c:10))/2+((f=n[0])!==null&&f!==void 0?f:10)),{x:g,y:p}}function jYt(n){return typeof n=="string"&&(n=n.replace("%",""),n=parseFloat(n)),Math.round(n)}function UYt(n){if(n.taskListTableInstance){n.verticalSplitResizeLine=document.createElement("div"),n.verticalSplitResizeLine.style.position="absolute",n.verticalSplitResizeLine.style.top=n.tableY+"px",n.verticalSplitResizeLine.style.left=(n.taskTableWidth!==-1?n.taskTableWidth-7+n.parsedOptions.verticalSplitLine.lineWidth/2:0)+"px",n.verticalSplitResizeLine.style.width="14px",n.verticalSplitResizeLine.style.height=n.drawHeight+"px",n.verticalSplitResizeLine.style.backgroundColor="rgba(0,0,0,0)",n.verticalSplitResizeLine.style.zIndex="100",n.parsedOptions.verticalSplitLineMoveable&&(n.verticalSplitResizeLine.style.cursor="col-resize"),n.verticalSplitResizeLine.style.userSelect="none",n.verticalSplitResizeLine.style.opacity="1";const t=document.createElement("div");if(t.style.position="absolute",t.style.top="0px",t.style.left=(14-n.parsedOptions.verticalSplitLine.lineWidth)/2+"px",t.style.width=n.parsedOptions.verticalSplitLine.lineWidth+"px",t.style.height="100%",t.style.backgroundColor=n.parsedOptions.verticalSplitLine.lineColor,t.style.zIndex="100",t.style.userSelect="none",t.style.pointerEvents="none",t.style.transition="background-color 0.3s",n.verticalSplitResizeLine.appendChild(t),n.parsedOptions.verticalSplitLineHighlight){const e=document.createElement("div");e.style.position="absolute",e.style.top="0px",e.style.left=(14-n.parsedOptions.verticalSplitLineHighlight.lineWidth)/2+"px",e.style.width=n.parsedOptions.verticalSplitLineHighlight.lineWidth+"px",e.style.height="100%",e.style.backgroundColor=n.parsedOptions.verticalSplitLineHighlight.lineColor,e.style.zIndex="100",e.style.cursor="col-resize",e.style.userSelect="none",e.style.pointerEvents="none",e.style.opacity="0",e.style.transition="background-color 0.3s",n.verticalSplitResizeLine.appendChild(e)}n.container.appendChild(n.verticalSplitResizeLine)}}function Vw(n){if(n.verticalSplitResizeLine){n.verticalSplitResizeLine.style.position="absolute",n.verticalSplitResizeLine.style.top=n.tableY+"px",n.verticalSplitResizeLine.style.left=n.taskTableWidth!==-1?n.taskTableWidth-7+n.parsedOptions.verticalSplitLine.lineWidth/2+"px":"0px",n.verticalSplitResizeLine.style.width="14px",n.verticalSplitResizeLine.style.height=n.drawHeight+"px",n.verticalSplitResizeLine.style.backgroundColor="rgba(0,0,0,0)",n.verticalSplitResizeLine.style.zIndex="100",n.parsedOptions.verticalSplitLineMoveable&&(n.verticalSplitResizeLine.style.cursor="col-resize"),n.verticalSplitResizeLine.style.userSelect="none",n.verticalSplitResizeLine.style.opacity="1";const t=n.verticalSplitResizeLine.childNodes[0];if(t.style.position="absolute",t.style.top="0px",t.style.left=(14-n.parsedOptions.verticalSplitLine.lineWidth)/2+"px",t.style.width=n.parsedOptions.verticalSplitLine.lineWidth+"px",t.style.height="100%",t.style.backgroundColor=n.parsedOptions.verticalSplitLine.lineColor,t.style.zIndex="100",t.style.userSelect="none",t.style.pointerEvents="none",t.style.transition="background-color 0.3s",n.verticalSplitResizeLine.childNodes[1]){const e=n.verticalSplitResizeLine.childNodes[1];e.style.position="absolute",e.style.top="0px",e.style.left=(14-n.parsedOptions.verticalSplitLineHighlight.lineWidth)/2+"px",e.style.width=n.parsedOptions.verticalSplitLineHighlight.lineWidth+"px",e.style.height="100%",e.style.backgroundColor=n.parsedOptions.verticalSplitLineHighlight.lineColor,e.style.zIndex="100",e.style.cursor="col-resize",e.style.userSelect="none",e.style.pointerEvents="none",e.style.opacity="0",e.style.transition="background-color 0.3s"}}}function gl(n,t,e,i="children"){var r;for(let o=0;o<n.length;o++){if(Array.isArray(e)&&e.length===1&&n[o][t]===e[0]||n[o][t]===e)return{record:n[o],index:[o]};if(!((r=n[o][i])===null||r===void 0)&&r.length){if(Array.isArray(e)&&e[0]===n[o][t]){const a=gl(n[o][i],t,e.slice(1));if(a)return a.index.unshift(o),a}else if(!Array.isArray(e)){const a=gl(n[o][i],t,e);if(a)return a.index.unshift(o),a}}}}function llt(n,t="children"){var e;for(let i=0;i<n.length;i++)!((e=n[i][t])===null||e===void 0)&&e.length?llt(n[i][t],t):(delete n[i].vtable_gantt_linkedTo,delete n[i].vtable_gantt_linkedFrom)}function hlt(n,t="children"){var e;for(let i=0;i<n.length;i++)!((e=n[i][t])===null||e===void 0)&&e.length?hlt(n[i][t],t):delete n[i].vtable_gantt_showIndex}function Uo(n,t){var e;let i,r;if(t.taskListTableInstance){const o=t.taskListTableInstance.getTargetRowAt(n+t.headerHeight);if(o){const{row:a}=o;i=a-t.taskListTableInstance.columnHeaderLevelCount;const s=t.getRowsHeightByIndex(0,i-1);if(t.parsedOptions.tasksShowMode===_t.Sub_Tasks_Inline||t.parsedOptions.tasksShowMode===_t.Sub_Tasks_Arrange||t.parsedOptions.tasksShowMode===_t.Sub_Tasks_Compact||t.parsedOptions.tasksShowMode===_t.Sub_Tasks_Separate)r=Math.floor((n-s)/t.parsedOptions.rowHeight);else if(t.parsedOptions.tasksShowMode===_t.Project_Sub_Tasks_Inline){const l=t.getRecordByIndex(i);l&&l.type===ze.PROJECT&&((e=l.children)===null||e===void 0?void 0:e.length)>0&&(l.hierarchyState==="expand"||t.parsedOptions.projectSubTasksExpandable===!1||(r=Math.floor((n-s)/t.parsedOptions.rowHeight)))}}}else i=Math.floor(n/t.parsedOptions.rowHeight);return{task_index:i,sub_task_index:r}}function YYt(n,t){var e;if(!t.children||t.children.length<=1)return((e=t.children)===null||e===void 0?void 0:e.length)===1?t.children[0].vtable_gantt_showIndex=0:t.vtable_gantt_showIndex=0,1;const i=t.children.slice().sort(((o,a)=>{const{startDate:s}=by(n,o),{startDate:l}=by(n,a);return s.getTime()-l.getTime()})),r=[];for(let o=0;o<=i.length-1;o++){const a=i[o],{startDate:s,endDate:l}=by(n,a);let h=!1;for(let u=0;u<r.length;u++)if(s.getTime()>r[u]){r[u]=l.getTime(),h=!0,a.vtable_gantt_showIndex=u;break}h||(r.push(l.getTime()),a.vtable_gantt_showIndex=r.length-1)}return r.length}function XYt(n,t,e,i){return e.some((r=>{const{startDate:o,endDate:a}=by(i,r);return n<=a&&o<=t}))}function qYt(n,t){var e;if(!t.children||t.children.length<=1)return((e=t.children)===null||e===void 0?void 0:e.length)===1?t.children[0].vtable_gantt_showIndex=0:t.vtable_gantt_showIndex=0,1;const i=[];for(let r=0;r<=t.children.length-1;r++){const o=t.children[r],{startDate:a,endDate:s}=by(n,o);let l=!1;for(let h=0;h<i.length;h++)if(!XYt(a,s,t.children.filter((u=>u!==o&&u.vtable_gantt_showIndex===h)),n)){i[h]=s.getTime(),l=!0,o.vtable_gantt_showIndex=h;break}l||(i.push(s.getTime()),o.vtable_gantt_showIndex=i.length-1)}return i.length}function by(n,t){const{timeScaleIncludeHour:e,startDateField:i,endDateField:r}=n.parsedOptions,o=t[i],a=t[r];return e?{startDate:zi(o),endDate:Tu(a)}:{startDate:zi(o,!0),endDate:Tu(a,!0)}}function KYt(n){var t,e,i,r,o,a,s;const l=n.options,{unit:h,startOfWeek:u}=n.parsedOptions.reverseSortedTimelineScales[0];n.parsedOptions.markLine=Z3(l?.markLine),(e=(t=n.parsedOptions.markLine)===null||t===void 0?void 0:t.length)!==null&&e!==void 0&&e&&(!((i=n.parsedOptions.markLine)===null||i===void 0)&&i.every((d=>d.scrollToMarkLine===void 0))&&(n.parsedOptions.markLine[0].scrollToMarkLine=!0),!((r=n.parsedOptions.markLine)===null||r===void 0)&&r.find((d=>d.scrollToMarkLine))&&(n.parsedOptions.scrollToMarkLineDate=$f(new Date((o=n.parsedOptions.markLine)===null||o===void 0?void 0:o.find((d=>d.scrollToMarkLine)).date),h,u))),n.parsedOptions.dependencyLinks=(s=(a=l.dependency)===null||a===void 0?void 0:a.links)!==null&&s!==void 0?s:[]}function ZYt(n){var t,e;const i=n.options,{unit:r,startOfWeek:o,step:a}=n.parsedOptions.reverseSortedTimelineScales[0];n.parsedOptions.minDate=i?.minDate?$f(new Date(i.minDate),r,o):void 0,n.parsedOptions.maxDate=i?.maxDate?Lv(n.parsedOptions.minDate,new Date(i.maxDate),r,a):void 0,n.parsedOptions._minDateTime=(t=n.parsedOptions.minDate)===null||t===void 0?void 0:t.getTime(),n.parsedOptions._maxDateTime=(e=n.parsedOptions.maxDate)===null||e===void 0?void 0:e.getTime()}function Ck(n){const t=n.options;n.parsedOptions.markLine=Z3(t?.markLine)}function JYt(n,t,e){const i=Uo(t-e.headerHeight+e.stateManager.scrollTop,e),r=e.getRecordByIndex(i.task_index),o=Ep(n,e),a=e.getDateRangeByIndex(o);if(r?.children){const s=Uo(t-e.headerHeight+e.stateManager.scrollTop,e);for(let l=0;l<r.children.length;l++){const{startDate:h,endDate:u,taskDays:d,progress:c,taskRecord:f}=e.getTaskInfoByTaskListIndex(s.task_index,l);if(((e.parsedOptions.tasksShowMode===_t.Sub_Tasks_Compact||e.parsedOptions.tasksShowMode===_t.Sub_Tasks_Arrange)&&f.vtable_gantt_showIndex===s.sub_task_index||e.parsedOptions.tasksShowMode===_t.Sub_Tasks_Inline||e.parsedOptions.tasksShowMode===_t.Project_Sub_Tasks_Inline&&r.type===ze.PROJECT&&r.hierarchyState!=="expand"&&e.parsedOptions.projectSubTasksExpandable!==!1)&&h&&u&&a.startDate.getTime()>=h.getTime()&&a.endDate.getTime()<=u.getTime())return{startDate:h,endDate:u,taskDays:d,progress:c,taskRecord:f}}}}function OU(n,t){return{left:n.globalTransMatrix.e+t.taskListTableInstance.tableNoFrameWidth+t.taskListTableInstance.tableX+t.tableX,top:n.globalTransMatrix.f,width:n.attribute.width,height:n.attribute.height}}function QYt(n,t){const e=n.startDate.getTime(),i=n.endDate.getTime();return t.some((r=>{const o=new Date(r.date).getTime();return o>=e&&o<=i}))}function tXt(n){if(!n.records||n.records.length===0)return;const t=n.parsedOptions.startDateField,e=n.parsedOptions.endDateField,i=(r,o,a)=>{let s=null,l=null;return r.forEach(((h,u)=>{var d;if(!h)return;let c=null,f=null;if(h.children&&h.children.length>0&&h.type===ze.PROJECT){const[g,p]=i(h.children);if(g&&p&&(c=g,f=p,h.type===ze.PROJECT)){const v=(d=n.parsedOptions.dateFormat)!==null&&d!==void 0?d:n.parseTimeFormat(h[t]||h.children[0][t]||""),m=b=>n.formatDate?n.formatDate(b,v):b.toISOString().split("T")[0],y=Object.assign({},h);y[t]=m(c),y[e]=m(f),r[u]=y}}else h[t]&&h[e]&&(c=new Date(h[t]),f=new Date(h[e]));c&&(!s||c<s)&&(s=c),f&&(!l||f>l)&&(l=f)})),[s,l]};i(n.records)}const eXt='<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1471" width="24" height="24"> <path d="M840.05 153.35a27.61875 27.61875 0 0 0-22.95-4.95c-56.25 13.05-218.25 39.6-289.8 2.25-115.65-60.75-241.65-31.95-299.7-13.05V95.75a27.05625 27.05625 0 0 0-27-27 27.05625 27.05625 0 0 0-27 27v834.75c0 14.85 12.15 27 27 27s27-12.15 27-27V611.9c44.1-13.95 199.35-56.25 293.85 1.8 45.9 28.35 96.75 37.8 143.55 37.8 89.1 0 164.7-34.2 169.65-36.45a27.9 27.9 0 0 0 15.75-24.75V174.5a27.5625 27.5625 0 0 0-10.35-21.15z" fill="#f54319" p-id="1472"></path></svg>';class iXt{constructor(t){this._scene=t,this.initNodes()}initNodes(){var t,e,i,r,o,a,s,l,h;const{_scene:u}=this,d=new _e({x:0,y:0,width:u._gantt.getAllDateColsWidth(),height:u._gantt.getAllHeaderRowsHeight(),clip:!0,pickable:!1});this.group=d,d.name="date-header-container",u.ganttGroup.addChild(this.group);const{unit:c,step:f}=u._gantt.parsedOptions.reverseSortedTimelineScales[0];let g=0;for(let p=0;p<u._gantt.timeLineHeaderLevel;p++){const{timelineDates:v,customLayout:m,visible:y}=u._gantt.parsedOptions.sortedTimelineScales[p];if(y===!1)continue;const b=new _e({x:0,y:g,width:u._gantt.getAllDateColsWidth(),height:u._gantt.parsedOptions.timeLineHeaderRowHeights[p],clip:!1});g+=b.attribute.height,b.name="row-header",d.addChild(b);for(let _=0;_<v?.length;_++){const{days:w,endDate:C,startDate:x,title:S,dateIndex:A,unit:T}=v[_],M=Math.ceil(Xe(x,u._gantt.parsedOptions.minDate,c,f)*u._gantt.parsedOptions.timelineColWidth),R=Math.ceil(Xe(C,u._gantt.parsedOptions.minDate,c,f,1)*u._gantt.parsedOptions.timelineColWidth)-M,L=new _e({x:M,y:0,width:R,height:b.attribute.height,clip:!1,fill:u._gantt.parsedOptions.timelineHeaderBackgroundColor});let B;L.name="date-header-cell";let P=!0;const k=b.attribute.height;if(m){let E;typeof m=="function"?E=m({width:R,height:k,index:_,startDate:x,endDate:C,days:w,dateIndex:A,title:S,ganttInstance:this._scene._gantt}):E=m,E&&(B=E.rootContainer,P=(t=E.renderDefaultText)!==null&&t!==void 0&&t,B.name="task-bar-custom-render"),B&&L.appendChild(B)}if(P){const{padding:E,textAlign:D,textBaseline:I,textOverflow:O,fontSize:H,fontWeight:F,color:N,strokeColor:$,textStick:V}=u._gantt.parsedOptions.timelineHeaderStyles[p],X=V_(W_(E),D,I,R,k),Z=new tn({x:X.x,y:X.y,maxLineWidth:R,heightLimit:k,pickable:!0,text:S.toLocaleString(),fontSize:H,fontWeight:F,fill:N,stroke:$,lineWidth:2,textAlign:D,textBaseline:I,ellipsis:O==="clip"?"":O==="ellipsis"?"...":Y(O)?O:void 0});Z.attribute.textStick=V,L.appendChild(Z),Z.name="date-header-cell-text"}if(p===u._gantt.timeLineHeaderLevel-1&&u._gantt.parsedOptions.markLineCreateOptions&&u._gantt.parsedOptions.markLineCreateOptions.markLineCreatable){const E=u._gantt.parsedOptions.markLineCreateOptions.markLineCreationStyle||{},D=E.size||24,I=E.iconSize||18,O=E.svg||eXt,H=new _e({x:R/2-D/2,y:k/2-D/2,width:D,height:D,visiable:!0});H.name="markline-hover-group",H.data=v[_];const F=new _e({x:0,y:0,width:D,height:D,cornerRadius:D/2,fill:E.fill||"#ccc",cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center",visibleAll:!1});F.name="markline-hover-inner-group",H.add(F);const N=new ea({width:I,height:I,image:O,cursor:"pointer",pickable:!0});N.name="markline-hover-icon",F.appendChild(N),L.add(H)}if(b.addChild(L),_>0){const E=Wi({pickable:!1,stroke:(e=u._gantt.parsedOptions.timelineHeaderVerticalLineStyle)===null||e===void 0?void 0:e.lineColor,lineWidth:(i=u._gantt.parsedOptions.timelineHeaderVerticalLineStyle)===null||i===void 0?void 0:i.lineWidth,points:[{x:1&((r=u._gantt.parsedOptions.timelineHeaderVerticalLineStyle)===null||r===void 0?void 0:r.lineWidth)?.5:0,y:0},{x:1&((o=u._gantt.parsedOptions.timelineHeaderVerticalLineStyle)===null||o===void 0?void 0:o.lineWidth)?.5:0,y:b.attribute.height}]});L.appendChild(E)}}if(p>0){const _=Wi({pickable:!1,stroke:(a=u._gantt.parsedOptions.timelineHeaderHorizontalLineStyle)===null||a===void 0?void 0:a.lineColor,lineWidth:(s=u._gantt.parsedOptions.timelineHeaderHorizontalLineStyle)===null||s===void 0?void 0:s.lineWidth,points:[{x:0,y:1&((l=u._gantt.parsedOptions.timelineHeaderHorizontalLineStyle)===null||l===void 0?void 0:l.lineWidth)?.5:0},{x:u._gantt.getAllDateColsWidth(),y:1&((h=u._gantt.parsedOptions.timelineHeaderHorizontalLineStyle)===null||h===void 0?void 0:h.lineWidth)?.5:0}]});b.addChild(_)}}}setX(t){this.group.setAttribute("x",t)}setY(t){this.group.setAttribute("y",t)}resize(){var t,e,i,r;this.group.setAttribute("width",(e=(t=this.group.attribute)===null||t===void 0?void 0:t.width)!==null&&e!==void 0?e:0),this.group.setAttribute("height",(r=(i=this.group.attribute)===null||i===void 0?void 0:i.height)!==null&&r!==void 0?r:0)}refresh(){var t;(t=this.group)===null||t===void 0||t.parent.removeChild(this.group),this.initNodes()}showMarklineIcon(t){let e;return t.children.forEach((i=>{i.name==="date-header-cell-text"&&i.setAttribute("visible",!1),i.name==="markline-hover-group"&&(e=i.firstChild,e.setAttribute("visibleAll",!0))})),e}hideMarklineIconHover(t){let e;return t.children.forEach((i=>{i.name==="date-header-cell-text"&&i.setAttribute("visible",!0),i.name==="markline-hover-group"&&(e=i.firstChild,e.setAttribute("visibleAll",!1))})),e}}var Xt;(function(n){n.default="default",n.grabing="grabing",n.scrolling="scrolling"})(Xt||(Xt={}));var Ee;(function(n){n.single="single",n.column="column",n.row="row",n.cross="cross",n.none="none"})(Ee||(Ee={}));const ult=["bgColor","color","strokeColor","borderColor","linkColor"];var Ei;(function(n){n.RECORD="RECORD",n.NONE="NONE",n.SUM="SUM",n.MIN="MIN",n.MAX="MAX",n.AVG="AVG",n.COUNT="COUNT",n.CUSTOM="CUSTOM",n.RECALCULATE="RECALCULATE"})(Ei||(Ei={}));var no;(function(n){n.ASC="ASC",n.DESC="DESC",n.NORMAL="NORMAL",n.desc="desc",n.asc="asc",n.normal="normal"})(no||(no={}));var yo;(function(n){n.top="top",n.bottom="bottom",n.left="left",n.right="right"})(yo||(yo={}));var Wt;(function(n){n.expand="expand",n.collapse="collapse",n.none="none",n.loading="loading"})(Wt||(Wt={}));var Ue;(function(n){n.inlineFront="inlineFront",n.inlineEnd="inlineEnd",n.left="left",n.right="right",n.absoluteRight="absoluteRight",n.contentLeft="contentLeft",n.contentRight="contentRight",n.absolute="absolute"})(Ue||(Ue={}));var Ye;(function(n){n.frozen="frozen",n.sort="sort",n.dropDown="dropDown",n.dropDownState="dropDownState",n.play="play",n.damagePic="damagePic",n.expand="expand",n.collapse="collapse",n.drillDown="drillDown",n.drillUp="drillUp",n.dragReorder="dragReorder"})(Ye||(Ye={}));var er;(function(n){n.upwardIconName="sort_upward",n.downwardIconName="sort_downward",n.normalIconName="sort_normal",n.freezeIconName="freeze",n.frozenIconName="frozen",n.frozenCurrentIconName="frozenCurrent",n.dropdownIconName="dropdownIcon",n.expandIconName="expand",n.collapseIconName="collapse",n.dragReorderIconName="dragReorder",n.loadingIconName="loading"})(er||(er={}));const J3={};class Fl{constructor(t){var e;this.isAggregator=!0,this.isRecord=!0,this.records=[],this.children=[],this.key=t.key,this.field=t.field,this.formatFun=t.formatFun,this.isRecord=(e=t.isRecord)!==null&&e!==void 0?e:this.isRecord}clearCacheValue(){this._formatedValue=void 0}formatValue(t,e,i){return this._formatedValue||(this.formatFun?this._formatedValue=this.formatFun(this.value(),t,e,i):this._formatedValue=this.value()),this._formatedValue}reset(){this.records=[],this.changedValue=void 0,this.children=[],this.clearCacheValue()}}class dlt extends Fl{constructor(){super(...arguments),this.type=Ei.RECORD,this.isRecord=!0}push(t){t&&this.isRecord&&this.records&&(t.isAggregator?this.records.push(...t.records):this.records.push(t)),t.isAggregator&&this.children&&this.children.push(t),this.clearCacheValue()}deleteRecord(t){t&&(this.isRecord&&this.records&&(this.records=this.records.filter((e=>e!==t))),t.isAggregator&&this.children&&(this.children=this.children.filter((e=>e!==t)))),this.clearCacheValue()}updateRecord(t,e){t&&e&&(this.isRecord&&this.records&&(this.records=this.records.map((i=>i===t?e:i))),t.isAggregator&&e.isAggregator&&this.children&&(this.children=this.children.map((i=>i===t?e:i))),this.clearCacheValue())}value(){var t;return(t=this.changedValue)!==null&&t!==void 0?t:this.records}reset(){this.children=[],this.changedValue=void 0,this.records=[]}recalculate(){}}class clt extends Fl{constructor(){super(...arguments),this.type=Ei.NONE,this.isRecord=!0}push(t){t&&(this.isRecord&&(this.records=[t]),t.isAggregator&&this.children&&(this.children=[t]),this.field&&(this.fieldValue=t[this.field])),this.clearCacheValue()}deleteRecord(t){t&&(this.isRecord&&this.records&&(this.records=this.records.filter((e=>e!==t))),t.isAggregator&&this.children&&(this.children=this.children.filter((e=>e!==t))),this.field&&this.records.length&&(this.fieldValue=this.records[this.records.length-1][this.field])),this.clearCacheValue()}updateRecord(t,e){t&&e&&(this.isRecord&&this.records&&(this.records=this.records.map((i=>i===t?e:i))),t.isAggregator&&e.isAggregator&&this.children&&(this.children=this.children.map((i=>i===t?e:i))),this.field&&this.records.length&&(this.fieldValue=this.records[this.records.length-1][this.field]),this.clearCacheValue())}value(){var t;return(t=this.changedValue)!==null&&t!==void 0?t:this.fieldValue}reset(){this.children=[],this.changedValue=void 0,this.records=[],this.fieldValue=void 0}recalculate(){}}class flt extends Fl{constructor(t){super(t),this.type=Ei.CUSTOM,this.isRecord=!0,this.values=[],this.aggregationFun=t.aggregationFun}push(t){t&&(this.isRecord&&this.records&&(t.isAggregator?this.records.push(...t.records):this.records.push(t)),t.isAggregator&&this.children&&this.children.push(t),this.field&&this.values.push(t[this.field])),this.clearCacheValue()}updateRecord(t,e){t&&e&&(this.isRecord&&this.records&&(this.records=this.records.map((i=>i===t?e:i))),t.isAggregator&&e.isAggregator&&this.children&&(this.children=this.children.map((i=>i===t?e:i))),this.field&&this.records.length&&(this.values=this.records.map((i=>i[this.field]))),this.clearCacheValue())}deleteRecord(t){t&&(this.isRecord&&this.records&&(this.records=this.records.filter((e=>e!==t))),t.isAggregator&&this.children&&(this.children=this.children.filter((e=>e!==t))),this.field&&this.records.length&&(this.values=this.records.map((e=>e[this.field])))),this.clearCacheValue()}value(){var t,e;return this.fieldValue||(this.fieldValue=(t=this.aggregationFun)===null||t===void 0?void 0:t.call(this,this.values,this.records,this.field)),(e=this.changedValue)!==null&&e!==void 0?e:this.fieldValue}reset(){this.records=[],this.children=[],this.changedValue=void 0,this.fieldValue=void 0}recalculate(){this.fieldValue=void 0,this._formatedValue=void 0}}class nXt extends Fl{constructor(t){super(t),this.type=Ei.RECALCULATE,this.isRecord=!0,this.calculateFun=t.calculateFun,this.dependAggregators=t.dependAggregators,this.dependIndicatorKeys=t.dependIndicatorKeys}push(t){t&&this.isRecord&&this.records&&(t.isAggregator?this.records.push(...t.records):this.records.push(t)),this.children&&t.isAggregator&&this.children.push(t),this.clearCacheValue()}deleteRecord(t){t&&(this.isRecord&&this.records&&(this.records=this.records.filter((e=>e!==t))),t.isAggregator&&this.children&&(this.children=this.children.filter((e=>e!==t)))),this.clearCacheValue()}updateRecord(t,e){t&&e&&(this.isRecord&&this.records&&(this.records=this.records.map((i=>i===t?e:i))),t.isAggregator&&e.isAggregator&&this.children&&(this.children=this.children.map((i=>i===t?e:i))),this.clearCacheValue())}value(){var t,e;if(!this.fieldValue){const i=sXt(this.dependAggregators,this.dependIndicatorKeys);this.fieldValue=(t=this.calculateFun)===null||t===void 0?void 0:t.call(this,i,this.records,this.field)}return(e=this.changedValue)!==null&&e!==void 0?e:this.fieldValue}reset(){this.records=[],this.children=[],this.changedValue=void 0,this.fieldValue=void 0}recalculate(){}}class glt extends Fl{constructor(t){var e;super(t),this.type=Ei.SUM,this.sum=0,this.positiveSum=0,this.nagetiveSum=0,this.needSplitPositiveAndNegativeForSum=!1,this.needSplitPositiveAndNegativeForSum=(e=t.needSplitPositiveAndNegative)!==null&&e!==void 0&&e}push(t){if(t){if(this.isRecord&&this.records&&(t.isAggregator?this.records.push(...t.records):this.records.push(t)),t.isAggregator&&this.children){this.children.push(t);const e=t.value();this.sum+=e??0,this.needSplitPositiveAndNegativeForSum&&(e>0?this.positiveSum+=e:e<0&&(this.nagetiveSum+=e))}else if(this.field&&!isNaN(parseFloat(t[this.field]))){const e=parseFloat(t[this.field]);this.sum+=e,this.needSplitPositiveAndNegativeForSum&&(e>0?this.positiveSum+=e:e<0&&(this.nagetiveSum+=e))}}this.clearCacheValue()}deleteRecord(t){if(t){if(this.isRecord&&this.records&&(this.records=this.records.filter((e=>e!==t))),t.isAggregator&&this.children){this.children=this.children.filter((i=>i!==t));const e=t.value();this.sum-=e??0,this.needSplitPositiveAndNegativeForSum&&(e>0?this.positiveSum-=e:e<0&&(this.nagetiveSum-=e))}else if(this.field&&!isNaN(parseFloat(t[this.field]))){const e=parseFloat(t[this.field]);this.sum-=e,this.needSplitPositiveAndNegativeForSum&&(e>0?this.positiveSum-=e:e<0&&(this.nagetiveSum-=e))}}this.clearCacheValue()}updateRecord(t,e){if(t&&e){if(this.isRecord&&this.records&&(this.records=this.records.map((i=>i===t?e:i))),t.isAggregator&&this.children){const i=t.value();this.children=this.children.filter((o=>o!==t));const r=e.value();this.children.push(e),this.sum+=r-i,this.needSplitPositiveAndNegativeForSum&&(i>0?this.positiveSum-=i:i<0&&(this.nagetiveSum-=i),r>0?this.positiveSum+=r:r<0&&(this.nagetiveSum+=r))}else if(this.field&&!isNaN(parseFloat(t[this.field]))){const i=parseFloat(t[this.field]),r=parseFloat(e[this.field]);this.sum+=r-i,this.needSplitPositiveAndNegativeForSum&&(i>0?this.positiveSum-=i:i<0&&(this.nagetiveSum-=i),r>0?this.positiveSum+=r:r<0&&(this.nagetiveSum+=r))}this.clearCacheValue()}}value(){var t,e;return(t=this.changedValue)!==null&&t!==void 0?t:((e=this.records)===null||e===void 0?void 0:e.length)>=1?this.sum:void 0}positiveValue(){return this.positiveSum}negativeValue(){return this.nagetiveSum}reset(){super.reset(),this.records=[],this.sum=0}recalculate(){if(this.sum=0,this._formatedValue=void 0,this.children&&this.children.length>0)for(let t=0;t<this.children.length;t++){const e=this.children[t];if(e.isAggregator){const i=e.value();this.sum+=i??0,this.needSplitPositiveAndNegativeForSum&&(i>0?this.positiveSum+=i:i<0&&(this.nagetiveSum+=i))}}else if(this.records)for(let t=0;t<this.records.length;t++){const e=this.records[t];if(e.isAggregator){const i=e.value();this.sum+=i??0,this.needSplitPositiveAndNegativeForSum&&(i>0?this.positiveSum+=i:i<0&&(this.nagetiveSum+=i))}else if(this.field&&!isNaN(parseFloat(e[this.field]))){const i=parseFloat(e[this.field]);this.sum+=i,this.needSplitPositiveAndNegativeForSum&&(i>0?this.positiveSum+=i:i<0&&(this.nagetiveSum+=i))}}}}class plt extends Fl{constructor(){super(...arguments),this.type=Ei.COUNT,this.count=0}push(t){t&&(this.isRecord&&this.records&&(t.isAggregator?this.records.push(...t.records):this.records.push(t)),t.isAggregator?(this.children&&this.children.push(t),this.count+=t.value()):this.count++),this.clearCacheValue()}deleteRecord(t){t&&(this.isRecord&&this.records&&(this.records=this.records.filter((e=>e!==t))),t.isAggregator?(this.children&&(this.children=this.children.filter((e=>e!==t))),this.count-=t.value()):this.count--),this.clearCacheValue()}updateRecord(t,e){t&&e&&(this.isRecord&&this.records&&(this.records=this.records.map((i=>i===t?e:i))),t.isAggregator&&(this.count+=e.value()-t.value()),t.isAggregator&&e.isAggregator&&this.children&&(this.children=this.children.map((i=>i===t?e:i))))}value(){var t;return(t=this.changedValue)!==null&&t!==void 0?t:this.count}reset(){this.changedValue=void 0,this.children=[],this.records=[],this.count=0}recalculate(){if(this.count=0,this._formatedValue=void 0,this.children&&this.children.length>0)for(let t=0;t<this.children.length;t++){const e=this.children[t];if(e.isAggregator){const i=e.value();this.count+=i??0}else this.count++}else if(this.records)for(let t=0;t<this.records.length;t++){const e=this.records[t];e.isAggregator?this.count+=e.value():this.count++}}}class vlt extends Fl{constructor(){super(...arguments),this.type=Ei.AVG,this.sum=0,this.count=0}push(t){t&&(this.isRecord&&this.records&&(t.isAggregator?this.records.push(...t.records):this.records.push(t)),t.isAggregator&&t.type===Ei.AVG?(this.children&&this.children.push(t),this.sum+=t.sum,this.count+=t.count):this.field&&!isNaN(parseFloat(t[this.field]))&&(this.sum+=parseFloat(t[this.field]),this.count++)),this.clearCacheValue()}deleteRecord(t){t&&(this.isRecord&&this.records&&(this.records=this.records.filter((e=>e!==t))),t.isAggregator&&t.type===Ei.AVG?(this.children&&(this.children=this.children.filter((e=>e!==t))),this.sum-=t.sum,this.count-=t.count):this.field&&!isNaN(parseFloat(t[this.field]))&&(this.sum-=parseFloat(t[this.field]),this.count--)),this.clearCacheValue()}updateRecord(t,e){t&&e&&(this.isRecord&&this.records&&(this.records=this.records.map((i=>i===t?e:i))),t.isAggregator&&t.type===Ei.AVG?(this.children&&e.isAggregator&&(this.children=this.children.map((i=>i===t?e:i))),this.sum+=e.sum-t.sum,this.count+=e.count-t.count):this.field&&!isNaN(parseFloat(t[this.field]))&&(this.sum+=parseFloat(e[this.field])-parseFloat(t[this.field])),this.clearCacheValue())}value(){var t,e;return(t=this.changedValue)!==null&&t!==void 0?t:((e=this.records)===null||e===void 0?void 0:e.length)>=1?this.sum/this.count:void 0}reset(){this.changedValue=void 0,this.children=[],this.records=[],this.sum=0,this.count=0}recalculate(){if(this.sum=0,this.count=0,this._formatedValue=void 0,this.children&&this.children.length>0)for(let t=0;t<this.children.length;t++){const e=this.children[t];if(e.isAggregator&&e.type===Ei.AVG){const i=e.value();this.sum+=i*e.count,this.count+=e.count}}else if(this.records)for(let t=0;t<this.records.length;t++){const e=this.records[t];e.isAggregator&&e.type===Ei.AVG?(this.sum+=e.sum,this.count+=e.count):this.field&&!isNaN(parseFloat(e[this.field]))&&(this.sum+=parseFloat(e[this.field]),this.count++)}}}class mlt extends Fl{constructor(){super(...arguments),this.type=Ei.MAX,this.max=Number.MIN_SAFE_INTEGER}push(t){t&&(this.isRecord&&this.records&&(t.isAggregator?this.records.push(...t.records):this.records.push(t)),t.isAggregator?(this.children&&this.children.push(t),this.max=t.max>this.max?t.max:this.max):typeof t=="number"?this.max=t>this.max?t:this.max:this.field&&typeof t[this.field]=="number"?this.max=t[this.field]>this.max?t[this.field]:this.max:this.field&&!isNaN(t[this.field])&&(this.max=parseFloat(t[this.field])>this.max?parseFloat(t[this.field]):this.max)),this.clearCacheValue()}deleteRecord(t){t&&(this.isRecord&&this.records&&(this.records=this.records.filter((e=>e!==t))),t.isAggregator&&this.children&&(this.children=this.children.filter((e=>e!==t))),this.recalculate())}updateRecord(t,e){t&&e&&(this.isRecord&&this.records&&(this.records=this.records.map((i=>i===t?e:i))),t.isAggregator&&e.isAggregator&&this.children&&(this.children=this.children.map((i=>i===t?e:i))),this.recalculate())}value(){var t,e;return(t=this.changedValue)!==null&&t!==void 0?t:((e=this.records)===null||e===void 0?void 0:e.length)>=1?this.max:void 0}reset(){this.records=[],this.changedValue=void 0,this.children=[],this.max=Number.MIN_SAFE_INTEGER}recalculate(){if(this.max=Number.MIN_SAFE_INTEGER,this._formatedValue=void 0,this.children&&this.children.length>0)for(let t=0;t<this.children.length;t++){const e=this.children[t];if(e.isAggregator){const i=e.value();this.max=Math.max(this.max,i)}}else if(this.records)for(let t=0;t<this.records.length;t++){const e=this.records[t];e.isAggregator?this.max=e.max>this.max?e.max:this.max:typeof e=="number"?this.max=e>this.max?e:this.max:this.field&&typeof e[this.field]=="number"?this.max=e[this.field]>this.max?e[this.field]:this.max:this.field&&!isNaN(e[this.field])&&(this.max=parseFloat(e[this.field])>this.max?parseFloat(e[this.field]):this.max)}}}class ylt extends Fl{constructor(){super(...arguments),this.type=Ei.MIN,this.min=Number.MAX_SAFE_INTEGER}push(t){t&&(this.isRecord&&this.records&&(t.isAggregator?this.records.push(...t.records):this.records.push(t)),t.isAggregator?(this.children&&this.children.push(t),this.min=t.min<this.min?t.min:this.min):typeof t=="number"?this.min=t<this.min?t:this.min:this.field&&typeof t[this.field]=="number"?this.min=t[this.field]<this.min?t[this.field]:this.min:this.field&&!isNaN(t[this.field])&&(this.min=parseFloat(t[this.field])<this.min?parseFloat(t[this.field]):this.min)),this.clearCacheValue()}deleteRecord(t){t&&(this.isRecord&&this.records&&(this.records=this.records.filter((e=>e!==t))),t.isAggregator&&this.children&&(this.children=this.children.filter((e=>e!==t))),this.recalculate())}updateRecord(t,e){t&&e&&(this.isRecord&&this.records&&(this.records=this.records.map((i=>i===t?e:i))),t.isAggregator&&e.isAggregator&&this.children&&(this.children=this.children.map((i=>i===t?e:i))),this.recalculate())}value(){var t,e;return(t=this.changedValue)!==null&&t!==void 0?t:((e=this.records)===null||e===void 0?void 0:e.length)>=1?this.min:void 0}reset(){this.records=[],this.changedValue=void 0,this.children=[],this.min=Number.MAX_SAFE_INTEGER}recalculate(){if(this.min=Number.MAX_SAFE_INTEGER,this._formatedValue=void 0,this.children&&this.children.length>0)for(let t=0;t<this.children.length;t++){const e=this.children[t];if(e.isAggregator){const i=e.value();this.min=Math.min(this.min,i)}}else if(this.records)for(let t=0;t<this.records.length;t++){const e=this.records[t];e.isAggregator?this.min=e.min<this.min?e.min:this.min:typeof e=="number"?this.min=e<this.min?e:this.min:this.field&&typeof e[this.field]=="number"?this.min=e[this.field]<this.min?e[this.field]:this.min:this.field&&!isNaN(e[this.field])&&(this.min=parseFloat(e[this.field])<this.min?parseFloat(e[this.field]):this.min)}}}function rXt(n,t){return n&&t?n.toString().localeCompare(t.toString(),"zh"):n?1:-1}function oXt(n,t,e){if(e===no.NORMAL||e===no.normal)return 0;const i=e===no.DESC||e===no.desc?-1:1;return n&&t?n.toString().localeCompare(t.toString(),"zh")*i:n?1*i:-1*i}function blt(n,t,e){if(e===no.NORMAL||e===no.normal)return 0;const i=/(\d+)|(\D+)/g,r=/\d/,o=/^0/;let a,s,l,h,u=0,d=0;const c=e===no.DESC||e===no.desc?-1:1;if(t!==null&&n===null)return-1*c;if(n!==null&&t===null)return 1*c;if(typeof n=="number"&&isNaN(n))return-1*c;if(typeof t=="number"&&isNaN(t))return 1*c;if(u=+n,d=+t,u<d)return-1*c;if(u>d)return 1*c;if(typeof n=="number"&&typeof t!="number")return-1*c;if(typeof t=="number"&&typeof n!="number")return 1*c;if(typeof n=="number"&&typeof t=="number")return 0;if(isNaN(d)&&!isNaN(u))return-1*c;if(isNaN(u)&&!isNaN(d))return 1*c;if(a=String(n),l=String(t),a===l)return 0;if(!r.test(a)||!r.test(l))return(a>l?1:-1)*c;for(a=a.match(i),l=l.match(i);a.length&&l.length;)if(s=a.shift(),h=l.shift(),s!==h)return r.test(s)&&r.test(h)?(s.replace(o,".0")-h.replace(o,".0"))*c:(s>h?1:-1)*c;return(a.length-l.length)*c}function aXt(n){let t;const e={},i={};for(let r=0;r<n.length;r++)t=n[r],e[t]=r,typeof t=="string"&&(i[t.toLowerCase()]=r);return function(r,o,a){if(a===no.NORMAL||a===no.normal)return 0;const s=a===no.DESC||a===no.desc?-1:1;let l;return e[r]!==null&&e[r]!==void 0&&e[o]!==null&&e[o]!==void 0?l=e[r]-e[o]:e[r]!==null&&e[r]!==void 0?l=-1:e[o]!==null&&e[o]!==void 0?l=1:i[r]!==null&&e[r]!==void 0&&i[o]!==null&&e[o]!==void 0?l=i[r]-i[o]:i[r]===null||e[r]===void 0||i[o]===null||e[o]===void 0?l=0:i[r]!==null&&e[r]!==void 0?l=-1:i[o]!==null&&e[o]!==void 0&&(l=1),Y(l)?l*s:blt(r,o,a)}}function sXt(n,t){const e={};for(let i=0;i<t?.length;i++){const r=n.find((o=>o?.key===t[i]));r&&(e[r.key]=r?.value())}return e}const lXt=Object.freeze(Object.defineProperty({__proto__:null,get AggregationType(){return Ei},Aggregator:Fl,AvgAggregator:vlt,CountAggregator:plt,CustomAggregator:flt,get HierarchyState(){return Wt},get HighlightScope(){return Ee},get IconFuncTypeEnum(){return Ye},get IconPosition(){return Ue},get InteractionState(){return Xt},get InternalIconName(){return er},MaxAggregator:mlt,MinAggregator:ylt,NoneAggregator:clt,get Placement(){return yo},RecalculateAggregator:nXt,RecordAggregator:dlt,get SortType(){return no},SumAggregator:glt,cellStyleKeys:ult,indicatorSort:rXt,naturalSort:blt,registeredAggregators:J3,sortBy:aXt,typeSort:oXt},Symbol.toStringTag,{value:"Module"}));let hXt=1,u2=class{constructor(){this.listenersData={listeners:{},listenerData:{}}}on(t,e){const i=this.listenersData.listeners[t]||(this.listenersData.listeners[t]=[]);i.push(e);const r=hXt++;return this.listenersData.listenerData[r]={type:t,listener:e,remove:()=>{delete this.listenersData.listenerData[r];const o=i.indexOf(e);i.splice(o,1),this.listenersData.listeners[t].length||delete this.listenersData.listeners[t]}},r}off(t,e){var i;if(e){const r=t;this.removeEventListener(r,e)}else{const r=t;if(!this.listenersData)return;(i=this.listenersData.listenerData[r])===null||i===void 0||i.remove()}}addEventListener(t,e,i){this.on(t,e)}removeEventListener(t,e){if(this.listenersData)for(const i in this.listenersData.listenerData){const r=this.listenersData.listenerData[i];r.type===t&&r.listener===e&&this.off(i)}}hasListeners(t){return!!this.listenersData&&!!this.listenersData.listeners[t]}fireListeners(t,e){if(!this.listenersData)return[];const i=this.listenersData.listeners[t];return i?i.map((r=>r.call(this,e))).filter((r=>Y(r))):[]}release(){delete this.listenersData}},HU;const uXt={CHANGE_STYLE:"change_style"};let ks=class NO extends u2{static get EVENT_TYPE(){return uXt}static get DEFAULT(){return HU||(HU=new NO)}constructor(t={},e={}){var i,r,o,a,s,l,h,u,d,c,f,g,p,v,m,y,b,_,w,C,x,S,A,T,M,R,L,B,P,k,E;super(),this._defaultPadding=[10,16,10,16],this._textAlign=(i=t?.textAlign)!==null&&i!==void 0?i:e?.textAlign,this._textBaseline=(r=t?.textBaseline)!==null&&r!==void 0?r:e?.textBaseline,this._color=(o=t?.color)!==null&&o!==void 0?o:e?.color,this._strokeColor=(a=t?.strokeColor)!==null&&a!==void 0?a:e?.strokeColor,this._fontSize=(s=t.fontSize)!==null&&s!==void 0?s:e?.fontSize,this._fontFamily=(l=t.fontFamily)!==null&&l!==void 0?l:e?.fontFamily,this._fontWeight=(h=t.fontWeight)!==null&&h!==void 0?h:e?.fontWeight,this._fontVariant=(u=t.fontVariant)!==null&&u!==void 0?u:e?.fontVariant,this._fontStyle=(d=t.fontStyle)!==null&&d!==void 0?d:e?.fontStyle,this._padding=(f=(c=t?.padding)!==null&&c!==void 0?c:e?.padding)!==null&&f!==void 0?f:this._defaultPadding,this._borderColor=(g=t?.borderColor)!==null&&g!==void 0?g:e?.borderColor,this._textOverflow=(p=t?.textOverflow)!==null&&p!==void 0?p:e?.textOverflow,this._textStick=(m=(v=t.textStick)!==null&&v!==void 0?v:e?.textStick)!==null&&m!==void 0&&m,this._textStickBaseOnAlign=(b=(y=t.textStickBaseOnAlign)!==null&&y!==void 0?y:e?.textStickBaseOnAlign)!==null&&b!==void 0&&b,this._bgColor=(_=t?.bgColor)!==null&&_!==void 0?_:e?.bgColor,this._lineHeight=(w=t?.lineHeight)!==null&&w!==void 0?w:e?.lineHeight,this._underline=(C=t?.underline)!==null&&C!==void 0?C:e?.underline,this._underlineColor=(x=t?.underlineColor)!==null&&x!==void 0?x:e?.underlineColor,this._underlineDash=(S=t?.underlineDash)!==null&&S!==void 0?S:e?.underlineDash,this._underlineOffset=(A=t?.underlineOffset)!==null&&A!==void 0?A:e?.underlineOffset,this._lineThrough=(T=t?.lineThrough)!==null&&T!==void 0?T:e?.lineThrough,this._lineThroughColor=(M=t?.lineThroughColor)!==null&&M!==void 0?M:e?.lineThroughColor,this._lineThroughDash=(R=t?.lineThroughDash)!==null&&R!==void 0?R:e?.lineThroughDash,this._linkColor=(L=t?.linkColor)!==null&&L!==void 0?L:e?.linkColor,this._cursor=(B=t.cursor)!==null&&B!==void 0?B:e?.cursor,this._borderLineWidth=(P=t.borderLineWidth)!==null&&P!==void 0?P:e?.borderLineWidth,this._borderLineDash=(k=t.borderLineDash)!==null&&k!==void 0?k:e?.borderLineDash,this._marked=(E=t.marked)!==null&&E!==void 0?E:e?.marked}get color(){return this._color}set color(t){this._color=t}get strokeColor(){return this._strokeColor}set strokeColor(t){this._strokeColor=t}get fontSize(){return this._fontSize}set fontSize(t){this._fontSize=t}get fontFamily(){return this._fontFamily}set fontFamily(t){this._fontFamily=t}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight=t}get fontVariant(){return this._fontVariant}set fontVariant(t){this._fontVariant=t}get fontStyle(){return this._fontStyle}set fontStyle(t){this._fontStyle=t}get padding(){return this._padding}set padding(t){this._padding=t}get textOverflow(){return this._textOverflow}set textOverflow(t){this._textOverflow=t}get bgColor(){return this._bgColor}set bgColor(t){this._bgColor=t}get borderColor(){return this._borderColor}set borderColor(t){this._borderColor=t}get textStick(){return this._textStick}set textStick(t){this._textStick=t}get textStickBaseOnAlign(){return this._textStickBaseOnAlign}set textStickBaseOnAlign(t){this._textStickBaseOnAlign=t}get textAlign(){return this._textAlign}set textAlign(t){this._textAlign=t}get textBaseline(){return this._textBaseline}set textBaseline(t){this._textBaseline=t}get lineHeight(){return this._lineHeight}set lineHeight(t){this._lineHeight=t}get underline(){return this._underline}set underline(t){this._underline=t}get underlineColor(){return this._underlineColor}set underlineColor(t){this._underlineColor=t}get underlineDash(){return this._underlineDash}set underlineDash(t){this._underlineDash=t}get underlineOffset(){return this._underlineOffset}set underlineOffset(t){this._underlineOffset=t}get lineThrough(){return this._lineThrough}set lineThrough(t){this._lineThrough=t}get lineThroughColor(){return this._lineThroughColor}set lineThroughColor(t){this._lineThroughColor=t}get lineThroughDash(){return this._lineThroughDash}set lineThroughDash(t){this._lineThroughDash=t}get linkColor(){return this._linkColor}set linkColor(t){this._linkColor=t}get cursor(){return this._cursor}set cursor(t){this._cursor=t}get borderLineWidth(){return this._borderLineWidth}set borderLineWidth(t){this._borderLineWidth=t}get borderLineDash(){return this._borderLineDash}set borderLineDash(t){this._borderLineDash=t}get marked(){return this._marked}set marked(t){this._marked=t}clone(){return new NO(this,null)}},zU,dXt=class WO extends ks{static get DEFAULT(){return zU||(zU=new WO)}constructor(t={},e={}){super(t,e)}clone(){return new WO(this,null)}},FU;class Gb extends ks{static get DEFAULT(){return FU||(FU=new Gb)}constructor(t={},e={}){var i,r;super(t,e),this._autoWrapText=(i=t?.autoWrapText)!==null&&i!==void 0?i:e?.autoWrapText,this._lineClamp=(r=t?.lineClamp)!==null&&r!==void 0?r:e?.lineClamp}clone(){return new Gb(this,null)}get lineClamp(){return this._lineClamp}set lineClamp(t){this._lineClamp=t}get autoWrapText(){return this._autoWrapText}set autoWrapText(t){this._autoWrapText=t}}let NU,VO=class Gw extends ks{static get DEFAULT(){return NU||(NU=new Gw)}constructor(t={},e={},i={}){var r,o,a,s,l,h,u,d,c,f,g,p,v,m,y,b,_,w,C,x,S,A;super(t,e),this._size=((o=(r=t?.size)!==null&&r!==void 0?r:e?.size)!==null&&o!==void 0?o:i?.size)||14,this._spaceBetweenTextAndIcon=((s=(a=t?.spaceBetweenTextAndIcon)!==null&&a!==void 0?a:e?.spaceBetweenTextAndIcon)!==null&&s!==void 0?s:i?.spaceBetweenTextAndIcon)||8,this._defaultFill=(h=(l=t?.checkboxStyle)===null||l===void 0?void 0:l.defaultFill)!==null&&h!==void 0?h:i?.defaultFill,this._defaultStroke=(d=(u=t?.checkboxStyle)===null||u===void 0?void 0:u.defaultStroke)!==null&&d!==void 0?d:i?.defaultStroke,this._disableFill=(f=(c=t?.checkboxStyle)===null||c===void 0?void 0:c.disableFill)!==null&&f!==void 0?f:i?.disableFill,this._checkedFill=(p=(g=t?.checkboxStyle)===null||g===void 0?void 0:g.checkedFill)!==null&&p!==void 0?p:i?.checkedFill,this._checkedStroke=(m=(v=t?.checkboxStyle)===null||v===void 0?void 0:v.checkedStroke)!==null&&m!==void 0?m:i?.checkedStroke,this._disableCheckedFill=(b=(y=t?.checkboxStyle)===null||y===void 0?void 0:y.disableCheckedFill)!==null&&b!==void 0?b:i?.disableCheckedFill,this._disableCheckedStroke=(w=(_=t?.checkboxStyle)===null||_===void 0?void 0:_.disableCheckedStroke)!==null&&w!==void 0?w:i?.disableCheckedStroke,this._checkIconImage=(x=(C=t?.checkboxStyle)===null||C===void 0?void 0:C.checkIconImage)!==null&&x!==void 0?x:i?.checkIconImage,this._indeterminateIconImage=(A=(S=t?.checkboxStyle)===null||S===void 0?void 0:S.indeterminateIconImage)!==null&&A!==void 0?A:i?.indeterminateIconImage}get size(){return this._size}set size(t){this._size=t}get spaceBetweenTextAndIcon(){return this._spaceBetweenTextAndIcon}set spaceBetweenTextAndIcon(t){this._spaceBetweenTextAndIcon=t}get defaultFill(){return this._defaultFill}set defaultFill(t){this._defaultFill=t}get defaultStroke(){return this._defaultStroke}set defaultStroke(t){this._defaultStroke=t}get disableFill(){return this._disableFill}set disableFill(t){this._disableFill=t}get checkedFill(){return this._checkedFill}set checkedFill(t){this._checkedFill=t}get checkedStroke(){return this._checkedStroke}set checkedStroke(t){this._checkedStroke=t}get disableCheckedFill(){return this._disableCheckedFill}set disableCheckedFill(t){this._disableCheckedFill=t}get disableCheckedStroke(){return this._disableCheckedStroke}set disableCheckedStroke(t){this._disableCheckedStroke=t}get checkIconImage(){return this._checkIconImage}set checkIconImage(t){this._checkIconImage=t}get indeterminateIconImage(){return this._indeterminateIconImage}set indeterminateIconImage(t){this._indeterminateIconImage=t}getStyle(t){return new Gw(t,this)}clone(){return new Gw(this)}},WU;class mf extends ks{static get DEFAULT(){return WU||(WU=new mf)}constructor(t={},e={},i={}){var r,o,a,s,l,h,u,d,c,f,g,p,v,m,y,b,_,w,C,x,S,A,T,M;super(t,e),this._size=((o=(r=t?.size)!==null&&r!==void 0?r:e?.size)!==null&&o!==void 0?o:i?.size)||14,this._spaceBetweenTextAndIcon=((s=(a=t?.spaceBetweenTextAndIcon)!==null&&a!==void 0?a:e?.spaceBetweenTextAndIcon)!==null&&s!==void 0?s:i?.spaceBetweenTextAndIcon)||8,this._spaceBetweenRadio=((h=(l=t?.spaceBetweenRadio)!==null&&l!==void 0?l:e?.spaceBetweenRadio)!==null&&h!==void 0?h:i?.spaceBetweenRadio)||2,this._innerRadius=(d=(u=t?.radioStyle)===null||u===void 0?void 0:u.innerRadius)!==null&&d!==void 0?d:i?.innerRadius,this._outerRadius=(f=(c=t?.radioStyle)===null||c===void 0?void 0:c.outerRadius)!==null&&f!==void 0?f:i?.outerRadius,this._defaultFill=(p=(g=t?.radioStyle)===null||g===void 0?void 0:g.defaultFill)!==null&&p!==void 0?p:i?.defaultFill,this._defaultStroke=(m=(v=t?.radioStyle)===null||v===void 0?void 0:v.defaultStroke)!==null&&m!==void 0?m:i?.defaultStroke,this._disableFill=(b=(y=t?.radioStyle)===null||y===void 0?void 0:y.disableFill)!==null&&b!==void 0?b:i?.disableFill,this._checkedFill=(w=(_=t?.radioStyle)===null||_===void 0?void 0:_.checkedFill)!==null&&w!==void 0?w:i?.checkedFill,this._checkedStroke=(x=(C=t?.radioStyle)===null||C===void 0?void 0:C.checkedStroke)!==null&&x!==void 0?x:i?.checkedStroke,this._disableCheckedFill=(A=(S=t?.radioStyle)===null||S===void 0?void 0:S.disableCheckedFill)!==null&&A!==void 0?A:i?.disableCheckedFill,this._disableCheckedStroke=(M=(T=t?.radioStyle)===null||T===void 0?void 0:T.disableCheckedStroke)!==null&&M!==void 0?M:i?.disableCheckedStroke}get size(){return this._size}set size(t){this._size=t}get spaceBetweenTextAndIcon(){return this._spaceBetweenTextAndIcon}set spaceBetweenTextAndIcon(t){this._spaceBetweenTextAndIcon=t}get spaceBetweenRadio(){return this._spaceBetweenRadio}set spaceBetweenRadio(t){this._spaceBetweenRadio=t}get innerRadius(){return this._innerRadius}set innerRadius(t){this._innerRadius=t}get outerRadius(){return this._outerRadius}set outerRadius(t){this._outerRadius=t}get defaultFill(){return this._defaultFill}set defaultFill(t){this._defaultFill=t}get defaultStroke(){return this._defaultStroke}set defaultStroke(t){this._defaultStroke=t}get disableFill(){return this._disableFill}set disableFill(t){this._disableFill=t}get checkedFill(){return this._checkedFill}set checkedFill(t){this._checkedFill=t}get checkedStroke(){return this._checkedStroke}set checkedStroke(t){this._checkedStroke=t}get disableCheckedFill(){return this._disableCheckedFill}set disableCheckedFill(t){this._disableCheckedFill=t}get disableCheckedStroke(){return this._disableCheckedStroke}set disableCheckedStroke(t){this._disableCheckedStroke=t}getStyle(t){return new mf(t,this)}clone(){return new mf(this)}}let VU;class yf extends ks{static get DEFAULT(){return VU||(VU=new yf)}constructor(t={},e={},i={}){var r,o,a,s,l,h,u,d,c,f,g,p,v,m,y,b,_,w;super(t,e),this._spaceBetweenTextAndCircle=((o=(r=t?.spaceBetweenTextAndCircle)!==null&&r!==void 0?r:e?.spaceBetweenTextAndCircle)!==null&&o!==void 0?o:i?.spaceBetweenTextAndCircle)||6,this._circleRadius=((s=(a=t?.switchStyle)===null||a===void 0?void 0:a.circleRadius)!==null&&s!==void 0?s:i?.circleRadius)||8,this._boxWidth=((h=(l=t?.switchStyle)===null||l===void 0?void 0:l.boxWidth)!==null&&h!==void 0?h:i?.boxWidth)||40,this._boxHeight=((d=(u=t?.switchStyle)===null||u===void 0?void 0:u.boxHeight)!==null&&d!==void 0?d:i?.boxHeight)||24,this._checkedFill=((f=(c=t?.switchStyle)===null||c===void 0?void 0:c.checkedFill)!==null&&f!==void 0?f:i?.checkedFill)||"#165DFF",this._uncheckedFill=((p=(g=t?.switchStyle)===null||g===void 0?void 0:g.uncheckedFill)!==null&&p!==void 0?p:i?.uncheckedFill)||"#c9cdd4",this._disableCheckedFill=((m=(v=t?.switchStyle)===null||v===void 0?void 0:v.disableCheckedFill)!==null&&m!==void 0?m:i?.disableCheckedFill)||"#94bfff",this._disableUncheckedFill=((b=(y=t?.switchStyle)===null||y===void 0?void 0:y.disableUncheckedFill)!==null&&b!==void 0?b:i?.disableUncheckedFill)||"#f2f3f5",this._circleFill=((w=(_=t?.switchStyle)===null||_===void 0?void 0:_.circleFill)!==null&&w!==void 0?w:i?.circleFill)||"#FFF"}get spaceBetweenTextAndCircle(){return this._spaceBetweenTextAndCircle}set spaceBetweenTextAndCircle(t){this._spaceBetweenTextAndCircle=t}get circleRadius(){return this._circleRadius}set circleRadius(t){this._circleRadius=t}get boxWidth(){return this._boxWidth}set boxWidth(t){this._boxWidth=t}get boxHeight(){return this._boxHeight}set boxHeight(t){this._boxHeight=t}get checkedFill(){return this._checkedFill}set checkedFill(t){this._checkedFill=t}get uncheckedFill(){return this._uncheckedFill}set uncheckedFill(t){this._uncheckedFill=t}get disableCheckedFill(){return this._disableCheckedFill}set disableCheckedFill(t){this._disableCheckedFill=t}get disableUncheckedFill(){return this._disableUncheckedFill}set disableUncheckedFill(t){this._disableUncheckedFill=t}get circleFill(){return this._circleFill}set circleFill(t){this._circleFill=t}getStyle(t){return new yf(t,this)}clone(){return new yf(this)}}let GU;class bf extends ks{static get DEFAULT(){return GU||(GU=new bf)}constructor(t={},e={},i={}){var r,o,a,s,l,h,u,d,c,f,g,p,v,m,y,b,_,w,C,x,S,A;super(t,e),this._buttonColor=((o=(r=t?.buttonStyle)===null||r===void 0?void 0:r.buttonColor)!==null&&o!==void 0?o:i?.buttonColor)||"#165DFF",this._buttonBorderColor=((s=(a=t?.buttonStyle)===null||a===void 0?void 0:a.buttonBorderColor)!==null&&s!==void 0?s:i?.buttonBorderColor)||"#165DFF",this._buttonLineWidth=((h=(l=t?.buttonStyle)===null||l===void 0?void 0:l.buttonLineWidth)!==null&&h!==void 0?h:i?.buttonLineWidth)||1,this._buttonBorderRadius=((d=(u=t?.buttonStyle)===null||u===void 0?void 0:u.buttonBorderRadius)!==null&&d!==void 0?d:i?.buttonBorderRadius)||2,this._buttonHoverColor=((f=(c=t?.buttonStyle)===null||c===void 0?void 0:c.buttonHoverColor)!==null&&f!==void 0?f:i?.buttonHoverColor)||"#4080FF",this._buttonHoverBorderColor=((p=(g=t?.buttonStyle)===null||g===void 0?void 0:g.buttonHoverBorderColor)!==null&&p!==void 0?p:i?.buttonHoverBorderColor)||"#4080FF",this._buttonTextHoverColor=(m=(v=t?.buttonStyle)===null||v===void 0?void 0:v.buttonTextHoverColor)!==null&&m!==void 0?m:i?.buttonTextHoverColor,this._buttonDisableColor=((b=(y=t?.buttonStyle)===null||y===void 0?void 0:y.buttonDisableColor)!==null&&b!==void 0?b:i?.buttonDisableColor)||"#94bfff",this._buttonDisableBorderColor=((w=(_=t?.buttonStyle)===null||_===void 0?void 0:_.buttonDisableBorderColor)!==null&&w!==void 0?w:i?.buttonDisableBorderColor)||"#94bfff",this._buttonTextDisableColor=(x=(C=t?.buttonStyle)===null||C===void 0?void 0:C.buttonTextDisableColor)!==null&&x!==void 0?x:i?.buttonTextDisableColor,this._buttonPadding=((A=(S=t?.buttonStyle)===null||S===void 0?void 0:S.buttonPadding)!==null&&A!==void 0?A:i?.buttonPadding)||10}get buttonColor(){return this._buttonColor}set buttonColor(t){this._buttonColor=t}get buttonBorderColor(){return this._buttonBorderColor}set buttonBorderColor(t){this._buttonBorderColor=t}get buttonLineWidth(){return this._buttonLineWidth}set buttonLineWidth(t){this._buttonLineWidth=t}get buttonBorderRadius(){return this._buttonBorderRadius}set buttonBorderRadius(t){this._buttonBorderRadius=t}get buttonHoverColor(){return this._buttonHoverColor}set buttonHoverColor(t){this._buttonHoverColor=t}get buttonHoverBorderColor(){return this._buttonHoverBorderColor}set buttonHoverBorderColor(t){this._buttonHoverBorderColor=t}get buttonTextHoverColor(){return this._buttonTextHoverColor}set buttonTextHoverColor(t){this._buttonTextHoverColor=t}get buttonDisableColor(){return this._buttonDisableColor}set buttonDisableColor(t){this._buttonDisableColor=t}get buttonDisableBorderColor(){return this._buttonDisableBorderColor}set buttonDisableBorderColor(t){this._buttonDisableBorderColor=t}get buttonTextDisableColor(){return this._buttonTextDisableColor}set buttonTextDisableColor(t){this._buttonTextDisableColor=t}get buttonTextHoverBorderColor(){return this._buttonTextHoverBorderColor}set buttonTextHoverBorderColor(t){this._buttonTextHoverBorderColor=t}get buttonPadding(){return this._buttonPadding}set buttonPadding(t){this._buttonPadding=t}getStyle(t){return new bf(t,this)}clone(){return new bf(this)}}const{EVENT_TYPE:Uoe}=ks;function Q3(n,t,e,i=ks,r,o){var a,s,l,h;return n||t?n instanceof ks?n:typeof n=="function"?Q3(n(e),t,e,i,r,o):(n||(n={}),r&&!Y(n.autoWrapText)&&(n.autoWrapText=!0),i===VO?new VO(n??{},t??{},(a=o.checkboxStyle)!==null&&a!==void 0?a:{}):i===mf?new mf(n??{},t??{},(s=o.radioStyle)!==null&&s!==void 0?s:{}):i===yf?new yf(n??{},t??{},(l=o.switchStyle)!==null&&l!==void 0?l:{}):i===bf?new bf(n??{},t??{},(h=o.buttonStyle)!==null&&h!==void 0?h:{}):new i(n??{},t??{})):i.DEFAULT}class Be{static get mode(){return Be._mode||(Be._mode=cXt()),Be._mode}static set mode(t){Be._mode=t}static RegisterCreateCanvas(t){Be.CreateCanvas=t}static RegisterLoadImage(t){Be.LoadImage=t}static GetCreateCanvasFunc(){return Be.CreateCanvas?Be.CreateCanvas:Be.mode==="worker"?(t=200,e=200)=>new OffscreenCanvas(t,e):void 0}static RegisterRequestAnimationFrame(t){Be.RequestAnimationFrame=t()}static GetRequestAnimationFrame(){if(Be.RequestAnimationFrame)return Be.RequestAnimationFrame}static RegisterCancelAnimationFrame(t){Be.CancelAnimationFrame=t()}static GetCancelAnimationFrame(){if(Be.CancelAnimationFrame)return Be.CancelAnimationFrame}}function cXt(){let n="browser";try{window.type==="node"?n="node":typeof window>"u"||window.performance?typeof window>"u"&&(n="node"):n="miniApp"}catch{n="node"}return n}Be.dpr=0;function fXt(){try{const n=window.getSelection();if(n){if(typeof n.removeAllRanges=="function")return void n.removeAllRanges();if(typeof n.empty=="function")return void n.empty();if(typeof n.collapse=="function")return void n.collapse(document.body,0)}}catch{}}function gXt(){if(Be.mode==="node")return;const n=document.createElement("style");n.id="vtable-style-styleSheet",n.textContent=`
.vtable .input-container {
	position: absolute;
	top:0px;
}
.vtable .table-scrollable {
	position: absolute;
	overflow: scroll;
}
.vtable .table-scrollable::-webkit-scrollbar-button{
	background-color: transparent;
}
.vtable .table-scrollable::-webkit-scrollbar-track-piece{
	background-color: transparent;
}
.vtable .table-scrollable::-webkit-scrollbar-corner {
	background-color: transparent;
}
.vtable .table-scrollable::-webkit-scrollbar-thumb {
	border-radius      : 4px;
	background-color   : rgba(100, 100, 100, .5);
}

.vtable .table-scroll-end-point {
	opacity: 0;
	position: relative;
}
.vtable {
	/* overflow: auto  auto domvtable ;auto  */
	/* overflow: auto; */
	position: relative;
	width: 100%;
	height: 100%;
	text-align: left;
  -webkit-font-smoothing:auto;

  overflow: hidden; // for react-vtable dom custom element
}

.vtable-gantt {
	/* overflow: auto  auto domvtable ;auto  */
	/* overflow: auto; */
	position: absolute;
	width: 100%;
	height: 100%;
	text-align: left;
  -webkit-font-smoothing:auto;

  overflow: hidden; // for react-vtable dom custom element
}
.vtable .table-component-container {
  pointer-events: none;
  overflow: hidden;
  position: absolute;
  top: 0px;
  left: 0px;
}
.vtable > canvas {
	position: absolute;
	width: 0;
	height: 0;
}
.vtable .table-focus-control {
	position: relative !important;
	width: 1px;
	height: 1px;
	opacity: 0;
	padding: 0;
	margin: 0;
	box-sizing: border-box;
	pointer-events: none;
	max-width: 500px;
	max-height: 500px;
	float: none !important;
}
.vtable input.table-focus-control::-ms-clear {
	visibility: hidden;
}
.vtable input.table-focus-control.composition {
	opacity: 1;
	max-width: none;
	max-height: none;
}
`,document.head.appendChild(n)}function wk(n){var t;return n?.hoverOn||n?.horizontalVisible&&n?.horizontalVisible==="none"||!n?.horizontalVisible&&n?.visible==="none"?0:(t=n?.width)!==null&&t!==void 0?t:7}function xk(n){var t;return n?.hoverOn||n?.verticalVisible&&n?.verticalVisible==="none"||!n?.verticalVisible&&n?.visible==="none"?0:(t=n?.width)!==null&&t!==void 0?t:7}function pXt(n){return!!Y(n)&&(!Rt(n)||n.some((t=>Y(t))))}function vXt(n){return n===0||Rt(n)&&n.every((t=>t===0))}function mXt(n){const t=n.stateManager.select.ranges,e=[];for(let i=0;i<t.length;i++){const r=t[i];e.push({range:r,style:{cellBorderColor:"blue",cellBorderLineWidth:2,cellBorderLineDash:[5,5]}})}n.stateManager.setCustomSelectRanges(e)}function yXt(n){n.stateManager.setCustomSelectRanges([])}const bXt=n=>{switch(Object.prototype.toString.call(n)){case"[object Object]":return"object";case"[object Function]":return"function";case"[object Array]":return"array";case"[object String]":return"string";case"[object Number]":return"number";case"[object RegExp]":return"regExp";case"[object Boolean]":return"boolean";case"[object Symbol]":return"symbol";case"[object Date]":return"date";case"[object Undefined]":return"undefined";case"[object Null]":return"null";case"[object Error]":return"error";case"[object HTMLDocument]":return"document";case"[object global]":return"global";default:return null}},d2=(n,t)=>bXt(n)===t,$1=n=>d2(n,"object"),_Xt=n=>d2(n,"string"),CXt=n=>d2(n,"number"),wXt=n=>d2(n,"boolean");function pi(n,...t){if(!t.length)return n||{};const e=t.shift();if($1(n)&&$1(e))for(const i in e)$1(e[i])?(n[i]||Object.assign(n,{[i]:{}}),$1(n[i])||Object.assign(n,{[i]:e[i]}),pi(n[i],e[i])):e[i]!==null&&e[i]!==void 0&&Object.assign(n,{[i]:e[i]});return pi(n,...t)}function $U(n){return typeof n=="function"&&(n=n()),Y(n)?`${n}`:""}function jU(n,t){let e=null;return function(...i){e||(n.apply(this,i),e=setTimeout((()=>{e=null}),t))}}function xXt(n,t){let e=null;return function(...i){e||(e=setTimeout((()=>{n.apply(this,i),e=null}),t))}}function Sk(n,t){for(n=`${n}`;n.length<t;)n="0"+n;return n}function uu(n,t,e){n=(n=n.replace(/^\s*|\s*$/,"")).replace(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i,"#$1$1$2$2$3$3");const i=Math.round(256*t)*1,r=n.match(new RegExp("^rgba?\\(\\s*(\\d|[1-9]\\d|1\\d{2}|2[0-4][0-9]|25[0-5])\\s*,\\s*(\\d|[1-9]\\d|1\\d{2}|2[0-4][0-9]|25[0-5])\\s*,\\s*(\\d|[1-9]\\d|1\\d{2}|2[0-4][0-9]|25[0-5])(?:\\s*,\\s*(0|1|0?\\.\\d+))?\\s*\\)$","i")),o=r&&Y(r[4])?r[4]:null,a=r?[r[1],r[2],r[3]]:n.replace(/^#?([a-f0-9][a-f0-9])([a-f0-9][a-f0-9])([a-f0-9][a-f0-9])/i,(function(){return`${parseInt(arguments[1],16)},${parseInt(arguments[2],16)},${parseInt(arguments[3],16)}`})).split(/,/);return r?`rgb${o!==null?"a":""}(${Math.min(parseInt(a[0],10)+i,255)}, ${Math.min(parseInt(a[1],10)+i,255)}, ${Math.min(parseInt(a[2],10)+i,255)}${o!==null?`, ${o}`:""})`:["#",Sk(Math.min(parseInt(a[0],10)+i,255).toString(16),2),Sk(Math.min(parseInt(a[1],10)+i,255).toString(16),2),Sk(Math.min(parseInt(a[2],10)+i,255).toString(16),2)].join("")}function c2(n){return _Xt(n)||CXt(n)||wXt(n)?n.toString():""}function GO(){return navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)}function PA(n,t,e){return e!=="desc"?n===t?0:n>t?1:-1:n===t?0:n<t?1:-1}function SXt(n,t){let e,i=n;for(;(e=t.shift())&&(i=i[e],i););return i}function AXt(n){return/^-?\d+(\.\d+)?$/.test(n)}function _y(n){const t=[];for(let e=0;e<n.length;e++)t.indexOf(n[e])===-1&&t.push(n[e]);return t}function TXt(n){const t=window.getSelection();if(t.rangeCount){const e=t.getRangeAt(0);return e.endOffset>e.startOffset&&n.contains(e.commonAncestorContainer)}return!1}function tN(n,t,e){e(n),n?.[t]&&Array.isArray(n?.[t])&&n[t].forEach((i=>tN(i,t,e)))}function f2(n,t,e){let i=0;if(!t||t===Wt.collapse||t===Wt.none)return i;const r=e.filteredChildren?e.filteredChildren:e.children;if(r)for(let o=0;o<r.length;o++)i+=1,i+=f2(Array.isArray(n)?n.concat([o]):[n,o],r[o].hierarchyState,r[o]);return i}const _lt=typeof window>"u"||window.window===void 0;let Ak,Tk;const Clt={get find(){return Ak||(Ak=Array.prototype.find?(n,t)=>Array.prototype.find.call(n,t):(n,t)=>{const e=Clt.findIndex(n,t);return e>=0?n[e]:void 0},Ak)},get findIndex(){return Tk||(Tk=Array.prototype.findIndex?(n,t)=>Array.prototype.findIndex.call(n,t):(n,t)=>{const{length:e}=n;for(let i=0;i<e;i++)if(t(n[i],i,n))return i;return-1},Tk)}};function MXt(){if(_lt)return{IE:!1,Edge:!1,Chrome:!1,Firefox:!1,Safari:!1};const n=window.navigator.userAgent.toLowerCase();return{IE:!!/(msie|trident)/.exec(n),Edge:n.indexOf("edge")>-1,Chrome:n.indexOf("chrome")>-1&&n.indexOf("edge")===-1,Firefox:n.indexOf("firefox")>-1,Safari:n.indexOf("safari")>-1&&n.indexOf("edge")===-1}}const{IE:RXt,Chrome:Yoe,Firefox:Xoe,Edge:qoe,Safari:Koe}=MXt();function PXt(n){return n===Object(n)}function G_(...n){const t={};return n.forEach((e=>{for(const i in e)Object.defineProperty(t,i,{get:()=>e[i],set(r){e[i]=r},configurable:!0,enumerable:!0})})),t}function wlt(n,t,...e){let i=n;for(let r=0;r<e.length&&i!=null;r++)i=t(i,e[r]);return i}function j1(n,...t){return wlt(n,((e,i)=>e[i]),...t)}function Je(n,...t){return typeof n=="function"?n(...t):n}function BXt(n,t,e){const i=c2(n);(typeof e!="number"||!isFinite(e)||Math.floor(e)!==e||e>i.length)&&(e=i.length),e-=t.length;const r=i.lastIndexOf(t,e);return r!==-1&&r===e}function Hs(n){return!!(n&&typeof n.then=="function")}function BA(n,t){Hs(n)?n.then((e=>{t(e)})).catch((e=>{})):t(n)}function kXt(n){return!!n.changedTouches}function LXt(n,t){if(n[t])return n[t];const e=t.toLowerCase();if(n[e])return n[e];const i=t.toLowerCase();if(n[i])return n[i];for(const r in n)if(r.toLowerCase()===e)return n[r]}function hs(n){return Array.isArray(n)?n.length===3?[n[0],n[1],n[2],n[1]]:n.length===2?[n[0],n[1],n[0],n[1]]:n.length===1?[n[0],n[0],n[0],n[0]]:[n[0],n[1],n[2],n[3]]:[n,n,n,n]}function $a(n,t,e){return n.start.col<=t&&t<=n.end.col&&n.start.row<=e&&e<=n.end.row||n.end.col<=t&&t<=n.start.col&&n.end.row<=e&&e<=n.start.row||n.end.col<=t&&t<=n.start.col&&n.start.row<=e&&e<=n.end.row||n.start.col<=t&&t<=n.end.col&&n.end.row<=e&&e<=n.start.row}function EXt(n,t,e){for(let i=0;i<n.length;i++){const r=n[i],o=Math.min(r.start.col,r.end.col),a=Math.max(r.start.col,r.end.col),s=Math.min(r.start.row,r.end.row),l=Math.max(r.start.row,r.end.row);if(o<=t&&t<=a&&s<=e&&e<=l||a<=t&&t<=o&&l<=e&&e<=s)return!0}return!1}function UU(n){return{start:{col:Math.min(n.start.col,n.end.col),row:Math.min(n.start.row,n.end.row)},end:{col:Math.max(n.start.col,n.end.col),row:Math.max(n.start.row,n.end.row)}}}function DXt(n,t){const e=UU(n),i=UU(t);return Math.max(e.start.col,i.start.col)<=Math.min(e.end.col,i.end.col)&&Math.max(e.start.row,i.start.row)<=Math.min(e.end.row,i.end.row)}const IXt={IE:RXt},xlt={isObject:PXt},U1={endsWith:BXt},OXt={isTouchEvent:kXt},HXt={toBoxArray:hs},zXt=Function.prototype,at={CLICK_CELL:"click_cell",DBLCLICK_CELL:"dblclick_cell",MOUSEDOWN_CELL:"mousedown_cell",MOUSEUP_CELL:"mouseup_cell",SELECTED_CELL:"selected_cell",SELECTED_CLEAR:"selected_clear",BEFORE_KEYDOWN:"before_keydown",KEYDOWN:"keydown",MOUSEENTER_TABLE:"mouseenter_table",MOUSELEAVE_TABLE:"mouseleave_table",MOUSEDOWN_TABLE:"mousedown_table",MOUSEMOVE_TABLE:"mousemove_table",MOUSEMOVE_CELL:"mousemove_cell",MOUSEENTER_CELL:"mouseenter_cell",MOUSELEAVE_CELL:"mouseleave_cell",CONTEXTMENU_CELL:"contextmenu_cell",CONTEXTMENU_CANVAS:"contextmenu_canvas",RESIZE_COLUMN:"resize_column",RESIZE_COLUMN_END:"resize_column_end",RESIZE_ROW:"resize_row",RESIZE_ROW_END:"resize_row_end",CHANGE_HEADER_POSITION_START:"change_header_position_start",CHANGE_HEADER_POSITION:"change_header_position",CHANGING_HEADER_POSITION:"changing_header_position",CHANGE_HEADER_POSITION_FAIL:"change_header_position_fail",SORT_CLICK:"sort_click",AFTER_SORT:"after_sort",FREEZE_CLICK:"freeze_click",SCROLL:"scroll",CAN_SCROLL:"can_scroll",SCROLL_HORIZONTAL_END:"scroll_horizontal_end",SCROLL_VERTICAL_END:"scroll_vertical_end",DROPDOWN_MENU_CLICK:"dropdown_menu_click",MOUSEOVER_CHART_SYMBOL:"mouseover_chart_symbol",DRAG_SELECT_END:"drag_select_end",SELECTED_CHANGED:"selected_changed",COPY_DATA:"copy_data",DROPDOWN_ICON_CLICK:"dropdown_icon_click",DROPDOWN_MENU_CLEAR:"dropdown_menu_clear",TREE_HIERARCHY_STATE_CHANGE:"tree_hierarchy_state_change",SHOW_MENU:"show_menu",HIDE_MENU:"hide_menu",ICON_CLICK:"icon_click",LEGEND_ITEM_CLICK:"legend_item_click",LEGEND_ITEM_HOVER:"legend_item_hover",LEGEND_ITEM_UNHOVER:"legend_item_unHover",LEGEND_CHANGE:"legend_change",MOUSEENTER_AXIS:"mouseenter_axis",MOUSELEAVE_AXIS:"mouseleave_axis",CHECKBOX_STATE_CHANGE:"checkbox_state_change",RADIO_STATE_CHANGE:"radio_state_change",SWITCH_STATE_CHANGE:"switch_state_change",BEFORE_SET_SIZE:"before_set_size",BEFORE_INIT:"before_init",BEFORE_UPDATE_OPTION:"before_update_option",AFTER_RENDER:"after_render",INITIALIZED:"initialized",UPDATED:"updated",CHANGE_CELL_VALUE:"change_cell_value",DRAG_FILL_HANDLE_END:"drag_fill_handle_end",MOUSEDOWN_FILL_HANDLE:"mousedown_fill_handle",DBLCLICK_FILL_HANDLE:"dblclick_fill_handle",EMPTY_TIP_CLICK:"empty_tip_click",EMPTY_TIP_DBLCLICK:"empty_tip_dblclick",BUTTON_CLICK:"button_click",BEFORE_CACHE_CHART_IMAGE:"before_cache_chart_image",PASTED_DATA:"pasted_data",PLUGIN_EVENT:"plugin_event"},FXt=n=>{switch(Object.prototype.toString.call(n)){case"[object Object]":return"object";case"[object Function]":return"function";case"[object Array]":return"array";case"[object String]":return"string";case"[object Number]":return"number";case"[object RegExp]":return"regExp";case"[object Boolean]":return"boolean";case"[object Symbol]":return"symbol";case"[object Date]":return"date";case"[object Undefined]":return"undefined";case"[object Null]":return"null";case"[object Error]":return"error";case"[object HTMLDocument]":return"document";case"[object global]":return"global";default:return null}},NXt=(n,t)=>FXt(n)===t,WXt=n=>NXt(n,"object");function Slt(n,t,e){let i,r,o,a,s,l,h=0,u=!1,d=!1,c=!0;const f=!t&&t!==0&&typeof requestAnimationFrame=="function";if(typeof n!="function")throw new TypeError("Expected a function");function g(y){const b=i,_=r;return r=void 0,i=void 0,h=y,a=n.apply(_,b),a}function p(y,b){return f?requestAnimationFrame(y):setTimeout(y,b)}function v(y){const b=y-l;return l===void 0||b>=t||b<0||u&&y-h>=o}function m(){const y=Date.now();if(v(y))return(function(b){return s=void 0,c&&i?g(b):(r=void 0,i=void 0,a)})(y);s=p(m,(function(b){const _=b-h,w=t&&-(b-l);return u?Math.min(w,o-_):w})(y))}return t=+t||0,WXt(e)&&(d=!!e.leading,u="maxWait"in e,u&&(o=Math.max(+e.maxWait||0,t)),c="trailing"in e?!!e.trailing:c),function(...y){const b=Date.now(),_=v(b);if(i=y,r=this,l=b,_){if(s===void 0)return(function(w){return h=w,s=p(m,t),d?g(w):a})(l);if(u)return s=p(m,t),g(l)}return s===void 0&&(s=p(m,t)),a}}let VXt=1,GXt=class{constructor(t,e,i){var r;if(this.resizeTime=100,this.lastSize={width:0,height:0},this.mutationResize=()=>{this.onResize()},this.callBack=()=>{const o=this.getSize();let a=!1;o.width===this.lastSize.width&&o.height===this.lastSize.height&&(a=!0),this.lastSize=o,this.cb&&this.cb(Object.assign(Object.assign({},this.lastSize),{windowSizeNotChange:a}))},this.onResize=()=>{this.callBackDebounce()},this.element=t,this.cb=e,this.lastSize=this.getSize(),i&&(this.resizeTime=Math.max(i,16)),this.callBackDebounce=Slt(this.callBack,this.resizeTime),window?.addEventListener("resize",this.onResize),"ResizeObserver"in window){const o=window.ResizeObserver;this.observer=new o(this.mutationResize),(r=this.observer)===null||r===void 0||r.observe(this.element)}else"MutationObserver"in window&&(this.observer=new MutationObserver(this.mutationResize),this.observer.observe(this.element,{attributes:!0,attributeFilter:["style"]}))}disConnect(){window.removeEventListener("resize",this.onResize),this.observer&&(this.observer.disconnect(),this.observer=void 0)}setSize(t){this.lastSize=t}checkSize(){const t=this.getSize();return t.width!==this.lastSize.width||t.height!==this.lastSize.height}getSize(){return this.element?{width:Math.floor(this.element.clientWidth),height:Math.floor(this.element.clientHeight)}:Object.assign({},this.lastSize)}},g2=class{constructor(){this.listeners={},this.reseizeListeners={}}on(t,e,i,...r){if(Be.mode==="node")return-1;const o=VXt++;if(t?.addEventListener)if(e!=="resize"||t===window)t?.addEventListener(e,i,...r);else{const s=new GXt(t,i,this.resizeTime);this.reseizeListeners[o]=s}const a={target:t,type:e,listener:i,options:r};return this.listeners[o]=a,o}once(t,e,i,...r){if(Be.mode==="node")return-1;const o=this.on(t,e,((...a)=>{this.off(o),i(...a)}),...r);return o}off(t){var e;if(Be.mode==="node"||t===null)return;const i=(e=this.listeners)===null||e===void 0?void 0:e[t];i&&(delete this.listeners[t],i.target.removeEventListener&&i.target.removeEventListener(i.type,i.listener,...i.options))}fire(t,e,...i){if(Be.mode!=="node")for(const r in this.listeners){const o=this.listeners[r];o.target===t&&o.type===e&&o.listener.call(o.target,...i)}}hasListener(t,e){if(Be.mode==="node")return!1;let i=!1;for(const r in this.listeners){const o=this.listeners[r];o.target===t&&o.type===e&&(i=!0)}return i}clear(){if(Be.mode!=="node"){for(const t in this.listeners){const e=this.listeners[t];e.target.removeEventListener&&e.target.removeEventListener(e.type,e.listener,...e.options)}for(const t in this.reseizeListeners){const e=this.reseizeListeners[t];e?.disConnect()}this.listeners={}}}release(){Be.mode!=="node"&&(this.clear(),this.listeners={})}};const tc=(n,t)=>{let e=0,i=n.length-1;for(;e<=i;){const r=Math.floor((e+i)/2);if(n[r]===t)return r;n[r]>t?i=r-1:e=r+1}return i<0?0:i};class Vu{constructor(){this._keys=[],this._vals={},this._sorted=!1}count(){return this._keys.length}values(){return this._vals}valueArr(){return Object.values(this._vals)}adjustOrder(t,e,i){const{_keys:r}=this;if(this._sorted||(r.sort(((a,s)=>a<s?-1:a>s?1:0)),this._sorted=!0),t>e){const a=[];for(let s=tc(r,t+i-1);s>=0;s--){const l=r[s];if(l>=t)a.push(this.get(l));else if(e<=l&&l<t)this.put(l+i,this.get(l));else if(l<e)break}for(let s=0;s<i;s++)this.put(e+s,a[i-1-s])}const{length:o}=r;if(t<e){const a=[];for(let s=tc(r,t);s<o;s++){const l=r[s];if(l>=t&&l<t+i)a.push(this.get(l));else if(t+i<=l&&l<=e)this.put(l-i,this.get(l));else if(l>e)break}for(let s=0;s<i;s++)this.put(e+s,a[s])}}exchangeOrder(t,e,i,r,o){const{_keys:a}=this;if(this._sorted||(a.sort(((s,l)=>s<l?-1:s>l?1:0)),this._sorted=!0),t>i){const s=[],l=[];for(let h=tc(a,i);h<tc(a,t)+e;h++){const u=a[h];u>=t&&u<t+e?l.push(this.get(u)):s.push(this.get(u))}for(let h=0;h<e;h++)this.put(o+h,l[h]);for(let h=0;h<s.length;h++)this.put(o+e+h,s[h])}else{const s=[],l=[];for(let h=tc(a,t);h<tc(a,i)+r;h++){const u=a[h];u>=t&&u<t+e?l.push(this.get(u)):s.push(this.get(u))}for(let h=0;h<e;h++)this.put(o+h,l[h]);for(let h=0;h<s.length;h++)this.put(t+h,s[h])}}del(t){delete this._vals[t];const e=this._keys.indexOf(t);e!==-1&&this._keys.splice(e,1)}put(t,e){t in this._vals||(this._keys.push(t),this._sorted=!1),this._vals[t]=e}get(t){return this._vals[t]}has(t){return Y(this._vals[t])}contain(t){return Object.values(this._vals).indexOf(t)>=0}each(t,e,i){const{_keys:r}=this,{length:o}=r;this._sorted||(r.sort(((a,s)=>a<s?-1:a>s?1:0)),this._sorted=!0);for(let a=tc(r,t);a<o;a++){const s=r[a];if(t<=s&&s<=e){if(i(this.get(s),s)===!1)break}else if(e<s)return}}clear(){this._keys.length=0,this._vals={},this._sorted=!1}getLastIndex(){return this._keys[this._keys.length-1]}delLast(){const t=this.getLastIndex();this.del(t)}delAndReorder(t){if(!this.has(t))return;const e=this.getLastIndex();this.adjustOrder(t+1,t,e-t),this.delLast()}addAndReorder(t,e){if(Y(e)){const i=this.getLastIndex();this.adjustOrder(t,t+1,i-t),this.put(t,e)}}}let Lc=class $O{constructor(t,e,i,r){this.bounds=new gd,this.bounds.set(t,e,t+i,e+r)}static bounds(t,e,i,r){return new $O(t,e,Math.round(i-t),Math.round(r-e))}get left(){return this.bounds.x1}set left(t){this.bounds.x1=t}get top(){return this.bounds.y1}set top(t){this.bounds.y1=t}get right(){return this.bounds.x2}set right(t){this.bounds.x2=t}get bottom(){return this.bounds.y2}set bottom(t){this.bounds.y2=t}get width(){return this.bounds.width()}set width(t){this.bounds.x2=this.bounds.x1+t}get height(){return this.bounds.height()}set height(t){this.bounds.y2=this.bounds.y1+t}offsetLeft(t){this.bounds.translate(t,0)}offsetTop(t){this.bounds.translate(0,t)}copy(){return new $O(this.left,this.top,this.width,this.height)}contains(t){return this.bounds.encloses(t.bounds)}inPoint(t,e){return this.bounds.contains(t,e)}};function $Xt(n){const{row:t,table:e}=n;return 1&t-e.frozenRowCount?"#282a2e":"#2d3137"}const YU={name:"DARK",underlayBackgroundColor:"transparent",defaultStyle:{color:"#D3D5DA",bgColor:"#373b45",fontSize:12,fontFamily:"PingFang SC",fontWeight:500,lineHeight:12,borderColor:"#444A54",padding:[8,12,8,12],hover:{cellBgColor:"#2F4774"}},headerStyle:{color:"#D3D5DA",bgColor:"#373b45",fontSize:12,fontFamily:"PingFang SC",fontWeight:500,lineHeight:12,borderColor:"#444A54",padding:[8,12,8,12],hover:{cellBgColor:"#2F4774"}},rowHeaderStyle:{},cornerHeaderStyle:{},bodyStyle:{color:"#e5e7ea",bgColor:$Xt,fontSize:12,fontFamily:"PingFang SC",fontWeight:500,lineHeight:12,borderColor:"#444A54",padding:[8,12,8,12],hover:{cellBgColor:"#29364D"}},frameStyle:{borderColor:"#d1d5da",borderLineWidth:1,borderLineDash:[],cornerRadius:10,shadowBlur:6,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"rgba(00, 24, 47, 0.06)"},columnResize:{lineWidth:1,lineColor:"#416EFF",bgColor:"#D9E2FF",width:3},frozenColumnLine:{shadow:{width:4,startColor:"rgba(00, 24, 47, 0.05)",endColor:"rgba(00, 24, 47, 0)",visible:"always"}},selectionStyle:{cellBgColor:"rgba(255, 255, 255, 0.1)",cellBorderColor:"#4284FF",cellBorderLineWidth:2},tooltipStyle:{bgColor:"#FFF",color:"#000",fontSize:12,fontFamily:"Arial,sans-serif"},functionalIconsStyle:{sort_color:"#FFFFFF",sort_color_opacity:"0.75",sort_color_2:"#416EFF",sort_color_opacity_2:"1",frozen_color:"#FFFFFF",frozen_color_opacity:"0.75",collapse_color:"#FFF",collapse_color_opacity:"0.75",expand_color:"#FFF",expand_color_opacity:"0.75",dragReorder_color:"#FFF",dragReorder_color_opacity:"0.75"}};function jXt(n){const{row:t,table:e}=n;return 1&t-e.frozenRowCount?"#FFF":"#F4F8FF"}const XU={name:"BRIGHT",underlayBackgroundColor:"#FFF",defaultStyle:{color:"#FFF",bgColor:"#5389FF",borderColor:"#5286FA",hover:{cellBgColor:"#2E67E3"}},headerStyle:{color:"#FFF",bgColor:"#5389FF",borderColor:"#A1C1FF",hover:{cellBgColor:"#2E67E3"}},bodyStyle:{color:"#000",bgColor:jXt,borderColor:"#E0EAFE",hover:{cellBgColor:"#E9EFFD"}},frameStyle:{borderColor:"#E1E4E8",borderLineWidth:1,borderLineDash:[],cornerRadius:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"black"},columnResize:{lineWidth:1,lineColor:"#416EFF",bgColor:"#D9E2FF",width:3},frozenColumnLine:{shadow:{width:3,startColor:"#CBDCFE",endColor:"#CBDCFE",visible:"always"}},selectionStyle:{cellBgColor:"rgba(0, 0, 255,0.1)"},tooltipStyle:{bgColor:"#FFF",color:"#000",fontSize:12,fontFamily:"Arial,sans-serif"}};function UXt(n){const{row:t,table:e}=n;return 1&t-e.frozenRowCount?"#fbfbfc":"#FFF"}const qU={name:"ARCO",underlayBackgroundColor:"#FFF",defaultStyle:{color:"#1B1F23",bgColor:"#EEF1F5",fontSize:14,fontFamily:"Arial,sans-serif",fontWeight:600,lineHeight:14,borderColor:"#e1e4e8",padding:[8,12,8,12]},headerStyle:{color:"#1B1F23",bgColor:"#EEF1F5",fontSize:14,fontFamily:"Arial,sans-serif",fontWeight:600,lineHeight:14,borderColor:"#e1e4e8",padding:[8,12,8,12],hover:{cellBgColor:"#c8daf6"}},rowHeaderStyle:{color:"#1B1F23",bgColor:"#EEF1F5",fontSize:12,fontFamily:"PingFang SC",fontWeight:500,lineHeight:12,borderColor:"#e1e4e8",padding:[8,12,8,12],hover:{cellBgColor:"#c8daf6"}},cornerHeaderStyle:{color:"#1B1F23",bgColor:"#EEF1F5",fontSize:12,fontFamily:"PingFang SC",fontWeight:500,lineHeight:12,borderColor:"#e1e4e8",padding:[8,12,8,12],hover:{cellBgColor:"#c8daf6"}},bodyStyle:{padding:[8,12,8,12],color:"#141414",fontSize:14,fontFamily:"Arial,sans-serif",fontWeight:400,textAlign:"left",bgColor:UXt,borderColor:"#e1e4e8",lineHeight:14,hover:{cellBgColor:"#F7F8FA",inlineRowBgColor:"#F3F8FF",inlineColumnBgColor:"#F3F8FF"}},frameStyle:{borderColor:"#d1d5da",borderLineWidth:1,borderLineDash:[],cornerRadius:4,shadowBlur:6,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"rgba(00, 24, 47, 0.06)"},columnResize:{lineWidth:1,lineColor:"#416EFF",bgColor:"#D9E2FF",width:3},frozenColumnLine:{shadow:{width:4,startColor:"rgba(00, 24, 47, 0.05)",endColor:"rgba(00, 24, 47, 0)",visible:"always"}},selectionStyle:{cellBgColor:"rgba(0, 0, 255,0.1)",cellBorderLineWidth:2,cellBorderColor:"#3073f2"},tooltipStyle:{bgColor:"#FFF",color:"#000",fontSize:12,fontFamily:"Arial,sans-serif"}};function YXt(n){const{row:t,table:e}=n;return 1&t-e.frozenRowCount?"#FDFDFD":"#FAF9FB"}const KU={name:"DEFAULT",underlayBackgroundColor:"#FFF",defaultStyle:{borderColor:"#E1E4E8",color:"#000",bgColor:"#ECF1F5"},headerStyle:{fontSize:16,fontWeight:"bold",bgColor:"#ECF1F5",hover:{cellBgColor:"#CCE0FF",inlineRowBgColor:"#F3F8FF",inlineColumnBgColor:"#F3F8FF"}},rowHeaderStyle:{fontSize:16,fontWeight:"bold",bgColor:"#ECF1F5",hover:{cellBgColor:"#CCE0FF",inlineRowBgColor:"#F3F8FF",inlineColumnBgColor:"#F3F8FF"}},cornerHeaderStyle:{fontSize:16,fontWeight:"bold"},bodyStyle:{fontSize:14,bgColor:YXt,hover:{cellBgColor:"#CCE0FF",inlineRowBgColor:"#F3F8FF",inlineColumnBgColor:"#F3F8FF"}},frameStyle:{borderColor:"#E1E4E8",borderLineWidth:1,borderLineDash:[],cornerRadius:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"black"},columnResize:{lineWidth:1,lineColor:"#416EFF",bgColor:"#D9E2FF",width:3},frozenColumnLine:{shadow:{width:3,startColor:"rgba(225, 228, 232, 0.6)",endColor:"rgba(225, 228, 232, 0.6)",visible:"always"}},selectionStyle:{cellBgColor:"rgba(0, 0, 255,0.1)",cellBorderLineWidth:2,cellBorderColor:"#0000ff"},tooltipStyle:{bgColor:"#FFF",color:"#000",fontSize:12,fontFamily:"Arial,sans-serif"}};function XXt(n){const{row:t,table:{frozenRowCount:e}}=n;return e-1===t?["#f2f2f2","#f2f2f2","#ccc7c7","#f2f2f2"]:["#f2f2f2"]}function qXt(n){const{col:t,table:e}=n,{colCount:i,frozenColCount:r}=e,o="#ccc7c7";return r-1===t||i-1===t?[o,"#f2f2f2","#ccc7c7",null]:[o,null,"#ccc7c7",null]}const ZU={name:"SIMPLIFY",underlayBackgroundColor:"#FFF",defaultStyle:{borderColor:qXt,hover:{cellBorderColor:"#0000FF",cellBgColor:"#D0E0E3"},bgColor:"#FFF"},headerStyle:{color:"rgba(0, 0, 0, 0.87)",borderColor:XXt},bodyStyle:{color:"rgba(0, 0, 0, 0.87)"},frameStyle:{borderColor:"#f2f2f2",borderLineWidth:1},columnResize:{lineWidth:1,lineColor:"#416EFF",bgColor:"#D9E2FF"},selectionStyle:{cellBorderColor:"#FD5",cellBgColor:"rgba(111, 168, 220, 0.1)"},tooltipStyle:{bgColor:"#FFF",color:"#000",fontSize:12,fontFamily:"Arial,sans-serif"}},kA={},JU=16,QU="Arial,sans-serif",KXt="#FFF",ZXt="#000",JXt=1,QXt=[],tqt="#000",eN=/^(https?|ftp|file):\/\/[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]/,Y1="$$indicator$$",eqt='<svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><rect x="0" y="0" width="1024" height="1024" rx="20%" ry="20%" fill="#ffffff" /><path  d="M810.666667 85.333333c70.688 0 128 57.312 128 128v597.333334c0 70.688-57.312 128-128 128H213.333333c-70.688 0-128-57.312-128-128V213.333333c0-70.688 57.312-128 128-128h597.333334z m0 85.333334H213.333333a42.666667 42.666667 0 0 0-42.613333 40.533333L170.666667 213.333333v597.333334a42.666667 42.666667 0 0 0 40.533333 42.613333L213.333333 853.333333h597.333334a42.666667 42.666667 0 0 0 42.613333-40.533333L853.333333 810.666667V213.333333a42.666667 42.666667 0 0 0-40.533333-42.613333L810.666667 170.666667zM549.333333 288a5.333333 5.333333 0 0 1 5.333334 5.333333V469.333333h176a5.333333 5.333333 0 0 1 5.333333 5.333334v74.666666a5.333333 5.333333 0 0 1-5.333333 5.333334H554.666667v176a5.333333 5.333333 0 0 1-5.333334 5.333333h-74.666666a5.333333 5.333333 0 0 1-5.333334-5.333333V554.666667H293.333333a5.333333 5.333333 0 0 1-5.333333-5.333334v-74.666666a5.333333 5.333333 0 0 1 5.333333-5.333334H469.333333V293.333333a5.333333 5.333333 0 0 1 5.333334-5.333333h74.666666z"></path></svg>',iqt='<svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><rect x="0" y="0" width="1024" height="1024" rx="20%" ry="20%" fill="#ffffff" /><path d="M810.666667 85.333333c70.688 0 128 57.312 128 128v597.333334c0 70.688-57.312 128-128 128H213.333333c-70.688 0-128-57.312-128-128V213.333333c0-70.688 57.312-128 128-128h597.333334z m0 85.333334H213.333333a42.666667 42.666667 0 0 0-42.613333 40.533333L170.666667 213.333333v597.333334a42.666667 42.666667 0 0 0 40.533333 42.613333L213.333333 853.333333h597.333334a42.666667 42.666667 0 0 0 42.613333-40.533333L853.333333 810.666667V213.333333a42.666667 42.666667 0 0 0-40.533333-42.613333L810.666667 170.666667zM693.333333 469.333333a42.666667 42.666667 0 1 1 0 85.333334H330.666667a42.666667 42.666667 0 1 1 0-85.333334h362.666666z"></path></svg>',nqt={type:"line"};function rqt(n){return{defaultAxisStyle:o0(n.defaultAxisStyle),leftAxisStyle:o0(n.leftAxisStyle),rightAxisStyle:o0(n.rightAxisStyle),topAxisStyle:o0(n.topAxisStyle),bottomAxisStyle:o0(n.bottomAxisStyle)}}function o0(n){return n||{}}const oqt={visible:!0,position:"auto",padding:8,titleStyle:{fontSize:12,fontWeight:"bold",fill:"#4E5969"},contentStyle:{fontSize:12,fill:"#4E5969"},panel:{visible:!0,fill:"#fff",stroke:"#ffffff",lineWidth:0,cornerRadius:3,shadowBlur:12,shadowOffsetX:0,shadowOffsetY:4,shadowColor:"rgba(0, 0, 0, 0.1)",size:0,space:12}};function Fg(n,t,e,i){var r,o,a;return(a=(o=(r=j1(n,...e))!==null&&r!==void 0?r:j1(t,...e))!==null&&o!==void 0?o:i&&j1(n,...i))!==null&&a!==void 0?a:i&&j1(t,...i)}class Ao{constructor(t,e){this._defaultStyle=null,this._header=null,this._cornerHeader=null,this._cornerRightTopCell=null,this._cornerLeftBottomCell=null,this._cornerRightBottomCell=null,this._rightFrozen=null,this._bottomFrozen=null,this._rowHeader=null,this._body=null,this._groupTitle=null,this._scroll=null,this._tooltip=null,this._frameStyle=null,this._columnResize=null,this._dragHeaderSplitLine=null,this._frozenColumnLine=null,this._selectionStyle=null,this._axisStyle=null,this._checkboxStyle=null,this._radioStyle=null,this._switchStyle=null,this._buttonStyle=null,this._textPopTipStyle=null,this._internalIconsStyle=null,this.isPivot=!1,this.name="",this.internalTheme={obj:t,superTheme:e},this.name=Fg(t,e,["name"])}getExtendTheme(){return this.internalTheme.obj}clearBodyStyleCache(){this._body=null}get font(){const{obj:t,superTheme:e}=this.internalTheme;return Fg(t,e,["font"],["bodyStyle","font"])}get underlayBackgroundColor(){const{obj:t,superTheme:e}=this.internalTheme;return Fg(t,e,["underlayBackgroundColor"])}get cellInnerBorder(){var t;const{obj:e,superTheme:i}=this.internalTheme;return(t=Fg(e,i,["cellInnerBorder"]))===null||t===void 0||t}get cellBorderClipDirection(){var t;const{obj:e,superTheme:i}=this.internalTheme;return(t=Fg(e,i,["cellBorderClipDirection"]))!==null&&t!==void 0?t:"top-left"}get _contentOffset(){var t;const{obj:e,superTheme:i}=this.internalTheme;return(t=Fg(e,i,["_contentOffset"]))!==null&&t!==void 0?t:0}get defaultStyle(){const t=this;if(!this._defaultStyle){const{obj:e,superTheme:i}=this.internalTheme,r=pi({},i.defaultStyle,e.defaultStyle);this._defaultStyle={get fontSize(){var o;return(o=r.fontSize)!==null&&o!==void 0?o:JU},get fontFamily(){var o;return(o=r.fontFamily)!==null&&o!==void 0?o:QU},get fontWeight(){return r.fontWeight},get fontVariant(){return r.fontVariant},get fontStyle(){return r.fontStyle},get bgColor(){var o;return(o=r.bgColor)!==null&&o!==void 0?o:KXt},get color(){var o;return(o=r.color)!==null&&o!==void 0?o:tqt},get borderColor(){var o;return(o=r.borderColor)!==null&&o!==void 0?o:ZXt},get borderLineWidth(){var o;return(o=r.borderLineWidth)!==null&&o!==void 0?o:JXt},get borderLineDash(){var o;return(o=r.borderLineDash)!==null&&o!==void 0?o:QXt},get hover(){if(r.hover)return{get cellBgColor(){var o,a;return(a=(o=r.hover)===null||o===void 0?void 0:o.cellBgColor)!==null&&a!==void 0?a:void 0},get inlineColumnBgColor(){var o,a,s,l,h,u;return(u=(a=(o=r.hover)===null||o===void 0?void 0:o.inlineColumnBgColor)!==null&&a!==void 0?a:!((s=r.hover)===null||s===void 0)&&s.cellBgColor&&typeof((l=r.hover)===null||l===void 0?void 0:l.cellBgColor)=="string"?uu((h=r.hover)===null||h===void 0?void 0:h.cellBgColor,.1):void 0)!==null&&u!==void 0?u:void 0},get inlineRowBgColor(){var o,a,s,l,h,u;return(u=(a=(o=r.hover)===null||o===void 0?void 0:o.inlineRowBgColor)!==null&&a!==void 0?a:!((s=r.hover)===null||s===void 0)&&s.cellBgColor&&typeof((l=r.hover)===null||l===void 0?void 0:l.cellBgColor)=="string"?uu((h=r.hover)===null||h===void 0?void 0:h.cellBgColor,.1):void 0)!==null&&u!==void 0?u:void 0}}},get select(){if(r.select)return{get inlineColumnBgColor(){var o,a,s,l,h,u;return(u=(l=(a=(o=r.select)===null||o===void 0?void 0:o.inlineColumnBgColor)!==null&&a!==void 0?a:(s=t.selectionStyle)===null||s===void 0?void 0:s.inlineColumnBgColor)!==null&&l!==void 0?l:!((h=t.selectionStyle)===null||h===void 0)&&h.cellBgColor&&typeof t.selectionStyle.cellBgColor=="string"?uu(t.selectionStyle.cellBgColor,.1):void 0)!==null&&u!==void 0?u:void 0},get inlineRowBgColor(){var o,a,s,l,h;return(h=(s=(a=(o=r.select)===null||o===void 0?void 0:o.inlineRowBgColor)!==null&&a!==void 0?a:t.selectionStyle.inlineRowBgColor)!==null&&s!==void 0?s:!((l=t.selectionStyle)===null||l===void 0)&&l.cellBgColor&&typeof t.selectionStyle.cellBgColor=="string"?uu(t.selectionStyle.cellBgColor,.1):void 0)!==null&&h!==void 0?h:void 0}}},get padding(){var o;return(o=r.padding)!==null&&o!==void 0?o:[10,16,10,16]},get textAlign(){var o;return(o=r.textAlign)!==null&&o!==void 0?o:"left"},get textBaseline(){var o;return(o=r.textBaseline)!==null&&o!==void 0?o:"middle"},get textOverflow(){var o;return(o=r.textOverflow)!==null&&o!==void 0?o:"ellipsis"},get lineHeight(){return r.lineHeight},get autoWrapText(){var o;return(o=r.autoWrapText)!==null&&o!==void 0&&o},get lineClamp(){var o;return(o=r.lineClamp)!==null&&o!==void 0?o:"auto"},get linkColor(){var o;return(o=r.linkColor)!==null&&o!==void 0?o:"#3772ff"},get cursor(){var o;return(o=r.cursor)!==null&&o!==void 0?o:"auto"},get marked(){var o;return(o=r.marked)!==null&&o!==void 0&&o},get underline(){var o;return(o=r.underline)!==null&&o!==void 0&&o},get underlineColor(){return r.underlineColor},get underlineDash(){return r.underlineDash},get underlineOffset(){return r.underlineOffset},get lineThrough(){var o;return(o=r.lineThrough)!==null&&o!==void 0&&o},get lineThroughColor(){return r.lineThroughColor},get lineThroughDash(){return r.lineThroughDash}}}return this._defaultStyle}get cornerHeaderStyle(){if(!this._cornerHeader){const{obj:t,superTheme:e}=this.internalTheme,i=pi({},this.defaultStyle,e.cornerHeaderStyle,t.cornerHeaderStyle);this._cornerHeader=this.getStyle(i)}return this._cornerHeader}get cornerRightTopCellStyle(){if(!this._cornerRightTopCell){const{obj:t,superTheme:e}=this.internalTheme;if(!e.cornerRightTopCellStyle&&!t.cornerRightTopCellStyle)return this._cornerRightTopCell;const i=pi({},this.defaultStyle,e.cornerRightTopCellStyle,t.cornerRightTopCellStyle);this._cornerRightTopCell=this.getStyle(i)}return this._cornerRightTopCell}get cornerLeftBottomCellStyle(){if(!this._cornerLeftBottomCell){const{obj:t,superTheme:e}=this.internalTheme;if(!e.cornerLeftBottomCellStyle&&!t.cornerLeftBottomCellStyle)return this._cornerLeftBottomCell;const i=pi({},this.defaultStyle,e.cornerLeftBottomCellStyle,t.cornerLeftBottomCellStyle);this._cornerLeftBottomCell=this.getStyle(i)}return this._cornerLeftBottomCell}get cornerRightBottomCellStyle(){if(!this._cornerRightBottomCell){const{obj:t,superTheme:e}=this.internalTheme;if(!e.cornerRightBottomCellStyle&&!t.cornerRightBottomCellStyle)return this._cornerRightBottomCell;const i=pi({},this.defaultStyle,e.cornerRightBottomCellStyle,t.cornerRightBottomCellStyle);this._cornerRightBottomCell=this.getStyle(i)}return this._cornerRightBottomCell}get rightFrozenStyle(){if(!this._rightFrozen){const{obj:t,superTheme:e}=this.internalTheme;if(!e.rightFrozenStyle&&!t.rightFrozenStyle)return this._rightFrozen;const i=pi({},this.defaultStyle,this.rowHeaderStyle,e.rightFrozenStyle,t.rightFrozenStyle);this._rightFrozen=this.getStyle(i)}return this._rightFrozen}get bottomFrozenStyle(){if(!this._bottomFrozen){const{obj:t,superTheme:e}=this.internalTheme;if(!e.bottomFrozenStyle&&!t.bottomFrozenStyle)return this._bottomFrozen;const i=pi({},this.defaultStyle,this.headerStyle,e.bottomFrozenStyle,t.bottomFrozenStyle);this._bottomFrozen=this.getStyle(i)}return this._bottomFrozen}get rowHeaderStyle(){var t;if(!this._rowHeader){const{obj:e,superTheme:i}=this.internalTheme,r=pi({},this.defaultStyle,i.rowHeaderStyle,(t=e.rowHeaderStyle)!==null&&t!==void 0?t:this.isPivot?null:e.headerStyle);this._rowHeader=this.getStyle(r)}return this._rowHeader}get headerStyle(){if(!this._header){const{obj:t,superTheme:e}=this.internalTheme,i=pi({},this.defaultStyle,e.headerStyle,t.headerStyle);this._header=this.getStyle(i)}return this._header}get bodyStyle(){if(!this._body){const{obj:t,superTheme:e}=this.internalTheme,i=pi({},this.defaultStyle,e.bodyStyle,t.bodyStyle);this._body=this.getStyle(i)}return this._body}get groupTitleStyle(){if(!this._groupTitle){const{obj:t,superTheme:e}=this.internalTheme;if(!e.groupTitleStyle&&!t.groupTitleStyle)return this._groupTitle;const i=pi({},this.defaultStyle,e.groupTitleStyle,t.groupTitleStyle);this._groupTitle=this.getStyle(i)}return this._groupTitle}get frameStyle(){if(!this._frameStyle){const{obj:t,superTheme:e}=this.internalTheme,i=pi({},e.frameStyle,t.frameStyle);this._frameStyle={get borderColor(){return i.borderColor},get borderLineWidth(){return i.borderLineWidth},get borderLineDash(){return i.borderLineDash},get innerBorder(){return i.innerBorder},get shadowBlur(){return i.shadowBlur},get shadowColor(){return i.shadowColor},get shadowOffsetX(){return i.shadowOffsetX},get shadowOffsetY(){return i.shadowOffsetY},get cornerRadius(){return i.cornerRadius}}}return this._frameStyle}get scrollStyle(){if(!this._scroll){const{obj:t,superTheme:e}=this.internalTheme,i=pi({},e.scrollStyle,t.scrollStyle);this._scroll={get scrollSliderColor(){var r;return(r=i.scrollSliderColor)!==null&&r!==void 0?r:"#C0C0C0"},get scrollSliderCornerRadius(){return i.scrollSliderCornerRadius},get scrollRailColor(){return i.scrollRailColor},get visible(){var r;return(r=i.visible)!==null&&r!==void 0?r:"scrolling"},get verticalVisible(){return i.verticalVisible},get horizontalVisible(){return i.horizontalVisible},get width(){var r;return(r=i.width)!==null&&r!==void 0?r:7},get hoverOn(){var r;return(r=i.hoverOn)===null||r===void 0||r},get barToSide(){var r;return(r=i.barToSide)!==null&&r!==void 0&&r},get horizontalPadding(){var r;return(r=i.horizontalPadding)!==null&&r!==void 0?r:0},get verticalPadding(){var r;return(r=i.verticalPadding)!==null&&r!==void 0?r:0},get ignoreFrozenCols(){var r;return(r=i.ignoreFrozenCols)!==null&&r!==void 0&&r}}}return this._scroll}get tooltipStyle(){if(!this._tooltip){const{obj:t,superTheme:e}=this.internalTheme,i=pi({},e.tooltipStyle,t.tooltipStyle);this._tooltip={get fontFamily(){var r;return(r=i.fontFamily)!==null&&r!==void 0?r:QU},get fontSize(){var r;return(r=i.fontSize)!==null&&r!==void 0?r:JU},get bgColor(){var r;return(r=i.bgColor)!==null&&r!==void 0?r:"#000"},get padding(){var r;return(r=i.padding)!==null&&r!==void 0?r:[6,8]},get color(){var r;return(r=i.color)!==null&&r!==void 0?r:"#FFF"},get maxWidth(){return i.maxWidth},get maxHeight(){return i.maxHeight}}}return this._tooltip}get columnResize(){if(!this._columnResize){const{obj:t,superTheme:e}=this.internalTheme,i=pi({},e.columnResize,t.columnResize);this._columnResize={get lineColor(){var r;return(r=i.lineColor)!==null&&r!==void 0?r:"#416EFF"},get bgColor(){var r;return(r=i.bgColor)!==null&&r!==void 0?r:"#D9E2FF"},get lineWidth(){var r;return(r=i.lineWidth)!==null&&r!==void 0?r:1},get width(){var r;return(r=i.width)!==null&&r!==void 0?r:i.lineWidth+2},get resizeHotSpotSize(){var r;return(r=i.resizeHotSpotSize)!==null&&r!==void 0?r:16},get labelColor(){var r;return(r=i.labelColor)!==null&&r!==void 0?r:"#FFF"},get labelFontSize(){var r;return(r=i.labelFontSize)!==null&&r!==void 0?r:10},get labelFontFamily(){var r;return(r=i.labelFontFamily)!==null&&r!==void 0?r:"sans-serif"},get labelBackgroundFill(){var r;return(r=i.labelBackgroundFill)!==null&&r!==void 0?r:"#3073F2"},get labelBackgroundCornerRadius(){var r;return(r=i.labelBackgroundCornerRadius)!==null&&r!==void 0?r:5},get labelVisible(){var r;return(r=i.labelVisible)===null||r===void 0||r},get visibleOnHover(){var r;return(r=i.visibleOnHover)!==null&&r!==void 0&&r}}}return this._columnResize}get dragHeaderSplitLine(){if(!this._dragHeaderSplitLine){const{obj:t,superTheme:e}=this.internalTheme,i=pi({},e.dragHeaderSplitLine,t.dragHeaderSplitLine);this._dragHeaderSplitLine={get lineColor(){var r;return(r=i.lineColor)!==null&&r!==void 0?r:"blue"},get lineWidth(){var r;return(r=i.lineWidth)!==null&&r!==void 0?r:2},get shadowBlockColor(){var r;return(r=i.shadowBlockColor)!==null&&r!==void 0?r:"rgba(204,204,204,0.3)"}}}return this._dragHeaderSplitLine}get frozenColumnLine(){if(!this._frozenColumnLine){const{obj:t,superTheme:e}=this.internalTheme,i=pi({},e.frozenColumnLine,t.frozenColumnLine);this._frozenColumnLine={get shadow(){if(i.shadow)return{get width(){var r,o;return(o=(r=i.shadow)===null||r===void 0?void 0:r.width)!==null&&o!==void 0?o:24},get startColor(){var r,o;return(o=(r=i.shadow)===null||r===void 0?void 0:r.startColor)!==null&&o!==void 0?o:"rgba(00, 24, 47, 0.06)"},get endColor(){var r,o;return(o=(r=i.shadow)===null||r===void 0?void 0:r.endColor)!==null&&o!==void 0?o:"rgba(00, 24, 47, 0)"},get visible(){var r,o;return(o=(r=i.shadow)===null||r===void 0?void 0:r.visible)!==null&&o!==void 0?o:"always"}}},get border(){if(i.border)return{get lineColor(){var r,o;return(o=(r=i.border)===null||r===void 0?void 0:r.lineColor)!==null&&o!==void 0?o:"rgba(00, 24, 47, 0.06)"},get bgColor(){var r,o,a,s;return(s=(o=(r=i.border)===null||r===void 0?void 0:r.bgColor)!==null&&o!==void 0?o:(a=i.border)===null||a===void 0?void 0:a.lineColor)!==null&&s!==void 0?s:"rgba(00, 24, 47, 0.06)"},get lineWidth(){var r,o;return(o=(r=i.border)===null||r===void 0?void 0:r.lineWidth)!==null&&o!==void 0?o:4},get width(){var r,o,a,s;return(s=(o=(r=i.border)===null||r===void 0?void 0:r.width)!==null&&o!==void 0?o:(a=i.border)===null||a===void 0?void 0:a.lineWidth)!==null&&s!==void 0?s:4}}}}}return this._frozenColumnLine}get selectionStyle(){if(!this._selectionStyle){const{obj:t,superTheme:e}=this.internalTheme,i=pi({},e.selectionStyle,t.selectionStyle);this._selectionStyle={get cellBgColor(){var r;return(r=i?.cellBgColor)!==null&&r!==void 0?r:"rgba(0, 0, 255,0.1)"},get cellBorderColor(){var r;return(r=i?.cellBorderColor)!==null&&r!==void 0?r:"#3073f2"},get cellBorderLineWidth(){var r;return(r=i?.cellBorderLineWidth)!==null&&r!==void 0?r:2},get inlineColumnBgColor(){return i?.inlineColumnBgColor},get inlineRowBgColor(){return i?.inlineRowBgColor},get selectionFillMode(){var r;return(r=i?.selectionFillMode)!==null&&r!==void 0?r:"overlay"},get dynamicUpdateSelectionSize(){var r;return(r=i?.dynamicUpdateSelectionSize)!==null&&r!==void 0&&r}}}return this._selectionStyle}get axisStyle(){if(!this._axisStyle){const{obj:t,superTheme:e}=this.internalTheme,i=pi({},e.axisStyle,t.axisStyle);this._axisStyle=rqt(i)}return this._axisStyle}get checkboxStyle(){if(!this._checkboxStyle){const{obj:t,superTheme:e}=this.internalTheme,i=pi({},e.checkboxStyle,t.checkboxStyle);this._checkboxStyle=i}return this._checkboxStyle}get radioStyle(){if(!this._radioStyle){const{obj:t,superTheme:e}=this.internalTheme,i=pi({},e.radioStyle,t.radioStyle);this._radioStyle=i}return this._radioStyle}get switchStyle(){if(!this._switchStyle){const{obj:t,superTheme:e}=this.internalTheme,i=pi({},e.switchStyle,t.switchStyle);this._switchStyle=i}return this._switchStyle}get buttonStyle(){if(!this._buttonStyle){const{obj:t,superTheme:e}=this.internalTheme,i=pi({},e.buttonStyle,t.buttonStyle);this._buttonStyle=i}return this._buttonStyle}get textPopTipStyle(){if(!this._textPopTipStyle){const{obj:t,superTheme:e}=this.internalTheme,i=pi({},oqt,e.textPopTipStyle,t.textPopTipStyle);this._textPopTipStyle=i}return this._textPopTipStyle}get functionalIconsStyle(){if(!this._internalIconsStyle){const{obj:t,superTheme:e}=this.internalTheme,i=pi({},e.functionalIconsStyle,t.functionalIconsStyle);this._internalIconsStyle=i}return this._internalIconsStyle}hasProperty(t){const{obj:e,superTheme:i}=this.internalTheme;return tY(e,t)||tY(i,t)}extends(t){return new Ao(pi({},t),pi({},this.internalTheme.superTheme,this.internalTheme.obj))}getStyle(t){const e=this;return{get fontSize(){return t.fontSize},get fontFamily(){return t.fontFamily},get fontWeight(){return t.fontWeight},get fontVariant(){return t.fontVariant},get fontStyle(){return t.fontStyle},get bgColor(){return t.bgColor},get color(){return t.color},get strokeColor(){return t.strokeColor},get borderColor(){return t.borderColor},get borderLineWidth(){return t.borderLineWidth},get borderLineDash(){return t.borderLineDash},get hover(){if(t.hover)return{get cellBgColor(){var i,r;return(r=(i=t.hover)===null||i===void 0?void 0:i.cellBgColor)!==null&&r!==void 0?r:void 0},get inlineColumnBgColor(){var i,r,o,a,s,l;return(l=(r=(i=t.hover)===null||i===void 0?void 0:i.inlineColumnBgColor)!==null&&r!==void 0?r:!((o=t.hover)===null||o===void 0)&&o.cellBgColor&&typeof((a=t.hover)===null||a===void 0?void 0:a.cellBgColor)=="string"?uu((s=t.hover)===null||s===void 0?void 0:s.cellBgColor,.1):void 0)!==null&&l!==void 0?l:void 0},get inlineRowBgColor(){var i,r,o,a,s,l;return(l=(r=(i=t.hover)===null||i===void 0?void 0:i.inlineRowBgColor)!==null&&r!==void 0?r:!((o=t.hover)===null||o===void 0)&&o.cellBgColor&&typeof((a=t.hover)===null||a===void 0?void 0:a.cellBgColor)=="string"?uu((s=t.hover)===null||s===void 0?void 0:s.cellBgColor,.1):void 0)!==null&&l!==void 0?l:void 0}}},get select(){return{get inlineColumnBgColor(){var i,r,o,a,s,l;return(l=(a=(r=(i=t.select)===null||i===void 0?void 0:i.inlineColumnBgColor)!==null&&r!==void 0?r:(o=e.selectionStyle)===null||o===void 0?void 0:o.inlineColumnBgColor)!==null&&a!==void 0?a:!((s=e.selectionStyle)===null||s===void 0)&&s.cellBgColor&&typeof e.selectionStyle.cellBgColor=="string"?uu(e.selectionStyle.cellBgColor,.1):void 0)!==null&&l!==void 0?l:void 0},get inlineRowBgColor(){var i,r,o,a,s;return(s=(o=(r=(i=t.select)===null||i===void 0?void 0:i.inlineRowBgColor)!==null&&r!==void 0?r:e.selectionStyle.inlineRowBgColor)!==null&&o!==void 0?o:!((a=e.selectionStyle)===null||a===void 0)&&a.cellBgColor&&typeof e.selectionStyle.cellBgColor=="string"?uu(e.selectionStyle.cellBgColor,.1):void 0)!==null&&s!==void 0?s:void 0},get cellBgColor(){var i,r,o;if(e.selectionStyle.selectionFillMode==="replace")return(o=(r=(i=t.select)===null||i===void 0?void 0:i.cellBgColor)!==null&&r!==void 0?r:e.selectionStyle.cellBgColor)!==null&&o!==void 0?o:void 0}}},get frameStyle(){if(t.frameStyle)return{get borderColor(){var i,r;return(r=(i=t.frameStyle)===null||i===void 0?void 0:i.borderColor)!==null&&r!==void 0?r:void 0},get borderLineWidth(){var i,r;return(r=(i=t.frameStyle)===null||i===void 0?void 0:i.borderLineWidth)!==null&&r!==void 0?r:void 0},get borderLineDash(){var i,r;return(r=(i=t.frameStyle)===null||i===void 0?void 0:i.borderLineDash)!==null&&r!==void 0?r:void 0}}},get padding(){return t.padding},get textAlign(){return t.textAlign},get textBaseline(){return t.textBaseline},get textOverflow(){return t.textOverflow},get lineHeight(){return t.lineHeight},get autoWrapText(){return t.autoWrapText},get lineClamp(){return t.lineClamp},get linkColor(){return t.linkColor},get cursor(){return t.cursor},get textStick(){return t.textStick},get marked(){return t.marked},get underline(){var i;return(i=t.underline)!==null&&i!==void 0&&i},get underlineColor(){return t.underlineColor},get underlineDash(){return t.underlineDash},get underlineOffset(){return t.underlineOffset},get lineThrough(){var i;return(i=t.lineThrough)!==null&&i!==void 0&&i},get lineThroughColor(){return t.lineThroughColor},get lineThroughDash(){return t.lineThroughDash}}}}function tY(n,t){if(n instanceof Ao)return n.hasProperty(t);let e=n;if(!e)return!1;for(let i=0;i<t.length;i++)if(e=e[t[i]],!e)return!1;return!!e}const iN=new Ao(YU,YU),nN=new Ao(XU,XU),rN=new Ao(qU,qU),tf=new Ao(KU,KU),oN=new Ao(ZU,ZU),aqt={DEFAULT:tf,SIMPLIFY:oN,ARCO:rN,DARK:iN,BRIGHT:nN},Alt={TableTheme:Ao};function Tlt(n){if(!n)return null;if(typeof n=="string"){const t=LXt(aN(),n);return t?t instanceof Ao?t:new Ao(t,t):null}return n instanceof Ao?n:new Ao(n,n)}function aN(){return G_(aqt,kA)}const rh={DARK:iN,BRIGHT:nN,ARCO:rN,DEFAULT:tf,SIMPLIFY:oN,theme:Alt,of:Tlt,get:aN},sqt=Object.freeze(Object.defineProperty({__proto__:null,ARCO:rN,BRIGHT:nN,DARK:iN,DEFAULT:tf,SIMPLIFY:oN,TableTheme:Ao,default:rh,get:aN,of:Tlt,theme:Alt},Symbol.toStringTag,{value:"Module"}));function un(n,t,e){var i;if(n.internalProps.customMergeCell){const o=n.getCustomMerge(t,e);if(o)return o.range}if(!n.internalProps.enableTreeNodeMerge&&!n.isHeader(t,e)&&!(!((i=n.getBodyColumnDefine(t,e))===null||i===void 0)&&i.mergeCell))return!1;const r=n.getCellRange(t,e);return!(r.start.col===r.end.col&&r.start.row===r.end.row)&&r}class It{static registerComponent(t,e){It._components[t]=e}static getComponent(t){return It._components[t]}static registerFunction(t,e){It._functions[t]=e}static getFunction(t){return It._functions[t]}static registerCellType(t,e){It._cellTypes[t]=e}static getCellType(t){return It._cellTypes[t]}}It._components={},It._functions={},It._cellTypes={};function lqt(n,t){const e=new Array(t);for(let i=0;i<t;i++)e[i]=n(i);return e}function hqt(n,t,e,i,r,o){const a=lqt(n,e);a.sort(((s,l)=>i(o(s),o(l),r)));for(let s=0;s<e;s++)t(s,a[s])}function uqt(n){if(xlt.isObject(n)){const t=n;if(Y(t.get)&&Y(t.set))return!0}return!1}const X1={SOURCE_LENGTH_UPDATE:"source_length_update",CHANGE_ORDER:"change_order"};function Mu(n,t){const e=Je(n);if(Hs(e)){const i=e.then((r=>(t(r),r)));return t(i),i}return e}function LA(n,t,e,i,r,o){if(n==null)return;if(Hs(n))return n.then((l=>LA(l,t,e,i,r,o)));const a=uqt(t)?t.get:t;if((a===void 0||a==="")&&Array.isArray(n))return n[e-r.leftRowSeriesNumberCount];if(Bn(n)&&a in n)return Mu(n[a],o);if(typeof a=="function")return Mu(a(n,e,i,r),o);if(Array.isArray(a))return Mu(SXt(n,[...a]),o);const s=`${a}`.split(".");return s.length<=1?Mu(n[a],o):Mu(wlt(n,((l,h)=>LA(l,h,e,i,r,zXt)),...s),o)}function Ng(n,t){if(!n)return t;const e=n[t];return Y(e)?e:t}let Ph=class extends u2{static get EVENT_TYPE(){return X1}constructor(t,e,i,r,o,a){var s;super(),this.addRecordRule="Object",this.currentIndexedData=[],this.hierarchyExpandLevel=0,this.hasHierarchyStateExpand=!1,this.beforeChangedRecordsMap=new Map,this.registedAggregators={},this.rowHierarchyType="grid",this.fieldAggregators=[],this.addRecordRule=e?.addRecordRule||"Object",this.registerAggregators(),this.dataSourceObj=t,this.dataConfig=e,this._get=t?.get,this.columns=r,this._source=t?.records?this.processRecords(t?.records):t,this._sourceLength=((s=this._source)===null||s===void 0?void 0:s.length)||0,this.sortedIndexMap=new Map,this._currentPagerIndexedData=[],this.userPagination=i,this.pagination=i||{totalCount:this._sourceLength,perPageCount:this._sourceLength,currentPage:0},a>=1&&(this.hierarchyExpandLevel=a),this.currentIndexedData=Array.from({length:this._sourceLength},((l,h)=>h)),o==="tree"&&this.initTreeHierarchyState(),this.rowHierarchyType=o,this.updatePagerData()}initTreeHierarchyState(){var t,e;this._sourceLength=((t=this._source)===null||t===void 0?void 0:t.length)||0,this.currentIndexedData=Array.from({length:this._sourceLength},((r,o)=>o));let i=this._sourceLength;for(let r=0;r<i;r++){const o=this.currentIndexedData[r],a=this.getOriginalRecord(o);if(!a)continue;const s=(e=a.filteredChildren)!==null&&e!==void 0?e:a.children;if(s?.length>0){if(this.hierarchyExpandLevel>1?!a.hierarchyState&&(a.hierarchyState=Wt.expand):!a.hierarchyState&&(a.hierarchyState=Wt.collapse),this.hasHierarchyStateExpand=!0,a.hierarchyState===Wt.collapse)continue;const l=this.initChildrenNodeHierarchy(o,this.hierarchyExpandLevel,2,a);r+=l,i+=l}else a.children===!0&&!a.hierarchyState&&(a.hierarchyState=Wt.collapse)}}supplementConfig(t,e,i,r){var o;this.columns=e,this._sourceLength=((o=this._source)===null||o===void 0?void 0:o.length)||0,this.sortedIndexMap=new Map,this._currentPagerIndexedData=[],this.userPagination=t,this.pagination=t||{totalCount:this._sourceLength,perPageCount:this._sourceLength,currentPage:0},r>=1&&(this.hierarchyExpandLevel=r),this.currentIndexedData=Array.from({length:this._sourceLength},((a,s)=>s)),i==="tree"&&this.initTreeHierarchyState(),this.rowHierarchyType=i,this.updatePagerData()}registerAggregator(t,e){this.registedAggregators[t]=e}registerAggregators(){this.registerAggregator(Ei.RECORD,dlt),this.registerAggregator(Ei.SUM,glt),this.registerAggregator(Ei.COUNT,plt),this.registerAggregator(Ei.MAX,mlt),this.registerAggregator(Ei.MIN,ylt),this.registerAggregator(Ei.AVG,vlt),this.registerAggregator(Ei.NONE,clt),this.registerAggregator(Ei.CUSTOM,flt)}updateColumns(t){this.columns=t}_generateFieldAggragations(){const t=this.columns;this.fieldAggregators=[];const e=r=>{delete r.vtable_aggregator;const o=r.field,a=r.aggregation;if(a)if(Array.isArray(a))for(const s of a){const l=new this.registedAggregators[s.aggregationType]({field:o,formatFun:s.formatFun,isRecord:!0,aggregationFun:s.aggregationFun});this.fieldAggregators.push(l),r.vtable_aggregator||(r.vtable_aggregator=[]),r.vtable_aggregator.push(l)}else{const s=new this.registedAggregators[a.aggregationType]({field:o,formatFun:a.formatFun,isRecord:!0,aggregationFun:a.aggregationFun});this.fieldAggregators.push(s),r.vtable_aggregator=s}},i=r=>{if(r&&r.length!==0)for(const o of r)e(o),o.columns&&i(o.columns)};i(t)}processRecords(t){var e,i,r,o,a,s,l,h;this._generateFieldAggragations();const u=[],d=this.fieldAggregators.length>=1;if(((i=(e=this.dataConfig)===null||e===void 0?void 0:e.filterRules)===null||i===void 0?void 0:i.length)>=1||((r=this.lastFilterRules)===null||r===void 0?void 0:r.length)>=1||d){for(let c=0,f=t.length;c<f;c++){const g=t[c];g!=null&&(((a=(o=this.dataConfig)===null||o===void 0?void 0:o.filterRules)===null||a===void 0?void 0:a.length)>=1?this.filterRecord(g)&&(u.push(g),this.rowHierarchyType==="tree"&&g.children&&(g.filteredChildren=this.filteredChildren(g.children)),d&&this.processRecord(g)):((s=this.lastFilterRules)===null||s===void 0?void 0:s.length)>=1?(this.clearFilteredChildren(g),d&&this.processRecord(g)):d&&this.processRecord(g))}if(((h=(l=this.dataConfig)===null||l===void 0?void 0:l.filterRules)===null||h===void 0?void 0:h.length)>=1)return u}return t}filteredChildren(t){const e=[];for(let i=0,r=t.length;i<r;i++){const o=t[i];this.filterRecord(o)&&(e.push(o),o.children&&(o.filteredChildren=this.filteredChildren(o.children)))}return e}processRecord(t){for(let e=0;e<this.fieldAggregators.length;e++)this.fieldAggregators[e].push(t)}initChildrenNodeHierarchy(t,e,i,r){var o,a,s;let l=0;const h=r.filteredChildren?r.filteredChildren.length:(a=(o=r.children)===null||o===void 0?void 0:o.length)!==null&&a!==void 0?a:0;for(let u=0;u<h;u++){(i<=e||r.hierarchyState===Wt.expand)&&(l+=1);const d=r.filteredChildren?r.filteredChildren[u]:r.children[u],c=Array.isArray(t)?t.concat(u):[t,u];(i<=e||r.hierarchyState===Wt.expand)&&this.currentIndexedData.splice(this.currentIndexedData.indexOf(t)+l,0,c),(d.filteredChildren?d.filteredChildren.length>0:((s=d.children)===null||s===void 0?void 0:s.length)>0)&&(i<e||d.hierarchyState===Wt.expand?(!d.hierarchyState&&(d.hierarchyState=Wt.expand),this.hasHierarchyStateExpand=!0):!d.hierarchyState&&(d.hierarchyState=Wt.collapse)),d.hierarchyState===Wt.expand&&(l+=this.initChildrenNodeHierarchy(c,e,i+1,d)),d.children===!0&&!d.hierarchyState&&(d.hierarchyState=Wt.collapse)}return l}updatePagination(t){this.pagination=t||{totalCount:this._sourceLength,perPageCount:this._sourceLength,currentPage:0},this.updatePagerData()}updatePagerData(){const{currentIndexedData:t}=this,{perPageCount:e,currentPage:i}=this.pagination,r=e*(i||0),o=r+e;if(this._currentPagerIndexedData.length=0,t&&t.length>0){let a=-1;for(let s=0;s<t.length;s++)if((Array.isArray(t[s])&&t[s].length===1||!Array.isArray(t[s]))&&a++,a>=r&&a<o)this._currentPagerIndexedData.push(t[s]);else if(a>=o)break}else if(this._sourceLength>0)throw new Error("currentIndexedData should has values!")}getRecordIndexPaths(t){return this._currentPagerIndexedData[t]}get records(){return Array.isArray(this._source)?this._source:[]}get source(){return this._source}get(t){return this.getOriginalRecord(Ng(this.currentPagerIndexedData,t))}getRaw(t){return this.getRawRecord(Ng(this.currentPagerIndexedData,t))}getIndexKey(t){return Ng(this.currentPagerIndexedData,t)}getTableIndex(t){return Array.isArray(t)?this.rowHierarchyType==="tree"?this.currentPagerIndexedData.findIndex((e=>PYt(e,t))):this.currentPagerIndexedData.findIndex((e=>e===t[0])):this.currentPagerIndexedData.findIndex((e=>e===t))}getField(t,e,i,r,o){return this.getOriginalField(Ng(this.currentPagerIndexedData,t),e,i,r,o)}getRawField(t,e,i,r,o){return this.getRawFieldData(Ng(this.currentPagerIndexedData,t),e,i,r,o)}hasField(t,e){return this.hasOriginalField(Ng(this.currentPagerIndexedData,t),e)}getHierarchyState(t){var e;const i=this.getOriginalRecord(this.currentPagerIndexedData[t]);if(i?.hierarchyState){const r=i.hierarchyState;if(((e=i.children)===null||e===void 0?void 0:e.length)>0||i.children===!0)return r}return null}toggleHierarchyState(t,e,i){const r=this.currentIndexedData.slice(0),o=this.getIndexKey(t),a=this.getHierarchyState(t),s=this.getOriginalRecord(o);if(this.clearSortedIndexMap(),a===Wt.collapse)s.hierarchyState=Wt.expand,this.pushChildrenNode(o,Wt.expand,s),this.hasHierarchyStateExpand=!0;else if(a===Wt.expand){const u=f2(o,a,s);this.currentIndexedData.splice(this.currentIndexedData.indexOf(o)+1,u),s.hierarchyState=Wt.collapse}this.updatePagerData();const l=[],h=[];if(a===Wt.collapse){const u=this.currentIndexedData.length-r.length;for(let d=0;d<u;d++)l.push(t+d+1)}else if(a===Wt.expand){const u=r.length-this.currentIndexedData.length;for(let d=0;d<u;d++)h.push(t+d+1)}return{add:l,remove:h}}pushChildrenNode(t,e,i){var r,o;if(!e||e===Wt.collapse||e===Wt.none)return 0;let a=0;const s=i.filteredChildren?i.filteredChildren:i.children;if(s){const l=Array.from({length:s.length},((h,u)=>u));(r=this.lastSortStates)===null||r===void 0||r.forEach((h=>{h.order!=="normal"&&hqt((u=>Y(l[u])?l[u]:l[u]=u),((u,d)=>{l[u]=d}),s.length,h.orderFn,h.order,(u=>this.getOriginalField(Array.isArray(t)?t.concat([u]):[t,u],h.field)))}));for(let h=0;h<l.length;h++){a+=1;const u=Array.isArray(t)?t.concat([l[h]]):[t,l[h]];this.currentIndexedData.splice(this.currentIndexedData.indexOf(t)+a,0,u);const d=this.getOriginalRecord(u);!d.hierarchyState&&((o=d.filteredChildren)!==null&&o!==void 0?o:d.children)&&(d.hierarchyState=Wt.collapse),a+=this.pushChildrenNode(u,d.hierarchyState,s[l[h]])}}return a}changeFieldValue(t,e,i,r,o,a){var s;if(i!==null&&e>=0){const l=this.getIndexKey(e);if(this.cacheBeforeChangedRecord(l,a),i!==void 0&&i!==""||(i=r-a.leftRowSeriesNumberCount),typeof i=="string"||typeof i=="number"){const h=(s=this.beforeChangedRecordsMap.get(l.toString()))===null||s===void 0?void 0:s[i],u=this.getOriginalRecord(l);let d=t;typeof h=="number"&&AXt(t)&&(d=parseFloat(t)),Hs(u)?u.then((c=>{c[i]=d})).catch((c=>{})):u?u[i]=d:(this.records[l]=this.addRecordRule==="Array"?[]:{},this.records[l][i]=d)}}}cacheBeforeChangedRecord(t,e){var i;if(!this.beforeChangedRecordsMap.has(t.toString())){const r=this.getOriginalRecord(t);this.beforeChangedRecordsMap.set(t.toString(),(i=ag(r,void 0,["vtable_gantt_linkedFrom","vtable_gantt_linkedTo"]))!==null&&i!==void 0?i:{})}}setRecord(t,e){var i,r;let o=!0;if(((r=(i=this.dataConfig)===null||i===void 0?void 0:i.filterRules)===null||r===void 0?void 0:r.length)>=1&&(this.filterRecord(t)?this.rowHierarchyType==="tree"&&t.children&&(t.filteredChildren=this.filteredChildren(t.children)):o=!1),o&&Array.isArray(this.records)){const a=this.getIndexKey(e);Array.isArray(a)||this.records.splice(a,1,t)}}addRecord(t,e){var i;if(Array.isArray(this.records)){this.records.splice(e,0,t),this.adjustBeforeChangedRecordsMap(e,1),this.currentIndexedData.push(this.currentIndexedData.length),this._sourceLength+=1;for(let r=0;r<this.fieldAggregators.length;r++)this.fieldAggregators[r].push(t);if(this.rowHierarchyType==="tree"&&this.initTreeHierarchyState(),this.userPagination){this.pagination.totalCount=this._sourceLength;const{perPageCount:r,currentPage:o}=this.pagination;e<r*(o||0)+r&&this.updatePagerData()}else this.pagination.perPageCount=this._sourceLength,this.pagination.totalCount=this._sourceLength,this.updatePagerData();!((i=this.dataSourceObj)===null||i===void 0)&&i.added&&this.dataSourceObj.added(e,1)}}addRecords(t,e){var i;if(Array.isArray(this.records)){if(Array.isArray(t)){this.records.splice(e,0,...t),this.adjustBeforeChangedRecordsMap(e,t.length);for(let r=0;r<t.length;r++)this.currentIndexedData.push(this.currentIndexedData.length);this._sourceLength+=t.length;for(let r=0;r<this.fieldAggregators.length;r++)for(let o=0;o<t.length;o++)this.fieldAggregators[r].push(t[o])}if(this.userPagination){this.pagination.totalCount=this._sourceLength;const{perPageCount:r,currentPage:o}=this.pagination;e<r*(o||0)+r&&this.updatePagerData()}else this.pagination.perPageCount=this._sourceLength,this.pagination.totalCount=this._sourceLength,this.updatePagerData();!((i=this.dataSourceObj)===null||i===void 0)&&i.added&&this.dataSourceObj.added(e,t.length)}}addRecordForSorted(t){Array.isArray(this.records)&&(this.beforeChangedRecordsMap.clear(),this.records.push(t),this.currentIndexedData.push(this.currentIndexedData.length),this._sourceLength+=1,this.sortedIndexMap.clear(),this.userPagination||(this.pagination.perPageCount=this._sourceLength,this.pagination.totalCount=this._sourceLength))}addRecordsForSorted(t){if(Array.isArray(this.records)){if(this.beforeChangedRecordsMap.clear(),Array.isArray(t)){this.records.push(...t);for(let e=0;e<t.length;e++)this.currentIndexedData.push(this.currentIndexedData.length);this._sourceLength+=t.length,this.sortedIndexMap.clear()}this.userPagination||(this.pagination.perPageCount=this._sourceLength,this.pagination.totalCount=this._sourceLength)}}adjustBeforeChangedRecordsMap(t,e,i="add"){for(let r=this.beforeChangedRecordsMap.size-1;r>=t;r--){const o=this.beforeChangedRecordsMap.get(r.toString());this.beforeChangedRecordsMap.delete(r.toString()),this.beforeChangedRecordsMap.set((r+(i==="add"?e:-e)).toString(),o)}}deleteRecords(t){var e;if(Array.isArray(this.records)){const i=[],r=t.sort(((o,a)=>a-o));for(let o=0;o<r.length;o++){const a=r[o];if(a>=this._sourceLength||a<0)continue;this.adjustBeforeChangedRecordsMap(a,1,"delete"),i.push(a);const s=this.records[a];for(let l=0;l<this.fieldAggregators.length;l++)this.fieldAggregators[l].deleteRecord(s);this.records.splice(a,1),this.currentIndexedData.pop(),this._sourceLength-=1}return this.userPagination||(this.pagination.perPageCount=this._sourceLength,this.pagination.totalCount=this._sourceLength),this.updatePagerData(),!((e=this.dataSourceObj)===null||e===void 0)&&e.deleted&&this.dataSourceObj.deleted(i),i}return[]}deleteRecordsForSorted(t){if(Array.isArray(this.records)){const e=t.sort(((i,r)=>r-i));for(let i=0;i<e.length;i++){const r=e[i];if(r>=this._sourceLength||r<0)continue;const o=this.currentIndexedData[r];this.records.splice(o,1),this._sourceLength-=1}this.sortedIndexMap.clear(),this.userPagination||(this.pagination.perPageCount=this._sourceLength,this.pagination.totalCount=this._sourceLength),this.beforeChangedRecordsMap.clear()}}updateRecords(t,e){const i=[];for(let r=0;r<e.length;r++){const o=e[r];if(Array.isArray(o))this.beforeChangedRecordsMap.delete(o.toString()),i.push(o),o.slice(0,-1).reduce(((a,s)=>(a[s]===void 0&&(a[s]={}),a[s].children)),this.records)[o[o.length-1]]=t[r];else{if(o>=this._sourceLength||o<0)continue;this.beforeChangedRecordsMap.delete(o.toString()),i.push(o);for(let a=0;a<this.fieldAggregators.length;a++)this.fieldAggregators[a].updateRecord(this.records[o],t[r]);this.records[o]=t[r]}}return this.userPagination&&this.updatePagerData(),i}updateRecordsForSorted(t,e){for(let i=0;i<e.length;i++){const r=e[i];if(r>=this._sourceLength||r<0)continue;const o=this.currentIndexedData[r];if(typeof o!="number")return;this.beforeChangedRecordsMap.delete(o.toString()),this.records[o]=t[i]}this.sortedIndexMap.clear()}sort(t){t=(Array.isArray(t)?t:[t]).filter((o=>{const a=this.columns.find((s=>s.field===o.field));return a?.sort!==!1&&o.order!=="normal"})),this.lastSortStates=t;let e=t.map((o=>this.sortedIndexMap.get(o?.field)||{asc:[],desc:[],normal:[]})),i=null;if(e.length>0&&(i=t.reduce(((o,a,s)=>{var l;const h=(l=e[s])===null||l===void 0?void 0:l[a.order];return h&&h.length>0?h:o}),null),i&&i.length>0))return this.currentIndexedData=i,this.updatePagerData(),void this.fireListeners(X1.CHANGE_ORDER,null);const r=Array.from({length:this._sourceLength},((o,a)=>a));if(r.sort(((o,a)=>{const s=this.getOriginalRecord(o),l=this.getOriginalRecord(a),h=s==null||typeof s=="object"&&Object.keys(s).length===0,u=l==null||typeof l=="object"&&Object.keys(l).length===0;return t.reduce(((d,c)=>{if(d!==0)return d;if(c.order==="asc"||c.order==="desc"){if(h&&!u)return 1;if(!h&&u)return-1;if(h&&u)return o-a}else if(h||u)return o-a;return(c.orderFn||(c.order!=="desc"?(f,g)=>f===g?0:f>g?1:-1:(f,g)=>f===g?0:f<g?1:-1))(this.getOriginalField(o,c.field),this.getOriginalField(a,c.field),c.order)}),0)})),this.currentIndexedData=r,this.hierarchyExpandLevel){let o=r.length;for(let a=0;a<o;a++){const s=this.getOriginalRecord(r[a]),l=this.pushChildrenNode(r[a],s.hierarchyState,this.getOriginalRecord(r[a]));o+=l,a+=l}}if(!e.length){e=t.map((()=>({asc:[],desc:[],normal:[]})));for(let o=0;o<t.length;o++)this.sortedIndexMap.set(t[o].field,e[o])}t.forEach(((o,a)=>{e[a][o.order]=r.slice()})),this.updatePagerData(),this.fireListeners(X1.CHANGE_ORDER,null)}setSortedIndexMap(t,e){this.sortedIndexMap.set(t,e)}clearFilteredChildren(t){var e,i;t.filteredChildren=void 0;for(let r=0;r<((i=(e=t.children)===null||e===void 0?void 0:e.length)!==null&&i!==void 0?i:0);r++)this.clearFilteredChildren(t.children[r])}filterRecord(t){var e,i,r;let o=!0;for(let a=0;a<((e=this.dataConfig.filterRules)===null||e===void 0?void 0:e.length);a++){const s=(i=this.dataConfig)===null||i===void 0?void 0:i.filterRules[a];if(s.filterKey){const l=t[s.filterKey];if(s.filteredValues.indexOf(l)===-1){o=!1;break}}else if(!(!((r=s.filterFunc)===null||r===void 0)&&r.call(s,t))){o=!1;break}}return o}updateFilterRulesForSorted(t){var e,i,r;this.lastFilterRules=this.dataConfig.filterRules,this.dataConfig.filterRules=t,this._source=this.processRecords((i=(e=this.dataSourceObj)===null||e===void 0?void 0:e.records)!==null&&i!==void 0?i:this.dataSourceObj),this._sourceLength=((r=this._source)===null||r===void 0?void 0:r.length)||0,this.sortedIndexMap.clear(),this.currentIndexedData=Array.from({length:this._sourceLength},((o,a)=>a)),this.rowHierarchyType==="tree"&&this.initTreeHierarchyState(),this.userPagination||(this.pagination.perPageCount=this._sourceLength,this.pagination.totalCount=this._sourceLength)}updateFilterRules(t){var e,i,r;this.lastFilterRules=this.dataConfig.filterRules,this.dataConfig.filterRules=t,this._source=this.processRecords((i=(e=this.dataSourceObj)===null||e===void 0?void 0:e.records)!==null&&i!==void 0?i:this.dataSourceObj),this._sourceLength=((r=this._source)===null||r===void 0?void 0:r.length)||0,this.currentIndexedData=Array.from({length:this._sourceLength},((o,a)=>a)),this.userPagination||(this.pagination.perPageCount=this._sourceLength,this.pagination.totalCount=this._sourceLength,this.rowHierarchyType==="tree"&&this.initTreeHierarchyState()),this.updatePagerData()}clearSortedIndexMap(){this.lastSortStates&&this.lastSortStates.length>0&&this.sortedIndexMap.forEach(((t,e)=>{this.lastSortStates.some((i=>i.field===e))?this.lastSortStates.forEach((i=>{i.order==="asc"?(t.desc=[],t.normal=[]):i.order==="desc"?(t.asc=[],t.normal=[]):(t.asc=[],t.desc=[])})):this.sortedIndexMap.delete(e)}))}get sourceLength(){return this._sourceLength}set sourceLength(t){this._sourceLength!==t&&(this._sourceLength=t,this.fireListeners(X1.SOURCE_LENGTH_UPDATE,this._sourceLength))}get length(){return this.currentPagerIndexedData.length}get dataSource(){return this}get currentPagerIndexedData(){return this._currentPagerIndexedData.length>0?this._currentPagerIndexedData:[]}release(){var t;(t=super.release)===null||t===void 0||t.call(this),this.lastFilterRules=null,this.clearSortedMap(),this.clearCurrentIndexedData(),this.currentPagerIndexedData.length=0}clearSortedMap(){this.currentIndexedData&&(this.currentIndexedData.length=0),this.currentIndexedData=null,this.sortedIndexMap.forEach((t=>{t.asc&&(t.asc.length=0),t.desc&&(t.desc.length=0)})),this.sortedIndexMap.clear()}clearCurrentIndexedData(){this.currentIndexedData=null,this.currentPagerIndexedData.length=0}getOriginalRecord(t){let e;return e=this.dataSourceObj.records?Array.isArray(t)?jO(this.records,t):this.records[t]:this._get(t),Mu(e,(i=>{this.recordPromiseCallBack(t,i)}))}getRawRecord(t){var e,i;if(!((e=this.beforeChangedRecordsMap)===null||e===void 0)&&e.has(t.toString()))return(i=this.beforeChangedRecordsMap)===null||i===void 0?void 0:i.get(t.toString());let r;return r=this.dataSourceObj.records?Array.isArray(t)?jO(this.records,t):this.records[t]:this._get(t),Mu(r,(o=>{this.recordPromiseCallBack(t,o)}))}getOriginalField(t,e,i,r,o){if(e!==null)return LA(this.getOriginalRecord(t),e,i,r,o,(a=>{this.fieldPromiseCallBack(t,e,a)}))}getRawFieldData(t,e,i,r,o){if(e!==null)return LA(this.getRawRecord(t),e,i,r,o,(a=>{this.fieldPromiseCallBack(t,e,a)}))}hasOriginalField(t,e){if(e===null)return!1;if(typeof e=="function")return!0;const i=this.getOriginalRecord(t);return!!(i&&e in i)}fieldPromiseCallBack(t,e,i){}recordPromiseCallBack(t,e){}canChangeOrder(t,e){var i;if(!((i=this.dataSourceObj)===null||i===void 0)&&i.canChangeOrder)return this.dataSourceObj.canChangeOrder(t,e);if(this.hasHierarchyStateExpand){let r=this.currentPagerIndexedData[t],o=this.currentPagerIndexedData[e];if(r=Array.isArray(r)?[...r]:[r],o=Array.isArray(o)?[...o]:[o],e>t&&o.length>r.length){let a=this.currentPagerIndexedData[e+1];a=Array.isArray(a)?[...a]:[a],a.length<o.length&&o.splice(o.length-1,1)}if(r.length===o.length){for(let a=0;a<=r.length-2;a++)if(r[a]!==o[a])return!1;return!0}return!1}return!0}changeOrder(t,e){var i,r,o;if(!((i=this.dataSourceObj)===null||i===void 0)&&i.changeOrder)this.dataSourceObj.changeOrder(t,e);else if(!(!((r=this.lastSortStates)===null||r===void 0)&&r.some((a=>a.order==="asc"||a.order==="desc")))&&this.canChangeOrder(t,e))if(this.hasHierarchyStateExpand){let a,s,l=this.currentPagerIndexedData[t],h=this.currentPagerIndexedData[e];if(l=Array.isArray(l)?[...l]:[l],h=Array.isArray(h)?[...h]:[h],l.length>1||h.length>1){if(e>t&&h.length>l.length){let u=this.currentPagerIndexedData[e+1];u=Array.isArray(u)?[...u]:[u],u.length<h.length&&h.splice(h.length-1,1)}if(a=l.splice(l.length-1,1)[0],s=h.splice(h.length-1,1)[0],l.length>=1){const u=this.getOriginalRecord(l);if(u){const d=u.filteredChildren?u.filteredChildren.splice(a,1):u.children.splice(a,1);d.unshift(s,0),Array.prototype.splice.apply((o=u.filteredChildren)!==null&&o!==void 0?o:u.children,d)}}else{const u=this.records.splice(a,1);u.unshift(s,0),Array.prototype.splice.apply(this.records,u)}}else{a=this.currentPagerIndexedData[t],s=this.currentPagerIndexedData[e];const u=this.records.splice(a,1);u.unshift(s,0),Array.prototype.splice.apply(this.records,u)}this.restoreTreeHierarchyState(),this.updatePagerData()}else{const a=this.records.splice(t,1);a.unshift(e,0),Array.prototype.splice.apply(this.records,a)}}restoreTreeHierarchyState(){var t,e;if(this.hierarchyExpandLevel){for(let r=0;r<this._sourceLength;r++){const o=this.getOriginalRecord(r);o&&((t=o.filteredChildren)!==null&&t!==void 0?t:o.children)&&!o.hierarchyState&&(o.hierarchyState=Wt.collapse)}this.currentIndexedData=Array.from({length:this._sourceLength},((r,o)=>o));let i=this._sourceLength;for(let r=0;r<i;r++){const o=this.currentIndexedData[r],a=this.getOriginalRecord(o);if(!a)continue;const s=(e=a.filteredChildren)!==null&&e!==void 0?e:a.children;if(s?.length>0&&a.hierarchyState===Wt.expand){this.hasHierarchyStateExpand=!0;const l=this.restoreChildrenNodeHierarchy(o,a);r+=l,i+=l}else a.children===!0&&!a.hierarchyState&&(a.hierarchyState=Wt.collapse)}}}restoreChildrenNodeHierarchy(t,e){var i,r;let o=0;const a=(i=e.filteredChildren)!==null&&i!==void 0?i:e.children,s=(r=a?.length)!==null&&r!==void 0?r:0;for(let l=0;l<s;l++){e.hierarchyState===Wt.expand&&(o+=1);const h=a[l],u=Array.isArray(t)?t.concat(l):[t,l];e.hierarchyState===Wt.expand&&this.currentIndexedData.splice(this.currentIndexedData.indexOf(t)+o,0,u),o+=this.restoreChildrenNodeHierarchy(u,h)}return o}_setNodeStateRecursive(t,e){var i;if(!t)return;const r=(i=t.filteredChildren)!==null&&i!==void 0?i:t.children;if(r&&(Array.isArray(r)?r.length>0:r===!0)&&(t.hierarchyState=e),r&&Array.isArray(r))for(const o of r)this._setNodeStateRecursive(o,e)}expandAllNodes(){if(Array.isArray(this._source)){for(const t of this._source)this._setNodeStateRecursive(t,Wt.expand);this.hasHierarchyStateExpand=!0,this.clearSortedIndexMap(),this.restoreTreeHierarchyState(),this.lastSortStates&&this.lastSortStates.length>0?this.sort(this.lastSortStates):this.updatePagerData()}}collapseAllNodes(){if(Array.isArray(this._source)){for(const t of this._source)this._setNodeStateRecursive(t,Wt.collapse);this.clearSortedIndexMap(),this.restoreTreeHierarchyState(),this.lastSortStates&&this.lastSortStates.length>0?this.sort(this.lastSortStates):this.updatePagerData()}}};Ph.EMPTY=new Ph({get(){},length:0});function jO(n,t){var e;let i=n;for(let r=0;r<t.length;r++){const o=t[r];if(!i[o])return;i=i[o];const a=(e=i.filteredChildren)!==null&&e!==void 0?e:i?.children;a&&r+1<t.length&&(i=a)}return i}function eY(n,t){return n.sort(((e,i)=>{var r,o;yt(e)&&(e=[e]),yt(i)&&(i=[i]);const a=Math.max(e.length,i.length);for(let s=0;s<a;s++){const l=(r=e[s])!==null&&r!==void 0?r:-1,h=(o=i[s])!==null&&o!==void 0?o:-1;if(l!==h)return h-l}return 0}))}var Mk,iY;function sN(){if(iY)return Mk;iY=1;var n=Array.isArray;return Mk=n,Mk}var Rk,nY;function dqt(){if(nY)return Rk;nY=1;var n=typeof J_=="object"&&J_&&J_.Object===Object&&J_;return Rk=n,Rk}var Pk,rY;function lN(){if(rY)return Pk;rY=1;var n=dqt(),t=typeof self=="object"&&self&&self.Object===Object&&self,e=n||t||Function("return this")();return Pk=e,Pk}var Bk,oY;function hN(){if(oY)return Bk;oY=1;var n=lN(),t=n.Symbol;return Bk=t,Bk}var kk,aY;function cqt(){if(aY)return kk;aY=1;var n=hN(),t=Object.prototype,e=t.hasOwnProperty,i=t.toString,r=n?n.toStringTag:void 0;function o(a){var s=e.call(a,r),l=a[r];try{a[r]=void 0;var h=!0}catch{}var u=i.call(a);return h&&(s?a[r]=l:delete a[r]),u}return kk=o,kk}var Lk,sY;function fqt(){if(sY)return Lk;sY=1;var n=Object.prototype,t=n.toString;function e(i){return t.call(i)}return Lk=e,Lk}var Ek,lY;function Mlt(){if(lY)return Ek;lY=1;var n=hN(),t=cqt(),e=fqt(),i="[object Null]",r="[object Undefined]",o=n?n.toStringTag:void 0;function a(s){return s==null?s===void 0?r:i:o&&o in Object(s)?t(s):e(s)}return Ek=a,Ek}var Dk,hY;function gqt(){if(hY)return Dk;hY=1;function n(t){return t!=null&&typeof t=="object"}return Dk=n,Dk}var Ik,uY;function uN(){if(uY)return Ik;uY=1;var n=Mlt(),t=gqt(),e="[object Symbol]";function i(r){return typeof r=="symbol"||t(r)&&n(r)==e}return Ik=i,Ik}var Ok,dY;function pqt(){if(dY)return Ok;dY=1;var n=sN(),t=uN(),e=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;function r(o,a){if(n(o))return!1;var s=typeof o;return s=="number"||s=="symbol"||s=="boolean"||o==null||t(o)?!0:i.test(o)||!e.test(o)||a!=null&&o in Object(a)}return Ok=r,Ok}var Hk,cY;function Rlt(){if(cY)return Hk;cY=1;function n(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}return Hk=n,Hk}var zk,fY;function vqt(){if(fY)return zk;fY=1;var n=Mlt(),t=Rlt(),e="[object AsyncFunction]",i="[object Function]",r="[object GeneratorFunction]",o="[object Proxy]";function a(s){if(!t(s))return!1;var l=n(s);return l==i||l==r||l==e||l==o}return zk=a,zk}var Fk,gY;function mqt(){if(gY)return Fk;gY=1;var n=lN(),t=n["__core-js_shared__"];return Fk=t,Fk}var Nk,pY;function yqt(){if(pY)return Nk;pY=1;var n=mqt(),t=(function(){var i=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""})();function e(i){return!!t&&t in i}return Nk=e,Nk}var Wk,vY;function bqt(){if(vY)return Wk;vY=1;var n=Function.prototype,t=n.toString;function e(i){if(i!=null){try{return t.call(i)}catch{}try{return i+""}catch{}}return""}return Wk=e,Wk}var Vk,mY;function _qt(){if(mY)return Vk;mY=1;var n=vqt(),t=yqt(),e=Rlt(),i=bqt(),r=/[\\^$.*+?()[\]{}|]/g,o=/^\[object .+?Constructor\]$/,a=Function.prototype,s=Object.prototype,l=a.toString,h=s.hasOwnProperty,u=RegExp("^"+l.call(h).replace(r,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function d(c){if(!e(c)||t(c))return!1;var f=n(c)?u:o;return f.test(i(c))}return Vk=d,Vk}var Gk,yY;function Cqt(){if(yY)return Gk;yY=1;function n(t,e){return t?.[e]}return Gk=n,Gk}var $k,bY;function Plt(){if(bY)return $k;bY=1;var n=_qt(),t=Cqt();function e(i,r){var o=t(i,r);return n(o)?o:void 0}return $k=e,$k}var jk,_Y;function p2(){if(_Y)return jk;_Y=1;var n=Plt(),t=n(Object,"create");return jk=t,jk}var Uk,CY;function wqt(){if(CY)return Uk;CY=1;var n=p2();function t(){this.__data__=n?n(null):{},this.size=0}return Uk=t,Uk}var Yk,wY;function xqt(){if(wY)return Yk;wY=1;function n(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}return Yk=n,Yk}var Xk,xY;function Sqt(){if(xY)return Xk;xY=1;var n=p2(),t="__lodash_hash_undefined__",e=Object.prototype,i=e.hasOwnProperty;function r(o){var a=this.__data__;if(n){var s=a[o];return s===t?void 0:s}return i.call(a,o)?a[o]:void 0}return Xk=r,Xk}var qk,SY;function Aqt(){if(SY)return qk;SY=1;var n=p2(),t=Object.prototype,e=t.hasOwnProperty;function i(r){var o=this.__data__;return n?o[r]!==void 0:e.call(o,r)}return qk=i,qk}var Kk,AY;function Tqt(){if(AY)return Kk;AY=1;var n=p2(),t="__lodash_hash_undefined__";function e(i,r){var o=this.__data__;return this.size+=this.has(i)?0:1,o[i]=n&&r===void 0?t:r,this}return Kk=e,Kk}var Zk,TY;function Mqt(){if(TY)return Zk;TY=1;var n=wqt(),t=xqt(),e=Sqt(),i=Aqt(),r=Tqt();function o(a){var s=-1,l=a==null?0:a.length;for(this.clear();++s<l;){var h=a[s];this.set(h[0],h[1])}}return o.prototype.clear=n,o.prototype.delete=t,o.prototype.get=e,o.prototype.has=i,o.prototype.set=r,Zk=o,Zk}var Jk,MY;function Rqt(){if(MY)return Jk;MY=1;function n(){this.__data__=[],this.size=0}return Jk=n,Jk}var Qk,RY;function Pqt(){if(RY)return Qk;RY=1;function n(t,e){return t===e||t!==t&&e!==e}return Qk=n,Qk}var tL,PY;function v2(){if(PY)return tL;PY=1;var n=Pqt();function t(e,i){for(var r=e.length;r--;)if(n(e[r][0],i))return r;return-1}return tL=t,tL}var eL,BY;function Bqt(){if(BY)return eL;BY=1;var n=v2(),t=Array.prototype,e=t.splice;function i(r){var o=this.__data__,a=n(o,r);if(a<0)return!1;var s=o.length-1;return a==s?o.pop():e.call(o,a,1),--this.size,!0}return eL=i,eL}var iL,kY;function kqt(){if(kY)return iL;kY=1;var n=v2();function t(e){var i=this.__data__,r=n(i,e);return r<0?void 0:i[r][1]}return iL=t,iL}var nL,LY;function Lqt(){if(LY)return nL;LY=1;var n=v2();function t(e){return n(this.__data__,e)>-1}return nL=t,nL}var rL,EY;function Eqt(){if(EY)return rL;EY=1;var n=v2();function t(e,i){var r=this.__data__,o=n(r,e);return o<0?(++this.size,r.push([e,i])):r[o][1]=i,this}return rL=t,rL}var oL,DY;function Dqt(){if(DY)return oL;DY=1;var n=Rqt(),t=Bqt(),e=kqt(),i=Lqt(),r=Eqt();function o(a){var s=-1,l=a==null?0:a.length;for(this.clear();++s<l;){var h=a[s];this.set(h[0],h[1])}}return o.prototype.clear=n,o.prototype.delete=t,o.prototype.get=e,o.prototype.has=i,o.prototype.set=r,oL=o,oL}var aL,IY;function Iqt(){if(IY)return aL;IY=1;var n=Plt(),t=lN(),e=n(t,"Map");return aL=e,aL}var sL,OY;function Oqt(){if(OY)return sL;OY=1;var n=Mqt(),t=Dqt(),e=Iqt();function i(){this.size=0,this.__data__={hash:new n,map:new(e||t),string:new n}}return sL=i,sL}var lL,HY;function Hqt(){if(HY)return lL;HY=1;function n(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}return lL=n,lL}var hL,zY;function m2(){if(zY)return hL;zY=1;var n=Hqt();function t(e,i){var r=e.__data__;return n(i)?r[typeof i=="string"?"string":"hash"]:r.map}return hL=t,hL}var uL,FY;function zqt(){if(FY)return uL;FY=1;var n=m2();function t(e){var i=n(this,e).delete(e);return this.size-=i?1:0,i}return uL=t,uL}var dL,NY;function Fqt(){if(NY)return dL;NY=1;var n=m2();function t(e){return n(this,e).get(e)}return dL=t,dL}var cL,WY;function Nqt(){if(WY)return cL;WY=1;var n=m2();function t(e){return n(this,e).has(e)}return cL=t,cL}var fL,VY;function Wqt(){if(VY)return fL;VY=1;var n=m2();function t(e,i){var r=n(this,e),o=r.size;return r.set(e,i),this.size+=r.size==o?0:1,this}return fL=t,fL}var gL,GY;function Vqt(){if(GY)return gL;GY=1;var n=Oqt(),t=zqt(),e=Fqt(),i=Nqt(),r=Wqt();function o(a){var s=-1,l=a==null?0:a.length;for(this.clear();++s<l;){var h=a[s];this.set(h[0],h[1])}}return o.prototype.clear=n,o.prototype.delete=t,o.prototype.get=e,o.prototype.has=i,o.prototype.set=r,gL=o,gL}var pL,$Y;function Gqt(){if($Y)return pL;$Y=1;var n=Vqt(),t="Expected a function";function e(i,r){if(typeof i!="function"||r!=null&&typeof r!="function")throw new TypeError(t);var o=function(){var a=arguments,s=r?r.apply(this,a):a[0],l=o.cache;if(l.has(s))return l.get(s);var h=i.apply(this,a);return o.cache=l.set(s,h)||l,h};return o.cache=new(e.Cache||n),o}return e.Cache=n,pL=e,pL}var vL,jY;function $qt(){if(jY)return vL;jY=1;var n=Gqt(),t=500;function e(i){var r=n(i,function(a){return o.size===t&&o.clear(),a}),o=r.cache;return r}return vL=e,vL}var mL,UY;function jqt(){if(UY)return mL;UY=1;var n=$qt(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,e=/\\(\\)?/g,i=n(function(r){var o=[];return r.charCodeAt(0)===46&&o.push(""),r.replace(t,function(a,s,l,h){o.push(l?h.replace(e,"$1"):s||a)}),o});return mL=i,mL}var yL,YY;function Uqt(){if(YY)return yL;YY=1;function n(t,e){for(var i=-1,r=t==null?0:t.length,o=Array(r);++i<r;)o[i]=e(t[i],i,t);return o}return yL=n,yL}var bL,XY;function Yqt(){if(XY)return bL;XY=1;var n=hN(),t=Uqt(),e=sN(),i=uN(),r=n?n.prototype:void 0,o=r?r.toString:void 0;function a(s){if(typeof s=="string")return s;if(e(s))return t(s,a)+"";if(i(s))return o?o.call(s):"";var l=s+"";return l=="0"&&1/s==-1/0?"-0":l}return bL=a,bL}var _L,qY;function Xqt(){if(qY)return _L;qY=1;var n=Yqt();function t(e){return e==null?"":n(e)}return _L=t,_L}var CL,KY;function qqt(){if(KY)return CL;KY=1;var n=sN(),t=pqt(),e=jqt(),i=Xqt();function r(o,a){return n(o)?o:t(o,a)?[o]:e(i(o))}return CL=r,CL}var wL,ZY;function Kqt(){if(ZY)return wL;ZY=1;var n=uN();function t(e){if(typeof e=="string"||n(e))return e;var i=e+"";return i=="0"&&1/e==-1/0?"-0":i}return wL=t,wL}var xL,JY;function Zqt(){if(JY)return xL;JY=1;var n=qqt(),t=Kqt();function e(i,r){r=n(r,i);for(var o=0,a=r.length;i!=null&&o<a;)i=i[t(r[o++])];return o&&o==a?i:void 0}return xL=e,xL}var SL,QY;function Jqt(){if(QY)return SL;QY=1;var n=Zqt();function t(e,i,r){var o=e==null?void 0:n(e,i);return o===void 0?r:o}return SL=t,SL}var Qqt=Jqt();const tKt=yH(Qqt);function eKt(n,t,e,i){(n[t]||(n[t]=new Map)).set(e,i)}class y2 extends Ph{static get EVENT_TYPE(){return Ph.EVENT_TYPE}static ofArray(t,e,i,r,o,a){return new y2({get:s=>t[s],length:t.length,records:t},e,i,r,o,a)}constructor(t,e,i,r,o,a){let s;Rt(e?.groupByRules)&&(o="tree",s=!0),super(t,e,i,r,o,a),this._isGrouped=s,this._recordCache=[],this._fieldCache={}}getOriginalRecord(t){return yt(t)&&this._recordCache&&this._recordCache[t]?this._recordCache[t]:super.getOriginalRecord(t)}getRawRecord(t){var e,i,r,o;let a,s;if(this._isGrouped){if(a=this.getOriginRecordIndexForGroup(t),Y(a)&&((e=this.beforeChangedRecordsMap)===null||e===void 0?void 0:e.has(a.toString())))return(i=this.beforeChangedRecordsMap)===null||i===void 0?void 0:i.get(a.toString())}else if(!((r=this.beforeChangedRecordsMap)===null||r===void 0)&&r.has(t.toString()))return(o=this.beforeChangedRecordsMap)===null||o===void 0?void 0:o.get(t.toString());return yt(t)&&this._recordCache&&this._recordCache[t]?this._recordCache[t]:(s=this.dataSourceObj.records?Array.isArray(t)?jO(this.records,t):this.records[t]:this._get(t),Mu(s,(l=>{this.recordPromiseCallBack(t,l)})))}getOriginalField(t,e,i,r,o){const a=this._fieldCache&&this._fieldCache[t];if(a){const s=a.get(e);if(s)return s}return super.getOriginalField(t,e,i,r,o)}clearCache(){this._recordCache&&(this._recordCache=[]),this._fieldCache&&(this._fieldCache={})}fieldPromiseCallBack(t,e,i){eKt(this._fieldCache,t,e,i)}recordPromiseCallBack(t,e){this._recordCache&&(this._recordCache[t]=e)}get records(){return Array.isArray(this._recordCache)&&this._recordCache.length>0?this._recordCache:super.records}release(){var t;(t=super.release)===null||t===void 0||t.call(this),this._recordCache=null,this._fieldCache=null}_generateFieldAggragations(){var t;if(super._generateFieldAggragations(),Rt((t=this.dataConfig)===null||t===void 0?void 0:t.groupByRules)){const e=this.dataConfig.groupByRules;this.groupAggregator=new this.registedAggregators[Ei.CUSTOM]({field:"",aggregationFun:(i,r,o)=>{const a=new Map,s=[];for(let l=0;l<r.length;l++)UO(r[l],s,a,e,0);return s}}),this.fieldAggregators.push(this.groupAggregator)}}processRecords(t){var e;const i=super.processRecords(t);return((e=this.groupAggregator)===null||e===void 0?void 0:e.value())||i}getGroupLength(){var t,e,i;return(i=(e=(t=this.dataConfig)===null||t===void 0?void 0:t.groupByRules)===null||e===void 0?void 0:e.length)!==null&&i!==void 0?i:0}updateGroup(){var t,e,i;this.clearCache();const r=this.source;this._source=this.processRecords((e=(t=this.dataSourceObj)===null||t===void 0?void 0:t.records)!==null&&e!==void 0?e:this.dataSourceObj),r&&Blt(r,this.source),this.sourceLength=((i=this.source)===null||i===void 0?void 0:i.length)||0,this.sortedIndexMap.clear(),this.currentIndexedData=Array.from({length:this.sourceLength},((o,a)=>a)),this.userPagination||(this.pagination.perPageCount=this.sourceLength,this.pagination.totalCount=this.sourceLength),this.initTreeHierarchyState(),this.updatePagerData()}getOriginRecordIndexForGroup(t){const e=this.getOriginalRecord(t);if(Y(e)&&!(e.children&&e.children.length>0)){for(let i=0;i<this.dataSourceObj.records.length;i++)if(this.dataSourceObj.records[i]===e)return i}}addRecordsForGroup(t,e){if(!Rt(t)||t.length===0)return;let i=this.getOriginRecordIndexForGroup(e);(i===void 0||i>this.dataSourceObj.records)&&(i=this.dataSourceObj.records.length),this.dataSourceObj.records.splice(i,0,...t),this.adjustBeforeChangedRecordsMap(i,t.length),this.updateGroup()}deleteRecordsForGroup(t){if(!Rt(t)||t.length===0)return;const e=eY(t);for(let i=0;i<e.length;i++){const r=e[i];if(yt(r)&&(r>=this.sourceLength||r<0))continue;const o=this.getOriginRecordIndexForGroup(r);this.beforeChangedRecordsMap.delete(o.toString()),this.dataSourceObj.records.splice(o,1),this.sourceLength-=1,this.adjustBeforeChangedRecordsMap(o,1,"delete")}this.updateGroup()}updateRecordsForGroup(t,e){for(let i=0;i<e.length;i++){const r=e[i];if(yt(r)&&(r>=this.sourceLength||r<0))continue;const o=this.getOriginRecordIndexForGroup(r);this.beforeChangedRecordsMap.delete(o.toString()),this.dataSourceObj.records[o]=t[i]}this.updateGroup()}addRecordsForTree(t,e){if(Rt(t)&&t.length!==0){if(this.adjustBeforeChangedRecordsMap(e,t.length),yt(e))this.dataSourceObj.records.splice(e,0,...t);else{const i=[...e],r=i.pop(),o=this.getOriginalRecord(i);o.children?o.children.splice(r,0,...t):o.children=t}this.initTreeHierarchyState(),this.updatePagination()}}deleteRecordsForTree(t){if(!Rt(t)||t.length===0)return[];const e=eY(t),i=[];for(let r=0;r<e.length;r++){const o=e[r];if(!yt(o)||!(o>=this.sourceLength||o<0)){if(this.beforeChangedRecordsMap.delete(o.toString()),yt(o))this.dataSourceObj.records.splice(o,1);else{const a=[...o],s=a.pop();this.getOriginalRecord(a).children.splice(s,1)}this.adjustBeforeChangedRecordsMap(o,1,"delete"),i.push(o)}}return this.initTreeHierarchyState(),this.updatePagination(),i}updateRecordsForTree(t,e){for(let i=0;i<e.length;i++){const r=e[i],o=t[i];if(!yt(r)||!(r>=this.sourceLength||r<0))if(this.beforeChangedRecordsMap.delete(r.toString()),yt(r))this.dataSourceObj.records.splice(r,1,o);else{const a=[...r],s=a.pop();this.getOriginalRecord(a).children.splice(s,1,o)}}this.initTreeHierarchyState(),this.updatePagerData()}adjustBeforeChangedRecordsMap(t,e,i="add"){if(this.rowHierarchyType==="tree"){let r;r=yt(t)?[t]:t;const o=[];this.beforeChangedRecordsMap.forEach(((a,s)=>{var l,h;const u=s.split(","),d=Math.max(u.length,r.length);for(let c=0;c<d;c++){const f=(l=r[c])!==null&&l!==void 0?l:-1,g=(h=Number(u[c]))!==null&&h!==void 0?h:-1;if(f<g||f===g&&c===u.length-1&&c===r.length-1)return u[c]=(g+(i==="add"?e:-e)).toString(),void o.push({originKey:s,targetKey:u.toString(),value:a})}})),o.forEach((({originKey:a,targetKey:s,value:l})=>{this.beforeChangedRecordsMap.delete(a),this.beforeChangedRecordsMap.set(s,l)}))}else super.adjustBeforeChangedRecordsMap(t,e,i)}cacheBeforeChangedRecord(t,e){var i;const r=this.getOriginalRecord(t);e.internalProps.groupBy&&(t=this.getOriginRecordIndexForGroup(t)),this.beforeChangedRecordsMap.has(t.toString())||this.beforeChangedRecordsMap.set(t.toString(),(i=ag(r,void 0,["vtable_gantt_linkedFrom","vtable_gantt_linkedTo"]))!==null&&i!==void 0?i:{})}getGroupSeriesNumber(t){const e=this.dataSource.currentIndexedData[t],i=e.length-1;let r=e.length,o=1;for(;r>i;o++){const a=this.dataSource.currentIndexedData[t-o];r=yt(a)?1:a.length}return o-1}}function UO(n,t,e,i,r){const o=i[r];if(!Y(o))return void t.push(n);const a=tKt(n,o);if(a!==void 0){if(e.has(a)){const s=e.get(a);return UO(n,t[s].children,t[s].map,i,r+1)}return e.set(a,t.length),t.push({vtableMerge:!0,vtableMergeName:a,children:[],map:new Map}),UO(n,t[t.length-1].children,t[t.length-1].map,i,r+1)}}function Blt(n,t,e,i){if(!e){e=new Map;for(let r=0;r<n.length;r++){const o=n[r];o.vtableMerge&&e.set(o.vtableMergeName,r)}}if(!i){i=new Map;for(let r=0;r<t.length;r++){const o=t[r];o.vtableMerge&&i.set(o.vtableMergeName,r)}}for(let r=0;r<n.length;r++){const o=n[r],a=t[i.get(o.vtableMergeName)];Y(a)&&(a.hierarchyState=n[r].hierarchyState),Rt(o?.children)&&Rt(a?.children)&&o.map.size!==0&&a.map.size!==0&&Blt(o.children,a.children,o.map,a.map)}}var q1={exports:{}},tX;function iKt(){if(tX)return q1.exports;tX=1;var n={},t=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),e=["style","variant","weight","size","lineHeight","family"],i=/([\.0-9]+)(.*)/,r=function(l,h,u){var d=l.match(i);if(d){l=parseFloat(d[1]);var c=d[2].toLowerCase().trim(),f=Math.round(l);switch(f===l&&(l=f),c){case"em":return h===null?void 0:l*h;case"px":return l;case"pt":return l/(72/u);case"pc":return l/(6/u);case"mm":return l*(u/25.4);case"cm":return l*(u/2.54);case"in":return l*u;case"%":return h===null?void 0:h*(l/100)}}},o={size:r,lineHeight:r},a={serif:1,"sans-serif":1,cursive:1,fantasy:1,monospace:1},s=q1.exports=function(l,h,u){var d=l+"-"+(h||"null")+"@"+u;if(u=u||96,typeof n[d]<"u")return n[d];if(h&&(h=s(h,null,u)),l==="inherit")return h;var c=t.exec(l);if(!c){n[d]=null;return}c.shift();for(var f={},g=0;g<c.length;g++){var p=e[g],v=c[g];if(o[p]&&v){var m=h&&h[p]||null,y=o[p](v,m,u);typeof y>"u"&&p==="lineHeight"&&v?v=f.size*parseFloat(v):v=y}if(!(!v||v==="normal")){if(v==="inherit"){if(!h)return;v=h[p]}v.trim&&(v=v.trim()),f[p]=v}}Object.keys(f).length||(f=null),n[d]=f;var b=[];f.style&&b.push(f.style),f.variant&&b.push(f.variant),f.weight&&f.weight!=="400"&&f.weight!=="normal"&&b.push(f.weight),b.push(f.size+"px"),f.lineHeight&&(b[b.length-1]+="/"+f.lineHeight+"px");var _=f.family.split(",");return f.family=_.map(function(w){return w=w.trim(),a[w.toLowerCase()]&&(w=w.toLowerCase()),w}),b.push(f.family),Object.defineProperty(f,"toString",{value:function(){return b.map(function(w){return Array.isArray(w)?w.map(function(C){return C.indexOf(" ")>-1?'"'+C.replace(/["']/g,"")+'"':C}).join(", "):w}).join(" ")}}),f};return q1.exports.generics=a,q1.exports}var nKt=iKt();const rKt=yH(nKt);function oKt(n){return rKt(n)}function Se(n){var t,e,i,r;if(yt(n)||Li(n)||Rt(n)){let o=xS(n);return typeof o=="number"||typeof o=="string"?o=[o,o,o,o]:Array.isArray(o)&&(o=o.slice(0)),o}return n&&(isFinite(n.bottom)||isFinite(n.left)||isFinite(n.right)||isFinite(n.top))?[(t=n.top)!==null&&t!==void 0?t:0,(e=n.right)!==null&&e!==void 0?e:0,(i=n.bottom)!==null&&i!==void 0?i:0,(r=n.left)!==null&&r!==void 0?r:0]:[0,0,0,0]}const $w=0,klt=1,EA=2,Llt=3,Elt=10,Dlt=11,Ilt=12,aKt=9,sKt=13,lKt=10,hKt=12,uKt=32,dKt=37,cKt=46,fKt=48,gKt=57,pKt=65,vKt=90,mKt=97,yKt=122;function bKt(n){return n>=pKt&&n<=vKt}function _Kt(n){return n>=mKt&&n<=yKt}function CKt(n){return _Kt(n)||bKt(n)}function wKt(n){return n===aKt||n===lKt||n===hKt||n===sKt||n===uKt}function AL(n){return n>=fKt&&n<=gKt}function eX(n){return n===cKt}function iX(n){return CKt(n)||n===dKt}function Cy(n){return new Error(`calc parse error: ${n}`)}function xKt(n){const t=n.replace(/calc\(/g,"(").trim(),e=[],i=t.length;for(let s=0;s<i;s++){const l=t[s],h=l.charCodeAt(0);if(l==="("||l===")")e.push({value:l,type:$w});else if(l==="*"||l==="/")e.push({value:l,type:EA});else if(l==="+"||l==="-")s=r(l,s+1)-1;else if(AL(h)||eX(h))s=o(l,s+1)-1;else if(!wKt(h))throw Cy(n)}function r(s,l){if(l<i){const h=t[l],u=h.charCodeAt(0);if(AL(u)||eX(u))return o(s+h,l+1)}return e.push({value:s,type:EA}),l}function o(s,l){let h=l;for(;h<i;h++){const u=t[h],d=u.charCodeAt(0);if(AL(d))s+=u;else{if(u!=="."){if(iX(d))return a(s,u,h+1);break}if(s.indexOf(".")>=0)throw Cy(n);s+=u}}if(s===".")throw Cy(n);return e.push({value:parseFloat(s),type:Llt}),h}function a(s,l,h){let u=h;for(;u<i;u++){const d=t[u];if(!iX(d.charCodeAt(0)))break;l+=d}return e.push({value:parseFloat(s),unit:l,type:klt}),u}return e}const nX={"*":3,"/":3,"+":2,"-":2};function Olt(n,t){function e(r){const o=r.pop(),a=r.pop(),s=r.pop();if(!(s&&s.nodeType&&a&&a.type===EA&&o&&o.nodeType))throw Cy(t);return{nodeType:Dlt,left:s,op:a,right:o}}const i=[];for(;n.length;){const r=n.shift();if(r.type===$w&&r.value==="("){let o=0;const a=Clt.findIndex(n,(s=>{if(s.type===$w&&s.value==="(")o++;else if(s.type===$w&&s.value===")"){if(!o)return!0;o--}return!1}));if(a===-1)throw Cy(t);i.push(Olt(n.splice(0,a),t)),n.shift()}else if(r.type===EA){if(i.length>=3){const o=i[i.length-2].value;nX[r.value]<=nX[o]&&i.push(e(i))}i.push(r)}else if(r.type===klt){const{value:o,unit:a}=r;i.push({nodeType:Elt,value:o,unit:a})}else r.type===Llt&&i.push({nodeType:Ilt,value:r.value})}for(;i.length>1;)i.push(e(i));return i[0]}function SKt(n){return Olt(xKt(n),n)}function YO(n,t){if(n.nodeType===Dlt){const e=YO(n.left,t),i=YO(n.right,t);switch(n.op.value){case"+":return e+i;case"-":return e-i;case"*":return e*i;case"/":return e/i;default:throw new Error(`calc error. unknown operator: ${n.op.value}`)}}else if(n.nodeType===Elt)switch(n.unit){case"%":return n.value*t.full/100;case"px":return n.value;default:throw new Error(`calc error. unknown unit: ${n.unit}`)}else if(n.nodeType===Ilt)return n.value;throw new Error("calc error.")}function AKt(n,t){return YO(SKt(n),t)}function TKt(n,t){return typeof n=="string"?AKt(n.trim(),t):n-0}function MKt(n){return!We(n)&&(!!yt(n)||+n==+n)}function TL(n){return!!Li(n)&&!!n.endsWith("%")&&MKt(n.substring(0,n.length-1))}function RKt(n,t="vtable"){var e,i;const r=document.createElement("div");r.setAttribute("tabindex","0"),r.classList.add(t),r.style.outline="none",r.style.margin=`${n.top}px ${n.right}px ${n.bottom}px ${n.left}px`;const o=(r.offsetWidth||((e=r.parentElement)===null||e===void 0?void 0:e.offsetWidth)||1)-1,a=(r.offsetHeight||((i=r.parentElement)===null||i===void 0?void 0:i.offsetHeight)||1)-1;return r.style.width=o&&o-n.left-n.right+"px"||"0px",r.style.height=a&&a-n.top-n.bottom+"px"||"0px",r}function PKt(n,t){var e,i;n.style.margin=`${t.top}px ${t.right}px ${t.bottom}px ${t.left}px`;const r=(n.offsetWidth||((e=n.parentElement)===null||e===void 0?void 0:e.offsetWidth)||1)-1,o=(n.offsetHeight||((i=n.parentElement)===null||i===void 0?void 0:i.offsetHeight)||1)-1;n.style.width=r&&r-t.left-t.right+"px"||"0px",n.style.height=o&&o-t.top-t.bottom+"px"||"0px"}function Hlt(n,t){const{dataSourceEventIds:e}=n.internalProps;e&&e.forEach((i=>n.internalProps.handler.off(i))),t(n),n.internalProps.dataSourceEventIds=[n.internalProps.handler.on(n.internalProps.dataSource,Ph.EVENT_TYPE.CHANGE_ORDER,(()=>{n.dataSource.hierarchyExpandLevel&&n.refreshRowColCount(),n.render()}))]}function rX(n,t=[]){Hlt(n,(()=>{n.internalProps.records=t;const e=n.internalProps.dataSource=y2.ofArray(t,n.internalProps.dataConfig,n.pagination,n.internalProps.columns,n.internalProps.layoutMap.rowHierarchyType,zlt(n));n.addReleaseObj(e)}))}function zlt(n){var t;return n.options.hierarchyExpandLevel?n.options.hierarchyExpandLevel:n.internalProps.groupBy?1/0:!((t=n._hasHierarchyTreeHeader)===null||t===void 0)&&t.call(n)?1:void 0}function BKt(n,t){Hlt(n,(()=>{n.internalProps.dataSource&&n.internalProps.releaseList.forEach((e=>{e instanceof Ph&&(e.release(),n.internalProps.releaseList.splice(n.internalProps.releaseList.indexOf(e),1))})),t?t instanceof Ph?(n.internalProps.dataSource=t,n.internalProps.dataSource.supplementConfig(n.pagination,n.options.columns,n.internalProps.layoutMap.rowHierarchyType,zlt(n))):n.internalProps.dataSource=new y2(t):n.internalProps.dataSource=Ph.EMPTY,n.addReleaseObj(n.internalProps.dataSource),n.internalProps.records=null}))}function kKt(n,t){if(!n.internalProps.frozenRowCount)return null;let{scrollTop:e}=n;const i=n.internalProps.frozenRowCount;for(let r=0;r<i;r++){const o=n.getRowHeight(r),a=e+o;if(a>t)return{top:e,row:r,bottom:a,height:o};e=a}return null}function LKt(n,t){if(!n.internalProps.frozenColCount)return null;let{scrollLeft:e}=n;const i=n.internalProps.frozenColCount;for(let r=0;r<i;r++){const o=n.getColWidth(r),a=e+o;if(a>t)return{left:e,col:r,right:a,width:o};e=a}return null}function Wg(n,t){return Math.round(TKt(t,n.internalProps.calcWidthContext))}function EKt(n,t){return n?n.min&&n.min>t?n.min:n.max&&n.max<t?n.max:t:t}function DKt(n){let t=0,e=0;n.frozenColCount>0&&(t=n.getFrozenColsWidth()),n.rightFrozenColCount>0&&(e=n.getRightFrozenColsWidth());let i=0,r=0;return n.frozenRowCount>0&&(i=n.getFrozenRowsHeight()),n.bottomFrozenRowCount>0&&(r=n.getBottomFrozenRowsHeight()),new Lc(n.scrollLeft+t,n.scrollTop+i,n.tableNoFrameWidth-t-e,n.tableNoFrameHeight-i-r)}function Sd(n,t,e,i,r,o=!0){const a=Se(r("padding",n,e,i,t)),s=r("bgColor",n,e,i,t),l=r("font",n,e,i,t);let h,u,d,c,f;if(l){const{family:k,size:E,weight:D,style:I,variant:O}=oKt(l);h=k.join(" "),u=E,d=D,c=I,c=O}else h=r("fontFamily",n,e,i,t),u=r("fontSize",n,e,i,t),d=r("fontWeight",n,e,i,t),c=r("fontStyle",n,e,i,t),f=r("fontVariant",n,e,i,t);const g=r("textAlign",n,e,i,t),p=r("textBaseline",n,e,i,t),v=r("color",n,e,i,t),m=r("strokeColor",n,e,i,t),y=r("lineHeight",n,e,i,t),b=r("underline",n,e,i,t),_=r("underlineDash",n,e,i,t),w=r("underlineOffset",n,e,i,t),C=r("lineThrough",n,e,i,t),x=Math.max(1,Math.floor(u/10)),S=r("textOverflow",n,e,i,t),A=r("borderColor",n,e,i,t),T=r("borderLineWidth",n,e,i,t),M=r("borderLineDash",n,e,i,t),R=r("marked",n,e,i,t),L=r("cursor",n,e,i,t),B=!(a&&s&&l&&g&&p&&v&&S&&A&&T&&M&&typeof b=="boolean"&&typeof C=="boolean"&&typeof R=="boolean");if(!o)return{hasFunctionPros:B};const P={text:{fontFamily:h,fontSize:u,fontWeight:d,fontStyle:c,fontVariant:f,fill:v,stroke:m!=null&&m,textAlign:g,textBaseline:p,lineHeight:y??u,underline:b?x:void 0,underlineDash:_,underlineOffset:w,lineThrough:C?x:void 0,ellipsis:S==="clip"?"":S==="ellipsis"?"...":Y(S)?S:void 0},group:{fill:s,lineDash:M,lineWidth:T,stroke:A,cursor:L==="auto"||L==="default"?void 0:L},_vtable:{padding:a,marked:R}};if(Array.isArray(T)&&(P.group.strokeArrayWidth=Se(T)),Array.isArray(A)){const k=Se(A);P.group.stroke=!k.every((E=>!E))&&k,P.group.strokeArrayColor=Se(A)}return{theme:P,hasFunctionPros:B}}function b2(n,t,e){const i=e.theme.frameStyle.cornerRadius;if(e.theme.cellInnerBorder){if(Array.isArray(i)){const r=[0,0,0,0];return n===0&&t===0&&(r[0]=i[0]),n===e.colCount-1&&t===0&&(r[1]=i[1]),n===0&&t===e.rowCount-1&&(r[3]=i[3]),n===e.colCount-1&&t===e.rowCount-1&&(r[2]=i[2]),r}if(i){const r=[0,0,0,0];return n===0&&t===0&&(r[0]=i),n===e.colCount-1&&t===0&&(r[1]=i),n===0&&t===e.rowCount-1&&(r[3]=i),n===e.colCount-1&&t===e.rowCount-1&&(r[2]=i),r}}return 0}function K1(n){for(let t=0;t<n.internalProps.columns.length;t++){const e=n.internalProps.columns[t];if(!e.aggregation){if(n.options.aggregation){let i;if(i=typeof n.options.aggregation=="function"?n.options.aggregation({col:t,field:e.field}):n.options.aggregation,i)if(Array.isArray(i)){const r=[];i.forEach((o=>{r.push(Object.assign({showOnTop:!1},o))})),e.aggregation=r}else e.aggregation=Object.assign({showOnTop:!1},i)}}}}function oX(n){for(let t=0;t<n.length;t++)if(n[t].aggregation)return!0;return!1}function IKt(n){if(n.options.widthMode==="autoWidth"||n.options.defaultHeaderColWidth==="auto"||Array.isArray(n.options.defaultHeaderColWidth)&&n.options.defaultHeaderColWidth.includes("auto"))return!0;const t=n.internalProps.layoutMap.columnObjects;for(let e=0;e<t.length;e++)if(t[e].width==="auto")return!0;return!1}let D0,I0,XO,qO,gc,pc,KO,Flt,Nlt,Wlt,Vlt,vc,mc,Glt,$lt,ZO,JO,jlt,Ult,QO,tH,yc,bc,eH;function Z1(n){var t,e,i,r,o,a,s,l,h,u,d,c,f,g,p,v,m,y,b,_,w,C,x,S;D0=(t=n?.sort_color)!==null&&t!==void 0?t:"#282F38",I0=(e=n?.sort_color_opacity)!==null&&e!==void 0?e:"0.35",XO=(i=n?.sort_color_2)!==null&&i!==void 0?i:"#416EFF",qO=(r=n?.sort_color_opacity_2)!==null&&r!==void 0?r:"1",gc=(o=n?.sort_size)!==null&&o!==void 0?o:16,pc=(a=n?.sort_size_2)!==null&&a!==void 0?a:22,KO=(s=n?.frozen_color)!==null&&s!==void 0?s:"#282F38",Flt=(l=n?.frozen_color_opacity)!==null&&l!==void 0?l:"0.35",Nlt=(h=n?.frozen_color_opacity)!==null&&h!==void 0?h:"0.2",Wlt=(u=n?.frozen_color_2)!==null&&u!==void 0?u:"#416EFF",Vlt=(d=n?.frozen_color_opacity_2)!==null&&d!==void 0?d:"1",vc=(c=n?.frozen_size)!==null&&c!==void 0?c:22,mc=(f=n?.frozen_size_2)!==null&&f!==void 0?f:22,Glt=(g=n?.collapse_color)!==null&&g!==void 0?g:"#141414",$lt=(p=n?.collapse_color_opacity)!==null&&p!==void 0?p:"0.65",ZO=(v=n?.collapse_size)!==null&&v!==void 0?v:16,JO=(m=n?.frozen_size_2)!==null&&m!==void 0?m:22,jlt=(y=n?.expand_color)!==null&&y!==void 0?y:"#141414",Ult=(b=n?.expand_color_opacity)!==null&&b!==void 0?b:"0.65",QO=(_=n?.expand_size)!==null&&_!==void 0?_:16,tH=(w=n?.expand_size_2)!==null&&w!==void 0?w:22,yc=(C=n?.dragReorder_color)!==null&&C!==void 0?C:"#666666",bc=(x=n?.dragReorder_color_opacity)!==null&&x!==void 0?x:"1",eH=(S=n?.dragReorder_size)!==null&&S!==void 0?S:20}const OKt={get sort_downward(){return{type:"svg",svg:`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"> <path d="M4.6665 9H11.3332L7.99984 13.1667L4.6665 9Z" fill="${XO}"  fill-opacity="${qO}"/><path d="M11.3335 7L4.66683 7L8.00016 2.83333L11.3335 7Z" fill="${D0}" fill-opacity="${I0}"/></svg> `,width:gc,height:gc,funcType:Ye.sort,name:"sort_downward",positionType:Ue.contentRight,marginLeft:3,hover:{width:pc,height:pc,bgColor:"rgba(101, 117, 168, 0.1)"},cursor:"pointer"}},get sort_upward(){return{type:"svg",svg:`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4.6665 9H11.3332L7.99984 13.1667L4.6665 9Z" fill="${D0}"  fill-opacity="${I0}"/><path d="M11.3335 7L4.66683 7L8.00016 2.83333L11.3335 7Z" fill="${XO}"  fill-opacity="${qO}"/> </svg>`,width:gc,height:gc,funcType:Ye.sort,positionType:Ue.contentRight,name:"sort_upward",marginLeft:3,hover:{width:pc,height:pc,bgColor:"rgba(101, 117, 168, 0.1)"},cursor:"pointer"}},get sort_normal(){return{type:"svg",svg:`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4.6665 9H11.3332L7.99984 13.1667L4.6665 9Z" fill="${D0}" fill-opacity="${I0}"/><path d="M11.3335 7L4.66683 7L8.00016 2.83333L11.3335 7Z" fill="${D0}" fill-opacity="${I0}"/></svg> `,width:gc,height:gc,funcType:Ye.sort,positionType:Ue.contentRight,name:"sort_normal",marginLeft:3,hover:{width:pc,height:pc,bgColor:"rgba(101, 117, 168, 0.1)"},cursor:"pointer"}},get freeze(){return{type:"svg",svg:`<svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0)"><path d="M17.1313 8.42047C17.1932 8.48238 17.2423 8.55587 17.2759 8.63676C17.3094 8.71764 17.3266 8.80434 17.3266 8.89189C17.3266 8.97944 17.3094 9.06613 17.2759 9.14702C17.2423 9.2279 17.1932 9.3014 17.1313 9.3633L13.3843 13.1103C13.7007 14.3048 13.5305 15.4443 12.8388 16.2395C12.8104 16.2781 12.7778 16.3136 12.7417 16.3451L12.712 16.3755C12.6501 16.4374 12.5766 16.4865 12.4957 16.52C12.4148 16.5535 12.3281 16.5707 12.2406 16.5707C12.153 16.5707 12.0663 16.5535 11.9854 16.52C11.9046 16.4865 11.8311 16.4374 11.7692 16.3755L9.17633 13.7826L6.05316 16.9058L5.11983 17.0925C5.09291 17.0979 5.06508 17.0965 5.03881 17.0886C5.01254 17.0806 4.98863 17.0663 4.96923 17.0469C4.94982 17.0275 4.9355 17.0036 4.92755 16.9773C4.9196 16.951 4.91827 16.9232 4.92366 16.8963L5.11033 15.963L8.23333 12.8396L5.64066 10.2471C5.57875 10.1852 5.52964 10.1117 5.49614 10.0309C5.46263 9.94997 5.44539 9.86327 5.44539 9.77572C5.44539 9.68817 5.46263 9.60148 5.49614 9.52059C5.52964 9.43971 5.57875 9.36621 5.64066 9.3043C5.65066 9.2943 5.66066 9.2843 5.67099 9.27464C5.70266 9.2383 5.73833 9.20547 5.77766 9.17664C6.57283 8.48564 7.71199 8.31564 8.90599 8.63197L12.6528 4.88497C12.7147 4.82306 12.7882 4.77395 12.8691 4.74045C12.95 4.70694 13.0367 4.6897 13.1242 4.6897C13.2118 4.6897 13.2985 4.70694 13.3794 4.74045C13.4603 4.77395 13.5338 4.82306 13.5957 4.88497L17.1312 8.42047H17.1313ZM15.7172 8.8918L13.1243 6.29914L9.56483 9.8588C9.47574 9.94788 9.36323 10.0099 9.24034 10.0376C9.11746 10.0654 8.98922 10.0578 8.87049 10.0156C8.22783 9.78764 7.63899 9.7553 7.17749 9.89814L12.1182 14.8388C12.261 14.3771 12.2287 13.7885 12.0007 13.146C11.9585 13.0272 11.9509 12.899 11.9787 12.7761C12.0064 12.6532 12.0684 12.5407 12.1575 12.4516L15.7172 8.89164V8.8918Z" fill="${KO}" fill-opacity="${Nlt}"/></g><defs><clipPath id="clip0"><rect width="22" height="22" fill="white"/></clipPath></defs></svg>`,width:vc,height:vc,name:"freeze",funcType:Ye.frozen,positionType:Ue.right,marginRight:0,hover:{width:mc,height:mc,bgColor:"rgba(101, 117, 168, 0.1)"},cursor:"pointer"}},get frozen(){return{type:"svg",svg:`<svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8.49975 3.66663C8.32294 3.66663 8.15337 3.73686 8.02835 3.86189C7.90332 3.98691 7.83309 4.15648 7.83309 4.33329V9.63246C6.76475 10.2533 6.07942 11.1795 6.00625 12.2308C5.99892 12.2786 5.99692 12.3268 6.00009 12.3741L5.99975 12.4166C5.99975 12.5934 6.06999 12.763 6.19501 12.888C6.32004 13.0131 6.48961 13.0833 6.66642 13.0833H10.3333L10.3331 17.5L10.8611 18.292C10.8763 18.3148 10.8969 18.3335 10.9211 18.3464C10.9453 18.3594 10.9723 18.3662 10.9998 18.3662C11.0272 18.3662 11.0542 18.3594 11.0784 18.3464C11.1026 18.3335 11.1232 18.3148 11.1384 18.292L11.6664 17.5L11.6666 13.0833H15.3331C15.5099 13.0833 15.6795 13.0131 15.8045 12.888C15.9295 12.763 15.9998 12.5934 15.9998 12.4166C15.9998 12.4025 15.9998 12.3883 15.9994 12.3741C16.0028 12.3263 16.0008 12.2776 15.9933 12.2295C15.9196 11.1786 15.2343 10.2528 14.1664 9.63229V4.33329C14.1664 4.15648 14.0962 3.98691 13.9712 3.86189C13.8461 3.73686 13.6766 3.66663 13.4998 3.66663H8.49975Z" fill="${KO}" fill-opacity="${Flt}"/></svg>`,width:vc,height:vc,name:"frozen",funcType:Ye.frozen,positionType:Ue.right,marginRight:0,hover:{width:mc,height:mc,bgColor:"rgba(101, 117, 168, 0.1)"},cursor:"pointer"}},get frozenCurrent(){return{type:"svg",svg:`<svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8.49975 3.66663C8.32294 3.66663 8.15337 3.73686 8.02835 3.86189C7.90332 3.98691 7.83309 4.15648 7.83309 4.33329V9.63246C6.76475 10.2533 6.07942 11.1795 6.00625 12.2308C5.99892 12.2786 5.99692 12.3268 6.00009 12.3741L5.99975 12.4166C5.99975 12.5934 6.06999 12.763 6.19501 12.888C6.32004 13.0131 6.48961 13.0833 6.66642 13.0833H10.3333L10.3331 17.5L10.8611 18.292C10.8763 18.3148 10.8969 18.3335 10.9211 18.3464C10.9453 18.3594 10.9723 18.3662 10.9998 18.3662C11.0272 18.3662 11.0542 18.3594 11.0784 18.3464C11.1026 18.3335 11.1232 18.3148 11.1384 18.292L11.6664 17.5L11.6666 13.0833H15.3331C15.5099 13.0833 15.6795 13.0131 15.8045 12.888C15.9295 12.763 15.9998 12.5934 15.9998 12.4166C15.9998 12.4025 15.9998 12.3883 15.9994 12.3741C16.0028 12.3263 16.0008 12.2776 15.9933 12.2295C15.9196 11.1786 15.2343 10.2528 14.1664 9.63229V4.33329C14.1664 4.15648 14.0962 3.98691 13.9712 3.86189C13.8461 3.73686 13.6766 3.66663 13.4998 3.66663H8.49975Z"  fill="${Wlt}" fill-opacity="${Vlt}"/></svg>`,width:vc,height:vc,funcType:Ye.frozen,positionType:Ue.right,name:"frozenCurrent",marginRight:0,hover:{width:mc,height:mc,bgColor:"rgba(101, 117, 168, 0.1)"},cursor:"pointer"}},get dropdownIcon(){return{type:"svg",svg:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g><rect x="2" y="1" width="20" height="20" rx="10" fill="white"/><rect x="2.5" y="1.5" width="19" height="19" rx="9.5" stroke="#959DA5"/></g><path d="M14.9492 9.39531C15.0086 9.31911 15.0165 9.21887 14.9698 9.1356C14.923 9.05234 14.8294 9 14.7273 9L9.27273 9C9.17057 9 9.07697 9.05234 9.03023 9.1356C8.98348 9.21887 8.99142 9.31911 9.0508 9.39531L11.7781 12.8953C11.8293 12.961 11.9119 13 12 13C12.0881 13 12.1707 12.961 12.2219 12.8953L14.9492 9.39531Z" fill="#4F5965"/></svg>',width:24,height:24,funcType:Ye.dropDown,positionType:Ue.absoluteRight,name:"dropdownIcon",marginRight:0,hover:{width:24,height:24,bgColor:"rgba(101, 117, 168, 0.1)",image:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g><rect x="2" y="1" width="20" height="20" rx="10" fill="#1E54C9"/><rect x="2.5" y="1.5" width="19" height="19" rx="9.5" stroke="#141414" stroke-opacity="0.2"/></g><path d="M14.9492 9.39531C15.0086 9.31911 15.0165 9.21887 14.9698 9.1356C14.923 9.05234 14.8294 9 14.7273 9L9.27273 9C9.17057 9 9.07697 9.05234 9.03023 9.1356C8.98348 9.21887 8.99142 9.31911 9.0508 9.39531L11.7781 12.8953C11.8293 12.961 11.9119 13 12 13C12.0881 13 12.1707 12.961 12.2219 12.8953L14.9492 9.39531Z" fill="white"/></svg>'},cursor:"pointer",visibleTime:"mouseenter_cell"}},get play(){return{type:"svg",svg:'<svg width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="48" height="48" fill="white" fill-opacity="0.01" /><path d="M24 44C35.0457 44 44 35.0457 44 24C44 12.9543 35.0457 4 24 4C12.9543 4 4 12.9543 4 24C4 35.0457 12.9543 44 24 44Z" fill="none" stroke="#686a6e" stroke-width="4" stroke-linejoin="round" stroke-opacity="0.7" /><path d="M20 24V17.0718L26 20.5359L32 24L26 27.4641L20 30.9282V24Z" fill="none" stroke="#686a6e" stroke-width="4" stroke-linejoin="round" stroke-opacity="0.7" /></svg>',width:24,height:24,funcType:Ye.play,positionType:Ue.right,name:"play",marginRight:0,hover:{width:24,height:24,bgColor:"rgba(101, 117, 168, 0.1)"},cursor:"pointer"}},get damage_pic(){return{type:"svg",svg:'<svg width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5 10V38C5 39.1046 5.89543 40 7 40H14H18L15 29L22 27L21 20L29 16L27 13L30 8H7C5.89543 8 5 8.89543 5 10Z" fill="none" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M43 38V10C43 8.89543 42.1046 8 41 8H38L34 14L37 19L28 23L29 31L22 33L24 40H41C42.1046 40 43 39.1046 43 38Z" fill="none" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path fill-rule="evenodd" clip-rule="evenodd" d="M14.5 18C15.3284 18 16 17.3284 16 16.5C16 15.6716 15.3284 15 14.5 15C13.6716 15 13 15.6716 13 16.5C13 17.3284 13.6716 18 14.5 18Z" fill="none" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/></svg>',width:24,height:24,funcType:Ye.damagePic,positionType:Ue.left,name:"damage_pic",marginRight:0,hover:{width:24,height:24,bgColor:"rgba(101, 117, 168, 0.1)"},cursor:"pointer"}},get loading_pic(){return{type:"svg",svg:'<svg viewBox="0 0 400 300" fill="none" xmlns="http://www.w3.org/2000/svg"><mask id="a" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="50" y="65" width="301" height="170"><path d="M350.3 65H50v169.8h300.3V65Z" fill="#fff"/></mask><g mask="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M58.3 233.2h32.8v-36.8H58.3v36.8Z" fill="#C7DEFF"/><path d="M91.1 224.5v8.8H58.3M82.4 196.2H58.3" stroke="#071F4D"/><path fill-rule="evenodd" clip-rule="evenodd" d="M305.4 182.5s-2.7 12.6 0 17.4c2.7 4.8 8.3 6.7 12.4 4.4 4.2-2.4 5.3-8.1 2.6-12.9-2.7-4.8-15-8.9-15-8.9ZM336 204.7c4.3 2 9.7-.4 12-5.4 2.3-5-1.5-17.3-1.5-17.3s-11.8 5.1-14.1 10.1c-2.3 5-.7 10.6 3.6 12.6Z" fill="#00E4E5"/><path fill-rule="evenodd" clip-rule="evenodd" d="M326.7 174s-10 11.8-10 18.6c0 6.7 4.5 12.2 10 12.2s10-5.5 10-12.3c0-6.8-10-18.5-10-18.5Z" fill="#00E4E5"/><path d="M332.3 181.5c2.3 3.6 4.4 7.8 4.4 10.9M316.7 192.5c0-3.1 2.1-7.2 4.3-10.8" stroke="#071F4D"/><path fill-rule="evenodd" clip-rule="evenodd" d="M343.1 227.3v-9.7h-34v9.7c0 3.7 3 6.6 6.6 6.6h20.9c3.6 0 6.5-2.9 6.5-6.6Z" fill="#071F4D"/><path fill-rule="evenodd" clip-rule="evenodd" d="M350.4 220.8V198H302v22.8c0 5.9 4.8 10.7 10.7 10.7h26.9c5.9 0 10.7-4.8 10.8-10.7Z" fill="#C7DEFF"/><path fill-rule="evenodd" clip-rule="evenodd" d="M331.7 74.2H117.8L87.4 203h213.8l30.5-128.8Z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M337 74.2h-6.2l-30.6 129.2h6.2L337 74.2Z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M303.8 203.5h2.4l30.7-129.3h-1.8l-31.3 129.3Z" fill="#C7DEFF"/><path d="m337 74.2-30.6 129.2h-5.9" stroke="#071F4D"/><path fill-rule="evenodd" clip-rule="evenodd" d="M229.9 202.1h-47.6l2 9.6h47.3l-1.7-9.6Z" fill="#C7DEFF"/><path fill-rule="evenodd" clip-rule="evenodd" d="M94.7 172.6 87.4 203h213.1l7.8-30.4H94.7Z" fill="#006EFF"/><path fill-rule="evenodd" clip-rule="evenodd" d="M94.7 172.6 87.4 203h213.1l7.8-30.4H94.7Z" fill="#006EFF"/><path d="M138.5 74.2h193.2l-23.4 98.6M94.5 172.7l11-46.3M104.8 155.4l-2.3 11.5h6.7M316 112.1l1.1-4.5" stroke="#071F4D"/><path fill-rule="evenodd" clip-rule="evenodd" d="M148.3 138.1h97V119h-97v19.1Z" fill="#00E4E5"/><path d="M303.1 80.6h20.3l-4.6 19.6M228.3 234.3c3.6 0 6.3-3.2 5.7-6.8l-4.1-24.1" stroke="#071F4D"/><path fill-rule="evenodd" clip-rule="evenodd" d="M226.2 229.5h-68.9v1.2c0 2 1.6 3.7 3.7 3.7h60.1c2.8 0 5-2.2 5.1-4.9Z" fill="#C7DEFF"/><path d="M180.699 226.8h-19.9c-2.8 0-4.6 3-3.3 5.5m0 0c.6 1.2 1.9 2 3.3 2h57.8M175.9 203.4l3.6 17.6M241.2 234.3h65.1M104.6 234.3h41.3" stroke="#071F4D"/><path d="M206.2 234.3h14.9c3.1 0 5.5-2.8 5-5.9l-4.3-24.9M160.7 226.8h46M62.2 226.1h-9.5c-1.2 0-2.2-1-2.2-2.2v-18.3c0-1.2 1-2.2 2.2-2.2h9.5" stroke="#071F4D"/><path d="M53.4 171.7H68c2.1 0 3.7 1.7 3.7 3.7v16.1M79.1 192v-21.8c0-2.5 2-4.6 4.6-4.6h2.2c2.5 0 4.5-2 4.5-4.5m0 0c0-2.5-2-4.5-4.5-4.5H56.1c-2.4 0-4.3-1.9-4.3-4.3V148M71.2 165.2h-18M64 181.7v10.1" stroke="#C7DEFF"/><path fill-rule="evenodd" clip-rule="evenodd" d="M85.7 120H124c4.3 0 7.7-3.5 7.7-7.7V65.5H94.2c-4.7 0-8.5 4.9-8.5 11V120Z" fill="#C7DEFF"/><path d="M85.7 110.7V73c0-4.1 3.4-7.5 7.5-7.5h38.5M146.2 73.8v-2.5c0-3.2-2-5.8-5.8-5.8-2.8 0-6 1.1-6 5.8v42.4c0 4.7-3.8 8.5-8.5 8.5h-15.6" stroke="#071F4D"/><path d="M119.7 122.3H87c-6.1 0-11.1-5-11.1-11.1m0 0h39M126.1 122.3c-6.1 0-11.1-5-11.1-11.1" stroke="#071F4D"/><path fill-rule="evenodd" clip-rule="evenodd" d="M85.4 122.1h37.2c-6.5-1.8-8-10.5-8-10.5H76.2c.6 8.8 9.2 10.5 9.2 10.5Z" fill="#071F4D"/><path fill-rule="evenodd" clip-rule="evenodd" d="M95.8 102.9h4.8V83.6h-4.8v19.3ZM106.6 102.9h4.8V77.6h-4.8v25.3ZM117.3 102.9h4.8V89.1h-4.8v13.8Z" fill="#fff"/><path d="M273.2 195.9h16.9M261.2 195.9h5" stroke="#fff"/><path d="M62.4 201.9v2.9M62.4 224.5v2.9" stroke="#071F4D"/><path d="m153.6 138.1 9.7-19.1M168.8 138.1l9.7-19.1M184.1 138.1l9.7-19.1M199.4 138.1l9.7-19.1M214.6 138.1l9.8-19.1M229.9 138.1l9.7-19.1" stroke="#fff"/><path d="M148.3 138.1h121.6V119H148.3v19.1Z" stroke="#071F4D"/></g></svg>',width:400,height:300,name:"loading_pic",positionType:Ue.left}},get expand(){return{type:"svg",svg:`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
      <path d="M4.64988 6.81235C4.38797 6.48497 4.62106 6 5.04031 6L10.9597 6C11.3789 6 11.612 6.48497 11.3501 6.81235L8.39043 10.512C8.19027 10.7622 7.80973 10.7622 7.60957 10.512L4.64988 6.81235Z" fill="${jlt}" fill-opacity="${Ult}"/>
      </svg>`,width:QO,height:QO,funcType:Ye.expand,name:"expand",positionType:Ue.contentLeft,marginLeft:0,marginRight:4,hover:{width:tH,height:tH,bgColor:"rgba(101, 117, 168, 0.1)"},cursor:"pointer"}},get collapse(){return{type:"svg",svg:`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
      <path d="M5.81235 11.3501C5.48497 11.612 5 11.3789 5 10.9597L5 5.04031C5 4.62106 5.48497 4.38797 5.81235 4.64988L9.51196 7.60957C9.76216 7.80973 9.76216 8.19027 9.51196 8.39044L5.81235 11.3501Z"  fill="${Glt}" fill-opacity="${$lt}"/>
      </svg>`,width:ZO,height:ZO,funcType:Ye.collapse,name:"collapse",positionType:Ue.contentLeft,marginLeft:0,marginRight:4,hover:{width:JO,height:JO,bgColor:"rgba(101, 117, 168, 0.1)"},cursor:"pointer"}},get drillDown(){return{name:"drillDown",type:"svg",positionType:Ue.absolute,funcType:Ye.drillDown,svg:eqt,width:13,height:13,cursor:"pointer"}},get drillUp(){return{name:"drillUp",type:"svg",positionType:Ue.absolute,funcType:Ye.drillUp,svg:iqt,width:13,height:13,cursor:"pointer"}},get dragReorder(){return{type:"svg",svg:`<svg t="1710129136961" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5166" width="200" height="200"><path d="M362.666667 192m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z" fill="${yc}"  fill-opacity="${bc}" p-id="5167"></path><path d="M661.333333 192m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z" fill="${yc}"  fill-opacity="${bc}" p-id="5168"></path><path d="M362.666667 512m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z" fill="${yc}"  fill-opacity="${bc}" p-id="5169"></path><path d="M661.333333 512m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z" fill="${yc}"  fill-opacity="${bc}" p-id="5170"></path><path d="M362.666667 832m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z" fill="${yc}"  fill-opacity="${bc}" p-id="5171"></path><path d="M661.333333 832m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z" fill="${yc}"  fill-opacity="${bc}" p-id="5172"></path></svg>`,width:eH,height:eH,funcType:Ye.dragReorder,positionType:Ue.left,name:"dragReorder",marginLeft:-10,marginRight:10,cursor:"grab"}}},DA={};function ia(){return G_(OKt,DA)}let jf=class extends ea{constructor(t){super(t),this.failCallback=()=>{const e=ia(),{svg:i,src:r}=e.damage_pic||{},o=i||r;o&&(super.image=o)},this.attribute.visibleTime!=="mouseenter_cell"&&this.attribute.visibleTime!=="click_cell"||(this.attribute.opacity=0),this.attribute.hoverImage&&(this.attribute.originImage=this.attribute.image),this.attribute.isGif&&this.attribute.gif&&this.loadGif()}loadGif(){this.playing=!1,ai.GetFile(this.attribute.gif+`?role=gif&radom=${Math.random()}`,"arrayBuffer").then((t=>{const e=eU.parseGIF(t),i=eU.decompressFrames(e,!0);this.renderGIF(i),this.resources.set(this.attribute.image,{state:"success",data:this.gifCanvas})})).catch((t=>{}))}get backgroundWidth(){var t,e;return(e=(t=this.attribute.backgroundWidth)!==null&&t!==void 0?t:this.attribute.width)!==null&&e!==void 0?e:0}get backgroundHeight(){var t,e;return(e=(t=this.attribute.backgroundHeight)!==null&&t!==void 0?t:this.attribute.height)!==null&&e!==void 0?e:0}renderGIF(t){this.loadedFrames=t,this.frameIndex=0,this.tempCanvas||(this.tempCanvas=document.createElement("canvas"),this.tempCtx=this.tempCanvas.getContext("2d")),this.gifCanvas||(this.gifCanvas=document.createElement("canvas"),this.gifCtx=this.gifCanvas.getContext("2d")),this.gifCanvas.width=t[0].dims.width,this.gifCanvas.height=t[0].dims.height,this.playing=!0,this.lastTime=new Date().getTime(),this.animate().to({},1e3,"linear").loop(1/0)}renderFrame(t,e,i){const r=this.loadedFrames[this.frameIndex||0];r.disposalType===2&&this.gifCtx.clearRect(0,0,this.gifCanvas.width,this.gifCanvas.height),this.drawPatch(r),this.manipulate(t,e,i);const o=new Date().getTime()-this.lastTime;r.delay<o&&(this.frameIndex++,this.lastTime=new Date().getTime()),this.frameIndex>=this.loadedFrames.length&&(this.frameIndex=0)}drawPatch(t){const e=t.dims;this.frameImageData&&e.width===this.frameImageData.width&&e.height===this.frameImageData.height||(this.tempCanvas.width=e.width,this.tempCanvas.height=e.height,this.frameImageData=this.tempCtx.createImageData(e.width,e.height)),this.frameImageData.data.set(t.patch),this.tempCtx.putImageData(this.frameImageData,0,0),this.gifCtx.drawImage(this.tempCanvas,e.left,e.top)}manipulate(t,e,i){t.drawImage(this.gifCanvas,0,0,this.gifCanvas.width,this.gifCanvas.height,e,i,this.attribute.width,this.attribute.height)}setAttribute(t,e,i,r){super.setAttribute(t,e,i,r),t==="gif"&&this.loadGif()}setAttributes(t,e,i){super.setAttributes(t,e,i),t.gif&&this.loadGif()}};class Ylt extends tn{constructor(t){var e,i,r,o,a;t.fill=(e=t.fill)!==null&&e!==void 0?e:"#00F",t.fontSize=(i=t.fontSize)!==null&&i!==void 0?i:12,t.underline=(r=t.underline)!==null&&r!==void 0?r:1,t.textBaseline=(o=t.textBaseline)!==null&&o!==void 0?o:"top",t.cursor=(a=t.cursor)!==null&&a!==void 0?a:"pointer",super(t)}}function $b(n){return{rootContainer:new _e({}),renderDefault:!0}}class HKt{constructor(t){this.table=t,this.customLayoutFuncCache=new Map,this.reactRemoveGraphicCache=new Map,this.reactRemoveAllGraphicCache=new Map,this.headerCustomLayoutFuncCache=new Map,this.headerReactRemoveGraphicCache=new Map,this.headerReactRemoveAllGraphicCache=new Map}hasReactCreateGraphic(t,e){return e?this.headerCustomLayoutFuncCache.has(t):this.customLayoutFuncCache.has(t)}setReactCreateGraphic(t,e,i){i?this.headerCustomLayoutFuncCache.set(t,e):this.customLayoutFuncCache.set(t,e)}setReactRemoveGraphic(t,e,i){i?this.headerReactRemoveGraphicCache.set(t,e):this.reactRemoveGraphicCache.set(t,e)}setReactRemoveAllGraphic(t,e,i){i?this.headerReactRemoveAllGraphicCache.set(t,e):this.reactRemoveAllGraphicCache.set(t,e)}updateCustomCell(t,e){const i=this.table;if(i.widthMode==="autoWidth"&&i.scenegraph.recalculateColWidths(),(i.isAutoRowHeight()||i.internalProps.defaultRowHeight==="auto"&&!e||i.internalProps.defaultHeaderRowHeight==="auto"&&e)&&i.scenegraph.recalculateRowHeights(),i.isPivotTable()){const r=FKt(t,i,e);for(let o=0;o<r.length;o++){const a=r[o];for(let s=a.start.col;s<=a.end.col;s++)for(let l=a.start.row;l<=a.end.row;l++)i.scenegraph.updateCellContent(s,l)}}else{const r=zKt(t,i,e);for(let o=r.start.col;o<=r.end.col;o++)for(let a=r.start.row;a<=r.end.row;a++)i.scenegraph.updateCellContent(o,a)}i.scenegraph.renderSceneGraph()}getCustomLayoutFunc(t,e){var i;if(this.table.isHeader(t,e)){const{componentId:o}=this.table.getHeaderDefine(t,e);return(i=this.headerCustomLayoutFuncCache.get(o))!==null&&i!==void 0?i:$b}const{componentId:r}=this.table.getBodyColumnDefine(t,e);return this.customLayoutFuncCache.get(r)||$b}removeCustomCell(t,e){let i;if(this.table.isHeader(t,e)){const r=this.table.getHeaderDefine(t,e),{componentId:o}=r;i=this.headerReactRemoveGraphicCache.get(o)}else{const r=this.table.getBodyColumnDefine(t,e),{componentId:o}=r;i=this.reactRemoveGraphicCache.get(o)}i&&i(t,e)}clearCache(){this.reactRemoveAllGraphicCache.forEach((t=>{t()})),this.headerReactRemoveAllGraphicCache.forEach((t=>{t()}))}updateAllCustomCell(){this.customLayoutFuncCache.forEach(((t,e)=>{this.updateCustomCell(e)})),this.headerCustomLayoutFuncCache.forEach(((t,e)=>{this.updateCustomCell(e,!0)}))}}function zKt(n,t,e){const i=t.internalProps.rowSeriesNumber?1:0;if(e){const o=t.internalProps.layoutMap,{headerObjects:a}=t.internalProps.layoutMap;let s;for(let h=0;h<a.length;h++){const u=a[h];if(u.define.componentId===n){s=u.id;break}}const l=o.getHeaderCellAdressById(s);return o.getCellRange(l.col,l.row)}const{columnObjects:r}=t.internalProps.layoutMap;for(let o=0;o<r.length;o++)if(r[o].define.componentId===n)return{start:{col:i+o,row:t.columnHeaderLevelCount},end:{col:i+o,row:t.rowCount-1}};return{start:{col:0,row:0},end:{col:t.colCount-1,row:t.rowCount-1}}}function FKt(n,t,e){const i=t.internalProps.rowSeriesNumber?1:0,r=[],o=t.internalProps.layoutMap;if(e){const{headerObjects:a}=o,s=[];for(let l=0;l<a.length;l++){const h=a[l];h&&h.define.componentId===n&&s.push(h.id)}for(let l=0;l<s.length;l++){const h=s[l],u=o.getHeaderCellAdressById(h),d=o.getCellRange(u.col,u.row);r.push(d)}}else{let a;const{columnObjects:s,indicatorsAsCol:l}=o;for(let h=0;h<s.length;h++)if(s[h].define.componentId===n){a=h;break}if(l)for(let h=o.rowHeaderLevelCount+a;h<o.colCount;h+=s.length){const u={start:{col:h+i,row:o.columnHeaderLevelCount},end:{col:h+i,row:o.rowCount-1}};r.push(u)}else for(let h=o.columnHeaderLevelCount+a;h<o.rowCount;h+=s.length){const u={start:{col:o.rowHeaderLevelCount+i,row:h},end:{col:o.colCount-1,row:h}};r.push(u)}}return r}function bn(n){const t={abstractPos:{x:n.viewport.x,y:n.viewport.y}},e=Uf(n.target);return e&&(t.eventArgs={col:e.col,row:e.row,event:n,targetCell:e,mergeInfo:NKt(e),target:n.target}),t}function Uf(n){for(;n&&n.parent;){if(n.role==="cell")return n;n=n.parent}return null}function NKt(n){if(Y(n.mergeStartCol)&&Y(n.mergeStartRow)&&Y(n.mergeEndCol)&&Y(n.mergeEndRow))return{colStart:n.mergeStartCol,colEnd:n.mergeEndCol,rowStart:n.mergeStartRow,rowEnd:n.mergeEndRow}}const WKt=/radio-\d+-\d+-(\d+)/,Xlt="_custom_",Ls="custom-container",IA=Xlt+"_0";function pd(n,t,e,i,r,o,a,s,l,h,u){var d,c,f;let g,p,v,m=!0,y=!1;if(n==="react-custom-layout"&&(n=((d=u.reactCustomLayout)===null||d===void 0?void 0:d.getCustomLayoutFunc(e,i))||$b),typeof n=="function"){const b=n({col:(c=h?.start.col)!==null&&c!==void 0?c:e,row:(f=h?.start.row)!==null&&f!==void 0?f:i,dataValue:u.getCellOriginValue(e,i),value:u.getCellValue(e,i)||"",rect:{left:0,top:0,right:r,bottom:o,width:r,height:o},table:u,originCol:e,originRow:i});if(!b)return{renderDefault:!0};b.rootContainer&&(b.rootContainer=jb(b.rootContainer,u.animationManager.timeline)),b.rootContainer instanceof _e&&(v=b.rootContainer,v.name=Ls,v.col=e,v.row=i),m=b.renderDefault,y=b.enableCellPadding}else if(typeof t=="function"){const b=t({col:e,row:i,dataValue:u.getCellOriginValue(e,i),value:u.getCellValue(e,i)||"",rect:{left:0,top:0,right:r,bottom:o,width:r,height:o},table:u});b&&(p=b.elements,m=b.renderDefault,b.expectedWidth,g=b.expectedHeight)}else t&&(t.expectedWidth,g=t.expectedHeight,p=t.elements,m=t.renderDefault);return p&&(v=VKt(p,r,s?g:o,u.getCellValue(e,i))),y&&v.setAttributes({x:l[3],y:l[0],width:r-l[1]-l[3],height:o-l[0]-l[2]}),_2(v,r,o),!h||h.start.col===h.end.col&&h.start.row===h.end.row||qlt(v,e,i,0),{elementsGroup:v,renderDefault:m}}function VKt(n,t,e,i){const r=new _e({x:0,y:0,width:t,height:e,fill:!1,stroke:!1,pickable:!1});return r.name=Ls,GKt(n,t,e,i).forEach((o=>{var a,s,l,h,u,d,c,f,g,p,v,m,y,b,_,w,C,x,S,A,T,M,R,L,B,P,k,E;switch(o.clickable&&(o.pickable=o.clickable),o.type){case"arc":const D=MS({x:o.x,y:o.y,dx:(a=o.dx)!==null&&a!==void 0?a:0,dy:(s=o.dy)!==null&&s!==void 0?s:0,fill:o.fill,stroke:o.stroke,outerRadius:o.radius,startAngle:o.startAngle,endAngle:o.endAngle,pickable:!!o.pickable,cursor:o.cursor});D.name=o.name,r.appendChild(D);break;case"text":if(o.background){const V=(h=(l=o.background)===null||l===void 0?void 0:l.expandX)!==null&&h!==void 0?h:0,X=(d=(u=o.background)===null||u===void 0?void 0:u.expandY)!==null&&d!==void 0?d:0,Z=ei({x:o.x-V,y:o.y-X,dx:(c=o.dx)!==null&&c!==void 0?c:0,dy:(f=o.dy)!==null&&f!==void 0?f:0,width:o.width+2*V,height:o.height+2*X,cornerRadius:(p=(g=o.background)===null||g===void 0?void 0:g.cornerRadius)!==null&&p!==void 0?p:0,fill:(m=(v=o.background)===null||v===void 0?void 0:v.fill)!==null&&m!==void 0?m:"#888"});r.appendChild(Z)}const I=new tn(Object.assign({pickable:!!o.pickable,fill:(y=o.color)!==null&&y!==void 0?y:o.fill},o));I.name=o.name,r.appendChild(I);break;case"rect":const O=ei({x:o.x,y:o.y,dx:(b=o.dx)!==null&&b!==void 0?b:0,dy:(_=o.dy)!==null&&_!==void 0?_:0,width:o.width,height:o.height,cornerRadius:o.radius,fill:o.fill,stroke:o.stroke,pickable:!!o.pickable,cursor:o.cursor});O.name=o.name,r.appendChild(O);break;case"circle":const H=Mat({x:o.x,y:o.y,dx:(w=o.dx)!==null&&w!==void 0?w:0,dy:(C=o.dy)!==null&&C!==void 0?C:0,radius:o.radius,fill:o.fill,stroke:o.stroke,pickable:!!o.pickable,cursor:o.cursor});H.name=o.name,r.appendChild(H);break;case"icon":const F=new jf({x:o.x,y:o.y,dx:(x=o.dx)!==null&&x!==void 0?x:0,dy:(S=o.dy)!==null&&S!==void 0?S:0,width:o.width,height:o.height,image:o.svg,backgroundWidth:o.hover?(A=o.hover.width)!==null&&A!==void 0?A:o.width:void 0,backgroundHeight:o.hover?(T=o.hover.width)!==null&&T!==void 0?T:o.width:void 0,backgroundColor:o.hover?(M=o.hover.bgColor)!==null&&M!==void 0?M:"rgba(22,44,66,0.2)":void 0,pickable:!!o.pickable,cursor:o.cursor});F.name=o.name,F.role="icon-custom",r.appendChild(F);break;case"image":const N=new jf({x:o.x,y:o.y,dx:(R=o.dx)!==null&&R!==void 0?R:0,dy:(L=o.dy)!==null&&L!==void 0?L:0,width:o.width,height:o.height,image:o.src,backgroundWidth:o.hover?(B=o.hover.width)!==null&&B!==void 0?B:o.width:void 0,backgroundHeight:o.hover?(P=o.hover.width)!==null&&P!==void 0?P:o.width:void 0,backgroundColor:o.hover?(k=o.hover.bgColor)!==null&&k!==void 0?k:"rgba(22,44,66,0.2)":void 0,pickable:!!o.pickable,cursor:o.cursor,shape:o.shape});N.name=o.name,N.role="image-custom",r.appendChild(N);break;case"line":const $=Wi({points:o.points,lineWidth:(E=o.lineWidth)!==null&&E!==void 0?E:1,stroke:o.stroke,pickable:!!o.pickable,cursor:o.cursor});$.name=o.name,r.appendChild($)}})),r}function GKt(n,t,e,i){const r=[],o=[0,0,0,0];for(let a=0;a<n.length;a++){const s=n[a],l=Object.assign({},s);for(const u in l)l.hasOwnProperty(u)&&ra(l[u])&&(l[u]=l[u](i));const h=l;Y(h.x)&&(h.x=Li(h.x)?ql(h.x,t-o[1]):Number(h.x)),Y(h.y)&&(h.y=Li(h.y)?ql(h.y,e-o[2]):Number(h.y)),"width"in l&&(l.width=Li(l.width)?ql(l.width,t-o[1]):Number(l.width)),"height"in l&&(l.height=Li(l.height)?ql(l.height,e-o[2]):Number(l.height)),"radius"in l&&(l.radius=Li(l.radius)?ql(l.radius,Math.min(t-o[1],e-o[2])):Number(l.radius)),"hover"in l&&(l.hover.x=Li(l.hover.x)?ql(l.hover.x,t-o[1]):Number(l.hover.x),l.hover.y=Li(l.hover.y)?ql(l.hover.y,e-o[2]):Number(l.hover.y),l.hover.width=Li(l.hover.width)?ql(l.hover.width,t-o[1]):Number(l.hover.width),l.hover.height=Li(l.hover.height)?ql(l.hover.height,e-o[2]):Number(l.hover.height),l.hover.x+=0,l.hover.y+=0),h.x=h.x+0,h.y=h.y+0,r.push(l)}return r}function ql(n,t){return n.endsWith("px")?parseInt(n,10):n.endsWith("%")&&t?parseInt(n,10)/100*t:parseInt(n,10)}function _2(n,t,e){n&&n.forEachChildren((i=>{var r,o;i&&(Bn(i.attribute.width)&&i.attribute.width.percent&&i.setAttribute("width",Math.max(0,i.attribute.width.percent/100*t+((r=i.attribute.width.delta)!==null&&r!==void 0?r:0))),i.attribute.width<0&&i.setAttribute("width",0),Bn(i.attribute.height)&&i.attribute.height.percent&&i.setAttribute("height",Math.max(0,i.attribute.height.percent/100*e+((o=i.attribute.height.delta)!==null&&o!==void 0?o:0))),i.attribute.height<0&&i.setAttribute("height",0),i.type==="group"&&_2(i,i.attribute.width,i.attribute.height))}))}function jb(n,t){if(!n||!Y(n.$$typeof)&&!Y(n.vtype))return n;const e=n.type,{attribute:i,children:r,stateProxy:o,animation:a}=n.props,s=e({attribute:i});if($Kt(s,n.props),o&&(s.stateProxy=o),s.id=i.id,s.name=i.name,Rt(r)?r.forEach((l=>{const h=jb(l,t);h&&h.type&&s.add(h)})):r&&s.add(jb(r,t)),Rt(a)&&t){const l=s.animate();l.setTimeline(t),a.forEach((h=>{l[h[0]](...h.slice(1))}))}return s}function $Kt(n,t){let e=!1;switch(n.type){case"richtext":case"rich/image":break;default:e=!0}e&&Object.keys(t).forEach((i=>{const r=P8t[i];r&&n.on(r,t[i])}))}function qlt(n,t,e,i,r){n&&(n.name=`${Xlt}${r??""}_${i}`,n.onBeforeAttributeUpdate=jKt,n.type==="group"&&n.childrenCount&&n.forEachChildren(((o,a)=>{qlt(o,t,e,a,(r??"")+"_"+i)})))}function jKt(n,t){const e=this;if(e.skipMergeUpdate)return;const i=Uf(e);if(!i||!i.stage)return;const r=i.stage.table;e.skipAttributeUpdate=!0;const{mergeStartCol:o,mergeEndCol:a,mergeStartRow:s,mergeEndRow:l}=i;if(Y(o)&&Y(a)&&Y(s)&&Y(l)&&(o!==a||s!==l)){for(let h=o;h<=a;h++)for(let u=s;u<=l;u++){if(h===i.col&&u===i.row)continue;const d=r.scenegraph.highPerformanceGetCell(h,u);if(d.role==="cell"){const c=d.getChildByName(e.name,!0);if(!c||c.skipAttributeUpdate)continue;for(const f in n)n[f]!==c.attribute[f]&&f!=="dx"&&f!=="dy"&&c.setAttribute(f,n[f])}}e.skipAttributeUpdate=void 0}}let ve=class extends _e{clear(){this.removeAllChild()}getChildByName(t,e){let i=null;return this.forEachChildren((r=>r.name===t&&(i=r,!0))),e&&this.forEachChildren((r=>{if(r.getChildByName){const o=r.getChildByName(t,!0);if(o)return i=o,!0}return!1})),i}get width(){var t;let e=this.AABBBounds.width();return e!==1/0&&e!==-1/0||(e=0),Math.max(e,(t=this.attribute.width)!==null&&t!==void 0?t:0)}get height(){var t;let e=this.AABBBounds.height();return e!==1/0&&e!==-1/0||(e=0),Math.max(e,(t=this.attribute.height)!==null&&t!==void 0?t:0)}setDeltaWidth(t){var e;t!==0&&(this.setAttribute("width",((e=this.attribute.width)!==null&&e!==void 0?e:0)+t),this.border&&(this.border.setAttribute("width",this.border.attribute.width+t),this.border.type==="group"&&this.border.firstChild.setAttribute("width",this.border.firstChild.attribute.width+t)))}setDeltaHeight(t){var e;t!==0&&(this.setAttribute("height",((e=this.attribute.height)!==null&&e!==void 0?e:0)+t),this.border&&(this.border.setAttribute("height",this.border.attribute.height+t),this.border.type==="group"&&this.border.firstChild.setAttribute("width",this.border.firstChild.attribute.height+t)))}setDeltaX(t){t!==0&&this.setAttribute("x",this.attribute.x+t)}setDeltaY(t){t!==0&&this.setAttribute("y",this.attribute.y+t)}forEachChildrenSkipChild(t,e="border-rect",i=!1){if(i){let r=this._lastChild,o=0;for(;r;){if(r.name!==e&&t(r,o++))return;r=r._prev}}else{let r=this._firstChild,o=0;for(;r;){if(r.name!==e&&t(r,o++))return;r=r._next}}}getColGroup(t){let e=this._firstChild;if(!e)return null;for(let i=0;i<this.childrenCount;i++){if(e.col===t)return e;e=e._next}return null}getRowGroup(t){let e=this._firstChild;if(!e)return null;for(let i=0;i<this.childrenCount;i++){if(e.row===t)return e;e=e._next}return null}addCellGroup(t){if(this.childrenCount===0||this.lastChild.row===t.row-1)this.addChild(t);else{let e=this._firstChild;for(let i=0;i<this.childrenCount;i++){if(e.row===t.row-1)return void this.insertAfter(t,e);e=e._next}this.addChild(t)}}getChildAt(t){const e=super.getChildAt(t);return e&&e.name==="border-rect"?e._next:e}tryUpdateAABBBounds(){if(this.role==="cell"){if(!this.shouldUpdateAABBBounds())return this._AABBBounds;const t=this.shouldSelfChangeUpdateAABBBounds(),e=this.doUpdateAABBBounds();return this.addUpdateLayoutTag(),UKt(this,t),e}return super.tryUpdateAABBBounds()}doUpdateAABBBounds(){if(this.role==="cell"){const t=this.attribute,{x:e,y:i,width:r,height:o}=t;return this._AABBBounds.setValue(e,i,e+r,i+o),this.parent&&this.parent.addChildUpdateBoundTag(),this.clearUpdateBoundTag(),this.shadowRoot&&this.shadowRoot.tryUpdateAABBBounds(),this._AABBBounds}return this.role==="body"||this.role==="row-header"||this.role==="col-header"||this.role==="right-frozen"||this.role==="bottom-frozen"||this.role==="corner-header"||this.role==="corner-right-top-header"||this.role==="corner-right-bottom-header"||this.role==="corner-left-bottom-header"?(this._AABBBounds.setValue(-1/0,-1/0,1/0,1/0),this.parent&&this.parent.addChildUpdateBoundTag(),this.clearUpdateBoundTag(),this.shadowRoot&&this.shadowRoot.tryUpdateAABBBounds(),this._AABBBounds):super.doUpdateAABBBounds()}updateColumnRowNumber(t){this.rowNumber?this.rowNumber=Math.max(this.rowNumber,t):this.rowNumber=t}updateColumnHeight(t){this.colHeight?this.colHeight+=t:this.colHeight=t}};function UKt(n,t){n.stage&&n.stage.dirtyBounds&&n.stage.renderCount&&(n.isContainer&&!t||n.stage.dirty(n.globalAABBBounds))}function C2(n,t,e,i){const r=n/t;let o,a;return r>e/i?(o=e,a=o/r,(i-a)/2):(a=i,o=a*r,(e-o)/2),{width:o,height:a}}function dN(n,t,e,i,r,o,a="left",s="middle",l=[0,0,0,0],h=0,u=0,d=0,c=0){const f=n+e,g=t+i;let p=n+l[3]+h;a==="right"||a==="end"?p=f-r-l[1]-u:a==="center"&&(p=n+(e-r+h-u)/2);let v=t+l[0]+d;return s==="bottom"||s==="alphabetic"||s==="ideographic"?v=g-o-l[2]-c:s==="middle"&&(v=t+(i-o+d-c)/2),{x:p,y:v}}function Klt(n,t,e,i,r){let o=!1,a=!1,s=!1,l=!1,h=!1,u=!1,d=!1,c=!1,f=!1;return n<=r.frozenColCount-1&&t<=r.frozenRowCount-1&&(u=!0),e>=r.colCount-r.rightFrozenColCount&&t<=r.frozenRowCount-1&&(d=!0),n<=r.frozenColCount-1&&i>=r.rowCount-r.bottomFrozenRowCount&&(f=!0),e>=r.colCount-r.rightFrozenColCount&&i>=r.rowCount-r.bottomFrozenRowCount&&(c=!0),n<=r.frozenColCount-1&&i>=r.frozenRowCount&&t<=r.rowCount-r.bottomFrozenRowCount-1&&(o=!0),e>=r.colCount-r.rightFrozenColCount&&i>=r.frozenRowCount&&t<=r.rowCount-r.bottomFrozenRowCount-1&&(a=!0),t<=r.frozenRowCount-1&&e>=r.frozenColCount&&n<=r.colCount-r.rightFrozenColCount-1&&(s=!0),i>=r.rowCount-r.bottomFrozenRowCount&&e>=r.frozenColCount&&n<=r.colCount-r.rightFrozenColCount-1&&(l=!0),n<=r.colCount-r.rightFrozenColCount-1&&e>=r.frozenColCount&&t<=r.rowCount-r.bottomFrozenRowCount-1&&i>=r.frozenRowCount&&(h=!0),{needRowHeader:o,needRightRowHeader:a,needColumnHeader:s,needBottomColumnHeader:l,needBody:h,needCornerHeader:u,needRightTopCornerHeader:d,needLeftBottomCornerHeader:f,needRightBottomCornerHeader:c}}function gt(n,t,e,i,r){const o=t&&Y(t[n])?t[n]:void 0;return typeof o=="function"?o({col:e,row:i,table:r,value:r.getCellValue(e,i),dataValue:r.getCellOriginValue(e,i),cellHeaderPaths:r.getCellHeaderPaths(e,i)}):o}function w2(n,t,e,i,r){const o=t&&Y(t[n])?t[n]:void 0;if(typeof o=="function")return o({col:e,row:i,table:r,value:r.getCellValue(e,i),dataValue:r.getCellOriginValue(e,i),cellHeaderPaths:r.getCellHeaderPaths(e,i)})}function Nl(n,t,e,i){var r,o,a,s,l,h,u,d,c,f,g,p,v,m,y,b,_,w;let C=(o=(r=e?.group)===null||r===void 0?void 0:r.strokeArrayWidth)!==null&&o!==void 0?o:void 0;return i.theme.cellInnerBorder||!pXt(i.theme.frameStyle.borderLineWidth)||vXt(i.theme.frameStyle.borderLineWidth)||(n===0&&(C=C??[(a=e?.group)===null||a===void 0?void 0:a.lineWidth,(s=e?.group)===null||s===void 0?void 0:s.lineWidth,(l=e?.group)===null||l===void 0?void 0:l.lineWidth,(h=e?.group)===null||h===void 0?void 0:h.lineWidth],C[3]=0),n===i.colCount-1&&(C=C??[(u=e?.group)===null||u===void 0?void 0:u.lineWidth,(d=e?.group)===null||d===void 0?void 0:d.lineWidth,(c=e?.group)===null||c===void 0?void 0:c.lineWidth,(f=e?.group)===null||f===void 0?void 0:f.lineWidth],C[1]=0),t===0&&(C=C??[(g=e?.group)===null||g===void 0?void 0:g.lineWidth,(p=e?.group)===null||p===void 0?void 0:p.lineWidth,(v=e?.group)===null||v===void 0?void 0:v.lineWidth,(m=e?.group)===null||m===void 0?void 0:m.lineWidth],C[0]=0),t===i.rowCount-1&&(C=C??[(y=e?.group)===null||y===void 0?void 0:y.lineWidth,(b=e?.group)===null||b===void 0?void 0:b.lineWidth,(_=e?.group)===null||_===void 0?void 0:_.lineWidth,(w=e?.group)===null||w===void 0?void 0:w.lineWidth],C[2]=0)),C}class YKt extends ve{constructor(t){super(t),this._autoWidth=!1,this._autoHeight=!1,this._leftGroup=new ve({pickable:!1,fill:!1,stroke:!1}),this._leftGroup.role="content-left",this._rightGroup=new ve({pickable:!1,fill:!1,stroke:!1}),this._rightGroup.role="content-right",this._centerGroup=new ve({pickable:!1,fill:!1,stroke:!1}),this._centerGroup.role="content-center",this.appendChild(this._leftGroup),this.appendChild(this._rightGroup),this.appendChild(this._centerGroup)}setCellContentOption(t){this._autoWidth=t.autoWidth,this._autoHeight=t.autoHeight,this._cellWidth=t.cellWidth,this._originCellWidth=t.cellWidth,this._cellHeight=t.cellHeight,this._align=t.align,this._baseline=t.baseline}addLeftOccupyingIcon(t){var e,i,r;t.setAttribute("x",this._leftGroup.width+((e=t.attribute.marginLeft)!==null&&e!==void 0?e:0)),this._leftGroup.appendChild(t),this._leftGroup.setDeltaWidth(((i=t.attribute.marginLeft)!==null&&i!==void 0?i:0)+((r=t.attribute.marginRight)!==null&&r!==void 0?r:0)+t.attribute.width)}addRightOccupyingIcon(t){var e,i,r;t.setAttribute("x",this._rightGroup.width+((e=t.attribute.marginLeft)!==null&&e!==void 0?e:0)),this._rightGroup.appendChild(t),this._rightGroup.setDeltaWidth(((i=t.attribute.marginLeft)!==null&&i!==void 0?i:0)+((r=t.attribute.marginRight)!==null&&r!==void 0?r:0)+t.attribute.width)}addContent(t){const e=this._centerGroup.lastChild;e&&t.setAttributes({x:e.attribute.x+e.AABBBounds.width()}),this._centerGroup.appendChild(t),t instanceof tn&&(this._centerGroup.setAttribute("pickable",!1),t.setAttribute("textAlign","left"))}layout(){let t=this._leftGroup.width;t===1/0&&(t=0);let e=this._rightGroup.width;if(e===-1/0&&(e=0),this._autoWidth){const a=this._centerGroup.width;this._cellWidth=t+e+a,this.setAttribute("width",this._cellWidth)}else{const a=this._cellWidth-t-e;this.updateCenterLayout(a);const s=this._centerGroup.width;this._cellWidth=t+e+s,this.setAttribute("width",this._cellWidth)}this.updateHorizontalPos();const i=this._leftGroup.height,r=this._rightGroup.height,o=this._centerGroup.height;this._cellHeight=Math.max(i,r,o),this.setAttribute("height",this._cellHeight),this.updateVerticalPos()}updateCenterLayout(t){let e=t;this._centerGroup.forEachChildren((o=>{(o instanceof jf||o instanceof Ylt)&&(e-=o.AABBBounds.width())}));const i=this._centerGroup.getChildByName("text");i instanceof Fi?i.setAttribute("width",e):i instanceof tn&&i.setAttribute("maxLineWidth",e);let r=0;this._centerGroup.forEachChildren((o=>{o.setAttribute("x",r),r+=o.AABBBounds.width()}))}updateHorizontalPos(){this._leftGroup.setAttribute("x",0),this._rightGroup.setAttribute("x",this._cellWidth-this._rightGroup.width),this._centerGroup.setAttribute("x",this._leftGroup.width),this._align==="left"||this._align==="start"?this.setAttribute("dx",0):this._align==="center"?this.setAttribute("dx",-this.attribute.width/2):this._align!=="right"&&this._align!=="end"||this.setAttribute("dx",-this.attribute.width)}updateVerticalPos(){this._baseline==="top"?(this._leftGroup.setAttribute("y",0),this._rightGroup.setAttribute("y",0),this._centerGroup.setAttribute("y",0)):this._baseline==="middle"?(this._leftGroup.forEachChildren((t=>{t.setAttribute("y",(this._leftGroup.height-t.AABBBounds.height())/2)})),this._rightGroup.forEachChildren((t=>{t.setAttribute("y",(this._rightGroup.height-t.AABBBounds.height())/2)})),this._leftGroup.setAttribute("y",this._cellHeight/2-this._leftGroup.height/2),this._rightGroup.setAttribute("y",this._cellHeight/2-this._rightGroup.height/2),this._centerGroup.setAttribute("y",this._cellHeight/2-this._centerGroup.height/2)):this._baseline==="bottom"&&(this._leftGroup.forEachChildren((t=>{t.setAttribute("y",this._leftGroup.height-t.AABBBounds.height())})),this._rightGroup.forEachChildren((t=>{t.setAttribute("y",this._rightGroup.height-t.AABBBounds.height())})),this._leftGroup.setAttribute("y",this._cellHeight-this._leftGroup.height),this._rightGroup.setAttribute("y",this._cellHeight-this._rightGroup.height),this._centerGroup.setAttribute("y",this._cellHeight-this._centerGroup.height))}updateWidth(t){this._cellWidth=t,this._originCellWidth=t,this.layout()}updateHeight(t){this._cellHeight=t,this._cellWidth=this._originCellWidth;const e=this.getChildByName("text",!0);e&&e.setAttribute("heightLimit",t),this.layout()}}function To(n,t,e){var i,r,o,a,s;let l=0;const h=e.internalProps.layoutMap;if(h.isHeader(n,t)){const u=h.getHeader(n,t);Y(u?.hierarchyLevel)&&(l=((i=u.hierarchyLevel)!==null&&i!==void 0?i:0)*(h.rowHierarchyType==="tree"&&(r=h.rowHierarchyIndent)!==null&&r!==void 0?r:0),h.rowHierarchyTextStartAlignment&&!e.internalProps.headerHelper.getHierarchyIcon(n,t)&&(l+=e.internalProps.headerHelper.getHierarchyIconWidth()))}else if(e.internalProps.groupBy||!((o=e.getBodyColumnDefine(n,t))===null||o===void 0)&&o.tree){const u=e.dataSource.getIndexKey(e.getRecordShowIndexByCell(n,t)),d=(a=e.dataSource.getGroupLength())!==null&&a!==void 0?a:0;let c=Rt(u)?u.length-1:0;d>0&&c===d&&(c=0),l=Array.isArray(u)&&e.getHierarchyState(n,t)!==Wt.none?c*((s=h.hierarchyIndent)!==null&&s!==void 0?s:0):0,h.hierarchyTextStartAlignment&&!e.internalProps.bodyHelper.getHierarchyIcon(n,t)&&(l+=e.internalProps.bodyHelper.getHierarchyIconWidth())}return l}function Ub(n,t){var e,i;let r,o=!1;for(Li(n)&&n.length>(t.options.maxCharactersNumber||200)&&(n=n.slice(0,t.options.maxCharactersNumber||200),n+="",o=!0),r=t.internalProps.enableLineBreak||!((e=t.options.customConfig)===null||e===void 0)&&e.multilinesForXTable?$U(n).replace(/\r?\n/g,`
`).replace(/\r/g,`
`).split(`
`)||[]:[$U(n)];r.length&&r.length>1&&!r[r.length-1];)r.pop();if(!((i=t.options.customConfig)===null||i===void 0)&&i.multilinesForXTable&&!t.internalProps.autoWrapText)for(;r.length&&r.length>1&&!r[0];)r.shift();return{text:r,moreThanMaxCharacters:o}}function XKt(n,t,e,i,r,o,a,s,l,h,u,d,c,f,g){var p,v,m,y,b,_,w,C,x;let S,A=0,T=0,M=0;if(Array.isArray(t)&&t.length!==0){const{inlineFrontIcons:B,inlineEndIcons:P,contentLeftIcons:k,contentRightIcons:E,leftIconWidth:D,rightIconWidth:I,absoluteRightIconWidth:O}=um(t,n,g,c);let H;if(A=D,T=I,M=O,B.length===0&&P.length===0){let F=0;yt(c.theme._contentOffset)&&(u==="left"?F=c.theme._contentOffset:u==="right"&&(F=-c.theme._contentOffset));const N=g?To(g.start.col,g.start.row,c):To(n.col,n.row,c),{text:$,moreThanMaxCharacters:V}=Ub(e,c),X={text:$.length===1?$[0]:$,moreThanMaxCharacters:V,maxLineWidth:r?1/0:l-(i[1]+i[3])-A-T-N,textBaseline:"top",heightLimit:((y=c.options.customConfig)===null||y===void 0?void 0:y.limitContentHeight)===!1||o&&!(!((b=c.options.customConfig)===null||b===void 0)&&b.multilinesForXTable)?-1:h-Math.floor(i[0]+i[2]),pickable:!1,autoWrapText:a,lineClamp:s,wordBreak:"break-word",whiteSpace:((_=c.options.customConfig)===null||_===void 0?void 0:_.limitContentHeight)===!1||$.length!==1||a?"normal":"no-wrap",dx:(u==="left"?k.length?0:N:0)+F,keepCenterInLine:!0},Z=new tn(f.text?Object.assign({},f.text,X):X);Z.name="text",H=Z}else{const F=Object.assign({text:e?.toString()},((x=(C=(w=n.parent)===null||w===void 0?void 0:w.theme)===null||C===void 0?void 0:C.userTheme)===null||x===void 0?void 0:x.text)||{});f.text&&Object.assign(F,f.text),F.textBaseline="middle";const N=[...B.map((V=>OA(V))),F,...P.map((V=>OA(V)))];N[0].textAlign=u;const $=new Fi({width:r?0:l-(i[1]+i[3])-A-T,height:o&&a?0:Math.ceil(h-(i[0]+i[2])),textConfig:N,verticalDirection:o&&a?"top":d,ellipsis:F.ellipsis});$.name="text",H=$,$.bindIconEvent(),!g||g.start.col===g.end.col&&g.start.row===g.end.row||($.onBeforeAttributeUpdate=KKt)}if(k.length!==0||E.length!==0){const F=new YKt({x:0,y:0,fill:!1,stroke:!1,pickable:!1});F.name="content",F.setCellContentOption({autoWidth:r,autoHeight:o,cellWidth:l-(i[1]+i[3])-A-T,cellHeight:h-(i[0]+i[2]),align:u,baseline:d});const N={addedHierarchyOffset:0};k.forEach(($=>{const V=Yo($,void 0,n.col,n.row,g,c,N);V.role="icon-content-left",V.name=$.name,F.addLeftOccupyingIcon(V)})),E.forEach(($=>{const V=Yo($,void 0,n.col,n.row,g,c,N);V.role="icon-content-right",V.name=$.name,F.addRightOccupyingIcon(V)})),F.addContent(H),n.appendChild(F),F.layout(),S=F.AABBBounds.width(),F.AABBBounds.height()}else n.firstChild?n.insertBefore(H,n.firstChild):n.appendChild(H),S=H.AABBBounds.width(),H.AABBBounds.height()}else if(Y(e)){const{text:B,moreThanMaxCharacters:P}=Ub(e,c),k=g?To(g.start.col,g.start.row,c):To(n.col,n.row,c);let E=0;yt(c.theme._contentOffset)&&(u==="left"?E=c.theme._contentOffset:u==="right"&&(E=-c.theme._contentOffset));const D={text:B.length===1?B[0]:B,moreThanMaxCharacters:P,maxLineWidth:r?1/0:l-(i[1]+i[3]+k),textBaseline:"top",autoWrapText:a,lineClamp:s,wordBreak:"break-word",heightLimit:((p=c.options.customConfig)===null||p===void 0?void 0:p.limitContentHeight)===!1||o&&!(!((v=c.options.customConfig)===null||v===void 0)&&v.multilinesForXTable)?-1:h-Math.floor(i[0]+i[2]),pickable:!1,dx:(u==="left"?k:0)+E,whiteSpace:((m=c.options.customConfig)===null||m===void 0?void 0:m.limitContentHeight)===!1||B.length!==1||a?"normal":"no-wrap",keepCenterInLine:!0},I=new tn(f.text?Object.assign({},f.text,D):D);I.name="text",I.textBaseline=d,n.appendChild(I),S=I.AABBBounds.width(),I.AABBBounds.height()}const R=r?A+S+T:l-(i[1]+i[3]),L=h-(i[0]+i[2]);n.forEachChildren((B=>{B.role==="icon-left"?B.setAttribute("x",B.attribute.x+i[3]):B.role==="icon-right"?B.setAttribute("x",B.attribute.x+R-T+i[3]):B.role==="icon-absolute-right"?B.setAttribute("x",B.attribute.x+R-M+i[3]+i[1]):B.name!=="content"&&B.name!=="text"||(u==="center"&&B.type!=="richtext"?B.setAttribute("x",i[3]+A+(R-A-T)/2):u==="right"&&B.type!=="richtext"?B.setAttribute("x",i[3]+R-T):B.setAttribute("x",i[3]+A))})),n.forEachChildren((B=>{B.name!==Ls&&(d==="middle"?B.setAttribute("y",i[0]+(L-B.AABBBounds.height())/2):d==="bottom"?B.setAttribute("y",i[0]+L-B.AABBBounds.height()):B.setAttribute("y",i[0]))})),n.setAttributes({width:R+i[1]+i[3],height:L+i[0]+i[2]})}function Yo(n,t,e,i,r,o,a){var s,l,h,u,d,c;if(!n)return;const f={};n.type==="image"?(n.isGif&&(f.gif=n.src),f.image=n.src):(n.type==="svg"||"svg"in n)&&(f.image=n.svg),f.width=n.width,f.height=n.height,f.visibleTime=(s=n.visibleTime)!==null&&s!==void 0?s:"always",f.funcType=n.funcType,f.interactive=n.interactive,f.isGif=n.isGif;let g,p=0;return a&&a?.addedHierarchyOffset!==0||!yt(e)||!yt(i)||!o||n.funcType!==Ye.collapse&&n.funcType!==Ye.expand&&n.positionType!==Ue.contentLeft&&n.positionType!==Ue.contentRight||(p=r?To(r.start.col,r.start.row,o):To(e,i,o),a&&(a.addedHierarchyOffset=1)),f.marginLeft=((l=n.marginLeft)!==null&&l!==void 0?l:0)+p,f.marginRight=(h=n.marginRight)!==null&&h!==void 0?h:0,n.interactive===!1&&(f.pickable=!1),n.hover&&(f.backgroundWidth=(u=n.hover.width)!==null&&u!==void 0?u:n.width,f.backgroundHeight=(d=n.hover.width)!==null&&d!==void 0?d:n.width,f.backgroundColor=(c=n.hover.bgColor)!==null&&c!==void 0?c:"rgba(22,44,66,0.2)",f.hoverImage=n.hover.image),n.cursor&&(f.cursor=n.cursor),"shape"in n&&n.shape==="circle"&&(f.shape=n.shape),t?(t.setAttributes(f),t.loadImage(f.image),t.tooltip=n.tooltip,t.name=n.name,t):(n.type==="text"?(f.text=n.content,oi(f,n.style),g=new Ylt(f),g.tooltip=n.tooltip,g.name=n.name):(g=new jf(f),g.tooltip=n.tooltip,g.name=n.name),g)}function OA(n){var t,e,i,r,o,a;const s={};return n.type==="image"?s.image=n.src:(n.type==="svg"||"svg"in n)&&(s.image=n.svg),s.visibleTime=(t=n.visibleTime)!==null&&t!==void 0?t:"always",s.funcType=n.funcType,s.id=n.name,s.width=n.width,s.height=n.height,(n.marginRight||n.marginLeft)&&(s.margin=[0,(e=n.marginRight)!==null&&e!==void 0?e:0,0,(i=n.marginLeft)!==null&&i!==void 0?i:0]),n.hover&&(s.backgroundWidth=(r=n.hover.width)!==null&&r!==void 0?r:n.width,s.backgroundHeight=(o=n.hover.height)!==null&&o!==void 0?o:n.height,s.backgroundShowMode="hover",s.hoverImage=n.hover.image,s.backgroundStroke=!1,s.backgroundFill=(a=n.hover.bgColor)!==null&&a!==void 0?a:"rgba(22,44,66,0.2)"),n.cursor&&(s.cursor=n.cursor),s.tooltip=n.tooltip,s}function HA(n,t,e,i,r,o,a,s,l){var h,u,d,c;Qc(n.contentWidth)&&(i=t-((h=n.contentWidth)!==null&&h!==void 0?h:n.attribute.width));let f,g=0,p=0,v=0,m=0;n.forEachChildren((C=>{var x,S,A,T;C.role==="icon-left"?(g+=C.AABBBounds.width()+((x=C.attribute.marginLeft)!==null&&x!==void 0?x:0)+((S=C.attribute.marginRight)!==null&&S!==void 0?S:0),p=Math.max(p,C.AABBBounds.height())):C.role==="icon-right"&&(v+=C.AABBBounds.width()+((A=C.attribute.marginLeft)!==null&&A!==void 0?A:0)+((T=C.attribute.marginRight)!==null&&T!==void 0?T:0),m=Math.max(m,C.AABBBounds.height()))}));const y=n.getChildByName("text"),b=n.getChildByName("content");let _;y instanceof tn?(f=y.AABBBounds.height(),y.setAttribute("maxLineWidth",t-g-v-(o[1]+o[3])-((u=y.attribute.dx)!==null&&u!==void 0?u:0)-((d=l.table.theme._contentOffset)!==null&&d!==void 0?d:0)),_=y.AABBBounds.height()):y instanceof Fi?(f=y.AABBBounds.height(),y.setAttribute("width",t-g-v-(o[1]+o[3])),_=y.AABBBounds.height()):b&&(f=b.AABBBounds.height(),b.updateWidth(t-g-v-(o[1]+o[3])),_=b.AABBBounds.height());const w=Math.round(Math.max(p,m,f)+o[0]+o[2]);if(n.forEachChildren((C=>{var x;if(C.role!=="icon-left")if(C.role==="icon-right")C.setAttribute("x",C.attribute.x+i);else if(C.role==="icon-absolute-right")C.setAttribute("x",C.attribute.x+i);else if(C.name==="content"||C.name==="text"&&C.type!=="richtext"){const S=(x=C.attribute.textAlign)!==null&&x!==void 0?x:a;S==="center"?C.setAttribute("x",o[3]+g+(t-(o[1]+o[3])-g-v)/2):S==="right"&&C.setAttribute("x",o[3]+t-(o[1]+o[3])-v)}else C.name==="mark"&&C.setAttribute("x",n.attribute.width)})),r){let C=Math.max(p,_,m);if(qKt(l,n,Math.round(C+o[0]+o[2]),w))return!0;C=((c=n.contentHeight)!==null&&c!==void 0?c:e)-(o[0]+o[2]),n.forEachChildren((x=>{x.type!=="rect"&&x.type!=="chart"&&x.name!==Ls&&(x.name==="mark"?x.setAttribute("y",0):s==="middle"?x.setAttribute("y",o[0]+(C-x.AABBBounds.height())/2):s==="bottom"?x.setAttribute("y",o[0]+C-x.AABBBounds.height()):x.setAttribute("y",o[0]))}))}else s!=="middle"&&s!=="bottom"||n.forEachChildren((C=>{C.type!=="rect"&&C.type!=="chart"&&C.name!==Ls&&(C.name==="mark"?C.setAttribute("y",0):s==="middle"?C.setAttribute("y",(e-o[2]+o[0]-C.AABBBounds.height())/2):s==="bottom"?C.setAttribute("y",e-C.AABBBounds.height()-o[2]):C.setAttribute("y",o[0]))}));return!1}function zA(n,t,e,i,r,o,a,s){var l;const h=t-Math.floor(r[0]+r[2]),u=n.getChildByName("text");u instanceof tn&&!i?u.setAttributes({heightLimit:((l=s.options.customConfig)===null||l===void 0?void 0:l.limitContentHeight)===!1?-1:h}):u instanceof Fi&&!i?u.setAttributes({height:h}):n.getChildByName("content")&&n.getChildByName("content").updateHeight(h),n.forEachChildren((d=>{d.setAttribute("dy",0),d.type==="rect"||d.type==="chart"||d.name===Ls||(d.name==="mark"?d.setAttribute("y",0):a==="middle"?d.setAttribute("y",r[0]+(h-d.AABBBounds.height())/2):a==="bottom"?d.setAttribute("y",r[0]+h-d.AABBBounds.height()):d.setAttribute("y",r[0]))}))}function qKt(n,t,e,i){const r=n.table,o=un(r,t.col,t.row);if(o&&o.end.row-o.start.row){i/=o.end.row-o.start.row+1,e/=o.end.row-o.start.row+1;for(let a=o.start.row;a<=o.end.row;a++){const s=r.getRowHeight(a);if(s===i&&e!==s||e>s)return!0}}else{const a=r.getRowHeight(t.row);if(a===i&&e!==a||e>a)return!0}return!1}function um(n,t,e,i){const r=[],o=[],a=[],s=[],l=[],h=[],u=[],d=[];let c=0,f=0,g=0,p=0,v=0,m=0;return n.forEach((y=>{switch(y.positionType){case Ue.left:r.push(y);break;case Ue.right:o.push(y);break;case Ue.contentLeft:a.push(y);break;case Ue.contentRight:s.push(y);break;case Ue.absoluteRight:d.push(y);break;case Ue.inlineFront:l.push(y);break;case Ue.inlineEnd:h.push(y)}})),r.forEach((y=>{var b,_,w;const C=Yo(y,void 0,t.col,t.row,e,i);C.role="icon-left",C.name=y.name,C.setAttribute("x",c+((b=C.attribute.marginLeft)!==null&&b!==void 0?b:0)),c+=C.AABBBounds.width()+((_=C.attribute.marginLeft)!==null&&_!==void 0?_:0)+((w=C.attribute.marginRight)!==null&&w!==void 0?w:0),f=Math.max(f,C.AABBBounds.height()),t.appendChild(C)})),o.forEach((y=>{var b,_,w;const C=Yo(y,void 0,t.col,t.row,e,i);C.role="icon-right",C.name=y.name,C.setAttribute("x",g+((b=C.attribute.marginLeft)!==null&&b!==void 0?b:0)),g+=C.AABBBounds.width()+((_=C.attribute.marginLeft)!==null&&_!==void 0?_:0)+((w=C.attribute.marginRight)!==null&&w!==void 0?w:0),p=Math.max(p,C.AABBBounds.height()),t.appendChild(C)})),u.forEach((y=>{var b,_,w;const C=Yo(y,void 0,t.col,t.row,e,i);C.role="icon-absolute-left",C.name=y.name,C.setAttribute("x",v+((b=C.attribute.marginLeft)!==null&&b!==void 0?b:0)),v+=C.AABBBounds.width()+((_=C.attribute.marginLeft)!==null&&_!==void 0?_:0)+((w=C.attribute.marginRight)!==null&&w!==void 0?w:0),t.appendChild(C)})),d.forEach((y=>{var b,_,w;const C=Yo(y,void 0,t.col,t.row,e,i);C.role="icon-absolute-right",C.name=y.name,C.setAttribute("x",m+((b=C.attribute.marginLeft)!==null&&b!==void 0?b:0)),m+=C.AABBBounds.width()+((_=C.attribute.marginLeft)!==null&&_!==void 0?_:0)+((w=C.attribute.marginRight)!==null&&w!==void 0?w:0),t.appendChild(C)})),{leftIcons:r,rightIcons:o,contentLeftIcons:a,contentRightIcons:s,inlineFrontIcons:l,inlineEndIcons:h,absoluteLeftIcons:u,absoluteRightIcons:d,leftIconWidth:c,leftIconHeight:f,rightIconWidth:g,rightIconHeight:p,absoluteLeftIconWidth:v,absoluteRightIconWidth:m}}function KKt(n,t){if(n.hasOwnProperty("hoverIconId")){const e=this;if(e.skipMergeUpdate)return;const i=Uf(e);if(!i||!i.stage)return;const r=i.stage.table;e.skipAttributeUpdate=!0;const{mergeStartCol:o,mergeEndCol:a,mergeStartRow:s,mergeEndRow:l}=i;if(Y(o)&&Y(a)&&Y(s)&&Y(l)&&(o!==a||s!==l)){for(let h=o;h<=a;h++)for(let u=s;u<=l;u++){if(h===i.col&&u===i.row){if(n.hoverIconId!==e.attribute.hoverIconId){const c=e._frameCache.icons.get(n.hoverIconId);e.updateHoverIconState(c)}continue}const d=r.scenegraph.highPerformanceGetCell(h,u);if(d.role==="cell"){const c=d.getChildByName(e.name,!0);if(!c||c.skipAttributeUpdate)continue;n.hoverIconId!==c.attribute.hoverIconId&&(c.setAttribute("hoverIconId",n.hoverIconId),d.addUpdateBoundTag())}}e.skipAttributeUpdate=void 0}}}function ZKt(n,t,e,i,r,o,a,s,l,h,u,d,c,f,g,p,v){var m,y,b,_,w,C,x,S,A,T,M,R,L,B,P,k,E,D,I,O,H,F,N,$,V,X,Z,tt,K,rt;const q=f._getCellStyle(i,r),it=w2("padding",q,i,r,f);!((m=f.options.customConfig)===null||m===void 0)&&m.imageMargin?h=Se((y=f.options.customConfig)===null||y===void 0?void 0:y.imageMargin):Y(it)&&(h=it),!((b=g?.text)===null||b===void 0)&&b.textAlign&&(u=(_=g?.text)===null||_===void 0?void 0:_.textAlign),!((w=g?.text)===null||w===void 0)&&w.textBaseline&&(d=(C=g?.text)===null||C===void 0?void 0:C.textBaseline);const nt=Nl(i,r,g,f);let W,G;if(v&&(W=f.scenegraph.highPerformanceGetCell(i,r,!0),W&&W.role==="cell"&&W.setAttributes({x:t,y:e,width:o,height:a,lineWidth:(S=(x=g?.group)===null||x===void 0?void 0:x.lineWidth)!==null&&S!==void 0?S:void 0,fill:(T=(A=g?.group)===null||A===void 0?void 0:A.fill)!==null&&T!==void 0?T:void 0,stroke:(R=(M=g?.group)===null||M===void 0?void 0:M.stroke)!==null&&R!==void 0?R:void 0,strokeArrayWidth:nt??void 0,strokeArrayColor:(B=(L=g?.group)===null||L===void 0?void 0:L.strokeArrayColor)!==null&&B!==void 0?B:void 0,cursor:(k=(P=g?.group)===null||P===void 0?void 0:P.cursor)!==null&&k!==void 0?k:void 0,lineDash:(D=(E=g?.group)===null||E===void 0?void 0:E.lineDash)!==null&&D!==void 0?D:void 0,lineCap:"butt",clip:!0,cornerRadius:g.group.cornerRadius})),W&&W.role==="cell"||(W=new ve({x:t,y:e,width:o,height:a,lineWidth:(O=(I=g?.group)===null||I===void 0?void 0:I.lineWidth)!==null&&O!==void 0?O:void 0,fill:(F=(H=g?.group)===null||H===void 0?void 0:H.fill)!==null&&F!==void 0?F:void 0,stroke:($=(N=g?.group)===null||N===void 0?void 0:N.stroke)!==null&&$!==void 0?$:void 0,strokeArrayWidth:nt??void 0,strokeArrayColor:(X=(V=g?.group)===null||V===void 0?void 0:V.strokeArrayColor)!==null&&X!==void 0?X:void 0,cursor:(tt=(Z=g?.group)===null||Z===void 0?void 0:Z.cursor)!==null&&tt!==void 0?tt:void 0,lineDash:(rt=(K=g?.group)===null||K===void 0?void 0:K.lineDash)!==null&&rt!==void 0?rt:void 0,lineCap:"butt",clip:!0,cornerRadius:g.group.cornerRadius}),W.role="cell",W.col=i,W.row=r,n?.addCellGroup(W)),c){let lt=i,ft=r;p&&(lt=p.start.col,ft=p.start.row),G=f.getCellIcons(lt,ft)}let j=0,U=0,J=0;if(Array.isArray(G)&&G.length!==0){const{leftIconWidth:lt,rightIconWidth:ft,absoluteRightIconWidth:vt}=um(G,W,p,f);j=lt+ft,U=lt,J=ft,W.forEachChildren((pt=>{pt.role==="icon-left"?pt.setAttribute("x",pt.attribute.x+h[3]):pt.role==="icon-right"?pt.setAttribute("x",pt.attribute.x+o-ft-h[1]):pt.role==="icon-absolute-right"&&pt.setAttribute("x",pt.attribute.x+o-vt-h[1])})),W.forEachChildren((pt=>{d==="middle"?pt.setAttribute("y",(a-pt.AABBBounds.height())/2):d==="bottom"?pt.setAttribute("y",a-pt.AABBBounds.height()-h[2]):pt.setAttribute("y",h[0])})),W._cellLeftIconWidth=U,W._cellRightIconWidth=J}const ot=f.getCellValue(i,r),st=JM({x:h[3],y:h[0],width:o-h[1]-h[3]-j,height:a-h[0]-h[2],image:ot,cursor:"pointer"});return st.name="image",st.keepAspectRatio=s,st.textAlign=u,st.textBaseline=d,s||l?st.resources&&st.resources.has(st.attribute.image)&&st.resources.get(st.attribute.image).state==="success"?(st.setAttribute("opacity",0),setTimeout((()=>{st.setAttribute("opacity",1),aX(l,s,h,u,d,st,W,f),f.scenegraph.updateNextFrame()}),0)):st.successCallback=()=>{aX(l,s,h,u,d,st,W,f),f.scenegraph.updateNextFrame()}:st.resources&&st.resources.has(st.attribute.image)&&st.resources.get(st.attribute.image).state==="success"?Yb(W,i,r,0,0,f):st.successCallback=()=>{Yb(W,i,r,0,0,f)},st.failCallback=()=>{const lt=ia();st.image=lt.damage_pic.svg},W.appendChild(st),W}function Zlt(n,t,e,i,r,o,a){let s=!1,l=null,h=null;const{width:u,height:d,isMerge:c}=Ev(a,r.table);if(u<e+o[1]+o[3]&&(l=e+o[1]+o[3],s=!0),d<i+o[2]+o[0]&&(h=i+o[2]+o[0],s=!0),s){if(typeof l=="number")if(c)for(let f=a.mergeStartCol;f<=a.mergeEndCol;f++)r.setColWidth(f,l/(a.mergeEndCol-a.mergeStartCol+1));else r.setColWidth(n,l);if(typeof h=="number")if(c)for(let f=a.mergeStartRow;f<=a.mergeEndRow;f++)r.setRowHeight(f,h/(a.mergeEndRow-a.mergeStartRow+1));else r.setRowHeight(t,h);return r.component.updateScrollBar(),!0}return!1}function Yb(n,t,e,i,r,o){var a,s,l,h,u,d,c,f,g,p,v,m;const y=n.getChildByName("image");if(!y)return;const b=typeof y.attribute.image!="string"&&y.attribute.image||((a=y.resources)===null||a===void 0?void 0:a.get(y.attribute.image).data);if(!b)return;const _=o._getCellStyle(t,e),w=(s=gt("textAlign",_,t,e,o))!==null&&s!==void 0?s:"left",C=(l=gt("textBaseline",_,t,e,o))!==null&&l!==void 0?l:"middle";let x;x=!((h=o.options.customConfig)===null||h===void 0)&&h.imageMargin?Se((u=o.options.customConfig)===null||u===void 0?void 0:u.imageMargin):(d=Se(gt("padding",_,t,e,o)))!==null&&d!==void 0?d:[0,0,0,0];const{width:S,height:A,isMerge:T}=Ev(n,o),M=(c=n.mergeStartCol)!==null&&c!==void 0?c:n.col,R=(f=n.mergeStartRow)!==null&&f!==void 0?f:n.row,L=(g=n.mergeEndCol)!==null&&g!==void 0?g:n.col,B=(p=n.mergeEndCol)!==null&&p!==void 0?p:n.row,P=(v=n._cellLeftIconWidth)!==null&&v!==void 0?v:0,k=(m=n._cellRightIconWidth)!==null&&m!==void 0?m:0;if(y.keepAspectRatio){const{width:E,height:D}=C2(b.width||b.videoWidth,b.height||b.videoHeight,S-(x[1]+x[3]),A-(x[0]+x[2])),I=dN(0,0,S,A,E,D,w,C,x);for(let O=M;O<=L;O++)for(let H=R;H<=B;H++){const F=o.scenegraph.getCell(O,H).getChildByName("image");F?.setAttributes({x:I.x,y:I.y,width:E,height:D})}}else for(let E=M;E<=L;E++)for(let D=R;D<=B;D++){const I=o.scenegraph.getCell(E,D).getChildByName("image");I?.setAttributes({x:P+x[3],y:x[0],width:S-x[1]-x[3]-k-P,height:A-x[0]-x[2]})}if(n.getChildByName("play-icon")){const{width:I,height:O}=Ev(n,o),H=Math.floor(Math.min(I-x[1]-x[3],O-x[2]-x[0])/2),F=0+(I>y.attribute.width?y.attribute.x-0+y.attribute.width/2:I/2),N=0+(O>y.attribute.height?y.attribute.y-0+y.attribute.height/2:O/2);for(let $=M;$<=L;$++)for(let V=R;V<=B;V++)o.scenegraph.getCell($,V).getChildByName("play-icon").setAttributes({x:F-H/2,y:N-H/2,width:H,height:H})}n.forEachChildren((E=>{E.role==="icon-left"||(E.role==="icon-right"||E.role==="icon-absolute-right")&&E.setAttribute("x",E.attribute.x+i)})),n.forEachChildren((E=>{(E.type==="rect"||E.role&&E.role.startsWith("icon"))&&(C==="middle"?E.setAttribute("y",x[0]+(A-x[0]-x[2]-E.AABBBounds.height())/2):C==="bottom"?E.setAttribute("y",x[0]+A-x[0]-x[2]-E.AABBBounds.height()):E.setAttribute("y",x[0]))})),T&&cN(n.mergeStartCol,n.mergeEndCol,n.mergeStartRow,n.mergeEndRow,o)}function Ev(n,t){return n.role==="cell"&&Y(n.mergeStartCol)&&Y(n.mergeEndCol)&&Y(n.mergeStartRow)&&Y(n.mergeEndRow)?{width:t.getColsWidth(n.mergeStartCol,n.mergeEndCol),height:t.getRowsHeight(n.mergeStartRow,n.mergeEndRow),isMerge:!0}:{width:n.attribute.width,height:n.attribute.height,isMerge:!1}}function cN(n,t,e,i,r){for(let o=n;o<=t;o++)for(let a=e;a<=i;a++){const s=r.scenegraph.getCell(o,a);if(s){const l=s.getChildByName("image");l&&l.setAttributes({dx:-r.getColsWidth(s.mergeStartCol,o-1),dy:-r.getRowsHeight(s.mergeStartRow,a-1)});const h=s.getChildByName("play-icon");h&&h.setAttributes({dx:-r.getColsWidth(s.mergeStartCol,o-1),dy:-r.getRowsHeight(s.mergeStartRow,a-1)})}}}function aX(n,t,e,i,r,o,a,s){const l=o.resources.get(o.attribute.image).data,{col:h,row:u}=a;if(n&&!sX(o)&&Zlt(h,u,l.width,l.height,s.scenegraph,e,a),t||sX(o)){const{width:d,height:c,isMerge:f}=Ev(a,s),{width:g,height:p}=C2(l.width,l.height,d-e[1]-e[3],c-e[0]-e[2]),v=dN(0,0,d,c,g,p,i,r,e);o.setAttributes({x:v.x,y:v.y,width:g,height:p}),f&&cN(a.mergeStartCol,a.mergeEndCol,a.mergeStartRow,a.mergeEndRow,s)}}function sX(n){const t=ia();return n.attribute.image===t.damage_pic.svg}function Jlt(n,t,e){n.then((()=>{e(),t.scenegraph.updateNextFrame()})).catch((i=>{}))}function JKt(n,t){var e,i;const r=this;if(r.shadowRoot&&r.shadowRoot.childrenCount&&(Y(n.width)||Y(n.height))){const o=r.shadowRoot.findChildrenByName("shadow-rect")[0];o&&o.setAttributes({width:(e=n.width)!==null&&e!==void 0?e:o.attribute.width,height:(i=n.height)!==null&&i!==void 0?i:o.attribute.height})}}function fN(n,t,e,i,r,o,a,s,l,h,u,d,c,f,g,p,v,m){var y,b;let _,w=!1;if(Hs(t)){if(i.scenegraph.highPerformanceGetCell(r,o).role!=="cell")return _;t=i.getCellValue(r,o),w=!0}if(n==="checkbox"&&e.tree)_=It.getFunction("createCheckboxCellGroup")(null,h,0,u,r,o,a,s,l,d,c,f,g,i,p,e,v,w,!0);else if(n==="text"||n==="link"||m){if(n==="link"){const A=t,T=i.getCellOriginValue(r,o),M=i._getCellStyle(r,o);n==="link"&&("templateLink"in e&&e.templateLink||!("linkDetect"in e)||!Je(e.linkDetect,{col:r,row:o,table:i,value:A,dataValue:T,cellHeaderPaths:void 0})||eN.test(A))&&(p?(p.text.fill=gt("linkColor",M,r,o,i),p.group.cursor="pointer"):p={text:{fill:gt("linkColor",M,r,o,i)},group:{cursor:"pointer"}})}const{customElementsGroup:C,renderDefault:x}=lX(i,e,r,o,s,l,d,v,m);_=It.getFunction("createTextCellGroup")(i,t,h,0,u,r,o,a,s,l,d,c,f,g,C,x,p,v,w);const S=i.internalProps.layoutMap.getAxisConfigInPivotChart(r,o);if(S){const A=new(It.getComponent("axis"))(S,_.attribute.width,_.attribute.height,(y=S.__vtablePadding)!==null&&y!==void 0?y:d,i);_.clear(),_.appendChild(A.component),A.overlap()}else i.internalProps.layoutMap.isEmpty(r,o)?(_.setAttributes({fill:!1,stroke:!1}),_.clear()):i.internalProps.layoutMap.isAxisCell(r,o)&&_.clear()}else if(n==="image")_=It.getFunction("createImageCellGroup")(h,0,u,r,o,s,l,e.keepAspectRatio,e.imageAutoSizing,d,c,f,g,i,p,v,w);else if(n==="video")_=It.getFunction("createVideoCellGroup")(h,0,u,r,o,s,l,e.keepAspectRatio,e.imageAutoSizing,d,c,f,g,i,p,v,w);else if(n==="chart"){const C=i.internalProps.layoutMap.getChartInstance(r,o);_=It.getFunction("createChartCellGroup")(null,h,0,u,r,o,s,l,d,t,e.chartModule,i.internalProps.layoutMap.getChartSpec(r,o),C,(b=i.internalProps.layoutMap.getChartDataId(r,o))!==null&&b!==void 0?b:"data",i,p,i.internalProps.layoutMap.isShareChartSpec(r,o),w,i.internalProps.layoutMap.isNoChartDataRenderNothing(r,o))}else if(n==="progressbar"){const{customElementsGroup:C,renderDefault:x}=lX(i,e,r,o,s,l,d,v,m),S=i._getCellStyle(r,o),A=i.getCellOriginValue(r,o);_=It.getFunction("createTextCellGroup")(i,t,h,0,u,r,o,a,s,l,d,c,f,g,C,x,p,v,w);const T=It.getFunction("createProgressBarCell")(e,S,a,t,A,r,o,d,i,v);_.firstChild?_.insertBefore(T,_.firstChild):_.appendChild(T)}else if(n==="sparkline")_=It.getFunction("createSparkLineCellGroup")(null,h,0,u,r,o,s,l,d,i,p,w);else if(n==="checkbox"){const C="isAggregation"in i.internalProps.layoutMap&&i.internalProps.layoutMap.isAggregation(r,o),x=i.internalProps.layoutMap.isSeriesNumber(r,o);C&&x?_=It.getFunction("createTextCellGroup")(i,t,h,0,u,r,o,a,s,l,d,c,f,!1,void 0,!0,p,v,w):_=It.getFunction("createCheckboxCellGroup")(null,h,0,u,r,o,a,s,l,d,c,f,g,i,p,e,v,w,!1)}else n==="radio"?_=It.getFunction("createRadioCellGroup")(null,h,0,u,r,o,a,s,l,d,c,f,i,p,e,v):n==="switch"?_=It.getFunction("createSwitchCellGroup")(null,h,0,u,r,o,a,s,l,d,c,f,g,i,p,e,v,w):n==="button"&&(_=It.getFunction("createButtonCellGroup")(null,h,0,u,r,o,a,s,l,d,c,f,g,i,p,e,v,w));return _.onBeforeAttributeUpdate=JKt,_}function lX(n,t,e,i,r,o,a,s,l){let h,u=!0;if(l)h=l.elementsGroup,u=l.renderDefault;else if(!(s?.isCustom&&!n.isCornerHeader(e,i))){let d,c;if(n.getCellLocation(e,i)!=="body"?(d=t?.headerCustomRender,c=t?.headerCustomLayout):(d=t?.customRender||n.customRender,c=t?.customLayout),c||d){const f=pd(c,d,e,i,r,o,!1,n.isAutoRowHeight(i),a,s,n);h=f.elementsGroup,u=f.renderDefault}}return{customElementsGroup:h,renderDefault:u}}function Na(n,t,e,i,r,o){var a,s,l,h,u,d,c,f,g,p,v,m,y,b,_,w,C,x;const S=e.scenegraph.highPerformanceGetCell(n,t,!0);if(S.role!=="cell"&&!i)return;const A=e.getCellLocation(n,t);let T,M,R,L,B=e.getCellValue(n,t),P=!1;if(e.internalProps.customMergeCell){const q=e.getCustomMerge(n,t);if(q){const{range:it,text:nt,style:W,customLayout:G,customRender:j}=q;M=it,T=M.start.col!==M.end.col||M.start.row!==M.end.row,B=nt,R=W,(G||j)&&(L=pd(G,j,it.start.col,it.start.row,e.getColsWidth(it.start.col,it.end.col),e.getRowsHeight(it.start.row,it.end.row),!1,e.isAutoRowHeight(t),[0,0,0,0],M,e)),P=!0}}let k=n,E=t;M&&(k=M.start.col,E=M.start.row);const D=A!=="body"?e.getHeaderDefine(k,E):e.getBodyColumnDefine(k,E);let I=A!=="body"||D?.dragOrder||!!D?.icon||!!D?.tree;M||!e.internalProps.enableTreeNodeMerge&&A==="body"&&!D?.mergeCell||(M=e.getCellRange(n,t),T=M.start.col!==M.end.col||M.start.row!==M.end.row);let O=!1;if(e.internalProps.enableTreeNodeMerge&&T){const q=e.getCellRawRecord(M.start.col,M.start.row),{vtableMergeName:it,vtableMerge:nt}=q??{};O=nt,nt&&(I=!0,e.internalProps.groupTitleCustomLayout&&(L=pd(e.internalProps.groupTitleCustomLayout,void 0,M.start.col,M.start.row,e.getColsWidth(M.start.col,M.end.col),e.getRowsHeight(M.start.row,M.end.row),!1,e.isAutoRowHeight(t),[0,0,0,0],M,e)),e.internalProps.groupTitleFieldFormat?B=e.internalProps.groupTitleFieldFormat(q,n,t,e):it!==void 0&&(B=it))}const H=R||e._getCellStyle(M?M.start.col:n,M?M.start.row:t),F=(a=H.autoWrapText)!==null&&a!==void 0?a:e.internalProps.autoWrapText,N=Sd(H,e,T?M.start.col:n,T?M.start.row:t,gt).theme;if(N.group.cornerRadius=b2(n,t,e),!i&&!T&&!(D?.customLayout||D?.customRender||D?.headerCustomLayout||D?.headerCustomRender)&&(o||QKt(n,t,S,F,I,e))){const q=e.getColWidth(n),it=e.getRowHeight(t),nt=Nl(n,t,N,e);S.setAttributes({width:q,height:it,lineWidth:(l=(s=N?.group)===null||s===void 0?void 0:s.lineWidth)!==null&&l!==void 0?l:void 0,fill:(u=(h=N?.group)===null||h===void 0?void 0:h.fill)!==null&&u!==void 0?u:void 0,stroke:(c=(d=N?.group)===null||d===void 0?void 0:d.stroke)!==null&&c!==void 0?c:void 0,strokeArrayWidth:nt??void 0,strokeArrayColor:(g=(f=N?.group)===null||f===void 0?void 0:f.strokeArrayColor)!==null&&g!==void 0?g:void 0,cursor:(v=(p=N?.group)===null||p===void 0?void 0:p.cursor)!==null&&v!==void 0?v:void 0,cornerRadius:(y=(m=N?.group)===null||m===void 0?void 0:m.cornerRadius)!==null&&y!==void 0?y:0,lineDash:(_=(b=N?.group)===null||b===void 0?void 0:b.lineDash)!==null&&_!==void 0?_:void 0,y:e.scenegraph.getCellGroupY(t)}),S.mergeStartCol=void 0,S.mergeStartRow=void 0,S.mergeEndCol=void 0,S.mergeEndRow=void 0,S.forEachChildren((G=>{G.setAttributes({dx:0,dy:0})}));const W=S.getChildByName("text");if(o&&W){const G=N.text.textAlign,j=To(n,t,e),U={textBaseline:"top",dx:G==="left"?j:0};W.setAttributes(N.text?Object.assign({},N.text,U):U)}else if(W){const G=e.getCellValue(n,t),{text:j,moreThanMaxCharacters:U}=Ub(G,e),J=To(n,t,e),ot=H.lineClamp,st=(w=Se(gt("padding",H,n,t,e)))!==null&&w!==void 0?w:[0,0,0,0],lt=N.text.textAlign;let ft=0;ft=lt==="center"?st[3]+(q-(st[1]+st[3]))/2:lt==="right"?st[3]+q-(st[1]+st[3]):st[3];const vt={text:j.length!==1||F?j:j[0],moreThanMaxCharacters:U,maxLineWidth:q-(st[1]+st[3]+J),textBaseline:"top",autoWrapText:F,lineClamp:ot,wordBreak:"break-word",heightLimit:it-Math.floor(st[0]+st[2]),pickable:!1,dx:lt==="left"?J:0,x:ft};if(W.setAttributes(N.text?Object.assign({},N.text,vt):vt),W.attribute.text){const pt=N.text.textBaseline,bt=it-(st[0]+st[2]);let me=0;me=pt==="middle"?st[0]+(bt-W.AABBBounds.height())/2:pt==="bottom"?st[0]+bt-W.AABBBounds.height():st[0],W.setAttributes({y:me})}}return S}if(!i&&S.role==="empty")return;const $=O||P?"text":e.isHeader(n,t)?(C=e._getHeaderLayoutMap(n,t).headerType)!==null&&C!==void 0?C:"text":(x=e.getBodyColumnType(n,t))!==null&&x!==void 0?x:"text",V=N._vtable.padding,X=N.text.textAlign,Z=N.text.textBaseline;let tt,K,rt;if(M?(K=e.getColsWidth(M.start.col,M.end.col),rt=e.getRowsHeight(M.start.row,M.end.row)):(K=e.getColWidth(n),rt=e.getRowHeight(t)),Hs(B)?(S.removeAllChild(),Jlt(B,e,tZt.bind(null,{type:$,value:B,define:D,table:e,col:n,row:t,cellWidth:K,cellHeight:rt,oldCellGroup:S,padding:V,textAlign:X,textBaseline:Z,mayHaveIcon:I,addNew:i,range:M,customResult:L,customStyle:R}))):tt=Qlt($,B,D,e,n,t,K,rt,S,V,X,Z,I,i,N,M,L),T){const{width:q}=tt.attribute,{height:it}=tt.attribute;tt.contentWidth=q,tt.contentHeight=it,r?eZt(M,K,rt,V,X,Z,e,tt):tht(M,K,rt,V,X,Z,e)}return tt}function Qlt(n,t,e,i,r,o,a,s,l,h,u,d,c,f,g,p,v){var m,y;if(Hs(t)&&(t=i.getCellValue(r,o)),!f&&(l.row!==o||l.col!==r))return null;if(!f&&l.parent&&i.reactCustomLayout){const _=l.getChildByName("custom-container");if(_){const{col:w,row:C}=_;yt(w)&&yt(C)&&i.reactCustomLayout.removeCustomCell(w,C)}}const b=fN(n,t,e,i,r,o,i.getColWidth(r),a,s,f?i.scenegraph.getColGroup(r):l.parent,f?0:i.scenegraph.getCellGroupY(o),h,u,d,c,g,p,v);return!f&&l.parent&&(l.parent.insertAfter(b,l),l.parent.removeChild(l),l.release(!0),!((m=i.scenegraph)===null||m===void 0)&&m.proxy.cellCache.get(r)&&((y=i.scenegraph)===null||y===void 0||y.proxy.cellCache.set(r,b))),b}function QKt(n,t,e,i,r,o){var a;const s=o.getBodyColumnType(n,t),l=o.isAutoRowHeight(t),h=o.getCellValue(n,t);return!(o.isHeader(n,t)||e.role!=="cell"||s!=="text"||i||l||r||((a=e.firstChild)===null||a===void 0?void 0:a.type)!=="text"||Hs(h))}function tZt(n){const{type:t,value:e,define:i,table:r,col:o,row:a,cellWidth:s,cellHeight:l,oldCellGroup:h,padding:u,textAlign:d,textBaseline:c,mayHaveIcon:f,addNew:g,range:p,customResult:v,customStyle:m}=n,y=m||r._getCellStyle(p?p.start.col:o,p?p.start.row:a),b=Sd(y,r,p?p.start.col:o,p?p.start.row:a,gt).theme;b.group.cornerRadius=b2(o,a,r),Qlt(t,e,i,r,o,a,s,l,h,u,d,c,f,g,b,p,v)}function tht(n,t,e,i,r,o,a){for(let s=n.start.col;s<=n.end.col;s++)for(let l=n.start.row;l<=n.end.row;l++){const h=a.scenegraph.highPerformanceGetCell(s,l,!0);if(h.role!=="cell")continue;n.start.row!==n.end.row&&h.contentHeight!==e&&zA(h,e,e,a.isAutoRowHeight(l),i,r,o,a),n.start.col!==n.end.col&&h.contentWidth!==t&&HA(h,t,e,0,a.isAutoRowHeight(l),i,r,o,a.scenegraph),h.contentWidth=t,h.contentHeight=e;const u=a.getRowHeight(l);$_(h,a.getColWidth(s),u,n,a)}}function eZt(n,t,e,i,r,o,a,s){const{col:l,row:h}=s;n.start.row!==n.end.row&&s.contentHeight!==e&&zA(s,e,e,a.isAutoRowHeight(h),i,r,o,a),n.start.col!==n.end.col&&s.contentWidth!==t&&HA(s,t,e,0,a.isAutoRowHeight(h),i,r,o,a.scenegraph),s.contentWidth=t,s.contentHeight=e;const u=a.getRowHeight(h);$_(s,a.getColWidth(l),u,n,a)}function $_(n,t,e,i,r){var o,a;const{col:s,row:l}=n,h=-r.getColsWidth(i.start.col,s-1);let u=0;if(!((o=r.options.customConfig)===null||o===void 0)&&o._disableColumnAndRowSizeRound)for(let v=i.start.row;v<=l-1;v++)u-=r.getRowHeight(v);else u=-r.getRowsHeight(i.start.row,l-1);n.forEachChildren((v=>{var m,y,b,_,w,C;typeof v._dx=="number"?(v.skipMergeUpdate=!0,v.setAttributes({dx:((m=v._dx)!==null&&m!==void 0?m:0)+h}),v.skipMergeUpdate=!1):(v._dx=(y=v.attribute.dx)!==null&&y!==void 0?y:0,v.skipMergeUpdate=!0,v.setAttributes({dx:((b=v.attribute.dx)!==null&&b!==void 0?b:0)+h}),v.skipMergeUpdate=!1),typeof v._dy=="number"?(v.skipMergeUpdate=!0,v.setAttributes({dy:((_=v._dy)!==null&&_!==void 0?_:0)+u}),v.skipMergeUpdate=!1):(v._dy=(w=v.attribute.dy)!==null&&w!==void 0?w:0,v.skipMergeUpdate=!0,v.setAttributes({dy:((C=v.attribute.dy)!==null&&C!==void 0?C:0)+u}),v.skipMergeUpdate=!1)}));const d=(a=n.attribute.strokeArrayWidth)!==null&&a!==void 0?a:n.attribute.lineWidth,c=Rt(d),f=[0,0,0,0];s===i.start.col&&(f[3]=c?d[3]:d),l===i.start.row&&(f[0]=c?d[0]:d),s===i.end.col&&(f[1]=c?d[1]:d),l===i.end.row&&(f[2]=c?d[2]:d);const g=t!==n.attribute.width,p=e!==n.attribute.height;return n.skipMergeUpdate=!0,n.setAttributes({width:t,height:e,strokeArrayWidth:f}),n.skipMergeUpdate=!1,n.mergeStartCol=i.start.col,n.mergeStartRow=i.start.row,n.mergeEndCol=i.end.col,n.mergeEndRow=i.end.row,{widthChange:g,heightChange:p}}function FA(n,t,e,i){if(i.internalProps.customMergeCell){const r=i.getCustomMerge(n,t);if(r){const{range:o,text:a,style:s,customLayout:l,customRender:h}=r;if(l||h){const u=pd(l,h,o.start.col,o.start.row,i.getColsWidth(o.start.col,o.end.col),i.getRowsHeight(o.start.row,o.end.row),!1,i.isAutoRowHeight(t),[0,0,0,0],o,i).elementsGroup;e.childrenCount>0&&u?e.insertBefore(u,e.firstChild):u&&e.appendChild(u);const d=i.getRowHeight(t),c=i.getColWidth(n),{width:f}=e.attribute,{height:g}=e.attribute;return e.contentWidth=f,e.contentHeight=g,$_(e,c,d,o,i),o}}}}function qu(n){return!!(n.role==="cell"&&yt(n.mergeStartCol)&&yt(n.mergeStartRow)&&yt(n.mergeEndCol)&&yt(n.mergeEndRow))}const ML=new $h({}),wy=new Gf({}),iZt=new om({});function nZt(n,t,e,i,r,o,a,s,l,h,u,d,c,f,g){const p=Bn(n)?n.text:n,v=c2(p).split(`
`)||[],m=g.getColsWidth(t,i),y=gt("size",r,t,e,g);let b=0;if(o){const _=gt("spaceBetweenTextAndIcon",r,t,e,g),w=m-(f[1]+f[3])-a-y-_;ML.setAttributes({text:{maxLineWidth:w,text:v,fontSize:s,fontStyle:l,fontWeight:h,fontFamily:u,lineHeight:d,wordBreak:"break-word",lineClamp:c},icon:{width:Math.floor(y/1.4),height:Math.floor(y/1.4)},box:{width:y,height:y},spaceBetweenTextAndIcon:_}),ML.render(),b=ML.AABBBounds.height()}else b=Math.max(y,v.length*d);return b}function rZt(n,t,e,i,r,o,a,s,l,h,u,d,c,f,g){var p;if(Rt(n)){let v=0;const m=g.getBodyColumnDefine(t,e),y=gt("spaceBetweenRadio",r,t,e,g),b=(p=m?.radioDirectionInCell)!==null&&p!==void 0?p:"vertical";return b==="vertical"?n.forEach(((_,w)=>{const C=RL(_,t,e,i,r,o,a,s,l,h,u,d,c,f,g);v+=C,w!==n.length-1&&(v+=y)})):b==="horizontal"&&n.forEach((_=>{const w=RL(_,t,e,i,r,o,a,s,l,h,u,d,c,f,g);v=Math.max(w,v)})),v}return RL(n,t,e,i,r,o,a,s,l,h,u,d,c,f,g)}function RL(n,t,e,i,r,o,a,s,l,h,u,d,c,f,g){const p=Bn(n)?n.text:n,v=c2(p).split(`
`)||[],m=g.getColsWidth(t,i),y=gt("size",r,t,e,g);let b=gt("outerRadius",r,t,e,g);const _=yt(b)?2*b:y;let w=0;if(o){const C=gt("spaceBetweenTextAndIcon",r,t,e,g),x=m-(f[1]+f[3])-a-_-C;yt(b)||(b=Math.round(y/2)),wy.setAttributes({text:{maxLineWidth:x,text:v,fontSize:s,fontStyle:l,fontWeight:h,fontFamily:u,lineHeight:d,wordBreak:"break-word",lineClamp:c},circle:{outerRadius:b},spaceBetweenTextAndIcon:C}),wy.render(),w=wy.AABBBounds.height()}else w=Math.max(y,v.length*d);return w}function oZt(n,t,e,i,r,o,a,s,l,h,u,d,c,f,g){return gt("boxWidth",r,t,e,g)}function aZt(n,t,e,i,r,o,a,s,l,h,u,d,c,f,g){const p=Bn(n)?n.text:n,v=c2(p).split(`
`)||[],m=g.getColsWidth(t,i),y=gt("buttonPadding",r,t,e,g),b=gt("buttonLineWidth",r,t,e,g);let _=0;if(o){const w=m-(f[1]+f[3]);iZt.setAttributes({text:v,textStyle:{maxLineWidth:w,fontSize:s,fontStyle:l,fontWeight:h,fontFamily:u,lineHeight:d,wordBreak:"break-word",lineClamp:c},padding:y,panel:{visible:!0,fill:"red",stroke:"red",lineWidth:b}}),wy.render(),_=wy.AABBBounds.height()}else _=v.length*d+2*y;return _}let sZt="",iH="quick";const lZt=new ie(((n,t,e,i)=>{e(Mh)?i(Mh).to(uX).inSingletonScope():n(Mh).to(uX).inSingletonScope()}));new ie(((n,t,e,i)=>{e(Mh)?i(Mh).to(wv).inSingletonScope():n(Mh).to(wv).inSingletonScope()}));const hX=new Map;function nH(n,t,e,i="normal"){const r=`${n}-${t}-${e}-${i}`,o=hX.get(r);if(o)return o;const a=(s={fontSize:n,fontFamily:e,fontWeight:t,fontStyle:i},new Vo(Object.assign({defaultFontParams:{fontFamily:So.fontFamily,fontSize:So.fontSize},getTextBounds:QM,specialCharSet:`{}()//&-/: .,@%'"~=${Vo.ALPHABET_CHAR_SET}${Vo.ALPHABET_CHAR_SET.toUpperCase()}0123456789${sZt}`},{}),s));var s;return hX.set(r,a),a}class uX extends wv{_fastMeasure(t,e){const{fontSize:i,fontFamily:r="Arial,sans-serif",fontWeight:o="normal",fontStyle:a="normal"}=e,s=nH(i,o,r,a).measure(t,iH);if(!Y(s.fontBoundingBoxAscent)&&!Y(s.fontBoundingBoxDescent)){const{ascent:l,descent:h}=this.measureTextBoundADscentEstimate(e);s.fontBoundingBoxAscent=l,s.fontBoundingBoxDescent=h}return s}measureTextWidth(t,e){return this._fastMeasure(t,e).width}measureText(t,e){return this._fastMeasure(t,e)}_measureTextWithoutAlignBaseline(t,e,i){return this._fastMeasure(t,e)}_measureTextWithAlignBaseline(t,e,i){return this._fastMeasure(t,e)}}class hZt{measureText(t,e){const{fontSize:i,fontFamily:r="Arial,sans-serif",fontWeight:o="normal",fontStyle:a="normal"}=e;return nH(i,o,r,a).measure(t,iH)}measureTextWidth(t,e){const{fontSize:i,fontFamily:r="Arial,sans-serif",fontWeight:o="normal",fontStyle:a="normal"}=e;return nH(i,o,r,a).measure(t,iH).width}clipText(t,e,i){if(t.length===0)return{str:"",width:0};let r=this.measureTextWidth(t,e);return r<=i?{str:t,width:r}:(r=this.measureTextWidth(t[0],e),r>i?{str:"",width:0}:this._clipText(t,e,i,0,t.length-1))}_clipText(t,e,i,r,o){const a=Math.floor((r+o)/2),s=t.substring(0,a+1),l=this.measureTextWidth(s,e);let h;if(l>i){if(s.length<=1)return{str:"",width:0};const u=t.substring(0,a);return h=this.measureTextWidth(u,e),h<=i?{str:u,width:h}:this._clipText(t,e,i,r,a)}if(l<i){if(a>=t.length-1)return{str:t,width:this.measureTextWidth(t,e)};const u=t.substring(0,a+2);return h=this.measureTextWidth(u,e),h>=i?{str:s,width:l}:this._clipText(t,e,i,a,o)}return{str:s,width:l}}clipTextWithSuffix(t,e,i,r){if(r==="")return this.clipText(t,e,i);if(t.length===0)return{str:"",width:0};const o=this.measureTextWidth(t,e);if(o<=i)return{str:t,width:o};const a=this.measureTextWidth(r,e);if(a>i)return{str:"",width:0};i-=a;const s=this._clipText(t,e,i,0,t.length-1);return s.str+=r,s.width+=a,s}}const gN=new hZt,dX=new tn({ignoreBuf:!0});function eht(n){return dX.initAttributes(Object.assign(Object.assign({},n),{ignoreBuf:!0})),dX.AABBBounds}const cX=new Fi({width:0,height:0,textConfig:[]});function Wa(n,t,e,i=!0,r){var o,a,s,l,h,u,d,c,f,g,p;typeof window<"u"&&window.performance.now();const v=[],m=[];if(r)for(let C=t;C<=e;C++)v[C]=n.getRowHeight(C);const y=n.internalProps.layoutMap;n.isPivotTable()&&(y.enableUseGetBodyCache(),y.enableUseHeaderPathCache()),n.defaultHeaderRowHeight,n.defaultHeaderColWidth;const b=n.defaultHeaderRowHeight==="auto"||Rt(n.defaultHeaderRowHeight)&&n.defaultHeaderRowHeight.some((C=>C==="auto")),_=n.isAutoRowHeight(t)||n.heightMode==="adaptive"&&n.options.autoHeightInAdaptiveMode!==!1,w=n.options.defaultRowHeight==="auto";if(_||b||w){t=t??0,e=e??n.rowCount-1,(t===0&&e===n.rowCount-1||i)&&n._clearRowRangeHeightsMap();for(let C=t;C<n.columnHeaderLevelCount;C++){let x=0,S=n.colCount-1;if((n.isPivotTable()&&!n.isPivotChart()||n.isPivotChart()&&!n.internalProps.layoutMap.indicatorsAsCol)&&cZt(n,C)&&!un(n,n.rowHeaderLevelCount,C)&&(x=0,S=n.rowHeaderLevelCount),_||n.getDefaultRowHeight(C)==="auto"){const A=Ra(C,x,S,n);m[C]=Math.round(A),n.heightAdaptiveMode!=="only-body"&&r||n._setRowHeight(C,A)}}for(let C=n.rowCount-n.bottomFrozenRowCount;C<=e;C++)if(_||n.getDefaultRowHeight(C)==="auto"){const x=Ra(C,0,n.colCount-1,n);r?m[C]=Math.round(x):n._setRowHeight(C,x)}if(!(e<n.columnHeaderLevelCount||!_&&!w))if(n.internalProps.transpose||n.isPivotTable()&&!n.internalProps.layoutMap.indicatorsAsCol||n.options.customComputeRowHeight||!uZt(n,t))if(n.internalProps.transpose||n.isPivotTable()&&!n.internalProps.layoutMap.indicatorsAsCol)for(let C=Math.max(t,n.columnHeaderLevelCount);C<=e;C++){let x;x=dZt(n,C)?Ra(C,0,n.rowHeaderLevelCount,n):Ra(C,0,n.colCount-1,n),r?m[C]=Math.round(x):n._setRowHeight(C,x)}else for(let C=Math.max(t,n.columnHeaderLevelCount);C<=e;C++){const x=Ra(C,0,n.colCount-1,n);r?m[C]=Math.round(x):n._setRowHeight(C,x)}else{fZt(Ra(n.columnHeaderLevelCount,0,n.colCount-1,n),n.columnHeaderLevelCount,n.rowCount-1-n.bottomFrozenRowCount,n,r?m:void 0);for(let C=n.rowCount-n.bottomFrozenRowCount;C<=e;C++){const x=Ra(C,0,n.colCount-1,n);r?m[C]=Math.round(x):n._setRowHeight(C,x)}}}else if((n.heightMode==="adaptive"||n.autoFillHeight)&&n.clearRowHeightCache(),r)for(let C=t;C<=e;C++)m[C]=n.getRowHeight(C);if((t===0&&e===n.rowCount-1||i)&&n._clearRowRangeHeightsMap(),n.heightMode==="adaptive"){n._clearRowRangeHeightsMap();let C=n.tableNoFrameHeight,x=0,S=n.rowCount;if(n.heightAdaptiveMode==="only-body"){const M=n.getRowsHeight(0,n.columnHeaderLevelCount-1),R=n.isPivotChart()?n.getBottomFrozenRowsHeight():0;C=n.tableNoFrameHeight-M-R,x=n.columnHeaderLevelCount,S=n.isPivotChart()?n.rowCount-n.bottomFrozenRowCount:n.rowCount}let A=0;for(let M=x;M<S;M++)A+=r&&(o=m[M])!==null&&o!==void 0?o:n.getRowHeight(M);const T=C/A;for(let M=x;M<S;M++){let R;R=M===S-1?C-(r?m.reduce(((L,B,P)=>P>=x&&P<=S-2?L+B:L),0):n.getRowsHeight(x,S-2)):Math.round((r&&(a=m[M])!==null&&a!==void 0?a:n.getRowHeight(M))*T),r?m[M]=R:n._setRowHeight(M,R,!1)}}else if(n.autoFillHeight){n._clearRowRangeHeightsMap();const C=n.tableNoFrameHeight;let x=0,S=0;for(let A=0;A<n.rowCount;A++){const T=r&&(s=m[A])!==null&&s!==void 0?s:n.getRowHeight(A);(A<n.columnHeaderLevelCount||n.isPivotChart()&&A>=n.rowCount-n.bottomFrozenRowCount)&&(S+=T),x+=T}if(n.scenegraph._dealAutoFillHeightOriginRowsHeight=x,x<C&&x-S>0){const A=n.columnHeaderLevelCount,T=n.isPivotChart()?n.rowCount-n.bottomFrozenRowCount:n.rowCount,M=(C-S)/(x-S);for(let R=A;R<T;R++){let L;L=R===T-1?C-S-(r?m.reduce(((B,P,k)=>k>=A&&k<=T-2?B+P:B),0):n.getRowsHeight(A,T-2)):Math.round((r&&(l=m[R])!==null&&l!==void 0?l:n.getRowHeight(R))*M),r?m[R]=L:n._setRowHeight(R,L,!1)}}}if(r){for(let C=t;C<=e;C++){const x=(h=m[C])!==null&&h!==void 0?h:n.getRowHeight(C);Y(x)&&n._setRowHeight(C,x)}for(let C=0;C<=n.frozenRowCount-1;C++){const x=n.getRowHeight(C);x!==((u=v[C])!==null&&u!==void 0?u:n.getRowHeight(C))&&n.scenegraph.updateRowHeight(C,x-((d=v[C])!==null&&d!==void 0?d:n.getRowHeight(C)),!0)}for(let C=n.rowCount-n.bottomFrozenRowCount;C<=n.rowCount-1;C++){const x=n.getRowHeight(C);x!==((c=v[C])!==null&&c!==void 0?c:n.getRowHeight(C))&&n.scenegraph.updateRowHeight(C,x-((f=v[C])!==null&&f!==void 0?f:n.getRowHeight(C)),!0)}for(let C=n.scenegraph.proxy.rowStart;C<=n.scenegraph.proxy.rowEnd;C++){const x=n.getRowHeight(C);x!==((g=v[C])!==null&&g!==void 0?g:n.getRowHeight(C))&&n.scenegraph.updateRowHeight(C,x-((p=v[C])!==null&&p!==void 0?p:n.getRowHeight(C)),!0)}}n.isPivotTable()&&(y.disableUseGetBodyCache(),y.disableUseHeaderPathCache())}function Ra(n,t,e,i){var r;if(!(i.isAutoRowHeight(n)||i.heightMode==="adaptive"&&i.options.autoHeightInAdaptiveMode!==!1)&&i.getDefaultRowHeight(n)!=="auto")return i.getDefaultRowHeight(n);let o;if(i.options.customComputeRowHeight){const s=i.options.customComputeRowHeight({row:n,table:i});if(typeof s=="number")return s;if(s!=="auto")return i.getDefaultRowHeight(n)}if(i.isPivotChart()&&n>=i.columnHeaderLevelCount&&n<i.rowCount-i.bottomFrozenRowCount)if(i.internalProps.layoutMap.indicatorsAsCol){const s=i.internalProps.layoutMap.getOptimunHeightForChart(n);if(s>0)return s}else{const s=i.getDefaultRowHeight(n);if(yt(s))return s}for(let s=t;s<=e;s++){const l=gZt(s,n,i);if(l&&(o=Y(o)?Math.max(l.height,o):l.height,!l.renderDefault))continue;if(i.isPivotChart()){const u=i.internalProps.layoutMap.getAxisConfigInPivotChart(s,n);if(u){const d=It.getFunction("computeAxisComponentHeight")(u,i);if(typeof d=="number"){o=Y(o)?Math.max(d,o):d;continue}}}if(i.isPivotChart()&&(i.isLeftFrozenColumn(s)&&i.isBottomFrozenRow(n)||i.isRightFrozenColumn(s)&&i.isBottomFrozenRow(n)))continue;const h=pZt(s,n,i.isHeader(s,n)?(r=i._getHeaderLayoutMap(s,n))===null||r===void 0?void 0:r.headerType:i.getBodyColumnType(s,n),i);o=Y(o)?Math.max(h,o):h}if(Y(o))return o;const a=i.getDefaultRowHeight(n);return yt(a)?a:i.defaultRowHeight}function uZt(n,t){var e,i,r;const{layoutMap:o}=n.internalProps,a=n.columnHeaderLevelCount;if((n.internalProps.autoWrapText||n.internalProps.enableLineBreak||n.isPivotChart())&&(n.isAutoRowHeight(t)||n.options.heightMode==="adaptive"))return!1;for(let s=0;s<n.colCount;s++){const l=o.getBody(s,a);if(l.cellType==="radio"||typeof l.style=="function"||typeof l.icon=="function"||!((e=l.define)===null||e===void 0)&&e.customRender||!((i=l.define)===null||i===void 0)&&i.customLayout||typeof((r=l.define)===null||r===void 0?void 0:r.icon)=="function")return!1;const h=n._getCellStyle(s,a);if(typeof h.padding=="function"||typeof h.fontSize=="function"||typeof h.lineHeight=="function"||h.autoWrapText===!0)return!1}return!0}function dZt(n,t){var e,i,r;const{layoutMap:o}=n.internalProps;if((n.internalProps.autoWrapText||n.internalProps.enableLineBreak)&&(n.isAutoRowHeight(t)||n.options.heightMode==="adaptive"))return!1;const a=o.getBody(n.rowHeaderLevelCount,t);if(typeof a.style=="function"||typeof a.icon=="function"||!((e=a.define)===null||e===void 0)&&e.customRender||!((i=a.define)===null||i===void 0)&&i.customLayout||typeof((r=a.define)===null||r===void 0?void 0:r.icon)=="function")return!1;const s=n._getCellStyle(n.rowHeaderLevelCount,t);return typeof s.padding!="function"&&typeof s.fontSize!="function"&&typeof s.lineHeight!="function"&&s.autoWrapText!==!0}function cZt(n,t){var e,i,r;const{layoutMap:o}=n.internalProps;if(n.internalProps.autoWrapText&&(n.isAutoRowHeight(t)||n.options.heightMode==="adaptive"))return!1;const a=o.getHeader(n.rowHeaderLevelCount,t);if(typeof a.style=="function"||typeof a.icons=="function"||!((e=a.define)===null||e===void 0)&&e.headerCustomRender||!((i=a.define)===null||i===void 0)&&i.headerCustomLayout||typeof((r=a.define)===null||r===void 0?void 0:r.icon)=="function")return!1;const s=n._getCellStyle(n.rowHeaderLevelCount,t);return typeof s.padding!="function"&&typeof s.fontSize!="function"&&typeof s.lineHeight!="function"&&s.autoWrapText!==!0}function fZt(n,t,e,i,r){if(!i.internalProps.useOneRowHeightFillAll){for(let o=t;o<=e;o++)r?r[o]=n:i._setRowHeight(o,n);i.internalProps.useOneRowHeightFillAll=!0}}function gZt(n,t,e){var i,r,o,a,s,l,h;const u=e.getCustomRender(n,t);let d=e.getCustomLayout(n,t);if(u||d){let c,f=1,g=0,p=!1,v=!1;(e.isHeader(n,t)||!((i=e.getBodyColumnDefine(n,t))===null||i===void 0)&&i.mergeCell||e.hasCustomMerge())&&(c=e.getCellRange(n,t),f=c.end.row-c.start.row+1);const m={col:(r=c?.start.col)!==null&&r!==void 0?r:n,row:(o=c?.start.row)!==null&&o!==void 0?o:t,dataValue:e.getCellOriginValue(n,t),value:e.getCellValue(n,t)||"",rect:vZt(n,t,e),table:e,originCol:n,originRow:t,forComputation:!0};if(d==="react-custom-layout"&&(d=((a=e.reactCustomLayout)===null||a===void 0?void 0:a.getCustomLayoutFunc(n,t))||$b),ra(d)){const y=d(m);y.rootContainer?(y.rootContainer=jb(y.rootContainer),_2(y.rootContainer,e.getColWidth(n),0),y.rootContainer.setStage(e.scenegraph.stage),g=(s=y.rootContainer.AABBBounds.height())!==null&&s!==void 0?s:0,p=y.renderDefault,v=y.enableCellPadding):(g=0,p=y.renderDefault,v=y.enableCellPadding)}else if(typeof u=="function"){const y=u(m);g=(l=y?.expectedHeight)!==null&&l!==void 0?l:0,p=y?.renderDefault}else g=(h=u?.expectedHeight)!==null&&h!==void 0?h:0,p=u?.renderDefault;if(v){const y=e._getCellStyle(n,t),b=Se(gt("padding",y,n,t,e));g+=b[0]+b[2]}return{height:g/f,renderDefault:p}}}function pZt(n,t,e,i){var r,o,a,s;let l=0;const h=i.getCellValue(n,t),u=i._getCellStyle(n,t);let d=0,c=0;const f=[];let g=0;const p=[];let v=0,m=!1;if(i.getCellLocation(n,t)!=="body")m=!0;else{const P=i.getBodyColumnDefine(n,t);m=!!P?.icon||!!P?.tree||P?.dragOrder}if(m){const P=i.getCellIcons(n,t);P?.forEach((k=>{var E,D,I,O,H,F,N,$,V,X;k.positionType!==Ue.absoluteRight&&k.positionType!==Ue.inlineFront&&k.positionType!==Ue.inlineEnd?(c+=((E=k.width)!==null&&E!==void 0?E:0)+((D=k.marginLeft)!==null&&D!==void 0?D:0)+((I=k.marginRight)!==null&&I!==void 0?I:0),d=Math.max(d,(O=k.height)!==null&&O!==void 0?O:0)):k.positionType===Ue.inlineFront?(f.push(k),g=Math.max(g,((H=k.height)!==null&&H!==void 0?H:0)+((F=k.marginLeft)!==null&&F!==void 0?F:0)+((N=k.marginRight)!==null&&N!==void 0?N:0))):k.positionType===Ue.inlineEnd&&(p.push(k),v=Math.max(v,(($=k.height)!==null&&$!==void 0?$:0)+((V=k.marginLeft)!==null&&V!==void 0?V:0)+((X=k.marginRight)!==null&&X!==void 0?X:0)))}))}let y=1,b=n;if(i.isHeader(n,t)||!((r=i.getBodyColumnDefine(n,t))===null||r===void 0)&&r.mergeCell||i.hasCustomMerge()){const P=i.getCellRange(n,t);y=P.end.row-P.start.row+1,n=P.start.col,b=P.end.col}const _=Se(gt("padding",u,n,t,i)),w=gt("fontSize",u,n,t,i),C=gt("fontStyle",u,n,t,i),x=gt("fontWeight",u,n,t,i),S=(o=gt("lineHeight",u,n,t,i))!==null&&o!==void 0?o:w,A=gt("fontFamily",u,n,t,i),T=gt("autoWrapText",u,n,t,i),M=gt("lineClamp",u,n,t,i),R=gt("underline",u,n,t,i),L=(a=gt("underlineOffset",u,n,t,i))!==null&&a!==void 0?a:0;let B;if(e!=="text"&&e!=="link"&&e!=="progressbar"&&e!=="checkbox"&&e!=="radio"&&e!=="switch"&&e!=="button")l=S;else if(e==="checkbox")l=nZt(h,n,t,b,u,T,c,w,C,x,A,S,M,_,i);else if(e==="radio")l=rZt(h,n,t,b,u,T,c,w,C,x,A,S,M,_,i);else if(e==="switch")l=oZt(h,n,t,b,u,T,c,w,C,x,A,S,M,_,i);else if(e==="button")l=aZt(h,n,t,b,u,T,c,w,C,x,A,S,M,_,i);else{B=h;const P=Ub(B,i).text,k=i.getColsWidth(n,b);if(f.length||p.length)if(T){const E=Object.assign({text:h?.toString(),fontFamily:A,fontSize:w,fontStyle:C,fontWeight:x,lineHeight:S});E.textBaseline="middle";const D=[...f.map((I=>OA(I))),E,...p.map((I=>OA(I)))];cX.setAttributes({width:k-(_[1]+_[3])-c,height:0,textConfig:D}),l=cX.AABBBounds.height()}else l=0,P.forEach(((E,D)=>{var I;!((I=i.options.customConfig)===null||I===void 0)&&I.multilinesForXTable&&D!==0||(D===0&&f.length?l+=Math.max(S,g):D===P.length-1&&p.length?l+=Math.max(S,v):l+=S)}));else if(T){const E=To(n,t,i),D=k-(_[1]+_[3])-c-E;l=(eht({maxLineWidth:D,text:P,fontSize:w,fontStyle:C,fontWeight:x,fontFamily:A,lineHeight:S,wordBreak:"break-word",whiteSpace:P.length!==1||T?"normal":"no-wrap",lineClamp:M}).height()||(typeof S=="number"?S:w))+(R?L:0)}else l=!((s=i.options.customConfig)===null||s===void 0)&&s.multilinesForXTable?S:P.length*S}return(Math.max(l,d)+_[0]+_[2])/y}function vZt(n,t,e){return{left:0,top:0,right:e.getColWidth(n),bottom:e.getRowHeight(t),width:e.getColWidth(n),height:0}}function Ad(n,t){if(!t||!t.proxy)return{colStart:0,colEnd:0,rowStart:0,rowEnd:0};const{mergeStartCol:e,mergeEndCol:i,mergeStartRow:r,mergeEndRow:o,col:a,row:s}=n;return{colStart:e,colEnd:i,rowStart:r,rowEnd:o}}function mZt(n,t){const e=n.start.col,i=n.end.col,r=n.start.row,o=n.end.row;let a=e,s=i,l=r,h=o;for(let u=e;u<=i;u++)for(let d=r;d<=o;d++){const c=t.getCellRange(u,d);c&&(a=Math.min(a,c.start.col),s=Math.max(s,c.end.col),l=Math.min(l,c.start.row),h=Math.max(h,c.end.row))}return n.start.col=a,n.end.col=s,n.start.row=l,n.end.row=h,n}function fX(n,t,e,i){!i&&e&&n.table._setRowHeight(t,n.table.getRowHeight(t)+e,!0);for(let a=0;a<n.table.colCount;a++){const s=n.getCell(a,t);if(s.role==="empty")continue;const l=un(n.table,a,t);l&&l.start.col!==a||(iht(n,s,a,t,s.attribute.height+e,e,n.table.isHeader(a,t)),n.updateCellContentWhileResize(a,t))}let r=0,o=0;t<n.table.frozenRowCount?(r=t+1,o=n.table.frozenRowCount-1):t>=n.table.rowCount-n.table.bottomFrozenRowCount?(r=t+1,o=n.table.rowCount-1):(r=t+1,o=Math.min(n.proxy.rowEnd,n.table.rowCount-n.table.bottomFrozenRowCount-1));for(let a=0;a<n.table.colCount;a++)for(let s=r;s<=o;s++){const l=n.highPerformanceGetCell(a,s);l.role==="cell"&&l.setAttribute("y",l.attribute.y+e)}}function iht(n,t,e,i,r,o,a){t&&yZt(n,t,e,i,r,o)}function yZt(n,t,e,i,r,o,a){var s,l,h,u,d;if(t.attribute.height===r&&!t.needUpdateHeight)return;t.needUpdateHeight=!1,t.setAttribute("height",r);const c=(s=n.table.getCellRawRecord(e,i))===null||s===void 0?void 0:s.vtableMerge,f=!!n.table.getCustomMerge(e,i),g=c||f?"text":n.table.isHeader(e,i)?(l=n.table._getHeaderLayoutMap(e,i).headerType)!==null&&l!==void 0?l:"text":(h=n.table.getBodyColumnType(e,i))!==null&&h!==void 0?h:"text";if(g==="progressbar"){const p=n.table.getBodyColumnDefine(e,i),v=n.table._getCellStyle(e,i),m=n.table.getCellValue(e,i),y=n.table.getCellOriginValue(e,i),b=Se(gt("padding",v,e,i,n.table));let _;p?.mergeCell&&(_=n.table.getCellRange(e,i));const w=It.getFunction("createProgressBarCell")(p,v,t.attribute.width,m,y,e,i,b,n.table,_),C=t.getChildByName("progress-bar");t.insertBefore(w,C),t.removeChild(C),C.removeAllChild(),C.release(),gX(t,r,o,n.table.isAutoRowHeight(i),!0,n.table)}else if(g==="sparkline"){t.removeAllChild();const p=n.table._getCellStyle(e,i),v=Se(gt("padding",p,e,i,n.table));It.getFunction("createSparkLineCellGroup")(t,t.parent,t.attribute.x,t.attribute.y,e,i,t.attribute.width,t.attribute.height,v,n.table,Sd(p,n.table,e,i,gt).theme,!1)}else if(g==="image"||g==="video")Yb(t,e,i,0,o,n.table);else if(((u=t.firstChild)===null||u===void 0?void 0:u.name)==="axis")(d=t.firstChild)===null||d===void 0||d.originAxis.resize(t.attribute.width,t.attribute.height);else{let p=!0;const v=t.getChildByName(Ls)||t.getChildByName(IA);if(v){let m;t.removeChild(v);const y=FA(e,i,t,n.table);if(y)for(let b=y.start.row;b<=y.end.row;b++){if(b===i)continue;const _=n.getCell(e,b),w=_.getChildByName(Ls)||_.getChildByName(IA);w.removeAllChild(),_.removeChild(w),FA(e,b,_,n.table)}else{let b,_;const w=n.table.getCellLocation(e,i),{vtableMerge:C}=n.table.getCellRawRecord(e,i)||{};if(C&&n.table.internalProps.groupTitleCustomLayout)_=n.table.internalProps.groupTitleCustomLayout;else if(w!=="body"){const x=n.table.getHeaderDefine(e,i);b=x?.headerCustomRender,_=x?.headerCustomLayout}else{const x=n.table.getBodyColumnDefine(e,i);b=x?.customRender||n.table.customRender,_=x?.customLayout}if((b||_)&&qu(t))for(let x=t.mergeStartCol;x<=t.mergeEndCol;x++)for(let S=t.mergeStartRow;S<=t.mergeEndRow;S++)S!==i&&n.updateCellContent(x,S);if(_||b){const x=n.table._getCellStyle(e,i),S=Se(gt("padding",x,e,i,n.table));let A=t.attribute.width,T=t.attribute.height;qu(t)&&(A=n.table.getColsWidth(t.mergeStartCol,t.mergeEndCol),T=n.table.getRowsHeight(t.mergeStartRow,t.mergeEndRow));const M=pd(_,b,e,i,A,T,!1,n.table.isAutoRowHeight(i),S,qu(t)?{start:{col:t.mergeStartCol,row:t.mergeStartRow},end:{col:t.mergeEndCol,row:t.mergeEndRow}}:void 0,n.table);m=M.elementsGroup,p=M.renderDefault}t.childrenCount>0&&m?t.insertBefore(m,t.firstChild):m&&t.appendChild(m)}}gX(t,r,o,n.table.isAutoRowHeight(i),p,n.table)}}function gX(n,t,e,i,r,o){if(qu(n)){t=0;for(let u=n.mergeStartRow;u<=n.mergeEndRow;u++)t+=o.getRowHeight(u);const{colStart:a,colEnd:s,rowStart:l,rowEnd:h}=Ad(n,o.scenegraph);for(let u=a;u<=s;u++)for(let d=l;d<=h;d++){const c=o.scenegraph.getCell(u,d);if(c.role!=="cell")continue;if(c.forEachChildren((v=>{v.setAttributes({dx:0,dy:0})})),r){const v=o._getCellStyle(a,l),m=Se(gt("padding",v,u,d,o));zA(c,t,e,i,m,v.textAlign,v.textBaseline,o)}const f=o.getRowHeight(d),g=o.getColWidth(u);c.contentHeight=t;const{widthChange:p}=$_(c,g,f,{start:{col:n.mergeStartCol,row:n.mergeStartRow},end:{col:n.mergeEndCol,row:n.mergeEndRow}},o);p&&(c.needUpdateWidth=!0)}}else{const a=o._getCellStyle(n.col,n.row),s=Se(gt("padding",a,n.col,n.row,o));zA(n,t,e,i,s,a.textAlign,a.textBaseline,o)}}function bZt(n,t,e,i){i||n.table._setColWidth(t,n.table.getColWidth(t)+e,!0);const r=n.getColGroup(t,!0),o=n.getColGroupInRightTopCorner(t);r&&!o&&Vg(r,e,"col-corner",n),o&&Vg(o,e,"right-top",n);const a=n.getColGroup(t);a&&Vg(a,e,"row-body",n);const s=n.getColGroupInLeftBottomCorner(t);s&&Vg(s,e,"left-bottom",n);const l=n.getColGroupInBottom(t);l&&Vg(l,e,"bottom",n);const h=n.getColGroupInRightBottomCorner(t);h&&Vg(h,e,"right-bottom",n),t<n.frozenColCount?(n.cornerHeaderGroup.forEachChildrenSkipChild(((u,d)=>{u.col>t&&u.setAttribute("x",u.attribute.x+e)})),n.rowHeaderGroup.forEachChildrenSkipChild(((u,d)=>{u.col>t&&u.setAttribute("x",u.attribute.x+e)}))):(n.colHeaderGroup.forEachChildrenSkipChild(((u,d)=>{u.col>t&&u.setAttribute("x",u.attribute.x+e)})),n.bodyGroup.forEachChildrenSkipChild(((u,d)=>{u.col>t&&u.setAttribute("x",u.attribute.x+e)}))),s&&n.leftBottomCornerGroup.forEachChildrenSkipChild(((u,d)=>{u.col>t&&u.setAttribute("x",u.attribute.x+e)})),l&&n.bottomFrozenGroup.forEachChildrenSkipChild(((u,d)=>{u.col>t&&u.setAttribute("x",u.attribute.x+e)})),h&&n.rightBottomCornerGroup.forEachChildrenSkipChild(((u,d)=>{u.col>t&&u.setAttribute("x",u.attribute.x+e)}))}function Vg(n,t,e,i){var r,o,a,s,l,h,u;let d=!1;const c=(r=n?.attribute.width)!==null&&r!==void 0?r:0;if(n?.setAttribute("width",c+t),n?.forEachChildren(((f,g)=>{if(_Zt(i,f,f.col,f.row,c,c+t,t,e!=="row-body"||f.col<i.table.rowHeaderLevelCount,i.table.internalProps.autoWrapText)){const p=un(i.table,f.col,f.row);if(p&&p.end.row-p.start.row)for(let v=p.start.row;v<=p.end.row;v++)vX(i,v);else vX(i,f.row);d=!0}})),d){let f,g,p,v=0;for(let m=0;m<i.table.colCount;m++){if(e==="col-corner"?(p=0,f=i.getColGroup(m,!0),g=(o=i.colHeaderGroup.attribute.height)!==null&&o!==void 0?o:0):e==="row-body"?(p=i.table.frozenRowCount,f=i.getColGroup(m,!1),g=(a=i.bodyGroup.attribute.height)!==null&&a!==void 0?a:0):e==="bottom"?(p=i.table.rowCount-i.table.bottomFrozenRowCount,f=i.getColGroupInBottom(m),g=(s=i.bottomFrozenGroup.attribute.height)!==null&&s!==void 0?s:0):e==="left-bottom"?(p=i.table.rowCount-i.table.bottomFrozenRowCount,f=i.getColGroupInLeftBottomCorner(m),g=(l=i.leftBottomCornerGroup.attribute.height)!==null&&l!==void 0?l:0):e==="right-top"?(p=0,f=i.getColGroupInRightTopCorner(m),g=(h=i.rightTopCornerGroup.attribute.height)!==null&&h!==void 0?h:0):e==="right-bottom"&&(p=i.table.rowCount-i.table.bottomFrozenRowCount,f=i.getColGroupInRightBottomCorner(m),g=(u=i.rightBottomCornerGroup.attribute.height)!==null&&u!==void 0?u:0),!f)continue;let y=0;f.forEachChildren((b=>{var _;b.setAttribute("y",y),y+=(_=i.table.getRowHeight(b.row))!==null&&_!==void 0?_:0})),v=y}i.updateContainerHeight(p,v-g);for(let m=0;m<i.table.frozenColCount;m++){const y=i.getColGroupInLeftBottomCorner(m);let b=0;y?.forEachChildren((_=>{_.setAttribute("y",b),b+=i.table.getRowHeight(_.row)}))}for(let m=i.table.colCount-i.table.rightFrozenColCount;m<i.table.colCount;m++){const y=i.getColGroupInRightBottomCorner(m);let b=0;y?.forEachChildren((_=>{_.setAttribute("y",b),b+=i.table.getRowHeight(_.row)}))}for(let m=i.table.frozenColCount;m<i.table.colCount-i.table.rightFrozenColCount;m++){const y=i.getColGroupInBottom(m);let b=0;y?.forEachChildren((_=>{_.setAttribute("y",b),b+=i.table.getRowHeight(_.row)}))}}}function _Zt(n,t,e,i,r,o,a,s,l){var h,u,d,c,f,g,p;if(t.attribute.width===o&&!t.needUpdateWidth)return!1;t.needUpdateWidth=!1,t.setAttribute("width",o);const v=t;if(!v)return!1;const m=n.table.isAutoRowHeight(i),y=(h=n.table.getCellRawRecord(e,i))===null||h===void 0?void 0:h.vtableMerge,b=!!n.table.getCustomMerge(e,i),_=y||b?"text":n.table.isHeader(e,i)?(u=n.table._getHeaderLayoutMap(e,i).headerType)!==null&&u!==void 0?u:"text":(d=n.table.getBodyColumnType(e,i))!==null&&d!==void 0?d:"text";let w=!1;if(_==="progressbar"){const C=n.table.getBodyColumnDefine(e,i),x=n.table._getCellStyle(e,i),S=n.table.getCellValue(e,i),A=n.table.getCellOriginValue(e,i),T=Se(gt("padding",x,e,i,n.table));let M;C?.mergeCell&&(M=n.table.getCellRange(e,i));const R=It.getFunction("createProgressBarCell")(C,x,v.attribute.width,S,A,e,i,T,n.table,M),L=v.getChildByName("progress-bar");v.insertBefore(R,L),v.removeChild(L),L.removeAllChild(),L.release();const B=pX(v,o,a,m,!0,n.table);w=w||B}else if(_==="sparkline"){v.removeAllChild();const C=n.table._getCellStyle(e,i),x=Se(gt("padding",C,e,i,n.table));It.getFunction("createSparkLineCellGroup")(v,v.parent,v.attribute.x,v.attribute.y,e,i,v.attribute.width,v.attribute.height,x,n.table,Sd(C,n.table,e,i,gt).theme,!1)}else if(_==="image"||_==="video")Yb(v,e,i,a,0,n.table);else if(((c=v.firstChild)===null||c===void 0?void 0:c.name)==="axis"){const C=n.table.internalProps.layoutMap.getAxisConfigInPivotChart(e,i),x=n.table._getCellStyle(e,i),S=Se(gt("padding",x,e,i,n.table));if(C){const A=new(It.getComponent("axis"))(C,v.attribute.width,v.attribute.height,(f=C.__vtablePadding)!==null&&f!==void 0?f:S,n.table);v.clear(),v.appendChild(A.component),A.overlap()}}else if(((g=t.firstChild)===null||g===void 0?void 0:g.name)==="axis")(p=t.firstChild)===null||p===void 0||p.originAxis.resize(t.attribute.width,t.attribute.height);else{let C=!0;const x=t.getChildByName(Ls)||t.getChildByName(IA);if(x){let A;t.removeChild(x);const T=FA(e,i,t,n.table);if(T)for(let M=T.start.col;M<=T.end.col;M++){if(M===e)continue;const R=n.getCell(M,i),L=R.getChildByName(Ls)||R.getChildByName(IA);L.removeAllChild(),R.removeChild(L),FA(M,i,R,n.table)}else{let M,R;const L=n.table.getCellLocation(e,i),{vtableMerge:B}=n.table.getCellRawRecord(e,i)||{};if(B&&n.table.internalProps.groupTitleCustomLayout)R=n.table.internalProps.groupTitleCustomLayout;else if(L!=="body"){const P=n.table.getHeaderDefine(e,i);M=P?.headerCustomRender,R=P?.headerCustomLayout}else{const P=n.table.getBodyColumnDefine(e,i);M=P?.customRender||n.table.customRender,R=P?.customLayout}if((M||R)&&qu(v)){for(let P=v.mergeStartCol;P<=v.mergeEndCol;P++)if(P!==e)for(let k=v.mergeStartRow;k<=v.mergeEndRow;k++)n.updateCellContent(P,k)}if(R||M){const P=n.table._getCellStyle(e,i),k=Se(gt("padding",P,e,i,n.table));let E=v.attribute.width,D=v.attribute.height;qu(v)&&(E=n.table.getColsWidth(v.mergeStartCol,v.mergeEndCol),D=n.table.getRowsHeight(v.mergeStartRow,v.mergeEndRow));const I=pd(R,M,e,i,E,D,!1,n.table.isAutoRowHeight(i),k,qu(v)?{start:{col:v.mergeStartCol,row:v.mergeStartRow},end:{col:v.mergeEndCol,row:v.mergeEndRow}}:void 0,n.table);A=I.elementsGroup,C=I.renderDefault,w=!0}t.childrenCount>0&&A?t.insertBefore(A,t.firstChild):A&&t.appendChild(A)}}const S=pX(v,o,a,m,C,n.table);w=w||S}return l||(l=n.table._getCellStyle(e,i).autoWrapText),!(!m||!l)&&w}function pX(n,t,e,i,r,o){if(qu(n)){t=0;let u=!1;for(let v=n.mergeStartCol;v<=n.mergeEndCol;v++)t+=o.getColWidth(v);let d=0;for(let v=n.mergeStartRow;v<=n.mergeEndRow;v++)d+=o.getRowHeight(v);const{colStart:c,colEnd:f,rowStart:g,rowEnd:p}=Ad(n,o.scenegraph);for(let v=c;v<=f;v++)for(let m=g;m<=p;m++){if(v===n.col&&m!==n.row)continue;const y=o.scenegraph.getCell(v,m);if(y.role!=="cell")continue;y.forEachChildren((x=>{x.setAttributes({dx:0,dy:0})}));let b=!1;if(r){const x=o._getCellStyle(c,g),S=Se(gt("padding",x,v,m,o)),A=x.textAlign,T=x.textBaseline;b=HA(y,t,d,e,i,S,A,T,o.scenegraph);const M=To(y.col,y.row,o);if(M){const R=y.getChildByName("text"),L=y.getChildByName("expand")||y.getChildByName("collapse");L?.role!=="icon-left"&&R&&R.setAttribute("dx",M)}}const _=o.getRowHeight(m),w=o.getColWidth(v);y.contentWidth=t;const{heightChange:C}=$_(y,w,_,{start:{col:n.mergeStartCol,row:n.mergeStartRow},end:{col:n.mergeEndCol,row:n.mergeEndRow}},o);C&&(y.needUpdateHeight=!0),u=u||b}return u}const a=o._getCellStyle(n.col,n.row),s=Se(gt("padding",a,n.col,n.row,o)),l=a.textAlign,h=a.textBaseline;return HA(n,t,o.getRowHeight(n.row),e,i,s,l,h,o.scenegraph)}function vX(n,t){const e=Math.round(Ra(t,0,n.table.colCount-1,n.table));n.table._setRowHeight(t,e,!0);for(let i=0;i<n.table.colCount;i++){const r=e,o=n.highPerformanceGetCell(i,t);o.role!=="empty"&&iht(n,o,i,t,r,r-o.attribute.height,n.table.isHeader(i,t))}}var Fo;(function(n){n.dropDown="dropDown",n.contextmenu="contextmenu",n.custom="custom"})(Fo||(Fo={}));const Oi={fontSize:12,fontFamily:"Arial,sans-serif",color:"#000",highlightColor:"#2E68CF",hoverBgColor:"#EEE",lineHeight:30,bgColor:"#FFF",cornerRadius:4,borderWidth:.5,borderColor:"#CCC",menuPadding:6,menuItemPadding:9,maxLineWidth:200};let CZt=class{constructor(t){this._table=t,this._menuInstance=new ve({x:0,y:0,fill:Oi.bgColor,stroke:Oi.borderColor,cornerRadius:Oi.cornerRadius,lineWidth:Oi.borderWidth}),this._menuInfo={x:-1,y:-1,col:-1,row:-1,type:Fo.dropDown,menuInfo:[],highlightIndex:-1}}bindTableComponent(t){t.appendChild(this._menuInstance),this.bindEvent()}release(){}attach(t,e,i,r,o,a){if(o===Fo.dropDown&&this.checkDropDownMenuChange(i,r)){const s=this.getMenuInfo(i,r,o);if(!s)return;const{menuInfo:l,highlightIndex:h}=s;this.updateMenuInfo(i,r,o,l,h),this.updateMenuInstance(l,h)}else if(o===Fo.contextmenu&&this.checkContextMenuChange(t,e)){const s=this.getMenuInfo(i,r,o);if(!s)return;const{menuInfo:l,highlightIndex:h}=s;this.updateMenuInfo(i,r,o,l,h),this.updateMenuInstance(l,h)}this.updatePosition(t-this._table.scenegraph.x,e-this._table.scenegraph.y),this.addToScene()}updateMenuInfo(t,e,i,r,o){this._menuInfo.col=t,this._menuInfo.row=e,this._menuInfo.type=i,this._menuInfo.menuInfo=r,this._menuInfo.highlightIndex=o}checkDropDownMenuChange(t,e){const{type:i,col:r,row:o}=this._menuInfo;return i!==Fo.dropDown||t!==r||e!==o}checkContextMenuChange(t,e){var i;const{type:r,menuInfo:o}=this._menuInfo;return r!==Fo.contextmenu||o!==((i=this._table.internalProps.menu)===null||i===void 0?void 0:i.contextMenuItems)}updateMenuInstance(t,e){this._menuInstance.removeAllChild();let i=Oi.menuPadding;const r=Oi.menuPadding;let o=0;t.forEach(((a,s)=>{var l,h;const u=e===s;let d,c;typeof a=="string"?c=a:typeof a=="object"&&(c=a.text,d=u?a.selectedIcon:a.icon);const f=new ve({y:i,x:r,height:Oi.lineHeight,fill:Oi.bgColor});f.role="menu-item",this._menuInstance.appendChild(f),f.stateProxy=p=>p==="hover"?{fill:Oi.hoverBgColor}:{fill:Oi.bgColor},f.addEventListener("pointerenter",(p=>{f.addState("hover",!0,!1),this._table.scenegraph.updateNextFrame()})),f.addEventListener("pointerleave",(p=>{f.removeState("hover",!1),this._table.scenegraph.updateNextFrame()}));const g=new tn({x:Oi.menuItemPadding,y:Oi.menuItemPadding,fill:u?Oi.highlightColor:Oi.color,text:c,textBaseline:"top",fontSize:Oi.fontSize,fontFamily:Oi.fontFamily,pickable:!1,maxLineWidth:Oi.maxLineWidth,ellipsis:""});if(f.addChild(g),d){g.AABBBounds.height();const p=(l=d.width)!==null&&l!==void 0?l:16,v=(h=d.height)!==null&&h!==void 0?h:16,m=new jf({x:Oi.menuItemPadding,y:(Oi.lineHeight-v)/2,width:p,height:v,image:d.svg,pickable:!1});m.role="menu-icon",f.insertBefore(m,g),g.setAttribute("x",p+Oi.menuItemPadding)}o=Math.max(f.AABBBounds.width(),o),i+=Oi.lineHeight})),this._menuInstance.setAttributes({width:o+2*Oi.menuItemPadding+2*Oi.menuPadding,height:i+Oi.menuPadding}),this._menuInstance.forEachChildren((a=>{a.setAttribute("width",o+2*Oi.menuItemPadding)}))}updatePosition(t,e){this._menuInstance.setAttributes({x:this._menuInfo.type===Fo.dropDown?t-this._menuInstance.attribute.width:t,y:e}),this._menuInfo.x=Fo.dropDown?t-this._menuInstance.attribute.width:t,this._menuInfo.y=e}addToScene(){this._table.scenegraph.updateNextFrame()}detach(){this._menuInstance.setAttributes({x:-1e3,y:-1e3}),this._table.scenegraph.updateNextFrame()}getMenuInfo(t,e,i){var r;if(i===Fo.dropDown){let o=this._table.globalDropDownMenu;o=this._table._getHeaderLayoutMap(t,e).dropDownMenu,typeof o=="function"&&(o=o({row:e,col:t,table:this._table}));let a=-1;if(Array.isArray(o)){for(let s=0;s<o.length;s++)if(this._table._dropDownMenuIsHighlight(t,e,s)){a=s;break}}return{menuInfo:o,highlightIndex:a}}if(i===Fo.contextmenu){const o=(r=this._table.internalProps.menu)===null||r===void 0?void 0:r.contextMenuItems;let a;if(Array.isArray(o))a=o;else if(typeof o=="function"){const{field:s}=this._table.isHeader(t,e)?this._table.getHeaderDefine(t,e):this._table.getBodyColumnDefine(t,e);a=o(s,e,t)}return{menuInfo:a,highlightIndex:-1}}}bindEvent(){this._menuInstance.addEventListener("click",(t=>{const{target:e}=t;if(e&&e.role==="menu-item"){const i=this.getEventInfo(e),r=this._table.getMenuInfo(this._menuInfo.col,this._menuInfo.row,this._menuInfo.type),o=Object.assign(i,r);o.event=t.nativeEvent,this._table.fireListeners(at.DROPDOWN_MENU_CLICK,o)}}))}getEventInfo(t){const e=t.parent;let i=0;e.forEachChildren(((a,s)=>a===t&&(i=s-1,!0)));const r=typeof this._menuInfo.menuInfo[i]=="string"?this._menuInfo.menuInfo[i]:this._menuInfo.menuInfo[i].text,o=typeof this._menuInfo.menuInfo[i]=="string"?r:this._menuInfo.menuInfo[i].menuKey||r;return{col:this._menuInfo.col,row:this._menuInfo.row,dropDownIndex:i,highlight:i===this._menuInfo.highlightIndex,text:r,menuKey:o}}get bounds(){return this._menuInstance.globalAABBBounds}};const PL=ia();class wZt{constructor(){const t=PL.drillDown;this.icon=new jf({x:-1e3,y:-1e3,image:t.svg,width:t.width,height:t.height,dx:-t.width/2,dy:-t.height/2,visible:!1,funcType:t.funcType,cursor:t.cursor}),this.icon.role="icon-drill"}appand(t){t.appendChild(this.icon)}update(t,e,i,r,o,a){if(!t||r&&o)return this.icon.setAttributes({x:-1e3,y:-1e3,visible:!1}),void a.updateNextFrame();const s=PL.drillDown,l=PL.drillUp;this.icon.setAttributes({x:e,y:i,image:r?s.svg:l.svg,visible:!0}),this.icon.loadImage(this.icon.attribute.image),a.updateNextFrame()}}class xZt{constructor(t){const e=t.theme.dragHeaderSplitLine.lineWidth,i=t.theme.dragHeaderSplitLine.lineColor,r=t.theme.dragHeaderSplitLine.shadowBlockColor;this.columnMoverLabel=Av({visible:!1,pickable:!1,x:0,y:0,symbolType:"triangle",fill:i}),this.columnMoverLine=Wi({visible:!1,pickable:!1,stroke:i,lineWidth:e,x:0,y:0,points:[{x:0,y:0},{x:0,y:0}]}),this.columnMoverBack=ei({visible:!1,pickable:!1,fill:r,x:0,y:0,width:0,height:0}),this.table=t}appand(t){t.appendChild(this.columnMoverLabel),t.appendChild(this.columnMoverLine),t.appendChild(this.columnMoverBack)}show(t,e,i){const r=this.table.getCellLocation(t,e),o=un(this.table,t,e);o&&(t=o.start.col,e=o.start.row);let a=0,s=0,l=0,h=0,u=0,d=0,c=0,f=0,g=Math.PI;const p=[];return r==="columnHeader"?(a=this.table.getColsWidth(0,t-1)-this.table.stateManager.scroll.horizontalBarPos,s=this.table.getRowsHeight(0,this.table.frozenRowCount-1),h=this.table.tableNoFrameHeight,l=o?this.table.getColsWidth(o.start.col,o.end.col):this.table.getColWidth(t),u=a-i,c=a+l,f=2,p.push({x:0,y:0}),p.push({x:0,y:this.table.tableNoFrameHeight})):(r==="rowHeader"||this.table.internalProps.layoutMap.isSeriesNumberInBody(t,e))&&(s=this.table.getRowsHeight(0,e-1)-this.table.stateManager.scroll.verticalBarPos,a=this.table.getColsWidth(0,this.table.frozenColCount-1),l=this.table.tableNoFrameWidth,h=o?this.table.getRowsHeight(o.start.row,o.end.row):this.table.getRowHeight(e),d=s-i,c=2,f=s+h,g=Math.PI/2,p.push({x:0,y:0}),p.push({x:this.table.tableNoFrameWidth,y:0})),this.columnMoverBack.setAttributes({visible:!0,x:a-u,y:s-d,width:l,height:h,dx:u,dy:d}),this.columnMoverLine.setAttributes({x:c,y:f,visible:!0,points:p}),this.columnMoverLabel.setAttributes({visible:!0,x:c,y:f,angle:g}),{backX:a-u,lineX:c,backY:s-d,lineY:f}}hide(){this.columnMoverLabel.setAttribute("visible",!1),this.columnMoverLine.setAttribute("visible",!1),this.columnMoverBack.setAttribute("visible",!1)}update(t,e,i,r){typeof t=="number"&&typeof e=="number"?(this.columnMoverLabel.setAttribute("x",e),this.columnMoverLine.setAttribute("x",e),this.columnMoverBack.setAttribute("x",t)):typeof i=="number"&&typeof r=="number"&&(this.columnMoverLabel.setAttribute("y",r),this.columnMoverLine.setAttribute("y",r),this.columnMoverBack.setAttribute("y",i))}updateStyle(){const t=this.table.theme.dragHeaderSplitLine.lineWidth,e=this.table.theme.dragHeaderSplitLine.lineColor,i=this.table.theme.dragHeaderSplitLine.shadowBlockColor;this.columnMoverLabel.setAttributes({fill:e}),this.columnMoverLine.setAttributes({stroke:e,lineWidth:t}),this.columnMoverBack.setAttributes({fill:i})}}function J1(n,t,e){if(e)return Math.min(t.tableNoFrameWidth,t.getAllColsWidth())-t.getColsWidth(n,t.colCount-1);let i=t.getColsWidth(0,n);return n>=t.frozenColCount&&(i-=t.scrollLeft),i}function mX(n,t,e){if(e)return Math.min(t.tableNoFrameWidth,t.getAllRowsHeight())-t.getRowsHeight(n,t.rowCount-1);let i=t.getRowsHeight(0,n);return n>=t.frozenRowCount&&(i-=t.scrollTop),i}class SZt{constructor(t){var e,i,r,o,a,s,l,h,u,d,c,f,g,p,v,m,y,b,_;this.table=t;const w=this.table.theme;this.createScrollBar();const C=(e=w.columnResize)===null||e===void 0?void 0:e.lineColor,x=(i=w.columnResize)===null||i===void 0?void 0:i.lineWidth,S=(r=w.columnResize)===null||r===void 0?void 0:r.bgColor,A=(o=w.columnResize)===null||o===void 0?void 0:o.width,T=(s=(a=w.columnResize)===null||a===void 0?void 0:a.labelVisible)===null||s===void 0||s,M=(l=w.columnResize)===null||l===void 0?void 0:l.labelColor,R=(h=w.columnResize)===null||h===void 0?void 0:h.labelFontSize,L=(u=w.columnResize)===null||u===void 0?void 0:u.labelFontFamily,B=(d=w.columnResize)===null||d===void 0?void 0:d.labelBackgroundFill,P=(c=w.columnResize)===null||c===void 0?void 0:c.labelBackgroundCornerRadius;this.labelVisible=T,this.columnResizeLine=Wi({visible:!1,pickable:!1,stroke:C,lineWidth:x,x:0,y:0,points:[{x:0,y:0},{x:0,y:0}]}),this.columnResizeBgLine=Wi({visible:!1,pickable:!1,stroke:S,lineWidth:A,x:0,y:0,points:[{x:0,y:0},{x:0,y:0}]});const k=kb({visible:!1,pickable:!1,x:0,y:0,fontSize:R,fill:M,fontFamily:L,text:"",textBaseline:"top",dx:16,dy:-R/2}),E=ei({visible:!1,pickable:!1,fill:B,x:0,y:0,width:5*R*.8,height:R+8,cornerRadius:P,dx:12,dy:-R/2-4});this.columnResizeLabel=AS({visible:!1,pickable:!1,x:0,y:0}),this.columnResizeLabel.appendChild(E),this.columnResizeLabel.appendChild(k),this.rowResizeLine=Wi({visible:!1,pickable:!1,stroke:C,lineWidth:x,x:0,y:0,points:[{x:0,y:0},{x:0,y:0}]}),this.rowResizeBgLine=Wi({visible:!1,pickable:!1,stroke:S,lineWidth:A,x:0,y:0,points:[{x:0,y:0},{x:0,y:0}]});const D=kb({visible:!1,pickable:!1,x:0,y:0,fontSize:R,fill:M,fontFamily:L,text:"",textBaseline:"top",dx:16,dy:-R/2}),I=ei({visible:!1,pickable:!1,fill:B,x:0,y:0,width:5*R*.8,height:R+8,cornerRadius:P,dx:12,dy:-R/2-4});this.rowResizeLabel=AS({visible:!1,pickable:!1,x:0,y:0}),this.rowResizeLabel.appendChild(I),this.rowResizeLabel.appendChild(D),this.cellMover=new xZt(this.table);const O=(g=(f=w.frozenColumnLine)===null||f===void 0?void 0:f.shadow)===null||g===void 0?void 0:g.width,H=(v=(p=w.frozenColumnLine)===null||p===void 0?void 0:p.shadow)===null||v===void 0?void 0:v.startColor,F=(y=(m=w.frozenColumnLine)===null||m===void 0?void 0:m.shadow)===null||y===void 0?void 0:y.endColor,N=(_=(b=w.frozenColumnLine)===null||b===void 0?void 0:b.shadow)===null||_===void 0?void 0:_.visible;this.frozenShadowLine=ei({visible:N==="always",pickable:!1,x:0,y:0,width:O,height:0,fill:{gradient:"linear",x0:0,y0:0,x1:1,y1:0,stops:[{color:H,offset:0},{color:F,offset:1}]}}),this.rightFrozenShadowLine=ei({visible:N==="always",pickable:!1,x:0,y:0,width:O,height:0,fill:{gradient:"linear",x0:0,y0:0,x1:1,y1:0,stops:[{color:F,offset:0},{color:H,offset:1}]}}),this.menu=new CZt(this.table),this.drillIcon=new wZt}addToGroup(t){t.addChild(this.frozenShadowLine),t.addChild(this.rightFrozenShadowLine),t.addChild(this.columnResizeBgLine),t.addChild(this.columnResizeLine),t.addChild(this.columnResizeLabel),t.addChild(this.rowResizeBgLine),t.addChild(this.rowResizeLine),t.addChild(this.rowResizeLabel),this.table.theme.scrollStyle.hoverOn&&!this.table.theme.scrollStyle.barToSide?(t.addChild(this.hScrollBar),t.addChild(this.vScrollBar)):(t.stage.defaultLayer.addChild(this.hScrollBar),t.stage.defaultLayer.addChild(this.vScrollBar)),this.menu.bindTableComponent(t),this.drillIcon.appand(t),this.cellMover.appand(t)}createScrollBar(){var t,e,i,r,o,a;const s=this.table.theme,l=(t=s.scrollStyle)===null||t===void 0?void 0:t.scrollRailColor,h=(e=s.scrollStyle)===null||e===void 0?void 0:e.scrollSliderColor,u=(i=s.scrollStyle)===null||i===void 0?void 0:i.scrollSliderCornerRadius,d=(r=s.scrollStyle)===null||r===void 0?void 0:r.width,c=(o=s.scrollStyle)===null||o===void 0?void 0:o.horizontalPadding,f=(a=s.scrollStyle)===null||a===void 0?void 0:a.verticalPadding;let g;g=Y(u)?{cornerRadius:u,fill:h}:{fill:h},this.hScrollBar=new Gh({direction:"horizontal",x:2*-this.table.tableNoFrameWidth,y:2*-this.table.tableNoFrameHeight,width:this.table.tableNoFrameWidth,height:d,padding:c,railStyle:{fill:l},sliderStyle:g,range:[0,.1],visible:!1}),this.hScrollBar.render(),this.hScrollBar.hideAll(),this.vScrollBar=new Gh({direction:"vertical",x:2*-this.table.tableNoFrameWidth,y:2*-this.table.tableNoFrameHeight,width:d,height:this.table.tableNoFrameHeight-this.table.getFrozenRowsHeight(),padding:f,railStyle:{fill:l},sliderStyle:g,range:[0,.1],visible:!1}),this.vScrollBar.render(),this.vScrollBar.hideAll()}updateScrollBar(){var t,e,i,r,o,a,s,l,h;const u=this.table.stateManager.scroll.horizontalBarPos,d=this.table.stateManager.scroll.verticalBarPos,c=this.table.theme,f=(t=c.scrollStyle)===null||t===void 0?void 0:t.width,g=(e=c.scrollStyle)===null||e===void 0?void 0:e.visible,p=(r=(i=c.scrollStyle)===null||i===void 0?void 0:i.horizontalVisible)!==null&&r!==void 0?r:g,v=(a=(o=c.scrollStyle)===null||o===void 0?void 0:o.verticalVisible)!==null&&a!==void 0?a:g,m=Math.ceil(this.table.tableNoFrameWidth),y=Math.ceil(this.table.tableNoFrameHeight),b=this.table.getAllRowsHeight(),_=this.table.getAllColsWidth(),w=this.table.getFrozenRowsHeight(),C=this.table.getFrozenColsWidth(),x=this.table.getBottomFrozenRowsHeight(),S=this.table.getRightFrozenColsWidth(),A=this.table.theme.scrollStyle.hoverOn,T=!((s=this.table.options.customConfig)===null||s===void 0)&&s._disableColumnAndRowSizeRound?1:0;if(_>m+T){const M=Math.min(y,b),R=Math.max(.05,(m-C)/(_-C));let L=0;L=this.table.theme.scrollStyle.barToSide?this.table.tableNoFrameHeight-(A?f:-this.table.scenegraph.tableGroup.attribute.y)+this.table.tableY:M-(A?f:-this.table.scenegraph.tableGroup.attribute.y);let B=C+(A?0:this.table.scenegraph.tableGroup.attribute.x),P=m-C-S;(h=(l=this.table.theme.scrollStyle)===null||l===void 0?void 0:l.ignoreFrozenCols)!==null&&h!==void 0&&h?(B=A?0:this.table.scenegraph.tableGroup.attribute.x,P=m):(B=C+(A?0:this.table.scenegraph.tableGroup.attribute.x),P=m-C-S),this.hScrollBar.setAttributes({x:B,y:L,width:P,range:[0,R],visible:p==="always"});const k=this.hScrollBar.AABBBounds&&this.hScrollBar.globalAABBBounds;this.hScrollBar._viewPosition={x:k.x1,y:k.y1},p==="always"&&this.hScrollBar.showAll()}else this.hScrollBar.setAttributes({x:2*-this.table.tableNoFrameWidth,y:2*-this.table.tableNoFrameHeight,width:0,visible:!1});if(b>y+T){const M=Math.min(m,_),R=Math.max(.05,(y-w)/(b-w));let L=0;L=this.table.theme.scrollStyle.barToSide?this.table.tableNoFrameWidth-(A?f:-this.table.scenegraph.tableGroup.attribute.x)+this.table.tableX:M-(A?f:-this.table.scenegraph.tableGroup.attribute.x),this.vScrollBar.setAttributes({x:L,y:w+(A?0:this.table.scenegraph.tableGroup.attribute.y),height:y-w-x,range:[0,R],visible:v==="always"});const B=this.vScrollBar.AABBBounds&&this.vScrollBar.globalAABBBounds;this.vScrollBar._viewPosition={x:B.x1,y:B.y1},v==="always"&&this.vScrollBar.showAll()}else this.vScrollBar.setAttributes({x:2*-this.table.tableNoFrameWidth,y:2*-this.table.tableNoFrameHeight,height:0,visible:!1});this.table.stateManager.setScrollLeft(u),this.table.stateManager.setScrollTop(d)}hideResizeCol(){this.columnResizeLine.setAttribute("visible",!1),this.columnResizeBgLine.setAttribute("visible",!1),this.columnResizeLabel.setAttribute("visible",!1),this.columnResizeLabel.hideAll()}showResizeCol(t,e,i){const r=J1(t,this.table,i);this.columnResizeLine.setAttributes({visible:!0,x:r,points:[{x:0,y:0},{x:0,y:this.table.getRowsHeight(0,this.table.rowCount-1)}]}),this.columnResizeBgLine.setAttributes({visible:!0,x:r,points:[{x:0,y:0},{x:0,y:this.table.getRowsHeight(0,this.table.rowCount-1)}]}),this.labelVisible&&(this.columnResizeLabel.showAll(),this.columnResizeLabel.setAttributes({visible:!0,x:r,y:e}),this.columnResizeLabel.lastChild.setAttribute("text",`${this.table.getColWidth(t)}px`))}updateResizeCol(t,e,i){const r=J1(t,this.table,i);this.columnResizeLine.setAttributes({x:r,points:[{x:0,y:0},{x:0,y:this.table.getRowsHeight(0,this.table.rowCount-1)}]}),this.columnResizeBgLine.setAttributes({x:r,points:[{x:0,y:0},{x:0,y:this.table.getRowsHeight(0,this.table.rowCount-1)}]}),this.labelVisible&&(this.columnResizeLabel.setAttributes({x:r,y:e}),this.columnResizeLabel.lastChild.setAttribute("text",`${Math.floor(this.table.getColWidth(t))}px`))}hideResizeRow(){this.rowResizeLine.setAttribute("visible",!1),this.rowResizeBgLine.setAttribute("visible",!1),this.rowResizeLabel.setAttribute("visible",!1),this.rowResizeLabel.hideAll()}showResizeRow(t,e,i){const r=mX(t,this.table,i);this.rowResizeLine.setAttributes({visible:!0,y:r,points:[{y:0,x:0},{y:0,x:this.table.getColsWidth(0,this.table.colCount-1)}]}),this.rowResizeBgLine.setAttributes({visible:!0,y:r,points:[{y:0,x:0},{y:0,x:this.table.getColsWidth(0,this.table.colCount-1)}]}),this.labelVisible&&(this.rowResizeLabel.showAll(),this.rowResizeLabel.setAttributes({visible:!0,y:r,x:e}),this.rowResizeLabel.lastChild.setAttribute("text",`${this.table.getRowHeight(t)}px`))}updateResizeRow(t,e,i){const r=mX(t,this.table,i);this.rowResizeLine.setAttributes({y:r,points:[{y:0,x:0},{y:0,x:this.table.getColsWidth(0,this.table.colCount-1)}]}),this.rowResizeBgLine.setAttributes({y:r,points:[{y:0,x:0},{y:0,x:this.table.getColsWidth(0,this.table.colCount-1)}]}),this.labelVisible&&(this.rowResizeLabel.setAttributes({y:r,x:e}),this.rowResizeLabel.lastChild.setAttribute("text",`${Math.floor(this.table.getRowHeight(t))}px`))}hideMoveCol(){this.cellMover.hide()}showMoveCol(t,e,i){return this.cellMover.show(t,e,i)}updateMoveCol(t,e,i,r){this.cellMover.update(t,e,i,r)}setFrozenColumnShadow(t,e){var i,r;const o=J1(t,this.table,e);t<0||((r=(i=this.table.theme.frozenColumnLine)===null||i===void 0?void 0:i.shadow)===null||r===void 0?void 0:r.visible)!=="always"?this.frozenShadowLine.setAttributes({visible:!1,x:o,height:this.table.getDrawRange().height}):this.frozenShadowLine.setAttributes({visible:!0,x:o,height:this.table.getDrawRange().height})}setRightFrozenColumnShadow(t){var e,i;const r=J1(t,this.table,!0);t>=this.table.colCount||((i=(e=this.table.theme.frozenColumnLine)===null||e===void 0?void 0:e.shadow)===null||i===void 0?void 0:i.visible)!=="always"?this.rightFrozenShadowLine.setAttributes({visible:!1,x:r-this.rightFrozenShadowLine.attribute.width,height:this.table.getDrawRange().height}):this.rightFrozenShadowLine.setAttributes({visible:!0,x:r-this.rightFrozenShadowLine.attribute.width,height:this.table.getDrawRange().height})}hideFrozenColumnShadow(){var t,e,i,r,o;const a=(e=(t=this.table.theme.frozenColumnLine)===null||t===void 0?void 0:t.shadow)===null||e===void 0?void 0:e.visible;((o=(r=(i=this.table.theme.frozenColumnLine)===null||i===void 0?void 0:i.shadow)===null||r===void 0?void 0:r.visible)!==null&&o!==void 0?o:a)==="scrolling"&&(this.frozenShadowLine.setAttribute("visible",!1),this.rightFrozenShadowLine.setAttribute("visible",!1),this.table.scenegraph.updateNextFrame())}showFrozenColumnShadow(){var t,e,i,r,o;const a=(e=(t=this.table.theme.frozenColumnLine)===null||t===void 0?void 0:t.shadow)===null||e===void 0?void 0:e.visible;((o=(r=(i=this.table.theme.frozenColumnLine)===null||i===void 0?void 0:i.shadow)===null||r===void 0?void 0:r.visible)!==null&&o!==void 0?o:a)==="scrolling"&&(this.frozenShadowLine.setAttribute("visible",!0),this.rightFrozenShadowLine.setAttribute("visible",!0),this.table.scenegraph.updateNextFrame())}hideVerticalScrollBar(){var t;const e=this.table.theme.scrollStyle.visible,i=(t=this.table.theme.scrollStyle.verticalVisible)!==null&&t!==void 0?t:e;i!=="focus"&&i!=="scrolling"||(this.vScrollBar.setAttribute("visible",!1),this.vScrollBar.hideAll(),this.table.scenegraph.updateNextFrame())}showVerticalScrollBar(){var t;const e=this.table.theme.scrollStyle.visible,i=(t=this.table.theme.scrollStyle.verticalVisible)!==null&&t!==void 0?t:e;i!=="focus"&&i!=="scrolling"||(this.vScrollBar.setAttribute("visible",!0),this.vScrollBar.showAll(),this.table.scenegraph.updateNextFrame())}hideHorizontalScrollBar(){var t;const e=this.table.theme.scrollStyle.visible,i=(t=this.table.theme.scrollStyle.horizontalVisible)!==null&&t!==void 0?t:e;i!=="focus"&&i!=="scrolling"||(this.hScrollBar.setAttribute("visible",!1),this.hScrollBar.hideAll(),this.table.scenegraph.updateNextFrame())}showHorizontalScrollBar(){var t;const e=this.table.theme.scrollStyle.visible,i=(t=this.table.theme.scrollStyle.horizontalVisible)!==null&&t!==void 0?t:e;i!=="focus"&&i!=="scrolling"||(this.hScrollBar.setAttribute("visible",!0),this.hScrollBar.showAll(),this.table.scenegraph.updateNextFrame())}updateVerticalScrollBarPos(t){const e=this.vScrollBar.attribute.range,i=e[1]-e[0],r=t*(1-i);this.vScrollBar.setAttribute("range",[r,r+i]);const o=this.vScrollBar.AABBBounds&&this.vScrollBar.globalAABBBounds;this.vScrollBar._viewPosition={x:o.x1,y:o.y1}}updateHorizontalScrollBarPos(t){const e=this.hScrollBar.attribute.range,i=e[1]-e[0],r=t*(1-i);this.hScrollBar.setAttribute("range",[r,r+i]);const o=this.hScrollBar.AABBBounds&&this.hScrollBar.globalAABBBounds;this.hScrollBar._viewPosition={x:o.x1,y:o.y1}}updateStyle(){var t,e,i,r,o,a,s,l,h,u,d,c,f,g,p,v,m,y,b,_,w,C,x;const S=this.table.theme,A=(t=S.scrollStyle)===null||t===void 0?void 0:t.scrollRailColor,T=(e=S.scrollStyle)===null||e===void 0?void 0:e.scrollSliderColor,M=(i=S.scrollStyle)===null||i===void 0?void 0:i.scrollSliderCornerRadius,R=(r=S.scrollStyle)===null||r===void 0?void 0:r.width,L=(o=S.scrollStyle)===null||o===void 0?void 0:o.horizontalPadding,B=(a=S.scrollStyle)===null||a===void 0?void 0:a.verticalPadding;let P;P=Y(M)?{cornerRadius:M,fill:T}:{fill:T},this.hScrollBar.setAttributes({height:R,padding:L,railStyle:{fill:A},sliderStyle:P}),this.vScrollBar.setAttributes({width:R,padding:B,railStyle:{fill:A},sliderStyle:P});const k=(s=S.columnResize)===null||s===void 0?void 0:s.lineColor,E=(l=S.columnResize)===null||l===void 0?void 0:l.lineWidth,D=(h=S.columnResize)===null||h===void 0?void 0:h.bgColor,I=(u=S.columnResize)===null||u===void 0?void 0:u.width;this.columnResizeLine.setAttributes({stroke:k,lineWidth:E}),this.columnResizeBgLine=Wi({stroke:D,lineWidth:I});const O=(d=S.columnResize)===null||d===void 0?void 0:d.labelColor,H=(c=S.columnResize)===null||c===void 0?void 0:c.labelFontSize,F=(f=S.columnResize)===null||f===void 0?void 0:f.labelFontFamily,N=(g=S.columnResize)===null||g===void 0?void 0:g.labelBackgroundFill,$=(p=S.columnResize)===null||p===void 0?void 0:p.labelBackgroundCornerRadius,V=(m=(v=S.columnResize)===null||v===void 0?void 0:v.labelVisible)===null||m===void 0||m;this.labelVisible=V,this.columnResizeLabel.lastChild.setAttributes({fontSize:H,fill:O,fontFamily:F,dy:-H/2}),this.columnResizeLabel.firstChild.setAttributes({fill:N,width:5*H*.8,height:H+8,cornerRadius:$,dy:-H/2-4}),this.rowResizeLabel.lastChild.setAttributes({fontSize:H,fill:O,fontFamily:F,dy:-H/2}),this.rowResizeLabel.firstChild.setAttributes({fill:N,width:5*H*.8,height:H+8,cornerRadius:$,dy:-H/2-4});const X=(b=(y=S.frozenColumnLine)===null||y===void 0?void 0:y.shadow)===null||b===void 0?void 0:b.width,Z=(w=(_=S.frozenColumnLine)===null||_===void 0?void 0:_.shadow)===null||w===void 0?void 0:w.startColor,tt=(x=(C=S.frozenColumnLine)===null||C===void 0?void 0:C.shadow)===null||x===void 0?void 0:x.endColor;this.frozenShadowLine.setAttributes({width:X,fill:{gradient:"linear",x0:0,y0:0,x1:1,y1:0,stops:[{color:Z,offset:0},{color:tt,offset:1}]}}),this.rightFrozenShadowLine.setAttributes({width:X,fill:{gradient:"linear",x0:0,y0:0,x1:1,y1:0,stops:[{color:tt,offset:0},{color:Z,offset:1}]}}),this.cellMover.updateStyle()}}function ts(n,t,e,i,r){var o,a,s,l,h,u;if(!t)return;const d=e==="table",{shadowBlur:c,shadowOffsetX:f,shadowOffsetY:g,shadowColor:p,cornerRadius:v,borderColor:m,borderLineWidth:y,borderLineDash:b}=t;let _=!1;const w={},C={pickable:!1};c&&d&&(C.shadowBlur=c,C.shadowOffsetX=f,C.shadowOffsetY=g,C.shadowColor=p,C.stroke=!0,C.stroke=p,C.lineWidth=1,_=!0),y&&(C.stroke=!0,C.fill=!1,C.stroke=pN(m??"#E1E4E8",i,y),C.lineWidth=y,b&&(C.lineDash=b),C.lineCap="butt"),Array.isArray(m)&&(C.strokeArrayColor=Se(m)),Array.isArray(y)&&(C.strokeArrayWidth=Se(y),C.lineWidth=1),v&&(C.cornerRadius=v,w.cornerRadius=v);const x=C.strokeArrayWidth?C.strokeArrayWidth[0]:(o=C.lineWidth)!==null&&o!==void 0?o:0,S=C.strokeArrayWidth?C.strokeArrayWidth[1]:(a=C.lineWidth)!==null&&a!==void 0?a:0,A=C.strokeArrayWidth?C.strokeArrayWidth[2]:(s=C.lineWidth)!==null&&s!==void 0?s:0,T=C.strokeArrayWidth?C.strokeArrayWidth[3]:(l=C.lineWidth)!==null&&l!==void 0?l:0;if(n.setAttributes(w),!r)if(C.stroke)if(C.x=T/2,C.y=x/2,C.pickable=!1,d){if(v)if(Array.isArray(v)){const L=Se(v);C.cornerRadius=L,w.cornerRadius=L,L[0]&&(L[0]=L[0]+Math.min(T,x)/2),L[1]&&(L[1]=L[1]+Math.min(x,S)/2),L[2]&&(L[2]=L[2]+Math.min(S,A)/2),L[3]&&(L[3]=L[3]+Math.min(A,T)/2)}else if(Rt(y)){const L=[];C.cornerRadius=L,w.cornerRadius=L,L[0]=v+Math.min(T,x)/2,L[1]=v+Math.min(x,S)/2,L[2]=v+Math.min(S,A)/2,L[3]=v+Math.min(A,T)/2}else C.cornerRadius=v+((h=C.lineWidth)!==null&&h!==void 0?h:0)/2,w.cornerRadius=v+((u=C.lineWidth)!==null&&u!==void 0?u:0)/2;let M,R;if(t.innerBorder?(C.x=n.attribute.x+T/2,C.y=n.attribute.y+x/2,C.width=n.attribute.width-T/2-S/2,C.height=n.attribute.height-x/2-A/2):(C.x=n.attribute.x-T/2,C.y=n.attribute.y-x/2,C.width=n.attribute.width+T/2+S/2,C.height=n.attribute.height+x/2+A/2),_){C.fill="white",C.notAdjustPos=!0,R=AS(C),R.name="table-border-rect",M=ei({x:T/2,y:x/2,width:n.attribute.width,height:n.attribute.height,fill:"red",cornerRadius:n.attribute.cornerRadius,globalCompositeOperation:"destination-out"}),R.addChild(M);const L=ei({x:T/2,y:x/2,width:n.attribute.width,height:n.attribute.height,fill:"transparent",pickable:!1,globalCompositeOperation:"source-over"});R.addChild(L)}else R=ei(C),R.name="table-border-rect";t.innerBorder&&!_?n.parent.insertAfter(R,n):n.parent.insertBefore(R,n),n.border=R}else{C.width=n.attribute.width-T/2-S/2,C.height=n.attribute.height-x/2-A/2;const M=ei(C);M.name="border-rect",n.addChild(M),n.border=M}else{const M=ei({fill:!1,stroke:!1,pickable:!1,lineWidth:0});M.name="border-rect",n.addChild(M),n.border=M}}function yX(n,t,e){var i;if(!t)return;const{borderColor:r}=t;(i=n.border)===null||i===void 0||i.setAttribute("stroke",pN(r,e))}function pN(n,t,e){let i=!0;return!t&&!Rt(e)||Rt(n)?t?i=t:t||Rt(n)?Rt(n)&&(i=!0):i=n:i=(t??e).map((r=>!!r&&n)),i}function Kl(n){var t,e,i,r;if(!n.border)return;const o=n.border.attribute.strokeArrayWidth?n.border.attribute.strokeArrayWidth[0]:(t=n.border.attribute.lineWidth)!==null&&t!==void 0?t:0,a=n.border.attribute.strokeArrayWidth?n.border.attribute.strokeArrayWidth[1]:(e=n.border.attribute.lineWidth)!==null&&e!==void 0?e:0,s=n.border.attribute.strokeArrayWidth?n.border.attribute.strokeArrayWidth[2]:(i=n.border.attribute.lineWidth)!==null&&i!==void 0?i:0,l=n.border.attribute.strokeArrayWidth?n.border.attribute.strokeArrayWidth[3]:(r=n.border.attribute.lineWidth)!==null&&r!==void 0?r:0;n.border.setAttributes({borderLeft:l,borderTop:o,borderRight:a,borderBottom:s,width:n.attribute.width-l/2-a/2,height:n.attribute.height-o/2-s/2}),n.border.type==="group"&&n.border.firstChild.setAttributes({width:n.attribute.width,height:n.attribute.height})}function AZt(n){if(!n.theme.frameStyle.cornerRadius)return;const t=n.theme.frameStyle.cornerRadius,{cornerHeaderGroup:e,colHeaderGroup:i,rowHeaderGroup:r,bodyGroup:o,rightTopCornerGroup:a,leftBottomCornerGroup:s,rightBottomCornerGroup:l,rightFrozenGroup:h,bottomFrozenGroup:u}=n.scenegraph;e.setAttribute("cornerRadius",0),i.setAttribute("cornerRadius",0),r.setAttribute("cornerRadius",0),o.setAttribute("cornerRadius",0),a.setAttribute("cornerRadius",0),s.setAttribute("cornerRadius",0),l.setAttribute("cornerRadius",0),h.setAttribute("cornerRadius",0),u.setAttribute("cornerRadius",0);const d=hs(t);e.attribute.width>0&&e.attribute.height>0?Br(e,[d[0],0,0,0]):i.attribute.height>0?Br(i,[d[0],0,0,0]):r.attribute.width>0?Br(r,[d[0],0,0,0]):Br(o,[d[0],0,0,0]),s.attribute.width>0&&s.attribute.height>0?Br(s,[0,0,0,d[3]]):u.attribute.height>0?Br(u,[0,0,0,d[3]]):r.attribute.width>0?Br(r,[0,0,0,d[3]]):Br(o,[0,0,0,d[3]]),a.attribute.width>0&&a.attribute.height>0?Br(a,[0,d[1],0,0]):i.attribute.height>0?Br(i,[0,d[1],0,0]):h.attribute.width>0?Br(h,[0,d[1],0,0]):Br(o,[0,d[1],0,0]),l.attribute.width>0&&l.attribute.height>0?Br(l,[0,0,d[2],0]):h.attribute.width>0?Br(h,[0,0,d[2],0]):u.attribute.height>0?Br(u,[0,0,d[2],0]):Br(o,[0,0,d[2],0])}function Br(n,t){n.setAttribute("cornerRadius",t),n.border&&n.border.setAttribute("cornerRadius",t)}function nht(n,t){var e,i,r,o,a,s,l,h,u,d,c;let f,g;if(n.role==="cell"&&Y(n.mergeStartCol)&&Y(n.mergeStartRow)&&Y(n.mergeEndCol)&&Y(n.mergeEndRow)){const{colStart:v,colEnd:m,rowStart:y,rowEnd:b}=Ad(n,t.scenegraph);for(let _=v;_<=m;_++)for(let w=y;w<=b;w++){const C=bX(t.stateManager,_,w,n);!C||f&&C!=="cellBgColor"||(f=C)}}else n.role==="cell"&&(f=bX(t.stateManager,n.col,n.row,n));if(!f)return;const p=t.internalProps.layoutMap;return p.isCornerHeader(n.col,n.row)?g=((e=t.theme.cornerHeaderStyle)===null||e===void 0?void 0:e.hover)||((i=t.theme.headerStyle)===null||i===void 0?void 0:i.hover):p.isColumnHeader(n.col,n.row)?g=(r=t.theme.headerStyle)===null||r===void 0?void 0:r.hover:p.isRowHeader(n.col,n.row)?g=(o=t.theme.rowHeaderStyle)===null||o===void 0?void 0:o.hover:p.isBottomFrozenRow(n.col,n.row)?g=((a=t.theme.bottomFrozenStyle)===null||a===void 0?void 0:a.hover)||(t.isListTable()?(s=t.theme.bodyStyle)===null||s===void 0?void 0:s.hover:(l=t.theme.headerStyle)===null||l===void 0?void 0:l.hover):p.isRightFrozenColumn(n.col,n.row)?g=((h=t.theme.rightFrozenStyle)===null||h===void 0?void 0:h.hover)||(t.isListTable()?(u=t.theme.bodyStyle)===null||u===void 0?void 0:u.hover:(d=t.theme.rowHeaderStyle)===null||d===void 0?void 0:d.hover):t.isHeader(n.col,n.row)||(g=(c=t.theme.bodyStyle)===null||c===void 0?void 0:c.hover),gt(f,g,n.col,n.row,t)}function bX(n,t,e,i){var r;const{highlightScope:o,disableHeader:a,cellPos:s}=n.hover,l=n.table,h=l.isHeader(t,e);if(h&&a)return;let u;if(o===Ee.single&&s.col===t&&s.row===e?u="cellBgColor":o===Ee.column&&s.col===t?u=s.col===t&&s.row===e?"cellBgColor":"inlineColumnBgColor":o===Ee.row&&s.row===e?u=s.col===t&&s.row===e?"cellBgColor":"inlineRowBgColor":o===Ee.cross&&(s.col===t&&s.row===e?u="cellBgColor":s.col===t?u="inlineColumnBgColor":s.row===e&&(u="inlineRowBgColor")),u){let d;if(h){const c=l.getHeaderDefine(t,e);d=c?.disableHeaderHover,i.firstChild&&i.firstChild.name==="axis"&&(!((r=l.options.hover)===null||r===void 0)&&r.disableAxisHover)&&(d=!0)}else{const c=l.getBodyColumnDefine(t,e);d=c?.disableHover}d&&(u=void 0)}return u}const vN=dr();class Dp extends og{constructor(t,e){if(super(e),this.type="chart",this.numberType=vN,this.isShareChartSpec=t,e.chartInstance)this.chartInstance=e.chartInstance;else{const i=this.chartInstance=new e.ClassType(e.spec,oi({},this.attribute.tableChartOption,{renderCanvas:e.canvas,mode:this.attribute.mode==="node"?"node":"desktop-browser",modeParams:this.attribute.modeParams,canvasControled:!1,viewBox:{x1:0,x2:0,y1:0,y2:0},dpr:e.dpr,interactive:!1,animation:!1,autoFit:!1}));i.renderSync(),i.getStage().enableDirtyBounds(),e.chartInstance=this.chartInstance=i}}activate(t){var e,i,r,o,a;this.active=!0;const{col:s,row:l}=this.parent,h=nht(this.parent,t),{x1:u,y1:d,x2:c,y2:f}=this.getViewBox(),g=TZt(s,l,t).intersect({x1:u-t.scrollLeft,x2:c-t.scrollLeft,y1:d-t.scrollTop,y2:f-t.scrollTop});(e=this.activeChartInstance)===null||e===void 0||e.release(),this.activeChartInstance=new this.attribute.ClassType(this.attribute.spec,oi({},this.attribute.tableChartOption,{renderCanvas:this.attribute.canvas,mode:"desktop-browser",canvasControled:!1,viewBox:{x1:0,x2:c-u,y1:0,y2:f-d},dpr:t.internalProps.pixelRatio,animation:!1,interactive:!0,autoFit:!1,beforeRender:y=>{const b=this.stage,_=y.window.getContext(),w=b.window.getViewBoxTransform(),C=b.window.getViewBox();_.inuse=!0,_.clearMatrix(),_.setTransform(w.a,w.b,w.c,w.d,w.e,w.f,!0),_.translate(C.x1,C.y1),_.setTransformForCurrent(!0),_.beginPath(),_.rect(g.x1,g.y1,g.x2-g.x1,g.y2-g.y1),_.clip(),_.clearMatrix(),t.options.canvas&&!y.needRender&&(y.pauseRender(),t.scenegraph.stage.dirtyBounds.union(this.globalAABBBounds),t.scenegraph.updateNextFrame())},afterRender(y){y.window.getContext().inuse=!1,y.needRender=!1,p.resumeRender()},renderHooks:{afterClearRect(y){const{context:b,layer:_,viewBox:w}=y;_.main&&y.clear&&h&&(b.beginPath(),b.fillStyle=h,b.rect(w.x1,w.y1,w.x2-w.x1,w.y2-w.y1),b.fill())}}}));const p=this.activeChartInstance.getStage(),v=this.globalTransMatrix.clone(),m=this.stage.window.getViewBoxTransform();v.multiply(m.a,m.b,m.c,m.d,m.e,m.f),p.window.setViewBoxTransform&&p.window.setViewBoxTransform(v.a,v.b,v.c,v.d,v.e,v.f),this.activeChartInstance.renderSync(),(r=(i=t.internalProps.layoutMap)===null||i===void 0?void 0:i.updateDataStateToActiveChartInstance)===null||r===void 0||r.call(i,this.activeChartInstance),this.activeChartInstance.on("click",(y=>{var b;((b=this.attribute.spec.select)===null||b===void 0?void 0:b.enable)===!1?t.scenegraph.updateChartState(null):Dp.temp&&t.scenegraph.updateChartState(y?.datum)})),this.activeChartInstance.on("brushEnd",(y=>{var b;t.scenegraph.updateChartState((b=y?.value)===null||b===void 0?void 0:b.inBrushData),Dp.temp=0,setTimeout((()=>{Dp.temp=1}),0)})),(a=(o=t)._bindChartEvent)===null||a===void 0||a.call(o,this.activeChartInstance)}deactivate(){var t,e;this.active=!1,(t=this.activeChartInstance)===null||t===void 0||t.updateViewBox({x1:-1e3,x2:-800,y1:-1e3,y2:-800},!1,!1),(e=this.activeChartInstance)===null||e===void 0||e.release(),this.activeChartInstance=null}updateData(t){this.attribute.data=t}getViewBox(){var t,e,i,r,o,a,s,l;const h=this.parent,u=this.attribute.cellPadding,d=this.stage.table,{x1:c,y1:f,x2:g,y2:p}=h.globalAABBBounds;return{x1:Math.ceil(c+u[3]+d.scrollLeft+((e=(t=d.options.viewBox)===null||t===void 0?void 0:t.x1)!==null&&e!==void 0?e:0)),x2:Math.ceil(c+h.attribute.width-u[1]+d.scrollLeft+((r=(i=d.options.viewBox)===null||i===void 0?void 0:i.x1)!==null&&r!==void 0?r:0)),y1:Math.ceil(f+u[0]+d.scrollTop+((a=(o=d.options.viewBox)===null||o===void 0?void 0:o.y1)!==null&&a!==void 0?a:0)),y2:Math.ceil(f+h.attribute.height-u[2]+d.scrollTop+((l=(s=d.options.viewBox)===null||s===void 0?void 0:s.y1)!==null&&l!==void 0?l:0))}}}function TZt(n,t,e){var i,r,o,a,s,l,h,u;const{layoutMap:d}=e.internalProps,c=new gd,f=e.scenegraph.tableGroup.globalAABBBounds;return c.x1=f.x1,c.x2=f.x2,c.y1=f.y1,c.y2=f.y2,d.isLeftBottomCorner(n,t)||d.isRightTopCorner(n,t)||d.isLeftTopCorner(n,t)||d.isRightBottomCorner(n,t)||(d.isFrozenColumn(n,t)?(c.y1=f.y1+e.getFrozenRowsHeight(),c.y2=f.y2-e.getBottomFrozenRowsHeight()):d.isFrozenRow(n,t)?(c.x1=f.x1+e.getFrozenColsWidth(),c.x2=f.x2-e.getRightFrozenColsWidth()):d.isRightFrozenColumn(n,t)?(c.y1=f.y1+e.getFrozenRowsHeight(),c.y2=f.y2-e.getBottomFrozenRowsHeight()):d.isBottomFrozenRow(n,t)?(c.x1=f.x1+e.getFrozenColsWidth(),c.x2=f.x2-e.getRightFrozenColsWidth()):d.isFrozenColumn(n,t)||d.isRightFrozenColumn(n,t)||(c.x1=f.x1+e.getFrozenColsWidth(),c.x2=f.x2-e.getRightFrozenColsWidth(),c.y1=f.y1+e.getFrozenRowsHeight(),c.y2=f.y2-e.getBottomFrozenRowsHeight())),c.x1=c.x1+((r=(i=e.options.viewBox)===null||i===void 0?void 0:i.x1)!==null&&r!==void 0?r:0),c.x2=c.x2+((a=(o=e.options.viewBox)===null||o===void 0?void 0:o.x1)!==null&&a!==void 0?a:0),c.y1=c.y1+((l=(s=e.options.viewBox)===null||s===void 0?void 0:s.y1)!==null&&l!==void 0?l:0),c.y2=c.y2+((u=(h=e.options.viewBox)===null||h===void 0?void 0:h.y1)!==null&&u!==void 0?u:0),c}Dp.temp=1;let NA=[],WA=[],rht,rH=5,VA=!1;function _X(n){Y(n)&&(rH=n)}function oH(){NA=[],WA=[],VA=!1,cancelAnimationFrame(rht)}function MZt(){return VA}function oht(n){var t,e,i,r,o,a,s;const{axes:l,dataId:h,data:u,spec:d,ClassType:c,canvas:f,mode:g,modeParams:p,dpr:v}=n.attribute;let{chartInstance:m}=n;m||(m=new c(d,{renderCanvas:f,mode:g==="node"?"node":"desktop-browser",modeParams:p,canvasControled:!1,viewBox:{x1:0,x2:0,y1:0,y2:0},dpr:v,interactive:!1,animation:!1,autoFit:!1}),m.renderSync(),n.chartInstance=m);const y=n.getViewBox();y.x2<=y.x1&&(y.x2=y.x1+1),y.y2<=y.y1&&(y.y2=y.y1+1),m.updateViewBox({x1:0,x2:y.x2-y.x1,y1:0,y2:y.y2-y.y1},!1,!1);const b=m.getStage(),_=n.globalTransMatrix,w=n.stage.window.getViewBoxTransform().clone();w.multiply(_.a,_.b,_.c,_.d,_.e,_.f),b.window.setViewBoxTransform&&b.window.setViewBoxTransform(w.a,w.b,w.c,w.d,w.e,w.f);const{table:C}=n.getRootNode();let x=!1;if(C.options.specFormat){const S=C.options.specFormat(n.attribute.spec,m,n);if(S.needFormatSpec&&S.spec){const A=S.spec;m.updateSpecSync(A),x=(t=S.updateSpec)===null||t===void 0||t}}if(!x)if(l?.forEach(((S,A)=>{var T,M,R,L,B;S.type==="band"?m.updateModelSpec({type:"axes",index:A},{domain:S.domain.slice(0)},!0):m.updateModelSpecSync({type:"axes",index:A},{min:(M=(T=S.range)===null||T===void 0?void 0:T.min)!==null&&M!==void 0?M:0,max:(L=(R=S.range)===null||R===void 0?void 0:R.max)!==null&&L!==void 0?L:0,tick:{tickMode:(B=S.tick)===null||B===void 0?void 0:B.tickMode}},!0)})),(i=(e=C.internalProps.layoutMap)===null||e===void 0?void 0:e.updateDataStateToActiveChartInstance)===null||i===void 0||i.call(e,m),typeof h=="string")m.updateDataSync(h,u??[]);else{const S=[];for(const A in h){const T=h[A],M=d.series.find((R=>{var L;return((L=R?.data)===null||L===void 0?void 0:L.id)===A}));S.push({id:A,values:T?(r=u?.filter((R=>R.hasOwnProperty(T))))!==null&&r!==void 0?r:[]:u??[],fields:(o=M?.data)===null||o===void 0?void 0:o.fields}),m.updateFullDataSync||m.updateDataSync(A,T?(a=u?.filter((R=>R.hasOwnProperty(T))))!==null&&a!==void 0?a:[]:u??[])}(s=m.updateFullDataSync)===null||s===void 0||s.call(m,S)}C.fireListeners("before_cache_chart_image",{chartInstance:m}),RZt(m.getStage(),n)}function aht(n){VA=!0,WA.length>0?rht=requestAnimationFrame((()=>{const t=WA.splice(0,rH);NA.splice(0,rH),t.forEach((e=>{oht(e),e.addUpdateBoundTag()})),n.render(),aht(n)})):VA=!1}const Xs=2e3;function RZt(n,t){var e;const{viewWidth:i,viewHeight:r}=n;if(i<Xs&&r<Xs)return t.cacheCanvas=CX(n),void(t.isShareChartSpec||((e=t.chartInstance)===null||e===void 0||e.release(),t.chartInstance=null,t.setAttribute("chartInstance",null)));const o=Math.ceil(r/Xs),a=Math.ceil(i/Xs),s=[];for(let l=0;l<o;l++)for(let h=0;h<a;h++){const u=h*Xs,d=l*Xs,c=u+Xs>i?i:u+Xs,f=d+Xs>r?r:d+Xs,g=c-u,p=f-d,v=new gd;v.setValue(u,d,c,f);const m=CX(n,!1,v);s.push({canvas:m,x:u,y:d,width:g,height:p})}t.cacheCanvas=s}function CX(n,t=!0,e){if(n.releaseStatus==="released")return null;const i=PZt(n,t,e).getNativeHandler();return i.nativeCanvas?i.nativeCanvas:null}function PZt(n,t=!0,e){const i=n.window.getViewBoxTransform(),r=Kt.get(Mb),o=e?-e.x1:0,a=e?-e.y1:0,s=e?e.x2:n.viewWidth,l=e?e.y2:n.viewHeight,h=e?e.width():n.viewWidth,u=e?e.height():n.viewHeight;return r.create({viewBox:{x1:o,y1:a,x2:s,y2:l},width:h*i.a,height:u*i.d,dpr:n.window.dpr,canvasControled:!0,offscreen:!0,title:""}),r.setViewBoxTransform(i.a,i.b,i.c,i.d,0,0),n.renderTo(r),r}var BZt=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a};const kZt=Symbol.for("ChartRender");let xy=class extends ko{constructor(){super(...arguments),this.numberType=vN}drawShape(n,t,e,i,r,o,a,s){var l,h,u,d;const c=he(n,o?.theme).group,{dataId:f,data:g,spec:p}=n.attribute,{width:v=c.width,height:m=c.height}=(n.getViewBox(),n.attribute),{table:y}=n.getRootNode(),{active:b,cacheCanvas:_,activeChartInstance:w}=n;if(!b&&_)Rt(_)?_.forEach((C=>{const{x,y:S,width:A,height:T,canvas:M}=C;t.drawImage(M,x,S,A,T)})):t.drawImage(_,e,i,v,m);else if(w){if(y.options.specFormat){const T=y.options.specFormat(n.attribute.spec,w,n);if(T.needFormatSpec&&T.spec){const M=T.spec;w.updateSpecSync(M)}}const C=n.getViewBox();w.updateViewBox({x1:0,x2:C.x2-C.x1,y1:0,y2:C.y2-C.y1},!1,!1);const x=w.getStage();x.needRender=!0;const S=n.globalTransMatrix.clone(),A=n.stage.window.getViewBoxTransform().clone();if(A.multiply(S.a,S.b,S.c,S.d,S.e,S.f),x.window.setViewBoxTransform(A.a,A.b,A.c,A.d,A.e,A.f),typeof f=="string")w.updateDataSync(f,g??[]);else{const T=[];for(const M in f){const R=f[M],L=p.series.find((B=>{var P;return((P=B?.data)===null||P===void 0?void 0:P.id)===M}));T.push({id:M,values:R?(l=g?.filter((B=>B.hasOwnProperty(R))))!==null&&l!==void 0?l:[]:g??[],fields:(h=L?.data)===null||h===void 0?void 0:h.fields}),w.updateFullDataSync||w.updateDataSync(M,R?(u=g?.filter((B=>B.hasOwnProperty(R))))!==null&&u!==void 0?u:[]:g??[])}(d=w.updateFullDataSync)===null||d===void 0||d.call(w,T)}}else y.internalProps.renderChartAsync?(NA.indexOf(`${n.parent.col}+${n.parent.row}`)===-1&&(NA.push(`${n.parent.col}+${n.parent.row}`),WA.push(n)),MZt()||aht(y)):oht(n)}draw(n,t,e,i){this._draw(n,{},!1,e,i)}};xy=BZt([wt()],xy);var x2=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a};let GA=class{constructor(){this.time=Oe.beforeFillStroke,this.useStyle=!0,this.order=0}drawShape(n,t,e,i,r,o,a,s,l,h,u,d,c){const{shape:f}=n.attribute;if(f==="circle"){const{width:g=l.width,height:p=l.height}=n.attribute;t.beginPath(),t.arc(e+g/2,i+p/2,Math.min(g,p)/2,0,2*Math.PI),t.closePath(),t.save(),t.clip()}}};GA=x2([wt()],GA);let $A=class{constructor(){this.time=Oe.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(n,t,e,i,r,o,a,s,l,h,u,d,c){const{shape:f}=n.attribute;f==="circle"&&t.restore()}};$A=x2([wt()],$A);let jA=class{constructor(){this.time=Oe.beforeFillStroke,this.useStyle=!0,this.order=0}drawShape(n,t,e,i,r,o,a,s,l,h,u,d,c){const{isGif:f}=n.attribute;f&&n.playing&&(n.attribute.opacity=0)}};jA=x2([wt()],jA);let UA=class{constructor(){this.time=Oe.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(n,t,e,i,r,o,a,s,l,h,u,d,c){const{isGif:f}=n.attribute;f&&n.playing&&(n.attribute.opacity=1,t.globalAlpha=n.attribute.opacity,n.renderFrame(t,e,i))}};UA=x2([wt()],UA);function LZt(n,t){var e,i,r,o,a,s,l,h,u,d,c;let f,g;if(n.role==="cell"&&Y(n.mergeStartCol)&&Y(n.mergeStartRow)&&Y(n.mergeEndCol)&&Y(n.mergeEndRow)){const{colStart:v,colEnd:m,rowStart:y,rowEnd:b}=Ad(n,t.scenegraph);for(let _=v;_<=m;_++)for(let w=y;w<=b;w++){const C=wX(t.stateManager,_,w);!C||f&&C!=="cellBgColor"||(f=C)}}else n.role==="cell"&&(f=wX(t.stateManager,n.col,n.row));if(!f)return;const p=t.internalProps.layoutMap;return p.isCornerHeader(n.col,n.row)?g=((e=t.theme.cornerHeaderStyle)===null||e===void 0?void 0:e.select)||((i=t.theme.headerStyle)===null||i===void 0?void 0:i.select):p.isColumnHeader(n.col,n.row)?g=(r=t.theme.headerStyle)===null||r===void 0?void 0:r.select:p.isRowHeader(n.col,n.row)?g=(o=t.theme.rowHeaderStyle)===null||o===void 0?void 0:o.select:p.isBottomFrozenRow(n.col,n.row)?g=((a=t.theme.bottomFrozenStyle)===null||a===void 0?void 0:a.select)||(t.isListTable()?(s=t.theme.bodyStyle)===null||s===void 0?void 0:s.select:(l=t.theme.headerStyle)===null||l===void 0?void 0:l.select):p.isRightFrozenColumn(n.col,n.row)?g=((h=t.theme.rightFrozenStyle)===null||h===void 0?void 0:h.select)||(t.isListTable()?(u=t.theme.bodyStyle)===null||u===void 0?void 0:u.select:(d=t.theme.rowHeaderStyle)===null||d===void 0?void 0:d.select):t.isHeader(n.col,n.row)||(g=(c=t.theme.bodyStyle)===null||c===void 0?void 0:c.select),gt(f,g,n.col,n.row,t)}function EZt(n){return n.start.col!==n.end.col||n.start.row!==n.end.row}function DZt(n,t,e){let i;const{highlightScope:r,cellPos:o,ranges:a}=n.select,s=a[0],l=Math.min(s.start.col,s.end.col),h=Math.max(s.start.col,s.end.col),u=Math.min(s.start.row,s.end.row),d=Math.max(s.start.row,s.end.row);return r===Ee.single&&o.col===t&&o.row===e?i="cellBgColor":r===Ee.column&&t>=l&&t<=h?i=$a(a[0],t,e)?"cellBgColor":"inlineColumnBgColor":r===Ee.row&&e>=u&&e<=d?i=$a(a[0],t,e)?"cellBgColor":"inlineRowBgColor":r===Ee.cross&&($a(a[0],t,e)?i="cellBgColor":t>=l&&t<=h?i="inlineColumnBgColor":e>=u&&e<=d&&(i="inlineRowBgColor")),i}function IZt(n,t,e){let i;const{highlightScope:r,cellPos:o}=n.select;return r===Ee.single&&o.col===t&&o.row===e?i="cellBgColor":r===Ee.column&&o.col===t?i=o.col===t&&o.row===e?"cellBgColor":"inlineColumnBgColor":r===Ee.row&&o.row===e?i=o.col===t&&o.row===e?"cellBgColor":"inlineRowBgColor":r===Ee.cross&&(o.col===t&&o.row===e?i="cellBgColor":o.col===t?i="inlineColumnBgColor":o.row===e&&(i="inlineRowBgColor")),i}function wX(n,t,e,i){const{highlightInRange:r,disableHeader:o,ranges:a}=n.select;let s;const l=a.length===1&&EZt(a?.[0])&&r;if(l?a?.length===1&&a[0].start&&a[0].end:a?.length===1&&a[0].end.col===a[0].start.col&&a[0].end.row===a[0].start.row){if(n.table.isHeader(t,e)&&o)return;s=l?DZt(n,t,e):IZt(n,t,e),s&&Gu(n.table,t,e)&&(s=void 0)}else if(n.table.theme.selectionStyle.selectionFillMode==="replace")for(let h=0;h<a.length;h++){const u=a[h],d=Math.min(u.start.col,u.end.col),c=Math.max(u.start.col,u.end.col),f=Math.min(u.start.row,u.end.row),g=Math.max(u.start.row,u.end.row);if(d<=t&&f<=e&&c>=t&&g>=e){s="cellBgColor";break}}return s}function Gu(n,t,e){var i,r;const o=(i=n.options.select)===null||i===void 0?void 0:i.disableSelect;if(typeof o=="function"?o(t,e,n):o)return!0;if(n.isHeader(t,e)){let a=(r=n.options.select)===null||r===void 0?void 0:r.disableHeaderSelect;if(a)return!0;const s=n.getHeaderDefine(t,e);if(a=s?.disableHeaderSelect,a)return!0}else{const a=n.getBodyColumnDefine(t,e),s=a?.disableSelect;if(typeof s=="function"?s(t,e,n):s)return!0}return!1}var Jh=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a};let YA=class{constructor(){this.time=Oe.beforeFillStroke,this.useStyle=!0,this.order=0}drawShape(n,t,e,i,r,o,a,s,l,h,u,d,c){const{stroke:f=l.stroke,strokeArrayWidth:g=l.strokeArrayWidth,strokeArrayColor:p=l.strokeArrayColor}=n.attribute;f&&(Array.isArray(g)||Array.isArray(p))&&(c.doStroke=!1)}};YA=Jh([wt()],YA);let XA=class{constructor(){this.time=Oe.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(n,t,e,i,r,o,a,s,l,h,u,d){var c,f;const{stroke:g=l.stroke,strokeArrayColor:p=l.strokeArrayColor,strokeArrayWidth:v=l.strokeArrayWidth,lineWidth:m=l.lineWidth,strokeColor:y=l.stroke,cornerRadius:b=l.cornerRadius}=n.attribute;let _,w,{width:C=l.width,height:x=l.height}=n.attribute;if(g&&(Array.isArray(v)||m!==0)&&(Array.isArray(p)||Array.isArray(v))){if(typeof m=="number"&&1&m||Array.isArray(v)&&v.some((S=>1&S))){const S=n.stage.table;if(!S)return;const A=((c=S?.theme)===null||c===void 0?void 0:c.cellBorderClipDirection)==="bottom-right";if(A){if(e=Math.floor(e)-.5,i=Math.floor(i)-.5,n.role==="cell"){const R=n.col,L=n.row;R===0&&(e+=1),L===0&&(i+=1)}}else e=Math.floor(e)+.5,i=Math.floor(i)+.5;!((f=S.options.customConfig)===null||f===void 0)&&f._disableColumnAndRowSizeRound&&(C=Math.round(C),x=Math.round(x));const{width:T,height:M}=mN(n,Math.ceil(C),Math.ceil(x),A);_=T,w=M}else _=Math.ceil(C),w=Math.ceil(x);b===0||Rt(b)&&b.every((S=>S===0))?lht(n,t,e,i,l,g,v||m,p||y,_,w):(t.beginPath(),Il(t,e,i,_,w,b,!0,new Array(4).fill(0).map(((S,A)=>(T,M,R,L)=>{uht(A,T,M,R,L,n,t,e,i,l,g,v||m,p||y,_,w)}))),t.stroke())}}};XA=Jh([wt()],XA);function sht(n){if(!Array.isArray(n))return{isSplitDraw:!1,width:n};let t;for(let e=0;e<n.length;e++){const i=n[e];if(i)if(t){if(i!==t)return{isSplitDraw:!0}}else t=i}return{isSplitDraw:!1,width:t}}function lht(n,t,e,i,r,o,a,s,l,h,u,d){var c,f,g,p;const v=sht(a),m=!Array.isArray(a),y=!Array.isArray(o),b=Array.isArray(d),_=Array.isArray(s)||v.isSplitDraw;t.setStrokeStyle(n,n.attribute,e,i,r);const{lineDash:w=r.lineDash}=n.attribute;let C=!1;w.length&&w.some((M=>Array.isArray(M)))&&(C=!0),t.beginPath(),t.moveTo(e,i);const x=(y||o[0])&&(m||a[0]),S=(y||o[1])&&(m||a[1]),A=(y||o[2])&&(m||a[2]),T=(y||o[3])&&(m||a[3]);if(x){const M=(m?v.width:a[0])/2,R=(m?v.width:a[0])/2;b&&Array.isArray(d[0])?(t.moveTo(e-M+(l+M+R)*d[0][0],i),t.lineTo(e-M+(l+M+R)*(d[0][1]-d[0][0]),i),t.moveTo(e+l+R,i)):(t.moveTo(e-M,i),t.lineTo(e+l+R,i)),(_||C)&&(s&&s[0]?t.strokeStyle=s[0]:s&&!s[0]&&(t.strokeStyle="transparent"),m||(t.lineWidth=a[0]),t.lineDashOffset=t.currentMatrix.e/t.currentMatrix.a,C&&t.setLineDash((c=w[0])!==null&&c!==void 0?c:[]),t.stroke(),t.beginPath(),t.moveTo(e+l,i))}else t.moveTo(e+l,i);if(S){const M=(m?v.width:a[1])/2,R=(m?v.width:a[1])/2;b&&Array.isArray(d[1])?(t.moveTo(e+l,i-M+h*d[1][0]),t.lineTo(e+l,i-M+(h+M+R)*(d[1][1]-d[1][0])),t.moveTo(e+l,i+h+R)):(t.moveTo(e+l,i-M),t.lineTo(e+l,i+h+R)),(_||C)&&(s&&s[1]?t.strokeStyle=s[1]:s&&!s[1]&&(t.strokeStyle="transparent"),m||(t.lineWidth=a[1]),t.lineDashOffset=t.currentMatrix.f/t.currentMatrix.d,C&&t.setLineDash((f=w[1])!==null&&f!==void 0?f:[]),t.stroke(),t.beginPath(),t.moveTo(e+l,i+h))}else t.moveTo(e+l,i+h);if(A){const M=(m?v.width:a[2])/2,R=(m?v.width:a[2])/2;b&&Array.isArray(d[2])?(t.moveTo(e-M+(l+M+R)*d[2][0],i+h),t.lineTo(e-M+(l+M+R)*(d[2][1]-d[2][0]),i+h),t.moveTo(e-M,i+h)):(t.moveTo(e-M,i+h),t.lineTo(e+l+R,i+h)),(_||C)&&(s&&s[2]?t.strokeStyle=s[2]:s&&!s[2]&&(t.strokeStyle="transparent"),m||(t.lineWidth=a[2]),t.lineDashOffset=t.currentMatrix.e/t.currentMatrix.a,C&&t.setLineDash((g=w[2])!==null&&g!==void 0?g:[]),t.stroke(),t.beginPath(),t.moveTo(e,i+h))}else t.moveTo(e,i+h);if(T){const M=(m?v.width:a[3])/2,R=(m?v.width:a[3])/2;b&&Array.isArray(d[3])?(t.moveTo(e,i-M+(h+M+R)*d[3][0]),t.lineTo(e,i-M+(h+M+R)*(d[3][1]-d[3][0])),t.moveTo(e,i-M)):(t.moveTo(e,i-M),t.lineTo(e,i+h+R)),(_||C)&&(s&&s[3]?t.strokeStyle=s[3]:s&&!s[3]&&(t.strokeStyle="transparent"),m||(t.lineWidth=a[3]),t.lineDashOffset=t.currentMatrix.f/t.currentMatrix.d,C&&t.setLineDash((p=w[3])!==null&&p!==void 0?p:[]),t.stroke(),t.beginPath(),t.moveTo(e,i))}else t.moveTo(e,i);_||C||(!m&&v.width&&(t.lineWidth=v.width),t.stroke()),t.lineDashOffset=0,t.setLineDash([])}let qA=class{constructor(){this.time=Oe.beforeFillStroke,this.useStyle=!0,this.order=0}drawShape(n,t,e,i,r,o,a,s,l,h,u,d,c){var f;const{lineDash:g=l.lineDash,stroke:p=l.stroke,strokeArrayColor:v=l.strokeArrayColor,strokeArrayWidth:m=l.strokeArrayWidth}=n.attribute;p&&Array.isArray(g)&&g.length&&(!((f=g[0])===null||f===void 0)&&f.length)&&!Array.isArray(v)&&!Array.isArray(m)&&(c.doStroke=!1)}};qA=Jh([wt()],qA);let KA=class{constructor(){this.time=Oe.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(n,t,e,i,r,o,a,s,l,h,u,d){var c,f,g,p,v,m;const{lineDash:y=l.lineDash,stroke:b=l.stroke,strokeArrayColor:_=l.strokeArrayColor,strokeArrayWidth:w=l.strokeArrayWidth,lineWidth:C=l.lineWidth}=n.attribute;if(!b||!(Array.isArray(y)&&y.length&&(!((c=y[0])===null||c===void 0)&&c.length))||Array.isArray(_)||Array.isArray(w))return;const x=n.stage.table;if(!x)return;const S=Rt(y[0])?OZt(y):[y,y,y,y];let A,T,{width:M=l.width,height:R=l.height}=n.attribute;if(!((f=x.options.customConfig)===null||f===void 0)&&f._disableColumnAndRowSizeRound?(M=Math.round(M),R=Math.round(R)):(M=Math.ceil(M),R=Math.ceil(R)),1&C){const L=x.theme.cellBorderClipDirection==="bottom-right",B=0,P=0;L?(e=Math.floor(e)-.5,i=Math.floor(i)-.5,n.role==="cell"&&(n.col===0&&(e+=1),n.row===0&&(i+=1))):(e=Math.floor(e)+.5,i=Math.floor(i)+.5);const{width:k,height:E}=mN(n,Math.ceil(M+B),Math.ceil(R+P),L);A=k,T=E}else A=Math.ceil(M),T=Math.ceil(R);t.setStrokeStyle(n,n.attribute,e,i,l),t.beginPath(),t.moveTo(e,i),t.lineTo(e+A,i),t.lineDashOffset=t.currentMatrix.e/t.currentMatrix.a,t.setLineDash((g=S[0])!==null&&g!==void 0?g:[]),t.stroke(),t.beginPath(),t.moveTo(e+A,i),t.lineTo(e+A,i+T),t.lineDashOffset=t.currentMatrix.f/t.currentMatrix.d,t.setLineDash((p=S[1])!==null&&p!==void 0?p:[]),t.stroke(),t.beginPath(),t.moveTo(e,i+T),t.lineTo(e+A,i+T),t.lineDashOffset=t.currentMatrix.e/t.currentMatrix.a,t.setLineDash((v=S[2])!==null&&v!==void 0?v:[]),t.stroke(),t.beginPath(),t.moveTo(e,i),t.lineTo(e,i+T),t.lineDashOffset=t.currentMatrix.f/t.currentMatrix.d,t.setLineDash((m=S[3])!==null&&m!==void 0?m:[]),t.stroke(),t.lineDashOffset=0,t.setLineDash([])}};KA=Jh([wt()],KA);let ZA=class{constructor(){this.time=Oe.beforeFillStroke,this.useStyle=!0,this.order=0}drawShape(n,t,e,i,r,o,a,s,l,h,u,d,c){const{lineWidth:f=l.lineWidth,stroke:g=l.stroke,lineDash:p=l.lineDash,strokeArrayWidth:v=l.strokeArrayWidth,strokeArrayColor:m=l.strokeArrayColor,notAdjustPos:y}=n.attribute;y!==!0&&g&&Array.isArray(p)&&!p.length&&!Array.isArray(m)&&!Array.isArray(v)&&1&f&&(c.doStroke=!1)}};ZA=Jh([wt()],ZA);let JA=class{constructor(){this.time=Oe.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(n,t,e,i,r,o,a,s,l,h,u,d){var c,f;const{lineWidth:g=l.lineWidth,stroke:p=l.stroke,lineDash:v=l.lineDash,strokeArrayWidth:m=l.strokeArrayWidth,strokeArrayColor:y=l.strokeArrayColor,notAdjustPos:b,cornerRadius:_=l.cornerRadius}=n.attribute;let{width:w=l.width,height:C=l.height}=n.attribute;if(b!==!0&&p&&Array.isArray(v)&&!v.length&&!Array.isArray(y)&&!Array.isArray(m)&&1&g){const x=n.stage.table;if(!x)return;!((c=x.options.customConfig)===null||c===void 0)&&c._disableColumnAndRowSizeRound&&(w=Math.round(w),C=Math.round(C)),t.beginPath();const S=((f=x?.theme)===null||f===void 0?void 0:f.cellBorderClipDirection)==="bottom-right",A=0,T=0;S?(e=Math.floor(e)-.5,i=Math.floor(i)-.5,n.role==="cell"&&(n.col===0&&(e+=1),n.row===0&&(i+=1))):(e=Math.floor(e)+.5,i=Math.floor(i)+.5);const{width:M,height:R}=mN(n,Math.ceil(w),Math.ceil(C),S);_?Il(t,e,i,M+A,R+T,_):t.rect(e,i,M,R),t.setStrokeStyle(n,n.attribute,e,i,l),t.stroke()}}};JA=Jh([wt()],JA);let QA=class{constructor(){this.time=Oe.beforeFillStroke,this.useStyle=!0,this.order=0}drawShape(n,t,e,i,r,o,a,s,l,h,u,d,c){if(n.role==="cell"){const f=n.stage.table;if(f){const g=LZt(n,f);if(g)n.attribute._vtableHightLightFill=g;else if(f.stateManager.interactionState!==Xt.scrolling){const p=nht(n,f);p&&(n.attribute._vtableHightLightFill=p)}}}}};QA=Jh([wt()],QA);let tT=class{constructor(){this.time=Oe.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(n,t,e,i,r,o,a,s,l,h,u,d){if(n.attribute._vtableHightLightFill&&!u){if(a){const c=n.attribute.fill;n.attribute.fill=n.attribute._vtableHightLightFill,t.setCommonStyle(n,n.attribute,e,i,l),t.fill(),n.attribute.fill=c,n.attribute._vtableHightLightFill=void 0}}}};tT=Jh([wt()],tT);let eT=class{constructor(){this.time=Oe.beforeFillStroke,this.useStyle=!0,this.order=0}drawShape(n,t,e,i,r,o,a,s,l,h,u,d,c){var f,g,p,v,m,y;const b=n.stage.table;b&&(n.role==="body"?Zl(t,-((f=n.attribute.x)!==null&&f!==void 0?f:0)+b.getFrozenColsWidth(),-((g=n.attribute.y)!==null&&g!==void 0?g:0)+b.getFrozenRowsHeight(),n.parent.attribute.width-b.getFrozenColsWidth()-b.getRightFrozenColsWidth(),n.parent.attribute.height-b.getFrozenRowsHeight()-b.getBottomFrozenRowsHeight()):n.role==="row-header"?Zl(t,0,-((p=n.attribute.y)!==null&&p!==void 0?p:0)+b.getFrozenRowsHeight(),b.getFrozenColsWidth(),n.parent.attribute.height-b.getFrozenRowsHeight()-b.getBottomFrozenRowsHeight()):n.role==="col-header"?Zl(t,-((v=n.attribute.x)!==null&&v!==void 0?v:0)+b.getFrozenColsWidth(),0,n.parent.attribute.width-b.getFrozenColsWidth()-b.getRightFrozenColsWidth(),b.getFrozenRowsHeight()):n.role==="right-frozen"?Zl(t,0,-((m=n.attribute.y)!==null&&m!==void 0?m:0)+b.getFrozenRowsHeight(),b.getRightFrozenColsWidth(),n.parent.attribute.height-b.getFrozenRowsHeight()-b.getBottomFrozenRowsHeight()):n.role==="bottom-frozen"?Zl(t,-((y=n.attribute.x)!==null&&y!==void 0?y:0)+b.getFrozenColsWidth(),0,n.parent.attribute.width-b.getFrozenColsWidth()-b.getRightFrozenColsWidth(),b.getBottomFrozenRowsHeight()):n.role==="corner-header"?Zl(t,0,0,b.getFrozenColsWidth(),b.getFrozenRowsHeight()):n.role==="corner-right-top-header"?Zl(t,0,0,b.getRightFrozenColsWidth(),b.getFrozenRowsHeight()):n.role==="corner-right-bottom-header"?Zl(t,0,0,b.getRightFrozenColsWidth(),b.getBottomFrozenRowsHeight()):n.role==="corner-left-bottom-header"&&Zl(t,0,0,b.getFrozenColsWidth(),b.getBottomFrozenRowsHeight()))}};eT=Jh([wt()],eT);const Gg=Math.pow(2,24);function Zl(n,t,e,i,r){n.beginPath();const o=n.applyedMatrix;Math.abs(o.f)>Gg||Math.abs(o.g)>Gg?n.rect(t-Gg,e-Gg,i+2*Gg,r+2*Gg):n.rect(t,e,i,r)}function mN(n,t,e,i){var r,o;const a=n.stage.table;if(!a)return{width:t,height:e};if(n.role==="cell"){let s=n.col,l=n.row;const h=un(a,s,l);h&&(s=h.end.col,l=h.end.row),i?(s===0&&(t-=1),l===0&&(e-=1)):((s===a.colCount-1||s===a.frozenColCount-1&&a.scrollLeft||!((r=a.containerFit)===null||r===void 0)&&r.width&&a.rightFrozenColCount&&s===a.colCount-a.rightFrozenColCount-1)&&(t-=1),(l===a.rowCount-1||l===a.frozenRowCount-1&&a.scrollTop||!((o=a.containerFit)===null||o===void 0)&&o.height&&a.bottomFrozenRowCount&&l===a.rowCount-a.bottomFrozenRowCount-1)&&(e-=1))}else n.role==="corner-frozen"&&(a.scrollLeft&&!i&&(t-=1),a.scrollTop&&!i&&(e-=1));return{width:t,height:e}}function OZt(n){return n.length===1?[n[0],n[0],n[0],n[0]]:n.length===2?[n[0],n[1],n[0],n[1]]:n}var hht=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a};let Sy=class{constructor(){this.time=Oe.beforeFillStroke,this.useStyle=!0,this.order=0}drawShape(n,t,e,i,r,o,a,s,l,h,u,d,c){const{stroke:f=l.stroke,strokeArrayWidth:g=l.strokeArrayWidth,strokeArrayColor:p=l.strokeArrayColor}=n.attribute;f&&(Array.isArray(f)||Array.isArray(g)||Array.isArray(p))&&(c.doStroke=!1)}};Sy=hht([wt()],Sy);let Ay=class{constructor(){this.time=Oe.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(n,t,e,i,r,o,a,s,l,h,u,d){const{width:c=l.width,height:f=l.height,stroke:g=l.stroke,strokeArrayColor:p=l.strokeArrayColor,strokeArrayWidth:v=l.strokeArrayWidth,lineWidth:m=l.lineWidth,strokeColor:y=l.stroke,cornerRadius:b=l.cornerRadius}=n.attribute;g&&(Array.isArray(v)||m!==0)&&(Array.isArray(g)||Array.isArray(p)||Array.isArray(v))&&(n.name!=="border-rect"&&n.name!=="table-border-rect"&&(typeof m=="number"&&1&m||Array.isArray(v)&&v.some((C=>1&C)))&&(e=Math.floor(e)+.5,i=Math.floor(i)+.5),b===0||Rt(b)&&b.every((C=>C===0))?lht(n,t,e,i,l,g,v||m,p||y,n.name!=="table-border-rect"?Math.ceil(c+0):c+0,n.name!=="table-border-rect"?Math.ceil(f+0):f+0):(t.beginPath(),Il(t,e,i,c,f,b,!0,new Array(4).fill(0).map(((C,x)=>(S,A,T,M)=>{uht(x,S,A,T,M,n,t,e,i,l,g,v||m,p||y,Math.ceil(c+0),Math.ceil(f+0))}))),t.stroke()))}};Ay=hht([wt()],Ay);function uht(n,t,e,i,r,o,a,s,l,h,u,d,c,f,g){var p,v,m,y;const b=o,_=h,w=sht(d),C=!Array.isArray(d),x=!Array.isArray(u),S=Array.isArray(c)||w.isSplitDraw;a.stroke(),a.setStrokeStyle(o,o.attribute,s,l,h);const{lineDash:A=_.lineDash}=b.attribute;let T=!1;A.length&&A.some((P=>Array.isArray(P)))&&(T=!0),a.beginPath(),a.moveTo(s,l);const M=(x||u[0])&&(C||d[0]),R=(x||u[1])&&(C||d[1]),L=(x||u[2])&&(C||d[2]),B=(x||u[3])&&(C||d[3]);M&&n===0?(C?w.width:d[0],C?w.width:d[0],a.moveTo(t,e),a.lineTo(i,r),(S||T)&&(c&&c[0]?a.strokeStyle=c[0]:c&&!c[0]&&(a.strokeStyle="transparent"),C||(a.lineWidth=d[0]),a.lineDashOffset=a.currentMatrix.e/a.currentMatrix.a,T&&a.setLineDash((p=A[0])!==null&&p!==void 0?p:[]),a.stroke(),a.beginPath())):n===0&&a.moveTo(s+f,l),R&&n===1?(C?w.width:d[1],C?w.width:d[1],a.moveTo(t,e),a.lineTo(i,r),(S||T)&&(c&&c[1]?a.strokeStyle=c[1]:c&&!c[1]&&(a.strokeStyle="transparent"),C||(a.lineWidth=d[1]),a.lineDashOffset=a.currentMatrix.f/a.currentMatrix.d,T&&a.setLineDash((v=A[1])!==null&&v!==void 0?v:[]),a.stroke(),a.beginPath(),a.moveTo(s+f,l+g))):n===1&&a.moveTo(s+f,l+g),L&&n===2?(C?w.width:d[2],C?w.width:d[2],a.moveTo(t,e),a.lineTo(i,r),(S||T)&&(c&&c[2]?a.strokeStyle=c[2]:c&&!c[2]&&(a.strokeStyle="transparent"),C||(a.lineWidth=d[2]),a.lineDashOffset=a.currentMatrix.e/a.currentMatrix.a,T&&a.setLineDash((m=A[2])!==null&&m!==void 0?m:[]),a.stroke(),a.beginPath(),a.moveTo(s,l+g))):n===2&&a.moveTo(s,l+g),B&&n===3?(C?w.width:d[3],C?w.width:d[3],a.moveTo(t,e),a.lineTo(i,r),(S||T)&&(c&&c[3]?a.strokeStyle=c[3]:c&&!c[3]&&(a.strokeStyle="transparent"),C||(a.lineWidth=d[3]),a.lineDashOffset=a.currentMatrix.f/a.currentMatrix.d,T&&a.setLineDash((y=A[3])!==null&&y!==void 0?y:[]),a.stroke(),a.beginPath(),a.moveTo(s,l))):n===3&&a.moveTo(s,l),a.closePath(),S||T||(!C&&w.width&&(a.lineWidth=w.width),a.stroke()),a.lineDashOffset=0,a.setLineDash([]),a.beginPath()}var HZt=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a};let a0,iT=class{constructor(){this.order=1,this.interceptors=[new zZt]}afterDrawItem(n,t,e,i,r){for(let o=0;o<this.interceptors.length;o++)if(this.interceptors[o].afterDrawItem&&this.interceptors[o].afterDrawItem(n,t,e,i,r))return!0;return!1}beforeDrawItem(n,t,e,i,r){if((!n.in3dMode||e.in3dInterceptor)&&!n.shadowRoot&&!(n.baseGraphic||n.attribute.globalZIndex||n.interactiveGraphic))return!1;for(let o=0;o<this.interceptors.length;o++)if(this.interceptors[o].beforeDrawItem&&this.interceptors[o].beforeDrawItem(n,t,e,i,r))return!0;return!1}};iT=HZt([wt()],iT);class zZt{constructor(){this.order=1}afterDrawItem(t,e,i,r,o){return t.type==="image"&&this.drawItem(t,e,i,r,o),!1}drawItem(t,e,i,r,o){const{image:a,gif:s}=t.attribute;if(s&&t.playing||!a||!t.resources)return!1;const l=t.resources.get(a);if(!l||l.state!=="loading")return!1;if(!a0){const p=ia(),v=p.loading_pic.svg,m=p.loading_pic.width,y=p.loading_pic.height;a0=JM({width:m,height:y,image:v})}const{image:h}=a0.attribute;if(!a||!a0.resources)return!1;const u=a0.resources.get(h);if(u.state!=="success")return!1;const{context:d}=i;d.highPerformanceSave(),t.parent&&d.setTransformFromMatrix(t.parent.globalTransMatrix,!0),t.glyphHost&&t.glyphHost.parent&&d.setTransformFromMatrix(t.glyphHost.parent.globalTransMatrix,!0);const c=t.AABBBounds,{width:f,height:g}=C2(u.data.width,u.data.height,c.width(),c.height());return d.drawImage(u.data,c.x1+(c.width()-f)/2,c.y1+(c.height()-g)/2,f,g),d.highPerformanceRestore(),!0}}var FZt=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a};let nT=class{constructor(){this.time=Oe.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(n,t,e,i,r,o,a,s,l,h,u,d,c){var f,g;const{text:p,underline:v=l.underline,lineThrough:m=l.lineThrough,direction:y=l.direction,whiteSpace:b=l.whiteSpace,fontSize:_=l.fontSize,verticalMode:w=l.verticalMode,ellipsis:C=l.ellipsis,textAlign:x=l.textAlign,textBaseline:S=l.textBaseline,x:A=l.x,y:T=l.y}=n.attribute;let M=!1;if(Array.isArray(n)){const P=(f=n.cache)===null||f===void 0?void 0:f.layoutData;C&&P&&P.lines.every((k=>k.str===""))&&(M=!0)}else{const{cache:P}=n;C&&P&&P.clipedText===""&&P.clipedWidth===0&&(M=!0)}if(!M)return;const R=Li(C)?C:"...",L=(g=L_(n.attribute.lineHeight,_))!==null&&g!==void 0?g:_;let B=0;L!==_&&(S==="top"?B=(L-_)/2:S==="middle"||S==="bottom"&&(B=-(L-_)/2)),o&&(d?d(t,n.attribute,l):s&&(t.setStrokeStyle(n,n.attribute,A-e,T-i,l),t.strokeText(R,A,T+B))),r&&(u?u(t,n.attribute,l):a&&(t.setCommonStyle(n,n.attribute,A-e,T-i,l),t.fillText(R,A,T+B),this.drawUnderLine(v,m,n,A,T+B,0,l,t,R)))}drawUnderLine(n,t,e,i,r,o,a,s,l){if(t+n<=0)return;const{textAlign:h=a.textAlign,textBaseline:u=a.textBaseline,fontSize:d=a.fontSize,fontFamily:c=a.fontFamily,fontWeight:f=a.fontWeight,fontStyle:g=a.fontStyle,fill:p=a.fill,opacity:v=a.opacity,underlineOffset:m=a.underlineOffset,underlineDash:y=a.underlineDash,fillOpacity:b=a.fillOpacity}=e.attribute;if(!n&&!t)return;const _=gN.measureTextWidth(l,{fontSize:d,fontFamily:c,fontWeight:f,fontStyle:g}),w=Sv(h,_),C=Bb(u,d,d),x={lineWidth:0,stroke:p,opacity:v,strokeOpacity:b};if(n){x.lineWidth=n,s.setStrokeStyle(e,x,i,r,a),s.setLineDash(y),s.beginPath();const S=r+C+d+m;s.moveTo(i+w,S,o),s.lineTo(i+w+_,S,o),s.stroke()}if(t){x.lineWidth=t,s.setStrokeStyle(e,x,i,r,a),s.beginPath();const S=r+C+d/2;s.moveTo(i+w,S,o),s.lineTo(i+w+_,S,o),s.stroke()}}};nT=FZt([wt()],nT);var NZt=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a};let rT=class{constructor(){this.type="chart",this.numberType=vN}contains(n,t,e){return!!n.AABBBounds.containsPoint(t)}};rT=NZt([wt()],rT);const WZt=new ie(((n,t,e,i)=>{e(Mv)?i(Mv).to(Sy).inSingletonScope():(n(Sy).toSelf().inSingletonScope(),n(Xc).toService(Sy)),e(Rv)?i(Rv).to(Ay).inSingletonScope():(n(Ay).toSelf().inSingletonScope(),n(Xc).toService(Ay)),n(xy).toSelf().inSingletonScope(),n(kZt).to(xy),n(co).to(xy),n(rT).toSelf().inSingletonScope(),n(Bo).toService(rT),n(GA).toSelf().inSingletonScope(),n(Yc).toService(GA),n($A).toSelf().inSingletonScope(),n(Yc).toService($A),n(jA).toSelf().inSingletonScope(),n(Yc).toService(jA),n(UA).toSelf().inSingletonScope(),n(Yc).toService(UA),n(QA).toSelf().inSingletonScope(),n(ma).toService(QA),n(tT).toSelf().inSingletonScope(),n(ma).toService(tT),n(XA).toSelf().inSingletonScope(),n(ma).toService(XA),n(YA).toSelf().inSingletonScope(),n(ma).toService(YA),n(qA).toSelf().inSingletonScope(),n(ma).toService(qA),n(KA).toSelf().inSingletonScope(),n(ma).toService(KA),n(ZA).toSelf().inSingletonScope(),n(ma).toService(ZA),n(JA).toSelf().inSingletonScope(),n(ma).toService(JA),n(eT).toSelf().inSingletonScope(),n(ma).toService(eT),n(iT).toSelf().inSingletonScope(),n(Db).toService(iT),n(nT).toSelf().inSingletonScope(),n(TS).toService(nT)}));function Va(n,t,e,i){var r,o,a,s,l,h,u,d;n.internalProps.columnWidthConfig&&UZt(n,n.internalProps.columnWidthConfig),n.isPivotTable()&&n.internalProps.columnWidthConfigForRowHeader&&qZt(n,n.internalProps.columnWidthConfigForRowHeader),t=t??0,e=e??n.colCount-1,t===0&&e===n.colCount-1&&n._clearColRangeWidthsMap();const c=n.internalProps.layoutMap;n.isPivotTable()&&(c.enableUseGetBodyCache(),c.enableUseHeaderPathCache());const f=[],g=[];if(i)for(let p=0;p<n.colCount;p++)f[p]=n.getColWidth(p);for(let p=t;p<=e;p++){let v;if(n.internalProps.transpose||((o=(r=n.internalProps.layoutMap.columnObjects)===null||r===void 0?void 0:r[p])===null||o===void 0?void 0:o.columnWidthComputeMode)!=="only-header"&&n.columnWidthComputeMode!=="only-header"||!("showHeader"in n.internalProps.layoutMap))v=n.internalProps.transpose||((s=(a=n.internalProps.layoutMap.columnObjects)===null||a===void 0?void 0:a[p])===null||s===void 0?void 0:s.columnWidthComputeMode)!=="only-body"&&n.columnWidthComputeMode!=="only-body"?Ip(p,0,n.rowCount-1,n):Ip(p,n.internalProps.layoutMap.getBodyRange().start.row,n.internalProps.layoutMap.getBodyRange().end.row,n);else{const m=n.internalProps.layoutMap.showHeader;n.internalProps.layoutMap.showHeader=!0,v=Ip(p,0,n.internalProps.layoutMap.headerLevelCount-1,n),n.internalProps.layoutMap.showHeader=m}n._setColContentWidth(p,v),n.getColWidth(p)!==v&&n._clearColRangeWidthsMap(p),i?g[p]=Math.round(n._adjustColWidth(p,v)):n._setColWidth(p,n._adjustColWidth(p,v),!1,!0)}if(n.widthMode==="adaptive"){n._clearColRangeWidthsMap();const p=n.tableNoFrameWidth;let v=0,m=0,y=n.colCount;if(n.widthAdaptiveMode==="only-body"){for(let b=0;b<n.colCount;b++){const _=i&&(l=g[b])!==null&&l!==void 0?l:n.getColWidth(b);(b<n.rowHeaderLevelCount||n.isPivotChart()&&b>=n.colCount-n.rightFrozenColCount)&&(v+=_)}m=n.rowHeaderLevelCount,y=n.isPivotChart()?n.colCount-n.rightFrozenColCount:n.colCount}oT(p-v,m,y,i,g,n)}else if(n.autoFillWidth){n._clearColRangeWidthsMap();const p=n.tableNoFrameWidth;let v=0,m=0;for(let y=0;y<n.colCount;y++){const b=i&&(h=g[y])!==null&&h!==void 0?h:n.getColWidth(y);(y<n.rowHeaderLevelCount+n.leftRowSeriesNumberCount||n.isPivotChart()&&y>=n.colCount-n.rightFrozenColCount)&&(v+=b),m+=b}m<p&&m>v&&oT(p-v,n.rowHeaderLevelCount+n.leftRowSeriesNumberCount,n.isPivotChart()?n.colCount-n.rightFrozenColCount:n.colCount,i,g,n)}if(i){for(let p=0;p<n.colCount;p++){const v=(d=(u=g[p])!==null&&u!==void 0?u:n.getColWidth(p))!==null&&d!==void 0?d:n.getColWidth(p);v!==f[p]&&n._setColWidth(p,v,!1,!0)}n.stateManager.checkFrozen();for(let p=0;p<n.colCount;p++){const v=n.getColWidth(p);v!==f[p]&&n.scenegraph.updateColWidth(p,v-f[p],!0,!0)}n.scenegraph.updateContainer({async:!0})}n.isPivotTable()&&(c.disableUseGetBodyCache(),c.disableUseHeaderPathCache())}function Ip(n,t,e,i,r=!1){let o=jZt(n,i);return i.internalProps.transpose&&o==="auto"&&(i.columnWidthComputeMode==="only-header"&&n>=i.rowHeaderLevelCount||i.columnWidthComputeMode==="only-body"&&n<i.rowHeaderLevelCount)&&(o=i.getDefaultColumnWidth(n)),r&&!i.internalProps.transpose?xX(o,n,t,e,r,i):typeof o=="number"?o:o!=="auto"&&typeof o=="string"?i._adjustColWidth(n,i._colWidthDefineToPxWidth(o)):xX(o,n,t,e,r,i)}function xX(n,t,e,i,r,o){var a,s,l,h,u;let d=0,c=1,f=1;if(i-e>5e3&&(f=Math.ceil((i-e)/5e3)),o.isPivotChart()&&t>=o.rowHeaderLevelCount&&t<o.colCount-o.rightFrozenColCount){if(o.internalProps.layoutMap.indicatorsAsCol)return o.defaultColWidth;{const v=o.internalProps.layoutMap.getOptimunWidthForChart(t);if(v>0)return v}}for(let v=e;v<=i;v+=c){if(o.isPivotChart()){const x=o.internalProps.layoutMap,S=x.getAxisConfigInPivotChart(t,v);if(S){const A=It.getFunction("computeAxisComponentWidth")(S,o);if(typeof A=="number"){d=Math.max(A,d);continue}}else if(x.isLeftBottomCorner(t,v)||x.isRightTopCorner(t,v)||x.isRightBottomCorner(t,v))continue}const m=VZt(t,v,o);if(m&&(d=Math.max(m.width,d),!m.renderDefault))continue;const y=n;if(typeof y=="number"&&o.widthMode==="standard"&&!r){d=Math.max(y,d);continue}const b=o.isHeader(t,v)?(a=o._getHeaderLayoutMap(t,v))===null||a===void 0?void 0:a.headerType:o.getBodyColumnType(t,v);if(Y(b)&&b!=="text"&&b!=="link"&&b!=="progressbar"&&b!=="checkbox"&&b!=="radio"&&b!=="switch"&&b!=="button"){d=Math.max(d,o.getColWidthDefinedNumber(t)||0);continue}let _=0;const w=o.internalProps.layoutMap;if(w.isHeader(t,v)){const x=w.getHeader(t,v);if(((s=x?.define)===null||s===void 0?void 0:s.columnWidthComputeMode)==="only-body")continue;Y(x?.hierarchyLevel)&&(_=((l=x.hierarchyLevel)!==null&&l!==void 0?l:0)*(w.rowHierarchyType==="tree"&&(h=w.rowHierarchyIndent)!==null&&h!==void 0?h:0),w.rowHierarchyTextStartAlignment&&!o.internalProps.headerHelper.getHierarchyIcon(t,v)&&(_+=o.internalProps.headerHelper.getHierarchyIconWidth()))}else if(o.isListTable()){c=f;const x=o.getBodyColumnDefine(t,v);if(x?.tree){const S=o.dataSource.getIndexKey(o.getRecordShowIndexByCell(t,v));_=Array.isArray(S)&&o.getHierarchyState(t,v)!==Wt.none?(S.length-1)*((u=w.hierarchyIndent)!==null&&u!==void 0?u:0):0,w.hierarchyTextStartAlignment&&!o.internalProps.bodyHelper.getHierarchyIcon(t,v)&&(_+=o.internalProps.headerHelper.getHierarchyIconWidth())}}const C=GZt(t,v,b,o);d=Math.max(C+_,d),c>1&&o.bottomFrozenRowCount>0&&v<o.rowCount-o.bottomFrozenRowCount&&v+c>=o.rowCount-o.bottomFrozenRowCount&&(v=o.rowCount-o.bottomFrozenRowCount-c,c=1,f=1)}const g=o.getMinColWidth(t),p=o.getMaxColWidth(t);return d<g?g:d>p?p:(d<=0&&(d=o.defaultColWidth),d)}function VZt(n,t,e){var i,r,o,a,s,l,h;const u=e.getCustomRender(n,t);let d=e.getCustomLayout(n,t);if(u||d){let c,f=1,g=0,p=!1,v=!1;(e.isHeader(n,t)||!((i=e.getBodyColumnDefine(n,t))===null||i===void 0)&&i.mergeCell||e.hasCustomMerge())&&(c=e.getCellRange(n,t),f=c.end.col-c.start.col+1);const m={col:(r=c?.start.col)!==null&&r!==void 0?r:n,row:(o=c?.start.row)!==null&&o!==void 0?o:t,dataValue:e.getCellOriginValue(n,t),value:e.getCellValue(n,t)||"",rect:$Zt(n,t,e),table:e,originCol:n,originRow:t,forComputation:!0};if(d==="react-custom-layout"&&(d=((a=e.reactCustomLayout)===null||a===void 0?void 0:a.getCustomLayoutFunc(n,t))||$b),ra(d)){const y=d(m);if(y.rootContainer){y.rootContainer=jb(y.rootContainer),_2(y.rootContainer,0,e.getRowHeight(t));const b=y.rootContainer.attribute.width;y.rootContainer.setStage(e.scenegraph.stage),g=b>0?b:(s=y.rootContainer.AABBBounds.width())!==null&&s!==void 0?s:0,p=y.renderDefault,v=y.enableCellPadding}else g=0,p=y.renderDefault,v=y.enableCellPadding}else if(typeof u=="function"){const y=u(m);g=(l=y?.expectedWidth)!==null&&l!==void 0?l:0,p=y?.renderDefault}else g=(h=u?.expectedWidth)!==null&&h!==void 0?h:0,p=u?.renderDefault;if(g=Math.ceil(g),v){const y=e._getCellStyle(n,t),b=Se(gt("padding",y,n,t,e));g+=b[1]+b[3]}return{width:g/f,renderDefault:p}}}function GZt(n,t,e,i){var r,o,a,s;let l=0;const h=i.getCellValue(n,t),u=i._getCellStyle(n,t);let d=0,c=!1;if(i.getCellLocation(n,t)!=="body")c=!0;else{const w=i.getBodyColumnDefine(n,t);c=!!w?.icon||!!w?.tree||w?.dragOrder}if(c){const w=i.getCellIcons(n,t);w?.forEach((C=>{var x,S,A;C.positionType!==Ue.absoluteRight&&(d+=((x=C.width)!==null&&x!==void 0?x:0)+((S=C.marginLeft)!==null&&S!==void 0?S:0)+((A=C.marginRight)!==null&&A!==void 0?A:0))}))}let f=1;if(i.isHeader(n,t)||!((r=i.getBodyColumnDefine(n,t))===null||r===void 0)&&r.mergeCell||i.hasCustomMerge()){const w=i.getCellRange(n,t);f=w.end.col-w.start.col+1}const g=Se(gt("padding",u,n,t,i)),p=g[1]+g[3],v=gt("fontSize",u,n,t,i),m=gt("fontFamily",u,n,t,i),y=gt("fontWeight",u,n,t,i);let b;if(e==="checkbox")b=Bn(h)?h.text:h;else if(e==="radio")if(Rt(h)){b="";const w=i.getBodyColumnDefine(n,t),C=(o=w?.radioDirectionInCell)!==null&&o!==void 0?o:"vertical";C==="vertical"?h.forEach((x=>{b+=(Bn(x)?x.text:x).toString()+`
`})):C==="horizontal"&&h.forEach((x=>{b+=(Bn(x)?x.text:x).toString()}))}else b=Bn(h)?h.text:h;else if(e==="button"){const w=i.getBodyColumnDefine(n,t),C=Je(w.text,{col:n,row:t,table:i,context:null,value:h,dataValue:i.getCellOriginValue(n,t)});b=(a=C??h)!==null&&a!==void 0?a:""}else b=h;const _=Ub(b,i).text;if(_.length>=1&&(_.length!==1||_[0]!=="")?_.forEach((w=>{const C=i.measureText(w,{fontSize:v,fontFamily:m,fontWeight:y}).width;l=Math.max((C+p+4+d)/f,l)})):l=Math.max((p+4+d)/f,l),i.internalProps.limitMaxAutoWidth!==!1&&(l=Math.min(typeof i.internalProps.limitMaxAutoWidth=="number"?i.internalProps.limitMaxAutoWidth:450,l)),e==="checkbox"){const w=gt("size",u,n,t,i);if(l+=w,b){const C=gt("spaceBetweenTextAndIcon",u,n,t,i);l+=C}}else if(e==="radio"){const w=gt("size",u,n,t,i),C=gt("outerRadius",u,n,t,i),x=yt(C)?2*C:w,S=gt("spaceBetweenTextAndIcon",u,n,t,i);if(Rt(h)){const A=i.getBodyColumnDefine(n,t),T=gt("spaceBetweenRadio",u,n,t,i),M=(s=A?.radioDirectionInCell)!==null&&s!==void 0?s:"vertical";M==="vertical"?(l+=x,l+=S):M==="horizontal"&&(l+=(x+S)*h.length,l+=T*(h.length-1))}else l+=x,b&&(l+=S)}else if(e==="switch")l=gt("boxWidth",u,n,t,i);else if(e==="button"){const w=gt("buttonPadding",u,n,t,i);l+=2*w}return l}function $Zt(n,t,e){return{left:0,top:0,right:e.getColWidth(n),bottom:e.getRowHeight(t),width:null,height:null}}function jZt(n,t){const e=t.getColWidthDefined(n);return t.internalProps._widthResizedColMap.has(n)?t.getColWidth(n):e}function oT(n,t,e,i,r,o,a){var s,l,h,u;let d=0;const c=[],f=[];let g=0;const p=new Map,v=new Map;for(let y=t;y<e;y++){const b=i&&(s=r[y])!==null&&s!==void 0?s:o.getColWidth(y),_=o.getMaxColWidth(y),w=o.getMinColWidth(y);d+=b,c.push(y),_===b?p.set(y,b):w===b&&v.set(y,b),!((l=o.options.customConfig)===null||l===void 0)&&l.shrinkSparklineFirst&&o.getBodyColumnType(y,0)==="sparkline"&&(f.push({col:y,width:b}),g+=b-o.defaultColWidth)}if(d>n)for(const[y,b]of v){n-=b,d-=b;const _=c.indexOf(y);_!==-1&&c.splice(_,1)}else if(d<n)for(const[y,b]of p){n-=b,d-=b;const _=c.indexOf(y);_!==-1&&c.splice(_,1)}const m=n/d;if(!((h=o.options.customConfig)===null||h===void 0)&&h.shrinkSparklineFirst&&m<1&&d-n<g)for(let y=0;y<f.length;y++){const{col:b,width:_}=f[y],w=(d-n)/f.length,C=Math.floor(_-w);i?r[b]=o._adjustColWidth(b,C):a?o.scenegraph.setColWidth(b,o._adjustColWidth(b,C)):o._setColWidth(b,o._adjustColWidth(b,C),!1,!0)}else for(let y=0;y<c.length;y++){const b=c[y];let _;_=y===c.length-1?n-c.reduce(((w,C,x)=>{var S;return C!==b?w+(i?(S=r[C])!==null&&S!==void 0?S:o.getColWidth(b):o.getColWidth(C)):w}),0):Math.round((i&&(u=r[b])!==null&&u!==void 0?u:o.getColWidth(b))*m),i?r[b]=o._adjustColWidth(b,_):a?o.scenegraph.setColWidth(b,o._adjustColWidth(b,_)):o._setColWidth(b,o._adjustColWidth(b,_),!1,!0)}}function UZt(n,t){n.isPivotTable()?XZt(n,t):n.isListTable()&&YZt(n,t)}function YZt(n,t){for(let e=0;e<t?.length;e++){const i=t[e],r=i.key,o=i.width,a=n.internalProps.layoutMap.getColumnByKey(r);if(a.columnDefine){const{col:s}=a;n.internalProps._widthResizedColMap.has(s)||(n._setColWidth(s,o),n.internalProps._widthResizedColMap.add(s))}}}function XZt(n,t){for(let e=0;e<t?.length;e++){const i=t[e],r=i.dimensions,o=i.width,a=n.getCellAddressByHeaderPaths(r);if(a&&a.col>=n.rowHeaderLevelCount){const s=n.getCellHeaderPaths(a.col,n.columnHeaderLevelCount);if(s.colHeaderPaths.length===r.length){let l=!0;for(let h=0;h<r.length;h++){const u=r[h];if(s.colHeaderPaths.findIndex(((d,c)=>d.indicatorKey===u.indicatorKey||d.dimensionKey===u.dimensionKey&&d.value===u.value))<0){l=!1;break}}l&&!n.internalProps._widthResizedColMap.has(a.col)&&(n._setColWidth(a.col,o),n.internalProps._widthResizedColMap.add(a.col))}}else a&&a.col<n.rowHeaderLevelCount&&(n.internalProps._widthResizedColMap.has(a.col)||(n._setColWidth(a.col,o),n.internalProps._widthResizedColMap.add(a.col)))}}function qZt(n,t){for(let e=0;e<t?.length;e++){const i=t[e],r=i.dimensions,o=i.width,a=n.getCellAddressByHeaderPaths(r);a&&a.col<n.rowHeaderLevelCount&&(n.internalProps._widthResizedColMap.has(a.col)||(n._setColWidth(a.col,o),n.internalProps._widthResizedColMap.add(a.col)))}}const aT=new ve({});aT.role="empty";function jw(n,t,e,i,r,o,a,s,l){var h,u;let d,c,f,g=0;n.lastChild&&n.lastChild.row===i-1?g=n.lastChild.attribute.y+n.lastChild.attribute.height:n.colHeight?g=n.colHeight:i>=s.columnHeaderLevelCount&&i<s.rowCount-s.bottomFrozenRowCount&&(g=s.getRowsHeight(s.columnHeaderLevelCount,i-1));for(let p=i;p<=r;p++){const v=p;let m,y,b,_,w=s.getCellLocation(t,v),C=s.getCellValue(t,v),x=e,S=s.getRowHeight(v),A=!1;if(s.internalProps.customMergeCell){const D=s.getCustomMerge(t,v);if(D){const{range:I,text:O,style:H,customLayout:F,customRender:N}=D;if(m=I,y=m.start.col!==m.end.col||m.start.row!==m.end.row,y){const $=SX(m,o,s,i>m.start.row);x=$.cellWidth,S=$.cellHeight}C=O,b=H,(F||N)&&(_=pd(F,N,I.start.col,I.start.row,s.getColsWidth(I.start.col,I.end.col),s.getRowsHeight(I.start.row,I.end.row),!1,s.isAutoRowHeight(v),[0,0,0,0],m,s)),A=!0}}let T,M=t,R=v;m&&(M=m.start.col,R=m.start.row),!s.isPivotTable()&&(w==="columnHeader"||w==="cornerHeader")&&v>=s.columnHeaderLevelCount&&(w="body"),T=!s.isPivotTable()&&s.isSeriesNumberInBody(t,v)?s.getBodyColumnDefine(M,R):w!=="body"?s.getHeaderDefine(M,R):s.getBodyColumnDefine(M,R);const L="isAggregation"in s.internalProps.layoutMap&&s.internalProps.layoutMap.isAggregation(t,v),B=s.internalProps.layoutMap.isSeriesNumber(t,v);let P=w!=="body"||(T?.dragOrder||!!T?.icon||!!T?.tree)&&!(L&&B);if(!m&&(s.internalProps.enableTreeNodeMerge||w!=="body"||T?.mergeCell)&&(m=s.getCellRange(t,v),y=m.start.col!==m.end.col||m.start.row!==m.end.row,y)){const D=SX(m,o,s,i>m.start.row);x=D.cellWidth,S=D.cellHeight}let k=!1;if(s.internalProps.enableTreeNodeMerge&&y){const D=s.getCellRawRecord(m.start.col,m.start.row),{vtableMergeName:I,vtableMerge:O}=D??{};k=O,O&&(P=!0,s.internalProps.groupTitleCustomLayout&&(_=pd(s.internalProps.groupTitleCustomLayout,void 0,m.start.col,m.start.row,s.getColsWidth(m.start.col,m.end.col),s.getRowsHeight(m.start.row,m.end.row),!1,s.isAutoRowHeight(v),[0,0,0,0],m,s)),s.internalProps.groupTitleFieldFormat?C=s.internalProps.groupTitleFieldFormat(D,t,v,s):I!==void 0&&(C=I))}const E=k||A?"text":(u=s.isHeader(t,v)?(h=s._getHeaderLayoutMap(t,v).headerType)!==null&&h!==void 0?h:"text":s.getBodyColumnType(t,v))!==null&&u!==void 0?u:"text";if(Hs(C)){ZZt(t,v,0,g,x,S,n),Jlt(C,s,KZt.bind(null,{type:E,value:C,define:T,table:s,col:t,row:v,colWidth:e,cellWidth:x,cellHeight:S,columnGroup:n,y:g,customStyle:b,mayHaveIcon:P,cellLocation:w,range:m,customResult:_,defaultRowHeight:a})),n.updateColumnRowNumber(v);const D=s.getRowHeight(v);n.updateColumnHeight(D),g+=D}else{const D=b||s._getCellStyle(m?m.start.col:t,m?m.start.row:v),I=Sd(D,s,m?m.start.col:t,m?m.start.row:v,gt).theme;I.group.cornerRadius=b2(t,v,s),I.group.width=e,I.group.height=Array.isArray(a)?a[v]:a,I._vtable.padding&&(d=I._vtable.padding),I.text.textAlign&&(c=I.text.textAlign),I.text.textBaseline&&(f=I.text.textBaseline),w==="body"||I.group.fill||(I.group.fill="#fff");const O=fN(E,C,T,s,t,v,e,x,S,n,g,d,c,f,P,I,m,_);if(n.updateColumnRowNumber(v),y){const H=s.getRowHeight(v),{width:F}=(s.getColWidth(t),O.attribute),{height:N}=O.attribute;O.contentWidth=F,O.contentHeight=N,tht(m,F,N,d,c,f,s),n.updateColumnHeight(H),g+=H}else n.updateColumnHeight(S),g+=S}}return n.setAttribute("width",e),{width:e,height:g}}function KZt(n){let t,e,i;const{type:r,value:o,define:a,table:s,col:l,row:h,colWidth:u,cellWidth:d,cellHeight:c,columnGroup:f,y:g,cellLocation:p,mayHaveIcon:v,customStyle:m,range:y,customResult:b,defaultRowHeight:_}=n,w=m||s._getCellStyle(y?y.start.col:l,y?y.start.row:h),C=Sd(w,s,y?y.start.col:l,y?y.start.row:h,gt).theme;C.group.cornerRadius=b2(l,h,s),C.group.width=u,C.group.height=Array.isArray(_)?_[h]:_,C._vtable.padding&&(t=C._vtable.padding),C.text.textAlign&&(e=C.text.textAlign),C.text.textBaseline&&(i=C.text.textBaseline),p==="body"||C.group.fill||(C.group.fill="#fff"),fN(r,o,a,s,l,h,u,d,c,f,g,t,e,i,v,C,y,b)}function SX(n,t,e,i){let r=0,o=0;const a=t.get(`${n.start.col},${n.start.row};${n.end.col},${n.end.row}`);if(!a||i){for(let s=n.start.col;s<=n.end.col;s++)r+=e.getColWidth(s);for(let s=n.start.row;s<=n.end.row;s++)o+=e.getRowHeight(s);t.set(`${n.start.col},${n.start.row};${n.end.col},${n.end.row}`,{cellWidth:r,cellHeight:o})}else r=a.cellWidth,o=a.cellHeight;return{cellWidth:r,cellHeight:o}}function ZZt(n,t,e,i,r,o,a){const s=new ve({x:e,y:i,width:r,height:o});s.role="cell",s.col=n,s.row=t,a.addChild(s)}function rn(n,t,e,i,r,o,a,s,l,h){if(i>r||o>a)return;const{layoutMap:u,defaultHeaderRowHeight:d,defaultColWidth:c}=l.internalProps,f=l.defaultRowHeight;let g=0,p=0;for(let v=i;v<=r;v++){const m=v,y=l.getColWidth(m),b=new ve({x:t+g,y:e,width:y,height:0,clip:!1,pickable:!1});b.role="column",b.col=v,n.addChild(b);const{width:_,height:w}=jw(b,m,y,o,a,l.scenegraph.mergeMap,s==="columnHeader"&&yt(d)?d:f,l);g+=_,p=Math.max(p,w)}n.setAttribute("width",g),n.setAttribute("height",p)}function JZt(n,t,e,i,r,o,a,s,l){var h,u,d,c,f,g,p,v,m,y,b,_,w;const{table:C}=l,{leftBottomCornerGroup:x,rightTopCornerGroup:S,rightBottomCornerGroup:A}=C.scenegraph;let T,M,R,L;l.setParamsForRow(),l.setParamsForColumn(),(C.widthMode==="adaptive"||C.options.autoWrapText&&(C.heightMode==="adaptive"||C.isAutoRowHeight(C.columnHeaderLevelCount)))&&(R=C.colCount-1),T=Math.min(l.firstScreenColLimit-1,C.colCount-1),C.heightMode==="adaptive"&&(L=C.rowCount-1),M=Math.min(l.firstScreenRowLimit-1,C.rowCount-1),C.internalProps._widthResizedColMap.size===0&&Va(C,0,R??T),C.internalProps._heightResizedRowMap.size===0&&Wa(C,0,C.options.canvasHeight==="auto"||!((h=C.options.customConfig)===null||h===void 0)&&h.forceComputeAllRowHeight?C.rowCount-1:L??M),T<C.colCount-C.rightFrozenColCount&&C.colCount-C.rightFrozenColCount<=C.colCount-1&&Va(C,C.colCount-C.rightFrozenColCount,C.colCount-1),M<C.rowCount-C.bottomFrozenRowCount&&C.rowCount-C.bottomFrozenRowCount<=C.rowCount-1&&Wa(C,C.rowCount-C.bottomFrozenRowCount,C.rowCount-1),C.scenegraph.colHeaderGroup.setAttribute("x",C.getFrozenColsWidth()),C.scenegraph.rowHeaderGroup.setAttribute("y",C.getFrozenRowsHeight()),C.scenegraph.bottomFrozenGroup.setAttribute("x",C.getFrozenColsWidth()),C.scenegraph.rightFrozenGroup.setAttribute("y",C.getFrozenRowsHeight()),C.scenegraph.bodyGroup.setAttributes({x:C.getFrozenColsWidth(),y:C.getFrozenRowsHeight()}),rn(n,a,s,0,C.frozenColCount-1,0,C.frozenRowCount-1,C.isListTable()?"columnHeader":"cornerHeader",C),T-C.rightFrozenColCount>=C.frozenColCount&&rn(t,a,s,C.frozenColCount,T-C.rightFrozenColCount,0,C.frozenRowCount-1,"columnHeader",C),C.frozenColCount>0&&(C.leftRowSeriesNumberCount>0&&rn(e,a,s,0,C.leftRowSeriesNumberCount-1,C.frozenRowCount,M-C.bottomFrozenRowCount,"rowHeader",C),C.frozenColCount>C.leftRowSeriesNumberCount&&rn(e,a,s,C.leftRowSeriesNumberCount,Math.min(C.frozenColCount-1,C.rowHeaderLevelCount+C.leftRowSeriesNumberCount-1),C.frozenRowCount,M-C.bottomFrozenRowCount,"rowHeader",C),C.frozenColCount>C.rowHeaderLevelCount+C.leftRowSeriesNumberCount&&rn(e,a,s,C.rowHeaderLevelCount+C.leftRowSeriesNumberCount,C.frozenColCount-1,C.frozenRowCount,M-C.bottomFrozenRowCount,"body",C)),C.bottomFrozenRowCount>0&&(C.frozenColCount>0&&(C.leftRowSeriesNumberCount>0&&rn(x,a,s,0,C.leftRowSeriesNumberCount-1,C.rowCount-1-C.bottomFrozenRowCount+1,C.rowCount-1,"rowHeader",C),C.rowHeaderLevelCount>0&&rn(x,a,s,C.leftRowSeriesNumberCount,C.leftRowSeriesNumberCount+C.rowHeaderLevelCount-1,C.rowCount-1-C.bottomFrozenRowCount+1,C.rowCount-1,"rowHeader",C),C.frozenColCount>C.rowHeaderLevelCount+C.leftRowSeriesNumberCount&&rn(x,a,s,C.rowHeaderLevelCount+C.leftRowSeriesNumberCount,C.frozenColCount-1,C.rowCount-1-C.bottomFrozenRowCount+1,C.rowCount-1,"body",C)),T-C.rightFrozenColCount>=C.frozenColCount&&rn(r,a,s,C.frozenColCount,T-C.rightFrozenColCount,C.rowCount-1-C.bottomFrozenRowCount+1,C.rowCount-1,C.isPivotChart()?"rowHeader":"body",C)),C.rightFrozenColCount>0&&(rn(S,a,s,C.colCount-1-C.rightFrozenColCount+1,C.colCount-1,0,C.frozenRowCount-1,"columnHeader",C),rn(i,a,s,C.colCount-1-C.rightFrozenColCount+1,C.colCount-1,C.frozenRowCount,M-C.bottomFrozenRowCount,C.isPivotChart()?"rowHeader":"body",C)),C.bottomFrozenRowCount>0&&C.rightFrozenColCount>0&&rn(A,a,s,C.colCount-1-C.rightFrozenColCount+1,C.colCount-1,C.rowCount-1-C.bottomFrozenRowCount+1,C.rowCount-1,"body",C),T-C.rightFrozenColCount>=C.frozenColCount&&rn(o,a,s,C.frozenColCount,T-C.rightFrozenColCount,C.frozenRowCount,M-C.bottomFrozenRowCount,"body",C),o.firstChild||t.firstChild||n.firstChild||e.firstChild?(l.currentRow=(f=(d=(u=o.firstChild)===null||u===void 0?void 0:u.rowNumber)!==null&&d!==void 0?d:(c=e.firstChild)===null||c===void 0?void 0:c.rowNumber)!==null&&f!==void 0?f:l.totalRow,l.rowEnd=l.currentRow,l.rowUpdatePos=l.rowEnd+1,l.referenceRow=l.rowStart+Math.floor((l.rowEnd-l.rowStart)/2),l.currentCol=(w=(b=(m=(p=(g=o.lastChild)===null||g===void 0?void 0:g.col)!==null&&p!==void 0?p:(v=t.lastChild)===null||v===void 0?void 0:v.col)!==null&&m!==void 0?m:(y=e.lastChild)===null||y===void 0?void 0:y.col)!==null&&b!==void 0?b:(_=n.lastChild)===null||_===void 0?void 0:_.col)!==null&&w!==void 0?w:l.totalCol,l.colEnd=l.currentCol,l.colUpdatePos=l.colEnd+1,l.referenceCol=l.colStart+Math.floor((l.colEnd-l.colStart)/2),l.progress()):(l.currentRow=l.totalRow,l.rowEnd=l.currentRow,l.rowUpdatePos=l.rowEnd+1,l.referenceRow=l.rowStart+Math.floor((l.rowEnd-l.rowStart)/2),l.currentCol=l.totalCol,l.colEnd=l.currentCol,l.colUpdatePos=l.colEnd+1,l.referenceCol=l.colStart+Math.floor((l.colEnd-l.colStart)/2))}function AX(n){let t=n.firstChild;for(;t&&t.type!=="group";)t=t._next;return t}function Xb(n){let t=n.lastChild;for(;t&&t.type!=="group";)t=t._prev;return t}function QZt(n){let t=n._prev;for(;t&&t.type!=="group";)t=t._prev;return t}function tJt(n){let t=n._next;for(;t&&t.type!=="group";)t=t._next;return t}function aH(n,t,e,i="left"){for(let s=n;s<=t;s++){const l=e.scenegraph.getColGroup(s);l&&BL(l,e,i);const h=e.scenegraph.getColGroup(s,!0);h&&BL(h,e,i);const u=e.scenegraph.getColGroupInBottom(s);u&&BL(u,e,i)}const r=Math.min(e.scenegraph.proxy.colLimit,e.scenegraph.proxy.bodyRightCol-e.scenegraph.proxy.bodyLeftCol+1),o=e.getColsWidth(e.frozenColCount,e.frozenColCount+r),a=e.getColsWidth(e.frozenColCount,e.colCount-1);e.scenegraph.proxy.xLimitLeft=o/2,e.scenegraph.proxy.xLimitRight=a-o/2}function BL(n,t,e="left"){if(e==="left"){let i;const r=QZt(n);i=r?r.attribute.x+t.getColWidth(n._prev.col):t.getColsWidth(t.frozenColCount,n.col-1),n.setAttribute("x",i)}else{let i;const r=tJt(n);i=r?r.attribute.x-t.getColWidth(n.col):t.getColsWidth(t.frozenColCount,n.col-1),n.setAttribute("x",i)}}var dht=function(n,t,e,i){return new(e||(e=Promise))((function(r,o){function a(h){try{l(i.next(h))}catch(u){o(u)}}function s(h){try{l(i.throw(h))}catch(u){o(u)}}function l(h){var u;h.done?r(h.value):(u=h.value,u instanceof e?u:new e((function(d){d(u)}))).then(a,s)}l((i=i.apply(n,t||[])).next())}))};function eJt(n,t,e,i){return dht(this,void 0,void 0,(function*(){if(!t)return;const r=t.col,o=t.left;let a;if(a=e?i.bodyRightCol-i.colEnd:i.screenLeftCol-i.referenceCol,iJt(a,r,o,n,i),e){const s=i.table.scenegraph.getColGroup(i.colEnd);if(s){const l=s.attribute.x+s.attribute.width-(i.table.tableNoFrameWidth-i.table.getFrozenColsWidth()-i.table.getRightFrozenColsWidth())-n;i.deltaX=-l,i.table.scenegraph.setBodyAndColHeaderX(-n+i.deltaX)}}i.table.scenegraph.updateNextFrame()}))}function iJt(n,t,e,i,r){n>0?(TX(n,"left",r.screenLeftCol,e,i,r),r.updateDeltaX(i,e,t),r.table.scenegraph.setBodyAndColHeaderX(-i+r.deltaX)):n<0?(TX(-n,"right",r.screenLeftCol,e,i,r),r.updateDeltaX(i,e,t),r.table.scenegraph.setBodyAndColHeaderX(-i+r.deltaX)):(r.updateDeltaX(i,e,t),r.table.scenegraph.setBodyAndColHeaderX(-i+r.deltaX))}function TX(n,t,e,i,r,o){return dht(this,void 0,void 0,(function*(){if(t==="left"&&o.colEnd+n>o.bodyRightCol?n=o.bodyRightCol-o.colEnd:t==="right"&&o.colStart-n<o.bodyLeftCol&&(n=o.colStart-o.bodyLeftCol),n!==0)if(n<0&&(t=t==="left"?"right":"left",n=-n),n<o.colEnd-o.colStart){const a=t==="left"?o.colStart:o.colEnd-n+1,s=t==="left"?o.colStart+n-1:o.colEnd,l=t==="left"?o.colEnd+1:o.colStart-n,h=t==="left"?o.colEnd+n:o.colStart-1;Va(o.table,l,h),rJt(a,s,t,o);const u=l,d=h;o.colStart=t==="left"?o.colStart+n:o.colStart-n,o.colEnd=t==="left"?o.colEnd+n:o.colEnd-n,qb(u,d,o),aH(u,d,o.table,t);const c=o.table.scenegraph.getColGroup(e)||o.table.scenegraph.getColGroup(e,!0),f=i-(c.attribute.x+o.table.getFrozenColsWidth()+o.table.scenegraph.proxy.deltaX);o.table.scenegraph.proxy.deltaX+=f,o.currentCol=t==="left"?o.currentCol+n:o.currentCol-n,o.totalCol=Math.max(0,Math.min(o.table.colCount-1,t==="left"?o.totalCol+n:o.totalCol-n)),o.referenceCol=o.colStart+Math.floor((o.colEnd-o.colStart)/2),o.colUpdatePos=l,o.colUpdateDirection=t,o.table.scenegraph.updateNextFrame()}else{const a=t==="left"?o.colStart+n:o.colStart-n,s=t==="left"?o.colEnd+n:o.colEnd-n;Va(o.table,a,s),oJt(o.table.getColsWidth(o.bodyLeftCol,a-1),n,t,o);const l=a,h=s;o.colStart=a,o.colEnd=s,qb(l,h,o),aH(l,h,o.table,s>o.bodyRightCol-(o.colEnd-o.colStart+1)?"right":"left"),o.currentCol=t==="left"?o.currentCol+n:o.currentCol-n,o.totalCol=Math.max(0,Math.min(o.table.colCount-1,t==="left"?o.totalCol+n:o.totalCol-n)),o.referenceCol=o.colStart+Math.floor((o.colEnd-o.colStart)/2),o.colUpdatePos=o.colStart,o.colUpdateDirection=s>o.bodyRightCol-(o.colEnd-o.colStart+1)?"right":"left",o.table.scenegraph.updateNextFrame()}}))}function Ty(n,t,e){n.col=t,n.forEachChildren((i=>{i.col=t,i.needUpdate=!0})),n.setAttribute("x",e),n.needUpdate=!0}function Q1(n,t){if(!n)return;let e=n.firstChild;for(;e;)e=t.updateCellGroupContent(e)._next;n.needUpdate=!1,n.setAttribute("width",t.table.getColWidth(n.col))}function nJt(n,t){if(!n)return;const e=t.screenTopRow,i=Math.max(t.bodyTopRow,e-1*t.screenRowCount),r=Math.min(t.bodyBottomRow,e+2*t.screenRowCount,t.table.rowCount-1);for(let o=i;o<=r;o++){const a=t.highPerformanceGetCell(n.col,o,!0);t.updateCellGroupContent(a)}t.rowUpdatePos=t.rowStart,n.needUpdate=!1,n.setAttribute("width",t.table.getColWidth(n.col))}function rJt(n,t,e,i){for(let r=n;r<=t;r++)i.table.scenegraph.bodyGroup.childrenCount>0&&i.table.scenegraph.bodyGroup.firstChild.type==="group"&&kL(i.table.scenegraph.bodyGroup,e,i),i.table.scenegraph.colHeaderGroup.childrenCount>0&&i.table.scenegraph.colHeaderGroup.firstChild.type==="group"&&kL(i.table.scenegraph.colHeaderGroup,e,i),i.table.scenegraph.bottomFrozenGroup.childrenCount>0&&i.table.scenegraph.bottomFrozenGroup.firstChild.type==="group"&&kL(i.table.scenegraph.bottomFrozenGroup,e,i)}function kL(n,t,e){if(t==="left"){const i=AX(n),r=Xb(n);Ty(i,r.col+1,r.attribute.x+e.table.getColWidth(r.col)),n.appendChild(i),n.border&&n.appendChild(n.border)}else{const i=Xb(n),r=AX(n);Ty(i,r.col-1,r.attribute.x-e.table.getColWidth(r.col-1)),n.insertBefore(i,n.firstChild)}}function qb(n,t,e){for(let i=n;i<=t;i++){const r=e.table.scenegraph.getColGroup(i,!0);r&&Q1(r,e);const o=e.table.scenegraph.getColGroupInBottom(i);o&&Q1(o,e);const a=e.table.scenegraph.getColGroupInRightTopCorner(i);a&&Q1(a,e);const s=e.table.scenegraph.getColGroupInRightBottomCorner(i);s&&Q1(s,e);const l=e.table.scenegraph.getColGroup(i);l&&nJt(l,e)}LL(e.table.scenegraph.colHeaderGroup),LL(e.table.scenegraph.bottomFrozenGroup),LL(e.table.scenegraph.bodyGroup),e.progress()}function oJt(n,t,e,i){i.table.scenegraph.colHeaderGroup.forEachChildren(((r,o)=>{r.type==="group"&&Ty(r,e==="left"?r.col+t:r.col-t,o===0?n:r._prev.attribute.x+i.table.getColWidth(r._prev.col))})),i.table.scenegraph.bottomFrozenGroup.forEachChildren(((r,o)=>{r.type==="group"&&Ty(r,e==="left"?r.col+t:r.col-t,o===0?n:r._prev.attribute.x+i.table.getColWidth(r._prev.col))})),i.table.scenegraph.bodyGroup.forEachChildren(((r,o)=>{r.type==="group"&&Ty(r,e==="left"?r.col+t:r.col-t,o===0?n:r._prev.attribute.x+i.table.getColWidth(r._prev.col))}))}function LL(n){var t,e;const i=Xb(n);if(i&&(n.setAttribute("width",i.attribute.x+i.attribute.width),n.border)){const r=n.border;r.setAttribute("width",i.attribute.x+i.attribute.width-((t=r.attribute.borderLeft)!==null&&t!==void 0?t:0)/2-((e=r.attribute.borderRight)!==null&&e!==void 0?e:0)/2)}}function Go(n,t,e,i,r,o="up",a){var s,l;if(o==="up")for(let c=n;c<=t;c++)for(let f=e;f<=i;f++){const g=r.scenegraph.highPerformanceGetCell(c,f,!0);if(g.role!=="cell"||!g.row)continue;let p;if(g._prev)p=((s=g._prev)===null||s===void 0?void 0:s.attribute.y)+r.getRowHeight(g._prev.row);else if(a){const v=i===r.rowCount-r.bottomFrozenRowCount-1?i:i+1;if(p=r.scenegraph.highPerformanceGetCell(c,v,!0).attribute.y,Y(p))for(let m=f;m<v;m++)p-=r.getRowHeight(m)}else p=MX(g.row,r);Y(p)&&g.setAttribute("y",p)}else for(let c=n;c<=t;c++)for(let f=i;f>=e;f--){const g=r.scenegraph.highPerformanceGetCell(c,f,!0);if(g.role!=="cell"||!g.row)continue;let p;if(g._next)p=((l=g._next)===null||l===void 0?void 0:l.attribute.y)-r.getRowHeight(g.row);else if(a){const v=e<=r.frozenRowCount?r.frozenRowCount:e-1;e<=r.frozenRowCount?p=0:p=r.scenegraph.highPerformanceGetCell(c,v,!0).attribute.y;for(let m=v;m<f;m++)p+=r.getRowHeight(m)}else p=MX(g.row,r);Y(p)&&g.setAttribute("y",p)}const h=Math.min(r.scenegraph.proxy.rowLimit,r.scenegraph.proxy.bodyBottomRow-r.scenegraph.proxy.bodyTopRow+1),u=r.getRowsHeight(r.frozenRowCount,r.frozenRowCount+h),d=r.getRowsHeight(r.frozenRowCount,r.rowCount-1);r.scenegraph.proxy.yLimitTop=u/2,r.scenegraph.proxy.yLimitBottom=d-u/2}function MX(n,t){let e;return e=n<t.frozenRowCount?t.getRowsHeight(0,n-1):n>=t.rowCount-t.bottomFrozenRowCount?t.getRowsHeight(t.rowCount-t.bottomFrozenRowCount,n-1):t.getRowsHeight(t.frozenRowCount,n-1),e}var cht=function(n,t,e,i){return new(e||(e=Promise))((function(r,o){function a(h){try{l(i.next(h))}catch(u){o(u)}}function s(h){try{l(i.throw(h))}catch(u){o(u)}}function l(h){var u;h.done?r(h.value):(u=h.value,u instanceof e?u:new e((function(d){d(u)}))).then(a,s)}l((i=i.apply(n,t||[])).next())}))};function aJt(n,t,e,i){return cht(this,void 0,void 0,(function*(){if(!t)return;const r=t.row,o=t.top;let a;if(a=e?i.bodyBottomRow-i.rowEnd:r-i.referenceRow,sJt(a,r,o,n,i),e){const s=i.table.scenegraph.highPerformanceGetCell(i.colStart,i.rowEnd,!0);if(s.role==="cell"){const l=s.attribute.y+s.attribute.height-(i.table.tableNoFrameHeight-i.table.getFrozenRowsHeight()-i.table.getBottomFrozenRowsHeight())-n;i.deltaY=-l,i.updateBody(n-i.deltaY)}}}))}function sJt(n,t,e,i,r){n>0?(RX(n,"up",t,e,i,r),r.updateDeltaY(i,e,t),r.updateBody(i-r.deltaY)):n<0?(RX(-n,"down",t,e,i,r),r.updateDeltaY(i,e,t),r.updateBody(i-r.deltaY)):(r.updateDeltaY(i,e,t),r.updateBody(i-r.deltaY))}function RX(n,t,e,i,r,o){return cht(this,void 0,void 0,(function*(){if(t==="up"&&o.rowEnd+n>o.bodyBottomRow?n=o.bodyBottomRow-o.rowEnd:t==="down"&&o.rowStart-n<o.bodyTopRow&&(n=o.rowStart-o.bodyTopRow),n!==0)if(n<0&&(t=t==="up"?"down":"up",n=-n),n<o.rowEnd-o.rowStart){const a=t==="up"?o.rowStart:o.rowEnd-n+1,s=t==="up"?o.rowStart+n-1:o.rowEnd,l=t==="up"?o.rowEnd+1:o.rowStart-n,h=t==="up"?o.rowEnd+n:o.rowStart-1;let u,d;o.table.isAutoRowHeight(a)?(u=l,d=h):(u=Math.max(o.bodyTopRow,e-1*o.screenRowCount),d=Math.min(o.bodyBottomRow,e+2*o.screenRowCount,o.table.rowCount-1)),Wa(o.table,u,d,!1),lJt(a,s,t,o),o.rowStart=t==="up"?o.rowStart+n:o.rowStart-n,o.rowEnd=t==="up"?o.rowEnd+n:o.rowEnd-n;const c=Kb(u,d,o,!0);o.table.isAutoRowHeight(a)&&(Go(o.bodyLeftCol,o.bodyRightCol,u,d,o.table,h>o.bodyBottomRow-(o.rowEnd-o.rowStart+1)?"down":"up",!0),Go(0,o.table.frozenColCount-1,u,d,o.table,h>o.bodyBottomRow-(o.rowEnd-o.rowStart+1)?"down":"up",!0),Go(o.table.colCount-o.table.rightFrozenColCount,o.table.colCount-1,u,d,o.table,h>o.bodyBottomRow-(o.rowEnd-o.rowStart+1)?"down":"up",!0)),o.currentRow=t==="up"?o.currentRow+n:o.currentRow-n,o.totalRow=Math.max(0,Math.min(o.bodyBottomRow,t==="up"?o.totalRow+n:o.totalRow-n,o.table.rowCount-1)),o.referenceRow=o.rowStart+Math.floor((o.rowEnd-o.rowStart)/2),o.table.isAutoRowHeight(a)&&c?o.rowUpdatePos=Math.min(o.rowUpdatePos,o.rowEnd+1):o.rowUpdatePos=Math.min(o.rowUpdatePos,l),o.rowUpdateDirection=t,o.table.scenegraph.updateNextFrame(),yield o.progress()}else{const a=t==="up"?o.rowStart+n:o.rowStart-n,s=Math.min(o.table.rowCount-1,t==="up"?o.rowEnd+n:o.rowEnd-n),l=o.table.getRowsHeight(o.bodyTopRow,a-1);let h,u;o.table.isAutoRowHeight(a)?(h=a,u=s):(h=Math.max(o.bodyTopRow,e-1*o.screenRowCount),u=Math.min(o.bodyBottomRow,e+2*o.screenRowCount,o.table.rowCount-1)),Wa(o.table,h,u,!1),hJt(l,n,t,o),o.rowStart=a,o.rowEnd=s;const d=Kb(h,u,o,!0);o.table.isAutoRowHeight(a)&&(Go(o.bodyLeftCol,o.bodyRightCol,h,u,o.table,s>o.bodyBottomRow-(o.rowEnd-o.rowStart+1)?"down":"up"),Go(0,o.table.frozenColCount-1,h,u,o.table,s>o.bodyBottomRow-(o.rowEnd-o.rowStart+1)?"down":"up"),Go(o.table.colCount-o.table.rightFrozenColCount,o.table.colCount-1,h,u,o.table,s>o.bodyBottomRow-(o.rowEnd-o.rowStart+1)?"down":"up")),o.currentRow=t==="up"?o.currentRow+n:o.currentRow-n,o.totalRow=Math.max(0,Math.min(o.bodyBottomRow,t==="up"?o.totalRow+n:o.totalRow-n,o.table.rowCount-1)),o.referenceRow=o.rowStart+Math.floor((o.rowEnd-o.rowStart)/2),o.table.isAutoRowHeight(a)&&d?o.rowUpdatePos=o.rowEnd+1:o.rowUpdatePos=o.rowStart,o.rowUpdateDirection=s>o.bodyBottomRow-(o.rowEnd-o.rowStart+1)?"down":"up",o.table.scenegraph.updateNextFrame(),yield o.progress()}}))}function lJt(n,t,e,i){for(let r=0;r<i.table.frozenColCount;r++){const o=i.table.scenegraph.getColGroup(r);if(o)for(let a=n;a<=t;a++)EL(o,e,i)}for(let r=i.table.colCount-i.table.rightFrozenColCount;r<i.table.colCount;r++){const o=i.table.scenegraph.getColGroup(r);if(o)for(let a=n;a<=t;a++)EL(o,e,i)}for(let r=i.bodyLeftCol;r<=i.bodyRightCol;r++){const o=i.table.scenegraph.getColGroup(r);if(o)for(let a=n;a<=t;a++)EL(o,e,i)}}function EL(n,t,e){if(n.childrenCount>=1)if(t==="up"){const i=n.firstChild;e.updateCellGroupPosition(i,n.lastChild.row+1,n.lastChild.attribute.y+e.table.getRowHeight(n.lastChild.row)),n.appendChild(i)}else{const i=n.lastChild;e.updateCellGroupPosition(i,n.firstChild.row-1,n.firstChild.attribute.y-e.table.getRowHeight(i.row)),n.insertBefore(i,n.firstChild)}}function hJt(n,t,e,i){for(let r=0;r<i.table.frozenColCount;r++){const o=i.table.scenegraph.getColGroup(r);o?.forEachChildren(((a,s)=>{i.updateCellGroupPosition(a,e==="up"?a.row+t:a.row-t,s===0?n:a._prev.attribute.y+i.table.getRowHeight(a._prev.row))}))}for(let r=i.table.colCount-i.table.rightFrozenColCount;r<i.table.colCount;r++){const o=i.table.scenegraph.getColGroup(r);o?.forEachChildren(((a,s)=>{i.updateCellGroupPosition(a,e==="up"?a.row+t:a.row-t,s===0?n:a._prev.attribute.y+i.table.getRowHeight(a._prev.row))}))}for(let r=i.bodyLeftCol;r<=i.bodyRightCol;r++){const o=i.table.scenegraph.getColGroup(r);o?.forEachChildren(((a,s)=>{i.updateCellGroupPosition(a,e==="up"?a.row+t:a.row-t,s===0?n:a._prev.attribute.y+i.table.getRowHeight(a._prev.row))}))}}function Kb(n,t,e,i=!1){for(let s=0;s<e.table.frozenColCount;s++)for(let l=n;l<=t;l++){const h=e.highPerformanceGetCell(s,l,!0);e.updateCellGroupContent(h)}for(let s=e.table.colCount-e.table.rightFrozenColCount;s<e.table.colCount;s++)for(let l=n;l<=t;l++){const h=e.highPerformanceGetCell(s,l);e.updateCellGroupContent(h)}let r=e.bodyLeftCol,o=e.bodyRightCol,a=!0;if(i){const s=e.screenLeftCol;r=Math.max(e.bodyLeftCol,s-1*e.screenColCount),o=Math.min(e.bodyRightCol,s+2*e.screenColCount),r===e.bodyLeftCol&&o===e.bodyRightCol||(a=!1)}for(let s=r;s<=o;s++)for(let l=n;l<=t;l++){const h=e.highPerformanceGetCell(s,l);e.updateCellGroupContent(h)}return DL(e.table.scenegraph.rowHeaderGroup),DL(e.table.scenegraph.rightFrozenGroup),DL(e.table.scenegraph.bodyGroup),e.table.scenegraph.updateNextFrame(),a}function DL(n){var t,e;const i=Xb(n);if(!i)return;const r=Xb(i);if(r&&(n.setAttribute("height",r.attribute.y+r.attribute.height),n.border)){const o=n.border;o.setAttribute("height",r.attribute.y+r.attribute.height-((t=o.attribute.borderTop)!==null&&t!==void 0?t:0)/2-((e=o.attribute.borderBottom)!==null&&e!==void 0?e:0)/2)}}var uJt=function(n,t,e,i){return new(e||(e=Promise))((function(r,o){function a(h){try{l(i.next(h))}catch(u){o(u)}}function s(h){try{l(i.throw(h))}catch(u){o(u)}}function l(h){var u;h.done?r(h.value):(u=h.value,u instanceof e?u:new e((function(d){d(u)}))).then(a,s)}l((i=i.apply(n,t||[])).next())}))};function dJt(n){var t;return uJt(this,void 0,void 0,(function*(){let e,i;n.table.scenegraph.bodyGroup.forEachChildren(((a,s)=>{a.type==="group"&&(a.needUpdate=!0,a?.forEachChildren((l=>{l.needUpdate=!0})))})),n.table.isAutoRowHeight(n.rowStart)?(e=n.rowStart,i=n.rowEnd):(e=Math.max(n.bodyTopRow,n.screenTopRow-1*n.screenRowCount),i=Math.min(n.bodyBottomRow,n.screenTopRow+2*n.screenRowCount,n.table.rowCount-1));const r=n.table.getAllRowsHeight();Wa(n.table,e,i);const o=n.table.getAllRowsHeight();r!==o&&n.table.scenegraph.updateContainerHeight(n.table.frozenRowCount,o-r);for(let a=0;a<((t=n.table.frozenColCount)!==null&&t!==void 0?t:0);a++){const s=n.table.scenegraph.getColGroup(a);s?.setAttribute("chartInstance",void 0);for(let l=n.rowStart;l<=n.rowEnd;l++)n.table.scenegraph.updateCellContent(a,l);for(let l=n.table.rowCount-n.table.bottomFrozenRowCount;l<n.table.rowCount;l++)n.table.scenegraph.updateCellContent(a,l)}for(let a=n.colStart;a<=n.colEnd;a++){const s=n.table.scenegraph.getColGroup(a);s?.setAttribute("chartInstance",void 0);for(let l=n.table.rowCount-n.table.bottomFrozenRowCount;l<n.table.rowCount;l++)n.table.scenegraph.updateCellContent(a,l)}for(let a=n.table.colCount-n.table.rightFrozenColCount;a<n.table.colCount;a++){const s=n.table.scenegraph.getColGroup(a);s?.setAttribute("chartInstance",void 0);for(let l=n.rowStart;l<=n.rowEnd;l++)n.table.scenegraph.updateCellContent(a,l);for(let l=n.table.rowCount-n.table.bottomFrozenRowCount;l<n.table.rowCount;l++)n.table.scenegraph.updateCellContent(a,l)}Kb(e,i,n),n.table.isAutoRowHeight(e)&&Go(n.bodyLeftCol,n.bodyRightCol,e,i,n.table,n.rowEnd>n.bodyBottomRow-(n.rowEnd-n.rowStart+1)?"down":"up"),n.rowUpdatePos=n.rowStart,n.rowUpdateDirection=n.rowEnd>n.bodyBottomRow-(n.rowEnd-n.rowStart+1)?"down":"up",n.table.scenegraph.updateNextFrame(),n.table.isAutoRowHeight(n.rowStart)||(yield n.progress())}))}var cJt=function(n,t,e,i){return new(e||(e=Promise))((function(r,o){function a(h){try{l(i.next(h))}catch(u){o(u)}}function s(h){try{l(i.throw(h))}catch(u){o(u)}}function l(h){var u;h.done?r(h.value):(u=h.value,u instanceof e?u:new e((function(d){d(u)}))).then(a,s)}l((i=i.apply(n,t||[])).next())}))};function fJt(n){return cJt(this,void 0,void 0,(function*(){n.table.scenegraph.bodyGroup.forEachChildren(((i,r)=>{i.type==="group"&&(i.needUpdate=!0,i?.forEachChildren((o=>{o.needUpdate=!0})))}));const t=Math.max(n.bodyLeftCol,n.screenLeftCol-1*n.screenColCount),e=Math.min(n.bodyRightCol,n.screenLeftCol+2*n.screenColCount);Va(n.table,t,e);for(let i=n.colStart;i<=n.colEnd;i++){const r=n.table.scenegraph.getColGroup(i);r?.setAttribute("chartInstance",void 0);for(let o=n.table.rowCount-n.table.bottomFrozenRowCount;o<n.table.rowCount;o++)n.table.scenegraph.updateCellContent(i,o)}for(let i=n.table.colCount-n.table.rightFrozenColCount;i<n.table.colCount;i++){const r=n.table.scenegraph.getColGroup(i);r?.setAttribute("chartInstance",void 0);for(let o=n.rowStart;o<=n.rowEnd;o++)n.table.scenegraph.updateCellContent(i,o);for(let o=n.table.rowCount-n.table.bottomFrozenRowCount;o<n.table.rowCount;o++)n.table.scenegraph.updateCellContent(i,o)}qb(t,e,n),n.colUpdatePos=n.colStart,n.colUpdateDirection=n.colEnd>n.bodyRightCol-(n.colEnd-n.colStart+1)?"right":"left",n.table.scenegraph.updateNextFrame(),yield n.progress()}))}function yN(n){const{changedCells:t}=n.internalProps.stick;return t.forEach((e=>{n.scenegraph.getCell(e.col,e.row).forEachChildren((i=>{i.setAttributes({dx:e.dx,dy:e.dy})}))})),t.clear(),t}function My(n){const t=yN(n),{scrollTop:e,scrollLeft:i,frozenRowCount:r,frozenColCount:o}=n,a=n.getFrozenRowsHeight(),s=n.getFrozenColsWidth(),{row:l}=n.getRowAt(e+a+1),{col:h}=n.getColAt(i+s+1),u=Math.max(l,n.frozenRowCount),d=Math.max(h,n.frozenColCount),c=n.getAllRowsHeight()>n.tableNoFrameHeight?n.getRowAt(e+n.tableNoFrameHeight-n.getBottomFrozenRowsHeight()-1).row:n.rowCount-n.bottomFrozenRowCount-1,f=n.getAllColsWidth()>n.tableNoFrameWidth?n.getColAt(i+n.tableNoFrameWidth-n.getRightFrozenColsWidth()-1).col:n.colCount-n.rightFrozenColCount-1;if(!(f<0||c<0)){for(let g=0;g<r&&!(f<d);g++)[d,f].forEach((p=>{const v=n._getCellStyle(p,g);v?.textStick&&v?.textStick!=="vertical"&&kX(n.scenegraph.getCell(p,g),s+n.tableX,n.tableNoFrameWidth-n.getRightFrozenColsWidth()+n.tableX,t,v?.textStickBaseOnAlign,n)}));for(let g=0;g<o&&!(c<u);g++)[u,c].forEach((p=>{const v=n._getCellStyle(g,p);v?.textStick&&v?.textStick!=="horizontal"&&PX(n.scenegraph.getCell(g,p),a+n.tableY,n.tableNoFrameHeight-n.getBottomFrozenRowsHeight()+n.tableY,t,v?.textStickBaseOnAlign,n)}));for(let g=d;g<=f&&!(c<u);g++)[u,c].forEach((p=>{const v=n._getCellStyle(g,p);v?.textStick&&v?.textStick!=="horizontal"&&PX(n.scenegraph.getCell(g,p),a+n.tableY,n.tableNoFrameHeight-n.getBottomFrozenRowsHeight()+n.tableY,t,v?.textStickBaseOnAlign,n)}));for(let g=u;g<=c&&!(f<d);g++)[d,f].forEach((p=>{const v=n._getCellStyle(p,g);v?.textStick&&v?.textStick!=="vertical"&&kX(n.scenegraph.getCell(p,g),s+n.tableX,n.tableNoFrameWidth-n.getRightFrozenColsWidth()+n.tableX,t,v?.textStickBaseOnAlign,n)}))}}function PX(n,t,e,i,r,o){if(yt(n.mergeStartCol)&&yt(n.mergeStartRow)&&yt(n.mergeEndCol)&&yt(n.mergeEndRow)){const{colStart:a,colEnd:s,rowStart:l,rowEnd:h}=Ad(n,o.scenegraph);for(let u=a;u<=s;u++)for(let d=l;d<=h;d++){const c=o.scenegraph.getCell(u,d);c.role==="cell"&&BX(c,t,e,i,r)}}else BX(n,t,e,i,r)}function BX(n,t,e,i,r){var o,a,s,l,h,u,d,c,f,g,p,v,m,y,b,_,w;const C=n.getChildByName("text",!0)||n.getChildByName("image",!0);if(!C)return;if(C.type==="image"){const{image:T}=C.attribute;if(!T||!C.resources||C.resources.get(T).state!=="success")return}const x=(o=C.textBaseline)!==null&&o!==void 0?o:"top";C.AABBBounds.width();const S=C.globalAABBBounds.y1,A=C.globalAABBBounds.y2;if(x==="middle"&&r){const T=n.globalAABBBounds.y1+((s=(a=n.firstChild)===null||a===void 0?void 0:a.attribute.dy)!==null&&s!==void 0?s:0),M=T+((h=(l=n.contentHeight)!==null&&l!==void 0?l:n.attribute.height)!==null&&h!==void 0?h:0);if(T<t||M>e){const R=Math.max(T,t),L=Math.min(M,e),B=C.globalTransMatrix.f-(L+R)/2+C.AABBBounds.height()/2;!i.has(`${n.col}-${n.row}`)&&i.set(`${n.col}-${n.row}`,{col:n.col,row:n.row,dx:(d=(u=n.firstChild)===null||u===void 0?void 0:u.attribute.dx)!==null&&d!==void 0?d:0,dy:(f=(c=n.firstChild)===null||c===void 0?void 0:c.attribute.dy)!==null&&f!==void 0?f:0}),n.forEachChildren((P=>{var k;P.setAttribute("dy",((k=P.attribute.dy)!==null&&k!==void 0?k:0)-B+2)}))}}else if(S<t){const T=S-t;!i.has(`${n.col}-${n.row}`)&&i.set(`${n.col}-${n.row}`,{col:n.col,row:n.row,dx:(p=(g=n.firstChild)===null||g===void 0?void 0:g.attribute.dx)!==null&&p!==void 0?p:0,dy:(m=(v=n.firstChild)===null||v===void 0?void 0:v.attribute.dy)!==null&&m!==void 0?m:0}),n.forEachChildren((M=>{var R;M.setAttribute("dy",((R=M.attribute.dy)!==null&&R!==void 0?R:0)-T+2)}))}else if(A>e){const T=A-e;!i.has(`${n.col}-${n.row}`)&&i.set(`${n.col}-${n.row}`,{col:n.col,row:n.row,dx:(b=(y=n.firstChild)===null||y===void 0?void 0:y.attribute.dx)!==null&&b!==void 0?b:0,dy:(w=(_=n.firstChild)===null||_===void 0?void 0:_.attribute.dy)!==null&&w!==void 0?w:0}),n.forEachChildren((M=>{var R;M.setAttribute("dy",((R=M.attribute.dy)!==null&&R!==void 0?R:0)-T)}))}}function kX(n,t,e,i,r,o){if(yt(n.mergeStartCol)&&yt(n.mergeStartRow)&&yt(n.mergeEndCol)&&yt(n.mergeEndRow)){const{colStart:a,colEnd:s,rowStart:l,rowEnd:h}=Ad(n,o.scenegraph);for(let u=a;u<=s;u++)for(let d=l;d<=h;d++){const c=o.scenegraph.getCell(u,d);c.role==="cell"&&LX(c,t,e,i,r)}}else LX(n,t,e,i,r)}function LX(n,t,e,i,r){var o,a,s,l,h,u,d,c,f,g,p,v,m,y,b,_,w,C;const x=n.getChildByName("text",!0)||n.getChildByName("image",!0);if(!x)return;if(x.type==="image"){const{image:M}=x.attribute;if(!M||!x.resources||x.resources.get(M).state!=="success")return}const S=(a=(o=x.attribute.textAlign)!==null&&o!==void 0?o:x.textAlign)!==null&&a!==void 0?a:"left";x.AABBBounds.width();const A=x.globalAABBBounds.x1,T=x.globalAABBBounds.x2;if(S==="center"&&r){const M=n.globalAABBBounds.x1+((l=(s=n.firstChild)===null||s===void 0?void 0:s.attribute.dx)!==null&&l!==void 0?l:0),R=M+((u=(h=n.contentWidth)!==null&&h!==void 0?h:n.attribute.width)!==null&&u!==void 0?u:0);if(M<t||R>e){const L=Math.max(M,t),B=Math.min(R,e),P=x.globalTransMatrix.e-(B+L)/2;!i.has(`${n.col}-${n.row}`)&&i.set(`${n.col}-${n.row}`,{col:n.col,row:n.row,dx:(c=(d=n.firstChild)===null||d===void 0?void 0:d.attribute.dx)!==null&&c!==void 0?c:0,dy:(g=(f=n.firstChild)===null||f===void 0?void 0:f.attribute.dy)!==null&&g!==void 0?g:0}),n.forEachChildren((k=>{var E;k.setAttribute("dx",((E=k.attribute.dx)!==null&&E!==void 0?E:0)-P+2)}))}}else if(A<t){const M=A-t;!i.has(`${n.col}-${n.row}`)&&i.set(`${n.col}-${n.row}`,{col:n.col,row:n.row,dx:(v=(p=n.firstChild)===null||p===void 0?void 0:p.attribute.dx)!==null&&v!==void 0?v:0,dy:(y=(m=n.firstChild)===null||m===void 0?void 0:m.attribute.dy)!==null&&y!==void 0?y:0}),n.forEachChildren((R=>{var L;R.setAttribute("dx",((L=R.attribute.dx)!==null&&L!==void 0?L:0)-M+2)}))}else if(T>e){const M=T-e;!i.has(`${n.col}-${n.row}`)&&i.set(`${n.col}-${n.row}`,{col:n.col,row:n.row,dx:(_=(b=n.firstChild)===null||b===void 0?void 0:b.attribute.dx)!==null&&_!==void 0?_:0,dy:(C=(w=n.firstChild)===null||w===void 0?void 0:w.attribute.dy)!==null&&C!==void 0?C:0}),n.forEachChildren((R=>{var L;R.setAttribute("dx",((L=R.attribute.dx)!==null&&L!==void 0?L:0)-M)}))}}function sT(n){var t,e;const i=n.internalProps.layoutMap.headerObjects,r=n.internalProps.layoutMap.columnObjects;for(let o=0;o<i.length;o++){const a=i[o];if(a&&(!((t=a.style)===null||t===void 0)&&t.textStick))return!0}for(let o=0;o<r.length;o++){const a=r[o];if(a&&(!((e=a.style)===null||e===void 0)&&e.textStick))return!0}return!!(n.theme.headerStyle.textStick||n.theme.rowHeaderStyle.textStick||n.theme.bodyStyle.textStick)}var ca=function(n,t,e,i){return new(e||(e=Promise))((function(r,o){function a(h){try{l(i.next(h))}catch(u){o(u)}}function s(h){try{l(i.throw(h))}catch(u){o(u)}}function l(h){var u;h.done?r(h.value):(u=h.value,u instanceof e?u:new e((function(d){d(u)}))).then(a,s)}l((i=i.apply(n,t||[])).next())}))};class gJt{constructor(t){this.isRelease=!1,this.mode="column",this.rowLimit=200,this.currentRow=0,this.rowStart=0,this.rowEnd=0,this.referenceRow=0,this.screenTopRow=0,this.deltaY=0,this.deltaHeight=0,this.colLimit=100,this.screenLeftCol=0,this.deltaX=0,this.deltaWidth=0,this.cellCache=new Map,this.table=t,this.table.isPivotChart()?(this.rowLimit=Math.max(100,Math.ceil(2*t.tableNoFrameHeight/t.defaultRowHeight)),this.colLimit=Math.max(100,Math.ceil(2*t.tableNoFrameWidth/t.defaultColWidth))):this.table.isAutoRowHeight(t.columnHeaderLevelCount)?this.rowLimit=Math.max(100,Math.ceil(2*t.tableNoFrameHeight/t.defaultRowHeight)):(this.table.widthMode==="autoWidth"||(this.rowLimit=Math.max(200,Math.ceil(2*t.tableNoFrameHeight/t.defaultRowHeight))),this.colLimit=Math.max(100,Math.ceil(2*t.tableNoFrameWidth/t.defaultColWidth))),this.table.internalProps.transpose?this.mode="row":this.table.isPivotTable()&&(this.mode="pivot"),this.table.options.maintainedDataCount&&(this.rowLimit=this.table.options.maintainedDataCount),this.table.options.maintainedColumnCount&&(this.colLimit=this.table.options.maintainedColumnCount),this.table.heightMode==="adaptive"&&(this.rowLimit=this.table.rowCount),this.table.widthMode==="adaptive"&&(this.colLimit=this.table.colCount)}get bodyLeftCol(){return this.table.frozenColCount}get bodyTopRow(){return this.table.frozenRowCount}setParamsForColumn(){this.bodyRightCol=this.table.colCount-1-this.table.rightFrozenColCount;const t=Math.min(this.colLimit,this.bodyRightCol-this.bodyLeftCol+1);this.totalActualBodyColCount=t,this.totalCol=this.bodyLeftCol+t-1,this.colStart=this.bodyLeftCol,this.colEnd=this.totalCol;const e=this.table.defaultColWidth;this.taskColCount=1*Math.ceil(this.table.tableNoFrameWidth/e);const i=e*t,r=e*(this.bodyRightCol-this.bodyLeftCol+1);this.xLimitLeft=i/2,this.xLimitRight=r-i/2;const o=5*this.table.tableNoFrameWidth;this.screenColCount=Math.ceil(this.table.tableNoFrameWidth/e),this.firstScreenColLimit=Math.max(15,this.bodyLeftCol+Math.min(this.colLimit,Math.ceil(o/e))),this.colUpdatePos=this.bodyRightCol}setParamsForRow(){this.bodyBottomRow=this.table.rowCount-1-this.table.bottomFrozenRowCount;const t=Math.min(this.rowLimit,this.bodyBottomRow-this.bodyTopRow+1);this.totalActualBodyRowCount=t,this.totalRow=this.bodyTopRow+t-1,this.rowStart=this.bodyTopRow,this.rowEnd=this.totalRow;const e=this.table.defaultRowHeight;this.taskRowCount=1*Math.ceil(this.table.tableNoFrameHeight/e);const i=e*t,r=e*(this.bodyBottomRow-this.bodyTopRow+1);this.yLimitTop=i/2,this.yLimitBottom=r-i/2;const o=5*this.table.tableNoFrameHeight;this.screenRowCount=Math.ceil(this.table.tableNoFrameHeight/e),this.firstScreenRowLimit=Math.max(30,this.bodyTopRow+Math.min(this.rowLimit,Math.ceil(o/e))),this.rowUpdatePos=this.bodyBottomRow}refreshRowCount(){this.bodyBottomRow=this.table.rowCount-1-this.table.bottomFrozenRowCount;const t=Math.min(this.rowLimit,this.bodyBottomRow-this.bodyTopRow+1);this.totalActualBodyRowCount=t,this.totalRow=this.rowStart+t-1}refreshColCount(){this.bodyRightCol=this.table.colCount-1-this.table.rightFrozenColCount;const t=Math.min(this.colLimit,this.bodyRightCol-this.bodyLeftCol+1);this.totalActualBodyColCount=t,this.totalCol=this.bodyLeftCol+t-1,this.colStart=this.bodyLeftCol,this.colEnd=this.totalCol}resize(){const t=this.table.defaultColWidth;this.taskColCount=1*Math.ceil(this.table.tableNoFrameWidth/t);const e=5*this.table.tableNoFrameWidth;this.screenColCount=Math.ceil(this.table.tableNoFrameWidth/t),this.firstScreenColLimit=this.bodyLeftCol+Math.min(this.colLimit,Math.ceil(e/t));const i=this.table.defaultRowHeight;this.taskRowCount=1*Math.ceil(this.table.tableNoFrameHeight/i);const r=5*this.table.tableNoFrameHeight;this.screenRowCount=Math.ceil(this.table.tableNoFrameHeight/i),this.firstScreenRowLimit=this.bodyTopRow+Math.min(this.rowLimit,Math.ceil(r/i))}createGroupForFirstScreen(t,e,i,r,o,a,s,l){JZt(t,e,i,r,o,a,s,l,this)}progress(){return ca(this,void 0,void 0,(function*(){if(!this.isProgressing)return this.isProgressing=!0,new Promise(((t,e)=>{setTimeout((()=>ca(this,void 0,void 0,(function*(){this.isProgressing=!1,this.isRelease||(this.colUpdatePos<=this.colEnd?(yield this.updateColCellGroupsAsync(),yield this.progress()):this.rowUpdatePos<=this.rowEnd?(yield this.updateRowCellGroupsAsync(),yield this.progress()):this.currentCol<this.totalCol?(yield this.createCol(),yield this.progress()):this.currentRow<this.totalRow&&(yield this.createRow(),yield this.progress()),My(this.table),this.table.scenegraph.updateNextFrame(),t())}))),16)}))}))}createRow(){return ca(this,void 0,void 0,(function*(){this.taskRowCount&&this.createRowCellGroup(this.taskRowCount)}))}createCol(){return ca(this,void 0,void 0,(function*(){this.taskColCount&&this.createColGroup(this.taskRowCount)}))}createRowCellGroup(t){const e=Math.min(this.totalRow,this.currentRow+t);if(this.table.heightMode!=="adaptive"&&Wa(this.table,this.currentRow+1,e,!1),this.rowEnd=e,this.table.frozenColCount){let r=0;for(let o=0;o<this.table.frozenColCount;o++){const a=this.table.scenegraph.getColGroup(o),{height:s}=(this.table.isListTable(),jw(a,o,a.attribute.width,this.currentRow+1,e,this.table.scenegraph.mergeMap,this.table.defaultRowHeight,this.table));r=Math.max(r,s),this.table.scenegraph.rowHeaderGroup.setAttribute("height",r)}}if(this.table.rightFrozenColCount){let r=0;for(let o=this.table.colCount-this.table.rightFrozenColCount;o<this.table.colCount;o++){const a=this.table.scenegraph.getColGroup(o),{height:s}=(this.table.isPivotChart(),jw(a,o,a.attribute.width,this.currentRow+1,e,this.table.scenegraph.mergeMap,this.table.defaultRowHeight,this.table));r=Math.max(r,s),this.table.scenegraph.rightFrozenGroup.setAttribute("height",r)}}let i=0;for(let r=this.bodyLeftCol;r<=this.bodyRightCol;r++){const o=this.table.scenegraph.getColGroup(r);if(!o)continue;this.table.rowHeaderLevelCount;const{height:a}=jw(o,r,o.attribute.width,this.currentRow+1,e,this.table.scenegraph.mergeMap,this.table.defaultRowHeight,this.table);i=Math.max(i,a)}this.table.scenegraph.bodyGroup.setAttribute("height",i),this.currentRow=e,this.rowUpdatePos=this.rowEnd,this.table.scenegraph.updateContainer(),this.table.scenegraph.updateBorderSizeAndPosition()}createColGroup(t){const e=Math.min(this.totalCol,this.currentCol+t);this.table.widthMode!=="adaptive"&&Va(this.table,this.currentCol+1,e),this.colEnd=e;for(let a=0;a<this.table.rowCount;a++){const s=this.highPerformanceGetCell(this.currentCol,a);s.role==="cell"&&yt(s.mergeStartCol)&&s.mergeStartCol>this.currentCol&&this.table.scenegraph.updateCellContent(s.col,s.row)}if(this.table.frozenRowCount){const a=this.table.scenegraph.colHeaderGroup.lastChild instanceof ve?this.table.scenegraph.colHeaderGroup.lastChild:this.table.scenegraph.colHeaderGroup.lastChild._prev,s=a.attribute.x+a.attribute.width,l=a.attribute.y;rn(this.table.scenegraph.colHeaderGroup,s,l,this.currentCol+1,e,0,this.table.frozenRowCount-1,"columnHeader",this.table)}if(this.table.bottomFrozenRowCount){const a=this.table.scenegraph.bottomFrozenGroup.lastChild instanceof ve?this.table.scenegraph.bottomFrozenGroup.lastChild:this.table.scenegraph.bottomFrozenGroup.lastChild._prev,s=a.attribute.x+a.attribute.width,l=a.attribute.y;rn(this.table.scenegraph.bottomFrozenGroup,s,l,this.currentCol+1,e,this.table.rowCount-this.table.bottomFrozenRowCount,this.table.rowCount-1,"columnHeader",this.table)}let i=this.table.scenegraph.bodyGroup.lastChild&&(this.table.scenegraph.bodyGroup.lastChild instanceof ve?this.table.scenegraph.bodyGroup.lastChild:this.table.scenegraph.bodyGroup.lastChild._prev);i||(i=this.table.scenegraph.colHeaderGroup.lastChild&&(this.table.scenegraph.colHeaderGroup.lastChild instanceof ve?this.table.scenegraph.colHeaderGroup.lastChild:this.table.scenegraph.colHeaderGroup.lastChild._prev));const r=i.attribute.x+i.attribute.width,o=i.attribute.y;rn(this.table.scenegraph.bodyGroup,r,o,this.currentCol+1,e,this.rowStart,this.rowEnd,"body",this.table),this.currentCol=e,this.colUpdatePos=this.colEnd,this.table.scenegraph.updateContainer(),this.table.scenegraph.updateBorderSizeAndPosition()}setY(t,e=!1){return ca(this,void 0,void 0,(function*(){const i=this.table.getRowsHeight(this.bodyTopRow,this.bodyTopRow+(this.rowEnd-this.rowStart+1))/2,r=this.table.getAllRowsHeight()-i,o=this.table.getTargetRowAt(t+this.table.scenegraph.colHeaderGroup.attribute.height);o&&(this.screenTopRow=o.row),t<i&&this.rowStart===this.bodyTopRow||t>r&&this.rowEnd===this.bodyBottomRow?(this.updateDeltaY(t),this.updateBody(t-this.deltaY)):this.table.scenegraph.bodyGroup.firstChild&&this.table.scenegraph.bodyGroup.firstChild.type==="group"&&this.table.scenegraph.bodyGroup.firstChild.childrenCount!==0||this.table.scenegraph.rowHeaderGroup.firstChild&&this.table.scenegraph.rowHeaderGroup.firstChild.type==="group"&&this.table.scenegraph.rowHeaderGroup.firstChild.childrenCount!==0?this.dynamicSetY(t,o,e):(this.updateDeltaY(t),this.updateBody(t-this.deltaY))}))}setX(t,e=!1){return ca(this,void 0,void 0,(function*(){const i=this.table.getColsWidth(this.bodyLeftCol,this.bodyLeftCol+(this.colEnd-this.colStart+1))/2,r=this.table.getAllColsWidth()-i,o=this.table.getTargetColAt(t+this.table.scenegraph.rowHeaderGroup.attribute.width);o&&(this.screenLeftCol=o.col),t<i&&this.colStart===this.bodyLeftCol||t>r&&this.colEnd===this.bodyRightCol||this.table.scenegraph.bodyGroup.firstChild&&this.table.scenegraph.bodyGroup.firstChild.type==="group"&&this.table.scenegraph.bodyGroup.firstChild.childrenCount===0?(this.updateDeltaX(t),this.table.scenegraph.setBodyAndColHeaderX(-t+this.deltaX)):this.dynamicSetX(t,o,e)}))}dynamicSetY(t,e,i=!1){return ca(this,void 0,void 0,(function*(){aJt(t,e,i,this)}))}dynamicSetX(t,e,i=!1){return ca(this,void 0,void 0,(function*(){eJt(t,e,i,this)}))}updateBody(t){this.table.scenegraph.setBodyAndRowHeaderY(-t)}updateRowCellGroupsAsync(){return ca(this,void 0,void 0,(function*(){this.updateCellGroups(this.taskRowCount)}))}updateCellGroups(t){const e=Math.min(this.bodyBottomRow,this.rowUpdatePos+t);this.table.isAutoRowHeight(this.rowUpdatePos)&&Wa(this.table,this.rowUpdatePos,e,!1),Kb(this.rowUpdatePos,e,this),this.table.isAutoRowHeight(this.rowUpdatePos)&&(Go(this.bodyLeftCol,this.bodyRightCol,this.rowUpdatePos,e,this.table,this.rowUpdateDirection,!0),Go(0,this.table.frozenColCount-1,this.rowUpdatePos,e,this.table,this.rowUpdateDirection,!0),Go(this.table.colCount-this.table.rightFrozenColCount,this.table.colCount-1,this.rowUpdatePos,e,this.table,this.rowUpdateDirection,!0)),this.rowUpdatePos=e+1}updateBottomFrozenCellGroups(){const t=this.table.rowCount-this.table.bottomFrozenRowCount,e=this.table.rowCount-1;this.table.isAutoRowHeight(t)&&Wa(this.table,t,e,!1),Kb(t,e,this),this.table.isAutoRowHeight(t)&&(Go(this.bodyLeftCol,this.bodyRightCol,t,e,this.table,this.rowUpdateDirection),Go(0,this.table.frozenColCount-1,t,e,this.table,this.rowUpdateDirection),Go(this.table.colCount-this.table.rightFrozenColCount,this.table.colCount-1,t,e,this.table,this.rowUpdateDirection))}updateRightFrozenCellGroups(){const t=this.table.colCount-this.table.rightFrozenColCount,e=this.table.colCount-1;this.table.widthMode==="autoWidth"&&Va(this.table,t,e,!1),qb(t,e,this),this.table.isAutoRowHeight(this.rowStart)&&aH(t,e,this.table,this.colUpdateDirection)}updateColCellGroupsAsync(){return ca(this,void 0,void 0,(function*(){this.updateColGroups(this.taskRowCount)}))}updateColGroups(t){const e=Math.min(this.bodyRightCol,this.colUpdatePos+t);this.table.widthMode==="autoWidth"&&Va(this.table,this.colUpdatePos,e),qb(this.colUpdatePos,e,this),this.colUpdatePos=e+1}updateCellGroupPosition(t,e,i){t.row=e,t.mergeStartCol=void 0,t.mergeStartRow=void 0,t.mergeEndCol=void 0,t.mergeEndRow=void 0,t.setAttribute("y",i),t.needUpdate=!0,t.needUpdateForAutoRowHeight=!0}updateCellGroupContent(t){if(!t.needUpdate||t.role!=="cell")return t;const e=this.table.scenegraph.updateCellContent(t.col,t.row);return t.needUpdate=!1,e||t}sortCellVertical(){return ca(this,void 0,void 0,(function*(){yield dJt(this)}))}sortCellHorizontal(){return ca(this,void 0,void 0,(function*(){yield fJt(this)}))}highPerformanceGetCell(t,e,i){if(e>=this.table.frozenRowCount&&e<this.table.rowCount-this.table.bottomFrozenRowCount&&(e<this.rowStart||e>this.rowEnd)||t>=this.table.frozenColCount&&t<this.table.colCount-this.table.rightFrozenColCount&&(t<this.colStart||t>this.colEnd))return aT;if(this.cellCache.get(t)){const o=this.cellCache.get(t);if((o._next||o._prev)&&Math.abs(o.row-e)<e){let s=sH(o,e);return s&&(i||s.role!=="shadow-cell")||(s=this.table.scenegraph.getCell(t,e,i)),s.row&&this.cellCache.set(t,s),s}const a=this.table.scenegraph.getCell(t,e,i);return a.col===t&&a.row&&this.cellCache.set(t,a),a}const r=this.table.scenegraph.getCell(t,e,i);return r.col===t&&r.row&&this.cellCache.set(t,r),r}updateDeltaY(t,e,i){if(this.rowStart===this.bodyTopRow){const r=this.table.scenegraph.highPerformanceGetCell(this.colStart,this.rowStart,!0);if(r.role==="cell"){const o=r.attribute.y;this.deltaY=-o}}else if(this.rowEnd===this.bodyBottomRow){const r=this.table.scenegraph.highPerformanceGetCell(this.colStart,this.rowEnd,!0);if(r.role==="cell"){const o=r.attribute.y+r.attribute.height-(this.table.getAllRowsHeight()-this.table.getFrozenRowsHeight()-this.table.getBottomFrozenRowsHeight());this.deltaY=-o}}else if(Y(e)&&Y(i)){let r=this.table.scenegraph.highPerformanceGetCell(this.colStart,i,!0);r.role!=="cell"&&(r=this.table.scenegraph.highPerformanceGetCell(0,i,!0));const o=t-this.deltaY,a=e-o,s=r.attribute.y-o+this.table.getFrozenRowsHeight();this.deltaY=a-s}}updateDeltaX(t,e,i){if(this.colStart===this.bodyLeftCol){const r=this.table.scenegraph.getColGroup(this.colStart);if(r){const o=r.attribute.x;this.deltaX=-o}}else if(this.colEnd===this.bodyRightCol){const r=this.table.scenegraph.getColGroup(this.colEnd);if(r){const o=r.attribute.x+r.attribute.width-(this.table.getAllColsWidth()-this.table.getFrozenColsWidth()-this.table.getRightFrozenColsWidth());this.deltaX=-o}}else if(Y(e)&&Y(i)){const r=this.table.scenegraph.getColGroup(i)||this.table.scenegraph.getColGroup(i,!0),o=t-this.deltaX,a=e-o,s=r.attribute.x-o+this.table.getFrozenColsWidth();this.deltaX=a-s}}release(){this.isRelease=!0}}function sH(n,t){if(!n)return null;if(n.row===t)return n;const e=n._prev,i=n._next;return n.row>t&&e&&e.row===n.row-1?sH(e,t):n.row<t&&i&&i.row===n.row+1?sH(i,t):null}function pJt(n,t,e,i,r,o){const a=o.scenegraph;for(let s=n;s<=t;s++){const l=o.getColWidth(s),h=o.scenegraph.getColGroup(s,!0),u=o.scenegraph.getColGroup(s),d=o.scenegraph.getColGroupInBottom(s),c=o.scenegraph.getColGroupInLeftBottomCorner(s),f=o.scenegraph.getColGroupInRightBottomCorner(s);h&&(h.setAttribute("width",l),h.forEachChildren((g=>{g.setAttribute("width",l)}))),u&&(u.setAttribute("width",l),u.forEachChildren((g=>{g.setAttribute("width",l)}))),d&&(d.setAttribute("width",l),d.forEachChildren((g=>{g.setAttribute("width",l)}))),f&&(f.setAttribute("width",l),f.forEachChildren((g=>{g.setAttribute("width",l)}))),c&&(c.setAttribute("width",l),c.forEachChildren((g=>{g.setAttribute("width",l)})))}if(a.updateContainer(),r==="column")for(let s=n;s<=t;s++){const l=o.scenegraph.getColGroup(s);l?.setAttribute("chartInstance",void 0);for(let h=0;h<=o.frozenRowCount-1;h++)a.updateCellContent(s,h);for(let h=a.bodyRowStart;h<=a.bodyRowEnd;h++)a.updateCellContent(s,h);for(let h=o.rowCount-o.bottomFrozenRowCount;h<=o.rowCount-1;h++)a.updateCellContent(s,h)}else{for(let s=0;s<=o.frozenColCount-1;s++){const l=o.scenegraph.getColGroup(s);l?.setAttribute("chartInstance",void 0);for(let h=e;h<=i;h++)a.updateCellContent(s,h)}for(let s=a.bodyColStart;s<=a.bodyColEnd;s++){const l=o.scenegraph.getColGroup(s);l?.setAttribute("chartInstance",void 0);for(let h=e;h<=i;h++)a.updateCellContent(s,h)}for(let s=o.colCount-o.rightFrozenColCount;s<=o.colCount-1;s++){const l=o.scenegraph.getColGroup(s);l?.setAttribute("chartInstance",void 0);for(let h=e;h<=i;h++)a.updateCellContent(s,h)}}}function fht(n){n.customSelectedRangeComponents.forEach(((t,e)=>{IL(t,e,n)})),n.selectingRangeComponents.forEach(((t,e)=>{IL(t,e,n)})),n.selectedRangeComponents.forEach(((t,e)=>{IL(t,e,n)}))}function IL(n,t,e){var i,r,o,a,s,l,h,u,d,c;const f=e.table,[g,p,v,m]=t.split("-"),y=parseInt(g,10),b=parseInt(p,10),_=parseInt(v,10),w=parseInt(m,10);let C,x=y,S=b,A=_,T=w;switch(n.role){case"rowHeader":C=f.getBodyVisibleRowRange(),C&&(S=Math.max(b,C.rowStart-1),T=Math.min(w,C.rowEnd+1));break;case"columnHeader":case"bottomFrozen":C=f.getBodyVisibleCellRange(),C&&(x=Math.max(y,C.colStart-1),A=Math.min(_,C.colEnd+1));break;case"cornerHeader":case"rightTopCorner":case"leftBottomCorner":case"rightBottomCorner":break;case"rightFrozen":C=f.getBodyVisibleCellRange(),C&&(S=Math.max(b,C.rowStart-1),T=Math.min(w,C.rowEnd+1));break;default:C=f.getBodyVisibleCellRange(),C&&(S=Math.max(b,C.rowStart-1),T=Math.min(w,C.rowEnd+1),x=Math.max(y,C.colStart-1),A=Math.min(_,C.colEnd+1))}const M=f.getColsWidth(x,A),R=f.getRowsHeight(S,T),L=e.highPerformanceGetCell(x,S).globalAABBBounds;if(n.rect.setAttributes({x:L.x1-e.tableGroup.attribute.x,y:L.y1-e.tableGroup.attribute.y,width:M,height:R,visible:!0}),n.fillhandle){const O=(i=e.table.options.excelOptions)===null||i===void 0?void 0:i.fillHandle;let H,F,N=!0;typeof O=="function"&&(N=O({selectRanges:e.table.stateManager.select.ranges,table:e.table})),_<f.colCount-1?(H=e.highPerformanceGetCell(_,w).globalAABBBounds,F=H.x2-e.tableGroup.attribute.x-3):y===0?(H=e.highPerformanceGetCell(0,w).globalAABBBounds,F=H.x1-e.tableGroup.attribute.x):(H=e.highPerformanceGetCell(y-1,w).globalAABBBounds,F=H.x2-e.tableGroup.attribute.x-3),H=w<f.rowCount-1?e.highPerformanceGetCell(_,w).globalAABBBounds:e.highPerformanceGetCell(_,b-1).globalAABBBounds;const $=H.y2-e.tableGroup.attribute.y-3;(r=n.fillhandle)===null||r===void 0||r.setAttributes({x:F,y:$,width:6,height:6,visible:N})}let B=!!f.frozenColCount&&y===f.frozenColCount;!B&&f.frozenColCount&&f.scrollLeft>0&&y>=f.frozenColCount&&f.getColsWidth(0,y-1)-f.scrollLeft<f.getFrozenColsWidth()&&(B=!0);let P=!!f.rightFrozenColCount&&f.rightFrozenColCount>0&&_===f.colCount-f.rightFrozenColCount-1;!P&&f.rightFrozenColCount&&_<f.colCount-f.rightFrozenColCount&&f.getColsWidth(0,_)-f.scrollLeft>f.tableNoFrameWidth-f.getRightFrozenColsWidth()&&(P=!0);let k=!f.frozenRowCount||b===f.frozenRowCount;!k&&f.frozenRowCount&&f.scrollTop>0&&b>=f.frozenRowCount&&f.getRowsHeight(0,b-1)-f.scrollTop<f.getFrozenRowsHeight()&&(k=!0);let E=!!f.bottomFrozenRowCount&&w===f.rowCount-f.bottomFrozenRowCount-1;!E&&f.bottomFrozenRowCount&&w<f.rowCount-f.bottomFrozenRowCount&&f.getRowsHeight(0,w)-f.scrollTop>f.tableNoFrameHeight-f.getBottomFrozenRowsHeight()&&(E=!0);const{dynamicUpdateSelectionSize:D}=f.theme.selectionStyle;if(B&&(n.rect.attribute.stroke[3]||D)||P&&(n.rect.attribute.stroke[1]||D)||k&&(n.rect.attribute.stroke[0]||D)||E&&(n.rect.attribute.stroke[2]||D)){if(B&&n.rect.attribute.stroke[3]&&e.tableGroup.insertAfter(n.rect,n.role==="columnHeader"?e.cornerHeaderGroup:n.role==="bottomFrozen"?e.leftBottomCornerGroup:e.rowHeaderGroup),E&&n.rect.attribute.stroke[2]&&e.tableGroup.insertAfter(n.rect,n.role==="rowHeader"?e.leftBottomCornerGroup:n.role==="rightFrozen"?e.rightBottomCornerGroup:e.bottomFrozenGroup),k&&n.rect.attribute.stroke[0]&&e.tableGroup.insertAfter(n.rect,n.role==="rowHeader"?e.cornerHeaderGroup:n.role==="rightFrozen"?e.rightTopCornerGroup:e.colHeaderGroup),P&&n.rect.attribute.stroke[1]&&e.tableGroup.insertAfter(n.rect,n.role==="columnHeader"?e.rightTopCornerGroup:n.role==="bottomFrozen"?e.rightBottomCornerGroup:e.rightFrozenGroup),n.rect.attribute.x<f.getFrozenColsWidth()&&f.scrollLeft>0&&(n.role==="body"||n.role==="columnHeader"||n.role==="bottomFrozen")){const O=n.rect.attribute.width-(f.getFrozenColsWidth()-n.rect.attribute.x);n.rect.setAttributes({x:n.rect.attribute.x+(f.getFrozenColsWidth()-n.rect.attribute.x),width:O>0?O:0}),(o=n.fillhandle)===null||o===void 0||o.setAttributes({visible:O>0})}if(f.getRightFrozenColsWidth()>0&&e.rightFrozenGroup.attribute.height>0&&n.rect.attribute.x+n.rect.attribute.width>e.rightFrozenGroup.attribute.x&&(n.role==="body"||n.role==="columnHeader"||n.role==="bottomFrozen")){const O=e.rightFrozenGroup.attribute.x-n.rect.attribute.x;n.rect.setAttributes({x:n.rect.attribute.x,width:O>0?O:0}),(a=n.fillhandle)===null||a===void 0||a.setAttributes({visible:O-M>0})}if(n.rect.attribute.y<e.colHeaderGroup.attribute.height&&f.scrollTop>0&&(n.role==="body"||n.role==="rowHeader"||n.role==="rightFrozen")){const O=n.rect.attribute.height-(e.colHeaderGroup.attribute.height-n.rect.attribute.y);n.rect.setAttributes({y:n.rect.attribute.y+(e.colHeaderGroup.attribute.height-n.rect.attribute.y),height:O>0?O:0}),(s=n.fillhandle)===null||s===void 0||s.setAttributes({visible:O>0})}if(e.bottomFrozenGroup.attribute.width>0&&e.bottomFrozenGroup.attribute.height>0&&n.rect.attribute.y+n.rect.attribute.height>e.bottomFrozenGroup.attribute.y&&(n.role==="body"||n.role==="rowHeader"||n.role==="rightFrozen")){const O=e.bottomFrozenGroup.attribute.y-n.rect.attribute.y;n.rect.setAttributes({y:n.rect.attribute.y,height:O>0?O:0}),(l=n.fillhandle)===null||l===void 0||l.setAttributes({visible:O-R>0})}}else e.tableGroup.insertAfter(n.rect,n.role==="body"?e.bodyGroup:n.role==="columnHeader"?e.colHeaderGroup:n.role==="rowHeader"?e.rowHeaderGroup:n.role==="cornerHeader"?e.cornerHeaderGroup:n.role==="rightTopCorner"?e.rightTopCornerGroup:n.role==="rightFrozen"?e.rightFrozenGroup:n.role==="leftBottomCorner"?e.leftBottomCornerGroup:n.role==="bottomFrozen"?e.bottomFrozenGroup:e.rightBottomCornerGroup);let I=0;typeof n.rect.attribute.lineWidth=="number"&&(I=Math.ceil(n.rect.attribute.lineWidth/2)),_===f.colCount-1&&(Array.isArray(n.rect.attribute.lineWidth)&&(I=Math.ceil(((h=n.rect.attribute.lineWidth[1])!==null&&h!==void 0?h:0)/2)),n.rect.setAttributes({width:n.rect.attribute.width-I})),y===0&&(Array.isArray(n.rect.attribute.lineWidth)&&(I=Math.ceil(((u=n.rect.attribute.lineWidth[3])!==null&&u!==void 0?u:0)/2)),n.rect.setAttributes({x:n.rect.attribute.x+I,width:n.rect.attribute.width-I})),w===f.rowCount-1&&(Array.isArray(n.rect.attribute.lineWidth)&&(I=Math.ceil(((d=n.rect.attribute.lineWidth[2])!==null&&d!==void 0?d:0)/2)),n.rect.setAttributes({height:n.rect.attribute.height-I})),b===0&&(Array.isArray(n.rect.attribute.lineWidth)&&(I=Math.ceil(((c=n.rect.attribute.lineWidth[0])!==null&&c!==void 0?c:0)/2)),n.rect.setAttributes({y:n.rect.attribute.y+I,height:n.rect.attribute.height-I}))}function EX(n,t,e=!0){const i=n.table,r=t.start.col,o=t.start.row,a=t.end.col,s=t.end.row,l=t.skipBodyMerge;let h=Math.max(Math.min(a,r),0),u=Math.max(Math.min(s,o),0),d=Math.min(Math.max(a,r),i.colCount-1),c=Math.min(Math.max(s,o),i.rowCount-1);const f=()=>{let x=!1;for(let S=h;S<=d;S++){if(S===h)for(let A=u;A<=c;A++){if(!i.isHeader(S,A)&&l)continue;const T=un(i,S,A);if(T&&T.start.col<h){h=T.start.col,x=!0;break}}if(!x&&S===d)for(let A=u;A<=c;A++){if(!i.isHeader(S,A)&&l)continue;const T=un(i,S,A);if(T&&Math.min(T.end.col,i.colCount-1)>d){d=T.end.col,x=!0;break}}if(x)break}if(!x)for(let S=u;S<=c;S++){if(S===u)for(let A=h;A<=d;A++){if(!i.isHeader(A,S)&&l)continue;const T=un(i,A,S);if(T&&T.start.row<u){u=T.start.row,x=!0;break}}if(!x&&S===c)for(let A=h;A<=d;A++){if(!i.isHeader(A,S)&&l)continue;const T=un(i,A,S);if(T&&Math.min(T.end.row,i.rowCount-1)>c){c=T.end.row,x=!0;break}}if(x)break}x&&f()};e&&(f(),t.start.col>t.end.col?(t.start.col=Math.max(h,d),t.end.col=Math.min(h,d)):(t.start.col=Math.min(h,d),t.end.col=Math.max(h,d)),t.start.row>t.end.row?(t.start.row=Math.max(u,c),t.end.row=Math.min(u,c)):(t.start.row=Math.min(u,c),t.end.row=Math.max(u,c))),n.selectingRangeComponents.forEach(((x,S)=>{var A;x.rect.delete(),(A=x.fillhandle)===null||A===void 0||A.delete()})),n.selectingRangeComponents=new Map;const{needRowHeader:g,needRightRowHeader:p,needColumnHeader:v,needBottomColumnHeader:m,needBody:y,needCornerHeader:b,needRightTopCornerHeader:_,needLeftBottomCornerHeader:w,needRightBottomCornerHeader:C}=Klt(h,u,d,c,i);if(b){const x=Math.min(d,i.frozenColCount-1),S=Math.min(c,i.frozenRowCount-1),A=[!0,!v,!g,!0];n.createCellSelectBorder(h,u,x,S,"cornerHeader",`${h}${u}${d}${c}`,A)}if(_){const x=Math.max(h,i.colCount-i.rightFrozenColCount),S=Math.min(c,i.frozenRowCount-1),A=[!0,!0,!p,!v];n.createCellSelectBorder(x,u,d,S,"rightTopCorner",`${h}${u}${d}${c}`,A)}if(w){const x=Math.min(d,i.frozenColCount-1),S=Math.max(u,i.rowCount-i.bottomFrozenRowCount),A=[!g,!m,!0,!0];n.createCellSelectBorder(h,S,x,c,"leftBottomCorner",`${h}${u}${d}${c}`,A)}if(C){const x=Math.max(h,i.colCount-i.rightFrozenColCount),S=Math.max(u,i.rowCount-i.bottomFrozenRowCount),A=[!p,!0,!0,!m];n.createCellSelectBorder(x,S,d,c,"rightBottomCorner",`${h}${u}${d}${c}`,A)}if(v){const x=Math.max(h,i.frozenColCount),S=Math.min(d,i.colCount-i.rightFrozenColCount-1),A=Math.min(c,i.frozenRowCount-1),T=[!0,!_,!y,!b];n.createCellSelectBorder(x,u,S,A,"columnHeader",`${h}${u}${d}${c}`,T)}if(m){const x=Math.max(h,i.frozenColCount),S=Math.min(d,i.colCount-i.rightFrozenColCount-1),A=Math.max(u,i.rowCount-i.bottomFrozenRowCount),T=[!y,!C,!0,!w];n.createCellSelectBorder(x,A,S,c,"bottomFrozen",`${h}${u}${d}${c}`,T)}if(g){const x=Math.max(u,i.frozenRowCount),S=Math.min(c,i.rowCount-i.bottomFrozenRowCount-1),A=Math.min(d,i.frozenColCount-1),T=[!b,!y,!w,!0];n.createCellSelectBorder(h,x,A,S,"rowHeader",`${h}${u}${d}${c}`,T)}if(p){const x=Math.max(u,i.frozenRowCount),S=Math.min(c,i.rowCount-i.bottomFrozenRowCount-1),A=Math.max(h,i.colCount-i.rightFrozenColCount),T=[!_,!0,!C,!y];n.createCellSelectBorder(A,x,d,S,"rightFrozen",`${h}${u}${d}${c}`,T)}if(y){const x=Math.max(h,i.frozenColCount),S=Math.max(u,i.frozenRowCount),A=Math.min(d,i.colCount-i.rightFrozenColCount-1),T=Math.min(c,i.rowCount-i.bottomFrozenRowCount-1),M=[!v,!p,!m,!g];n.createCellSelectBorder(x,S,A,T,"body",`${h}${u}${d}${c}`,M)}}function DX(n){n.selectingRangeComponents.forEach(((t,e)=>{t.rect.setAttribute("opacity",0)})),n.selectedRangeComponents.forEach(((t,e)=>{t.rect.setAttribute("opacity",0)}))}function IX(n){n.selectingRangeComponents.forEach(((t,e)=>{t.rect.setAttribute("opacity",1)})),n.selectedRangeComponents.forEach(((t,e)=>{t.rect.setAttribute("opacity",1)}))}function vJt(n,t,e,i,r,o,a,s){var l,h,u,d,c,f,g,p,v;let m=!!(!((l=n.table.options.excelOptions)===null||l===void 0)&&l.fillHandle);if(((h=n.table.stateManager.select.ranges)===null||h===void 0?void 0:h.length)>1)m=!1,n.removeFillHandleFromSelectComponents();else if(((u=n.table.stateManager.select.ranges)===null||u===void 0?void 0:u.length)===1){const L=Math.max(n.table.stateManager.select.ranges[0].start.row,n.table.stateManager.select.ranges[0].end.row),B=Math.max(n.table.stateManager.select.ranges[0].start.col,n.table.stateManager.select.ranges[0].end.col);n.table.isHeader(B,L)&&(m=!1)}!Array.isArray(s)||s[1]!==!1&&s[2]!==!1||(m=!1);const y=Math.min(t,i),b=Math.min(e,r),_=Math.max(t,i),w=Math.max(e,r),C=n.highPerformanceGetCell(y,b).globalAABBBounds,x=n.highPerformanceGetCell(_,w).globalAABBBounds,S=n.table.theme,A=(d=S.selectionStyle)===null||d===void 0?void 0:d.cellBorderColor,T=(c=S.selectionStyle)===null||c===void 0?void 0:c.cellBorderLineWidth,M=ei({pickable:!1,fill:((f=S.selectionStyle)===null||f===void 0?void 0:f.selectionFillMode)!=="replace"&&((p=(g=S.selectionStyle)===null||g===void 0?void 0:g.cellBgColor)!==null&&p!==void 0?p:"rgba(0, 0, 255,0.1)"),lineWidth:T,stroke:s.map((L=>!!L&&A)),x:C.x1-n.tableGroup.attribute.x,y:C.y1-n.tableGroup.attribute.y,width:0,height:0,visible:!0,cornerRadius:ght(o,(v=n.table.theme.frameStyle)===null||v===void 0?void 0:v.cornerRadius,t,e,i,r,n.table)});let R;m&&(R=ei({pickable:!1,fill:A,stroke:A,x:x.x2-3,y:x.y2-3,width:6,height:6,visible:!0})),n.lastSelectId=a,n.selectingRangeComponents.set(`${y}-${b}-${_}-${w}-${a}`,{rect:M,fillhandle:R,role:o}),n.tableGroup.insertAfter(M,o==="body"?n.bodyGroup:o==="columnHeader"?n.colHeaderGroup:o==="rowHeader"?n.rowHeaderGroup:o==="cornerHeader"?n.cornerHeaderGroup:o==="rightTopCorner"?n.rightTopCornerGroup:o==="rightFrozen"?n.rightFrozenGroup:o==="leftBottomCorner"?n.leftBottomCornerGroup:o==="bottomFrozen"?n.bottomFrozenGroup:n.rightBottomCornerGroup),m&&n.tableGroup.insertAfter(R,o==="body"?n.bodyGroup:o==="columnHeader"?n.colHeaderGroup:o==="rowHeader"?n.rowHeaderGroup:o==="cornerHeader"?n.cornerHeaderGroup:o==="rightTopCorner"?n.rightTopCornerGroup:o==="rightFrozen"?n.rightFrozenGroup:o==="leftBottomCorner"?n.leftBottomCornerGroup:o==="bottomFrozen"?n.bottomFrozenGroup:n.rightBottomCornerGroup)}function ght(n,t,e,i,r,o,a){if(!t)return;const s=Array.isArray(t)?t:[t,t,t,t],l=a.colCount-1,h=a.rowCount-1,u=[0,0,0,0];let d=!1;return e===0&&i===0?(u[0]=s[0],d=!0):r===l&&o===h?(u[2]=s[2],d=!0):e===0&&o===h?(u[3]=s[3],d=!0):r===l&&i===0&&(u[1]=s[1],d=!0),d?u:void 0}function OX(n){n.selectingRangeComponents.forEach(((t,e)=>{var i;n.selectedRangeComponents.get(e)&&(n.selectingRangeComponents.get(e).rect.delete(),(i=n.selectingRangeComponents.get(e).fillhandle)===null||i===void 0||i.delete()),n.selectedRangeComponents.set(e,t)})),n.selectingRangeComponents=new Map,n.updateNextFrame()}function mJt(n){n.selectedRangeComponents.forEach(((t,e)=>{var i;e.split("-")[4]===n.lastSelectId&&(t.rect.delete(),(i=t.fillhandle)===null||i===void 0||i.delete(),n.selectedRangeComponents.delete(e))}))}function HX(n){n.selectedRangeComponents.forEach(((t,e)=>{var i;t.rect.delete(),(i=t.fillhandle)===null||i===void 0||i.delete()})),n.selectedRangeComponents=new Map}function pht(n){n.selectingRangeComponents.forEach(((t,e)=>{var i;t.rect.delete(),(i=t.fillhandle)===null||i===void 0||i.delete()})),n.selectingRangeComponents=new Map}function yJt(n){n.selectedRangeComponents.forEach(((t,e)=>{var i;(i=t.fillhandle)===null||i===void 0||i.delete(),t.fillhandle=void 0}))}function bJt(n,t,e,i,r){var o,a;sT(i)&&yN(i);const s=i.scenegraph,l=_y(n.map((m=>m.row))).sort(((m,y)=>y-m)),h=_y(t.map((m=>m.row))).sort(((m,y)=>m-y)),u=_y(e.map((m=>m.row))).sort(((m,y)=>m-y));let d;if(u.length&&(d=HL(u[0]-1,u[u.length-1]+1,s)),h.length){const m=HL(h[0]-1,h[h.length-1]+1,s);d=Y(d)?Y(m)?Math.min(d,m):d:m}if(l.length){const m=HL(l[0]-1,l[l.length-1]+1,s);d=Y(d)?Y(m)?Math.min(d,m):d:m}l.forEach((m=>{_Jt(m,s,r)}));const c=i.rowHeightsMap;if(l.forEach((m=>{c.delete(m)})),l.length){wJt(s);const m=OL(l[l.length-1]-1,l[0]-l.length+1,s);d=Y(d)?Y(m)?Math.min(d,m):d:m}let f;if(s.table._clearRowRangeHeightsMap(),h.forEach((m=>{const y=CJt(m,s,r);f=f??y,c.insert(m)})),xJt(s),h.length){const m=OL(h[0]-1,h[h.length-1]+1,s);d=Y(d)?Y(m)?Math.min(d,m):d:m}const g=new Set;for(let m=0;m<i.colCount;m++)u.forEach((y=>{if(y<i.frozenRowCount){const b=un(s.table,m,y);if(b)for(let _=b.start.col;_<=b.end.col;_++)for(let w=b.start.row;w<=b.end.row;w++){const C=`${_}-${w}`;g.has(C)||(Na(_,w,s.table,!1),g.add(C))}else Na(m,y,s.table,!1)}else if(y>i.rowCount-1||y<s.table.rowCount-s.table.bottomFrozenRowCount&&(y<s.proxy.rowStart||y>s.proxy.rowEnd))vht(y,s);else{const b=un(s.table,m,y);if(b)for(let _=b.start.col;_<=b.end.col;_++)for(let w=b.start.row;w<=b.end.row;w++){const C=`${_}-${w}`;g.has(C)||(Na(_,w,s.table,!1),g.add(C))}else Na(m,y,s.table,!1)}}));if(u.length){const m=OL(u[0]-1,u[u.length-1]+1,s);d=Y(d)?Y(m)?Math.min(d,m):d:m}if(yt(f)){for(let m=0;m<Math.max(i.colCount,(o=i.internalProps._oldColCount)!==null&&o!==void 0?o:i.colCount);m++)for(let y=f;y<Math.max(i.rowCount,(a=i.internalProps._oldRowCount)!==null&&a!==void 0?a:i.rowCount);y++){const b=s.highPerformanceGetCell(m,y,!0);b&&(b.needUpdate=!0)}d=Y(d)?Y(f)?Math.min(d,f):d:f}if(yt(d)&&(s.proxy.rowUpdatePos=Math.min(s.proxy.rowUpdatePos,d)),h.length){if(!yt(f)){const m=Math.min(...h);s.proxy.rowUpdatePos=Math.min(m,s.proxy.rowUpdatePos)}s.proxy.rowUpdateDirection="up",s.proxy.updateCellGroups(2*s.proxy.screenRowCount),v()}else l.length&&(SJt(l[l.length-1],s),s.proxy.updateCellGroups(2*s.proxy.screenRowCount),v());s.proxy.progress();const p=i.getRowsHeight(i.frozenRowCount,i.rowCount-1-i.bottomFrozenRowCount);function v(){if(h?.[h?.length-1]>=i.rowCount-i.bottomFrozenRowCount||u?.[u?.length-1]>=i.rowCount-i.bottomFrozenRowCount||l?.[0]>=i.rowCount-i.bottomFrozenRowCount){for(let m=0;m<i.colCount;m++)for(let y=i.rowCount-i.bottomFrozenRowCount;y<i.rowCount;y++){const b=s.highPerformanceGetCell(m,y,!0);b&&(b.needUpdate=!0)}s.proxy.updateBottomFrozenCellGroups()}}s.updateContainerHeight(s.table.frozenRowCount,p-s.bodyGroup.attribute.height)}function _Jt(n,t,e){const i=t.proxy;if(n>=i.rowStart&&n<=i.rowEnd&&(vht(n,t),i.rowEnd--,i.currentRow--),!e){i.bodyBottomRow--;const r=Math.min(i.rowLimit,i.bodyBottomRow-i.bodyTopRow+1);i.totalActualBodyRowCount=r,i.totalRow=Math.min(i.table.rowCount-1,i.rowStart+r-1)}}function CJt(n,t,e){const i=t.proxy;if(!e){i.bodyBottomRow++;const r=Math.min(i.rowLimit,i.bodyBottomRow-i.bodyTopRow+1);i.totalActualBodyRowCount=r,i.totalRow=i.rowStart+r-1}if(!(n<i.rowStart))return n>i.rowEnd?i.rowEnd-i.rowStart+1<i.rowLimit?(i.rowEnd++,i.currentRow++,zX(n,t),n):void 0:(i.rowEnd-i.rowStart+1<i.rowLimit&&(i.rowEnd++,i.currentRow++,zX(n,t)),n)}function wJt(n){function t(e,i){e.row=i;const r=un(n.table,e.col,e.row);r?(e.mergeStartCol=r.start.col,e.mergeEndCol=r.end.col,e.mergeStartRow=r.start.row,e.mergeEndRow=r.end.row):(e.mergeStartCol=void 0,e.mergeEndCol=void 0,e.mergeStartRow=void 0,e.mergeEndRow=void 0)}n.bodyGroup.forEachChildren((e=>{let i=n.bodyRowStart;e?.forEachChildren((r=>{t(r,i),i++}))})),n.rowHeaderGroup.forEachChildren((e=>{let i=n.bodyRowStart;e?.forEachChildren((r=>{t(r,i),i++}))})),n.rightFrozenGroup.forEachChildren((e=>{let i=n.bodyRowStart;e?.forEachChildren((r=>{t(r,i),i++}))})),n.bottomFrozenGroup.forEachChildren((e=>{let i=n.table.rowCount-n.table.bottomFrozenRowCount;e?.forEachChildren((r=>{t(r,i),i++}))})),n.leftBottomCornerGroup.forEachChildren((e=>{let i=n.table.rowCount-n.table.bottomFrozenRowCount;e?.forEachChildren((r=>{t(r,i),i++}))})),n.rightBottomCornerGroup.forEachChildren((e=>{let i=n.table.rowCount-n.table.bottomFrozenRowCount;e?.forEachChildren((r=>{t(r,i),i++}))}))}function xJt(n){function t(e,i,r){e.row=i,e.setAttribute("y",r);const o=un(n.table,e.col,e.row);o?(e.mergeStartCol=o.start.col,e.mergeEndCol=o.end.col,e.mergeStartRow=o.start.row,e.mergeEndRow=o.end.row):(e.mergeStartCol=void 0,e.mergeEndCol=void 0,e.mergeStartRow=void 0,e.mergeEndRow=void 0)}n.bodyGroup.forEachChildren((e=>{let i=n.bodyRowStart,r=n.getCellGroupY(i);e?.forEachChildren((o=>{t(o,i,r),i++,r+=o.attribute.height}))})),n.rowHeaderGroup.forEachChildren((e=>{let i=n.bodyRowStart,r=n.getCellGroupY(i);e?.forEachChildren((o=>{t(o,i,r),i++,r+=o.attribute.height}))})),n.rightFrozenGroup.forEachChildren((e=>{let i=n.bodyRowStart,r=n.getCellGroupY(i);e?.forEachChildren((o=>{t(o,i,r),i++,r+=o.attribute.height}))})),n.bottomFrozenGroup.forEachChildren((e=>{let i=n.table.rowCount-n.table.bottomFrozenRowCount,r=0;e?.forEachChildren((o=>{t(o,i,r),i++,r+=o.attribute.height}))})),n.leftBottomCornerGroup.forEachChildren((e=>{let i=n.table.rowCount-n.table.bottomFrozenRowCount,r=0;e?.forEachChildren((o=>{t(o,i,r),i++,r+=o.attribute.height}))})),n.rightBottomCornerGroup.forEachChildren((e=>{let i=n.table.rowCount-n.table.bottomFrozenRowCount,r=0;e?.forEachChildren((o=>{t(o,i,r),i++,r+=o.attribute.height}))}))}function zX(n,t){for(let e=0;e<t.table.colCount;e++){const i=new ve({x:0,y:0,width:t.table.getColWidth(e),height:t.table.getRowHeight(n)});if(i.role="cell",i.col=e,i.row=n,i.needUpdate=!0,!i)continue;const r=t.getColGroup(e);if(r)if(r.firstChild&&n<r.firstChild.row)r.insertBefore(i,r.firstChild),r.firstChild.row=r.firstChild.row+1;else if(r.lastChild&&n>r.lastChild.row)r.appendChild(i);else{const o=t.highPerformanceGetCell(e,n,!0);o!==i&&(r.insertBefore(i,o),o&&(o.row=o.row+1),o!==r.lastChild&&r.lastChild&&(r.lastChild.row=r.lastChild.row+1))}}}function vht(n,t){for(let e=0;e<t.table.colCount;e++){const i=t.getColGroup(e,!1);if(!i)continue;let r;i.forEachChildren((o=>o.row===n&&(r=o,!0))),r&&(i.updateColumnHeight(-r.attribute.height),i.removeChild(r))}}function OL(n,t,e){let i;for(let r=0;r<e.table.colCount;r++){const o=e.table.getCellRange(r,n);let a;o.start.row<=n+1&&o.end.row>=n+1&&(lT(o,e),a=o.start.row);const s=e.table.getCellRange(r,t);s.start.row<=t+1&&s.end.row>=t+1&&(lT(s,e),a=s.start.row),Y(a)&&(i=Y(i)?Math.min(i,a):a)}return i}function HL(n,t,e){let i;for(let r=0;r<e.table.colCount;r++){let o;const a=e.highPerformanceGetCell(r,n);a.mergeStartRow&&a.mergeEndRow&&a.mergeEndRow>n&&(lT({start:{row:a.mergeStartRow,col:e.table.isAutoRowHeight(t)?0:a.mergeStartCol},end:{row:a.mergeEndRow,col:e.table.isAutoRowHeight(t)?e.table.colCount-1:a.mergeEndCol}},e),o=a.mergeStartRow);const s=e.highPerformanceGetCell(r,t);s.mergeStartRow&&s.mergeEndRow&&s.mergeStartRow<t&&(lT({start:{row:s.mergeStartRow,col:e.table.isAutoRowHeight(t)?0:s.mergeStartCol},end:{row:s.mergeEndRow,col:e.table.isAutoRowHeight(t)?e.table.colCount-1:s.mergeEndCol}},e),o=s.mergeStartRow),Y(o)&&(i=Y(i)?Math.min(i,o):o)}return i}function lT(n,t){const{start:e,end:i}=n;for(let r=e.col;r<=i.col;r++)for(let o=e.row;o<=i.row;o++){const a=t.highPerformanceGetCell(r,o,!0);a&&(a.needUpdate=!0)}}function SJt(n,t){if(t.table.isHasSeriesNumber())for(let e=n;e<=t.table.rowCount-1;e++)Na(0,e,t.table,!1)}function AJt(n){const{internalProps:t}=n;t.bodyDomContainer=document.createElement("div"),t.bodyDomContainer.id="vtable-body-dom-container",t.bodyDomContainer.classList.add("table-component-container"),t.element.appendChild(t.bodyDomContainer),t.headerDomContainer=document.createElement("div"),t.headerDomContainer.id="vtable-header-dom-container",t.headerDomContainer.classList.add("table-component-container"),t.element.appendChild(t.headerDomContainer),t.frozenBodyDomContainer=document.createElement("div"),t.frozenBodyDomContainer.id="vtable-frozen-body-dom-container",t.frozenBodyDomContainer.classList.add("table-component-container"),t.element.appendChild(t.frozenBodyDomContainer),t.frozenHeaderDomContainer=document.createElement("div"),t.frozenHeaderDomContainer.id="vtable-frozen-header-dom-container",t.frozenHeaderDomContainer.classList.add("table-component-container"),t.element.appendChild(t.frozenHeaderDomContainer),t.rightFrozenBodyDomContainer=document.createElement("div"),t.rightFrozenBodyDomContainer.id="vtable-right-frozen-body-dom-container",t.rightFrozenBodyDomContainer.classList.add("table-component-container"),t.element.appendChild(t.rightFrozenBodyDomContainer),t.rightFrozenHeaderDomContainer=document.createElement("div"),t.rightFrozenHeaderDomContainer.id="vtable-right-frozen-header-dom-container",t.rightFrozenHeaderDomContainer.classList.add("table-component-container"),t.element.appendChild(t.rightFrozenHeaderDomContainer),t.frozenBottomDomContainer=document.createElement("div"),t.frozenBottomDomContainer.id="vtable-frozen-bottom-dom-container",t.frozenBottomDomContainer.classList.add("table-component-container"),t.element.appendChild(t.frozenBottomDomContainer),t.bottomDomContainer=document.createElement("div"),t.bottomDomContainer.id="vtable-bottom-dom-container",t.bottomDomContainer.classList.add("table-component-container"),t.element.appendChild(t.bottomDomContainer),t.rightFrozenBottomDomContainer=document.createElement("div"),t.rightFrozenBottomDomContainer.id="vtable-right-frozen-bottom-dom-container",t.rightFrozenBottomDomContainer.classList.add("table-component-container"),t.element.appendChild(t.rightFrozenBottomDomContainer)}function TJt(n){const{headerDomContainer:t,bodyDomContainer:e,frozenBodyDomContainer:i,frozenHeaderDomContainer:r,rightFrozenBodyDomContainer:o,rightFrozenHeaderDomContainer:a,bottomDomContainer:s,frozenBottomDomContainer:l,rightFrozenBottomDomContainer:h}=n.internalProps;if(!(t||e||i||r||o||a||s||l||h))return;const u=n.getAllColsWidth(),d=Math.min(u,n.tableNoFrameWidth),c=n.getFrozenColsWidth(),f=n.getRightFrozenColsWidth(),g=c+f,p=Math.min(u-g,d-g),v=n.getAllRowsHeight(),m=Math.min(v,n.tableNoFrameHeight),y=n.getFrozenRowsHeight(),b=n.getBottomFrozenRowsHeight(),_=y+b,w=Math.min(v-_,m-_);n.frozenColCount>0?(t.style.left=`${n.tableX+c}px`,e.style.left=`${n.tableX+c}px`,s.style.left=`${n.tableX+c}px`):n.frozenColCount===0&&(t.style.left=`${n.tableX}px`,e.style.left=`${n.tableX}px`,s.style.left=`${n.tableX}px`),i.style.left=`${n.tableX}px`,r.style.left=`${n.tableX}px`,t.style.width=`${p}px`,t.style.height=`${y}px`,e.style.top=`${n.tableY}px`,e.style.width=`${p}px`,e.style.height=`${w}px`,e.style.top=`${n.tableY+y}px`,i.style.width=`${c}px`,i.style.height=`${w}px`,i.style.top=`${n.tableY+y}px`,r.style.width=`${c}px`,r.style.height=`${y}px`,r.style.top=`${n.tableY}px`,o.style.width=`${f}px`,o.style.height=`${w}px`,o.style.top=`${n.tableY+y}px`,o.style.left=n.tableX+d-f+"px",a.style.width=`${f}px`,a.style.height=`${y}px`,a.style.top=`${n.tableY}px`,a.style.left=n.tableX+d-f+"px",s.style.width=`${p}px`,s.style.height=`${b}px`,s.style.top=n.tableY+m-b+"px",l.style.width=`${c}px`,l.style.height=`${b}px`,l.style.top=n.tableY+m-b+"px",h.style.width=`${f}px`,h.style.height=`${b}px`,h.style.top=n.tableY+m-b+"px",h.style.left=n.tableX+d-f+"px"}function mht(n){if(!n.table.reactCustomLayout)return;const{table:t,stage:e}=n,i=e.pluginService.findPluginsByName("ReactAttributePlugin")[0],{htmlMap:r,renderId:o}=i;for(const a in r){const s=r[a],{graphic:l,wrapContainer:h,renderId:u}=s;if(u!==o)continue;let d;if(n.frozenColCount>t.frozenColCount){const c=Uf(l);if(!c)continue;const{col:f,row:g}=c;g>=t.rowCount-t.bottomFrozenRowCount&&f<n.frozenColCount&&f>=t.frozenColCount&&l.attribute.react.container===t.frozenBottomDomContainer?d=t.bottomDomContainer:g>=t.frozenRowCount&&f<n.frozenColCount&&f>=t.frozenColCount&&l.attribute.react.container===t.frozenBodyDomContainer?d=t.bodyDomContainer:g<t.frozenRowCount&&f<n.frozenColCount&&f>=t.frozenColCount&&l.attribute.react.container===t.frozenHeaderDomContainer&&(d=t.headerDomContainer)}else if(n.frozenColCount<t.frozenColCount){const c=Uf(l);if(!c)continue;const{col:f,row:g}=c;g>=t.rowCount-t.bottomFrozenRowCount&&f<t.frozenColCount&&f>=n.frozenColCount&&l.attribute.react.container===t.bottomDomContainer?d=t.frozenBottomDomContainer:g>=t.frozenRowCount&&f<t.frozenColCount&&f>=n.frozenColCount&&l.attribute.react.container===t.bodyDomContainer?d=t.frozenBodyDomContainer:g<t.frozenRowCount&&f<t.frozenColCount&&f>=n.frozenColCount&&l.attribute.react.container===t.headerDomContainer&&(d=t.frozenHeaderDomContainer)}d&&(d.appendChild(h),s.nativeContainer=d,s.container=d,l.attribute.react.container=d,i.updateStyleOfWrapContainer(l,e,h,d,l.attribute.react))}}function MJt(n){var t,e,i,r;if(n.table.frozenColCount>n.table.rowHeaderLevelCount){n.rowHeaderGroup.setAttribute("height",n.bodyGroup.attribute.height),n.rowHeaderGroup.setAttribute("y",n.bodyGroup.attribute.y),n.cornerHeaderGroup.setAttribute("height",n.colHeaderGroup.attribute.height);for(let o=0;o<n.table.frozenColCount-n.table.rowHeaderLevelCount;o++)yht(n),bht(n),wht(n)}else if(n.table.frozenColCount<n.table.rowHeaderLevelCount){n.bodyGroup.setAttribute("height",n.rowHeaderGroup.attribute.height),n.bodyGroup.setAttribute("y",n.rowHeaderGroup.attribute.y),n.colHeaderGroup.setAttribute("height",n.cornerHeaderGroup.attribute.height);for(let o=0;o<n.table.rowHeaderLevelCount-n.table.frozenColCount;o++)_ht(n),Cht(n),xht(n)}n.bodyGroup.setAttribute("x",n.rowHeaderGroup.attribute.width),n.colHeaderGroup.setAttribute("x",n.cornerHeaderGroup.attribute.width),n.updateContainer(),n.updateBorderSizeAndPosition(),n.isPivot||n.table.transpose?n.table.options.frozenColCount?n.component.setFrozenColumnShadow(n.table.frozenColCount-1):n.table.options.frozenColCount&&n.component.setRightFrozenColumnShadow(n.table.colCount-n.table.rightFrozenColCount):(n.component.setFrozenColumnShadow(n.table.frozenColCount-1),n.component.setRightFrozenColumnShadow(n.table.colCount-n.table.rightFrozenColCount)),n.hasFrozen=!0,n.frozenColCount=n.table.frozenColCount,n.frozenRowCount=(r=(e=(t=n.colHeaderGroup.firstChild)===null||t===void 0?void 0:t.childrenCount)!==null&&e!==void 0?e:(i=n.cornerHeaderGroup.firstChild)===null||i===void 0?void 0:i.childrenCount)!==null&&r!==void 0?r:n.table.frozenRowCount}function RJt(n){var t,e,i,r,o,a;if(n.frozenColCount>n.table.frozenColCount){n.bodyGroup.setAttribute("height",n.rowHeaderGroup.attribute.height),n.bodyGroup.setAttribute("y",n.rowHeaderGroup.attribute.y),n.colHeaderGroup.setAttribute("height",n.cornerHeaderGroup.attribute.height);for(let s=0;s<n.frozenColCount-n.table.frozenColCount;s++)_ht(n),Cht(n),xht(n)}else if(n.frozenColCount<n.table.frozenColCount){n.rowHeaderGroup.setAttribute("height",n.bodyGroup.attribute.height),n.rowHeaderGroup.setAttribute("y",n.bodyGroup.attribute.y),n.cornerHeaderGroup.setAttribute("height",n.colHeaderGroup.attribute.height);for(let s=0;s<n.table.frozenColCount-n.frozenColCount;s++)yht(n),bht(n),wht(n)}mht(n),n.recreateAllSelectRangeComponents(),n.frozenColCount=n.table.frozenColCount,n.frozenRowCount=(r=(e=(t=n.colHeaderGroup.firstChild)===null||t===void 0?void 0:t.childrenCount)!==null&&e!==void 0?e:(i=n.cornerHeaderGroup.firstChild)===null||i===void 0?void 0:i.childrenCount)!==null&&r!==void 0?r:n.table.frozenRowCount,n.proxy.colStart=(a=(o=n.bodyGroup.firstChild)===null||o===void 0?void 0:o.col)!==null&&a!==void 0?a:n.table.frozenColCount,n.bodyGroup.setAttribute("x",n.rowHeaderGroup.attribute.width),n.colHeaderGroup.setAttribute("x",n.cornerHeaderGroup.attribute.width),n.updateContainer(),n.updateBorderSizeAndPosition(),n.isPivot||n.table.transpose?n.table.options.frozenColCount?n.component.setFrozenColumnShadow(n.table.frozenColCount-1):n.table.options.rightFrozenColCount&&n.component.setRightFrozenColumnShadow(n.table.colCount-n.table.rightFrozenColCount):(n.component.setFrozenColumnShadow(n.table.frozenColCount-1),n.component.setRightFrozenColumnShadow(n.table.colCount-n.table.rightFrozenColCount)),n.hasFrozen=!0}function yht(n){const t=n.bodyGroup.firstChild instanceof ve?n.bodyGroup.firstChild:null;t&&(n.rowHeaderGroup.appendChild(t),n.rowHeaderGroup.setAttribute("width",n.rowHeaderGroup.attribute.width+t.attribute.width),n.bodyGroup.setAttribute("width",n.bodyGroup.attribute.width-t.attribute.width))}function bht(n){const t=n.colHeaderGroup.firstChild instanceof ve?n.colHeaderGroup.firstChild:null;t&&(n.cornerHeaderGroup.appendChild(t),n.cornerHeaderGroup.setAttribute("width",n.cornerHeaderGroup.attribute.width+t.attribute.width),n.colHeaderGroup.setAttribute("width",n.colHeaderGroup.attribute.width-t.attribute.width))}function _ht(n){var t;const e=n.rowHeaderGroup.lastChild instanceof ve?n.rowHeaderGroup.lastChild:(t=n.rowHeaderGroup.lastChild)===null||t===void 0?void 0:t._prev;e&&(ja(n.bodyGroup,e,n.bodyGroup.firstChild),n.bodyGroup.setAttribute("width",n.bodyGroup.attribute.width+e.attribute.width),n.rowHeaderGroup.setAttribute("width",n.rowHeaderGroup.attribute.width-e.attribute.width))}function Cht(n){var t;const e=n.cornerHeaderGroup.lastChild instanceof ve?n.cornerHeaderGroup.lastChild:(t=n.cornerHeaderGroup.lastChild)===null||t===void 0?void 0:t._prev;e&&(ja(n.colHeaderGroup,e,n.colHeaderGroup.firstChild),n.colHeaderGroup.setAttribute("width",n.colHeaderGroup.attribute.width+e.attribute.width),n.cornerHeaderGroup.setAttribute("width",n.cornerHeaderGroup.attribute.width-e.attribute.width))}function wht(n){const t=n.bottomFrozenGroup.firstChild instanceof ve?n.bottomFrozenGroup.firstChild:null;t&&(n.leftBottomCornerGroup.appendChild(t),n.leftBottomCornerGroup.setAttribute("width",n.leftBottomCornerGroup.attribute.width+t.attribute.width),n.bottomFrozenGroup.setAttribute("width",n.bottomFrozenGroup.attribute.width-t.attribute.width),n.table.isPivotChart()&&t.forEachChildren((e=>{e.setAttributes({stroke:!1,fill:!1})})))}function xht(n){var t;const e=n.leftBottomCornerGroup.lastChild instanceof ve?n.leftBottomCornerGroup.lastChild:(t=n.leftBottomCornerGroup.lastChild)===null||t===void 0?void 0:t._prev;e&&(ja(n.bottomFrozenGroup,e,n.bottomFrozenGroup.firstChild),n.bottomFrozenGroup.setAttribute("width",n.bottomFrozenGroup.attribute.width+e.attribute.width),n.leftBottomCornerGroup.setAttribute("width",n.leftBottomCornerGroup.attribute.width-e.attribute.width),n.table.isPivotChart()&&e.forEachChildren((i=>{var r,o,a,s;const l=n.table._getCellStyle(i.col,i.row),h=n.table.getCellRange(i.col,i.row),u=Sd(l,n.table,h?h.start.col:i.col,h?h.start.row:i.row,gt).theme;i.setAttributes({fill:(o=(r=u?.group)===null||r===void 0?void 0:r.fill)!==null&&o!==void 0?o:void 0,stroke:(s=(a=u?.group)===null||a===void 0?void 0:a.stroke)!==null&&s!==void 0?s:void 0})})))}function PJt(n,t){const{table:e,proxy:i,rightTopCornerGroup:r,rightFrozenGroup:o,rightBottomCornerGroup:a,bottomFrozenGroup:s,bodyGroup:l,colHeaderGroup:h}=t,u=t.table.rightFrozenColCount;if(n>u){for(let c=e.colCount-u-1;c>=e.colCount-n;c--)ja(o,t.getColGroup(c),o.firstChild),ja(r,t.getColGroup(c,!0),r.firstChild),ja(a,t.getColGroupInBottom(c),a.firstChild);let d=0;o.forEachChildren((c=>{c.setAttribute("x",d),d+=c.attribute.width})),d=0,r.forEachChildren((c=>{c.setAttribute("x",d),d+=c.attribute.width})),d=0,a.forEachChildren((c=>{c.setAttribute("x",d),d+=c.attribute.width}))}else if(n<u){for(let c=e.colCount-u;c<e.colCount-n;c++){const f=t.getColGroup(c);f.setAttribute("x",l.lastChild.attribute.x+e.getColWidth(l.lastChild.col)),l.appendChild(f);const g=t.getColGroupInRightTopCorner(c);g.setAttribute("x",h.lastChild.attribute.x+e.getColWidth(h.lastChild.col)),h.appendChild(g);const p=t.getColGroupInRightBottomCorner(c);p.setAttribute("x",s.lastChild.attribute.x+e.getColWidth(s.lastChild.col)),s.appendChild(p)}let d=0;o.forEachChildren((c=>{c.setAttribute("x",d),d+=c.attribute.width})),d=0,r.forEachChildren((c=>{c.setAttribute("x",d),d+=c.attribute.width})),d=0,a.forEachChildren((c=>{c.setAttribute("x",d),d+=c.attribute.width}))}o.setAttribute("width",e.getColsWidth(e.colCount-n,e.colCount-1)),r.setAttribute("width",e.getColsWidth(e.colCount-n,e.colCount-1)),a.setAttribute("width",e.getColsWidth(e.colCount-n,e.colCount-1)),e.internalProps.rightFrozenColCount=n,t.updateContainer(),t.component.updateScrollBar(),t.updateNextFrame()}function BJt(n,t){const{table:e,proxy:i,bottomFrozenGroup:r,leftBottomCornerGroup:o,rightBottomCornerGroup:a}=t;r.childrenCount||(i.table.isPivotChart()||(rn(o,0,0,0,e.frozenColCount-1,0,-1,"rowHeader",e),rn(a,0,0,e.colCount-e.rightFrozenColCount,e.colCount-1,0,-1,"body",e)),rn(r,0,0,i.colStart,i.colEnd,0,-1,"body",e));const s=t.table.bottomFrozenRowCount;if(n>s){for(let l=0;l<e.frozenColCount;l++){const h=t.getColGroupInLeftBottomCorner(l);for(let d=e.rowCount-s-1;d>=e.rowCount-n;d--)ja(h,t.getCell(l,d,!0),h.firstChild);let u=0;h.forEachChildren((d=>{d.setAttribute("y",u),u+=e.getRowHeight(d.row)}))}for(let l=i.colStart;l<=i.colEnd;l++){const h=t.getColGroupInBottom(l);for(let d=e.rowCount-s-1;d>=e.rowCount-n;d--)ja(h,t.getCell(l,d,!0),h.firstChild);let u=0;h.forEachChildren((d=>{d.setAttribute("y",u),u+=e.getRowHeight(d.row)}))}if(e.rightFrozenColCount>0)for(let l=e.colCount-e.rightFrozenColCount;l<e.colCount;l++){const h=t.getColGroupInRightBottomCorner(l);for(let d=e.rowCount-s-1;d>=e.rowCount-n;d--)ja(h,t.getCell(l,d,!0),h.firstChild);let u=0;h.forEachChildren((d=>{d.setAttribute("y",u),u+=e.getRowHeight(d.row)}))}}else if(n<s){for(let l=0;l<e.rowHeaderLevelCount;l++){const h=t.getColGroup(l);for(let c=e.rowCount-s;c<e.rowCount-n;c++){const f=t.getCell(l,c,!0);f.setAttribute("y",h.lastChild.attribute.y+e.getRowHeight(h.lastChild.row)),h.appendChild(f)}const u=t.getColGroupInLeftBottomCorner(l);let d=0;u.forEachChildren((c=>{c.setAttribute("y",d),d+=e.getRowHeight(c.row)}))}for(let l=i.colStart;l<=i.colEnd;l++){const h=t.getColGroup(l);for(let c=e.rowCount-s;c<e.rowCount-n;c++){const f=t.getCell(l,c,!0);f.setAttribute("y",h.lastChild.attribute.y+e.getRowHeight(h.lastChild.row)),h.appendChild(f)}const u=t.getColGroupInBottom(l);let d=0;u.forEachChildren((c=>{c.setAttribute("y",d),d+=e.getRowHeight(c.row)}))}if(e.rightFrozenColCount>0)for(let l=e.colCount-e.rightFrozenColCount;l<e.colCount;l++){const h=t.getColGroup(l);for(let c=e.rowCount-s;c<e.rowCount-n;c++){const f=t.getCell(l,c,!0);f.setAttribute("y",h.lastChild.attribute.y+e.getRowHeight(h.lastChild.row)),h.appendChild(f)}const u=t.getColGroupInRightBottomCorner(l);let d=0;u.forEachChildren((c=>{c.setAttribute("y",d),d+=e.getRowHeight(c.row)}))}}r.setAttribute("height",e.getRowsHeight(e.rowCount-n,e.rowCount-1)),o.setAttribute("height",e.getRowsHeight(e.rowCount-n,e.rowCount-1)),a.setAttribute("height",e.getRowsHeight(e.rowCount-n,e.rowCount-1)),e.internalProps.bottomFrozenRowCount=n,t.updateContainer(),t.component.updateScrollBar(),t.updateNextFrame()}function ja(n,t,e){t&&n&&(e?n.insertBefore(t,e):n.appendChild(t))}function kJt(n){var t,e,i,r,o;if(n.frozenRowCount>n.table.frozenRowCount){n.bodyGroup.setAttribute("width",n.colHeaderGroup.attribute.width),n.bodyGroup.setAttribute("x",n.colHeaderGroup.attribute.x),n.rowHeaderGroup.setAttribute("width",n.cornerHeaderGroup.attribute.width);for(let a=0;a<n.frozenRowCount-n.table.frozenRowCount;a++)IJt(n),OJt(n),HJt(n)}else if(n.frozenRowCount<n.table.frozenRowCount){n.colHeaderGroup.setAttribute("width",n.bodyGroup.attribute.width),n.colHeaderGroup.setAttribute("x",n.bodyGroup.attribute.x),n.cornerHeaderGroup.setAttribute("width",n.rowHeaderGroup.attribute.width);for(let a=0;a<n.table.frozenRowCount-n.frozenRowCount;a++)LJt(n),EJt(n),DJt(n)}mht(n),n.recreateAllSelectRangeComponents(),n.frozenRowCount=n.table.frozenRowCount,n.frozenColCount=(e=(t=n.rowHeaderGroup)===null||t===void 0?void 0:t.childrenCount)!==null&&e!==void 0?e:0,n.proxy.rowStart=(o=(r=(i=n.bodyGroup.firstChild)===null||i===void 0?void 0:i.firstChild)===null||r===void 0?void 0:r.row)!==null&&o!==void 0?o:n.table.frozenRowCount,n.bodyGroup.setAttribute("y",n.colHeaderGroup.attribute.height),n.rowHeaderGroup.setAttribute("y",n.cornerHeaderGroup.attribute.height),n.updateContainer({needUpdateCellY:!0}),n.updateBorderSizeAndPosition(),n.hasFrozen=!0}function LJt(n){var t;let e=!1;for(let i=0;i<n.bodyGroup.childrenCount;i++){const r=n.bodyGroup.children[i];if(!dm(r))continue;const o=r.firstChild;n.colHeaderGroup.children[i]||rn(n.colHeaderGroup,0,0,o.col,o.col,0,0,"columnHeader",n.table),(t=n.colHeaderGroup.children[i])===null||t===void 0||t.appendChild(o),e||(n.colHeaderGroup.setAttribute("height",n.colHeaderGroup.attribute.height+o.attribute.height),n.bodyGroup.setAttribute("height",n.bodyGroup.attribute.height-o.attribute.height),e=!0)}}function EJt(n){var t;let e=!1;for(let i=0;i<n.rowHeaderGroup.childrenCount;i++){const r=n.rowHeaderGroup.children[i];if(!dm(r))continue;const o=r.firstChild;n.cornerHeaderGroup.children[i]||rn(n.cornerHeaderGroup,0,0,o.col,o.col,0,0,n.table.isListTable()?"columnHeader":"cornerHeader",n.table),(t=n.cornerHeaderGroup.children[i])===null||t===void 0||t.appendChild(o),e||(n.cornerHeaderGroup.setAttribute("height",n.cornerHeaderGroup.attribute.height+o.attribute.height),n.rowHeaderGroup.setAttribute("height",n.rowHeaderGroup.attribute.height-o.attribute.height),e=!0)}}function DJt(n){let t=!1;for(let e=0;e<n.rightFrozenGroup.childrenCount;e++){const i=n.rightFrozenGroup.children[e];if(!dm(i))continue;const r=i.firstChild;n.rightTopCornerGroup.children[e]||rn(n.rightTopCornerGroup,0,0,r.col,r.col,0,0,"columnHeader",n.table),n.rightTopCornerGroup.children[e].appendChild(r),t||(n.rightTopCornerGroup.setAttribute("height",n.rightTopCornerGroup.attribute.height+r.attribute.height),n.rightFrozenGroup.setAttribute("height",n.rightFrozenGroup.attribute.height-r.attribute.height),t=!0)}}function IJt(n){let t=!1;for(let e=0;e<n.colHeaderGroup.childrenCount;e++){const i=n.colHeaderGroup.children[e];if(!dm(i))continue;const r=n.bodyGroup.children[e];if(!r)continue;const o=i.lastChild;ja(r,o,r.firstChild),t||(n.colHeaderGroup.setAttribute("height",n.colHeaderGroup.attribute.height-o.attribute.height),n.bodyGroup.setAttribute("height",n.bodyGroup.attribute.height+o.attribute.height),t=!0)}}function OJt(n){let t=!1;for(let e=0;e<n.cornerHeaderGroup.childrenCount;e++){const i=n.cornerHeaderGroup.children[e];if(!dm(i))continue;const r=n.rowHeaderGroup.children[e];if(!r)continue;const o=i.lastChild;ja(r,o,r.firstChild),t||(n.cornerHeaderGroup.setAttribute("height",n.cornerHeaderGroup.attribute.height-o.attribute.height),n.rowHeaderGroup.setAttribute("height",n.rowHeaderGroup.attribute.height+o.attribute.height),t=!0)}}function HJt(n){let t=!1;for(let e=0;e<n.rightTopCornerGroup.childrenCount;e++){const i=n.rightTopCornerGroup.children[e];if(!dm(i))continue;const r=n.rightFrozenGroup.children[e];if(!r)continue;const o=i.lastChild;ja(r,o,r.firstChild),t||(n.rightTopCornerGroup.setAttribute("height",n.rightTopCornerGroup.attribute.height-o.attribute.height),n.rightFrozenGroup.setAttribute("height",n.rightFrozenGroup.attribute.height+o.attribute.height),t=!0)}}function dm(n){return n instanceof ve&&n?.name!=="table-border-rect"}function zJt(n,t){const{table:e}=n,i=e.internalProps.layoutMap,r=t===-1?"all":e.internalProps.columnResizeType;if(r==="column"){const o=n.getColGroup(t),a=n.getColGroup(t,!0),s=n.getColGroupInBottom(t,!0);if(o?.forEachChildren((l=>{ba(l,e.getColWidth(l.col),e.getRowHeight(l.row))})),a?.forEachChildren((l=>{ba(l,e.getColWidth(l.col),e.getRowHeight(l.row))})),s?.forEachChildren((l=>{ba(l,e.getColWidth(l.col),e.getRowHeight(l.row))})),e.widthMode==="adaptive"&&t<e.colCount-1){const l=n.getColGroup(t+1),h=n.getColGroup(t+1,!0),u=n.getColGroupInBottom(t+1,!0);l?.forEachChildren((d=>{ba(d,e.getColWidth(d.col),e.getRowHeight(d.row))})),h?.forEachChildren((d=>{ba(d,e.getColWidth(d.col),e.getRowHeight(d.row))})),u?.forEachChildren((d=>{ba(d,e.getColWidth(d.col),e.getRowHeight(d.row))}))}}else{let o,a,s,l=e.rowHeaderLevelCount,h=e.colCount-1;if(r==="indicator")if(i.indicatorsAsCol)o=i.getIndicatorKey(t,e.columnHeaderLevelCount);else{const u=i.getCellHeaderPaths(t,e.columnHeaderLevelCount-1),d=u.colHeaderPaths[u.colHeaderPaths.length-1];a=d.dimensionKey,s=d.value}else if(r==="indicatorGroup"){const u=e.internalProps.layoutMap,d=u.getCellHeaderPaths(e.stateManager.columnResize.col,e.columnHeaderLevelCount),c=u.getHeadNodeByRowOrColDimensions(d.colHeaderPaths.slice(0,d.colHeaderPaths.length-1));l=c.startInTotal+e.frozenColCount,h=c.startInTotal+e.frozenColCount+c.size-1}for(let u=l;u<=h;u++){const d=n.getColGroup(u),c=n.getColGroup(u,!0),f=n.getColGroupInBottom(u,!0);if(d){if(r==="indicator"){const g=i.getIndicatorKey(u,e.columnHeaderLevelCount);if(i.indicatorsAsCol&&g!==o)continue;if(!i.indicatorsAsCol){const p=i.getCellHeaderPaths(u,e.columnHeaderLevelCount-1),v=p?.colHeaderPaths[p.colHeaderPaths.length-1];if(!v||a!==v.dimensionKey||s!==v.value)continue}}d.forEachChildren((g=>{ba(g,e.getColWidth(g.col),e.getRowHeight(g.row))})),c?.forEachChildren((g=>{ba(g,e.getColWidth(g.col),e.getRowHeight(g.row))})),f?.forEachChildren((g=>{ba(g,e.getColWidth(g.col),e.getRowHeight(g.row))}))}}}}function FJt(n,t){var e;const{table:i}=n,r=i.internalProps.layoutMap,o=i.stateManager,a=t===-1?"all":i.internalProps.rowResizeType;let s,l,h,u=i.columnHeaderLevelCount,d=i.rowCount-1;if(a==="indicator")if(r.indicatorsAsCol){const f=r.getCellHeaderPaths(i.rowHeaderLevelCount-1,t),g=(e=f.rowHeaderPaths)===null||e===void 0?void 0:e[f.rowHeaderPaths.length-1];l=g?.dimensionKey,h=g?.value}else s=r.getIndicatorKey(i.rowHeaderLevelCount,t);else if(a==="indicatorGroup"){const f=i.internalProps.layoutMap,g=f.getCellHeaderPaths(i.rowHeaderLevelCount,t),p=f.getHeadNodeByRowOrColDimensions(g.rowHeaderPaths.slice(0,g.rowHeaderPaths.length-1));u=p.startInTotal+i.frozenRowCount,d=p.startInTotal+i.frozenRowCount+p.size-1}const c=[{startCol:n.proxy.colStart,endCol:n.proxy.colEnd}];i.frozenColCount&&c.push({startCol:0,endCol:i.frozenColCount-1}),i.rightFrozenColCount&&c.push({startCol:i.colCount-i.rightFrozenColCount,endCol:i.colCount-1}),c.forEach((({startCol:f,endCol:g})=>{for(let p=f;p<=g;p++)if(a==="row"){const v=n.highPerformanceGetCell(p,t);if(v.role!=="cell")continue;if(ba(v,i.getColWidth(v.col),i.getRowHeight(v.row)),i.heightMode==="adaptive"&&t<i.rowCount-1){const m=n.highPerformanceGetCell(p,t+1);ba(m,i.getColWidth(m.col),i.getRowHeight(m.row))}}else for(let v=u;v<=d;v++){if(a==="indicator"){const y=r.getIndicatorKey(o.table.rowHeaderLevelCount,v);if(!r.indicatorsAsCol&&y!==s)continue;if(r.indicatorsAsCol){const b=r.getCellHeaderPaths(o.table.rowHeaderLevelCount-1,v),_=b?.rowHeaderPaths[b.rowHeaderPaths.length-1];if(!_||l!==_.dimensionKey||h!==_.value)continue}}const m=n.highPerformanceGetCell(p,v);m.role==="cell"&&ba(m,i.getColWidth(m.col),i.getRowHeight(m.row))}}))}function lH(n){var t;for(let e=n.proxy.colStart;e<=n.proxy.colEnd;e++){const i=n.getColGroup(e);(t=i?.getChildren())===null||t===void 0||t.forEach((r=>{r.children.forEach((o=>{o.type==="chart"&&(o.cacheCanvas=null,o.addUpdateBoundTag())}))}))}}function NJt(n,t){const e=n.table;if(e.isPivotChart()){const i=e._selectedDataItemsInChart.length;if((t===null||t?.length===0||Object.keys(t).length===0)&&i===0)return;const r=[];if(Array.isArray(t))t.forEach((o=>{if(o&&o.key!==0&&Object.keys(o).length>0){const a={};for(const s in o)s.startsWith("VGRAMMAR_")||s.startsWith("__VCHART")||(a[s]=o[s]);r.push(a)}}));else if(t&&t.key!==0&&Object.keys(t).length>0){const o={};for(const a in t)a.startsWith("VGRAMMAR_")||a.startsWith("__VCHART")||(o[a]=t[a]);r.push(o)}Vb(e._selectedDataItemsInChart,r)||(e._selectedDataItemsInChart=r,e.internalProps.layoutMap.updateDataStateToChartInstance(),lH(n),e.scenegraph.updateNextFrame())}}function ba(n,t,e){n.forEachChildren((i=>{i.type==="chart"&&(i.cacheCanvas=null,i.setAttributes({width:Math.ceil(t-i.attribute.cellPadding[3]-i.attribute.cellPadding[1]),height:Math.ceil(e-i.attribute.cellPadding[0]-i.attribute.cellPadding[2])}))}))}function WJt(n){const t=n.table.tableNoFrameWidth,e=n.table.tableNoFrameHeight;n.tableGroup=new ve({x:0,y:0,width:t,height:e,clip:!0,pickable:!1}),n.tableGroup.role="table";const i=qs(0,0,!n.table.internalProps.enableTreeStickCell);i.role="col-header",n.colHeaderGroup=i;const r=qs(0,0,!n.table.options.enableTreeStickCell);r.role="corner-header",n.cornerHeaderGroup=r;const o=qs(0,0,!0);o.role="row-header",n.rowHeaderGroup=o;const a=qs(t,0,!0);a.role="body",n.bodyGroup=a;const s=qs(0,0,!0);s.role="right-frozen",n.rightFrozenGroup=s;const l=qs(0,0,!0);l.role="bottom-frozen",n.bottomFrozenGroup=l;const h=qs(0,0);h.role="component",n.componentGroup=h;const u=qs(0,0,!0);u.role="corner-right-top-header",n.rightTopCornerGroup=u;const d=qs(0,0,!0);d.role="corner-right-bottom-header",n.rightBottomCornerGroup=d;const c=qs(0,0,!0);c.role="corner-left-bottom-header",n.leftBottomCornerGroup=c,n.tableGroup.addChild(a),n.tableGroup.addChild(o),n.tableGroup.addChild(l),n.tableGroup.addChild(i),n.tableGroup.addChild(s),n.tableGroup.addChild(d),n.tableGroup.addChild(u),n.tableGroup.addChild(c),n.tableGroup.addChild(r),n.tableGroup.addChild(h)}function qs(n,t,e){return new ve({x:0,y:0,width:n,height:t,clip:e!=null&&e,pickable:!1})}function Jl(n,t){return n.forEachChildrenSkipChild(((e,i)=>{e.setAttribute("x",t),t+=e.attribute.width})),t}function Ql(n,t){return n.forEachChildrenSkipChild(((e,i)=>{e.setAttribute("y",t),t+=e.attribute.height})),t}function VJt(n,t,e){n!==-1&&t!==-1&&(zs(n,t,(i=>i.attribute.visibleTime==="mouseenter_cell"),(i=>{i.setAttribute("opacity",0);const r=i.parent.getChildByName("icon-back");r&&r.setAttribute("visible",!1)}),e),e.updateNextFrame())}function GJt(n,t,e){n!==-1&&t!==-1&&(zs(n,t,(i=>i.attribute.visibleTime==="mouseenter_cell"),(i=>{i.setAttribute("opacity",1)}),e),e.updateNextFrame())}function $Jt(n,t,e){n!==-1&&t!==-1&&(zs(n,t,(i=>i.attribute.visibleTime==="click_cell"),(i=>{i.setAttribute("opacity",0)}),e),e.updateNextFrame())}function jJt(n,t,e){n!==-1&&t!==-1&&(zs(n,t,(i=>i.attribute.visibleTime==="click_cell"),(i=>{i.setAttribute("opacity",1)}),e),e.updateNextFrame())}function UJt(n,t,e,i,r){let o;return r.getCell(n,t).forEachChildren((a=>{a.role&&a.role.startsWith("icon")&&a.containsPoint(e,i,xb.GLOBAL)&&(o=a)})),o}function YJt(n,t,e,i,r){var o,a;if((n.attribute.backgroundColor||n.attribute.hoverImage)&&zs(t,e,(s=>s.name===n.name),(s=>{var l,h,u,d,c,f,g,p;if(s.attribute.backgroundColor){let v=s.parent.getChildByName("icon-back");v?v.setAttributes({x:((l=s.attribute.x)!==null&&l!==void 0?l:0)+(s.AABBBounds.width()-s.backgroundWidth)/2,y:((h=s.attribute.y)!==null&&h!==void 0?h:0)+(s.AABBBounds.height()-s.backgroundHeight)/2,dx:(u=s.attribute.dx)!==null&&u!==void 0?u:0,dy:(d=s.attribute.dy)!==null&&d!==void 0?d:0,width:s.backgroundWidth,height:s.backgroundHeight,fill:s.attribute.backgroundColor,cornerRadius:5,visible:!0}):(v=ei({x:((c=s.attribute.x)!==null&&c!==void 0?c:0)+(s.AABBBounds.width()-s.backgroundWidth)/2,y:((f=s.attribute.y)!==null&&f!==void 0?f:0)+(s.AABBBounds.height()-s.backgroundHeight)/2,dx:(g=s.attribute.dx)!==null&&g!==void 0?g:0,dy:(p=s.attribute.dy)!==null&&p!==void 0?p:0,width:s.backgroundWidth,height:s.backgroundHeight,fill:s.attribute.backgroundColor,cornerRadius:5,pickable:!1,visible:!0}),v.name="icon-back"),s.parent.insertBefore(v,s)}s.attribute.hoverImage&&s.attribute.image!==s.attribute.hoverImage&&(s.image=s.attribute.hoverImage)}),r),n.tooltip){const{x1:s,x2:l,y1:h,y2:u}=n.globalAABBBounds,d={content:n.tooltip.title,referencePosition:{rect:{left:s,right:l,top:h,bottom:u,width:n.globalAABBBounds.width(),height:n.globalAABBBounds.height()},placement:n.tooltip.placement},disappearDelay:n.tooltip.disappearDelay,style:Object.assign({},(o=r.table.internalProps.theme)===null||o===void 0?void 0:o.tooltipStyle,(a=n.tooltip)===null||a===void 0?void 0:a.style)};r.table.internalProps.tooltipHandler.isBinded(d)||r.table.showTooltip(t,e,d)}}function XJt(n,t,e,i){(n.attribute.backgroundColor||n.attribute.hoverImage)&&zs(t,e,(r=>r.name===n.name),(r=>{const o=r.parent.getChildByName("icon-back");o&&o.setAttribute("visible",!1),r.attribute.hoverImage&&r.attribute.image!==r.attribute.originImage&&(r.image=r.attribute.originImage)}),i)}function FX(n,t,e,i,r){const o=n.name;zs(e,i,(a=>a.name===o),(a=>{Yo(t,a),a.name=t.name}),r),r.updateNextFrame()}function qJt(n,t,e,i){const r=i.getCell(n,t);if(Y(r.mergeStartCol)&&Y(r.mergeStartRow)&&Y(r.mergeEndCol)&&Y(r.mergeEndRow))for(let o=r.mergeStartCol;o<=r.mergeEndCol;o++)for(let a=r.mergeStartRow;a<=r.mergeEndRow;a++){let s;i.getCell(o,a).forEachChildren((l=>l.attribute.funcType==="sort"&&(s=l,!0))),s&&(Yo(e,s),s.name=e.name)}else{let o;tN(r,"children",(a=>a.attribute.funcType==="sort"&&(o=a,!0))),o&&(Yo(e,o),o.name=e.name)}}function KJt(n,t,e,i,r){const o=r.getCellRange(n,t),a=r.getCellRange(e,i);return o.start.col===a.start.col&&o.start.row===a.start.row&&o.end.col===a.end.col&&o.end.row===a.end.row}function ZJt(n){const{col:t,row:e,iconMark:i,order:r,oldSortCol:o,oldSortRow:a,oldIconMark:s,scene:l}=n,h=l.table.internalProps.headerHelper.getSortIcon(r,l.table,t,e);if(i&&FX(i,h,t,e,l),!KJt(t,e,o,a,l.table)){const u=l.table.internalProps.headerHelper.getSortIcon("normal",l.table,o,a);s?FX(s,u,o,a,l):qJt(o,a,u,l)}}function JJt(n){for(let t=0;t<n.table.colCount;t++)for(let e=0;e<n.table.columnHeaderLevelCount;e++)zs(t,e,(i=>i.attribute.funcType==="frozen"),(i=>{const r=n.table.internalProps.headerHelper.getFrozenIcon(t,e);Yo(r,i),i.name=r.name}),n)}function QJt(n,t,e){let i;i=e.table.isHeader(n,t)?e.table.internalProps.headerHelper.getHierarchyIcon(n,t):e.table.internalProps.bodyHelper.getHierarchyIcon(n,t),zs(n,t,(r=>r.attribute.funcType===Ye.collapse||r.attribute.funcType===Ye.expand),(r=>{Yo(i,r),r.name=i?.name}),e)}function hH(n,t,e){n&&n.role!=="empty"&&n.forEachChildren((i=>{i.type==="group"?hH(i,t,e):t(i)&&e(i)}))}function zs(n,t,e,i,r){const o=r.getCell(n,t);if(o.role==="cell"&&Y(o.mergeStartCol)&&Y(o.mergeStartRow)&&Y(o.mergeEndCol)&&Y(o.mergeEndRow)){const{colStart:a,colEnd:s,rowStart:l,rowEnd:h}=Ad(o,r);for(let u=a;u<=s;u++)for(let d=l;d<=h;d++)hH(r.highPerformanceGetCell(u,d),e,i)}else hH(o,e,i)}function tQt(n,t,e){zs(n,t,(i=>i.attribute.funcType===Ye.dropDown),(i=>{i.oldVisibleTime=i.attribute.visibleTime,i.setAttribute("visibleTime","always"),i.setAttribute("opacity",1)}),e)}function eQt(n,t,e){zs(n,t,(i=>i.attribute.funcType===Ye.dropDown),(i=>{i.oldVisibleTime&&i.setAttribute("visibleTime",i.oldVisibleTime),i.setAttribute("opacity",i.attribute.visibleTime==="always"?1:0)}),e)}function zL(n,t){const{bgColor:e,borderColor:i,borderLineWidth:r,borderLineDash:o}=t,a={x:0,y:0,width:0,height:0,visible:!1,pickable:!0,fill:e};return a.stroke=pN(i,void 0),a.lineWidth=r,o&&(a.lineDash=o),a.lineCap="butt",Array.isArray(i)&&(a.strokeArrayColor=Se(i)),Array.isArray(r)&&(a.strokeArrayWidth=Se(r),a.lineWidth=1),n.setAttributes(a),n.role="corner-frozen",n}function iQt(n,t,e,i){var r,o;sT(i)&&yN(i);const a=i.scenegraph,s=FL(n.map((p=>p.col))).sort(((p,v)=>v-p)),l=FL(t.map((p=>p.col))).sort(((p,v)=>p-v)),h=FL(e.map((p=>p.col))).sort(((p,v)=>p-v));s.forEach((p=>{nQt(p,a)}));const u=i.colWidthsMap;let d;s.forEach((p=>{u.delAndReorder(p)})),s.length&&NX(a),a.table._clearColRangeWidthsMap(),l.forEach((p=>{const v=rQt(p,a);NX(a),d=d??v,u.addAndReorder(p)})),oQt(a);const c=new Set;if(h.forEach((p=>{for(let v=0;v<i.rowCount;v++){const m=un(a.table,p,v);if(m)for(let y=m.start.col;y<=m.end.col;y++)for(let b=m.start.col;b<=m.end.col;b++){const _=`${b}-${v}`;c.has(_)||(Na(b,v,a.table,!1),c.add(_))}else Na(p,v,a.table,!1)}})),yt(d)){for(let p=d;p<Math.max(i.colCount,(r=i.internalProps._oldColCount)!==null&&r!==void 0?r:i.colCount);p++)for(let v=0;v<Math.max(i.rowCount,(o=i.internalProps._oldRowCount)!==null&&o!==void 0?o:i.rowCount);v++){const m=a.highPerformanceGetCell(p,v,!0);m&&(m.needUpdate=!0)}a.proxy.colUpdatePos=d}if(l.length){if(!yt(d)){const p=Math.min(...l);a.proxy.colUpdatePos=p}a.proxy.colUpdateDirection="left",a.proxy.updateColGroups(2*a.proxy.screenColCount),g(),a.proxy.progress()}else s.length&&(a.proxy.updateColGroups(2*a.proxy.screenColCount),g(),a.proxy.progress());const f=i.getColsWidth(i.frozenColCount,i.colCount-1);function g(){if(l?.[l?.length-1]>=i.colCount-i.rightFrozenColCount||h?.[h?.length-1]>=i.colCount-i.rightFrozenColCount||s?.[0]>=i.colCount-i.rightFrozenColCount){for(let p=i.colCount-i.rightFrozenColCount;p<i.colCount;p++)for(let v=0;v<i.rowCount;v++){const m=a.highPerformanceGetCell(p,v,!0);m&&(m.needUpdate=!0)}a.proxy.updateRightFrozenCellGroups()}}a.updateContainerWidth(a.table.frozenColCount,f-a.bodyGroup.attribute.width)}function nQt(n,t){const e=t.proxy;if(n>=t.table.rowHeaderLevelCount&&!(n>=t.table.colCount-t.table.rightFrozenColCount)){const r=t.getColGroup(n,!1);r&&r.parent===t.bodyGroup&&t.bodyGroup.removeChild(r);const o=t.getColGroupInBottom(n);o&&o.parent===t.bottomFrozenGroup&&t.bottomFrozenGroup.removeChild(o);const a=t.getColGroup(n,!0);a&&a.parent===t.colHeaderGroup&&t.colHeaderGroup.removeChild(a)}n>=e.colStart&&n<=e.colEnd&&(e.colEnd--,e.currentCol--),e.bodyRightCol--;const i=Math.min(e.colLimit,e.bodyRightCol-e.bodyLeftCol+1);e.totalActualBodyColCount=i,e.totalCol=e.colStart+i-1}function rQt(n,t){const e=t.proxy;e.bodyRightCol++;const i=Math.min(e.colLimit,e.bodyRightCol-e.bodyLeftCol+1);if(e.totalActualBodyColCount=i,e.totalCol=e.colStart+i-1,!(n<e.colStart))return n>e.colEnd?e.colEnd-e.colStart+1<e.colLimit?(e.colEnd++,e.currentCol++,WX(n,t),n):void 0:(e.colEnd-e.colStart+1<e.colLimit&&(e.colEnd++,e.currentCol++,WX(n,t)),n)}function FL(n){const t=[];for(let e=0;e<n.length;e++)t.indexOf(n[e])===-1&&t.push(n[e]);return t}function NX(n){let t=n.bodyColStart;function e(i){i.col=t;const r=un(n.table,i.col,i.row);r&&(i.mergeStartCol=r.start.col,i.mergeStartCol=r.start.col,i.mergeEndCol=r.end.col,i.mergeEndCol=r.end.col),i.role}n.bodyGroup.forEachChildren((i=>{i.col=t,i?.forEachChildren((r=>{e(r)})),t++})),t=n.bodyColStart,n.colHeaderGroup.forEachChildren((i=>{i.col=t,i?.forEachChildren((r=>{e(r)})),t++})),t=n.bodyColStart,n.bottomFrozenGroup.forEachChildren((i=>{i.col=t,i?.forEachChildren((r=>{e(r)})),t++}))}function oQt(n){let t=n.bodyColStart,e=n.getCellGroupX(t);function i(r){r.col=t;const o=un(n.table,r.col,r.row);o&&(r.mergeStartCol=o.start.col,r.mergeStartCol=o.start.col,r.mergeEndCol=o.end.col,r.mergeEndCol=o.end.col),r.role}n.bodyGroup.forEachChildren((r=>{r.col=t,r?.forEachChildren((o=>{i(o)})),r.setAttribute("x",e),e+=r.attribute.width,t++})),t=n.bodyColStart,e=n.getCellGroupX(t),n.colHeaderGroup.forEachChildren((r=>{r.col=t,r?.forEachChildren((o=>{i(o)})),r.setAttribute("x",e),e+=r.attribute.width,t++})),t=n.bodyColStart,e=n.getCellGroupX(t),n.bottomFrozenGroup.forEachChildren((r=>{r.col=t,r?.forEachChildren((o=>{i(o)})),r.setAttribute("x",e),e+=r.attribute.width,t++})),t=n.table.colCount-n.table.rightFrozenColCount,e=0,n.rightFrozenGroup.forEachChildren((r=>{r.col=t,r?.forEachChildren((o=>{i(o)})),r.setAttribute("x",e),e+=r.attribute.width,t++})),t=n.table.colCount-n.table.rightFrozenColCount,e=0,n.rightTopCornerGroup.forEachChildren((r=>{r.col=t,r?.forEachChildren((o=>{i(o)})),r.setAttribute("x",e),e+=r.attribute.width,t++})),t=n.table.colCount-n.table.rightFrozenColCount,e=0,n.rightBottomCornerGroup.forEachChildren((r=>{r.col=t,r?.forEachChildren((o=>{i(o)})),r.setAttribute("x",e),e+=r.attribute.width,t++}))}function WX(n,t){if(t.colHeaderGroup&&t.table.columnHeaderLevelCount>0){const i=new ve({x:0,y:0,width:t.table.getColWidth(n),height:0,clip:!1,pickable:!1});i.role="column",i.col=n;const r=t.getColGroup(n,!0);r?t.colHeaderGroup.insertBefore(i,r):t.colHeaderGroup.appendChild(i),e(i,n,0,t.table.columnHeaderLevelCount-1)}if(t.bodyGroup){const i=new ve({x:0,y:0,width:t.table.getColWidth(n),height:0,clip:!1,pickable:!1});i.role="column",i.col=n;const r=t.getColGroup(n,!1);r?t.bodyGroup.insertBefore(i,r):t.bodyGroup.appendChild(i),e(i,n,t.bodyRowStart,t.bodyRowEnd)}if(t.bottomFrozenGroup&&t.table.bottomFrozenRowCount>0){const i=new ve({x:0,y:0,width:t.table.getColWidth(n),height:0,clip:!1,pickable:!1});i.role="column",i.col=n;const r=t.getColGroupInBottom(n);r?t.bottomFrozenGroup.insertBefore(i,r):t.bottomFrozenGroup.appendChild(i),e(i,n,t.table.rowCount-t.table.bottomFrozenRowCount,t.table.rowCount-1)}function e(i,r,o,a){for(let s=o;s<=a;s++){const l=new ve({x:0,y:0,width:t.table.getColWidth(r),height:t.table.getRowHeight(s)});l.role="cell",l.col=r,l.row=s,l.needUpdate=!0,i.appendChild(l)}}}function aQt(n){var t,e,i,r;if(!n.options.animationAppear)return;let o,a,s,l;n.options.animationAppear===!0?(o=500,a=0,s="one-by-one",l="column"):(o=(t=n.options.animationAppear.duration)!==null&&t!==void 0?t:500,a=(e=n.options.animationAppear.delay)!==null&&e!==void 0?e:0,s=(i=n.options.animationAppear.type)!==null&&i!==void 0?i:"one-by-one",l=(r=n.options.animationAppear.direction)!==null&&r!==void 0?r:"row");const{scenegraph:h,frozenColCount:u,frozenRowCount:d}=n,{colStart:c,colEnd:f,rowStart:g,rowEnd:p}=h.proxy;for(let v=0;v<=f;v++)for(let m=0;m<=p;m++){const y=h.highPerformanceGetCell(v,m);y&&y.role==="cell"&&y.forEachChildren((b=>{b.setAttribute("opacity",0),b.animate().wait(s==="one-by-one"?(l==="row"?m:v)*(o-a):a).to({opacity:1},o,"linear")}))}}function sQt(n,t){const{selectedRangeComponents:e}=t;e.forEach(((i,r)=>{i.rect.setAttributes(n)})),t.updateNextFrame()}tlt(),Kt.load(WZt),Kt.load(lZt);let lQt=class{constructor(t){let e,i;this._needUpdateContainer=!1,this.table=t,this.hasFrozen=!1,this.clear=!0,this.mergeMap=new Map,j7t(this.table.theme.textPopTipStyle),Be.mode==="node"?(jt.setEnv("node",t.options.modeParams),e=t.canvasWidth,i=t.canvasHeight):t.options.canvas&&t.options.viewBox?(jt.setEnv("browser"),e=t.options.viewBox.x2-t.options.viewBox.x1,i=t.options.viewBox.y2-t.options.viewBox.y1):(jt.setEnv("browser"),e=t.canvas.width,i=t.canvas.height),this.stage=Wat(Object.assign({canvas:t.canvas,width:e,height:i,disableDirtyBounds:!1,background:t.theme.underlayBackgroundColor,dpr:t.internalProps.pixelRatio,enableLayout:!0,beforeRender:r=>{this.table.options.beforeRender&&this.table.options.beforeRender(r),this.table.animationManager.ticker.start()},afterRender:r=>{this.table.options.afterRender&&this.table.options.afterRender(r),this.table.fireListeners("after_render",null)},canvasControled:!t.options.canvas,viewBox:t.options.viewBox},t.options.renderOption)),this.stage.defaultLayer.setTheme({group:{boundsPadding:0,strokeBoundsBuffer:0,lineJoin:"round"},text:{ignoreBuf:!0}}),this.initSceneGraph(),this.stage.defaultLayer.add(this.tableGroup),this.stage.table=this.table,this.createComponent()}get width(){var t,e;return(e=(t=this.tableGroup.attribute)===null||t===void 0?void 0:t.width)!==null&&e!==void 0?e:0}get height(){var t,e;return(e=(t=this.tableGroup.attribute)===null||t===void 0?void 0:t.height)!==null&&e!==void 0?e:0}get x(){var t,e;return(e=(t=this.tableGroup.attribute)===null||t===void 0?void 0:t.x)!==null&&e!==void 0?e:0}get y(){var t,e;return(e=(t=this.tableGroup.attribute)===null||t===void 0?void 0:t.y)!==null&&e!==void 0?e:0}get bodyRowStart(){var t;return(t=this.proxy.rowStart)!==null&&t!==void 0?t:0}get bodyRowEnd(){var t;return(t=this.proxy.rowEnd)!==null&&t!==void 0?t:this.table.rowCount-1}get bodyColStart(){var t;return(t=this.proxy.colStart)!==null&&t!==void 0?t:0}get bodyColEnd(){var t;return(t=this.proxy.colEnd)!==null&&t!==void 0?t:this.table.colCount-1}initSceneGraph(){this.isPivot=this.table.isPivotTable(),WJt(this)}canvasShowMenu(){this.stage.addEventListener("rightdown",(t=>{const e=bn(t);e.eventArgs||(this.table.stateManager.triggerContextMenu(-1,-1,e.abstractPos.x,e.abstractPos.y),this.table.fireListeners(at.CONTEXTMENU_CANVAS,{event:t,x:e.abstractPos.x,y:e.abstractPos.y,col:-1,row:-1,target:void 0}))}))}clearCells(){var t,e;this.table.animationManager.clear(),(this.table.isPivotChart()||this.table._hasCustomRenderOrLayout())&&this.stage.pluginService.findPluginsByName("poptipForText").forEach((i=>{i.deactivate(this.stage.pluginService)})),this.clear=!0,this.hasFrozen=!1,this.mergeMap.clear(),this.colHeaderGroup.clear(),delete this.colHeaderGroup.border,this.rowHeaderGroup.clear(),delete this.rowHeaderGroup.border,this.cornerHeaderGroup.clear(),delete this.cornerHeaderGroup.border,this.bodyGroup.clear(),delete this.bodyGroup.border,this.bottomFrozenGroup.clear(),delete this.bottomFrozenGroup.border,this.rightFrozenGroup.clear(),delete this.rightFrozenGroup.border,this.rightTopCornerGroup.clear(),delete this.rightTopCornerGroup.border,this.rightBottomCornerGroup.clear(),delete this.rightBottomCornerGroup.border,this.leftBottomCornerGroup.clear(),delete this.leftBottomCornerGroup.border,this.colHeaderGroup.setAttributes({x:0,y:0,width:0,height:0}),this.rowHeaderGroup.setAttributes({x:0,y:0,width:0,height:0}),this.cornerHeaderGroup.setAttributes({x:0,y:0,width:0,height:0}),this.bodyGroup.setAttributes({x:0,y:0,width:0,height:0}),this.rightFrozenGroup.setAttributes({x:0,y:0,width:0,height:0}),this.bottomFrozenGroup.setAttributes({x:0,y:0,width:0,height:0}),this.rightTopCornerGroup.setAttributes({x:0,y:0,width:0,height:0,visible:!1}),this.leftBottomCornerGroup.setAttributes({x:0,y:0,width:0,height:0,visible:!1}),this.rightBottomCornerGroup.setAttributes({x:0,y:0,width:0,height:0,visible:!1}),this.tableGroup.setAttributes({x:this.table.tableX,y:this.table.tableY,width:0,height:0}),this.tableGroup.border&&(this.tableGroup.parent.removeChild(this.tableGroup.border),delete this.tableGroup.border),(t=this.proxy)===null||t===void 0||t.release(),(e=this.table.reactCustomLayout)===null||e===void 0||e.clearCache()}updateStageBackground(){this.stage.background=this.table.theme.underlayBackgroundColor,this.stage.renderNextFrame()}createComponent(){this.component=new SZt(this.table),this.component.addToGroup(this.componentGroup),this.selectedRangeComponents=new Map,this.selectingRangeComponents=new Map,this.customSelectedRangeComponents=new Map}updateComponent(){this.component.updateStyle()}createSceneGraph(t=!1){t||(this.table.rowHeightsMap.clear(),this.table.internalProps.layoutMap.clearCellRangeMap()),(this.table.isPivotChart()||this.table._hasCustomRenderOrLayout())&&this.stage.pluginService.autoEnablePlugins.getContributions().forEach((e=>{e.name==="poptipForText"&&this.stage.pluginService.register(e)})),this.clear=!1,this.frozenColCount=this.table.frozenColCount,this.frozenRowCount=this.table.frozenRowCount,this.proxy=new gJt(this.table),ts(this.tableGroup,this.table.theme.frameStyle,this.tableGroup.role,void 0,!0),this.table.isPivotChart()&&(zL(this.rightTopCornerGroup,this.table.theme.cornerRightTopCellStyle||this.table.theme.cornerHeaderStyle||{}),zL(this.leftBottomCornerGroup,this.table.theme.cornerLeftBottomCellStyle||this.table.theme.cornerHeaderStyle||{}),zL(this.rightBottomCornerGroup,this.table.theme.cornerRightBottomCellStyle||this.table.theme.cornerHeaderStyle||{})),this.proxy.createGroupForFirstScreen(this.cornerHeaderGroup,this.colHeaderGroup,this.rowHeaderGroup,this.rightFrozenGroup,this.bottomFrozenGroup,this.bodyGroup,0,0),this.afterScenegraphCreated()}renderSceneGraph(){this.stage.render()}getCell(t,e,i){var r,o,a,s,l,h;let u;if(u=this.table.rightFrozenColCount>0&&t>=this.table.colCount-this.table.rightFrozenColCount&&e<this.table.frozenRowCount?(r=this.rightTopCornerGroup.getColGroup(t))===null||r===void 0?void 0:r.getRowGroup(e):this.table.bottomFrozenRowCount>0&&e>=this.table.rowCount-this.table.bottomFrozenRowCount&&t<this.table.frozenColCount?(o=this.leftBottomCornerGroup.getColGroup(t))===null||o===void 0?void 0:o.getRowGroup(e):this.table.rightFrozenColCount>0&&this.table.bottomFrozenRowCount>0&&t>=this.table.colCount-this.table.rightFrozenColCount&&e>=this.table.rowCount-this.table.bottomFrozenRowCount?(a=this.rightBottomCornerGroup.getColGroup(t))===null||a===void 0?void 0:a.getRowGroup(e):this.table.rightFrozenColCount>0&&t>this.table.colCount-1-this.table.rightFrozenColCount?(s=this.rightFrozenGroup.getColGroup(t))===null||s===void 0?void 0:s.getRowGroup(e):this.table.bottomFrozenRowCount>0&&e>this.table.rowCount-1-this.table.bottomFrozenRowCount?(l=this.bottomFrozenGroup.getColGroup(t))===null||l===void 0?void 0:l.getRowGroup(e):(h=this.getColGroup(t,e<this.frozenRowCount))===null||h===void 0?void 0:h.getRowGroup(e),u&&u.role==="shadow-cell"&&!i){const d=this.table.getCellRange(t,e);d.start.col===t&&d.start.row===e||(u=this.getCell(d.start.col,d.start.row))}return u||aT}highPerformanceGetCell(t,e,i){return this.proxy.highPerformanceGetCell(t,e,i)}getColGroup(t,e=!1){let i;return i=t<this.frozenColCount&&e?this.cornerHeaderGroup.getColGroup(t):t<this.frozenColCount?this.rowHeaderGroup.getColGroup(t):e&&this.table.rightFrozenColCount>0&&t>this.table.colCount-1-this.table.rightFrozenColCount?this.rightTopCornerGroup.getColGroup(t):!e&&this.table.rightFrozenColCount>0&&t>this.table.colCount-1-this.table.rightFrozenColCount?this.rightFrozenGroup.getColGroup(t):e?this.colHeaderGroup.getColGroup(t):this.bodyGroup.getColGroup(t),i||void 0}getColGroupInBottom(t,e=!1){var i;if(e){const r=(i=this.getColGroupInLeftBottomCorner(t))!==null&&i!==void 0?i:this.getColGroupInRightBottomCorner(t);if(r)return r}if(this.table.bottomFrozenRowCount>0)return this.bottomFrozenGroup.getColGroup(t)}getColGroupInLeftBottomCorner(t){if(this.table.bottomFrozenRowCount>0)return this.leftBottomCornerGroup.getColGroup(t)}getColGroupInRightTopCorner(t){if(this.table.rightFrozenColCount>0)return this.rightTopCornerGroup.getColGroup(t)}getColGroupInRightBottomCorner(t){if(this.table.rightFrozenColCount>0&&this.table.bottomFrozenRowCount>0)return this.rightBottomCornerGroup.getColGroup(t)}getCellSize(t,e){const i=this.getCell(t,e),r=un(this.table,t,e);let o=i.attribute.width,a=i.attribute.height;return r&&(o/=r.end.col-r.start.col+1,a/=r.end.row-r.start.row+1),{width:o,height:a}}updateNextFrame(){this.updateContainerSync(),this.resetAllSelectComponent(),this.stage.renderNextFrame()}resetAllSelectComponent(){var t,e,i,r;(((e=(t=this.table.stateManager.select)===null||t===void 0?void 0:t.ranges)===null||e===void 0?void 0:e.length)>0||((r=(i=this.table.stateManager.select)===null||i===void 0?void 0:i.customSelectRanges)===null||r===void 0?void 0:r.length)>0)&&fht(this)}hideHoverIcon(t,e){VJt(t,e,this)}showHoverIcon(t,e){GJt(t,e,this)}hideClickIcon(t,e){$Jt(t,e,this)}showClickIcon(t,e){jJt(t,e,this)}getIcon(t,e,i,r){return UJt(t,e,i,r,this)}setIconHoverStyle(t,e,i,r){YJt(t,e,i,r,this)}updateSortIcon(t){const{col:e,row:i,iconMark:r,order:o,oldSortCol:a,oldSortRow:s,oldIconMark:l}=t;ZJt({col:e,row:i,iconMark:r,order:o,oldSortCol:a,oldSortRow:s,oldIconMark:l,scene:this})}updateFrozenIcon(t,e){JJt(this)}updateHierarchyIcon(t,e){QJt(t,e,this)}setIconNormalStyle(t,e,i){XJt(t,e,i,this)}residentHoverIcon(t,e){tQt(t,e,this)}resetResidentHoverIcon(t,e){eQt(t,e,this)}deactivateChart(t,e){var i,r;if(t===-1||e===-1)return;const o=this.getCell(t,e);(r=(i=o?.firstChild)===null||i===void 0?void 0:i.deactivate)===null||r===void 0||r.call(i)}activateChart(t,e){var i,r,o;if(t===-1||e===-1)return;const a=this.getCell(t,e);return(r=(i=a?.firstChild)===null||i===void 0?void 0:i.activate)===null||r===void 0||r.call(i,this.table),(o=a?.firstChild)===null||o===void 0?void 0:o.activeChartInstance}removeInteractionBorder(t,e){const i=this.getCell(t,e);i.setAttribute("highlightStroke",void 0),i.setAttribute("highlightStrokeArrayWidth",void 0),i.setAttribute("highlightStrokeArrayColor",void 0)}createCellSelectBorder(t,e,i,r,o,a,s){vJt(this,t,e,i,r,o,a,s)}moveSelectingRangeComponentsToSelectedRangeComponents(){OX(this)}deleteLastSelectedRangeComponents(){mJt(this)}deleteAllSelectBorder(){HX(this),pht(this)}updateCellSelectBorder(t,e=!0){EX(this,t,e)}removeFillHandleFromSelectComponents(){yJt(this)}recreateAllSelectRangeComponents(){HX(this),this.table.stateManager.select.ranges.forEach((t=>{EX(this,t),OX(this)}))}updateColWidth(t,e,i,r){bZt(this,t,Math.round(e),r),i||this.updateContainer({async:!0})}updateChartSizeForResizeColWidth(t){zJt(this,t)}updateChartSizeForResizeRowHeight(t){FJt(this,t)}updateChartState(t){this.table.isPivotChart()&&NJt(this,t)}updateCheckboxCellState(t,e,i){var r,o;if(this.table.transpose)(r=this.bodyGroup.children)===null||r===void 0||r.forEach((a=>{var s;(s=a.getChildAt(e))===null||s===void 0||s.getChildren().forEach((l=>{l.name==="checkbox"&&(i==="indeterminate"?(l.setAttribute("indeterminate",!0),l.setAttribute("checked",void 0)):(l.setAttribute("indeterminate",void 0),l.setAttribute("checked",i))),l.name==="checkbox-content"&&(i==="indeterminate"?(l._checkboxGroup.getChildByName("checkbox").setAttribute("indeterminate",!0),l._checkboxGroup.getChildByName("checkbox").setAttribute("checked",void 0)):(l._checkboxGroup.getChildByName("checkbox").setAttribute("indeterminate",void 0),l._checkboxGroup.getChildByName("checkbox").setAttribute("checked",i)))}))}));else{const a=this.getColGroup(t);(o=a?.children)===null||o===void 0||o.forEach((s=>{s.getChildren().find((l=>{l.name==="checkbox"&&(i==="indeterminate"?(l.setAttribute("indeterminate",!0),l.setAttribute("checked",void 0)):(l.setAttribute("indeterminate",void 0),l.setAttribute("checked",i))),l.name==="checkbox-content"&&(i==="indeterminate"?(l._checkboxGroup.getChildByName("checkbox").setAttribute("indeterminate",!0),l._checkboxGroup.getChildByName("checkbox").setAttribute("checked",void 0)):(l._checkboxGroup.getChildByName("checkbox").setAttribute("indeterminate",void 0),l._checkboxGroup.getChildByName("checkbox").setAttribute("checked",i)))}))}))}}updateHeaderCheckboxCellState(t,e,i){var r,o;this.table.transpose?(r=this.rowHeaderGroup.children)===null||r===void 0||r.forEach((a=>{a.getChildAt(e).getChildren().forEach((s=>{s.name==="checkbox"&&(i==="indeterminate"?(s.setAttribute("indeterminate",!0),s.setAttribute("checked",void 0)):(s.setAttribute("indeterminate",void 0),s.setAttribute("checked",i))),s.name==="checkbox-content"&&(i==="indeterminate"?(s._checkboxGroup.getChildByName("checkbox").setAttribute("indeterminate",!0),s._checkboxGroup.getChildByName("checkbox").setAttribute("checked",void 0)):(s._checkboxGroup.getChildByName("checkbox").setAttribute("indeterminate",void 0),s._checkboxGroup.getChildByName("checkbox").setAttribute("checked",i)))}))})):(o=this.getColGroup(t,!0).children)===null||o===void 0||o.forEach((a=>{a.getChildren().find((s=>{s.name==="checkbox"&&(i==="indeterminate"?(s.setAttribute("indeterminate",!0),s.setAttribute("checked",void 0)):(s.setAttribute("indeterminate",void 0),s.setAttribute("checked",i))),s.name==="checkbox-content"&&(i==="indeterminate"?(s._checkboxGroup.getChildByName("checkbox").setAttribute("indeterminate",!0),s._checkboxGroup.getChildByName("checkbox").setAttribute("checked",void 0)):(s._checkboxGroup.getChildByName("checkbox").setAttribute("indeterminate",void 0),s._checkboxGroup.getChildByName("checkbox").setAttribute("checked",i)))}))}))}updateAutoColWidth(t){this.table.internalProps._widthResizedColMap.delete(t);const e=this.table.getColWidth(t),i=Ip(t,0,this.table.rowCount-1,this.table,!0);i!==e&&this.updateColWidth(t,i-e)}recalculateColWidths(){const t=this.table;t.widthMode==="adaptive"||t.autoFillWidth||t.internalProps.transpose?Va(this.table,0,this.table.colCount-1,!0):(t._clearColRangeWidthsMap(),t.frozenColCount>0&&Va(this.table,0,t.frozenColCount-1,!0),t.rightFrozenColCount>0&&Va(this.table,t.rightFrozenColCount,t.colCount-1,!0),Va(t,this.proxy.colStart,this.proxy.colEnd,!0))}recalculateRowHeights(){const t=this.table;t.internalProps.useOneRowHeightFillAll=!1,t.heightMode==="adaptive"||t.autoFillHeight?Wa(this.table,0,this.table.rowCount-1,!0,!0):(t.frozenRowCount>0&&Wa(this.table,0,t.frozenRowCount-1,!0,!0),t.bottomFrozenRowCount>0&&Wa(this.table,t.bottomFrozenRowCount,t.rowCount-1,!0,!0),Wa(t,this.proxy.rowStart,this.proxy.rowEnd,!0,!0))}resize(){var t,e;this.proxy.resize(),(this.table.widthMode==="adaptive"||this.table.autoFillWidth)&&(this.table.internalProps._widthResizedColMap.size===0?this.recalculateColWidths():this.dealWidthMode()),this.table.heightMode==="adaptive"?this.table.internalProps._heightResizedRowMap.size===0?this.recalculateRowHeights():this.dealHeightMode():this.table.autoFillHeight&&this.dealHeightMode(),this.resetFrozen(),this.updateTableSize(),this.updateBorderSizeAndPosition(),this.component.updateScrollBar(),(this.table.widthMode==="adaptive"||this.table.heightMode==="adaptive"||this.table.autoFillWidth||this.table.autoFillHeight||!((t=this.table.containerFit)===null||t===void 0)&&t.width||!((e=this.table.containerFit)===null||e===void 0)&&e.height)&&this.updateChartSizeForResizeColWidth(-1),this.proxy.progress(),this.updateNextFrame()}updateTableSize(){var t,e,i,r,o,a,s,l,h,u,d,c,f,g,p;const v=Math.max(this.colHeaderGroup.attribute.width,this.bodyGroup.attribute.width,this.bottomFrozenGroup.attribute.width,0)+Math.max(this.cornerHeaderGroup.attribute.width,this.rowHeaderGroup.attribute.width,this.leftBottomCornerGroup.attribute.width,0)+Math.max(this.rightTopCornerGroup.attribute.width,this.rightFrozenGroup.attribute.width,this.rightBottomCornerGroup.attribute.width,0),m=Math.max(this.colHeaderGroup.attribute.height,this.cornerHeaderGroup.attribute.height,this.rightTopCornerGroup.attribute.height,0)+Math.max(this.rowHeaderGroup.attribute.height,this.bodyGroup.attribute.height,this.rightFrozenGroup.attribute.height,0)+Math.max(this.leftBottomCornerGroup.attribute.height,this.bottomFrozenGroup.attribute.height,this.rightBottomCornerGroup.attribute.height,0);let y=v,b=m;if(y=!((t=this.table.containerFit)===null||t===void 0)&&t.width?this.table.tableNoFrameWidth:Math.min(this.table.tableNoFrameWidth,v),b=!((e=this.table.containerFit)===null||e===void 0)&&e.height?this.table.tableNoFrameHeight:Math.min(this.table.tableNoFrameHeight,m),this.tableGroup.setAttributes({x:this.table.tableX,y:this.table.tableY,width:y,height:b}),this.tableGroup.border){const _=(i=this.tableGroup.border)===null||i===void 0?void 0:i.attribute;let w,C,x,S;_?.strokeArrayWidth?(w=_.strokeArrayWidth?_.strokeArrayWidth[0]:(r=_.lineWidth)!==null&&r!==void 0?r:0,C=_.strokeArrayWidth?_.strokeArrayWidth[1]:(o=_.lineWidth)!==null&&o!==void 0?o:0,x=_.strokeArrayWidth?_.strokeArrayWidth[2]:(a=_.lineWidth)!==null&&a!==void 0?a:0,S=_.strokeArrayWidth?_.strokeArrayWidth[3]:(s=_.lineWidth)!==null&&s!==void 0?s:0):(w=(l=_?.lineWidth)!==null&&l!==void 0?l:0,C=(h=_?.lineWidth)!==null&&h!==void 0?h:0,x=(u=_?.lineWidth)!==null&&u!==void 0?u:0,S=(d=_?.lineWidth)!==null&&d!==void 0?d:0),this.tableGroup.border.type==="rect"?!((c=this.table.theme.frameStyle)===null||c===void 0)&&c.innerBorder?this.tableGroup.border.setAttributes({x:this.table.tableX+S/2,y:this.table.tableY+w/2,width:this.tableGroup.attribute.width-S/2-C/2,height:this.tableGroup.attribute.height-w/2-x/2}):this.tableGroup.border.setAttributes({x:this.table.tableX-S/2,y:this.table.tableY-w/2,width:this.tableGroup.attribute.width+S/2+C/2,height:this.tableGroup.attribute.height+w/2+x/2}):this.tableGroup.border.type==="group"&&(!((f=this.table.theme.frameStyle)===null||f===void 0)&&f.innerBorder?(this.tableGroup.border.setAttributes({x:this.table.tableX+S/2,y:this.table.tableY+w/2,width:this.tableGroup.attribute.width-S/2-C/2,height:this.tableGroup.attribute.height-w/2-x/2}),(g=this.tableGroup.border.firstChild)===null||g===void 0||g.setAttributes({x:0,y:0,width:this.tableGroup.attribute.width-S/2-C/2,height:this.tableGroup.attribute.height-w/2-x/2})):(this.tableGroup.border.setAttributes({x:this.table.tableX-S/2,y:this.table.tableY-w/2,width:this.tableGroup.attribute.width+S/2+C/2,height:this.tableGroup.attribute.height+w/2+x/2}),(p=this.tableGroup.border.firstChild)===null||p===void 0||p.setAttributes({x:S/2,y:w/2,width:this.tableGroup.attribute.width,height:this.tableGroup.attribute.height})))}this.table.bottomFrozenRowCount>0&&(this.bottomFrozenGroup.setAttribute("y",this.tableGroup.attribute.height-this.table.getBottomFrozenRowsHeight()),this.leftBottomCornerGroup.setAttributes({visible:!0,y:this.tableGroup.attribute.height-this.table.getBottomFrozenRowsHeight(),height:this.table.getBottomFrozenRowsHeight(),width:this.table.getFrozenColsWidth()}),this.rightBottomCornerGroup.setAttributes({visible:!0,y:this.tableGroup.attribute.height-this.table.getBottomFrozenRowsHeight(),height:this.table.getBottomFrozenRowsHeight()})),this.table.rightFrozenColCount>0&&(this.rightFrozenGroup.setAttribute("x",this.tableGroup.attribute.width-this.table.getRightFrozenColsWidth()),this.rightTopCornerGroup.setAttributes({visible:!0,x:this.tableGroup.attribute.width-this.table.getRightFrozenColsWidth(),width:this.table.getRightFrozenColsWidth(),height:this.table.getFrozenRowsHeight()}),this.rightBottomCornerGroup.setAttributes({visible:!0,x:this.tableGroup.attribute.width-this.table.getRightFrozenColsWidth(),width:this.table.getRightFrozenColsWidth()})),this.updateDomContainer()}updateRowHeight(t,e,i){e=Math.round(e),fX(this,t,e,i),this.updateContainerHeight(t,e)}updateRowsHeight(t,e,i){for(let r=0;r<t.length;r++){const o=t[r];if(o>=this.proxy.rowStart&&o<=this.proxy.rowEnd){const a=e[r];fX(this,o,Math.round(a),i),this._updateContainerHeight(o,a)}}this.updateTableSize(),this.component.updateScrollBar(),this.updateNextFrame()}updateContainerWidth(t,e){t<this.frozenColCount?(this.rowHeaderGroup.setDeltaWidth(e),this.cornerHeaderGroup.setDeltaWidth(e),this.colHeaderGroup.setDeltaX(e),this.bodyGroup.setDeltaX(e)):(this.colHeaderGroup.setDeltaWidth(e),this.bodyGroup.setDeltaWidth(e)),this.updateTableSize(),this.component.updateScrollBar(),this.updateNextFrame()}_updateContainerHeight(t,e){t<this.table.frozenRowCount?(this.colHeaderGroup.setDeltaHeight(e),this.cornerHeaderGroup.setDeltaHeight(e),this.rowHeaderGroup.setDeltaY(e),this.bodyGroup.setDeltaY(e),this.table.rightFrozenColCount&&this.rightFrozenGroup.setDeltaY(e)):t>=this.table.rowCount-this.table.bottomFrozenRowCount?(this.leftBottomCornerGroup.setDeltaHeight(e),this.bottomFrozenGroup.setDeltaHeight(e),this.table.rightFrozenColCount&&this.rightBottomCornerGroup.setDeltaHeight(e)):(this.rowHeaderGroup.setDeltaHeight(e),this.bodyGroup.setDeltaHeight(e),this.table.rightFrozenColCount&&this.rightFrozenGroup.setDeltaHeight(e))}updateContainerHeight(t,e){this._updateContainerHeight(t,e),this.updateTableSize(),this.component.updateScrollBar(),this.updateNextFrame()}setColWidth(t,e){const i=this.table.getColWidth(t);i!==e&&(this.updateColWidth(t,e-i),this.table._clearColRangeWidthsMap(t))}setRowHeight(t,e){const i=this.table.getRowHeight(t);i!==e&&((t>=this.proxy.rowStart&&t<=this.proxy.rowEnd||t>=this.table.rowCount-this.table.bottomFrozenRowCount&&t<=this.table.rowCount-1||t<this.table.frozenRowCount)&&this.updateRowHeight(t,e-i),this.table._clearRowRangeHeightsMap(t))}setX(t,e=!1){this.table.scenegraph.proxy.setX(-t,e)}setY(t,e=!1){this.table.scenegraph.proxy.setY(-t,e)}setBodyAndRowHeaderY(t){var e,i,r,o,a,s;const l=(i=(e=this.bodyGroup.firstChild)===null||e===void 0?void 0:e.firstChild)!==null&&i!==void 0?i:(r=this.rowHeaderGroup.firstChild)===null||r===void 0?void 0:r.firstChild,h=(a=(o=this.bodyGroup.firstChild)===null||o===void 0?void 0:o.lastChild)!==null&&a!==void 0?a:(s=this.rowHeaderGroup.firstChild)===null||s===void 0?void 0:s.lastChild;t===0&&l&&l.row===this.table.frozenRowCount&&l.attribute.y+t<0?t=-l.attribute.y:h&&this.table.tableNoFrameHeight<this.table.getAllRowsHeight()&&h.row===this.table.rowCount-this.table.bottomFrozenRowCount-1&&h.attribute.y+h.attribute.height+t<this.table.tableNoFrameHeight-this.table.getFrozenRowsHeight()-this.table.getBottomFrozenRowsHeight()&&(t=this.table.tableNoFrameHeight-this.table.getFrozenRowsHeight()-this.table.getBottomFrozenRowsHeight()-h.attribute.y-h.attribute.height),this.colHeaderGroup.attribute.height+t!==this.bodyGroup.attribute.y&&(this.bodyGroup.setAttribute("y",this.colHeaderGroup.attribute.height+t),this.rowHeaderGroup.setAttribute("y",this.cornerHeaderGroup.attribute.height+t),this.table.rightFrozenColCount>0&&this.rightFrozenGroup.setAttribute("y",this.rightTopCornerGroup.attribute.height+t),this.updateNextFrame())}setBodyAndColHeaderX(t){const e=this.bodyGroup.firstChild,i=this.bodyGroup.lastChild;t===0&&e&&e.col===this.table.frozenColCount&&e.attribute.x+t<0?t=-e.attribute.x:i&&this.table.tableNoFrameWidth<this.table.getAllColsWidth()&&i.col===this.table.colCount-this.table.rightFrozenColCount-1&&i.attribute.x+i.attribute.width+t<this.table.tableNoFrameWidth-this.table.getFrozenColsWidth()-this.table.getRightFrozenColsWidth()&&(t=this.table.tableNoFrameWidth-this.table.getFrozenColsWidth()-this.table.getRightFrozenColsWidth()-i.attribute.x-i.attribute.width),this.table.getFrozenColsWidth()+t!==this.bodyGroup.attribute.x&&(this.bodyGroup.setAttribute("x",this.table.getFrozenColsWidth()+t),this.colHeaderGroup.setAttribute("x",this.table.getFrozenColsWidth()+t),this.table.bottomFrozenRowCount>0&&this.bottomFrozenGroup.setAttribute("x",this.table.getFrozenColsWidth()+t),this.updateNextFrame())}afterScenegraphCreated(){var t;this.isPivot||this.table.transpose?this.table.options.frozenColCount?this.component.setFrozenColumnShadow(this.table.frozenColCount-1):this.table.options.rightFrozenColCount?this.component.setRightFrozenColumnShadow(this.table.colCount-this.table.rightFrozenColCount):this.component.setFrozenColumnShadow(-1):(this.component.setFrozenColumnShadow(this.table.frozenColCount-1),this.component.setRightFrozenColumnShadow(this.table.colCount-this.table.rightFrozenColCount)),this.table.stateManager.checkFrozen(),this.updateContainer(),this.createFrameBorder(),this.updateBorderSizeAndPosition(),this.component.updateScrollBar(),My(this.table),this.table.options.animationAppear&&aQt(this.table),((t=this.table.options.menu)===null||t===void 0?void 0:t.contextMenuWorkOnlyCell)===!1&&this.canvasShowMenu(),this.updateNextFrame()}dealWidthMode(){const t=this.table;if(t.widthMode==="adaptive"){t._clearColRangeWidthsMap();const a=t.tableNoFrameWidth;let s=0,l=0,h=t.colCount;if(t.widthAdaptiveMode==="only-body"){for(let u=0;u<t.colCount;u++)(u<t.rowHeaderLevelCount||t.isPivotChart()&&u>=t.colCount-t.rightFrozenColCount)&&(s+=t.getColWidth(u));l=t.rowHeaderLevelCount,h=t.isPivotChart()?t.colCount-t.rightFrozenColCount:t.colCount}oT(a-s,l,h,!1,[],t,!0)}else if(t.autoFillWidth){t._clearColRangeWidthsMap();const a=t.tableNoFrameWidth;let s=0,l=0;for(let h=0;h<t.colCount;h++){const u=t.getColWidth(h);(h<t.rowHeaderLevelCount||t.isPivotChart()&&h>=t.colCount-t.rightFrozenColCount)&&(s+=u),l+=u}if(l<a&&l>s){const h=t.rowHeaderLevelCount,u=t.isPivotChart()?t.colCount-t.rightFrozenColCount:t.colCount;oT(a-s,h,u,!1,[],t,!0)}}let e=0;this.bodyGroup.forEachChildrenSkipChild((a=>{e+=a.attribute.width})),this.bodyGroup.setAttribute("width",e);let i=0;this.colHeaderGroup.forEachChildrenSkipChild((a=>{i+=a.attribute.width})),this.colHeaderGroup.setAttribute("width",i);let r=0;this.rowHeaderGroup.forEachChildrenSkipChild((a=>{r+=a.attribute.width})),this.rowHeaderGroup.setAttribute("width",r);let o=0;this.cornerHeaderGroup.forEachChildrenSkipChild((a=>{o+=a.attribute.width})),this.cornerHeaderGroup.setAttribute("width",o),this.colHeaderGroup.setAttribute("x",this.cornerHeaderGroup.attribute.width),this.rowHeaderGroup.setAttribute("y",this.cornerHeaderGroup.attribute.height),this.bodyGroup.setAttributes({x:this.rowHeaderGroup.attribute.width,y:this.colHeaderGroup.attribute.height})}dealHeightMode(){var t;const e=this.table;if(e.heightMode==="adaptive"){e._clearRowRangeHeightsMap();const i=e.getRowsHeight(0,e.columnHeaderLevelCount-1),r=e.isPivotChart()?e.getBottomFrozenRowsHeight():0,o=e.tableNoFrameHeight-i-r,a=e.columnHeaderLevelCount,s=e.isPivotChart()?e.rowCount-e.bottomFrozenRowCount:e.rowCount;let l=0;for(let u=a;u<s;u++)l+=e.getRowHeight(u);const h=o/l;for(let u=a;u<s;u++){let d;d=u===s-1?o-e.getRowsHeight(a,s-2):Math.round(e.getRowHeight(u)*h),this.setRowHeight(u,d)}}else if(e.autoFillHeight){e._clearRowRangeHeightsMap();const i=e.tableNoFrameHeight;let r=0,o=0;for(let a=0;a<e.rowCount;a++){const s=e.getRowHeight(a);(a<e.columnHeaderLevelCount||e.isPivotChart()&&a>=e.rowCount-e.bottomFrozenRowCount)&&(o+=s),r+=s}if(((t=this._dealAutoFillHeightOriginRowsHeight)!==null&&t!==void 0?t:r)<i&&r-o>0){const a=e.columnHeaderLevelCount,s=e.isPivotChart()?e.rowCount-e.bottomFrozenRowCount:e.rowCount,l=(i-o)/(r-o);for(let h=a;h<s;h++){let u;u=h===s-1?i-o-e.getRowsHeight(a,s-2):Math.round(e.getRowHeight(h)*l),this.setRowHeight(h,u)}}}}dealFrozen(){MJt(this)}resetFrozen(){RJt(this)}resetRowFrozen(){kJt(this)}updateCellLayoutWidthCertainWidth(t,e,i){const r=t.attribute.width;let o=!1;return t.forEachChildren(((a,s)=>{s+=e;const l=un(this.table,i,s);l?a=this.getCell(l.start.col,l.start.row):a.setAttribute("width",r);const h=this.table._getCellStyle(i,s),u=Se(gt("padding",h,i,s,this.table)),d=a.getChildByName("text");let c=0,f=0;if(d)c=d.AABBBounds.height()+(u[0]+u[2]),d.setAttribute("maxLineWidth",r-(u[1]+u[3])),f=d.AABBBounds.height()+(u[0]+u[2]);else{const p=a.getChildAt(1);c=p.AABBBounds.height()+(u[0]+u[2]),p._cellWidth=r-(u[1]+u[3]),p.layout(),f=p.AABBBounds.height()+(u[0]+u[2])}const g=this.table.getRowHeight(s);a.attribute.height!==f&&(a.setAttribute("height",f),(g===c||f>g)&&(o=!0))})),o}updateHeaderPosition(t,e,i,r,o){pJt(t,e,i,r,o,this.table)}updateContainerAttrWidthAndX(){var t,e,i;const r=Jl(this.cornerHeaderGroup,0),o=Jl(this.rowHeaderGroup,0),a=this.colHeaderGroup.hasChildNodes()&&this.colHeaderGroup.firstChild?Jl(this.colHeaderGroup,this.colHeaderGroup.firstChild.col>0?this.table.getColsWidth((t=this.table.frozenColCount)!==null&&t!==void 0?t:0,this.colHeaderGroup.firstChild.col-1):0):0,s=this.bodyGroup.hasChildNodes()&&this.bodyGroup.firstChild?Jl(this.bodyGroup,this.bodyGroup.firstChild.col>0?this.table.getColsWidth((e=this.table.frozenColCount)!==null&&e!==void 0?e:0,this.bodyGroup.firstChild.col-1):0):0,l=Jl(this.rightFrozenGroup.childrenCount>0?this.rightFrozenGroup:this.rightTopCornerGroup,0);this.bottomFrozenGroup.hasChildNodes()&&this.bottomFrozenGroup.firstChild&&Jl(this.bottomFrozenGroup,this.bottomFrozenGroup.firstChild.col>0?this.table.getColsWidth((i=this.table.frozenColCount)!==null&&i!==void 0?i:0,this.bottomFrozenGroup.firstChild.col-1):0),Jl(this.leftBottomCornerGroup,0),Jl(this.rightTopCornerGroup,0),Jl(this.rightBottomCornerGroup,0),this.cornerHeaderGroup.setDeltaWidth(r-this.cornerHeaderGroup.attribute.width),this.leftBottomCornerGroup.setDeltaWidth(r-this.leftBottomCornerGroup.attribute.width),this.colHeaderGroup.setDeltaWidth(a-this.colHeaderGroup.attribute.width),this.rowHeaderGroup.setDeltaWidth(o-this.rowHeaderGroup.attribute.width),this.bottomFrozenGroup.setDeltaWidth(a-this.bottomFrozenGroup.attribute.width),this.rightFrozenGroup.setDeltaWidth(l-this.rightFrozenGroup.attribute.width),this.rightTopCornerGroup.setDeltaWidth(l-this.rightTopCornerGroup.attribute.width),this.rightBottomCornerGroup.setDeltaWidth(l-this.rightBottomCornerGroup.attribute.width),this.bodyGroup.setDeltaWidth(s-this.bodyGroup.attribute.width),this.colHeaderGroup.setAttribute("x",this.cornerHeaderGroup.attribute.width),this.bottomFrozenGroup.setAttribute("x",this.table.getFrozenColsWidth()),this.bodyGroup.setAttribute("x",this.rowHeaderGroup.attribute.width)}updateContainerAttrHeightAndY(){var t,e,i;for(let r=0;r<this.cornerHeaderGroup.children.length;r++)Ql(this.cornerHeaderGroup.children[r],0);for(let r=0;r<this.colHeaderGroup.children.length;r++)Ql(this.colHeaderGroup.children[r],0);for(let r=0;r<this.rightTopCornerGroup.children.length;r++)Ql(this.rightTopCornerGroup.children[r],0);for(let r=0;r<this.rowHeaderGroup.children.length;r++)this.rowHeaderGroup.children[r].firstChild&&Ql(this.rowHeaderGroup.children[r],this.rowHeaderGroup.children[r].firstChild.row>0?this.table.getRowsHeight((t=this.table.frozenRowCount)!==null&&t!==void 0?t:0,this.rowHeaderGroup.children[r].firstChild.row-1):0);for(let r=0;r<this.bodyGroup.children.length;r++)this.bodyGroup.children[r].firstChild&&Ql(this.bodyGroup.children[r],this.bodyGroup.children[r].firstChild.row>0?this.table.getRowsHeight((e=this.table.frozenRowCount)!==null&&e!==void 0?e:0,this.bodyGroup.children[r].firstChild.row-1):0);for(let r=0;r<this.rightFrozenGroup.children.length;r++)this.rightFrozenGroup.children[r].firstChild&&Ql(this.rightFrozenGroup.children[r],this.rightFrozenGroup.children[r].firstChild.row>0?this.table.getRowsHeight((i=this.table.frozenRowCount)!==null&&i!==void 0?i:0,this.rightFrozenGroup.children[r].firstChild.row-1):0);for(let r=0;r<this.leftBottomCornerGroup.children.length;r++)Ql(this.leftBottomCornerGroup.children[r],0);for(let r=0;r<this.bottomFrozenGroup.children.length;r++)Ql(this.bottomFrozenGroup.children[r],0);for(let r=0;r<this.rightBottomCornerGroup.children.length;r++)Ql(this.rightBottomCornerGroup.children[r],0)}updateContainer(t={async:!1,needUpdateCellY:!1}){var e;t.async?this._needUpdateContainer||(this._needUpdateContainer=!0,setTimeout((()=>{var i;this.updateContainerSync((i=t.needUpdateCellY)!==null&&i!==void 0&&i)}),0)):(this._needUpdateContainer=!0,this.updateContainerSync((e=t.needUpdateCellY)!==null&&e!==void 0&&e))}updateContainerSync(t=!1){this._needUpdateContainer&&(this._needUpdateContainer=!1,this.updateContainerAttrWidthAndX(),t&&this.updateContainerAttrHeightAndY(),this.updateTableSize(),this.component.updateScrollBar(),this.updateNextFrame())}updateCellContentWhileResize(t,e){var i;const r=!((i=this.table.getCellRawRecord(t,e))===null||i===void 0)&&i.vtableMerge?"text":this.table.isHeader(t,e)?this.table._getHeaderLayoutMap(t,e).headerType:this.table.getBodyColumnType(t,e),o=this.getCell(t,e);r!=="image"&&r!=="video"||Yb(o,t,e,0,0,this.table)}createFrameBorder(){var t,e,i,r,o;this.updateTableSize();const a=!this.isPivot&&!this.table.internalProps.transpose;ts(this.bodyGroup,this.table.theme.bodyStyle.frameStyle,this.bodyGroup.role,a?[!0,!0,!0,!1]:void 0),ts(this.rowHeaderGroup,this.isPivot||this.table.internalProps.transpose?this.table.theme.rowHeaderStyle.frameStyle:this.table.theme.bodyStyle.frameStyle,this.rowHeaderGroup.role,a?[!0,!1,!0,!0]:void 0),ts(this.colHeaderGroup,this.table.theme.headerStyle.frameStyle,this.colHeaderGroup.role,a?[!0,!0,!0,!1]:void 0),ts(this.cornerHeaderGroup,this.isPivot?this.table.theme.cornerHeaderStyle.frameStyle:this.table.theme.headerStyle.frameStyle,this.cornerHeaderGroup.role,a?[!0,!1,!0,!0]:void 0),!((t=this.table.theme.cornerLeftBottomCellStyle)===null||t===void 0)&&t.frameStyle&&ts(this.leftBottomCornerGroup,this.table.theme.cornerLeftBottomCellStyle.frameStyle,this.leftBottomCornerGroup.role,a?[!0,!1,!0,!0]:void 0),!((e=this.table.theme.bottomFrozenStyle)===null||e===void 0)&&e.frameStyle&&ts(this.bottomFrozenGroup,this.table.theme.bottomFrozenStyle.frameStyle,this.bottomFrozenGroup.role,a?[!0,!0,!0,!1]:void 0),!((i=this.table.theme.rightFrozenStyle)===null||i===void 0)&&i.frameStyle&&ts(this.rightFrozenGroup,this.table.theme.rightFrozenStyle.frameStyle,this.rightFrozenGroup.role,void 0),!((r=this.table.theme.cornerRightTopCellStyle)===null||r===void 0)&&r.frameStyle&&ts(this.rightTopCornerGroup,this.table.theme.cornerRightTopCellStyle.frameStyle,this.rightTopCornerGroup.role,void 0),!((o=this.table.theme.cornerRightBottomCellStyle)===null||o===void 0)&&o.frameStyle&&ts(this.rightBottomCornerGroup,this.table.theme.cornerRightBottomCellStyle.frameStyle,this.rightBottomCornerGroup.role,void 0),ts(this.tableGroup,this.table.theme.frameStyle,this.tableGroup.role,void 0)}getResizeColAt(t,e,i){const r=this.table.theme.columnResize.resizeHotSpotSize/2;let o;if(!i){const a=this.table.getDrawRange();return e>=a.top&&e<=a.bottom&&(o=this.table.getCellAtRelativePosition(t-r,e),o.col===this.table.colCount-1)?o:{col:-1,row:-1}}return i.stage?(t<i.globalAABBBounds.x1+r?o={col:i.col-1,row:i.row,x:i.globalAABBBounds.x1}:i.globalAABBBounds.x2-r<t&&(o={col:i.col,row:i.row,x:i.globalAABBBounds.x2}),o&&this.table.rightFrozenColCount>0&&o.col>=this.table.colCount-this.table.rightFrozenColCount-1&&this.table.tableNoFrameWidth-this.table.getFrozenColsWidth()-this.table.getRightFrozenColsWidth()+this.table.scrollLeft<this.bodyGroup.attribute.width&&(o.col=o.col+1,o.rightFrozen=!0),o||{col:-1,row:-1}):{col:-1,row:-1}}getResizeRowAt(t,e,i){const r=this.table.theme.columnResize.resizeHotSpotSize/2;if(i){let o;if(e<i.globalAABBBounds.y1+r?o={col:i.col,row:i.row-1,y:i.globalAABBBounds.y1}:i.globalAABBBounds.y2-r<e&&(o={col:i.col,row:i.row,y:i.globalAABBBounds.y2}),o&&this.table.bottomFrozenRowCount>0&&o.row>=this.table.rowCount-this.table.bottomFrozenRowCount-1&&this.table.tableNoFrameHeight-this.table.getFrozenRowsHeight()-this.table.getBottomFrozenRowsHeight()+this.table.scrollTop<this.bodyGroup.attribute.height&&(o.row=o.row+1,o.bottomFrozen=!0),o)return o}return{col:-1,row:-1}}updateFrozen(){this.clear||(this.resetFrozen(),this.component.updateScrollBar())}updateRowFrozen(){this.clear||(this.resetRowFrozen(),this.component.updateScrollBar())}dealWidthRightFrozen(t){this.clear?this.table.internalProps.rightFrozenColCount=t:PJt(t,this)}dealWidthBottomFrozen(t){this.clear?this.table.internalProps.bottomFrozenRowCount=t:BJt(t,this)}updateBorderSizeAndPosition(){this.bodyGroup.border&&(this.bodyGroup.appendChild(this.bodyGroup.border),Kl(this.bodyGroup),this.rowHeaderGroup.attribute.width,yX(this.bodyGroup,this.table.theme.bodyStyle.frameStyle)),this.colHeaderGroup.border&&(this.colHeaderGroup.appendChild(this.colHeaderGroup.border),Kl(this.colHeaderGroup),this.cornerHeaderGroup.attribute.width,yX(this.colHeaderGroup,this.table.theme.headerStyle.frameStyle)),this.rowHeaderGroup.border&&(this.rowHeaderGroup.appendChild(this.rowHeaderGroup.border),Kl(this.rowHeaderGroup)),this.cornerHeaderGroup.border&&(this.cornerHeaderGroup.appendChild(this.cornerHeaderGroup.border),Kl(this.cornerHeaderGroup)),this.leftBottomCornerGroup.border&&(this.leftBottomCornerGroup.appendChild(this.leftBottomCornerGroup.border),Kl(this.leftBottomCornerGroup)),this.bottomFrozenGroup.border&&(this.bottomFrozenGroup.appendChild(this.bottomFrozenGroup.border),Kl(this.bottomFrozenGroup)),this.rightFrozenGroup.border&&(this.rightFrozenGroup.appendChild(this.rightFrozenGroup.border),Kl(this.rightFrozenGroup)),this.rightTopCornerGroup.border&&(this.rightTopCornerGroup.appendChild(this.rightTopCornerGroup.border),Kl(this.rightTopCornerGroup)),this.rightBottomCornerGroup.border&&(this.rightBottomCornerGroup.appendChild(this.rightBottomCornerGroup.border),Kl(this.rightBottomCornerGroup)),AZt(this.table)}sortCell(){this.isPivot||(this.table.transpose?this.proxy.sortCellHorizontal():this.proxy.sortCellVertical())}getCellOverflowText(t,e){const i=this.getCell(t,e).getChildByName("text",!0);if(i&&i.type==="text"){if(i.attribute.moreThanMaxCharacters)return this.table.getCellValue(t,e);if(i.cliped)return this.table.getCellValue(t,e)}else if(i&&i.type==="richtext"){const r=i;if(r.attribute.ellipsis&&r._frameCache&&r.attribute.height<r._frameCache.actualHeight)return r.attribute.textConfig.find((o=>o.text)),this.table.getCellValue(t,e)}return null}updateDrill(t,e,i,r,o){this.component.drillIcon.update(t,e,i,r,o,this)}updateCellContent(t,e,i=!1){if(!this.clear)return Na(t,e,this.table,void 0,void 0,i)}setPixelRatio(t){this.stage.disableDirtyBounds(),this.stage.window.setDpr(t),this.stage.render(),this.stage.enableDirtyBounds()}updateRow(t,e,i=[],r=!0,o){this.table.internalProps.layoutMap.clearCellRangeMap(),this.table.internalProps.useOneRowHeightFillAll=!1;const a=_y(e.map((h=>h.row))).sort(((h,u)=>h-u)),s=_y(i.map((h=>h.row))).sort(((h,u)=>h-u)),l=this.table.getAllRowsHeight()-[...a,...s].reduce(((h,u)=>h+this.table.getRowHeight(u)),0)<=this.table.tableNoFrameHeight;if(bJt(t,e,i,this.table,o),r&&this.recalculateColWidths(),this.table.heightMode==="adaptive"||this.table.autoFillHeight&&(this.table.getAllRowsHeight()<=this.table.tableNoFrameHeight||l))this.table.scenegraph.recalculateRowHeights();else if(this.table.isAutoRowHeight(this.table.columnHeaderLevelCount))for(let h=0;h<s.length;h++){const u=s[h],d=this.table.rowHeightsMap.get(u),c=Ra(u,0,this.table.colCount-1,this.table);(u>=this.proxy.rowStart&&u<=this.proxy.rowEnd||u>=this.table.rowCount-this.table.bottomFrozenRowCount&&u<=this.table.rowCount-1)&&this.table.scenegraph.updateRowHeight(u,c-d)}this.table.stateManager.checkFrozen(),this.isPivot||this.table.transpose?this.table.options.frozenColCount?this.component.setFrozenColumnShadow(this.table.frozenColCount-1):this.table.options.rightFrozenColCount&&this.component.setRightFrozenColumnShadow(this.table.colCount-this.table.rightFrozenColCount):(this.component.setFrozenColumnShadow(this.table.frozenColCount-1),this.component.setRightFrozenColumnShadow(this.table.colCount-this.table.rightFrozenColCount)),this.component.updateScrollBar(),this.updateNextFrame()}updateCol(t,e,i=[]){iQt(t,e,i,this.table),this.recalculateColWidths(),this.recalculateRowHeights(),this.table.stateManager.checkFrozen(),this.isPivot||this.table.transpose?this.table.options.frozenColCount?this.component.setFrozenColumnShadow(this.table.frozenColCount-1):this.table.options.rightFrozenColCount&&this.component.setRightFrozenColumnShadow(this.table.colCount-this.table.rightFrozenColCount):(this.component.setFrozenColumnShadow(this.table.frozenColCount-1),this.component.setRightFrozenColumnShadow(this.table.colCount-this.table.rightFrozenColCount)),this.component.updateScrollBar(),this.updateNextFrame()}updateCornerHeaderCells(){for(let t=0;t<this.table.frozenColCount;t++)for(let e=0;e<this.table.frozenRowCount;e++)Na(t,e,this.table,!1)}updateRowHeaderCells(){for(let t=0;t<this.table.frozenColCount;t++)for(let e=this.table.frozenRowCount;e<this.table.rowCount;e++)Na(t,e,this.table,!1)}updateColumnHeaderCells(){for(let t=0;t<this.table.frozenRowCount;t++)for(let e=this.table.frozenColCount;e<this.table.colCount;e++)Na(e,t,this.table,!1)}getColumnGroupX(t){return t<this.table.rowHeaderLevelCount?this.table.getColsWidth(0,t-1):t<this.table.colCount-this.table.rightFrozenColCount?this.table.getColsWidth(this.table.rowHeaderLevelCount,t-1):t<this.table.colCount?this.table.getColsWidth(this.table.colCount-this.table.bottomFrozenRowCount,t-1):0}getCellGroupY(t){return t<this.table.frozenRowCount?this.table.getRowsHeight(0,t-1):t<this.table.rowCount-this.table.bottomFrozenRowCount?this.table.getRowsHeight(this.table.frozenRowCount,t-1):t<this.table.rowCount?this.table.getRowsHeight(this.table.rowCount-this.table.bottomFrozenRowCount,t-1):0}getCellGroupX(t){return t<this.table.rowHeaderLevelCount?this.table.getColsWidth(0,t-1):t<this.table.colCount-this.table.rightFrozenColCount?this.table.getColsWidth(this.table.rowHeaderLevelCount,t-1):t<this.table.colCount?this.table.getColsWidth(this.table.colCount-this.table.rightFrozenColCount,t-1):0}updateDomContainer(){TJt(this.table)}setLoadingHierarchyState(t,e){const i=this.getCell(t,e),r=i.getChildByName("collapse",!0)||i.getChildByName("expand",!0);if(r){const o=ia()[er.loadingIconName];o&&Yo(o,r,t,e)}}temporarilyUpdateSelectRectStyle(t){sQt(t,this)}resetSelectRectStyle(){this.recreateAllSelectRangeComponents()}};function hQt(n,t,e){for(let i=0;i<e.length;i++){const r=e[i];if($a(r,n,t))return!0}return!1}function uQt(n,t,e,i){for(let r=0;r<e.length;r++){const o=e[r];if(DXt(o,{start:n,end:t}))return!0}return!1}function cm(n,t,e){const i=n.highPerformanceGetCell(t,e);if(i.role==="cell"&&Y(i.mergeStartCol)&&Y(i.mergeStartRow)&&Y(i.mergeEndCol)&&Y(i.mergeEndRow)){const{colStart:r,colEnd:o,rowStart:a,rowEnd:s}=Ad(i,n);for(let l=r;l<=o;l++)for(let h=a;h<=s;h++){const u=n.highPerformanceGetCell(l,h);u.role==="cell"&&u.addUpdateBoundTag()}}else i.addUpdateBoundTag()}function VX(n,t,e,i,r){const o=n.table;for(let s=0;s<o.columnHeaderLevelCount;s++)cm(n,t,s);const a=n.getColGroup(t);return a?.addUpdateBoundTag(),!0}function GX(n,t,e,i,r,o){const a=n.table;for(let l=0;l<a.columnHeaderLevelCount;l++)cm(n,t,l);const s=n.getColGroup(t);return s?.addUpdateBoundTag(),!0}function $X(n,t,e,i,r){const o=n.table;for(let a=0;a<o.colCount;a++)cm(n,a,e);return!0}function jX(n,t,e,i,r,o){const a=n.table;for(let s=0;s<a.colCount;s++)cm(n,s,e);return!0}function dQt(n,t,e,i,r){return cm(n,t,e),!0}function cQt(n,t,e,i,r){return cm(n,t,e),!0}function fQt(n,t,e){var i;const{table:r}=n,{scenegraph:o}=r,{highlightScope:a,singleStyle:s,disableHeader:l,cellPos:h,cellPosContainHeader:u}=n.hover,d=h.col,c=h.row;if(a===Ee.none||l&&(u.col!==t||u.row!==e)){const v=u.col,m=u.row;o.hideHoverIcon(v,m),o.showHoverIcon(t,e),u.col=t,u.row=e}if((l&&r.isHeader(t,e)||a===Ee.none)&&(t=-1,e=-1),d===t&&c===e)return;h.col=t,h.row=e,!((i=n.table.options.customConfig)===null||i===void 0)&&i.disableBuildInChartActive||(o.deactivateChart(d,c),o.activateChart(t,e));let f=!1;const{ranges:g,highlightScope:p}=n.select;if(d!==-1&&c!==-1&&(f=gQt(o,d,c,g,s,a),l||o.hideHoverIcon(d,c)),t===-1||e===-1)return h.col=-1,h.row=-1,void(!f||d===t&&c===e||n.table.scenegraph.updateNextFrame());a===Ee.single?f=!!cQt(o,t,e):a===Ee.row?f=!!jX(o,t,e):a===Ee.column?f=!!GX(o,t):a===Ee.cross&&(f=!!jX(o,t,e),f=!!GX(o,t)),a===Ee.none||l||o.showHoverIcon(t,e),f&&n.table.scenegraph.updateNextFrame()}function gQt(n,t,e,i,r,o,a){let s=!1;return o===Ee.single?s=!!dQt(n,t,e):o===Ee.row?s=!!$X(n,t,e):o===Ee.column?s=!!VX(n,t):o===Ee.cross&&(s=!!$X(n,t,e),s=!!VX(n,t)),s}function pQt(n,t,e){e.frozenColCount>0?n!==e.frozenColCount-1?e.setFrozenColCount(n+1):e.setFrozenColCount(0):e.setFrozenColCount(n+1)}function vQt(n,t,e,i){var r;let o,a=null,s=!1;if(Array.isArray(e.sortState))for(let c=0;c<e.sortState.length&&(o=e.sortState[c],o&&(a=e._getHeaderCellBySortState(o)),a&&(s=UX(n,t,a.col,a.row,e)),!s);c++);else o=e.sortState,o&&(a=e._getHeaderCellBySortState(o)),a&&(s=UX(n,t,a.col,a.row,e));const l=e.getHeaderDefine(n,t);if(o&&s&&l?.sort?o.order=o.order==="asc"?"desc":o.order==="desc"?"normal":"asc":l?.sort?o={field:e.getHeaderField(n,t),order:"asc"}:s&&l?.showSort||(o={field:e.getHeaderField(n,t),order:"normal"}),o.event=i,e.fireListeners(at.SORT_CLICK,o).includes(!1))return;let h=!1,u=e.internalProps.sortState?Array.isArray(e.internalProps.sortState)&&(h=!0)?e.internalProps.sortState:[e.internalProps.sortState]:[];if(Array.isArray(u)){const c=u.findIndex((f=>f.field===o.field));c>=0?u[c]=o:u.push(o)}u=u.filter((c=>c.order!=="normal")),u=e.internalProps.multipleSort&&(h=!0)?u:u.splice(-1),u=h&&u.length?u:u[0],e.internalProps.sortState=u,e.stateManager.setSortState(u),l?.sort&&mQt(u,e),e.internalProps.useOneRowHeightFillAll=!1,e.internalProps.layoutMap.clearCellRangeMap(),e.scenegraph.sortCell();const d=!!(!((r=e.stateManager.select.ranges)===null||r===void 0)&&r.length);e.stateManager.updateSelectPos(-1,-1),e.stateManager.endSelectCells(!0,d)}function mQt(n,t,e){n=Array.isArray(n)||!n?n:[n],t.dataSource.sort((n||[]).map((i=>{var r,o;const a=t.internalProps.layoutMap.headerObjects.find((s=>s&&s.field===i.field));return{field:i.field,order:i.order||"asc",orderFn:typeof((r=a?.define)===null||r===void 0?void 0:r.sort)=="function"?(o=a?.define)===null||o===void 0?void 0:o.sort:PA}})))}function UX(n,t,e,i,r){return r._getLayoutCellId(n,t)===r._getLayoutCellId(e,i)}function yQt(n,t,e,i,r,o,a=!0,s=!1){var l,h;const{table:u,interactionState:d}=n,{scenegraph:c}=u,{highlightScope:f,disableHeader:g,cellPos:p,disableCtrlMultiSelect:v}=n.select;if(n.select.isSelectAll=o,t!==-1&&e!==-1&&a&&u._makeVisibleCell(t,e),t!==-1&&e!==-1&&a)if(d===Xt.grabing&&n.select.ranges.length>0){const m=n.select.ranges[n.select.ranges.length-1];t>m.start.col&&t>m.end.col&&u._makeVisibleCell(t+1,e),e>m.start.row&&e>m.end.row&&u._makeVisibleCell(t,e+1),t<m.start.col&&t<m.end.col&&u._makeVisibleCell(t-1,e),e<m.start.row&&e<m.end.row&&u._makeVisibleCell(t,e-1)}else u._makeVisibleCell(t,e);if(o){n.select.ranges=[],c.deleteAllSelectBorder();let m=0,y=0;const{disableHeaderSelect:b,disableRowSeriesNumberSelect:_}=((l=u.options.keyboardOptions)===null||l===void 0?void 0:l.selectAllOnCtrlA)||{};b&&(m=u.rowHeaderLevelCount,y=u.columnHeaderLevelCount),(_||b&&u.transpose)&&u.options.rowSeriesNumber&&(m+=1),n.select.ranges.push({start:{col:m,row:y},end:{col:u.colCount-1,row:u.rowCount-1}});const w=n.select.ranges[n.select.ranges.length-1];c.updateCellSelectBorder(w,!1)}else if(p.col===-1||p.row===-1||t!==-1&&e!==-1)if(d!==Xt.default||u.eventManager.isDraging||u.stateManager.isResizeCol()){if((d===Xt.grabing||u.eventManager.isDraging)&&!u.stateManager.isResizeCol()){let m=!0;p.col===-1&&(p.col=t),p.row===-1&&(p.row=e),p.col=t,p.row=e;const y=n.select.ranges[n.select.ranges.length-1];if(y){if(u.internalProps.layoutMap.isSeriesNumberInBody(y.start.col,y.start.row))m=!1,y.end={col:u.colCount-1,row:e};else if(n.fillHandle.isFilling){if(n.fillHandle.direction==="top")if(e===n.fillHandle.beforeFillMinRow&&e===n.fillHandle.beforeFillMaxRow)y.start.row=y.end.row=e;else if(e<=n.fillHandle.beforeFillMinRow){if(y.start.row<y.end.row){const b=y.start.row;y.start.row=y.end.row,y.end.row=b}y.end.row=e}else e===n.fillHandle.beforeFillMaxRow&&(y.start.row>y.end.row?y.start.row=e:y.end.row=e);else if(n.fillHandle.direction==="bottom"){if(e>=n.fillHandle.beforeFillMaxRow){if(y.start.row>y.end.row){const b=y.start.row;y.start.row=y.end.row,y.end.row=b}y.end.row=e}}else if(n.fillHandle.direction==="left")if(t===n.fillHandle.beforeFillMinCol&&t===n.fillHandle.beforeFillMaxCol)y.start.col=y.end.col=t;else if(t<=n.fillHandle.beforeFillMinCol){if(y.start.col<y.end.col){const b=y.start.col;y.start.col=y.end.col,y.end.col=b}y.end.col=t}else t===n.fillHandle.beforeFillMaxCol&&(y.start.col>y.end.col?y.start.col=t:y.end.col=t);else if(n.fillHandle.direction==="right"&&t>=n.fillHandle.beforeFillMaxCol){if(y.start.col>y.end.col){const b=y.start.col;y.start.col=y.end.col,y.end.col=b}y.end.col=t}}else{y.end={col:t,row:e};const b=s?{start:{col:t,row:e},end:{col:t,row:e}}:u.getCellRange(t,e);y.start.col<b.end.col?y.end.col=b.end.col:y.start.col>b.start.col&&(y.end.col=b.start.col),y.start.row<b.end.row?y.end.row=b.end.row:y.start.row>b.start.row&&(y.end.row=b.start.row),n.select.headerSelectMode==="body"&&(u.isRowHeader(t,e)?(y.start.col=u.rowHeaderLevelCount+u.leftRowSeriesNumberCount,y.end.col=u.colCount-1):u.isColumnHeader(t,e)?(y.start.row=u.columnHeaderLevelCount,y.end.row=u.rowCount-1):u.internalProps.layoutMap.isSeriesNumberInBody(t,e)?(y.start.col=u.leftRowSeriesNumberCount,y.end.col=u.colCount-1):u.isCornerHeader(t,e)?(y.start.col=u.rowHeaderLevelCount+u.leftRowSeriesNumberCount,y.start.row=u.columnHeaderLevelCount,y.end.col=u.colCount-1,y.end.row=u.rowCount-1):u.isSeriesNumber(t,e)&&(y.start.col=u.leftRowSeriesNumberCount,y.start.row=u.columnHeaderLevelCount,y.end.col=u.colCount-1,y.end.row=u.rowCount-1)),s&&(y.skipBodyMerge=!0)}y&&y.start.row<=u.rowCount-1&&y.end.row<=u.rowCount-1&&y.start.col<=u.colCount-1&&y.end.col<=u.colCount-1&&c.updateCellSelectBorder(y,m)}}}else{const m=n.select.ranges[n.select.ranges.length-1];if(i&&m){if(r&&!v||(p.col=t,p.row=e),n.select.headerSelectMode!=="cell"&&u.isColumnHeader(t,e)){const y=Math.min(m.start.col,m.end.col,t),b=Math.max(m.start.col,m.end.col,t),_=Math.min(m.start.row,m.end.row,e),w=u.rowCount-1;n.select.headerSelectMode==="body"?(m.start={col:y,row:u.columnHeaderLevelCount},m.end={col:b,row:u.rowCount-1}):(m.start={col:y,row:_},m.end={col:b,row:w})}else if(n.select.headerSelectMode!=="cell"&&u.isRowHeader(t,e)){const y=Math.min(m.start.col,m.end.col,t),b=u.colCount-1,_=Math.min(m.start.row,m.end.row,e),w=Math.max(m.start.row,m.end.row,e);n.select.headerSelectMode==="body"?(m.start={col:u.leftRowSeriesNumberCount+u.rowHeaderLevelCount,row:_},m.end={col:u.colCount-1,row:w}):(m.start={col:y,row:_},m.end={col:b,row:w})}else if(n.select.headerSelectMode!=="cell"&&u.isSeriesNumberInBody(t,e)){const y=Math.min(m.start.col,m.end.col,t),b=u.colCount-1,_=Math.min(m.start.row,m.end.row,e),w=Math.max(m.start.row,m.end.row,e);n.select.headerSelectMode==="body"?(m.start={col:u.leftRowSeriesNumberCount,row:_},m.end={col:u.colCount-1,row:w}):(m.start={col:y,row:_},m.end={col:b,row:w})}else m.end={col:t,row:e};c.deleteLastSelectedRangeComponents(),c.updateCellSelectBorder(m)}else{let y=!0;if(p.col===-1||p.row===-1||r&&!v||(n.select.ranges=[],c.deleteAllSelectBorder()),n.select.headerSelectMode!=="cell"&&u.isColumnHeader(t,e)){const _=u.getCellRange(t,e);n.select.headerSelectMode==="body"?n.select.ranges.push({start:{col:_.start.col,row:u.columnHeaderLevelCount},end:{col:_.end.col,row:u.rowCount-1},skipBodyMerge:!0}):n.select.ranges.push({start:{col:_.start.col,row:_.start.row},end:{col:_.end.col,row:u.rowCount-1},skipBodyMerge:!0})}else if(n.select.headerSelectMode!=="cell"&&u.isRowHeader(t,e)){const _=u.getCellRange(t,e);n.select.headerSelectMode==="body"?n.select.ranges.push({start:{col:u.rowHeaderLevelCount+u.leftRowSeriesNumberCount,row:_.start.row},end:{col:u.colCount-1,row:_.end.row},skipBodyMerge:!0}):n.select.ranges.push({start:{col:_.start.col,row:_.start.row},end:{col:u.colCount-1,row:_.end.row},skipBodyMerge:!0})}else if(u.internalProps.layoutMap.isSeriesNumberInHeader(t,e)){y=!1;const{cornerHeaderSelectMode:_}=n.select;if(_==="body")n.select.ranges.push({start:{col:u.leftRowSeriesNumberCount,row:u.columnHeaderLevelCount},end:{col:u.colCount-1,row:u.rowCount-1},skipBodyMerge:!0});else if(_==="inline"){const w=s?{start:{col:t,row:e},end:{col:t}}:u.getCellRange(t,e);n.select.ranges.push({start:{col:w.start.col,row:w.start.row},end:{col:w.end.col,row:u.rowCount-1},skipBodyMerge:!0})}else if(_==="cell"){const w=s?{start:{col:t,row:e},end:{col:t,row:e}}:u.getCellRange(t,e);n.select.ranges.push({start:{col:w.start.col,row:w.start.row},end:{col:w.end.col,row:w.end.row},skipBodyMerge:s||void 0})}else n.select.ranges.push({start:{col:0,row:0},end:{col:u.colCount-1,row:u.rowCount-1},skipBodyMerge:!0})}else if(u.internalProps.layoutMap.isSeriesNumberInBody(t,e))y=!1,n.select.headerSelectMode==="body"?n.select.ranges.push({start:{col:u.leftRowSeriesNumberCount,row:e},end:{col:u.colCount-1,row:e},skipBodyMerge:!0}):n.select.ranges.push({start:{col:t,row:e},end:{col:u.colCount-1,row:e},skipBodyMerge:!0});else if(u.internalProps.layoutMap.isCornerHeader(t,e)){y=!1;const{cornerHeaderSelectMode:_}=n.select;if(_==="body")n.select.ranges.push({start:{col:u.rowHeaderLevelCount+u.leftRowSeriesNumberCount,row:u.columnHeaderLevelCount},end:{col:u.colCount-1,row:u.rowCount-1},skipBodyMerge:!0});else if(_==="cell"){const w=s?{start:{col:t,row:e},end:{col:t,row:e}}:u.getCellRange(t,e);n.select.ranges.push({start:{col:w.start.col,row:w.start.row},end:{col:w.end.col,row:w.end.row},skipBodyMerge:s||void 0})}else if(_==="inline"){const w=s?{start:{col:t,row:e},end:{col:t}}:u.getCellRange(t,e);n.select.ranges.push({start:{col:w.start.col,row:w.start.row},end:{col:w.end.col,row:u.rowCount-1},skipBodyMerge:!0})}else n.select.ranges.push({start:{col:u.leftRowSeriesNumberCount,row:0},end:{col:u.colCount-1,row:u.rowCount-1},skipBodyMerge:!0})}else if(t>=0&&e>=0){const _=s?{start:{col:t,row:e},end:{col:t,row:e}}:u.getCellRange(t,e);n.select.ranges.push({start:{col:_.start.col,row:_.start.row},end:{col:_.end.col,row:_.end.row},skipBodyMerge:s||void 0})}p.col=t,p.row=e;const b=(h=n.select.ranges)===null||h===void 0?void 0:h[n.select.ranges.length-1];b&&b.start.row<=u.rowCount-1&&b.end.row<=u.rowCount-1&&b.start.col<=u.colCount-1&&b.end.col<=u.colCount-1&&c.updateCellSelectBorder(b,y)}}else p.col=-1,p.row=-1,n.select.ranges=[],c.deleteAllSelectBorder();c.updateNextFrame()}function bQt(n){n.moveSelectingRangeComponentsToSelectedRangeComponents()}const O0=G_(at,{PIVOT_SORT_CLICK:"pivot_sort_click",DRILLMENU_CLICK:"drillmenu_click"});G_(at,{VCHART_EVENT_TYPE:"vchart_event_type"});function _Qt(n,t,e,i,r){const o=r.getCellLocation(n,t);let a=0,s=0,l=!1;o==="columnHeader"?(a=r.getColsWidth(0,r.rowHeaderLevelCount-1)-(r.frozenColCount===0?r.scrollLeft:0),s=r.getRowsHeight(0,t-1)+r.getRowHeight(t)/2,l=!0):o==="rowHeader"&&(s=r.getRowsHeight(0,r.columnHeaderLevelCount-1),a=r.getColsWidth(0,n-1)+r.getColWidth(n)/2,l=!0),r.scenegraph.updateDrill(l,a,s,e,i)}function CQt(n,t,e){const i=e.scenegraph.getCell(n,t).getChildByName("sparkline"),r=i?.getChildByName("highlight-line"),o=i?.getChildByName("highlight-symbol");r&&r.setAttributes({visible:!1,pickable:!1}),o&&o.setAttributes({visible:!1,pickable:!1}),e.scenegraph.updateNextFrame()}function wQt(n,t,e,i,r){var o,a;const s=r.scenegraph.getCell(n,t).getChildByName("sparkline"),l=s?.getChildByName("sparkline-line"),h=s?.getChildByName("sparkline-symbol-group");if(!l)return!1;const u=l.bandwidth,d=l.min,c=l.max,f=l.attribute.points;let g;e-=s.globalAABBBounds.x1,s.globalAABBBounds.y1;for(let p=0;p<f.length;p++){const{x:v,y:m,defined:y,rawData:b}=f[p];if(Math.abs(e-v)<u/2&&(g={point:f[p],points:f,pointsBandWidth:u,pointData:b},y)){const _=s.getChildByName("highlight-line");if(_)_.setAttributes({points:[{x:v,y:c},{x:v,y:d}],visible:!0,pickable:!0});else{const C=Wi({points:[{x:v,y:c},{x:v,y:d}],lineWidth:(o=l.hover)===null||o===void 0?void 0:o.strokeWidth,stroke:(a=l.hover)===null||a===void 0?void 0:a.stroke});C.name="highlight-line",s.addChild(C)}const w=s.getChildByName("highlight-symbol");if(w)w.setAttributes({x:v,y:m,visible:!0,pickable:!0});else{const C=Av({x:v,y:m,stroke:h.hover.stroke,lineWidth:h.hover.strokeWidth,fill:h.hover.fill,size:2*h.hover.size,symbolType:"circle"});C.name="highlight-symbol",s.addChild(C)}break}}if(r.scenegraph.updateNextFrame(),g){const p={col:n,row:t,field:r.getHeaderField(n,t),value:r.getCellValue(n,t),dataValue:r.getCellOriginValue(n,t),cellHeaderPaths:r.internalProps.layoutMap.getCellHeaderPaths(n,t),title:r.getBodyColumnDefine(n,t).title,cellRange:r.getCellRelativeRect(n,t),sparkline:{pointData:g.pointData},scaleRatio:r.canvas.getBoundingClientRect().width/r.canvas.offsetWidth};r.fireListeners(at.MOUSEOVER_CHART_SYMBOL,p)}return!0}function xQt(n,t,e){const i=e.getCellRange(n.col,n.row);if(e.isColumnHeader(n.col,n.row)){const r=e.getCellRange(t.col,i.start.row);t.row>=e.columnHeaderLevelCount&&(t.row=e.columnHeaderLevelCount-1),t.col>=n.col?t.col=r.end.col:t.col=r.start.col}else if(e.isRowHeader(n.col,n.row)){const r=e.internalProps.layoutMap,o=e.getCellRange(i.start.col,t.row);if(t.col>=e.rowHeaderLevelCount+r.leftRowSeriesNumberColumnCount&&(t.col=e.rowHeaderLevelCount+r.leftRowSeriesNumberColumnCount-1),r.rowHierarchyType==="tree"){const a=r.getCellHeaderPathsWithTreeNode(n.col,n.row).rowHeaderPaths,s=r.getCellHeaderPathsWithTreeNode(t.col,t.row).rowHeaderPaths;if(a.length<=s.length){const l=s[a.length-1];l&&(t.row>=n.row?t.row=l.startInTotal+l.size-1+e.columnHeaderLevelCount:t.row=l.startInTotal+e.columnHeaderLevelCount)}}else t.row>=n.row?t.row=o.end.row:t.row=o.start.row}return t}function SQt(n,t,e,i,r,o){var a;if(!("canMoveHeaderPosition"in r.table.internalProps.layoutMap))return;if(r.columnMove.moving=!0,r.columnMove.colSource=n,r.columnMove.rowSource=t,r.table.isListTable()){const g=r.table.getRecordIndexByCell(n,t),p=r.table.getRecordByCell(n,t),v=r.table.getRecordHierarchyState(n,t);r.columnMove.rowSourceSize=f2(g,v,p)+1}r.columnMove.x=e-r.table.tableX,r.columnMove.y=i-r.table.tableY;const s=r.table.getCellLocation(n,t),l=s==="columnHeader"?r.columnMove.x:s==="rowHeader"||r.table.internalProps.layoutMap.isSeriesNumberInBody(n,t)?r.columnMove.y:0,{backX:h,lineX:u,backY:d,lineY:c}=r.table.scenegraph.component.showMoveCol(n,t,l);r.table.fireListeners(at.CHANGE_HEADER_POSITION_START,{col:n,row:t,x:e,y:i,backX:h,lineX:u,backY:d,lineY:c,event:o});const f=!!(!((a=r.select.ranges)===null||a===void 0)&&a.length);r.table.stateManager.updateSelectPos(-1,-1),r.table.stateManager.endSelectCells(!0,f),r.table.scenegraph.updateNextFrame()}function AQt(n,t,e,i,r,o){if(!("canMoveHeaderPosition"in r.table.internalProps.layoutMap))return;const a=xQt({col:r.columnMove.colSource,row:r.columnMove.rowSource},{col:n,row:t},r.table);if(r.table.internalProps.layoutMap.canMoveHeaderPosition({col:r.columnMove.colSource,row:r.columnMove.rowSource},{col:a.col,row:a.row})){if(r.columnMove.x=e-r.table.tableX,r.columnMove.y=i-r.table.tableY,r.columnMove.colTarget=a.col,r.columnMove.rowTarget=a.row,r.table.isListTable()){const c=r.table.getRecordIndexByCell(a.col,a.row),f=r.table.getRecordByCell(a.col,a.row),g=r.table.getRecordHierarchyState(a.col,a.row);r.columnMove.rowTargetSize=f2(c,g,f)+1}let s,l,h,u;r.updateCursor("grabbing");const d=r.table.getCellLocation(r.columnMove.colSource,r.columnMove.rowSource);d==="columnHeader"?(l=r.columnMove.x,s=r.table.isLeftFrozenColumn(n)?r.columnMove.colTarget>=r.columnMove.colSource?r.table.getColsWidth(0,r.columnMove.colTarget):r.table.getColsWidth(0,r.columnMove.colTarget-1):r.table.isRightFrozenColumn(n)?r.table.tableNoFrameWidth-r.table.getColsWidth(a.col+1,r.table.colCount-1):(r.columnMove.colTarget>=r.columnMove.colSource?r.table.getColsWidth(0,r.columnMove.colTarget):r.table.getColsWidth(0,r.columnMove.colTarget-1))-r.table.stateManager.scroll.horizontalBarPos):(d==="rowHeader"||r.table.internalProps.layoutMap.isSeriesNumberInBody(n,t))&&(u=r.columnMove.y,h=r.table.isFrozenRow(t)?r.columnMove.rowTarget>=r.columnMove.rowSource?r.table.getRowsHeight(0,r.columnMove.rowTarget):r.table.getRowsHeight(0,r.columnMove.rowTarget-1):r.table.isBottomFrozenRow(t)?r.table.tableNoFrameHeight-r.table.getRowsHeight(a.row+1,r.table.rowCount-1):(r.columnMove.rowTarget>=r.columnMove.rowSource?r.table.getRowsHeight(0,r.columnMove.rowTarget):r.table.getRowsHeight(0,r.columnMove.rowTarget-1))-r.table.stateManager.scroll.verticalBarPos),r.table.scenegraph.component.updateMoveCol(l,s,u,h),r.table.fireListeners(at.CHANGING_HEADER_POSITION,{col:n,row:t,x:e,y:i,backX:l,lineX:s,backY:u,lineY:h,event:o}),r.table.scenegraph.updateNextFrame()}else r.updateCursor("not-allowed"),r.columnMove.colTarget=r.columnMove.colSource,r.columnMove.rowTarget=r.columnMove.rowSource}function TQt(n){var t,e;let i=!1;if("canMoveHeaderPosition"in n.table.internalProps.layoutMap&&n.columnMove.moving&&n.columnMove.colSource>=0&&n.columnMove.rowSource>=0&&n.columnMove.colTarget>=0&&n.columnMove.rowTarget>=0&&((t=n.table.options.customConfig)===null||t===void 0?void 0:t.notUpdateInColumnRowMove)!==!0){const r=n.table.getCellRange(n.columnMove.colSource,n.columnMove.rowSource),o=n.table.getCellRange(n.columnMove.colTarget,n.columnMove.rowTarget),a=n.table._moveHeaderPosition({col:n.columnMove.colSource,row:n.columnMove.rowSource},{col:n.columnMove.colTarget,row:n.columnMove.rowTarget});if(!a||a.targetIndex===a.sourceIndex)return n.updateCursor(),n.columnMove.moving=!1,delete n.columnMove.colSource,delete n.columnMove.rowSource,delete n.columnMove.colTarget,delete n.columnMove.rowTarget,n.table.scenegraph.component.hideMoveCol(),n.table.scenegraph.updateNextFrame(),!1;{n.table.internalProps.useOneRowHeightFillAll=!1,n.table.internalProps.layoutMap.clearCellRangeMap();const s=n.table.getCellRange(n.columnMove.colSource,n.columnMove.rowSource),l=n.table.getCellRange(n.columnMove.colTarget,n.columnMove.rowTarget),h=Math.min(s.start.col,l.start.col,r.start.col,o.start.col),u=Math.max(s.end.col,l.end.col,r.end.col,o.end.col),d=Math.min(s.start.row,l.start.row,r.start.row,o.start.row);let c=Math.max(s.end.row,l.end.row,r.end.row,o.end.row);a.moveType==="row"&&n.table.internalProps.layoutMap.rowHierarchyType==="tree"&&(c=a.targetIndex>a.sourceIndex?c+a.targetSize-1:c+a.sourceSize-1),!n.table.transpose&&n.table.internalProps.layoutMap.isSeriesNumberInBody(n.columnMove.colSource,n.columnMove.rowSource)&&(n.table.changeRecordOrder(a.sourceIndex,a.targetIndex),n.changeCheckboxAndRadioOrder(a.sourceIndex,a.targetIndex)),a.moveType==="column"?YX(h,u,0,-1,n.table):YX(0,-1,d,c,n.table),n.table.clearCellStyleCache(),n.table.internalProps.layoutMap.isSeriesNumberInBody(n.columnMove.colSource,n.columnMove.rowSource)?n.table.scenegraph.updateHeaderPosition(n.table.scenegraph.proxy.colStart,n.table.scenegraph.proxy.colEnd,n.table.scenegraph.proxy.rowStart,n.table.scenegraph.proxy.rowEnd,a.moveType):a.moveType==="column"?n.table.scenegraph.updateHeaderPosition(h,u,0,-1,a.moveType):n.table.scenegraph.updateHeaderPosition(0,-1,d,c,a.moveType),n.table.internalProps.frozenColDragHeaderMode==="adjustFrozenCount"&&n.table.isListTable()&&(n.table.isLeftFrozenColumn(n.columnMove.colTarget)&&!n.table.isLeftFrozenColumn(n.columnMove.colSource)?n.table.frozenColCount+=s.end.col-s.start.col+1:n.table.isLeftFrozenColumn(n.columnMove.colSource)&&!n.table.isLeftFrozenColumn(n.columnMove.colTarget)&&(n.table.frozenColCount-=s.end.col-s.start.col+1),n.table.isRightFrozenColumn(n.columnMove.colTarget)&&!n.table.isRightFrozenColumn(n.columnMove.colSource)?n.table.rightFrozenColCount+=s.end.col-s.start.col+1:n.table.isRightFrozenColumn(n.columnMove.colSource)&&!n.table.isRightFrozenColumn(n.columnMove.colTarget)&&(n.table.rightFrozenColCount-=s.end.col-s.start.col+1)),i=!0}}return n.columnMove.moving=!1,setTimeout((()=>{delete n.columnMove.colSource,delete n.columnMove.rowSource,delete n.columnMove.colTarget,delete n.columnMove.rowTarget}),0),n.table.scenegraph.component.hideMoveCol(),n.columnResize.col<n.table.frozenColCount&&!n.table.isPivotTable()&&!n.table.transpose?(n.table.scenegraph.component.setFrozenColumnShadow(n.table.frozenColCount-1,n.columnResize.isRightFrozen),n.table.scenegraph.component.setRightFrozenColumnShadow(n.table.colCount-n.table.rightFrozenColCount)):n.columnResize.col>=n.table.colCount-n.table.rightFrozenColCount&&!n.table.isPivotTable()&&!n.table.transpose?n.table.scenegraph.component.setRightFrozenColumnShadow(n.table.colCount-n.table.rightFrozenColCount):n.table.options.frozenColCount?n.table.scenegraph.component.setFrozenColumnShadow(n.table.frozenColCount-1):n.table.options.rightFrozenColCount&&n.table.scenegraph.component.setRightFrozenColumnShadow(n.table.colCount-n.table.rightFrozenColCount),n.table.scenegraph.updateNextFrame(),((e=n.table.options.customConfig)===null||e===void 0?void 0:e.notUpdateInColumnRowMove)===!0||i}function YX(n,t,e,i,r){for(let o=n;o<=t;o++)r._clearColRangeWidthsMap(o);for(let o=e;o<=i;o++)r._clearRowRangeHeightsMap(o)}function Ry(n){var t;if(!n)return;const e=!((t=n.role)===null||t===void 0)&&t.startsWith("icon")?n:n.type==="richtext"?n._currentHoverIcon:void 0;return e?n.type==="richtext"?{icon:e,position:{left:n.globalAABBBounds.x1+e.globalAABBBounds.x1,right:n.globalAABBBounds.x1+e.globalAABBBounds.x2,top:n.globalAABBBounds.y1+e.globalAABBBounds.y1,bottom:n.globalAABBBounds.y1+e.globalAABBBounds.y2,width:e.globalAABBBounds.x2-e.globalAABBBounds.x1,height:e.globalAABBBounds.y2-e.globalAABBBounds.y1},type:"richtext-icon"}:{icon:e,position:{left:e.globalAABBBounds.x1,right:e.globalAABBBounds.x2,top:e.globalAABBBounds.y1,bottom:e.globalAABBBounds.y2,width:e.globalAABBBounds.x2-e.globalAABBBounds.x1,height:e.globalAABBBounds.y2-e.globalAABBBounds.y1},type:"icon"}:void 0}function MQt(n,t,e){n=Math.ceil(n),t=Math.ceil(t);let i=e.columnResize.isRightFrozen?e.columnResize.x-n:n-e.columnResize.x;if(Math.abs(i)<1)return;const r=e.table.getColWidth(e.columnResize.col);let o=r;o+=i;const a=e.table.getMinColWidth(e.columnResize.col),s=e.table.getMaxColWidth(e.columnResize.col);if(o<a||o>s){if(r===a||r===s)return;i=r-a>s-r?s-r:a-r}let l=e.table.getColWidth(e.columnResize.col)+i;if(l<e.table.internalProps.limitMinWidth&&(l=e.table.internalProps.limitMinWidth,i=l-e.table.getColWidth(e.columnResize.col)),e.table.widthMode==="adaptive"&&e.columnResize.col<e.table.colCount-1){const h=e.table.getColWidth(e.columnResize.col+1),u=e.table.getMinColWidth(e.columnResize.col+1),d=e.table.getMaxColWidth(e.columnResize.col+1);let c=h;if(c-=i,c<u||c>d){if(h===u||h===d)return;i=h-u>d-h?d-h:u-h}c-i<e.table.internalProps.limitMinWidth&&(i=c-e.table.internalProps.limitMinWidth)}i=Math.ceil(i),e.columnResize.col<e.table.rowHeaderLevelCount||e.columnResize.col>=e.table.colCount-e.table.rightFrozenColCount?XX(i,e):e.table.internalProps.columnResizeType==="indicator"?PQt(i,e):e.table.internalProps.columnResizeType==="indicatorGroup"?BQt(i,e):e.table.internalProps.columnResizeType==="all"?RQt(i,e):XX(i,e),e.columnResize.x=n,e.table.scenegraph.component.updateResizeCol(e.columnResize.col,t,e.columnResize.isRightFrozen),e.table._updateSize(),e.columnResize.col<e.table.frozenColCount&&!e.table.isPivotTable()&&!e.table.transpose?e.table.scenegraph.component.setFrozenColumnShadow(e.table.frozenColCount-1,e.columnResize.isRightFrozen):e.table.options.frozenColCount&&e.table.scenegraph.component.setFrozenColumnShadow(e.table.frozenColCount-1),(e.columnResize.col>=e.table.colCount-e.table.rightFrozenColCount&&!e.table.isPivotTable()&&!e.table.transpose||e.table.options.rightFrozenColCount)&&e.table.scenegraph.component.setRightFrozenColumnShadow(e.table.colCount-e.table.rightFrozenColCount),e.table.scenegraph.updateNextFrame()}function XX(n,t){t.table.widthMode==="adaptive"&&t.columnResize.col<t.table.colCount-1?(t.table.scenegraph.updateColWidth(t.columnResize.col,n),t.table.scenegraph.updateColWidth(t.columnResize.col+1,-n),t.table.internalProps._widthResizedColMap.add(t.columnResize.col),t.table.internalProps._widthResizedColMap.add(t.columnResize.col+1)):(t.table.scenegraph.updateColWidth(t.columnResize.col,n),t.table.internalProps._widthResizedColMap.add(t.columnResize.col))}function RQt(n,t){const e=t.table.internalProps.layoutMap;for(let i=t.table.frozenColCount;i<t.table.colCount-t.table.rightFrozenColCount;i++){if(!(t.table.internalProps.transpose||t.table.isPivotTable()&&!e.indicatorsAsCol)){const r=e.getBody(i,t.table.columnHeaderLevelCount);if(r?.disableColumnResize)continue}t.table.scenegraph.updateColWidth(i,n),t.table.internalProps._widthResizedColMap.add(i)}}function PQt(n,t){const e=t.table.internalProps.layoutMap;let i,r,o;if(e.indicatorsAsCol)i=e.getIndicatorKey(t.columnResize.col,t.table.columnHeaderLevelCount);else{const a=e.getCellHeaderPaths(t.columnResize.col,t.table.columnHeaderLevelCount-1),s=a.colHeaderPaths[a.colHeaderPaths.length-1];r=s.dimensionKey,o=s.value}for(let a=t.table.rowHeaderLevelCount;a<t.table.colCount-t.table.rightFrozenColCount;a++){const s=e.getIndicatorKey(a,t.table.columnHeaderLevelCount);if(e.indicatorsAsCol&&s===i)t.table.scenegraph.updateColWidth(a,n),t.table.internalProps._widthResizedColMap.add(a);else if(!e.indicatorsAsCol){const l=e.getCellHeaderPaths(a,t.table.columnHeaderLevelCount-1),h=l?.colHeaderPaths[l.colHeaderPaths.length-1];h&&r===h.dimensionKey&&o===h.value&&(t.table.scenegraph.updateColWidth(a,n),t.table.internalProps._widthResizedColMap.add(a))}}}function BQt(n,t){const e=t.table.internalProps.layoutMap,i=e.getCellHeaderPaths(t.columnResize.col,t.table.columnHeaderLevelCount),r=e.getHeadNodeByRowOrColDimensions(i.colHeaderPaths.slice(0,i.colHeaderPaths.length-1)),o=r.startInTotal+t.table.frozenColCount,a=r.startInTotal+t.table.frozenColCount+r.size-1,s=t.table.getColsWidth(o,a),l=n;for(let h=o;h<=a;h++){if(!(t.table.internalProps.transpose||t.table.isPivotTable()&&!e.indicatorsAsCol)){const d=e.getBody(h,t.table.columnHeaderLevelCount);if(d?.disableColumnResize)continue}let u=t.table.getColWidth(h)/s*l;u>0&&u<.5?u=.5:u<0&&u>=-.5&&(u=-.5),t.table.scenegraph.updateColWidth(h,u),t.table.internalProps._widthResizedColMap.add(h)}}function kQt(n,t,e,i,r,o){const a=o.table.getRecordShowIndexByCell(n,t);if(a>=0){const s=o.table.dataSource.getIndexKey(a);i==="column"?yt(r)?(o.radioState[e]={},o.radioState[e][s]=r):o.radioState[e]=s:(o.radioState[e]||(o.radioState[e]={}),yt(r)?o.radioState[e][s]=r:o.radioState[e][s]=!0)}}function LQt(n,t,e){var i;const r=e.getBodyColumnDefine(n,t),o=r?.field,a=e.getCellType(n,t);if(Y(o)&&a==="radio"){const s=e.dataSource.getIndexKey(e.getRecordShowIndexByCell(n,t)),l=(i=e.stateManager.radioState)===null||i===void 0?void 0:i[o];if(yt(l)){if(l===s)return!0}else if(Bn(l)){const h=l[s];if(yt(h))return h}}return!1}function EQt(n,t,e,i,r,o,a){var s,l,h,u,d;const c=a.table.getRecordShowIndexByCell(n,t);if(c>=0){const f=a.table.dataSource.getIndexKey(c);if(i==="column"){if(!Y(a.radioState[e])&&o)return yt(r)?(a.radioState[e]={},a.radioState[e][f]=r):a.radioState[e]=f,!0;if(yt(a.radioState[e])&&!yt(r))return a.radioState[e]===f;if(yt(a.radioState[e])&&yt(r)||Bn(a.radioState[e])&&!yt(r))return!1;if(Bn(a.radioState[e])&&yt(r))return a.radioState[e][f]===r}else if(i==="cell"){if(!Y(a.radioState[e])&&o)return a.radioState[e]={},yt(r)?a.radioState[e][f]=r:a.radioState[e][f]=!0,!0;if(!Y((s=a.radioState[e])===null||s===void 0?void 0:s[f])&&o)return yt(r)?a.radioState[e][f]=r:a.radioState[e][f]=!0,!0;if(fl((l=a.radioState[e])===null||l===void 0?void 0:l[f])&&!yt(r))return a.radioState[e][f];if(fl((h=a.radioState[e])===null||h===void 0?void 0:h[f])&&yt(r)||yt((u=a.radioState[e])===null||u===void 0?void 0:u[f])&&!yt(r))return!1;if(yt((d=a.radioState[e])===null||d===void 0?void 0:d[f])&&yt(r))return a.radioState[e][f]===r}}return o}function DQt(n,t,e,i){const r=i.scenegraph.getCell(n,t);if(r)if(yt(e)){const o=r.getChildAt(e);o?._handlePointerUp()}else{const o=r.getChildByName("radio");o?._handlePointerUp()}}function IQt(n,t,e){const{radioState:i,table:r}=e;if(r.internalProps.transpose?(n=r.getRecordShowIndexByCell(n,0),t=r.getRecordShowIndexByCell(t,0)):(n=r.getRecordShowIndexByCell(0,n),t=r.getRecordShowIndexByCell(0,t)),n>t){const o=i[n];for(let a=n;a>t;a--)i[a]=i[a-1];i[t]=o}else if(n<t){const o=i[n];for(let a=n;a<t;a++)i[a]=i[a+1];i[t]=o}}function OQt(n,t,e,i,r){const o=r.table.getCellRange(n,t);if(o.start.col!==o.end.col||o.start.row!==o.end.row)for(let a=o.start.col;a<=o.end.col;a++)for(let s=o.start.row;s<=o.end.row;s++)qX(a,s,e,i,r);else qX(n,t,e,i,r)}function qX(n,t,e,i,r){const o=r.table.getRecordShowIndexByCell(n,t);if(o>=0){const a=r.table.dataSource.getIndexKey(o).toString();r.checkedState.get(a)?r.checkedState.get(a)[e]=i:r.checkedState.set(a,{[e]:i})}}function HQt(n,t,e){var i;e.headerCheckedState[n]=t,e.table.internalProps.enableCheckboxCascade&&((i=e.checkedState)===null||i===void 0||i.forEach((r=>{r[n]=t})))}function zQt(n,t,e,i,r){var o,a;if(r.table.isHeader(n,t)){if(Y(r.headerCheckedState[e]))return r.headerCheckedState[e];if(typeof i=="function")return;if(Y(i))r.headerCheckedState[e]=i;else if(((o=r.checkedState)===null||o===void 0?void 0:o.size)>0)return r.updateHeaderCheckedState(e,n,t);return r.headerCheckedState[e]}const s=r.table.getRecordShowIndexByCell(n,t);if(s>=0){const l=r.table.dataSource.getIndexKey(s).toString();if(Y((a=r.checkedState.get(l))===null||a===void 0?void 0:a[e]))return r.checkedState.get(l)[e];if(r.checkedState.get(l))r.checkedState.get(l)[e]=i;else if(r.table.internalProps.enableCheckboxCascade&&l.includes(",")){const h=l.split(",").slice(0,-1).join(",");r.checkedState.has(h)&&r.checkedState.get(h)[e]===!0?r.checkedState.set(l,{[e]:!0}):r.checkedState.set(l,{[e]:i})}else r.checkedState.set(l,{[e]:i})}return i}function FQt(n,t){t.checkedState.clear(),t.headerCheckedState={},t.radioState={};let e=!1;if(t._checkboxCellTypeFields=[],t._headerCheckFuncs={},t.table.internalProps.layoutMap.headerObjects.forEach(((i,r)=>{if(i.headerType==="checkbox"){const o=i.define.checked;o==null||typeof o=="function"?(e=!0,typeof o=="function"&&(t._headerCheckFuncs[i.field]=o)):t.headerCheckedState[i.field]=o,i.define.cellType!=="checkbox"&&!ra(i.define.cellType)||i.fieldFormat||t._checkboxCellTypeFields.push(i.field)}})),t.table.leftRowSeriesNumberCount===1)t.headerCheckedState._vtable_rowSeries_number=!1,t._checkboxCellTypeFields.push("_vtable_rowSeries_number"),e=!0;else if(t.table.leftRowSeriesNumberCount>1){for(let i=0;i<t.table.leftRowSeriesNumberCount;i++)t.headerCheckedState[`_vtable_rowSeries_number_${i}`]=!1,t._checkboxCellTypeFields.push(`_vtable_rowSeries_number_${i}`);e=!0}e&&jQt(n,t)}function NQt(n,t,e,i){let r=!0,o=!0,a=!1;return t.checkedState.forEach(((s,l)=>{var h;l=l.includes(",")?l.split(",").map((f=>Number(f))):Number(l);const u=t.table.getTableIndexByRecordIndex(l),d=t.table.transpose?t.table.getCustomMerge(u,i):t.table.getCustomMerge(e,u),c=(h=t.table.dataSource)===null||h===void 0?void 0:h.get(l);d||!t.table.internalProps.enableCheckboxCascade&&c?.vtableMerge||(s?.[n]!==!0?r=!1:(o=!1,a=!0))})),r?(t.headerCheckedState[n]=!0,r):o?(t.headerCheckedState[n]=!1,!1):!!a&&(t.headerCheckedState[n]="indeterminate","indeterminate")}function WQt(n,t){for(let e=t.checkedState.size;e<n.length;e++){const i=n[e];t._checkboxCellTypeFields.forEach((r=>{const o=i[r];let a;Bn(o)?a=o.checked:typeof o=="boolean"&&(a=o);const s=e.toString();t.checkedState.get(s)||t.checkedState.set(s,{}),t.checkedState.get(s)[r]=a}))}}function VQt(n,t,e,i){var r,o;const a=i.scenegraph.getCell(n,t),s=a?.getChildByName("checkbox")||((o=(r=a?.getChildByName("checkbox-content"))===null||r===void 0?void 0:r._checkboxGroup)===null||o===void 0?void 0:o.getChildByName("checkbox"));if(!s){const u=i.getHeaderField(n,t);if(i.isHeader(n,t))i.stateManager.setHeaderCheckedState(u,e),i.getCellType(n,t)==="checkbox"&&i.scenegraph.updateCheckboxCellState(n,t,e);else if(i.stateManager.setCheckedState(n,t,u,e),i.getCellType(n,t)==="checkbox"){const d=i.stateManager.headerCheckedState[u],c=i.stateManager.updateHeaderCheckedState(u,n,t);d!==c&&i.scenegraph.updateHeaderCheckboxCellState(n,t,c)}return}const{checked:l,indeterminate:h}=s.attribute;h?(e||s._handlePointerUp(),s._handlePointerUp()):l?e||s._handlePointerUp():e&&s._handlePointerUp()}function Uw(n,t,e,i){var r,o;const a=i.scenegraph.getCell(n,t),s=a?.getChildByName("checkbox")||((o=(r=a?.getChildByName("checkbox-content"))===null||r===void 0?void 0:r._checkboxGroup)===null||o===void 0?void 0:o.getChildByName("checkbox"));s&&(e==="indeterminate"?(s.setAttribute("indeterminate",!0),s.setAttribute("checked",void 0)):(s.setAttribute("indeterminate",void 0),s.setAttribute("checked",e)))}function GQt(n,t,e){const{checkedState:i,table:r}=e;let o,a;if(r.internalProps.transpose?(n=r.getRecordShowIndexByCell(n,0),t=r.getRecordShowIndexByCell(t,0)):(o=r.isPivotTable()?void 0:r.getRecordIndexByCell(0,n),a=r.isPivotTable()?void 0:r.getRecordIndexByCell(0,t)),yt(o)&&yt(a)){if((n=o)>(t=a)){const s=i.get(n.toString());for(let l=n;l>t;l--)i.set(l.toString(),i.get((l-1).toString()));i.set(t.toString(),s)}else if(n<t){const s=i.get(n.toString());for(let l=n;l<t;l++)i.set(l.toString(),i.get((l+1).toString()));i.set(t.toString(),s)}}else if(Rt(o)&&Rt(a)){if((n=o[o.length-1])>(t=a[a.length-1])){const s=i.get(o.toString());for(let l=n;l>t;l--){const h=[...o];h[h.length-1]=l;const u=[...o];u[u.length-1]=l-1,i.set(h.toString(),i.get(u.toString()))}i.set(a.toString(),s)}else if(n<t){const s=i.get(o.toString());for(let l=n;l<t;l++){const h=[...o];h[h.length-1]=l;const u=[...o];u[u.length-1]=l+1,i.set(h.toString(),i.get(u.toString()))}i.set(a.toString(),s)}}}function $Qt(n){const t=[],e=n.dataSource,i=e.dataConfig.groupByRules.length+1;return e.currentIndexedData.forEach(((r,o)=>{if(Rt(r)&&r.length===i){const a=e.getOriginRecordIndexForGroup(r);t[a]=n.stateManager.checkedState.get(r.toString())}})),t}function jQt(n,t){const e=t.table,i=e.isPivotTable()?0:e.internalProps.transpose?e.rowHeaderLevelCount:e.columnHeaderLevelCount,r=e.isPivotTable()?Rt(n)?n.length:0:e.internalProps.transpose?e.colCount:e.rowCount;for(let o=0;o+i<r;o++){const a=e.isPivotTable()?n[o]:e.dataSource.get(o);t._checkboxCellTypeFields.forEach((s=>{const l=a&&a[s];let h;if(Bn(l)?h=l.checked:typeof l=="boolean"&&(h=l),h==null){const d=t._headerCheckFuncs[s];if(d){const c=t.table.getCellAddrByFieldRecord(s,o);h=Je(d,{col:c.col,row:c.row,table:t.table,context:null,value:l})}}const u=e.isPivotTable()?o.toString():t.table.dataSource.getIndexKey(o).toString();t.checkedState.get(u)||t.checkedState.set(u,{}),t.checkedState.get(u)[s]=h}))}}function UQt(n,t,e){n=Math.ceil(n),t=Math.ceil(t);let i=e.rowResize.isBottomFrozen?e.rowResize.y-t:t-e.rowResize.y;if(Math.abs(i)<1)return;e.table.getRowHeight(e.rowResize.row);let r=e.table.getRowHeight(e.rowResize.row)+i;if(r<e.table.internalProps.limitMinHeight&&(r=e.table.internalProps.limitMinHeight,i=r-e.table.getRowHeight(e.rowResize.row)),e.table.heightMode==="adaptive"&&e.rowResize.row<e.table.rowCount-1){let o=e.table.getRowHeight(e.rowResize.row+1);o-=i,o-i<e.table.internalProps.limitMinHeight&&(i=o-e.table.internalProps.limitMinHeight)}i=Math.ceil(i),e.rowResize.row<e.table.columnHeaderLevelCount||e.rowResize.row>=e.table.rowCount-e.table.bottomFrozenRowCount?KX(i,e):e.table.internalProps.rowResizeType==="indicator"?XQt(i,e):e.table.internalProps.rowResizeType==="indicatorGroup"?qQt(i,e):e.table.internalProps.rowResizeType==="all"?YQt(i,e):KX(i,e),e.rowResize.y=t,e.table.scenegraph.component.updateResizeRow(e.rowResize.row,n,e.rowResize.isBottomFrozen),e.table._updateSize(),e.table.scenegraph.updateNextFrame()}function KX(n,t){t.table.heightMode==="adaptive"&&t.rowResize.row<t.table.rowCount-1?(t.table.scenegraph.updateRowHeight(t.rowResize.row,n),t.table.scenegraph.updateRowHeight(t.rowResize.row+1,-n),t.table.internalProps._heightResizedRowMap.add(t.rowResize.row),t.table.internalProps._heightResizedRowMap.add(t.rowResize.row+1)):(t.table.scenegraph.updateRowHeight(t.rowResize.row,n),t.table.internalProps._heightResizedRowMap.add(t.rowResize.row))}function YQt(n,t){for(let e=t.table.frozenRowCount;e<t.table.rowCount-t.table.bottomFrozenRowCount;e++)t.table.scenegraph.updateRowHeight(e,n),t.table.internalProps._heightResizedRowMap.add(e)}function XQt(n,t){var e,i;const r=t.table.internalProps.layoutMap;let o,a,s;if(r.indicatorsAsCol){const l=r.getCellHeaderPaths(t.table.rowHeaderLevelCount-1,t.rowResize.row),h=(e=l.rowHeaderPaths)===null||e===void 0?void 0:e[l.rowHeaderPaths.length-1];a=h?.dimensionKey,s=h?.value}else o=r.getIndicatorKey(t.table.rowHeaderLevelCount,t.rowResize.row);for(let l=t.table.columnHeaderLevelCount;l<t.table.rowCount-t.table.bottomFrozenRowCount;l++){const h=r.getIndicatorKey(t.table.rowHeaderLevelCount,l);if(r.indicatorsAsCol||h!==o){if(r.indicatorsAsCol){const u=r.getCellHeaderPaths(t.table.rowHeaderLevelCount-1,l),d=(i=u?.rowHeaderPaths)===null||i===void 0?void 0:i[u.rowHeaderPaths.length-1];d&&a===d.dimensionKey&&s===d.value&&(t.table.scenegraph.updateRowHeight(l,n),t.table.internalProps._heightResizedRowMap.add(l))}}else t.table.scenegraph.updateRowHeight(l,n),t.table.internalProps._heightResizedRowMap.add(l)}}function qQt(n,t){const e=t.table.internalProps.layoutMap,i=e.getCellHeaderPaths(t.table.rowHeaderLevelCount,t.rowResize.row),r=e.getHeadNodeByRowOrColDimensions(i.rowHeaderPaths.slice(0,i.rowHeaderPaths.length-1)),o=r.startInTotal+t.table.frozenRowCount,a=r.startInTotal+t.table.frozenRowCount+r.size-1,s=t.table.getRowsHeight(o,a),l=n;for(let h=o;h<=a;h++){let u=t.table.getRowHeight(h)/s*l;u>0&&u<.5?u=.5:u<0&&u>=-.5&&(u=-.51),t.table.scenegraph.updateRowHeight(h,u),t.table.internalProps._heightResizedRowMap.add(h)}}function KQt(n,t,e){const i=n.table,r=t.start.col,o=t.start.row,a=t.end.col,s=t.end.row,l=(t.skipBodyMerge,Math.max(Math.min(a,r),0)),h=Math.max(Math.min(s,o),0),u=Math.min(Math.max(a,r),i.colCount-1),d=Math.min(Math.max(s,o),i.rowCount-1),{needRowHeader:c,needRightRowHeader:f,needColumnHeader:g,needBottomColumnHeader:p,needBody:v,needCornerHeader:m,needRightTopCornerHeader:y,needLeftBottomCornerHeader:b,needRightBottomCornerHeader:_}=Klt(l,h,u,d,i);if(m&&th(n,l,h,Math.min(u,i.frozenColCount-1),Math.min(d,i.frozenRowCount-1),"cornerHeader",`${l}${h}${u}${d}`,[!0,!g,!c,!0],e),y&&th(n,Math.max(l,i.colCount-i.rightFrozenColCount),h,u,Math.min(d,i.frozenRowCount-1),"rightTopCorner",`${l}${h}${u}${d}`,[!0,!0,!f,!g],e),b){const w=Math.min(u,i.frozenColCount-1);th(n,l,Math.max(h,i.rowCount-i.bottomFrozenRowCount),w,d,"leftBottomCorner",`${l}${h}${u}${d}`,[!c,!p,!0,!0],e)}if(_&&th(n,Math.max(l,i.colCount-i.rightFrozenColCount),Math.max(h,i.rowCount-i.bottomFrozenRowCount),u,d,"rightBottomCorner",`${l}${h}${u}${d}`,[!f,!0,!0,!p],e),g&&th(n,Math.max(l,i.frozenColCount),h,Math.min(u,i.colCount-i.rightFrozenColCount-1),Math.min(d,i.frozenRowCount-1),"columnHeader",`${l}${h}${u}${d}`,[!0,!y,!v,!m],e),p){const w=Math.max(l,i.frozenColCount),C=Math.min(u,i.colCount-i.rightFrozenColCount-1);th(n,w,Math.max(h,i.rowCount-i.bottomFrozenRowCount),C,d,"bottomFrozen",`${l}${h}${u}${d}`,[!v,!_,!0,!b],e)}if(c){const w=Math.max(h,i.frozenRowCount),C=Math.min(d,i.rowCount-i.bottomFrozenRowCount-1);th(n,l,w,Math.min(u,i.frozenColCount-1),C,"rowHeader",`${l}${h}${u}${d}`,[!m,!v,!b,!0],e)}if(f){const w=Math.max(h,i.frozenRowCount),C=Math.min(d,i.rowCount-i.bottomFrozenRowCount-1);th(n,Math.max(l,i.colCount-i.rightFrozenColCount),w,u,C,"rightFrozen",`${l}${h}${u}${d}`,[!y,!0,!_,!v],e)}v&&th(n,Math.max(l,i.frozenColCount),Math.max(h,i.frozenRowCount),Math.min(u,i.colCount-i.rightFrozenColCount-1),Math.min(d,i.rowCount-i.bottomFrozenRowCount-1),"body",`${l}${h}${u}${d}`,[!g,!f,!p,!c],e)}function th(n,t,e,i,r,o,a,s,l){var h,u,d,c;const f=Math.min(t,i),g=Math.min(e,r),p=Math.max(t,i),v=Math.max(e,r),m=n.highPerformanceGetCell(f,g).globalAABBBounds,y=ei({pickable:!1,fill:(h=l.cellBgColor)!==null&&h!==void 0&&h,lineWidth:(u=l.cellBorderLineWidth)!==null&&u!==void 0?u:0,lineDash:(d=l.cellBorderLineDash)!==null&&d!==void 0?d:[],stroke:s.map((b=>!!b&&l.cellBorderColor)),x:m.x1-n.tableGroup.attribute.x,y:m.y1-n.tableGroup.attribute.y,width:0,height:0,visible:!0,cornerRadius:ght(o,(c=n.table.theme.frameStyle)===null||c===void 0?void 0:c.cornerRadius,t,e,i,r,n.table)});n.customSelectedRangeComponents.set(`${f}-${g}-${p}-${v}-${a}`,{rect:y,role:o}),n.tableGroup.insertAfter(y,o==="body"?n.bodyGroup:o==="columnHeader"?n.colHeaderGroup:o==="rowHeader"?n.rowHeaderGroup:o==="cornerHeader"?n.cornerHeaderGroup:o==="rightTopCorner"?n.rightTopCornerGroup:o==="rightFrozen"?n.rightFrozenGroup:o==="leftBottomCorner"?n.leftBottomCornerGroup:o==="bottomFrozen"?n.bottomFrozenGroup:n.rightBottomCornerGroup)}function ZQt(n){const{customSelectedRangeComponents:t}=n.table.scenegraph;t.forEach(((e,i)=>{e.rect.delete()})),t.clear(),n.select.customSelectRanges=[]}function JQt(n,t){n.forEach((e=>{KQt(t.table.scenegraph,e.range,e.style)})),t.select.customSelectRanges=n,fht(t.table.scenegraph),t.table.scenegraph.updateNextFrame()}let QQt=class{constructor(t){this.fastScrolling=!1,this.checkedState=new Map,this.headerCheckedState={},this._checkboxCellTypeFields=[],this._headerCheckFuncs={},this.radioState={},this.resetInteractionState=Slt((e=>{this.updateInteractionState(e??Xt.default)}),100),this.table=t,this.initState(),this.updateVerticalScrollBar=this.updateVerticalScrollBar.bind(this),this.updateHorizontalScrollBar=this.updateHorizontalScrollBar.bind(this)}initState(){this._initState(),this.setHoverState(),this.setSelectState(),this.setFrozenState()}updateOptionSetState(){this._updateOptionSetState(),this.setHoverState(),this.setSelectState(),this.setFrozenState()}_updateOptionSetState(){this.interactionState=Xt.default,this.hoverIcon={col:-1,row:-1,icon:null},this.columnResize={col:-1,x:0,resizing:!1},this.rowResize={row:-1,y:0,resizing:!1},this.columnMove={colSource:-1,colTarget:-1,rowSource:-1,rowTarget:-1,rowSourceSize:0,rowTargetSize:0,x:0,y:0,moving:!1},this.menu={x:-1,y:-1,isShow:!1,itemList:[],bounds:new gd,highlightIndex:-1,dropDownMenuHighlight:[]},this.sort=[{col:-1,row:-1,order:"normal"}],this.frozen={col:-1,row:-1},this.tablePosition={absoluteX:0,absoluteY:0},this.drill={col:-1,row:-1},this.sparkLine={col:-1,row:-1}}_initState(){this.interactionState=Xt.default,this.select={highlightScope:Ee.single,ranges:[],cellPos:{col:-1,row:-1},selecting:!1},this.fillHandle={isFilling:!1,startX:void 0,startY:void 0},this.hover={highlightScope:Ee.single,cellPos:{col:-1,row:-1}},this.hoverIcon={col:-1,row:-1,icon:null},this.columnResize={col:-1,x:0,resizing:!1},this.rowResize={row:-1,y:0,resizing:!1},this.columnMove={colSource:-1,colTarget:-1,rowSource:-1,rowTarget:-1,rowSourceSize:0,rowTargetSize:0,x:0,y:0,moving:!1},this.menu={x:-1,y:-1,isShow:!1,itemList:[],bounds:new gd,highlightIndex:-1,dropDownMenuHighlight:[]},this.sort=[{col:-1,row:-1,order:"normal"}],this.frozen={col:-1,row:-1},this.scroll={horizontalBarPos:0,verticalBarPos:0},this.tablePosition={absoluteX:0,absoluteY:0},this.drill={col:-1,row:-1},this.sparkLine={col:-1,row:-1}}setHoverState(){var t;const{highlightMode:e,disableHover:i,disableHeaderHover:r}=(t=this.table.options.hover)!==null&&t!==void 0?t:{highlightMode:"cell"};i?this.hover.highlightScope=Ee.none:e==="cross"?this.hover.highlightScope=Ee.cross:e==="row"?this.hover.highlightScope=Ee.row:e==="column"?this.hover.highlightScope=Ee.column:e==="cell"&&(this.hover.highlightScope=Ee.single),this.hover.singleStyle=!i,this.hover.disableHeader=r,(this.hover.highlightScope===Ee.none||r)&&(this.hover.cellPosContainHeader={col:-1,row:-1})}setSelectState(){var t,e,i,r,o;const{headerSelectMode:a,disableSelect:s,disableHeaderSelect:l,highlightMode:h,highlightInRange:u}=Object.assign({},{headerSelectMode:"inline",disableSelect:!1,disableHeaderSelect:!1,highlightMode:"cell",highlightInRange:!1},this.table.options.select),d=!((t=this.table.options.select)===null||t===void 0)&&t.cornerHeaderSelectMode?(e=this.table.options.select)===null||e===void 0?void 0:e.cornerHeaderSelectMode:((i=this.table.options.select)===null||i===void 0?void 0:i.headerSelectMode)==="body"?(r=this.table.options.select)===null||r===void 0?void 0:r.headerSelectMode:"all";this.select.highlightScope=s===!0?Ee.none:h==="cross"?Ee.cross:h==="row"?Ee.row:h==="column"?Ee.column:Ee.single,this.select.singleStyle=!s,this.select.disableHeader=l,this.select.headerSelectMode=a,this.select.cornerHeaderSelectMode=d,this.select.highlightInRange=u,this.select.disableCtrlMultiSelect=((o=this.table.options.keyboardOptions)===null||o===void 0?void 0:o.ctrlMultiSelect)===!1}isSelected(t,e){let i=!1;return this.select.ranges.forEach((r=>{$a(r,t,e)&&(i=!0)})),i}setSortState(t){const e=this,i=(t=!t||Array.isArray(t)?t:[t])&&t.reduce(((r,o)=>{var a,s,l;const h=(a=(function(u){const d=[];return(function c(f,g=0){f.forEach((p=>{var v;const m=p.startInTotal?(v=p.startInTotal+e.table.internalProps.layoutMap.leftRowSeriesNumberColumnCount)!==null&&v!==void 0?v:0:g;p.columns?c(p.columns,m):d.push(Object.assign(Object.assign({},p),{startIndex:m}))}))})(u),d})(this.table.internalProps.columns))===null||a===void 0?void 0:a.find((u=>u?.field===o?.field));return this.table.internalProps.transpose?r.push({field:o.field,order:o.order,row:(s=h?.startInTotal+this.table.internalProps.layoutMap.leftRowSeriesNumberColumnCount)!==null&&s!==void 0?s:0,col:h?.level}):r.push({field:o.field,order:o.order,col:(l=h?.startInTotal+this.table.internalProps.layoutMap.leftRowSeriesNumberColumnCount)!==null&&l!==void 0?l:0,row:h?.level}),r}),[]);this.sort=i||[]}setFrozenState(){this.frozen.col=this.table.frozenColCount-1}updateInteractionState(t){if(this.interactionState===t)return;t===Xt.scrolling&&(this.interactionStateBeforeScroll=this.interactionState);const e=this.interactionState;this.interactionState=t,e===Xt.scrolling&&Xt.default}updateHoverhighlightScope(t){this.hover.highlightScope!==t&&(this.hover.highlightScope=t)}updateHoverPos(t,e){fQt(this,t,e)}updateSelectPos(t,e,i=!1,r=!1,o=!1,a=!0,s=!1){e!==-1&&e!==-1&&(this.select.selecting=!0),t<0&&(t=-1),e<0&&(e=-1),t>this.table.colCount-1&&(t=this.table.colCount-1),e>this.table.rowCount-1&&(e=this.table.rowCount-1);const l=this.select.cellPos.col,h=this.select.cellPos.row;yQt(this,t,e,i,r,o,a,s),!this.table.hasListeners(at.SELECTED_CHANGED)||l===t&&h===e||this.table.fireListeners(at.SELECTED_CHANGED,{ranges:this.select.ranges,col:t,row:e})}checkCellRangeInSelect(t,e){return uQt(t,e,this.select.ranges,this.select.highlightScope)}updateHoverIcon(t,e,i,r){var o,a,s,l,h,u,d,c,f;if(!((o=this.residentHoverIcon)===null||o===void 0)&&o.icon&&i===((a=this.residentHoverIcon)===null||a===void 0?void 0:a.icon))return;const g=Ry(i);if(g)if(g.type==="richtext-icon"){const p=g.icon;if(this.hoverIcon.icon&&this.hoverIcon.icon!==((l=this.residentHoverIcon)===null||l===void 0?void 0:l.icon)&&(this.table.scenegraph.setIconNormalStyle(this.hoverIcon.icon,this.hoverIcon.col,this.hoverIcon.row),this.hoverIcon.col=-1,this.hoverIcon.col=-1,this.hoverIcon.icon=null,this.table.scenegraph.updateNextFrame()),p.attribute.tooltip){const v={content:p.attribute.tooltip.title,referencePosition:{rect:g.position,placement:p.attribute.tooltip.placement},style:Object.assign({},(h=this.table.internalProps.theme)===null||h===void 0?void 0:h.tooltipStyle,(u=p.tooltip)===null||u===void 0?void 0:u.style,(c=(d=p.attribute)===null||d===void 0?void 0:d.tooltip)===null||c===void 0?void 0:c.style),disappearDelay:p.attribute.tooltip.disappearDelay};this.table.internalProps.tooltipHandler.isBinded(v)||this.table.showTooltip(t,e,v)}}else{const p=g.icon;p!==this.hoverIcon.icon&&(this.hoverIcon.icon&&this.hoverIcon.icon!==((f=this.residentHoverIcon)===null||f===void 0?void 0:f.icon)&&this.table.scenegraph.setIconNormalStyle(this.hoverIcon.icon,this.hoverIcon.col,this.hoverIcon.row),this.hoverIcon.col=t,this.hoverIcon.row=e,this.hoverIcon.icon=p,this.table.scenegraph.setIconHoverStyle(p,t,e,r),this.table.scenegraph.updateNextFrame())}else this.hoverIcon.icon&&this.hoverIcon.icon!==((s=this.residentHoverIcon)===null||s===void 0?void 0:s.icon)&&(this.table.scenegraph.setIconNormalStyle(this.hoverIcon.icon,this.hoverIcon.col,this.hoverIcon.row),this.hoverIcon.col=-1,this.hoverIcon.col=-1,this.hoverIcon.icon=null,this.table.scenegraph.updateNextFrame())}isResizeCol(){return this.columnResize.resizing}isResizeRow(){return this.rowResize.resizing}isFillHandle(){return this.fillHandle.isFilling}isSelecting(){return this.select.selecting}endSelectCells(t=!0,e=!0){if(this.select.selecting){if(this.select.selecting=!1,this.select.ranges.length===0)return;const i=this.select.ranges[this.select.ranges.length-1];this.table.isSeriesNumber(this.select.cellPos.col,this.select.cellPos.row)||this.table.isHeader(this.select.cellPos.col,this.select.cellPos.row)||mZt(i,this.table);let r=!1;for(let s=0;s<this.select.ranges.length-1;s++){const l=this.select.ranges[s];if(l&&l.start.col===i.start.col&&l.start.row===i.start.row&&l.end.col===i.end.col&&l.end.row===i.end.row){r=!0;break}}r?(this.select.ranges.pop(),pht(this.table.scenegraph),this.table.scenegraph.selectingRangeComponents.clear()):bQt(this.table.scenegraph);const o=this.select.ranges[this.select.ranges.length-1].end.col,a=this.select.ranges[this.select.ranges.length-1].end.row;t&&this.table.fireListeners(at.SELECTED_CELL,{ranges:this.select.ranges,col:o,row:a})}else e&&this.select.ranges.length===0&&this.table.fireListeners(at.SELECTED_CLEAR,{})}endResizeCol(){setTimeout((()=>{this.columnResize.resizing=!1}),0),this.table.scenegraph.updateChartSizeForResizeColWidth(this.columnResize.col),this.checkFrozen(),this.table.scenegraph.component.hideResizeCol(),this.table.scenegraph.updateNextFrame()}startResizeCol(t,e,i,r){this.columnResize.resizing=!0,this.columnResize.col=t,this.columnResize.x=e,this.columnResize.isRightFrozen=r,this.table.scenegraph.component.showResizeCol(t,i,r),this.table.scenegraph.updateNextFrame()}updateResizeCol(t,e){MQt(t,e,this)}endResizeRow(){setTimeout((()=>{this.rowResize.resizing=!1}),0),this.table.scenegraph.updateChartSizeForResizeRowHeight(this.rowResize.row),this.table.scenegraph.component.hideResizeRow(),this.table.scenegraph.updateNextFrame()}startResizeRow(t,e,i,r){this.rowResize.resizing=!0,this.rowResize.row=t,this.rowResize.y=i,this.rowResize.isBottomFrozen=r,this.table.scenegraph.component.showResizeRow(t,e,r),this.table.scenegraph.updateNextFrame()}updateResizeRow(t,e){UQt(t,e,this)}startFillSelect(t,e){this.fillHandle.isFilling=!0,this.fillHandle.startX=t,this.fillHandle.startY=e;const i=this.select.ranges[this.select.ranges.length-1];this.fillHandle.beforeFillMinCol=Math.min(i.start.col,i.end.col),this.fillHandle.beforeFillMinRow=Math.min(i.start.row,i.end.row),this.fillHandle.beforeFillMaxCol=Math.max(i.start.col,i.end.col),this.fillHandle.beforeFillMaxRow=Math.max(i.start.row,i.end.row),this.table.fireListeners(at.MOUSEDOWN_FILL_HANDLE,{})}endFillSelect(){this.fillHandle.isFilling=!1,this.fillHandle.startX=void 0,this.fillHandle.startY=void 0,this.fillHandle.directionRow=void 0;const t=Math.min(this.select.ranges[0].start.col,this.select.ranges[0].end.col),e=Math.min(this.select.ranges[0].start.row,this.select.ranges[0].end.row),i=Math.max(this.select.ranges[0].start.col,this.select.ranges[0].end.col),r=Math.max(this.select.ranges[0].start.row,this.select.ranges[0].end.row);this.fillHandle.beforeFillMinCol===t&&this.fillHandle.beforeFillMinRow===e&&this.fillHandle.beforeFillMaxCol===i&&this.fillHandle.beforeFillMaxRow===r||this.table.eventManager.isDraging&&this.table.fireListeners(at.DRAG_FILL_HANDLE_END,{direction:this.fillHandle.direction}),this.fillHandle.beforeFillMaxCol=void 0,this.fillHandle.beforeFillMaxRow=void 0,this.fillHandle.beforeFillMinCol=void 0,this.fillHandle.beforeFillMinRow=void 0}startMoveCol(t,e,i,r,o){SQt(t,e,i,r,this,o)}updateMoveCol(t,e,i,r,o){AQt(t,e,i,r,this,o)}isMoveCol(){return this.columnMove.moving}endMoveCol(){return TQt(this)}checkFrozen(){var t;let e=this.table.options.frozenColCount?this.table.options.frozenColCount:this.table.isPivotTable()||this.table.isListTable()&&this.table.internalProps.transpose?((t=this.table.rowHeaderLevelCount)!==null&&t!==void 0?t:0)+this.table.internalProps.layoutMap.leftRowSeriesNumberColumnCount:0;if(e){e=Math.min(e,this.table.colCount);const i=this.table.getContainer();if(i&&i.clientWidth===0)return this._frozenObserver?void 0:(this._frozenObserver=new ResizeObserver((r=>{for(const o of r)if(o.contentRect.width>0)return this.clearFrozenObserver(),this.table.resize(),void setTimeout((()=>{this.checkFrozen()}),0)})),void this._frozenObserver.observe(i));if(this.table.getColsWidth(0,e-1)>this.table._getMaxFrozenWidth())if(this.table.internalProps.unfreezeAllOnExceedsMaxWidth)this.table._setFrozenColCount(0),this.setFrozenCol(-1);else{const r=this.table._getComputedFrozenColCount(e);this.table._setFrozenColCount(r),this.setFrozenCol(r)}else this.table.frozenColCount!==e&&(this.table._setFrozenColCount(e),this.setFrozenCol(e))}else this.clearFrozenObserver()}clearFrozenObserver(){this._frozenObserver&&(this._frozenObserver.disconnect(),this._frozenObserver=null)}setFrozenCol(t){t!==this.frozen.col?(this.frozen.col=t,this.table.scenegraph.updateFrozen(),this.table.scenegraph.updateFrozenIcon(0,this.table.colCount-1)):this.table.scenegraph.updateFrozenIcon(0,this.table.colCount-1)}setFrozenRow(t){t!==this.frozen.row&&(this.frozen.row=t,this.table.scenegraph.updateRowFrozen())}checkVerticalScrollBarEnd(){var t,e;const i=this.table.getAllRowsHeight(),r=this.scroll.verticalBarPos,o=this.table.tableNoFrameHeight;r+o>=i&&this.table.fireListeners(at.SCROLL_VERTICAL_END,{scrollTop:r,scrollLeft:this.scroll.horizontalBarPos,scrollHeight:(t=this.table.theme.scrollStyle)===null||t===void 0?void 0:t.width,scrollWidth:(e=this.table.theme.scrollStyle)===null||e===void 0?void 0:e.width,viewHeight:o,viewWidth:this.table.tableNoFrameWidth})}checkHorizontalScrollBarEnd(){var t,e;const i=this.table.getAllColsWidth(),r=this.scroll.horizontalBarPos,o=this.table.tableNoFrameWidth;r+o>=i&&this.table.fireListeners(at.SCROLL_HORIZONTAL_END,{scrollTop:this.scroll.verticalBarPos,scrollLeft:r,scrollHeight:(t=this.table.theme.scrollStyle)===null||t===void 0?void 0:t.width,scrollWidth:(e=this.table.theme.scrollStyle)===null||e===void 0?void 0:e.width,viewHeight:this.table.tableNoFrameHeight,viewWidth:o})}updateVerticalScrollBar(t){var e,i,r,o;const a=this.table.getAllRowsHeight(),s=this.scroll.verticalBarPos;let l=Math.ceil(t*(a-this.table.scenegraph.height));Y(l)&&!isNaN(l)||(l=0);const h=l-this.table.scenegraph.proxy.deltaY-s;if(this.table.fireListeners(at.CAN_SCROLL,{event:void 0,scrollTop:l-this.table.scenegraph.proxy.deltaY,scrollLeft:this.scroll.horizontalBarPos,scrollHeight:(e=this.table.theme.scrollStyle)===null||e===void 0?void 0:e.width,scrollWidth:(i=this.table.theme.scrollStyle)===null||i===void 0?void 0:i.width,viewHeight:this.table.tableNoFrameHeight,viewWidth:this.table.tableNoFrameWidth,scrollDirection:"vertical",scrollRatioY:t,dy:h}).some((u=>u===!1))){const u=this.scroll.verticalBarPos/(a-this.table.scenegraph.height);this.table.scenegraph.component.updateVerticalScrollBarPos(u)}else this.scroll.verticalBarPos=l,this.table.scenegraph.setY(-this.scroll.verticalBarPos,t===1),this.scroll.verticalBarPos-=this.table.scenegraph.proxy.deltaY,this.table.scenegraph.proxy.deltaY=0,this.updateHoverPos(-1,-1),this.table.fireListeners(at.SCROLL,{event:void 0,scrollTop:this.scroll.verticalBarPos,scrollLeft:this.scroll.horizontalBarPos,scrollHeight:(r=this.table.theme.scrollStyle)===null||r===void 0?void 0:r.width,scrollWidth:(o=this.table.theme.scrollStyle)===null||o===void 0?void 0:o.width,viewHeight:this.table.tableNoFrameHeight,viewWidth:this.table.tableNoFrameWidth,scrollDirection:"vertical",scrollRatioY:t,dy:h}),s!==this.scroll.verticalBarPos&&this.checkVerticalScrollBarEnd()}updateHorizontalScrollBar(t){var e,i,r,o;const a=this.table.getAllColsWidth(),s=this.scroll.horizontalBarPos;let l=Math.ceil(t*(a-this.table.scenegraph.width));Y(l)&&!isNaN(l)||(l=0);const h=l-this.table.scenegraph.proxy.deltaX-s;if(this.table.fireListeners(at.CAN_SCROLL,{event:void 0,scrollTop:this.scroll.verticalBarPos,scrollLeft:l-this.table.scenegraph.proxy.deltaX,scrollHeight:(e=this.table.theme.scrollStyle)===null||e===void 0?void 0:e.width,scrollWidth:(i=this.table.theme.scrollStyle)===null||i===void 0?void 0:i.width,viewHeight:this.table.tableNoFrameHeight,viewWidth:this.table.tableNoFrameWidth,scrollDirection:"horizontal",scrollRatioX:t,dx:h}).some((u=>u===!1))){const u=this.scroll.horizontalBarPos/(a-this.table.scenegraph.width);this.table.scenegraph.component.updateHorizontalScrollBarPos(u)}else this.scroll.horizontalBarPos=l,this.table.scenegraph.setX(-this.scroll.horizontalBarPos,t===1),this.scroll.horizontalBarPos-=this.table.scenegraph.proxy.deltaX,this.table.scenegraph.proxy.deltaX=0,this.updateHoverPos(-1,-1),this.table.fireListeners(at.SCROLL,{event:void 0,scrollTop:this.scroll.verticalBarPos,scrollLeft:this.scroll.horizontalBarPos,scrollHeight:(r=this.table.theme.scrollStyle)===null||r===void 0?void 0:r.width,scrollWidth:(o=this.table.theme.scrollStyle)===null||o===void 0?void 0:o.width,viewHeight:this.table.tableNoFrameHeight,viewWidth:this.table.tableNoFrameWidth,scrollDirection:"horizontal",scrollRatioX:t,dx:h}),s!==this.scroll.horizontalBarPos&&this.checkHorizontalScrollBarEnd()}setScrollTop(t,e,i=!0){var r,o,a,s,l,h,u;const d=this.table.getAllRowsHeight(),c=!((r=this.table.options.customConfig)===null||r===void 0)&&r._disableColumnAndRowSizeRound?1:0;t=Math.max(0,Math.min(t,d-this.table.scenegraph.height-c)),t=Math.ceil(t);const f=this.scroll.verticalBarPos,g=t/(d-this.table.scenegraph.height);if((f!==t||((a=(o=this.table.options)===null||o===void 0?void 0:o.customConfig)===null||a===void 0?void 0:a.scrollEventAlwaysTrigger)===!0)&&i){let v=t;Y(v)&&!isNaN(v)||(v=0);const m=v-f;if(this.table.fireListeners(at.CAN_SCROLL,{event:e?.nativeEvent,scrollTop:v,scrollLeft:this.scroll.horizontalBarPos,scrollHeight:(s=this.table.theme.scrollStyle)===null||s===void 0?void 0:s.width,scrollWidth:(l=this.table.theme.scrollStyle)===null||l===void 0?void 0:l.width,viewHeight:this.table.tableNoFrameHeight,viewWidth:this.table.tableNoFrameWidth,scrollDirection:"vertical",scrollRatioY:g,dy:m}).some((y=>y===!1))){const y=this.scroll.verticalBarPos/(d-this.table.scenegraph.height);return void this.table.scenegraph.component.updateVerticalScrollBarPos(y)}}(t!==this.scroll.verticalBarPos||this.table.isPivotChart())&&this.updateHoverPos(-1,-1),this.scroll.verticalBarPos=t,Y(this.scroll.verticalBarPos)&&!isNaN(this.scroll.verticalBarPos)||(this.scroll.verticalBarPos=0),this.table.scenegraph.setY(-t),this.table.scenegraph.component.updateVerticalScrollBarPos(g);const p=this.scroll.verticalBarPos-f;this.table.fireListeners(at.SCROLL,{event:e?.nativeEvent,scrollTop:this.scroll.verticalBarPos,scrollLeft:this.scroll.horizontalBarPos,scrollHeight:(h=this.table.theme.scrollStyle)===null||h===void 0?void 0:h.width,scrollWidth:(u=this.table.theme.scrollStyle)===null||u===void 0?void 0:u.width,viewHeight:this.table.tableNoFrameHeight,viewWidth:this.table.tableNoFrameWidth,scrollDirection:"vertical",scrollRatioY:g,dy:p}),f!==t&&i&&this.checkVerticalScrollBarEnd()}setScrollLeft(t,e,i=!0){var r,o,a,s,l,h,u;this.table.scrollLeft;const d=this.table.getAllColsWidth(),c=(this.table.getFrozenColsWidth(),!((r=this.table.options.customConfig)===null||r===void 0)&&r._disableColumnAndRowSizeRound?1:0);t=Math.max(0,Math.min(t,d-this.table.scenegraph.width-c)),t=Math.ceil(t);const f=this.scroll.horizontalBarPos,g=t/(d-this.table.scenegraph.width);if((f!==t||((a=(o=this.table.options)===null||o===void 0?void 0:o.customConfig)===null||a===void 0?void 0:a.scrollEventAlwaysTrigger)===!0)&&i){let v=t;Y(v)&&!isNaN(v)||(v=0);const m=v-f;if(this.table.fireListeners(at.CAN_SCROLL,{event:e?.nativeEvent,scrollTop:this.scroll.verticalBarPos,scrollLeft:v,scrollHeight:(s=this.table.theme.scrollStyle)===null||s===void 0?void 0:s.width,scrollWidth:(l=this.table.theme.scrollStyle)===null||l===void 0?void 0:l.width,viewHeight:this.table.tableNoFrameHeight,viewWidth:this.table.tableNoFrameWidth,scrollDirection:"horizontal",scrollRatioX:g,dx:m}).some((y=>y===!1))){const y=this.scroll.horizontalBarPos/(d-this.table.scenegraph.width);return void this.table.scenegraph.component.updateHorizontalScrollBarPos(y)}}t!==this.scroll.horizontalBarPos&&this.updateHoverPos(-1,-1),this.scroll.horizontalBarPos=t,Y(this.scroll.horizontalBarPos)&&!isNaN(this.scroll.horizontalBarPos)||(this.scroll.horizontalBarPos=0),this.table.scenegraph.setX(-t),this.table.scenegraph.component.updateHorizontalScrollBarPos(g);const p=this.scroll.horizontalBarPos-f;this.table.fireListeners(at.SCROLL,{event:e?.nativeEvent,scrollTop:this.scroll.verticalBarPos,scrollLeft:this.scroll.horizontalBarPos,scrollHeight:(h=this.table.theme.scrollStyle)===null||h===void 0?void 0:h.width,scrollWidth:(u=this.table.theme.scrollStyle)===null||u===void 0?void 0:u.width,viewHeight:this.table.tableNoFrameHeight,viewWidth:this.table.tableNoFrameWidth,scrollDirection:"horizontal",scrollRatioX:g,dx:p}),f!==t&&i&&this.checkHorizontalScrollBarEnd()}hideVerticalScrollBar(){this.table.scenegraph.component.hideVerticalScrollBar()}showVerticalScrollBar(t){this.table.scenegraph.component.showVerticalScrollBar(),t&&(clearTimeout(this._clearVerticalScrollBar),this._clearVerticalScrollBar=setTimeout((()=>{var e;(e=this.table.scenegraph)===null||e===void 0||e.component.hideVerticalScrollBar()}),1e3))}hideHorizontalScrollBar(){this.table.scenegraph.component.hideHorizontalScrollBar()}showHorizontalScrollBar(t){var e;this.table.scenegraph.component.showHorizontalScrollBar(),(e=this.table.scenegraph)===null||e===void 0||e.component.showFrozenColumnShadow(),t&&(clearTimeout(this._clearHorizontalScrollBar),this._clearHorizontalScrollBar=setTimeout((()=>{var i,r;(i=this.table.scenegraph)===null||i===void 0||i.component.hideFrozenColumnShadow(),(r=this.table.scenegraph)===null||r===void 0||r.component.hideHorizontalScrollBar()}),1e3))}triggerContextMenu(t,e,i,r){this.menu.isShow&&this.menu.x===i&&this.menu.y===r?this.hideMenu():this.showContextMenu(t,e,i,r)}showContextMenu(t,e,i,r){var o;!((o=this.table.internalProps.menu)===null||o===void 0)&&o.contextMenuItems&&(this.table.internalProps.menu.renderMode==="html"?this.menu.isShow=!0:(this.menu.isShow=!0,this.menu.x=i,this.menu.y=r,this.table.scenegraph.component.menu.attach(i,r,t,e,Fo.contextmenu)),this.table.fireListeners(at.SHOW_MENU,{x:i,y:r,col:t,row:e,type:"contextmenu"}))}triggerDropDownMenu(t,e,i,r,o){this.table.fireListeners(at.DROPDOWN_ICON_CLICK,{col:t,row:e,event:o}),this.menu.isShow?this.hideMenu():this.showDropDownMenu(t,e,i,r)}showDropDownMenu(t,e,i,r){this.table.internalProps.menu.renderMode==="html"?this.menu.isShow=!0:(this.menu.isShow=!0,this.table.scenegraph.component.menu.attach(i,r,t,e,Fo.dropDown),this.menu.bounds=this.table.scenegraph.component.menu.bounds),this.table.fireListeners(at.SHOW_MENU,{x:i,y:r,col:t,row:e,type:"dropDown"}),this.residentHoverIcon&&this.table.scenegraph.setIconNormalStyle(this.residentHoverIcon.icon,this.residentHoverIcon.col,this.residentHoverIcon.row);const o=this.table.scenegraph.getCell(t,e);let a;o.forEachChildren((s=>s.attribute.funcType===Ye.dropDown&&(a=s,!0))),a&&(this.residentHoverIcon={col:t,row:e,icon:a},this.table.scenegraph.setIconHoverStyle(this.residentHoverIcon.icon,this.residentHoverIcon.col,this.residentHoverIcon.row,o),this.table.scenegraph.residentHoverIcon(t,e))}hideMenu(){this.menu.isShow&&(this.table.fireListeners(at.DROPDOWN_MENU_CLEAR,null),this.table.fireListeners(at.HIDE_MENU,null),this.menu.isShow=!1,this.table.scenegraph.component.menu.detach(),this.residentHoverIcon&&(this.table.scenegraph.setIconNormalStyle(this.residentHoverIcon.icon,this.residentHoverIcon.col,this.residentHoverIcon.row),this.table.scenegraph.resetResidentHoverIcon(this.residentHoverIcon.col,this.residentHoverIcon.row),this.residentHoverIcon=null))}setDropDownMenuHighlight(t){this.menu.dropDownMenuHighlight=t;for(let e=0;e<t.length;e++){const{col:i,row:r}=t[e],o=this.table.getCellRange(i,r);if(o)for(let a=o.start.col;a<=o.end.col;a++)for(let s=o.start.row;s<=o.end.row;s++)this.table.scenegraph.updateCellContent(a,s)}}dropDownMenuIsHighlight(t,e,i){const r=this.menu.dropDownMenuHighlight;if(Array.isArray(r))for(let o=0;o<r.length;o++){const a=r[o];let{col:s,row:l}=a;const{field:h,menuKey:u}=a;if(typeof s!="number"||typeof l!="number")if(this.table.isPivotTable()){const d=this.table.internalProps.layoutMap.getPivotCellAdress(h);if(!d)continue;s=d.col,l=d.row}else{const d=this.table.internalProps.layoutMap.getHeaderCellAddressByField(h);if(!d)continue;s=d.col,l=d.row}if(Y(s)&&Y(l)&&this.table.isCellRangeEqual(t,e,s,l)){let d=this.table._getHeaderLayoutMap(s??t,l??e).dropDownMenu||this.table.globalDropDownMenu;if(typeof d=="function"&&(d=d({row:l,col:s,table:this.table})),d)for(let c=0;c<d.length;c++){const f=d[c];if(Bn(f)&&(f.menuKey||f.text)===(u||"")&&c===i||Li(f)&&f===u&&c===i)return!0}}}return!1}triggerSort(t,e,i,r){if(this.table.isPivotTable()){const c=this.table.getPivotSortState(t,e),f=c?c.toUpperCase():"NORMAL",g=f==="ASC"?"DESC":f==="DESC"?"NORMAL":"ASC";return this.table.sort(t,e,g),void this.table.fireListeners(O0.PIVOT_SORT_CLICK,{col:t,row:e,order:f||"normal",dimensionInfo:this.table.internalProps.layoutMap.getPivotDimensionInfo(t,e),cellLocation:this.table.getCellLocation(t,e),event:r})}const o=[...this.sort],a=this.table.internalProps.multipleSort||!o.length?null:this.sort[this.sort.length-1];vQt(t,e,this.table,r);const s=this.table.getCellRange(t,e),l=this.sort.find((c=>c.col===s.start.col&&c.row===s.start.row)),h=this.table.internalProps.multipleSort||!a?null:a.col,u=this.table.internalProps.multipleSort||!a?null:a.row,d=o.findIndex((c=>c.col===t&&c.row===e));d>=0&&o.splice(d,1),this.table.scenegraph.updateSortIcon({col:t,row:e,iconMark:i,order:l?.order,oldSortCol:h,oldSortRow:u,oldIconMark:a?.icon}),l&&(l.icon=i),this.table.internalProps.multipleSort||o.forEach((c=>{this.table.scenegraph.updateSortIcon({col:null,row:null,iconMark:null,order:"normal",oldSortCol:c.col,oldSortRow:c.row,oldIconMark:null})})),this.table.fireListeners(O0.AFTER_SORT,{order:l?.order,field:this.table.getHeaderField(t,e),event:r})}setSelectInline(t){this.select.selectInline=t}updateSortState(t){var e,i,r,o,a,s,l,h;t=Array.isArray(t)?t:[t];for(let d=0;d<t.length;d++){if(t[d].field===((e=this.sort[d])===null||e===void 0?void 0:e.field)&&t[t.length-1].order===((i=this.sort[d])===null||i===void 0?void 0:i.order))return;const c=this.table.internalProps.multipleSort?null:((r=this.sort[d])===null||r===void 0?void 0:r.col)||null,f=this.table.internalProps.multipleSort?null:((o=this.sort[d])===null||o===void 0?void 0:o.row)||null;((a=this.sort[d])===null||a===void 0?void 0:a.order)==="asc"||(s=this.sort[d])===null||s===void 0||s.order,this.setSortState(t.slice(0,d+1));const g=this.table.internalProps.layoutMap.getHeaderCellAddressByField(t[d].field);this.sort[d].col=g.col,this.sort[d].row=g.row;const p=this.table.scenegraph.getCell(this.sort[d].col,this.sort[d].row);let v;tN(p,"children",(m=>m.attribute.funcType==="sort"&&(v=m,!0))),this.table.scenegraph.updateSortIcon({col:this.sort[d].col,row:this.sort[d].row,iconMark:v,order:this.sort[d].order,oldSortCol:c,oldSortRow:f,oldIconMark:(l=this.sort[d])===null||l===void 0?void 0:l.icon})}const u=[];this.table.internalProps.layoutMap.columnTree.tree.children.forEach((d=>{t.some((c=>c.field===d.field))||u.push(d)}));for(let d=0;d<u.length;d++){const c=u[d];this.table.scenegraph.updateSortIcon({col:null,row:null,iconMark:null,order:null,oldSortCol:(h=c.startInTotal+this.table.internalProps.layoutMap.leftRowSeriesNumberColumnCount)!==null&&h!==void 0?h:0,oldSortRow:c.level,oldIconMark:null})}}triggerFreeze(t,e,i){if(!this.table.isPivotTable()&&!this.table.transpose){if(pQt(t,e,this.table),this.table.hasListeners(O0.FREEZE_CLICK)){const r=this.table.internalProps.layoutMap.columnObjects.slice(0,t+1);this.table.fireListeners(O0.FREEZE_CLICK,{col:t,row:e,fields:r.reduce(((o,a)=>o.concat(a.field)),[]),colCount:this.table.frozenColCount})}this.frozen.icon=i}}updateCursor(t){var e;t||(t=(e=this.table.options.defaultCursor)!==null&&e!==void 0?e:"default"),this.table.getElement().style.cursor=t}updateDrillState(t,e,i,r,o,a){this.drill.dimensionKey=t,this.drill.title=e,this.drill.drillDown=i,this.drill.drillUp=r,this.drill.col=o,this.drill.row=a,_Qt(o,a,i,r,this.table)}updateSparklineHoverPose(t,e,i,r){this.sparkLine.col!==-1&&this.sparkLine.row!==-1&&CQt(this.sparkLine.col,this.sparkLine.row,this.table);let o=!1;t!==-1&&e!==-1&&(o=wQt(t,e,i,r,this.table)),o?(this.sparkLine.col=t,this.sparkLine.row=e):(this.sparkLine.col=-1,this.sparkLine.row=-1)}setCheckedState(t,e,i,r){return OQt(t,e,i,r,this)}setHeaderCheckedState(t,e){return HQt(t,e,this)}syncCheckedState(t,e,i,r){return zQt(t,e,i,r,this)}initCheckedState(t){return FQt(t,this)}updateHeaderCheckedState(t,e,i){return NQt(t,this,e,i)}initLeftRecordsCheckState(t){return WQt(t,this)}setRadioState(t,e,i,r,o){kQt(t,e,i,r,o,this)}syncRadioState(t,e,i,r,o,a){return EQt(t,e,i,r,o,a,this)}changeCheckboxAndRadioOrder(t,e){this.checkedState.size&&GQt(t,e,this),this.radioState.length&&IQt(t,e,this)}setCustomSelectRanges(t){ZQt(this),JQt(t,this)}};function tte(n){Be.mode==="browser"&&n.on(at.CLICK_CELL,(t=>{const{col:e,row:i}=t;if(t.target.type==="image"&&t.target.role&&t.target.role.startsWith("icon"))return;let r;r=n.internalProps.layoutMap.isHeader(e,i)?n.isPivotTable()?n._getHeaderLayoutMap(e,i).headerType:n.getHeaderDefine(e,i).headerType:n.getBodyColumnType(e,i);const o=n.isHeader(e,i)?n.getHeaderDefine(e,i):n.getBodyColumnDefine(e,i),a=n.getCellValue(e,i),s=n.getCellOriginValue(e,i);if(r==="link"){let l=Je(o.linkJump,{col:e,row:i,table:n,value:a,dataValue:s,cellHeaderPaths:void 0});if(l=l!==!1,!l)return;const h=o.templateLink;let u,d=Je(o.linkDetect,{col:e,row:i,table:n,value:a,dataValue:s,cellHeaderPaths:void 0});if(d=d!==!1,h){const g=n.getCellOriginRecord(e,i);if(g&&g.vtableMerge)return;const p=Object.assign({__value:a,__dataValue:s},g);if(ra(h))u=h(p,e,i,n);else{const v=/\{\s*(\S+?)\s*\}/g;u=h.replace(v,((m,y)=>p[y]))}}else if(d){if(!eN.test(a))return;u=a}else u=a;if(!u)return;const c=o.linkTarget,f=o.linkWindowFeatures;window.open(u,c,f)}else if(r==="image"){const{clickToPreview:l}=o;if(l===!1)return;const h=document.createElement("div");h.style.width="100%",h.style.height="100%",h.style.position="absolute",h.style.top="0",h.style.left="0",h.style.backgroundColor="rgba(30, 30, 30, 0.4)",h.style.display="flex",h.style.justifyContent="center",h.style.alignItems="center",h.style.overflow="hidden",h.style.zIndex="9999",h.addEventListener("click",(d=>{d.target===h&&document.body.removeChild(h)}));const u=new Image;u.src=a,u.style.maxWidth="80%",u.style.maxHeight="80%",h.appendChild(u),document.body.appendChild(h)}else if(r==="video"){const{clickToPreview:l}=o;if(l===!1)return;const h=document.createElement("div");h.style.width="100%",h.style.height="100%",h.style.position="absolute",h.style.top="0",h.style.left="0",h.style.backgroundColor="rgba(30, 30, 30, 0.4)",h.style.display="flex",h.style.justifyContent="center",h.style.alignItems="center",h.style.overflow="hidden",h.style.zIndex="9999",h.addEventListener("click",(d=>{d.target===h&&document.body.removeChild(h)}));const u=document.createElement("video");u.src=a,u.style.maxWidth="80%",u.style.maxHeight="80%",u.setAttribute("preload","auto"),u.setAttribute("controls","true"),h.appendChild(u),document.body.appendChild(h)}}))}function ete(n){n.on(at.MOUSEENTER_CELL,(t=>{const{col:e,row:i}=t;if(e===-1||i===-1)return;const r=n.internalProps.layoutMap.getHeaderDimension(e,i);r?.drillDown||r?.drillUp?n.stateManager.updateDrillState(r.dimensionKey,r.title,r.drillDown,r.drillUp,e,i):n.stateManager.updateDrillState(void 0,void 0,!1,!1,-1,-1)})),n.on(at.MOUSELEAVE_TABLE,(t=>{n.stateManager.updateDrillState(void 0,void 0,!1,!1,-1,-1)}))}function ite(n){n.fireListeners(O0.DRILLMENU_CLICK,n.stateManager.drill)}function nte(n){const t=n.internalProps.layoutMap.rowsDefine,e=n.internalProps.layoutMap.columnsDefine;for(let i=0;i<t.length;i++){const r=t[i];if(typeof r!="string"&&(r.drillDown||r.drillUp))return!0}for(let i=0;i<e.length;i++){const r=e[i];if(typeof r!="string"&&(r.drillDown||r.drillUp))return!0}return!1}function ZX(n){if(n.eventManager.bindSparklineHoverEvent)return;let t=!1;n.isPivotTable()?t=n.internalProps.layoutMap.indicatorsDefine.some((e=>typeof e!="string"&&e.cellType==="sparkline")):t=n.internalProps.layoutMap.columnObjects.some((e=>e.cellType==="sparkline"||typeof e.cellType=="function")),t&&(n.eventManager.bindSparklineHoverEvent=!0,n.on(at.MOUSEMOVE_CELL,(e=>{const{col:i,row:r,x:o,y:a}=e;n.getBodyColumnType(i,r)!=="sparkline"&&n.stateManager.updateSparklineHoverPose(-1,-1,0,0),n.stateManager.updateSparklineHoverPose(i,r,o,a)})),n.on(at.MOUSELEAVE_TABLE,(e=>{n.stateManager.updateSparklineHoverPose(-1,-1,0,0)})))}function hT(n,t,e=!0){var i,r,o;let{deltaX:a,deltaY:s}=n;n.shiftKey&&n.deltaY&&(a=s,s=0);const[l,h]=rte(a,s,{horizontal:1,vertical:1});(l||h)&&t.interactionState!==Xt.scrolling&&t.updateInteractionState(Xt.scrolling);const u=((r=(i=t.table.options.theme)===null||i===void 0?void 0:i.scrollStyle)===null||r===void 0?void 0:r.visible)==="scrolling";l&&(t.setScrollLeft(t.scroll.horizontalBarPos+l,n),t.showHorizontalScrollBar(u)),h&&(t.setScrollTop(t.scroll.verticalBarPos+h,n),t.showVerticalScrollBar(u)),e&&t.resetInteractionState(t.interactionStateBeforeScroll),!((o=n.nativeEvent)===null||o===void 0)&&o.cancelable&&(t.table.internalProps.overscrollBehavior==="none"||Math.abs(s)>=Math.abs(a)&&s!==0&&Sht(s,t)||Math.abs(s)<=Math.abs(a)&&a!==0&&Aht(a,t))&&n.nativeEvent.preventDefault()}function rte(n,t,e){var i,r;const o=Math.abs(n/t),a=o<=.5?0:n,s=o>2?0:t;return[Math.ceil(a*((i=e.horizontal)!==null&&i!==void 0?i:0)),Math.ceil(s*((r=e.vertical)!==null&&r!==void 0?r:0))]}function Sht(n,t){return t.table.getAllRowsHeight()-t.table.scenegraph.height!=0&&!ote(n,t)&&!ate(n,t)}function Aht(n,t){return t.table.getAllColsWidth()-t.table.scenegraph.width!=0&&!ste(n,t)&&!lte(n,t)}function ote(n,t){return t.table.getAllRowsHeight()-t.table.scenegraph.height!==0&&n<=0&&t.scroll.verticalBarPos<1}function ate(n,t){var e;const i=!((e=t.table.options.customConfig)===null||e===void 0)&&e._disableColumnAndRowSizeRound?1:0,r=t.table.getAllRowsHeight()-t.table.scenegraph.height;return r!==0&&n>=0&&Math.abs(t.scroll.verticalBarPos-r)<1+i}function ste(n,t){return t.table.getAllColsWidth()-t.table.scenegraph.width!==0&&n<=0&&t.scroll.horizontalBarPos<1}function lte(n,t){var e;const i=!((e=t.table.options.customConfig)===null||e===void 0)&&e._disableColumnAndRowSizeRound?1:0,r=t.table.getAllColsWidth()-t.table.scenegraph.width;return r!==0&&n>=0&&Math.abs(t.scroll.horizontalBarPos-r)<1+i}class hte{constructor(t){this.stateManager=t}setScrollHandle(t){this.scrollHandle=t}startInertia(t,e,i){this.lastTime=Date.now(),this.speedX=t,this.speedY=e,this.friction=i,this.runingId||(this.runingId=requestAnimationFrame(this.inertia.bind(this)))}inertia(){var t;const e=Date.now(),i=e-this.lastTime;let r=!0;const o=Math.pow(this.friction,i/16),a=o*this.speedX,s=o*this.speedY;let l=0,h=0;Math.abs(a)>.05&&(r=!1,l=(this.speedX+a)/2*i),Math.abs(s)>.05&&(r=!1,h=(this.speedY+s)/2*i),(t=this.scrollHandle)===null||t===void 0||t.call(this,l,h),r?this.runingId=null:(this.lastTime=e,this.speedX=a,this.speedY=s,this.runingId=requestAnimationFrame(this.inertia.bind(this)))}endInertia(){cancelAnimationFrame(this.runingId),this.runingId=null}isInertiaScrolling(){return!!this.runingId}}function uH(n,t,e){var i,r,o,a,s,l,h,u;if(t&&((i=n.stateManager.columnMove)===null||i===void 0?void 0:i.colSource)!==-1&&((r=n.stateManager.columnMove)===null||r===void 0?void 0:r.rowSource)!==-1&&((o=n.stateManager.columnMove)===null||o===void 0?void 0:o.colTarget)!==-1&&((a=n.stateManager.columnMove)===null||a===void 0?void 0:a.rowTarget)!==-1){if(n.hasListeners(at.CHANGE_HEADER_POSITION)){const{colSource:d,rowSource:c,colTarget:f,rowTarget:g}=n.stateManager.columnMove,p=(s=n.stateManager.columnMove.rowSourceSize)!==null&&s!==void 0?s:0,v=(l=n.stateManager.columnMove.rowTargetSize)!==null&&l!==void 0?l:0;n.fireListeners(at.CHANGE_HEADER_POSITION,{target:{col:f,row:g+v-p},source:{col:d,row:c},event:e})}}else if(!t&&n.hasListeners(at.CHANGE_HEADER_POSITION_FAIL)){const d=(h=n.stateManager.columnMove.rowSourceSize)!==null&&h!==void 0?h:0,c=(u=n.stateManager.columnMove.rowTargetSize)!==null&&u!==void 0?u:0;n.fireListeners(at.CHANGE_HEADER_POSITION_FAIL,{target:{col:n.stateManager.columnMove.colTarget,row:n.stateManager.columnMove.rowTarget+c-d},source:{col:n.stateManager.columnMove.colSource,row:n.stateManager.columnMove.rowSource},event:e})}}function ute(n){const t=n.table,e=t.stateManager;t.scenegraph.tableGroup.addEventListener("pointermove",(i=>{var r,o,a,s,l,h,u,d,c,f,g,p,v,m,y,b,_,w;const C=(o=(r=t.eventManager.LastPointerXY)===null||r===void 0?void 0:r.x)!==null&&o!==void 0?o:i.x,x=(s=(a=t.eventManager.LastPointerXY)===null||a===void 0?void 0:a.y)!==null&&s!==void 0?s:i.y;t.eventManager.LastPointerXY={x:i.x,y:i.y},n.touchSetTimeout&&(clearTimeout(n.touchSetTimeout),n.touchSetTimeout=void 0);const S=bn(i);if(S.eventArgs&&t.hasListeners(at.MOUSEMOVE_TABLE)&&t.fireListeners(at.MOUSEMOVE_TABLE,{col:S.eventArgs.col,row:S.eventArgs.row,x:S.abstractPos.x,y:S.abstractPos.y,event:i.nativeEvent,target:(l=S?.eventArgs)===null||l===void 0?void 0:l.target,mergeCellInfo:(h=S.eventArgs)===null||h===void 0?void 0:h.mergeInfo}),e.interactionState===Xt.grabing)return void(Math.abs(C-i.x)+Math.abs(x-i.y)>=1&&(e.isResizeCol()||e.isResizeRow()||(e.isMoveCol()?n.dealColumnMover(S):e.isFillHandle()?n.dealFillSelect(S,!0):((u=t.options.select)===null||u===void 0?void 0:u.disableDragSelect)||n.dealTableSelect(S,!0))));!(!((d=t.options.select)===null||d===void 0)&&d.disableDragSelect)&&t.eventManager.isDraging&&e.isSelecting()&&!(!((c=t.editorManager)===null||c===void 0)&&c.editingEditor)&&n.dealTableSelect(S,!0);const A=i.path.find((T=>T.role==="cell"));if(t.hasListeners(at.MOUSELEAVE_CELL)&&(t.stateManager.hover.cellPos.col===-1||t.stateManager.hover.cellPos.row===-1||A?.col===t.stateManager.hover.cellPos.col&&A?.row===t.stateManager.hover.cellPos.row||t.fireListeners(at.MOUSELEAVE_CELL,{col:t.stateManager.hover.cellPos.col,row:t.stateManager.hover.cellPos.row,cellRange:t.getCellRangeRelativeRect({col:t.stateManager.hover.cellPos.col,row:t.stateManager.hover.cellPos.row}),scaleRatio:t.canvas.getBoundingClientRect().width/t.canvas.offsetWidth,event:i.nativeEvent,target:(f=S?.eventArgs)===null||f===void 0?void 0:f.target})),t.hasListeners(at.MOUSEENTER_CELL)&&(A?.role!=="cell"||!Y(A.col)||!Y(A.row)||A.col===t.stateManager.hover.cellPos.col&&A.row===t.stateManager.hover.cellPos.row||A.col===((g=t.stateManager.hover.cellPosContainHeader)===null||g===void 0?void 0:g.col)&&A.row===((p=t.stateManager.hover.cellPosContainHeader)===null||p===void 0?void 0:p.row)||t.fireListeners(at.MOUSEENTER_CELL,{col:A.col,row:A.row,cellRange:t.getCellRangeRelativeRect({col:A.col,row:A.row}),scaleRatio:t.canvas.getBoundingClientRect().width/t.canvas.offsetWidth,event:i.nativeEvent,target:(v=S?.eventArgs)===null||v===void 0?void 0:v.target,mergeCellInfo:(m=S.eventArgs)===null||m===void 0?void 0:m.mergeInfo})),n.dealIconHover(S),n.dealTableHover(S),t.theme.columnResize.visibleOnHover&&n.checkColumnResize(S,!0),S.eventArgs&&t.hasListeners(at.MOUSEMOVE_CELL)){let T,M;if(!((y=S.eventArgs)===null||y===void 0)&&y.target){const R=Ry((b=S.eventArgs)===null||b===void 0?void 0:b.target);R&&(T=R.icon,M=R.position)}t.fireListeners(at.MOUSEMOVE_CELL,{col:S.eventArgs.col,row:S.eventArgs.row,x:S.abstractPos.x,y:S.abstractPos.y,event:i.nativeEvent,targetIcon:T?{name:T.name,position:M,funcType:T.attribute.funcType}:void 0,target:(_=S?.eventArgs)===null||_===void 0?void 0:_.target,mergeCellInfo:(w=S.eventArgs)===null||w===void 0?void 0:w.mergeInfo})}})),t.scenegraph.tableGroup.addEventListener("pointerout",(i=>{var r;const o=bn(i),a=(r=o?.eventArgs)===null||r===void 0?void 0:r.target;a?.role==="table"&&n.dealTableHover()})),t.scenegraph.tableGroup.addEventListener("pointerover",(i=>{var r,o;const a=bn(i),s=(r=a?.eventArgs)===null||r===void 0?void 0:r.target;if(s&&t.hasListeners(at.MOUSEOVER_CHART_SYMBOL)&&s.type==="symbol"){const l=i.composedPath().find((h=>h.roll==="cell"));if(l){const{col:h,row:u}=l,d={col:h,row:u,field:t.getHeaderField(h,u),value:t.getCellValue(h,u),dataValue:t.getCellOriginValue(h,u),cellHeaderPaths:t.internalProps.layoutMap.getCellHeaderPaths(h,u),title:t.getBodyColumnDefine(h,u).title,cellRange:t.getCellRelativeRect(h,u),event:i.nativeEvent,sparkline:{pointData:void 0},scaleRatio:t.canvas.getBoundingClientRect().width/t.canvas.offsetWidth,target:(o=a?.eventArgs)===null||o===void 0?void 0:o.target};t.fireListeners(at.MOUSEOVER_CHART_SYMBOL,d)}}})),t.scenegraph.tableGroup.addEventListener("pointerenter",(i=>{(t.theme.scrollStyle.horizontalVisible&&t.theme.scrollStyle.horizontalVisible==="focus"||!t.theme.scrollStyle.horizontalVisible&&t.theme.scrollStyle.visible==="focus")&&e.showHorizontalScrollBar(),(t.theme.scrollStyle.verticalVisible&&t.theme.scrollStyle.verticalVisible==="focus"||!t.theme.scrollStyle.verticalVisible&&t.theme.scrollStyle.visible==="focus")&&e.showVerticalScrollBar(),t.hasListeners(at.MOUSEENTER_TABLE)&&t.fireListeners(at.MOUSEENTER_TABLE,{event:i.nativeEvent})})),t.scenegraph.tableGroup.addEventListener("pointerleave",(i=>{e.isResizeCol()||e.isResizeRow()||e.isMoveCol()||e.isSelecting()||(e.updateInteractionState(Xt.default),e.updateCursor()),(t.theme.scrollStyle.horizontalVisible&&t.theme.scrollStyle.horizontalVisible==="focus"||!t.theme.scrollStyle.horizontalVisible&&t.theme.scrollStyle.visible==="focus")&&e.hideHorizontalScrollBar(),(t.theme.scrollStyle.verticalVisible&&t.theme.scrollStyle.verticalVisible==="focus"||!t.theme.scrollStyle.verticalVisible&&t.theme.scrollStyle.visible==="focus")&&e.hideVerticalScrollBar(),t.hasListeners(at.MOUSELEAVE_CELL)&&t.stateManager.hover.cellPos.col!==-1&&t.stateManager.hover.cellPos.row!==-1&&t.fireListeners(at.MOUSELEAVE_CELL,{col:t.stateManager.hover.cellPos.col,row:t.stateManager.hover.cellPos.row,cellRange:t.getCellRangeRelativeRect({col:t.stateManager.hover.cellPos.col,row:t.stateManager.hover.cellPos.row}),scaleRatio:t.canvas.getBoundingClientRect().width/t.canvas.offsetWidth,event:i.nativeEvent,target:void 0}),n.dealTableHover();const r=i.target;r&&!r.isDescendantsOf(t.scenegraph.tableGroup)&&t.fireListeners(at.MOUSELEAVE_TABLE,{event:i.nativeEvent})})),t.scenegraph.tableGroup.addEventListener("pointerdown",(i=>{var r,o,a,s,l;if(t.hasListeners(at.MOUSEDOWN_TABLE)&&t.fireListeners(at.MOUSEDOWN_TABLE,{event:i.nativeEvent}),fXt(),t.eventManager.isDown=!0,t.eventManager.LastBodyPointerXY={x:i.x,y:i.y},t.eventManager.LastPointerXY={x:i.x,y:i.y},i.button!==0)return;const h=bn(i);if(n.downIcon=void 0,e.interactionState!==Xt.default||(t.isPivotChart()&&((r=h?.eventArgs)===null||r===void 0?void 0:r.target.type)!=="chart"&&t.scenegraph.updateChartState(null),((o=h.eventArgs)===null||o===void 0?void 0:o.target)!==((a=e.residentHoverIcon)===null||a===void 0?void 0:a.icon)&&e.hideMenu(),((s=h?.eventArgs)===null||s===void 0?void 0:s.target.type)==="chart"))return;const u=(l=t.editorManager)===null||l===void 0?void 0:l.completeEdit(i.nativeEvent);BA(u,(d=>{var c,f,g,p,v,m,y,b,_,w,C,x;if(!(!((c=t.options.customConfig)===null||c===void 0)&&c.selectCellWhenCellEditorNotExists)&&d===!1)return;const S=!((p=(g=(f=h?.eventArgs)===null||f===void 0?void 0:f.target)===null||g===void 0?void 0:g.role)===null||p===void 0)&&p.startsWith("icon")?h.eventArgs.target:!((v=i.target.role)===null||v===void 0)&&v.startsWith("icon")?i.target:void 0;if(n.downIcon=S,S&&S.attribute.interactive!==!1)S.attribute.funcType===Ye.dragReorder&&(e.startMoveCol(h.eventArgs.col,h.eventArgs.row,h.abstractPos.x,h.abstractPos.y,(C=(w=h.eventArgs)===null||w===void 0?void 0:w.event)===null||C===void 0?void 0:C.nativeEvent),e.updateInteractionState(Xt.grabing));else{if(n.cellIsHeaderCheck(h))return;if(i.pointerType==="touch"){if(n.touchEnd=!1,n.touchSetTimeout=setTimeout((()=>{n.isTouchdown=!1,n.isLongTouch=!0,(n.touchEnd||!n.checkColumnResize(h,!0)&&!n.checkRowResize(h,!0))&&(n.touchEnd||!n.checkColumnMover(h))?n.dealTableSelect(h)&&!n.touchEnd&&e.updateInteractionState(Xt.grabing):e.updateInteractionState(Xt.grabing)}),500),t.hasListeners(at.MOUSEENTER_CELL)){const A=i.path.find((T=>T.role==="cell"));A?.role!=="cell"||!Y(A.col)||!Y(A.row)||A.col===t.stateManager.hover.cellPos.col&&A.row===t.stateManager.hover.cellPos.row||A.col===((m=t.stateManager.hover.cellPosContainHeader)===null||m===void 0?void 0:m.col)&&A.row===((y=t.stateManager.hover.cellPosContainHeader)===null||y===void 0?void 0:y.row)||t.fireListeners(at.MOUSEENTER_CELL,{col:A.col,row:A.row,cellRange:t.getCellRangeRelativeRect({col:A.col,row:A.row}),scaleRatio:t.canvas.getBoundingClientRect().width/t.canvas.offsetWidth,event:i.nativeEvent,target:(b=h?.eventArgs)===null||b===void 0?void 0:b.target,mergeCellInfo:(_=h.eventArgs)===null||_===void 0?void 0:_.mergeInfo})}n.dealTableHover(h)}else{if(!n.checkCellFillhandle(h)&&(n.checkColumnResize(h,!0)||n.checkRowResize(h,!0)))return t.scenegraph.updateChartState(null),void e.updateInteractionState(Xt.grabing);if(n.checkColumnMover(h)||n.checkCellFillhandle(h,!0)&&n.dealFillSelect(h))return void e.updateInteractionState(Xt.grabing);n.dealTableSelect(h)&&e.updateInteractionState(Xt.grabing)}}if(t.hasListeners(at.MOUSEDOWN_CELL)){const A=bn(i);A.eventArgs&&t.fireListeners(at.MOUSEDOWN_CELL,{col:A.eventArgs.col,row:A.eventArgs.row,event:i.nativeEvent,target:(x=A?.eventArgs)===null||x===void 0?void 0:x.target,mergeCellInfo:A.eventArgs.mergeInfo})}}))})),t.scenegraph.tableGroup.addEventListener("pointerup",(i=>{var r,o,a,s,l,h,u,d;if(i.button===0){if(e.interactionState==="grabing"){if(e.updateInteractionState(Xt.default),e.isResizeCol())uT(t);else if(e.isResizeRow())dT(t);else if(e.isMoveCol()){const c=t.stateManager.endMoveCol();uH(t,c,i.nativeEvent)}else if(e.isSelecting()){t.stateManager.endSelectCells(),t.stateManager.isFillHandle()&&t.stateManager.endFillSelect();const c=bn(i);if(t.eventManager.isDraging&&c.eventArgs&&t.hasListeners(at.DRAG_SELECT_END)){const f={event:i.nativeEvent,cells:[],col:c.eventArgs.target.col,row:c.eventArgs.target.row,scaleRatio:t.canvas.getBoundingClientRect().width/t.canvas.offsetWidth,target:(r=c?.eventArgs)===null||r===void 0?void 0:r.target,mergeCellInfo:(o=c.eventArgs)===null||o===void 0?void 0:o.mergeInfo};f.cells=t.getSelectedCellInfos(),t.fireListeners(at.DRAG_SELECT_END,f)}}}else e.interactionState===Xt.scrolling&&e.updateInteractionState(Xt.default);if(!t.eventManager.isDraging){const c=bn(i);if(!n.isTouchMove&&i.button===0&&c.eventArgs&&t.hasListeners(at.CLICK_CELL)){const{col:f,row:g}=c.eventArgs,p=t.getCellInfo(f,g);let v,m;if(!((a=c.eventArgs)===null||a===void 0)&&a.target){const b=Ry((s=c.eventArgs)===null||s===void 0?void 0:s.target);b&&(v=b.icon,m=b.position)}const y=Object.assign(Object.assign({},p),{event:i.nativeEvent,federatedEvent:i,cells:[],targetIcon:v?{name:v.name,position:m,funcType:v.attribute.funcType}:void 0,target:(l=c?.eventArgs)===null||l===void 0?void 0:l.target,mergeCellInfo:(h=c.eventArgs)===null||h===void 0?void 0:h.mergeInfo});t.fireListeners(at.CLICK_CELL,y)}}if(t.hasListeners(at.MOUSEUP_CELL)){const c=bn(i);c.eventArgs&&t.fireListeners(at.MOUSEUP_CELL,{col:c.eventArgs.col,row:c.eventArgs.row,event:i.nativeEvent,target:(u=c?.eventArgs)===null||u===void 0?void 0:u.target,mergeCellInfo:(d=c.eventArgs)===null||d===void 0?void 0:d.mergeInfo})}setTimeout((()=>{n.isDown=!1,n.isTouchdown=!1,n.isTouchMove=!1,n.isDraging=!1,n.touchMovePoints=[]}),0)}})),t.scenegraph.tableGroup.addEventListener("rightdown",(i=>{var r,o,a,s,l,h,u;const d=bn(i);if(d.eventArgs){e.triggerContextMenu(d.eventArgs.col,d.eventArgs.row,d.abstractPos.x,d.abstractPos.y);const{col:c,row:f}=d.eventArgs;if(c>=0&&f>=0){const g=t.getSelectedCellRanges();let p=!1;if(g.length>0)for(let m=0;m<g.length;m++){const y=g[m],b=y.start.col,_=y.end.col,w=y.start.row,C=y.end.row;if(c>=b&&c<=_&&f>=w&&f<=C||c>=_&&c<=b&&f>=C&&f<=w||c>=b&&c<=_&&f>=C&&f<=w||c>=_&&c<=b&&f>=w&&f<=C){p=!0;break}}const v=(r=t.options.select)===null||r===void 0?void 0:r.disableSelectOnContextMenu;if(p||v||t.selectCell(c,f),t.hasListeners(at.CONTEXTMENU_CELL)){const m=t.getCellInfo(c,f);let y,b;if(!((o=d.eventArgs)===null||o===void 0)&&o.target){const w=Ry((a=d.eventArgs)===null||a===void 0?void 0:a.target);w&&(y=w.icon,b=w.position)}const _=Object.assign(Object.assign({},m),{event:i.nativeEvent,cells:[],targetIcon:y?{name:y.name,position:b,funcType:y.attribute.funcType}:void 0,target:(s=d?.eventArgs)===null||s===void 0?void 0:s.target,mergeCellInfo:(l=d.eventArgs)===null||l===void 0?void 0:l.mergeInfo});((u=(h=t.options.eventOptions)===null||h===void 0?void 0:h.contextmenuReturnAllSelectedCells)===null||u===void 0||u)&&(EXt(t.stateManager.select.ranges,c,f)?_.cells=t.getSelectedCellInfos():_.cells=[[m]]),t.fireListeners(at.CONTEXTMENU_CELL,_)}}}})),t.scenegraph.tableGroup.addEventListener("pointertap",(i=>{var r;if(t.stateManager.columnResize.resizing)return;const o=bn(i);if(!t.stateManager.columnResize.resizing&&!t.stateManager.columnMove.moving&&(n.dealIconClick(i,o),o?.eventArgs&&n.touchSetTimeout&&i.pointerType==="touch")){const a=bn(i);if(n.touchSetTimeout){clearTimeout(n.touchSetTimeout);const s=!!(!((r=e.select.ranges)===null||r===void 0)&&r.length);n.dealTableSelect(a),e.endSelectCells(!0,s),n.touchSetTimeout=void 0}}})),t.scenegraph.stage.addEventListener("pointerdown",(i=>{var r,o,a,s;const l=bn(i);!((r=l.eventArgs)===null||r===void 0)&&r.target&&((o=l.eventArgs)===null||o===void 0?void 0:o.target)===((a=e.residentHoverIcon)===null||a===void 0?void 0:a.icon)||e.hideMenu();let h=!1;const u=i.target;u===t.scenegraph.tableGroup||u.isDescendantsOf(t.scenegraph.tableGroup)||(h=(s=t.editorManager)===null||s===void 0?void 0:s.completeEdit(i.nativeEvent)),BA(h,(d=>{var c,f;if(!(!((c=t.options.customConfig)===null||c===void 0)&&c.selectCellWhenCellEditorNotExists)&&d===!1)return;const g=!((f=i.target.role)===null||f===void 0)&&f.startsWith("icon")?i.target:void 0;if(n.downIcon=g,!(i.pointerType==="touch"||g||n.checkCellFillhandle(l)||e.columnResize.resizing||!n.checkColumnResize(l,!0))){t.scenegraph.updateChartState(null),e.updateInteractionState(Xt.grabing);const{eventArgs:p}=l;p?.targetCell||t.getCellAt(l.abstractPos.x-t.theme.columnResize.resizeHotSpotSize/2,l.abstractPos.y)&&t.hasListeners(at.MOUSEDOWN_TABLE)&&t.fireListeners(at.MOUSEDOWN_TABLE,{event:i.nativeEvent})}}))})),t.scenegraph.stage.addEventListener("pointerup",(i=>{e.interactionState==="grabing"&&(e.updateInteractionState(Xt.default),e.isResizeCol()?uT(t):e.isResizeRow()&&dT(t))})),t.scenegraph.stage.addEventListener("pointertap",(i=>{var r,o,a,s,l;const h=i.target;if(t.eventManager.isDraging||!h||!h.isDescendantsOf(t.scenegraph.stage)&&h.stage!==h||h.isDescendantsOf(t.scenegraph.tableGroup))t.eventManager.isDraging&&e.isSelecting()&&e.endSelectCells();else{e.updateInteractionState(Xt.default),n.dealTableHover();const u=!!(!((r=e.select.ranges)===null||r===void 0)&&r.length);!((o=t.options.customConfig)===null||o===void 0)&&o.cancelSelectCellHook?!((a=t.options.customConfig)===null||a===void 0)&&a.cancelSelectCellHook(i)&&n.dealTableSelect():((l=(s=t.options.select)===null||s===void 0?void 0:s.blankAreaClickDeselect)===null||l===void 0||l)&&n.dealTableSelect(),e.endSelectCells(!0,u),e.updateCursor(),t.scenegraph.updateChartState(null)}})),t.scenegraph.stage.addEventListener("pointermove",(i=>{const r=bn(i);e.isResizeCol()||n.checkColumnResize(r)?t.stateManager.select&&n.checkCellFillhandle(r)?e.updateCursor("crosshair"):e.updateCursor("col-resize"):e.isResizeRow()||n.checkRowResize(r)?t.stateManager.select&&n.checkCellFillhandle(r)?e.updateCursor("crosshair"):e.updateCursor("row-resize"):e.isMoveCol()||e.updateCursor()})),t.scenegraph.tableGroup.addEventListener("checkbox_state_change",(i=>{var r,o;const a=bn(i),{col:s,row:l}=a.eventArgs,h=t.getCellInfo(s,l),u=un(t,s,l);if(u)for(let c=u.start.col;c<=u.end.col;c++)for(let f=u.start.row;f<=u.end.row;f++)t.scenegraph.getCell(c,f).forEachChildren((g=>{g.name==="checkbox"&&g.setAttributes({checked:i.target.attribute.checked,indeterminate:i.target.attribute.indeterminate})}));const d=Object.assign(Object.assign({},h),{event:i.nativeEvent,target:(r=a?.eventArgs)===null||r===void 0?void 0:r.target,mergeCellInfo:(o=a?.eventArgs)===null||o===void 0?void 0:o.mergeInfo,checked:i.detail.checked});if(t.isHeader(s,l))t.stateManager.setHeaderCheckedState(h.field,i.detail.checked),t.internalProps.enableHeaderCheckboxCascade&&t.getCellType(s,l)==="checkbox"&&t.scenegraph.updateCheckboxCellState(s,l,i.detail.checked);else if(t.stateManager.setCheckedState(s,l,h.field,i.detail.checked),t.internalProps.enableCheckboxCascade&&t.getCellType(s,l)==="checkbox"){const c=t.stateManager.headerCheckedState[h.field],f=t.stateManager.updateHeaderCheckedState(h.field,s,l);c!==f&&t.scenegraph.updateHeaderCheckboxCellState(s,l,f)}t.fireListeners(at.CHECKBOX_STATE_CHANGE,d),t.scenegraph.updateNextFrame()})),t.scenegraph.tableGroup.addEventListener("radio_checked",(i=>{var r,o,a;const s=bn(i),{col:l,row:h,target:u}=s.eventArgs,d=t.getCellInfo(l,h),c=(r=WKt.exec(u.id))===null||r===void 0?void 0:r[1],f=un(t,l,h);if(f)for(let m=f.start.col;m<=f.end.col;m++)for(let y=f.start.row;y<=f.end.row;y++)t.scenegraph.getCell(m,y).forEachChildren((b=>{b.name==="radio"&&b.id===u.id&&b.setAttributes({checked:!0})}));const g=t.getBodyColumnDefine(l,h).radioCheckType||"column";if(g==="cell")if(f)for(let m=f.start.col;m<=f.end.col;m++)for(let y=f.start.row;y<=f.end.row;y++)t.scenegraph.getCell(m,y).forEachChildren((b=>{b.name==="radio"&&b.id!==u.id&&b.setAttributes({checked:!1})}));else t.scenegraph.getCell(l,h).forEachChildren((m=>{m.name==="radio"&&m.id!==u.id&&m.setAttributes({checked:!1})}));else g==="column"&&t.scenegraph.getColGroup(l).forEachChildren((m=>{m.forEachChildren((y=>{y.name==="radio"&&y.id!==u.id&&y.setAttributes({checked:!1})}))}));const p=c?Number(c):void 0;t.stateManager.setRadioState(l,h,d.field,g,p);const v=Object.assign(Object.assign({},d),{event:i.nativeEvent,target:(o=s?.eventArgs)===null||o===void 0?void 0:o.target,mergeCellInfo:(a=s?.eventArgs)===null||a===void 0?void 0:a.mergeInfo,radioIndexInCell:p});t.fireListeners(at.RADIO_STATE_CHANGE,v),t.scenegraph.updateNextFrame()})),t.scenegraph.tableGroup.addEventListener("switch_state_change",(i=>{var r,o;const a=bn(i),{col:s,row:l,target:h}=a.eventArgs,u=t.getCellInfo(s,l),d=un(t,s,l);if(d)for(let f=d.start.col;f<=d.end.col;f++)for(let g=d.start.row;g<=d.end.row;g++)t.scenegraph.getCell(f,g).forEachChildren((p=>{p.name==="switch"&&p.setAttributes({checked:i.target.attribute.checked})}));const c=Object.assign(Object.assign({},u),{event:i.nativeEvent,target:(r=a?.eventArgs)===null||r===void 0?void 0:r.target,mergeCellInfo:(o=a?.eventArgs)===null||o===void 0?void 0:o.mergeInfo,checked:i.detail.checked});t.stateManager.setCheckedState(s,l,u.field,i.detail.checked),t.fireListeners(at.SWITCH_STATE_CHANGE,c),t.scenegraph.updateNextFrame()})),t.scenegraph.stage.addEventListener("wheel",(i=>{var r;i.path.find((o=>o.name==="legend"))||((r=t.editorManager)===null||r===void 0||r.completeEdit(),t.eventManager._enableTableScroll&&hT(i,e))}))}function dte(n){const t=n.table;n.gesture=new k8t(t.scenegraph.tableGroup,{tap:{interval:300}}),n.gesture.on("doubletap",(e=>{cte(e,t)}))}function uT(n){n.stateManager.endResizeCol();const t=[];for(let e=0;e<n.colCount;e++)t.push(n.getColWidth(e));n.fireListeners(at.RESIZE_COLUMN_END,{col:n.stateManager.columnResize.col,colWidths:t})}function dT(n){n.stateManager.endResizeRow(),n.fireListeners(at.RESIZE_ROW_END,{row:n.stateManager.rowResize.row,rowHeight:n.getRowHeight(n.stateManager.rowResize.row)})}function cte(n,t){var e,i,r,o,a,s;const l=bn(n);let h=-1,u=-1;l.eventArgs&&(h=l.eventArgs.col,u=l.eventArgs.row);const d=t.getCellValue(h,u),c=(i=(e=l.eventArgs)===null||e===void 0?void 0:e.targetCell)===null||i===void 0?void 0:i.globalAABBBounds;if(c&&t.internalProps.focusControl.setFocusRect(new Lc(c.x1+t.scrollLeft,c.y1+t.scrollTop,c.x2-c.x1,c.y2-c.y1),d),t.hasListeners(at.DBLCLICK_CELL)){const f=t.getCellInfo(h,u);let g,p;if(!((r=l.eventArgs)===null||r===void 0)&&r.target){const m=Ry((o=l.eventArgs)===null||o===void 0?void 0:o.target);m&&(g=m.icon,p=m.position)}const v=Object.assign(Object.assign({},f),{event:n.nativeEvent,federatedEvent:n,cells:[],targetIcon:g?{name:g.name,position:p,funcType:g.attribute.funcType}:void 0,target:(a=l?.eventArgs)===null||a===void 0?void 0:a.target,mergeCellInfo:(s=l?.eventArgs)===null||s===void 0?void 0:s.mergeInfo});t.fireListeners(at.DBLCLICK_CELL,v)}}function fte(n){const t=n.table,e=t.stateManager,i=t.scenegraph;i.component.vScrollBar.addEventListener("pointerover",(a=>{e.showVerticalScrollBar()})),i.component.hScrollBar.addEventListener("pointerover",(a=>{e.showHorizontalScrollBar()})),i.component.vScrollBar.addEventListener("pointerout",(a=>{e.interactionState!==Xt.scrolling&&e.hideVerticalScrollBar()})),i.component.hScrollBar.addEventListener("pointerout",(a=>{e.interactionState!==Xt.scrolling&&e.hideHorizontalScrollBar()})),i.component.vScrollBar.addEventListener("pointermove",(a=>{i.table.stateManager.updateCursor("default"),a.stopPropagation()})),i.component.vScrollBar.addEventListener("pointerdown",(a=>{a.stopPropagation(),i.table.hasListeners(at.MOUSEDOWN_TABLE)&&i.table.fireListeners(at.MOUSEDOWN_TABLE,{event:a.nativeEvent})})),i.component.vScrollBar.addEventListener("scrollDown",(a=>{var s;i.table.eventManager.LastBodyPointerXY={x:a.x,y:a.y},i.table.eventManager.isDown=!0,e.interactionState!==Xt.scrolling&&e.updateInteractionState(Xt.scrolling),i.table.stateManager.hideMenu(),(s=i.table.editorManager)===null||s===void 0||s.completeEdit(),i.table.hasListeners(at.MOUSEDOWN_TABLE)&&i.table.fireListeners(at.MOUSEDOWN_TABLE,{event:a.nativeEvent})})),i.component.vScrollBar.addEventListener("pointerup",(()=>{e.fastScrolling=!1,i.table.eventManager.isDraging=!1,e.interactionState===Xt.scrolling&&e.updateInteractionState(Xt.default)})),i.component.vScrollBar.addEventListener("pointerupoutside",(()=>{e.fastScrolling=!1,e.interactionState===Xt.scrolling&&e.updateInteractionState(Xt.default)})),i.component.vScrollBar.addEventListener("scrollUp",(a=>{i.table.eventManager.isDraging=!1})),i.component.hScrollBar.addEventListener("pointermove",(a=>{i.table.stateManager.updateCursor(),a.stopPropagation()})),i.component.hScrollBar.addEventListener("pointerdown",(a=>{a.stopPropagation(),i.table.hasListeners(at.MOUSEDOWN_TABLE)&&i.table.fireListeners(at.MOUSEDOWN_TABLE,{event:a.nativeEvent})})),i.component.hScrollBar.addEventListener("scrollDown",(a=>{var s;i.table.eventManager.LastBodyPointerXY={x:a.x,y:a.y},i.table.eventManager.isDown=!0,e.interactionState!==Xt.scrolling&&e.updateInteractionState(Xt.scrolling),i.table.stateManager.hideMenu(),(s=i.table.editorManager)===null||s===void 0||s.completeEdit(),i.table.hasListeners(at.MOUSEDOWN_TABLE)&&i.table.fireListeners(at.MOUSEDOWN_TABLE,{event:a.nativeEvent})})),i.component.hScrollBar.addEventListener("pointerup",(()=>{e.fastScrolling=!1,i.table.eventManager.isDraging=!1,e.interactionState===Xt.scrolling&&e.updateInteractionState(Xt.default)})),i.component.hScrollBar.addEventListener("pointerupoutside",(()=>{e.fastScrolling=!1,e.interactionState===Xt.scrolling&&e.updateInteractionState(Xt.default)})),i.component.hScrollBar.addEventListener("scrollUp",(a=>{i.table.eventManager.isDraging=!1}));const r=jU(e.updateVerticalScrollBar,20),o=jU(e.updateHorizontalScrollBar,20);i.component.vScrollBar.addEventListener("scrollDrag",(a=>{i.table.eventManager.isDown&&(i.table.eventManager.isDraging=!0),e.fastScrolling=!0,e.interactionState!==Xt.scrolling&&e.updateInteractionState(Xt.scrolling);const s=a.detail.value[0]/(1-a.detail.value[1]+a.detail.value[0]);r(s,a)})),i.component.hScrollBar.addEventListener("scrollDrag",(a=>{i.table.eventManager.isDown&&(i.table.eventManager.isDraging=!0),e.fastScrolling=!0,e.interactionState!==Xt.scrolling&&e.updateInteractionState(Xt.scrolling);const s=a.detail.value[0]/(1-a.detail.value[1]+a.detail.value[0]);o(s)}))}let _c=1;function Tht(){return _lt?_c=1:(_c=Math.ceil(window.devicePixelRatio||1),_c>1&&_c%2!=0&&(_c+=1)),_c}Tht();var NL=function(n,t,e,i){return new(e||(e=Promise))((function(r,o){function a(h){try{l(i.next(h))}catch(u){o(u)}}function s(h){try{l(i.throw(h))}catch(u){o(u)}}function l(h){var u;h.done?r(h.value):(u=h.value,u instanceof e?u:new e((function(d){d(u)}))).then(a,s)}l((i=i.apply(n,t||[])).next())}))};function gte(n){const t=n.table,e=t.stateManager,i=t.internalProps.handler;function r(l){var h;if(t.hasListeners(at.KEYDOWN)){const u={keyCode:(h=l.keyCode)!==null&&h!==void 0?h:l.which,code:l.code,event:l,scaleRatio:t.canvas.getBoundingClientRect().width/t.canvas.offsetWidth};t.fireListeners(at.KEYDOWN,u)}}i.on(t.getElement(),"blur",(l=>{n.dealTableHover()})),i.on(t.getElement(),"keydown",(l=>{var h,u,d,c,f,g,p,v,m,y,b,_,w,C,x,S,A,T,M,R,L,B,P,k,E,D,I,O;const H={keyCode:(h=l.keyCode)!==null&&h!==void 0?h:l.which,code:l.code,event:l};if(t.fireListeners(at.BEFORE_KEYDOWN,H),l.key==="a"&&(l.ctrlKey||l.metaKey))!((u=t.keyboardOptions)===null||u===void 0)&&u.selectAllOnCtrlA&&(l.preventDefault(),n.deelTableSelectAll());else if(e.select.cellPos.col>=0&&e.select.cellPos.row>=0&&(l.key==="ArrowUp"||l.key==="ArrowDown"||l.key==="ArrowLeft"||l.key==="ArrowRight")){if(((c=(d=t.options.keyboardOptions)===null||d===void 0?void 0:d.moveEditCellOnArrowKeys)===null||c===void 0||!c)&&(!((f=t.editorManager)===null||f===void 0)&&f.editingEditor)||((g=t.options.keyboardOptions)===null||g===void 0?void 0:g.moveSelectedCellOnArrowKeys)===!1)return;let F,N;if(l.preventDefault(),l.stopPropagation(),l.key==="ArrowUp"?l.ctrlKey||l.metaKey?(F=e.select.cellPos.col,N=0):(l.shiftKey,F=e.select.cellPos.col,N=Math.min(t.rowCount-1,Math.max(0,e.select.cellPos.row-1))):l.key==="ArrowDown"?l.ctrlKey||l.metaKey?(F=e.select.cellPos.col,N=t.rowCount-1):(l.shiftKey,F=e.select.cellPos.col,N=Math.min(t.rowCount-1,Math.max(0,e.select.cellPos.row+1))):l.key==="ArrowLeft"?l.ctrlKey||l.metaKey?(F=0,N=e.select.cellPos.row):(l.shiftKey,N=e.select.cellPos.row,F=Math.min(t.colCount-1,Math.max(0,e.select.cellPos.col-1))):l.key==="ArrowRight"&&(l.ctrlKey||l.metaKey?(F=t.colCount-1,N=e.select.cellPos.row):(l.shiftKey,N=e.select.cellPos.row,F=Math.min(t.colCount-1,Math.max(0,e.select.cellPos.col+1)))),Gu(t,F,N))return;t.selectCell(F,N,l.shiftKey),(v=(p=t.options.keyboardOptions)===null||p===void 0?void 0:p.moveEditCellOnArrowKeys)!==null&&v!==void 0&&v&&(!((m=t.editorManager)===null||m===void 0)&&m.editingEditor)&&((y=t.editorManager)===null||y===void 0||y.completeEdit(),t.getElement().focus(),t.getEditor(F,N)&&((b=t.editorManager)===null||b===void 0||b.startEditCell(F,N)))}else if(l.key==="Escape")(_=t.editorManager)===null||_===void 0||_.cancelEdit(),t.getElement().focus();else if(l.key==="Enter"){if(!((w=t.editorManager)===null||w===void 0)&&w.editingEditor){if(r(l),(C=t.editorManager)===null||C===void 0||C.completeEdit(),t.getElement().focus(),((x=t.options.keyboardOptions)===null||x===void 0?void 0:x.moveFocusCellOnEnter)===!0){const F=e.select.cellPos.col,N=Math.min(t.rowCount-1,Math.max(0,e.select.cellPos.row+1));if(Gu(t,F,N))return;t.selectCell(F,N,l.shiftKey)}return}if(((S=t.options.keyboardOptions)===null||S===void 0?void 0:S.moveFocusCellOnEnter)===!0){const F=e.select.cellPos.col,N=Math.min(t.rowCount-1,Math.max(0,e.select.cellPos.row+1));if(Gu(t,F,N))return;t.selectCell(F,N,l.shiftKey)}else if(((T=(A=t.options.keyboardOptions)===null||A===void 0?void 0:A.editCellOnEnter)===null||T===void 0||T)&&((R=(M=t.stateManager.select.ranges)===null||M===void 0?void 0:M.length)!==null&&R!==void 0?R:0)===1){const F=t.stateManager.select.ranges[0].start.col,N=t.stateManager.select.ranges[0].start.row,$=t.stateManager.select.ranges[0].end.col,V=t.stateManager.select.ranges[0].end.row;F===$&&N===V&&t.getEditor(F,N)&&((L=t.editorManager)===null||L===void 0||L.startEditCell(F,N))}}else if(l.key==="Tab"){if(((P=(B=t.options.keyboardOptions)===null||B===void 0?void 0:B.moveFocusCellOnTab)===null||P===void 0||P)&&e.select.cellPos.col>=0&&e.select.cellPos.row>=0){if(e.select.cellPos.col===t.colCount-1&&e.select.cellPos.row===t.rowCount-1)return;let F,N;if(l.preventDefault(),e.select.cellPos.col===t.colCount-1?(N=Math.min(t.rowCount-1,e.select.cellPos.row+1),F=t.rowHeaderLevelCount):(N=e.select.cellPos.row,F=e.select.cellPos.col+1),Gu(t,F,N))return;t.selectCell(F,N),!((k=t.editorManager)===null||k===void 0)&&k.editingEditor&&((E=t.editorManager)===null||E===void 0||E.completeEdit(),t.getElement().focus(),t.getEditor(F,N)&&((D=t.editorManager)===null||D===void 0||D.startEditCell(F,N)))}}else if(!l.ctrlKey&&!l.metaKey){const F=t.options.editCellTrigger;if((F==="keydown"||Array.isArray(F)&&F.includes("keydown"))&&!(!((I=t.editorManager)===null||I===void 0)&&I.editingEditor)){const N=/^[a-zA-Z0-9+\-*\/%=.,\s]$/;l.key.match(N)&&(t.editorManager&&(t.editorManager.beginTriggerEditCellMode="keydown"),(O=t.editorManager)===null||O===void 0||O.startEditCell(e.select.cellPos.col,e.select.cellPos.row,""))}}r(l)})),i.on(t.getElement(),"copy",(l=>NL(this,void 0,void 0,(function*(){var h;!((h=t.keyboardOptions)===null||h===void 0)&&h.copySelected&&n.handleCopy(l)})))),i.on(t.getElement(),"cut",(l=>NL(this,void 0,void 0,(function*(){var h;!((h=t.keyboardOptions)===null||h===void 0)&&h.cutSelected&&n.handleCut(l)})))),i.on(t.getElement(),"paste",(l=>NL(this,void 0,void 0,(function*(){var h;!((h=t.keyboardOptions)===null||h===void 0)&&h.pasteValueToCell&&n.handlePaste(l)})))),i.on(t.getElement(),"contextmenu",(l=>{var h;((h=t.eventOptions)===null||h===void 0?void 0:h.preventDefaultContextMenu)!==!1?l.preventDefault():a(l)})),t.options.canvas||i.on(t.getContainer(),"resize",(l=>{var h;t.isReleased||l.width===0&&l.height===0||((t.autoFillWidth||t.autoFillHeight)&&((h=t.editorManager)===null||h===void 0||h.completeEdit()),Y(t.options.pixelRatio)||t.setPixelRatio(Tht()),l.windowSizeNotChange||t.resize())}));const o=l=>{var h;if(t.isReleased)return;t.eventManager.LastBodyPointerXY={x:l.x,y:l.y},t.eventManager.isDown=!0;const u=l.target;if(!t.getElement().contains(u)&&!t.internalProps.menuHandler.containElement(u)){const d=(h=t.editorManager)===null||h===void 0?void 0:h.completeEdit(l);BA(d,(c=>{var f,g;if(c!==!1&&(!((f=t.options.select)===null||f===void 0)&&f.outsideClickDeselect)){const p=!!(!((g=e.select.ranges)===null||g===void 0)&&g.length);n.dealTableSelect(),e.endSelectCells(!0,p)}}))}};n.globalEventListeners.push({name:"pointerdown",env:"vglobal",callback:o}),jt.addEventListener("pointerdown",o);const a=l=>{var h,u;if(t.isReleased)return;const d=l.target;if(d!==t.canvas&&(c=>{var f,g;if(e.menu.isShow&&setTimeout((()=>{t.internalProps.menuHandler.pointInMenuElement(c.clientX,c.clientY)||e.menu.isShow&&e.hideMenu()}),0),e.isResizeCol())uT(t);else if(e.isResizeRow())dT(t);else if(e.isMoveCol()){const p=t.stateManager.endMoveCol();uH(t,p,c)}else if(e.isSelecting()&&(!((g=(f=t.stateManager.select)===null||f===void 0?void 0:f.ranges)===null||g===void 0)&&g.length)){const p=t.stateManager.select.ranges[t.stateManager.select.ranges.length-1].end.col,v=t.stateManager.select.ranges[t.stateManager.select.ranges.length-1].end.row;if(t.stateManager.endSelectCells(),t.hasListeners(at.DRAG_SELECT_END)){const m={event:c,cells:[],col:p,row:v,scaleRatio:t.canvas.getBoundingClientRect().width/t.canvas.offsetWidth,target:void 0};m.cells=t.getSelectedCellInfos(),t.fireListeners(at.DRAG_SELECT_END,m)}}})(l),t.eventManager.LastBodyPointerXY=null,t.eventManager.isDown=!1,t.eventManager.isDraging=!1,t.eventManager.inertiaScroll.endInertia(),e.interactionState==="grabing"&&e.isResizeCol())uT(t);else if(e.interactionState==="grabing"&&e.isResizeRow())dT(t);else if(e.isMoveCol()){const c=t.stateManager.endMoveCol();uH(t,c,l)}else if(!((h=t.editorManager)===null||h===void 0)&&h.editingEditor&&!t.getElement().contains(d)){const c=(u=t.editorManager)===null||u===void 0?void 0:u.completeEdit(l);BA(c,(f=>{f!==!1&&(e.updateInteractionState(Xt.default),n.dealTableHover())}))}e.updateInteractionState(Xt.default)};n.globalEventListeners.push({name:"pointerup",env:"vglobal",callback:a}),jt.addEventListener("pointerup",a);const s=l=>{var h,u,d,c,f;if(t.eventManager.isDown&&t.eventManager.LastBodyPointerXY){const m=(u=(h=t.eventManager.LastBodyPointerXY)===null||h===void 0?void 0:h.x)!==null&&u!==void 0?u:l.x,y=(c=(d=t.eventManager.LastBodyPointerXY)===null||d===void 0?void 0:d.y)!==null&&c!==void 0?c:l.y;(Math.abs(m-l.x)>1||Math.abs(y-l.y)>1)&&(t.eventManager.isDraging=!0)}const{x:g,y:p}=t._getMouseAbstractPoint(l);e.interactionState===Xt.grabing&&(e.isResizeCol()?(n.dealColumnResize(g,p),t.hasListeners(at.RESIZE_COLUMN)&&t.fireListeners(at.RESIZE_COLUMN,{col:t.stateManager.columnResize.col,colWidth:t.getColWidth(t.stateManager.columnResize.col)})):e.isResizeRow()&&(n.dealRowResize(g,p),t.hasListeners(at.RESIZE_ROW)&&t.fireListeners(at.RESIZE_ROW,{row:t.stateManager.rowResize.row,rowHeight:t.getRowHeight(t.stateManager.rowResize.row)})));const v=t.stateManager.isSelecting();if(n._enableTableScroll&&n.isDraging&&v&&((f=t.stateManager.select.ranges)===null||f===void 0?void 0:f.length)>0){const m=t.getDrawRange(),y=t.getFrozenRowsHeight(),b=t.getBottomFrozenRowsHeight(),_=t.getFrozenColsWidth(),w=t.getRightFrozenColsWidth(),C=t.stateManager.select.ranges[t.stateManager.select.ranges.length-1].start;if(t.isSeriesNumber(C.col,C.row))return;const x=t.stateManager.select.ranges[t.stateManager.select.ranges.length-1].end,S=(t.isFrozenRow(C.row)===!1||t.isFrozenRow(x.row)===!1)&&t.getAllRowsHeight()>t.tableNoFrameHeight,A=(t.isFrozenColumn(C.col)===!1||t.isFrozenColumn(x.col)===!1)&&t.getAllColsWidth()>t.tableNoFrameWidth;if((p>m.bottom-b||p<m.top+y)&&S||(g>m.right-w||g<m.left+_)&&A){t.eventManager.scrollXSpeed=0,t.eventManager.scrollYSpeed=0;let T=!1,M=!1,R=!1,L=!1;p>m.bottom-b&&S&&t.scrollTop+t.tableNoFrameHeight<t.getAllRowsHeight()?(T=!0,t.eventManager.scrollYSpeed=-(p-m.bottom+b)/50):p<m.top+y&&S&&t.scrollTop>0&&(M=!0,t.eventManager.scrollYSpeed=-(p-m.top-y)/50),g>m.right-w&&A&&t.scrollLeft+t.tableNoFrameWidth<t.getAllColsWidth()?(R=!0,t.eventManager.scrollXSpeed=-(g-m.right+w)/50):g<m.left+_&&A&&t.scrollLeft>0&&(L=!0,t.eventManager.scrollXSpeed=-(g-m.left-_)/50),t.eventManager.inertiaScroll.startInertia(t.eventManager.scrollXSpeed,t.eventManager.scrollYSpeed,1),t.eventManager.inertiaScroll.setScrollHandle(((B,P)=>{var k;let E,D;hT({deltaX:-B,deltaY:-P},t.stateManager,!1),T?D=t.scrollTop+m.height-b-20:M&&(D=t.scrollTop+y+20),R?E=t.scrollLeft+m.width-w-20:L&&(E=t.scrollLeft+_+20);let I=!1,O=!1;R||L||(g>t.tableNoFrameWidth-t.getRightFrozenColsWidth()&&g<t.tableNoFrameWidth||g>0&&g<t.getFrozenColsWidth()?(E=g,O=!0):E=t.scrollLeft+g),T||M||(p>t.tableNoFrameHeight-t.getBottomFrozenRowsHeight()&&p<t.tableNoFrameHeight||p>0&&p<t.getFrozenRowsHeight()?(D=p,I=!0):D=t.scrollTop+p),t.stateManager.updateInteractionState(Xt.grabing);const H=t.getTargetColAtConsiderRightFrozen(E,O),F=t.getTargetRowAtConsiderBottomFrozen(D,I);!(!((k=t.options.select)===null||k===void 0)&&k.disableDragSelect)&&Y(H)&&Y(F)&&t.stateManager.updateSelectPos(t.stateManager.select.selectInline==="row"?t.colCount-1:H.col,t.stateManager.select.selectInline==="col"?t.rowCount-1:F.row,!1,!1,!1,!1)}))}else t.eventManager.inertiaScroll.isInertiaScrolling()?t.eventManager.inertiaScroll.endInertia():t.eventManager.scrollYSpeed=0}};n.globalEventListeners.push({name:"pointermove",env:"vglobal",callback:s}),jt.addEventListener("pointermove",s)}function pte(n){const t=n.table,e=t.stateManager,i=t.scenegraph;if(jt.envContribution.supportsTouchEvents===!1)return;jt.addEventListener("contextmenu",(s=>{s.stopPropagation(),s.preventDefault()}),{capture:!0}),n.touchMovePoints=[],t.scenegraph.tableGroup.addEventListener("touchstart",(s=>{var l,h,u,d,c,f,g,p;if(s.target.isChildOf(i.component.vScrollBar)||s.target.isChildOf(i.component.vScrollBar))return;n.isTouchdown=!0;const v=s.nativeEvent;n.touchMovePoints.push({x:t.rotateDegree?(u=(h=(l=v.changedTouches)===null||l===void 0?void 0:l[0])===null||h===void 0?void 0:h._canvasX)!==null&&u!==void 0?u:(d=s.canvas)===null||d===void 0?void 0:d.x:s.page.x,y:t.rotateDegree?(g=(f=(c=v.changedTouches)===null||c===void 0?void 0:c[0])===null||f===void 0?void 0:f._canvasY)!==null&&g!==void 0?g:(p=s.canvas)===null||p===void 0?void 0:p.y:s.page.y,timestamp:Date.now()})}));const r=s=>{var l,h;if(n.isLongTouch&&s.preventDefault(),n.isTouchdown&&JX(s)){if(n.isTouchMove=!0,((h=(l=n.downIcon)===null||l===void 0?void 0:l.attribute)===null||h===void 0?void 0:h.funcType)===Ye.dragReorder)s.preventDefault();else if(n.touchMovePoints.length>4&&n.touchMovePoints.shift(),n.touchMovePoints.push({x:t.rotateDegree?s.changedTouches[0]._canvasX:s.changedTouches[0].pageX,y:t.rotateDegree?s.changedTouches[0]._canvasY:s.changedTouches[0].pageY,timestamp:Date.now()}),n._enableTableScroll){const u=-n.touchMovePoints[n.touchMovePoints.length-1].x+n.touchMovePoints[n.touchMovePoints.length-2].x,d=-n.touchMovePoints[n.touchMovePoints.length-1].y+n.touchMovePoints[n.touchMovePoints.length-2].y;hT({deltaX:u,deltaY:d},e),s.cancelable&&(t.internalProps.overscrollBehavior==="none"||Math.abs(d)>=Math.abs(u)&&d!==0&&Sht(d,e)||Math.abs(d)<=Math.abs(u)&&u!==0&&Aht(u,e))&&s.preventDefault()}}};jt.addEventListener("touchmove",r,{passive:!1}),n.globalEventListeners.push({name:"touchmove",env:"vglobal",callback:r});const o=s=>{var l,h,u,d;if(n.touchEnd=!0,n.isLongTouch=!1,n.isTouchdown&&JX(s)){if(((h=(l=n.downIcon)===null||l===void 0?void 0:l.attribute)===null||h===void 0?void 0:h.funcType)===Ye.dragReorder)s.preventDefault();else if(!((u=n.touchMovePoints)===null||u===void 0)&&u.length&&(n.touchMovePoints.length>4&&n.touchMovePoints.shift(),n.touchMovePoints.push({x:t.rotateDegree?s.changedTouches[0]._canvasX:s.changedTouches[0].pageX,y:t.rotateDegree?s.changedTouches[0]._canvasY:s.changedTouches[0].pageY,timestamp:Date.now()}),n._enableTableScroll)){const c=n.touchMovePoints[0],f=n.touchMovePoints[((d=n.touchMovePoints)===null||d===void 0?void 0:d.length)-1],g=(f.x-c.x)/(f.timestamp-c.timestamp),p=(f.y-c.y)/(f.timestamp-c.timestamp);n.inertiaScroll.startInertia(g,p,.95),t.eventManager.inertiaScroll.setScrollHandle(((v,m)=>{hT({deltaX:-v,deltaY:-m},t.stateManager)}))}n.isTouchdown=!1,n.isTouchMove=!1,n.isDraging=!1,n.touchMovePoints=[]}};jt.addEventListener("touchend",o),n.globalEventListeners.push({name:"touchend",env:"vglobal",callback:o});const a=s=>{n.touchEnd=!0,n.isLongTouch=!1,n.isTouchdown&&(n.isTouchdown=!1,n.isTouchMove=!1,n.touchMovePoints=[],n.isDraging=!1)};jt.addEventListener("touchcancel",a),n.globalEventListeners.push({name:"touchcancel",env:"vglobal",callback:a})}function JX(n){return!!n.changedTouches}function vte(n){n.isPivotChart()&&n.scenegraph.tableGroup.addEventListener("click",(t=>{var e;if(!n.stateManager.columnMove.moving&&!n.stateManager.columnResize.resizing)if(t.target.name==="axis-label"){const i=bn(t),{col:r,row:o}=i.eventArgs,a=n.internalProps.layoutMap;let s,l;a.indicatorsAsCol?(s=a.getDimensionKeyInChartSpec(a.rowHeaderLevelCount,o),l=a.getCellHeaderPaths(a.rowHeaderLevelCount-2,o).rowHeaderPaths):(s=a.getDimensionKeyInChartSpec(r,a.columnHeaderLevelCount),l=a.getCellHeaderPaths(r,a.columnHeaderLevelCount-1).colHeaderPaths);const h=l.map((u=>({key:u.dimensionKey,value:u.value}))).filter((u=>u.key));if(h.push({key:s,value:t.target.attribute.text}),n._selectedDimensionInChart.length&&mte(n._selectedDimensionInChart,h))return;n._selectedDimensionInChart=h,a.updateDataStateToChartInstance(),lH(n.scenegraph),n.scenegraph.updateNextFrame()}else!((e=n._selectedDimensionInChart)===null||e===void 0)&&e.length&&(n._selectedDimensionInChart.length=0,n.internalProps.layoutMap.updateDataStateToChartInstance(),lH(n.scenegraph),n.scenegraph.updateNextFrame())}))}function mte(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;e++)if(n[e].key!==t[e].key||n[e].value!==t[e].value)return!1;return!0}function yte(n){n.isPivotChart()&&(n.on(at.MOUSEENTER_CELL,(t=>{n.scenegraph.getCell(t.col,t.row).forEachChildren((e=>{if(e.name==="axis"){const i=QX(t.col,t.row,n.internalProps.layoutMap);t.axisPosition=i,n.fireListeners(at.MOUSEENTER_AXIS,t)}}))})),n.on(at.MOUSELEAVE_CELL,(t=>{n.scenegraph.getCell(t.col,t.row).forEachChildren((e=>{if(e.name==="axis"){const i=QX(t.col,t.row,n.internalProps.layoutMap);t.axisPosition=i,n.fireListeners(at.MOUSELEAVE_AXIS,t)}}))})))}function QX(n,t,e){if(e.indicatorsAsCol){if(e.hasTwoIndicatorAxes&&t===e.columnHeaderLevelCount-1&&n>=e.rowHeaderLevelCount&&n<e.colCount-e.rightFrozenColCount)return"top";if(t===e.rowCount-e.bottomFrozenRowCount&&n>=e.rowHeaderLevelCount&&n<e.colCount-e.rightFrozenColCount)return"bottom";if(n===e.rowHeaderLevelCount-1&&t>=e.rowHeaderLevelCount&&t<e.rowCount-e.bottomFrozenRowCount)return"left"}else{if(n===e.rowHeaderLevelCount-1&&t>=e.columnHeaderLevelCount&&t<e.rowCount-e.bottomFrozenRowCount)return"left";if(n===e.colCount-e.rightFrozenColCount&&t>=e.columnHeaderLevelCount&&t<e.rowCount-e.bottomFrozenRowCount)return"right";if(t===e.rowCount-e.bottomFrozenRowCount&&n>=e.rowHeaderLevelCount&&n<e.colCount-e.rightFrozenColCount)return"bottom"}return"bottom"}function bte(n){n.on("checkbox_state_change",(t=>{var e;const{col:i,row:r,checked:o,field:a}=t;if(!n.internalProps.layoutMap.isSeriesNumber(i,r)||n.internalProps.enableCheckboxCascade!==!0||n.isHeader(i,r))return;const s=n.getCellOriginRecord(i,r),l=n.dataSource.currentPagerIndexedData,h=n.getRecordShowIndexByCell(i,r);let u=l[h];if(yt(u)&&(u=[u]),s.vtableMerge||((e=s.children)===null||e===void 0?void 0:e.length))if(o)gT(n,i,r)===Wt.collapse?fT(!0,u,n,a):cT(!0,h,u,l,n,i),Op(h,u,l,n,i);else{gT(n,i,r)===Wt.collapse?fT(!1,u,n,a):cT(!1,h,u,l,n,i),Op(h,u,l,n,i);const d=n.stateManager.headerCheckedState._vtable_rowSeries_number,c=n.stateManager.updateHeaderCheckedState("_vtable_rowSeries_number",i,r);d!==c&&n.scenegraph.updateHeaderCheckboxCellState(i,r,c)}else Op(h,u,l,n,i)}))}function _te(n){n.internalProps.enableCheckboxCascade===!0&&n.on("checkbox_state_change",(t=>{var e;const{col:i,row:r,checked:o,field:a}=t,s=n.internalProps.columns.some((c=>c.tree));if(n.internalProps.enableCheckboxCascade,!s||n.isHeader(i,r))return;const l=n.getCellOriginRecord(i,r),h=n.dataSource.currentPagerIndexedData,u=n.getRecordShowIndexByCell(i,r);let d=h[u];if(yt(d)&&(d=[d]),l.vtableMerge||((e=l.children)===null||e===void 0?void 0:e.length))if(o)gT(n,i,r)===Wt.collapse?fT(!0,d,n,a):cT(!0,u,d,h,n,i,a),Op(u,d,h,n,i,a);else{gT(n,i,r)===Wt.collapse?fT(!1,d,n,a):cT(!1,u,d,h,n,i,a),Op(u,d,h,n,i,a);const c=n.stateManager.headerCheckedState._vtable_rowSeries_number,f=n.stateManager.updateHeaderCheckedState(a,i,r);c!==f&&n.scenegraph.updateHeaderCheckboxCellState(i,r,f)}else Op(u,d,h,n,i,a)}))}function cT(n,t,e,i,r,o,a){var s;const l=a||"_vtable_rowSeries_number";let h=t+1;for(;Rt(i[h])&&((s=i[h])===null||s===void 0?void 0:s.length)>e.length;){const u=r.columnHeaderLevelCount+h;r.stateManager.setCheckedState(o,u,l,n),Uw(o,u,n,r),h++}}function Op(n,t,e,i,r,o){var a;let s=t.length-1;if(s>0){let l=n-1;for(;s>0&&l>=0;)(Rt(e[l])&&((a=e[l])===null||a===void 0?void 0:a.length)===s||s===1&&yt(e[l]))&&(Cte(r,i.columnHeaderLevelCount+l,e[l],i,o),s--),l--}}function Cte(n,t,e,i,r){const{checkedState:o}=i.stateManager,a=e.toString(),s=r||"_vtable_rowSeries_number";Rt(e)&&e.length;let l=!1;const h=[],u=Array.from(o.keys()).sort(((p,v)=>{var m,y;const b=p.split(","),_=v.split(","),w=Math.max(b.length,_.length);for(let C=0;C<w;C++){const x=(m=Number(b[C]))!==null&&m!==void 0?m:0,S=(y=Number(_[C]))!==null&&y!==void 0?y:0;if(x!==S)return x-S}return 0})),d=u.map((p=>o.get(p))),c=u.filter((p=>p.startsWith(a+",")&&p!==a));if(d.forEach(((p,v)=>{const m=u[v],y=p,b=c.includes(m);l&&(b?h.push(y[s]):l=!1),m===a&&(l=!0)})),h.length===0)return;const f=h.every((p=>!!p)),g=h.every((p=>!p));f?(i.stateManager.setCheckedState(n,t,s,!0),Uw(n,t,!0,i)):g?(i.stateManager.setCheckedState(n,t,s,!1),Uw(n,t,!1,i)):(i.stateManager.setCheckedState(n,t,s,"indeterminate"),Uw(n,t,"indeterminate",i))}function fT(n,t,e,i){const{checkedState:r}=e.stateManager,o=t.toString();Rt(t)&&t.length;let a=!1;const s=Array.from(r.keys()).sort(((u,d)=>{var c,f;const g=u.split(","),p=d.split(","),v=Math.max(g.length,p.length);for(let m=0;m<v;m++){const y=(c=Number(g[m]))!==null&&c!==void 0?c:0,b=(f=Number(p[m]))!==null&&f!==void 0?f:0;if(y!==b)return y-b}return 0})),l=s.filter((u=>u.startsWith(o+",")&&u!==o));s.map((u=>r.get(u))).forEach(((u,d)=>{const c=s[d],f=u,g=l.length!==0&&l.includes(c);a&&(g?f[i]=n:a=!1),c===o&&(a=!0)}))}function wte(n){n.internalProps.enableHeaderCheckboxCascade===!0&&n.on("checkbox_state_change",(t=>{const{col:e,row:i,checked:r,field:o}=t;if(n.isHeader(e,i))n.stateManager.setHeaderCheckedState(o,r),n.getCellType(e,i)==="checkbox"&&n.scenegraph.updateCheckboxCellState(e,i,r);else if(n.stateManager.setCheckedState(e,i,o,r),n.getCellType(e,i)==="checkbox"){const a=n.stateManager.headerCheckedState[o],s=n.stateManager.updateHeaderCheckedState(o,e,i);a!==s&&n.scenegraph.updateHeaderCheckboxCellState(e,i,s)}}))}function gT(n,t,e){const i=n.getRecordShowIndexByCell(t,e);return n.dataSource.getHierarchyState(i)}function xte(n){n.on(at.CLICK_CELL,(t=>{const{col:e,row:i,target:r}=t;r.name!=="button"||r.attribute.disable||n.hasListeners(at.BUTTON_CLICK)&&n.fireListeners(at.BUTTON_CLICK,{col:e,row:i,event:t.event})}))}function Ste(n){n.on(at.ICON_CLICK,(t=>{var e;const{col:i,row:r,x:o,y:a,funcType:s,icon:l,event:h}=t,{stateManager:u}=n;if(s===Ye.dropDown)u.triggerDropDownMenu(i,r,o,a,h);else if(s===Ye.sort)u.triggerSort(i,r,l,h);else if(s===Ye.frozen)u.triggerFreeze(i,r,l);else if(s===Ye.drillDown)ite(n);else if(s===Ye.collapse||s===Ye.expand){const d=!!(!((e=u.select.ranges)===null||e===void 0)&&e.length);u.updateSelectPos(-1,-1),u.endSelectCells(!0,d),n.toggleHierarchyState(i,r)}}))}function Ate(n){n.on(at.DROPDOWN_MENU_CLICK,(()=>{n.stateManager.hideMenu()})),n.on(at.SCROLL,(()=>{n.stateManager.hideMenu()}))}function Tte(n){n.on(at.DBLCLICK_CELL,(t=>{var e,i,r;if(t.federatedEvent){const o=bn(t.federatedEvent),a=n.scenegraph.getResizeColAt(o.abstractPos.x,o.abstractPos.y,(e=o.eventArgs)===null||e===void 0?void 0:e.targetCell),s=(i=n.options.disableDblclickAutoResizeColWidth)!==null&&i!==void 0?i:(r=n.options.resize)===null||r===void 0?void 0:r.disableDblclickAutoResizeColWidth;if(n.eventManager.checkCellFillhandle(o))n.fireListeners(at.DBLCLICK_FILL_HANDLE,{});else if(n._canResizeColumn(a.col,a.row)&&a.col>=0&&!s){n.scenegraph.updateAutoColWidth(a.col),n.internalProps._widthResizedColMap.add(a.col),n.scenegraph.updateChartSizeForResizeColWidth(a.col);const l=n.stateManager;l.columnResize.col<l.table.frozenColCount&&!l.table.isPivotTable()&&!l.table.transpose&&l.table.scenegraph.component.setFrozenColumnShadow(l.table.frozenColCount-1,l.columnResize.isRightFrozen);const h=[];for(let u=0;u<n.colCount;u++)h.push(n.getColWidth(u));n.fireListeners(at.RESIZE_COLUMN_END,{col:a.col,colWidths:h})}}}))}var ec=function(n,t,e,i){return new(e||(e=Promise))((function(r,o){function a(h){try{l(i.next(h))}catch(u){o(u)}}function s(h){try{l(i.throw(h))}catch(u){o(u)}}function l(h){var u;h.done?r(h.value):(u=h.value,u instanceof e?u:new e((function(d){d(u)}))).then(a,s)}l((i=i.apply(n,t||[])).next())}))};let Mte=class{constructor(t){this.isDown=!1,this.isDraging=!1,this.globalEventListeners=[],this._enableTableScroll=!0,this.cutWaitPaste=!1,this.clipboardCheckTimer=null,this.cutOperationTime=0,this.lastClipboardContent="",this.cutCellRange=null,this.table=t,this.handleTextStickBindId=[],this.inertiaScroll=new hte(t.stateManager),Be.mode==="node"||t.options.disableInteraction||(this.bindOuterEvent(),setTimeout((()=>{this.bindSelfEvent()}),0))}bindOuterEvent(){ute(this),gte(this),fte(this),pte(this),dte(this)}updateEventBinder(){setTimeout((()=>{var t;this.table.isReleased||(sT(this.table)&&((t=this.handleTextStickBindId)===null||t===void 0?void 0:t.length)===0?(this.handleTextStickBindId.push(this.table.on(at.SCROLL,(e=>{My(this.table)}))),this.handleTextStickBindId.push(this.table.on(at.RESIZE_COLUMN_END,(e=>{My(this.table)}))),this.handleTextStickBindId.push(this.table.on(at.RESIZE_ROW_END,(e=>{My(this.table)})))):!sT(this.table)&&this.handleTextStickBindId&&(this.handleTextStickBindId.forEach((e=>{this.table.off(e)})),this.handleTextStickBindId=[]),ZX(this.table))}),0)}bindSelfEvent(){this.table.isReleased||(Ste(this.table),Ate(this.table),this.updateEventBinder(),tte(this.table),Tte(this.table),this.table.isPivotTable()&&nte(this.table)&&ete(this.table),ZX(this.table),vte(this.table),yte(this.table),bte(this.table),_te(this.table),wte(this.table),xte(this.table))}dealTableHover(t){if(!t)return void this.table.stateManager.updateHoverPos(-1,-1);const{eventArgs:e}=t;e?this.table.stateManager.updateHoverPos(e.col,e.row):this.table.stateManager.updateHoverPos(-1,-1)}dealIconHover(t){const{eventArgs:e}=t;e?this.table.stateManager.updateHoverIcon(e.col,e.row,e.target,e.targetCell):this.table.stateManager.updateHoverIcon(-1,-1,void 0,void 0)}dealMenuHover(t){}dealTableSelect(t,e){var i,r,o,a,s;if(!t)return this.table.stateManager.updateSelectPos(-1,-1),!1;const{eventArgs:l}=t;if(l){if(l.target.name==="checkbox"||l.target.name==="radio"||l.target.name==="switch"||l.target.name==="button")return!1;if(this.table.isHeader(l.col,l.row)&&Gu(this.table,l.col,l.row))return e||this.table.stateManager.updateSelectPos(-1,-1),!1;if(!this.table.isHeader(l.col,l.row)&&Gu(this.table,l.col,l.row)){if(!e){const h=!!(!((i=this.table.stateManager.select.ranges)===null||i===void 0)&&i.length);this.table.stateManager.updateSelectPos(-1,-1),h&&this.table.stateManager.endSelectCells(!0,h)}return!1}return!this.table.isPivotChart()||((r=t?.eventArgs)===null||r===void 0?void 0:r.target.name)!=="axis-label"&&((o=t?.eventArgs)===null||o===void 0?void 0:o.target.type)!=="chart"?(this.table.stateManager.updateSelectPos(this.table.stateManager.select.selectInline==="row"?this.table.colCount-1:l.col,this.table.stateManager.select.selectInline==="col"?this.table.rowCount-1:l.row,l.event.shiftKey,l.event.ctrlKey||l.event.metaKey,!1,!e&&((s=(a=this.table.options.select)===null||a===void 0?void 0:a.makeSelectCellVisible)===null||s===void 0||s)),!0):(this.table.stateManager.updateSelectPos(-1,-1),!1)}return!1}dealFillSelect(t,e){var i,r;const{eventArgs:o}=t;if(o){if(!((r=(i=this.table.stateManager.select)===null||i===void 0?void 0:i.ranges)===null||r===void 0)&&r.length&&this.table.stateManager.isFillHandle()){let a,s;const l=this.table.stateManager.select.ranges[this.table.stateManager.select.ranges.length-1];e&&(Y(this.table.stateManager.fillHandle.directionRow)||(Math.abs(this.table.stateManager.fillHandle.startY-t.abstractPos.y)>=Math.abs(this.table.stateManager.fillHandle.startX-t.abstractPos.x)?this.table.stateManager.fillHandle.directionRow=!0:this.table.stateManager.fillHandle.directionRow=!1),Math.abs(this.table.stateManager.fillHandle.startY-t.abstractPos.y)>=Math.abs(this.table.stateManager.fillHandle.startX-t.abstractPos.x)?this.table.stateManager.fillHandle.startY-t.abstractPos.y>0?this.table.stateManager.fillHandle.direction="top":this.table.stateManager.fillHandle.direction="bottom":this.table.stateManager.fillHandle.startX-t.abstractPos.x>0?this.table.stateManager.fillHandle.direction="left":this.table.stateManager.fillHandle.direction="right",this.table.stateManager.fillHandle.directionRow?(a=o.row,s=l.end.col):(a=l.end.row,s=o.col)),this.table.stateManager.updateSelectPos(e?s:l.end.col,e?a:l.end.row,!0,o.event.ctrlKey||o.event.metaKey,!1,!e)}else this.table.stateManager.updateSelectPos(o.col,o.row,o.event.shiftKey,o.event.ctrlKey||o.event.metaKey,!1,!e);return!0}return!1}deelTableSelectAll(){this.table.stateManager.updateSelectPos(-1,-1,!1,!1,!0),this.table.fireListeners(at.SELECTED_CELL,{ranges:this.table.stateManager.select.ranges,col:0,row:0})}dealMenuSelect(t){}checkColumnResize(t,e){const{eventArgs:i}=t;if(this.table.internalProps.enableTreeStickCell&&!i)return!1;const r=this.table.scenegraph.getResizeColAt(t.abstractPos.x,t.abstractPos.y,i?.targetCell);return this.table._canResizeColumn(r.col,r.row)&&r.col>=0?(e&&this.table.stateManager.startResizeCol(r.col,t.abstractPos.x,t.abstractPos.y,r.rightFrozen),!0):(this.table.stateManager.isResizeCol()&&this.table.stateManager.endResizeCol(),!1)}checkRowResize(t,e){const{eventArgs:i}=t;if(i){const r=this.table.scenegraph.getResizeRowAt(t.abstractPos.x,t.abstractPos.y,i.targetCell);if(this.table._canResizeRow(r.col,r.row)&&r.row>=0)return e&&this.table.stateManager.startResizeRow(r.row,t.abstractPos.x,t.abstractPos.y,r.bottomFrozen),!0}return!1}cellIsHeaderCheck(t,e){const{eventArgs:i}=t,{col:r,row:o,target:a}=i;return this.table.isHeader(r,o)?this.table.getCellType(i.col,i.row)==="checkbox"&&a.name==="checkbox":!1}checkCellFillhandle(t,e){var i,r,o,a,s;let l=!1;if(l=typeof((i=this.table.options.excelOptions)===null||i===void 0?void 0:i.fillHandle)=="function"?this.table.options.excelOptions.fillHandle({selectRanges:this.table.stateManager.select.ranges,table:this.table}):(r=this.table.options.excelOptions)===null||r===void 0?void 0:r.fillHandle,l){const{eventArgs:h}=t;if(h&&(!((a=(o=this.table.stateManager.select)===null||o===void 0?void 0:o.ranges)===null||a===void 0)&&a.length)){const u=Math.max(this.table.stateManager.select.ranges[this.table.stateManager.select.ranges.length-1].start.col,this.table.stateManager.select.ranges[this.table.stateManager.select.ranges.length-1].end.col),d=Math.max(this.table.stateManager.select.ranges[this.table.stateManager.select.ranges.length-1].start.row,this.table.stateManager.select.ranges[this.table.stateManager.select.ranges.length-1].end.row),c=Math.min(this.table.stateManager.select.ranges[this.table.stateManager.select.ranges.length-1].start.col,this.table.stateManager.select.ranges[this.table.stateManager.select.ranges.length-1].end.col),f=Math.min(this.table.stateManager.select.ranges[this.table.stateManager.select.ranges.length-1].start.row,this.table.stateManager.select.ranges[this.table.stateManager.select.ranges.length-1].end.row);let g;u<this.table.colCount-1?g=this.table.scenegraph.highPerformanceGetCell(u,d).globalAABBBounds.x2:c===0?g=this.table.scenegraph.highPerformanceGetCell(0,d).globalAABBBounds.x1:g=this.table.scenegraph.highPerformanceGetCell(c-1,d).globalAABBBounds.x2;const p=Math.abs(t.abstractPos.x-g);let v;d<this.table.rowCount-1?v=this.table.scenegraph.highPerformanceGetCell(u,d).globalAABBBounds.y2:v=this.table.scenegraph.highPerformanceGetCell(u,f-1).globalAABBBounds.y2;const m=Math.abs(t.abstractPos.y-v),y=18;if(!((s=this.table.stateManager.fillHandle)===null||s===void 0)&&s.isFilling||p<=y/2&&m<=y/2)return e&&this.table.stateManager.startFillSelect(t.abstractPos.x,t.abstractPos.y),!0}}return!1}dealColumnResize(t,e){this.table.stateManager.updateResizeCol(t,e)}dealRowResize(t,e){this.table.stateManager.updateResizeRow(t,e)}checkColumnMover(t){var e;const{eventArgs:i}=t;return!(!i||!this.table._canDragHeaderPosition(i.col,i.row))&&(this.table.stateManager.startMoveCol(i.col,i.row,t.abstractPos.x,t.abstractPos.y,(e=i?.event)===null||e===void 0?void 0:e.nativeEvent),!0)}dealColumnMover(t){var e;const{eventArgs:i}=t;Y(i.col)&&Y(i.row)&&this.table.stateManager.updateMoveCol(i.col,i.row,t.abstractPos.x,t.abstractPos.y,(e=i?.event)===null||e===void 0?void 0:e.nativeEvent)}startColumnResize(t){}dealIconClick(t,e){const{eventArgs:i}=e,{target:r,event:o,col:a,row:s}=i||{target:t.target,event:t,col:-1,row:-1},l=r;if(l.role&&l.role.startsWith("icon-"))return this.table.fireListeners(at.ICON_CLICK,{name:l.name,x:(l.globalAABBBounds.x1+l.globalAABBBounds.x2)/2,y:l.globalAABBBounds.y2,col:a,row:s,funcType:l.attribute.funcType,icon:l,event:o}),!0;if(r instanceof Fi){const h=r.pickIcon(o.global);if(h)return this.table.fireListeners(at.ICON_CLICK,{name:h.attribute.id,x:h.globalX+h.globalAABBBounds.width()/2,y:h.globalY+h.AABBBounds.height(),col:a,row:s,funcType:h.attribute.funcType,icon:h,event:o}),!0}return!1}release(){this.gesture.release(),this.globalEventListeners.forEach((t=>{t.env==="document"?document.removeEventListener(t.name,t.callback):t.env==="body"?document.body.removeEventListener(t.name,t.callback):t.env==="window"?window.removeEventListener(t.name,t.callback):t.env==="vglobal"&&jt.removeEventListener(t.name,t.callback)})),this.globalEventListeners=[]}enableScroll(){this._enableTableScroll=!0}disableScroll(){this._enableTableScroll=!1}handleCopy(t,e=!1){var i,r;return ec(this,void 0,void 0,(function*(){const o=this.table;!e&&(this.cutWaitPaste=!1);const a=this.table.getCopyValue();if(Y(a)){t.preventDefault();const s=yield navigator.permissions.query({name:"clipboard-write"});if(!((i=navigator.clipboard)===null||i===void 0)&&i.write&&s.state==="granted"){const l=u=>{const d=["<table>"],c=['<meta name="author" content="Visactor"/>','<style type="text/css">td{white-space:normal}br{mso-data-placement:same-cell}</style>'].join(""),f=u.split(`\r
`);return f.forEach((function(g,p){const v=g.split("	"),m=[];p===0&&d.push("<tbody>"),v.forEach((function(y,b){const _=y?y.toString().replace(/&/g,"&amp;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br>").replace(/(<br(\s*|\/)>(\r\n|\n)?|\r\n|\n)/g,`<br>\r
`).replace(/\x20{2,}/gi,(w=>`<span style="mso-spacerun: yes">${"&nbsp;".repeat(w.length-1)} </span>`)).replace(/\t/gi,"&#9;"):" ";m.push(`<td>${_}</td>`)})),d.push("<tr>",...m,"</tr>"),p===f.length-1&&d.push("</tbody>")})),d.push("</table>"),[c,d.join("")].join("")},h=l(a);navigator.clipboard.write([new ClipboardItem({"text/html":new Blob([h],{type:"text/html"}),"text/plain":new Blob([a],{type:"text/plain"})})])}else IXt.IE?window.clipboardData.setData("Text",a):t.clipboardData.setData("text/plain",a);o.fireListeners(at.COPY_DATA,{cellRange:o.stateManager.select.ranges,copyData:a,isCut:e})}!((r=o.keyboardOptions)===null||r===void 0)&&r.showCopyCellBorder&&(mXt(o),o.clearSelected())}))}handleCut(t){return ec(this,void 0,void 0,(function*(){this.handleCopy(t,!0),this.cutWaitPaste=!0,this.cutCellRange=this.table.getSelectedCellInfos(),this.clipboardCheckTimer&&clearTimeout(this.clipboardCheckTimer),this.clipboardCheckTimer=window.setTimeout((()=>{this.cutWaitPaste&&(this.cutWaitPaste=!1,this.cutCellRange=null,this.clipboardCheckTimer=null)}),3e4),this.saveClipboardContent()}))}handlePaste(t){this.cutWaitPaste?this.checkClipboardChanged().then((e=>{this.executePaste(t),e||this.clearCutArea(this.table),this.cutWaitPaste&&(this.cutWaitPaste=!1,this.cutCellRange=null,this.clipboardCheckTimer&&(clearTimeout(this.clipboardCheckTimer),this.clipboardCheckTimer=null))})).catch((()=>{this.executePaste(t),this.cutWaitPaste&&(this.cutWaitPaste=!1,this.cutCellRange=null,this.clipboardCheckTimer&&(clearTimeout(this.clipboardCheckTimer),this.clipboardCheckTimer=null))})):this.executePaste(t)}executePaste(t){var e,i,r,o;return ec(this,void 0,void 0,(function*(){const a=this.table;if(a.changeCellValues){if(!((e=a.editorManager)===null||e===void 0)&&e.editingEditor)return;if(((i=a.stateManager.select.ranges)===null||i===void 0?void 0:i.length)>0)if(!((r=navigator.clipboard)===null||r===void 0)&&r.read)navigator.clipboard.read().then((s=>{for(const l of s)l.types.includes("text/html")?this.pasteHtmlToTable(l):l.types.length===1&&l.types[0]==="text/plain"&&this.pasteTextToTable(l)}));else{const s=a.stateManager.select.ranges,l=Math.min(s[0].start.col,s[0].end.col),h=Math.min(s[0].start.row,s[0].end.row),u=(t.clipboardData||window.Clipboard).getData("text").split(`
`),d=[];u.forEach((function(f,g){const p=f.split("	"),v=[];d.push(v),p.forEach((function(m,y){y===p.length-1&&(m=m.trim()),v.push(m)}))}));const c=yield a.changeCellValues(l,h,d);a.hasListeners(at.PASTED_DATA)&&a.fireListeners(at.PASTED_DATA,{col:l,row:h,pasteData:d,changedCellResults:c})}}!((o=a.keyboardOptions)===null||o===void 0)&&o.showCopyCellBorder&&yXt(a)}))}clearCutArea(t){try{const e=this.cutCellRange;if(!e||e.length===0)return;for(let i=0;i<e.length;i++)for(let r=0;r<e[i].length;r++)e[i][r]&&t.changeCellValue(e[i][r].col,e[i][r].row,void 0)}catch{}}checkClipboardChanged(){return ec(this,void 0,void 0,(function*(){if(!navigator.clipboard||!navigator.clipboard.readText)return!1;try{return(yield navigator.clipboard.readText())!==this.lastClipboardContent}catch{return!1}}))}saveClipboardContent(){navigator.clipboard&&navigator.clipboard.readText&&setTimeout((()=>{navigator.clipboard.readText().then((t=>{this.lastClipboardContent=t})).catch((t=>{}))}),50)}pasteHtmlToTable(t){const e=/<tr[^>]*>([\s\S]*?)<\/tr>/g,i=/<td[^>]*>([\s\S]*?)<\/td>/g,r=this.table,o=r.stateManager.select.ranges,a=o.length,s=Math.min(o[a-1].start.col,o[a-1].end.col),l=Math.min(o[a-1].start.row,o[a-1].end.row),h=Math.max(o[a-1].start.col,o[a-1].end.col),u=Math.max(o[a-1].start.row,o[a-1].end.row);let d=0,c=0,f=[];t.getType("text/html").then((g=>{g.text().then((p=>ec(this,void 0,void 0,(function*(){var v,m;if(p&&/(<table)|(<TABLE)/g.test(p)){const y=Array.from(p.matchAll(e));for(const _ of y){const w=_[1],C=Array.from(w.matchAll(i)).map((x=>x[1].replace(/(<(?!br)([^>]+)>)/gi,"").replace(/<br(\s*|\/)>[\r\n]?/gim,`
`).replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#9;/gi,"	").replace(/&nbsp;/g," ")));f.push(C),d=Math.max(d,(v=C?.length)!==null&&v!==void 0?v:0)}c=(m=f.length)!==null&&m!==void 0?m:0,f=this.handlePasteValues(f,c,d,u-l+1,h-s+1);const b=yield r.changeCellValues(s,l,f,!0);r.hasListeners(at.PASTED_DATA)&&r.fireListeners(at.PASTED_DATA,{col:s,row:l,pasteData:f,changedCellResults:b})}else navigator.clipboard.read().then((y=>{for(const b of y)b.types.includes("text/plain")&&b.getType("text/plain").then((_=>{_.text().then(this._pasteValue)}))}))}))))}))}_pasteValue(t){var e;return ec(this,void 0,void 0,(function*(){const i=this.table,r=i.stateManager.select.ranges,o=r.length,a=Math.min(r[o-1].start.col,r[o-1].end.col),s=Math.min(r[o-1].start.row,r[o-1].end.row),l=Math.max(r[o-1].start.col,r[o-1].end.col),h=Math.max(r[o-1].start.row,r[o-1].end.row);let u=0,d=0,c=[];t.split(`
`).forEach((function(g,p){var v;const m=g.split("	"),y=[];c.push(y),m.forEach((function(b,_){_===m.length-1&&(b=b.trim()),y.push(b)})),u=Math.max(u,(v=y?.length)!==null&&v!==void 0?v:0)})),d=(e=c.length)!==null&&e!==void 0?e:0,c=this.handlePasteValues(c,d,u,h-s+1,l-a+1);const f=yield i.changeCellValues(a,s,c,!0);i.hasListeners(at.PASTED_DATA)&&i.fireListeners(at.PASTED_DATA,{col:a,row:s,pasteData:c,changedCellResults:f})}))}pasteTextToTable(t){const e=this.table,i=e.stateManager.select.ranges,r=i.length,o=Math.min(i[r-1].start.col,i[r-1].end.col),a=Math.min(i[r-1].start.row,i[r-1].end.row),s=Math.max(i[r-1].start.col,i[r-1].end.col),l=Math.max(i[r-1].start.row,i[r-1].end.row);let h=0,u=0;t.getType("text/plain").then((d=>{d.text().then((c=>ec(this,void 0,void 0,(function*(){var f;const g=c.replace(/\r(?!\n)/g,`\r
`).split(`\r
`);let p=[];g.length>1&&g[g.length-1]===""&&g.pop(),g.forEach((function(m,y){var b;const _=m.split("	"),w=[];p.push(w),_.forEach((function(C,x){C.includes(`
`)&&(C=C.replace(/^"(.*)"$/,"$1").replace(/["]*/g,(S=>new Array(Math.floor(S.length/2)).fill('"').join("")))),w.push(C)})),h=Math.max(h,(b=w?.length)!==null&&b!==void 0?b:0)})),u=(f=p.length)!==null&&f!==void 0?f:0,p=this.handlePasteValues(p,u,h,l-a+1,s-o+1);const v=yield e.changeCellValues(o,a,p,!0);e.hasListeners(at.PASTED_DATA)&&e.fireListeners(at.PASTED_DATA,{col:o,row:a,pasteData:p,changedCellResults:v})}))))}))}handlePasteValues(t,e,i,r,o){if(o>i||r>e){if(o%i==0&&r%e==0){const a=[];for(let s=0;s<r;s++){const l=[];a.push(l);for(let h=0;h<o;h++){const u=s%e,d=h%i;l.push(t[u][d])}}return a}return t}return t}},tq;const Rte=n=>{const t=n.value;return Number(t)>80?"#20a8d8":Number(t)>50?"#4dbd74":Number(t)>20?"#ffc107":"#f86c6b"};class pT extends ks{static get DEFAULT(){return tq||(tq=new pT)}constructor(t={},e={}){var i,r,o,a,s,l,h,u,d,c,f,g,p,v,m,y;super(t,e),this._showBar=(i=t.showBar)===null||i===void 0||i,this._barColor=(r=t.barColor)!==null&&r!==void 0?r:Rte,this._barPositiveColor=(o=t.barPositiveColor)!==null&&o!==void 0?o:"#4dbd74",this._barNegativeColor=(a=t.barNegativeColor)!==null&&a!==void 0?a:"#f86c6b",this._barAxisColor=(s=t.barAxisColor)!==null&&s!==void 0?s:"black",this._barBgColor=t.barBgColor,this._barHeight=(l=t.barHeight)!==null&&l!==void 0?l:3,this._barHeight=(h=t.barHeight)!==null&&h!==void 0?h:3,this._barBottom=(u=t.barBottom)!==null&&u!==void 0?u:0,this._barPadding=(d=t.barPadding)!==null&&d!==void 0?d:[0,0,0,0],this._showBarMark=(c=t.showBarMark)!==null&&c!==void 0&&c,this._barMarkPositiveColor=(f=t.barMarkPositiveColor)!==null&&f!==void 0?f:"#4dbd74",this._barMarkNegativeColor=(g=t.barMarkNegativeColor)!==null&&g!==void 0?g:"#f86c6b",this._barMarkWidth=(p=t.barMarkWidth)!==null&&p!==void 0?p:2,this._barMarkPosition=(v=t.barMarkPosition)!==null&&v!==void 0?v:"right",this._barRightToLeft=(m=t.barRightToLeft)!==null&&m!==void 0&&m,this._barMarkInBar=(y=t.barMarkInBar)===null||y===void 0||y}get showBar(){return this._showBar}set showBar(t){this._showBar=t}get barColor(){return this._barColor}set barColor(t){this._barColor=t}get barBgColor(){return this._barBgColor}set barBgColor(t){this._barBgColor=t}get barHeight(){return this._barHeight}set barHeight(t){this._barHeight=t}get barBottom(){return this._barBottom}set barBottom(t){this._barBottom=t}get barPositiveColor(){return this._barPositiveColor}set barPositiveColor(t){this._barPositiveColor=t}get barNegativeColor(){return this._barNegativeColor}set barNegativeColor(t){this._barNegativeColor=t}get barAxisColor(){return this._barAxisColor}set barAxisColor(t){this._barAxisColor=t}get barPadding(){return this._barPadding}set barPadding(t){this._barPadding=t}get showBarMark(){return this._showBarMark}set showBarMark(t){this._showBarMark=t}get barMarkPositiveColor(){return this._barMarkPositiveColor}set barMarkPositiveColor(t){this._barMarkPositiveColor=t}get barMarkNegativeColor(){return this._barMarkNegativeColor}set barMarkNegativeColor(t){this._barMarkNegativeColor=t}get barMarkWidth(){return this._barMarkWidth}set barMarkWidth(t){this._barMarkWidth=t}get barMarkPosition(){return this._barMarkPosition}set barMarkPosition(t){this._barMarkPosition=t}get barRightToLeft(){return this._barRightToLeft}set barRightToLeft(t){this._barRightToLeft=t}get barMarkInBar(){return this._barMarkInBar}set barMarkInBar(t){this._barMarkInBar=t}clone(){return new pT(this,null)}}const Pte=["type","content","style","color","width","height","marginRight","marginLeft","src","svg","name","path","positionType","tooltip","hover","cursor","shape","interactive","isGif"],Bte=Pte;class kte{constructor(t){this._table=t;const e=ia();this.expandIcon=e[er.expandIconName],this.collapseIcon=e[er.collapseIconName]}getIcons(t,e,i,r,o){const a=[],s=this.getHierarchyIcon(t,e);s&&a.push(s);const{icon:l}=this._table.getBodyColumnDefine(t,e);if(l){let h;typeof l=="function"?h=l({col:t,row:e,value:i,dataValue:r,table:this._table}):h=l;const u=ia(),d=c=>{let f;f=typeof c=="string"?u[c]:c,f&&a.push(f)};Array.isArray(h)?h.forEach(((c,f)=>{d(c)})):d(h)}return o&&a.forEach(((h,u)=>{(h.content||h.src)&&(a[u]=this.getCellIconFromRecordValue(h,t,e))})),a}getStyleClass(t){switch(t){case"text":case"link":return Gb;case"image":case"video":return dXt;case"chart":case"sparkline":return ks;case"progressbar":return pT;case"checkbox":return VO;case"radio":return mf;case"switch":return yf;case"button":return bf}return Gb}getCellIconFromRecordValue(t,e,i){if(Array.isArray(t))return t.map((a=>this.getCellIconFromRecordValue(a,e,i)));if(!xlt.isObject(t)||typeof t=="function")return this._table.getFieldData(t,e,i);const r={},o=t;return Bte.forEach((a=>{var s,l;if(o[a]!==void 0){const h=this._table.getFieldData(o[a],e,i);Y(h)?r[a]=h:!((l=(s=this._table)._hasField)===null||l===void 0)&&l.call(s,o[a],e,i)||(r[a]=o[a])}})),r}getHierarchyIcon(t,e){const i=this._table.getHierarchyState(t,e);return i===Wt.expand?this.expandIcon:i===Wt.collapse?this.collapseIcon:void 0}getHierarchyIconWidth(){var t,e;return this.expandIcon.width+((t=this.expandIcon.marginLeft)!==null&&t!==void 0?t:0)+((e=this.expandIcon.marginRight)!==null&&e!==void 0?e:0)}}function sl(n,t){const e=document.createElement(n);return t&&e.classList.add(...t),e}function Lte(){if(Be.mode==="node")return;const n=document.createElement("style");n.id="vtable-menu-styleSheet",n.textContent=`
@keyframes vtable__menu-element--shown-animation {
	0% {
		opacity: 0;
	}
	100% {
		opacity: 1;
	}
}
.vtable__menu-element {
	position: absolute;
	box-sizing: border-box;
	border-radius: 4px;
	background-color: #fff;
	padding: 6px 0;
	/* pointer-events: none; */
	user-select: none;
	color: #000;
	max-width: 300px;
	z-index: 99999;
	border: #CCC 0.5px solid;
	cursor: default;
	width: max-content;
	box-shadow: 0px 8px 16px rgba(27, 31, 35, 0.12);
  max-height: 100%;
  overflow-y: auto;
}
.vtable__menu-element--hidden {
	opacity: 0;
	/* transform: translate(-50%, -50%); */
	transition: opacity 75ms linear;
	z-index: -9999;
}
.vtable__menu-element--shown {
	opacity: 1;
	/* transform: translate(-50%, -50%); */
	animation: vtable__menu-element--shown-animation 150ms ease-out;
}
.vtable__menu-element__content {
	font-family: Roboto;
	font-size: 12px;
	overflow: hidden;
	display: inline-block;
	/* height: 100%; */
	line-height: 30px;
}
.vtable__menu-element__item {
	height: 32px;
	padding: 0px 12px;
	cursor: pointer;
	position: relative;
	display: flex;
	align-items: center;
	justify-content: flex-start;
}
.vtable__menu-element__item:hover {
	background-color: rgba(27, 31, 35, 0.06);
}
.vtable__menu-element__icon{
	/* vertical-align: top; */
	display: flex;
	/* line-height: 30px; */
	margin-right: 6px;
}
.vtable__menu-element__no-event {
	pointer-events: none;
}
.vtable__menu-element--select {
	color: #2E68CF;
}
.vtable__menu-element--normal {
	color: rgba(20, 20, 20, 0.9);;
}
.vtable__menu-element__item-disabled {
    color: rgba(0, 0, 0, 0.25);
    cursor: not-allowed;
	  background-color: #fff;
}
.vtable__menu-element__item-disabled:hover {
	  background-color: #fff;
}
.vtable__menu-element__split {
	height: 0px;
	border: 1px solid rgb(209, 213, 218);
	margin: 5px 0;
}
.vtable__menu-element__title {
	color: rgb(149, 149, 149);
}
.vtable__menu-element__arrow {
	position: absolute;
	right: 3px;
	font-weight: bold;
	margin-top: 1px;
}
.vtable__menu-element__item-text {
	margin-right: 15px;
}
`,document.head.appendChild(n)}Lte();const Eo="vtable__menu-element",Ete=`${Eo}__item`,WL=`${Eo}__content`,vo=`${Eo}--hidden`,eh=`${Eo}--shown`,Dte=`${Eo}--normal`,Ite=`${Eo}--select`,Ote=`${Eo}__icon`,Hte=`${Eo}__split`,zte=`${Eo}__title`,Fte=`${Eo}__arrow`,s0=`${Eo}__no-event`,eq=`${Eo}__item-text`,Yw=`${Eo}__item-disabled`;function iq(){return sl("div",[Eo,vo])}function H0(n,t,e,i,r,o){const a=n.getCellRange(i,r);for(let s=0;s<t.length;s++){const l=t[s];let{col:h,row:u}=l;const{field:d,menuKey:c}=l;if(typeof h!="number"||typeof u!="number")if(n.isPivotTable()){const f=n.internalProps.layoutMap.getPivotCellAdress(d);if(!f)continue;h=f.col,u=f.row}else{const f=n.internalProps.layoutMap.getHeaderCellAddressByField(d);if(!f)continue;h=f.col,u=f.row}if(Y(h)&&Y(u)&&$a(a,h,u)&&e===c)return!0}return!1}class Nte{constructor(t){var e,i,r,o,a,s,l,h,u,d,c;this._handler=new g2,this._rootElement=iq(),this._secondElement=iq(),this._secondElement.sub=!0,this._showChildrenIndex=-1,this._rootElement.addEventListener("wheel",(f=>{f.stopPropagation()})),(e=this._rootElement)===null||e===void 0||e.addEventListener("mousedown",(f=>{f.stopPropagation(),f.preventDefault()})),(i=this._rootElement)===null||i===void 0||i.addEventListener("contextmenu",(f=>{f.stopPropagation(),f.preventDefault()})),(r=this._rootElement)===null||r===void 0||r.addEventListener("touchend",(f=>{if(f.stopPropagation(),f.preventDefault(),f.target.classList.contains(Yw)||this._rootElement.classList.contains(vo))return;const{col:g,row:p,dropDownIndex:v,menuKey:m,text:y,hasChildren:b}=f.target;if(typeof v!="number"||b)return void f.stopPropagation();const _=t.isPivotTable()?t.internalProps.layoutMap.getPivotDimensionInfo(g,p):t.getHeaderField(g,p),w=t._dropDownMenuIsHighlight(g,p,v);t.fireListeners(at.DROPDOWN_MENU_CLICK,{col:g,row:p,field:_,menuKey:m,text:y,highlight:w,cellLocation:t.getCellLocation(g,p),event:f}),t.fireListeners(at.DROPDOWN_MENU_CLEAR,null),t.fireListeners(at.HIDE_MENU,null),f.stopPropagation()})),(o=this._rootElement)===null||o===void 0||o.addEventListener("click",(f=>{if(f.stopPropagation(),f.preventDefault(),f.target.classList.contains(Yw)||this._rootElement.classList.contains(vo))return;const{col:g,row:p,dropDownIndex:v,menuKey:m,text:y,hasChildren:b}=f.target;if(typeof v!="number"||b)return void f.stopPropagation();const _=t.isPivotTable()?t.internalProps.layoutMap.getPivotDimensionInfo(g,p):t.getHeaderField(g,p),w=t._dropDownMenuIsHighlight(g,p,v);t.fireListeners(at.DROPDOWN_MENU_CLICK,{col:g,row:p,field:_,menuKey:m,text:y,highlight:w,cellLocation:t.getCellLocation(g,p),event:f}),t.fireListeners(at.DROPDOWN_MENU_CLEAR,null),t.fireListeners(at.HIDE_MENU,null),f.stopPropagation()})),(a=this._rootElement)===null||a===void 0||a.addEventListener("mousemove",(f=>{var g,p;if(this._rootElement.classList.contains(vo))return;f.stopPropagation();const{hasChildren:v,dropDownIndex:m,col:y,row:b,sub:_}=f.target;if(v){this._showChildrenIndex=m;const w=this._secondElement;w?.classList.remove(vo),w?.classList.add(eh),w.innerHTML="";const C=(g=this._menuInstanceInfo.content[m])===null||g===void 0?void 0:g.children;for(let S=0;S<C.length;S++){const A=C[S],T=nq(A,!!t.stateManager.menu.dropDownMenuHighlight&&H0(t,t.stateManager.menu.dropDownMenuHighlight,typeof A=="object"?A?.menuKey||A?.text:A,y,b));T.col=y,T.row=b,T.dropDownIndex=S,typeof A=="string"?(T.text=A,T.menuKey=A):typeof A=="object"&&(T.text=A.text,T.menuKey=A.menuKey||A.text),T.sub=!0,T.sub=!0,w.appendChild(T)}const x=f.target.getBoundingClientRect();this._bindSecondElement(t,y,b,x.right,x.top)}else if(v&&this._showChildrenIndex===m){const w=this._secondElement;w?.classList.remove(vo),w?.classList.add(eh)}else!_&&(!((p=this._secondElement)===null||p===void 0)&&p.classList.contains(eh))&&setTimeout((()=>{if(this._mouseEnterSecondElement!==!0){this._showChildrenIndex=-1;const w=this._secondElement;w?.classList.remove(eh),w?.classList.add(vo)}}),300)})),(s=this._secondElement)===null||s===void 0||s.addEventListener("wheel",(f=>{f.stopPropagation()})),(l=this._secondElement)===null||l===void 0||l.addEventListener("mousemove",(f=>{this._rootElement.classList.contains(vo)||f.stopPropagation()})),(h=this._secondElement)===null||h===void 0||h.addEventListener("mouseenter",(f=>{this._mouseEnterSecondElement=!0})),(u=this._secondElement)===null||u===void 0||u.addEventListener("mouseleave",(f=>{this._mouseEnterSecondElement=!1})),(d=this._secondElement)===null||d===void 0||d.addEventListener("mousedown",(f=>{f.stopPropagation(),f.preventDefault()})),(c=this._secondElement)===null||c===void 0||c.addEventListener("click",(f=>{if(f.stopPropagation(),f.preventDefault(),f.target.classList.contains(Yw)||this._secondElement.classList.contains(vo))return;const{col:g,row:p,dropDownIndex:v,menuKey:m,text:y,hasChildren:b}=f.target;if(typeof v!="number"||b)return void f.stopPropagation();const _=t.isPivotTable()?t.internalProps.layoutMap.getPivotDimensionInfo(g,p):t.getHeaderField(g,p);let w=!1;this._menuInstanceInfo.content.forEach(((C,x)=>{if(typeof C=="object"&&C.children&&C.children.length)for(let S=0;S<C.children.length;S++){const A=C.children[S];if(H0(t,t.stateManager.menu.dropDownMenuHighlight,typeof A=="object"?A?.menuKey:A,g,p)&&m===(typeof A=="object"?A?.menuKey:A))return void(w=!0)}})),t.fireListeners(at.DROPDOWN_MENU_CLICK,{col:g,row:p,field:_,cellHeaderPaths:t.isPivotTable()?t.getCellHeaderPaths(g,p):void 0,menuKey:m,text:y,highlight:w,cellLocation:t.getCellLocation(g,p),event:f}),t.fireListeners(at.DROPDOWN_MENU_CLEAR,null),t.fireListeners(at.HIDE_MENU,null),f.stopPropagation()}))}get rootElement(){return this._rootElement}release(){this.unbindFromCell();const t=this._rootElement;t?.parentElement&&t.parentElement.removeChild(t),this._handler.release(),delete this._rootElement}bindToCell(t,e,i,r){var o,a;const s=this._rootElement,l=this._secondElement;if(this._menuInstanceInfo=r,s?.classList.remove(eh),s?.classList.add(vo),l?.classList.remove(eh),l?.classList.add(vo),this._canBindToCell(t,e,i)){if(s.innerHTML="",Array.isArray(r.content)){const h=r.content;for(let u=0;(o=u<h?.length)!==null&&o!==void 0&&o;u++){const d=h[u];let c=!!t.stateManager.menu.dropDownMenuHighlight&&H0(t,t.stateManager.menu.dropDownMenuHighlight,typeof d=="object"?d?.menuKey||d?.text:d,e,i);if(t.stateManager.menu.dropDownMenuHighlight&&typeof d=="object"&&Array.isArray(d.children)&&d.children.length)for(let g=0;g<d.children.length;g++){const p=d.children[g];if(H0(t,t.stateManager.menu.dropDownMenuHighlight,typeof p=="object"?p?.menuKey||p?.text:p,e,i)){c=!0;break}}const f=nq(d,c);f.col=e,f.row=i,f.dropDownIndex=u,typeof d=="string"?(f.text=d,f.menuKey=d):typeof d=="object"&&(f.text=d.text,f.menuKey=d.menuKey||d.text,!((a=d.children)===null||a===void 0)&&a.length&&(f.hasChildren=!0)),s.appendChild(f)}}if(this._bindToCell(t,e,i,r.position,r.referencePosition))return s?.classList.add(eh),s?.classList.remove(vo),!0}else this.unbindFromCell();return!1}unbindFromCell(){const t=this._rootElement,e=this._secondElement;this._menuInstanceInfo=void 0,t?.parentElement&&(t.classList.remove(eh),t.classList.add(vo)),e?.parentElement&&(e.classList.remove(eh),e.classList.add(vo))}_canBindToCell(t,e,i){var r;const o=t.getCellRangeRelativeRect({col:e,row:i}),a=(r=t.internalProps.menu.parentElement)!==null&&r!==void 0?r:t.getElement(),{top:s,bottom:l,left:h,right:u}=o;if(e===-1&&i===-1||t.isFrozenCell(e,i))return!0;if(l<t.getFrozenRowsHeight()||u<t.getFrozenColsWidth()||h>t.tableNoFrameWidth-t.getRightFrozenColsWidth()||s>t.tableNoFrameHeight-t.getBottomFrozenRowsHeight())return!1;const{offsetHeight:d,offsetWidth:c}=a;return!(d<s)&&!(c<h)}_bindToCell(t,e,i,r,o){var a;const s=this._rootElement,l=(a=t.internalProps.menu.parentElement)!==null&&a!==void 0?a:t.getElement(),{width:h,height:u,left:d,top:c}=l.getBoundingClientRect();if(s){s.parentElement!==l&&l.appendChild(s),s.style.left="0px";const f=.8*h;s.style.maxWidth=`${f}px`;const g=s.offsetWidth,p=s.offsetHeight;let v,m;r?(v=r.x,m=r.y):o&&(v=o.rect.right-g,m=o.rect.bottom);const y=l.getBoundingClientRect(),b=y.width/l.offsetWidth,_=y.height/l.offsetHeight;m*_+p>u&&(m=(u-p)/_),m<0&&(m/=2);let w=0,C=0;if(t.getElement()!==l){const{left:x,top:S}=t.getElement().getBoundingClientRect();w=S-c,C=x-d}return s.style.top=`${m+w}px`,v<0?v=0:v*b+g>h&&(v=(h-g)/b),s.style.left=`${v+C}px`,!0}return!1}_bindSecondElement(t,e,i,r,o){var a;const s=this._secondElement,l=this._rootElement,h=(a=t.internalProps.menu.parentElement)!==null&&a!==void 0?a:t.getElement(),{width:u,height:d,left:c,top:f}=h.getBoundingClientRect(),{x:g,y:p,width:v,height:m}=l.getBoundingClientRect();if(s){s.parentElement!==h&&h.appendChild(s),s.style.left="0px";const y=.8*u;s.style.maxWidth=`${y}px`;const b=s.clientWidth,_=s.clientHeight,w=r-c;let C=o-4-f;C+_>d&&(C=C-_+s.firstElementChild.clientHeight+4),s.style.top=`${C}px`;let x=w;return x+b>u?x=x-b-v:x+=4,s.style.left=`${x}px`,!0}return!1}pointInMenuElement(t,e){const i=this._rootElement,{x:r,y:o,width:a,height:s}=i.getBoundingClientRect();if(t>r-5&&t<r+a+5&&e>o-5&&e<o+s+5)return!0;const l=this._secondElement;if(l){const{x:h,y:u,width:d,height:c}=l.getBoundingClientRect();if(t>h-5&&t<h+d+5&&e>u-5&&e<u+c+5)return!0}return!1}}function nq(n,t){var e,i,r;const o=sl("div",[Ete,t?Ite:Dte]);if(typeof n=="object"&&n.disabled&&o.classList.add(Yw),typeof n=="string"){const a=sl("span",[WL,s0,eq]);a.innerHTML=n,o.appendChild(a)}else if(typeof n=="object"){const a=(e=n.type)!==null&&e!==void 0?e:"item";if(a==="split")return o?.classList.add(Hte),o;if(!((i=n?.icon)===null||i===void 0)&&i.svg)if(eN.test(n.icon.svg)){const l=new Image;n.icon.width?l.style.width=n.icon.width.toString()+"px":l.style.width="16px",n.icon.height?l.style.height=n.icon.height.toString()+"px":l.style.height="16px",l.src=n.icon.svg,o.appendChild(l)}else{const l=sl("span",[Ote,s0]);l.innerHTML=t&&n.selectedIcon&&n.selectedIcon.svg?n.selectedIcon.svg:n.icon.svg,n.icon.width&&l.children[0].setAttribute("width",n.icon.width.toString()),n.icon.height&&l.children[0].setAttribute("height",n.icon.height.toString()),o.appendChild(l)}const s=sl("span",[WL,s0,eq]);if(s.innerHTML=n.text,o.appendChild(s),a==="title")o?.classList.add(s0,zte);else if(!((r=n?.children)===null||r===void 0)&&r.length){const l=sl("span",[WL,s0,Fte]);l.innerHTML=t?'<svg width="8" height="12" viewBox="0 0 10 17" fill="none" xmlns="http://www.w3.org/2000/svg" style="vertical-align: baseline"><path d="M1.78186 16.7729L0.300378 15.2915L6.8189 8.77295L0.300377 2.25443L1.78186 0.77295L9.78186 8.77295L1.78186 16.7729Z" fill="#2E68CF" fill-opacity="0.65"></path></svg>':'<svg width="8" height="12" viewBox="0 0 10 17" fill="none" xmlns="http://www.w3.org/2000/svg" style="vertical-align: baseline"><path d="M1.78186 16.7729L0.300378 15.2915L6.8189 8.77295L0.300377 2.25443L1.78186 0.77295L9.78186 8.77295L1.78186 16.7729Z" fill="#141414" fill-opacity="0.65"></path></svg>',o.appendChild(l)}}return o}let rq;const Wte={CHANGE_STYLE:"change_style"};class Yf extends u2{static get EVENT_TYPE(){return Wte}static get DEFAULT(){return rq||(rq=new Yf)}constructor(t={},e={}){var i,r,o,a,s,l,h,u,d,c,f,g,p,v,m,y,b,_,w,C,x,S,A,T,M,R,L,B,P,k,E,D;super(),this._defaultPadding=[10,16,10,16],this._color=(i=t.color)!==null&&i!==void 0?i:e?.color,this._strokeColor=(r=t?.strokeColor)!==null&&r!==void 0?r:e?.strokeColor,this._fontSize=(o=t.fontSize)!==null&&o!==void 0?o:e?.fontSize,this._fontFamily=(a=t.fontFamily)!==null&&a!==void 0?a:e?.fontFamily,this._fontWeight=(s=t.fontWeight)!==null&&s!==void 0?s:e?.fontWeight,this._fontVariant=(l=t.fontVariant)!==null&&l!==void 0?l:e?.fontVariant,this._fontStyle=(h=t.fontStyle)!==null&&h!==void 0?h:e?.fontStyle,this._textOverflow=((u=t.textOverflow)!==null&&u!==void 0?u:e?.textOverflow)||"ellipsis",this._textStick=(c=(d=t.textStick)!==null&&d!==void 0?d:e?.textStick)!==null&&c!==void 0&&c,this._textStickBaseOnAlign=(g=(f=t.textStickBaseOnAlign)!==null&&f!==void 0?f:e?.textStickBaseOnAlign)!==null&&g!==void 0&&g,this._marked=(v=(p=t.marked)!==null&&p!==void 0?p:e?.marked)!==null&&v!==void 0&&v,this._textAlign=((m=t.textAlign)!==null&&m!==void 0?m:e?.textAlign)||"left",this._textBaseline=((y=t.textBaseline)!==null&&y!==void 0?y:e?.textBaseline)||"middle",this._bgColor=(b=t.bgColor)!==null&&b!==void 0?b:e?.bgColor,this._padding=(w=(_=t.padding)!==null&&_!==void 0?_:e?.padding)!==null&&w!==void 0?w:this._defaultPadding,this._borderColor=(C=t.borderColor)!==null&&C!==void 0?C:e?.borderColor,this._lineHeight=(x=t.lineHeight)!==null&&x!==void 0?x:e?.lineHeight,this._underline=(S=t.underline)!==null&&S!==void 0?S:e?.underline,this._underlineColor=(A=t.underlineColor)!==null&&A!==void 0?A:e?.underlineColor,this._underlineDash=(T=t.underlineDash)!==null&&T!==void 0?T:e?.underlineDash,this._underlineOffset=(M=t.underlineOffset)!==null&&M!==void 0?M:e?.underlineOffset,this._lineThrough=(R=t.lineThrough)!==null&&R!==void 0?R:e?.lineThrough,this._lineThroughColor=(L=t.lineThroughColor)!==null&&L!==void 0?L:e?.lineThroughColor,this._lineThroughDash=(B=t.lineThroughDash)!==null&&B!==void 0?B:e?.lineThroughDash,this._linkColor=(P=t.linkColor)!==null&&P!==void 0?P:e?.linkColor,this._cursor=(k=t.cursor)!==null&&k!==void 0?k:e?.cursor,this._borderLineWidth=(E=t.borderLineWidth)!==null&&E!==void 0?E:e?.borderLineWidth,this._borderLineDash=(D=t.borderLineDash)!==null&&D!==void 0?D:e?.borderLineDash}get bgColor(){return this._bgColor}set bgColor(t){this._bgColor=t}get color(){return this._color}set color(t){this._color=t}get strokeColor(){return this._strokeColor}set strokeColor(t){this._strokeColor=t}get fontSize(){return this._fontSize}set fontSize(t){this._fontSize=t}get fontFamily(){return this._fontFamily}set fontFamily(t){this._fontFamily=t}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight=t}get fontVariant(){return this._fontVariant}set fontVariant(t){this._fontVariant=t}get fontStyle(){return this._fontStyle}set fontStyle(t){this._fontStyle=t}get textOverflow(){return this._textOverflow}set textOverflow(t){this._textOverflow=t}get padding(){var t;return(t=this._padding)!==null&&t!==void 0?t:this._defaultPadding}set padding(t){this._padding=t}get borderColor(){return this._borderColor}set borderColor(t){this._borderColor=t}get textStick(){return this._textStick}set textStick(t){this._textStick=t}get textStickBaseOnAlign(){return this._textStickBaseOnAlign}set textStickBaseOnAlign(t){this._textStickBaseOnAlign=t}get marked(){return this._marked}set marked(t){this._marked=t}get textAlign(){return this._textAlign}set textAlign(t){this._textAlign=t}get textBaseline(){return this._textBaseline}set textBaseline(t){this._textBaseline=t}get lineHeight(){return this._lineHeight}set lineHeight(t){this._lineHeight=t}get underline(){return this._underline}set underline(t){this._underline=t}get underlineColor(){return this._underlineColor}set underlineColor(t){this._underlineColor=t}get underlineDash(){return this._underlineDash}set underlineDash(t){this._underlineDash=t}get underlineOffset(){return this._underlineOffset}set underlineOffset(t){this._underlineOffset=t}get lineThrough(){return this._lineThrough}set lineThrough(t){this._lineThrough=t}get lineThroughColor(){return this._lineThroughColor}set lineThroughColor(t){this._lineThroughColor=t}get lineThroughDash(){return this._lineThroughDash}set lineThroughDash(t){this._lineThroughDash=t}get linkColor(){return this._linkColor}set linkColor(t){this._linkColor=t}get cursor(){return this._cursor}set cursor(t){this._cursor=t}get borderLineWidth(){return this._borderLineWidth}set borderLineWidth(t){this._borderLineWidth=t}get borderLineDash(){return this._borderLineDash}set borderLineDash(t){this._borderLineDash=t}clone(){return new Yf(this)}}let oq;class vT extends Yf{static get DEFAULT(){return oq||(oq=new vT)}constructor(t={},e={}){var i;super(t,e),this.textAlign=((i=t.textAlign)!==null&&i!==void 0?i:e?.textAlign)||"center"}clone(){return new vT(this)}}let aq;class mT extends Yf{static get DEFAULT(){return aq||(aq=new mT)}constructor(t={},e=null){var i,r;super(t,e),this._autoWrapText=(i=t?.autoWrapText)!==null&&i!==void 0?i:e?.autoWrapText,this._lineClamp=(r=t?.lineClamp)!==null&&r!==void 0?r:e?.lineClamp}clone(){return new mT(this,null)}get lineClamp(){return this._lineClamp}set lineClamp(t){this._lineClamp=t}get autoWrapText(){return this._autoWrapText}set autoWrapText(t){this._autoWrapText=t}}let sq;class _f extends Yf{static get DEFAULT(){return sq||(sq=new _f)}constructor(t={},e={},i={}){var r,o,a,s,l,h,u,d,c,f,g,p,v,m,y,b,_,w,C,x,S,A;super(t,e),this._size=((o=(r=t?.size)!==null&&r!==void 0?r:e?.size)!==null&&o!==void 0?o:i?.size)||14,this._spaceBetweenTextAndIcon=((s=(a=t?.spaceBetweenTextAndIcon)!==null&&a!==void 0?a:e?.spaceBetweenTextAndIcon)!==null&&s!==void 0?s:i?.spaceBetweenTextAndIcon)||8,this._defaultFill=(h=(l=t?.checkboxStyle)===null||l===void 0?void 0:l.defaultFill)!==null&&h!==void 0?h:i?.defaultFill,this._defaultStroke=(d=(u=t?.checkboxStyle)===null||u===void 0?void 0:u.defaultStroke)!==null&&d!==void 0?d:i?.defaultStroke,this._disableFill=(f=(c=t?.checkboxStyle)===null||c===void 0?void 0:c.disableFill)!==null&&f!==void 0?f:i?.disableFill,this._checkedFill=(p=(g=t?.checkboxStyle)===null||g===void 0?void 0:g.checkedFill)!==null&&p!==void 0?p:i?.checkedFill,this._checkedStroke=(m=(v=t?.checkboxStyle)===null||v===void 0?void 0:v.checkedStroke)!==null&&m!==void 0?m:i?.checkedStroke,this._disableCheckedFill=(b=(y=t?.checkboxStyle)===null||y===void 0?void 0:y.disableCheckedFill)!==null&&b!==void 0?b:i?.disableCheckedFill,this._disableCheckedStroke=(w=(_=t?.checkboxStyle)===null||_===void 0?void 0:_.disableCheckedStroke)!==null&&w!==void 0?w:i?.disableCheckedStroke,this._checkIconImage=(x=(C=t?.checkboxStyle)===null||C===void 0?void 0:C.checkIconImage)!==null&&x!==void 0?x:i?.checkIconImage,this._indeterminateIconImage=(A=(S=t?.checkboxStyle)===null||S===void 0?void 0:S.indeterminateIconImage)!==null&&A!==void 0?A:i?.indeterminateIconImage}get size(){return this._size}set size(t){this._size=t}get spaceBetweenTextAndIcon(){return this._spaceBetweenTextAndIcon}set spaceBetweenTextAndIcon(t){this._spaceBetweenTextAndIcon=t}get defaultFill(){return this._defaultFill}set defaultFill(t){this._defaultFill=t}get defaultStroke(){return this._defaultStroke}set defaultStroke(t){this._defaultStroke=t}get disableFill(){return this._disableFill}set disableFill(t){this._disableFill=t}get checkedFill(){return this._checkedFill}set checkedFill(t){this._checkedFill=t}get checkedStroke(){return this._checkedStroke}set checkedStroke(t){this._checkedStroke=t}get disableCheckedFill(){return this._disableCheckedFill}set disableCheckedFill(t){this._disableCheckedFill=t}get disableCheckedStroke(){return this._disableCheckedStroke}set disableCheckedStroke(t){this._disableCheckedStroke=t}get checkIconImage(){return this._checkIconImage}set checkIconImage(t){this._checkIconImage=t}get indeterminateIconImage(){return this._indeterminateIconImage}set indeterminateIconImage(t){this._indeterminateIconImage=t}getStyle(t){return new _f(t,this)}clone(){return new _f(this)}}function Xw(n,t,e,i,r,o){var a;return n||t?n instanceof Yf?n:typeof n=="function"?Xw(n(e),t,e,i,r,o):(n||(n={}),r&&!Y(n.autoWrapText)&&(n.autoWrapText=!0),i===_f?new _f(n??{},t??{},(a=o.checkboxStyle)!==null&&a!==void 0?a:{}):new i(n??{},t??{})):i.DEFAULT}class Vte{constructor(t){this._table=t;const e=ia();this.freezeIcon=e[er.freezeIconName],this.frozenIcon=e[er.frozenIconName],this.frozenCurrentIcon=e[er.frozenCurrentIconName],this.normalIcon=e[er.normalIconName],this.upIcon=e[er.upwardIconName],this.downIcon=e[er.downwardIconName],this.dropDownAbsoluteIcon=e[er.dropdownIconName],this.expandIcon=e[er.expandIconName],this.collapseIcon=e[er.collapseIconName]}getIcons(t,e){const i=[];if(this._table.isPivotTable()){const{showSort:s,sort:l}=this._table.internalProps.layoutMap.getHeader(t,e);let h;if(h=typeof s=="function"?s({col:t,row:e,table:this._table}):s,h){let u=this._table.getPivotSortState(t,e);u&&(u=u.toUpperCase());const d=u==="ASC"?this.upIcon:u==="DESC"?this.downIcon:this.normalIcon;d&&i.push(d)}else if(l){const u=this.getSortIconForPivotTable(this._table.getPivotSortState(t,e),this._table,t,e);u&&i.push(u)}}else{const s=this._table.sortState;let l;l=void 0;const h=this._table.getCellRange(t,e);if(s)if(Array.isArray(s))for(let d=0;d<s.length;d++){const c=s[d],f=this._table._getHeaderCellBySortState(c);if(f&&$a(h,f.col,f.row)){({order:l}=c);break}}else{const d=this._table._getHeaderCellBySortState(s);d&&$a(h,d.col,d.row)&&({order:l}=s)}const u=this.getSortIcon(l,this._table,t,e);u&&i.push(u)}if(this._table.showFrozenIcon&&t<this._table.allowFrozenColCount){const s=this.getFrozenIcon(t,e);s&&i.push(s)}if(this.checkDropDownIcon(this._table,t,e)){const s=this.dropDownAbsoluteIcon;i.push(s)}const r=this.getDropDownStateIcons(this._table,t,e);r.length&&i.push(...r);const{headerIcon:o}=this._table._getHeaderLayoutMap(t,e),a=this.getHierarchyIcon(t,e);if(a&&i.push(a),o){let s;typeof o=="function"?s=o({col:t,row:e,value:this._table.getCellValue(t,e),dataValue:this._table.getCellOriginValue(t,e),table:this._table}):s=o;const l=ia(),h=u=>{let d;d=typeof u=="string"?l[u]:u,d&&i.push(d)};Array.isArray(s)?s.forEach(((u,d)=>{h(u)})):h(s)}return i}getFrozenIcon(t,e){if(this._table.isPivotTable()||this._table.transpose||this._table.rightFrozenColCount&&t>=this._table.colCount-this._table.rightFrozenColCount)return null;const i=this._table.getHeaderDefine(t,e);if(i.columns&&i.columns.length>0)return null;let r=this.freezeIcon;return this._table.options.frozenColCount-1>t?r=this.frozenIcon:this._table.options.frozenColCount-1===t&&(r=this.frozenCurrentIcon),r}getSortIcon(t,e,i,r){const o=t==="asc"?this.upIcon:t==="desc"?this.downIcon:this.normalIcon,a=e.getHeaderDefine(i,r);let s;return a&&(s=typeof a.showSort=="function"?a.showSort({col:i,row:r,table:this._table}):a.showSort),!a||s===!1||!Y(s)&&!a.sort||a.columns&&a.columns.length>0?null:o}getSortIconForPivotTable(t,e,i,r){const o=e.getHeaderDefine(i,r);let a;return o&&(a=typeof o.showSort=="function"?o.showSort({col:i,row:r,table:this._table}):o.showSort),!o||a===!1||!Y(a)&&!o.sort||o.columns&&o.columns.length>0?null:t?.toUpperCase()==="ASC"?this.upIcon:t?.toUpperCase()==="DESC"?this.downIcon:this.normalIcon}getDropDownStateIcons(t,e,i){var r,o,a;const s=t.getHeaderDefine(e,i),l=t._getHeaderLayoutMap(e,i);let{dropDownMenu:h}=l;typeof h=="function"&&(h=h({row:i,col:e,table:t}));let u=t.globalDropDownMenu;typeof u=="function"&&(u=u({row:i,col:e,table:t}));const d=[];if(Array.isArray(h)&&h.length||Array.isArray(u)&&u.length&&!(!((r=s?.columns)===null||r===void 0)&&r.length)){const c=h||u;let f=-1,g=-1;for(let p=0;p<c.length;p++){const v=c[p];if(typeof v=="object"&&v.children&&v.children.length)for(let m=0;m<v.children.length;m++){const y=v.children[m];if(!((o=t.stateManager.menu)===null||o===void 0)&&o.dropDownMenuHighlight&&H0(t,(a=t.stateManager.menu)===null||a===void 0?void 0:a.dropDownMenuHighlight,typeof y=="object"?y?.menuKey:y,e,i)){f=p,g=m;break}}if(t._dropDownMenuIsHighlight(e,i,p)){f=p;break}}if(f!==-1){let p;p=g!==-1?c[f].children[g]:c[f],p.stateIcon&&(p.stateIcon.svg?d.push({type:"svg",name:p.stateIcon.src||p.stateIcon.svg,width:p.stateIcon.width||22,height:p.stateIcon.height||22,svg:p.stateIcon.svg,positionType:Ue.right,marginRight:0,funcType:Ye.dropDownState,interactive:!1}):p.stateIcon.src&&d.push({type:"image",name:p.stateIcon.src||p.stateIcon.svg,width:p.stateIcon.width||22,height:p.stateIcon.height||22,src:p.stateIcon.src,positionType:Ue.right,marginRight:0,funcType:Ye.dropDownState,interactive:!1}))}}return d}getDropDownIconRect(t,e,i){var r,o,a,s,l,h,u,d;const c=(s=(o=(r=this.downIcon.hover)===null||r===void 0?void 0:r.width)!==null&&o!==void 0?o:(a=this.downIcon)===null||a===void 0?void 0:a.width)!==null&&s!==void 0?s:0,f=(d=(h=(l=this.downIcon.hover)===null||l===void 0?void 0:l.height)!==null&&h!==void 0?h:(u=this.downIcon)===null||u===void 0?void 0:u.height)!==null&&d!==void 0?d:0,g=t.right-2-c,p=t.right-2;let v;return v=i==="middle"?t.top+t.height/2-c/2:i==="top"?t.top+e/2:i==="bottom"?t.bottom-2*e:t.top,{left:g,right:p,top:v,bottom:f+v,width:c,height:f}}getHierarchyIcon(t,e){const{hierarchyState:i}=this._table._getHeaderLayoutMap(t,e);if(i){if(i===Wt.expand)return this.expandIcon;if(i===Wt.collapse)return this.collapseIcon}}getHierarchyIconWidth(){var t,e;return this.expandIcon.width+((t=this.expandIcon.marginLeft)!==null&&t!==void 0?t:0)+((e=this.expandIcon.marginRight)!==null&&e!==void 0?e:0)}checkDropDownIcon(t,e,i){var r;if(t.isPivotTable()){let o=t._getHeaderLayoutMap(e,i).dropDownMenu;if(typeof o=="function"&&(o=o({row:i,col:e,table:t})),Array.isArray(o)&&o.length)return!0}else{const o=t.getHeaderDefine(e,i),a=o.dropDownMenu;let s=t.globalDropDownMenu;if(typeof s=="function"&&(s=s({row:i,col:e,table:t})),Array.isArray(a)&&a.length||(!Array.isArray(o.dropDownMenu)||o.dropDownMenu.length!==0)&&Array.isArray(s)&&s.length&&!(!((r=o?.columns)===null||r===void 0)&&r.length))return!0}return!1}getStyleClass(t){switch(t){case"text":case"link":return mT;case"image":case"video":return vT;case"checkbox":return _f}}setTableColumnsEditor(){const t=(e,i)=>{e?.forEach(((r,o)=>{r.editor&&(i[o].editor=r.editor),r.columns&&t(r.columns,i[o].columns)}))};t(this._table.options.columns,this._table.internalProps.columns)}}class lq extends EventTarget{constructor(t,e){if(super(),this._table=t,Be.mode==="node")return;const i=document.createElement("div");i.style.opacity="0",i.dataset.vtable="vtable",i.style.pointerEvents="none",i.classList.add("input-container");const r=this._input=document.createElement("input");i.appendChild(r),r.classList.add("table-focus-control"),r.dataset.vtable="vtable",r.readOnly=!0,e.appendChild(i),this._container=i}focus(){this._input.focus({preventScroll:!0})}setFocusRect(t,e){const i=this._input;i.value=e,i.select();const r=t.top-this._table.scrollTop,o=t.left-this._table.scrollLeft;i.style.top=`${r.toFixed()}px`,i.style.left=`${o.toFixed()}px`,i.style.width=`${t.width.toFixed()}px`,i.style.height=`${t.height.toFixed()}px`}get input(){return this._input}release(){var t;(t=this._container.parentElement)===null||t===void 0||t.removeChild(this._container)}}class hq{constructor(t){this.isUpdate=!1,this._keys=[],this._sorted=!1,this.data=new Map,this._keys.length=0,this.cumulativeSum=new Map,this.difference=new Map,this.totalSum=0,this.table=t}get length(){return this.data.size}clear(){this._keys=[],this.data.clear(),this.cumulativeSum.clear(),this.difference.clear(),this.totalSum=0}clearRange(){this.cumulativeSum.clear(),this.difference.clear()}add(t,e){if(!Y(e))return;const i=this.table.getRowHeight(t);this.data.has(t)||(this._keys.push(t),this._sorted=!1),this.data.set(t,e),this.totalSum+=e,this.updateDifference(t,e-i)}remove(t){if(this.data.has(t)){const e=this.data.get(t);this.data.delete(t);const i=this._keys.indexOf(t);i!==-1&&this._keys.splice(i,1),this.totalSum-=e;const r=this.table.getRowHeight(t);this.updateDifference(t,r-e)}}put(t,e){if(Y(e))if(this.data.has(t)){const i=this.data.get(t);if(i===e)return;this.data.set(t,e);const r=e-i;this.totalSum+=r,this.updateDifference(t,r)}else this.add(t,e)}get(t){return this.data.get(t)}has(t){return this.data.has(t)}_sort(){const{_keys:t}=this;this._sorted||(t.sort(((e,i)=>e<i?-1:e>i?1:0)),this._sorted=!0)}updateDifference(t,e){var i;const r=(i=this.difference.get(t))!==null&&i!==void 0?i:0;this.difference.set(t,r+e),this.update()}getSumInRange(t,e){return this.calculatePrefixSum(e)-this.calculatePrefixSum(t-1)}updateCumulativeSum(t,e){for(const[i,r]of this.cumulativeSum)i>=t&&this.cumulativeSum.set(i,r+e)}calculatePrefixSum(t){if(t<0)return 0;if(this.cumulativeSum.has(t)){let e=this.cumulativeSum.get(t);for(const[i,r]of this.difference)i<=t&&(e+=r);return e}return this.dealDiffenence(),this.getCumulativeSum(t)}getCumulativeSum(t){var e,i;let r=0,o=0,a=!1;const s=this.table.rowCount>0&&this.table.bottomFrozenRowCount>0?this.table.rowCount-this.table.bottomFrozenRowCount:-1;for(let l=t;l>=0;l--){if(this.cumulativeSum.has(l)){r+=this.cumulativeSum.get(l);break}r+=(e=this.data.get(l))!==null&&e!==void 0?e:this.table.getRowHeight(l),l>=s&&s!==-1&&(o=r,a=l===s)}if(a&&(!((i=this.table.containerFit)===null||i===void 0)&&i.height)&&this.table.bottomFrozenRowCount){const l=this.table.tableNoFrameHeight||0;r<l&&(r=l-this.table.getBottomFrozenRowsHeight()+o)}return this.cumulativeSum.set(t,r),r}update(){this.isUpdate||(this.isUpdate=!0,setTimeout((()=>{this.dealDiffenence(),this.isUpdate=!1}),0))}dealDiffenence(){for(const[t]of this.cumulativeSum)for(const[e,i]of this.difference)if(t>=e){const r=this.cumulativeSum.get(t);this.cumulativeSum.set(t,r+i)}this.difference.clear()}insert(t,e){for(let r=t;r<=this.getLastIndex();r++)this.cumulativeSum.delete(r);const i=this.getLastIndex()+1;this.adjustOrder(t,t+1,i-t),Y(e)&&this.put(t,e)}getLastIndex(){return this._sort(),this._keys[this._keys.length-1]}delLast(){const t=this.getLastIndex();this.remove(t)}delete(t){if(!this.has(t))return;for(let i=t;i<=this.getLastIndex();i++)this.cumulativeSum.delete(i);const e=this.getLastIndex();this.adjustOrder(t+1,t,e-t),this.delLast()}adjustOrder(t,e,i){this.clearRange(),this._sort();const{_keys:r}=this;if(t>e){const a=[];for(let s=$g(r,t+i-1);s>=0;s--){const l=r[s];if(l>=t)a.push(this.get(l));else if(e<=l&&l<t)this.put(l+i,this.get(l));else if(l<e)break}for(let s=0;s<i;s++)this.put(e+s,a[i-1-s])}const{length:o}=r;if(t<e){const a=[];for(let s=$g(r,t);s<o;s++){const l=r[s];if(l>=t&&l<t+i)a.push(this.get(l));else if(t+i<=l&&l<=e)this.put(l-i,this.get(l));else if(l>e)break}for(let s=0;s<i;s++)this.put(e+s,a[s])}}exchangeOrder(t,e,i,r,o){const{_keys:a}=this;if(this._sorted||(a.sort(((s,l)=>s<l?-1:s>l?1:0)),this._sorted=!0),t>i){const s=[],l=[];for(let h=$g(a,i);h<$g(a,t)+e;h++){const u=a[h];u>=t&&u<t+e?l.push(this.get(u)):s.push(this.get(u))}for(let h=0;h<e;h++)this.put(o+h,l[h]);for(let h=0;h<s.length;h++)this.put(o+e+h,s[h])}else{const s=[],l=[];for(let h=$g(a,t);h<$g(a,i)+r;h++){const u=a[h];u>=t&&u<t+e?l.push(this.get(u)):s.push(this.get(u))}for(let h=0;h<e;h++)this.put(o+h,l[h]);for(let h=0;h<s.length;h++)this.put(t+h,s[h])}}}function $g(n,t){let e=0,i=n.length-1;for(;e<=i;){const r=Math.floor((e+i)/2);if(n[r]===t)return r;n[r]>t?i=r-1:e=r+1}return i<0?0:i}class Gte{constructor(t){this._table=t;const e=ia();this.dragReorderIconName=e[er.dragReorderIconName]}getIcons(t,e){return[this.dragReorderIconName]}}class $te{constructor(t,e,i="grid",r=void 0){this.hasHideNode=!1,this.sizeIncludeParent=!1,this.tree={id:0,dimensionKey:"",value:"",children:[],level:-1,afterSpanLevel:-1,levelSpan:1,startIndex:0,size:0,startInTotal:0,hierarchyState:void 0},this.totalLevel=0,this.expandedMaxLevel=0,this.dimensionKeys=new Vu,this.dimensionKeysIncludeVirtual=new Vu,this.cache=new Map,this.sizeIncludeParent=r!=null,this.setExpandLevel=r,this.hierarchyType=i,this.sharedVar=e,this.reset(t)}reset(t){this.totalLevel=0,this.expandedMaxLevel=0,this.hasHideNode=!1,this.cache.clear(),this.dimensionKeys=new Vu,this.dimensionKeysIncludeVirtual=new Vu,this.tree.children=t,this.setTreeNode(this.tree,0,this.tree)}setTreeNode(t,e,i){var r,o,a,s;t.startIndex=e,t.startInTotal=((r=i.startInTotal)!==null&&r!==void 0?r:0)+t.startIndex,t.hide&&(this.hasHideNode=!0),((o=t.dimensionKey)!==null&&o!==void 0?o:t.indicatorKey)&&(t.virtual||this.dimensionKeys.contain(t.indicatorKey?Y1:t.dimensionKey)||this.dimensionKeys.put(t.level,t.indicatorKey?Y1:t.dimensionKey),this.dimensionKeysIncludeVirtual.contain(t.indicatorKey?Y1:t.dimensionKey)||this.dimensionKeysIncludeVirtual.put(t.level,t.indicatorKey?Y1:t.dimensionKey),t.id||(t.id=++this.sharedVar.seqId));let l=t.dimensionKey&&this.sizeIncludeParent?1:0;const h=t.children||t.columns;return this.hierarchyType==="grid"||this.hierarchyType===null?h?.length>=1?h.forEach((u=>{var d,c,f;u.level=((d=t.level)!==null&&d!==void 0?d:0)+1,this.hierarchyType==="grid"&&(u.afterSpanLevel=((c=t.afterSpanLevel)!==null&&c!==void 0?c:0)+((f=t.levelSpan)!==null&&f!==void 0?f:1)),this.totalLevel=Math.max(this.totalLevel,u.level+1),l+=this.setTreeNode(u,l,t)})):l=t.level===-1?0:1:t.hierarchyState===Wt.expand&&h?.length>=1?h.forEach((u=>{var d;u.level=((d=t.level)!==null&&d!==void 0?d:0)+1,this.totalLevel=Math.max(this.totalLevel,u.level+1),this.expandedMaxLevel=Math.max(this.expandedMaxLevel,u.level+1),l+=this.setTreeNode(u,l,t)})):t.hierarchyState===Wt.collapse&&h?.length>=1?h.forEach((u=>{var d;u.level=((d=t.level)!==null&&d!==void 0?d:0)+1,this.totalLevel=Math.max(this.totalLevel,u.level+1),this.setTreeNode(u,l,t)})):!t.hierarchyState&&t.level+1<this.setExpandLevel&&(h?.length>=1||h===!0)?(!((a=h[0])===null||a===void 0)&&a.indicatorKey&&this.hierarchyType==="grid-tree"||(t.hierarchyState=Wt.expand),h?.length>=1&&h.forEach((u=>{var d;u.level=((d=t.level)!==null&&d!==void 0?d:0)+1,this.totalLevel=Math.max(this.totalLevel,u.level+1),this.expandedMaxLevel=Math.max(this.expandedMaxLevel,u.level+1),l+=this.setTreeNode(u,l,t)}))):h?.length>=1||h===!0?(!((s=h[0])===null||s===void 0)&&s.indicatorKey&&this.hierarchyType==="grid-tree"||(t.hierarchyState=Wt.collapse),h?.length>=1&&h.forEach((u=>{var d;u.level=((d=t.level)!==null&&d!==void 0?d:0)+1,this.totalLevel=Math.max(this.totalLevel,u.level+1),this.setTreeNode(u,l,t)}))):(t.hierarchyState=Wt.none,l=t.level===-1?0:1),t.size=l,l}getTreePath(t,e=30){const i=[];return this.searchPath(t,this.tree,i,e),i.shift(),i}findNodeById(t,e){return t.find((i=>i.id===e))}searchPath(t,e,i,r){if(!e||t<e.startIndex||t>=e.startIndex+e.size||(i.push(e),!e.children||e.children.length===0||e.level>=r))return;const o=t-e.startIndex;if(this.cache.has(e.level+1)){const l=this.cache.get(e.level+1);if(o>=l.startIndex&&o<l.startIndex+l.size)return void this.searchPath(o,l,i,r)}let a=0,s=e.children.length-1;for(;a<=s;){const l=Math.floor((a+s)/2),h=e.children[l];if(o>=h.startIndex&&o<h.startIndex+h.size){this.cache.set(h.level,h);const u=[];this.cache.forEach(((d,c)=>{c>h.level&&u.push(c)})),u.forEach((d=>{this.cache.delete(d)})),this.searchPath(o,h,i,r);break}o<h.startIndex?s=l-1:a=l+1}}movePosition(t,e,i){let r,o,a;const s=(u,d)=>{if(o!==void 0&&a!==void 0)return;u.level===t&&(u.startInTotal===e&&(o=d),u.startInTotal<=i&&i<=u.startInTotal+u.size-1&&(a=d));const c=u.children||u.columns;if(c&&u.level<t){r=u;for(let f=0;f<c.length;f++)(e>=c[f].startInTotal&&e<=c[f].startInTotal+c[f].size||i>=c[f].startInTotal&&i<=c[f].startInTotal+c[f].size)&&s(c[f],f)}};s(this.tree,0);const l=r.children||r.columns,h=l.splice(o,1);h.unshift(a,0),Array.prototype.splice.apply(l,h)}getCopiedTree(){const t=ag(this.tree.children);return Mht(t),t}setAllNodesState(t){this._updateNodeHierarchyState(this.tree,t)}_updateNodeHierarchyState(t,e){t.children&&t.children.length>0&&t.children[0].dimensionKey?(t.level!==-1&&(t.hierarchyState=e),t.children.forEach((i=>{this._updateNodeHierarchyState(i,e)}))):t.hierarchyState=Wt.none}}function Mht(n){for(let t=0;t<n.length;t++){const e=n[t];delete e.level,delete e.startIndex,delete e.id,delete e.levelSpan,delete e.size,delete e.startInTotal;const i=e.children||e.columns;i&&Mht(i)}}function jte(n){const t=n.columnObjects;for(let e=0;e<t.length;e++){const i=t[e];if(i?.aggregation)return!0}return!1}function Ute(n){const t=n.columnObjects;let e=0;for(let i=0;i<t.length;i++){const r=t[i];r?.aggregation&&(Array.isArray(r?.aggregation)?e=Math.max(e,r.aggregation.filter((o=>o.showOnTop)).length):r.aggregation.showOnTop&&(e=Math.max(e,1)))}return e}function Yte(n){const t=n.columnObjects;let e=0;for(let i=0;i<t.length;i++){const r=t[i];r?.aggregation&&(Array.isArray(r?.aggregation)?e=Math.max(e,r.aggregation.filter((o=>!o.showOnTop)).length):r.aggregation.showOnTop||(e=Math.max(e,1)))}return e}function Xte(n){if(n._table.internalProps.groupBy)return!0;const{columns:t}=n._table.options;if(Rt(t)&&t.length>0)for(let e=0;e<t.length;e++){const i=t[e];if(!Li(i)&&i.tree)return!0}return!1}function qte(n){const{columns:t,rows:e,indicators:i}=n.options;if(n.isPivotTable()){if(Rt(t)&&t.length>0)for(let r=0;r<t.length;r++){const o=t[r];if(!Li(o)&&(o.headerType==="image"||o.headerType==="video"||typeof o.headerType=="function")&&o.imageAutoSizing)return!0}if(Rt(e)&&e.length>0)for(let r=0;r<e.length;r++){const o=e[r];if(!Li(o)&&(o.headerType==="image"||o.headerType==="video"||typeof o.headerType=="function")&&o.imageAutoSizing)return!0}if(Rt(i)&&i.length>0)for(let r=0;r<i.length;r++){const o=i[r];if(!Li(o)&&((o.cellType==="image"||o.cellType==="video"||typeof o.cellType=="function")&&o.imageAutoSizing||(o.headerType==="image"||o.headerType==="video"||typeof o.headerType=="function")&&o.imageAutoSizing))return!0}}else if(Rt(t)&&t.length>0)for(let r=0;r<t.length;r++){const o=t[r];if((o.cellType==="image"||o.cellType==="video"||typeof o.cellType=="function")&&o.imageAutoSizing||(o.headerType==="image"||o.headerType==="video"||typeof o.headerType=="function")&&o.imageAutoSizing)return!0}return!1}function Rht(n,t){var e;return kKt(t,n)||((e=_N(n,t))!==null&&e!==void 0?e:{top:-1,row:-1,bottom:-1,height:-1})}function Pht(n,t){var e;return LKt(t,n)||((e=bN(n,t))!==null&&e!==void 0?e:{left:-1,col:-1,right:-1,width:1})}function Kte(n,t,e){const i=Rht(t,e),{row:r,top:o,bottom:a,height:s}=i,l=Pht(n,e),{col:h,left:u,right:d,width:c}=l;return{row:r,col:h,rect:{left:u,right:d,top:o,bottom:a,width:c,height:s}}}function bN(n,t){if(n===0)return{left:0,col:0,right:0,width:0};const e=Jte(n,t),i=t.getColsWidth(0,e);return n>=i?((r,o)=>{let a=o-t.getColWidth(r);const{colCount:s}=t.internalProps;for(let l=r;l<s;l++){const h=t.getColWidth(l),u=a+h;if(Math.round(a)<=n&&n<Math.round(u))return{left:a,col:l,right:u,width:h};a=u}return null})(e,i):((r,o)=>{let a=o;for(let s=r;s>=0;s--){const l=t.getColWidth(s),h=a-l;if(Math.round(h)<=n&&n<Math.round(a))return{left:h,col:s,right:a,width:l};a=h}return null})(e,i)}function _N(n,t){var e;if(n===0)return{top:0,row:0,bottom:0,height:0};const i=((e=t.options.customConfig)===null||e===void 0?void 0:e._disableColumnAndRowSizeRound)===!0?Math.floor:Math.round,r=Zte(n,t),o=t.getRowsHeight(0,r);return n>=o?((a,s)=>{let l=s-t.getRowHeight(a);const{rowCount:h}=t.internalProps;for(let u=a;u<h;u++){const d=t.getRowHeight(u),c=l+d;if(i(l)<=i(n)&&i(n)<i(c))return{top:l,row:u,bottom:c,height:d};l=c}return null})(r,o):((a,s)=>{let l=s;for(let h=a;h>=0;h--){const u=t.getRowHeight(h),d=l-u;if(i(d)<=i(n)&&i(n)<i(l))return{top:d,row:h,bottom:l,height:u};l=d}return null})(r,o)}function Bht(n,t,e){if(n===0)return{left:0,col:0,right:0,width:0};if(n-=e.tableX,t&&n>e.tableNoFrameWidth-e.getRightFrozenColsWidth()&&n<e.tableNoFrameWidth&&n<=e.getAllColsWidth()){for(let i=0;i<e.rightFrozenColCount;i++)if(n>e.tableNoFrameWidth-e.getColsWidth(e.colCount-i-1,e.colCount-1))return{col:e.colCount-i-1,left:void 0,right:void 0,width:void 0}}return bN(n,e)}function kht(n,t,e){if(n===0)return{top:0,row:0,bottom:0,height:0};if(n-=e.tableY,t&&n>e.tableNoFrameHeight-e.getBottomFrozenRowsHeight()&&n<e.tableNoFrameHeight){for(let i=0;i<e.rightFrozenColCount;i++)if(n>e.tableNoFrameHeight-e.getRowsHeight(e.rowCount-i-1,e.rowCount-1))return{row:e.rowCount-i-1,top:void 0,bottom:void 0,height:void 0}}return _N(n,e)}function Zte(n,t){let e=t.defaultRowHeight;return t._rowRangeHeightsMap.get("$0$"+(t.rowCount-1))&&(e=t._rowRangeHeightsMap.get("$0$"+(t.rowCount-1))/t.rowCount),Math.min(Math.ceil(n/e),t.rowCount-1)}function Jte(n,t){if(t._colRangeWidthsMap.get("$0$"+(t.colCount-1))){let e=0,i=t.colCount-1;for(;i-e>1;){const r=Math.floor((e+i)/2);if(n<t._colRangeWidthsMap.get(`$0$${r}`))i=r;else{if(!(n>t._colRangeWidthsMap.get(`$0$${r}`)))return r;e=r}}return i}return Math.min(Math.ceil(n/t.internalProps.defaultColWidth),t.colCount-1)}function Qte(n,t,e){n-=e.tableX;let i=!1;(t-=e.tableY)>0&&t<e.getFrozenRowsHeight()&&(i=!0);let r=!1;n>0&&n<e.getFrozenColsWidth()&&(r=!0);let o=!1;t>e.tableNoFrameHeight-e.getBottomFrozenRowsHeight()&&t<e.tableNoFrameHeight&&t<=e.getAllRowsHeight()&&(o=!0);let a=!1;n>e.tableNoFrameWidth-e.getRightFrozenColsWidth()&&n<e.tableNoFrameWidth&&n<=e.getAllColsWidth()&&(a=!0);const s=Bht((r||a?n:n+e.scrollLeft)+e.tableX,a,e),l=kht((i||o?t:t+e.scrollTop)+e.tableY,o,e);if(s&&l){const{row:h,top:u,bottom:d,height:c}=l,{col:f,left:g,right:p,width:v}=s;return{row:h,col:f,rect:{left:g,right:p,top:u,bottom:d,width:v,height:c}}}return{col:-1,row:-1}}function uq(n){return n.length===2&&Qc(n[0])&&Qc(n[1])&&n[1]>=n[0]}function dq(n){const t=n[1]-n[0],e=n[1]*n[0]<0;let i=n[0]<=0?0-n[0]:0,r=n[1]>0?n[1]-0:0;return t===0?n[0]<0?(i=1,r=0):n[0]>0&&(i=0,r=1):(i/=t,r/=t),{total:t,negative:i,positive:r,includeZero:e,domain:n,extendable_min:!0,extendable_max:!0}}function cq(n,t){const{positive:e,negative:i,extendable_min:r,extendable_max:o,domain:a}=n,{positive:s,negative:l,extendable_min:h,extendable_max:u,domain:d}=t;if(s>0){if(!h)return!1;let c=i/e;o&&(c=i/Math.max(e,s),a[1]=-a[0]/c),d[0]=-d[1]*c}else if(l>0){if(!u)return!1;let c=e/i;r&&(c=e/Math.max(i,i),a[0]=-a[1]/c),d[1]=-d[0]*c}return!0}function fq(n,t){const{extendable_min:e,extendable_max:i,domain:r}=n,{positive:o,negative:a,domain:s}=t;return(o!==0||a!==0)&&!(o>0&&!i)&&!(a>0&&!e)&&(r[0]=s[0],r[1]=s[1],!0)}function gq(n,t){const{positive:e,negative:i,extendable_max:r,domain:o}=n,{positive:a,negative:s,extendable_min:l,domain:h}=t;if(r&&l){const u=Math.max(i,s)/Math.max(e,a);o[1]=-o[0]/u,h[0]=-h[1]*u}else if(l){const u=i/e;h[0]=-h[1]*u}else{if(!r)return!1;{const u=s/a;o[1]=-o[0]/u}}return!0}function pq(n,t){const{extendable_min:e,domain:i}=n,{extendable_max:r,domain:o}=t;return!(!e||!r)&&(i[0]=-i[1],o[1]=-o[0],!0)}function tee(n,t){const e=[n.min,n.max],i=[t.min,t.max];if(!uq(e)||!uq(i))return;const r=dq(e),o=dq(i),{positive:a,negative:s,extendable_max:l,includeZero:h}=r,{positive:u,negative:d,extendable_max:c,includeZero:f}=o;if(a===0&&s===0){if(!fq(r,o))return}else if(u===0&&d===0){if(!fq(o,r))return}else if(h||f)if(h&&!f){if(!cq(r,o))return}else if(f&&!h){if(!cq(o,r))return}else{if(s===d)return;if(s>d){if(!gq(r,o))return}else if(!gq(o,r))return}else{if(s===0&&u===0){if(!pq(r,o))return}else if(d===0&&a===0&&!pq(o,r))return;if(s===0&&d===0)if(e[0]===0&&i[0]>0)i[0]=0;else{if(!(i[0]===0&&e[0]>0))return;e[0]=0}if(a===0&&u===0)if(e[1]===0&&i[1]>0){if(!c)return;i[1]=0}else{if(!(i[1]===0&&e[1]>0)||!l)return;e[1]=0}}return{range1:e,range2:i}}function eee(n,t,e,i,r,o){const a=It.getFunction("getAxisDomainRangeAndLabels"),{axisOption:s,isZeroAlign:l}=yT(t,e,i===0?"right":"left",o),{ticks:h}=a(n.min,n.max,s,l,r==="bottom"||r==="top"?o._table.getColWidth(t)||o._table.tableNoFrameWidth:o._table.getRowHeight(e)||o._table.tableNoFrameHeight);return h}function tw(n,t,e,i){return i!==0&&n?()=>n.map((r=>{const o=(r-t.min)/(t.max-t.min),a=(e.max-e.min)*o+e.min;return Math.round(100*a)/100})):void 0}function iee(n,t,e){var i,r,o,a,s,l,h;if(e._table.isPivotChart())if(e.indicatorsAsCol){if(e.hasTwoIndicatorAxes&&t===e.columnHeaderLevelCount-1&&n>=e.rowHeaderLevelCount&&n<e.colCount-e.rightFrozenColCount){const u=ew("top",n,t+1,n,e.columnHeaderLevelCount-1,n,t,1,e);if(!u)return;const d=e._table._getCellStyle(n,t+1),c=Se(gt("padding",d,n,t+1,e._table)),{range:f,ticks:g,axisOption:p,targetTicks:v,targetRange:m,index:y,theme:b}=u;return yt(p?.min)&&(f.min=p.min,f.min>0&&(p.zero=!1)),yt(p?.max)&&(f.max=p.max,f.max<0&&(p.zero=!1)),oi({range:f},p,{orient:"top",type:p?.type||"linear",label:{flush:!0},tick:{tickMode:tw(v,m,f,y)},__ticksForVTable:g,__vtableChartTheme:b,__vtablePadding:c})}if(t===e.rowCount-e.bottomFrozenRowCount&&n>=e.rowHeaderLevelCount&&n<e.colCount-e.rightFrozenColCount){const u=e.getIndicatorKeyInChartSpec(n,t);let d=null;u?.forEach((C=>{const x=e.getIndicatorInfo(C);x&&(d=x)}));const c=ew("bottom",n,t-1,n,t,n,t,0,e);if(!c)return;const f=e._table._getCellStyle(n,t-1),g=Se(gt("padding",f,n,t-1,e._table)),{range:p,ticks:v,axisOption:m,index:y,targetTicks:b,targetRange:_,theme:w}=c;return yt(m?.min)&&(p.min=m.min,p.min>0&&(m.zero=!1)),yt(m?.max)&&(p.max=m.max,p.max<0&&(m.zero=!1)),oi({title:{visible:!0,text:d?.title},range:p},m,{orient:"bottom",type:m?.type||"linear",label:{flush:!0},tick:{tickMode:tw(b,_,p,y)},__ticksForVTable:v,__vtableChartTheme:w,__vtablePadding:g})}if(n===e.rowHeaderLevelCount-1&&t>=e.columnHeaderLevelCount&&t<e.rowCount-e.bottomFrozenRowCount){let u=e.getDimensionKeyInChartSpec(e.rowHeaderLevelCount,t);Rt(u)&&(u=u[0]);const d=(i=e.dataset.collectedValues[u])!==null&&i!==void 0?i:[],c=e.getRowKeysPath(n,t),f=(r=d[c??""])!==null&&r!==void 0?r:[],{axisOption:g,theme:p,chartType:v}=yT(n+1,t,"left",e);if(g?.visible===!1)return;const m=e._table._getCellStyle(n+1,t),y=Se(gt("padding",m,n+1,t,e._table)),b=e.getRawChartSpec(n+1,t);return oi({domain:g?.type==="linear"?void 0:Array.from(f),range:g?.type==="linear"?f:void 0,title:{autoRotate:!0}},g,{orient:"left",type:(o=g?.type)!==null&&o!==void 0?o:"band",__vtableChartTheme:p,inverse:oee(g,((a=b?.direction)!==null&&a!==void 0?a:v==="scatter"?"vertical":"horizontal")==="horizontal"),__vtablePadding:y})}}else{if(n===e.rowHeaderLevelCount-1&&t>=e.columnHeaderLevelCount&&t<e.rowCount-e.bottomFrozenRowCount){const u=e.getIndicatorKeyInChartSpec(n,t);let d=null;u?.forEach((C=>{const x=e.getIndicatorInfo(C);x&&(d=x)}));const c=ew("left",n+1,t,n,t,n,t,0,e);if(!c)return;const f=e._table._getCellStyle(n+1,t),g=Se(gt("padding",f,n+1,t,e._table)),{range:p,ticks:v,axisOption:m,index:y,targetTicks:b,targetRange:_,theme:w}=c;return yt(m?.min)&&(p.min=m.min,p.min>0&&(m.zero=!1)),yt(m?.max)&&(p.max=m.max,p.max<0&&(m.zero=!1)),oi({title:{visible:!0,text:d?.title,autoRotate:!0},range:p},m,{orient:"left",type:m?.type||"linear",label:{flush:!0},tick:{tickMode:tw(b,_,p,y)},__ticksForVTable:v,__vtableChartTheme:w,__vtablePadding:g})}if(n===e.colCount-e.rightFrozenColCount&&t>=e.columnHeaderLevelCount&&t<e.rowCount-e.bottomFrozenRowCount){const u=ew("right",n-1,t,e.rowHeaderLevelCount-1,t,n,t,1,e);if(!u)return;const d=e._table._getCellStyle(n-1,t),c=Se(gt("padding",d,n-1,t,e._table)),{range:f,ticks:g,axisOption:p,index:v,targetTicks:m,targetRange:y,theme:b}=u;return yt(p?.min)&&(f.min=p.min,f.min>0&&(p.zero=!1)),yt(p?.max)&&(f.max=p.max,f.max<0&&(p.zero=!1)),oi({range:f,title:{autoRotate:!0}},p,{orient:"right",type:p?.type||"linear",label:{flush:!0},tick:{tickMode:tw(m,y,f,v)},__ticksForVTable:g,__vtableChartTheme:b,__vtablePadding:c})}if(t===e.rowCount-e.bottomFrozenRowCount&&n>=e.rowHeaderLevelCount&&n<e.colCount-e.rightFrozenColCount){let u=e.getDimensionKeyInChartSpec(n,e.columnHeaderLevelCount);Rt(u)&&(u=u[0]);const d=(s=e.dataset.collectedValues[u])!==null&&s!==void 0?s:[],c=e.getColKeysPath(n,t),f=(l=d?.[c??""])!==null&&l!==void 0?l:[],{axisOption:g,isPercent:p,theme:v,chartType:m}=yT(n,t-1,"bottom",e);if(g?.visible===!1)return;const y=e._table._getCellStyle(n,t-1),b=Se(gt("padding",y,n,t-1,e._table));return oi({domain:g?.type==="linear"?void 0:Array.from(f),range:g?.type==="linear"?f:void 0},g,{orient:"bottom",type:(h=g?.type)!==null&&h!==void 0?h:"band",__vtableChartTheme:v,__vtablePadding:b})}}}function yT(n,t,e,i){var r,o;const a=i.getRawChartSpec(n,t),s=(r=a.axes)!==null&&r!==void 0?r:[];if(i._table.pivotChartAxes.forEach((d=>{s.findIndex((c=>d.orient===c.orient))===-1&&s.push(d)})),a&&Rt(s)){const d=s.find((c=>c.orient===e));if(d){const{seriesIndex:c,seriesId:f}=d;let g,p;Y(f)&&Rt(a.series)?g=(Rt(f)?f:[f]).map((y=>{const b=a.series.findIndex((_=>_.id===y));return b>=0&&(p=a.series[b]),b})):Y(c)&&Rt(a.series)&&(g=c);const{isZeroAlign:v,isTickAlign:m}=vq(a,e,i);return{axisOption:d,isPercent:a.percent,isZeroAlign:v,isTickAlign:m,seriesIndice:g,theme:a.theme,chartType:(o=p?.type)!==null&&o!==void 0?o:a.type}}}const l=i._table.pivotChartAxes.find((d=>d.orient===e)),{isZeroAlign:h,isTickAlign:u}=vq(a,e,i);return{axisOption:l,isPercent:!1,isZeroAlign:h,isTickAlign:u,theme:a.theme,chartType:a.type}}function vq(n,t,e){const i=[];let r;t==="left"||t==="right"?i.push("left","right"):t!=="top"&&t!=="bottom"||i.push("top","bottom"),r=n&&Rt(n.axes)?n.axes:e._table.pivotChartAxes;let o=!1,a=!1;if(Rt(r)){const s=[];r.forEach((l=>{i.includes(l.orient)&&s.push(l)}));for(let l=0;l<s.length;l++){const h=s[l];h.sync&&h.sync.axisId&&s.find((u=>u.id===h.sync.axisId))&&(o=o||h.sync.zeroAlign,a=a||h.sync.tickAlign)}}return{isZeroAlign:o,isTickAlign:a}}function Lht(n,t,e,i,r){var o;if(Rt(r)){const h={min:1/0,max:-1/0};for(let u=0;u<r.length;u++){const d=Lht(n,t,e,i,r[u]);d&&(h.min=Math.min(h.min,d.min),h.max=Math.max(h.max,d.max))}return isFinite(h.min)&&isFinite(h.max)?h:null}let a=t?.[r];if(Rt(a)&&(a=a[0]),!a)return null;const s=n[a],l=oi({},(o=s?.[i??""])!==null&&o!==void 0?o:{min:0,max:1});return l.positiveMax&&l.positiveMax>l.max&&(l.max=l.positiveMax),l.negativeMin&&l.negativeMin<l.min&&(l.min=l.negativeMin),l.min===l.max&&(l.min>0?l.min=0:l.max=0),l}function nee(n,t,e){if(!e._table.isPivotChart())return!1;if(e.indicatorsAsCol){if(e.hasTwoIndicatorAxes&&t===e.columnHeaderLevelCount-1&&n>=e.rowHeaderLevelCount&&n<e.colCount-e.rightFrozenColCount||t===e.rowCount-e.bottomFrozenRowCount&&n>=e.rowHeaderLevelCount&&n<e.colCount-e.rightFrozenColCount)return!0}else if(t===e.rowCount-e.bottomFrozenRowCount&&n>=e.rowHeaderLevelCount&&n<e.colCount-e.rightFrozenColCount)return!0;return!1}function ree(n,t,e){if(!e._table.isPivotChart())return!1;if(e.indicatorsAsCol){if(n===e.rowHeaderLevelCount-1&&t>=e.columnHeaderLevelCount&&t<e.rowCount-e.bottomFrozenRowCount)return!0}else if(n===e.rowHeaderLevelCount-1&&t>=e.columnHeaderLevelCount&&t<e.rowCount-e.bottomFrozenRowCount||n===e.colCount-e.rightFrozenColCount&&t>=e.columnHeaderLevelCount&&t<e.rowCount-e.bottomFrozenRowCount)return!0;return!1}var mq;function oee(n,t){let e=n?.inverse;return t&&!aee(n?.orient)&&(e=!Y(n?.inverse)||!n?.inverse),e}function aee(n){return n==="bottom"||n==="top"}(function(n){n.vertical="vertical",n.horizontal="horizontal"})(mq||(mq={}));function ew(n,t,e,i,r,o,a,s,l){const h=l.getIndicatorKeyInChartSpec(i,r);let u;u=n==="top"||n==="bottom"?l.getColKeysPath(o,a):l.getRowKeysPath(o,a);const d=Eht(t,e,s,n,h,u,l);if(!d)return;const c=n==="bottom"?"top":n==="top"?"bottom":n==="left"?"right":"left",{targetRange:f,targetTicks:g}=see(t,e,d.index,d.isZeroAlign,d.isTickAlign,d.range,h,c,u,l);if(d.index!==0&&g){const p=It.getFunction("getAxisDomainRangeAndLabels"),{range:v,ticks:m}=p(d.range.min,d.range.max,d.axisOption,d.isZeroAlign,n==="bottom"||n==="top"?l._table.getColWidth(o)||l._table.tableNoFrameWidth:l._table.getRowHeight(a)||l._table.tableNoFrameHeight,{targetTicks:g,targetRange:f});d.range.min=v[0],d.range.max=v[1],d.ticks=m}return d.targetRange=f,d.targetTicks=g,d}function Eht(n,t,e,i,r,o,a){const{axisOption:s,isPercent:l,isZeroAlign:h,isTickAlign:u,seriesIndice:d,theme:c,chartType:f}=yT(n,t,i,a),g=Lht(a.dataset.collectedValues,r,h,o,d??e);if(!g)return;l&&(g.min=g.min<0?-1:0,g.max=g.max>0?1:0),(s?.zero||g.min===g.max)&&(g.min=Math.min(g.min,0),g.max=Math.max(g.max,0));const p=It.getFunction("getAxisDomainRangeAndLabels"),{range:v,ticks:m}=p(g.min,g.max,s,h,i==="bottom"||i==="top"?a._table.getColWidth(n)||a._table.tableNoFrameWidth:a._table.getRowHeight(t)||a._table.tableNoFrameHeight);s?.nice&&(g.min=v[0],g.max=v[1]);const y=m;return yt(s?.min)&&(g.min=s.min),yt(s?.max)&&(g.max=s.max),{index:d??e,range:g,ticks:y,isZeroAlign:h,isTickAlign:u,axisOption:s,theme:c,chartType:f}}function see(n,t,e,i,r,o,a,s,l,h){let u,d;if(!i&&!r)return{targetTicks:u,targetRange:d};const c=Eht(n,t,a.length-1-e,s,a,l,h);if(c){const{range:f,ticks:g}=c;if(d=f,i){const p=tee(o,f);p&&(o.min=p.range1[0],o.max=p.range1[1],d.min=p.range2[0],d.max=p.range2[1])}r&&(u=i?eee(d,n,t,e,s,h):g)}return{targetTicks:u,targetRange:d}}class lee{constructor(t,e,i){this.table=t,this.customCellStyle=e,this.customCellStyleArrangement=i}getCustomCellStyle(t,e){const i=this.getCustomCellStyleIds(t,e);if(i.length){const r=[];return i.forEach((o=>{const a=this.getCustomCellStyleOption(o);if(ra(a?.style)){const s=a.style({col:t,row:e,table:this.table,value:this.table.getCellValue(t,e),dataValue:this.table.getCellOriginValue(t,e),cellHeaderPaths:this.table.getCellHeaderPaths(t,e)});r.push(s)}else a?.style&&r.push(a.style)})),oi({},...r)}}getCustomCellStyleIds(t,e){const i=[],r=this.table.getCellRange(t,e);for(let o=r.start.col;o<=r.end.col;o++)for(let a=r.start.row;a<=r.end.row;a++)this.customCellStyleArrangement.forEach((s=>{s.cellPosition.range?s.cellPosition.range.start.col<=o&&s.cellPosition.range.end.col>=o&&s.cellPosition.range.start.row<=a&&s.cellPosition.range.end.row>=a&&i.push(s.customStyleId):s.cellPosition.col===o&&s.cellPosition.row===a&&i.push(s.customStyleId)}));return i}getCustomCellStyleOption(t){return this.customCellStyle.find((e=>e.id===t))}registerCustomCellStyle(t,e){const i=this.customCellStyle.findIndex((r=>r.id===t));i===-1?this.customCellStyle.push({id:t,style:e}):this.customCellStyle[i]={id:t,style:e},this.customCellStyleArrangement.forEach((r=>{const o=r.cellPosition;if(r.customStyleId===t)if(o.range)for(let a=Math.max(0,o.range.start.col);a<=Math.min(this.table.colCount-1,o.range.end.col);a++)for(let s=Math.max(0,o.range.start.row);s<=Math.min(this.table.rowCount-1,o.range.end.row);s++)this.table.scenegraph.updateCellContent(a,s);else this.table.scenegraph.updateCellContent(o.col,o.row)})),this.table.scenegraph.updateNextFrame()}arrangeCustomCellStyle(t,e,i){var r;const o=this.customCellStyleArrangement.findIndex((s=>s.cellPosition.range&&t.range?s.cellPosition.range.start.col===t.range.start.col&&s.cellPosition.range.start.row===t.range.start.row&&s.cellPosition.range.end.col===t.range.end.col&&s.cellPosition.range.end.row===t.range.end.row:s.cellPosition.col===t.col&&s.cellPosition.row===t.row));if(o===-1&&!e)return;if(o===-1&&e)this.customCellStyleArrangement.push({cellPosition:{col:t.col,row:t.row,range:t.range},customStyleId:e});else{if(this.customCellStyleArrangement[o].customStyleId===e)return;e?this.customCellStyleArrangement[o].customStyleId=e:this.customCellStyleArrangement.splice(o,1)}const a=(r=this.getCustomCellStyleOption(e))===null||r===void 0?void 0:r.style;if(a){i=!0;for(const s in a)if(ult.indexOf(s)===-1){i=!1;break}}if(t.range)for(let s=Math.max(0,t.range.start.col);s<=Math.min(this.table.colCount-1,t.range.end.col);s++)for(let l=Math.max(0,t.range.start.row);l<=Math.min(this.table.rowCount-1,t.range.end.row);l++){const h=this.table.getCellRange(s,l);for(let u=h.start.col;u<=h.end.col;u++)for(let d=h.start.row;d<=h.end.row;d++)this.table.scenegraph.updateCellContent(u,d,i)}else this.table.scenegraph.updateCellContent(t.col,t.row,i);this.table.scenegraph.updateNextFrame()}updateCustomCell(t,e){this.customCellStyle.length=0,this.customCellStyleArrangement.length=0,t.forEach((i=>{this.registerCustomCellStyle(i.id,i.style)})),e.forEach((i=>{this.arrangeCustomCellStyle(i.cellPosition,i.customStyleId)}))}hasCustomCellStyle(t){return this.customCellStyle.some((e=>e.id===t))}}function l0(n,t){n=n.clone();for(const e in t){const i=t[e];Y(i)&&(n[`_${e}`]=i)}return n}const hee=()=>{It.registerComponent("customCellStylePlugin",lee)},uee={};function dee(n,t,e){var i,r,o,a,s,l,h,u,d,c;const f=(i=e.customCellStylePlugin)===null||i===void 0?void 0:i.getCustomCellStyle(n,t),{layoutMap:g}=e.internalProps;if(g.isHeader(n,t)){let x;if(!e.isPivotTable()||e.isBottomFrozenRow(t)||e.isRightFrozenColumn(n))x=`${n}-${t}`;else{const R=e.getHeaderDefine(n,t),L=e.isCornerHeader(n,t);x=R?.dimensionKey?L?`dim-cor-${R.dimensionKey}`:`dim-${R.dimensionKey}`:R?.indicatorKey?`ind-${R.indicatorKey}`:`${n}-${t}`}let S=e.headerStyleCache.get(x);if(S)return f?l0(S,f):S;const A=g.getHeader(n,t);let T;if(e.isPivotChart()&&nee(n,t,g)&&g.isAxisCell(n,t)?T=(o=(r=g.getBody(n,e.rowHeaderLevelCount).style)===null||r===void 0?void 0:r.padding)!==null&&o!==void 0?o:e.theme.bodyStyle.padding:e.isPivotChart()&&ree(n,t,g)&&g.isAxisCell(n,t)&&(T=(s=(a=g.getBody(e.columnHeaderLevelCount,t).style)===null||a===void 0?void 0:a.padding)!==null&&s!==void 0?s:e.theme.bodyStyle.padding),(!A||A.isEmpty)&&(g.isLeftBottomCorner(n,t)||g.isRightBottomCorner(n,t)||g.isCornerHeader(n,t)||g.isRightTopCorner(n,t)))return uee;const M=e.internalProps.headerHelper.getStyleClass(A?.headerType||"text");if(g.isBottomFrozenRow(n,t)&&e.theme.bottomFrozenStyle)S=Xw(T?{padding:T}:{},e.theme.bottomFrozenStyle,{col:n,row:t,table:e,value:e.getCellValue(n,t),dataValue:e.getCellOriginValue(n,t),cellHeaderPaths:e.getCellHeaderPaths(n,t)},M,e.options.autoWrapText,e.theme);else if(g.isRightFrozenColumn(n,t)&&e.theme.rightFrozenStyle)S=Xw(T?{padding:T}:{},e.theme.rightFrozenStyle,{col:n,row:t,table:e,value:e.getCellValue(n,t),dataValue:e.getCellOriginValue(n,t),cellHeaderPaths:e.getCellHeaderPaths(n,t)},M,e.options.autoWrapText,e.theme);else{const R=A?.style||{};T&&(R.padding=T),S=Xw(R,g.isColumnHeader(n,t)||g.isBottomFrozenRow(n,t)?e.theme.headerStyle:g.isRowHeader(n,t)||g.isRightFrozenColumn(n,t)?e.theme.rowHeaderStyle:e.theme.cornerHeaderStyle,{col:n,row:t,table:e,value:e.getCellValue(n,t),dataValue:e.getCellOriginValue(n,t),cellHeaderPaths:e.getCellHeaderPaths(n,t)},M,e.options.autoWrapText,e.theme)}return e.headerStyleCache.set(x,S),f?l0(S,f):S}let p,v;!((h=(l=e.internalProps)===null||l===void 0?void 0:l.dataConfig)===null||h===void 0)&&h.mappingRules&&!e.isHeader(n,t)&&((c=(d=(u=e.internalProps)===null||u===void 0?void 0:u.dataConfig)===null||d===void 0?void 0:d.mappingRules)===null||c===void 0||c.forEach(((x,S)=>{x.bgColor&&e.internalProps.layoutMap.getIndicatorKey(n,t)===x.bgColor.indicatorKey&&(p=x.bgColor.mapping)})));const m=e.getCellType(n,t),y=e.getCellOriginRecord(n,t);let b;if(v=y?.vtableMerge?"merge-title":e.isSeriesNumberInBody(n,t)?`${n}-series-`+m:e.isListTable()&&!e.transpose||e.isPivotTable()&&e.internalProps.layoutMap.indicatorsAsCol?n+m:t+m,b=y?.vtableMerge?e.bodyMergeTitleCache.get(v):g.isBottomFrozenRow(t)?e.bodyBottomStyleCache.get(v):e.bodyStyleCache.get(v),b)return f?l0(b,f):b;const _=g.getBody(n,t),w=e.internalProps.bodyHelper.getStyleClass(e.getCellType(n,t)),C=_?.style;return b=Q3(C,y?.vtableMerge&&e.theme.groupTitleStyle?e.theme.groupTitleStyle:g.isBottomFrozenRow(t)&&e.theme.bottomFrozenStyle?e.theme.bottomFrozenStyle:g.isRightFrozenColumn(n)&&e.theme.rightFrozenStyle?e.theme.rightFrozenStyle:e.theme.bodyStyle,{col:n,row:t,table:e,value:e.getCellValue(n,t),dataValue:e.getCellOriginValue(n,t),cellHeaderPaths:e.getCellHeaderPaths(n,t)},w,e.options.autoWrapText,e.theme),p&&(b=l0(b,{bgColor:p})),ra(C)||(g.isBottomFrozenRow(t)?e.bodyBottomStyleCache.set(v,b):e.bodyStyleCache.set(v,b)),f?l0(b,f):b}function yq(n){return Math.floor(n)===n}class cee extends Me{onUpdate(t,e,i){if(this.from.x!==this.to.x){const r=t?this.to.x:this.from.x+Math.floor((this.to.x-this.from.x)*e);this.params.table.scrollLeft=r}if(this.from.y!==this.to.y){const r=t?this.to.y:this.from.y+Math.floor((this.to.y-this.from.y)*e);this.params.table.scrollTop=r}}}class fee{constructor(t){this.table=t,this.timeline=new N3,this.ticker=new Rst(this.table.scenegraph.stage),this.ticker.addTimeline(this.timeline),this.ticker.setFPS(60),this.tempGraphic=ei({})}scrollTo(t,e){var i,r;const o={x:this.table.scrollLeft,y:this.table.scrollTop},{col:a,row:s}=t;let l,h,u=a,d=s;yt(a)&&!yq(a)&&(u=Math.floor(a),l=a-u),yt(s)&&!yq(s)&&(d=Math.floor(s),h=s-d);const c=this.table.getCellRect(u??0,d??0);let{left:f,top:g}=c;l&&(f+=l*c.width),h&&(g+=h*c.height);const p={x:yt(a)?f-this.table.getFrozenColsWidth():this.table.scrollLeft,y:yt(s)?g-this.table.getFrozenRowsHeight():this.table.scrollTop},v=fl(e)?e?3e3:0:(i=e?.duration)!==null&&i!==void 0?i:3e3,m=fl(e)?e?"linear":"":(r=e?.easing)!==null&&r!==void 0?r:"linear";new Mst(pn.GenAutoIncrementId(),this.timeline).bind(this.tempGraphic).play(new cee(o,p,v,m,{graphic:this.tempGraphic,table:this.table})),this.ticker.start()}clear(){this.timeline.clear(),this.ticker.stop()}}function bT(n){return ra(n)?n:Rt(n)?(t,e)=>n.find((i=>i.range.start.col<=t&&i.range.end.col>=t&&i.range.start.row<=e&&i.range.end.row>=e)):void 0}let gee=class{constructor(t,e){var i;this.plugins=new Map,this.table=t,(i=e.plugins)===null||i===void 0||i.map((r=>{this.register(r),this._bindTableEventForPlugin(r)}))}register(t){this.plugins.set(t.id,t)}registerAll(t){t.forEach((e=>this.register(e)))}getPlugin(t){return this.plugins.get(t)}getPluginByName(t){return Array.from(this.plugins.values()).find((e=>e.name===t))}_bindTableEventForPlugin(t){var e;(e=t.runTime)===null||e===void 0||e.forEach((i=>{this.table.on(i,((...r)=>{var o;(o=t.run)===null||o===void 0||o.call(t,...r,i,this.table)}))}))}updatePlugins(t){Array.from(this.plugins.values()).filter((i=>!t?.some((r=>r.id===i.id)))).forEach((i=>{this.release(),this.plugins.delete(i.id)})),this.plugins.forEach((i=>{i.update&&i.update()}));const e=t?.filter((i=>!this.plugins.has(i.id)));e?.forEach((i=>{this.register(i),this._bindTableEventForPlugin(i)}))}release(){this.plugins.forEach((t=>{var e;(e=t.release)===null||e===void 0||e.call(t,this.table)}))}};const{toBoxArray:du}=HXt,{isTouchEvent:pee}=OXt,vee=/^\$(\d+)\$(\d+)$/;gXt();class mee extends u2{static get EVENT_TYPE(){return at}constructor(t,e={}){var i,r,o,a,s,l,h,u,d,c,f,g,p,v,m,y,b,_,w,C,x,S,A,T;if(super(),this.showFrozenIcon=!0,this.version="1.20.0",this.id=`VTable${Date.now()}`,this.isReleased=!1,this._chartEventMap={},this.throttleInvalidate=xXt(this.render.bind(this),200),Be.mode==="node"?(e=t,t=null):t instanceof HTMLElement||(e=t,t=t.container?t.container:null),!t&&e.mode!=="node"&&!e.canvas)throw new Error("vtable's container is undefined");this.pluginManager=new gee(this,e),this.fireListeners(at.BEFORE_INIT,{options:e,container:t}),t=e.container&&e.container instanceof HTMLElement?e.container:t,((i=e.customConfig)===null||i===void 0?void 0:i.imageAnonymous)===!1&&(jt.isImageAnonymous=!1);const{frozenColCount:M=0,unfreezeAllOnExceedsMaxWidth:R,frozenRowCount:L,defaultRowHeight:B=40,defaultHeaderRowHeight:P,defaultColWidth:k=80,defaultHeaderColWidth:E,widthMode:D="standard",heightMode:I="standard",autoFillWidth:O=!1,autoFillHeight:H=!1,containerFit:F={width:!1,height:!1},widthAdaptiveMode:N="only-body",heightAdaptiveMode:$="only-body",keyboardOptions:V,eventOptions:X,rowSeriesNumber:Z,enableCheckboxCascade:tt,enableHeaderCheckboxCascade:K,columnResizeMode:rt,rowResizeMode:q="none",resize:it,dragHeaderMode:nt,dragOrder:W,showFrozenIcon:G,allowFrozenColCount:j,padding:U,hover:J,menu:ot,select:st,customRender:lt,pixelRatio:ft=_c,renderChartAsync:vt,renderChartAsyncBatchCount:pt,mode:bt,modeParams:me,canvasWidth:He,canvasHeight:Ai,contentOffsetX:Pe,contentOffsetY:On,overscrollBehavior:en,limitMinWidth:Xi,limitMinHeight:re,clearDOM:wi=!0}=e,{groupConfig:ii,groupBy:qi,groupTitleFieldFormat:Gr,groupTitleCustomLayout:kt,enableTreeStickCell:ki}=e;this.container=t,this.options=e,this._widthMode=D,this._heightMode=I,this._widthAdaptiveMode=N,this._heightAdaptiveMode=$,this._autoFillWidth=O,this._autoFillHeight=H,F!==void 0&&(this._containerFit=typeof F=="boolean"?{width:F,height:F}:F&&typeof F=="object"?{width:(r=F.width)===null||r===void 0||r,height:(o=F.height)===null||o===void 0||o}:{width:!1,height:!1}),this.customRender=lt,this.padding={top:0,right:0,left:0,bottom:0},U&&(typeof U=="number"?(this.padding.top=U,this.padding.left=U,this.padding.bottom=U,this.padding.right=U):(U.top&&(this.padding.top=U.top),U.bottom&&(this.padding.bottom=U.bottom),U.left&&(this.padding.left=U.left),U.right&&(this.padding.right=U.right))),(Y(Ai)||Y(He))&&(this.canvasSizeSeted=!0),this.tableNoFrameWidth=0,this.tableNoFrameHeight=0,this.contentOffsetX=Pe??0,this.contentOffsetY=On??0,this.canvasWidth=yt(He)?He:void 0,this.canvasHeight=yt(Ai)?Ai:void 0,this.columnWidthComputeMode=(a=e.columnWidthComputeMode)!==null&&a!==void 0?a:"normal";const Mt=this.internalProps={};G!==void 0&&(this.showFrozenIcon=G),typeof j=="number"&&j<=0&&(this.showFrozenIcon=!1),this.options.canvas?(Be.mode!=="node"&&(Mt.element=this.options.canvas.parentElement,Mt.element.style.position="relative"),Mt.focusControl=new lq(this,Mt.element),Mt.canvas=this.options.canvas,Mt.context=Mt.canvas.getContext("2d")):Be.mode!=="node"&&(Mt.element=RKt(this.padding),Mt.focusControl=new lq(this,Mt.element),Mt.canvas=document.createElement("canvas"),Mt.element.appendChild(Mt.canvas),Mt.context=Mt.canvas.getContext("2d"),!((s=e.customConfig)===null||s===void 0)&&s.createReactContainer&&AJt(this)),Mt.handler=new g2,yt(this.options.resizeTime)&&(Mt.handler.resizeTime=this.options.resizeTime),Mt.pixelRatio=ft,Mt.frozenColCount=M,Mt.frozenRowCount=L,Mt.unfreezeAllOnExceedsMaxWidth=R==null||R,Mt.defaultRowHeight=B,Mt.defaultHeaderRowHeight=P??B,Mt.defaultColWidth=k,Mt.defaultHeaderColWidth=E??k,Mt.keyboardOptions=V,Mt.eventOptions=X,Mt.rowSeriesNumber=Z,Mt.enableCheckboxCascade=(l=tt??Z?.enableTreeCheckbox)===null||l===void 0||l,Mt.enableHeaderCheckboxCascade=tt||K==null||K,Mt.columnResizeMode=(h=it?.columnResizeMode)!==null&&h!==void 0?h:rt,Mt.rowResizeMode=(u=it?.rowResizeMode)!==null&&u!==void 0?u:q,Mt.dragHeaderMode=(c=(d=W?.dragHeaderMode)!==null&&d!==void 0?d:nt)!==null&&c!==void 0?c:"none",Mt.renderChartAsync=vt,_X(pt),Mt.overscrollBehavior=en??"auto",Mt.groupBy=(f=ii?.groupBy)!==null&&f!==void 0?f:qi,Mt.groupTitleCheckbox=(g=ii?.titleCheckbox)!==null&&g!==void 0?g:!!Z?.enableTreeCheckbox,Mt.groupTitleFieldFormat=(p=ii?.titleFieldFormat)!==null&&p!==void 0?p:Gr,Mt.groupTitleCustomLayout=(v=ii?.titleCustomLayout)!==null&&v!==void 0?v:kt,Mt.enableTreeStickCell=(m=ii?.enableTreeStickCell)!==null&&m!==void 0?m:ki,Mt._rowHeightsMap=new hq(this),Mt._rowRangeHeightsMap=new Map,Mt._colRangeWidthsMap=new Map,Mt._widthResizedColMap=new Set,Mt._heightResizedRowMap=new Set,this.colWidthsMap=new Vu,this.colContentWidthsMap=new Vu,this.colWidthsLimit={};const pm=this;if(Mt.calcWidthContext={_:Mt,get full(){var $r;return Be.mode==="node"?pm.canvasWidth/(ft??1):this._.canvas.width/(($r=this._.context.pixelRatio)!==null&&$r!==void 0?$r:window.devicePixelRatio)}},Mt.cellTextOverflows={},Mt.focusedTable=!1,Mt.theme=rh.of((y=e.theme)!==null&&y!==void 0?y:rh.DEFAULT),Mt.theme.isPivot=this.isPivotTable(),Z1(Mt.theme.functionalIconsStyle),t?(wi&&(t.innerHTML=""),t.appendChild(Mt.element),this._updateSize()):this._updateSize(),Mt.bodyHelper=new kte(this),Mt.headerHelper=new Vte(this),Mt.rowSeriesNumberHelper=new Gte(this),Mt.autoWrapText=e.autoWrapText,Mt.enableLineBreak=e.enableLineBreak,Mt.allowFrozenColCount=(b=e.allowFrozenColCount)!==null&&b!==void 0?b:0,Mt.limitMaxAutoWidth=(_=e.limitMaxAutoWidth)!==null&&_!==void 0?_:450,Mt.limitMinWidth=Xi!=null?typeof Xi=="number"?Xi:Xi?10:0:10,Mt.limitMinHeight=re!=null?typeof re=="number"?re:re?10:0:10,this.scenegraph=new lQt(this),this.stateManager=new QQt(this),this.eventManager=new Mte(this),this.animationManager=new fee(this),e.legends){Mt.legends=[];const $r=It.getFunction("createLegend");if(Array.isArray(e.legends)){for(let Td=0;Td<e.legends.length;Td++)Mt.legends.push($r(e.legends[Td],this));this.scenegraph.tableGroup.setAttributes({x:this.tableX,y:this.tableY})}else Mt.legends.push($r(e.legends,this)),this.scenegraph.tableGroup.setAttributes({x:this.tableX,y:this.tableY})}if(Mt.tooltip=Object.assign({parentElement:this.getElement(),renderMode:"html",isShowOverflowTextTooltip:!1,confine:!0,position:yo.bottom},e.tooltip),Mt.tooltip.renderMode==="html"){const $r=It.getComponent("tooltipHandler");$r&&(Mt.tooltipHandler=new $r(this,Mt.tooltip.confine))}if(Mt.menu=Object.assign({renderMode:"html"},e.menu),Array.isArray((w=e.menu)===null||w===void 0?void 0:w.dropDownMenuHighlight)&&this.setDropDownMenuHighlight((C=e.menu)===null||C===void 0?void 0:C.dropDownMenuHighlight),(Array.isArray((x=e.menu)===null||x===void 0?void 0:x.defaultHeaderMenuItems)||typeof((S=e.menu)===null||S===void 0?void 0:S.defaultHeaderMenuItems)=="function")&&(this.globalDropDownMenu=e.menu.defaultHeaderMenuItems),Mt.menu.renderMode==="html"){const $r=It.getComponent("menuHandler");Mt.menuHandler=new $r(this)}this.headerStyleCache=new Map,this.bodyStyleCache=new Map,this.bodyMergeTitleCache=new Map,this.bodyBottomStyleCache=new Map,Mt.stick={changedCells:new Map},Mt.customMergeCell=bT(e.customMergeCell);const sg=It.getComponent("customCellStylePlugin");sg&&(this.customCellStylePlugin=new sg(this,(A=e.customCellStyle)!==null&&A!==void 0?A:[],(T=e.customCellStyleArrangement)!==null&&T!==void 0?T:[])),this._adjustCanvasSizeByOption()}_adjustCanvasSizeByOption(){this.options.canvasHeight!=="auto"&&this.options.canvasWidth!=="auto"||setTimeout((()=>{var t,e,i,r,o,a,s,l,h,u,d,c,f,g,p,v,m,y,b,_,w,C,x,S;let A,T;if(this.options.canvasHeight==="auto"){let M=0;if(!((t=this.theme.frameStyle)===null||t===void 0)&&t.innerBorder)M+=(r=du((i=(e=this.internalProps.theme.frameStyle)===null||e===void 0?void 0:e.shadowBlur)!==null&&i!==void 0?i:[0])[1])!==null&&r!==void 0?r:0;else if(this.theme.frameStyle){const R=du((a=(o=this.internalProps.theme.frameStyle)===null||o===void 0?void 0:o.borderLineWidth)!==null&&a!==void 0?a:[null]),L=du((l=(s=this.internalProps.theme.frameStyle)===null||s===void 0?void 0:s.shadowBlur)!==null&&l!==void 0?l:[0]);M+=((h=R[0])!==null&&h!==void 0?h:0)+((u=L[0])!==null&&u!==void 0?u:0)+(((d=R[2])!==null&&d!==void 0?d:0)+((c=L[2])!==null&&c!==void 0?c:0))}T=Math.min(this.options.maxCanvasHeight?this.options.maxCanvasHeight-M:2e4,this.getAllRowsHeight())+M}else T=this.canvasHeight;if(this.options.canvasWidth==="auto"){let M=0;if(!((f=this.theme.frameStyle)===null||f===void 0)&&f.innerBorder)M+=(v=du((p=(g=this.internalProps.theme.frameStyle)===null||g===void 0?void 0:g.shadowBlur)!==null&&p!==void 0?p:[0])[2])!==null&&v!==void 0?v:0;else if(this.theme.frameStyle){const R=du((y=(m=this.internalProps.theme.frameStyle)===null||m===void 0?void 0:m.borderLineWidth)!==null&&y!==void 0?y:[null]),L=du((_=(b=this.internalProps.theme.frameStyle)===null||b===void 0?void 0:b.shadowBlur)!==null&&_!==void 0?_:[0]);M+=((w=R[1])!==null&&w!==void 0?w:0)+((C=L[1])!==null&&C!==void 0?C:0)+(((x=R[3])!==null&&x!==void 0?x:0)+((S=L[3])!==null&&S!==void 0?S:0))}A=Math.min(this.options.maxCanvasWidth?this.options.maxCanvasWidth-M:2e4,this.getAllColsWidth())+M}else A=this.canvasWidth;this.setCanvasSize(A,T)}),0)}getContainer(){return this.container}getElement(){return this.internalProps.element}get canvas(){return this.internalProps.canvas}setCanvasSize(t,e){this.canvasWidth=t,this.canvasHeight=e,this.options.canvasHeight=e,this.options.canvasWidth=t,this.resize()}setContentInsetXY(t,e){this.contentOffsetX=t,this.contentOffsetY=e,this.options.contentOffsetX=t,this.options.contentOffsetY=e,this.resize()}resize(){var t;this._updateSize(),(t=this.internalProps.legends)===null||t===void 0||t.forEach((e=>{e?.resize()})),this.internalProps.title&&this.internalProps.title.resize(),this.internalProps.emptyTip&&this.internalProps.emptyTip.resize(),this.scenegraph.resize()}get rowCount(){return this.internalProps.rowCount}set rowCount(t){this.internalProps.rowCount=t}get colCount(){var t;return(t=this.internalProps.colCount)!==null&&t!==void 0?t:0}set colCount(t){this.internalProps.colCount=t}get frozenColCount(){var t,e,i,r,o;return(o=(i=(e=(t=this.internalProps)===null||t===void 0?void 0:t.layoutMap)===null||e===void 0?void 0:e.frozenColCount)!==null&&i!==void 0?i:(r=this.internalProps)===null||r===void 0?void 0:r.frozenColCount)!==null&&o!==void 0?o:0}set frozenColCount(t){t>=this.colCount&&(t=0),this.internalProps.frozenColCount=t,this.options.frozenColCount=t;const e=this._getMaxFrozenWidth();if(this.getColsWidth(0,t-1)>e)if(this.internalProps.unfreezeAllOnExceedsMaxWidth)this.internalProps.frozenColCount=0;else{const i=this._getComputedFrozenColCount(t);this.internalProps.frozenColCount=i}this.stateManager.setFrozenCol(this.internalProps.frozenColCount)}setFrozenColCount(t){t>=this.colCount&&(t=0),this.internalProps.frozenColCount=t,this.options.frozenColCount=t;const e=this._getMaxFrozenWidth();if(this.getColsWidth(0,t-1)>e)if(this.internalProps.unfreezeAllOnExceedsMaxWidth)this.internalProps.frozenColCount=0;else{const i=this._getComputedFrozenColCount(t);this.internalProps.frozenColCount=i}this.stateManager.setFrozenCol(this.internalProps.frozenColCount)}_setFrozenColCount(t){t>=this.colCount&&(t=0),this.internalProps.frozenColCount=t}_resetFrozenColCount(){this.options.frozenColCount&&(this.tableNoFrameWidth-this.getColsWidth(0,this.options.frozenColCount-1)<=120?this._setFrozenColCount(0):this.frozenColCount!==this.options.frozenColCount&&this._setFrozenColCount(this.options.frozenColCount))}get frozenRowCount(){var t,e,i,r,o;return(o=(i=(e=(t=this.internalProps)===null||t===void 0?void 0:t.layoutMap)===null||e===void 0?void 0:e.frozenRowCount)!==null&&i!==void 0?i:(r=this.internalProps)===null||r===void 0?void 0:r.frozenRowCount)!==null&&o!==void 0?o:0}set frozenRowCount(t){this.internalProps.frozenRowCount=t,this.options.frozenRowCount=t,this.stateManager.setFrozenRow(this.internalProps.frozenRowCount)}_setFrozenRowCount(t){this.internalProps.frozenRowCount=t,this.stateManager.setFrozenRow(this.internalProps.frozenRowCount)}get rightFrozenColCount(){var t,e,i,r,o;return(o=(i=(e=(t=this.internalProps)===null||t===void 0?void 0:t.layoutMap)===null||e===void 0?void 0:e.rightFrozenColCount)!==null&&i!==void 0?i:(r=this.internalProps)===null||r===void 0?void 0:r.rightFrozenColCount)!==null&&o!==void 0?o:0}set rightFrozenColCount(t){this.scenegraph.dealWidthRightFrozen(t)}get bottomFrozenRowCount(){var t,e,i,r,o;return(o=(i=(e=(t=this.internalProps)===null||t===void 0?void 0:t.layoutMap)===null||e===void 0?void 0:e.bottomFrozenRowCount)!==null&&i!==void 0?i:(r=this.internalProps)===null||r===void 0?void 0:r.bottomFrozenRowCount)!==null&&o!==void 0?o:0}set bottomFrozenRowCount(t){this.scenegraph.dealWidthBottomFrozen(t)}get defaultRowHeight(){return yt(this.internalProps.defaultRowHeight)?this.internalProps.defaultRowHeight:40}set defaultRowHeight(t){this.internalProps.defaultRowHeight=t,this.options.defaultRowHeight=t}get defaultHeaderRowHeight(){return this.internalProps.defaultHeaderRowHeight}set defaultHeaderRowHeight(t){this.internalProps.defaultHeaderRowHeight=t,this.options.defaultHeaderRowHeight=t}get defaultColWidth(){return this.internalProps.defaultColWidth}set defaultColWidth(t){this.internalProps.defaultColWidth=t,this.options.defaultColWidth=t}get defaultHeaderColWidth(){return this.internalProps.defaultHeaderColWidth}set defaultHeaderColWidth(t){this.internalProps.defaultHeaderColWidth=t,this.options.defaultHeaderColWidth=t}get colWidthsMap(){return this.internalProps._colWidthsMap}set colWidthsMap(t){this.internalProps._colWidthsMap=t}get colContentWidthsMap(){return this.internalProps._colContentWidthsMap}set colContentWidthsMap(t){this.internalProps._colContentWidthsMap=t}get _colRangeWidthsMap(){return this.internalProps._colRangeWidthsMap}set _colRangeWidthsMap(t){this.internalProps._colRangeWidthsMap=t}get _rowRangeHeightsMap(){return this.internalProps._rowRangeHeightsMap}set _rowRangeHeightsMap(t){this.internalProps._rowRangeHeightsMap=t}get rowHeightsMap(){return this.internalProps._rowHeightsMap}set rowHeightsMap(t){this.internalProps._rowHeightsMap=t}get colWidthsLimit(){return this.internalProps._colWidthsLimit}set colWidthsLimit(t){this.internalProps._colWidthsLimit=t}get keyboardOptions(){var t;return(t=this.internalProps.keyboardOptions)!==null&&t!==void 0?t:null}set keyboardOptions(t){this.internalProps.keyboardOptions=t??void 0}get eventOptions(){var t;return(t=this.internalProps.eventOptions)!==null&&t!==void 0?t:null}set eventOptions(t){this.internalProps.eventOptions=t??void 0}get widthMode(){return this._widthMode}set widthMode(t){t!==this._widthMode&&(this._widthMode=t,this.options.widthMode=t)}get heightMode(){return this._heightMode}set heightMode(t){t!==this._heightMode&&(this._heightMode=t,this.options.heightMode=t)}get autoFillWidth(){return this._autoFillWidth}set autoFillWidth(t){t!==this._autoFillWidth&&(this._autoFillWidth=t)}get autoFillHeight(){return this._autoFillHeight}set autoFillHeight(t){t!==this._autoFillHeight&&(this._autoFillHeight=t)}get widthAdaptiveMode(){return this._widthAdaptiveMode}set widthAdaptiveMode(t){t!==this._widthAdaptiveMode&&(this._widthAdaptiveMode=t)}get heightAdaptiveMode(){return this._heightAdaptiveMode}set heightAdaptiveMode(t){t!==this._heightAdaptiveMode&&(this._heightAdaptiveMode=t)}_colWidthDefineToPxWidth(t){return t==="auto"?0:Wg(this,t)}_getMaxFrozenWidth(){var t;const e=(t=this.options.maxFrozenWidth)!==null&&t!==void 0?t:"80%";return Wg(this,e)}_getComputedFrozenColCount(t){const e=this._getMaxFrozenWidth();let i=t;for(;this.getColsWidth(0,i-1)>e&&(i--,!(i<=0)););return i}_getColWidthLimits(t){const e=this.colWidthsLimit[t];if(!e)return null;const i={};return e.min&&(i.min=Wg(this,e.min),i.minDef=e.min),e.max&&(i.max=Wg(this,e.max),i.maxDef=e.max),i}_adjustColWidth(t,e){const i=this._getColWidthLimits(t);return Math.max(EKt(i,e),0)}get pixelRatio(){return this.internalProps.pixelRatio}setPixelRatio(t){var e;if(t!==((e=this.internalProps)===null||e===void 0?void 0:e.pixelRatio)){this.internalProps.pixelRatio=t;const i=this.canvasWidth;this.internalProps.calcWidthContext={_:this.internalProps,get full(){var r;return Be.mode==="node"?i/(t??1):this._.canvas.width/((r=this._.context.pixelRatio)!==null&&r!==void 0?r:window.devicePixelRatio)}},this.scenegraph.setPixelRatio(t)}}_updateSize(){var t,e,i,r,o,a,s,l,h,u,d,c,f,g,p,v,m,y,b,_,w,C,x,S,A,T,M,R,L,B;const{padding:P}=this;let k=0,E=0;if(this.tableX=this.contentOffsetX,this.tableY=this.contentOffsetY,this.options.canvas&&this.options.viewBox)k=this.options.viewBox.x2-this.options.viewBox.x1,E=this.options.viewBox.y2-this.options.viewBox.y1,!((t=this==null?void 0:this.scenegraph)===null||t===void 0)&&t.stage&&(this.options.viewBox?this.scenegraph.stage.setViewBox(this.options.viewBox,!1):this.scenegraph.stage.resize(k,E));else if(Be.mode==="browser"){const N=this.getElement();let $=0,V=0;const X=Y(this.canvasWidth),Z=Y(this.canvasHeight);if(this.canvasSizeSeted&&(X&&($=this.canvasWidth),Z&&(V=this.canvasHeight)),(!X||!Z)&&N.parentElement){const K=N.parentElement.style||window.getComputedStyle(N.parentElement);X||($=N.parentElement.offsetWidth-(parseInt(K.paddingLeft,10)||0)-(parseInt(K.paddingRight,10)||0)),Z||(V=N.parentElement.offsetHeight-parseInt(K.paddingTop||"0px",10)-parseInt(K.paddingBottom||"0px",20)),$=($??1)-(this.options.tableSizeAntiJitter?1:0),V=(V??1)-(this.options.tableSizeAntiJitter?1:0)}N.style.width=$&&$-P.left-P.right+"px"||"0px",N.style.height=V&&V-P.top-P.bottom+"px"||"0px";const{canvas:tt}=this.internalProps;k=((i=(e=tt.parentElement)===null||e===void 0?void 0:e.offsetWidth)!==null&&i!==void 0?i:1)-(this.options.tableSizeAntiJitter?1:0),E=((o=(r=tt.parentElement)===null||r===void 0?void 0:r.offsetHeight)!==null&&o!==void 0?o:1)-(this.options.tableSizeAntiJitter?1:0),!((a=this==null?void 0:this.scenegraph)===null||a===void 0)&&a.stage?!((s=this.options)===null||s===void 0)&&s.viewBox&&!(!((l=this.options)===null||l===void 0)&&l.canvas)&&this.scenegraph.stage.resize(k,E):(tt.style.width="",tt.style.height="",tt.width=k,tt.height=E,tt.style.width=`${k}px`,tt.style.height=`${E}px`),!((h=this.options)===null||h===void 0)&&h.viewBox&&(k=this.options.viewBox.x2-this.options.viewBox.x1,E=this.options.viewBox.y2-this.options.viewBox.y1),!((u=this==null?void 0:this.scenegraph)===null||u===void 0)&&u.stage&&(this.options.viewBox?this.scenegraph.stage.setViewBox(this.options.viewBox,!1):this.scenegraph.stage.resize(k,E))}else Be.mode==="node"&&(k=this.canvasWidth-1,E=this.canvasHeight-1);const D=this.getTheme().scrollStyle;let I=0,O=0;I=this.shouldVScrollBarWidthShow(k,E,D)?xk(D):0,O=this.shouldHScrollBarWidthShow(k,E,D)?wk(D):0;const H=Math.floor(k-I),F=Math.floor(E-O);if(!((d=this.internalProps.theme)===null||d===void 0)&&d.frameStyle){const N=du((f=(c=this.internalProps.theme.frameStyle)===null||c===void 0?void 0:c.borderLineWidth)!==null&&f!==void 0?f:[null]),$=du((p=(g=this.internalProps.theme.frameStyle)===null||g===void 0?void 0:g.shadowBlur)!==null&&p!==void 0?p:[0]);if(!((v=this.theme.frameStyle)===null||v===void 0)&&v.innerBorder)this.tableX+=this.contentOffsetX,this.tableY+=this.contentOffsetY,this.tableNoFrameWidth=H-((m=$[1])!==null&&m!==void 0?m:0)-this.contentOffsetX,this.tableNoFrameHeight=F-((y=$[2])!==null&&y!==void 0?y:0)-this.contentOffsetY;else{this.tableX+=((b=N[3])!==null&&b!==void 0?b:0)+((_=$[3])!==null&&_!==void 0?_:0),this.tableY+=((w=N[0])!==null&&w!==void 0?w:0)+((C=$[0])!==null&&C!==void 0?C:0);const V=((x=N[1])!==null&&x!==void 0?x:0)+((S=$[1])!==null&&S!==void 0?S:0);this.tableNoFrameWidth=H-(V>I?V-I:0)-(((A=N[3])!==null&&A!==void 0?A:0)+((T=$[3])!==null&&T!==void 0?T:0))-this.contentOffsetX;const X=((M=N[2])!==null&&M!==void 0?M:0)+((R=$[2])!==null&&R!==void 0?R:0);this.tableNoFrameHeight=F-(X>O?X-O:0)-(((L=N[0])!==null&&L!==void 0?L:0)+((B=$[0])!==null&&B!==void 0?B:0))-this.contentOffsetY}}this._clearColRangeWidthsMap(),this._clearRowRangeHeightsMap()}shouldVScrollBarWidthShow(t,e,i){if(i.hoverOn||i.visible==="none")return!1;const r=this.getAllRowsHeight(),o=i.visible?wk(i):0;if(r>e-o&&r<=e){const a=this.getAllColsWidth(),s=i.visible?xk(i):0;if(a>t-s&&a<=t)return!1;if(a>t)return!0;if(a<=t-s)return!1}return!(r<=e-o)}shouldHScrollBarWidthShow(t,e,i){if(i.hoverOn||i.visible==="none")return!1;const r=this.getAllColsWidth(),o=i.visible?xk(i):0;if(r>t-o&&r<=t){const a=this.getAllRowsHeight(),s=i.visible?wk(i):0;if(a>e-s&&a<=e)return!1;if(a>e)return!0;if(a<=e-s)return!1}return!(r<=t-o)}updateViewBox(t){var e,i,r,o,a,s,l,h,u,d,c,f;const g=((r=(i=(e=this.options)===null||e===void 0?void 0:e.viewBox)===null||i===void 0?void 0:i.x2)!==null&&r!==void 0?r:0)-((s=(a=(o=this.options)===null||o===void 0?void 0:o.viewBox)===null||a===void 0?void 0:a.x1)!==null&&s!==void 0?s:0),p=((u=(h=(l=this.options)===null||l===void 0?void 0:l.viewBox)===null||h===void 0?void 0:h.y2)!==null&&u!==void 0?u:0)-((f=(c=(d=this.options)===null||d===void 0?void 0:d.viewBox)===null||c===void 0?void 0:c.y1)!==null&&f!==void 0?f:0),v=t.x2-t.x1,m=t.y2-t.y1;this.options.viewBox=t,g!==v||p!==m?this.resize():this.scenegraph.stage.setViewBox(this.options.viewBox,!0)}setViewBoxTransform(t,e,i,r,o,a){this.internalProps.modifiedViewBoxTransform=!0,this.scenegraph.stage.window.setViewBoxTransform(t,e,i,r,o,a)}get rowHierarchyType(){return this.dataSource.rowHierarchyType}getColsWidth(t,e){var i;if(t>e)return 0;t=Math.max(t,0),e=Math.min(e,((i=this.colCount)!==null&&i!==void 0?i:1/0)-1);const r=this._colRangeWidthsMap.get(`$${t}$${e}`);if(r!=null)return r;const o=this._colRangeWidthsMap.get(`$${t}$${e-1}`);if(o!=null){let s=o+this.getColWidth(e);return this.rightFrozenColCount>0&&e===this.colCount-this.rightFrozenColCount&&(s=this._getRangeSizeForContainerFit(t,e,s,"col")),t>=0&&e>=0&&!Number.isNaN(s)&&this._colRangeWidthsMap.set(`$${t}$${e}`,Math.round(s)),Math.round(s)}let a=0;for(let s=t;s<=e;s++)a+=this.getColWidth(s);return a=this._getRangeSizeForContainerFit(t,e,a,"col"),t>=0&&e>=0&&this._colRangeWidthsMap.set(`$${t}$${e}`,Math.round(a)),Math.round(a)}getRowHeight(t){var e;if(Y(this.rowHeightsMap.get(t))){if(!((e=this.options.customConfig)===null||e===void 0)&&e._disableColumnAndRowSizeRound){const r=this.rowHeightsMap.get(t);let o;return o=t<this.frozenRowCount?this.rowHeightsMap.getSumInRange(0,t):t>=this.rowCount-this.bottomFrozenRowCount?this.rowHeightsMap.getSumInRange(t,this.rowCount-1):this.rowHeightsMap.getSumInRange(this.frozenRowCount,t),o=Number(o.toFixed(2)),Number.isInteger(o)?Math.ceil(r):Math.floor(r)}return this.rowHeightsMap.get(t)}const i=this.getDefaultRowHeight(t);return yt(i)?i:this.defaultRowHeight}getDefaultColumnWidth(t){var e,i;return this.isRowHeader(t,0)||this.isCornerHeader(t,0)?Array.isArray(this.defaultHeaderColWidth)?(e=this.defaultHeaderColWidth[t])!==null&&e!==void 0?e:this.defaultColWidth:this.defaultHeaderColWidth:this.isRightFrozenColumn(t,this.columnHeaderLevelCount)&&this.isPivotTable()?Array.isArray(this.defaultHeaderColWidth)?(i=this.defaultHeaderColWidth[this.rowHeaderLevelCount-this.rightFrozenColCount])!==null&&i!==void 0?i:this.defaultColWidth:this.defaultHeaderColWidth:this.defaultColWidth}getDefaultRowHeight(t){var e,i;return this.isColumnHeader(0,t)||this.isCornerHeader(0,t)||this.isSeriesNumberInHeader(0,t)?Array.isArray(this.defaultHeaderRowHeight)?(e=this.defaultHeaderRowHeight[t])!==null&&e!==void 0?e:this.internalProps.defaultRowHeight:this.defaultHeaderRowHeight:this.isBottomFrozenRow(t)?Array.isArray(this.defaultHeaderRowHeight)?(i=this.defaultHeaderRowHeight[this.columnHeaderLevelCount>0?this.columnHeaderLevelCount-this.bottomFrozenRowCount:0])!==null&&i!==void 0?i:this.internalProps.defaultRowHeight:this.defaultHeaderRowHeight:this.internalProps.defaultRowHeight}_setRowHeight(t,e,i){var r;this.rowHeightsMap.put(t,!((r=this.options.customConfig)===null||r===void 0)&&r._disableColumnAndRowSizeRound?e:Math.round(e)),i&&this._clearRowRangeHeightsMap(t)}setRowHeight(t,e){this.scenegraph.setRowHeight(t,e),this.scenegraph.updateChartSizeForResizeRowHeight(t),this.internalProps._heightResizedRowMap.add(t)}getRowsHeight(t,e){var i,r;if(t>e||this.rowCount===0)return 0;t=Math.max(t,0),e=Math.min(e,((i=this.rowCount)!==null&&i!==void 0?i:1/0)-1);let o=0;const a=this.options.defaultRowHeight==="auto";if(this.heightMode!=="standard"||this.options.customComputeRowHeight||this.autoFillHeight||!this.internalProps.layoutMap||this.hasAutoImageColumn()||a||this.internalProps._heightResizedRowMap.size!==0){if(!((r=this.options.customConfig)===null||r===void 0)&&r._disableColumnAndRowSizeRound){const s=this.rowHeightsMap.getSumInRange(t,e);let l;return l=e<this.frozenRowCount?this.rowHeightsMap.getSumInRange(0,e):e>=this.rowCount-this.bottomFrozenRowCount?this.rowHeightsMap.getSumInRange(e,this.rowCount-1):this.rowHeightsMap.getSumInRange(this.frozenRowCount,e),l=Number(l.toFixed(2)),Number.isInteger(l)?Math.ceil(s):Math.floor(s)}o=this.rowHeightsMap.getSumInRange(t,e)}else{const s=this.rowCount-this.bottomFrozenRowCount;for(let h=t;h<Math.min(e+1,this.columnHeaderLevelCount);h++)o+=this.getRowHeight(h);e>=this.columnHeaderLevelCount&&(o+=this.defaultRowHeight*(Math.min(e,s-1)-Math.max(this.columnHeaderLevelCount,t)+1));let l=0;for(let h=s;h<e+1;h++)l+=this.getRowHeight(h);o=this._getRangeSizeForContainerFit(t,e,o+l,"row")}return Math.round(o)}_getRangeSizeForContainerFit(t,e,i,r="col"){var o;if(!isFinite(t)||!isFinite(e))return i;const a=r==="col"?{totalCount:"colCount",frozenCount:"rightFrozenColCount",fitType:"width",tableSize:"tableNoFrameWidth",getSize:"getColWidth"}:{totalCount:"rowCount",frozenCount:"bottomFrozenRowCount",fitType:"height",tableSize:"tableNoFrameHeight",getSize:"getRowHeight"},s=this[a.tableSize];if(i>=s)return i;const l=this[a.totalCount]-this[a.frozenCount];if(!isFinite(this[a.totalCount])||this[a.frozenCount]<=0||l<0||t>l||e<l||t===e||!(!((o=this.containerFit)===null||o===void 0)&&o[a.fitType]))return i;const h=this[a.totalCount]-1;let u=s;if(t>0){for(let d=0;d<t;d++)if(u-=this[a.getSize](d),u<=0)return i}if(e!==h){for(let d=e+1;d<=h;d++)if(u-=this[a.getSize](d),u<=0)return i}return u}getColWidthDefined(t){var e;const{layoutMap:i}=this.internalProps;if(this.widthMode==="autoWidth")return"auto";const{width:r}=(e=i?.getColumnWidthDefined(t))!==null&&e!==void 0?e:{};return typeof r=="number"&&r<=0?0:r||this.getDefaultColumnWidth(t)}getColWidthDefinedNumber(t){const e=this.getColWidthDefined(t);return this._adjustColWidth(t,this._colWidthDefineToPxWidth(e))}isAutoRowHeight(t){return this.heightMode==="autoHeight"||!!this.options.customComputeRowHeight||(t>=0&&t<this.columnHeaderLevelCount?this.getDefaultRowHeight(t)==="auto":this.internalProps.defaultRowHeight==="auto")}getColWidth(t){var e;const i=(e=this.colWidthsMap.get(t))!==null&&e!==void 0?e:this.getDefaultColumnWidth(t);return this.widthMode==="adaptive"&&typeof i=="number"||this.transpose&&typeof i=="number"?this._colWidthDefineToPxWidth(i):this._adjustColWidth(t,this._colWidthDefineToPxWidth(i))}_setColWidth(t,e,i,r){this.colWidthsMap.put(t,typeof e=="number"?Math.round(e):e),i&&this._clearColRangeWidthsMap(t),r||this.stateManager.checkFrozen()}setColWidth(t,e){this.scenegraph.setColWidth(t,e),this.scenegraph.updateChartSizeForResizeColWidth(t),this.internalProps._widthResizedColMap.add(t)}_clearColRangeWidthsMap(t){if(typeof t!="number")this._colRangeWidthsMap.clear();else{const e=this._colRangeWidthsMap.keys();for(const i of e){const r=vee.exec(i);if(r){const o=Number(r[1]),a=Number(r[2]);t>=o&&t<=a&&this._colRangeWidthsMap.delete(i)}}}}_clearRowRangeHeightsMap(t){this.rowHeightsMap.clearRange()}_getColContentWidth(t){return Number(this.colContentWidthsMap.get(t))}_setColContentWidth(t,e){this.colContentWidthsMap.put(t,e)}getAllRowsHeight(){return this.internalProps.rowCount<=0?0:this.getRowsHeight(0,this.internalProps.rowCount-1)}getAllColsWidth(){return this.internalProps.colCount<=0?0:this.getColsWidth(0,this.internalProps.colCount-1)}getColsWidths(){const t=this.colCount,e=[];for(let i=0;i<t;i++)e.push(this.getColWidth(i));return e}getMaxColWidth(t){var e;const i=this.colWidthsLimit[t];let r=(e=i&&i.max)!==null&&e!==void 0?e:1/0;return typeof r=="string"&&(r=Wg(this,r)),r}setMaxColWidth(t,e){(this.colWidthsLimit[t]||(this.colWidthsLimit[t]={})).max=e}getMinColWidth(t){var e;const i=this.colWidthsLimit[t];let r=(e=i&&i.min)!==null&&e!==void 0?e:0;return typeof r=="string"&&(r=Wg(this,r)),r}setMinColWidth(t,e){(this.colWidthsLimit[t]||(this.colWidthsLimit[t]={})).min=e}getCellRect(t,e){var i,r;const o=this.isFrozenCell(t,e);let a;const s=this.getColWidth(t);let l;a=o&&o.col&&this.isRightFrozenColumn(t,e)?this.getAllColsWidth()<=this.tableNoFrameWidth?this.getColsWidth(0,t-1)||0:this.tableNoFrameWidth-((i=this.getColsWidth(t,this.colCount-1))!==null&&i!==void 0?i:0):this.getColsWidth(0,t-1)||0;const h=this.getRowHeight(e);return l=o&&o.row&&this.isBottomFrozenRow(t,e)?this.getAllRowsHeight()<=this.tableNoFrameHeight?this.getRowsHeight(0,e-1):this.tableNoFrameHeight-((r=this.getRowsHeight(e,this.rowCount-1))!==null&&r!==void 0?r:0):this.getRowsHeight(0,e-1),new Lc(Math.round(a),Math.round(l),Math.round(s),Math.round(h))}getMergeCellRect(t,e){const i=this.getCellRange(t,e),r=this.getColsWidth(0,i.start.col-1)||0,o=this.getColsWidth(i.start.col,i.end.col),a=this.getRowsHeight(0,i.start.row-1)||0,s=this.getRowsHeight(i.start.row,i.end.row);return new Lc(Math.round(r),Math.round(a),Math.round(o),Math.round(s))}getCellRelativeRect(t,e){const i=this.isFrozenCell(t,e);let r=!0,o=!0;i?.col&&i?.row?(r=!1,o=!1):i?.col?r=!1:i?.row&&(o=!1);const a=this.getCellRect(t,e);return this._toRelativeRect(a,r,o)}getCellRangeRelativeRect(t){if(t.start){const a=this.isFrozenCell(t.start.col,t.start.row);let s=!0,l=!0;return a?.col&&a?.row?(s=!1,l=!1):a?.col?s=!1:a?.row&&(l=!1),this._toRelativeRect(this.getCellsRect(t.start.col,t.start.row,t.end.col,t.end.row),s,l)}const e=this.getCellRange(t.col,t.row),i=this.isFrozenCell(t.col,t.row);let r=!0,o=!0;return i?.col&&i?.row?(r=!1,o=!1):i?.col?r=!1:i?.row&&(o=!1),this._toRelativeRect(this.getCellsRect(e.start.col,e.start.row,e.end.col,e.end.row),r,o)}getVisibleCellRangeRelativeRect(t){let e;return e=t.start?t:this.getCellRange(t.col,t.row),this._getVisiableRect(this.getCellRangeRelativeRect(t),e)}_getVisiableRect(t,e){const i=e.start.col>=this.frozenColCount?Math.max(t.left,this.frozenColCount>=1?this.getColsWidth(0,this.frozenColCount-1):0):t.left,r=Math.min(t.right,this.tableNoFrameWidth),o=t.copy();o.left=i,o.right=r;const a=e.start.row>=this.frozenRowCount?Math.max(t.top,this.frozenRowCount>=1?this.getRowsHeight(0,this.frozenRowCount-1):0):t.top,s=Math.min(t.bottom,this.tableNoFrameHeight);return o.top=a,o.bottom=s,o}getCellsRect(t,e,i,r){var o,a,s,l,h,u;let d=this.getColsWidth(0,t-1)||0,c=this.getColsWidth(t,i);const f=this.scrollLeft,g=Math.min(this.tableNoFrameWidth,this.getAllColsWidth()),p=Math.min(this.tableNoFrameHeight,this.getAllRowsHeight());this.isLeftFrozenColumn(t)&&this.isRightFrozenColumn(i)?c=this.tableNoFrameWidth-((o=this.getColsWidth(t+1,this.colCount-1))!==null&&o!==void 0?o:0)-d:this.isLeftFrozenColumn(t)&&!this.isLeftFrozenColumn(i)?c=Math.max(c-f,this.getColsWidth(t,this.frozenColCount-1)):!this.isRightFrozenColumn(t)&&this.isRightFrozenColumn(i)?(d=Math.min(d-f,g-this.getRightFrozenColsWidth()),c=g-((a=this.getColsWidth(t+1,this.colCount-1))!==null&&a!==void 0?a:0)-d):this.isRightFrozenColumn(t)&&(d=g-((s=this.getColsWidth(t,this.colCount-1))!==null&&s!==void 0?s:0));let v=this.getRowsHeight(0,e-1),m=this.getRowsHeight(e,r);const y=this.scrollTop;return this.isTopFrozenRow(e)&&this.isBottomFrozenRow(r)?m=this.tableNoFrameHeight-((l=this.getRowsHeight(e+1,this.rowCount-1))!==null&&l!==void 0?l:0)-v:this.isTopFrozenRow(e)&&!this.isTopFrozenRow(r)?m=Math.max(m-y,this.getRowsHeight(e,this.frozenRowCount-1)):!this.isBottomFrozenRow(e)&&this.isBottomFrozenRow(r)?(v=Math.min(v-y,p-this.getBottomFrozenRowsHeight()),m=p-((h=this.getRowsHeight(e+1,this.rowCount-1))!==null&&h!==void 0?h:0)-v):this.isBottomFrozenRow(e)&&(v=p-((u=this.getRowsHeight(e,this.rowCount-1))!==null&&u!==void 0?u:0)),new Lc(Math.round(d),Math.round(v),Math.round(c),Math.round(m))}getCellsRectWidth(t,e,i,r){const o=this.isFrozenCell(t,e),a=this.isFrozenCell(i,r);let s=this.getColsWidth(t,i);if(o&&o.col){const l=this.scrollLeft;a&&a.col||(s-=l,s=Math.max(s,this.getColsWidth(t,this.frozenColCount-1)))}return s}getCellRangeRect(t){if(t.start)return this.getCellsRect(t.start.col,t.start.row,t.end.col,t.end.row);const e=this.getCellRange(t.col,t.row);return this.getCellsRect(e.start.col,e.start.row,e.end.col,e.end.row)}getCellRangeRectWidth(t){if(t.start)return this.getCellsRectWidth(t.start.col,t.start.row,t.end.col,t.end.row);const e=this.getCellRange(t.col,t.row);return this.getCellsRectWidth(e.start.col,e.start.row,e.end.col,e.end.row)}isFrozenCell(t,e){const i=this.isFrozenRow(e),r=this.isFrozenColumn(t);return i||r?{row:i,col:r}:null}getRowAt(t){return Rht(t,this)}getColAt(t){return Pht(t,this)}getCellAt(t,e){return Kte(t,e,this)}getCellAtRelativePosition(t,e){return Qte(t,e,this)}_checkRowCol(t,e){return t>=0&&t<this.colCount&&e>=0&&e<this.rowCount}_makeVisibleCell(t,e){if(this._checkRowCol(t,e)){const i=this.isFrozenCell(t,e);if(i&&i.col&&i.row)return;const r=this.getCellRect(t,e),o=DKt(this);if(o.contains(r))return;i&&i.col||this.getColsWidth(0,this.frozenColCount-1)+r.width>this.canvas.width||(r.left<o.left?this.scrollLeft-=o.left-r.left:o.right<r.right&&(this.scrollLeft-=o.right-r.right)),i&&i.row||this.getRowsHeight(0,this.frozenRowCount-1)+r.height>this.canvas.height||(r.top<o.top?this.scrollTop-=o.top-r.top:o.bottom<r.bottom&&(this.scrollTop-=o.bottom-r.bottom))}}render(){this.scenegraph.renderSceneGraph()}renderAsync(){return this.scenegraph.updateNextFrame(),new Promise(((t,e)=>{setTimeout((()=>{t()}),0)}))}_toRelativeRect(t,e=!0,i=!0){var r,o,a,s;const l=t.copy(),h=this.getVisibleRect();return l.offsetLeft(this.tableX-(e?h.left:0)),l.offsetTop(this.tableY-(i?h.top:0)),l.offsetLeft((o=(r=this.options.viewBox)===null||r===void 0?void 0:r.x1)!==null&&o!==void 0?o:0),l.offsetTop((s=(a=this.options.viewBox)===null||a===void 0?void 0:a.y1)!==null&&s!==void 0?s:0),l}getVisibleRect(){const{scrollTop:t,scrollLeft:e}=this,i=this.tableNoFrameWidth,r=this.tableNoFrameHeight;return new Lc(e,t,i,r)}get visibleRowCount(){const{frozenRowCount:t}=this,e=this.getVisibleRect(),i=t>0?e.top+this.getRowsHeight(0,t-1):e.top,r=this.getTargetRowAt(i);if(!r)return 0;const o=Math.max(r.top>=i?r.row:r.row+1,t);let a=this.getRowsHeight(0,o-1),s=0;const{rowCount:l}=this;for(let h=o;h<l;h++){const u=a+this.getRowHeight(h);if(e.bottom<u)break;s++,a=u}return s}getBodyVisibleCellRange(){const{scrollTop:t,scrollLeft:e}=this,i=this.getFrozenRowsHeight(),r=this.getFrozenColsWidth(),o=this.getBottomFrozenRowsHeight(),a=this.getRightFrozenColsWidth(),{row:s}=this.getRowAt(t+i+1),{col:l}=this.getColAt(e+r+1),h=this.getAllRowsHeight()>this.tableNoFrameHeight?this.getRowAt(t+this.tableNoFrameHeight-1-o).row:this.rowCount-1,u=this.getAllColsWidth()>this.tableNoFrameWidth?this.getColAt(e+this.tableNoFrameWidth-1-a).col:this.colCount-1;return u<0||h<0?null:{rowStart:s,colStart:l,rowEnd:h,colEnd:u}}getBodyVisibleRowRange(){const{scrollTop:t}=this,e=this.getFrozenRowsHeight(),i=this.getBottomFrozenRowsHeight(),{row:r}=this.getRowAt(t+e+1),o=this.getAllRowsHeight()>this.tableNoFrameHeight?this.getRowAt(t+this.tableNoFrameHeight-1-i).row:this.rowCount-1;return o<0?null:{rowStart:r,rowEnd:o}}getBodyVisibleColRange(){const{scrollLeft:t}=this,e=this.getFrozenColsWidth(),i=this.getRightFrozenColsWidth(),{col:r}=this.getColAt(t+e+1),o=this.getAllColsWidth()>this.tableNoFrameWidth?this.getColAt(t+this.tableNoFrameWidth-1-i).col:this.colCount-1;return o<0?null:{colStart:r,colEnd:o}}get visibleColCount(){const{frozenColCount:t}=this,e=this.getVisibleRect(),i=t>0?e.left+this.getColsWidth(0,t-1):e.left,r=this.getTargetColAt(i);if(!r)return 0;const o=Math.max(r.left>=i?r.col:r.col+1,t);let a=this.getColsWidth(0,o-1),s=0;const{colCount:l}=this;for(let h=o;h<l;h++){const u=a+this.getColWidth(h);if(e.right<u)break;s++,a=u}return s}get scrollTop(){return this.stateManager.scroll.verticalBarPos}set scrollTop(t){this.stateManager.setScrollTop(t)}get scrollLeft(){return this.stateManager.scroll.horizontalBarPos}set scrollLeft(t){this.stateManager.setScrollLeft(t)}getScrollLeft(){return this.scrollLeft}getScrollTop(){return this.scrollTop}setScrollLeft(t){this.scrollLeft=Math.ceil(t)}setScrollTop(t){this.scrollTop=Math.ceil(t)}getCellOverflowText(t,e){return this.scenegraph.getCellOverflowText(t,e)}addReleaseObj(t){if(!t||!t.release||typeof t.release!="function")throw new Error("not releaseObj!");(this.internalProps.releaseList=this.internalProps.releaseList||[]).push(t)}dispose(){this.release()}release(){var t,e,i,r,o,a,s,l,h,u,d,c,f,g,p,v;const m=this.internalProps;if(this.isReleased)return;(e=(t=m.tooltipHandler)===null||t===void 0?void 0:t.release)===null||e===void 0||e.call(t),(r=(i=m.menuHandler)===null||i===void 0?void 0:i.release)===null||r===void 0||r.call(i),(o=super.release)===null||o===void 0||o.call(this),this.pluginManager.release(),(s=(a=m.handler)===null||a===void 0?void 0:a.release)===null||s===void 0||s.call(a),this.eventManager.release(),(h=(l=m.focusControl)===null||l===void 0?void 0:l.release)===null||h===void 0||h.call(l),(u=m.legends)===null||u===void 0||u.forEach((b=>{b?.release()})),(d=m.title)===null||d===void 0||d.release(),m.title=null,(c=m.emptyTip)===null||c===void 0||c.release(),m.emptyTip=null,m.layoutMap.release(),m.releaseList&&(m.releaseList.forEach((b=>{var _;return(_=b?.release)===null||_===void 0?void 0:_.call(b)})),m.releaseList=null),this.scenegraph.stage.release(),this.scenegraph.proxy.release(),m.focusControl.release();const{parentElement:y}=m.element;y&&!this.options.canvas&&y.removeChild(m.element),(p=(g=(f=this.editorManager)===null||f===void 0?void 0:f.editingEditor)===null||g===void 0?void 0:g.onEnd)===null||p===void 0||p.call(g),this.isReleased=!0,this.scenegraph=null,this.internalProps=null,(v=this.reactCustomLayout)===null||v===void 0||v.clearCache(),oH()}fireListeners(t,e){return super.fireListeners(t,e)}updateOption(t,e={clearColWidthCache:!0,clearRowHeightCache:!0}){var i,r,o,a,s,l,h,u,d,c,f,g,p,v,m,y,b,_,w,C,x,S,A,T,M,R;this.fireListeners(at.BEFORE_UPDATE_OPTION,{options:t,container:this.container}),(i=this.editorManager)===null||i===void 0||i.cancelEdit(),this.options=t,this._hasAutoImageColumn=void 0;const{frozenColCount:L=0,unfreezeAllOnExceedsMaxWidth:B,defaultRowHeight:P=40,defaultHeaderRowHeight:k,defaultColWidth:E=80,defaultHeaderColWidth:D=80,keyboardOptions:I,eventOptions:O,rowSeriesNumber:H,enableCheckboxCascade:F,enableHeaderCheckboxCascade:N,columnResizeMode:$,rowResizeMode:V="none",resize:X,dragHeaderMode:Z,dragOrder:tt,showFrozenIcon:K,allowFrozenColCount:rt,padding:q,hover:it,menu:nt,select:W,pixelRatio:G,widthMode:j,heightMode:U,autoFillWidth:J,autoFillHeight:ot,containerFit:st,widthAdaptiveMode:lt,heightAdaptiveMode:ft,customRender:vt,renderChartAsync:pt,renderChartAsyncBatchCount:bt,canvasWidth:me,canvasHeight:He,contentOffsetX:Ai=0,contentOffsetY:Pe=0,overscrollBehavior:On,limitMinWidth:en,limitMinHeight:Xi}=t,{groupConfig:re,groupBy:wi,groupTitleFieldFormat:ii,groupTitleCustomLayout:qi,enableTreeStickCell:Gr}=t;G&&G!==this.internalProps.pixelRatio&&(this.internalProps.pixelRatio=G),q&&(typeof q=="number"?(this.padding.top=q,this.padding.left=q,this.padding.bottom=q,this.padding.right=q):(q.top&&(this.padding.top=q.top),q.bottom&&(this.padding.bottom=q.bottom),q.left&&(this.padding.left=q.left),q.right&&(this.padding.right=q.right))),this.showFrozenIcon=typeof K!="boolean"||K,typeof rt=="number"&&rt<=0&&(this.showFrozenIcon=!1),this.widthMode=j??"standard",this.heightMode=U??"standard",this._widthAdaptiveMode=lt??"only-body",this._heightAdaptiveMode=ft??"only-body",this.autoFillWidth=J!=null&&J,this.autoFillHeight=ot!=null&&ot,st!==void 0&&(this._containerFit=typeof st=="boolean"?{width:st,height:st}:st&&typeof st=="object"?{width:(r=st.width)===null||r===void 0||r,height:(o=st.height)===null||o===void 0||o}:{width:!1,height:!1}),this.customRender=vt,this.contentOffsetX=Ai??0,this.contentOffsetY=Pe??0,this.canvasWidth=yt(me)?me:void 0,this.canvasHeight=yt(He)?He:void 0;const kt=this.internalProps;if(Be.mode==="node"||t.canvas||PKt(kt.element,this.padding),this.columnWidthComputeMode=(a=t.columnWidthComputeMode)!==null&&a!==void 0?a:"normal",kt.frozenColCount=L,kt.unfreezeAllOnExceedsMaxWidth=B==null||B,kt.defaultRowHeight=P,kt.defaultHeaderRowHeight=k??P,kt.defaultColWidth=E,kt.defaultHeaderColWidth=D??E,kt.keyboardOptions=I,kt.eventOptions=O,kt.rowSeriesNumber=H,kt.enableCheckboxCascade=(s=F??H?.enableTreeCheckbox)===null||s===void 0||s,kt.enableHeaderCheckboxCascade=F||N==null||N,kt.columnResizeMode=(l=X?.columnResizeMode)!==null&&l!==void 0?l:$,kt.rowResizeMode=(h=X?.rowResizeMode)!==null&&h!==void 0?h:V,kt.dragHeaderMode=(d=(u=tt?.dragHeaderMode)!==null&&u!==void 0?u:Z)!==null&&d!==void 0?d:"none",kt.renderChartAsync=pt,_X(bt),kt.overscrollBehavior=On??"auto",kt.cellTextOverflows={},kt.groupBy=(c=re?.groupBy)!==null&&c!==void 0?c:wi,kt.groupTitleCheckbox=re?.titleCheckbox,kt.groupTitleFieldFormat=(f=re?.titleFieldFormat)!==null&&f!==void 0?f:ii,kt.groupTitleCustomLayout=(g=re?.titleCustomLayout)!==null&&g!==void 0?g:qi,kt.enableTreeStickCell=(p=re?.enableTreeStickCell)!==null&&p!==void 0?p:Gr,e?.clearColWidthCache&&(kt._widthResizedColMap.clear(),this.colWidthsMap=new Vu,this.colContentWidthsMap=new Vu,this.colWidthsLimit={}),e?.clearRowHeightCache&&(kt._heightResizedRowMap.clear(),kt._rowHeightsMap=new hq(this),kt._rowRangeHeightsMap=new Map,kt._colRangeWidthsMap=new Map),kt.stick.changedCells.clear(),kt.theme=rh.of((v=t.theme)!==null&&v!==void 0?v:rh.DEFAULT),kt.theme.isPivot=this.isPivotTable(),Z1(kt.theme.functionalIconsStyle),this.scenegraph.updateStageBackground(),kt.autoWrapText=t.autoWrapText,kt.enableLineBreak=t.enableLineBreak,kt.allowFrozenColCount=(m=t.allowFrozenColCount)!==null&&m!==void 0?m:0,kt.limitMaxAutoWidth=(y=t.limitMaxAutoWidth)!==null&&y!==void 0?y:450,kt.limitMinWidth=en!=null?typeof en=="number"?en:en?10:0:10,kt.limitMinHeight=Xi!=null?typeof Xi=="number"?Xi:Xi?10:0:10,(b=kt.legends)===null||b===void 0||b.forEach((ki=>{ki?.release()})),(_=kt.title)===null||_===void 0||_.release(),kt.title=null,(w=kt.emptyTip)===null||w===void 0||w.release(),kt.emptyTip=null,kt.layoutMap.release(),oH(),this.scenegraph.clearCells(),this.scenegraph.updateComponent(),this.stateManager.updateOptionSetState(),this._updateSize(),this.eventManager.updateEventBinder(),t.legends){kt.legends=[];const ki=It.getFunction("createLegend");if(Array.isArray(t.legends)){for(let Mt=0;Mt<t.legends.length;Mt++)kt.legends.push(ki(t.legends[Mt],this));this.scenegraph.tableGroup.setAttributes({x:this.tableX,y:this.tableY})}else kt.legends.push(ki(t.legends,this)),this.scenegraph.tableGroup.setAttributes({x:this.tableX,y:this.tableY})}if(kt.tooltip=Object.assign({parentElement:this.getElement(),renderMode:"html",isShowOverflowTextTooltip:!1,confine:!0,position:yo.bottom},t.tooltip),kt.tooltip.renderMode==="html"&&!kt.tooltipHandler){const ki=It.getComponent("tooltipHandler");kt.tooltipHandler=new ki(this,kt.tooltip.confine)}if(kt.menu=Object.assign({renderMode:"html"},t.menu),Array.isArray((C=t.menu)===null||C===void 0?void 0:C.dropDownMenuHighlight)&&this.setDropDownMenuHighlight((x=t.menu)===null||x===void 0?void 0:x.dropDownMenuHighlight),(Array.isArray((S=t.menu)===null||S===void 0?void 0:S.defaultHeaderMenuItems)||typeof((A=t.menu)===null||A===void 0?void 0:A.defaultHeaderMenuItems)=="function")&&(this.globalDropDownMenu=t.menu.defaultHeaderMenuItems),kt.menu.renderMode==="html"&&!kt.menuHandler){const ki=It.getComponent("menuHandler");kt.menuHandler=new ki(this)}this.clearCellStyleCache(),e?.clearColWidthCache&&this.clearColWidthCache(),e?.clearRowHeightCache&&this.clearRowHeightCache(),kt.customMergeCell=bT(t.customMergeCell),(T=this.customCellStylePlugin)===null||T===void 0||T.updateCustomCell((M=t.customCellStyle)!==null&&M!==void 0?M:[],(R=t.customCellStyleArrangement)!==null&&R!==void 0?R:[]),this._adjustCanvasSizeByOption()}renderWithRecreateCells(){this.internalProps.stick.changedCells.clear();const t={col:this.stateManager.hover.cellPos.col,row:this.stateManager.hover.cellPos.row};this.refreshHeader(),this.internalProps.useOneRowHeightFillAll=!1,this.scenegraph.clearCells(),this.clearCellStyleCache(),this.scenegraph.createSceneGraph(),this.stateManager.updateHoverPos(t.col,t.row),this.render()}getFrozenRowsHeight(){return this.getRowsHeight(0,this.frozenRowCount-1)}getFrozenColsWidth(){return this.getColsWidth(0,this.frozenColCount-1)}getBottomFrozenRowsHeight(){if(this.bottomFrozenRowCount>0){let t=0;for(let e=this.rowCount-this.bottomFrozenRowCount;e<=this.rowCount-1;e++)t+=this.getRowHeight(e);return t}return 0}getRightFrozenColsWidth(){if(this.rightFrozenColCount>0){let t=0;for(let e=this.colCount-this.rightFrozenColCount;e<=this.colCount-1;e++)t+=this.getColWidth(e);return t}return 0}getDrawRange(){var t,e;const i=!((t=this.containerFit)===null||t===void 0)&&t.width?this.tableNoFrameWidth:Math.min(this.tableNoFrameWidth,this.getAllColsWidth()),r=!((e=this.containerFit)===null||e===void 0)&&e.height?this.tableNoFrameHeight:Math.min(this.tableNoFrameHeight,this.getAllRowsHeight());return new Lc(this.tableX,this.tableY,i,r)}_getMouseAbstractPoint(t){var e,i,r,o,a,s,l,h;let u;if(!t)return{inTable:!1,x:void 0,y:void 0};u=pee(t)?t.changedTouches[0]:t;const d=u.clientX||u.pageX+window.scrollX,c=u.clientY||u.pageY+window.scrollY,f=this.internalProps.canvas.getBoundingClientRect();let g=!0;f.right<=d&&(g=!1),f.bottom<=c&&(g=!1);const p=f.width,v=p/((this.rotateDegree===90?this.canvas.offsetHeight:this.canvas.offsetWidth)||p),m=f.height,y=m/((this.rotateDegree===90?this.canvas.offsetWidth:this.canvas.offsetHeight)||m),b=this.pluginManager.getPluginByName("Rotate Table");if(b&&this.rotateDegree===90){const w={x:d/v-((i=(e=this.options.viewBox)===null||e===void 0?void 0:e.x1)!==null&&i!==void 0?i:0),y:c/y-((o=(r=this.options.viewBox)===null||r===void 0?void 0:r.y1)!==null&&o!==void 0?o:0),inTable:g};return b.matrix.transformPoint(w,w),w}const _={x:(d-f.left)/v-((s=(a=this.options.viewBox)===null||a===void 0?void 0:a.x1)!==null&&s!==void 0?s:0),y:(c-f.top)/y-((h=(l=this.options.viewBox)===null||l===void 0?void 0:l.y1)!==null&&h!==void 0?h:0),inTable:g};return this.internalProps.modifiedViewBoxTransform&&this.scenegraph.stage.window.getViewBoxTransform()&&this.scenegraph.stage.window.getViewBoxTransform().transformPoint(_,_),_}getTheme(){return this.internalProps.theme}getTargetColAt(t){return bN(t,this)}getTargetRowAt(t){const e=_N(t,this);return e&&(e.row=Math.min(e.row,this.rowCount-1)),e}getTargetColAtConsiderRightFrozen(t,e){return Bht(t,e,this)}getTargetRowAtConsiderBottomFrozen(t,e){return kht(t,e,this)}clearSelected(){this.stateManager.updateSelectPos(-1,-1)}selectCell(t,e,i,r,o,a=!1){var s,l,h;const u=!!(!((s=this.stateManager.select.ranges)===null||s===void 0)&&s.length);this.stateManager.updateSelectPos(t,e,i,r,!1,(h=o??((l=this.options.select)===null||l===void 0?void 0:l.makeSelectCellVisible))===null||h===void 0||h,a),this.stateManager.endSelectCells(!0,u)}selectCells(t){const{scrollLeft:e,scrollTop:i}=this;t.forEach(((r,o)=>{var a,s,l,h,u,d;const c=r.start.row,f=r.start.col,g=r.end.row,p=r.end.col;f===p&&c===g?this.stateManager.updateSelectPos(f,c,!1,o>=1,!1,(s=(a=this.options.select)===null||a===void 0?void 0:a.makeSelectCellVisible)===null||s===void 0||s,!0):(this.stateManager.updateSelectPos(f,c,!1,o>=1,!1,(h=(l=this.options.select)===null||l===void 0?void 0:l.makeSelectCellVisible)===null||h===void 0||h,!0),this.stateManager.updateInteractionState(Xt.grabing),this.stateManager.updateSelectPos(p,g,!1,o>=1,!1,(d=(u=this.options.select)===null||u===void 0?void 0:u.makeSelectCellVisible)===null||d===void 0||d,!0)),this.stateManager.endSelectCells(!1,!1),this.stateManager.updateInteractionState(Xt.default)})),this.setScrollTop(i),this.setScrollLeft(e)}selectRow(t,e,i){const r=this.stateManager.select.ranges;if(e)r.push({start:{col:0,row:t},end:{col:this.colCount-1,row:t}}),this.selectCells(r);else if(i){const o=r[r.length-1];o&&(o.end.row=t),this.selectCells(r)}else this.selectCells([{start:{col:0,row:t},end:{col:this.colCount-1,row:t}}])}selectCol(t,e,i){const r=this.stateManager.select.ranges;if(e)r.push({start:{col:t,row:0},end:{col:t,row:this.rowCount-1}}),this.selectCells(r);else if(i){const o=r[r.length-1];o&&(o.end.col=t),this.selectCells(r)}else this.selectCells([{start:{col:t,row:0},end:{col:t,row:this.rowCount-1}}])}startDragSelectCol(t,e,i){var r,o,a,s,l,h;const u=this.stateManager.select.ranges[this.stateManager.select.ranges.length-1],d=i&&(!((r=u?.start)===null||r===void 0)&&r.col)?(o=u?.start)===null||o===void 0?void 0:o.col:t,c=t,f=this.rowCount-1;this.stateManager.updateSelectPos(d,0,i,e,!1,(s=(a=this.options.select)===null||a===void 0?void 0:a.makeSelectCellVisible)===null||s===void 0||s,!0),this.stateManager.updateInteractionState(Xt.grabing),this.stateManager.updateSelectPos(c,f,i,e,!1,(h=(l=this.options.select)===null||l===void 0?void 0:l.makeSelectCellVisible)===null||h===void 0||h,!0)}dragSelectCol(t,e){var i,r;const o=this.stateManager.select.ranges,a=o[o.length-1];a&&(a.end.col=t),this.stateManager.updateSelectPos(t,this.rowCount-1,!1,e,!1,(r=(i=this.options.select)===null||i===void 0?void 0:i.makeSelectCellVisible)===null||r===void 0||r,!0)}endDragSelect(){this.stateManager.updateInteractionState(Xt.default),this.stateManager.endSelectCells(!1,!1)}startDragSelectRow(t,e,i){var r,o,a,s,l,h;const u=this.stateManager.select.ranges[this.stateManager.select.ranges.length-1],d=i&&(!((r=u?.start)===null||r===void 0)&&r.row)?(o=u?.start)===null||o===void 0?void 0:o.row:t,c=this.colCount-1,f=t;this.stateManager.updateSelectPos(0,d,i,e,!1,(s=(a=this.options.select)===null||a===void 0?void 0:a.makeSelectCellVisible)===null||s===void 0||s,!0),this.stateManager.updateInteractionState(Xt.grabing),this.stateManager.updateSelectPos(c,f,i,e,!1,(h=(l=this.options.select)===null||l===void 0?void 0:l.makeSelectCellVisible)===null||h===void 0||h,!0)}dragSelectRow(t,e){var i,r;const o=this.stateManager.select.ranges,a=o[o.length-1];a&&(a.end.row=t),this.stateManager.updateSelectPos(this.colCount-1,t,!1,e,!1,(r=(i=this.options.select)===null||i===void 0?void 0:i.makeSelectCellVisible)===null||r===void 0||r,!0)}get recordsCount(){var t;return(t=this.records)===null||t===void 0?void 0:t.length}get allowFrozenColCount(){return this.internalProps.allowFrozenColCount}get rowHeaderLevelCount(){return this.internalProps.layoutMap.rowHeaderLevelCount}get columnHeaderLevelCount(){return this.internalProps.layoutMap.columnHeaderLevelCount}get records(){return this.internalProps.records}get dataSource(){return this.internalProps.dataSource}set dataSource(t){this.scenegraph.clearCells(),BKt(this,t),this.refreshRowColCount(),this.scenegraph.createSceneGraph(),this.render()}get autoWrapText(){return this.internalProps.autoWrapText}set autoWrapText(t){this.internalProps.autoWrapText=t,this.options.autoWrapText=t}get enableLineBreak(){return this.internalProps.enableLineBreak}set enableLineBreak(t){this.internalProps.enableLineBreak=t,this.options.enableLineBreak=t}updateAutoWrapText(t){this.internalProps.autoWrapText!==t&&(this.internalProps.autoWrapText=t,this.options.autoWrapText=t,this.scenegraph.clearCells(),this.clearCellStyleCache(),this.scenegraph.createSceneGraph(),this.render())}get theme(){return this.internalProps.theme}set theme(t){this.internalProps.theme=rh.of(t??rh.DEFAULT),this.internalProps.theme.isPivot=this.isPivotTable(),this.options.theme=t,Z1(this.internalProps.theme.functionalIconsStyle)}updateTheme(t){const e={col:this.stateManager.hover.cellPos.col,row:this.stateManager.hover.cellPos.row};this.internalProps.theme=rh.of(t??rh.DEFAULT),this.internalProps.theme.isPivot=this.isPivotTable(),Z1(this.internalProps.theme.functionalIconsStyle),this.options.theme=t,this.scenegraph.updateComponent(),this.scenegraph.updateStageBackground(),this.scenegraph.clearCells(),this.clearCellStyleCache(),this.scenegraph.createSceneGraph(),this.stateManager.updateHoverPos(e.col,e.row),this.render()}getBodyField(t,e){return this.internalProps.layoutMap.getBody(t,e).field}getBodyColumnDefine(t,e){const i=this.internalProps.layoutMap.getBody(t,e);return i?.define}getBodyColumnType(t,e){var i,r;const o=(r=(i=this.internalProps.layoutMap.getBody(t,e))===null||i===void 0?void 0:i.cellType)!==null&&r!==void 0?r:"text";return gt("cellType",{cellType:o},t,e,this)}getCellType(t,e){let i;return this.isSeriesNumberInHeader(t,e)?this.internalProps.layoutMap.getSeriesNumberHeader(t,e).cellType:(i=this.isHeader(t,e)?this.internalProps.layoutMap.getHeader(t,e).headerType:this.internalProps.layoutMap.getBody(t,e).cellType,gt("cellType",{cellType:i},t,e,this))}getHeaderField(t,e){return this.internalProps.layoutMap.getHeaderField(t,e)}getHeaderDefine(t,e){const i=this.internalProps.layoutMap.getHeader(t,e);return i?.define}getCellLocation(t,e){return this.internalProps.layoutMap.getCellLocation(t,e)}getCellHeaderPaths(t,e){return this.internalProps.layoutMap.getCellHeaderPaths(t,e)}getHeadersDefine(t,e){const i=[];for(;;){const r=this.getHeaderDefine(t,e);if(!r||!r.field&&!r.columns)break;i.push(r),e++}return i}_getHeaderLayoutMap(t,e){return this.internalProps.layoutMap.getHeader(t,e)}_getBodyLayoutMap(t,e){return this.internalProps.layoutMap.getBody(t,e)}getContext(){return this.internalProps.context}getRecordByCell(t,e){if(!this.internalProps.layoutMap.isHeader(t,e))return this.getCellOriginRecord(t,e)}getRecordByRowCol(t,e){return this.getRecordByCell(t,e)}getRecordStartRowByRecordIndex(t){return this.internalProps.layoutMap.getRecordStartRowByRecordIndex(t)}_getHeaderCellBySortState(t){const{layoutMap:e}=this.internalProps,i=e.headerObjects.find((r=>r&&r.field===t.field));if(i)return e.getHeaderCellAdressById(i.id)}getCellRange(t,e){var i;if(this.internalProps.customMergeCell){const r=this.internalProps.customMergeCell(t,e,this);if(r&&r.range&&(Y(r.text)||r.customLayout||r.customRender))return{start:{col:Math.max(r.range.start.col,0),row:Math.max(r.range.start.row,0)},end:{col:Math.min(r.range.end.col,this.colCount-1),row:Math.min(r.range.end.row,this.rowCount-1)},isCustom:!0}}return(i=this.internalProps.layoutMap)===null||i===void 0?void 0:i.getCellRange(t,e)}hasCustomMerge(){return!!this.internalProps.customMergeCell}getCustomMerge(t,e){if(this.internalProps.customMergeCell){const i=this.internalProps.customMergeCell(t,e,this);if(i&&i.range&&(Y(i.text)||i.customLayout||this.customRender)){if(i.style){const r=this.internalProps.bodyHelper.getStyleClass("text"),o=i.style,a=Q3(o,this.theme.bodyStyle,{col:t,row:e,table:this,value:i.text,dataValue:this.getCellOriginValue(t,e),cellHeaderPaths:this.getCellHeaderPaths(t,e)},r,this.options.autoWrapText,this.theme);i.style=a}return i.range={start:{col:Math.max(i.range.start.col,0),row:Math.max(i.range.start.row,0)},end:{col:Math.min(i.range.end.col,this.colCount-1),row:Math.min(i.range.end.row,this.rowCount-1)},isCustom:!0},i}}}isCellRangeEqual(t,e,i,r){return this.internalProps.layoutMap.isCellRangeEqual(t,e,i,r)}_getLayoutCellId(t,e){return this.internalProps.layoutMap.getCellId(t,e)}getHeaderDescription(t,e){var i;const r=this._getHeaderLayoutMap(t,e),o=r?.define,a=(i=o?.description)!==null&&i!==void 0?i:r?.description;return typeof a=="function"?a({col:t,row:e,value:this.getCellValue(t,e),dataValue:this.getCellOriginValue(t,e)}):a}setDropDownMenuHighlight(t){this.stateManager.setDropDownMenuHighlight(t)}_dropDownMenuIsHighlight(t,e,i){return this.stateManager.dropDownMenuIsHighlight(t,e,i)}isSeriesNumberInBody(t,e){return this.internalProps.layoutMap&&this.internalProps.layoutMap.isSeriesNumberInBody(t,e)}isSeriesNumberInHeader(t,e){return this.internalProps.layoutMap&&this.internalProps.layoutMap.isSeriesNumberInHeader(t,e)}isHeader(t,e){return this.internalProps.layoutMap&&this.internalProps.layoutMap.isHeader(t,e)}isColumnHeader(t,e){var i;return(i=this.internalProps.layoutMap)===null||i===void 0?void 0:i.isColumnHeader(t,e)}isRowHeader(t,e){var i;return(i=this.internalProps.layoutMap)===null||i===void 0?void 0:i.isRowHeader(t,e)}isCornerHeader(t,e){var i;return(i=this.internalProps.layoutMap)===null||i===void 0?void 0:i.isCornerHeader(t,e)}isFrozenColumn(t,e){return this.isLeftFrozenColumn(t,e)||this.isRightFrozenColumn(t,e)}isLeftFrozenColumn(t,e){var i;return(i=this.internalProps.layoutMap)===null||i===void 0?void 0:i.isFrozenColumn(t,e)}isRightFrozenColumn(t,e){var i;return(i=this.internalProps.layoutMap)===null||i===void 0?void 0:i.isRightFrozenColumn(t,e)}isFrozenRow(t,e){return this.isTopFrozenRow(t,e)||this.isBottomFrozenRow(t,e)}isTopFrozenRow(t,e){var i;return(i=this.internalProps.layoutMap)===null||i===void 0?void 0:i.isFrozenRow(t,e)}isBottomFrozenRow(t,e){var i;return(i=this.internalProps.layoutMap)===null||i===void 0?void 0:i.isBottomFrozenRow(t,e)}getCellInfo(t,e){if(t>=0&&e>=0){const i=this.isHeader(t,e)?this.getHeaderDefine(t,e):this.getBodyColumnDefine(t,e);return{col:t,row:e,field:this.getHeaderField(t,e),cellHeaderPaths:this.internalProps.layoutMap.getCellHeaderPaths(t,e),title:i?.title,cellType:this.getCellType(t,e),originData:this.getCellOriginRecord(t,e),cellRange:this.getCellRangeRelativeRect({col:t,row:e}),value:this.getCellValue(t,e),dataValue:this.getCellOriginValue(t,e),cellLocation:this.getCellLocation(t,e),scaleRatio:this.canvas.getBoundingClientRect().width/this.canvas.offsetWidth}}}_hasField(t,e,i){var r;if(t===null||this.internalProps.layoutMap.isHeader(e,i))return!1;const o=this.getRecordShowIndexByCell(e,i);return(r=this.internalProps.dataSource)===null||r===void 0?void 0:r.hasField(o,t)}_getCellStyle(t,e){return dee(t,e,this)}clearCellStyleCache(){this.headerStyleCache.clear(),this.bodyStyleCache.clear(),this.bodyMergeTitleCache.clear(),this.bodyBottomStyleCache.clear()}clearRowHeightCache(){this.internalProps._rowHeightsMap.clear(),this._clearRowRangeHeightsMap()}clearColWidthCache(){this.internalProps._colWidthsMap.clear(),this._clearColRangeWidthsMap()}_canResizeColumn(t,e){if(!(t>=0&&e>=0)||this.isCellRangeEqual(t,e,t+1,e)||this.internalProps.columnResizeMode==="none")return!1;if(this.internalProps.columnResizeMode==="header"){if(!this.isHeader(t,e))return!1}else if(this.internalProps.columnResizeMode==="body"&&this.isHeader(t,e))return!1;const i=this.colWidthsLimit[t];return!(i&&i.min&&i.max)||i.max!==i.min}_canResizeRow(t,e){if(!(t>=0&&e>=0)||this.isCellRangeEqual(t,e,t,e+1)||this.internalProps.rowResizeMode==="none")return!1;if(this.internalProps.rowResizeMode==="header"){if(!this.isHeader(t,e))return!1}else if(this.internalProps.rowResizeMode==="body"&&this.isHeader(t,e))return!1;return!0}_canDragHeaderPosition(t,e){var i;if(this.isHeader(t,e)&&(this.stateManager.isSelected(t,e)||((i=this.options.select)===null||i===void 0?void 0:i.headerSelectMode)==="body"&&hQt(t,e,[this.getCellRange(this.stateManager.select.cellPos.col,this.stateManager.select.cellPos.row)])||Gu(this,t,e))){if(this.internalProps.frozenColDragHeaderMode==="disabled"&&this.isFrozenColumn(t))return!1;if(this.stateManager.isSelected(t,e)){const o=this.stateManager.select.ranges[0];if(this.isColumnHeader(t,e)){if(o.end.row!==this.rowCount-1)return!1}else if(!this.isRowHeader(t,e)||o.end.col!==this.colCount-1)return!1}const r=this.getHeaderDefine(t,e);if(!r)return!1;if(r.dragHeader===void 0){if(this.internalProps.dragHeaderMode==="all")return!0;if(this.internalProps.dragHeaderMode==="column"){if(this.isColumnHeader(t,e))return!0}else if(this.internalProps.dragHeaderMode==="row"&&this.isRowHeader(t,e))return!0;return!1}return r.dragHeader}return!1}getCellIcons(t,e){var i,r,o;let a;if(this.isHeader(t,e))a=this.internalProps.headerHelper.getIcons(t,e);else if(this.internalProps.layoutMap.isSeriesNumber(t,e)){(!this.internalProps.groupBy||!(!((i=this.getCellRawRecord(t,e))===null||i===void 0)&&i.vtableMerge))&&!((o=(r=this.internalProps.layoutMap.getSeriesNumberBody(t,e))===null||r===void 0?void 0:r.define)===null||o===void 0)&&o.dragOrder&&(a=this.internalProps.rowSeriesNumberHelper.getIcons(t,e));const s=this.getCellValue(t,e),l=this.getCellOriginValue(t,e),h=this.internalProps.context,u=this.internalProps.bodyHelper.getIcons(t,e,s,l,h);a?.length>0?a=a.concat(u):u?.length>0&&(a=u)}else{const s=this.getCellValue(t,e),l=this.getCellOriginValue(t,e),h=this.internalProps.context;a=this.internalProps.bodyHelper.getIcons(t,e,s,l,h)}return a}showDropDownMenu(t,e,i){let r="dropdown-menu";i&&(r=Array.isArray(i.content)?"dropdown-menu":"container"),this.internalProps.menu.renderMode==="html"&&(this.stateManager.menu.isShow=!0,this.internalProps.menuHandler._bindToCell(t,e,r,i))}showTooltip(t,e,i){this.internalProps.tooltip.renderMode==="html"&&this.internalProps.tooltipHandler._bindToCell(t,e,i)}getCellStyle(t,e){const i=this._getCellStyle(t,e),r=Sd(i,this,t,e,gt).theme,{autoWrapText:o,lineClamp:a,textOverflow:s}=i;return{textAlign:r.text.textAlign,textBaseline:r.text.textBaseline,bgColor:fl(r.group.fill)?gt("bgColor",i,t,e,this):r.group.fill,color:fl(r.text.fill)?gt("color",i,t,e,this):r.text.fill,strokeColor:fl(r.text.stroke)?gt("strokeColor",i,t,e,this):r.text.stroke,fontFamily:r.text.fontFamily,fontSize:r.text.fontSize,fontWeight:r.text.fontWeight,fontVariant:r.text.fontVariant,fontStyle:r.text.fontStyle,lineHeight:r.text.lineHeight,autoWrapText:o!=null&&o,lineClamp:a??"auto",textOverflow:s,borderColor:fl(r.group.stroke)?gt("borderColor",i,t,e,this):r.group.stroke,borderLineWidth:r.group.lineWidth,borderLineDash:r.group.lineDash,underline:!!r.text.underline,underlineDash:r.text.underlineDash,underlineOffset:r.text.underlineOffset,lineThrough:!!r.text.lineThrough,padding:r._vtable.padding,underlineWidth:r.text.underline,lineThroughLineWidth:r.text.lineThrough,_strokeArrayWidth:r.group.strokeArrayWidth,_strokeArrayColor:r.group.strokeArrayColor,_linkColor:gt("linkColor",i,t,e,this)}}getAllBodyCells(t,e){const i=this.rowHeaderLevelCount,r=this.columnHeaderLevelCount,o=this.colCount-1,a=this.rowCount-1;return Array(Math.min(e??2e3,a-r+1,this.rowCount)).fill(0).map(((s,l)=>Array(Math.min(t??2e3,o-i+1,this.colCount)).fill(0).map(((h,u)=>this.getCellInfo(u+i,l+r)))))}getAllCells(t,e){const o=this.colCount-1,a=this.rowCount-1;return Array(Math.min(e??2e3,a-0+1,this.rowCount)).fill(0).map(((s,l)=>Array(Math.min(t??2e3,o-0+1,this.colCount)).fill(0).map(((h,u)=>this.getCellInfo(u+0,l+0)))))}getAllColumnHeaderCells(){const t=this.rowHeaderLevelCount,e=0,i=this.colCount-1,r=this.columnHeaderLevelCount-1;return Array(r-e+1).fill(0).map(((o,a)=>Array(i-t+1).fill(0).map(((s,l)=>this.getCellInfo(l+t,a+e)))))}getAllRowHeaderCells(){const e=this.columnHeaderLevelCount,i=this.rowHeaderLevelCount-1,r=this.rowCount-1;return Array(r-e+1).fill(0).map(((o,a)=>Array(i-0+1).fill(0).map(((s,l)=>this.getCellInfo(l+0,a+e)))))}getCopyValue(){var t,e,i;if(((e=(t=this.stateManager.select)===null||t===void 0?void 0:t.ranges)===null||e===void 0?void 0:e.length)>0){const r=this.stateManager.select.ranges;let o=Math.min(r[0].start.col,r[0].end.col),a=Math.max(r[0].start.col,r[0].end.col),s=Math.min(r[0].start.row,r[0].end.row),l=Math.max(r[0].start.row,r[0].end.row);r.forEach((g=>{o=Math.min(o,g.start.col,g.end.col),a=Math.max(a,g.start.col,g.end.col),s=Math.min(s,g.start.row,g.end.row),l=Math.max(l,g.start.row,g.end.row)}));const h=g=>{let p=!1;return r.forEach((v=>{const m=Math.min(v.start.row,v.end.row),y=Math.max(v.start.row,v.end.row);m<=g&&y>=g&&(p=!0)})),p},u=g=>{let p=!1;return r.forEach((v=>{const m=Math.min(v.start.col,v.end.col),y=Math.max(v.start.col,v.end.col);m<=g&&y>=g&&(p=!0)})),p},d=(g,p)=>{let v;return r.forEach((m=>{const y=Math.min(m.start.row,m.end.row),b=Math.max(m.start.row,m.end.row),_=Math.min(m.start.col,m.end.col),w=Math.max(m.start.col,m.end.col);_<=g&&w>=g&&y<=p&&b>=p&&(v=m)})),v},c=(g,p,v)=>{const m=this.getCellRange(g,p);let y=m.start.col,b=m.start.row;if(v){const _=Math.min(v.start.col,v.end.col),w=Math.min(v.start.row,v.end.row);y=Math.max(_,m.start.col),b=Math.max(w,m.start.row)}return y!==g||b!==p?"":this.getCellValue(g,p)};let f="";for(let g=s;g<=l;g++)if(h(g)){for(let p=o;p<=a;p++)if(u(p)){const v=d(p,g);if(v){const m=c(p,g,v);if(!(typeof Promise<"u"&&m instanceof Promise)){const y=Y(m)?`${m}`:"";/^\[object .*\]$/.exec(y)||(f+=y)}(p<v.end.col||p<a)&&(f+="	")}else f+="	"}g<l&&(f+=`\r
`)}return!((i=this.options)===null||i===void 0)&&i.formatCopyValue&&(f=this.options.formatCopyValue(f)),f}return""}getSelectedCellInfos(){var t;if(!(!((t=this.stateManager.select)===null||t===void 0)&&t.ranges))return null;const e=this.stateManager.select.ranges;if(!e.length)return[];let i=Math.min(e[0].start.col,e[0].end.col),r=Math.max(e[0].start.col,e[0].end.col),o=Math.min(e[0].start.row,e[0].end.row),a=Math.max(e[0].start.row,e[0].end.row);e.forEach((d=>{i=Math.min(i,d.start.col,d.end.col),r=Math.max(r,d.start.col,d.end.col),o=Math.min(o,d.start.row,d.end.row),a=Math.max(a,d.start.row,d.end.row)}));const s=d=>{let c=!1;return e.forEach((f=>{const g=Math.min(f.start.row,f.end.row),p=Math.max(f.start.row,f.end.row);g<=d&&p>=d&&(c=!0)})),c},l=d=>{let c=!1;return e.forEach((f=>{const g=Math.min(f.start.col,f.end.col),p=Math.max(f.start.col,f.end.col);g<=d&&p>=d&&(c=!0)})),c},h=(d,c)=>{let f;return e.forEach((g=>{const p=Math.min(g.start.row,g.end.row),v=Math.max(g.start.row,g.end.row),m=Math.min(g.start.col,g.end.col),y=Math.max(g.start.col,g.end.col);m<=d&&y>=d&&p<=c&&v>=c&&(f=g)})),f},u=[];for(let d=o;d<=a;d++)if(s(d)){const c=[];for(let f=i;f<=r;f++)if(l(f)&&h(f,d)){const g=this.getCellInfo(f,d);c.push(g)}u.push(c)}return u}getSelectedCellRanges(){const t=this.stateManager.select.ranges;return t.length?ag(t):[]}measureText(t,e){return gN.measureText(t,e)}measureTextBounds(t){return eht(t)}getCustomRender(t,e){let i;if(this.getCellLocation(t,e)!=="body"){const r=this.getHeaderDefine(t,e);i=r?.headerCustomRender}else{const r=this.getBodyColumnDefine(t,e);i=r?.customRender||this.customRender}return i}getCustomLayout(t,e){let i;if(this.getCellLocation(t,e)!=="body"){const r=this.getHeaderDefine(t,e);i=r?.headerCustomLayout}else{const r=this.getBodyColumnDefine(t,e);i=r?.customLayout}return i}hasAutoImageColumn(){return this._hasAutoImageColumn===void 0&&(this._hasAutoImageColumn=qte(this)),this._hasAutoImageColumn}_getActiveChartInstance(){var t,e,i,r,o,a;const s=this.scenegraph.getCell((e=(t=this.stateManager.hover)===null||t===void 0?void 0:t.cellPos)===null||e===void 0?void 0:e.col,(r=(i=this.stateManager.hover)===null||i===void 0?void 0:i.cellPos)===null||r===void 0?void 0:r.row);return((a=(o=s?.getChildren())===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.type)==="chart"?s.getChildren()[0].activeChartInstance:null}cellIsInVisualView(t,e){var i,r,o,a;const s=this.getDrawRange(),l=this.getCellRelativeRect(t,e);if(t<this.frozenColCount&&e<this.frozenRowCount)return!0;let h,u,d,c;return this.frozenRowCount>=1&&(h=this.getCellRangeRelativeRect({start:{col:0,row:0},end:{col:this.colCount-1,row:this.frozenRowCount-1}})),this.frozenColCount>=1&&(u=this.getCellRangeRelativeRect({start:{col:0,row:0},end:{col:this.frozenColCount-1,row:this.rowCount-1}})),this.bottomFrozenRowCount>=1&&(d=this.getCellRangeRelativeRect({start:{col:0,row:this.rowCount-this.bottomFrozenRowCount},end:{col:this.colCount-1,row:this.rowCount-1}})),this.rightFrozenColCount>=1&&(c=this.getCellRangeRelativeRect({start:{col:this.colCount-this.rightFrozenColCount,row:0},end:{col:this.colCount-1,row:this.rowCount-1}})),!!(l.top>=s.top&&l.bottom<=s.bottom&&l.left>=s.left&&l.right<=s.right&&(this.isFrozenCell(t,e)||l.top>=((i=h?.bottom)!==null&&i!==void 0?i:l.top)&&l.left>=((r=u?.right)!==null&&r!==void 0?r:l.left)&&l.bottom<=((o=d?.top)!==null&&o!==void 0?o:l.bottom)&&l.right<=((a=c?.left)!==null&&a!==void 0?a:l.right)))}getCustomMergeValue(t,e){if(this.internalProps.customMergeCell){const i=this.getCustomMerge(t,e);if(i){const{text:r}=i;return r}}}exportImg(){return this.scenegraph.stage.toCanvas().toDataURL()}exportCellImg(t,e,i){var r,o,a,s;const l=this.cellIsInVisualView(t,e),{scrollTop:h,scrollLeft:u}=this;l||this.scrollToCell({col:t,row:e});const d=this.getCellRelativeRect(t,e);((o=(r=this.stateManager.select)===null||r===void 0?void 0:r.ranges)===null||o===void 0?void 0:o.length)>0&&DX(this.scenegraph);const{col:c,row:f}=this.stateManager.hover.cellPos;let g,p;if(this.stateManager.updateHoverPos(-1,-1),this.scenegraph.component.hideVerticalScrollBar(),this.scenegraph.component.hideHorizontalScrollBar(),this.scenegraph.tableGroup.border.setAttribute("visible",!1),i?.disableBackground){const y=this.scenegraph.getCell(t,e);g=y.attribute.fill,y.setAttribute("fill","transparent")}if(i?.disableBorder){const y=this.scenegraph.getCell(t,e);p=y.attribute.stroke,y.setAttribute("stroke",!1)}this.scenegraph.renderSceneGraph();let v=0;this.theme.cellBorderClipDirection==="bottom-right"&&(v=1);const m=this.scenegraph.stage.toCanvas(!1,new yy().set(d.left+this.tableX+1,d.top+this.tableY+1,d.right+this.tableX-v,d.bottom+this.tableY-v));return l||(this.setScrollTop(h),this.setScrollLeft(u)),this.scenegraph.tableGroup.border.setAttribute("visible",!0),g&&this.scenegraph.getCell(t,e).setAttribute("fill",g),p&&this.scenegraph.getCell(t,e).setAttribute("stroke",p),((s=(a=this.stateManager.select)===null||a===void 0?void 0:a.ranges)===null||s===void 0?void 0:s.length)>0&&IX(this.scenegraph),this.stateManager.updateHoverPos(c,f),this.scenegraph.updateNextFrame(),m.toDataURL()}exportCellRangeImg(t){var e,i,r,o;const{scrollTop:a,scrollLeft:s}=this,l=Math.min(t.start.col,t.end.col),h=Math.min(t.start.row,t.end.row),u=Math.max(t.start.col,t.end.col),d=Math.max(t.start.row,t.end.row),c=this.cellIsInVisualView(l,h),f=this.cellIsInVisualView(u,d);c&&f||this.scrollToCell({col:l,row:h});const g=this.getCellRangeRelativeRect({start:{col:l,row:h},end:{col:u,row:d}});((i=(e=this.stateManager.select)===null||e===void 0?void 0:e.ranges)===null||i===void 0?void 0:i.length)>0&&DX(this.scenegraph);const{col:p,row:v}=this.stateManager.hover.cellPos;this.stateManager.updateHoverPos(-1,-1),this.scenegraph.component.hideVerticalScrollBar(),this.scenegraph.component.hideHorizontalScrollBar(),this.scenegraph.renderSceneGraph();const m=this.scenegraph.stage.toCanvas(!1,new yy().set(g.left+this.tableX+1,g.top+this.tableY+1,g.right+this.tableX,g.bottom+this.tableY)).toDataURL();return c&&f||(this.setScrollTop(a),this.setScrollLeft(s)),((o=(r=this.stateManager.select)===null||r===void 0?void 0:r.ranges)===null||o===void 0?void 0:o.length)>0&&IX(this.scenegraph),this.stateManager.updateHoverPos(p,v),m}exportCanvas(){return this.scenegraph.stage.toCanvas()}getImageBuffer(t="image/png"){if(this.options.mode!=="node")return;this.render();const e=this.scenegraph.stage;if(e){let i=this.tableX+this.getAllColsWidth(),r=this.tableY+this.getAllRowsHeight();return this.internalProps.legends&&this.internalProps.legends.forEach((o=>{o.orient==="right"?i=Math.max(i,o.legendComponent.globalAABBBounds.x2):o.orient==="bottom"&&(r=Math.max(r,o.legendComponent.globalAABBBounds.y2))})),this.internalProps.title&&(this.internalProps.title._titleOption.orient==="right"?i=Math.max(i,this.internalProps.title.getComponentGraphic().globalAABBBounds.x2):this.internalProps.title._titleOption.orient==="bottom"&&(r=Math.max(r,this.internalProps.title.getComponentGraphic().globalAABBBounds.y2))),i>=this.canvasWidth&&r>=this.canvasHeight?(e.render(),e.window.getImageBuffer(t)):this.scenegraph.stage.toCanvas(!1,new yy().set(0,0,Math.min(this.canvasWidth,i),Math.min(this.canvasHeight,r))).toBuffer(t)}return null}getBodyIndexByTableIndex(t,e){return{col:t-this.rowHeaderLevelCount-this.leftRowSeriesNumberCount,row:e-this.columnHeaderLevelCount}}getTableIndexByBodyIndex(t,e){return{col:t+this.rowHeaderLevelCount+this.leftRowSeriesNumberCount,row:e+this.columnHeaderLevelCount}}onVChartEvent(t,e,i){this._chartEventMap[t]||(this._chartEventMap[t]=[]),typeof e=="function"?this._chartEventMap[t].push({callback:e}):this._chartEventMap[t].push({callback:i,query:e})}offVChartEvent(t,e){this._chartEventMap[t]&&(this._chartEventMap[t]=e?this._chartEventMap[t].filter((i=>i.callback!==e)):[])}_bindChartEvent(t){if(t)for(const e in this._chartEventMap)(this._chartEventMap[e]||[]).forEach((i=>{i.query?t.on(e,i.query,i.callback):t.on(e,i.callback)}))}changeRecordOrder(t,e){}hasCustomCellStyle(t){var e;return(e=this.customCellStylePlugin)===null||e===void 0?void 0:e.hasCustomCellStyle(t)}registerCustomCellStyle(t,e){var i;(i=this.customCellStylePlugin)===null||i===void 0||i.registerCustomCellStyle(t,e)}arrangeCustomCellStyle(t,e,i){var r;(r=this.customCellStylePlugin)===null||r===void 0||r.arrangeCustomCellStyle(t,e,i)}isSeriesNumber(t,e){return this.internalProps.layoutMap.isSeriesNumber(t,e)}isHasSeriesNumber(){var t;return((t=this.internalProps.layoutMap)===null||t===void 0?void 0:t.leftRowSeriesNumberColumnCount)>0}get leftRowSeriesNumberCount(){var t,e;return(e=(t=this.internalProps.layoutMap)===null||t===void 0?void 0:t.leftRowSeriesNumberColumnCount)!==null&&e!==void 0?e:0}setMinMaxLimitWidth(t=!1){var e,i;const r=this.internalProps;for(let o=0;o<r.layoutMap.columnWidths.length;o++){if(this.internalProps._widthResizedColMap.has(o))continue;const{width:a,minWidth:s,maxWidth:l}=(i=(e=r.layoutMap.columnWidths)===null||e===void 0?void 0:e[o])!==null&&i!==void 0?i:{};t&&a&&(typeof a=="string"&&a!=="auto"||typeof a=="number"&&a>0)&&this._setColWidth(o,a),s&&(typeof s=="number"&&s>0||typeof s=="string")&&this.setMinColWidth(o,s),l&&(typeof l=="number"&&l>0||typeof l=="string")&&this.setMaxColWidth(o,l)}}setSortedIndexMap(t,e){var i;(i=this.dataSource)===null||i===void 0||i.setSortedIndexMap(t,e)}checkReactCustomLayout(){this.reactCustomLayout||(this.reactCustomLayout=new HKt(this))}get bodyDomContainer(){return this.internalProps.bodyDomContainer}get headerDomContainer(){return this.internalProps.headerDomContainer}get frozenBodyDomContainer(){return this.internalProps.frozenBodyDomContainer}get frozenHeaderDomContainer(){return this.internalProps.frozenHeaderDomContainer}get rightFrozenBodyDomContainer(){return this.internalProps.rightFrozenBodyDomContainer}get rightFrozenHeaderDomContainer(){return this.internalProps.rightFrozenHeaderDomContainer}get frozenBottomDomContainer(){return this.internalProps.frozenBottomDomContainer}get bottomDomContainer(){return this.internalProps.bottomDomContainer}get rightFrozenBottomDomContainer(){return this.internalProps.rightFrozenBottomDomContainer}showMoverLine(t,e){this.scenegraph.component.showMoveCol(t,e,0),this.scenegraph.renderSceneGraph()}hideMoverLine(t,e){this.scenegraph.component.hideMoveCol(),this.scenegraph.renderSceneGraph()}disableScroll(){this.eventManager.disableScroll()}enableScroll(){this.eventManager.enableScroll()}getGroupTitleLevel(t,e){}scrollToRow(t,e){e?this.animationManager.scrollTo({row:t},e):this.scrollToCell({row:t})}scrollToCol(t,e){e?this.animationManager.scrollTo({col:t},e):this.scrollToCell({col:t})}scrollToCell(t,e){if(e)return void this.animationManager.scrollTo(t,e);const i=this.getDrawRange();if(Y(t.col)&&t.col>=this.frozenColCount){const r=this.getFrozenColsWidth(),o=this.getColsWidth(0,t.col-1);this.scrollLeft=Math.min(o-r,this.getAllColsWidth()-i.width)}if(Y(t.row)&&t.row>=this.frozenRowCount){const r=this.getFrozenRowsHeight(),o=this.getRowsHeight(0,t.row-1);this.scrollTop=Math.min(o-r,this.getAllRowsHeight()-i.height)}this.render()}checkHasColumnAutoWidth(){return IKt(this)}get containerFit(){return this._containerFit}set containerFit(t){var e,i;this._containerFit=typeof t=="boolean"?{width:t,height:t}:t&&typeof t=="object"?{width:(e=t.width)===null||e===void 0||e,height:(i=t.height)===null||i===void 0||i}:{width:!1,height:!1}}}const _T={},yee={};function bee(){return G_(yee,_T)}const Zb={};function _ee(n){if(Zb[n])return Zb[n]}function j_(n,t,e){const i=n[t];return n[t]=e,i}function Cee(n,t){return t!=null?j_(kA,n,t):kA[n]}function wee(n,t){return t!=null?j_(DA,n,t):DA[n]}function xee(n,t){return t!=null?j_(_T,n,t):_T[n]}function See(n,t){return t!=null?j_(Zb,n,t):Zb[n]}function Aee(n,t){t!=null&&j_(J3,n,t)}function h0(n){for(const t in n)delete n[t]}function Tee(){h0(kA),h0(DA),h0(_T),h0(Zb),h0(J3)}const Mee=Object.freeze(Object.defineProperty({__proto__:null,aggregator:Aee,chartModule:xee,clearAll:Tee,editor:See,icon:wee,theme:Cee},Symbol.toStringTag,{value:"Module"})),U_=(n,t)=>Object.prototype.toString.call(n)===`[object ${t}]`,Ree=(n,t=!1)=>t?typeof n=="boolean":n===!0||n===!1||U_(n,"Boolean"),Pee=n=>n!=null,Bee=(n,t=!1)=>{const e=typeof n;return t?e==="string":e==="string"||U_(n,"String")},kee=n=>Array.isArray?Array.isArray(n):U_(n,"Array"),Lee=n=>U_(n,"Date"),Eee=(n,t=!1)=>{const e=typeof n;return t?e==="number":e==="number"||U_(n,"Number")};function Dee(n){try{return n instanceof Element}catch{const e=["children","innerHTML","classList","setAttribute","tagName","getBoundingClientRect"],i=Object.keys(n);return e.every((r=>i.includes(r)))}}const fm=(n,t)=>Object.prototype.toString.call(n)===`[object ${t}]`,Iee=(n,t=!1)=>t?typeof n=="boolean":n===!0||n===!1||fm(n,"Boolean"),bq=n=>n==null,dH=n=>n!=null,Oee=n=>typeof n=="object"&&n!==null,Hee=function(n){if(!Oee(n)||!fm(n,"Object"))return!1;if(Object.getPrototypeOf(n)===null)return!0;let t=n;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(n)===t},zee=(n,t=!1)=>{const e=typeof n;return t?e==="string":e==="string"||fm(n,"String")},CT=n=>Array.isArray?Array.isArray(n):fm(n,"Array"),Fee=function(n){return n!==null&&typeof n!="function"&&Number.isFinite(n.length)},Nee=n=>fm(n,"Date"),Dht=(n,t=!1)=>{const e=typeof n;return t?e==="number":e==="number"||fm(n,"Number")};function Iht(n,t,e){let i;if(!dH(n)||typeof n!="object"||t)return n;const r=CT(n),o=n.length;i=r?new Array(o):typeof n=="object"?{}:Iee(n)||Dht(n)||zee(n)?n:Nee(n)?new Date(+n):void 0;const a=r?void 0:Object.keys(Object(n));let s=-1;if(i)for(;++s<(a||n).length;){const l=a?a[s]:s,h=n[l];i[l]=Iht(h,t)}return i}function Oht(n,t,e=!1,i=!1){if(t){if(n===t)return;if(dH(t)&&typeof t=="object"){const r=Object(t),o=[];for(const l in r)o.push(l);let{length:a}=o,s=-1;for(;a--;){const l=o[++s];!dH(r[l])||typeof r[l]!="object"||i&&CT(n[l])?Hht(n,l,r[l]):Wee(n,t,l,e,i)}}}}function Wee(n,t,e,i=!1,r=!1){const o=n[e],a=t[e];let s=t[e],l=!0;if(CT(a)){if(i)s=[];else if(CT(o))s=o;else if(Fee(o)){s=new Array(o.length);let h=-1;const u=o.length;for(;++h<u;)s[h]=o[h]}}else Hee(a)?(s=o??{},typeof o!="function"&&typeof o=="object"||(s={})):l=!1;l&&Oht(s,a,i,r),Hht(n,e,s)}function Hht(n,t,e){(e!==void 0&&!Vee(n[t],e)||e===void 0&&!(t in n))&&(n[t]=e)}function Vee(n,t){return n===t||Number.isNaN(n)&&Number.isNaN(t)}function Gee(n,...t){let e=-1;const i=t.length;for(;++e<i;)Oht(n,t[e],!0);return n}const $ee=typeof console<"u";function iw(n,t,e){const i=[t].concat([].slice.call(e))}var ss;(function(n){n[n.None=0]="None",n[n.Error=1]="Error",n[n.Warn=2]="Warn",n[n.Info=3]="Info",n[n.Debug=4]="Debug"})(ss||(ss={}));class Ur{static getInstance(t,e){return Ur._instance&&Dht(t)?Ur._instance.level(t):Ur._instance||(Ur._instance=new Ur(t,e)),Ur._instance}static setInstance(t){return Ur._instance=t}static setInstanceLevel(t){Ur._instance?Ur._instance.level(t):Ur._instance=new Ur(t)}static clearInstance(){Ur._instance=null}constructor(t=ss.None,e){this._onErrorHandler=[],this._level=t,this._method=e}addErrorHandler(t){this._onErrorHandler.find((e=>e===t))||this._onErrorHandler.push(t)}removeErrorHandler(t){const e=this._onErrorHandler.findIndex((i=>i===t));e<0||this._onErrorHandler.splice(e,1)}callErrorHandler(...t){this._onErrorHandler.forEach((e=>e(...t)))}canLogInfo(){return this._level>=ss.Info}canLogDebug(){return this._level>=ss.Debug}canLogError(){return this._level>=ss.Error}canLogWarn(){return this._level>=ss.Warn}level(t){return arguments.length?(this._level=+t,this):this._level}error(...t){var e;return this._level>=ss.Error&&(this._onErrorHandler.length?this.callErrorHandler(...t):iw((e=this._method)!==null&&e!==void 0?e:"error","ERROR",t)),this}warn(...t){return this._level>=ss.Warn&&iw(this._method||"warn","WARN",t),this}info(...t){return this._level>=ss.Info&&iw(this._method||"log","INFO",t),this}debug(...t){return this._level>=ss.Debug&&iw(this._method||"log","DEBUG",t),this}}Ur._instance=null;const jee=(n,t)=>{var e,i;if(!t?.fields||n.length===0)return n;const r=t.fields,o=n[0],a={},s=[];for(const l in r)if(Object.prototype.hasOwnProperty.call(r,l)){const h=r[l];if(!h.type){let d=o;l in o||(d=(e=n.find((c=>l in c)))!==null&&e!==void 0?e:o),h.type=typeof d[l]=="number"?"linear":"ordinal"}let u;if(typeof h.sortIndex=="number"&&(u={key:l,type:h.type,index:h.sortIndex,sortIndex:{},sortIndexCount:0,sortReverse:h.sortReverse===!0},s.push(u)),((i=h.domain)===null||i===void 0?void 0:i.length)>0)if(h.type==="ordinal"){h._domainCache={},a[l]=h;const d={};h.domain.forEach(((c,f)=>{d[c]=f,h._domainCache[c]=f})),u&&(u.sortIndex=d,u.sortIndexCount=h.domain.length)}else h.domain.length>=2&&(a[l]=h)}return Object.keys(a).length>0&&(n=n.filter((l=>{for(const h in a){const u=a[h];if(u.type==="ordinal"){if(!(l[h]in u._domainCache))return!1}else if(u.domain[0]>l[h]||u.domain[1]<l[h])return!1}return!0}))),s.sort(((l,h)=>l.index-h.index)),n.sort(((l,h)=>Uee(l,h,s))),n};function Uee(n,t,e){for(let i=0;i<e.length;i++){const r=e[i];let o=0;if(r.type==="ordinal"?(r.sortIndex[t[r.key]]===void 0&&(r.sortIndex[t[r.key]]=r.sortIndexCount++),r.sortIndex[n[r.key]]===void 0&&(r.sortIndex[n[r.key]]=r.sortIndexCount++),o=r.sortIndex[n[r.key]]-r.sortIndex[t[r.key]]):r.type==="linear"&&(o=n[r.key]-t[r.key]),r.sortReverse&&(o=-o),o!==0)return o}return 0}let VL=0;const Yee=1e8;function zht(n="dataset"){return VL>Yee&&(VL=0),n+"_"+VL++}class Xee{constructor(t){var e;let i;this.options=t,this.isDataSet=!0,this.transformMap={},this.parserMap={},this.dataViewMap={},this.target=new ng,i=t?.name?t.name:zht("dataset"),this.name=i,this._logger=(e=t?.logger)!==null&&e!==void 0?e:Ur.getInstance()}setLogger(t){this._logger=t}getDataView(t){return this.dataViewMap[t]}setDataView(t,e){var i;this.dataViewMap[t]&&((i=this._logger)===null||i===void 0||i.error(`Error: dataView ${t} `)),this.dataViewMap[t]=e}removeDataView(t){this.dataViewMap[t]=null,delete this.dataViewMap[t]}registerParser(t,e){var i;this.parserMap[t]&&((i=this._logger)===null||i===void 0||i.warn(`Warn: transform ${t} `)),this.parserMap[t]=e}removeParser(t){this.parserMap[t]=null,delete this.parserMap[t]}getParser(t){return this.parserMap[t]||this.parserMap.default}registerTransform(t,e){var i;this.transformMap[t]&&((i=this._logger)===null||i===void 0||i.warn(`Warn: transform ${t} `)),this.transformMap[t]=e}removeTransform(t){this.transformMap[t]=null,delete this.transformMap[t]}getTransform(t){return this.transformMap[t]}multipleDataViewAddListener(t,e,i){this._callMap||(this._callMap=new Map);let r=this._callMap.get(i);r||(r=()=>{t.some((o=>o.isRunning))||i()}),t.forEach((o=>{o.target.addListener(e,r)})),this._callMap.set(i,r)}allDataViewAddListener(t,e){this.multipleDataViewAddListener(Object.values(this.dataViewMap),t,e)}multipleDataViewRemoveListener(t,e,i){if(this._callMap){const r=this._callMap.get(i);r&&t.forEach((o=>{o.target.removeListener(e,r)})),this._callMap.delete(i)}}multipleDataViewUpdateInParse(t){t.forEach((e=>{var i;return(i=this.getDataView(e.name))===null||i===void 0?void 0:i.markRunning()})),t.forEach((e=>{var i;return(i=this.getDataView(e.name))===null||i===void 0?void 0:i.parseNewData(e.data,e.options)}))}multipleDataViewUpdateInRawData(t){t.forEach((e=>{var i;return(i=this.getDataView(e.name))===null||i===void 0?void 0:i.markRunning()})),t.forEach((e=>{var i;return(i=this.getDataView(e.name))===null||i===void 0?void 0:i.updateRawData(e.data,e.options)}))}destroy(){this.transformMap=null,this.parserMap=null,this.dataViewMap=null,this._callMap=null,this.target.removeAllListeners()}}const GL="_data-view-diff-rank";let Fht=class Nht{constructor(t,e){let i;this.dataSet=t,this.options=e,this.isDataView=!0,this.target=new ng,this.parseOption=null,this.transformsArr=[],this.isRunning=!1,this.rawData={},this.history=!1,this.parserData={},this.latestData={},this._fields=null,this.reRunAllTransform=(r={pushHistory:!0,emitMessage:!0})=>(this.isRunning=!0,this.resetTransformData(),this.transformsArr.forEach((o=>{this.executeTransform(o,{pushHistory:r.pushHistory,emitMessage:!1}),this.isLastTransform(o)&&this.diffLastData()})),this.isRunning=!1,r.emitMessage!==!1&&this.target.emit("change",[]),this),this.markRunning=()=>{this.isRunning=!0,this.target.emit("markRunning",[])},i=e?.name?e.name:zht("dataview"),this.name=i,e?.history&&(this.history=e.history,this.historyData=[]),this.dataSet.setDataView(i,this),this.setFields(e?.fields)}parse(t,e,i=!1){var r;this.isRunning=!0,i&&this.target.emit("beforeParse",[]),e&&(this.parseOption=e);const o=this.cloneParseData(t,e);if(e?.type){const a=((r=this.dataSet.getParser(e.type))!==null&&r!==void 0?r:this.dataSet.getParser("bytejson"))(o,e.options,this);this.rawData=o,this.parserData=a,this.history&&this.historyData.push(o,a),this.latestData=a}else this.parserData=o,this.rawData=o,this.history&&this.historyData.push(o),this.latestData=o;return this.isRunning=!1,i&&this.target.emit("afterParse",[]),this}transform(t,e=!0){if(this.isRunning=!0,t&&t.type){let i=!0;if(t.type==="fields"){this._fields=t.options.fields;const r=this.transformsArr.findIndex((o=>o.type===t.type));r>=0&&(i=!1,this.transformsArr[r].options.fields=this._fields)}if(i&&this.transformsArr.push(t),e){const r=this.isLastTransform(t);this.executeTransform(t),r&&this.diffLastData()}}return this.sortTransform(),this.isRunning=!1,this}isLastTransform(t){return this.transformsArr[this.transformsArr.length-1]===t}sortTransform(){this.transformsArr.length>=2&&this.transformsArr.sort(((t,e)=>{var i,r;return((i=t.level)!==null&&i!==void 0?i:0)-((r=e.level)!==null&&r!==void 0?r:0)}))}executeTransform(t,e={pushHistory:!0,emitMessage:!0}){const{pushHistory:i,emitMessage:r}=e,o=this.dataSet.getTransform(t.type)(this.latestData,t.options);this.history&&i!==!1&&this.historyData.push(o),this.latestData=o,r!==!1&&this.target.emit("change",[])}resetTransformData(){this.latestData=this.parserData,this.history&&(this.historyData.length=0,this.historyData.push(this.rawData,this.parserData))}enableDiff(t){this._diffData=!0,this._diffKeys=t,this._diffMap=new Map,this._diffRank=0}disableDiff(){this._diffData=!1,this._diffMap=null,this._diffRank=null}resetDiff(){this._diffMap=new Map,this._diffRank=0}diffLastData(){var t;if(!this._diffData||!this.latestData.forEach||!(!((t=this._diffKeys)===null||t===void 0)&&t.length))return;const e=this._diffRank+1;if(this._diffRank===0)this.latestData.forEach((i=>{i[GL]=e,this._diffMap.set(this._diffKeys.reduce(((r,o)=>r+i[o]),""),i)})),this.latestDataAUD={add:Array.from(this.latestData),del:[],update:[]};else{let i;this.latestDataAUD={add:[],del:[],update:[]},this.latestData.forEach((r=>{r[GL]=e,i=this._diffKeys.reduce(((o,a)=>o+r[a]),""),this._diffMap.get(i)?this.latestDataAUD.update.push(r):this.latestDataAUD.add.push(r),this._diffMap.set(i,r)})),this._diffMap.forEach(((r,o)=>{r[GL]<e&&(this.latestDataAUD.del.push(r),this._diffMap.delete(o))}))}this._diffRank=e}cloneParseData(t,e){let i=!1;return t instanceof Nht||e?.clone!==!0||(i=!0),i?Iht(t):t}parseNewData(t,e){this.parse(t,e||this.parseOption),this.reRunAllTransform()}updateRawData(t,e){const i=this.cloneParseData(t,e);this.rawData=i,this.parserData=i,this.latestData=i,this.reRunAllTransform()}getFields(){var t;return this._fields?this._fields:((t=this.parseOption)===null||t===void 0?void 0:t.type)==="dataview"&&this.rawData.length===1&&this.rawData[0].getFields?this.rawData[0].getFields():null}setFields(t,e=!1){this._fields=t&&e?Gee({},this._fields,t):t;const i=this.transformsArr.find((r=>r.type==="fields"));!bq(this._fields)&&bq(i)?(this.dataSet.registerTransform("fields",jee),this.transform({type:"fields",options:{fields:this._fields}},!1)):i&&(i.options.fields=this._fields)}destroy(){this.dataSet.removeDataView(this.name),this._diffMap=null,this._diffRank=null,this.latestData=null,this.rawData=null,this.parserData=null,this.transformsArr=null,this.target=null}};function qee(n){return n instanceof Fht}function Qg(n,t=["data"]){const e=n;let i;if(!Pee(e)||typeof e!="object"||qee(e)||Dee(e))return e;const r=kee(e),o=e.length;i=r?new Array(o):typeof e=="object"?{}:Ree(e)||Eee(e)||Bee(e)?e:Lee(e)?new Date(+e):void 0;const a=r?void 0:Object.keys(Object(e));let s=-1;if(i)for(;++s<(a||e).length;){const l=a?a[s]:s,h=e[l];t?.includes(l.toString())?i[l]=h:i[l]=Qg(h,t)}return i}function Wht(n){var t,e;const i=Object.assign({},n);return Cr(n.style)||(i.textStyle=an(n.style)),Cr(n.textStyle)||oi(i.textStyle,an(n.textStyle)),!((t=n.shape)===null||t===void 0)&&t.style&&an(i.shape.style),!((e=n.background)===null||e===void 0)&&e.style&&an(i.background.style),i}function an(n){return Cr(n)||n.angle&&(n.angle=MA(n.angle)),n}function gs(n={}){return Cr(n.style)||(n.style=an(n.style)),Cr(n.state)||Object.keys(n.state).forEach((t=>{Cr(n.state[t])||(n.state[t]=an(n.state[t]))})),n}function ic(n){return Cr(n)?null:(Object.keys(n).forEach((t=>{Cr(n[t])||(n[t]=an(n[t]))})),n)}function Kee(n){return gs(n),gs(n.startSymbol),gs(n.endSymbol),n}const Zee={left:{textAlign:"center",textBaseline:"bottom"},right:{textAlign:"center",textBaseline:"bottom"},radius:{},angle:{}},Hp="PingFang SC,Microsoft Yahei,system-ui,-apple-system,segoe ui,Roboto,Helvetica,Arial,sans-serif, apple color emoji,segoe ui emoji,segoe ui symbol",zp=14,z0={LABEL_FONT_SIZE:14,AXIS_TICK_SIZE:4},wT={domainLine:{visible:!0,style:{lineWidth:1,stroke:"#D9DDE4",strokeOpacity:1}},grid:{visible:!0,style:{lineWidth:1,stroke:"#EBEDF2",strokeOpacity:1,lineDash:[]}},subGrid:{visible:!1,style:{lineWidth:1,stroke:"#EBEDF2",strokeOpacity:1,lineDash:[4,4]}},tick:{visible:!0,tickSize:z0.AXIS_TICK_SIZE,style:{lineWidth:1,stroke:"#D9DDE4",strokeOpacity:1}},subTick:{visible:!1,tickSize:z0.AXIS_TICK_SIZE/2,style:{lineWidth:1,stroke:"#D9DDE4",strokeOpacity:1}},label:{visible:!0,space:1,style:{fontSize:z0.LABEL_FONT_SIZE,fill:"#89909D",fontWeight:"normal",fillOpacity:1},autoLimit:!0},title:{space:10,style:{fontSize:z0.LABEL_FONT_SIZE,fill:"#333333",fontWeight:"normal",fillOpacity:1}}};function Jee(n){var t,e;return!((e=(t=n?.colorScheme)===null||t===void 0?void 0:t.default)===null||e===void 0)&&e.palette?oi({},wT,{tick:{style:{stroke:n.colorScheme.default.palette.axisDomainColor||"#D9DDE4"}},subTick:{style:{stroke:n.colorScheme.default.palette.axisDomainColor||"#D9DDE4"}},label:{style:{fill:n.colorScheme.default.palette.axisLabelFontColor||"#89909D"}},title:{style:{fill:n.colorScheme.default.palette.secondaryFontColor||"#333333"}}}):wT}function _q(n){var t,e,i,r,o,a,s,l,h,u,d,c,f;const g=oi({},n);let p,v=(e=(t=g.title)===null||t===void 0?void 0:t.angle)!==null&&e!==void 0?e:0;g.orient!=="left"&&g.orient!=="right"||!((i=g.title)===null||i===void 0)&&i.autoRotate&&We(g.title.angle)&&(v=g.orient==="left"?-90:90,p=Zee[g.orient]);const m=AYt(g.label,["style","formatMethod","state"]);return{orient:g.orient,select:g.select,hover:g.hover,line:Kee(g.domainLine),label:Object.assign({style:an(g.label.style),formatMethod:g.label.formatMethod?(y,b,_)=>g.label.formatMethod(b.rawValue,b):null,state:ic(g.label.state)},m),tick:{visible:g.tick.visible,length:g.tick.tickSize,inside:g.tick.inside,alignWithLabel:g.tick.alignWithLabel,style:an(g.tick.style),state:ic(g.tick.state),dataFilter:g.tick.dataFilter},subTick:{visible:g.subTick.visible,length:g.subTick.tickSize,inside:g.subTick.inside,count:g.subTick.tickCount,style:an(g.subTick.style),state:ic(g.subTick.state)},grid:{type:"line",visible:g.grid.visible,alternateColor:g.grid.alternateColor,alignWithLabel:g.grid.alignWithLabel,style:an(g.grid.style)},subGrid:{type:"line",visible:g.subGrid.visible,alternateColor:g.subGrid.alternateColor,style:an(g.subGrid.style)},title:{visible:g.title.visible,position:g.title.position,space:g.title.space,autoRotate:!1,angle:v?MA(v):null,textStyle:oi({},p,an(g.title.style)),padding:g.title.padding,shape:{visible:(r=g.title.shape)===null||r===void 0?void 0:r.visible,space:(o=g.title.shape)===null||o===void 0?void 0:o.space,style:an((a=g.title.shape)===null||a===void 0?void 0:a.style)},background:{visible:(s=g.title.background)===null||s===void 0?void 0:s.visible,style:an((l=g.title.background)===null||l===void 0?void 0:l.style)},state:{text:ic(g.title.state),shape:ic((h=g.title.shape)===null||h===void 0?void 0:h.state),background:ic((u=g.title.background)===null||u===void 0?void 0:u.state)}},panel:{visible:(d=g.background)===null||d===void 0?void 0:d.visible,style:an((c=g.background)===null||c===void 0?void 0:c.style),state:ic((f=g.background)===null||f===void 0?void 0:f.state)}}}function Qee(n,t,e){var i;const r=e.getRawChartSpec(n,t);if(r?.series){const o={};return!((i=r.data)===null||i===void 0)&&i.id&&(o[r.data.id]=void 0),r?.series.forEach((a=>{var s,l,h,u,d,c,f,g,p,v,m;if(!(!((s=a.data)===null||s===void 0)&&s.fromDataId))if(!((l=a.data)===null||l===void 0)&&l.transforms)o[(m=(p=(g=a.data)===null||g===void 0?void 0:g.id)!==null&&p!==void 0?p:(v=r.data)===null||v===void 0?void 0:v.id)!==null&&m!==void 0?m:"data"]=void 0;else{const y=a.direction==="horizontal"?a.xField:a.yField;o[(c=(u=(h=a.data)===null||h===void 0?void 0:h.id)!==null&&u!==void 0?u:(d=r.data)===null||d===void 0?void 0:d.id)!==null&&c!==void 0?c:"data"]=!((f=a.data)===null||f===void 0)&&f.id?y:void 0}})),o}return r.data.id}function tie(n){let t=!1;for(let e=0;e<n.columnObjects.length;e++)if(n.columnObjects[e].chartSpec){t=!0;break}return t}function eie(n,t,e){var i,r,o;if(n===-1||t===-1)return{start:{col:n,row:t},end:{col:n,row:t}};if(e._cellRangeMap.has(`$${n}$${t}`))return e._cellRangeMap.get(`$${n}$${t}`);let a={start:{col:n,row:t},end:{col:n,row:t}};if(e.transpose)a=nie(n,t,e);else if(e.headerLevelCount<=t){if(e.headerLevelCount<=t&&(!((r=(i=e.columnObjects[n-e.leftRowSeriesNumberColumnCount])===null||i===void 0?void 0:i.define)===null||r===void 0)&&r.mergeCell)){const s=e._table.getCellValue(n,t);for(let l=t-1;l>=e.headerLevelCount;l--){const h=e._table.getCellValue(n,l);if(typeof e.columnObjects[n-e.leftRowSeriesNumberColumnCount].define.mergeCell=="boolean"){if(s!==h)break}else if(!e.columnObjects[n-e.leftRowSeriesNumberColumnCount].define.mergeCell(s,h,{source:{col:n,row:t},target:{col:n,row:l},table:e._table}))break;a.start.row=l}for(let l=t+1;l<e.rowCount;l++){const h=e._table.getCellValue(n,l);if(typeof e.columnObjects[n-e.leftRowSeriesNumberColumnCount].define.mergeCell=="boolean"){if(s!==h)break}else if(!e.columnObjects[n-e.leftRowSeriesNumberColumnCount].define.mergeCell(s,h,{source:{col:n,row:t},target:{col:n,row:l},table:e._table}))break;a.end.row=l}}iie(n,t,a,e)}else{const s=e.getCellId(n,t);for(let l=n-1;l>=0&&s===e.getCellId(l,t);l--)a.start.col=l;for(let l=n+1;l<((o=e.colCount)!==null&&o!==void 0?o:0)&&s===e.getCellId(l,t);l++)a.end.col=l;for(let l=t-1;l>=0&&s===e.getCellId(n,l);l--)a.start.row=l;for(let l=t+1;l<e.headerLevelCount&&s===e.getCellId(n,l);l++)a.end.row=l}return e._cellRangeMap.set(`$${n}$${t}`,a),a}function iie(n,t,e,i){if(i.rowHierarchyType!=="tree")return;const r=i._table.getCellRawRecord(n,t);i._table.internalProps.groupTitleCheckbox&&i._table.internalProps.rowSeriesNumber?r?.vtableMerge&&n>=i.leftRowSeriesNumberColumnCount&&(e.start.col=i.rowHeaderLevelCount+i.leftRowSeriesNumberColumnCount,e.end.col=i.colCount-1,e.start.row=e.end.row=t):r?.vtableMerge&&(e.start.col=i.rowHeaderLevelCount,e.end.col=i.colCount-1,e.start.row=e.end.row=t)}function nie(n,t,e){var i,r,o,a;const s={start:{col:n,row:t},end:{col:n,row:t}};if(e.headerLevelCount+e.leftRowSeriesNumberColumnCount<=n||n===-1&&t===-1){if(e.headerLevelCount+e.leftRowSeriesNumberColumnCount<=n&&(!((r=(i=e.columnObjects[t])===null||i===void 0?void 0:i.define)===null||r===void 0)&&r.mergeCell)){const h=e._table.getCellValue(n,t);for(let u=n-1;u>=e.headerLevelCount+e.leftRowSeriesNumberColumnCount;u--){const d=e._table.getCellValue(u,t);if(typeof e.columnObjects[t].define.mergeCell=="boolean"){if(h!==d)break}else if(!e.columnObjects[t].define.mergeCell(h,d,{source:{col:n,row:t},target:{col:u,row:t},table:e._table}))break;s.start.col=u}for(let u=n+1;u<((o=e.colCount)!==null&&o!==void 0?o:0);u++){const d=e._table.getCellValue(u,t);if(typeof e.columnObjects[t].define.mergeCell=="boolean"){if(h!==d)break}else if(!e.columnObjects[t].define.mergeCell(h,d,{source:{col:n,row:t},target:{col:u,row:t},table:e._table}))break;s.end.col=u}}return s}const l=e.getCellId(n,t);for(let h=t-1;h>=0&&l===e.getCellId(n,h);h--)s.start.row=h;for(let h=t+1;h<((a=e.rowCount)!==null&&a!==void 0?a:0)&&l===e.getCellId(n,h);h++)s.end.row=h;for(let h=n-1;h>=0&&l===e.getCellId(h,t);h--)s.start.col=h;for(let h=n+1;h<e.headerLevelCount+e.leftRowSeriesNumberColumnCount&&l===e.getCellId(h,t);h++)s.end.col=h;return s}class rie{constructor(t,e,i,r){var o,a;this.seqId=0,this._columnMaxDepth=0,this.leftRowSeriesNumberColumnCount=0,this.rightRowSeriesNumberColumnCount=0,this.bodyRowSpanCount=1,this._transpose=!1,this._showHeader=!0,this._recordsCount=0,this._hasAggregation=!1,this._hasAggregationOnTopCount=0,this._hasAggregationOnBottomCount=0,this._cellRangeMap=new Map,this._showHeader=i,this._table=t,this._columns=[],this._columnsIncludeHided=[],this._headerCellIds=[],this._columnMaxDepth=this._calculateMaxDepth(e),this.hierarchyIndent=r??20,this.hierarchyTextStartAlignment=t.options.hierarchyTextStartAlignment,this.columnHierarchyType=t.options.headerHierarchyType,this.columnExpandLevel=(o=t.options.headerExpandLevel)!==null&&o!==void 0?o:1,this.columnTree=new $te(e,{seqId:0},(a=this.columnHierarchyType)!==null&&a!==void 0?a:null,this.columnHierarchyType==="grid-tree"?this.columnExpandLevel:void 0),this._headerObjectsIncludeHided=this._addHeaders(0,e,[]),this._headerObjects=this._headerObjectsIncludeHided.filter((s=>s.define.hide!==!0)),this._headerObjectMap=this._headerObjects.reduce(((s,l)=>(s[l.id]=l,s)),{}),this.rowHierarchyType=Xte(this)?"tree":"grid",this._hasAggregation=jte(this),this._hasAggregationOnBottomCount=Yte(this),this._hasAggregationOnTopCount=Ute(this),this.handleRowSeriesNumber(t.internalProps.rowSeriesNumber)}handleRowSeriesNumber(t){var e,i,r;t&&(Array.isArray(t)?this.rowSeriesNumberColumn=t.map(((o,a)=>{var s,l;return{id:this.seqId++,title:o.title,define:oi({field:"_vtable_rowSeries_number_"+a},o),cellType:(s=o.cellType)!==null&&s!==void 0?s:"text",headerType:o.cellType==="checkbox"?"checkbox":"text",style:o.style,width:o.width,format:o.format,field:(l=o.field)!==null&&l!==void 0?l:"_vtable_rowSeries_number_"+a,icon:o.icon,headerIcon:o.headerIcon,isChildNode:!1}})):this.rowSeriesNumberColumn=[{id:this.seqId++,title:t.title,define:oi({field:"_vtable_rowSeries_number"},t),cellType:(e=t.cellType)!==null&&e!==void 0?e:"text",headerType:(i=t.headerType)!==null&&i!==void 0?i:t.cellType==="checkbox"?"checkbox":"text",style:t.style,width:t.width,format:t.format,field:(r=t.field)!==null&&r!==void 0?r:"_vtable_rowSeries_number",icon:t.icon,headerIcon:t.headerIcon,isChildNode:!1}],this.leftRowSeriesNumberColumn=this.rowSeriesNumberColumn.filter((o=>!0)),this.rightRowSeriesNumberColumn=this.rowSeriesNumberColumn.filter((o=>!1)),this.leftRowSeriesNumberColumnCount=this.leftRowSeriesNumberColumn.length,this.rightRowSeriesNumberColumnCount=this.rightRowSeriesNumberColumn.length)}get transpose(){return this._transpose}set transpose(t){this._transpose=t}get showHeader(){return this._showHeader}set showHeader(t){this._showHeader=t}isSeriesNumberInHeader(t,e){if(this.leftRowSeriesNumberColumnCount>0&&t>=0&&e>=0&&t<this.leftRowSeriesNumberColumnCount){if(this.transpose)return!1;if(e<this.headerLevelCount)return!0}if(this.rightRowSeriesNumberColumnCount>0&&e>=0&&t>=this.colCount-this.rightRowSeriesNumberColumnCount){if(this.transpose)return!1;if(e<this.headerLevelCount)return!0}return!1}isSeriesNumberInBody(t,e){return!!(this.leftRowSeriesNumberColumnCount>0&&t>=0&&t<this.leftRowSeriesNumberColumnCount&&(this.transpose||e>=this.headerLevelCount)||this.rightRowSeriesNumberColumnCount>0&&t>=this.colCount-this.rightRowSeriesNumberColumnCount&&(this.transpose||e>=this.headerLevelCount))}isSeriesNumber(t,e){return!!(Y(t)&&Y(e)&&(this.leftRowSeriesNumberColumnCount>0&&t>=0&&e>=0&&t<this.leftRowSeriesNumberColumnCount||this.rightRowSeriesNumberColumnCount>0&&e>=0&&t>=this.colCount-this.rightRowSeriesNumberColumnCount))}getSeriesNumberHeader(t,e){if(this.leftRowSeriesNumberColumnCount>0&&t>=0&&t<this.leftRowSeriesNumberColumnCount){if(this.transpose)return;if(e<this.headerLevelCount)return Object.assign({},this.leftRowSeriesNumberColumn[t],{style:Object.assign({},this._table.transpose?this._table.internalProps.theme.rowHeaderStyle:this._table.internalProps.theme.headerStyle,this._table.internalProps.rowSeriesNumber.headerStyle)})}if(this.rightRowSeriesNumberColumnCount>0&&t>=this.colCount-this.rightRowSeriesNumberColumnCount&&e<this.headerLevelCount){if(this.transpose)return;if(e<this.headerLevelCount)return this.rightRowSeriesNumberColumn[t-(this.colCount-this.rightRowSeriesNumberColumnCount)]}}getSeriesNumberBody(t,e){if(this.leftRowSeriesNumberColumnCount>0&&t>=0&&t<this.leftRowSeriesNumberColumnCount){if(this.transpose)return this.leftRowSeriesNumberColumn[t];if(e>=this.headerLevelCount)return this.leftRowSeriesNumberColumn[t]}if(this.rightRowSeriesNumberColumnCount>0&&t>=this.colCount-this.rightRowSeriesNumberColumnCount){if(this.transpose)return this.rightRowSeriesNumberColumn[t-(this.colCount-this.rightRowSeriesNumberColumnCount)];if(e>=this.headerLevelCount)return this.rightRowSeriesNumberColumn[t-(this.colCount-this.rightRowSeriesNumberColumnCount)]}}isHeader(t,e){return!!(this.transpose&&t>=this.leftRowSeriesNumberColumnCount&&t<this.headerLevelCount+this.leftRowSeriesNumberColumnCount)||!this.transpose&&e>=0&&e<this.headerLevelCount}isAggregation(t,e){if(this.hasAggregation){if(this.hasAggregationOnBottomCount){if(this.transpose){if(t>=this.colCount-this.hasAggregationOnBottomCount)return!0}else if(e>=this.rowCount-this.hasAggregationOnBottomCount)return!0}if(this.hasAggregationOnTopCount){if(this.transpose){if(t>=this.rowHeaderLevelCount&&t<this.rowHeaderLevelCount+this.hasAggregationOnTopCount)return!0}else if(e>=this.columnHeaderLevelCount&&e<this.columnHeaderLevelCount+this.hasAggregationOnTopCount)return!0}}return!1}isTopAggregation(t,e){if(this.hasAggregationOnTopCount){if(this.transpose){if(t>=this.rowHeaderLevelCount&&t<this.rowHeaderLevelCount+this.hasAggregationOnTopCount)return!0}else if(e>=this.columnHeaderLevelCount&&e<this.columnHeaderLevelCount+this.hasAggregationOnTopCount)return!0}return!1}isBottomAggregation(t,e){if(this.hasAggregationOnBottomCount){if(this.transpose){if(t>=this.colCount-this.hasAggregationOnBottomCount)return!0}else if(e>=this.rowCount-this.hasAggregationOnBottomCount)return!0}return!1}get hasAggregation(){return this._hasAggregation}get hasAggregationOnTopCount(){return this._hasAggregationOnTopCount}get hasAggregationOnBottomCount(){return this._hasAggregationOnBottomCount}getAggregatorsByCell(t,e){return this.getColumnDefine(t,e).vtable_aggregator}getAggregatorsByCellRange(t,e,i,r){let o=[];if(!this.transpose){for(let a=t;a<=i;a++){const s=this.getColumnDefine(a,e);s.vtable_aggregator&&(o=o.concat(Array.isArray(s.vtable_aggregator)?s.vtable_aggregator:[s.vtable_aggregator]))}return o}for(let a=e;a<=r;a++){const s=this.getColumnDefine(t,a);s.vtable_aggregator&&(o=o.concat(Array.isArray(s.vtable_aggregator)?s.vtable_aggregator:[s.vtable_aggregator]))}return[]}getAggregatorOnTop(t,e){const i=this.getColumnDefine(t,e),r=i.vtable_aggregator,o=i.aggregation;if(Array.isArray(o)){const a=o.reduce(((s,l,h)=>(l.showOnTop&&s.push(h),s)),[]).map((s=>r[s]));return this.transpose?a[t-this.rowHeaderLevelCount]:a[e-this.columnHeaderLevelCount]}return this.transpose&&t-this.rowHeaderLevelCount==0?o?.showOnTop?r:null:this.transpose||e-this.columnHeaderLevelCount!=0?null:o?.showOnTop?r:null}getAggregatorOnBottom(t,e){const i=this.getColumnDefine(t,e),r=i.vtable_aggregator,o=i.aggregation;if(Array.isArray(o)){const a=o.reduce(((s,l,h)=>(l.showOnTop||s.push(h),s)),[]).map((s=>r[s]));return this.transpose?a[t-(this.colCount-this.hasAggregationOnBottomCount)]:a[e-(this.rowCount-this.hasAggregationOnBottomCount)]}return this.transpose&&t-(this.colCount-this.hasAggregationOnBottomCount)==0?o?.showOnTop?null:r:this.transpose||e-(this.rowCount-this.hasAggregationOnBottomCount)!=0||o?.showOnTop?null:r}getAggregatorCellAddress(t,e,i,r){const o=[],a=this.hasAggregationOnTopCount,s=this.hasAggregationOnBottomCount;if(this.transpose){for(let l=e;l<=r;l++)if(this.getColumnDefine(t,l).vtable_aggregator){for(let h=0;h<a;h++)o.push({col:this.headerLevelCount+h,row:l});for(let h=0;h<s;h++)o.push({col:this.rowCount-s+h,row:l})}}else for(let l=t;l<=i;l++)if(this.getColumnDefine(l,e).vtable_aggregator){for(let h=0;h<a;h++)o.push({col:l,row:this.headerLevelCount+h});for(let h=0;h<s;h++)o.push({col:l,row:this.rowCount-s+h})}return o}getCellLocation(t,e){return this.isHeader(t,e)?this.transpose?"rowHeader":"columnHeader":"body"}isRowHeader(t,e){return!!(this.transpose&&t>=this.leftRowSeriesNumberColumnCount&&t<this.headerLevelCount+this.leftRowSeriesNumberColumnCount)}isColumnHeader(t,e){return!this.transpose&&e>=0&&e<=this.headerLevelCount-1&&t>=this.leftRowSeriesNumberColumnCount&&t<this.colCount-this.rightRowSeriesNumberColumnCount}isFrozenColumn(t,e){if(Y(e)){if(t>=0&&t<this.frozenColCount&&e>=this.frozenRowCount&&e<this.rowCount-this.bottomFrozenRowCount)return!0}else if(this.frozenColCount>0&&t>=0&&t<this.frozenColCount)return!0;return!1}isRightFrozenColumn(t,e){if(Y(e)){if(t>=this.colCount-this.rightFrozenColCount&&e>=this.frozenRowCount&&e<this.rowCount-this.bottomFrozenRowCount)return!0}else if(this.rightFrozenColCount>0&&t>=this.colCount-this.rightFrozenColCount)return!0;return!1}isFrozenRow(t,e){if(Y(e)){if(e>=0&&e<this.frozenRowCount&&t>=this.frozenColCount&&t<this.colCount-this.rightFrozenColCount)return!0}else if(e=t,this.frozenRowCount>0&&e>=0&&e<this.frozenRowCount)return!0;return!1}isBottomFrozenRow(t,e){if(Y(e)){if(e>=this.rowCount-this.bottomFrozenRowCount&&t>=this.frozenColCount&&t<this.colCount-this.rightFrozenColCount)return!0}else if(e=t,this.bottomFrozenRowCount>0&&e>=this.rowCount-this.bottomFrozenRowCount)return!0;return!1}isLeftTopCorner(t,e){return t>=0&&t<this.frozenColCount&&e>=0&&e<this.frozenRowCount}isLeftBottomCorner(t,e){return t>=0&&t<this.frozenColCount&&e>=this.rowCount-this.bottomFrozenRowCount}isRightTopCorner(t,e){return t>=this.colCount-this.rightFrozenColCount&&e>=0&&e<this.frozenRowCount}isRightBottomCorner(t,e){return t>=this.colCount-this.rightFrozenColCount&&e>=this.rowCount-this.bottomFrozenRowCount}isCornerHeader(t,e){return!1}getColumnHeaderRange(){var t,e;return this.transpose?{start:{col:0,row:0},end:{col:this._headerCellIds.length-1,row:((t=this.rowCount)!==null&&t!==void 0?t:0)-1}}:{start:{col:0,row:0},end:{col:((e=this.colCount)!==null&&e!==void 0?e:0)-1,row:this._headerCellIds.length-1}}}getRowHeaderRange(){var t,e;return this.transpose?{start:{col:0,row:0},end:{col:this._headerCellIds.length-1,row:((t=this.rowCount)!==null&&t!==void 0?t:0)-1}}:{start:{col:0,row:0},end:{col:((e=this.colCount)!==null&&e!==void 0?e:0)-1,row:this._headerCellIds.length-1}}}getCornerHeaderRange(){}getBodyRange(){var t,e,i,r;return this.transpose?{start:{col:this.headerLevelCount,row:0},end:{col:((t=this.colCount)!==null&&t!==void 0?t:0)-1,row:((e=this.rowCount)!==null&&e!==void 0?e:0)-1}}:{start:{col:0,row:this.headerLevelCount},end:{col:((i=this.colCount)!==null&&i!==void 0?i:0)-1,row:((r=this.rowCount)!==null&&r!==void 0?r:0)-1}}}get headerLevelCount(){return this.showHeader?this._headerCellIds.length:0}get columnHeaderLevelCount(){return this.transpose?0:this.headerLevelCount}get rowHeaderLevelCount(){return this.transpose?this.headerLevelCount:0}get frozenColCount(){return this._table.internalProps.frozenColCount?this.colCount>this._table.internalProps.frozenColCount?this._table.internalProps.frozenColCount:this.colCount:0}get frozenRowCount(){return this._table.internalProps.frozenRowCount?this.rowCount>=this._table.internalProps.frozenRowCount?this._table.internalProps.frozenRowCount:this.rowCount:0}get bottomFrozenRowCount(){return this._table.internalProps.bottomFrozenRowCount?this.rowCount-this.headerLevelCount>=this._table.internalProps.bottomFrozenRowCount?this._table.internalProps.bottomFrozenRowCount:this.rowCount-this.headerLevelCount:0}get rightFrozenColCount(){return this._table.internalProps.rightFrozenColCount?this.colCount-this.frozenColCount>=this._table.internalProps.rightFrozenColCount?this._table.internalProps.rightFrozenColCount:Math.max(0,this.colCount-this.frozenColCount):0}get colCount(){return this.transpose?this.headerLevelCount+this.recordsCount+this.leftRowSeriesNumberColumnCount+this.rightRowSeriesNumberColumnCount:this._columns.length+this.leftRowSeriesNumberColumnCount+this.rightRowSeriesNumberColumnCount}get rowCount(){return this.transpose?this._columns.length:this.headerLevelCount+this.recordsCount}get bodyRowCount(){return this.transpose?this._columns.length:this.rowCount-this.bottomFrozenRowCount-this.headerLevelCount}get bodyColCount(){return this.transpose?this.colCount-this.rightFrozenColCount-this.rowHeaderLevelCount:this._columns.length}get recordsCount(){return this._recordsCount}set recordsCount(t){this._recordsCount=t}get headerObjects(){return this._headerObjects}get columnObjects(){return this._columns}get headerObjectsIncludeHided(){return this._headerObjectsIncludeHided}get columnWidths(){if(this.leftRowSeriesNumberColumnCount){const t=this.leftRowSeriesNumberColumn.map((e=>({width:e.width,minWidth:e.minWidth,maxWidth:e.maxWidth})));return t.push(...this._columns.map((e=>({width:e.width,minWidth:e.minWidth,maxWidth:e.maxWidth})))),t}return this._columns.map((t=>({width:t.width,minWidth:t.minWidth,maxWidth:t.maxWidth})))}getColumnWidthDefined(t){var e;if(t>=0){if(t<this.leftRowSeriesNumberColumnCount)return this.leftRowSeriesNumberColumn[t];if(this.transpose){let i,r,o=0;if(t>=this.rowHeaderLevelCount+this.leftRowSeriesNumberColumnCount){let a;return this.columnObjects.forEach(((s,l)=>{typeof s.width=="number"?o=Math.max(s.width,o):s.width==="auto"&&(a=!0),typeof s.minWidth=="number"&&(r=Math.max(s.minWidth,r)),typeof s.maxWidth=="number"&&(i=Math.max(s.maxWidth,i))})),o=o>0?o:a?"auto":void 0,{width:o,minWidth:r,maxWidth:i}}if(this.isRowHeader(t,0)){const a=Array.isArray(this._table.defaultHeaderColWidth)?(e=this._table.defaultHeaderColWidth[t])!==null&&e!==void 0?e:this._table.defaultColWidth:this._table.defaultHeaderColWidth;return a==="auto"?{width:"auto"}:{width:a}}}return this._columns[t-this.leftRowSeriesNumberColumnCount]}}getCellId(t,e){var i,r,o,a;return this.transpose?t>=this.headerLevelCount+this.leftRowSeriesNumberColumnCount?(i=this._columns[e])===null||i===void 0?void 0:i.id:this.isSeriesNumber(t,e)?e+"_series_number":(r=this._headerCellIds[t-this.leftRowSeriesNumberColumnCount])===null||r===void 0?void 0:r[e]:this.isSeriesNumber(t,e)?this.rowSeriesNumberColumn[t].id:this.headerLevelCount<=e?(o=this._columns[t-this.leftRowSeriesNumberColumnCount])===null||o===void 0?void 0:o.id:(a=this._headerCellIds[e])===null||a===void 0?void 0:a[t-this.leftRowSeriesNumberColumnCount]}getHeader(t,e){if(this.isSeriesNumberInHeader(t,e))return this.getSeriesNumberHeader(t,e);const i=this.getCellId(t,e);return this._headerObjectMap[i]}getHeaderField(t,e){var i,r,o;if(this.isSeriesNumberInHeader(t,e))return(i=this.getSeriesNumberHeader(t,e))===null||i===void 0?void 0:i.field;if(this.isSeriesNumberInBody(t,e))return(r=this.getSeriesNumberBody(t,e))===null||r===void 0?void 0:r.field;const a=this.getCellId(t,e);return((o=this._headerObjectMap[a])===null||o===void 0?void 0:o.field)||(this.transpose?this._columns[e]&&this._columns[e].field:this._columns[t-this.leftRowSeriesNumberColumnCount]&&this._columns[t-this.leftRowSeriesNumberColumnCount].field)}getHeaderCellAdressById(t){for(let e=0;e<this._headerCellIds.length;e++){const i=this._headerCellIds[e];for(let r=0;r<i.length;r++)if(i[r]===t)return this.transpose?{col:e,row:r}:{col:r+this.leftRowSeriesNumberColumnCount,row:e}}}getHeaderCellAddressByField(t){const e=this.headerObjects.find((i=>i&&i.field===t));return e&&this.getHeaderCellAdressById(e.id)}getBody(t,e){return this.isSeriesNumber(t,e)?this.getSeriesNumberBody(t,e):this.transpose?this._columns[e]:this._columns[t-this.leftRowSeriesNumberColumnCount]}getBodyLayoutRangeById(t){var e,i;if(this.transpose){for(let r=0;r<((e=this.rowCount)!==null&&e!==void 0?e:0);r++)if(t===this._columns[r].id)return{start:{col:0,row:r},end:{col:0,row:r}}}else for(let r=this.leftRowSeriesNumberColumnCount;r<((i=this.colCount)!==null&&i!==void 0?i:0);r++)if(t===this._columns[r-this.leftRowSeriesNumberColumnCount].id)return{start:{col:r,row:0},end:{col:r,row:0}};return{start:{col:-1,row:-1},end:{col:-1,row:-1}}}getCellRange(t,e){return eie(t,e,this)}isCellRangeEqual(t,e,i,r){const o=this.getCellRange(t,e),a=this.getCellRange(i,r);return o.start.col===a.start.col&&o.end.col===a.end.col&&o.start.row===a.start.row&&o.end.row===a.end.row}getRecordShowIndexByCell(t,e){const i=this.hasAggregationOnTopCount?this.headerLevelCount+1:this.headerLevelCount;return this.transpose?t<i?-1:t-i:e<i?-1:e-i}getRecordStartRowByRecordIndex(t){return(this.hasAggregationOnTopCount?this.headerLevelCount+1:this.headerLevelCount)+t}_calculateMaxDepth(t,e=0){let i=e;return t.forEach((r=>{if(r.columns&&r.columns.length>0){const o=this._calculateMaxDepth(r.columns,e+1);o>i&&(i=o)}})),i}_addHeaders(t,e,i,r,o){const a=[],s=this._newRow(t,r);return e.forEach((l=>{var h,u,d,c;const f=this._columns.length,g=this.seqId++,p={id:g,title:(h=l.title)!==null&&h!==void 0?h:l.caption,headerIcon:l.headerIcon,field:l.field,style:l.headerStyle,headerType:(u=l.headerType)!==null&&u!==void 0?u:"text",dropDownMenu:l.dropDownMenu,define:l,hierarchyState:l.hierarchyState,columnWidthComputeMode:l.columnWidthComputeMode};a[g]=p;let v=t;if(l.levelSpan){v=Math.min(t+l.levelSpan-1,this._columnMaxDepth-1);for(let y=t;y<=v;y++)this._headerCellIds[y]||(this._headerCellIds[y]=[]),this._headerCellIds[y][f]===void 0&&(this._headerCellIds[y][f]=g)}if(o)for(let y=v-1;y>=0;y--)this._headerCellIds[y]&&this._headerCellIds[y][f]===void 0&&i[v-o]!==void 0&&(this._headerCellIds[y][f]=i[v-o]);else for(let y=v-1;y>=0;y--)this._headerCellIds[y]&&this._headerCellIds[y][f]===void 0&&i[y]!==void 0&&(this._headerCellIds[y][f]=i[y]);r?this._headerCellIds[t-1]&&this._headerCellIds[t-1][f]!==void 0&&(s[f]=this._headerCellIds[t-1][f]):s[f]=g;const m=!l.hierarchyState||l.hierarchyState===Wt.expand;if(l.columns&&m)!(l.columns.every((y=>y.hide))||l.hide)&&this._addHeaders(v+1,l.columns,[...i,g],l.hideColumnsSubHeader||r,l.levelSpan).forEach((y=>a.push(y)));else{const y={id:this.seqId++,field:l.field,fieldFormat:l.fieldFormat,width:l.width,minWidth:l.minWidth,maxWidth:l.maxWidth,icon:l.icon,cellType:(c=(d=l.cellType)!==null&&d!==void 0?d:l.columnType)!==null&&c!==void 0?c:"text",chartModule:"chartModule"in l?l.chartModule:null,chartSpec:"chartSpec"in l?l.chartSpec:null,sparklineSpec:"sparklineSpec"in l?l.sparklineSpec:nqt,style:l.style,define:l,columnWidthComputeMode:l.columnWidthComputeMode,disableColumnResize:l?.disableColumnResize,aggregation:l.aggregation,isChildNode:t>=1};if(this._columnsIncludeHided.push(y),l.hide!==!0){this._columns.push(y);for(let b=t+1;b<this._headerCellIds.length;b++)this._headerCellIds[b][f]=g}}})),a}_newRow(t,e=!1){if(this._headerCellIds[t]){const o=this._headerCellIds[t-1];if(o.length>this._headerCellIds[t].length)for(let a=this._headerCellIds[t].length;a<o.length;a++)this._headerCellIds[t][a]=o[a];return this._headerCellIds[t]}if(e)return[];const i=this._headerCellIds[t]=[];if(!this._columns.length)return i;const r=this._headerCellIds[t-1];for(let o=0;o<r.length;o++)i[o]=r[o];return i}getCellHeaderPaths(t,e){if(this.isSeriesNumber(t,e))return;let i=[],r=[];return this.transpose?r=[{field:this._columns[e].field}]:i=[{field:this._columns[t-this.leftRowSeriesNumberColumnCount].field}],{colHeaderPaths:i,rowHeaderPaths:r,cellLocation:this.getCellLocation(t,e)}}getParentCellId(t,e){if(e!==0){if(this.isColumnHeader(t,e))return this.getCellId(t,e-1);if(this.isRowHeader(t,e))return this.isSeriesNumberInBody(t-1,e)?void 0:this.getCellId(t-1,e)}}canMoveHeaderPosition(t,e){if(this.isSeriesNumberInHeader(e.col,e.row)||this.isSeriesNumberInHeader(t.col,t.row))return!1;if(!this.transpose&&this.isSeriesNumberInBody(e.col,e.row)&&this.isSeriesNumberInBody(t.col,t.row)){const r=this.getRecordShowIndexByCell(0,t.row),o=this.getRecordShowIndexByCell(0,e.row);return this._table.dataSource.canChangeOrder(r,o)}if(this.transpose&&this.isSeriesNumberInBody(e.col,e.row)&&this.isSeriesNumberInBody(t.col,t.row)&&(this.getBody(t.col+this.leftRowSeriesNumberColumnCount,t.row).isChildNode&&this.getBody(e.col+this.leftRowSeriesNumberColumnCount,e.row).isChildNode?(t.col=t.col+this.leftRowSeriesNumberColumnCount+this.rowHeaderLevelCount-1,e.col=e.col+this.leftRowSeriesNumberColumnCount+this.rowHeaderLevelCount-1):(t.col=t.col+this.leftRowSeriesNumberColumnCount,e.col=e.col+this.leftRowSeriesNumberColumnCount)),t.col<0||t.row<0||e.col<0||e.row<0||this._table.internalProps.frozenColDragHeaderMode==="disabled"&&this._table.isFrozenColumn(e.col))return!1;const i=this.getCellRange(t.col,t.row);return this.isColumnHeader(t.col,t.row)?this.getParentCellId(t.col,i.start.row)===this.getParentCellId(e.col,i.start.row):this.isRowHeader(t.col,t.row)?this.getParentCellId(i.start.col,t.row)===this.getParentCellId(i.start.col,e.row):!1}moveHeaderPosition(t,e){var i,r;if((!(!((i=this._table.options.dragOrder)===null||i===void 0)&&i.validateDragOrderOnEnd)||!((r=this._table.options.dragOrder)===null||r===void 0)&&r.validateDragOrderOnEnd(t,e))&&this.canMoveHeaderPosition(t,e)){let o=this.getCellRange(t.col,t.row);if(this.isColumnHeader(t.col,t.row)){const a=o.end.col-o.start.col+1;let s;const l=this.getCellRange(e.col,o.start.row);if(s=e.col>=t.col?l.end.col-a+1:l.start.col,s===o.start.col)return null;for(let u=0;u<this._headerCellIds.length;u++){const d=this._headerCellIds[u].splice(o.start.col-this.leftRowSeriesNumberColumnCount,a);d.unshift(s-this.leftRowSeriesNumberColumnCount,0),Array.prototype.splice.apply(this._headerCellIds[u],d)}const h=this._columns.splice(o.start.col-this.leftRowSeriesNumberColumnCount,a);return h.unshift(s-this.leftRowSeriesNumberColumnCount,0),Array.prototype.splice.apply(this._columns,h),this.columnTree.movePosition(o.start.row,o.start.col-this.leftRowSeriesNumberColumnCount,s-this.leftRowSeriesNumberColumnCount),this.columnTree.reset(this.columnTree.tree.children),this._cellRangeMap=new Map,{sourceIndex:o.start.col,targetIndex:s,sourceSize:a,targetSize:l.end.col-l.start.col+1,moveType:"column"}}if(this.isRowHeader(t.col,t.row)||this.isSeriesNumberInBody(t.col,t.row)&&this.transpose){this.isSeriesNumberInBody(t.col,t.row)&&(o=this.getCellRange(t.col+this.leftRowSeriesNumberColumnCount,t.row));const a=o.end.row-o.start.row+1;let s;const l=this.getCellRange(o.start.col,e.row);if(s=e.row>=t.row?l.end.row-a+1:l.start.row,s===o.start.row)return null;for(let u=0;u<this._headerCellIds.length;u++){const d=this._headerCellIds[u].splice(o.start.row,a);d.unshift(s,0),Array.prototype.splice.apply(this._headerCellIds[u],d)}const h=this._columns.splice(o.start.row,a);return h.unshift(s,0),Array.prototype.splice.apply(this._columns,h),this.columnTree.movePosition(o.start.col-this.leftRowSeriesNumberColumnCount,o.start.row,s+(e.row>t.row?o.end.row-o.start.row:0)),this.columnTree.reset(this.columnTree.tree.children),this._cellRangeMap=new Map,{sourceIndex:o.start.row,targetIndex:s,sourceSize:a,targetSize:l.end.row-l.start.row+1,moveType:"row"}}if(this.isSeriesNumberInBody(t.col,t.row))return{sourceIndex:t.row,targetIndex:e.row,sourceSize:1,targetSize:1,moveType:"row"}}return null}toggleHierarchyState(t){return{addCellPositions:t.add.map((e=>({col:0,row:this._table.columnHeaderLevelCount+e}))),removeCellPositions:t.remove.map((e=>({col:0,row:this._table.columnHeaderLevelCount+e})))}}setChartInstance(t,e,i){const r=this.transpose?this._columns[e]:this._columns[t-this.leftRowSeriesNumberColumnCount];typeof r.chartSpec!="function"&&(r.chartInstance=i)}getChartInstance(t,e){return(this.transpose?this._columns[e]:this._columns[t-this.leftRowSeriesNumberColumnCount]).chartInstance}checkHasChart(){return tie(this)}getAxisConfigInPivotChart(t,e){}isEmpty(t,e){return!1}isAxisCell(t,e){return!1}getChartAxes(t,e){return[]}isShareChartSpec(t,e){const i=this.getBody(t,e);return typeof i?.chartSpec!="function"}isNoChartDataRenderNothing(t,e){const i=this.getBody(t,e);return(i?.define).noDataRenderNothing}getChartSpec(t,e){return this.getRawChartSpec(t,e)}getRawChartSpec(t,e){const i=this.getBody(t,e),r=i?.chartSpec;return typeof r=="function"?r({col:t,row:e,dataValue:this._table.getCellOriginValue(t,e)||"",value:this._table.getCellValue(t,e)||"",rect:this._table.getCellRangeRelativeRect(this._table.getCellRange(t,e)),table:this._table}):r}getChartDataId(t,e){return Qee(t,e,this)}release(){const t=this._table._getActiveChartInstance();t?.release(),this.columnObjects.forEach((e=>{var i;(i=e.chartInstance)===null||i===void 0||i.release()}))}clearCellRangeMap(){this._cellRangeMap.clear()}updateColumnTitle(t,e,i){const r=this._table.internalProps.layoutMap.getHeader(t,e);r.title=i,r.define.title=i}getColumnByField(t){var e;return(e=this.columnObjects)===null||e===void 0?void 0:e.reduce(((i,r,o)=>(r.field===t&&i.push({col:o,columnDefine:r}),i)),[])}getColumnByKey(t){var e;let i;return{columnDefine:(e=this.columnObjects)===null||e===void 0?void 0:e.find(((r,o)=>{var a;return((a=r.define)===null||a===void 0?void 0:a.key)===t&&(i=o+this.leftRowSeriesNumberColumnCount,!0)})),col:i}}getColumnDefine(t,e){if(t>=0)return t<this.leftRowSeriesNumberColumnCount?this.leftRowSeriesNumberColumn[t].define:this.transpose?this._columns[e].define:this._columns[t-this.leftRowSeriesNumberColumnCount].define}}class oie{constructor(t){this.isValidatingValue=!1,this.listenersId=[],this.table=t,this.bindEvent()}bindEvent(){const t=this.table,e=t.on(at.DBLCLICK_CELL,(r=>{var o,a,s;const{editCellTrigger:l="doubleclick"}=t.options;if(!l.includes("doubleclick"))return;const{col:h,row:u}=r,d=bn(r.federatedEvent),c=t.scenegraph.getResizeColAt(d.abstractPos.x,d.abstractPos.y,(o=d.eventArgs)===null||o===void 0?void 0:o.targetCell);t._canResizeColumn(c.col,c.row)&&c.col>=0||!((s=(a=r.target)===null||a===void 0?void 0:a.attribute)===null||s===void 0)&&s.funcType||(this.beginTriggerEditCellMode="doubleclick",this.startEditCell(h,u))})),i=t.on(at.CLICK_CELL,(r=>{var o,a;const{editCellTrigger:s="doubleclick"}=t.options;if(s==="click"||Array.isArray(s)&&s.includes("click")){if(!((a=(o=r.target)===null||o===void 0?void 0:o.attribute)===null||a===void 0)&&a.funcType)return;this.beginTriggerEditCellMode="click";const{col:l,row:h}=r;this.startEditCell(l,h)}}));this.listenersId.push(e,i)}startEditCell(t,e,i){var r,o,a,s,l,h,u,d,c;if(this.editingEditor)return;const f=this.table.getEditor(t,e);if(f){if(!((o=(r=this.table.internalProps.layoutMap)===null||r===void 0?void 0:r.isAggregation)===null||o===void 0)&&o.call(r,t,e)){const y=(s=(a=this.table).isPivotTable)===null||s===void 0?void 0:s.call(a),b=!!y&&((h=(l=this.table.internalProps)===null||l===void 0?void 0:l.dataConfig)===null||h===void 0?void 0:h.updateAggregationOnEditCell);if(!y||y&&b)return}const g=this.table.getCellRawRecord(t,e);if(g?.vtableMerge)return;this.editingEditor||(this.editCell={col:t,row:e}),this.table._makeVisibleCell(t,e),this.editingEditor=f;const p=Y(i)?i:this.table.getCellOriginValue(t,e),v=this.table.getCellRangeRelativeRect(this.table.getCellRange(t,e)),m={rect:{left:v.left,top:v.top,width:v.width,height:v.height}};t===this.table.colCount-1?m.rect.width=v.width-1:m.rect.width=v.width+1,e===this.table.rowCount-1?m.rect.height=v.height-1:m.rect.height=v.height+1,f.beginEditing,(u=f.beginEditing)===null||u===void 0||u.call(f,this.table.getElement(),m,p),f.bindSuccessCallback,(d=f.bindSuccessCallback)===null||d===void 0||d.call(f,(()=>{this.completeEdit()})),(c=f.onStart)===null||c===void 0||c.call(f,{value:p,endEdit:()=>{this.completeEdit()},referencePosition:m,container:this.table.getElement(),col:t,row:e,table:this.table})}}completeEdit(t){var e,i;if(!this.editingEditor)return!0;if(this.isValidatingValue)return!1;const r=t?.target,{editingEditor:o}=this;if(r){if(o.targetIsOnEditor){if(o.targetIsOnEditor(r))return!1}else if(!o.isEditorElement||o.isEditorElement(r))return!1}if(this.editingEditor.getValue,this.editingEditor.validateValue){this.isValidatingValue=!0;const a=this.editingEditor.getValue(),s=this.table.getCellOriginValue(this.editCell.col,this.editCell.row),l=t?.target,h=(i=(e=this.editingEditor).validateValue)===null||i===void 0?void 0:i.call(e,a,s,this.editCell,this.table,!!this.table.getElement().contains(l));return Hs(h)?(this.isValidatingValue=!0,new Promise(((u,d)=>{h.then((c=>{Cq(c,this,s,u)})).catch((c=>{this.isValidatingValue=!1,d(c)}))}))):Cq(h,this,s)}return this.doExit(),!0}doExit(){var t,e,i,r,o,a,s,l;const h=(e=(t=this.editingEditor).getValue)===null||e===void 0?void 0:e.call(t),u=this.table.getCellRange(this.editCell.col,this.editCell.row),d=[];for(let c=u.start.row;c<=u.end.row;c++){const f=[];for(let g=u.start.col;g<=u.end.col;g++)f.push(h);d.push(f)}(r=(i=this.editingEditor).beforeEnd)===null||r===void 0||r.call(i),this.table.changeCellValues(u.start.col,u.start.row,d),this.editingEditor.exit,(a=(o=this.editingEditor).exit)===null||a===void 0||a.call(o),(l=(s=this.editingEditor).onEnd)===null||l===void 0||l.call(s),this.editingEditor=null,this.isValidatingValue=!1,this.beginTriggerEditCellMode=null}cancelEdit(){var t,e,i,r;this.editingEditor&&((e=(t=this.editingEditor).exit)===null||e===void 0||e.call(t),(r=(i=this.editingEditor).onEnd)===null||r===void 0||r.call(i),this.editingEditor=null)}release(){this.listenersId.forEach((t=>{this.table.off(t)}))}}function Cq(n,t,e,i){return t.isValidatingValue=!1,n==="validate-exit"?(t.doExit(),i?.(!0),!0):n==="invalidate-exit"?(t.editingEditor.setValue(e),t.doExit(),i?.(!0),!0):n==="validate-not-exit"||n==="invalidate-not-exit"?(i?.(!1),!1):n===!0?(t.doExit(),i?.(!0),!0):(i?.(!1),!1)}function wq(n,t){return Li(n)?{groupByRules:[n],addRecordRule:t}:Rt(n)?{groupByRules:n.map((e=>Li(e)?e:e.key)),addRecordRule:t}:{addRecordRule:t}}var aie=function(n,t,e,i){return new(e||(e=Promise))((function(r,o){function a(h){try{l(i.next(h))}catch(u){o(u)}}function s(h){try{l(i.throw(h))}catch(u){o(u)}}function l(h){var u;h.done?r(h.value):(u=h.value,u instanceof e?u:new e((function(d){d(u)}))).then(a,s)}l((i=i.apply(n,t||[])).next())}))};function sie(n,t,e,i,r,o){if(i&&o.isHasEditorDefine(n,t)||i===!1){const a=o.getRecordShowIndexByCell(n,t),{field:s}=o.internalProps.layoutMap.getBody(n,t),l=o.getCellRawValue(n,t),h=o.getCellOriginValue(n,t);o.isHeader(n,t)?o.internalProps.layoutMap.updateColumnTitle(n,t,e):o.dataSource.changeFieldValue(e,a,s,n,t,o);const u=o.getCellRange(n,t),d=o.internalProps.layoutMap.getAggregatorsByCell(n,t);if(d){if(Array.isArray(d))for(let g=0;g<d?.length;g++)d[g].recalculate();else d.recalculate();const f=o.internalProps.layoutMap.getAggregatorCellAddress(u.start.col,u.start.row,u.end.col,u.end.row);for(let g=0;g<f.length;g++){const p=o.getCellRange(f[g].col,f[g].row);for(let v=p.start.col;v<=p.end.col;v++)for(let m=p.start.row;m<=p.end.row;m++)o.scenegraph.updateCellContent(v,m)}}for(let f=u.start.col;f<=u.end.col;f++)for(let g=u.start.row;g<=u.end.row;g++)o.scenegraph.updateCellContent(f,g);if(o.widthMode==="adaptive"||o.autoFillWidth&&o.getAllColsWidth()<=o.tableNoFrameWidth)o.internalProps._widthResizedColMap.size===0&&o.scenegraph.recalculateColWidths();else if(!o.internalProps._widthResizedColMap.has(n)){const f=o.getColWidth(n),g=Ip(n,0,o.rowCount-1,o,!1);g!==f&&o.scenegraph.updateColWidth(n,g-f)}if(o.heightMode==="adaptive"||o.autoFillHeight&&o.getAllRowsHeight()<=o.tableNoFrameHeight)o.internalProps._heightResizedRowMap.size===0&&o.scenegraph.recalculateRowHeights();else if(o.isAutoRowHeight(t)&&!o.internalProps._heightResizedRowMap.has(t)){const f=o.getRowHeight(t),g=Ra(t,0,o.colCount-1,o);o.scenegraph.updateRowHeight(t,g-f)}const c=o.getCellOriginValue(n,t);h!==c&&r&&o.fireListeners(at.CHANGE_CELL_VALUE,{col:n,row:t,rawValue:l,currentValue:h,changedValue:c}),o.scenegraph.updateNextFrame()}}function lie(n,t,e,i,r,o){var a,s;return aie(this,void 0,void 0,(function*(){const l=[];let h=n,u=t;const d=[],c=[];let f;for(let m=0;m<e.length&&!(t+m>o.rowCount-1);m++){const y=e[m],b=[],_=[];d.push(b),c.push(_);for(let w=0;w<y.length&&!(n+w>o.colCount-1);w++){f=hie(n+w,t+m,o,f);const C=o.getCellRawValue(n+w,t+m);b.push(C);const x=o.getCellOriginValue(n+w,t+m);_.push(x)}}for(let m=0;m<e.length&&!(t+m>o.rowCount-1);m++){l[m]=[],u=t+m;const y=e[m];let b=n;for(let _=0;_<y.length&&!(n+_>o.colCount-1);_++){b=n+_;let w=!1;if(i===!1)w=!0;else if(o.isHasEditorDefine(n+_,t+m)){const C=o.getEditor(n+_,t+m),x=c[m][_],S=y[_],A=(s=(a=C?.validateValue)===null||a===void 0?void 0:a.call(C,S,x,{col:n+_,row:t+m},o))===null||s===void 0||s;if(Hs(A)){const T=yield A;w=T===!0||T==="validate-exit"||T==="validate-not-exit"}else w=A===!0||A==="validate-exit"||A==="validate-not-exit"}if(w){l[m][_]=!0;const C=y[_],x=o.getRecordShowIndexByCell(n+_,t+m),{field:S}=o.internalProps.layoutMap.getBody(n+_,t+m),A=d[m][_],T=c[m][_];o.isHeader(n+_,t+m)?o.internalProps.layoutMap.updateColumnTitle(n+_,t+m,C):o.dataSource.changeFieldValue(C,x,S,n+_,t+m,o);const M=o.getCellOriginValue(n+_,t+m);T!==M&&r&&o.fireListeners(at.CHANGE_CELL_VALUE,{col:n+_,row:t+m,rawValue:A,currentValue:T,changedValue:M})}else l[m][_]=!1}h=Math.max(h,b)}const g=o.getCellRange(n,t),p=o.getCellRange(h,u),v=o.internalProps.layoutMap.getAggregatorsByCellRange(g.start.col,g.start.row,p.end.col,p.end.row);if(v){for(let m=0;m<v?.length;m++)v[m].recalculate();if(f==="normal"){const m=o.internalProps.layoutMap.getAggregatorCellAddress(g.start.col,g.start.row,p.end.col,p.end.row);for(let y=0;y<m.length;y++){const b=o.getCellRange(m[y].col,m[y].row);for(let _=b.start.col;_<=b.end.col;_++)for(let w=b.start.row;w<=b.end.row;w++)o.scenegraph.updateCellContent(_,w)}}}if(f==="group"&&o.dataSource.updateRecordsForGroup([],[]),f==="sort"||f==="group")return o.dataSource.sortedIndexMap.clear(),Mo(o),o.refreshRowColCount(),o.internalProps.layoutMap.clearCellRangeMap(),o.scenegraph.clearCells(),o.scenegraph.createSceneGraph(),l;for(let m=g.start.col;m<=p.end.col;m++)for(let y=g.start.row;y<=p.end.row;y++)o.scenegraph.updateCellContent(m,y);if(o.widthMode==="adaptive"||o.autoFillWidth&&o.getAllColsWidth()<=o.tableNoFrameWidth)o.internalProps._widthResizedColMap.size===0&&o.scenegraph.recalculateColWidths();else for(let m=n;m<=p.end.col;m++)if(!o.internalProps._widthResizedColMap.has(m)){const y=o.getColWidth(m),b=Ip(m,0,o.rowCount-1,o,!1);b!==y&&o.scenegraph.updateColWidth(m,b-y)}if(o.heightMode==="adaptive"||o.autoFillHeight&&o.getAllRowsHeight()<=o.tableNoFrameHeight)o.scenegraph.recalculateRowHeights();else if(o.isAutoRowHeight(t)){const m=[],y=[];for(let b=t;b<=p.end.row;b++)if(o.rowHeightsMap.get(b)){const _=o.getRowHeight(b),w=Ra(b,0,o.colCount-1,o);m.push(b),y.push(w-_)}o.scenegraph.updateRowsHeight(m,y)}return o.scenegraph.updateNextFrame(),l}))}function hie(n,t,e,i){if(i==="group"||i==="sort"&&!e.internalProps.groupBy)return i;let r="normal";return e.internalProps.groupBy?r="group":!e.isHeader(n,t)&&e.dataSource.lastOrderField&&e.getBodyField(n,t)===e.dataSource.lastOrderField&&(r="sort"),r}function Mo(n){let t=n.sortState;t=!t||Array.isArray(t)?t:[t],t&&(t=t.map((e=>{var i;return e.orderFn=(i=n._getSortFuncFromHeaderOption(void 0,e.field))!==null&&i!==void 0?i:PA,e})),n.dataSource.sort(t))}function uie(n,t,e){var i,r,o,a;if(e.internalProps.groupBy)(r=(i=e.dataSource).addRecordsForGroup)===null||r===void 0||r.call(i,[n],t),e.refreshRowColCount(),e.internalProps.layoutMap.clearCellRangeMap(),e.sortState&&Mo(e),e.scenegraph.clearCells(),e.scenegraph.createSceneGraph();else if(e.dataSource.rowHierarchyType==="tree")(a=(o=e.dataSource).addRecordsForTree)===null||a===void 0||a.call(o,[n],t),xT(e,t,1),e.refreshRowColCount(),e.internalProps.layoutMap.clearCellRangeMap(),e.sortState&&Mo(e),e.scenegraph.clearCells(),e.scenegraph.createSceneGraph();else if(e.sortState)e.dataSource.addRecordForSorted(n),e.stateManager.checkedState.clear(),Mo(e),e.refreshRowColCount(),e.scenegraph.clearCells(),e.scenegraph.createSceneGraph();else{(t===void 0||t>e.dataSource.sourceLength)&&(t=e.dataSource.sourceLength);const s=e.transpose?e.rowHeaderLevelCount:e.columnHeaderLevelCount;e.dataSource.addRecord(n,t),xT(e,t,1);const l=e.rowCount;if(e.refreshRowColCount(),e.scenegraph.proxy.totalActualBodyRowCount===0)return e.scenegraph.clearCells(),void e.scenegraph.createSceneGraph();const h=e.transpose?e.colCount:e.rowCount;if(e.pagination){const{perPageCount:u,currentPage:d}=e.pagination,c=u*(d||0)+u;if(t<c)if(t<c-u)e.scenegraph.clearCells(),e.scenegraph.createSceneGraph();else{const f=t-(c-u)+s;if(l-s===e.pagination.perPageCount){const g=[];for(let p=f;p<h;p++)e.transpose?g.push({col:p,row:0}):g.push({col:0,row:p});e.transpose?e.scenegraph.updateCol([],[],g):e.scenegraph.updateRow([],[],g)}else{const g=[];for(let p=f;p<Math.min(h,f+1);p++)e.transpose?g.push({col:p,row:0}):g.push({col:0,row:p});e.transpose?e.scenegraph.updateCol([],g,[]):e.scenegraph.updateRow([],g,[])}}}else{const u=[];for(let g=t+s;g<t+s+1;g++)e.transpose?u.push({col:g,row:0}):u.push({col:0,row:g});const d=[],c=e.internalProps.layoutMap.hasAggregationOnTopCount,f=e.internalProps.layoutMap.hasAggregationOnBottomCount;for(let g=s;g<s+c;g++)e.transpose?d.push({col:g,row:0}):d.push({col:0,row:g});for(let g=(e.transpose?e.colCount:e.rowCount)-f;g<(e.transpose?e.colCount:e.rowCount);g++)e.transpose?d.push({col:g,row:0}):d.push({col:0,row:g});e.transpose?e.scenegraph.updateCol([],u,[]):e.scenegraph.updateRow([],u,[])}}}function die(n,t,e){var i,r,o,a;if(e.internalProps.groupBy)(r=(i=e.dataSource).addRecordsForGroup)===null||r===void 0||r.call(i,n,t),e.refreshRowColCount(),e.internalProps.layoutMap.clearCellRangeMap(),e.sortState&&Mo(e),e.scenegraph.clearCells(),e.scenegraph.createSceneGraph();else if(e.dataSource.rowHierarchyType==="tree")(a=(o=e.dataSource).addRecordsForTree)===null||a===void 0||a.call(o,n,t),xT(e,t,n.length),e.refreshRowColCount(),e.internalProps.layoutMap.clearCellRangeMap(),e.sortState&&Mo(e),e.scenegraph.clearCells(),e.scenegraph.createSceneGraph();else if(e.sortState)e.dataSource.addRecordsForSorted(n),Mo(e),e.refreshRowColCount(),e.scenegraph.clearCells(),e.scenegraph.createSceneGraph();else{t===void 0||t>e.dataSource.sourceLength?t=e.dataSource.sourceLength:t<0&&(t=0);const s=e.transpose?e.rowHeaderLevelCount:e.columnHeaderLevelCount;e.dataSource.addRecords(n,t),xT(e,t,n.length);const l=e.transpose?e.colCount:e.rowCount;if(e.refreshRowColCount(),e.scenegraph.proxy.totalActualBodyRowCount===0)return e.scenegraph.clearCells(),void e.scenegraph.createSceneGraph();const h=e.transpose?e.colCount:e.rowCount;if(e.pagination){const{perPageCount:u,currentPage:d}=e.pagination,c=u*(d||0)+u;if(t<c)if(t<c-u)e.scenegraph.clearCells(),e.scenegraph.createSceneGraph();else{const f=t-(c-u)+s;if(l-s===e.pagination.perPageCount){const g=[];for(let p=f;p<h;p++)e.transpose?g.push({col:p,row:0}):g.push({col:0,row:p});e.transpose?e.scenegraph.updateCol([],[],g):e.scenegraph.updateRow([],[],g)}else{const g=[];for(let p=f;p<Math.min(h,f+(Array.isArray(n)?n.length:1));p++)e.transpose?g.push({col:p,row:0}):g.push({col:0,row:p});e.transpose?e.scenegraph.updateCol([],g,[]):e.scenegraph.updateRow([],g,[])}}}else{const u=[];for(let g=t+s;g<t+s+(Array.isArray(n)?n.length:1);g++)e.transpose?u.push({col:g,row:0}):u.push({col:0,row:g});const d=e.internalProps.layoutMap.hasAggregationOnTopCount,c=e.internalProps.layoutMap.hasAggregationOnBottomCount,f=[];for(let g=s;g<s+d;g++)e.transpose?f.push({col:g,row:0}):f.push({col:0,row:g});for(let g=(e.transpose?e.colCount:e.rowCount)-c;g<(e.transpose?e.colCount:e.rowCount);g++)e.transpose?f.push({col:g,row:0}):f.push({col:0,row:g});e.transpose?e.scenegraph.updateCol([],u,f):e.scenegraph.updateRow([],u,f)}}}function cie(n,t){var e,i,r,o,a,s,l,h;if(n?.length>0)if(t.internalProps.groupBy)(i=(e=t.dataSource).deleteRecordsForGroup)===null||i===void 0||i.call(e,n),t.refreshRowColCount(),t.internalProps.layoutMap.clearCellRangeMap(),t.sortState&&Mo(t),t.scenegraph.clearCells(),t.scenegraph.createSceneGraph();else if(t.dataSource.rowHierarchyType==="tree"){const u=(o=(r=t.dataSource).deleteRecordsForTree)===null||o===void 0?void 0:o.call(r,n);if(u.length===0)return;for(let d=0;d<u.length;d++)gie(t,u[d],1);t.refreshRowColCount(),t.internalProps.layoutMap.clearCellRangeMap(),t.sortState&&Mo(t),t.scenegraph.clearCells(),t.scenegraph.createSceneGraph()}else if(t.sortState)t.dataSource.deleteRecordsForSorted(n),Mo(t),t.refreshRowColCount(),t.scenegraph.clearCells(),t.scenegraph.createSceneGraph();else{const u=t.dataSource.deleteRecords(n);if(u.length===0)return;const d=t.transpose?t.colCount:t.rowCount;t.refreshRowColCount();const c=t.transpose?t.colCount:t.rowCount,f=u.sort(((p,v)=>p-v)),g=f[0];if(t.pagination){const{perPageCount:p,currentPage:v}=t.pagination,m=p*(v||0)+p;if(g<m)if(g<m-p)t.scenegraph.clearCells(),t.scenegraph.createSceneGraph();else{const y=t.transpose?t.rowHeaderLevelCount:t.columnHeaderLevelCount,b=t.internalProps.layoutMap.hasAggregationOnTopCount,_=[],w=[];for(let C=g-(m-p)+(t.transpose?t.rowHeaderLevelCount:t.columnHeaderLevelCount)+b;C<c;C++)t.transpose?_.push({col:C,row:0}):_.push({col:0,row:C});for(let C=y;C<y+b;C++)t.transpose?_.push({col:C,row:0}):_.push({col:0,row:C});if(c<d)for(let C=c;C<d;C++)t.transpose?w.push({col:C,row:0}):w.push({col:0,row:C});(a=t.reactCustomLayout)===null||a===void 0||a.clearCache(),t.transpose?t.scenegraph.updateCol(w,[],_):t.scenegraph.updateRow(w,[],_),(s=t.reactCustomLayout)===null||s===void 0||s.updateAllCustomCell()}}else{const p=[],v=t.transpose?t.rowHeaderLevelCount:t.columnHeaderLevelCount,m=t.internalProps.layoutMap.hasAggregationOnTopCount,y=t.internalProps.layoutMap.hasAggregationOnBottomCount;for(let _=0;_<f.length;_++){const w=f[_]+v+m;t.transpose?p.push({col:w,row:0}):p.push({col:0,row:w})}const b=[];for(let _=v;_<v+m;_++)t.transpose?b.push({col:_,row:0}):b.push({col:0,row:_});for(let _=(t.transpose?t.colCount:t.rowCount)-y;_<(t.transpose?t.colCount:t.rowCount);_++)t.transpose?b.push({col:_,row:0}):b.push({col:0,row:_});(l=t.reactCustomLayout)===null||l===void 0||l.clearCache(),t.transpose?t.scenegraph.updateCol(p,[],b):t.scenegraph.updateRow(p,[],b),(h=t.reactCustomLayout)===null||h===void 0||h.updateAllCustomCell()}}}function fie(n,t,e){var i,r,o,a;if(t?.length>0)if(e.internalProps.groupBy)(r=(i=e.dataSource).updateRecordsForGroup)===null||r===void 0||r.call(i,n,t),e.refreshRowColCount(),e.internalProps.layoutMap.clearCellRangeMap(),e.sortState&&Mo(e),e.scenegraph.clearCells(),e.scenegraph.createSceneGraph();else if(e.dataSource.rowHierarchyType==="tree")(a=(o=e.dataSource).updateRecordsForTree)===null||a===void 0||a.call(o,n,t),e.refreshRowColCount(),e.internalProps.layoutMap.clearCellRangeMap(),e.sortState&&Mo(e),e.scenegraph.clearCells(),e.scenegraph.createSceneGraph();else if(e.sortState)e.dataSource.updateRecordsForSorted(n,t),Mo(e),e.refreshRowColCount(),e.scenegraph.clearCells(),e.scenegraph.createSceneGraph();else{const s=e.dataSource.updateRecords(n,t);if(s.length===0)return;const l=s.map((h=>e.getBodyRowIndexByRecordIndex(h))).sort(((h,u)=>h-u));if(e.pagination){const{perPageCount:h,currentPage:u}=e.pagination,d=e.transpose?e.rowHeaderLevelCount:e.columnHeaderLevelCount,c=e.internalProps.layoutMap.hasAggregationOnTopCount,f=h*(u||0)+h,g=[];for(let p=0;p<l.length;p++){const v=l[p];if(v<f&&v>=f-h){const m=v-(f-h)+(e.transpose?e.rowHeaderLevelCount:e.columnHeaderLevelCount)+c;g.push(m)}}if(g.length>=1){const p=[];for(let v=0;v<g.length;v++){const m=g[v];e.transpose?p.push({col:m,row:0}):p.push({col:0,row:m})}for(let v=d;v<d+c;v++)e.transpose?p.push({col:v,row:0}):p.push({col:0,row:v});e.transpose?e.scenegraph.updateCol([],[],p):e.scenegraph.updateRow([],[],p)}}else{const h=[],u=e.transpose?e.rowHeaderLevelCount:e.columnHeaderLevelCount,d=e.internalProps.layoutMap.hasAggregationOnTopCount,c=e.internalProps.layoutMap.hasAggregationOnBottomCount;for(let f=0;f<l.length;f++){const g=l[f]+u+d;e.transpose?h.push({col:g,row:0}):h.push({col:0,row:g})}for(let f=u;f<u+d;f++)e.transpose?h.push({col:f,row:0}):h.push({col:0,row:f});for(let f=(e.transpose?e.colCount:e.rowCount)-c;f<(e.transpose?e.colCount:e.rowCount);f++)e.transpose?h.push({col:f,row:0}):h.push({col:0,row:f});e.transpose?e.scenegraph.updateCol([],[],h):e.scenegraph.updateRow([],[],h)}}}function gie(n,t,e){const{checkedState:i}=n.stateManager;if(i)if(n.dataSource.rowHierarchyType==="tree"){let r;r=yt(t)?[t]:t;const o=r.length,a=[];i.forEach(((s,l)=>{var h;const u=l.split(",");if(u.length>=r.length)for(let d=0;d<u.length;d++){const c=(h=r[d])!==null&&h!==void 0?h:-1,f=Number(u[d]);if(!(c===f&&d<u.length-1)){if(c===f&&d===u.length-1||c===-1){a.push({originKey:l,value:s});break}if(c<f&&d===o-1){u[d]=(f-e).toString(),a.push({originKey:l,targetKey:u.toString(),value:s});break}break}}})),a.sort(((s,l)=>{const h=s.originKey.split(","),u=l.originKey.split(","),d=h.length,c=u.length,f=Math.min(d,c);for(let g=0;g<f;g++){const p=Number(h[g]),v=Number(u[g]);if(p!==v)return p-v}return d-c})),a.forEach((({originKey:s,targetKey:l,value:h})=>{i.delete(s),l&&i.set(l,h)}))}else for(let r=i.size-1;r>=t;r--){const o=i.get(r.toString());i.delete(r.toString()),i.set((r-e).toString(),o)}}function xT(n,t,e){const{checkedState:i}=n.stateManager;if(i)if(n.dataSource.rowHierarchyType==="tree"){let r;r=yt(t)?[t]:t;const o=r.length,a=[];i.forEach(((s,l)=>{var h;const u=l.split(",");if(u.length>=r.length)for(let d=0;d<u.length;d++){const c=(h=r[d])!==null&&h!==void 0?h:-1,f=Number(u[d]);if(c===f&&(d===u.length-1||d===o-1)){u[d]=(f+e).toString(),a.push({originKey:l,targetKey:u.toString(),value:s});break}if(!(c===f&&d<u.length-1)){if(c<f&&d===o-1){u[d]=(f+e).toString(),a.push({originKey:l,targetKey:u.toString(),value:s});break}break}}})),a.sort(((s,l)=>{const h=s.originKey.split(","),u=l.originKey.split(","),d=h.length,c=u.length,f=Math.min(d,c);for(let g=0;g<f;g++){const p=Number(h[g]),v=Number(u[g]);if(p!==v)return-p+v}return-d+c})),a.forEach((({originKey:s,targetKey:l,value:h})=>{i.delete(s),l&&i.set(l,h)}))}else for(let r=i.size-1;r>=t;r--){const o=i.get(r.toString());i.delete(r.toString()),i.set((r+e).toString(),o)}}function pie(n,t,e,i){const r=[{col:t,row:e}],o=[],a=[],{addCellPositions:s,removeCellPositions:l}=n,h=i.scenegraph.proxy,{rowStart:u,rowLimit:d}=h;let{rowEnd:c}=h,f=1/0;for(let v=0;v<s.length;v++){const{row:m}=s[v];c-u+1===d?m>=u&&m<=c&&(f=Math.min(f,m)):(o.push({col:t,row:m}),c++)}const g=Math.min(u+d,i.rowCount-1-i.bottomFrozenRowCount),p=g<u+d;for(let v=0;v<l.length;v++){const{row:m}=l[l.length-v-1];m<u||m>c||(m>g||p?(a.push({col:t,row:m}),f--):f=Math.min(f,m))}if(f!==1/0)for(let v=f;v<=c;v++)r.push({col:t,row:v});return i.scenegraph.proxy.refreshRowCount(),{updateCells:r,addCells:o,removeCells:a}}class vie extends mee{constructor(t,e){var i,r,o,a,s,l,h,u;super(t,e),this.showHeader=!0,e=this.options;const d=this.internalProps;if(d.frozenColDragHeaderMode=(r=(i=e.dragOrder)===null||i===void 0?void 0:i.frozenColDragHeaderMode)!==null&&r!==void 0?r:e.frozenColDragHeaderMode,this.pagination=e.pagination,d.sortState=e.sortState,d.multipleSort=!!e.multipleSort,d.dataConfig=this.internalProps.groupBy?wq(this.internalProps.groupBy,e.addRecordRule):{addRecordRule:e.addRecordRule},d.columns=e.columns?Qg(e.columns,["children"]):e.header?Qg(e.header,["children"]):[],K1(this),d.enableTreeNodeMerge=(a=(o=e.enableTreeNodeMerge)!==null&&o!==void 0?o:Y(this.internalProps.groupBy))!==null&&a!==void 0&&a,this.internalProps.headerHelper.setTableColumnsEditor(),this.showHeader=(s=e.showHeader)===null||s===void 0||s,this.internalProps.columnWidthConfig=e.columnWidthConfig,this.transpose=(l=e.transpose)!==null&&l!==void 0&&l,Be.mode!=="node"&&(this.editorManager=new oie(this)),this.refreshHeader(),this.internalProps.useOneRowHeightFillAll=!1,e.dataSource?this.dataSource=e.dataSource:e.records?this.setRecords(e.records,{sortState:d.sortState}):this.setRecords([]),e.title){const c=It.getComponent("title");d.title=new c(e.title,this)}if(this.options.emptyTip)if(this.internalProps.emptyTip)(h=this.internalProps.emptyTip)===null||h===void 0||h.resetVisible();else{const c=It.getComponent("emptyTip");this.internalProps.emptyTip=new c(this.options.emptyTip,this),(u=this.internalProps.emptyTip)===null||u===void 0||u.resetVisible()}if(this.internalProps.enableTreeStickCell){const c=It.getComponent("listTreeStickCellPlugin");this.listTreeStickCellPlugin=new c(this)}setTimeout((()=>{this.isReleased||(this.resize(),this.fireListeners(at.INITIALIZED,null))}),0)}isListTable(){return!0}isPivotTable(){return!1}isPivotChart(){return!1}get sortState(){return this.internalProps.sortState}get records(){var t;return(t=this.dataSource)===null||t===void 0?void 0:t.records}get recordsCount(){return this.dataSource.records.length}updateColumns(t,e){var i,r,o,a;this.scenegraph.clearCells();const s={col:this.stateManager.hover.cellPos.col,row:this.stateManager.hover.cellPos.row};this.internalProps.columns=Qg(t,["children"]),K1(this),e?.clearColWidthCache&&this.internalProps._widthResizedColMap.clear(),this.options.columns=t,this.internalProps.headerHelper.setTableColumnsEditor(),this._hasAutoImageColumn=void 0,this.refreshHeader(),(r=(i=this.dataSource).updateColumns)===null||r===void 0||r.call(i,this.internalProps.columns),this.records&&oX(this.internalProps.columns)&&this.dataSource.processRecords((a=(o=this.dataSource.dataSourceObj)===null||o===void 0?void 0:o.records)!==null&&a!==void 0?a:this.dataSource.dataSourceObj),this.internalProps.useOneRowHeightFillAll=!1,this.headerStyleCache=new Map,this.bodyStyleCache=new Map,this.bodyBottomStyleCache=new Map,this.scenegraph.createSceneGraph(),this.stateManager.updateHoverPos(s.col,s.row),this.renderAsync(),this.eventManager.updateEventBinder()}_recreateSceneForStateChange(){var t,e;this.scenegraph.clearCells();const i={col:this.stateManager.hover.cellPos.col,row:this.stateManager.hover.cellPos.row};this._hasAutoImageColumn=void 0,this.refreshHeader(),this.records&&oX(this.internalProps.columns)&&this.dataSource.processRecords((e=(t=this.dataSource.dataSourceObj)===null||t===void 0?void 0:t.records)!==null&&e!==void 0?e:this.dataSource.dataSourceObj),this.internalProps.useOneRowHeightFillAll=!1,this.headerStyleCache=new Map,this.bodyStyleCache=new Map,this.bodyBottomStyleCache=new Map,this._updateSize(),this.scenegraph.createSceneGraph(),this.stateManager.updateHoverPos(i.col,i.row),this.renderAsync(),this.eventManager.updateEventBinder()}addColumn(t,e,i=!0){const r=this.options.columns;if(e===void 0)r.push(t);else{if(i)for(let o=0;o<r.length;o++)typeof r[o].field=="number"&&r[o].field>=e&&(r[o].field=r[o].field+1);r.splice(e,0,t)}if(i)for(let o=0;o<this.records.length;o++){const a=this.records[o];Array.isArray(a)&&a.splice(e,0,void 0)}this.updateColumns(r)}deleteColumn(t){const e=this.options.columns;e.splice(t,1),this.updateColumns(e)}get columns(){return this.internalProps.layoutMap.columnTree.getCopiedTree()}get header(){return this.internalProps.columns}set header(t){this.internalProps.columns=t,K1(this),this.options.header=t,this.refreshHeader(),this.internalProps.useOneRowHeightFillAll=!1,this.renderAsync()}get transpose(){var t;return(t=this.internalProps.transpose)!==null&&t!==void 0&&t}set transpose(t){this.internalProps.transpose!==t&&(this.internalProps.transpose=t,this.internalProps.layoutMap&&(this.internalProps.layoutMap.transpose=t,this.refreshRowColCount(),this._resetFrozenColCount(),this.renderAsync()))}getCellValue(t,e,i){var r;if(t===-1||e===-1)return null;if(!i){const l=this.getCustomMergeValue(t,e);if(l)return l}const o=this;if(o.internalProps.layoutMap.isSeriesNumber(t,e)){if(o.internalProps.layoutMap.isSeriesNumberInHeader(t,e)){const{title:u}=o.internalProps.layoutMap.getSeriesNumberHeader(t,e);return u}let l;if(this.internalProps.groupBy){const u=o.getCellRawRecord(t,e);if(u?.vtableMerge)return"";o.internalProps.layoutMap.isAggregation(t,e)||(l=this.dataSource.getGroupSeriesNumber(e-this.columnHeaderLevelCount))}else{const u=o.getBodyColumnDefine(t,e),d=o.getFieldData(u.field,t,e);l=typeof d=="string"?d:d?.text?(r=d.text)!==null&&r!==void 0?r:"":e-this.columnHeaderLevelCount+1}const{format:h}=o.internalProps.layoutMap.getSeriesNumberBody(t,e);return typeof h=="function"?h(t,e,this,l):l}if(o.internalProps.layoutMap.isHeader(t,e)){const{title:l}=o.internalProps.layoutMap.getHeader(t,e);return typeof l=="function"?l():l}if(o.internalProps.layoutMap.isAggregation(t,e)){if(o.internalProps.layoutMap.isTopAggregation(t,e)){const l=o.internalProps.layoutMap.getAggregatorOnTop(t,e);return l?.formatValue?l.formatValue(t,e,this):""}if(o.internalProps.layoutMap.isBottomAggregation(t,e)){const l=o.internalProps.layoutMap.getAggregatorOnBottom(t,e);return l?.formatValue?l.formatValue(t,e,this):""}}const{field:a,fieldFormat:s}=o.internalProps.layoutMap.getBody(t,e);return o.getFieldData(s||a,t,e)}getCellOriginValue(t,e){if(t===-1||e===-1)return null;const i=this;if(i.internalProps.layoutMap.isSeriesNumber(t,e)){if(i.internalProps.layoutMap.isSeriesNumberInHeader(t,e)){const{title:a}=i.internalProps.layoutMap.getSeriesNumberHeader(t,e);return a}const{format:o}=i.internalProps.layoutMap.getSeriesNumberBody(t,e);return typeof o=="function"?o(t,e,this):e-this.columnHeaderLevelCount}if(i.internalProps.layoutMap.isHeader(t,e)){const{title:o}=i.internalProps.layoutMap.getHeader(t,e);return typeof o=="function"?o():o}if(i.internalProps.layoutMap.isAggregation(t,e)){if(i.internalProps.layoutMap.isTopAggregation(t,e)){const o=i.internalProps.layoutMap.getAggregatorOnTop(t,e);return o?.value()}if(i.internalProps.layoutMap.isBottomAggregation(t,e)){const o=i.internalProps.layoutMap.getAggregatorOnBottom(t,e);return o?.value()}}const{field:r}=i.internalProps.layoutMap.getBody(t,e);return i.getFieldData(r,t,e)}getCellRawValue(t,e){if(t===-1||e===-1)return null;const i=this;if(i.internalProps.layoutMap.isHeader(t,e)){const{title:o}=i.internalProps.layoutMap.getHeader(t,e);return typeof o=="function"?o():o}const{field:r}=i.internalProps.layoutMap.getBody(t,e);return i.getRawFieldData(r,t,e)}getRecordShowIndexByCell(t,e){const{layoutMap:i}=this.internalProps;return i.getRecordShowIndexByCell(t,e)}getRecordIndexByCell(t,e){const{layoutMap:i}=this.internalProps,r=i.getRecordShowIndexByCell(t,e);return this.dataSource.getRecordIndexPaths(r)}getTableIndexByRecordIndex(t){return this.transpose?this.dataSource.getTableIndex(t)+this.rowHeaderLevelCount:this.dataSource.getTableIndex(t)+this.columnHeaderLevelCount}getTableIndexByField(t){const e=this.internalProps.layoutMap.columnObjects.find((r=>r.field===t));if(!e)return-1;const i=this.internalProps.layoutMap.getBodyLayoutRangeById(e.id);return this.transpose?i.start.row:i.start.col}getCellAddrByFieldRecord(t,e){return this.transpose?{col:this.getTableIndexByRecordIndex(e),row:this.getTableIndexByField(t)}:{col:this.getTableIndexByField(t),row:this.getTableIndexByRecordIndex(e)}}getCellOriginRecord(t,e){const i=this,r=i.getRecordShowIndexByCell(t,e);if(r>-1)return i.dataSource.get(r)}getCellRawRecord(t,e){const i=this,r=i.getRecordShowIndexByCell(t,e);if(r>-1)return i.dataSource.getRaw(r)}_canResizeColumn(t,e){const i=super._canResizeColumn(t,e);if(i&&!this.transpose){const r=this.internalProps.layoutMap.getBody(t,this.columnHeaderLevelCount),o=this.internalProps.layoutMap.isSeriesNumber(t,e);if(r?.disableColumnResize||o&&this.internalProps.rowSeriesNumber.disableColumnResize===!0)return!1}return i}updateOption(t,e={clearColWidthCache:!0,clearRowHeightCache:!0}){var i,r,o,a,s,l,h,u,d;const c=this.internalProps;if(super.updateOption(t,e),c.frozenColDragHeaderMode=(r=(i=t.dragOrder)===null||i===void 0?void 0:i.frozenColDragHeaderMode)!==null&&r!==void 0?r:t.frozenColDragHeaderMode,this.pagination=t.pagination,c.sortState=t.sortState,c.dataConfig=this.internalProps.groupBy?wq(this.internalProps.groupBy,t.addRecordRule):{addRecordRule:t.addRecordRule},this.showHeader=(o=t.showHeader)===null||o===void 0||o,c.columns=t.columns?Qg(t.columns,["children"]):t.header?Qg(t.header,["children"]):[],K1(this),c.enableTreeNodeMerge=(s=(a=t.enableTreeNodeMerge)!==null&&a!==void 0?a:Y(this.internalProps.groupBy))!==null&&s!==void 0&&s,this.internalProps.headerHelper.setTableColumnsEditor(),this.transpose=(l=t.transpose)!==null&&l!==void 0&&l,this.refreshHeader(),this.internalProps.useOneRowHeightFillAll=!1,this.internalProps.columnWidthConfig=t.columnWidthConfig,c.releaseList)for(let f=c.releaseList.length-1;f>=0;f--){const g=c.releaseList[f];g instanceof Ph?g.updateColumns(this.internalProps.columns):((h=g?.release)===null||h===void 0||h.call(g),c.releaseList.splice(f,1))}if(t.dataSource&&this.dataSource!==t.dataSource?this.dataSource=t.dataSource:t.records?this.setRecords(t.records,{sortState:t.sortState}):(this.refreshRowColCount(),this._resetFrozenColCount(),this.scenegraph.createSceneGraph(),this.render()),t.title){const f=It.getComponent("title");c.title=new f(t.title,this),this.scenegraph.resize()}if(this.options.emptyTip)if(this.internalProps.emptyTip)(u=this.internalProps.emptyTip)===null||u===void 0||u.resetVisible();else{const f=It.getComponent("emptyTip");this.internalProps.emptyTip=new f(this.options.emptyTip,this),(d=this.internalProps.emptyTip)===null||d===void 0||d.resetVisible()}return this.pluginManager.updatePlugins(t.plugins),setTimeout((()=>{this.fireListeners(at.UPDATED,null)}),0),new Promise((f=>{setTimeout(f,0)}))}updatePagination(t){this.pagination&&(typeof t.currentPage=="number"&&t.currentPage>=0&&(this.pagination.currentPage=t.currentPage),t.perPageCount&&(this.pagination.perPageCount=t.perPageCount||this.pagination.perPageCount),this.internalProps.layoutMap.clearCellRangeMap(),this.internalProps.useOneRowHeightFillAll=!1,this.scenegraph.clearCells(),this.dataSource.updatePagination(this.pagination),this.refreshRowColCount(),this.stateManager.initCheckedState(this.records),this.scenegraph.createSceneGraph(),this.renderAsync())}refreshHeader(){var t;const e=this.internalProps,i=this.transpose,r=this.showHeader;(e.layoutMap=new rie(this,(t=e.columns)!==null&&t!==void 0?t:[],r,this.options.hierarchyIndent)).transpose=i,i||this.setMinMaxLimitWidth(!0),this.refreshRowColCount()}refreshRowColCount(){var t,e,i,r,o,a,s,l,h,u,d,c,f,g,p,v,m,y;const b=this,{layoutMap:_}=b.internalProps;if(!_)return;const w=(e=(t=b.internalProps.dataSource)===null||t===void 0?void 0:t.length)!==null&&e!==void 0?e:0;_.recordsCount=w+(w>0||this.options.showAggregationWhenEmpty?_.hasAggregationOnTopCount+_.hasAggregationOnBottomCount:0),b.transpose?(b.rowCount=(i=_.rowCount)!==null&&i!==void 0?i:0,b.colCount=(r=_.colCount)!==null&&r!==void 0?r:0,this.internalProps.frozenColCount=Math.max(((o=_.headerLevelCount)!==null&&o!==void 0?o:0)+_.leftRowSeriesNumberColumnCount,(a=this.options.frozenColCount)!==null&&a!==void 0?a:0),this.internalProps.frozenRowCount=(s=this.options.frozenRowCount)!==null&&s!==void 0?s:0,b.bottomFrozenRowCount!==((l=this.options.bottomFrozenRowCount)!==null&&l!==void 0?l:0)&&(b.bottomFrozenRowCount=(h=this.options.bottomFrozenRowCount)!==null&&h!==void 0?h:0),b.rightFrozenColCount!==((u=this.options.rightFrozenColCount)!==null&&u!==void 0?u:0)&&(b.rightFrozenColCount=(d=this.options.rightFrozenColCount)!==null&&d!==void 0?d:0)):(b.colCount=(c=_.colCount)!==null&&c!==void 0?c:0,b.rowCount=_.recordsCount*_.bodyRowSpanCount+_.headerLevelCount,this.internalProps.frozenColCount=(f=this.options.frozenColCount)!==null&&f!==void 0?f:0,this.options.frozenColCount>=this.colCount&&(this.internalProps.frozenColCount=0),b._setFrozenRowCount(Math.max(_.headerLevelCount,(g=this.options.frozenRowCount)!==null&&g!==void 0?g:0)),b.bottomFrozenRowCount!==((p=this.options.bottomFrozenRowCount)!==null&&p!==void 0?p:0)&&(b.bottomFrozenRowCount=(v=this.options.bottomFrozenRowCount)!==null&&v!==void 0?v:0),b.rightFrozenColCount!==((m=this.options.rightFrozenColCount)!==null&&m!==void 0?m:0)&&(b.rightFrozenColCount=(y=this.options.rightFrozenColCount)!==null&&y!==void 0?y:0)),this.stateManager.setFrozenCol(this.internalProps.frozenColCount)}getFieldData(t,e,i){if(t===null||this.internalProps.layoutMap.isHeader(e,i))return null;const r=this.getRecordShowIndexByCell(this.transpose?e-this.internalProps.layoutMap.leftRowSeriesNumberColumnCount:e,i);return this.internalProps.dataSource.getField(r,t,e,i,this)}getRawFieldData(t,e,i){if(t===null||this.internalProps.layoutMap.isHeader(e,i))return null;const r=this.getRecordShowIndexByCell(e,i);return this.internalProps.dataSource.getRawField(r,t,e,i,this)}_moveHeaderPosition(t,e){const i=this.getCellRange(t.col,t.row),r=this.getCellRange(e.col,e.row),o=this.internalProps.layoutMap.moveHeaderPosition(t,e);return o?(o.moveType==="column"?(this.colWidthsMap.exchangeOrder(i.start.col,i.end.col-i.start.col+1,r.start.col,r.end.col-r.start.col+1,o.targetIndex),this.transpose||(this.colWidthsLimit={},this.setMinMaxLimitWidth())):o.targetIndex>o.sourceIndex?this.rowHeightsMap.exchangeOrder(o.sourceIndex,o.sourceSize,o.targetIndex+o.sourceSize-o.targetSize,o.targetSize,o.targetIndex):this.rowHeightsMap.exchangeOrder(o.sourceIndex,o.sourceSize,o.targetIndex,o.targetSize,o.targetIndex),o):null}changeRecordOrder(t,e){this.transpose?(t=this.getRecordShowIndexByCell(t,0),e=this.getRecordShowIndexByCell(e,0)):(t=this.getRecordShowIndexByCell(0,t),e=this.getRecordShowIndexByCell(0,e)),this.dataSource.changeOrder(t,e)}getCellAddress(t,e){let i;for(let o=0;o<this.internalProps.records.length;o++){const a=this.internalProps.records[o];if(typeof t=="function")t(a)&&(i=o);else{let s=!0;for(const l in t)if(a[l]!==t[l]){s=!1;break}s&&(i=o)}if(Y(i))break}const r=this.getCellRangeByField(e,i);if(r)return{row:r.start.row,col:r.start.col}}getCellRangeByField(t,e){const{layoutMap:i}=this.internalProps,r=i.columnObjects.find((o=>o.field===t));if(r){const o=i.getBodyLayoutRangeById(r.id);let a;return Y(e)&&(a=i.getRecordStartRowByRecordIndex(e)),this.transpose?{start:{row:o.start.row,col:Y(a)?a+o.start.col:void 0},end:{row:o.end.row,col:Y(a)?a+o.end.col:void 0}}:{start:{col:o.start.col,row:Y(a)?a+o.start.row:void 0},end:{col:o.end.col,row:Y(a)?a+o.end.row:void 0}}}return null}getHierarchyState(t,e){var i;if(this.isHeader(t,e))return(i=this._getHeaderLayoutMap(t,e))===null||i===void 0?void 0:i.hierarchyState;if((!this.internalProps.groupBy||Rt(this.internalProps.groupBy)&&this.internalProps.groupBy.length===0)&&!this.getBodyColumnDefine(t,e).tree)return Wt.none;const r=this.getRecordShowIndexByCell(t,e);return this.dataSource.getHierarchyState(r)}getRecordHierarchyState(t,e){let i;return this.transpose?this.getRecordShowIndexByCell(t,0):i=this.getRecordShowIndexByCell(0,e),this.dataSource.getHierarchyState(i)}toggleHierarchyState(t,e,i=!0){this.stateManager.updateHoverIcon(t,e,void 0,void 0);const r=this.getHierarchyState(t,e);if(this.isHeader(t,e)){const o=this.internalProps.layoutMap.getHeader(t,e),{hierarchyState:a,define:s}=o;if(![Wt.collapse,Wt.expand].includes(a)||!s)return;const l=s.columns;if(Array.isArray(l)&&l.length>0){const h=a===Wt.expand?Wt.collapse:Wt.expand;o.hierarchyState=h,o.define.hierarchyState=h,this.updateColumns(this.internalProps.columns)}this.fireListeners(at.TREE_HIERARCHY_STATE_CHANGE,{col:t,row:e,hierarchyState:r,originData:o,cellLocation:this.getCellLocation(t,e)})}else if(r===Wt.expand)this._refreshHierarchyState(t,e,i),this.fireListeners(at.TREE_HIERARCHY_STATE_CHANGE,{col:t,row:e,hierarchyState:Wt.collapse});else if(r===Wt.collapse){const o=this.getCellOriginRecord(t,e);Array.isArray(o.children)&&this._refreshHierarchyState(t,e,i),this.fireListeners(at.TREE_HIERARCHY_STATE_CHANGE,{col:t,row:e,hierarchyState:Wt.expand,originData:o})}}setLoadingHierarchyState(t,e){this.scenegraph.setLoadingHierarchyState(t,e)}_refreshHierarchyState(t,e,i=!0){var r,o;let a=!1,s=!1;const l=this.internalProps.layoutMap.checkHasChart();l&&(this.autoFillWidth&&(a=this.getAllColsWidth()<=this.tableNoFrameWidth),this.autoFillHeight&&(s=this.getAllRowsHeight()<=this.tableNoFrameHeight));const h=this.getRecordShowIndexByCell(t,e),u=this.dataSource.toggleHierarchyState(h,this.scenegraph.proxy.rowStart-this.columnHeaderLevelCount,Math.max(this.scenegraph.proxy.rowEnd-this.columnHeaderLevelCount,this.scenegraph.proxy.rowStart-this.columnHeaderLevelCount+this.scenegraph.proxy.rowLimit-1)),d=this.internalProps.layoutMap.toggleHierarchyState(u);this.refreshRowColCount();for(let p=this.rowCount-this.bottomFrozenRowCount;p<this.rowCount;p++){const v=Ra(p,0,this.colCount-1,this);this._setRowHeight(p,v)}this.clearCellStyleCache(),this.internalProps.layoutMap.clearCellRangeMap(),this.internalProps.useOneRowHeightFillAll=!1;const{updateCells:c,addCells:f,removeCells:g}=pie(d,t,e,this);(r=this.reactCustomLayout)===null||r===void 0||r.clearCache(),this.scenegraph.updateRow(g,f,c,i,!0),(o=this.reactCustomLayout)===null||o===void 0||o.updateAllCustomCell(),l&&(this.autoFillWidth&&!a&&(a=this.getAllColsWidth()<=this.tableNoFrameWidth),this.autoFillHeight&&!s&&(s=this.getAllRowsHeight()<=this.tableNoFrameHeight),(this.widthMode==="adaptive"||a||this.heightMode==="adaptive"||s)&&this.scenegraph.updateChartSizeForResizeColWidth(-1))}_hasHierarchyTreeHeader(){var t,e;return(e=(t=this.options.columns)!==null&&t!==void 0?t:this.options.header)===null||e===void 0?void 0:e.some(((i,r)=>i.tree))}getMenuInfo(t,e,i){return{field:this.getHeaderField(t,e),value:this.getCellValue(t,e),cellLocation:this.getCellLocation(t,e),event:void 0}}_getSortFuncFromHeaderOption(t,e,i){if(t||(t=this.internalProps.columns),e&&t&&t.length>0)for(let r=0;r<t.length;r++){const o=t[r];if((i&&i===o.fieldKey||!i&&o.field===e)&&o.sort&&typeof o.sort=="function")return o.sort;if(o.columns){const a=this._getSortFuncFromHeaderOption(o.columns,e,i);if(a)return a}}}updateSortState(t,e=!0){var i;if(t)this.internalProps.sortState=t;else if(this.internalProps.sortState)if(Array.isArray(this.internalProps.sortState))for(let r=0;r<this.internalProps.sortState.length;r++)(t=(i=this.internalProps.sortState)===null||i===void 0?void 0:i[r])&&(t.order="normal");else this.internalProps.sortState.order="normal",t=this.internalProps.sortState;(t=Array.isArray(t)?t:[t]).some((r=>r.field))&&e&&this.internalProps.layoutMap.headerObjects.some((r=>r.define.sort!==!1))&&(this.dataSource.sort(t.map((r=>{const o=this._getSortFuncFromHeaderOption(this.internalProps.columns,r.field);return this.internalProps.layoutMap.headerObjects.find((a=>a&&a.field===r.field)),{field:r.field,order:r.order,orderFn:o??PA}}))),this.internalProps.layoutMap.clearCellRangeMap(),this.internalProps.useOneRowHeightFillAll=!1,this.scenegraph.sortCell()),t.length&&this.stateManager.updateSortState(t)}updateFilterRules(t){this.scenegraph.clearCells(),this.sortState?(this.dataSource.updateFilterRulesForSorted(t),Mo(this)):this.dataSource.updateFilterRules(t),this.refreshRowColCount(),this.stateManager.initCheckedState(this.records),this.scenegraph.createSceneGraph(),this.resize()}getCheckboxState(t){if(this.stateManager.checkedState.size<this.rowCount-this.columnHeaderLevelCount&&this.stateManager.initLeftRecordsCheckState(this.records),Y(t)){let e=Array.from(this.stateManager.checkedState.keys()).sort(((i,r)=>{var o,a;const s=i.split(","),l=r.split(","),h=Math.max(s.length,l.length);for(let u=0;u<h;u++){const d=(o=Number(s[u]))!==null&&o!==void 0?o:0,c=(a=Number(l[u]))!==null&&a!==void 0?a:0;if(d!==c)return d-c}return 0})).map((i=>this.stateManager.checkedState.get(i)));return this.options.groupBy&&(e=$Qt(this)),Array.from(e,(i=>i&&i[t]))}return new Array(...this.stateManager.checkedState.values())}getCellCheckboxState(t,e){var i;const r=this.getBodyColumnDefine(t,e),o=r?.field,a=this.getCellType(t,e);if(Y(o)&&(a==="checkbox"||a==="switch")){const s=this.dataSource.getIndexKey(this.getRecordShowIndexByCell(t,e)).toString();return(i=this.stateManager.checkedState.get(s))===null||i===void 0?void 0:i[o]}}getRadioState(t){return Y(t)?this.stateManager.radioState[t]:this.stateManager.radioState}getCellRadioState(t,e){return LQt(t,e,this)}setCellCheckboxState(t,e,i){VQt(t,e,i,this)}setCellRadioState(t,e,i){DQt(t,e,i,this)}getSwitchState(t){return this.getCheckboxState(t)}getCellSwitchState(t,e){return this.getCellCheckboxState(t,e)}setCellSwitchState(t,e,i){this.setCellCheckboxState(t,e,i)}setRecords(t,e){var i,r,o,a;let s;oH(),(i=this.internalProps.dataSource)===null||i===void 0||i.release(),this.internalProps.releaseList=(r=this.internalProps.releaseList)===null||r===void 0?void 0:r.filter((h=>!h.dataSourceObj)),this.internalProps.dataSource=null,Array.isArray(e)||e?.order?s=e:e?s=e.sortState:e===null&&(s=null),typeof window<"u"&&window.performance.now();const l={col:this.stateManager.hover.cellPos.col,row:this.stateManager.hover.cellPos.row};if(this.scenegraph.clearCells(),s!==void 0&&(s===null||!Array.isArray(s)&&Y(s.field)||Array.isArray(s))&&(this.internalProps.sortState=this.internalProps.multipleSort?Array.isArray(s)?s:[s]:s,this.stateManager.setSortState(this.sortState)),t){if(rX(this,t),this.sortState){const h=Array.isArray(this.sortState)?this.sortState:[this.sortState];h.some((u=>u.order&&u.field&&u.order!=="normal"))&&this.internalProps.layoutMap.headerObjectsIncludeHided.some((u=>u.define.sort!==!1))&&this.dataSource.sort(h.map((u=>{const d=this._getSortFuncFromHeaderOption(void 0,u.field);return this.internalProps.layoutMap.headerObjectsIncludeHided.find((c=>c&&c.field===u.field)),{field:u.field,order:u.order||"asc",orderFn:d??PA}})))}this.refreshRowColCount()}else rX(this,t);if(this.stateManager.initCheckedState(t),this.clearCellStyleCache(),this.scenegraph.createSceneGraph(),this.stateManager.updateHoverPos(l.col,l.row),this._updateSize(),this.internalProps.title&&!this.internalProps.title.isReleased&&this.internalProps.title.resize(),this.scenegraph.resize(),this.options.emptyTip)if(this.internalProps.emptyTip)(o=this.internalProps.emptyTip)===null||o===void 0||o.resetVisible();else{const h=It.getComponent("emptyTip");this.internalProps.emptyTip=new h(this.options.emptyTip,this),(a=this.internalProps.emptyTip)===null||a===void 0||a.resetVisible()}this.render(),Y(l.col)&&Y(l.row)&&l.col>=0&&l.row>=0&&setTimeout((()=>{var h;(h=this.internalProps)===null||h===void 0||h.tooltipHandler.showTooltip(l.col,l.row)}),0)}setRecordChildren(t,e,i,r=!0){const o=this.getCellOriginRecord(e,i);o.children=t;const a=this.getRecordShowIndexByCell(e,i);this.dataSource.setRecord(o,a),this._refreshHierarchyState(e,i,r)}startEditCell(t,e,i){var r;if(Y(t)&&Y(e))this.eventManager.isDraging=!1,this.selectCell(t,e),this.editorManager.startEditCell(t,e,i);else if(!((r=this.stateManager.select)===null||r===void 0)&&r.cellPos){const{col:o,row:a}=this.stateManager.select.cellPos;Y(o)&&Y(a)&&this.editorManager.startEditCell(o,a,i)}}completeEditCell(){this.editorManager.completeEdit()}getEditor(t,e){var i,r;const o=this.getBodyColumnDefine(t,e);let a=this.isHeader(t,e)?(i=o?.headerEditor)!==null&&i!==void 0?i:this.options.headerEditor:(r=o?.editor)!==null&&r!==void 0?r:this.options.editor;return typeof a=="function"&&(a=a({col:t,row:e,dataValue:this.getCellOriginValue(t,e),value:this.getCellValue(t,e)||"",table:this})),typeof a=="string"?_ee(a):a}isHasEditorDefine(t,e){var i,r;const o=this.getBodyColumnDefine(t,e);let a=this.isHeader(t,e)?(i=o?.headerEditor)!==null&&i!==void 0?i:this.options.headerEditor:(r=o?.editor)!==null&&r!==void 0?r:this.options.editor;return typeof a=="function"&&(a=a({col:t,row:e,dataValue:this.getCellOriginValue(t,e),value:this.getCellValue(t,e)||"",table:this})),Y(a)}changeCellValue(t,e,i,r=!1,o=!0){return sie(t,e,i,r,o,this)}changeCellValues(t,e,i,r=!1,o=!0){return lie(t,e,i,r,o,this)}addRecord(t,e){var i;uie(t,e,this),(i=this.internalProps.emptyTip)===null||i===void 0||i.resetVisible()}addRecords(t,e){var i;die(t,e,this),(i=this.internalProps.emptyTip)===null||i===void 0||i.resetVisible()}deleteRecords(t){var e;cie(t,this),(e=this.internalProps.emptyTip)===null||e===void 0||e.resetVisible()}updateRecords(t,e){fie(t,e,this)}_hasCustomRenderOrLayout(){var t,e,i,r;const{headerObjects:o}=this.internalProps.layoutMap;if(this.options.customRender)return!0;for(let a=0;a<o.length;a++){const s=o[a];if(!((t=s?.define)===null||t===void 0)&&t.customLayout||!((e=s?.define)===null||e===void 0)&&e.headerCustomLayout||!((i=s?.define)===null||i===void 0)&&i.customRender||!((r=s?.define)===null||r===void 0)&&r.headerCustomRender)return!0}return!1}getAggregateValuesByField(t){const e=this.internalProps.layoutMap.getColumnByField(t),i=[];for(let r=0;r<e.length;r++){const o=e[r].columnDefine.aggregator;if(delete e[r].columnDefine,o){const a={col:e[r].col,aggregateValue:null};if(a.aggregateValue=[],Array.isArray(o))for(let s=0;s<o.length;s++)a.aggregateValue.push({aggregationType:o[s].type,value:o[s].value()});else a.aggregateValue.push({aggregationType:o.type,value:o.value()});i.push(a)}}return i}isAggregation(t,e){return this.internalProps.layoutMap.isAggregation(t,e)}getGroupTitleLevel(t,e){var i;if(!this.internalProps.groupBy)return;const r=this.dataSource.getIndexKey(this.getRecordShowIndexByCell(t,e)),o=(i=this.dataSource.getGroupLength())!==null&&i!==void 0?i:0;let a=Rt(r)?r.length-1:0;return o>0&&a===o&&(a=void 0),a}getBodyRowIndexByRecordIndex(t){return Array.isArray(t)&&t.length===1&&(t=t[0]),this.dataSource.getTableIndex(t)}release(){this.editorManager.release(),super.release()}expandAllTreeNode(){if(!this._hasHierarchyTreeHeader())return;let t=!1;this.dataSource&&typeof this.dataSource.expandAllNodes=="function"&&(this.dataSource.expandAllNodes(),t=!0),t&&(this._recreateSceneForStateChange(),this.fireListeners(at.TREE_HIERARCHY_STATE_CHANGE,{col:-1,row:-1,hierarchyState:Wt.expand,originData:{children:this.records}}))}collapseAllTreeNode(){if(!this._hasHierarchyTreeHeader())return;let t=!1;this.dataSource&&typeof this.dataSource.collapseAllNodes=="function"&&(this.dataSource.collapseAllNodes(),t=!0),t&&(this._recreateSceneForStateChange(),this.fireListeners(at.TREE_HIERARCHY_STATE_CHANGE,{col:-1,row:-1,hierarchyState:Wt.collapse,originData:{children:this.records}}))}mergeCells(t,e,i,r){for(let o=t;o<=i;o++)for(let a=e;a<=r;a++){const s=this.getCellRange(o,a);if(s.start.col!==s.end.col||s.start.row!==s.end.row)return}this.options.customMergeCell?typeof this.options.customMergeCell=="function"&&(this.options.customMergeCell=[]):this.options.customMergeCell=[],this.options.customMergeCell.push({text:this.getCellValue(t,e),range:{start:{col:t,row:e},end:{col:i,row:r}}}),this.internalProps.customMergeCell=bT(this.options.customMergeCell);for(let o=t;o<=i;o++)for(let a=e;a<=r;a++)this.scenegraph.updateCellContent(o,a);this.scenegraph.updateNextFrame()}unmergeCells(t,e,i,r){this.options.customMergeCell?typeof this.options.customMergeCell=="function"&&(this.options.customMergeCell=[]):this.options.customMergeCell=[],this.options.customMergeCell=this.options.customMergeCell.filter((o=>{const{start:a,end:s}=o.range;return!(a.col===t&&a.row===e&&s.col===i&&s.row===r)})),this.internalProps.customMergeCell=bT(this.options.customMergeCell);for(let o=t;o<=i;o++)for(let a=e;a<=r;a++)this.scenegraph.updateCellContent(o,a);this.scenegraph.updateNextFrame()}}function cH(n){return n==="bottom"||n==="top"}function mie(n){return n==="left"||n==="right"}const Vht=(n,t)=>Object.prototype.toString.call(n)===`[object ${t}]`,yie=n=>typeof n=="function",br=n=>n==null,Sn=n=>n!=null,Ght=n=>Array.isArray?Array.isArray(n):Vht(n,"Array"),_a=(n,t=!1)=>{const e=typeof n;return t?e==="number":e==="number"||Vht(n,"Number")};function bie(n){if(!n)return[];if(Object.keys)return Object.keys(n);const t=[];for(const e in n)n.hasOwnProperty(e)&&t.push(e);return t}function _ie(n,t,e){const i=bie(t);for(let r=0;r<i.length;r++){const o=i[r];(e?t[o]!=null:n[o]==null)&&(n[o]=t[o])}return n}function $ht(n,t,e=!0){if(n="prototype"in n?n.prototype:n,t="prototype"in t?t.prototype:t,Object.getOwnPropertyNames){const i=Object.getOwnPropertyNames(t);for(let r=0;r<i.length;r++){const o=i[r];o!=="constructor"&&(e?t[o]!=null:n[o]==null)&&(n[o]=t[o])}}else _ie(n,t,e)}function Cie(n,t,e){Sn(t)||(t=n,n=0),Sn(e)||(e=1);let i=-1;const r=0|Math.max(0,Math.ceil((t-n)/e)),o=new Array(r);for(;++i<r;)o[i]=n+i*e;return o}function wie(n,t){return n<t?-1:n>t?1:n>=t?0:NaN}function F0(n){return Number(n)}function xie(n,t,e=0,i){for(br(i)&&(i=n.length);e<i;){const r=e+i>>>1;wie(n[r],t)>0?i=r:e=r+1}return e}const Sie=1e-10,Aie=1e-10;function jht(n,t,e=Aie,i=Sie){const r=i,o=e*Math.max(n,t);return Math.abs(n-t)<=Math.max(r,o)}function xq(n,t,e,i){return n>t&&!jht(n,t,e,i)}function Sq(n,t,e,i){return n<t&&!jht(n,t,e,i)}const Y_=n=>{let t=null,e=null;return(...i)=>(t&&i.every(((r,o)=>r===t[o]))||(t=i,e=n(...i)),e)},Uht=function(n,t,e){return n<t?t:n>e?e:n};function CN(n,t){let e;return n>t&&(e=n,n=t,t=e),i=>Math.max(n,Math.min(t,i))}function qw(n,t){return e=>n*(1-e)+t*e}function Tie(n,t){return function(e){return Math.round(n*(1-e)+t*e)}}function Mie(n,t){const e=n.valueOf(),i=t.valueOf(),r=new Date;return o=>(r.setTime(e*(1-o)+i*o),r)}function fH(n,t,e){t/=100,e/=100;const i=(1-Math.abs(2*e-1))*t,r=i*(1-Math.abs(n/60%2-1)),o=e-i/2;let a=0,s=0,l=0;return 0<=n&&n<60?(a=i,s=r,l=0):60<=n&&n<120?(a=r,s=i,l=0):120<=n&&n<180?(a=0,s=i,l=r):180<=n&&n<240?(a=0,s=r,l=i):240<=n&&n<300?(a=r,s=0,l=i):300<=n&&n<360&&(a=i,s=0,l=r),a=Math.round(255*(a+o)),s=Math.round(255*(s+o)),l=Math.round(255*(l+o)),{r:a,g:s,b:l}}function wN(n,t,e){n/=255,t/=255,e/=255;const i=Math.min(n,t,e),r=Math.max(n,t,e),o=r-i;let a=0,s=0,l=0;return a=o===0?0:r===n?(t-e)/o%6:r===t?(e-n)/o+2:(n-t)/o+4,a=Math.round(60*a),a<0&&(a+=360),l=(r+i)/2,s=o===0?0:o/(1-Math.abs(2*l-1)),s=+(100*s).toFixed(1),l=+(100*l).toFixed(1),{h:a,s,l}}const Rie=/^#([0-9a-f]{3,8})$/,Aq={transparent:4294967040},Kw={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function nw(n){return((n=Math.max(0,Math.min(255,Math.round(n)||0)))<16?"0":"")+n.toString(16)}function Yht(n){return _a(n)?new ro(n>>16,n>>8&255,255&n,1):Ght(n)?new ro(n[0],n[1],n[2]):new ro(255,255,255)}function Pie(n){return _a(n)?new ro(n>>>24,n>>>16&255,n>>>8&255,255&n):Ght(n)?new ro(n[0],n[1],n[2],n[3]):new ro(255,255,255,1)}function $L(n){return n<.04045?.0773993808*n:Math.pow(.9478672986*n+.0521327014,2.4)}function jL(n){return n<.0031308?12.92*n:1.055*Math.pow(n,.41666)-.055}const Tq=(n,t)=>{const e=Rie.exec(n);if(t||e){const i=parseInt(e[1],16),r=e[1].length;return r===3?new ro((i>>8&15)+((i>>8&15)<<4),(i>>4&15)+((i>>4&15)<<4),(15&i)+((15&i)<<4),1):r===6?Yht(i):r===8?new ro(i>>24&255,i>>16&255,i>>8&255,(255&i)/255):null}};class us{static Brighter(t,e=1){return e===1?t:new us(t).brighter(e).toRGBA()}static SetOpacity(t,e=1){return e===1?t:new us(t).setOpacity(e).toRGBA()}static getColorBrightness(t,e="hsl"){const i=t instanceof us?t:new us(t);switch(e){case"hsv":default:return i.getHSVBrightness();case"hsl":return i.getHSLBrightness();case"lum":return i.getLuminance();case"lum2":return i.getLuminance2();case"lum3":return i.getLuminance3()}}static parseColorString(t){if(Sn(Aq[t]))return Pie(Aq[t]);if(Sn(Kw[t]))return Yht(Kw[t]);const e=`${t}`.trim().toLowerCase(),i=Tq(e);if(i!==void 0)return i;if(/^(rgb|RGB|rgba|RGBA)/.test(e)){const r=e.replace(/(?:\(|\)|rgba|RGBA|rgb|RGB)*/g,"").split(",");return new ro(parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10),parseFloat(r[3]))}if(/^(hsl|HSL|hsla|HSLA)/.test(e)){const r=e.replace(/(?:\(|\)|hsla|HSLA|hsl|HSL)*/g,"").split(","),o=fH(parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10));return new ro(o.r,o.g,o.b,parseFloat(r[3]))}}constructor(t){const e=us.parseColorString(t);e?this.color=e:this.color=new ro(255,255,255)}toRGBA(){return this.color.formatRgb()}toString(){return this.color.formatRgb()}toHex(){return this.color.formatHex()}toHsl(){return this.color.formatHsl()}brighter(t){const{r:e,g:i,b:r}=this.color;return this.color.r=Math.max(0,Math.min(255,Math.floor(e*t))),this.color.g=Math.max(0,Math.min(255,Math.floor(i*t))),this.color.b=Math.max(0,Math.min(255,Math.floor(r*t))),this}add(t){const{r:e,g:i,b:r}=this.color;return this.color.r+=Math.min(255,e+t.color.r),this.color.g+=Math.min(255,i+t.color.g),this.color.b+=Math.min(255,r+t.color.b),this}sub(t){return this.color.r=Math.max(0,this.color.r-t.color.r),this.color.g=Math.max(0,this.color.g-t.color.g),this.color.b=Math.max(0,this.color.b-t.color.b),this}multiply(t){const{r:e,g:i,b:r}=this.color;return this.color.r=Math.max(0,Math.min(255,Math.floor(e*t.color.r))),this.color.g=Math.max(0,Math.min(255,Math.floor(i*t.color.g))),this.color.b=Math.max(0,Math.min(255,Math.floor(r*t.color.b))),this}getHSVBrightness(){return Math.max(this.color.r,this.color.g,this.color.b)/255}getHSLBrightness(){return .5*(Math.max(this.color.r,this.color.g,this.color.b)/255+Math.min(this.color.r,this.color.g,this.color.b)/255)}setHsl(t,e,i){const r=this.color.opacity,o=wN(this.color.r,this.color.g,this.color.b),a=fH(br(t)?o.h:Uht(t,0,360),br(e)?o.s:e>=0&&e<=1?100*e:e,br(i)?o.l:i<=1&&i>=0?100*i:i);return this.color=new ro(a.r,a.g,a.b,r),this}setRGB(t,e,i){return!br(t)&&(this.color.r=t),!br(e)&&(this.color.g=e),!br(i)&&(this.color.b=i),this}setHex(t){const e=`${t}`.trim().toLowerCase(),i=Tq(e,!0);return i??this}setColorName(t){const e=Kw[t.toLowerCase()];return e!==void 0&&this.setHex(e),this}setScalar(t){return this.color.r=t,this.color.g=t,this.color.b=t,this}setOpacity(t=1){return this.color.opacity=t,this}getLuminance(){return(.2126*this.color.r+.7152*this.color.g+.0722*this.color.b)/255}getLuminance2(){return(.2627*this.color.r+.678*this.color.g+.0593*this.color.b)/255}getLuminance3(){return(.299*this.color.r+.587*this.color.g+.114*this.color.b)/255}clone(){return new us(this.color.toString())}copyGammaToLinear(t,e=2){return this.color.r=Math.pow(t.color.r,e),this.color.g=Math.pow(t.color.g,e),this.color.b=Math.pow(t.color.b,e),this}copyLinearToGamma(t,e=2){const i=e>0?1/e:1;return this.color.r=Math.pow(t.color.r,i),this.color.g=Math.pow(t.color.g,i),this.color.b=Math.pow(t.color.b,i),this}convertGammaToLinear(t){return this.copyGammaToLinear(this,t),this}convertLinearToGamma(t){return this.copyLinearToGamma(this,t),this}copySRGBToLinear(t){return this.color.r=$L(t.color.r),this.color.g=$L(t.color.g),this.color.b=$L(t.color.b),this}copyLinearToSRGB(t){return this.color.r=jL(t.color.r),this.color.g=jL(t.color.g),this.color.b=jL(t.color.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}}class ro{constructor(t,e,i,r){this.r=isNaN(+t)?255:Math.max(0,Math.min(255,+t)),this.g=isNaN(+e)?255:Math.max(0,Math.min(255,+e)),this.b=isNaN(+i)?255:Math.max(0,Math.min(255,+i)),Sn(r)?this.opacity=isNaN(+r)?1:Math.max(0,Math.min(1,+r)):this.opacity=1}formatHex(){return`#${nw(this.r)+nw(this.g)+nw(this.b)+(this.opacity===1?"":nw(255*this.opacity))}`}formatRgb(){const t=this.opacity;return`${t===1?"rgb(":"rgba("}${this.r},${this.g},${this.b}${t===1?")":`,${t})`}`}formatHsl(){const t=this.opacity,{h:e,s:i,l:r}=wN(this.r,this.g,this.b);return`${t===1?"hsl(":"hsla("}${e},${i}%,${r}%${t===1?")":`,${t})`}`}toString(){return this.formatHex()}}function Bie(n){let t="",e="",i="";const r=n[0]==="#"?1:0;for(let o=r;o<n.length;o++)n[o]!=="#"&&(o<r+2?t+=n[o]:o<r+4?e+=n[o]:o<r+6&&(i+=n[o]));return[parseInt(t,16),parseInt(e,16),parseInt(i,16)]}function kie(n,t,e){return Number((1<<24)+(n<<16)+(t<<8)+e).toString(16).slice(1)}function Lie(n,t){const e=n.r,i=t.r,r=n.g,o=t.g,a=n.b,s=t.b,l=n.opacity,h=t.opacity;return u=>{const d=Math.round(e*(1-u)+i*u),c=Math.round(r*(1-u)+o*u),f=Math.round(a*(1-u)+s*u);return new ro(d,c,f,l*(1-u)+h*u)}}const Eie=Object.freeze(Object.defineProperty({__proto__:null,Color:us,DEFAULT_COLORS:Kw,RGB:ro,hexToRgb:Bie,hslToRgb:fH,interpolateRgb:Lie,rgbToHex:kie,rgbToHsl:wN},Symbol.toStringTag,{value:"Module"}));var jh;(function(n){n.Identity="identity",n.Linear="linear",n.Log="log",n.Pow="pow",n.Sqrt="sqrt",n.Symlog="symlog",n.Time="time",n.Quantile="quantile",n.Quantize="quantize",n.Threshold="threshold",n.Ordinal="ordinal",n.Point="point",n.Band="band"})(jh||(jh={}));Object.values(jh).forEach((n=>{}));function tp(n){return n}const Die=n=>-Math.log(-n),Iie=n=>-Math.exp(-n),Oie=n=>isFinite(n)?Math.pow(10,n):n<0?0:n,Mq=n=>n===10?Oie:n===Math.E?Math.exp:t=>Math.pow(n,t),Rq=n=>n===Math.E?Math.log:n===10?Math.log10:n===2?Math.log2:(n=Math.log(n),t=>Math.log(t)/n),Pq=n=>t=>Math.sign(t)*Math.log1p(Math.abs(t/n)),Bq=n=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*n;function gH(n,t){if(n=Number(n),t=Number(t),t-=n)return i=>(i-n)/t;const e=Number.isNaN(t)?NaN:.5;return()=>e}function kq(n,t,e){const i=n[0],r=n[1],o=t[0],a=t[1];let s,l;return r<i?(s=gH(r,i),l=e(a,o)):(s=gH(i,r),l=e(o,a)),h=>l(s(h))}function xN(n,t,e){let i;return i=n===1?n+2*e:n-t+2*e,n?i>0?i:1:0}function Hie(n,t,e,i){return e===1&&(e=0),xN(n,e,i)*(t/(1-e))}function zie(n,t,e,i,r){const o=xN(n,e,i);let a=t/Math.max(1,o||1);r&&(a=Math.floor(a));let s=a*(1-e);return r&&(s=Math.round(s)),s}function Xht(n,t){const e=(n[1]-n[0])/(t[1]-t[0]),i=n[0]-e*t[0];return[i,e+i]}function Fie(n,t,e){const i=Math.min(n.length,t.length)-1,r=new Array(i),o=new Array(i);let a=-1;for(n[i]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++a<i;)r[a]=gH(n[a],n[a+1]),o[a]=e(t[a],t[a+1]);return function(s){const l=xie(n,s,1,i)-1;return o[l](r[l](s))}}const Nie=(n,t)=>{const e=n.slice();let i=0,r=e.length-1,o=e[i],a=e[r];return a<o&&([i,r]=[r,i],[o,a]=[a,o]),e[i]=t.floor(o),e[r]=t.ceil(a),e},qht=(n,t=!1)=>{const e=Math.floor(Math.log10(n)),i=n/Math.pow(10,e);let r;return r=t?i<1.5?1:i<3?2:i<7?5:10:i<=1?1:i<=2?2:i<=5?5:10,r*Math.pow(10,e)},Wie=(n,t)=>{let e,i;return t[0]<t[1]?(e=t[0],i=t[1]):(e=t[1],i=t[0]),Math.min(Math.max(n,e),i)};class Kht{constructor(){this._rangeFactorStart=null,this._rangeFactorEnd=null}_calculateWholeRange(t){return this._wholeRange?this._wholeRange:Sn(this._rangeFactorStart)&&Sn(this._rangeFactorEnd)&&t.length===2?(this._wholeRange=Xht(t,[this._rangeFactorStart,this._rangeFactorEnd]),this._wholeRange):t}rangeFactor(t,e,i){return t?(t.length===2&&t.every((r=>r>=0&&r<=1))&&(this._wholeRange=null,t[0]===0&&t[1]===1?(this._rangeFactorStart=null,this._rangeFactorEnd=null):(this._rangeFactorStart=t[0],this._rangeFactorEnd=t[1])),this):i?(this._wholeRange=null,this._rangeFactorStart=null,this._rangeFactorEnd=null,this):Sn(this._rangeFactorStart)&&Sn(this._rangeFactorEnd)?[this._rangeFactorStart,this._rangeFactorEnd]:null}rangeFactorStart(t,e){var i;return br(t)?this._rangeFactorStart:(t>=0&&t<=1&&(this._wholeRange=null,t!==0||!br(this._rangeFactorEnd)&&this._rangeFactorEnd!==1?(this._rangeFactorStart=t,this._rangeFactorEnd=(i=this._rangeFactorEnd)!==null&&i!==void 0?i:1):(this._rangeFactorStart=null,this._rangeFactorEnd=null)),this)}rangeFactorEnd(t,e){var i;return br(t)?this._rangeFactorEnd:(t>=0&&t<=1&&(this._wholeRange=null,t!==0||!br(this._rangeFactorStart)&&this._rangeFactorStart!==0?(this._rangeFactorEnd=t,this._rangeFactorStart=(i=this._rangeFactorStart)!==null&&i!==void 0?i:0):(this._rangeFactorStart=null,this._rangeFactorEnd=null)),this)}generateFishEyeTransform(){var t;if(!this._fishEyeOptions)return void(this._fishEyeTransform=null);const{distortion:e=2,radiusRatio:i=.1,radius:r}=this._fishEyeOptions,o=this.range(),a=o[0],s=o[o.length-1],l=Math.min(a,s),h=Math.max(a,s),u=Uht((t=this._fishEyeOptions.focus)!==null&&t!==void 0?t:0,l,h),d=br(r)?(h-l)*i:r;let c=Math.exp(e);c=c/(c-1)*d;const f=e/d;this._fishEyeTransform=g=>{const p=Math.abs(g-u);if(p>=d)return g;if(p<=1e-6)return u;const v=c*(1-Math.exp(-p*f))/p*.75+.25;return u+(g-u)*v}}unknown(t){return arguments.length?(this._unknown=t,this):this._unknown}get(t,e){var i;return(i=this==null?void 0:this[t])!==null&&i!==void 0?i:e}}const pH=Symbol("implicit");class SN extends Kht{specified(t){var e;return t?(this._specified=Object.assign((e=this._specified)!==null&&e!==void 0?e:{},t),this):Object.assign({},this._specified)}_getSpecifiedValue(t){if(this._specified)return this._specified[t]}constructor(){super(),this.type=jh.Ordinal,this._index=new Map,this._domain=[],this._ordinalRange=[],this._unknown=pH}clone(){const t=new SN().domain(this._domain).range(this._ordinalRange).unknown(this._unknown);return this._specified&&t.specified(this._specified),t}calculateVisibleDomain(t){return Sn(this._rangeFactorStart)&&Sn(this._rangeFactorEnd)&&t.length===2?[this.invert(t[0]),this.invert(t[1])]:this._domain}scale(t){const e=`${t}`,i=this._getSpecifiedValue(e);if(i!==void 0)return i;let r=this._index.get(e);if(!r){if(this._unknown!==pH)return this._unknown;r=this._domain.push(t),this._index.set(e,r)}const o=this._ordinalRange[(r-1)%this._ordinalRange.length];return this._fishEyeTransform?this._fishEyeTransform(o):o}invert(t){let e=0;for(;e<this._ordinalRange.length&&this._ordinalRange[e]!==t;)e++;return this._domain[(e-1)%this._domain.length]}domain(t){if(!t)return this._domain.slice();this._domain=[],this._index=new Map;for(const e of t){const i=`${e}`;this._index.has(i)||this._index.set(i,this._domain.push(e))}return this}range(t){if(!t)return this._ordinalRange.slice();const e=Array.from(t);return this._ordinalRange=e,this}index(t){var e;return this._index&&(e=this._index.get(`${t}`))!==null&&e!==void 0?e:-1}}function Zht(n,t,e,i){const r=[];let o=n;for(;o<=t;)r.push(o),o+=e;return i&&r.reverse(),r}function Lq(n,t,e,i){let r,o;if(t=Math.floor(+t),n=Math.floor(+n),!(e=Math.floor(+e)))return[];if(n===t)return[n];if(r=t<n){const s=n;n=t,t=s}let a=CN(1,t-n+1)(e);if(o=Math.floor((t-n+1)/a),!i)for(;Math.ceil((t-n+1)/o)>e&&a>1;)a-=1,o=Math.floor((t-n)/a);return Zht(n,t,o,r)}function Vie(n,t,e){let i;if(t=Math.floor(+t),n=Math.floor(+n),e=CN(1,t-n+1)(Math.floor(+e)),i=t<n){const r=n;n=t,t=r}return Zht(n,t,e,i)}class S2 extends SN{constructor(t){super(),this.type=jh.Band,this._range=[0,1],this._step=void 0,this._bandwidth=void 0,this._isFixed=!1,this._round=!1,this._paddingInner=0,this._paddingOuter=0,this._align=.5,this._unknown=void 0,delete this.unknown,this.rescale(t)}rescale(t,e){if(t)return this;this._wholeRange=null;const i=this._calculateWholeRange(this._range,e),r=super.domain().length,o=i[1]<i[0];let a=i[Number(o)-0];const s=i[1-Number(o)],l=xN(r,this._paddingInner,this._paddingOuter);return this._step=(s-a)/Math.max(1,l||1),this._round&&(this._step=Math.floor(this._step)),a+=(s-a-this._step*(r-this._paddingInner))*this._align,this.isBandwidthFixed()||(this._bandwidth=this._step*(1-this._paddingInner)),this._round&&(a=Math.round(a),this.isBandwidthFixed()||(this._bandwidth=Math.round(this._bandwidth))),this._bandRangeState={reverse:o,start:o?a+this._step*(r-1):a,count:r},this.generateFishEyeTransform(),this}scale(t){if(!this._bandRangeState)return;const e=`${t}`,i=this._getSpecifiedValue(e);if(i!==void 0)return i;let r=this._index.get(e);if(!r){if(this._unknown!==pH)return this._unknown;r=this._domain.push(t),this._index.set(e,r)}const{count:o,start:a,reverse:s}=this._bandRangeState,l=a+(s?-1:1)*((r-1)%o)*this._step;return this._fishEyeTransform?this._fishEyeTransform(l):l}_calculateWholeRange(t,e){if(this._wholeRange)return this._wholeRange;if((this._minBandwidth||this._maxBandwidth)&&!this._isBandwidthFixedByUser()){let i;if(Sn(this._rangeFactorStart)&&Sn(this._rangeFactorEnd)&&t.length===2){const o=Xht(t,[this._rangeFactorStart,this._rangeFactorEnd]);i=Math.abs(o[1]-o[0])}else i=Math.abs(t[1]-t[0]);const r=zie(super.domain().length,i,this._paddingInner,this._paddingOuter,this._round);r<this._minBandwidth?(this._bandwidth=this._minBandwidth,this._isFixed=!0):r>this._maxBandwidth?(this._bandwidth=this._maxBandwidth,this._isFixed=!0):(this._bandwidth=r,this._isFixed=!1)}if(this.isBandwidthFixed()){const i=Hie(super.domain().length,this._bandwidth,this._paddingInner,this._paddingOuter)*Math.sign(t[1]-t[0]),r=Math.min((t[1]-t[0])/i,1);if(Sn(this._rangeFactorStart)&&Sn(this._rangeFactorEnd)){if(i>0){const s=t[0]-i*this._rangeFactorStart,l=s+i;this._wholeRange=[s,l]}else{const s=t[1]+i*(1-this._rangeFactorEnd),l=s-i;this._wholeRange=[l,s]}const o=this._rangeFactorStart+r<=1,a=this._rangeFactorEnd-r>=0;e==="rangeFactorStart"&&o?this._rangeFactorEnd=this._rangeFactorStart+r:e==="rangeFactorEnd"&&a?this._rangeFactorStart=this._rangeFactorEnd-r:t[0]<=t[1]?o?this._rangeFactorEnd=this._rangeFactorStart+r:a?this._rangeFactorStart=this._rangeFactorEnd-r:(this._rangeFactorStart=0,this._rangeFactorEnd=r):a?this._rangeFactorStart=this._rangeFactorEnd-r:o?this._rangeFactorEnd=this._rangeFactorStart+r:(this._rangeFactorStart=1-r,this._rangeFactorEnd=1)}else this._rangeFactorStart=0,this._rangeFactorEnd=r,this._wholeRange=[t[0],t[0]+i];return this._wholeRange}return super._calculateWholeRange(t)}calculateWholeRangeSize(){const t=this._calculateWholeRange(this._range);return Math.abs(t[1]-t[0])}calculateVisibleDomain(t){const e=this._domain;if(Sn(this._rangeFactorStart)&&Sn(this._rangeFactorEnd)&&e.length){const i=this._getInvertIndex(t[0]),r=this._getInvertIndex(t[1]);return e.slice(Math.min(i,r),Math.max(i,r)+1)}return e}domain(t,e){return t?(super.domain(t),this.rescale(e)):super.domain()}range(t,e){return t?(this._range=[F0(t[0]),F0(t[1])],this.rescale(e)):this._range}rangeRound(t,e){return this._range=[F0(t[0]),F0(t[1])],this._round=!0,this.rescale(e)}ticks(t=10){const e=this.calculateVisibleDomain(this._range);return t===-1?e:Lq(0,e.length-1,t,!1).map((i=>e[i]))}tickData(t=10){return this.ticks(t).map(((e,i)=>({index:i,tick:e,value:(this.scale(e)-this._range[0]+this._bandwidth/2)/(this._range[1]-this._range[0])})))}forceTicks(t=10){const e=this.calculateVisibleDomain(this._range);return Lq(0,e.length-1,t,!0).filter((i=>i<e.length)).map((i=>e[i]))}stepTicks(t){const e=this.calculateVisibleDomain(this._range);return Vie(0,e.length-1,t).map((i=>e[i]))}_getInvertIndex(t){let e=0;const i=this.step()/2,r=this.bandwidth()/2,o=this._domain.length,a=this.range(),s=a[0]>a[a.length-1];for(e=0;e<o;e++){const l=this.scale(this._domain[e])+r;if(e===0&&(!s&&!xq(t,l+i)||s&&!Sq(t,l-i))||e===o-1||!Sq(t,l-i)&&!xq(t,l+i))break}return e>=0&&e<=o-1?e:o-1}invert(t){return this._domain[this._getInvertIndex(t)]}padding(t,e){return t!==void 0?(this._paddingOuter=Math.max(0,Math.min(Array.isArray(t)?Math.min.apply(null,t):t)),this._paddingInner=this._paddingOuter,this.rescale(e)):this._paddingInner}paddingInner(t,e){return t!==void 0?(this._paddingInner=Math.max(0,Math.min(1,t)),this.rescale(e)):this._paddingInner}paddingOuter(t,e){return t!==void 0?(this._paddingOuter=Math.max(0,Math.min(1,t)),this.rescale(e)):this._paddingOuter}step(){return this._step}round(t,e){return t!==void 0?(this._round=t,this.rescale(e)):this._round}align(t,e){return t!==void 0?(this._align=Math.max(0,Math.min(1,t)),this.rescale(e)):this._align}rangeFactor(t,e){return t?(super.rangeFactor(t),this.rescale(e)):super.rangeFactor()}rangeFactorStart(t,e){return br(t)?super.rangeFactorStart():(super.rangeFactorStart(t),this.rescale(e,"rangeFactorStart"))}rangeFactorEnd(t,e){return br(t)?super.rangeFactorEnd():(super.rangeFactorEnd(t),this.rescale(e,"rangeFactorEnd"))}bandwidth(t,e){return t?(t==="auto"?(this._bandwidth=void 0,this._isFixed=!1):(this._bandwidth=t,this._isFixed=!0),this._userBandwidth=t,this.rescale(e)):this._bandwidth}maxBandwidth(t,e){return t?(this._maxBandwidth=t==="auto"?void 0:t,this.rescale(e)):this._maxBandwidth}minBandwidth(t,e){return t?(this._minBandwidth=t==="auto"?void 0:t,this.rescale(e)):this._minBandwidth}fishEye(t,e,i){return t||i?(this._fishEyeOptions=t,this._fishEyeTransform=null,this.rescale(e)):this._fishEyeOptions}isBandwidthFixed(){return this._isFixed&&!!this._bandwidth}_isBandwidthFixedByUser(){return this._isFixed&&this._userBandwidth&&_a(this._userBandwidth)}clone(){var t,e,i;return new S2(!0).domain(this._domain,!0).range(this._range,!0).round(this._round,!0).paddingInner(this._paddingInner,!0).paddingOuter(this._paddingOuter,!0).align(this._align,!0).bandwidth((t=this._userBandwidth)!==null&&t!==void 0?t:"auto",!0).maxBandwidth((e=this._maxBandwidth)!==null&&e!==void 0?e:"auto",!0).minBandwidth((i=this._maxBandwidth)!==null&&i!==void 0?i:"auto")}}const{interpolateRgb:UL}=Eie;function Gie(n,t){const e=typeof t;let i;if(br(t)||e==="boolean")return()=>t;if(e==="number")return qw(n,t);if(e==="string"){if(i=us.parseColorString(t)){const r=UL(us.parseColorString(n),i);return o=>r(o).formatRgb()}return qw(Number(n),Number(t))}return t instanceof ro?UL(n,t):t instanceof us?UL(n.color,t.color):t instanceof Date?Mie(n,t):qw(Number(n),Number(t))}class Jht extends Kht{constructor(t=tp,e=tp){super(),this._unknown=void 0,this.transformer=t,this.untransformer=e,this._forceAlign=!0,this._domain=[0,1],this._range=[0,1],this._clamp=tp,this._piecewise=kq,this._interpolate=Gie}calculateVisibleDomain(t){var e;return Sn(this._rangeFactorStart)&&Sn(this._rangeFactorEnd)&&t.length===2?[this.invert(t[0]),this.invert(t[1])]:(e=this._niceDomain)!==null&&e!==void 0?e:this._domain}fishEye(t,e,i){return t||i?(this._fishEyeOptions=t,this._fishEyeTransform=null,this.rescale(e)):this._fishEyeOptions}scale(t){var e;if(t=Number(t),Number.isNaN(t)||this._domainValidator&&!this._domainValidator(t))return this._unknown;this._output||(this._output=this._piecewise(((e=this._niceDomain)!==null&&e!==void 0?e:this._domain).map(this.transformer),this._calculateWholeRange(this._range),this._interpolate));const i=this._output(this.transformer(this._clamp(t)));return this._fishEyeTransform?this._fishEyeTransform(i):i}invert(t){var e;return this._input||(this._input=this._piecewise(this._calculateWholeRange(this._range),((e=this._niceDomain)!==null&&e!==void 0?e:this._domain).map(this.transformer),qw)),this._clamp(this.untransformer(this._input(t)))}domain(t,e){var i;if(!t)return((i=this._niceDomain)!==null&&i!==void 0?i:this._domain).slice();this._domainValidator=null,this._niceType=null,this._niceDomain=null;const r=Array.from(t,F0);return this._domain=r,this.rescale(e)}range(t,e){if(!t)return this._range.slice();const i=Array.from(t);return this._range=i,this.rescale(e)}rangeRound(t,e){const i=Array.from(t);return this._range=i,this._interpolate=Tie,this.rescale(e)}rescale(t){var e;if(t)return this;const i=(e=this._niceDomain)!==null&&e!==void 0?e:this._domain,r=i.length,o=this._range.length;let a=Math.min(r,o);if(r&&r<o&&this._forceAlign){const s=o-r+1,l=i[r-1],h=r>=2?(l-i[r-2])/s:0;for(let u=1;u<=s;u++)i[r-2+u]=l-h*(s-u);a=o}return this._autoClamp&&(this._clamp=CN(i[0],i[a-1])),this._piecewise=a>2?Fie:kq,this._output=this._input=null,this._wholeRange=null,this.generateFishEyeTransform(),this}clamp(t,e,i){return arguments.length?(e?(this._autoClamp=!1,this._clamp=e):(this._autoClamp=!!t,this._clamp=t?void 0:tp),this.rescale(i)):this._clamp!==tp}interpolate(t,e){return arguments.length?(this._interpolate=t,this.rescale(e)):this._interpolate}ticks(t=10){return[]}tickData(t=10){const e=this.ticks(t);return(e??[]).map(((i,r)=>({index:r,tick:i,value:(this.scale(i)-this._range[0])/(this._range[1]-this._range[0])})))}rangeFactor(t,e){return t?(super.rangeFactor(t),this._output=this._input=null,this):super.rangeFactor()}rangeFactorStart(t,e){return br(t)?super.rangeFactorStart():(super.rangeFactorStart(t),this._output=this._input=null,this)}rangeFactorEnd(t,e){return br(t)?super.rangeFactorEnd():(super.rangeFactorEnd(t),this._output=this._input=null,this)}forceAlignDomainRange(t){return arguments.length?(this._forceAlign=t,this):this._forceAlign}}const $ie=Math.sqrt(50),jie=Math.sqrt(10),Uie=Math.sqrt(2),rw=[1,2,5,10],Eq=(n,t,e)=>{let i=1,r=n;const o=Math.floor((t-1)/2),a=Math.abs(n);return n>=0&&n<=Number.MIN_VALUE?r=0:n<0&&n>=-Number.MIN_VALUE?r=-(t-1):!e&&a<1?i=Qht(a).step:(e||a>1)&&(r=Math.floor(n)-o*i),i>0?(n>0?r=Math.max(r,0):n<0&&(r=Math.min(r,-(t-1)*i)),Cie(0,t).map((s=>r+s*i))):n>0?ST(0,-(t-1)/i,i):ST((t-1)/i,0,i)},Yie=Y_(((n,t,e,i)=>{let r,o,a,s,l=-1;if(e=+e,(n=+n)==(t=+t))return[n];if(Math.abs(n-t)<=Number.MIN_VALUE&&e>0)return[n];if((r=t<n)&&(o=n,n=t,t=o),s=AN(n,t,e).step,!isFinite(s))return[];if(s>0){let h=Math.round(n/s),u=Math.round(t/s);for(h*s<n&&++h,u*s>t&&--u,a=new Array(o=u-h+1);++l<o;)a[l]=(h+l)*s}else if(s<0&&i?.noDecimals){s=1;const h=Math.ceil(n),u=Math.floor(t);if(!(h<=u))return[];for(a=new Array(o=u-h+1);++l<o;)a[l]=h+l}else{s=-s;let h=Math.round(n*s),u=Math.round(t*s);for(h/s<n&&++h,u/s>t&&--u,a=new Array(o=u-h+1);++l<o;)a[l]=(h+l)/s}return r&&a.reverse(),a})),ST=(n,t,e)=>{let i,r,o=-1;if(e>0){let a=Math.floor(n/e),s=Math.ceil(t/e);for((a+1)*e<n&&++a,(s-1)*e>t&&--s,r=new Array(i=s-a+1);++o<i;)r[o]=(a+o)*e}else{e=-e;let a=Math.floor(n*e),s=Math.ceil(t*e);for((a+1)/e<n&&++a,(s-1)/e>t&&--s,r=new Array(i=s-a+1);++o<i;)r[o]=(a+o)/e}return r},Xie=(n,t,e)=>{let i;const r=n[0],o=n[n.length-1],a=t-n.length;if(o<=0){const h=[];for(i=a;i>=1;i--)h.push(r-i*e);return h.concat(n)}if(r>=0){for(i=1;i<=a;i++)n.push(o+i*e);return n}let s=[];const l=[];for(i=1;i<=a;i++)i%2==0?s=[r-Math.floor(i/2)*e].concat(s):l.push(o+Math.ceil(i/2)*e);return s.concat(n).concat(l)},AT=Y_(((n,t,e,i)=>{let r,o,a;if(e=+e,(n=+n)==(t=+t)||Math.abs(n-t)<=Number.MIN_VALUE&&e>0)return Eq(n,e,i?.noDecimals);(r=t<n)&&(a=n,n=t,t=a);const s=AN(n,t,e);let l=s.step;if(!isFinite(l))return[];if(l>0){let h=1;const{power:u,gap:d}=s,c=d===10?2*10**u:1*10**u;for(;h<=5&&(o=ST(n,t,l),o.length>e+1)&&e>2;)l+=c,h+=1;e>2&&o.length<e-1&&(o=Xie(o,e,l))}else i?.noDecimals&&l<0&&(l=1),o=ST(n,t,l);return r&&o.reverse(),o})),Qht=n=>{const t=Math.floor(Math.log(n)/Math.LN10),e=n/10**t;let i=rw[0];return e>=$ie?i=rw[3]:e>=jie?i=rw[2]:e>=Uie&&(i=rw[1]),t>=0?{step:i*10**t,gap:i,power:t}:{step:-(10**-t)/i,gap:i,power:t}};function AN(n,t,e){const i=(t-n)/Math.max(0,e);return Qht(i)}function tut(n,t,e){let i;if(e=+e,(n=+n)==(t=+t)&&e>0)return[n];if(e<=0||(i=qie(n,t,e))===0||!isFinite(i))return[];const r=new Array(e);for(let o=0;o<e;o++)r[o]=n+o*i;return r}function qie(n,t,e){return(t-n)/Math.max(1,e-1)}function Kie(n,t,e){let i,r,o=-1;if(e=+e,(r=(t=+t)<(n=+n))&&(i=n,n=t,t=i),!isFinite(e)||t-n<=e)return[n];const a=Math.floor((t-n)/e+1),s=new Array(a);for(;++o<a;)s[o]=n+o*e;return r&&s.reverse(),s}function YL(n,t=10){let e,i,r=0,o=n.length-1,a=n[r],s=n[o],l=10;for(s<a&&(i=a,a=s,s=i,i=r,r=o,o=i);l-- >0;){if(i=AN(a,s,t).step,i===e)return n[r]=a,n[o]=s,n;if(i>0)a=Math.floor(a/i)*i,s=Math.ceil(s/i)*i;else{if(!(i<0))break;a=Math.ceil(a*i)/i,s=Math.floor(s*i)/i}e=i}}function eut(n,t){const e=_a(t.forceMin),i=_a(t.forceMax);let r=null;const o=[];let a=null;const s=e&&i?l=>l>=t.forceMin&&l<=t.forceMax:e?l=>l>=t.forceMin:i?l=>l<=t.forceMax:null;return e?o[0]=t.forceMin:_a(t.min)&&t.min<=Math.min(n[0],n[n.length-1])&&(o[0]=t.min),i?o[1]=t.forceMax:_a(t.max)&&t.max>=Math.max(n[0],n[n.length-1])&&(o[1]=t.max),_a(o[0])&&_a(o[1])?(a=n.slice(),a[0]=o[0],a[a.length-1]=o[1]):r=_a(o[0])||_a(o[1])?_a(o[0])?"max":"min":"all",{niceType:r,niceDomain:a,niceMinMax:o,domainValidator:s}}const XL=(n,t,e)=>Math.abs(t-n)<1?+e.toFixed(1):Math.round(+e),iut=Y_(((n,t,e,i,r,o,a)=>{let s=n,l=t;const h=l<s;h&&([s,l]=[l,s]);let u,d,c=r(s),f=r(l),g=[];if(!(i%1)&&f-c<e){if(c=Math.floor(c),f=Math.ceil(f),s>0){for(;c<=f;++c)for(u=1;u<i;++u)if(d=c<0?u/o(-c):u*o(c),!(d<s)){if(d>l)break;g.push(d)}}else for(;c<=f;++c)for(u=i-1;u>=1;--u)if(d=c>0?u/o(-c):u*o(c),!(d<s)){if(d>l)break;g.push(d)}2*g.length<e&&(g=AT(s,l,e))}else g=AT(c,f,Math.min(f-c,e)).map(o);return g=g.filter((p=>p!==0)),a?.noDecimals&&(g=Array.from(new Set(g.map((p=>Math.floor(p)))))),h?g.reverse():g})),nut=Y_(((n,t,e,i,r,o)=>{const a=[],s={},l=r(n),h=r(t);let u=[];if(Number.isInteger(i))u=AT(l,h,e);else{const d=(h-l)/(e-1);for(let c=0;c<e;c++)u.push(l+c*d)}return u.forEach((d=>{const c=o(d),f=Number.isInteger(i)?XL(n,t,c):XL(n,t,qht(c)),g=XL(n,t,Wie(f,[n,t]));!s[g]&&!isNaN(g)&&u.length>1&&(s[g]=1,a.push(g))})),a})),TT=Y_(((n,t,e,i,r)=>tut(i(n),i(t),e).map((o=>qht(r(o))))));class gm extends Jht{constructor(){super(...arguments),this.type=jh.Linear}clone(){return new gm().domain(this._domain,!0).range(this._range,!0).unknown(this._unknown).clamp(this.clamp(),null,!0).interpolate(this._interpolate)}tickFormat(){return()=>{}}d3Ticks(t=10,e){const i=this.calculateVisibleDomain(this._range);return Yie(i[0],i[i.length-1],t,e)}ticks(t=10,e){var i;if(yie(e?.customTicks))return e.customTicks(this,t);if(Sn(this._rangeFactorStart)&&Sn(this._rangeFactorEnd)&&(this._rangeFactorStart>0||this._rangeFactorEnd<1)&&this._range.length===2||!this._niceType)return this.d3Ticks(t,e);const r=(i=this._niceDomain)!==null&&i!==void 0?i:this._domain,o=this._domain,a=r[0],s=r[r.length-1];let l=AT(o[0],o[o.length-1],t,e);if(!l.length)return l;if(this._domainValidator)l=l.filter(this._domainValidator);else if((l[0]!==a||l[l.length-1]!==s)&&this._niceType){const h=r.slice();if(this._niceType==="all"?(h[0]=l[0],h[h.length-1]=l[l.length-1],this._niceDomain=h,this.rescale()):this._niceType==="min"&&l[0]!==a?(h[0]=l[0],this._niceDomain=h,this.rescale()):this._niceType==="max"&&l[l.length-1]!==s&&(h[h.length-1]=l[l.length-1],this._niceDomain=h,this.rescale()),this._niceType!=="all"){const u=Math.min(h[0],h[h.length-1]),d=Math.max(h[0],h[h.length-1]);l=l.filter((c=>c>=u&&c<=d))}}return l}forceTicks(t=10){const e=this.calculateVisibleDomain(this._range);return tut(e[0],e[e.length-1],t)}stepTicks(t){const e=this.calculateVisibleDomain(this._range);return Kie(e[0],e[e.length-1],t)}nice(t=10,e){var i,r;const o=this._domain;let a=[];if(e){const s=eut(o,e);if(a=s.niceMinMax,this._domainValidator=s.domainValidator,this._niceType=s.niceType,s.niceDomain)return this._niceDomain=s.niceDomain,this.rescale(),this}else this._niceType="all";if(this._niceType){const s=YL(o.slice(),t);this._niceType==="min"?s[s.length-1]=(i=a[1])!==null&&i!==void 0?i:s[s.length-1]:this._niceType==="max"&&(s[0]=(r=a[0])!==null&&r!==void 0?r:s[0]),this._niceDomain=s,this.rescale()}return this}niceMin(t=10){this._niceType="min";const e=this._domain[this._domain.length-1],i=YL(this.domain(),t);return i&&(i[i.length-1]=e,this._niceDomain=i,this.rescale()),this}niceMax(t=10){this._niceType="max";const e=this._domain[0],i=YL(this._domain.slice(),t);return i&&(i[0]=e,this._niceDomain=i,this.rescale()),this}}class rut{nice(t=10,e){var i,r,o,a;const s=this._domain;let l=[],h=null;if(e){const u=eut(s,e);if(l=u.niceMinMax,this._domainValidator=u.domainValidator,h=u.niceType,u.niceDomain)return this._niceDomain=u.niceDomain,this.rescale(),this}else h="all";if(h){const u=Nie(s.slice(),(r=(i=this.getNiceConfig)===null||i===void 0?void 0:i.call(this))!==null&&r!==void 0?r:{floor:d=>Math.floor(d),ceil:d=>Math.ceil(d)});return h==="min"?u[u.length-1]=(o=l[1])!==null&&o!==void 0?o:u[u.length-1]:h==="max"&&(u[0]=(a=l[0])!==null&&a!==void 0?a:u[0]),this._niceDomain=u,this.rescale(),this}return this}niceMin(){const t=this._domain[this._domain.length-1];this.nice();const e=this._domain.slice();return this._domain&&(e[e.length-1]=t,this._niceDomain=e,this.rescale()),this}niceMax(){const t=this._domain[0];this.nice();const e=this._domain.slice();return this._domain&&(e[0]=t,this._niceDomain=e,this.rescale()),this}}function Dq(n){return t=>-n(-t)}function Iq(n=Number.EPSILON){return t=>Math.max(t,n)}function Zie(n=Number.EPSILON){return t=>Math.min(t,-n)}class X_ extends Jht{constructor(){super(Rq(10),Mq(10)),this.type=jh.Log,this._limit=Iq(),this._logs=this.transformer,this._pows=this.untransformer,this._domain=[1,10],this._base=10}clone(){return new X_().domain(this._domain,!0).range(this._range,!0).unknown(this._unknown).clamp(this.clamp(),null,!0).interpolate(this._interpolate,!0).base(this._base)}rescale(t){var e;if(t)return this;super.rescale();const i=Rq(this._base),r=Mq(this._base);return((e=this._niceDomain)!==null&&e!==void 0?e:this._domain)[0]<0?(this._logs=Dq(i),this._pows=Dq(r),this._limit=Zie(),this.transformer=Die,this.untransformer=Iie):(this._logs=i,this._pows=r,this._limit=Iq(),this.transformer=this._logs,this.untransformer=r),this}scale(t){var e;if(t=Number(t),Number.isNaN(t)||this._domainValidator&&!this._domainValidator(t))return this._unknown;this._output||(this._output=this._piecewise(((e=this._niceDomain)!==null&&e!==void 0?e:this._domain).map(this._limit).map(this.transformer),this._calculateWholeRange(this._range),this._interpolate));const i=this._output(this.transformer(this._limit(this._clamp(t))));return this._fishEyeTransform?this._fishEyeTransform(i):i}base(t,e){return arguments.length?(this._base=t,this.rescale(e)):this._base}tickFormat(){return tp}d3Ticks(t=10,e){const i=this.domain(),r=this._limit(i[0]),o=this._limit(i[i.length-1]);return iut(r,o,t,this._base,this.transformer,this.untransformer,e)}ticks(t=10){const e=this.calculateVisibleDomain(this._range);return nut(this._limit(e[0]),this._limit(e[e.length-1]),t,this._base,this.transformer,this.untransformer)}forceTicks(t=10){const e=this.calculateVisibleDomain(this._range);return TT(e[0],e[e.length-1],t,this.transformer,this.untransformer)}stepTicks(t){const e=this.calculateVisibleDomain(this._range);return TT(this._limit(e[0]),this._limit(e[e.length-1]),t,this.transformer,this.untransformer)}getNiceConfig(){return{floor:t=>this._pows(Math.floor(this._logs(this._limit(t)))),ceil:t=>Math.abs(t)>=1?Math.ceil(t):this._pows(Math.ceil(this._logs(this._limit(t))))}}}$ht(X_,rut);class Jie extends S2{constructor(t){super(!1),this.type=jh.Point,this._padding=0,this.paddingInner(1,t),this.padding=this.paddingOuter,this.paddingInner=void 0,this.paddingOuter=void 0}}class q_ extends gm{constructor(){super(Pq(1),Bq(1)),this.type=jh.Symlog,this._const=1}clone(){return new q_().domain(this._domain,!0).range(this._range,!0).unknown(this._unknown).clamp(this.clamp(),null,!0).interpolate(this._interpolate,!0).constant(this._const)}constant(t,e){return arguments.length?(this._const=t,this.transformer=Pq(t),this.untransformer=Bq(t),this.rescale(e)):this._const}d3Ticks(t=10,e){const i=this.domain(),r=i[0],o=i[i.length-1];return iut(r,o,t,this._const,this.transformer,this.untransformer,e)}ticks(t=10){const e=this.calculateVisibleDomain(this._range);return nut(e[0],e[e.length-1],t,this._const,this.transformer,this.untransformer)}forceTicks(t=10){const e=this.calculateVisibleDomain(this._range);return TT(e[0],e[e.length-1],t,this.transformer,this.untransformer)}stepTicks(t){const e=this.calculateVisibleDomain(this._range);return TT(e[0],e[e.length-1],t,this.transformer,this.untransformer)}}$ht(q_,rut);class Qie{constructor(){this._scale=new S2,this._scales=[this._scale]}valueToPosition(t){return this._scale.scale(t)}getPosition(t){let e=0,i=this._scale;if(this._scales.length===1||t.length===1)e=this.valueToPosition(t[0]);else{const r=Math.min(t.length,this._scales.length);for(let o=0;o<r;o++)e+=this._scales[o].scale(t[o]);i=this._scales[r-1]}return{position:e,bandScale:i}}calcScales(t,e){var i,r;const{bandPadding:o,paddingInner:a,paddingOuter:s}=this,l=Rt(o),h=Rt(a),u=Rt(s);for(let d=0;d<this._scales.length;d++){const c=l?o[d]:o,f=h?a[d]:a,g=u?s[d]:s;this._scales[d].paddingInner((i=f??c)!==null&&i!==void 0?i:t,!0).paddingOuter((r=g??c)!==null&&r!==void 0?r:e)}}dataToPosition(t,e={}){var i;if(t.length===0||this._scales.length===0)return 0;const{position:r,bandScale:o}=this.getPosition(t);return r+o.bandwidth()*((i=e.bandPosition)!==null&&i!==void 0?i:.5)}updateScaleDomain(t){for(let e=0;e<this._scales.length;e++)this._scales[e].domain(t)}updateRange(t){const[e,i]=this._scale.range();t[0]===e&&t[1]===i||this._scale.range(t)}}function tne(n,t,e){n.getTransform(t)||n.registerTransform(t,e)}function ene(n,t,e){n.getParser(t)||n.registerParser(t,e)}const ine=Math.sqrt(50),nne=Math.sqrt(10),rne=Math.sqrt(2);class one{constructor(t){this._extend={},this.type=t??"linear",this._scale=t==="log"?new X_:t==="symlog"?new q_:new gm,this._scales=[this._scale]}setExtraAttrFromSpec(t,e,i,r,o,a){this.nice=!1,this.zero=e,this.zero&&(i.min=Math.min(i.min,0),i.max=Math.max(i.max,0)),this.domain=i,this.expand=r,this.type==="log"?this._scale.base(o??10):this.type==="symlog"&&this._scale.constant(a??10)}transformScaleDomain(){this.type==="symlog"||this.type==="log"||this.setScaleNice()}setScaleNice(){this.type==="log"?this.setLogScaleNice():this.setLinearScaleNice()}setLogScaleNice(){var t,e,i,r,o,a;We((t=this.domain)===null||t===void 0?void 0:t.min)&&We((e=this.domain)===null||e===void 0?void 0:e.max)?this.nice&&this._scale.nice():Y((i=this.domain)===null||i===void 0?void 0:i.min)&&We((r=this.domain)===null||r===void 0?void 0:r.max)?this.nice&&this._scale.niceMax():We((o=this.domain)===null||o===void 0?void 0:o.min)&&Y((a=this.domain)===null||a===void 0?void 0:a.max)&&this.nice&&this._scale.niceMin()}setLinearScaleNice(){var t,e,i,r,o,a,s,l;let h=(e=(t=this.forceTickCount)!==null&&t!==void 0?t:this.tickCount)!==null&&e!==void 0?e:10;this.niceType==="accurateFirst"&&(h=Math.max(10,h)),We((i=this.domain)===null||i===void 0?void 0:i.min)&&We((r=this.domain)===null||r===void 0?void 0:r.max)?this.nice&&this._scale.nice(h):Y((o=this.domain)===null||o===void 0?void 0:o.min)&&We((a=this.domain)===null||a===void 0?void 0:a.max)?this.nice&&this._scale.niceMax(h):We((s=this.domain)===null||s===void 0?void 0:s.min)&&Y((l=this.domain)===null||l===void 0?void 0:l.max)?this.nice&&this._scale.niceMin(h):this.nice&&this._scale.nice(h)}dataToPosition(t){return this.valueToPosition(t[0])}valueToPosition(t){return this._scale.scale(t)}computeLinearDomain(t){const e=[];return t.forEach((i=>{const{min:r,max:o}=i;e[0]=e[0]===void 0?r:Math.min(e[0],r),e[1]=e[1]===void 0?o:Math.max(e[1],o)})),this.expandDomain(e),this.includeZero(e),this.setDomainMinMax(e),e}expandDomain(t){if(!this.expand)return;const e=t[0],i=t[t.length-1];Y(this.expand.min)&&(t[0]=e-(i-e)*this.expand.min),Y(this.expand.max)&&(t[t.length-1]=i+(i-e)*this.expand.max)}niceDomain(t){if(Y(t[0])||Y(t[1])||this.type!=="linear")return t;if(Math.abs(RYt(t)-MYt(t))<=1e-12){let e=t[0];const i=e>=0?1:-1;if(e=Math.abs(e),e<1)t[0]=0,t[1]=1;else{let r=e/5;const o=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,o);r=(a>=ine?10:a>=nne?5:a>=rne?2:1)*Math.pow(10,o),t[0]=0,t[1]=10*r}i<0&&(t.reverse(),t[0]*=-1,t[1]*=-1)}return t}niceMinMax(){var t,e,i,r,o,a,s,l;if(this.nice){let h=(e=(t=this.forceTickCount)!==null&&t!==void 0?t:this.tickCount)!==null&&e!==void 0?e:10;this.niceType==="accurateFirst"&&(h=Math.max(10,h)),We((i=this.domain)===null||i===void 0?void 0:i.min)&&We((r=this.domain)===null||r===void 0?void 0:r.max)?this._scale.nice(h):Y((o=this.domain)===null||o===void 0?void 0:o.min)&&We((a=this.domain)===null||a===void 0?void 0:a.max)?this._scale.niceMax(h):We((s=this.domain)===null||s===void 0?void 0:s.min)&&Y((l=this.domain)===null||l===void 0?void 0:l.max)?this._scale.niceMin(h):this._scale.nice(h)}}includeZero(t){this.zero&&(t[0]=Math.min(t[0],0),t[t.length-1]=Math.max(t[t.length-1],0))}setExtendDomain(t,e){if(e===void 0)return void delete this._extend[t];this._extend[t]=e;const i=this._scale.domain();this.extendDomain(i),this.includeZero(i),this.setDomainMinMax(i),this.niceDomain(i),this._scale.domain(i,this.nice),this.niceMinMax()}extendDomain(t){let e;const i=t.length-1,r=t[0]-t[i]>0,o=r?i:0,a=r?0:i;for(const s in this._extend)e=this._extend[s],e>t[a]&&(t[a]=e),e<t[o]&&(t[o]=e)}setDomainMinMax(t){if(!this.domain)return;const{min:e,max:i}=this.domain;Y(e)&&(t[0]=e),Y(i)&&(t[1]=i)}setZero(t){this.zero!==t&&(this.zero=t,this.updateScaleDomain())}updateScaleDomain(){const t=this.computeDomain([this.domain]);this.updateScaleDomainByModel(t)}computeDomain(t){return this.computeLinearDomain(t)}updateScaleDomainByModel(t){t=t??this._scale.domain(),this.extendDomain(t),this.includeZero(t),this.setDomainMinMax(t),this.niceDomain(t),this._scale.domain(t,this.nice),this.niceMinMax()}updateRange(t){const[e,i]=this._scale.range();t[0]===e&&t[1]===i||this._scale.range(t)}}function ane(n,t){const e=n.find((r=>r.name==="axis-label-container-layer-0"),!0),i=n.find((r=>r.name==="axis-label-container-layer-1"),!0);Oq(e?e.getChildren():[],t),Oq(i?i.getChildren():[],t)}function sne(n,t){const{width:e,height:i}=t.getLayoutRect(),r=cH(t.orient),o=t.option.inverse===!0,a=n[0],s=TYt(n);if(r)if(o){const l=e,h=0,u=a.AABBBounds.x2,d=s.AABBBounds.x1;u>l&&a.setAttributes({x:l,textAlign:"right"}),d<h&&s.setAttributes({x:h,textAlign:"left"})}else{const h=e,u=a.AABBBounds.x1,d=s.AABBBounds.x2;u<0&&a.setAttributes({x:0,textAlign:"left"}),d>h&&s.setAttributes({x:h,textAlign:"right"})}else if(o){const l=a.AABBBounds.y1,h=s.AABBBounds.y2,u=0,d=i;l<u&&a.setAttributes({y:u,textBaseline:"top"}),h>d&&s.setAttributes({y:d,textBaseline:"bottom"})}else{const l=i,h=0,u=a.AABBBounds.y2,d=s.AABBBounds.y1;u>l&&a.setAttributes({y:l,textBaseline:"bottom"}),d<h&&s.setAttributes({y:h,textBaseline:"top"})}}function Oq(n,t){var e;const i=t.option;Cr(n)||!((e=i?.label)===null||e===void 0)&&e.flush&&sne(n,t)}const lne=n=>n;class hne{constructor(t,e,i,r,o){var a,s,l;this.x=0,this.y=0,this.padding=r,this.table=o,this.orient=(a=t.orient)!==null&&a!==void 0?a:"left",this.type=(s=t.type)!==null&&s!==void 0?s:"band",this.option=oi({},Jee(t.__vtableChartTheme),une(this.orient,o.theme),dne(this.orient,this.type,t.__vtableChartTheme),t),this.orient==="left"||this.orient==="right"?(this.width=e,this.height=i-r[0]-r[2]-0,this.y=r[0]+0):(this.orient==="top"||this.orient==="bottom")&&(this.width=e-r[1]-r[3]-0,this.height=i,this.x=r[3]+0),this.visible=(l=t.visible)===null||l===void 0||l,this.inverse="inverse"in t&&!!t.inverse,t.type==="band"&&(this.data=t.domain),this.initScale(),this.initData(),this.createComponent(),this.initEvent()}initScale(){const t=this.option;this.type==="band"||this.type==="point"?(this.scale=new Qie,this.scale.bandPadding=t.bandPadding,this.scale.paddingInner=t.paddingInner,this.scale.paddingOuter=t.paddingOuter,this.scale.calcScales(.1,.3),this.scale.updateScaleDomain(this.data),this.updateScaleRange()):this.type!=="linear"&&this.type!=="time"&&this.type!=="log"&&this.type!=="symlog"||(this.scale=new one(this.type),this.scale.setExtraAttrFromSpec(t.nice,t.zero,t.range,t.expand,t.base,t.constant),this.scale.transformScaleDomain(),this.scale.updateScaleDomain(),this.updateScaleRange())}initData(){this.table._vDataSet||(this.table._vDataSet=new Xee),ene(this.table._vDataSet,"scale",lne),tne(this.table._vDataSet,"ticks",UUt);const t=this.option.label||{},e=this.option.tick||{},i=new Fht(this.table._vDataSet).parse(this.scale._scale,{type:"scale"}).transform({type:"ticks",options:{sampling:this.option.sampling!==!1,tickCount:e.tickCount,forceTickCount:e.forceTickCount,tickStep:e.tickStep,tickMode:e.tickMode,noDecimals:e.noDecimals,axisOrientType:this.orient,coordinateType:"cartesian",labelStyle:t.style,labelFormatter:t.formatMethod,labelGap:t.minGap,labelLastVisible:t.lastVisible,labelFlush:t.flush}},!1);this.tickData=i,this.computeData()}computeData(){this.tickData.reRunAllTransform()}initEvent(){}createComponent(){const t=_q(this.option),e=this.getUpdateAttribute();e.verticalFactor=this.orient==="top"||this.orient==="right"?-1:1,this.component=new Fb(oi({disableTriggerEvent:this.table.options.disableInteraction},t,e)),this.component.setAttributes(this.setLayoutStartPosition({x:this.x,y:this.y})),this.component.originAxis=this}resize(t,e){this.width=t-(this.orient==="top"||this.orient==="bottom"?this.padding[1]+this.padding[3]:0),this.height=e-(this.orient==="left"||this.orient==="right"?this.padding[2]+this.padding[0]:0),this.updateScaleRange(),this.computeData();const i=_q(this.option),r=this.getUpdateAttribute();r.verticalFactor=this.orient==="top"||this.orient==="right"?-1:1,this.component.setAttributes(oi({},i,r)),this.component.setAttributes(this.setLayoutStartPosition({x:this.x,y:this.y})),this.overlap()}overlap(){ane(this.component,this)}getLayoutRect(){return{width:this.width,height:this.height}}getUpdateAttribute(){this.table.tableNoFrameHeight,this.table.tableNoFrameWidth;const{width:t,height:e}=this.getLayoutRect(),i=cH(this.orient),r=mie(this.orient);let o={x:0,y:0},a=0;i?(o={x:t,y:0},a=t):r&&(o={x:0,y:e},a=e);const s=this.orient==="top"||this.orient==="bottom"?e:t;return{start:{x:0,y:0},end:o,title:{text:this.option.title.text,maxWidth:this._getTitleLimit(i)},items:this.getLabelItems(a),verticalLimitSize:s,verticalMinSize:s}}getLabelItems(t){return[this.tickData.latestData.map((e=>({id:e.value,label:e.value,value:t===0?0:this.scale.dataToPosition([e.value])/t,rawValue:e.value}))).filter((e=>e.value>=0&&e.value<=1))]}updateScaleRange(){var t,e,i,r,o,a,s,l;const h=(e=(t=this.option.innerOffset)===null||t===void 0?void 0:t.right)!==null&&e!==void 0?e:0,u=(r=(i=this.option.innerOffset)===null||i===void 0?void 0:i.left)!==null&&r!==void 0?r:0,d=(a=(o=this.option.innerOffset)===null||o===void 0?void 0:o.top)!==null&&a!==void 0?a:0,c=(l=(s=this.option.innerOffset)===null||s===void 0?void 0:s.bottom)!==null&&l!==void 0?l:0,{width:f,height:g}=this.getLayoutRect(),p=this.option.inverse||!1;let v=[0,0];cH(this.orient)?Qc(f)&&(v=p?[f-h,u]:[u,f-h]):Qc(g)&&(v=p?[d,g-c]:[g-c,d]),this.scale.updateRange(v)}setLayoutStartPosition(t){let{x:e,y:i}=t;return Qc(e)&&(e+=+(this.orient==="left")*this.getLayoutRect().width),Qc(i)&&(i+=+(this.orient==="top")*this.getLayoutRect().height),{x:e,y:i}}_getTitleLimit(t){var e,i,r;if(this.option.title.visible&&We((e=this.option.title.style)===null||e===void 0?void 0:e.maxLineWidth)){let o=((i=this.option.title.style)===null||i===void 0?void 0:i.angle)||0;if(!((r=this.option.title)===null||r===void 0)&&r.autoRotate&&We(this.option.title.angle)&&(o=this.option.orient==="left"?-90:90),t){const l=this.getLayoutRect().width,h=Math.abs(Math.cos(MA(o)));return h<1e-6?1/0:l/h}const a=this.getLayoutRect().height,s=Math.abs(Math.sin(MA(o)));return s<1e-6?1/0:a/s}return null}getScale(){return this.scale._scale}getDomainSpec(){return this.scale.domain}}function une(n,t){let e;return n==="left"?e=t.axisStyle.leftAxisStyle:n==="right"?e=t.axisStyle.rightAxisStyle:n==="top"?e=t.axisStyle.topAxisStyle:n==="bottom"&&(e=t.axisStyle.bottomAxisStyle),oi({},t.axisStyle.defaultAxisStyle,e)}function dne(n,t,e){if(!e)return{};const i=e.axis;let r,o;return t==="linear"||t==="log"||t==="symlog"?r=e.axisLinear:t==="band"&&(r=e.axisBand),n==="top"||n==="bottom"?o=e.axisX:n!=="left"&&n!=="right"||(o=e.axisY),oi({},i,r,o)}function cne(n,t){var e,i,r,o,a,s,l,h,u,d,c,f,g,p,v,m,y,b;const _=oi({},wT,n);let w=0;_.tick.visible!==!1&&(w=(e=_.tick.width)!==null&&e!==void 0?e:4);let C=0;if(_.label.visible){if(_.type==="band")_.domain.forEach((S=>{var A,T,M,R,L,B,P,k,E,D,I,O,H,F,N,$;_.label.formatMethod&&(S=_.label.formatMethod(S));const{width:V,height:X}=t.measureText(S,{fontSize:(M=(T=(A=_.label)===null||A===void 0?void 0:A.style)===null||T===void 0?void 0:T.fontSize)!==null&&M!==void 0?M:zp,fontWeight:(B=(L=(R=_.label)===null||R===void 0?void 0:R.style)===null||L===void 0?void 0:L.fontWeight)!==null&&B!==void 0?B:"normal",fontFamily:(E=(k=(P=_.label)===null||P===void 0?void 0:P.style)===null||k===void 0?void 0:k.fontFamily)!==null&&E!==void 0?E:Hp}),Z=((I=(D=_.label)===null||D===void 0?void 0:D.style)===null||I===void 0?void 0:I.maxLineWidth)||1/0,tt=((F=(H=(O=_.label)===null||O===void 0?void 0:O.style)===null||H===void 0?void 0:H.angle)!==null&&F!==void 0?F:0)+((($=(N=_.label)===null||N===void 0?void 0:N.style)===null||$===void 0?void 0:$.direction)==="vertical"?90:0);C=Math.max(C,Fp(Math.min(V,Z),X,tt).width)}));else{let S;if(!((i=n.sync)===null||i===void 0)&&i.tickAlign&&ra((r=n.tick)===null||r===void 0?void 0:r.tickMode))S=n.tick.tickMode();else if(Rt(n.__ticksForVTable))S=n.__ticksForVTable;else{const A=_.range,T=Math.abs(A.min)>1?Math.round(A.min):A.min,M=Math.abs(A.max)>1?Math.round(A.max):A.max;S=[MT(T),MT(M)]}S.forEach((A=>{var T,M,R,L,B,P,k,E,D,I,O,H,F,N,$,V;_.label.formatMethod&&(A=_.label.formatMethod(A));const{width:X,height:Z}=t.measureText(A,{fontSize:(R=(M=(T=_.label)===null||T===void 0?void 0:T.style)===null||M===void 0?void 0:M.fontSize)!==null&&R!==void 0?R:zp,fontWeight:(P=(B=(L=_.label)===null||L===void 0?void 0:L.style)===null||B===void 0?void 0:B.fontWeight)!==null&&P!==void 0?P:"normal",fontFamily:(D=(E=(k=_.label)===null||k===void 0?void 0:k.style)===null||E===void 0?void 0:E.fontFamily)!==null&&D!==void 0?D:Hp}),tt=((O=(I=_.label)===null||I===void 0?void 0:I.style)===null||O===void 0?void 0:O.maxLineWidth)||1/0,K=((N=(F=(H=_.label)===null||H===void 0?void 0:H.style)===null||F===void 0?void 0:F.angle)!==null&&N!==void 0?N:0)+(((V=($=_.label)===null||$===void 0?void 0:$.style)===null||V===void 0?void 0:V.direction)==="vertical"?90:0);C=Math.max(C,Fp(Math.min(X,tt),Z,K).width)}))}C+=(o=_.label.space)!==null&&o!==void 0?o:4}let x=0;if(_.title.visible&&Li(_.title.text)){const{width:S,height:A}=t.measureText(_.title.text,{fontSize:(l=(s=(a=_.title)===null||a===void 0?void 0:a.style)===null||s===void 0?void 0:s.fontSize)!==null&&l!==void 0?l:zp,fontWeight:(d=(u=(h=_.title)===null||h===void 0?void 0:h.style)===null||u===void 0?void 0:u.fontWeight)!==null&&d!==void 0?d:"normal",fontFamily:(g=(f=(c=_.title)===null||c===void 0?void 0:c.style)===null||f===void 0?void 0:f.fontFamily)!==null&&g!==void 0?g:Hp}),T=((v=(p=_.label)===null||p===void 0?void 0:p.style)===null||v===void 0?void 0:v.maxLineWidth)||1/0,M=Fp(Math.min(S,T),A,(y=(m=_.title)===null||m===void 0?void 0:m.style)===null||y===void 0?void 0:y.angle);x=n.orient!=="left"&&n.orient!=="right"||!_.title.autoRotate?M.width:M.height,x+=(b=_.title.space)!==null&&b!==void 0?b:4}return Math.ceil(w+C+x+1)}function fne(n,t){var e,i,r,o,a,s,l,h,u,d,c,f,g,p,v,m,y,b;const _=oi({},wT,n);let w=0;_.tick.visible!==!1&&(w=(e=_.tick.width)!==null&&e!==void 0?e:4);let C=0;if(_.label.visible){if(_.type==="band")_.domain.forEach((S=>{var A,T,M,R,L,B,P,k,E,D,I,O,H,F,N,$;_.label.formatMethod&&(S=_.label.formatMethod(S));const{width:V,height:X}=t.measureText(S,{fontSize:(M=(T=(A=_.label)===null||A===void 0?void 0:A.style)===null||T===void 0?void 0:T.fontSize)!==null&&M!==void 0?M:zp,fontWeight:(B=(L=(R=_.label)===null||R===void 0?void 0:R.style)===null||L===void 0?void 0:L.fontWeight)!==null&&B!==void 0?B:"normal",fontFamily:(E=(k=(P=_.label)===null||P===void 0?void 0:P.style)===null||k===void 0?void 0:k.fontFamily)!==null&&E!==void 0?E:Hp}),Z=((I=(D=_.label)===null||D===void 0?void 0:D.style)===null||I===void 0?void 0:I.maxLineWidth)||1/0,tt=((F=(H=(O=_.label)===null||O===void 0?void 0:O.style)===null||H===void 0?void 0:H.angle)!==null&&F!==void 0?F:0)+((($=(N=_.label)===null||N===void 0?void 0:N.style)===null||$===void 0?void 0:$.direction)==="vertical"?90:0);C=Math.max(C,Fp(Math.min(V,Z),X,tt).height)}));else{let S;if(!((i=n.sync)===null||i===void 0)&&i.tickAlign&&ra((r=n.tick)===null||r===void 0?void 0:r.tickMode))S=n.tick.tickMode();else if(Rt(n.__ticksForVTable))S=n.__ticksForVTable;else{const A=_.range,T=Math.abs(A.min)>1?Math.round(A.min):A.min,M=Math.abs(A.max)>1?Math.round(A.max):A.max;S=[MT(T),MT(M)]}S.forEach((A=>{var T,M,R,L,B,P,k,E,D,I,O,H,F,N,$,V;_.label.formatMethod&&(A=_.label.formatMethod(A));const{width:X,height:Z}=t.measureText(A,{fontSize:(R=(M=(T=_.label)===null||T===void 0?void 0:T.style)===null||M===void 0?void 0:M.fontSize)!==null&&R!==void 0?R:zp,fontWeight:(P=(B=(L=_.label)===null||L===void 0?void 0:L.style)===null||B===void 0?void 0:B.fontWeight)!==null&&P!==void 0?P:"normal",fontFamily:(D=(E=(k=_.label)===null||k===void 0?void 0:k.style)===null||E===void 0?void 0:E.fontFamily)!==null&&D!==void 0?D:Hp}),tt=((O=(I=_.label)===null||I===void 0?void 0:I.style)===null||O===void 0?void 0:O.maxLineWidth)||1/0,K=((N=(F=(H=_.label)===null||H===void 0?void 0:H.style)===null||F===void 0?void 0:F.angle)!==null&&N!==void 0?N:0)+(((V=($=_.label)===null||$===void 0?void 0:$.style)===null||V===void 0?void 0:V.direction)==="vertical"?90:0);C=Math.max(C,Fp(Math.min(X,tt),Z,K).height)}))}C+=(o=_.label.space)!==null&&o!==void 0?o:4}let x=0;if(_.title.visible&&_.title.text){const{width:S,height:A}=t.measureText(_.title.text,{fontSize:(l=(s=(a=_.title)===null||a===void 0?void 0:a.style)===null||s===void 0?void 0:s.fontSize)!==null&&l!==void 0?l:zp,fontWeight:(d=(u=(h=_.title)===null||h===void 0?void 0:h.style)===null||u===void 0?void 0:u.fontWeight)!==null&&d!==void 0?d:"normal",fontFamily:(g=(f=(c=_.title)===null||c===void 0?void 0:c.style)===null||f===void 0?void 0:f.fontFamily)!==null&&g!==void 0?g:Hp}),T=((v=(p=_.label)===null||p===void 0?void 0:p.style)===null||v===void 0?void 0:v.maxLineWidth)||1/0,M=Fp(Math.min(S,T),A,(y=(m=_.title)===null||m===void 0?void 0:m.style)===null||y===void 0?void 0:y.angle);x=n.orient!=="bottom"&&n.orient!=="top"||!_.title.autoRotate?M.height:M.width,x+=(b=_.title.space)!==null&&b!==void 0?b:4}return w+C+x+1}function MT(n){return typeof n!="number"&&(n=Number(n)),Number(n.toPrecision(1)).toString()}function Fp(n,t,e=0){const i=e*Math.PI/180,r=-n/2,o=-t/2,a=n/2,s=-t/2,l=n/2,h=t/2,u=-n/2,d=t/2,c={x:r*Math.cos(i)-o*Math.sin(i),y:r*Math.sin(i)+o*Math.cos(i)},f={x:a*Math.cos(i)-s*Math.sin(i),y:a*Math.sin(i)+s*Math.cos(i)},g={x:l*Math.cos(i)-h*Math.sin(i),y:l*Math.sin(i)+h*Math.cos(i)},p={x:u*Math.cos(i)-d*Math.sin(i),y:u*Math.sin(i)+d*Math.cos(i)},v=Math.min(c.x,f.x,g.x,p.x),m=Math.max(c.x,f.x,g.x,p.x),y=Math.min(c.y,f.y,g.y,p.y);return{width:m-v,height:Math.max(c.y,f.y,g.y,p.y)-y}}const gne='<svg t="1716726614852" class="icon" viewBox="0 0 1194 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2621" width="200" height="200"><path d="M1038.694079 367.237067c13.265507 23.342857-16.633865-40.004445-63.05621-40.004446H219.018794c-26.558738 0-46.46393 13.334815-63.05621 40.004446S0.006238 607.277601 0.006238 650.608819V940.647979a82.351494 82.351494 0 0 0 82.961402 83.349526H1111.702885a82.337632 82.337632 0 0 0 82.975264-83.349526V650.608819c0-43.331218-155.970208-283.371753-155.970208-283.371752zM730.066575 667.284269a136.328386 136.328386 0 0 1-132.738243 133.33429 133.417459 133.417459 0 0 1-132.738243-133.33429v-6.681269a40.6698 40.6698 0 0 0-36.497473-26.66963H73.015044l119.458874-220.02445s23.231965-40.004445 53.103614-40.004446h713.481918c26.544876 0 29.871649 10.008042 46.436207 40.004446L1128.33675 633.947231H769.904682c-26.184476 0-39.838107 7.623855-39.838107 33.337038zM338.505391 210.559919l-89.601086-86.69016a22.178487 22.178487 0 0 1 0-33.26773 21.984425 21.984425 0 0 1 33.170699 0l89.601087 86.676299a22.317102 22.317102 0 0 1 0 33.26773 24.950798 24.950798 0 0 1-33.1707 0z m252.197118-40.059891a25.532983 25.532983 0 0 1-6.639685-16.633865l-3.326773-126.694606A28.263709 28.263709 0 0 1 603.995739 0.515788c13.251646-3.326773 23.204242 10.021904 26.544877 23.342858V153.866163a28.249847 28.249847 0 0 1-23.259688 26.66963c-6.611961-3.312911-13.279369-3.312911-16.578419-10.035765z m235.646421 33.337038a22.372548 22.372548 0 0 1 0-33.337038l86.288175-90.030795a22.039871 22.039871 0 0 1 33.170699 0 22.289379 22.289379 0 0 1 0 33.364761l-82.961401 90.003072a25.962691 25.962691 0 0 1-36.483611 0z" fill="#8a8a8a" p-id="2622"></path></svg>';class pne{constructor(t,e){this._emptyTipOption={spaceBetweenTextAndIcon:20,text:"no data",textStyle:{fontSize:14,color:"#000"},icon:{image:gne,width:100,height:100}},this.isReleased=!1,this.table=e,this._emptyTipOption=Object.assign(this._emptyTipOption,t===!0?{}:t),Y(this._emptyTipOption.displayMode)||(this.table.isListTable()?this._emptyTipOption.displayMode="basedOnTable":this._emptyTipOption.displayMode="basedOnContainer"),this._emptyTipComponent=this._createOrUpdateEmptyTipComponent(this._getEmptyTipAttrs())}_createOrUpdateEmptyTipComponent(t){if(this._emptyTipComponent)Vb(t,this._cacheAttrs)||this._emptyTipComponent.setAttributes(t);else{const e=new Jst(t);e.name="emptyTip",this.table.scenegraph.stage.defaultLayer.appendChild(e),this._emptyTipComponent=e,this.bindEvents()}return this._emptyTipComponent}bindEvents(){this._emptyTipComponent.on("click",(t=>{const e=new yy;this._emptyTipComponent.forEachChildren((i=>{e.union(i.globalAABBBounds)})),e.contains(t.x,t.y)&&this.table.fireListeners("empty_tip_click",t)})),this._emptyTipComponent.on("dblclick",(t=>{const e=new yy;this._emptyTipComponent.forEachChildren((i=>{e.union(i.globalAABBBounds)})),e.contains(t.x,t.y)&&this.table.fireListeners("empty_tip_dblclick",t)}))}resize(){var t;if(!this._emptyTipComponent)return;const{leftHeaderWidth:e,topHeaderHeight:i,width:r,height:o}=this.getWidthAndHeight();this._emptyTipComponent.setAttributes({spaceBetweenTextAndIcon:this._emptyTipOption.spaceBetweenTextAndIcon,x:this.table.tableX+e,y:this.table.tableY+i,width:r,height:o,text:Object.assign(Object.assign({text:this._emptyTipOption.text},this._emptyTipOption.textStyle),{fill:(t=this._emptyTipOption.textStyle)===null||t===void 0?void 0:t.color}),icon:Object.assign({},this._emptyTipOption.icon)})}release(){this._emptyTipComponent&&this.table.scenegraph.stage.defaultLayer.removeChild(this._emptyTipComponent),this._emptyTipComponent=null,this.isReleased=!0}resetVisible(){(this.table.recordsCount&&this.table.recordsCount!==0||this.table.internalProps.layoutMap.rowCount!==this.table.internalProps.layoutMap.columnHeaderLevelCount)&&this.table.internalProps.layoutMap.colCount!==this.table.internalProps.layoutMap.rowHeaderLevelCount?this.table.scenegraph.stage.defaultLayer.children.includes(this._emptyTipComponent)&&this.table.scenegraph.stage.defaultLayer.removeChild(this._emptyTipComponent):this.table.scenegraph.stage.defaultLayer.children.includes(this._emptyTipComponent)||this.table.scenegraph.stage.defaultLayer.appendChild(this._emptyTipComponent)}getWidthAndHeight(){const t=this.table.transpose||this.table.options.indicatorsAsCol===!1?this.table.getFrozenColsWidth():0,e=!this.table.transpose||this.table.options.indicatorsAsCol?this.table.getFrozenRowsHeight():0;return{leftHeaderWidth:t,topHeaderHeight:e,width:(this._emptyTipOption.displayMode!=="basedOnContainer"&&this.table.columnHeaderLevelCount>0&&this.table.colCount>this.table.rowHeaderLevelCount?this.table.getDrawRange().width:this.table.tableNoFrameWidth)-t-this.table.getTheme().scrollStyle.width,height:(this._emptyTipOption.displayMode!=="basedOnContainer"&&this.table.rowHeaderLevelCount>0&&this.table.rowCount>this.table.columnHeaderLevelCount?this.table.getDrawRange().height:this.table.tableNoFrameHeight)-e-this.table.getTheme().scrollStyle.width}}_getEmptyTipAttrs(){var t;const{leftHeaderWidth:e,topHeaderHeight:i,width:r,height:o}=this.getWidthAndHeight();return{spaceBetweenTextAndIcon:this._emptyTipOption.spaceBetweenTextAndIcon,x:this.table.tableX+e,y:this.table.tableY+i,width:r,height:o,text:Object.assign(Object.assign({text:this._emptyTipOption.text},this._emptyTipOption.textStyle),{fill:(t=this._emptyTipOption.textStyle)===null||t===void 0?void 0:t.color}),icon:Object.assign({},this._emptyTipOption.icon)}}}var vne=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]])}return e};const mne={orient:"bottom",position:"middle",padding:30,title:{visible:!1,padding:0,textStyle:{fontSize:14,fill:"#000000",fontWeight:"normal"},space:12},item:{visible:!0,spaceCol:10,spaceRow:10,padding:2,background:{state:{selectedHover:{fill:"gray",fillOpacity:.7},unSelectedHover:{fill:"gray",fillOpacity:.2}}},shape:{space:4,state:{unSelected:{fillOpacity:.5}}},label:{space:4,style:{fill:"#89909D",fontSize:14},state:{unSelected:{fillOpacity:.5}}}},allowAllCanceled:!0,visible:!0};function yne(n,t){const e=oi({},mne,n),{title:i={},item:r={},pager:o={},background:a={},type:s,id:l,visible:h,orient:u,position:d,data:c,filter:f,regionId:g,regionIndex:p,seriesIndex:v,seriesId:m,padding:y}=e,b=vne(e,["title","item","pager","background","type","id","visible","orient","position","data","filter","regionId","regionIndex","seriesIndex","seriesId","padding"]);return i.visible&&(b.title=Wht(i)),Cr(r.focusIconStyle)||an(r.focusIconStyle),gs(r.shape),gs(r.label),gs(r.value),gs(r.background),TL(r.maxWidth)&&(r.maxWidth=Number(r.maxWidth.substring(0,r.maxWidth.length-1))*t.width/100),TL(r.width)&&(r.width=Number(r.width.substring(0,r.width.length-1))*t.width/100),TL(r.height)&&(r.height=Number(r.height.substring(0,r.height.length-1))*t.width/100),b.item=r,Cr(o.textStyle)||an(o.textStyle),gs(o.handler),b.pager=o,a.visible&&!Cr(a.style)&&(oi(b,a.style),Y(a.padding)&&(b.padding=a.padding)),b}class bne{constructor(t,e){var i,r,o,a;this.table=e,this.option=ag(t),this.orient=(i=t.orient)!==null&&i!==void 0?i:"left",this.visible=(r=t.visible)===null||r===void 0||r,this.position=(o=t.position)!==null&&o!==void 0?o:"middle",this.selectedData=(a=t.defaultSelected)!==null&&a!==void 0?a:null,this.createComponent(),this.initEvent()}createComponent(){const t=this.getLegendAttributes({width:this.table.tableNoFrameWidth,height:this.table.tableNoFrameHeight}),e=new s2(oi({},t,{defaultSelected:this.selectedData,disableTriggerEvent:this.table.options.disableInteraction}));e.name="legend",this.legendComponent=e,this.visible===!1&&(e.setAttributes({visible:!1,visibleAll:!1}),e.hideAll()),this.table.scenegraph.stage.defaultLayer.appendChild(e),this.adjustTableSize(t)}resize(){if(!this.legendComponent||this.visible===!1)return;const t=this.getLegendAttributes({width:this.table.tableNoFrameWidth,height:this.table.tableNoFrameHeight});this.legendComponent.setAttributes(t),this.adjustTableSize(this.legendComponent.attribute)}adjustTableSize(t){var e,i;if(!this.legendComponent||this.visible===!1)return;let r=isFinite(this.legendComponent.AABBBounds.width())?this.legendComponent.AABBBounds.width():0,o=isFinite(this.legendComponent.AABBBounds.height())?this.legendComponent.AABBBounds.height():0;if(r<=0||o<=0)return;const a=this.table.tableNoFrameWidth,s=this.table.tableNoFrameHeight,l=Se((i=(e=t.padding)!==null&&e!==void 0?e:this.option.padding)!==null&&i!==void 0?i:10);let h=0,u=0;this.orient==="left"?(h=l[3],u=0,r+=l[1]+l[3]):this.orient==="top"?(h=0,u=l[0],o+=l[0]+l[2]):this.orient==="right"?(h=a-r-l[1],u=0,r+=l[1]+l[3]):this.orient==="bottom"&&(h=0,u=s-o-l[2],o+=l[0]+l[2]);const d=this.orient==="bottom"||this.orient==="top"?"horizontal":"vertical",c=this.position;let f=0,g=0;d==="horizontal"?f=c==="middle"?(a-r)/2:c==="end"?a-r-l[1]:l[3]:g=c==="middle"?(s-o)/2:c==="end"?s-o-l[2]:l[0],this.legendComponent.setAttributes({dx:f,dy:g,x:h,y:u}),this.orient==="left"?(this.table.tableNoFrameWidth=this.table.tableNoFrameWidth-Math.ceil(r),this.table.tableX+=Math.ceil(r)):this.orient==="top"?(this.table.tableNoFrameHeight=this.table.tableNoFrameHeight-Math.ceil(o),this.table.tableY+=Math.ceil(o)):this.orient==="right"?this.table.tableNoFrameWidth=this.table.tableNoFrameWidth-Math.ceil(r):this.orient==="bottom"&&(this.table.tableNoFrameHeight=this.table.tableNoFrameHeight-Math.ceil(o))}getLegendAttributes(t){var e,i;const r=this.orient==="bottom"||this.orient==="top"?"horizontal":"vertical",o=yne(this.option,t),a=Se((i=(e=o.padding)!==null&&e!==void 0?e:this.option.padding)!==null&&i!==void 0?i:10);return Object.assign({layout:r,items:this.getLegendItems(),maxWidth:t.width-a[1]-a[3],maxHeight:t.height-a[0]-a[2]},o)}getLegendItems(){return this.option.data}initEvent(){this.legendComponent&&(this.legendComponent.addEventListener(Ta.legendItemClick,(t=>{const e=Ww(t,"detail.currentSelected");this.table.fireListeners(at.LEGEND_ITEM_CLICK,{model:this,value:e,event:t})})),this.legendComponent.addEventListener(Ta.legendItemHover,(t=>{const e=Ww(t,"detail");this.table.fireListeners(at.LEGEND_ITEM_HOVER,{model:this,value:e,event:t})})),this.legendComponent.addEventListener(Ta.legendItemUnHover,(t=>{const e=Ww(t,"detail");this.table.fireListeners(at.LEGEND_ITEM_UNHOVER,{model:this,value:e,event:t})})),this.legendComponent.addEventListener("legendItemAttributeUpdate",(t=>{this.table.scenegraph.updateNextFrame()})))}getLegendBounds(){return{width:isFinite(this.legendComponent.AABBBounds.width())?this.legendComponent.AABBBounds.width():0,height:isFinite(this.legendComponent.AABBBounds.height())?this.legendComponent.AABBBounds.height():0}}release(){this.legendComponent&&this.table.scenegraph.stage.defaultLayer.removeChild(this.legendComponent),this.legendComponent=null}}var _ne=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]])}return e};const RT={orient:"right",position:"middle",padding:30,title:{visible:!1,padding:0,textStyle:{fontSize:14,fontWeight:"normal",fill:{type:"palette",key:"titleFontColor"}},space:12},handler:{visible:!0},startText:{style:{fontSize:14,fontWeight:"normal",fill:{type:"palette",key:"labelFontColor"}}},endText:{style:{fontSize:14,fontWeight:"normal",fill:{type:"palette",key:"labelFontColor"}}},handlerText:{style:{fontSize:14,fontWeight:"normal",fill:{type:"palette",key:"labelFontColor"}}}},Cne={horizontal:Object.assign(Object.assign({},RT),{rail:{width:200,height:8,style:{fill:"rgba(0,0,0,0.04)"}}}),vertical:Object.assign(Object.assign({},RT),{rail:{width:8,height:200,style:{fill:"rgba(0,0,0,0.04)"}}})},wne={horizontal:Object.assign({sizeBackground:{fill:"#cdcdcd"},track:{style:{fill:"rgba(20,20,20,0.1)"}},rail:{width:200,height:4,style:{fill:"rgba(0,0,0,0.04)"}}},RT),vertical:Object.assign({sizeBackground:{fill:"#cdcdcd"},track:{style:{fill:"rgba(20,20,20,0.1)"}},rail:{width:4,height:200,style:{fill:"rgba(0,0,0,0.04)"}}},RT)};function xne(n,t){const e=oi({},(n.type==="color"?Cne:wne)[n.orient==="bottom"||n.orient==="top"?"horizontal":"vertical"],n),{title:i={},handler:r={},rail:o={},track:a={},startText:s,endText:l,handlerText:h,sizeBackground:u,background:d={},type:c,id:f,visible:g,orient:p,position:v,data:m,defaultSelected:y,field:b,filter:_,regionId:w,regionIndex:C,seriesIndex:x,seriesId:S,padding:A}=e,T=_ne(e,["title","handler","rail","track","startText","endText","handlerText","sizeBackground","background","type","id","visible","orient","position","data","defaultSelected","field","filter","regionId","regionIndex","seriesIndex","seriesId","padding"]);return i.visible&&(T.title=Wht(i)),T.showHandler=r.visible!==!1,Cr(r.style)||(T.handlerStyle=an(r.style)),Y(o.width)&&(T.railWidth=o.width),Y(o.height)&&(T.railHeight=o.height),Cr(o.style)||(T.railStyle=an(o.style)),Cr(a.style)||(T.trackStyle=an(a.style)),T.startText=gs(s),T.endText=gs(l),T.handlerText=gs(h),Cr(u)||(T.sizeBackground=an(u)),d.visible&&!Cr(d.style)&&(oi(T,d.style),Y(d.padding)&&(T.padding=d.padding)),T}class Sne{constructor(t,e){var i,r,o,a;this.table=e,this.option=ag(t),this.orient=(i=t.orient)!==null&&i!==void 0?i:"left",this.visible=(r=t.visible)===null||r===void 0||r,this.position=(o=t.position)!==null&&o!==void 0?o:"middle",this.selectedData=(a=t.defaultSelected)!==null&&a!==void 0?a:null,this.createComponent(),this.initEvent()}createComponent(){const t=this.getLegendAttributes({width:this.table.tableNoFrameWidth,height:this.table.tableNoFrameHeight});let e;e=this.option.type==="color"?new l2(oi({},t,{slidable:!0})):new h2(oi({},t,{slidable:!0})),e.name="legend",this.legendComponent=e,this.visible===!1&&(e.setAttributes({visible:!1,visibleAll:!1}),e.hideAll()),this.table.scenegraph.stage.defaultLayer.appendChild(e),this.adjustTableSize(t)}resize(){this.legendComponent&&this.visible!==!1&&(this.legendComponent.setAttributes({width:this.table.tableNoFrameWidth,height:this.table.tableNoFrameHeight}),this.adjustTableSize(this.legendComponent.attribute))}adjustTableSize(t){var e,i;if(!this.legendComponent||this.visible===!1)return;let r=isFinite(this.legendComponent.AABBBounds.width())?this.legendComponent.AABBBounds.width():0,o=isFinite(this.legendComponent.AABBBounds.height())?this.legendComponent.AABBBounds.height():0;if(r<=0||o<=0)return;const a=this.table.tableNoFrameWidth,s=this.table.tableNoFrameHeight,l=Se((i=(e=t.padding)!==null&&e!==void 0?e:this.option.padding)!==null&&i!==void 0?i:10);let h=0,u=0;this.orient==="left"?(h=l[3],u=0,r+=l[1]+l[3]):this.orient==="top"?(h=0,u=l[0],o+=l[0]+l[2]):this.orient==="right"?(h=a-r-l[1],u=0,r+=l[1]+l[3]):this.orient==="bottom"&&(h=0,u=s-o-l[2],o+=l[0]+l[2]);const d=this.orient==="bottom"||this.orient==="top"?"horizontal":"vertical",c=this.position;let f=0,g=0;d==="horizontal"?f=c==="middle"?(a-r)/2:c==="end"?a-r-l[1]:l[3]:g=c==="middle"?(s-o)/2:c==="end"?s-o-l[2]:l[0],this.legendComponent.setAttributes({dx:f,dy:g,x:h,y:u}),this.orient==="left"?(this.table.tableNoFrameWidth=this.table.tableNoFrameWidth-Math.ceil(r),this.table.tableX+=Math.ceil(r)):this.orient==="top"?(this.table.tableNoFrameHeight=this.table.tableNoFrameHeight-Math.ceil(o),this.table.tableY+=Math.ceil(o)):this.orient==="right"?this.table.tableNoFrameWidth=this.table.tableNoFrameWidth-Math.ceil(r):this.orient==="bottom"&&(this.table.tableNoFrameHeight=this.table.tableNoFrameHeight-Math.ceil(o))}getLegendAttributes(t){const e=this.orient==="bottom"||this.orient==="top"?"horizontal":"vertical",i=e==="horizontal"?"bottom":this.orient;return Object.assign(Object.assign({},xne(this.option)),{layout:e,align:i,min:this.option.min,max:this.option.max,value:this.option.value,[this.option.type==="color"?"colors":"sizeRange"]:this.option.type==="color"?this.option.colors:this.option.sizeRange})}initEvent(){this.legendComponent&&this.legendComponent.addEventListener("change",(t=>{const e=Ww(t,"detail.value");this.table.fireListeners(at.LEGEND_CHANGE,{model:this,value:e,event:t}),this.table.scenegraph.updateNextFrame()}))}getLegendBounds(){return{width:isFinite(this.legendComponent.AABBBounds.width())?this.legendComponent.AABBBounds.width():0,height:isFinite(this.legendComponent.AABBBounds.height())?this.legendComponent.AABBBounds.height():0}}release(){this.legendComponent&&this.table.scenegraph.stage.defaultLayer.removeChild(this.legendComponent),this.legendComponent=null}}function Ane(n,t){return n.type==="color"||n.type==="size"?new Sne(n,t):new bne(n,t)}class out{constructor(t){this._table=t}release(){this.unbindMenuElement(),this._menuElement&&this._menuElement.release(),this._menuElement=void 0}_getMenuElement(){return this._menuElement||(this._menuElement=this.createMenuElementInternal()),this._menuElement}bindMenuElement(t,e,i){return this._getMenuElement().bindToCell(this._table,t,e,i)}unbindMenuElement(){this._getMenuElement().unbindFromCell()}pointInMenuElement(t,e){return this._getMenuElement().pointInMenuElement(t,e)}getRootElement(){return this._getMenuElement().rootElement}}const TN="vtable__menu-element",ep=`${TN}--hidden`,qL=`${TN}--shown`;function Tne(){return sl("div",[TN,ep])}class Mne{constructor(t){var e,i,r;this._handler=new g2,this._rootElement=Tne(),this._rootElement.addEventListener("wheel",(o=>{o.stopPropagation()})),(e=this._rootElement)===null||e===void 0||e.addEventListener("mousedown",(o=>{o.stopPropagation(),o.preventDefault()})),(i=this._rootElement)===null||i===void 0||i.addEventListener("click",(o=>{if(o.stopPropagation(),o.preventDefault(),this._rootElement.classList.contains(ep))return;const{col:a,row:s,dropDownIndex:l,menuKey:h,text:u,hasChildren:d}=o.target;if(typeof l!="number"||d)return void o.stopPropagation();const c=t.isPivotTable()?t.internalProps.layoutMap.getPivotDimensionInfo(a,s):t.getHeaderField(a,s),f=t._dropDownMenuIsHighlight(a,s,l);t.fireListeners(at.DROPDOWN_MENU_CLICK,{col:a,row:s,field:c,menuKey:h,text:u,highlight:f,cellLocation:t.getCellLocation(a,s),event:o}),t.fireListeners(at.DROPDOWN_MENU_CLEAR,null),t.fireListeners(at.HIDE_MENU,null),o.stopPropagation()})),(r=this._rootElement)===null||r===void 0||r.addEventListener("mousemove",(o=>{this._rootElement.classList.contains(ep)||o.stopPropagation()}))}get rootElement(){return this._rootElement}release(){this.unbindFromCell();const t=this._rootElement;t?.parentElement&&t.parentElement.removeChild(t),this._handler.release(),delete this._rootElement}bindToCell(t,e,i,r){const o=this._rootElement;if(this._menuInstanceInfo=r,o?.classList.remove(qL),o?.classList.add(ep),this._canBindToCell(t,e,i)){if(o.innerHTML="",o.appendChild(r.content),this._bindCell(t,e,i,r.position,r.referencePosition))return o?.classList.add(qL),o?.classList.remove(ep),!0}else this.unbindFromCell();return!1}unbindFromCell(){const t=this._rootElement;this._menuInstanceInfo=void 0,t?.parentElement&&(t.classList.remove(qL),t.classList.add(ep))}_canBindToCell(t,e,i){var r;const o=t.getCellRangeRelativeRect({col:e,row:i}),a=(r=t.internalProps.menu.parentElement)!==null&&r!==void 0?r:t.getElement(),{top:s,bottom:l,left:h,right:u}=o;if(t.isFrozenCell(e,i))return!0;if(l<t.getFrozenRowsHeight()||u<t.getFrozenColsWidth()||h>t.tableNoFrameWidth-t.getRightFrozenColsWidth()||s>t.tableNoFrameHeight-t.getBottomFrozenRowsHeight())return!1;const{offsetHeight:d,offsetWidth:c}=a;return!(d<s)&&!(c<h)}_bindCell(t,e,i,r,o){var a;const s=this._rootElement,l=(a=t.internalProps.menu.parentElement)!==null&&a!==void 0?a:t.getElement(),{width:h,height:u,left:d,top:c}=l.getBoundingClientRect();if(s){s.parentElement!==l&&l.appendChild(s),s.style.left="0px";const f=.8*h;s.style.maxWidth=`${f}px`;const g=s.clientWidth,p=s.clientHeight;let v,m;r&&(v=r.x,m=r.y),o&&(v=o.rect.right-g,m=o.rect.bottom),m+p>u&&(m=u-p,v+=g-2),m<0&&(m/=2);let y=0,b=0;if(t.getElement()!==l){const{left:_,top:w}=t.getElement().getBoundingClientRect();y=w-c,b=_-d}return s.style.top=`${m+y}px`,v<0?v=0:v+g>h&&(v=h-g),s.style.left=`${v+b}px`,!0}return!1}pointInMenuElement(t,e){const i=this._rootElement,{x:r,y:o,width:a,height:s}=i.getBoundingClientRect();return t>r-5&&t<r+a+5&&e>o-5&&e<o+s+5}}class Hq extends out{createMenuElementInternal(){return new Nte(this._table)}}let Rne=class extends out{createMenuElementInternal(){return new Mne(this._table)}};const Pne={"dropdown-menu":function(n){return new Hq(n)},"context-menu":function(n){return new Hq(n)},container:n=>new Rne(n)};function Bne(n,t,e,i,r){var o,a,s;if(t===-1&&e===-1&&i==="context-menu")return r?.content?{type:i,position:r.position,referencePosition:(o=r.referencePosition)!==null&&o!==void 0?o:{rect:{left:0,right:0,top:0,bottom:0,width:0,height:0}},content:r.content}:null;const{lineHeight:l,textBaseline:h,textStick:u}=n._getCellStyle(t,e);let d=n.getCellRangeRelativeRect(n.getCellRange(t,e));u&&(d=n.getVisibleCellRangeRelativeRect({col:t,row:e}));let{left:c,right:f,bottom:g,top:p,width:v,height:m}=d;if(n.isHeader(t,e)&&({left:c,right:f,bottom:g,top:p,width:v,height:m}=n.internalProps.headerHelper.getDropDownIconRect(d,l,h||"middle")),r?.content)return{type:i,position:r.position,referencePosition:(a=r.referencePosition)!==null&&a!==void 0?a:{rect:{left:c,right:f,top:p,bottom:g,width:v,height:m}},content:r.content};if(i==="dropdown-menu"){let y=n.globalDropDownMenu;const b=n._getHeaderLayoutMap(t,e);y=(s=b.dropDownMenu)!==null&&s!==void 0?s:y;const _=b.pivotInfo;return typeof y=="function"&&(y=y({row:e,col:t,table:n})),{type:i,referencePosition:{rect:{left:c,right:f,top:p,bottom:g,width:v,height:m}},content:y,pivotInfo:_}}return null}class kne{constructor(t){this._table=t,this._menuInstances={},this._bindTableEvent(t)}release(){const t=this._menuInstances;for(const e in t)t[e].release();delete this._menuInstances,this._attachInfo=null}_bindToCell(t,e,i,r){var o;const a=this._attachInfo,s=this._getMenuInstanceInfo(t,e,i,r);if(!a||s&&a.instance===s.instance||((o=a.instance)===null||o===void 0||o.unbindMenuElement(),this._attachInfo=null),!s)return;const{instance:l,info:h}=s;if(l&&l.bindMenuElement(t,e,h)){const u=t===-1&&e===-1?{start:{col:-1,row:-1},end:{col:-1,row:-1}}:this._table.getCellRange(t,e);this._attachInfo={range:u,instance:l}}}_unbindFromCell(){const t=this._attachInfo;if(!t)return;const{instance:e}=t;e?.unbindMenuElement(),this._attachInfo=null}_isBindToCell(t,e){const i=this._attachInfo;return!!i&&$a(i.range,t,e)}pointInMenuElement(t,e){if(!this._attachInfo)return!1;const i=this._attachInfo,{instance:r}=i;return r.pointInMenuElement(t,e)}_bindTableEvent(t){t.on(at.DROPDOWN_ICON_CLICK,(e=>{this._attachInfo&&this._isBindToCell(e.col,e.row)?this._unbindFromCell():this._bindToCell(e.col,e.row,"dropdown-menu")})),t.on(at.DROPDOWN_MENU_CLEAR,(e=>{this._unbindFromCell()})),t.on(at.CONTEXTMENU_CELL,(e=>{var i,r,o,a;if(((i=t.internalProps.menu)===null||i===void 0?void 0:i.renderMode)==="html"){const s=t._getMouseAbstractPoint(e.event);let l=null;s.inTable&&typeof((r=t.internalProps.menu)===null||r===void 0?void 0:r.contextMenuItems)=="function"?l=t.internalProps.menu.contextMenuItems(t.getHeaderField(e.col,e.row),e.row,e.col,t):s.inTable&&Array.isArray((o=t.internalProps.menu)===null||o===void 0?void 0:o.contextMenuItems)&&(l=(a=t.internalProps.menu)===null||a===void 0?void 0:a.contextMenuItems),this._bindToCell(e.col,e.row,"context-menu",{content:l,position:{x:s.x,y:s.y}})}})),t.on(at.CONTEXTMENU_CANVAS,(e=>{var i,r,o,a;if(((i=t.internalProps.menu)===null||i===void 0?void 0:i.renderMode)==="html"){const s=t._getMouseAbstractPoint(e.event);let l=null;s.inTable&&typeof((r=t.internalProps.menu)===null||r===void 0?void 0:r.contextMenuItems)=="function"?l=t.internalProps.menu.contextMenuItems(t.getHeaderField(e.col,e.row),e.row,e.col,t):s.inTable&&Array.isArray((o=t.internalProps.menu)===null||o===void 0?void 0:o.contextMenuItems)&&(l=(a=t.internalProps.menu)===null||a===void 0?void 0:a.contextMenuItems),this._bindToCell(-1,-1,"context-menu",{content:l,position:{x:s.x,y:s.y}})}}))}_getMenuInstanceInfo(t,e,i,r){const o=this._table,a=this._menuInstances,s=Bne(o,t,e,i,r);return s?{instance:a&&a[i]||a&&(a[i]=Pne[i](o)),type:i,info:s}:null}containElement(t){var e;for(const i in this._menuInstances)if(!((e=this._menuInstances[i].getRootElement())===null||e===void 0)&&e.contains(t))return!0;return!1}}class Lne{constructor(t,e){this.isReleased=!1,this.table=e,this._titleOption=oi({orient:"top"},t),t.visible!==!1&&(this._titleComponent=this._createOrUpdateTitleComponent(this._getTitleAttrs()))}_createOrUpdateTitleComponent(t){if(this._titleComponent)Vb(t,this._cacheAttrs)||this._titleComponent.setAttributes(t);else{const e=new Kst(t);e.name="title",this.table.scenegraph.stage.defaultLayer.appendChild(e),this._titleComponent=e}return this._adjustTableSize(this._titleComponent.attribute),this._titleComponent}resize(){var t,e,i,r,o;if(!this._titleComponent)return;const a=Se((t=this._titleOption.padding)!==null&&t!==void 0?t:10),s=(e=this._titleOption.width)!==null&&e!==void 0?e:(this.table.widthMode==="adaptive"?this.table.tableNoFrameWidth:Math.min(this.table.tableNoFrameWidth,this.table.getDrawRange().width))-a[1]-a[3],l=(i=this._titleOption.height)!==null&&i!==void 0?i:(this.table.heightMode==="adaptive"?this.table.tableNoFrameHeight:Math.min(this.table.tableNoFrameHeight,this.table.getDrawRange().height))-a[0]-a[2];this._titleComponent.setAttributes({x:((r=this._titleOption.x)!==null&&r!==void 0?r:this._titleOption.orient==="right")?this.table.tableX+Math.min(this.table.tableNoFrameWidth,this.table.getDrawRange().width):this.table.tableX,y:((o=this._titleOption.y)!==null&&o!==void 0?o:this._titleOption.orient==="bottom")?this.table.tableY+this.table.tableNoFrameHeight:this.table.tableY,width:this._titleOption.orient==="top"||this._titleOption.orient==="bottom"?s:this._titleOption.width,height:this._titleOption.orient==="left"||this._titleOption.orient==="right"?l:this._titleOption.height,textStyle:Object.assign({width:s},this._titleOption.textStyle),subtextStyle:Object.assign({width:s},this._titleOption.subtextStyle)}),this._adjustTableSize(this._titleComponent.attribute)}_adjustTableSize(t){var e,i,r,o;const a=isFinite((e=this._titleComponent)===null||e===void 0?void 0:e.AABBBounds.width())?this._titleComponent.AABBBounds.width():0,s=isFinite((i=this._titleComponent)===null||i===void 0?void 0:i.AABBBounds.height())?this._titleComponent.AABBBounds.height():0;this._titleOption.orient==="left"?(this.table.tableNoFrameWidth=this.table.tableNoFrameWidth-Math.ceil(a),this.table.tableX+=Math.ceil(a)):this._titleOption.orient==="top"?(this.table.tableNoFrameHeight=this.table.tableNoFrameHeight-Math.ceil(s),this.table.tableY+=Math.ceil(s)):this._titleOption.orient==="right"?this.table.tableNoFrameWidth=this.table.tableNoFrameWidth-Math.ceil(a):this._titleOption.orient==="bottom"&&(this.table.tableNoFrameHeight=this.table.tableNoFrameHeight-Math.ceil(s)),this._cacheAttrs=t,this._titleOption.orient!=="right"&&this._titleOption.orient!=="bottom"||this._titleComponent.setAttributes({x:((r=this._titleOption.x)!==null&&r!==void 0?r:this._titleOption.orient==="right")?this.table.tableX+this.table.tableNoFrameWidth:this.table.tableX,y:((o=this._titleOption.y)!==null&&o!==void 0?o:this._titleOption.orient==="bottom")?this.table.tableY+this.table.tableNoFrameHeight:this.table.tableY})}release(){this._titleComponent&&this.table.scenegraph.stage.defaultLayer.removeChild(this._titleComponent),this._titleComponent=null,this.isReleased=!0}_getTitleAttrs(){var t,e,i,r,o,a,s,l,h,u,d;const c=this._titleOption.text||this._titleOption.subtext?10:0,f=Se((t=this._titleOption.padding)!==null&&t!==void 0?t:c),g=(e=this._titleOption.width)!==null&&e!==void 0?e:Math.min(this.table.tableNoFrameWidth,this.table.getDrawRange().width)-f[1]-f[3],p=(i=this._titleOption.height)!==null&&i!==void 0?i:Math.min(this.table.tableNoFrameHeight,this.table.getDrawRange().height)-f[0]-f[2];return{text:(r=this._titleOption.text)!==null&&r!==void 0?r:"",subtext:(o=this._titleOption.subtext)!==null&&o!==void 0?o:"",x:((a=this._titleOption.x)!==null&&a!==void 0?a:this._titleOption.orient==="right")?this.table.tableX+Math.min(this.table.tableNoFrameWidth,this.table.getDrawRange().width):this.table.tableX,y:((s=this._titleOption.y)!==null&&s!==void 0?s:this._titleOption.orient==="bottom")?this.table.tableY+this.table.tableNoFrameHeight:this.table.tableY,width:this._titleOption.orient==="top"||this._titleOption.orient==="bottom"?g:this._titleOption.width,height:this._titleOption.orient==="left"||this._titleOption.orient==="right"?p:this._titleOption.height,minWidth:this._titleOption.minWidth,maxWidth:this._titleOption.maxWidth,minHeight:this._titleOption.minHeight,maxHeight:this._titleOption.maxHeight,padding:this._titleOption.padding,align:(l=this._titleOption.align)!==null&&l!==void 0?l:"left",verticalAlign:(h=this._titleOption.verticalAlign)!==null&&h!==void 0?h:"top",textStyle:Object.assign({width:g},this._titleOption.textStyle),subtextStyle:Object.assign({width:g},this._titleOption.subtextStyle),dx:(u=this._titleOption.dx)!==null&&u!==void 0?u:0,dy:(d=this._titleOption.dy)!==null&&d!==void 0?d:0}}getComponentGraphic(){return this._titleComponent}}class Ene{constructor(t){this._table=t}release(){var t,e;this.unbindTooltipElement(),this._tooltipElement&&((e=(t=this._tooltipElement).release)===null||e===void 0||e.call(t)),this._tooltipElement=void 0}_getTooltipElement(){return this._tooltipElement||(this._tooltipElement=this.createTooltipElementInternal()),this._tooltipElement}bindTooltipElement(t,e,i,r){return this._getTooltipElement().bindToCell(this._table,t,e,i,r)}moveTooltipElement(t,e,i,r){this._getTooltipElement().move(this._table,t,e,i,r)}unbindTooltipElement(){this._getTooltipElement().unbindFromCell()}locateTooltipElement(t,e,i,r,o){this._getTooltipElement()._locate(this._table,t,e,i,r,o)}}function Dne(){if(Be.mode==="node")return;const n=document.createElement("style");n.id="vtable-tooltip-styleSheet",n.textContent=`
@keyframes vtable__bubble-tooltip-element--shown-animation {
	0% {
		opacity: 0;
	}
	100% {
		opacity: 1;
	}
}
.vtable__bubble-tooltip-element {
	position: absolute;
	
	// pointer-events: none;
	//user-select: none;
	max-width: 300px;
	z-index: 99999;

	background: #FFFFFF;
    border: 1px solid #E6E8ED;
    box-sizing: border-box;
    border-radius: 4px;
    box-shadow: 0px 2px 4px rgb(27 31 35 / 8%);
    color: #141414;
    font-size: 13px;
}
.vtable__bubble-tooltip-element--hidden {
	opacity: 0;
  pointer-events: none;
	user-select: none;
	/* transform: translate(-50%, -50%); */
	transition: opacity 75ms linear;
}
.vtable__bubble-tooltip-element--shown {
	opacity: 1;
	/* transform: translate(-50%, -50%); */
	animation: vtable__bubble-tooltip-element--shown-animation 150ms ease-out;
}
.vtable__bubble-tooltip-element__content {
	/* font-size: .75rem; */
	padding: 6px 8px;
	min-height: 1em;
	line-height: 1.5;
	width: 100%;
	display: block;
	white-space: pre-wrap;
	margin: 0;
	box-sizing: border-box;
	overflow: auto;
	word-wrap: break-word;
	position: relative;
	background-color: #FFF;
	z-index: 2;
	border-radius: 4px;
}
/*  WebKit Microsoft Edge */
.vtable__bubble-tooltip-element__content::-webkit-scrollbar {
  width: 0;
  height: 0;
  background-color: transparent;
}
/*  Opera Firefox  */
.vtable__bubble-tooltip-element__content > scrollbar-track {
  width: 0;
  height: 0;
  background-color: transparent;
}
/* Internet Explorer 11  Microsoft Edge */
.vtable__bubble-tooltip-element__content > scrollbar {
  width: 0;
  height: 0;
  background-color: transparent;
}
.vtable__bubble-tooltip-element__triangle {
	/* font-size: .75rem; */
	position: absolute;
	width: 10px;
	height: 10px;
	display: block;
	transform: rotate(45deg);
    transform-origin: 50% 50% 0;
	z-index: 1;
	background-color: #FFF;
	border: 1px solid #E6E8ED;
}
`,document.head.appendChild(n)}Dne();const K_="vtable__bubble-tooltip-element",zq=`${K_}__content`,Fq=`${K_}__triangle`,jg=`${K_}--hidden`,u0=`${K_}--shown`;class Ine{constructor(){this._handler=new g2;const t=this._rootElement=sl("div",[K_,jg]),e=sl("div",[zq]),i=sl("span",[Fq]);t.appendChild(i),t.appendChild(e),this._messageElement=t.querySelector(`.${zq}`)||void 0,this._triangleElement=t.querySelector(`.${Fq}`)||void 0,t.addEventListener("mousemove",(()=>{this._disappearDelayId&&clearTimeout(this._disappearDelayId)})),t.addEventListener("mouseleave",(()=>{this._disappearDelay=void 0,this.unbindFromCell()})),e.addEventListener("wheel",(r=>{r.stopPropagation()})),e.addEventListener("copy",(r=>{TXt(e)&&r.stopPropagation()}))}bindToCell(t,e,i,r,o){var a,s,l,h,u,d,c,f,g,p,v,m,y,b,_,w,C,x,S;this._disappearDelay=r?.disappearDelay,this._disappearDelayId&&clearTimeout(this._disappearDelayId);const A=this._rootElement,T=this._messageElement,M=this._triangleElement;if(A?.classList.remove(u0),A?.classList.add(jg),this._canBindToCell(t,e,i)){if(T.setAttribute("style",""),M.setAttribute("style",""),r?.className&&A.classList.add(r.className),!((a=r?.style)===null||a===void 0)&&a.bgColor&&(T.style.backgroundColor=(s=r?.style)===null||s===void 0?void 0:s.bgColor),!((l=r?.style)===null||l===void 0)&&l.bgColor&&(M.style.backgroundColor=(h=r?.style)===null||h===void 0?void 0:h.bgColor),M.style.display=((u=r?.style)===null||u===void 0?void 0:u.arrowMark)===!0?"block":"none",!((d=r?.style)===null||d===void 0)&&d.fontSize&&(T.style.fontSize=((f=(c=r?.style)===null||c===void 0?void 0:c.fontSize)!==null&&f!==void 0?f:12)+"px"),!((g=r?.style)===null||g===void 0)&&g.fontFamily&&(T.style.fontFamily=(p=r?.style)===null||p===void 0?void 0:p.fontFamily),!((v=r?.style)===null||v===void 0)&&v.color&&(T.style.color=(m=r?.style)===null||m===void 0?void 0:m.color),!((y=r?.style)===null||y===void 0)&&y.padding&&(T.style.padding=`${(b=r?.style)===null||b===void 0?void 0:b.padding.join("px ")}px`),!((_=r?.style)===null||_===void 0)&&_.maxHeight&&(T.style.maxHeight=`${(w=r?.style)===null||w===void 0?void 0:w.maxHeight}px`),!((C=r?.style)===null||C===void 0)&&C.maxWidth&&(T.style.maxWidth=`${(x=r?.style)===null||x===void 0?void 0:x.maxWidth}px`),T&&(T.textContent=r?.content),this._bindToCell(t,e,i,r?.position,r?.referencePosition,o,(S=r?.style)===null||S===void 0?void 0:S.arrowMark))return A?.classList.add(u0),A?.classList.remove(jg),!0}else this.unbindFromCell();return!1}release(){var t,e;this.unbindFromCell();const i=this._rootElement;i?.parentElement&&i.parentElement.removeChild(i),(e=(t=this._handler)===null||t===void 0?void 0:t.release)===null||e===void 0||e.call(t),delete this._rootElement,delete this._messageElement}move(t,e,i,r,o){const a=this._rootElement;this._canBindToCell(t,e,i)?(this._bindToCell(t,e,i,r?.position,r?.referencePosition,o),a?.classList.add(u0),a?.classList.remove(jg)):this.unbindFromCell()}unbindFromCell(){var t;if(this._disappearDelay)this._disappearDelayId=setTimeout((()=>{const e=this._rootElement;e?.parentElement&&(e.classList.remove(u0),e.classList.add(jg))}),(t=this._disappearDelay)!==null&&t!==void 0?t:0);else{const e=this._rootElement;e?.parentElement&&(e.classList.remove(u0),e.classList.add(jg))}}_canBindToCell(t,e,i){const r=t.getCellRangeRelativeRect({col:e,row:i}),o=t.getElement(),{bottom:a,left:s,right:l,top:h}=r;if(t.isFrozenCell(e,i))return!0;if(a<t.getFrozenRowsHeight()||l<t.getFrozenColsWidth()||s>t.tableNoFrameWidth-t.getRightFrozenColsWidth()||h>t.tableNoFrameHeight-t.getBottomFrozenRowsHeight())return!1;const{offsetHeight:u,offsetWidth:d}=o;return!(h>u)&&!(s>d)}_bindToCell(t,e,i,r,o,a,s){const l=this._rootElement,h=t.getCellRangeRelativeRect({col:e,row:i}),u=t.internalProps.tooltip.parentElement,d=t.internalProps.element.offsetWidth,{width:c}=h;if(l){let f,g;l.parentElement!==u&&u.appendChild(l),l.style.left="0px";const p=Math.min(.8*d,4*c);l.style.maxWidth=`${p}px`;const v=l.clientWidth,m=l.clientHeight;if(!r&&!o)return!1;{const T=this.getComputedPosition(t,e,i,r,o,a,s);g=T.x,f=T.y}l.style.left=`${g}px`,l.style.top=`${f}px`,GO()&&(l.style.fontSize="11px");const{x1:y,x2:b,y1:_,y2:w}=t.stateManager.menu.bounds,C=g,x=C+v,S=f,A=C+m;return!(t.stateManager.menu.isShow&&y<x&&b>C&&w>S&&_<A)}return!1}getComputedPosition(t,e,i,r,o,a,s){var l;const h=this._rootElement,u=t.getCellRangeRelativeRect({col:e,row:i}),{x:d,y:c}=t.internalProps.tooltip.parentElement.getBoundingClientRect(),{width:f,height:g,x:p,y:v}=t.internalProps.element.getBoundingClientRect(),{width:m}=u;let y,b;const _=Math.min(.8*f,4*m);h.style.maxWidth=`${_}px`;const w=h.clientWidth,C=h.clientHeight,x=s?6:0;if(r)b=r.x,y=r.y+x,this._triangleElement.style.left="50%",this._triangleElement.style.marginLeft="-5px",this._triangleElement.style.top="-5px";else if(o){let S=(l=o.placement)!==null&&l!==void 0?l:yo.bottom;const A=o.rect.left+o.rect.width/2,T=o.rect.top+o.rect.height/2,M=o.rect.top,R=o.rect.bottom,L=o.rect.left,B=o.rect.right;let P=0;const k=()=>{P++,P>=4||(this.removeStyleFromTriangle(),S===yo.top?(b=A-w/2,y=M-C-x,this._triangleElement.style.left="50%",this._triangleElement.style.marginLeft="-5px",this._triangleElement.style.bottom="-5px",a&&y<0&&(S=yo.right,k())):S===yo.bottom?(b=A-w/2,y=R+x,this._triangleElement.style.left="50%",this._triangleElement.style.marginLeft="-5px",this._triangleElement.style.top="-5px",a&&y+C>g&&(S=yo.left,k())):S===yo.left?(y=T-C/2,b=L-w-x,this._triangleElement.style.top="50%",this._triangleElement.style.marginTop="-5px",this._triangleElement.style.right="-5px",a&&b<0&&(S=yo.top,k())):S===yo.right&&(y=T-C/2,b=B+x,this._triangleElement.style.top="50%",this._triangleElement.style.marginTop="-5px",this._triangleElement.style.left="-5px",a&&b+w>f&&(S=yo.bottom,k())))};k()}return a&&(b<0?b=0:b+h.offsetWidth>f&&(b=f-h.offsetWidth)),{x:b+p-d,y:y+v-c}}removeStyleFromTriangle(){this._triangleElement.style.left="",this._triangleElement.style.right="",this._triangleElement.style.top="",this._triangleElement.style.bottom="",this._triangleElement.style.marginLeft="",this._triangleElement.style.marginTop=""}_locate(t,e,i,r,o,a){const s=this.getComputedPosition(t,e,i,r,o,a),l=s.x,h=s.y;this._rootElement.style.left=`${l}px`,this._rootElement.style.top=`${h}px`}}class One extends Ene{createTooltipElementInternal(){return new Ine}}const Hne={"bubble-tooltip":function(n){return new One(n)}};class zne{constructor(t,e){this._table=t,this._tooltipInstances={},this._bindTableEvent(t),this.confine=e}release(){var t,e;const i=this._tooltipInstances;for(const r in i)(e=(t=i[r])===null||t===void 0?void 0:t.release)===null||e===void 0||e.call(t);delete this._tooltipInstances,this._attachInfo=null}_bindToCell(t,e,i){var r;const o=this._attachInfo,a=this._getTooltipInstanceInfo(t,e);if(!o||a&&o.instance===a||((r=o.instance)===null||r===void 0||r.unbindTooltipElement(),this._attachInfo=null),!!a&&a&&a.bindTooltipElement(t,e,i,this.confine)){const s=this._table.getCellRange(t,e);this._attachInfo={range:s,instance:a,tooltipOptions:i}}}_move(t,e,i){const r=this._attachInfo;if(!r||!$a(r.range,t,e))return;const{instance:o}=r;o?.moveTooltipElement(t,e,i,this.confine)}moveToPosition(t,e,i,r){const o=this._attachInfo;if(!o||!$a(o.range,t,e))return;const{instance:a}=o;this._attachInfo.tooltipOptions.position=i,this._attachInfo.tooltipOptions.referencePosition=r,a?.locateTooltipElement(t,e,i,r,this.confine)}_unbindFromCell(){const t=this._attachInfo;if(!t)return;const{instance:e}=t;e?.unbindTooltipElement(),this._attachInfo=null}_isBindCell(t,e){const i=this._attachInfo;return!!i&&$a(i.range,t,e)}_bindTableEvent(t){t.on(at.MOUSEENTER_CELL,(e=>{if(GO())return;const{x1:i,x2:r,y1:o,y2:a}=t.stateManager.menu.bounds;if(t.stateManager.menu.isShow&&typeof e.x=="number"&&typeof e.y=="number"&&e.x>i&&e.x<r&&e.y>o&&e.y<a)return;const{col:s,row:l}=e;this.showTooltip(s,l)})),t.on(at.MOUSEMOVE_CELL,(e=>{var i,r;if(!GO()){if(!((r=(i=this._attachInfo)===null||i===void 0?void 0:i.tooltipOptions)===null||r===void 0)&&r.referencePosition){const o=this._attachInfo.tooltipOptions.referencePosition,{event:a}=e,{left:s,right:l,top:h,bottom:u}=o.rect,d=t._getMouseAbstractPoint(a);d.inTable&&d.x>=s-5&&d.x<=l+5&&d.y>=h-5&&d.y<=u+5||this._unbindFromCell()}this._attachInfo&&t.stateManager.menu.isShow&&this._bindToCell(e.col,e.row)}})),t.on(at.MOUSELEAVE_CELL,(e=>{this._unbindFromCell()})),t.on(at.SELECTED_CELL,(e=>{this._isBindCell(e.col,e.row)&&this._unbindFromCell()})),t.on(at.MOUSELEAVE_TABLE,(e=>{this._unbindFromCell()})),t.on(at.SCROLL,(e=>{this._unbindFromCell()}))}showTooltip(t,e){var i,r,o;let a;const s=this._table,l=s.getHeaderDescription(t,e);if(l){const h=s.getCellRangeRelativeRect({col:t,row:e});a={content:l,referencePosition:{placement:s.internalProps.tooltip.position,rect:h},disappearDelay:(i=s.internalProps.tooltip.overflowTextTooltipDisappearDelay)!==null&&i!==void 0?i:0,style:s.theme.tooltipStyle}}else if(ra((r=s.internalProps.tooltip)===null||r===void 0?void 0:r.isShowOverflowTextTooltip)?s.internalProps.tooltip.isShowOverflowTextTooltip(t,e,s):s.internalProps.tooltip.isShowOverflowTextTooltip){const h=s.getCellOverflowText(t,e),u=s.getCellRangeRelativeRect({col:t,row:e});h&&(a={content:l?`${l}
  ${h}`:h,referencePosition:{placement:s.internalProps.tooltip.position,rect:u},disappearDelay:(o=s.internalProps.tooltip.overflowTextTooltipDisappearDelay)!==null&&o!==void 0?o:0,style:s.theme.tooltipStyle})}a?this._bindToCell(t,e,a):this._unbindFromCell()}_getTooltipInstanceInfo(t,e){const i=this._table,r=this._tooltipInstances;return r&&r["bubble-tooltip"]||r&&(r["bubble-tooltip"]=Hne["bubble-tooltip"](i))}isBinded(t){var e;return JSON.stringify(t)===JSON.stringify((e=this._attachInfo)===null||e===void 0?void 0:e.tooltipOptions)}}const Fne=()=>{It.registerComponent("axis",hne),It.registerFunction("computeAxisComponentWidth",cne),It.registerFunction("computeAxisComponentHeight",fne),It.registerFunction("getAxisConfigInPivotChart",iee)},Nne=()=>{It.registerComponent("emptyTip",pne)},Wne=()=>{It.registerFunction("createLegend",Ane)},Vne=()=>{It.registerComponent("menuHandler",kne)},Gne=()=>{It.registerComponent("title",Lne)},$ne=()=>{It.registerComponent("tooltipHandler",zne)},jne=()=>{vUt(),z$t()};class Une{constructor(t){this.titleRows=[],this.showedTitleRows=[],this.rowNow=-1,this.skipStartRow=-1,this.skipEndRow=-1,this.table=t,this.table.on("scroll",(e=>{e.scrollDirection==="vertical"&&this.updateGroupTitle()})),this.table.on("tree_hierarchy_state_change",(e=>{this.updateGroupTitle()})),this.table.on("resize_column",(e=>{this.updateGroupTitle()}))}updateGroupTitle(){this.table.scrollTop===0?(this.titleRows=[],this.showedTitleRows=[]):this.skipStartRow!==-1&&this.skipEndRow!==-1&&this.skipStartRow!==this.table.scenegraph.proxy.bodyTopRow-1?(this.table.scenegraph.proxy.screenTopRow<=this.skipStartRow||this.table.scenegraph.proxy.screenTopRow>=this.skipEndRow)&&(this.skipStartRow=-1,this.skipEndRow=-1,this.updateGroupTitleInfo()):(this.skipStartRow=-1,this.skipEndRow=-1,this.updateGroupTitleInfo()),this.updateScenegraph()}updateGroupTitleInfo(){this.rowNow=this.table.scenegraph.proxy.screenTopRow+this.titleRows.length;const t=this.table.getRecordIndexByCell(0,this.rowNow),e=this.table.getRecordIndexByCell(0,this.rowNow+1);this.getTitleRowsByRecordIndex(t,e)}getTitleRowsByRecordIndex(t,e){Rt(t)||(t=[t]),Rt(e)||(e=[e]);for(let s=0;s<t.length;s++){const l=t.slice(0,s+1);this.table.dataSource.getRaw(l)}const i=[],r=e.length===t.length+1;let o=t.slice(0,r?t.length:t.length-1);const a=this.table.dataSource.currentIndexedData;for(let s=this.rowNow-this.table.columnHeaderLevelCount;s>=0;s--){const l=a[s];if(Rt(l)&&o.length===l.length){let h=!0;for(let u=0;u<l.length;u++)if(l[u]!==o[u]){h=!1;break}h&&(i.push(s+this.table.columnHeaderLevelCount),o=o.slice(0,o.length-1))}else if(l===t[0]){i.push(s+this.table.columnHeaderLevelCount);break}}this.titleRows=i.reverse()}updateScenegraph(){const{table:t}=this,{shadowGroup:e,shadowGroupFrozen:i}=Xne(t);this.showedTitleRows.length=0;let r=0;for(let o=0;o<t.colCount;o++){let a;o<t.frozenColCount?(a=new ve({x:t.getColsWidth(0,o-1),y:t.getFrozenRowsHeight()}),i.add(a)):(a=new ve({x:t.getColsWidth(t.frozenColCount,o-1),y:t.getFrozenRowsHeight()}),e.add(a)),a.col=o;for(let s=0;s<this.titleRows.length;s++){const l=this.titleRows[s];if(Yne(l,this.rowNow,t.scenegraph.proxy.screenTopRow,this.titleRows)){o===0&&r++;continue}o===0&&this.showedTitleRows.push(l);const h=t.scenegraph.getCell(o,l);if(h.role==="cell"){const u=aut(h);u.setAttributes({y:40*s}),a.add(u)}else{const u=Na(o,l,t,!0,!0);u.setAttributes({y:40*s}),a.add(u)}}}r>0&&this.skipStartRow===-1&&this.skipEndRow===-1&&(this.skipStartRow=t.scenegraph.proxy.screenTopRow-1,this.skipEndRow=t.scenegraph.proxy.screenTopRow+1)}}function Yne(n,t,e,i){return n===t&&n!==e+i.length-1?!0:n===e+i.indexOf(n)+1&&n<t}function aut(n){const t=n.clone();if(t.role=n.role,t.col=n.col,t.row=n.row,t.mergeStartCol=n.mergeStartCol,t.mergeStartRow=n.mergeStartRow,t.mergeEndCol=n.mergeEndCol,t.mergeEndRow=n.mergeEndRow,t.contentWidth=n.contentWidth,t.contentHeight=n.contentHeight,t.role==="cell"){const e=ei({x:0,y:0,width:t.attribute.width,height:t.attribute.height});t.add(e)}if(n.type==="group"){const e=t;n.forEachChildren((i=>{const r=aut(i);e.add(r)}))}return t}function Xne(n){const t=n.scenegraph.colHeaderGroup,e=n.scenegraph.cornerHeaderGroup;if(!t.border){const o=ei({x:0,y:0,width:0,height:0,cursor:"pointer"});t.add(o),t.border=o,o.attachShadow(o.shadowRoot),o.name="border-rect",o.addEventListener("click",(a=>{const s=n.listTreeStickCellPlugin.titleRows,{shadowTarget:l}=a.pickParams,h=Uf(l),{col:u,row:d}=h;Nq(d-s.indexOf(d),n)}))}if(!e.border){const o=ei({x:0,y:0,width:0,height:0,cursor:"pointer"});e.add(o),e.border=o,o.attachShadow(o.shadowRoot),o.name="border-rect",o.addEventListener("click",(a=>{const s=n.listTreeStickCellPlugin.titleRows,{shadowTarget:l}=a.pickParams,h=Uf(l),{col:u,row:d}=h;Nq(d-s.indexOf(d),n)}))}const i=t.border.shadowRoot,r=e.border.shadowRoot;return i.removeAllChild(),r.removeAllChild(),{shadowGroup:i,shadowGroupFrozen:r}}function Nq(n,t){const e=t.getDrawRange();if(Y(n)&&n>=t.frozenRowCount){const i=t.getFrozenRowsHeight(),r=t.getRowsHeight(0,n-1);t.scrollTop=Math.min(r-i,t.getAllRowsHeight()-e.height)-1}t.scenegraph.updateNextFrame()}const qne=()=>{It.registerComponent("listTreeStickCellPlugin",Une)};function Kne(n,t,e,i,r,o,a,s,l,h,u,d,c,f,g,p,v,m,y){var b,_,w,C,x,S,A,T,M,R,L,B,P,k,E,D,I,O,H,F,N,$,V,X,Z;const tt=bee()[u],K=g._getCellStyle(r,o),rt=w2("padding",K,r,o,g);if(Y(rt)&&(l=rt),!n){const q=Nl(r,o,p,g);m&&(n=g.scenegraph.highPerformanceGetCell(r,o,!0))&&n.role==="cell"&&n.setAttributes({x:e,y:i,width:a,height:s,lineWidth:(_=(b=p?.group)===null||b===void 0?void 0:b.lineWidth)!==null&&_!==void 0?_:void 0,fill:(C=(w=p?.group)===null||w===void 0?void 0:w.fill)!==null&&C!==void 0?C:void 0,stroke:(S=(x=p?.group)===null||x===void 0?void 0:x.stroke)!==null&&S!==void 0?S:void 0,strokeArrayWidth:q,strokeArrayColor:(T=(A=p?.group)===null||A===void 0?void 0:A.strokeArrayColor)!==null&&T!==void 0?T:void 0,cursor:(R=(M=p?.group)===null||M===void 0?void 0:M.cursor)!==null&&R!==void 0?R:void 0,lineDash:(B=(L=p?.group)===null||L===void 0?void 0:L.lineDash)!==null&&B!==void 0?B:void 0,lineCap:"butt",clip:!0,cornerRadius:p.group.cornerRadius}),n&&n.role==="cell"||((n=new ve({x:e,y:i,width:a,height:s,lineWidth:(k=(P=p?.group)===null||P===void 0?void 0:P.lineWidth)!==null&&k!==void 0?k:void 0,fill:(D=(E=p?.group)===null||E===void 0?void 0:E.fill)!==null&&D!==void 0?D:void 0,stroke:(O=(I=p?.group)===null||I===void 0?void 0:I.stroke)!==null&&O!==void 0?O:void 0,strokeArrayWidth:q,strokeArrayColor:(F=(H=p?.group)===null||H===void 0?void 0:H.strokeArrayColor)!==null&&F!==void 0?F:void 0,cursor:($=(N=p?.group)===null||N===void 0?void 0:N.cursor)!==null&&$!==void 0?$:void 0,lineDash:(X=(V=p?.group)===null||V===void 0?void 0:V.lineDash)!==null&&X!==void 0?X:void 0,lineCap:"butt",clip:!0,cornerRadius:p.group.cornerRadius})).role="cell",n.col=r,n.row=o,t?.addCellGroup(n))}if(n.AABBBounds.width(),y&&Array.isArray(g.getCellValue(r,o))||!y){const q=new Dp(v,{stroke:!1,x:l[3],y:l[0],canvas:(Z=g.canvas)!==null&&Z!==void 0?Z:g.scenegraph.stage.window.getContext().canvas,mode:g.options.mode,modeParams:g.options.modeParams,spec:g.options.specTransformInCell?g.options.specTransformInCell(d,r,o):d,ClassType:tt,width:a-l[3]-l[1],height:s-l[2]-l[0],chartInstance:c,dataId:f,data:g.getCellValue(r,o)||[],cellPadding:l,dpr:g.internalProps.pixelRatio,axes:g.isPivotChart()?g.internalProps.layoutMap.getChartAxes(r,o):[],tableChartOption:g.options.chartOption,col:r,row:o});n.appendChild(q),g.internalProps.layoutMap.setChartInstance(r,o,q.chartInstance)}return n}class Zne extends ve{constructor(t){super(t),this._autoWidth=!1,this._autoHeight=!1,this._leftGroup=new ve({pickable:!1,fill:!1,stroke:!1}),this._leftGroup.role="content-left",this._rightGroup=new ve({pickable:!1,fill:!1,stroke:!1}),this._rightGroup.role="content-right",this._checkboxGroup=new ve({pickable:!1,fill:!1,stroke:!1}),this._checkboxGroup.role="content-center",this.appendChild(this._leftGroup),this.appendChild(this._rightGroup),this.appendChild(this._checkboxGroup)}addLeftOccupyingIcon(t){var e,i,r;t.setAttribute("x",this._leftGroup.width+((e=t.attribute.marginLeft)!==null&&e!==void 0?e:0)),this._leftGroup.appendChild(t),this._leftGroup.setDeltaWidth(((i=t.attribute.marginLeft)!==null&&i!==void 0?i:0)+((r=t.attribute.marginRight)!==null&&r!==void 0?r:0)+t.attribute.width)}addRightOccupyingIcon(t){var e,i,r;t.setAttribute("x",this._rightGroup.width+((e=t.attribute.marginLeft)!==null&&e!==void 0?e:0)),this._rightGroup.appendChild(t),this._rightGroup.setDeltaWidth(((i=t.attribute.marginLeft)!==null&&i!==void 0?i:0)+((r=t.attribute.marginRight)!==null&&r!==void 0?r:0)+t.attribute.width)}addCheckbox(t){this._checkboxGroup.appendChild(t)}setCheckboxContentOption(t){this._autoWidth=t.autoWidth,this._autoHeight=t.autoHeight,this._cellWidth=t.cellWidth,this._originCellWidth=t.cellWidth,this._cellHeight=t.cellHeight,this._align=t.align,this._baseline=t.baseline}layout(){let t=this._leftGroup.width;t===1/0&&(t=0);let e=this._rightGroup.width;if(e===-1/0&&(e=0),this._autoWidth){const a=this._checkboxGroup.width;this._cellWidth=t+e+a,this.setAttribute("width",this._cellWidth)}else{const a=this._cellWidth-t-e;this.updateCenterLayout(a);const s=this._checkboxGroup.width;this._cellWidth=t+e+s,this.setAttribute("width",this._cellWidth)}this.updateHorizontalPos();const i=this._leftGroup.height,r=this._rightGroup.height,o=this._checkboxGroup.height;this._cellHeight=Math.max(i,r,o),this.setAttribute("height",this._cellHeight),this.updateVerticalPos()}updateCenterLayout(t){let e=t;this._checkboxGroup.forEachChildren((o=>{o instanceof $h&&(e-=o.AABBBounds.width())}));const i=this._checkboxGroup.getChildByName("checkbox-content");i instanceof $h&&i.setAttribute("width",e);let r=0;this._checkboxGroup.forEachChildren((o=>{o.setAttribute("x",r),r+=o.AABBBounds.width()}))}updateHorizontalPos(){this._leftGroup.setAttribute("x",0),this._rightGroup.setAttribute("x",this._cellWidth-this._rightGroup.width),this._checkboxGroup.setAttribute("x",4),this._align==="left"||this._align==="start"?this.setAttribute("dx",0):this._align==="center"?this.setAttribute("dx",-this.attribute.width/2):this._align!=="right"&&this._align!=="end"||this.setAttribute("dx",-this.attribute.width)}updateVerticalPos(){this._baseline==="top"?(this._leftGroup.setAttribute("y",0),this._rightGroup.setAttribute("y",0),this._checkboxGroup.setAttribute("y",0)):this._baseline==="middle"?(this._leftGroup.forEachChildren((t=>{t.setAttribute("y",(this._leftGroup.height-t.AABBBounds.height())/2)})),this._rightGroup.forEachChildren((t=>{t.setAttribute("y",(this._rightGroup.height-t.AABBBounds.height())/2)})),this._leftGroup.setAttribute("y",this._cellHeight/2-this._leftGroup.height/2),this._rightGroup.setAttribute("y",this._cellHeight/2-this._rightGroup.height/2),this._checkboxGroup.setAttribute("y",this._cellHeight/2-this._checkboxGroup.height/2)):this._baseline==="bottom"&&(this._leftGroup.forEachChildren((t=>{t.setAttribute("y",this._leftGroup.height-t.AABBBounds.height())})),this._rightGroup.forEachChildren((t=>{t.setAttribute("y",this._rightGroup.height-t.AABBBounds.height())})),this._leftGroup.setAttribute("y",this._cellHeight-this._leftGroup.height),this._rightGroup.setAttribute("y",this._cellHeight-this._rightGroup.height),this._checkboxGroup.setAttribute("y",this._cellHeight-this._checkboxGroup.height))}}function Jne(n,t,e,i,r,o,a,s,l,h,u,d,c,f,g,p,v,m,y){var b,_,w,C,x,S,A,T,M,R,L,B,P,k,E,D,I,O,H,F,N,$,V,X;if(!n){const W=Nl(r,o,g,f);m&&(n=f.scenegraph.highPerformanceGetCell(r,o,!0))&&n.role==="cell"&&n.setAttributes({x:e,y:i,width:s,height:l,lineWidth:(_=(b=g?.group)===null||b===void 0?void 0:b.lineWidth)!==null&&_!==void 0?_:void 0,fill:(C=(w=g?.group)===null||w===void 0?void 0:w.fill)!==null&&C!==void 0?C:void 0,stroke:(S=(x=g?.group)===null||x===void 0?void 0:x.stroke)!==null&&S!==void 0?S:void 0,strokeArrayWidth:W,strokeArrayColor:(T=(A=g?.group)===null||A===void 0?void 0:A.strokeArrayColor)!==null&&T!==void 0?T:void 0,cursor:(R=(M=g?.group)===null||M===void 0?void 0:M.cursor)!==null&&R!==void 0?R:void 0,lineDash:(B=(L=g?.group)===null||L===void 0?void 0:L.lineDash)!==null&&B!==void 0?B:void 0,lineCap:"butt",clip:!0,cornerRadius:g.group.cornerRadius}),n&&n.role==="cell"||((n=new ve({x:e,y:i,width:s,height:l,lineWidth:(k=(P=g?.group)===null||P===void 0?void 0:P.lineWidth)!==null&&k!==void 0?k:void 0,fill:(D=(E=g?.group)===null||E===void 0?void 0:E.fill)!==null&&D!==void 0?D:void 0,stroke:(O=(I=g?.group)===null||I===void 0?void 0:I.stroke)!==null&&O!==void 0?O:void 0,strokeArrayWidth:W,strokeArrayColor:(F=(H=g?.group)===null||H===void 0?void 0:H.strokeArrayColor)!==null&&F!==void 0?F:void 0,cursor:($=(N=g?.group)===null||N===void 0?void 0:N.cursor)!==null&&$!==void 0?$:void 0,lineDash:(X=(V=g?.group)===null||V===void 0?void 0:V.lineDash)!==null&&X!==void 0?X:void 0,lineCap:"butt",clip:!0,cornerRadius:g.group.cornerRadius})).role="cell",n.col=r,n.row=o,t?.addCellGroup(n))}let Z;if(c){let W=r,G=o;v&&(W=v.start.col,G=v.start.row),Z=f.getCellIcons(W,G)}let tt=0,K=0,rt=0,q=0,it=[];if(Array.isArray(Z)&&Z.length!==0){const{leftIconWidth:W,rightIconWidth:G,contentLeftIcons:j,absoluteRightIconWidth:U}=um(Z,n,v,f);tt=W+G,K=W,rt=G,it=j,q=U,n.forEachChildren((J=>{J.role==="icon-left"?J.setAttribute("x",J.attribute.x+h[3]):J.role==="icon-right"?J.setAttribute("x",J.attribute.x+s-G-h[1]):J.role==="icon-absolute-right"&&J.setAttribute("x",J.attribute.x+s-U-h[1])})),n.forEachChildren((J=>{d==="middle"?J.setAttribute("y",(l-J.AABBBounds.height())/2):d==="bottom"?J.setAttribute("y",l-J.AABBBounds.height()-h[2]):J.setAttribute("y",h[0])}))}const nt=Qne(r,o,a-tt,s,l,h,g,p,f,y);if(it.length!==1||it[0].name!==er.expandIconName&&it[0].name!==er.collapseIconName)nt&&n.appendChild(nt),nt.render();else{const W=new Zne({x:0,y:0,fill:!1,stroke:!1,pickable:!1});W.name="checkbox-content",W.setCheckboxContentOption({autoWidth:!1,autoHeight:!1,cellWidth:s-(h[1]+h[3]),cellHeight:l-h[0]-h[2],align:u,baseline:d});const G={addedHierarchyOffset:0};it.forEach((J=>{const ot=Yo(J,void 0,n.col,n.row,v,f,G);ot.role="icon-content-left",ot.name=J.name,W.addLeftOccupyingIcon(ot)})),nt&&W.addCheckbox(nt),n.appendChild(W),W.layout(),W.AABBBounds.width(),W.AABBBounds.height();const j=s-(h[1]+h[3]),U=l-(h[0]+h[2]);n.forEachChildren((J=>{J.role==="icon-left"?J.setAttribute("x",J.attribute.x+h[3]):J.role==="icon-right"?J.setAttribute("x",J.attribute.x+j-rt+h[3]):J.role==="icon-absolute-right"?J.setAttribute("x",J.attribute.x+j-q+h[3]+h[1]):J.name!=="content"&&J.name!=="checkbox-content"||(u==="center"&&J.type!=="richtext"?J.setAttribute("x",h[3]+K+(j-K-rt)/2):u==="right"&&J.type!=="richtext"?J.setAttribute("x",h[3]+j-rt):J.setAttribute("x",h[3]+K))})),n.forEachChildren((J=>{J.name!==Ls&&(d==="middle"?J?._checkboxGroup&&J._leftGroup.setAttribute("y",h[0]+(U-J._checkboxGroup.AABBBounds.height())/2):d==="bottom"?J.setAttribute("y",h[0]+U-J.AABBBounds.height()):J.setAttribute("y",h[0]))}))}return s-=h[1]+h[3]+tt,l-=h[0]+h[2],u==="center"?nt.setAttribute("x",h[3]+K+(s-nt.AABBBounds.width())/2):u==="right"?nt.setAttribute("x",h[3]+K+s-nt.AABBBounds.width()):nt.setAttribute("x",h[3]+K),d==="middle"?nt.setAttribute("y",h[0]+(l-nt.AABBBounds.height())/2):d==="bottom"?nt.setAttribute("y",h[0]+l-nt.AABBBounds.height()):nt.setAttribute("y",h[0]),n}function Qne(n,t,e,i,r,o,a,s,l,h){var u,d,c,f;const g=l._getCellStyle(n,t),p=gt("size",g,n,t,l),v=gt("spaceBetweenTextAndIcon",g,n,t,l),m=gt("defaultFill",g,n,t,l),y=gt("defaultStroke",g,n,t,l),b=gt("disableFill",g,n,t,l),_=gt("checkedFill",g,n,t,l),w=gt("checkedStroke",g,n,t,l),C=gt("disableCheckedFill",g,n,t,l),x=gt("disableCheckedStroke",g,n,t,l),S=gt("checkIconImage",g,n,t,l),A=gt("indeterminateIconImage",g,n,t,l),T=l.getCellValue(n,t),M=l.getCellOriginValue(n,t);let R,L,B=(u=T)!==null&&u!==void 0?u:"";if(Bn(T)?(R=T.checked,L=T.disable,B=(d=T.text)!==null&&d!==void 0?d:""):typeof T=="boolean"&&(R=T,B=""),l.internalProps.layoutMap.isSeriesNumber(n,t)){const Z=l.getFieldData(s.field,n,t);Z&&(typeof Z=="string"||(typeof Z=="object"?(R=Z.checked,L=Z.disable):typeof Z=="boolean"&&(R=Z)))}R=l.stateManager.syncCheckedState(n,t,s.field,R);const P=To(n,t,l),k=l._getCellStyle(n,t),E=(c=k.autoWrapText)!==null&&c!==void 0?c:l.internalProps.autoWrapText,{lineClamp:D}=k,{checked:I,disable:O}=s;if(R==null||typeof R=="function"){const Z=Je(I,{col:n,row:t,table:l,context:null,value:T,dataValue:M});R=l.stateManager.syncCheckedState(n,t,s.field,Z)}const H=Je(O,{col:n,row:t,table:l,context:null,value:T,dataValue:M}),F=e==="auto",N=l.isAutoRowHeight(t),$={text:B.length===1?B[0]:B,maxLineWidth:F?1/0:i-(o[1]+o[3]+P)-p-v,textAlign:"left",textBaseline:"top",autoWrapText:E,lineClamp:D,wordBreak:"break-word",heightLimit:N?-1:r-Math.floor(o[0]+o[2]),pickable:!1,dx:h?0:P,whiteSpace:B.length!==1||E?"normal":"no-wrap"},V={x:0,y:0,text:a.text?Object.assign({},a.text,$):$,icon:{width:Math.floor(p/1.4),height:Math.floor(p/1.4)},box:{width:p,height:p},dx:h?P:0,spaceBetweenTextAndIcon:v,disabled:(f=L??H)!==null&&f!==void 0&&f};R==="indeterminate"?(V.checked=void 0,V.indeterminate=!0):(V.checked=R,V.indeterminate=void 0),m&&(V.box.fill=m),y&&(V.box.stroke=y),b&&(V.box.disableFill=b),_&&(V.box.checkedFill=_),w&&(V.box.checkedStroke=w),C&&(V.box.disableCheckedFill=C),x&&(V.box.disableCheckedStroke=x),S&&(V.icon.checkIconImage=S),A&&(V.icon.indeterminateIconImage=A);const X=new $h(V);return X.name="checkbox",X}function tre(n,t,e,i,r,o,a,s,l,h,u,d,c,f,g,p){var v,m,y,b,_,w,C,x,S,A,T,M;if(!n){const B=Nl(r,o,f,c);(n=new ve({x:e,y:i,width:s,height:l,lineWidth:(m=(v=f?.group)===null||v===void 0?void 0:v.lineWidth)!==null&&m!==void 0?m:void 0,fill:(b=(y=f?.group)===null||y===void 0?void 0:y.fill)!==null&&b!==void 0?b:void 0,stroke:(w=(_=f?.group)===null||_===void 0?void 0:_.stroke)!==null&&w!==void 0?w:void 0,strokeArrayWidth:B,strokeArrayColor:(x=(C=f?.group)===null||C===void 0?void 0:C.strokeArrayColor)!==null&&x!==void 0?x:void 0,cursor:(A=(S=f?.group)===null||S===void 0?void 0:S.cursor)!==null&&A!==void 0?A:void 0,lineDash:(M=(T=f?.group)===null||T===void 0?void 0:T.lineDash)!==null&&M!==void 0?M:void 0,lineCap:"butt",clip:!0,cornerRadius:f.group.cornerRadius})).role="cell",n.col=r,n.row=o,t?.addCellGroup(n)}const{width:R,height:L}=ere(r,o,a,s,l,h,f,g,n,p,c);return s-=h[1]+h[3],l-=h[0]+h[2],n.forEachChildren((B=>{u==="center"?B.setAttribute("x",h[3]+B.attribute.x+(s-R)/2):u==="right"?B.setAttribute("x",h[3]+B.attribute.x+s-R):B.setAttribute("x",h[3]+B.attribute.x),d==="middle"?B.setAttribute("y",h[0]+B.attribute.y+(l-L)/2):d==="bottom"?B.setAttribute("y",h[0]+B.attribute.y+l-L):B.setAttribute("y",h[0]+B.attribute.y)})),n}function ere(n,t,e,i,r,o,a,s,l,h,u){var d,c,f,g;const p=u._getCellStyle(n,t);let v=gt("size",p,n,t,u),m=gt("innerRadius",p,n,t,u),y=gt("outerRadius",p,n,t,u);const b=gt("spaceBetweenTextAndIcon",p,n,t,u),_=gt("spaceBetweenRadio",p,n,t,u),w=gt("defaultFill",p,n,t,u),C=gt("defaultStroke",p,n,t,u),x=gt("disableFill",p,n,t,u),S=gt("checkedFill",p,n,t,u),A=gt("checkedStroke",p,n,t,u),T=gt("disableCheckedFill",p,n,t,u),M=gt("disableCheckedStroke",p,n,t,u);yt(y)?v=2*y:y=Math.round(v/2),(!yt(m)||m<0)&&(m=Math.round(y/7*3));const R=u.getCellValue(n,t),L=u.getCellOriginValue(n,t),B=To(n,t,u),P=u._getCellStyle(n,t),k=(d=P.autoWrapText)!==null&&d!==void 0?d:u.internalProps.autoWrapText,{lineClamp:E}=P,D=e==="auto",I=u.isAutoRowHeight(t),O={maxLineWidth:D?1/0:i-(o[1]+o[3]+B)-v-b,textAlign:"left",textBaseline:"top",autoWrapText:k,lineClamp:E,wordBreak:"break-word",heightLimit:I?-1:r-Math.floor(o[0]+o[2]),pickable:!1,dx:B},H={x:0,y:0,text:a.text?Object.assign({},a.text,O):O,circle:{innerRadius:m,outerRadius:y},spaceBetweenTextAndIcon:b};w&&(H.circle.fill=w),C&&(H.circle.stroke=C),x&&(H.circle.disableFill=x),S&&(H.circle.checkedFill=S),A&&(H.circle.checkedStroke=A),T&&(H.circle.disableCheckedFill=T),M&&(H.circle.disableCheckedStroke=M);let F=0,N=0;const $=(c=s.radioDirectionInCell)!==null&&c!==void 0?c:"vertical";if(Rt(R))R.forEach(((V,X)=>{var Z,tt;const K=Wq(V,L,X,n,t,s,k,H,u);K&&l.appendChild(K),K.id=`radio-${(Z=h?.start.col)!==null&&Z!==void 0?Z:n}-${(tt=h?.start.row)!==null&&tt!==void 0?tt:t}-${X}`,K.render();const rt=K.AABBBounds;$==="vertical"?(K.setAttribute("y",N),N+=rt.height()+(X!==R.length-1?_:0),F=Math.max(F,rt.width())):$==="horizontal"&&(K.setAttribute("x",F),F+=rt.width()+(X!==R.length-1?_:0),N=Math.max(N,rt.height()))}));else{const V=Wq(R,L,void 0,n,t,s,k,H,u);V&&l.appendChild(V),V.id=`radio-${(f=h?.start.col)!==null&&f!==void 0?f:n}-${(g=h?.start.row)!==null&&g!==void 0?g:t}`,V.render();const X=V.AABBBounds;F=X.width(),N=X.height()}return{width:F,height:N}}function Wq(n,t,e,i,r,o,a,s,l){const h=ire(n,t,e,i,r,o,l),u=nre(n,t,i,r,o,l),d=Bn(n)?n.text:fl(n)?"":n??"",c=oi({},s,{checked:h,disabled:u,text:{text:d.length===1?d[0]:d,whiteSpace:d.length!==1||a?"normal":"no-wrap"},boundsPadding:0}),f=new Gf(c);return f.name="radio",f}function ire(n,t,e,i,r,o,a){var s,l;const h=(s=o.radioCheckType)!==null&&s!==void 0?s:"column";let u,d;return Bn(n)?u=n.checked:typeof n=="boolean"&&(u=n),u=a.stateManager.syncRadioState(i,r,o.field,h,e,u),u!=null&&typeof u!="function"||(d=Je(o.checked,{col:i,row:r,table:a,context:null,value:n,dataValue:t}),u=a.stateManager.syncRadioState(i,r,o.field,h,e,d)),(l=u??d)!==null&&l!==void 0&&l}function nre(n,t,e,i,r,o){var a;let s;Bn(n)&&(s=n.disable);const l=Je(r.disable,{col:e,row:i,table:o,context:null,value:n,dataValue:t});return(a=s??l)!==null&&a!==void 0&&a}function rre(n,t,e,i,r,o,a,s,l,h,u,d,c,f,g,p,v,m){var y,b,_,w,C,x,S,A,T,M,R,L,B,P,k,E,D,I,O,H,F,N,$,V;if(!n){const rt=Nl(r,o,g,f);m&&(n=f.scenegraph.highPerformanceGetCell(r,o,!0))&&n.role==="cell"&&n.setAttributes({x:e,y:i,width:s,height:l,lineWidth:(b=(y=g?.group)===null||y===void 0?void 0:y.lineWidth)!==null&&b!==void 0?b:void 0,fill:(w=(_=g?.group)===null||_===void 0?void 0:_.fill)!==null&&w!==void 0?w:void 0,stroke:(x=(C=g?.group)===null||C===void 0?void 0:C.stroke)!==null&&x!==void 0?x:void 0,strokeArrayWidth:rt,strokeArrayColor:(A=(S=g?.group)===null||S===void 0?void 0:S.strokeArrayColor)!==null&&A!==void 0?A:void 0,cursor:(M=(T=g?.group)===null||T===void 0?void 0:T.cursor)!==null&&M!==void 0?M:void 0,lineDash:(L=(R=g?.group)===null||R===void 0?void 0:R.lineDash)!==null&&L!==void 0?L:void 0,lineCap:"butt",clip:!0,cornerRadius:g.group.cornerRadius}),n&&n.role==="cell"||((n=new ve({x:e,y:i,width:s,height:l,lineWidth:(P=(B=g?.group)===null||B===void 0?void 0:B.lineWidth)!==null&&P!==void 0?P:void 0,fill:(E=(k=g?.group)===null||k===void 0?void 0:k.fill)!==null&&E!==void 0?E:void 0,stroke:(I=(D=g?.group)===null||D===void 0?void 0:D.stroke)!==null&&I!==void 0?I:void 0,strokeArrayWidth:rt,strokeArrayColor:(H=(O=g?.group)===null||O===void 0?void 0:O.strokeArrayColor)!==null&&H!==void 0?H:void 0,cursor:(N=(F=g?.group)===null||F===void 0?void 0:F.cursor)!==null&&N!==void 0?N:void 0,lineDash:(V=($=g?.group)===null||$===void 0?void 0:$.lineDash)!==null&&V!==void 0?V:void 0,lineCap:"butt",clip:!0,cornerRadius:g.group.cornerRadius})).role="cell",n.col=r,n.row=o,t?.addCellGroup(n))}let X;if(c){let rt=r,q=o;v&&(rt=v.start.col,q=v.start.row),X=f.getCellIcons(rt,q)}let Z=0,tt=0;if(Array.isArray(X)&&X.length!==0){const{leftIconWidth:rt,rightIconWidth:q,absoluteRightIconWidth:it}=um(X,n,v,f);Z=rt+q,tt=rt,n.forEachChildren((nt=>{nt.role==="icon-left"?nt.setAttribute("x",nt.attribute.x+h[3]):nt.role==="icon-right"?nt.setAttribute("x",nt.attribute.x+s-q-h[1]):nt.role==="icon-absolute-right"&&nt.setAttribute("x",nt.attribute.x+s-it-h[1])})),n.forEachChildren((nt=>{d==="middle"?nt.setAttribute("y",(l-nt.AABBBounds.height())/2):d==="bottom"?nt.setAttribute("y",l-nt.AABBBounds.height()-h[2]):nt.setAttribute("y",h[0])}))}const K=ore(r,o,a-Z,s,l,h,g,p,f);return K&&n.appendChild(K),K.render(),s-=h[1]+h[3]+Z,l-=h[0]+h[2],u==="center"?K.setAttribute("x",h[3]+tt+(s-K.AABBBounds.width())/2):u==="right"?K.setAttribute("x",h[3]+tt+s-K.AABBBounds.width()):K.setAttribute("x",h[3]+tt),d==="middle"?K.setAttribute("y",h[0]+(l-K.AABBBounds.height())/2):d==="bottom"?K.setAttribute("y",h[0]+l-K.AABBBounds.height()):K.setAttribute("y",h[0]),n}function ore(n,t,e,i,r,o,a,s,l){var h,u,d,c;const f=l._getCellStyle(n,t),g=gt("spaceBetweenTextAndCircle",f,n,t,l),p=gt("circleRadius",f,n,t,l),v=gt("boxWidth",f,n,t,l),m=gt("boxHeight",f,n,t,l),y=gt("checkedFill",f,n,t,l),b=gt("uncheckedFill",f,n,t,l),_=gt("disableCheckedFill",f,n,t,l),w=gt("disableUncheckedFill",f,n,t,l),C=gt("circleFill",f,n,t,l),x=l.getCellValue(n,t),S=l.getCellOriginValue(n,t);let A,T,M=(h=x)!==null&&h!==void 0?h:"";Bn(x)?(A=x.checked,T=x.disable,M=(u=x.text)!==null&&u!==void 0?u:""):typeof x=="boolean"&&(A=x,M=""),A=l.stateManager.syncCheckedState(n,t,s.field,A);const R=To(n,t,l),L=l._getCellStyle(n,t),B=(d=L.autoWrapText)!==null&&d!==void 0?d:l.internalProps.autoWrapText,{lineClamp:P}=L,{checked:k,disable:E,uncheckedText:D,checkedText:I}=s;if(A==null||typeof A=="function"){const tt=Je(k,{col:n,row:t,table:l,context:null,value:x,dataValue:S});A=l.stateManager.syncCheckedState(n,t,s.field,tt)}const O=Je(E,{col:n,row:t,table:l,context:null,value:x,dataValue:S}),H=Je(I,{col:n,row:t,table:l,context:null,value:x,dataValue:S}),F=Je(D,{col:n,row:t,table:l,context:null,value:x,dataValue:S}),N=e==="auto",$=l.isAutoRowHeight(t),V={text:M.length===1?M[0]:M,maxLineWidth:N?1/0:i-(o[1]+o[3]+R)-2*p-g,textAlign:"left",textBaseline:"top",autoWrapText:B,lineClamp:P,wordBreak:"break-word",heightLimit:$?-1:r-Math.floor(o[0]+o[2]),pickable:!1,dx:R,whiteSpace:M.length!==1||B?"normal":"no-wrap",checkedText:H,uncheckedText:F},X={x:0,y:0,text:a.text?Object.assign({},a.text,V):V,circle:{radius:p},box:{width:v,height:m},spaceBetweenTextAndCircle:g,disabled:(c=T??O)!==null&&c!==void 0&&c};X.checked=A,b&&(X.box.uncheckedFill=b),w&&(X.box.disableUncheckedFill=w),y&&(X.box.checkedFill=y),_&&(X.box.disableCheckedFill=_),C&&(X.circle.fill=C);const Z=new Wb(X);return Z.name="switch",Z}const cu=new Jie,fu=new gm;function are(n,t,e,i,r,o,a,s,l,h,u,d){var c,f,g,p,v,m,y,b,_,w,C,x,S,A,T,M,R,L,B,P,k,E,D,I;if(!n){const H=Nl(r,o,u,h);d&&(n=h.scenegraph.highPerformanceGetCell(r,o,!0))&&n.role==="cell"&&n.setAttributes({x:e,y:i,width:a,height:s,lineWidth:(f=(c=u?.group)===null||c===void 0?void 0:c.lineWidth)!==null&&f!==void 0?f:void 0,fill:(p=(g=u?.group)===null||g===void 0?void 0:g.fill)!==null&&p!==void 0?p:void 0,stroke:(m=(v=u?.group)===null||v===void 0?void 0:v.stroke)!==null&&m!==void 0?m:void 0,strokeArrayWidth:H,strokeArrayColor:(b=(y=u?.group)===null||y===void 0?void 0:y.strokeArrayColor)!==null&&b!==void 0?b:void 0,cursor:(w=(_=u?.group)===null||_===void 0?void 0:_.cursor)!==null&&w!==void 0?w:void 0,lineDash:(x=(C=u?.group)===null||C===void 0?void 0:C.lineDash)!==null&&x!==void 0?x:void 0,lineCap:"butt",clip:!0,cornerRadius:u.group.cornerRadius}),n&&n.role==="cell"||((n=new ve({x:e,y:i,width:a,height:s,lineWidth:(A=(S=u?.group)===null||S===void 0?void 0:S.lineWidth)!==null&&A!==void 0?A:void 0,fill:(M=(T=u?.group)===null||T===void 0?void 0:T.fill)!==null&&M!==void 0?M:void 0,stroke:(L=(R=u?.group)===null||R===void 0?void 0:R.stroke)!==null&&L!==void 0?L:void 0,strokeArrayWidth:H,strokeArrayColor:(P=(B=u?.group)===null||B===void 0?void 0:B.strokeArrayColor)!==null&&P!==void 0?P:void 0,cursor:(E=(k=u?.group)===null||k===void 0?void 0:k.cursor)!==null&&E!==void 0?E:void 0,lineDash:(I=(D=u?.group)===null||D===void 0?void 0:D.lineDash)!==null&&I!==void 0?I:void 0,lineCap:"butt",clip:!0,cornerRadius:u.group.cornerRadius})).role="cell",n.col=r,n.row=o,t?.addCellGroup(n))}const O=sre(r,o,a,s,l,h);return O&&n.appendChild(O),n}function sre(n,t,e,i,r,o){let a,s;const l=o.internalProps.layoutMap.getBody(n,t).sparklineSpec,h=o.getCellValue(n,t);if(!Array.isArray(h))return;const u=r[3],d=r[0];e-=r[1]+r[3];const c=i-=r[0]+r[2];if(typeof l=="function"){const b={col:n,row:t,dataValue:o.getCellOriginValue(n,t)||"",value:o.getCellValue(n,t)||"",rect:o.getCellRangeRelativeRect(o.getCellRange(n,t)),table:o};a=l(b),s=Vq(a,u,d,e,i)}else a=l,s=Vq(l,u,d,e,i);const f=[],g=[];let p,v;if(typeof a.xField=="object")cu.domain(a.xField.domain),p=a.xField.field;else if(typeof a.xField=="string"){const b=h.map((_=>_[a.xField]));cu.domain(b),p=a.xField}else Array.isArray(h)&&(cu.domain(Array.from({length:h.length},((b,_)=>_))),p=a.xField);if(cu.range([0,e]),typeof a.yField=="object")fu.domain(a.yField.domain),v=a.yField.field;else if(typeof a.yField=="string"){const b=Gq(h,a.yField);fu.domain([Math.min(...b),Math.max(...b)]),v=a.yField}else if(Array.isArray(h)){const b=Gq(h);fu.domain([Math.min(...b),Math.max(...b)]),v=a.yField}if(fu.range([0,i]),typeof a.xField=="object"&&Array.isArray(a.xField.domain)){const b=h.map((w=>w[a.xField.field])),_=a.xField.domain;for(let w=0;w<_.length;w++){let C=!1;for(let x=0;x<b.length;x++)if(_[w]===b[x]){const S=h[x];if(!Y(S[p])||!Y(S[v]))break;f.push({x:0+cu.scale(S[p]),y:c-fu.scale(S[v]),defined:Y(S[v])}),g.push(S),C=!0;break}C||(f.push({x:0+cu.scale(_[w]),y:0,defined:!1}),g.push({[p]:_[w],[v]:null}))}}else for(let b=0;b<h.length;b++){const _=h[b];f.push({x:0+cu.scale(p?_[p]:b),y:c-fu.scale(v?_[v]:_),defined:Y(v?_[v]:_),rawData:_}),g.push(_)}const m=s.getChildByName("sparkline-line");m&&m.setAttribute("points",f),m.bandwidth=cu.step(),m.min=fu.range()[0],m.max=fu.range()[1];const y=s.getChildByName("sparkline-symbol-group");if(y){const b=a.pointShowRule==="isolatedPoint";if(a.pointShowRule==="all")for(let _=0;_<f.length;_++){const{x:w,y:C,defined:x}=f[_];if(x){const S=Av({x:w,y:C});y.appendChild(S)}}else if(b)for(let _=0;_<f.length;_++){const{x:w,y:C,defined:x}=f[_];if(x&&(!f[_-1]||!f[_-1].defined)&&(!f[_+1]||!f[_+1].defined)){const S=Av({x:w,y:C});y.appendChild(S)}}}return s}function Vq(n,t,e,i,r){var o,a,s,l,h,u,d,c,f,g,p,v,m,y,b,_,w,C,x,S,A,T;let M;M=typeof n=="function"?n(null):n;const R=new ve({x:t,y:e,width:i,height:r,stroke:!1,fill:!1});if(R.name="sparkline",M.type==="line"){const L=Wi({x:0,y:0,curveType:M.smooth?"monotoneX":"linear",stroke:(s=(a=(o=M.line)===null||o===void 0?void 0:o.style)===null||a===void 0?void 0:a.stroke)!==null&&s!==void 0?s:"blue",lineWidth:(u=(h=(l=M.line)===null||l===void 0?void 0:l.style)===null||h===void 0?void 0:h.strokeWidth)!==null&&u!==void 0?u:2});L.name="sparkline-line",R.addChild(L),M.crosshair&&(L.hover=(c=(d=M.crosshair)===null||d===void 0?void 0:d.style)!==null&&c!==void 0?c:{stroke:"#000",interpolate:"linear"});const B=new ve({x:0,y:0,width:i,height:r,stroke:!1,fill:!1});B.name="sparkline-symbol-group",B.setTheme({symbol:{stroke:(p=(g=(f=M.point)===null||f===void 0?void 0:f.style)===null||g===void 0?void 0:g.stroke)!==null&&p!==void 0?p:"#000",lineWidth:(y=(m=(v=M.point)===null||v===void 0?void 0:v.style)===null||m===void 0?void 0:m.strokeWidth)!==null&&y!==void 0?y:1,fill:(w=(_=(b=M.point)===null||b===void 0?void 0:b.style)===null||_===void 0?void 0:_.fill)!==null&&w!==void 0?w:"#000",size:2*((S=(x=(C=M.point)===null||C===void 0?void 0:C.style)===null||x===void 0?void 0:x.size)!==null&&S!==void 0?S:3),symbolType:"circle"}}),R.addChild(B),B.hover=(T=(A=M.point)===null||A===void 0?void 0:A.hover)!==null&&T!==void 0&&T}return R}function Gq(n,t){const e=[];for(let i=0;i<n.length;i++){const r=n[i];Y(t)&&Y(r[t])?e.push(r[t]):!Y(t)&&Y(r)&&e.push(r)}return e}const KL=ia();function lre(n,t,e,i,r,o,a,s,l,h,u,d,c,f,g,p,v){var m,y,b,_,w,C,x,S,A,T,M,R,L,B,P,k,E,D,I,O,H,F,N,$,V,X,Z,tt,K,rt;const q=f._getCellStyle(i,r),it=w2("padding",q,i,r,f);!((m=f.options.customConfig)===null||m===void 0)&&m.imageMargin?h=Se((y=f.options.customConfig)===null||y===void 0?void 0:y.imageMargin):Y(it)&&(h=it),!((b=g?.text)===null||b===void 0)&&b.textAlign&&(u=(_=g?.text)===null||_===void 0?void 0:_.textAlign),!((w=g?.text)===null||w===void 0)&&w.textBaseline&&(d=(C=g?.text)===null||C===void 0?void 0:C.textBaseline);const nt=Nl(i,r,g,f);let W,G;if(v&&(W=f.scenegraph.highPerformanceGetCell(i,r,!0),W&&W.role==="cell"&&W.setAttributes({x:t,y:e,width:o,height:a,lineWidth:(S=(x=g?.group)===null||x===void 0?void 0:x.lineWidth)!==null&&S!==void 0?S:void 0,fill:(T=(A=g?.group)===null||A===void 0?void 0:A.fill)!==null&&T!==void 0?T:void 0,stroke:(R=(M=g?.group)===null||M===void 0?void 0:M.stroke)!==null&&R!==void 0?R:void 0,strokeArrayWidth:nt,strokeArrayColor:(B=(L=g?.group)===null||L===void 0?void 0:L.strokeArrayColor)!==null&&B!==void 0?B:void 0,cursor:(k=(P=g?.group)===null||P===void 0?void 0:P.cursor)!==null&&k!==void 0?k:void 0,lineDash:(D=(E=g?.group)===null||E===void 0?void 0:E.lineDash)!==null&&D!==void 0?D:void 0,lineCap:"butt",clip:!0,cornerRadius:g.group.cornerRadius})),W&&W.role==="cell"||(W=new ve({x:t,y:e,width:o,height:a,lineWidth:(O=(I=g?.group)===null||I===void 0?void 0:I.lineWidth)!==null&&O!==void 0?O:void 0,fill:(F=(H=g?.group)===null||H===void 0?void 0:H.fill)!==null&&F!==void 0?F:void 0,stroke:($=(N=g?.group)===null||N===void 0?void 0:N.stroke)!==null&&$!==void 0?$:void 0,strokeArrayWidth:nt,strokeArrayColor:(X=(V=g?.group)===null||V===void 0?void 0:V.strokeArrayColor)!==null&&X!==void 0?X:void 0,cursor:(tt=(Z=g?.group)===null||Z===void 0?void 0:Z.cursor)!==null&&tt!==void 0?tt:void 0,lineDash:(rt=(K=g?.group)===null||K===void 0?void 0:K.lineDash)!==null&&rt!==void 0?rt:void 0,lineCap:"butt",clip:!0,cornerRadius:g.group.cornerRadius}),W.role="cell",W.col=i,W.row=r,n?.addCellGroup(W)),c){let lt=i,ft=r;p&&(lt=p.start.col,ft=p.start.row),G=f.getCellIcons(lt,ft)}let j=0,U=0;if(Array.isArray(G)&&G.length!==0){const{leftIconWidth:lt,rightIconWidth:ft,absoluteRightIconWidth:vt}=um(G,W,p,f);j=lt,U=ft,W.forEachChildren((pt=>{pt.role==="icon-left"?pt.setAttribute("x",pt.attribute.x+h[3]):pt.role==="icon-right"?pt.setAttribute("x",pt.attribute.x+o-ft-h[1]):pt.role==="icon-absolute-right"&&pt.setAttribute("x",pt.attribute.x+o-vt-h[1])})),W.forEachChildren((pt=>{d==="middle"?pt.setAttribute("y",(a-pt.AABBBounds.height())/2):d==="bottom"?pt.setAttribute("y",a-pt.AABBBounds.height()-h[2]):pt.setAttribute("y",h[0])})),W._cellLeftIconWidth=j,W._cellRightIconWidth=U}const J=f.getCellValue(i,r),ot=document.createElement("video");ot.addEventListener("loadeddata",(()=>{l&&Zlt(i,r,ot.videoWidth,ot.videoHeight,f.scenegraph,h,W);const{width:lt,height:ft,isMerge:vt}=Ev(W,f);if(s){const{width:re,height:wi}=C2(ot.videoWidth,ot.videoHeight,lt-h[1]-h[3],ft-h[0]-h[2]),ii=dN(0,0,lt,ft,re,wi,u,d,h);st.setAttributes({width:re,height:wi,x:ii.x,y:ii.y,dx:0})}else st.setAttributes({x:h[3],y:h[0],width:lt-h[1]-h[3],height:ft-h[2]-h[0],dy:0});vt&&cN(W.mergeStartCol,W.mergeEndCol,W.mergeStartRow,W.mergeEndRow,f);const{width:pt,height:bt}=Ev(W,f),me=Math.floor(Math.min(pt-h[1]-h[3],bt-h[2]-h[0])/2),He=0+(pt>st.attribute.width?st.attribute.x-0+st.attribute.width/2:pt/2),Ai=0+(bt>st.attribute.height?st.attribute.y-0+st.attribute.height/2:bt/2),Pe=W.getChildByName("image",!0),{dx:On,dy:en}=Pe.attribute,Xi=new jf({x:He-me/2,y:Ai-me/2,width:me,height:me,image:KL.play.svg,cursor:KL.play.cursor,dx:On,dy:en});Xi.name="play-icon",W.appendChild(Xi),f.scenegraph.updateNextFrame()})),ot.onerror=()=>{st.image=KL.damage_pic.svg},ot.src=J,ot.setAttribute("preload","auto");const st=JM({x:h[3],y:h[0],width:o-h[1]-h[3],height:a-h[2]-h[0],image:ot,cursor:"pointer"});return st.name="image",st.keepAspectRatio=s,st.textAlign=u,st.textBaseline=d,W.appendChild(st),W}function hre(n,t,e){if(typeof n=="boolean"){const i=MS({x:t.attribute.width,y:0,startAngle:Math.PI/2,endAngle:Math.PI,outerRadius:6,fill:"#3073F2",pickable:!1});i.name="mark",t.appendChild(i)}else{const{bgColor:i="#3073F2",shape:r="sector",position:o="right-top",size:a=10,offset:s=0}=n;let l,h,u,d,c,f;if(r==="sector")o==="right-top"?(l=t.attribute.width-s,h=s,u=Math.PI/2,d=Math.PI):o==="left-top"?(l=s,h=s,u=0,d=Math.PI/2):o==="right-bottom"?(l=t.attribute.width-s,h=t.attribute.height-s,u=Math.PI,d=Math.PI/2*3):o==="left-bottom"&&(l=s,h=t.attribute.height-s,u=Math.PI/2*3,d=2*Math.PI),c=i,f=MS({x:l,y:h,startAngle:u,endAngle:d,outerRadius:a,fill:c,pickable:!1});else if(r==="triangle"){let g,p,v,m;o==="right-top"?(l=t.attribute.width-s,h=s,g=l-a,p=h,v=l,m=h+a):o==="left-top"?(l=s,h=s,g=l+a,p=h,v=l,m=h+a):o==="right-bottom"?(l=t.attribute.width-s,h=t.attribute.height-s,g=l-a,p=h,v=l,m=h-a):o==="left-bottom"&&(l=s,h=t.attribute.height-s,g=l+a,p=h,v=l,m=h-a),c=i,f=Pat({points:[{x:l,y:h},{x:g,y:p},{x:v,y:m}],fill:c,pickable:!1})}else r==="rect"&&(o==="right-top"?(l=t.attribute.width-a-s,h=s):o==="left-top"?(l=s,h=s):o==="right-bottom"?(l=t.attribute.width-a-s,h=t.attribute.height-a-s):o==="left-bottom"&&(l=s,h=t.attribute.height-a-s),c=i,f=ei({x:l,y:h,width:a,height:a,fill:c,pickable:!1}));f.name="mark",t.appendChild(f)}}function ure(n,t,e,i,r,o,a,s,l,h,u,d,c,f,g,p,v,m,y){var b,_,w,C,x,S,A,T,M,R,L,B,P,k,E,D,I,O,H,F,N,$,V,X,Z,tt,K,rt,q,it,nt,W,G;const j=n._getCellStyle(o,a),U=w2("padding",j,o,a,n);Y(U)&&(u=U),!((b=v?.text)===null||b===void 0)&&b.textAlign&&(d=(_=v?.text)===null||_===void 0?void 0:_.textAlign),!((w=v?.text)===null||w===void 0)&&w.textBaseline&&(c=(C=v?.text)===null||C===void 0?void 0:C.textBaseline);const J=n.isAutoRowHeight(a),ot=s==="auto",st=(x=j.autoWrapText)!==null&&x!==void 0?x:n.internalProps.autoWrapText,lt=j.lineClamp,ft=Nl(o,a,v,n);let vt;if(y&&(vt=n.scenegraph.getCell(o,a,!0),vt&&vt.role==="cell"&&vt.setAttributes({x:i,y:r,width:l,height:h,lineWidth:(A=(S=v?.group)===null||S===void 0?void 0:S.lineWidth)!==null&&A!==void 0?A:void 0,fill:(M=(T=v?.group)===null||T===void 0?void 0:T.fill)!==null&&M!==void 0?M:void 0,stroke:(L=(R=v?.group)===null||R===void 0?void 0:R.stroke)!==null&&L!==void 0?L:void 0,strokeArrayWidth:ft??void 0,strokeArrayColor:(P=(B=v?.group)===null||B===void 0?void 0:B.strokeArrayColor)!==null&&P!==void 0?P:void 0,cursor:(E=(k=v?.group)===null||k===void 0?void 0:k.cursor)!==null&&E!==void 0?E:void 0,lineDash:(I=(D=v?.group)===null||D===void 0?void 0:D.lineDash)!==null&&I!==void 0?I:void 0,lineCap:"butt",clip:!0,cornerRadius:v.group.cornerRadius})),vt&&vt.role==="cell"||(vt=new ve({x:i,y:r,width:l,height:h,lineWidth:(H=(O=v?.group)===null||O===void 0?void 0:O.lineWidth)!==null&&H!==void 0?H:void 0,fill:(N=(F=v?.group)===null||F===void 0?void 0:F.fill)!==null&&N!==void 0?N:void 0,stroke:(V=($=v?.group)===null||$===void 0?void 0:$.stroke)!==null&&V!==void 0?V:void 0,strokeArrayWidth:ft??void 0,strokeArrayColor:(Z=(X=v?.group)===null||X===void 0?void 0:X.strokeArrayColor)!==null&&Z!==void 0?Z:void 0,cursor:(K=(tt=v?.group)===null||tt===void 0?void 0:tt.cursor)!==null&&K!==void 0?K:void 0,lineDash:(q=(rt=v?.group)===null||rt===void 0?void 0:rt.lineDash)!==null&&q!==void 0?q:void 0,lineCap:"butt",clip:!0,cornerRadius:v.group.cornerRadius}),vt.role="cell",vt.col=o,vt.row=a,e?.addCellGroup(vt)),g&&vt.appendChild(g),p){const pt=t;let bt;if(f){let me=o,He=a;m&&(me=m.start.col,He=m.start.row),bt=n.getCellIcons(me,He)}XKt(vt,bt,pt,u,ot,J,st,typeof lt=="number"?lt:void 0,vt.attribute.width,vt.attribute.height,d,c,n,v,m),!((it=v?._vtable)===null||it===void 0)&&it.marked&&hre((nt=v?._vtable)===null||nt===void 0?void 0:nt.marked,vt)}return g&&vt.setAttributes({width:Math.max(vt.attribute.width,(W=g.attribute.width)!==null&&W!==void 0?W:0),height:Math.max(vt.attribute.height,(G=g.attribute.height)!==null&&G!==void 0?G:0)}),vt}function dre(n,t,e,i,r,o,a,s,l,h){var u,d,c,f,g;if(n.dependField){const q=Je(n.dependField,{col:o,row:a,table:l,value:i,dataValue:r,cellHeaderPaths:void 0});r=(d=(u=l.getCellOriginRecord(o,a))===null||u===void 0?void 0:u[q])!==null&&d!==void 0?d:r}const p=(c=Je(n.barType,{col:o,row:a,table:l,value:i,dataValue:r,cellHeaderPaths:void 0}))!==null&&c!==void 0?c:"default",v=(f=Je(n.min,{col:o,row:a,table:l,value:i,dataValue:r,cellHeaderPaths:void 0}))!==null&&f!==void 0?f:0,m=(g=Je(n.max,{col:o,row:a,table:l,value:i,dataValue:r,cellHeaderPaths:void 0}))!==null&&g!==void 0?g:v+100;let y=0;y=h?l.getRowsHeight(h.start.row,h.end.row):l.getRowHeight(a);let b=e,_=y,w=0;yt(l.theme._contentOffset)&&(w=l.theme._contentOffset);const C=new ve({x:-w,y:-w,width:b,height:_});C.name="progress-bar";const{showBar:x,barColor:S,barBgColor:A,barPositiveColor:T,barNegativeColor:M,barAxisColor:R,barRightToLeft:L,showBarMark:B,barMarkPositiveColor:P,barMarkNegativeColor:k,barMarkWidth:E,barMarkPosition:D,barMarkInBar:I}=t;let{barHeight:O,barBottom:H,barPadding:F}=t;F.length===1?F=[F[0],F[0],F[0],F[0]]:F.length===2?F=[F[0],F[1],F[0],F[1]]:F.length===3&&(F=[F[0],F[1],F[2],F[1]]),F=F.map(((q,it)=>{if(typeof q=="string"&&U1.endsWith(q,"%")){const nt=Number(q.substr(0,q.length-1));return it===0||it===2?y*nt/100:e*nt/100}return Number(q)}));const N=Se(gt("borderLineWidth",t,o,a,l)),$=Math.max(F[0],Math.ceil(N[0]/2));let V=Math.max(F[1],Math.floor(N[1]/2));const X=Math.max(F[2],Math.floor(N[2]/2));let Z=Math.max(F[3],Math.ceil(N[3]/2));B&&E>0&&D==="right"&&I===!1&&(V+=E,Z+=E),b-=V+Z,_-=X+$,a===l.rowCount-1&&[0,"0"].includes(H)&&(_-=1);const tt=$,K=Z,rt=b;if(typeof O=="string"&&U1.endsWith(O,"%")?(O=Number(O.substr(0,O.length-1)),O=_*O/100):O=Number(O),typeof H=="string"&&U1.endsWith(H,"%")?(H=Number(H.substr(0,H.length-1)),H=_*H/100):H=Number(H),Je(x,{col:o,row:a,table:l,context:null,value:i,dataValue:r})){let q=`${r}`;U1.endsWith(q,"%")&&(q=q.substr(0,q.length-1));const it=Number(q);if(isNaN(it))return C;if((p??"default")==="default"){const nt=it<v?0:it>m?1:(it-v)/(m-v),W=b,G=tt+_-O-H;let j=Math.min(W*nt,W);const U=L?K+rt-j:K;o!==l.colCount-1||nt!==1||L||(j-=1);const J=Je(A,{col:o,row:a,table:l,context:null,value:i,dataValue:r,percentile:nt});if(J){const lt=ei({x:U,y:G,width:W,height:O,fill:J});C.addChild(lt)}const ot=Je(S,{col:o,row:a,table:l,context:null,value:i,dataValue:r,percentile:nt})||"#20a8d8",st=ei({x:U,y:G,width:j,height:O,fill:ot});C.addChild(st)}else if(p==="negative"){const nt=v<0?-v:0,W=m>0?m:0,G=nt/(nt+W),j=1-G,U=it>0?it/W:0,J=it<0?-it/nt:0,ot=b,st=tt+_-O-H,lt=K,ft=Je(A,{col:o,row:a,table:l,context:null,value:i,dataValue:r,percentile:U});if(ft){const ii=ei({x:lt,y:st,width:ot,height:O,fill:ft});C.addChild(ii)}const vt=L?j*ot:G*ot,pt=Math.min(ot*G*J,ot),bt=L?{left:lt+vt,top:st,width:pt,height:O}:{left:lt+vt-pt,top:st,width:pt,height:O},me=Je(M,{col:o,row:a,table:l,context:null,value:i,dataValue:r,percentile:J})||"#20a8d8",He=ei({x:bt.left,y:bt.top,width:bt.width,height:bt.height,fill:me});C.addChild(He);let Ai=Math.min(ot*j*U,ot);o!==l.colCount-1||U!==1||L||(Ai-=1);const Pe=L?{left:lt+vt-Ai,top:st,width:Ai,height:O}:{left:lt+vt,top:st,width:Ai,height:O},On=Je(T,{col:o,row:a,table:l,context:null,value:i,dataValue:r,percentile:U})||"#20a8d8",en=ei({x:Pe.left,y:Pe.top,width:Pe.width,height:Pe.height,fill:On});C.addChild(en);const Xi=L?bt.left:Pe.left,re=Je(R,{col:o,row:a,table:l,context:null,value:i,dataValue:r,percentile:U}),wi=Wi({x:0,y:0,stroke:re,lineWidth:1,lineDash:[2,2],points:[{x:Xi,y:0},{x:Xi,y}]});if(C.addChild(wi),B&&(U||J)){const ii=E,qi=[];let Gr;if(U>0)if(Gr=Je(P,{col:o,row:a,table:l,context:null,value:i,dataValue:r,percentile:U})||"#20a8d8",D==="right"){const ki=L?Pe.left+E/2:Pe.left+Pe.width+(I?-E/2:E/2);qi.push({x:ki,y:Pe.top}),qi.push({x:ki,y:Pe.top+Pe.height})}else D==="bottom"&&(qi.push({x:Pe.left,y:Pe.top+Pe.height-E/2}),qi.push({x:Pe.left+Pe.width,y:Pe.top+Pe.height-E/2}));else if(J>0)if(Gr=Je(k,{col:o,row:a,table:l,context:null,value:i,dataValue:r,percentile:J})||"#20a8d8",D==="right"){const ki=L?bt.left+bt.width-E/2:bt.left+E/2;qi.push({x:ki,y:bt.top}),qi.push({x:ki,y:bt.top+bt.height})}else D==="bottom"&&(qi.push({x:bt.left,y:bt.top+bt.height-E/2}),qi.push({x:bt.left+bt.width,y:bt.top+bt.height-E/2}));const kt=Wi({x:0,y:0,stroke:Gr,lineWidth:ii,points:qi});C.addChild(kt)}}else if(p==="negative_no_axis"){const nt=v<0?-v:0,W=m>0?m:0,G=Math.max(nt,W),j=G===0?0:Math.abs(it)/G,U=b;let J=Math.min(U*j,U);o!==l.colCount-1||j!==1||L||(J-=1);const ot=tt+_-O-H,st=L?K+rt-J:K,lt=Je(A,{col:o,row:a,table:l,context:null,value:i,dataValue:r,percentile:j});if(lt){const bt=ei({x:st,y:ot,width:U,height:O,fill:lt});C.addChild(bt)}const ft={left:st,top:ot,width:J,height:O};let vt;vt=it>=0?Je(T,{col:o,row:a,table:l,context:null,value:i,percentile:j,dataValue:r})||"#20a8d8":Je(M,{col:o,row:a,table:l,context:null,value:i,dataValue:r,percentile:j})||"#20a8d8";const pt=ei({x:ft.left,y:ft.top,width:ft.width,height:ft.height,fill:vt});if(C.addChild(pt),B&&it){const bt=E,me=[];let He;if(He=it>=0?Je(P,{col:o,row:a,table:l,context:null,value:i,dataValue:r,percentile:j})||"#20a8d8":Je(k,{col:o,row:a,table:l,context:null,value:i,dataValue:r,percentile:j})||"#20a8d8",D==="right"){const Pe=L?ft.left+E/2:ft.left+ft.width-E/2;me.push({x:Pe,y:ft.top}),me.push({x:Pe,y:ft.top+ft.height})}else D==="bottom"&&(me.push({x:ft.left,y:ft.top+ft.height-E/2}),me.push({x:ft.left+ft.width,y:ft.top+ft.height-E/2}));const Ai=Wi({x:0,y:0,stroke:He,lineWidth:bt,points:me});C.addChild(Ai)}}}return C}function cre(n,t,e,i,r,o){var a,s,l,h,u,d,c,f,g,p,v,m,y,b,_,w;if(e?.zero&&(n=Math.min(n,0),t=Math.max(t,0)),e?.expand){const S=n,A=t;Y(e.expand.min)&&(n=S-(A-S)*e.expand.min),Y(e.expand.max)&&(t=A+(A-S)*e.expand.max)}let C,x;if(yt(e?.min)&&(n=e.min),yt(e?.max)&&(t=e.max),e?.type==="log"?(C=new X_,C.base((a=e?.base)!==null&&a!==void 0?a:10)):e?.type==="symlog"?(C=new q_,C.constant((s=e?.constant)!==null&&s!==void 0?s:10)):C=new gm,C.domain([n,t],!!e?.nice),o)fre(C,o);else if(e?.nice){let S=(d=(h=(l=e.tick)===null||l===void 0?void 0:l.forceTickCount)!==null&&h!==void 0?h:(u=e.tick)===null||u===void 0?void 0:u.tickCount)!==null&&d!==void 0?d:10;ra(S)&&(S=S({axisLength:r,labelStyle:(f=(c=e?.label)===null||c===void 0?void 0:c.style)!==null&&f!==void 0?f:{fontSize:z0.LABEL_FONT_SIZE}})),e.niceType==="accurateFirst"&&(S=Math.max(10,S)),We(e.min)&&We(e.max)?C.nice(S):Y(e.min)&&We(e.max)?C.niceMax(S):We(e.min)&&Y(e.max)&&C.niceMin(S)}return delete C._niceType,x=((p=(g=o?.targetTicks)===null||g===void 0?void 0:g.length)!==null&&p!==void 0?p:!((v=e?.tick)===null||v===void 0)&&v.forceTickCount)?C.forceTicks((y=(m=o?.targetTicks)===null||m===void 0?void 0:m.length)!==null&&y!==void 0?y:(b=e?.tick)===null||b===void 0?void 0:b.forceTickCount):C.ticks(yt((_=e?.tick)===null||_===void 0?void 0:_.tickCount)?e.tick.tickCount:5,{noDecimals:(w=e?.tick)===null||w===void 0?void 0:w.noDecimals}),{range:C.domain(),ticks:x}}function fre(n,t){n.niceMax(t.targetTicks.length)}function gre(n,t,e,i,r,o,a,s,l,h,u,d,c,f,g,p,v,m){var y,b,_,w,C,x,S,A,T,M,R,L,B,P,k,E,D,I,O,H,F,N,$,V;if(!n){const rt=Nl(r,o,g,f);m&&(n=f.scenegraph.highPerformanceGetCell(r,o,!0))&&n.role==="cell"&&n.setAttributes({x:e,y:i,width:s,height:l,lineWidth:(b=(y=g?.group)===null||y===void 0?void 0:y.lineWidth)!==null&&b!==void 0?b:void 0,fill:(w=(_=g?.group)===null||_===void 0?void 0:_.fill)!==null&&w!==void 0?w:void 0,stroke:(x=(C=g?.group)===null||C===void 0?void 0:C.stroke)!==null&&x!==void 0?x:void 0,strokeArrayWidth:rt,strokeArrayColor:(A=(S=g?.group)===null||S===void 0?void 0:S.strokeArrayColor)!==null&&A!==void 0?A:void 0,cursor:(M=(T=g?.group)===null||T===void 0?void 0:T.cursor)!==null&&M!==void 0?M:void 0,lineDash:(L=(R=g?.group)===null||R===void 0?void 0:R.lineDash)!==null&&L!==void 0?L:void 0,lineCap:"butt",clip:!0,cornerRadius:g.group.cornerRadius}),n&&n.role==="cell"||((n=new ve({x:e,y:i,width:s,height:l,lineWidth:(P=(B=g?.group)===null||B===void 0?void 0:B.lineWidth)!==null&&P!==void 0?P:void 0,fill:(E=(k=g?.group)===null||k===void 0?void 0:k.fill)!==null&&E!==void 0?E:void 0,stroke:(I=(D=g?.group)===null||D===void 0?void 0:D.stroke)!==null&&I!==void 0?I:void 0,strokeArrayWidth:rt,strokeArrayColor:(H=(O=g?.group)===null||O===void 0?void 0:O.strokeArrayColor)!==null&&H!==void 0?H:void 0,cursor:(N=(F=g?.group)===null||F===void 0?void 0:F.cursor)!==null&&N!==void 0?N:void 0,lineDash:(V=($=g?.group)===null||$===void 0?void 0:$.lineDash)!==null&&V!==void 0?V:void 0,lineCap:"butt",clip:!0,cornerRadius:g.group.cornerRadius})).role="cell",n.col=r,n.row=o,t?.addCellGroup(n))}let X;if(c){let rt=r,q=o;v&&(rt=v.start.col,q=v.start.row),X=f.getCellIcons(rt,q)}let Z=0,tt=0;if(Array.isArray(X)&&X.length!==0){const{leftIconWidth:rt,rightIconWidth:q,absoluteRightIconWidth:it}=um(X,n,v,f);Z=rt+q,tt=rt,n.forEachChildren((nt=>{nt.role==="icon-left"?nt.setAttribute("x",nt.attribute.x+h[3]):nt.role==="icon-right"?nt.setAttribute("x",nt.attribute.x+s-q-h[1]):nt.role==="icon-absolute-right"&&nt.setAttribute("x",nt.attribute.x+s-it-h[1])})),n.forEachChildren((nt=>{d==="middle"?nt.setAttribute("y",(l-nt.AABBBounds.height())/2):d==="bottom"?nt.setAttribute("y",l-nt.AABBBounds.height()-h[2]):nt.setAttribute("y",h[0])}))}const K=pre(r,o,a-Z,s,l,h,g,p,f);return K&&n.appendChild(K),s-=h[1]+h[3]+Z,l-=h[0]+h[2],u==="center"?K.setAttribute("x",h[3]+tt+(s-K.AABBBounds.width())/2):u==="right"?K.setAttribute("x",h[3]+tt+s-K.AABBBounds.width()):K.setAttribute("x",h[3]+tt),d==="middle"?K.setAttribute("y",h[0]+(l-K.AABBBounds.height())/2):d==="bottom"?K.setAttribute("y",h[0]+l-K.AABBBounds.height()):K.setAttribute("y",h[0]),n}function pre(n,t,e,i,r,o,a,s,l){var h,u;const d=l._getCellStyle(n,t),c=gt("buttonColor",d,n,t,l),f=gt("buttonBorderColor",d,n,t,l),g=gt("buttonLineWidth",d,n,t,l),p=gt("buttonBorderRadius",d,n,t,l),v=gt("buttonHoverColor",d,n,t,l),m=gt("buttonHoverBorderColor",d,n,t,l),y=gt("buttonPadding",d,n,t,l),b=gt("buttonTextHoverColor",d,n,t,l),_=gt("buttonDisableColor",d,n,t,l),w=gt("buttonDisableBorderColor",d,n,t,l),C=gt("buttonTextDisableColor",d,n,t,l),x=l.getCellValue(n,t),S=l.getCellOriginValue(n,t),A=To(n,t,l),T=l._getCellStyle(n,t),M=(h=T.autoWrapText)!==null&&h!==void 0?h:l.internalProps.autoWrapText,{lineClamp:R}=T,L=e==="auto",B=l.isAutoRowHeight(t),{disable:P,text:k}=s,E=Je(P,{col:n,row:t,table:l,context:null,value:x,dataValue:S}),D=Je(k,{col:n,row:t,table:l,context:null,value:x,dataValue:S}),I=(u=D??x)!==null&&u!==void 0?u:"",O={maxLineWidth:L?1/0:i-(o[1]+o[3]+A),textAlign:"left",textBaseline:"top",autoWrapText:M,lineClamp:R,wordBreak:"break-word",heightLimit:B?-1:r-Math.floor(o[0]+o[2]),pickable:!1,dx:A,whiteSpace:I.length!==1||M?"normal":"no-wrap"},H=a.text?Object.assign({},a.text,O):O,F={x:0,y:0,cursor:E?"not-allowed":"pointer",disable:E,childrenPickable:!1,text:I.length===1?I[0]:I,textStyle:H,padding:y,panel:{visible:!0,fill:E?_:c,stroke:E?w:f,lineWidth:g,cornerRadius:p},state:{text:{hover:{}},panel:{hover:{fill:v,stroke:m}}}};C&&(F.state.text.fill=C),b&&(F.state.text.hover.fill=b);const N=new om(F);return N.name="button",E||(N.addEventListener("mouseenter",(()=>{N.addState("hover",!0,!1),N.stage.renderNextFrame()})),N.addEventListener("mouseleave",(()=>{N.removeState("hover",!1),N.stage.renderNextFrame()}))),N}const vre=()=>{It.registerFunction("createChartCellGroup",Kne),It.registerFunction("getAxisDomainRangeAndLabels",cre)},mre=()=>{It.registerFunction("createCheckboxCellGroup",Jne)},yre=()=>{It.registerFunction("createImageCellGroup",ZKt)},bre=()=>{It.registerFunction("createProgressBarCell",dre)},_re=()=>{It.registerFunction("createRadioCellGroup",tre)},Cre=()=>{It.registerFunction("createSwitchCellGroup",rre)},wre=()=>{It.registerFunction("createButtonCellGroup",gre)},xre=()=>{It.registerFunction("createSparkLineCellGroup",are)},Sre=()=>{It.registerFunction("createTextCellGroup",ure)},Are=()=>{It.registerFunction("createVideoCellGroup",lre)};Fne(),Nne(),Wne(),Vne(),Gne(),$ne(),qne(),hee(),jne(),vre(),mre(),yre(),bre(),_re(),Cre(),wre(),xre(),Sre(),Are();class Tre extends vie{}class Mre extends Ff{constructor(t){var e,i,r,o,a,s,l,h,u,d;const c=Rt(t.boundsPadding),f=[(i=(e=t.marginTop)!==null&&e!==void 0?e:c?t.boundsPadding[0]:t.boundsPadding)!==null&&i!==void 0?i:0,(o=(r=t.marginRight)!==null&&r!==void 0?r:c?t.boundsPadding[1]:t.boundsPadding)!==null&&o!==void 0?o:0,(l=(a=t.marginBottom)!==null&&a!==void 0?a:c?(s=t.boundsPadding[2])!==null&&s!==void 0?s:t.boundsPadding[0]:t.boundsPadding)!==null&&l!==void 0?l:0,(d=(h=t.marginLeft)!==null&&h!==void 0?h:c?(u=t.boundsPadding[3])!==null&&u!==void 0?u:t.boundsPadding[1]:t.boundsPadding)!==null&&d!==void 0?d:0];t.boundsPadding=f,super(t)}}class sut extends _e{constructor(t){var e,i,r,o,a,s,l,h,u,d,c,f,g,p;t.direction&&(t.flexDirection=t.direction),!t.justifyContent||t.justifyContent!=="start"&&t.justifyContent!=="end"||(t.justifyContent="flex-"+t.justifyContent),!t.alignItems||t.alignItems!=="start"&&t.alignItems!=="end"||(t.alignItems="flex-"+t.alignItems),!t.alignContent||t.alignContent!=="start"&&t.alignContent!=="end"||(t.alignContent="flex-"+t.alignContent),t.display="flex",t.flexDirection||(t.flexDirection="row"),t.clip=!0,t.fill=(e=t?.background)===null||e===void 0?void 0:e.fill,t.stroke=(i=t?.background)===null||i===void 0?void 0:i.stroke,t.lineWidth=(r=t?.background)===null||r===void 0?void 0:r.lineWidth,t.cornerRadius=(o=t?.background)===null||o===void 0?void 0:o.cornerRadius;const v=Rt(t.boundsPadding),m=[(s=(a=t.marginTop)!==null&&a!==void 0?a:v?t.boundsPadding[0]:t.boundsPadding)!==null&&s!==void 0?s:0,(h=(l=t.marginRight)!==null&&l!==void 0?l:v?t.boundsPadding[1]:t.boundsPadding)!==null&&h!==void 0?h:0,(c=(u=t.marginBottom)!==null&&u!==void 0?u:v?(d=t.boundsPadding[2])!==null&&d!==void 0?d:t.boundsPadding[0]:t.boundsPadding)!==null&&c!==void 0?c:0,(p=(f=t.marginLeft)!==null&&f!==void 0?f:v?(g=t.boundsPadding[3])!==null&&g!==void 0?g:t.boundsPadding[1]:t.boundsPadding)!==null&&p!==void 0?p:0];t.boundsPadding=m,super(t)}}class Rre extends sut{constructor(t){t.flexWrap="nowrap",super(t)}}class Pre extends ea{constructor(t){var e,i,r,o,a,s,l,h,u,d,c,f;let g;Li(t.iconName)&&(g=ia()[t.iconName],g&&(t.width=(e=t.width)!==null&&e!==void 0?e:g.width,t.height=(i=t.height)!==null&&i!==void 0?i:g.height,t.svg=g.svg,t.cursor=g.cursor)),t.svg&&(t.image=t.svg);const p=Rt(t.boundsPadding),v=[(o=(r=t.marginTop)!==null&&r!==void 0?r:p?t.boundsPadding[0]:t.boundsPadding)!==null&&o!==void 0?o:0,(s=(a=t.marginRight)!==null&&a!==void 0?a:p?t.boundsPadding[1]:t.boundsPadding)!==null&&s!==void 0?s:0,(u=(l=t.marginBottom)!==null&&l!==void 0?l:p?(h=t.boundsPadding[2])!==null&&h!==void 0?h:t.boundsPadding[0]:t.boundsPadding)!==null&&u!==void 0?u:0,(f=(d=t.marginLeft)!==null&&d!==void 0?d:p?(c=t.boundsPadding[3])!==null&&c!==void 0?c:t.boundsPadding[1]:t.boundsPadding)!==null&&f!==void 0?f:0];t.boundsPadding=v,super(t),this.cache=g}}let Bre=class extends ea{constructor(t){var e,i,r,o,a,s,l,h,u,d;t.src&&(t.image=t.src),t.shape==="circle"&&(t.cornerRadius=t.width/2);const c=Rt(t.boundsPadding),f=[(i=(e=t.marginTop)!==null&&e!==void 0?e:c?t.boundsPadding[0]:t.boundsPadding)!==null&&i!==void 0?i:0,(o=(r=t.marginRight)!==null&&r!==void 0?r:c?t.boundsPadding[1]:t.boundsPadding)!==null&&o!==void 0?o:0,(l=(a=t.marginBottom)!==null&&a!==void 0?a:c?(s=t.boundsPadding[2])!==null&&s!==void 0?s:t.boundsPadding[0]:t.boundsPadding)!==null&&l!==void 0?l:0,(d=(h=t.marginLeft)!==null&&h!==void 0?h:c?(u=t.boundsPadding[3])!==null&&u!==void 0?u:t.boundsPadding[1]:t.boundsPadding)!==null&&d!==void 0?d:0];t.boundsPadding=f,super(t)}};class kre extends og{constructor(t){var e,i,r,o,a,s,l,h,u,d;const c=Rt(t.boundsPadding),f=[(i=(e=t.marginTop)!==null&&e!==void 0?e:c?t.boundsPadding[0]:t.boundsPadding)!==null&&i!==void 0?i:0,(o=(r=t.marginRight)!==null&&r!==void 0?r:c?t.boundsPadding[1]:t.boundsPadding)!==null&&o!==void 0?o:0,(l=(a=t.marginBottom)!==null&&a!==void 0?a:c?(s=t.boundsPadding[2])!==null&&s!==void 0?s:t.boundsPadding[0]:t.boundsPadding)!==null&&l!==void 0?l:0,(d=(h=t.marginLeft)!==null&&h!==void 0?h:c?(u=t.boundsPadding[3])!==null&&u!==void 0?u:t.boundsPadding[1]:t.boundsPadding)!==null&&d!==void 0?d:0];t.boundsPadding=f,super(t)}}class Lre extends tn{constructor(t){var e,i,r,o,a,s,l,h,u,d,c;t.textBaseline||(t.textBaseline="top");const f=Rt(t.boundsPadding),g=[(i=(e=t.marginTop)!==null&&e!==void 0?e:f?t.boundsPadding[0]:t.boundsPadding)!==null&&i!==void 0?i:0,(o=(r=t.marginRight)!==null&&r!==void 0?r:f?t.boundsPadding[1]:t.boundsPadding)!==null&&o!==void 0?o:0,(l=(a=t.marginBottom)!==null&&a!==void 0?a:f?(s=t.boundsPadding[2])!==null&&s!==void 0?s:t.boundsPadding[0]:t.boundsPadding)!==null&&l!==void 0?l:0,(d=(h=t.marginLeft)!==null&&h!==void 0?h:f?(u=t.boundsPadding[3])!==null&&u!==void 0?u:t.boundsPadding[1]:t.boundsPadding)!==null&&d!==void 0?d:0];t.boundsPadding=g,t.fill=(c=t.fill)!==null&&c!==void 0?c:"#000",super(t)}getSize(t){this.AABBBounds.width()}}function Ere(n,t=0){return{percent:n,delta:t}}class Dre extends H_{constructor(t){var e,i,r,o,a,s,l,h,u,d;const c=Rt(t.boundsPadding),f=[(i=(e=t.marginTop)!==null&&e!==void 0?e:c?t.boundsPadding[0]:t.boundsPadding)!==null&&i!==void 0?i:0,(o=(r=t.marginRight)!==null&&r!==void 0?r:c?t.boundsPadding[1]:t.boundsPadding)!==null&&o!==void 0?o:0,(l=(a=t.marginBottom)!==null&&a!==void 0?a:c?(s=t.boundsPadding[2])!==null&&s!==void 0?s:t.boundsPadding[0]:t.boundsPadding)!==null&&l!==void 0?l:0,(d=(h=t.marginLeft)!==null&&h!==void 0?h:c?(u=t.boundsPadding[3])!==null&&u!==void 0?u:t.boundsPadding[1]:t.boundsPadding)!==null&&d!==void 0?d:0];t.boundsPadding=f,super(t)}}class Ire extends om{constructor(t){var e,i,r,o,a,s,l,h,u,d;const c=Rt(t.boundsPadding),f=[(i=(e=t.marginTop)!==null&&e!==void 0?e:c?t.boundsPadding[0]:t.boundsPadding)!==null&&i!==void 0?i:0,(o=(r=t.marginRight)!==null&&r!==void 0?r:c?t.boundsPadding[1]:t.boundsPadding)!==null&&o!==void 0?o:0,(l=(a=t.marginBottom)!==null&&a!==void 0?a:c?(s=t.boundsPadding[2])!==null&&s!==void 0?s:t.boundsPadding[0]:t.boundsPadding)!==null&&l!==void 0?l:0,(d=(h=t.marginLeft)!==null&&h!==void 0?h:c?(u=t.boundsPadding[3])!==null&&u!==void 0?u:t.boundsPadding[1]:t.boundsPadding)!==null&&d!==void 0?d:0];t.boundsPadding=f,super(t)}getSize(t){this.AABBBounds.width()}}class Ore extends _e{constructor(t){var e,i,r,o,a,s,l,h,u,d;const c=Rt(t.boundsPadding),f=[(i=(e=t.marginTop)!==null&&e!==void 0?e:c?t.boundsPadding[0]:t.boundsPadding)!==null&&i!==void 0?i:0,(o=(r=t.marginRight)!==null&&r!==void 0?r:c?t.boundsPadding[1]:t.boundsPadding)!==null&&o!==void 0?o:0,(l=(a=t.marginBottom)!==null&&a!==void 0?a:c?(s=t.boundsPadding[2])!==null&&s!==void 0?s:t.boundsPadding[0]:t.boundsPadding)!==null&&l!==void 0?l:0,(d=(h=t.marginLeft)!==null&&h!==void 0?h:c?(u=t.boundsPadding[3])!==null&&u!==void 0?u:t.boundsPadding[1]:t.boundsPadding)!==null&&d!==void 0?d:0];t.boundsPadding=f,super(t)}}const Hre=Object.freeze(Object.defineProperty({__proto__:null,Arc:Dre,CheckBox:$h,Circle:Mre,Container:sut,Group:Ore,GroupElement:Rre,Icon:Pre,Image:Bre,Line:O_,Radio:Gf,Rect:kre,Tag:Ire,Text:Lre,percentCalc:Ere},Symbol.toStringTag,{value:"Module"}));tlt();class zre extends _e{constructor(t){super(t),this._lastWidth=t.width,this._lastHeight=t.height,this._lastX=t.x,this._lastY=t.y}updateTextPosition(){var t,e,i;if(!this.textLabel||!this.barRect)return;const r=this.labelStyle||{},{textAlign:o="left",textBaseline:a="middle",textOverflow:s,color:l="#333333",outsideColor:h="#333333",padding:u=8}=r,d=Array.isArray(u)?u[3]:u,c=this.barRect.attribute.width,f=this.barRect.attribute.height,g=this.textLabel.attribute.fontSize||12,p=this.textLabel.attribute.fontFamily||"Arial",v=String(this.textLabel.attribute.text||""),m=gN.measureTextWidth(v,{fontSize:g,fontFamily:p})+2*d<=c,y=V_(W_(d),o,a,c,f),b=r.orient||(!m&&r.orientHandleWithOverflow?r.orientHandleWithOverflow:null);if(this.textLabel.setAttribute("visible",!0),this.textLabel.setAttribute("textBaseline",a),b){(t=this.textLabel.parent)===null||t===void 0||t.removeChild(this.textLabel),this.appendChild(this.textLabel),this.textLabel.setAttribute("fill",h),this.textLabel.setAttribute("ellipsis",void 0),this.textLabel.setAttribute("maxLineWidth",void 0),this.textLabel.setAttribute("zIndex",1e4),this.setAttribute("zIndex",1e4);const _={left:{x:-d,y:f/2,align:"right",baseline:"middle"},right:{x:c+d,y:f/2,align:"left",baseline:"middle"},top:{x:c/2,y:-d,align:"center",baseline:"bottom"},bottom:{x:c/2,y:f+d,align:"center",baseline:"top"}}[b];_&&(this.textLabel.setAttribute("x",_.x),this.textLabel.setAttribute("y",_.y),this.textLabel.setAttribute("textAlign",_.align),this.textLabel.setAttribute("textBaseline",_.baseline))}else(e=this.textLabel.parent)===null||e===void 0||e.removeChild(this.textLabel),(i=this.clipGroupBox)===null||i===void 0||i.appendChild(this.textLabel),this.textLabel.setAttribute("x",y.x),this.textLabel.setAttribute("y",y.y),this.textLabel.setAttribute("textAlign",o),this.textLabel.setAttribute("fill",l),this.textLabel.setAttribute("maxLineWidth",c-d),this.textLabel.setAttribute("ellipsis",s==="clip"?"":s==="ellipsis"?"...":Y(s)?s:void 0)}}const $q=`<svg width="100" height="200" xmlns="http://www.w3.org/2000/svg">
  <line x1="30" y1="10" x2="30" y2="190" stroke="black" stroke-width="4"/>
  <line x1="70" y1="10" x2="70" y2="190" stroke="black" stroke-width="4"/>
</svg>`,lut=10;class Fre{formatMilestoneText(t,e){if(!t)return"";const i=t.match(/{([^}]+)}/g);return i&&i.forEach((r=>{const o=r.substring(1,r.length-1),a=e[o];a!==void 0&&(t=t.replace(r,String(a)))})),t}calculateMilestoneTextPosition(t,e,i=4){const r=typeof i=="number"?i:4;let o=0,a=0,s="left",l="middle";const h=e/2;switch(t){case"left":o=-r,a=h,s="end",l="middle";break;case"right":default:o=e+r,a=h,s="start",l="middle";break;case"top":o=h,a=-r,s="center",l="bottom";break;case"bottom":o=h,a=e+r,s="center",l="top"}return{textX:o,textY:a,textAlignValue:s,textBaselineValue:l}}constructor(t){this.selectedBorders=[],this._scene=t,this.width=t._gantt.tableNoFrameWidth,this.height=t._gantt.gridHeight,this.group=new _e({x:0,y:t._gantt.getAllHeaderRowsHeight(),width:this.width,height:this.height,pickable:!1,clip:!0}),this.group.name="task-bar-container",t.ganttGroup.addChild(this.group),this.initBars(),this.initHoverBarIcons()}initBars(){var t,e,i;this.barContainer=new _e({x:0,y:0,width:this._scene._gantt.getAllDateColsWidth(),height:this._scene._gantt.getAllTaskBarsHeight(),pickable:!1,clip:!0}),this.group.appendChild(this.barContainer);for(let r=0;r<this._scene._gantt.itemCount;r++)if(this._scene._gantt.parsedOptions.tasksShowMode!==_t.Sub_Tasks_Inline&&this._scene._gantt.parsedOptions.tasksShowMode!==_t.Sub_Tasks_Separate&&this._scene._gantt.parsedOptions.tasksShowMode!==_t.Sub_Tasks_Arrange&&this._scene._gantt.parsedOptions.tasksShowMode!==_t.Sub_Tasks_Compact)if(this._scene._gantt.parsedOptions.tasksShowMode!==_t.Project_Sub_Tasks_Inline){const o=this.initBar(r);o&&this.barContainer.appendChild(o)}else{const o=this._scene._gantt.getRecordByIndex(r),a=o.hierarchyState==="expand";if(o.type===ze.PROJECT&&((i=o.children)===null||i===void 0?void 0:i.length)>0&&!a){const s=this._scene._gantt.getRecordIndexByTaskShowIndex(r),l=Array.isArray(s)?[...s]:[s],h=(u,d)=>{var c,f;if(((c=u.children)===null||c===void 0?void 0:c.length)>0)for(let g=0;g<((f=u.children)===null||f===void 0?void 0:f.length);g++){const p=u.children[g];if(p.type!==ze.PROJECT){const v=this.initBar(r,[...d,g],u.children.length);v&&this.barContainer.appendChild(v)}else h(p,[...d,g])}};h(o,l)}else{const s=this.initBar(r);s&&this.barContainer.appendChild(s)}}else{const o=this._scene._gantt.getRecordByIndex(r);if(((t=o.children)===null||t===void 0?void 0:t.length)>0)for(let a=0;a<((e=o.children)===null||e===void 0?void 0:e.length);a++){const s=this.initBar(r,a,o.children.length);s&&this.barContainer.appendChild(s)}else{const a=this.initBar(r);a&&this.barContainer.appendChild(a)}}}initBar(t,e,i){var r,o,a,s,l;const h=this._scene._gantt.parsedOptions.taskBarCustomLayout,{startDate:u,endDate:d,taskDays:c,progress:f,taskRecord:g}=this._scene._gantt.getTaskInfoByTaskListIndex(t,e),p=g.type===ze.MILESTONE;if(p&&!u||!p&&(c<=0||!u||!d||u.getTime()>d.getTime()))return null;const{unit:v,step:m}=this._scene._gantt.parsedOptions.reverseSortedTimelineScales[0];let y=Xe(d,u,v,m,1)*this._scene._gantt.parsedOptions.timelineColWidth;const b=this._scene._gantt.getTaskBarStyle(t,e),_=b.width;Y(b.minSize)&&(y=Math.max(y,b.minSize));const w=this._scene._gantt.parsedOptions.rowHeight,C=this._scene._gantt.parsedOptions.taskBarMilestoneStyle.width,x=Xe(u,this._scene._gantt.parsedOptions.minDate,v,m)*this._scene._gantt.parsedOptions.timelineColWidth-(p?C/2:0),S=this._scene._gantt.getRowsHeightByIndex(0,t-1)+(this._scene._gantt.parsedOptions.tasksShowMode===_t.Sub_Tasks_Separate?((r=e)!==null&&r!==void 0?r:0)*w:this._scene._gantt.parsedOptions.tasksShowMode===_t.Sub_Tasks_Arrange||this._scene._gantt.parsedOptions.tasksShowMode===_t.Sub_Tasks_Compact?g.vtable_gantt_showIndex*w:0)+(w-(p?C:_))/2,A=new zre({x,y:S,width:p?C:y,height:p?C:_,cornerRadius:p?this._scene._gantt.parsedOptions.taskBarMilestoneStyle.cornerRadius:b.cornerRadius,lineWidth:p?2*this._scene._gantt.parsedOptions.taskBarMilestoneStyle.borderLineWidth:2*((o=b.borderLineWidth)!==null&&o!==void 0?o:b.borderWidth),stroke:p?this._scene._gantt.parsedOptions.taskBarMilestoneStyle.borderColor:b.borderColor,angle:p?.25*Math.PI:0,anchor:p?[x+C/2,S+C/2]:void 0});A.name="task-bar",A.task_index=t,A.sub_task_index=e,A.record=g;const T=new _e({x:0,y:0,width:A.attribute.width,height:A.attribute.height,cornerRadius:p?this._scene._gantt.parsedOptions.taskBarMilestoneStyle.cornerRadius:b.cornerRadius,clip:!0});let M;T.name="task-bar-group",A.appendChild(T),A.clipGroupBox=T;let R=!0,L=!0;if(h){let B;typeof h=="function"?B=h({width:y,height:_,index:t,startDate:u,endDate:d,taskDays:c,progress:f,taskRecord:g,ganttInstance:this._scene._gantt}):B=h,B&&(M=B.rootContainer,R=(a=B.renderDefaultBar)!==null&&a!==void 0&&a,L=(s=B.renderDefaultText)!==null&&s!==void 0&&s,M&&(M.name="task-bar-custom-render"))}if(R){const B=ei({x:0,y:0,width:A.attribute.width,height:A.attribute.height,fill:p?this._scene._gantt.parsedOptions.taskBarMilestoneStyle.fillColor:b.barColor,pickable:!1});if(B.name="task-bar-rect",T.appendChild(B),A.barRect=B,g.type!==ze.MILESTONE){const P=ei({x:0,y:0,width:y*f/100,height:_,fill:b.completedBarColor,pickable:!1});P.name="task-bar-progress-rect",T.appendChild(P),A.progressRect=P}}if(M&&T.appendChild(M),L&&g.type!==ze.MILESTONE){const{textAlign:B,textBaseline:P,fontSize:k,fontFamily:E,textOverflow:D,color:I,padding:O}=this._scene._gantt.parsedOptions.taskBarLabelStyle,H=V_(W_(O),B,P,y,_),F=kb({x:H.x,y:H.y,fontSize:k,fill:I,fontFamily:E,text:elt(this._scene._gantt.parsedOptions.taskBarLabelText,g),maxLineWidth:y-10,textBaseline:P,textAlign:B,ellipsis:D==="clip"?"":D==="ellipsis"?"...":Y(D)?D:void 0,poptip:{position:"bottom"}});T.appendChild(F),A.textLabel=F,A.labelStyle=this._scene._gantt.parsedOptions.taskBarLabelStyle,A.updateTextPosition()}if(L&&g.type==="milestone"&&this._scene._gantt.parsedOptions.taskBarMilestoneStyle.labelText){const B=this._scene._gantt.parsedOptions.taskBarMilestoneStyle,P=B.labelTextStyle||{},k=this.calculateMilestoneTextPosition(B.textOrient||"right",B.width,(l=P.padding)!==null&&l!==void 0?l:4),E=new _e({x,y:S,width:B.width,height:B.width,angle:0,pickable:!1}),D=kb({x:k.textX,y:k.textY,fontSize:P.fontSize||16,fontFamily:P.fontFamily||"Arial",fill:P.color||"#ff0000",textBaseline:P.textBaseline||k.textBaselineValue,textAlign:P.textAlign||k.textAlignValue,text:this.formatMilestoneText(B.labelText,g),pickable:!1});E.appendChild(D),this.barContainer.appendChild(E),A.milestoneTextLabel=D,A.milestoneTextContainer=E}return A}updateTaskBarNode(t,e){const i=this.getTaskBarNodeByIndex(t,e);i&&this.barContainer.removeChild(i);const r=this.initBar(t,e);r&&(this.barContainer.insertInto(r,t),r.updateTextPosition())}initHoverBarIcons(){var t,e;const i=new _e({x:0,y:0,width:100,height:100,clip:!1,pickable:!1,cornerRadius:(e=(t=this._scene._gantt.parsedOptions.taskBarHoverStyle.cornerRadius)!==null&&t!==void 0?t:RA.cornerRadius)!==null&&e!==void 0?e:0,fill:this._scene._gantt.parsedOptions.taskBarHoverStyle.barOverlayColor,visibleAll:!1});if(this.hoverBarGroup=i,i.name="task-bar-hover-shadow",this._scene._gantt.parsedOptions.taskBarResizable){const a=new ea({x:0,y:0,width:10,height:20,image:$q,pickable:!0,cursor:"col-resize"});a.name="task-bar-hover-shadow-left-icon",this.hoverBarLeftIcon=a,i.appendChild(a);const s=new ea({x:0,y:0,width:10,height:20,image:$q,pickable:!0,cursor:"col-resize"});s.name="task-bar-hover-shadow-right-icon",this.hoverBarRightIcon=s,i.appendChild(s)}const r=new _e({x:0,y:0,width:12,height:12,pickable:!0,cursor:"ew-resize",visible:!1}),o=new Nf({points:[{x:6,y:0},{x:0,y:6},{x:12,y:6}],fill:"#0064ff",stroke:"#ffffff",lineWidth:1,pickable:!1});r.appendChild(o),r.name="task-bar-progress-handle",this.hoverBarProgressHandle=r,i.appendChild(r)}setX(t){this.barContainer.setAttribute("x",t)}setY(t){this.barContainer.setAttribute("y",t)}refresh(){this.width=this._scene._gantt.tableNoFrameWidth,this.height=this._scene._gantt.gridHeight,this.group.setAttributes({height:this.height,width:this.width,y:this._scene._gantt.getAllHeaderRowsHeight()});const t=this.barContainer.attribute.x,e=this.barContainer.attribute.y;this.barContainer.removeAllChild(),this.group.removeChild(this.barContainer),this.initBars(),this.setX(t),this.setY(e)}resize(){this.width=this._scene._gantt.tableNoFrameWidth,this.height=this._scene._gantt.gridHeight,this.group.setAttribute("width",this.width),this.group.setAttribute("height",this.height)}showHoverBar(t,e,i,r,o){var a,s,l,h,u;const{startDate:d,endDate:c,taskRecord:f}=this._scene._gantt.getTaskInfoByTaskListIndex(o.task_index,o.sub_task_index);o&&o.name==="task-bar"&&o.appendChild(this.hoverBarGroup),this.hoverBarGroup.setAttribute("x",0),this.hoverBarGroup.setAttribute("y",0),this.hoverBarGroup.setAttribute("width",i),this.hoverBarGroup.setAttribute("height",r),this.hoverBarGroup.setAttribute("visibleAll",!0);const g=this._scene._gantt.getTaskBarStyle(o.task_index,o.sub_task_index);if(f.type===ze.MILESTONE)this.hoverBarGroup.setAttribute("cornerRadius",o.attribute.cornerRadius);else{const b=(s=(a=this._scene._gantt.parsedOptions.taskBarHoverStyle.cornerRadius)!==null&&a!==void 0?a:g.cornerRadius)!==null&&s!==void 0?s:0;this.hoverBarGroup.setAttribute("cornerRadius",b)}(l=this.hoverBarLeftIcon)===null||l===void 0||l.setAttribute("visible",!1),(h=this.hoverBarRightIcon)===null||h===void 0||h.setAttribute("visible",!1),(u=this.hoverBarProgressHandle)===null||u===void 0||u.setAttribute("visibleAll",!1);let p=!0,v=!0,m=!0;const y=this._scene._gantt.parsedOptions.progressField;if(y&&f[y]!==void 0&&f[y]!==null)if(typeof this._scene._gantt.parsedOptions.taskBarProgressAdjustable=="function"){const b={index:o.task_index,startDate:d,endDate:c,taskRecord:f,ganttInstance:this._scene._gantt};m=this._scene._gantt.parsedOptions.taskBarProgressAdjustable(b)}else m=this._scene._gantt.parsedOptions.taskBarProgressAdjustable;else m=!1;if(f.type===ze.MILESTONE)p=!1,v=!1,m=!1;else if(typeof this._scene._gantt.parsedOptions.taskBarResizable=="function"){const b={index:o.task_index,startDate:d,endDate:c,taskRecord:f,ganttInstance:this._scene._gantt},_=this._scene._gantt.parsedOptions.taskBarResizable(b);Array.isArray(_)?[p,v]=_:(p=_,v=_)}else Array.isArray(this._scene._gantt.parsedOptions.taskBarResizable)?[p,v]=this._scene._gantt.parsedOptions.taskBarResizable:(p=this._scene._gantt.parsedOptions.taskBarResizable,v=this._scene._gantt.parsedOptions.taskBarResizable);if(p&&this.hoverBarLeftIcon.setAttribute("visible",!0),v&&this.hoverBarRightIcon.setAttribute("visible",!0),m&&this.hoverBarProgressHandle.setAttribute("visibleAll",!0),this.hoverBarLeftIcon&&(this.hoverBarLeftIcon.setAttribute("x",0),this.hoverBarLeftIcon.setAttribute("y",Math.ceil(r/10)),this.hoverBarLeftIcon.setAttribute("width",10),this.hoverBarLeftIcon.setAttribute("height",r-2*Math.ceil(r/10)),this.hoverBarRightIcon.setAttribute("x",i-10),this.hoverBarRightIcon.setAttribute("y",Math.ceil(r/10)),this.hoverBarRightIcon.setAttribute("width",10),this.hoverBarRightIcon.setAttribute("height",r-2*Math.ceil(r/10))),this.hoverBarProgressHandle){const{progress:b}=this._scene._gantt.getTaskInfoByTaskListIndex(o.task_index,o.sub_task_index),_=i*b/100-6;this.hoverBarProgressHandle.setAttribute("x",_),this.hoverBarProgressHandle.setAttribute("y",r-3)}}hideHoverBar(){this.hoverBarGroup.setAttribute("visibleAll",!1)}createSelectedBorder(t,e,i,r,o,a=!1){const s=o.record,l=new _e({x:t,y:e,width:i,height:r,pickable:!1,attachedToTaskBarNode:o,zIndex:1e4});l.name="task-bar-select-border",this.barContainer.appendChild(l),this.selectedBorders.push(l);const h=new _e({x:0,y:0,width:i,height:r,lineWidth:this._scene._gantt.parsedOptions.taskBarSelectedStyle.borderLineWidth,pickable:!1,cornerRadius:o.attribute.cornerRadius,fill:!1,stroke:this._scene._gantt.parsedOptions.taskBarSelectedStyle.borderColor,shadowColor:this._scene._gantt.parsedOptions.taskBarSelectedStyle.shadowColor,shadowOffsetX:this._scene._gantt.parsedOptions.taskBarSelectedStyle.shadowOffsetX,shadowOffsetY:this._scene._gantt.parsedOptions.taskBarSelectedStyle.shadowOffsetY,shadowBlur:this._scene._gantt.parsedOptions.taskBarSelectedStyle.shadowBlur,angle:o.attribute.angle,anchor:[i/2,r/2]});if(l.appendChild(h),a){const u=s.type===ze.MILESTONE?15:10,d=new _e({x:-u,y:0,width:10,height:r,pickable:!0}),c=new Ff({x:5,y:r/2,radius:this._scene._gantt.parsedOptions.dependencyLinkLineCreatePointStyle.radius,fill:this._scene._gantt.parsedOptions.dependencyLinkLineCreatePointStyle.fillColor,stroke:this._scene._gantt.parsedOptions.dependencyLinkLineCreatePointStyle.strokeColor,lineWidth:this._scene._gantt.parsedOptions.dependencyLinkLineCreatePointStyle.strokeWidth,pickable:!1});d.appendChild(c),d.name="task-bar-link-point-left",l.appendChild(d);const f=new _e({x:i+(u-10),y:0,width:10,height:r,pickable:!0}),g=new Ff({x:5,y:r/2,radius:this._scene._gantt.parsedOptions.dependencyLinkLineCreatePointStyle.radius,fill:this._scene._gantt.parsedOptions.dependencyLinkLineCreatePointStyle.fillColor,stroke:this._scene._gantt.parsedOptions.dependencyLinkLineCreatePointStyle.strokeColor,lineWidth:this._scene._gantt.parsedOptions.dependencyLinkLineCreatePointStyle.strokeWidth,pickable:!1,pickStrokeBuffer:10});f.appendChild(g),f.name="task-bar-link-point-right",l.appendChild(f)}}removeSelectedBorder(){this.selectedBorders.forEach((t=>{t.delete()})),this.selectedBorders=[]}removeSecondSelectedBorder(){this.selectedBorders.length===2&&this.selectedBorders.pop().delete()}updateCreatingDependencyLine(t,e,i,r){this.creatingDependencyLine&&(this.creatingDependencyLine.delete(),this.creatingDependencyLine=void 0);const o=new O_({points:[{x:t,y:e},{x:i,y:r}],stroke:this._scene._gantt.parsedOptions.dependencyLinkLineCreatingStyle.lineColor,lineWidth:this._scene._gantt.parsedOptions.dependencyLinkLineCreatingStyle.lineWidth,lineDash:this._scene._gantt.parsedOptions.dependencyLinkLineCreatingStyle.lineDash,pickable:!1});this.creatingDependencyLine=o,this.selectedBorders[0].appendChild(o)}getTaskBarNodeByIndex(t,e){let i=this.barContainer.firstChild;if(!i)return null;for(let r=0;r<this.barContainer.childrenCount;r++){if(i.task_index===t&&(!Y(e)||Y(e)&&i.sub_task_index===e))return i;i=i._next}return null}}class Nre{constructor(t){this.markLineContainerWidth=20,this._scene=t,this.height=Math.min(t._gantt.tableNoFrameHeight,t._gantt.drawHeight)-t._gantt.getAllHeaderRowsHeight(),this.group=new _e({x:0,y:t._gantt.getAllHeaderRowsHeight(),width:t._gantt.tableNoFrameWidth,height:this.height,pickable:!1,clip:!0}),this.group.name="mark-line-container",t.ganttGroup.addChild(this.group),this.markLIneContainer=new _e({x:0,y:0,width:this._scene._gantt.getAllDateColsWidth(),height:this.height,pickable:!1,clip:!0}),this.group.appendChild(this.markLIneContainer),this.initMarkLines()}initMarkLines(){const t=Math.min(this._scene._gantt.tableNoFrameHeight,this._scene._gantt.drawHeight)-this._scene._gantt.getAllHeaderRowsHeight();this.group.setAttributes({y:this._scene._gantt.getAllHeaderRowsHeight(),width:this._scene._gantt.tableNoFrameWidth,height:t}),this.markLIneContainer.setAttribute("width",this._scene._gantt.getAllDateColsWidth()),this.markLIneContainer.setAttribute("height",t);const e=this._scene._gantt.parsedOptions.markLine,i=this._scene._gantt.parsedOptions.minDate;i&&e.forEach((r=>{const o=r.style,a=r.contentStyle||{},s=this._scene._gantt.parsedOptions.timeScaleIncludeHour?zi(r.date):zi(r.date,!0),{unit:l,step:h}=this._scene._gantt.parsedOptions.reverseSortedTimelineScales[0],u=Xe(s,i,l,h);let d=0;if(r.position==="right")d=1;else if(r.position==="middle")d=.5;else if(r.position==="date"){const p=zi(r.date),v=Xe(p,i,l,h);d=v-Math.floor(v)}const c=this._scene._gantt.parsedOptions.timelineColWidth*(Math.floor(u)+d),f=new _e({pickable:!1,x:c-this.markLineContainerWidth/2,y:0,width:this.markLineContainerWidth,height:this.height});f.name="mark-line",this.markLIneContainer.appendChild(f);const g=Wi({pickable:!1,stroke:o.lineColor,lineWidth:o.lineWidth,lineDash:o.lineDash,points:[{x:this.markLineContainerWidth/2,y:0},{x:this.markLineContainerWidth/2,y:this.height}]});if(f.appendChild(g),r.content){const p=this._scene._gantt.parsedOptions.timelineColWidth,v=a.lineHeight||18,m=new _e({x:this.markLineContainerWidth/2,y:0,cursor:"pointer",height:v,clip:!1,fill:a.backgroundColor||o.lineColor,display:"flex",cornerRadius:a.cornerRadius||[0,2,2,0]});m.name="mark-line-content",m.data=r,f.appendChild(m);const y=new tn({maxLineWidth:p,text:r.content,cursor:"pointer",lineHeight:v,fontWeight:a.fontWeight||"normal",fill:a.color||o.lineColor,fontSize:a.fontSize||12,poptip:{position:"top",dx:p/4,dy:-v/4}});m.appendChild(y)}}))}refresh(){this.height=Math.min(this._scene._gantt.tableNoFrameHeight,this._scene._gantt.drawHeight)-this._scene._gantt.getAllHeaderRowsHeight(),this.markLIneContainer.removeAllChild(),this.group.setAttribute("height",this.height),this.markLIneContainer.setAttribute("height",this.height),this.initMarkLines()}setX(t){this.markLIneContainer.setAttribute("x",t)}}class Wre{constructor(t){this._scene=t,this.createFrameBorder()}createFrameBorder(){var t,e,i,r,o,a;const s=this._scene.ganttGroup,l=this._scene._gantt.parsedOptions.outerFrameStyle;if(!l)return;const{cornerRadius:h,borderColor:u,borderLineWidth:d,borderLineDash:c}=l,f={},g={pickable:!1},p=hs(d??0),v=[p[0],p[1],p[2],this._scene._gantt.taskListTableInstance?0:p[3]];g.stroke=!0,g.fill=!1,g.stroke=u,g.lineWidth=Math.max(...v),g.strokeArrayWidth=v,c&&(g.lineDash=c),g.lineCap="butt";const m=!!this._scene._gantt.taskListTableInstance;g.x=m?0:v[3]/2,g.y=v[0]/2;const y=(e=(t=this._scene._gantt.parsedOptions.verticalSplitLine)===null||t===void 0?void 0:t.lineWidth)!==null&&e!==void 0?e:0;if(g.width=s.attribute.width+v[3]/2+v[1]/2+(m?y:0),g.height=s.attribute.height+v[0]/2+v[2]/2,h){const b=Array.isArray(h)?h:[h,h,h,h];this._scene._gantt.taskListTableInstance?(g.cornerRadius=[0,(i=b[1])!==null&&i!==void 0?i:0,(r=b[2])!==null&&r!==void 0?r:0,0],f.cornerRadius=[0,(o=b[1])!==null&&o!==void 0?o:0,(a=b[2])!==null&&a!==void 0?a:0,0]):(g.cornerRadius=b,f.cornerRadius=b)}if(s.setAttributes(f),g.stroke){const b=ei(g);b.name="border-rect",s.parent.insertAfter(b,s),this.border=b,s.border=b}}refresh(){this.border&&this.border.parent&&this.border.parent.removeChild(this.border),this.createFrameBorder()}resize(){var t,e,i;const{borderLineWidth:r}=this._scene._gantt.parsedOptions.outerFrameStyle,o=hs(r??0),a=[o[0],o[1],o[2],this._scene._gantt.taskListTableInstance?0:o[3]],s=(e=(t=this._scene._gantt.parsedOptions.verticalSplitLine)===null||t===void 0?void 0:t.lineWidth)!==null&&e!==void 0?e:0,l=!!this._scene._gantt.taskListTableInstance;(i=this.border)===null||i===void 0||i.setAttributes({x:l?0:a[3]/2,y:a[0]/2,width:this._scene.ganttGroup.attribute.width+a[3]/2+a[1]/2+(l?s:0),height:this._scene.ganttGroup.attribute.height+a[0]/2+a[2]/2}),this.border.strokeArrayWidth=a}}var Vre=function(n,t,e,i){var r,o=arguments.length,a=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,i);else for(var s=n.length-1;s>=0;s--)(r=n[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a};let PT=class{constructor(){this.time=Oe.beforeFillStroke,this.useStyle=!0,this.order=0,this.supportedAppName="vtable"}drawShape(n,t,e,i,r,o,a,s,l,h,u,d,c){n.name==="date-header-cell"&&n.forEachChildren((f=>{var g;if(f.name==="date-header-cell-text"&&f.attribute.textStick===!0){const p=f;p.setAttribute("dx",0);const v=p.globalAABBBounds,m=p.stage.globalAABBBounds,y=p.parent.globalAABBBounds,b=m.intersect(y);m.intersect(y)&&(v.width()>=b.width()&&p.attribute.last_dx?p.setAttribute("dx",(g=p.attribute.last_dx)!==null&&g!==void 0?g:0):m.x1>=v.x1?(p.setAttribute("dx",m.x1-v.x1),p.setAttribute("last_dx",m.x1-v.x1)):m.x2<=v.x2&&(p.setAttribute("dx",m.x2-v.x2),p.setAttribute("last_dx",m.x1-v.x1)))}}))}};PT=Vre([wt()],PT);const Gre=new ie(((n,t,e,i)=>{n(PT).toSelf().inSingletonScope(),n(ma).toService(PT)}));class $re{constructor(t){this._scene=t,this.createAddButton()}createAddButton(){var t;this._scene._gantt.parsedOptions.taskBarCreationCustomLayout?this.group=new _e({x:0,y:0,width:100,height:100}):(this.group=new _e({x:0,y:0,width:100,height:100,lineDash:this._scene._gantt.parsedOptions.taskBarCreationButtonStyle.lineDash,cursor:"pointer",lineWidth:this._scene._gantt.parsedOptions.taskBarCreationButtonStyle.lineWidth,stroke:this._scene._gantt.parsedOptions.taskBarCreationButtonStyle.lineColor,cornerRadius:(t=this._scene._gantt.parsedOptions.taskBarCreationButtonStyle.cornerRadius)!==null&&t!==void 0?t:0,fill:this._scene._gantt.parsedOptions.taskBarCreationButtonStyle.backgroundColor}),this.lineVertical=Wi({pickable:!1,stroke:this._scene._gantt.parsedOptions.taskBarCreationButtonStyle.lineColor,lineWidth:this._scene._gantt.parsedOptions.taskBarCreationButtonStyle.lineWidth,points:[{x:50,y:0},{x:50,y:100}]}),this.group.appendChild(this.lineVertical),this.lineHorizontal=Wi({pickable:!1,stroke:this._scene._gantt.parsedOptions.taskBarCreationButtonStyle.lineColor,lineWidth:this._scene._gantt.parsedOptions.taskBarCreationButtonStyle.lineWidth,points:[{x:0,y:50},{x:100,y:50}]}),this.group.appendChild(this.lineHorizontal)),this.group.name="task-creation-button",this._scene.taskBar.group.addChild(this.group)}show(t,e,i,r){if(this._scene._gantt.parsedOptions.taskBarCreationCustomLayout)this.group.appendChild(this._scene._gantt.parsedOptions.taskBarCreationCustomLayout({width:i,height:r,ganttInstance:this._scene._gantt}).rootContainer);else{const o=Math.min(i,r)/6;this.lineHorizontal.setAttribute("points",[{x:(i-4*o)/2,y:r/2},{x:(i-4*o)/2+4*o,y:r/2}]),this.lineVertical.setAttribute("points",[{x:i/2,y:(r-4*o)/2},{x:i/2,y:(r-4*o)/2+4*o}])}this.group.setAttribute("x",t),this.group.setAttribute("y",e),this.group.setAttribute("width",i),this.group.setAttribute("height",r),this.group.setAttribute("visibleAll",!0)}hide(){this.group.setAttribute("visibleAll",!1),this._scene._gantt.parsedOptions.taskBarCreationCustomLayout&&this.group.removeAllChild()}}class jq{constructor(t){this._scene=t,this.group=new Bv({position:"top",content:"",contentStyle:{fill:"#fff"},visible:!1,panel:{background:"#14161c",cornerRadius:4}}),t.ganttGroup.addChild(this.group)}show(t){var e,i,r;const o=((e=this._scene._gantt.parsedOptions.markLineCreateOptions)===null||e===void 0?void 0:e.markLineCreationHoverToolTip)||{},a=t.globalTransMatrix,s=t.attribute.width,l=t.attribute.height;let h,u;const d=o.position||"top";d==="top"?(h=a.e+s/2-2,u=a.f):d==="bottom"&&(h=a.e+s/2-2,u=a.f+l);const c=((i=o.style)===null||i===void 0?void 0:i.contentStyle)||{fill:"#fff"},f=((r=o.style)===null||r===void 0?void 0:r.panelStyle)||{background:"#14161c",cornerRadius:4};this.group.setAttributes({content:o.tipContent,position:d,visibleAll:!0,visible:!0,contentStyle:c,panel:Object.assign(Object.assign({},f),{visible:!0}),x:h,y:u})}hide(){this.group.setAttributes({visibleAll:!1,visible:!1})}}class jre{constructor(t){this._scene=t,this.width=t._gantt.tableNoFrameWidth,this.height=t._gantt.gridHeight,this.group=new _e({x:0,y:t._gantt.getAllHeaderRowsHeight(),width:this.width,height:this.height,pickable:!1,clip:!0}),this.group.name="dependency-link-container",t.ganttGroup.addChild(this.group),this.initLinkLines()}initLinkLines(){var t;if(llt(this._scene._gantt.records),this.linkLinesContainer=new _e({x:0,y:0,width:this._scene._gantt.getAllDateColsWidth(),height:this._scene._gantt.getAllTaskBarsHeight(),pickable:!1,clip:!0}),this.group.appendChild(this.linkLinesContainer),(t=this._scene._gantt.records)===null||t===void 0?void 0:t.length)for(let e=0;e<this._scene._gantt.parsedOptions.dependencyLinks.length;e++)this.initLinkLine(e)}initLinkLine(t){var e,i,r,o,a,s,l,h,u,d;const{taskKeyField:c,dependencyLinks:f}=this._scene._gantt.parsedOptions,g=f[t],{linkedToTaskKey:p,linkedFromTaskKey:v,type:m}=g,y=gl(this._scene._gantt.records,c,p),b=gl(this._scene._gantt.records,c,v);if(!y||!b)return;let _,w,C,x,S,A,T,M;if(y.record.vtable_gantt_linkedTo||(y.record.vtable_gantt_linkedTo=[]),y.record.vtable_gantt_linkedTo.push(g),b.record.vtable_gantt_linkedFrom||(b.record.vtable_gantt_linkedFrom=[]),b.record.vtable_gantt_linkedFrom.push(g),this._scene._gantt.parsedOptions.tasksShowMode===_t.Sub_Tasks_Inline)M=b.index[0],T=y.index[0],{startDate:_,endDate:w,taskDays:C}=this._scene._gantt.getTaskInfoByTaskListIndex(y.index[0],y.index[1]),{startDate:x,endDate:S,taskDays:A}=this._scene._gantt.getTaskInfoByTaskListIndex(b.index[0],b.index[1]);else if(this._scene._gantt.parsedOptions.tasksShowMode===_t.Project_Sub_Tasks_Inline){const E=this._scene._gantt.getTaskShowIndexByRecordIndex(b.index.slice(0,-1)),D=this._scene._gantt.getTaskShowIndexByRecordIndex(y.index.slice(0,-1)),I=this._scene._gantt.getRecordByIndex(E),O=this._scene._gantt.getRecordByIndex(D);M=I.type===ze.PROJECT&&I.hierarchyState!=="expand"&&this._scene._gantt.parsedOptions.projectSubTasksExpandable!==!1?E:this._scene._gantt.getTaskShowIndexByRecordIndex(b.index),T=O.type===ze.PROJECT&&O.hierarchyState!=="expand"&&this._scene._gantt.parsedOptions.projectSubTasksExpandable!==!1?D:this._scene._gantt.getTaskShowIndexByRecordIndex(y.index),{startDate:_,endDate:w,taskDays:C}=this._scene._gantt.getTaskInfoByTaskListIndex(T,y.index),{startDate:x,endDate:S,taskDays:A}=this._scene._gantt.getTaskInfoByTaskListIndex(M,b.index)}else this._scene._gantt.parsedOptions.tasksShowMode===_t.Sub_Tasks_Separate||this._scene._gantt.parsedOptions.tasksShowMode===_t.Sub_Tasks_Arrange||this._scene._gantt.parsedOptions.tasksShowMode===_t.Sub_Tasks_Compact?(M=this._scene._gantt.getRowsHeightByIndex(0,b.index[0]-1)/this._scene._gantt.parsedOptions.rowHeight+(this._scene._gantt.parsedOptions.tasksShowMode===_t.Sub_Tasks_Arrange||this._scene._gantt.parsedOptions.tasksShowMode===_t.Sub_Tasks_Compact?b.record.vtable_gantt_showIndex:(e=b.index[1])!==null&&e!==void 0?e:0),T=this._scene._gantt.getRowsHeightByIndex(0,y.index[0]-1)/this._scene._gantt.parsedOptions.rowHeight+(this._scene._gantt.parsedOptions.tasksShowMode===_t.Sub_Tasks_Arrange||this._scene._gantt.parsedOptions.tasksShowMode===_t.Sub_Tasks_Compact?y.record.vtable_gantt_showIndex:(i=y.index[1])!==null&&i!==void 0?i:0),{startDate:_,endDate:w,taskDays:C}=this._scene._gantt.getTaskInfoByTaskListIndex(y.index[0],y.index[1]),{startDate:x,endDate:S,taskDays:A}=this._scene._gantt.getTaskInfoByTaskListIndex(b.index[0],b.index[1])):(M=this._scene._gantt.getTaskShowIndexByRecordIndex(b.index),T=this._scene._gantt.getTaskShowIndexByRecordIndex(y.index),{startDate:_,endDate:w,taskDays:C}=this._scene._gantt.getTaskInfoByTaskListIndex(T),{startDate:x,endDate:S,taskDays:A}=this._scene._gantt.getTaskInfoByTaskListIndex(M));if(!A||!C)return;zi(this._scene._gantt.parsedOptions.minDate);const{arrowPoints:R,linePoints:L}=Ure(m,x,S,M,A,b.record.type===ze.MILESTONE,_,w,T,C,y.record.type===ze.MILESTONE,this._scene._gantt),B=this._scene._gantt.parsedOptions.dependencyLinkLineStyle,P=Wi({pickable:!0,stroke:(o=(r=g.linkLineStyle)===null||r===void 0?void 0:r.lineColor)!==null&&o!==void 0?o:B.lineColor,lineWidth:(s=(a=g.linkLineStyle)===null||a===void 0?void 0:a.lineWidth)!==null&&s!==void 0?s:B.lineWidth,lineDash:(h=(l=g.linkLineStyle)===null||l===void 0?void 0:l.lineDash)!==null&&h!==void 0?h:B.lineDash,points:L,pickStrokeBuffer:3,vtable_link:g});this.linkLinesContainer.appendChild(P),g.vtable_gantt_linkLineNode=P;const k=new Nf({fill:(d=(u=g.linkLineStyle)===null||u===void 0?void 0:u.lineColor)!==null&&d!==void 0?d:B.lineColor,points:R});this.linkLinesContainer.appendChild(k),g.vtable_gantt_linkArrowNode=k}setX(t){this.linkLinesContainer.setAttribute("x",t)}setY(t){this.linkLinesContainer.setAttribute("y",t)}refresh(){this.width=this._scene._gantt.tableNoFrameWidth,this.height=this._scene._gantt.gridHeight,this.group.setAttributes({height:this.height,width:this.width,y:this._scene._gantt.getAllHeaderRowsHeight()});const t=this.linkLinesContainer.attribute.x,e=this.linkLinesContainer.attribute.y;this.linkLinesContainer.removeAllChild(),this.group.removeChild(this.linkLinesContainer),this.initLinkLines(),this.setX(t),this.setY(e)}resize(){this.width=this._scene._gantt.tableNoFrameWidth,this.height=this._scene._gantt.gridHeight,this.group.setAttribute("width",this.width),this.group.setAttribute("height",this.height)}createSelectedLinkLine(t){const e=t.vtable_gantt_linkLineNode,i=t.vtable_gantt_linkArrowNode,r=e.clone(),o=i.clone();r.setAttribute("stroke",this._scene._gantt.parsedOptions.dependencyLinkSelectedLineStyle.lineColor),r.setAttribute("lineWidth",this._scene._gantt.parsedOptions.dependencyLinkSelectedLineStyle.lineWidth),r.setAttribute("shadowColor",this._scene._gantt.parsedOptions.dependencyLinkSelectedLineStyle.shadowColor),r.setAttribute("shadowOffsetX",this._scene._gantt.parsedOptions.dependencyLinkSelectedLineStyle.shadowOffset),r.setAttribute("shadowOffsetY",this._scene._gantt.parsedOptions.dependencyLinkSelectedLineStyle.shadowOffset),r.setAttribute("shadowBlur",this._scene._gantt.parsedOptions.dependencyLinkSelectedLineStyle.shadowBlur),this.linkLinesContainer.appendChild(r),o.setAttribute("fill",this._scene._gantt.parsedOptions.dependencyLinkSelectedLineStyle.lineColor),this.linkLinesContainer.appendChild(o),this.selectedEffectNodes=[r,o]}removeSelectedLinkLine(){var t;(t=this.selectedEffectNodes)===null||t===void 0||t.forEach((e=>{e.delete()})),this.selectedEffectNodes=[]}deleteLink(t){const e=t.vtable_gantt_linkLineNode,i=t.vtable_gantt_linkArrowNode;e.delete(),i.delete()}}function Ure(n,t,e,i,r,o,a,s,l,h,u,d){const{unit:c,step:f}=d.parsedOptions.reverseSortedTimelineScales[0],{minDate:g,rowHeight:p,timelineColWidth:v}=d.parsedOptions,m=d.parsedOptions.taskBarMilestoneHypotenuse;let y=[],b=[];if(n===eo.FinishToStart){let _=Xe(e,g,c,f,1)*v;o&&(_=Xe(t,g,c,f,1)*v+m/2);let w=Xe(a,g,c,f)*v;u&&(w-=m/2),y=[{x:_,y:p*(i+.5)},{x:_+20,y:p*(i+.5)},{x:_+20,y:p*(i+(i>l?0:1))},{x:w-20,y:p*(i+(i>l?0:1))},{x:w-20,y:p*(l+.5)},{x:w,y:p*(l+.5)}],_+20<=w-20&&y.splice(2,3,{x:_+20,y:p*(l+.5)});const C=y[y.length-1];b=[{x:C.x,y:C.y},{x:C.x-10,y:C.y-5},{x:C.x-10,y:C.y+5},{x:C.x,y:C.y}]}else if(n===eo.StartToFinish){let _=Xe(t,g,c,f)*v;o&&(_-=m/2);let w=Xe(s,g,c,f,1)*v;u&&(w=Xe(a,g,c,f,1)*v+m/2),y=[{x:_,y:p*(i+.5)},{x:_-20,y:p*(i+.5)},{x:_-20,y:p*(i+(i>l?0:1))},{x:w+20,y:p*(i+(i>l?0:1))},{x:w+20,y:p*(l+.5)},{x:w,y:p*(l+.5)}],_-20>=w+20&&y.splice(2,3,{x:_-20,y:p*(l+.5)});const C=y[y.length-1];b=[{x:C.x,y:C.y},{x:C.x+10,y:C.y-5},{x:C.x+10,y:C.y+5},{x:C.x,y:C.y}]}else if(n===eo.StartToStart){let _=Xe(t,g,c,f)*v;o&&(_-=m/2);let w=Xe(a,g,c,f)*v;u&&(w-=m/2),y=[{x:_,y:p*(i+.5)},{x:(i===l?_:Math.min(_,w))-20,y:p*(i+.5)},{x:(i===l?_:Math.min(_,w))-20,y:p*(l+(i===l?1:.5))},{x:w-20,y:p*(l+(i===l?1:.5))},{x:(i===l?w:Math.min(_,w))-20,y:p*(l+.5)},{x:w,y:p*(l+.5)}];const C=y[y.length-1];b=[{x:C.x,y:C.y},{x:C.x-10,y:C.y-5},{x:C.x-10,y:C.y+5},{x:C.x,y:C.y}]}else if(n===eo.FinishToFinish){let _=Xe(e,g,c,f,1)*v;o&&(_=Xe(t,g,c,f,1)*v+m/2);let w=Xe(s,g,c,f,1)*v;u&&(w=Xe(a,g,c,f,1)*v+m/2),y=[{x:_,y:p*(i+.5)},{x:(i===l?_:Math.max(_,w))+20,y:p*(i+.5)},{x:(i===l?_:Math.max(_,w))+20,y:p*(l+(i===l?1:.5))},{x:w+20,y:p*(l+(i===l?1:.5))},{x:w+20,y:p*(l+.5)},{x:w,y:p*(l+.5)}];const C=y[y.length-1];b=[{x:C.x,y:C.y},{x:C.x+10,y:C.y-5},{x:C.x+10,y:C.y+5},{x:C.x,y:C.y}]}return{linePoints:y,arrowPoints:b}}function Uq(n,t,e,i,r,o,a,s,l,h,u,d,c,f,g,p){const{unit:v,step:m}=p.parsedOptions.reverseSortedTimelineScales[0],{minDate:y,rowHeight:b,timelineColWidth:_}=p.parsedOptions,w=p.parsedOptions.taskBarMilestoneHypotenuse,C=p.parsedOptions.taskBarMilestoneStyle.width;let x=[],S=[];if(n===eo.FinishToStart){let A=a?a.attribute.x+a.attribute.width:Xe(e,y,v,m,1)*_;o&&(A=a?a.attribute.x+a.attribute.width+(w-C)/2:Xe(t,y,v,m,1)*_+w/2);let T=f?f.attribute.x:Xe(l,y,v,m)*_;c&&(T-=(w-C)/2),x=[{x:A,y:b*(i+.5)+s},{x:A+20,y:b*(i+.5)+s},{x:A+20,y:b*(i+(i>u?0:1))+s},{x:T-20,y:b*(i+(i>u?0:1))+s},{x:T-20,y:b*(u+.5)+g},{x:T,y:b*(u+.5)+g}],A+20<=T-20&&x.splice(2,3,{x:A+20,y:b*(u+.5)+g});const M=x[x.length-1];S=[{x:M.x,y:M.y},{x:M.x-10,y:M.y-5},{x:M.x-10,y:M.y+5},{x:M.x,y:M.y}]}else if(n===eo.StartToFinish){let A=a?a.attribute.x:Xe(t,y,v,m)*_;o&&(A-=(w-C)/2);let T=f?f.attribute.x+f.attribute.width:Xe(h,y,v,m,1)*_;c&&(T=f?f.attribute.x+f.attribute.width+(w-C)/2:Xe(l,y,v,m,1)*_+w/2),x=[{x:A,y:b*(i+.5)+s},{x:A-20,y:b*(i+.5)+s},{x:A-20,y:b*(i+(i>u?0:1))+s},{x:T+20,y:b*(i+(i>u?0:1))+s},{x:T+20,y:b*(u+.5)+g},{x:T,y:b*(u+.5)+g}],A-20>=T+20&&x.splice(2,3,{x:A-20,y:b*(u+.5)+g});const M=x[x.length-1];S=[{x:M.x,y:M.y},{x:M.x+10,y:M.y-5},{x:M.x+10,y:M.y+5},{x:M.x,y:M.y}]}else if(n===eo.StartToStart){let A=a?a.attribute.x:Xe(t,y,v,m)*_;o&&(A-=(w-C)/2);let T=f?f.attribute.x:Xe(l,y,v,m)*_;c&&(T-=(w-C)/2),x=[{x:A,y:b*(i+.5)+s},{x:(i===u?A:Math.min(A,T))-20,y:b*(i+.5)+s},{x:(i===u?A:Math.min(A,T))-20,y:b*(u+(i===u?1:.5))+g},{x:T-20,y:b*(u+(i===u?1:.5))+g},{x:(i===u?T:Math.min(A,T))-20,y:b*(u+.5)+g},{x:T,y:b*(u+.5)+g}];const M=x[x.length-1];S=[{x:M.x,y:M.y},{x:M.x-10,y:M.y-5},{x:M.x-10,y:M.y+5},{x:M.x,y:M.y}]}else if(n===eo.FinishToFinish){let A=a?a.attribute.x+a.attribute.width:Xe(e,y,v,m,1)*_;o&&(A=a?a.attribute.x+a.attribute.width+(w-C)/2:Xe(t,y,v,m,1)*_+w/2);let T=f?f.attribute.x+f.attribute.width:Xe(h,y,v,m,1)*_;c&&(T=f?f.attribute.x+f.attribute.width+(w-C)/2:Xe(l,y,v,m,1)*_+w/2),x=[{x:A,y:b*(i+.5)+s},{x:(i===u?A:Math.max(A,T))+20,y:b*(i+.5)+s},{x:(i===u?A:Math.max(A,T))+20,y:b*(u+(i===u?1:.5))+g},{x:T+20,y:b*(u+(i===u?1:.5))+g},{x:T+20,y:b*(u+.5)+g},{x:T,y:b*(u+.5)+g}];const M=x[x.length-1];S=[{x:M.x,y:M.y},{x:M.x+10,y:M.y-5},{x:M.x+10,y:M.y+5},{x:M.x,y:M.y}]}return{linePoints:x,arrowPoints:S}}class Yre{constructor(t){this._scene=t,this.dragLineContainer=new _e({x:0,y:0,width:t._gantt.tableNoFrameWidth,height:Math.min(t._gantt.tableNoFrameHeight,t._gantt.drawHeight),pickable:!1,clip:!0,visible:!1}),this.dragLineContainer.name="drag-order-line-container",t.ganttGroup.addChild(this.dragLineContainer),this.initDragLine()}initDragLine(){if(this._scene._gantt.taskListTableInstance){const t=this._scene._gantt.taskListTableInstance.theme.dragHeaderSplitLine,e=Wi({pickable:!1,stroke:t.lineColor,lineWidth:t.lineWidth,points:[]});this.dragLine=e,this.dragLineContainer.appendChild(e)}}showDragLine(t){this.dragLineContainer.showAll(),this.dragLine.setAttribute("points",[{x:0,y:t},{x:this._scene._gantt.tableNoFrameWidth,y:t}])}hideDragLine(){this.dragLineContainer.hideAll()}}Kt.load(Gre);class Xre{constructor(t){let e,i;this._gantt=t,this.tableGroupWidth=t.tableNoFrameWidth,this.tableGroupHeight=Math.min(t.tableNoFrameHeight,t.drawHeight),Ma.mode==="node"||(jt.setEnv("browser"),e=t.canvas.width,i=t.canvas.height),this.stage=Wat({canvas:t.canvas,width:e,height:i,disableDirtyBounds:!1,background:t.parsedOptions.underlayBackgroundColor,enableLayout:!0,autoRender:!1,context:{appName:"vtable"},pluginList:["poptipForText"]}),this.stage.gantt=this._gantt,this.stage.table=this._gantt,this.stage.defaultLayer.setTheme({group:{boundsPadding:0,strokeBoundsBuffer:0,lineJoin:"round"},text:{ignoreBuf:!0}}),this.initSceneGraph()}initSceneGraph(){this.ganttGroup=new _e({x:this._gantt.tableX,y:this._gantt.tableY,width:this.tableGroupWidth,height:this.tableGroupHeight,clip:!0,pickable:!1}),this.stage.defaultLayer.add(this.ganttGroup),this.ganttGroup.name="table",this.timelineHeader=new iXt(this),this.grid=new pYt(this),this.dependencyLink=new jre(this),this.taskBar=new Fre(this),this.markLine=new Nre(this),this.toolTip=new jq(this),this.frameBorder=new Wre(this),this.scrollbarComponent=new LYt(this._gantt),this.stage.defaultLayer.addChild(this.scrollbarComponent.hScrollBar),this.stage.defaultLayer.addChild(this.scrollbarComponent.vScrollBar),this.dragOrderLine=new Yre(this)}updateSceneGraph(){const t=this._gantt;let e,i;this.tableGroupWidth=t.tableNoFrameWidth,this.tableGroupHeight=Math.min(t.tableNoFrameHeight,t.drawHeight),Ma.mode==="node"||(jt.setEnv("browser"),e=t.canvas.width,i=t.canvas.height),this.stage.resize(e,i),this.refreshAll()}afterCreateSceneGraph(){this.scrollbarComponent.updateScrollBar(),zYt(this._gantt.eventManager)}refreshAll(){this.tableGroupHeight=Math.min(this._gantt.tableNoFrameHeight,this._gantt.drawHeight),this.tableGroupWidth=this._gantt.tableNoFrameWidth,this.ganttGroup.setAttribute("height",this.tableGroupHeight),this.ganttGroup.setAttribute("width",this.tableGroupWidth),this.timelineHeader.refresh(),this.grid.refresh(),this.taskBar.refresh(),this.dependencyLink.refresh(),this.markLine.refresh(),this.dependencyLink.refresh(),this.frameBorder.refresh(),this.scrollbarComponent.updateScrollBar(),this.updateNextFrame()}refreshTaskBars(){this.dependencyLink.refresh(),this.taskBar.refresh(),this.updateNextFrame()}refreshTaskBarsAndGrid(){this._gantt.verticalSplitResizeLine.style.height=this._gantt.drawHeight+"px",this.tableGroupHeight=Math.min(this._gantt.tableNoFrameHeight,this._gantt.drawHeight),this.ganttGroup.setAttribute("height",this.tableGroupHeight),this.grid.refresh(),this.taskBar.refresh(),this.dependencyLink.refresh(),this.markLine.refresh(),this.frameBorder.resize(),this.scrollbarComponent.updateScrollBar(),this.updateNextFrame()}updateTableSize(){this.tableGroupHeight=Math.min(this._gantt.tableNoFrameHeight,this._gantt.drawHeight),this.tableGroupWidth=this._gantt.tableNoFrameWidth,this.ganttGroup.setAttributes({x:this._gantt.tableX,y:this._gantt.tableY,width:this._gantt.tableNoFrameWidth,height:this.tableGroupHeight}),this.grid.resize(),this.taskBar.resize(),this.dependencyLink.resize(),this.markLine.refresh(),this.frameBorder.resize()}updateStageBackground(){this.stage.background=this._gantt.parsedOptions.underlayBackgroundColor,this.updateNextFrame()}renderSceneGraph(){this.stage.render()}updateNextFrame(){this.stage.renderNextFrame()}get width(){var t,e;return(e=(t=this.ganttGroup.attribute)===null||t===void 0?void 0:t.width)!==null&&e!==void 0?e:0}get height(){var t,e;return(e=(t=this.ganttGroup.attribute)===null||t===void 0?void 0:t.height)!==null&&e!==void 0?e:0}get x(){var t,e;return(e=(t=this.ganttGroup.attribute)===null||t===void 0?void 0:t.x)!==null&&e!==void 0?e:0}get y(){var t,e;return(e=(t=this.ganttGroup.attribute)===null||t===void 0?void 0:t.y)!==null&&e!==void 0?e:0}setX(t,e=!1){this.timelineHeader.setX(t),this.grid.setX(t),this.taskBar.setX(t),this.dependencyLink.setX(t),this.markLine.setX(t),this.updateNextFrame()}setY(t,e=!1){this.grid.setY(t),this.taskBar.setY(t),this.dependencyLink.setY(t),this.updateNextFrame()}setPixelRatio(t){this.stage.disableDirtyBounds(),this.stage.window.setDpr(t),this.stage.render(),this.stage.enableDirtyBounds()}resize(){this.updateTableSize(),this.scrollbarComponent.updateScrollBar(),this.updateNextFrame()}release(){this.stage.release()}showTaskCreationButton(t,e,i){this.taskCreationButton||(this.taskCreationButton=new $re(this._gantt.scenegraph));const r=this._gantt.parsedOptions.taskBarCreationMaxWidth,o=this._gantt.parsedOptions.taskBarCreationMinWidth,a=this._gantt.getDateColWidth(i),s=r?Math.min(r,o?Math.max(o,a):a):o?Math.max(o,a):a,l=t-(s-a)/2;this.taskCreationButton.show(l,e,s,this._gantt.parsedOptions.rowHeight),this.updateNextFrame()}hideTaskCreationButton(){this.taskCreationButton&&(this.taskCreationButton.hide(),this.updateNextFrame())}showToolTip(t){this.toolTip||(this.toolTip=new jq(this._gantt.scenegraph)),this.toolTip.show(t)}hideToolTip(){this.toolTip.hide()}refreshRecordLinkNodes(t,e,i,r=0){const o=this._gantt,a=o.getRecordByIndex(t,e),s=a.vtable_gantt_linkedTo,l=a.vtable_gantt_linkedFrom;for(let h=0;h<s?.length;h++){const u=s[h],d=u.vtable_gantt_linkLineNode,c=u.vtable_gantt_linkArrowNode,{linkedToTaskKey:f,linkedFromTaskKey:g,type:p}=u,{taskKeyField:v,minDate:m}=o.parsedOptions,y=gl(o.records,v,g),b=gl(o.records,v,f);let _,w,C,x,S,A,T,M,R;const L=this._gantt.getTaskBarStyle(t,e);if(o.parsedOptions.tasksShowMode===_t.Sub_Tasks_Inline){const k=Uo(i.attribute.y+r,o);M=y.index[0],T=o.getRowsHeightByIndex(0,k.task_index-1)/o.parsedOptions.rowHeight,{startDate:_,endDate:w,taskDays:C}=o.getTaskInfoByTaskListIndex(b.index[0],b.index[1]),{startDate:x,endDate:S,taskDays:A}=o.getTaskInfoByTaskListIndex(y.index[0],y.index[1]);const E=L.width;R=i.attribute.y+E/2-(T+.5)*o.parsedOptions.rowHeight}else if(o.parsedOptions.tasksShowMode===_t.Project_Sub_Tasks_Inline){const k=o.getTaskShowIndexByRecordIndex(y.index.slice(0,-1)),E=o.getTaskShowIndexByRecordIndex(b.index.slice(0,-1)),D=o.getRecordByIndex(k),I=o.getRecordByIndex(E);M=D.type===ze.PROJECT&&D.hierarchyState!=="expand"&&o.parsedOptions.projectSubTasksExpandable!==!1?k:o.getTaskShowIndexByRecordIndex(y.index),T=I.type===ze.PROJECT&&I.hierarchyState!=="expand"&&o.parsedOptions.projectSubTasksExpandable!==!1?E:o.getTaskShowIndexByRecordIndex(b.index),{startDate:_,endDate:w,taskDays:C}=o.getTaskInfoByTaskListIndex(T,b.index),{startDate:x,endDate:S,taskDays:A}=o.getTaskInfoByTaskListIndex(M,y.index)}else if(o.parsedOptions.tasksShowMode===_t.Sub_Tasks_Separate||o.parsedOptions.tasksShowMode===_t.Sub_Tasks_Arrange||o.parsedOptions.tasksShowMode===_t.Sub_Tasks_Compact){const k=Uo(i.attribute.y+r,o);M=o.getRowsHeightByIndex(0,y.index[0]-1)/o.parsedOptions.rowHeight+(o.parsedOptions.tasksShowMode===_t.Sub_Tasks_Arrange||o.parsedOptions.tasksShowMode===_t.Sub_Tasks_Compact?y.record.vtable_gantt_showIndex:y.index[1]),T=o.getRowsHeightByIndex(0,k.task_index-1)/o.parsedOptions.rowHeight+(o.parsedOptions.tasksShowMode===_t.Sub_Tasks_Arrange||o.parsedOptions.tasksShowMode===_t.Sub_Tasks_Compact?b.record.vtable_gantt_showIndex:k.sub_task_index),{startDate:_,endDate:w,taskDays:C}=o.getTaskInfoByTaskListIndex(b.index[0],b.index[1]),{startDate:x,endDate:S,taskDays:A}=o.getTaskInfoByTaskListIndex(y.index[0],y.index[1]);const E=L.width;R=i.attribute.y+E/2-(T+.5)*o.parsedOptions.rowHeight}else{if(M=o.getTaskShowIndexByRecordIndex(y.index),T=o.getTaskShowIndexByRecordIndex(b.index),M===-1||T===-1)continue;({startDate:_,endDate:w,taskDays:C}=o.getTaskInfoByTaskListIndex(T)),{startDate:x,endDate:S,taskDays:A}=o.getTaskInfoByTaskListIndex(M)}if(!(x&&S&&_&&w&&d&&c))return;const{linePoints:B,arrowPoints:P}=Uq(p,x,S,M,A,y.record.type===ze.MILESTONE,null,0,_,w,T,C,b.record.type===ze.MILESTONE,i,R??0,this._gantt);d.setAttribute("points",B),c.setAttribute("points",P)}for(let h=0;h<l?.length;h++){const u=l[h],d=u.vtable_gantt_linkLineNode,c=u.vtable_gantt_linkArrowNode,{linkedToTaskKey:f,linkedFromTaskKey:g,type:p}=u,{taskKeyField:v,minDate:m}=o.parsedOptions,y=gl(o.records,v,f),b=gl(o.records,v,g);let _,w,C,x,S,A,T,M,R;const L=this._gantt.getTaskBarStyle(t,e);if(o.parsedOptions.tasksShowMode===_t.Sub_Tasks_Inline){const k=Uo(i.attribute.y+r,o);M=o.getRowsHeightByIndex(0,k.task_index-1)/o.parsedOptions.rowHeight,T=y.index[0],{startDate:_,endDate:w,taskDays:C}=o.getTaskInfoByTaskListIndex(y.index[0],y.index[1]),{startDate:x,endDate:S,taskDays:A}=o.getTaskInfoByTaskListIndex(b.index[0],b.index[1]);const E=L.width;R=i.attribute.y+E/2-(M+.5)*o.parsedOptions.rowHeight}else if(o.parsedOptions.tasksShowMode===_t.Project_Sub_Tasks_Inline){const k=o.getTaskShowIndexByRecordIndex(b.index.slice(0,-1)),E=o.getTaskShowIndexByRecordIndex(y.index.slice(0,-1)),D=o.getRecordByIndex(k),I=o.getRecordByIndex(E);M=D.type===ze.PROJECT&&D.hierarchyState!=="expand"&&o.parsedOptions.projectSubTasksExpandable!==!1?k:o.getTaskShowIndexByRecordIndex(b.index),T=I.type===ze.PROJECT&&I.hierarchyState!=="expand"&&o.parsedOptions.projectSubTasksExpandable!==!1?E:o.getTaskShowIndexByRecordIndex(y.index),{startDate:_,endDate:w,taskDays:C}=o.getTaskInfoByTaskListIndex(T,y.index),{startDate:x,endDate:S,taskDays:A}=o.getTaskInfoByTaskListIndex(M,b.index)}else if(o.parsedOptions.tasksShowMode===_t.Sub_Tasks_Separate||o.parsedOptions.tasksShowMode===_t.Sub_Tasks_Arrange||o.parsedOptions.tasksShowMode===_t.Sub_Tasks_Compact){const k=Uo(i.attribute.y+r,o);M=o.getRowsHeightByIndex(0,k.task_index-1)/o.parsedOptions.rowHeight+(o.parsedOptions.tasksShowMode===_t.Sub_Tasks_Arrange||o.parsedOptions.tasksShowMode===_t.Sub_Tasks_Compact?b.record.vtable_gantt_showIndex:k.sub_task_index),T=o.getRowsHeightByIndex(0,y.index[0]-1)/o.parsedOptions.rowHeight+(o.parsedOptions.tasksShowMode===_t.Sub_Tasks_Arrange||o.parsedOptions.tasksShowMode===_t.Sub_Tasks_Compact?y.record.vtable_gantt_showIndex:y.index[1]),{startDate:_,endDate:w,taskDays:C}=o.getTaskInfoByTaskListIndex(y.index[0],y.index[1]),{startDate:x,endDate:S,taskDays:A}=o.getTaskInfoByTaskListIndex(b.index[0],b.index[1]);const E=L.width;R=i.attribute.y+E/2-(M+.5)*o.parsedOptions.rowHeight}else{if(M=o.getTaskShowIndexByRecordIndex(b.index),T=o.getTaskShowIndexByRecordIndex(y.index),M===-1||T===-1)continue;({startDate:_,endDate:w,taskDays:C}=o.getTaskInfoByTaskListIndex(T)),{startDate:x,endDate:S,taskDays:A}=o.getTaskInfoByTaskListIndex(M)}if(!(x&&S&&_&&w&&d&&c))return;const{linePoints:B,arrowPoints:P}=Uq(p,x,S,M,A,b.record.type===ze.MILESTONE,i,R??0,_,w,T,C,y.record.type===ze.MILESTONE,null,0,this._gantt);d.setAttribute("points",B),c.setAttribute("points",P)}}}const qre=n=>{switch(Object.prototype.toString.call(n)){case"[object Object]":return"object";case"[object Function]":return"function";case"[object Array]":return"array";case"[object String]":return"string";case"[object Number]":return"number";case"[object RegExp]":return"regExp";case"[object Boolean]":return"boolean";case"[object Symbol]":return"symbol";case"[object Date]":return"date";case"[object Undefined]":return"undefined";case"[object Null]":return"null";case"[object Error]":return"error";case"[object HTMLDocument]":return"document";case"[object global]":return"global";default:return null}},Kre=(n,t)=>qre(n)===t,Zre=n=>Kre(n,"object");function hut(n,t,e){let i,r,o,a,s,l,h=0,u=!1,d=!1,c=!0;const f=!t&&t!==0&&typeof requestAnimationFrame=="function";if(typeof n!="function")throw new TypeError("Expected a function");function g(y){const b=i,_=r;return r=void 0,i=void 0,h=y,a=n.apply(_,b),a}function p(y,b){return f?requestAnimationFrame(y):setTimeout(y,b)}function v(y){const b=y-l;return l===void 0||b>=t||b<0||u&&y-h>=o}function m(){const y=Date.now();if(v(y))return(function(b){return s=void 0,c&&i?g(b):(r=void 0,i=void 0,a)})(y);s=p(m,(function(b){const _=b-h,w=t&&-(b-l);return u?Math.min(w,o-_):w})(y))}return t=+t||0,Zre(e)&&(d=!!e.leading,u="maxWait"in e,u&&(o=Math.max(+e.maxWait||0,t)),c="trailing"in e?!!e.trailing:c),function(...y){const b=Date.now(),_=v(b);if(i=y,r=this,l=b,_){if(s===void 0)return(function(w){return h=w,s=p(m,t),d?g(w):a})(l);if(u)return s=p(m,t),g(l)}return s===void 0&&(s=p(m,t)),a}}let Jre=1,Qre=class{constructor(t,e,i){var r;if(this.resizeTime=100,this.lastSize={width:0,height:0},this.mutationResize=()=>{this.onResize()},this.callBack=()=>{const o=this.getSize();let a=!1;o.width===this.lastSize.width&&o.height===this.lastSize.height&&(a=!0),this.lastSize=o,this.cb&&this.cb(Object.assign(Object.assign({},this.lastSize),{windowSizeNotChange:a}))},this.onResize=()=>{this.callBackDebounce()},this.element=t,this.cb=e,this.lastSize=this.getSize(),i&&(this.resizeTime=Math.max(i,16)),this.callBackDebounce=hut(this.callBack,this.resizeTime),window?.addEventListener("resize",this.onResize),"ResizeObserver"in window){const o=window.ResizeObserver;this.observer=new o(this.mutationResize),(r=this.observer)===null||r===void 0||r.observe(this.element)}else"MutationObserver"in window&&(this.observer=new MutationObserver(this.mutationResize),this.observer.observe(this.element,{attributes:!0,attributeFilter:["style"]}))}disConnect(){window.removeEventListener("resize",this.onResize),this.observer&&(this.observer.disconnect(),this.observer=void 0)}setSize(t){this.lastSize=t}checkSize(){const t=this.getSize();return t.width!==this.lastSize.width||t.height!==this.lastSize.height}getSize(){return this.element?{width:Math.floor(this.element.clientWidth),height:Math.floor(this.element.clientHeight)}:Object.assign({},this.lastSize)}};class toe{constructor(){this.listeners={},this.reseizeListeners={}}on(t,e,i,...r){if(Ma.mode==="node")return-1;const o=Jre++;if(t?.addEventListener)if(e!=="resize"||t===window)t?.addEventListener(e,i,...r);else{const s=new Qre(t,i,this.resizeTime);this.reseizeListeners[o]=s}const a={target:t,type:e,listener:i,options:r};return this.listeners[o]=a,o}once(t,e,i,...r){if(Ma.mode==="node")return-1;const o=this.on(t,e,((...a)=>{this.off(o),i(...a)}),...r);return o}off(t){var e;if(Ma.mode==="node"||t==null)return;const i=(e=this.listeners)===null||e===void 0?void 0:e[t];i&&(delete this.listeners[t],i.target.removeEventListener&&i.target.removeEventListener(i.type,i.listener,...i.options))}fire(t,e,...i){if(Ma.mode!=="node")for(const r in this.listeners){const o=this.listeners[r];o.target===t&&o.type===e&&o.listener.call(o.target,...i)}}hasListener(t,e){if(Ma.mode==="node")return!1;let i=!1;for(const r in this.listeners){const o=this.listeners[r];o.target===t&&o.type===e&&(i=!0)}return i}clear(){if(Ma.mode!=="node"){for(const t in this.listeners){const e=this.listeners[t];e.target.removeEventListener&&e.target.removeEventListener(e.type,e.listener,...e.options)}for(const t in this.reseizeListeners){const e=this.reseizeListeners[t];e?.disConnect()}this.listeners={}}}release(){Ma.mode!=="node"&&(this.clear(),this.listeners={})}}let Ug=1;function uut(){return NYt?Ug=1:(Ug=Math.ceil(window.devicePixelRatio||1),Ug>1&&Ug%2!=0&&(Ug+=1)),Ug}uut();function eoe(n){const t=n._gantt,e=t.stateManager,i=t.scenegraph;if(jt.envContribution.supportsTouchEvents===!1)return;jt.addEventListener("contextmenu",(s=>{s.stopPropagation(),s.preventDefault()}),{capture:!0}),n.touchMovePoints=[],t.scenegraph.ganttGroup.addEventListener("touchstart",(s=>{s.target.isChildOf(i.scrollbarComponent.vScrollBar)||s.target.isChildOf(i.scrollbarComponent.hScrollBar)||(n.isTouchdown=!0,n.touchMovePoints.push({x:s.page.x,y:s.page.y,timestamp:Date.now()}))}));const r=s=>{if(n.isLongTouch&&s.preventDefault(),n.isTouchdown&&Yq(s)&&(n.isTouchMove=!0,n.touchMovePoints.length>4&&n.touchMovePoints.shift(),n.touchMovePoints.push({x:s.changedTouches[0].pageX,y:s.changedTouches[0].pageY,timestamp:Date.now()}),n._enableTableScroll)){const l=-n.touchMovePoints[n.touchMovePoints.length-1].x+n.touchMovePoints[n.touchMovePoints.length-2].x,h=-n.touchMovePoints[n.touchMovePoints.length-1].y+n.touchMovePoints[n.touchMovePoints.length-2].y;FO(s,e,t),s.cancelable&&(t.parsedOptions.overscrollBehavior==="none"||Math.abs(h)>=Math.abs(l)&&h!==0&&alt(h,e)||Math.abs(h)<=Math.abs(l)&&l!==0&&slt(l,e))&&s.preventDefault()}};jt.addEventListener("touchmove",r,{passive:!1}),n.globalEventListeners.push({name:"touchmove",env:"vglobal",callback:r});const o=s=>{var l,h;if(n.touchEnd=!0,n.isLongTouch=!1,n.isTouchdown&&Yq(s)){if(!((l=n.touchMovePoints)===null||l===void 0)&&l.length&&(n.touchMovePoints.length>4&&n.touchMovePoints.shift(),n.touchMovePoints.push({x:s.changedTouches[0].pageX,y:s.changedTouches[0].pageY,timestamp:Date.now()}),n._enableTableScroll)){const u=n.touchMovePoints[0],d=n.touchMovePoints[((h=n.touchMovePoints)===null||h===void 0?void 0:h.length)-1],c=(d.x-u.x)/(d.timestamp-u.timestamp),f=(d.y-u.y)/(d.timestamp-u.timestamp);n.inertiaScroll.startInertia(c,f,.95),t.eventManager.inertiaScroll.setScrollHandle(((g,p)=>{FO({deltaX:-g,deltaY:-p},t.stateManager,t)}))}n.isTouchdown=!1,n.isTouchMove=!1,n.isDraging=!1,n.touchMovePoints=[]}};jt.addEventListener("touchend",o),n.globalEventListeners.push({name:"touchend",env:"vglobal",callback:o});const a=s=>{n.touchEnd=!0,n.isLongTouch=!1,n.isTouchdown&&(n.isTouchdown=!1,n.isTouchMove=!1,n.touchMovePoints=[],n.isDraging=!1)};jt.addEventListener("touchcancel",a),n.globalEventListeners.push({name:"touchcancel",env:"vglobal",callback:a})}function Yq(n){return!!n.changedTouches}class dut{constructor(){}setScrollHandle(t){this.scrollHandle=t}startInertia(t,e,i){this.stopped=!1,this.lastTime=Date.now(),this.speedX=t,this.speedY=e,this.friction=i,this.runingId||(this.runingId=requestAnimationFrame(this.inertia.bind(this)))}inertia(){var t;if(this.stopped)return;const e=Date.now(),i=e-this.lastTime;let r=!0;const o=Math.pow(this.friction,i/16),a=o*this.speedX,s=o*this.speedY;let l=0,h=0;Math.abs(a)>.05&&(r=!1,l=(this.speedX+a)/2*i),Math.abs(s)>.05&&(r=!1,h=(this.speedY+s)/2*i),(t=this.scrollHandle)===null||t===void 0||t.call(this,l,h),r?this.runingId=null:(this.lastTime=e,this.speedX=a,this.speedY=s,this.runingId=requestAnimationFrame(this.inertia.bind(this)))}endInertia(){cancelAnimationFrame(this.runingId),this.runingId=null,this.stopped=!0}isInertiaScrolling(){return!!this.runingId}}class ioe{constructor(t){this.isDown=!1,this.isDraging=!1,this.globalEventListeners=[],this._enableTableScroll=!0,this._gantt=t,this.inertiaScroll=new dut,this._eventHandler=new toe,this.bindEvent()}release(){this._eventHandler.release(),this.globalEventListeners.forEach((t=>{t.env==="document"?document.removeEventListener(t.name,t.callback):t.env==="body"?document.body.removeEventListener(t.name,t.callback):t.env==="window"&&window.removeEventListener(t.name,t.callback)})),this.globalEventListeners=[],this.inertiaScroll.endInertia()}bindEvent(){noe(this),roe(this),eoe(this)}}function noe(n){const t=n._gantt.scenegraph,e=n._gantt,i=e.stateManager;t.ganttGroup.addEventListener("pointerdown",(r=>{if(r.button!==0)return;let o,a,s;if(r.detailPath.find((l=>l.name==="task-bar"?(o=l,!0):l.name==="task-creation-button"?!0:l.name==="task-bar-link-point-left"?(a=l,!0):l.name==="task-bar-link-point-right"?(s=l,!0):!!l.attribute.vtable_link&&(l.attribute.vtable_link,!0))),o){const l=o.record;if(l?.type!==ze.PROJECT){if(r.target.name==="task-bar-hover-shadow-left-icon")i.startResizeTaskBar(o,r.nativeEvent.x,r.nativeEvent.y,r.offset.y,"left"),i.updateInteractionState(Qe.grabing);else if(r.target.name==="task-bar-hover-shadow-right-icon")i.startResizeTaskBar(o,r.nativeEvent.x,r.nativeEvent.y,r.offset.y,"right"),i.updateInteractionState(Qe.grabing);else if(r.target.name==="task-bar-progress-handle")i.startAdjustProgressBar(o,r.nativeEvent.x,r.nativeEvent.y),i.updateInteractionState(Qe.grabing);else if(e.parsedOptions.taskBarMoveable){const h=()=>{let u=!0;if(typeof e.parsedOptions.taskBarMoveable=="function"){const{startDate:d,endDate:c,taskRecord:f}=t._gantt.getTaskInfoByTaskListIndex(o.task_index,o.sub_task_index),g={index:o.task_index,startDate:d,endDate:c,taskRecord:f,ganttInstance:t._gantt};u=e.parsedOptions.taskBarMoveable(g)}else u=e.parsedOptions.taskBarMoveable;u&&(i.startMoveTaskBar(o,r.nativeEvent.x,r.nativeEvent.y,r.offset.y),i.updateInteractionState(Qe.grabing))};r.pointerType==="touch"?(n.touchEnd=!1,n.touchSetTimeout=setTimeout((()=>{n.isTouchdown=!1,n.isLongTouch=!0,h()}),100)):h()}}}else a?(i.startCreateDependencyLine(a,r.nativeEvent.x,r.nativeEvent.y,r.offset.y,"left"),i.updateInteractionState(Qe.grabing)):s&&(i.startCreateDependencyLine(s,r.nativeEvent.x,r.nativeEvent.y,r.offset.y,"right"),i.updateInteractionState(Qe.grabing))})),t.ganttGroup.addEventListener("pointermove",(r=>{var o,a,s,l,h;if(n.touchSetTimeout&&(clearTimeout(n.touchSetTimeout),n.touchSetTimeout=void 0),i.interactionState===Qe.default){const u=r.detailPath.find((f=>f.name==="task-bar")),d=r.detailPath.find((f=>f.name==="markline-hover-group")),c=r.detailPath.find((f=>f.name==="mark-line-content"));if(!((o=e.parsedOptions.markLineCreateOptions)===null||o===void 0)&&o.markLineCreatable&&(d&&!QYt(d.data,e.parsedOptions.markLine)?t._gantt.stateManager.marklineIcon.target!==d&&(t._gantt.stateManager.marklineIcon.target=d,i.showMarklineIconHover()):t._gantt.stateManager.marklineIcon.target&&i.hideMarklineIconHover()),u){if(t._gantt.stateManager.hoverTaskBar.target!==u){t._gantt.stateManager.hoverTaskBar.target=u;const f=u.task_index,g=u.sub_task_index,p=u.record;p.type!==ze.PROJECT&&i.showTaskBarHover(),t._gantt.hasListeners(we.MOUSEENTER_TASK_BAR)&&t._gantt.fireListeners(we.MOUSEENTER_TASK_BAR,{federatedEvent:r,event:r.nativeEvent,index:f,sub_task_index:g,record:p})}}else{if(t._gantt.stateManager.hoverTaskBar.target){if(t._gantt.hasListeners(we.MOUSELEAVE_TASK_BAR)){const f=t._gantt.stateManager.hoverTaskBar.target.task_index,g=t._gantt.stateManager.hoverTaskBar.target.sub_task_index,p=t._gantt.getRecordByIndex(f,g);t._gantt.fireListeners(we.MOUSELEAVE_TASK_BAR,{federatedEvent:r,event:r.nativeEvent,index:f,sub_task_index:g,record:p})}i.hideTaskBarHover(r)}if(e.parsedOptions.taskBarCreatable&&!c){const f=Uo(r.offset.y-e.headerHeight+e.stateManager.scrollTop,e),g=e.getTaskInfoByTaskListIndex(f.task_index,f.sub_task_index);let p=!0;if(typeof e.parsedOptions.taskBarCreatable=="function"){const{startDate:v,endDate:m,taskRecord:y}=g,b={index:f.task_index,sub_task_index:f.sub_task_index,startDate:v,endDate:m,taskRecord:y,ganttInstance:e};p=e.parsedOptions.taskBarCreatable(b)}else p=e.parsedOptions.taskBarCreatable;if(p){const v=JYt(r.offset.x,r.offset.y,e);if((e.parsedOptions.tasksShowMode===_t.Sub_Tasks_Separate||e.parsedOptions.tasksShowMode===_t.Tasks_Separate)&&!g.taskDays&&g.taskRecord&&!g.taskRecord.vtableMerge||(e.parsedOptions.tasksShowMode===_t.Sub_Tasks_Inline||e.parsedOptions.tasksShowMode===_t.Sub_Tasks_Arrange||e.parsedOptions.tasksShowMode===_t.Sub_Tasks_Compact)&&!v){const m=Ep(r.offset.x,e),y=(m>=1?e.getDateColsWidth(0,m-1):0)-e.stateManager.scroll.horizontalBarPos,b=e.taskListTableInstance.getRowsHeight(e.taskListTableInstance.columnHeaderLevelCount,f.task_index+e.taskListTableInstance.columnHeaderLevelCount-1)+((a=f.sub_task_index)!==null&&a!==void 0?a:0)*e.parsedOptions.rowHeight-e.stateManager.scroll.verticalBarPos;return void e.scenegraph.showTaskCreationButton(y,b,m)}}}}e.scenegraph.hideTaskCreationButton()}else if(i.interactionState===Qe.grabing){let u,d,c;r.detailPath.find((f=>f.name==="task-bar"?(u=f,!0):f.name==="task-creation-button"?!0:f.name==="task-bar-link-point-left"?(d=f,!0):f.name==="task-bar-link-point-right"?(c=f,!0):!!f.attribute.vtable_link&&(f.attribute.vtable_link,!0))),u=(l=u??((s=d?.parent)===null||s===void 0?void 0:s.attribute.attachedToTaskBarNode))!==null&&l!==void 0?l:(h=c?.parent)===null||h===void 0?void 0:h.attribute.attachedToTaskBarNode,t._gantt.stateManager.isCreatingDependencyLine()&&!u?i.hideSecondTaskBarSelectedBorder():t._gantt.stateManager.isCreatingDependencyLine()&&d&&t._gantt.stateManager.selectedTaskBar.target!==u?(i.highlightLinkPointNode(d),i.creatingDenpendencyLink.lastHighLightLinkPoint=d,i.creatingDenpendencyLink.secondTaskBarPosition="left"):t._gantt.stateManager.isCreatingDependencyLine()&&c&&t._gantt.stateManager.selectedTaskBar.target!==u?(i.highlightLinkPointNode(c),i.creatingDenpendencyLink.lastHighLightLinkPoint=c,i.creatingDenpendencyLink.secondTaskBarPosition="right"):t._gantt.stateManager.isCreatingDependencyLine()&&u&&t._gantt.stateManager.selectedTaskBar.target!==u&&(i.unhighlightLinkPointNode(i.creatingDenpendencyLink.lastHighLightLinkPoint),i.creatingDenpendencyLink.secondTaskBarNode&&i.creatingDenpendencyLink.secondTaskBarNode===u||(i.creatingDenpendencyLink.secondTaskBarNode&&i.creatingDenpendencyLink.secondTaskBarNode!==u&&i.hideSecondTaskBarSelectedBorder(),i.creatingDenpendencyLink.secondTaskBarNode=u,i.showSecondTaskBarSelectedBorder()))}})),t.ganttGroup.addEventListener("pointerup",(r=>{var o,a;if(n.touchSetTimeout&&(clearTimeout(n.touchSetTimeout),n.touchSetTimeout=void 0),r.button===0){let s,l,h,u=!1,d=!1,c=!1,f=!1,g=!1,p=!1,v=!1;const m=r.detailPath.find((y=>y.name==="task-bar"?(u=!0,!0):y.name==="task-creation-button"?(d=!0,!1):y.name==="task-bar-link-point-left"?(f=!0,!1):y.name==="task-bar-link-point-right"?(g=!0,!1):y.attribute.vtable_link?(c=!0,s=y.attribute.vtable_link,!1):y.name==="markline-hover-group"?(p=!0,h=y,!1):y.name==="mark-line-content"&&(v=!0,l=y,!1)));if(u&&t._gantt.parsedOptions.taskBarSelectable&&n.poniterState==="down"){if(i.hideDependencyLinkSelectedLine(),i.showTaskBarSelectedBorder(m),e.hasListeners(we.CLICK_TASK_BAR)){const y=m.task_index,b=m.sub_task_index,_=e.getRecordByIndex(y,b);e.fireListeners(we.CLICK_TASK_BAR,{federatedEvent:r,event:r.nativeEvent,index:y,sub_task_index:b,record:_})}}else if(d&&n.poniterState==="down"){i.hideDependencyLinkSelectedLine(),i.hideTaskBarSelectedBorder();const y=Uo(r.offset.y-e.headerHeight+e.stateManager.scrollTop,e);if(e.parsedOptions.tasksShowMode===_t.Sub_Tasks_Arrange||e.parsedOptions.tasksShowMode===_t.Sub_Tasks_Inline||e.parsedOptions.tasksShowMode===_t.Sub_Tasks_Compact){if(e.hasListeners(we.CREATE_TASK_SCHEDULE)){const b=Ep(r.offset.x,e),_=e.getDateRangeByIndex(b),w=(o=e.parsedOptions.dateFormat)!==null&&o!==void 0?o:e.parsedOptions.timeScaleIncludeHour?"yyyy-mm-dd hh:mm:ss":"yyyy-mm-dd";e.fireListeners(we.CREATE_TASK_SCHEDULE,{federatedEvent:r,event:r.nativeEvent,index:y.task_index,sub_task_index:y.sub_task_index,startDate:al(_.startDate,w),endDate:al(_.endDate,w),record:void 0,parentRecord:e.getRecordByIndex(y.task_index)})}}else{const b=e.getTaskInfoByTaskListIndex(y.task_index,y.sub_task_index);if(b.taskRecord){const _=(a=e.parsedOptions.dateFormat)!==null&&a!==void 0?a:e.parsedOptions.timeScaleIncludeHour?"yyyy-mm-dd hh:mm:ss":"yyyy-mm-dd",w=Ep(r.offset.x,e),C=e.getDateRangeByIndex(w);b.taskRecord[e.parsedOptions.startDateField]=al(C.startDate,_),b.taskRecord[e.parsedOptions.endDateField]=al(C.endDate,_),e.scenegraph.hideTaskCreationButton(),e.updateTaskRecord(b.taskRecord,y.task_index,y.sub_task_index),e.hasListeners(we.CREATE_TASK_SCHEDULE)&&e.fireListeners(we.CREATE_TASK_SCHEDULE,{federatedEvent:r,event:r.nativeEvent,index:y.task_index,sub_task_index:y.sub_task_index,startDate:b.taskRecord[e.parsedOptions.startDateField],endDate:b.taskRecord[e.parsedOptions.endDateField],record:b.taskRecord})}}}else if(c&&t._gantt.parsedOptions.dependencyLinkSelectable&&n.poniterState==="down")i.hideDependencyLinkSelectedLine(),i.hideTaskBarSelectedBorder(),t._gantt.stateManager.selectedDenpendencyLink.link=s,i.showDependencyLinkSelectedLine();else if((f||g)&&n.poniterState==="down"){if(e.hasListeners(we.CLICK_DEPENDENCY_LINK_POINT)){const y=Uo(r.offset.y-e.headerHeight+e.stateManager.scrollTop,e),b=e.getRecordByIndex(y.task_index,y.sub_task_index);e.fireListeners(we.CLICK_DEPENDENCY_LINK_POINT,{event:r.nativeEvent,index:y.task_index,sub_task_index:y.sub_task_index,point:f?"start":"end",record:b})}i.hideTaskBarSelectedBorder()}else if(p&&n.poniterState==="down")e.hasListeners(we.CLICK_MARKLINE_CREATE)&&e.fireListeners(we.CLICK_MARKLINE_CREATE,{event:r.nativeEvent,position:OU(h,t._gantt),data:t._gantt.stateManager.marklineIcon.target.data});else if(v&&n.poniterState==="down")e.hasListeners(we.CLICK_MARKLINE_CONTENT)&&e.fireListeners(we.CLICK_MARKLINE_CONTENT,{event:r.nativeEvent,position:OU(l,t._gantt),data:l.data});else if(f&&n.poniterState==="draging"){if(i.isCreatingDependencyLine()){const y=i.endCreateDependencyLine(r.offset.y);e.hasListeners(we.CREATE_DEPENDENCY_LINK)&&e.fireListeners(we.CREATE_DEPENDENCY_LINK,{federatedEvent:r,event:r.nativeEvent,link:y})}}else if(g&&n.poniterState==="draging"){if(i.isCreatingDependencyLine()){const y=i.endCreateDependencyLine(r.offset.y);e.hasListeners(we.CREATE_DEPENDENCY_LINK)&&e.fireListeners(we.CREATE_DEPENDENCY_LINK,{federatedEvent:r,event:r.nativeEvent,link:y})}}else i.hideDependencyLinkSelectedLine(),i.hideTaskBarSelectedBorder()}})),t.ganttGroup.addEventListener("rightdown",(r=>{let o,a=!1,s=!1;const l=r.detailPath.find((h=>h.name==="task-bar"?(a=!0,!0):!!h.attribute.vtable_link&&(s=!0,o=h.attribute.vtable_link,!1)));if(a){if(e.hasListeners(we.CONTEXTMENU_TASK_BAR)){const h=l.task_index,u=l.sub_task_index,d=e.getRecordByIndex(h,u);e.fireListeners(we.CONTEXTMENU_TASK_BAR,{federatedEvent:r,event:r.nativeEvent,index:h,sub_task_index:u,record:d})}}else s&&e.hasListeners(we.CONTEXTMENU_DEPENDENCY_LINK)&&e.fireListeners(we.CONTEXTMENU_DEPENDENCY_LINK,{federatedEvent:r,event:r.nativeEvent,link:o})})),t.ganttGroup.addEventListener("pointerenter",(r=>{(e.parsedOptions.scrollStyle.horizontalVisible&&e.parsedOptions.scrollStyle.horizontalVisible==="focus"||!e.parsedOptions.scrollStyle.horizontalVisible&&e.parsedOptions.scrollStyle.visible==="focus")&&t.scrollbarComponent.showHorizontalScrollBar(),(e.parsedOptions.scrollStyle.verticalVisible&&e.parsedOptions.scrollStyle.verticalVisible==="focus"||!e.parsedOptions.scrollStyle.verticalVisible&&e.parsedOptions.scrollStyle.visible==="focus")&&t.scrollbarComponent.showVerticalScrollBar()})),t.ganttGroup.addEventListener("pointerleave",(r=>{if((e.parsedOptions.scrollStyle.horizontalVisible&&e.parsedOptions.scrollStyle.horizontalVisible==="focus"||!e.parsedOptions.scrollStyle.horizontalVisible&&e.parsedOptions.scrollStyle.visible==="focus")&&t.scrollbarComponent.hideHorizontalScrollBar(),(e.parsedOptions.scrollStyle.verticalVisible&&e.parsedOptions.scrollStyle.verticalVisible==="focus"||!e.parsedOptions.scrollStyle.verticalVisible&&e.parsedOptions.scrollStyle.visible==="focus")&&t.scrollbarComponent.hideVerticalScrollBar(),t._gantt.stateManager.hoverTaskBar.target){if(t._gantt.hasListeners(we.MOUSELEAVE_TASK_BAR)){const o=t._gantt.stateManager.hoverTaskBar.target.task_index,a=t._gantt.stateManager.hoverTaskBar.target.sub_task_index,s=t._gantt.getRecordByIndex(o,a);t._gantt.fireListeners(we.MOUSELEAVE_TASK_BAR,{federatedEvent:r,event:r.nativeEvent,index:o,sub_task_index:a,record:s})}i.hideTaskBarHover(r)}})),t.ganttGroup.addEventListener("wheel",(r=>{FO(r,i,e)}))}function roe(n){const t=n._gantt,e=(n._gantt.scenegraph,t.stateManager),i=n._eventHandler;i.on(t.getElement(),"contextmenu",(l=>{var h;((h=t.parsedOptions.eventOptions)===null||h===void 0?void 0:h.preventDefaultContextMenu)!==!1&&l.preventDefault()})),i.on(t.getContainer(),"resize",(l=>{l.width===0&&l.height===0||(Y(t.options.pixelRatio)||t.setPixelRatio(uut()),l.windowSizeNotChange||t._resize())})),t.taskListTableInstance&&t.parsedOptions.verticalSplitLineMoveable&&i.on(t.verticalSplitResizeLine,"mousedown",(l=>{e.updateInteractionState(Qe.grabing),e.startResizeTableWidth(l)})),t.parsedOptions.verticalSplitLineHighlight&&(t.verticalSplitResizeLine&&i.on(t.verticalSplitResizeLine,"mouseover",(l=>{t.verticalSplitResizeLine.childNodes[1].style.opacity="1"})),t.verticalSplitResizeLine&&i.on(t.verticalSplitResizeLine,"mouseout",(l=>{t.verticalSplitResizeLine.childNodes[1].style.opacity="0"})));const r=l=>{t.eventManager.lastDragPointerXYOnWindow={x:l.x,y:l.y},t.eventManager.poniterState="down"};n.globalEventListeners.push({name:"pointerdown",env:"document",callback:r}),jt.addEventListener("pointerdown",r);const o=l=>{var h,u,d,c,f,g;if(t.eventManager.poniterState==="down"){const p=(h=t.eventManager.lastDragPointerXYOnWindow.x)!==null&&h!==void 0?h:l.x,v=l.x-p,m=(u=t.eventManager.lastDragPointerXYOnWindow.y)!==null&&u!==void 0?u:l.y,y=l.y-m;(Math.abs(v)>=1||Math.abs(y)>=1)&&(t.eventManager.poniterState="draging")}if(e.interactionState===Qe.grabing&&t.eventManager.poniterState==="draging"){const p=(c=(d=t.eventManager.lastDragPointerXYOnWindow)===null||d===void 0?void 0:d.x)!==null&&c!==void 0?c:l.x,v=(g=(f=t.eventManager.lastDragPointerXYOnWindow)===null||f===void 0?void 0:f.y)!==null&&g!==void 0?g:l.y;(Math.abs(p-l.x)>=1||Math.abs(v-l.y)>=1)&&(e.isResizingTableWidth()?(e.hideDependencyLinkSelectedLine(),e.hideTaskBarSelectedBorder(),e.dealResizeTableWidth(l)):e.isMoveingTaskBar()?(e.hideDependencyLinkSelectedLine(),e.hideTaskBarSelectedBorder(),e.dealTaskBarMove(l)):e.isResizingTaskBar()?(e.hideDependencyLinkSelectedLine(),e.hideTaskBarSelectedBorder(),e.dealTaskBarResize(l)):e.isAdjustingProgressBar()?e.dealAdjustProgressBar(l):e.isCreatingDependencyLine()&&e.dealCreateDependencyLine(l),t.eventManager.lastDragPointerXYOnWindow={x:l.x,y:l.y})}};n.globalEventListeners.push({name:"pointermove",env:"document",callback:o}),jt.addEventListener("pointermove",o);const a=l=>{e.interactionState==="grabing"&&(e.updateInteractionState(Qe.default),e.isResizingTableWidth()?e.endResizeTableWidth():e.isMoveingTaskBar()?e.endMoveTaskBar():e.isResizingTaskBar()?e.endResizeTaskBar(l.x):e.isAdjustingProgressBar()&&e.endAdjustProgressBar(l.x)),setTimeout((()=>{t.eventManager.lastDragPointerXYOnWindow=void 0,t.eventManager.poniterState="up"}),0)};n.globalEventListeners.push({name:"pointerup",env:"document",callback:a}),jt.addEventListener("pointerup",a);const s=l=>{var h,u;if(t.parsedOptions.dependencyLinkDeletable&&(l.key==="Delete"&&(!((h=t.parsedOptions.keyboardOptions)===null||h===void 0)&&h.deleteLinkOnDel)||l.key==="Backspace"&&(!((u=t.parsedOptions.keyboardOptions)===null||u===void 0)&&u.deleteLinkOnBack))&&t.stateManager.selectedDenpendencyLink.link){const d=t.stateManager.selectedDenpendencyLink.link;t.deleteLink(t.stateManager.selectedDenpendencyLink.link),e.hideDependencyLinkSelectedLine(),e.hideTaskBarSelectedBorder(),t.hasListeners(we.DELETE_DEPENDENCY_LINK)&&t.fireListeners(we.DELETE_DEPENDENCY_LINK,{event:l,link:d})}};n.globalEventListeners.push({name:"keydown",env:"document",callback:s}),jt.addEventListener("keydown",s)}function Xq(n){const{scroll:t}=n.stateManager,{verticalBarPos:e}=t;n.taskListTableInstance.stateManager.setScrollTop(e,void 0,!1)}function ooe(n){var t;n.taskListTableInstance&&((t=n.taskListTableInstance)===null||t===void 0||t.on("scroll",(e=>{if(e.scrollDirection==="vertical"){const{scroll:i}=n.taskListTableInstance.stateManager,{verticalBarPos:r}=i;n.stateManager.scroll.verticalBarPos!==r&&n.stateManager.setScrollTop(r,!1)}})))}function aoe(n){var t;(t=n.taskListTableInstance)===null||t===void 0||t.on("change_cell_value",(e=>{const{col:i,row:r}=e;n.taskListTableInstance.isHeader(i,r)||n._refreshTaskBar(r-n.taskListTableInstance.columnHeaderLevelCount)}))}function soe(n){var t;(t=n.taskListTableInstance)===null||t===void 0||t.on("tree_hierarchy_state_change",(e=>{var i,r;const{row:o,hierarchyState:a}=e;if(n.parsedOptions.tasksShowMode===_t.Project_Sub_Tasks_Inline){const h=o-n.taskListTableInstance.columnHeaderLevelCount,u=n.getRecordByIndex(h);u&&u.type===ze.PROJECT&&((i=u.children)===null||i===void 0?void 0:i.length)>0&&(u.hierarchyState=a)}n._syncPropsFromTable(),n.scenegraph.refreshTaskBarsAndGrid(),!n.taskListTableInstance.checkHasColumnAutoWidth()||((r=n.options.taskListTable)===null||r===void 0?void 0:r.tableWidth)!=="auto"&&n.taskTableWidth!==-1||cut(n);const s=n.stateManager.scroll.horizontalBarPos,l=n.stateManager.scroll.verticalBarPos;n.scenegraph.setX(-s),n.scenegraph.setY(-l)}))}function loe(n){var t;(t=n.taskListTableInstance)===null||t===void 0||t.on("after_sort",(e=>{n.scenegraph.refreshTaskBars();const i=n.stateManager.scroll.horizontalBarPos,r=n.stateManager.scroll.verticalBarPos;n.scenegraph.setX(-i),n.scenegraph.setY(-r)}))}function hoe(n){var t,e,i,r;(t=n.taskListTableInstance)===null||t===void 0||t.on("change_header_position",(o=>{n.parsedOptions.tasksShowMode===_t.Sub_Tasks_Arrange||n.parsedOptions.tasksShowMode===_t.Sub_Tasks_Compact||n.parsedOptions.tasksShowMode===_t.Sub_Tasks_Separate||n.parsedOptions.tasksShowMode===_t.Project_Sub_Tasks_Inline?n.scenegraph.refreshTaskBarsAndGrid():n.scenegraph.refreshTaskBars(),n.scenegraph.dragOrderLine.hideDragLine();const a=n.stateManager.scroll.horizontalBarPos,s=n.stateManager.scroll.verticalBarPos;n.scenegraph.setX(-a),n.scenegraph.setY(-s)})),(e=n.taskListTableInstance)===null||e===void 0||e.on("change_header_position_start",(o=>{const{col:a,row:s,x:l,y:h,backX:u,lineX:d,backY:c,lineY:f,event:g}=o;n.scenegraph.dragOrderLine.showDragLine(f),n.scenegraph.updateNextFrame()})),(i=n.taskListTableInstance)===null||i===void 0||i.on("changing_header_position",(o=>{const{col:a,row:s,x:l,y:h,backX:u,lineX:d,backY:c,lineY:f,event:g}=o;n.scenegraph.dragOrderLine.showDragLine(f),n.scenegraph.updateNextFrame()})),(r=n.taskListTableInstance)===null||r===void 0||r.on("change_header_position_fail",(o=>{n.scenegraph.dragOrderLine.hideDragLine(),n.scenegraph.updateNextFrame()}))}function uoe(n){var t;(t=n.taskListTableInstance)===null||t===void 0||t.on("resize_column",(e=>{cut(n)}))}function cut(n){var t,e,i,r,o,a,s,l;const h=n.taskTableWidth;n.taskTableWidth=n.taskListTableInstance.getAllColsWidth()+n.parsedOptions.outerFrameStyle.borderLineWidth,!((e=(t=n.options)===null||t===void 0?void 0:t.taskListTable)===null||e===void 0)&&e.maxTableWidth&&(n.taskTableWidth=Math.min((r=(i=n.options)===null||i===void 0?void 0:i.taskListTable)===null||r===void 0?void 0:r.maxTableWidth,n.taskTableWidth)),!((a=(o=n.options)===null||o===void 0?void 0:o.taskListTable)===null||a===void 0)&&a.minTableWidth&&(n.taskTableWidth=Math.max((l=(s=n.options)===null||s===void 0?void 0:s.taskListTable)===null||l===void 0?void 0:l.minTableWidth,n.taskTableWidth)),h!==n.taskTableWidth&&(n.element.style.left=n.taskTableWidth?`${n.taskTableWidth}px`:"0px",n.taskListTableInstance.setCanvasSize(n.taskTableWidth,n.tableNoFrameHeight+2*n.parsedOptions.outerFrameStyle.borderLineWidth),n._updateSize(),Vw(n))}class doe{constructor(t){var e;this.interactionState=Qe.default,this.resetInteractionState=hut((()=>{this.updateInteractionState(Qe.default)}),100),this._gantt=t,this.scroll={horizontalBarPos:0,verticalBarPos:0},this.moveTaskBar={targetStartX:null,targetStartY:null,deltaX:0,deltaY:0,startOffsetY:null,startX:null,startY:null,moving:!1,target:null,moveTaskBarXSpeed:0,moveTaskBarXInertia:new dut},this.hoverTaskBar={targetStartX:null,startX:null,target:null},this.marklineIcon={target:null},this.selectedTaskBar={target:null},this.resizeTaskBar={startOffsetY:null,targetStartX:null,targetEndX:null,startX:null,startY:null,target:null,resizing:!1,onIconName:""},this.adjustProgressBar={startX:null,startY:null,target:null,adjusting:!1,originalProgress:0},this.resizeTableWidth={lastX:null,resizing:!1},this.selectedDenpendencyLink={link:null},this.creatingDenpendencyLink={startClickedPoint:null,startX:null,startY:null,startOffsetY:null,targetStartX:null,creating:!1,secondTaskBarNode:null},this.updateVerticalScrollBar=this.updateVerticalScrollBar.bind(this),this.updateHorizontalScrollBar=this.updateHorizontalScrollBar.bind(this),ooe(this._gantt),aoe(this._gantt),hoe(this._gantt),soe(this._gantt),loe(this._gantt),((e=this._gantt.options.taskListTable)===null||e===void 0?void 0:e.tableWidth)!=="auto"&&this._gantt.taskTableWidth!==-1||uoe(this._gantt)}setScrollTop(t,e=!0){const i=this._gantt.getAllRowsHeight();t=Math.max(0,Math.min(t,i-this._gantt.scenegraph.height)),t=Math.ceil(t);const r=this.scroll.verticalBarPos;this.scroll.verticalBarPos=t,Y(this.scroll.verticalBarPos)&&!isNaN(this.scroll.verticalBarPos)||(this.scroll.verticalBarPos=0),this._gantt.scenegraph.setY(-t);const o=t/(i-this._gantt.scenegraph.height);this._gantt.scenegraph.scrollbarComponent.updateVerticalScrollBarPos(o),r!==t&&e&&(Xq(this._gantt),this._gantt.fireListeners(we.SCROLL,{scrollTop:this.scroll.verticalBarPos,scrollLeft:this.scroll.horizontalBarPos,scrollDirection:"vertical",scrollRatioY:o}))}get scrollLeft(){return this.scroll.horizontalBarPos}get scrollTop(){return this.scroll.verticalBarPos}setScrollLeft(t,e=!0){const i=this._gantt.getAllDateColsWidth();t=Math.max(0,Math.min(t,i-this._gantt.scenegraph.width)),t=Math.ceil(t);const r=this.scroll.horizontalBarPos;this.scroll.horizontalBarPos=t,Y(this.scroll.horizontalBarPos)&&!isNaN(this.scroll.horizontalBarPos)||(this.scroll.horizontalBarPos=0),this._gantt.scenegraph.setX(-t);const o=t/(i-this._gantt.scenegraph.width);this._gantt.scenegraph.scrollbarComponent.updateHorizontalScrollBarPos(o),r!==t&&e&&this._gantt.fireListeners(we.SCROLL,{scrollTop:this.scroll.verticalBarPos,scrollLeft:this.scroll.horizontalBarPos,scrollDirection:"horizontal",scrollRatioX:o})}updateInteractionState(t){if(this.interactionState===t)return;const e=this.interactionState;this.interactionState=t,e===Qe.scrolling&&Qe.default}updateVerticalScrollBar(t){const e=this._gantt.getAllRowsHeight();this.scroll.verticalBarPos,this.scroll.verticalBarPos=Math.ceil(t*(e-this._gantt.scenegraph.height)),Y(this.scroll.verticalBarPos)&&!isNaN(this.scroll.verticalBarPos)||(this.scroll.verticalBarPos=0),this._gantt.scenegraph.setY(-this.scroll.verticalBarPos,t===1),Xq(this._gantt),this._gantt.fireListeners(we.SCROLL,{scrollTop:this.scroll.verticalBarPos,scrollLeft:this.scroll.horizontalBarPos,scrollDirection:"vertical",scrollRatioY:t})}updateHorizontalScrollBar(t){const e=this._gantt.getAllDateColsWidth();this.scroll.horizontalBarPos,this.scroll.horizontalBarPos=Math.ceil(t*(e-this._gantt.scenegraph.width)),Y(this.scroll.horizontalBarPos)&&!isNaN(this.scroll.horizontalBarPos)||(this.scroll.horizontalBarPos=0),this._gantt.scenegraph.setX(-this.scroll.horizontalBarPos,t===1),this._gantt.fireListeners(we.SCROLL,{scrollTop:this.scroll.verticalBarPos,scrollLeft:this.scroll.horizontalBarPos,scrollDirection:"horizontal",scrollRatioY:t})}startMoveTaskBar(t,e,i,r){t.name==="task-bar-hover-shadow"&&(t=t.parent),this.moveTaskBar.moving=!0,this.moveTaskBar.target=t,this.moveTaskBar.targetStartX=t.attribute.x,this.moveTaskBar.targetStartY=t.attribute.y,this.moveTaskBar.startX=e,this.moveTaskBar.startY=i,this.moveTaskBar.startOffsetY=r,t.setAttribute("zIndex",1e4)}isMoveingTaskBar(){return this.moveTaskBar.moving}endMoveTaskBar(){this.moveTaskBar.moveTaskBarXInertia.isInertiaScrolling()&&this.moveTaskBar.moveTaskBarXInertia.endInertia();const t=this.moveTaskBar.deltaX,e=this.moveTaskBar.deltaY,i=this.moveTaskBar.target;if(Math.abs(t)>=1||Math.abs(e)>=1){const r=i.task_index,o=i.task_index,a=i.sub_task_index,{startDate:s,endDate:l}=this._gantt.getTaskInfoByTaskListIndex(o,a),h=this.moveTaskBar.targetStartY+this._gantt.parsedOptions.rowHeight*Math.round(e/this._gantt.parsedOptions.rowHeight),u=this._gantt.parsedOptions.taskBarMilestoneStyle.width,d=this.moveTaskBar.target.attribute.x+(i.record.type===ze.MILESTONE?u/2:0),c=Ep(d-this._gantt.stateManager.scroll.horizontalBarPos,this._gantt),f=this._gantt.parsedOptions.reverseSortedTimelineScales[0].timelineDates[c];if(!f)return;const g=f.startDate,p=new Date(g.getTime()+(zi(l).getTime()-zi(s).getTime()));let v;if(zi(s).getTime()!==g.getTime()){v=zi(s).getTime()>g.getTime()?"left":"right",this._gantt._updateStartEndDateToTaskRecord(g,p,o,a);const m=this._gantt.getRecordByIndex(o,a);this._gantt.hasListeners(we.CHANGE_DATE_RANGE)&&this._gantt.fireListeners(we.CHANGE_DATE_RANGE,{startDate:m[this._gantt.parsedOptions.startDateField],endDate:m[this._gantt.parsedOptions.endDateField],oldStartDate:s,oldEndDate:l,index:o,record:m});const y=Uo(h,this._gantt).task_index;this._gantt.hasListeners(we.MOVE_END_TASK_BAR)&&this._gantt.fireListeners(we.MOVE_END_TASK_BAR,{startDate:m[this._gantt.parsedOptions.startDateField],endDate:m[this._gantt.parsedOptions.endDateField],oldStartDate:s,oldEndDate:l,oldRowIndex:r,newRowIndex:y,index:o,record:m})}else{const m=this._gantt.getRecordByIndex(o,a),y=Uo(h,this._gantt).task_index;this._gantt.hasListeners(we.MOVE_END_TASK_BAR)&&this._gantt.fireListeners(we.MOVE_END_TASK_BAR,{startDate:m[this._gantt.parsedOptions.startDateField],endDate:m[this._gantt.parsedOptions.endDateField],oldStartDate:s,oldEndDate:l,oldRowIndex:r,newRowIndex:y,index:y,record:m})}if(this._gantt.parsedOptions.tasksShowMode===_t.Sub_Tasks_Arrange||this._gantt.parsedOptions.tasksShowMode===_t.Sub_Tasks_Compact){const m=Uo(h,this._gantt);this._gantt._dragOrderTaskRecord(i.task_index,i.sub_task_index,m.task_index,m.sub_task_index),hlt(this._gantt.records),this._gantt.taskListTableInstance.renderWithRecreateCells(),this._gantt._syncPropsFromTable(),this._gantt.scenegraph.refreshTaskBarsAndGrid()}else if(this._gantt.parsedOptions.tasksShowMode!==_t.Tasks_Separate&&Math.abs(Math.round(e/this._gantt.parsedOptions.rowHeight))>=1){const m=Uo(h,this._gantt);this._gantt._dragOrderTaskRecord(i.task_index,i.sub_task_index,m.task_index,m.sub_task_index),this._gantt.parsedOptions.tasksShowMode===_t.Sub_Tasks_Separate?(this._gantt.taskListTableInstance.renderWithRecreateCells(),this._gantt.scenegraph.refreshTaskBarsAndGrid()):(this._gantt.scenegraph.taskBar.refresh(),this._gantt.scenegraph.dependencyLink.refresh())}else{let m=c>=1?this._gantt.getDateColsWidth(0,c-1):0;if(i.record.type===ze.MILESTONE&&(m-=this._gantt.parsedOptions.taskBarMilestoneStyle.width/2),Yg(i,m-i.attribute.x,h-i.attribute.y,this),v==="right"){let y=i;for(;y.nextSibling&&y.nextSibling.attribute.y===i.attribute.y&&y.nextSibling.record[this._gantt.parsedOptions.startDateField]<=i.record[this._gantt.parsedOptions.startDateField];)y=y.nextSibling;y!==i&&y.parent.insertAfter(i,y)}else if(v==="left"){let y=i;for(;y.previousSibling&&y.previousSibling.attribute.y===i.attribute.y&&y.previousSibling.record[this._gantt.parsedOptions.startDateField]>=i.record[this._gantt.parsedOptions.startDateField];)y=y.previousSibling;y!==i&&y.parent.insertBefore(i,y)}}this._gantt.scenegraph.updateNextFrame()}this.moveTaskBar.moving=!1,this.selectedTaskBar.target!==i&&i.setAttribute("zIndex",0),i.updateTextPosition(),this.moveTaskBar.target=null,this.moveTaskBar.deltaX=0,this.moveTaskBar.deltaY=0,this.moveTaskBar.moveTaskBarXSpeed=0}dealTaskBarMove(t){var e,i,r,o,a,s;const l=this._gantt;let h=this.moveTaskBar.target;h.setAttribute("zIndex",1e4);const u=l.eventManager.lastDragPointerXYOnWindow.x,d=t.x-u,c=l.eventManager.lastDragPointerXYOnWindow.y,f=t.y-c;if(this.moveTaskBar.deltaX+=d,this.moveTaskBar.deltaY+=f,Yg(h,d,f,this),h.attribute.x<=l.stateManager.scrollLeft&&d<0)if(l.parsedOptions.moveTaskBarToExtendDateRange&&l.stateManager.scrollLeft===0){(e=this.moveTaskBar.moveTaskBarXInertia)===null||e===void 0||e.endInertia();const g=l.parsedOptions.reverseSortedTimelineScales[0].timelineDates[1].startDate.getTime()-l.parsedOptions.reverseSortedTimelineScales[0].timelineDates[0].startDate.getTime(),{unit:p,startOfWeek:v}=l.parsedOptions.reverseSortedTimelineScales[0];l.parsedOptions.minDate=$f(new Date(l.parsedOptions.reverseSortedTimelineScales[0].timelineDates[0].startDate.getTime()-g/2),p,v),l.parsedOptions._minDateTime=(i=l.parsedOptions.minDate)===null||i===void 0?void 0:i.getTime(),l._generateTimeLineDateMap(),l._updateSize(),l.scenegraph.refreshAll(),h=this.moveTaskBar.target=l.scenegraph.taskBar.getTaskBarNodeByIndex(this.moveTaskBar.target.task_index,this.moveTaskBar.target.sub_task_index),l.scrollLeft=l.parsedOptions.timelineColWidth-1,l.eventManager.lastDragPointerXYOnWindow.x=t.x,((r=h.record)===null||r===void 0?void 0:r.type)==="milestone"?Yg(h,l.scrollLeft-h.attribute.x,0,this):h.setAttribute("x",l.scrollLeft)}else this.moveTaskBar.moveTaskBarXSpeed=-l.parsedOptions.timelineColWidth/100,this.moveTaskBar.moveTaskBarXInertia.startInertia(this.moveTaskBar.moveTaskBarXSpeed,0,1),this.moveTaskBar.moveTaskBarXInertia.setScrollHandle(((g,p)=>{this.moveTaskBar.deltaX+=g,this.moveTaskBar.deltaY+=p,Yg(h,g,p,this),l.stateManager.setScrollLeft(h.attribute.x),l.stateManager.scrollLeft===0&&this.moveTaskBar.moveTaskBarXInertia.endInertia()}));else if(h.attribute.x+h.attribute.width>=l.stateManager.scrollLeft+l.tableNoFrameWidth&&d>0)if(l.parsedOptions.moveTaskBarToExtendDateRange&&l.stateManager.scrollLeft+l.tableNoFrameWidth===l.getAllDateColsWidth()){(o=this.moveTaskBar.moveTaskBarXInertia)===null||o===void 0||o.endInertia();const g=l.parsedOptions.reverseSortedTimelineScales[0].timelineDates,p=g[1].startDate.getTime()-g[0].startDate.getTime(),{unit:v,startOfWeek:m,step:y}=l.parsedOptions.reverseSortedTimelineScales[0];if(l.parsedOptions.maxDate=Lv(l.parsedOptions.minDate,new Date(g[g.length-1].endDate.getTime()+p/2),v,y),l.parsedOptions._maxDateTime=(a=l.parsedOptions.maxDate)===null||a===void 0?void 0:a.getTime(),l._generateTimeLineDateMap(),l._updateSize(),l.scenegraph.refreshAll(),h=this.moveTaskBar.target=l.scenegraph.taskBar.getTaskBarNodeByIndex(this.moveTaskBar.target.task_index,this.moveTaskBar.target.sub_task_index),l.scrollLeft+=1,l.eventManager.lastDragPointerXYOnWindow.x=t.x,((s=h.record)===null||s===void 0?void 0:s.type)==="milestone"){const b=l.scrollLeft+l.tableNoFrameWidth-h.attribute.width;Yg(h,b-h.attribute.x,0,this)}else h.setAttribute("x",l.scrollLeft+l.tableNoFrameWidth-h.attribute.width)}else this.moveTaskBar.moveTaskBarXSpeed=l.parsedOptions.timelineColWidth/100,this.moveTaskBar.moveTaskBarXInertia.startInertia(this.moveTaskBar.moveTaskBarXSpeed,0,1),this.moveTaskBar.moveTaskBarXInertia.setScrollHandle(((g,p)=>{this.moveTaskBar.deltaX+=g,this.moveTaskBar.deltaY+=p,Yg(h,g,p,this),l.stateManager.setScrollLeft(h.attribute.x+h.attribute.width-l.tableNoFrameWidth),l.stateManager.scrollLeft===l.getAllDateColsWidth()-l.tableNoFrameWidth&&this.moveTaskBar.moveTaskBarXInertia.endInertia()}));else this.moveTaskBar.moveTaskBarXInertia.isInertiaScrolling()?this.moveTaskBar.moveTaskBarXInertia.endInertia():this.moveTaskBar.moveTaskBarXSpeed=0;l.scenegraph.updateNextFrame()}startResizeTaskBar(t,e,i,r,o){this.resizeTaskBar.onIconName=o,this.resizeTaskBar.resizing=!0,this.resizeTaskBar.target=t,this.resizeTaskBar.targetStartX=t.attribute.x,this.resizeTaskBar.targetEndX=t.attribute.x+t.attribute.width,this.resizeTaskBar.startX=e,this.resizeTaskBar.startY=i,this.resizeTaskBar.startOffsetY=r}isResizingTaskBar(){return this.resizeTaskBar.resizing}endResizeTaskBar(t){const e=this._gantt.stateManager.resizeTaskBar.onIconName,i=t-this.resizeTaskBar.startX;if(Math.abs(i)>=1){const r=Ep((e==="left"?this.resizeTaskBar.target.attribute.x:this.resizeTaskBar.target.attribute.x+this.resizeTaskBar.target.attribute.width)-this._gantt.stateManager.scroll.horizontalBarPos,this._gantt),o=this._gantt.parsedOptions.reverseSortedTimelineScales[0].timelineDates[r];if(!o)return;const a=e==="left"?o.startDate:o.endDate,s=this.resizeTaskBar.target,l=s.clipGroupBox,h=s.barRect,u=s.progressRect,d=s.textLabel,c=s.task_index,f=s.sub_task_index,{taskDays:g,progress:p,startDate:v,endDate:m}=this._gantt.getTaskInfoByTaskListIndex(c,f);let y=!1;if(e==="left"?(this._gantt._updateStartDateToTaskRecord(a,c,f),a.getTime()!==new Date(v).getTime()&&(y=!0)):(this._gantt._updateEndDateToTaskRecord(a,c,f),a.getTime()!==new Date(m).getTime()&&(y=!0)),this._gantt.parsedOptions.tasksShowMode===_t.Sub_Tasks_Arrange||this._gantt.parsedOptions.tasksShowMode===_t.Sub_Tasks_Compact)this._gantt.taskListTableInstance.renderWithRecreateCells(),this._gantt._syncPropsFromTable(),this._gantt.scenegraph.refreshTaskBarsAndGrid();else{if(e==="left"){const b=r>=1?this._gantt.getDateColsWidth(0,r-1):0;s.setAttribute("x",b),s.setAttribute("width",this.resizeTaskBar.targetEndX-b)}else if(e==="right"){const b=this._gantt.getDateColsWidth(0,r);s.setAttribute("width",b-this.resizeTaskBar.targetStartX)}if(l.setAttribute("width",s.attribute.width),h?.setAttribute("width",s.attribute.width),u?.setAttribute("width",p/100*s.attribute.width),d){const{textAlign:b,textBaseline:_,padding:w}=this._gantt.parsedOptions.taskBarLabelStyle,C=V_(W_(w),b,_,s.attribute.width,s.attribute.height);d.setAttribute("maxLineWidth",s.attribute.width-2*lut),d.setAttribute("x",C.x)}this._gantt.scenegraph.refreshRecordLinkNodes(c,f,s,0),this.showTaskBarHover(),fut(this._gantt,s,c,f),s.setAttribute("zIndex",0)}if(s.updateTextPosition(),this.resizeTaskBar.resizing=!1,this.resizeTaskBar.target=null,y&&this._gantt.hasListeners(we.CHANGE_DATE_RANGE)){const b=this._gantt.getRecordByIndex(c,f);this._gantt.fireListeners(we.CHANGE_DATE_RANGE,{startDate:b[this._gantt.parsedOptions.startDateField],endDate:b[this._gantt.parsedOptions.endDateField],oldStartDate:v,oldEndDate:m,index:c,record:b})}this._gantt.scenegraph.updateNextFrame()}}dealTaskBarResize(t){const e=this._gantt.eventManager.lastDragPointerXYOnWindow.x,i=t.x-e,r=this._gantt.stateManager.resizeTaskBar.target;let o=this._gantt.stateManager.resizeTaskBar.onIconName==="left"?-i:i;const a=Math.max(1,r.attribute.width+o);o=a-r.attribute.width,coe(r,this._gantt.stateManager.resizeTaskBar.onIconName==="left"?-o:0,a,this),this._gantt.scenegraph.updateNextFrame()}startAdjustProgressBar(t,e,i){const{progress:r}=this._gantt.getTaskInfoByTaskListIndex(t.task_index,t.sub_task_index);this.adjustProgressBar.target=t,this.adjustProgressBar.adjusting=!0,this.adjustProgressBar.startX=e,this.adjustProgressBar.startY=i,this.adjustProgressBar.originalProgress=r}isAdjustingProgressBar(){return this.adjustProgressBar.adjusting}endAdjustProgressBar(t){const e=this.adjustProgressBar.target,i=e.attribute.width,r=t-this.adjustProgressBar.startX,o=Math.max(0,Math.min(100,this.adjustProgressBar.originalProgress+r/i*100));if(Math.abs(o-this.adjustProgressBar.originalProgress)>=1){const a=e.task_index,s=e.sub_task_index;this._gantt._updateProgressToTaskRecord(Math.round(o),a,s);const l=this._gantt.getRecordByIndex(a,s);this._gantt.hasListeners(we.PROGRESS_UPDATE)&&this._gantt.fireListeners(we.PROGRESS_UPDATE,{federatedEvent:null,event:null,index:a,sub_task_index:s,progress:Math.round(o),oldProgress:Math.round(this.adjustProgressBar.originalProgress),record:l})}this.adjustProgressBar.adjusting=!1,this.adjustProgressBar.target=null,this.adjustProgressBar.startX=null,this.adjustProgressBar.startY=null,this.adjustProgressBar.originalProgress=0}dealAdjustProgressBar(t){const e=this.adjustProgressBar.target,i=e.attribute.width,r=t.x-this.adjustProgressBar.startX,o=Math.max(0,Math.min(100,this.adjustProgressBar.originalProgress+r/i*100));if(e.progressRect&&e.progressRect.setAttribute("width",i*o/100),this._gantt.scenegraph.taskBar.hoverBarProgressHandle&&this._gantt.scenegraph.taskBar.hoverBarProgressHandle.attribute.visibleAll&&this._gantt.scenegraph.taskBar.hoverBarProgressHandle.setAttribute("x",i*o/100-6),e.textLabel&&e.record){const a=Object.assign(Object.assign({},e.record),{progress:Math.round(o)}),s=elt(this._gantt.parsedOptions.taskBarLabelText,a);e.textLabel.setAttribute("text",s)}this._gantt.scenegraph&&this._gantt.scenegraph.stage&&this._gantt.scenegraph.stage.renderNextFrame()}startCreateDependencyLine(t,e,i,r,o){this.resizeTaskBar.resizing=!1,this.creatingDenpendencyLink.creating=!0,this.creatingDenpendencyLink.startClickedPoint=t,this.creatingDenpendencyLink.startX=e,this.creatingDenpendencyLink.startY=i,this.creatingDenpendencyLink.startOffsetY=r,this.creatingDenpendencyLink.firstTaskBarPosition=o,this.highlightLinkPointNode(t)}isCreatingDependencyLine(){return this.creatingDenpendencyLink.creating}endCreateDependencyLine(t){const e=this._gantt.parsedOptions.taskKeyField,i=this.selectedTaskBar.target.task_index,r=this.selectedTaskBar.target.sub_task_index,o=this.creatingDenpendencyLink.secondTaskBarNode.task_index,a=this.creatingDenpendencyLink.secondTaskBarNode.sub_task_index,s={linkedFromTaskKey:this._gantt.getRecordByIndex(i,r)[e],linkedToTaskKey:this._gantt.getRecordByIndex(o,a)[e],type:this.creatingDenpendencyLink.firstTaskBarPosition==="left"&&this.creatingDenpendencyLink.secondTaskBarPosition==="left"?eo.StartToStart:this.creatingDenpendencyLink.firstTaskBarPosition==="right"&&this.creatingDenpendencyLink.secondTaskBarPosition==="left"?eo.FinishToStart:this.creatingDenpendencyLink.firstTaskBarPosition==="right"&&this.creatingDenpendencyLink.secondTaskBarPosition==="right"?eo.FinishToFinish:eo.StartToFinish};return this._gantt.addLink(s),this.hideTaskBarSelectedBorder(),this._gantt.scenegraph.updateNextFrame(),this.creatingDenpendencyLink.creating=!1,s}dealCreateDependencyLine(t){const e=this.creatingDenpendencyLink.startX,i=this.creatingDenpendencyLink.startY,r=t.x-e,o=t.y-i,a=this.creatingDenpendencyLink.startClickedPoint,s=a.attribute.x+a.attribute.width/2,l=a.attribute.y+a.attribute.height/2;this._gantt.scenegraph.taskBar.updateCreatingDependencyLine(s,l,s+r,l+o),this._gantt.scenegraph.updateNextFrame()}startResizeTableWidth(t){this.resizeTableWidth.resizing=!0,this.resizeTableWidth.lastX=t.pageX}isResizingTableWidth(){return this.resizeTableWidth.resizing}endResizeTableWidth(){this.resizeTableWidth.resizing=!1}dealResizeTableWidth(t){var e,i;if(!this.resizeTableWidth.resizing)return;const r=t.pageX-this.resizeTableWidth.lastX;if(Math.abs(r)>=1){let o=this._gantt.taskTableWidth+r;const a=Math.min(this._gantt.taskListTableInstance.getAllColsWidth()+this._gantt.parsedOptions.outerFrameStyle.borderLineWidth,(e=this._gantt.options.taskListTable.maxTableWidth)!==null&&e!==void 0?e:1e5),s=Math.max(this._gantt.parsedOptions.outerFrameStyle.borderLineWidth,(i=this._gantt.options.taskListTable.minTableWidth)!==null&&i!==void 0?i:0);r>0&&o>a&&(o=a),r<0&&o<s&&(o=s),this._gantt.taskTableWidth=o,this._gantt.element.style.left=this._gantt.taskTableWidth?`${this._gantt.taskTableWidth}px`:"0px",this._gantt.verticalSplitResizeLine.style.left=this._gantt.taskTableWidth?this._gantt.taskTableWidth-7+"px":"0px",this._gantt._resize(),this.resizeTableWidth.lastX=t.pageX}}showTaskBarHover(){const t=this._gantt.stateManager.hoverTaskBar.target;if(t){const e=t.attribute.x,i=t.attribute.y,r=t.attribute.width,o=t.attribute.height;this._gantt.scenegraph.taskBar.showHoverBar(e,i,r,o,t),this._gantt.scenegraph.updateNextFrame()}}hideTaskBarHover(t){this._gantt.stateManager.hoverTaskBar.target=null,this._gantt.scenegraph.taskBar.hideHoverBar(),this._gantt.scenegraph.updateNextFrame()}showTaskBarSelectedBorder(t){var e;(e=this._gantt.stateManager.selectedTaskBar.target)===null||e===void 0||e.setAttribute("zIndex",0),this._gantt.stateManager.selectedTaskBar.target=t;const i=this._gantt.parsedOptions.dependencyLinkCreatable;t.setAttribute("zIndex",1e4);const r=t.attribute.x,o=t.attribute.y,a=t.attribute.width,s=t.attribute.height;this._gantt.scenegraph.taskBar.createSelectedBorder(r,o,a,s,t,i),this._gantt.scenegraph.updateNextFrame()}hideTaskBarSelectedBorder(){var t;(t=this._gantt.stateManager.selectedTaskBar.target)===null||t===void 0||t.setAttribute("zIndex",0),this._gantt.stateManager.selectedTaskBar.target=null,this._gantt.scenegraph.taskBar.removeSelectedBorder(),this._gantt.scenegraph.updateNextFrame()}showSecondTaskBarSelectedBorder(){const t=this._gantt.stateManager.creatingDenpendencyLink.secondTaskBarNode,e=t.attribute.x,i=t.attribute.y,r=t.attribute.width,o=t.attribute.height;this._gantt.scenegraph.taskBar.createSelectedBorder(e,i,r,o,t,!0),this._gantt.scenegraph.updateNextFrame()}hideSecondTaskBarSelectedBorder(){this._gantt.stateManager.creatingDenpendencyLink.secondTaskBarNode=null,this._gantt.scenegraph.taskBar.removeSecondSelectedBorder(),this._gantt.scenegraph.updateNextFrame()}showDependencyLinkSelectedLine(){const t=this._gantt.stateManager.selectedDenpendencyLink.link;this._gantt.scenegraph.dependencyLink.createSelectedLinkLine(t);const{taskKeyField:e,dependencyLinks:i}=this._gantt.parsedOptions,{linkedToTaskKey:r,linkedFromTaskKey:o,type:a}=t;let s,l,h,u;const d=gl(this._gantt.records,e,r),c=gl(this._gantt.records,e,o);this._gantt.parsedOptions.tasksShowMode===_t.Sub_Tasks_Inline||this._gantt.parsedOptions.tasksShowMode===_t.Sub_Tasks_Separate||this._gantt.parsedOptions.tasksShowMode===_t.Sub_Tasks_Arrange||this._gantt.parsedOptions.tasksShowMode===_t.Sub_Tasks_Compact?(s=c.index[0],l=c.index[1],h=d.index[0],u=d.index[1]):(s=this._gantt.getTaskShowIndexByRecordIndex(c.index),h=this._gantt.getTaskShowIndexByRecordIndex(d.index));const f=this._gantt.scenegraph.taskBar.getTaskBarNodeByIndex(s,l);this._gantt.scenegraph.taskBar.createSelectedBorder(f.attribute.x,f.attribute.y,f.attribute.width,f.attribute.height,f,!1);const g=this._gantt.scenegraph.taskBar.getTaskBarNodeByIndex(h,u);this._gantt.scenegraph.taskBar.createSelectedBorder(g.attribute.x,g.attribute.y,g.attribute.width,g.attribute.height,g,!1),this._gantt.scenegraph.updateNextFrame()}hideDependencyLinkSelectedLine(){this._gantt.stateManager.selectedDenpendencyLink.link=null,this._gantt.scenegraph.dependencyLink.removeSelectedLinkLine(),this._gantt.scenegraph.taskBar.removeSelectedBorder(),this._gantt.scenegraph.updateNextFrame()}highlightLinkPointNode(t){if(t?.children.length>0){const e=t.children[0];e.setAttribute("fill",this._gantt.parsedOptions.dependencyLinkLineCreatingPointStyle.fillColor),e.setAttribute("stroke",this._gantt.parsedOptions.dependencyLinkLineCreatingPointStyle.strokeColor),e.setAttribute("radius",this._gantt.parsedOptions.dependencyLinkLineCreatingPointStyle.radius),e.setAttribute("lineWidth",this._gantt.parsedOptions.dependencyLinkLineCreatingPointStyle.strokeWidth),this._gantt.scenegraph.updateNextFrame()}}unhighlightLinkPointNode(t){if(t?.children.length>0){const e=t.children[0];e.setAttribute("fill",this._gantt.parsedOptions.dependencyLinkLineCreatePointStyle.fillColor),e.setAttribute("stroke",this._gantt.parsedOptions.dependencyLinkLineCreatePointStyle.strokeColor),e.setAttribute("radius",this._gantt.parsedOptions.dependencyLinkLineCreatePointStyle.radius),e.setAttribute("lineWidth",this._gantt.parsedOptions.dependencyLinkLineCreatePointStyle.strokeWidth),this._gantt.scenegraph.updateNextFrame()}}showMarklineIconHover(){var t,e;const i=this._gantt.stateManager.marklineIcon.target;if(i){const r=this._gantt.scenegraph.timelineHeader.showMarklineIcon(i.parent);r&&(!((e=(t=this._gantt.parsedOptions.markLineCreateOptions)===null||t===void 0?void 0:t.markLineCreationHoverToolTip)===null||e===void 0)&&e.tipContent)&&this._gantt.scenegraph.showToolTip(r),this._gantt.scenegraph.updateNextFrame()}}hideMarklineIconHover(){this._gantt.scenegraph.timelineHeader.hideMarklineIconHover(this._gantt.stateManager.marklineIcon.target.parent),this._gantt.scenegraph.hideToolTip(),this._gantt.stateManager.marklineIcon.target=null,this._gantt.scenegraph.updateNextFrame()}updateProjectTaskTimes(t){var e,i;if(!t||t.length===0||!this._gantt||!this._gantt.records)return;const r=this._gantt.parsedOptions.startDateField,o=this._gantt.parsedOptions.endDateField,a=[...t];for(;a.length>0;){const s=[...a],l=s.pop();let h=this._gantt.records;for(const d of s){if(!h[d]||!h[d].children)return;h=h[d].children}const u=s.length===0?this._gantt.records[l]:h[l];if(u&&u.type===ze.PROJECT&&u.children&&u.children.length>0){let d=null,c=null;for(const f of u.children)if(f[r]&&f[o]){const g=new Date(f[r]),p=new Date(f[o]);(!d||g<d)&&(d=g),(!c||p>c)&&(c=p)}if(d&&c){const f=u[r]?new Date(u[r]):null,g=u[o]?new Date(u[o]):null;if(!f||!g||d.getTime()!==f.getTime()||c.getTime()!==g.getTime()){const p=(e=this._gantt.parsedOptions.dateFormat)!==null&&e!==void 0?e:this._gantt.parseTimeFormat(u[r]||u.children[0][r]),v=m=>this._gantt.formatDate?this._gantt.formatDate(m,p):m.toISOString().split("T")[0];u[r]=v(d),u[o]=v(c)}}}a.pop()}(i=this._gantt.scenegraph)===null||i===void 0||i.refreshAll()}}function fut(n,t,e,i){const r=n.parsedOptions.taskBarCustomLayout;if(r){let o;if(typeof r=="function"){const{startDate:a,endDate:s,taskDays:l,progress:h,taskRecord:u}=n.getTaskInfoByTaskListIndex(e,i);o=r({width:t.attribute.width,height:t.attribute.height,index:e,startDate:a,endDate:s,taskDays:l,progress:h,taskRecord:u,ganttInstance:n})}else o=r;if(o){const a=o.rootContainer;a.name="task-bar-custom-render";const s=t.children.find((l=>l.name==="task-bar-group"));if(s){const l=s.children.findIndex((u=>u.name==="task-bar-custom-render")),h=s.children[l];h&&(s.removeChild(h),s.insertInto(a,l))}}}}function Yg(n,t,e,i){const r=n.task_index,o=n.sub_task_index,a=n.record.type===ze.MILESTONE,s=n.attribute.x,l=n.attribute.y;if(t&&n.setAttribute("x",Math.max(0,n.attribute.x+t)),i._gantt.parsedOptions.tasksShowMode!==_t.Tasks_Separate&&i._gantt.parsedOptions.tasksShowMode!==_t.Project_Sub_Tasks_Inline?e&&n.setAttribute("y",n.attribute.y+e):e=0,a&&(n.setAttribute("anchor",[n.attribute.x+n.attribute.width/2,n.attribute.y+n.attribute.height/2]),n.milestoneTextContainer)){const h=n.attribute.x-s,u=n.attribute.y-l,d=n.milestoneTextContainer.attribute.x,c=n.milestoneTextContainer.attribute.y;n.milestoneTextContainer.setAttribute("x",d+h),n.milestoneTextContainer.setAttribute("y",c+u)}n.updateTextPosition(),i._gantt.scenegraph.refreshRecordLinkNodes(r,o,n,e)}function coe(n,t,e,i){const r=i._gantt.parsedOptions.progressField,o=n.clipGroupBox,a=n.barRect,s=n.progressRect,l=n.textLabel,h=n.task_index,u=n.sub_task_index,d=n.record,c=d[r],f=d.type===ze.MILESTONE;if(n.setAttribute("zIndex",1e4),t&&n.setAttribute("x",n.attribute.x+t),f&&n.setAttribute("anchor",[n.attribute.x+n.attribute.width/2,n.attribute.y+n.attribute.height/2]),e&&n.setAttribute("width",e),o.setAttribute("width",n.attribute.width),a?.setAttribute("width",n.attribute.width),s?.setAttribute("width",c/100*n.attribute.width),l){const{textAlign:g,textBaseline:p,padding:v}=i._gantt.parsedOptions.taskBarLabelStyle,m=V_(W_(v),g,p,e,n.attribute.height);l.setAttribute("maxLineWidth",e-2*lut),l.setAttribute("x",m.x)}n.updateTextPosition(),i.showTaskBarHover(),fut(i._gantt,n,h,u),i._gantt.scenegraph.refreshRecordLinkNodes(h,u,n,0)}let foe=1,goe=class{constructor(){this.listenersData={listeners:{},listenerData:{}}}on(t,e){const i=this.listenersData.listeners[t]||(this.listenersData.listeners[t]=[]);i.push(e);const r=foe++;return this.listenersData.listenerData[r]={type:t,listener:e,remove:()=>{delete this.listenersData.listenerData[r];const o=i.indexOf(e);i.splice(o,1),this.listenersData.listeners[t].length||delete this.listenersData.listeners[t]}},r}off(t,e){var i;if(e){const r=t;this.removeEventListener(r,e)}else{const r=t;if(!this.listenersData)return;(i=this.listenersData.listenerData[r])===null||i===void 0||i.remove()}}addEventListener(t,e,i){this.on(t,e)}removeEventListener(t,e){if(this.listenersData)for(const i in this.listenersData.listenerData){const r=this.listenersData.listenerData[i];r.type===t&&r.listener===e&&this.off(i)}}hasListeners(t){return!!this.listenersData&&!!this.listenersData.listeners[t]}fireListeners(t,e){if(!this.listenersData)return[];const i=this.listenersData.listeners[t];return i?i.map((r=>r.call(this,e))).filter((r=>Y(r))):[]}release(){delete this.listenersData}};class poe{constructor(t){this._gantt=t,this.records=t.records,this.processRecords()}processRecords(){const t=!this._gantt.options.minDate,e=!this._gantt.options.maxDate;let i=Number.MAX_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER;if((t||e||this._gantt.parsedOptions.tasksShowMode===_t.Sub_Tasks_Inline||this._gantt.parsedOptions.tasksShowMode===_t.Sub_Tasks_Compact)&&this.records.length){for(let l=0;l<this.records.length;l++){const h=this.records[l];if(t&&h[this._gantt.parsedOptions.startDateField]){const u=zi(h[this._gantt.parsedOptions.startDateField]);i=Math.min(i,u.getTime())}if(e&&h[this._gantt.parsedOptions.endDateField]){const u=zi(h[this._gantt.parsedOptions.endDateField]);r=Math.max(r,u.getTime())}this._gantt.parsedOptions.tasksShowMode!==_t.Sub_Tasks_Inline&&this._gantt.parsedOptions.tasksShowMode!==_t.Sub_Tasks_Compact||h.children&&h.children.sort(((u,d)=>zi(u[this._gantt.parsedOptions.startDateField]).getTime()-zi(d[this._gantt.parsedOptions.startDateField]).getTime()))}const{unit:o,startOfWeek:a,step:s}=this._gantt.parsedOptions.reverseSortedTimelineScales[0];t&&(this._gantt.parsedOptions.minDate=$f(new Date(i),o,a),this._gantt.parsedOptions._minDateTime=this._gantt.parsedOptions.minDate.getTime()),t&&!e&&(this._gantt.parsedOptions.maxDate=Lv(this._gantt.parsedOptions.minDate,new Date(this._gantt.options.maxDate),o,s),this._gantt.parsedOptions._maxDateTime=this._gantt.parsedOptions.maxDate.getTime()),e&&(this._gantt.parsedOptions.maxDate=Lv(this._gantt.parsedOptions.minDate,new Date(r),o,s),this._gantt.parsedOptions._maxDateTime=this._gantt.parsedOptions.maxDate.getTime())}}adjustOrder(t,e,i,r){var o,a,s,l;if(this._gantt.parsedOptions.tasksShowMode!==_t.Sub_Tasks_Arrange&&this._gantt.parsedOptions.tasksShowMode!==_t.Sub_Tasks_Compact||t!==i){if(this._gantt.parsedOptions.tasksShowMode===_t.Sub_Tasks_Inline){if(Y(e)&&Y(r)&&Y(t)&&Y(i)){const h=this.records[t].children[e];this.records[t].children.splice(e,1),this.records[i].children||(this.records[i].children=[]),this.records[i].children.splice(r,0,h)}(a=(o=this.records[i])===null||o===void 0?void 0:o.children)===null||a===void 0||a.sort(((h,u)=>zi(h[this._gantt.parsedOptions.startDateField]).getTime()-zi(u[this._gantt.parsedOptions.startDateField]).getTime()))}else if(this._gantt.parsedOptions.tasksShowMode===_t.Project_Sub_Tasks_Inline){if(Y(e)&&Y(r)&&Y(t)&&Y(i)){this.records[t].type,ze.PROJECT;const h=this.records[i].type===ze.PROJECT,u=this.records[t].children[e];this.records[t].children.splice(e,1),this.records[i].children||(this.records[i].children=[]),this.records[i].children.splice(r,0,u),h&&((l=(s=this.records[i])===null||s===void 0?void 0:s.children)===null||l===void 0||l.sort(((d,c)=>zi(d[this._gantt.parsedOptions.startDateField]).getTime()-zi(c[this._gantt.parsedOptions.startDateField]).getTime())))}}else if(Y(e)&&Y(r)&&Y(t)&&Y(i)){const h=this.records[t].children[e];this.records[t].children.splice(e,1),this.records[i].children||(this.records[i].children=[]),this.records[i].children.splice(r,0,h)}}}setRecords(t){this.records=t,this.processRecords()}}class gut{constructor(t,e){var i;this.plugins=new Map,this.gantt=t,(i=e.plugins)===null||i===void 0||i.forEach((r=>{this.register(r),this._initializePluginRun(r)}))}_initializePluginRun(t){if(t.runTime===void 0)try{t.run(this.gantt)}catch{}else this._bindGanttEventForPlugin(t)}register(t){this.plugins.set(t.id,t)}registerAll(t){t.forEach((e=>this.register(e)))}getPlugin(t){return this.plugins.get(t)}getPluginByName(t){return Array.from(this.plugins.values()).find((e=>e.name===t))}_bindGanttEventForPlugin(t){t.runTime&&t.runTime.forEach((e=>{this.gantt.on(e,((...i)=>{var r;try{(r=t.run)===null||r===void 0||r.call(t,...i,e,this.gantt)}catch{}}))}))}updatePlugins(t){Array.from(this.plugins.values()).filter((i=>!t?.some((r=>r.id===i.id)))).forEach((i=>{this.release(),this.plugins.delete(i.id)})),this.plugins.forEach((i=>{i.update&&i.update()}));const e=t?.filter((i=>!this.plugins.has(i.id)));e?.forEach((i=>{this.register(i),this._initializePluginRun(i)}))}release(){this.plugins.forEach((t=>{var e;try{(e=t.release)===null||e===void 0||e.call(t,this.gantt)}catch{}}))}}function voe(n,t="vtable-gantt"){var e,i;const r=document.createElement("div");r.setAttribute("tabindex","0"),r.classList.add(t),r.style.outline="none",r.style.margin=`${n.top}px ${n.right}px ${n.bottom}px ${n.left}px`;const o=(r.offsetWidth||((e=r.parentElement)===null||e===void 0?void 0:e.offsetWidth)||1)-1,a=(r.offsetHeight||((i=r.parentElement)===null||i===void 0?void 0:i.offsetHeight)||1)-1;return r.style.width=o&&o-n.left-n.right+"px"||"0px",r.style.height=a&&a-n.top-n.bottom+"px"||"0px",r}class moe extends goe{constructor(t,e){var i,r,o,a,s;super(),this.parsedOptions={},this.container=t,this.options=e,this.taskTableWidth=typeof((i=e?.taskListTable)===null||i===void 0?void 0:i.tableWidth)=="number"?(r=e?.taskListTable)===null||r===void 0?void 0:r.tableWidth:-1,this.taskTableColumns=(a=(o=e?.taskListTable)===null||o===void 0?void 0:o.columns)!==null&&a!==void 0?a:[],this.records=(s=e?.records)!==null&&s!==void 0?s:[],this._sortScales(),IU(this),tXt(this),this.data=new poe(this),this._generateTimeLineDateMap(),this.timeLineHeaderLevel=this.parsedOptions.sortedTimelineScales.length,this.element=voe({top:0,right:0,left:0,bottom:0},"vtable-gantt"),this.element.style.left=this.taskTableWidth!==-1?`${this.taskTableWidth}px`:"0px",this.canvas=document.createElement("canvas"),this.element.appendChild(this.canvas),this.context=this.canvas.getContext("2d"),t?(t.appendChild(this.element),this._updateSize()):this._updateSize(),this._generateListTable(),this._syncPropsFromTable(),UYt(this),this.scenegraph=new Xre(this),this.stateManager=new doe(this),this.eventManager=new ioe(this),this.scenegraph.afterCreateSceneGraph(),this._scrollToMarkLine(),this.pluginManager=new gut(this,e)}renderTaskBarsTable(){this.scenegraph.updateNextFrame()}_updateSize(){var t,e,i,r,o,a,s,l,h;let u=0,d=0;if(Ma.mode==="browser"){const g=this.getElement();let p=0,v=0;if(g.parentElement){const _=g.parentElement.style||window.getComputedStyle(g.parentElement);p=g.parentElement.offsetWidth-parseInt(_.paddingLeft||"0px",10)-parseInt(_.paddingRight||"0px",10),v=g.parentElement.offsetHeight-parseInt(_.paddingTop||"0px",10)-parseInt(_.paddingBottom||"0px",20)}const m=(p??1)-1-this.taskTableWidth,y=(v??1)-1;g.style.width=m&&`${m}px`||"0px",g.style.height=y&&`${y}px`||"0px";const{canvas:b}=this;u=(e=(t=b.parentElement)===null||t===void 0?void 0:t.offsetWidth)!==null&&e!==void 0?e:1,d=(r=(i=b.parentElement)===null||i===void 0?void 0:i.offsetHeight)!==null&&r!==void 0?r:1,!((o=this==null?void 0:this.scenegraph)===null||o===void 0)&&o.stage?this.scenegraph.stage.resize(u,d):(b.style.width="",b.style.height="",b.width=u,b.height=d,b.style.width=`${u}px`,b.style.height=`${d}px`)}else Ma.mode;const c=Math.floor(u-VYt(this.parsedOptions.scrollStyle)),f=Math.floor(d-WYt(this.parsedOptions.scrollStyle));if(this.tableNoFrameWidth=u,this.tableNoFrameHeight=Math.floor(d),this.parsedOptions.outerFrameStyle){const[g,p,v,m]=hs((s=(a=this.parsedOptions.outerFrameStyle)===null||a===void 0?void 0:a.borderLineWidth)!==null&&s!==void 0?s:0);this.tableX=this.taskTableColumns.length>=1||!((l=this.options)===null||l===void 0)&&l.rowSeriesNumber?(h=this.parsedOptions.verticalSplitLine.lineWidth)!==null&&h!==void 0?h:0:m,this.tableY=g,this.tableNoFrameWidth=Math.min(c-p-this.tableX,this.getAllDateColsWidth()),this.tableNoFrameHeight=f-g-v}}_updateListTableSize(t){var e,i,r,o,a,s,l,h,u,d,c,f;if(t){if(((i=(e=this.options)===null||e===void 0?void 0:e.taskListTable)===null||i===void 0?void 0:i.tableWidth)==="auto"||this.taskTableWidth===-1){const[g,p,v]=hs((o=(r=this.parsedOptions.outerFrameStyle)===null||r===void 0?void 0:r.borderLineWidth)!==null&&o!==void 0?o:0);this.taskTableWidth=t.getAllColsWidth()+p,!((s=(a=this.options)===null||a===void 0?void 0:a.taskListTable)===null||s===void 0)&&s.maxTableWidth&&(this.taskTableWidth=Math.min((h=(l=this.options)===null||l===void 0?void 0:l.taskListTable)===null||h===void 0?void 0:h.maxTableWidth,this.taskTableWidth)),!((d=(u=this.options)===null||u===void 0?void 0:u.taskListTable)===null||d===void 0)&&d.minTableWidth&&(this.taskTableWidth=Math.max((f=(c=this.options)===null||c===void 0?void 0:c.taskListTable)===null||f===void 0?void 0:f.minTableWidth,this.taskTableWidth)),this.element.style.left=this.taskTableWidth!==-1?`${this.taskTableWidth}px`:"0px",t.setCanvasSize(this.taskTableWidth,this.tableNoFrameHeight+g+v),this._updateSize()}if(t.columnHeaderLevelCount>1)if(t.columnHeaderLevelCount===this.parsedOptions.timeLineHeaderRowHeights.length)for(let g=0;g<t.columnHeaderLevelCount;g++)t.setRowHeight(g,this.parsedOptions.timeLineHeaderRowHeights[g]);else{const g=this.getAllHeaderRowsHeight()/t.columnHeaderLevelCount;for(let p=0;p<t.columnHeaderLevelCount;p++)t.setRowHeight(p,g)}}}_generateListTable(){var t;if(this.taskTableColumns.length>=1||!((t=this.options)===null||t===void 0)&&t.rowSeriesNumber){const e=this._generateListTableOptions();this.taskListTableInstance=new Tre(this.container,e),this._updateListTableSize(this.taskListTableInstance)}}_generateListTableOptions(){var t,e,i,r,o,a,s,l,h,u,d,c,f,g,p,v,m,y,b,_,w,C,x,S,A,T,M,R,L,B,P,k,E,D,I,O,H,F,N,$,V,X,Z,tt,K,rt,q,it,nt,W,G,j,U,J;const ot={},st=["container","records","rowSeriesNumber","overscrollBehavior","pixelRatio","eventOptions"];for(const lt of st)lt in this.options&&(ot[lt]=this.options[lt]);if(ot.defaultRowHeight=this.options.rowHeight,this.options.taskListTable)for(const lt in this.options.taskListTable){if(ot[lt]=this.options.taskListTable[lt],lt==="columns"&&(ot[lt][ot[lt].length-1].disableColumnResize=!0,this.parsedOptions.tasksShowMode===_t.Sub_Tasks_Inline||this.parsedOptions.tasksShowMode===_t.Sub_Tasks_Separate||this.parsedOptions.tasksShowMode===_t.Sub_Tasks_Arrange||this.parsedOptions.tasksShowMode===_t.Sub_Tasks_Compact))for(let ft=0;ft<ot.columns.length;ft++)ot.columns[ft].tree&&(ot.columns[ft].tree=!1);lt!=="hierarchyExpandLevel"||this.parsedOptions.tasksShowMode!==_t.Sub_Tasks_Inline&&this.parsedOptions.tasksShowMode!==_t.Sub_Tasks_Separate&&this.parsedOptions.tasksShowMode!==_t.Sub_Tasks_Arrange&&this.parsedOptions.tasksShowMode!==_t.Sub_Tasks_Compact||delete ot[lt]}if(!((t=this.options.taskListTable)===null||t===void 0)&&t.theme)if(ot.theme=(e=this.options.taskListTable)===null||e===void 0?void 0:e.theme,ot.theme.bodyStyle&&!cYt(ot.theme,"bodyStyle")){ot.theme=((i=this.options.taskListTable)===null||i===void 0?void 0:i.theme).extends(((r=this.options.taskListTable)===null||r===void 0?void 0:r.theme).getExtendTheme());const lt=ot.theme.getExtendTheme();ot.theme.clearBodyStyleCache(),!((o=ot.theme.headerStyle)===null||o===void 0)&&o.bgColor||(lt.headerStyle?lt.headerStyle.bgColor||(lt.headerStyle.bgColor=this.parsedOptions.timelineHeaderBackgroundColor):lt.headerStyle={bgColor:this.parsedOptions.timelineHeaderBackgroundColor}),lt.bodyStyle?lt.bodyStyle.frameStyle={borderLineWidth:[(s=(a=this.parsedOptions.horizontalSplitLine)===null||a===void 0?void 0:a.lineWidth)!==null&&s!==void 0?s:0,0,0,0],borderColor:(l=this.parsedOptions.horizontalSplitLine)===null||l===void 0?void 0:l.lineColor}:lt.bodyStyle={frameStyle:{borderLineWidth:[(u=(h=this.parsedOptions.horizontalSplitLine)===null||h===void 0?void 0:h.lineWidth)!==null&&u!==void 0?u:0,0,0,0],borderColor:(d=this.parsedOptions.horizontalSplitLine)===null||d===void 0?void 0:d.lineColor}},lt.cellInnerBorder=!1;const[ft,vt,pt,bt]=hs((f=(c=this.parsedOptions.outerFrameStyle)===null||c===void 0?void 0:c.borderLineWidth)!==null&&f!==void 0?f:0);lt.frameStyle=Object.assign({},this.parsedOptions.outerFrameStyle,{shadowBlur:0,cornerRadius:[(p=(g=this.parsedOptions.outerFrameStyle)===null||g===void 0?void 0:g.cornerRadius)!==null&&p!==void 0?p:0,0,0,(m=(v=this.parsedOptions.outerFrameStyle)===null||v===void 0?void 0:v.cornerRadius)!==null&&m!==void 0?m:0],borderLineWidth:[ft,0,pt,bt]}),lt.scrollStyle=Object.assign({},(b=(y=this.options.taskListTable)===null||y===void 0?void 0:y.theme)===null||b===void 0?void 0:b.scrollStyle,this.parsedOptions.scrollStyle,{verticalVisible:"none"}),lt.columnResize=Object.assign({labelColor:"rgba(0,0,0,0)",labelBackgroundFill:"rgba(0,0,0,0)"},lt?.columnResize),lt.underlayBackgroundColor||(lt.underlayBackgroundColor=this.parsedOptions.underlayBackgroundColor)}else{ot.theme.headerStyle?ot.theme.headerStyle.bgColor||(ot.theme.headerStyle.bgColor=this.parsedOptions.timelineHeaderBackgroundColor):ot.theme.headerStyle={bgColor:this.parsedOptions.timelineHeaderBackgroundColor},ot.theme.headerStyle=Object.assign({},tf.headerStyle,{bgColor:this.parsedOptions.timelineHeaderBackgroundColor},(w=(_=this.options.taskListTable)===null||_===void 0?void 0:_.theme)===null||w===void 0?void 0:w.headerStyle),ot.theme.bodyStyle=Object.assign({},tf.bodyStyle,(x=(C=this.options.taskListTable)===null||C===void 0?void 0:C.theme)===null||x===void 0?void 0:x.bodyStyle,{frameStyle:{borderLineWidth:[(A=(S=this.parsedOptions.horizontalSplitLine)===null||S===void 0?void 0:S.lineWidth)!==null&&A!==void 0?A:0,0,0,0],borderColor:(T=this.parsedOptions.horizontalSplitLine)===null||T===void 0?void 0:T.lineColor}}),ot.theme.cellInnerBorder=!1;const[lt,ft,vt,pt]=hs((R=(M=this.parsedOptions.outerFrameStyle)===null||M===void 0?void 0:M.borderLineWidth)!==null&&R!==void 0?R:0);ot.theme.frameStyle=Object.assign({},this.parsedOptions.outerFrameStyle,{cornerRadius:[(B=(L=this.parsedOptions.outerFrameStyle)===null||L===void 0?void 0:L.cornerRadius)!==null&&B!==void 0?B:0,0,0,(k=(P=this.parsedOptions.outerFrameStyle)===null||P===void 0?void 0:P.cornerRadius)!==null&&k!==void 0?k:0],borderLineWidth:[lt,0,vt,pt]}),ot.theme.scrollStyle=Object.assign({},(D=(E=this.options.taskListTable)===null||E===void 0?void 0:E.theme)===null||D===void 0?void 0:D.scrollStyle,this.parsedOptions.scrollStyle,{verticalVisible:"none"}),ot.theme.columnResize=Object.assign({labelColor:"rgba(0,0,0,0)",labelBackgroundFill:"rgba(0,0,0,0)"},(O=(I=this.options.taskListTable)===null||I===void 0?void 0:I.theme)===null||O===void 0?void 0:O.columnResize),ot.theme.underlayBackgroundColor||(ot.theme.underlayBackgroundColor=this.parsedOptions.underlayBackgroundColor)}else{const[lt,ft,vt,pt]=hs((F=(H=this.parsedOptions.outerFrameStyle)===null||H===void 0?void 0:H.borderLineWidth)!==null&&F!==void 0?F:0);ot.theme={scrollStyle:Object.assign({},($=(N=this.options.taskListTable)===null||N===void 0?void 0:N.theme)===null||$===void 0?void 0:$.scrollStyle,this.parsedOptions.scrollStyle,{verticalVisible:"none"}),headerStyle:Object.assign({},tf.headerStyle,{bgColor:this.parsedOptions.timelineHeaderBackgroundColor},(X=(V=this.options.taskListTable)===null||V===void 0?void 0:V.theme)===null||X===void 0?void 0:X.headerStyle),bodyStyle:Object.assign({},tf.bodyStyle,(tt=(Z=this.options.taskListTable)===null||Z===void 0?void 0:Z.theme)===null||tt===void 0?void 0:tt.bodyStyle,{frameStyle:{borderLineWidth:[(rt=(K=this.parsedOptions.horizontalSplitLine)===null||K===void 0?void 0:K.lineWidth)!==null&&rt!==void 0?rt:0,0,0,0],borderColor:(q=this.parsedOptions.horizontalSplitLine)===null||q===void 0?void 0:q.lineColor}}),cellInnerBorder:!1,frameStyle:Object.assign({},this.parsedOptions.outerFrameStyle,{cornerRadius:[(nt=(it=this.parsedOptions.outerFrameStyle)===null||it===void 0?void 0:it.cornerRadius)!==null&&nt!==void 0?nt:0,0,0,(G=(W=this.parsedOptions.outerFrameStyle)===null||W===void 0?void 0:W.cornerRadius)!==null&&G!==void 0?G:0],borderLineWidth:[lt,0,vt,pt]}),columnResize:Object.assign({labelColor:"rgba(0,0,0,0)",labelBackgroundFill:"rgba(0,0,0,0)"},(U=(j=this.options.taskListTable)===null||j===void 0?void 0:j.theme)===null||U===void 0?void 0:U.columnResize),underlayBackgroundColor:this.parsedOptions.underlayBackgroundColor}}return ot.canvasWidth=this.taskTableWidth,ot.canvasHeight=this.canvas.height,ot.defaultHeaderRowHeight=this.getAllHeaderRowsHeight(),this.parsedOptions.tasksShowMode===_t.Sub_Tasks_Separate?(ot.customComputeRowHeight=lt=>{var ft;const{row:vt,table:pt}=lt,bt=pt.getRecordByRowCol(0,vt);if(bt)return(((ft=bt.children)===null||ft===void 0?void 0:ft.length)||1)*this.parsedOptions.rowHeight},ot.defaultRowHeight="auto",ot.customConfig={forceComputeAllRowHeight:!0}):this.parsedOptions.tasksShowMode===_t.Sub_Tasks_Compact?(ot.customComputeRowHeight=lt=>{const{row:ft,table:vt}=lt,pt=vt.getRecordByRowCol(0,ft);if(pt)return YYt(this,pt)*this.parsedOptions.rowHeight},ot.defaultRowHeight="auto",ot.customConfig={forceComputeAllRowHeight:!0}):this.parsedOptions.tasksShowMode===_t.Sub_Tasks_Arrange?(ot.customComputeRowHeight=lt=>{const{row:ft,table:vt}=lt,pt=vt.getRecordByRowCol(0,ft);if(pt)return qYt(this,pt)*this.parsedOptions.rowHeight},ot.defaultRowHeight="auto",ot.customConfig={forceComputeAllRowHeight:!0}):ot.defaultRowHeight=(J=this.options.rowHeight)!==null&&J!==void 0?J:40,ot.clearDOM=!1,ot}getElement(){return this.element}getContainer(){return this.element.parentElement}_sortScales(){const{timelineHeader:t}=this.options;if(t){const e=t.scales,i=["year","quarter","month","week","day","hour","minute","second"];e.length===1&&(e[0].unit!=="hour"&&e[0].unit!=="minute"&&e[0].unit!=="second"||(this.parsedOptions.timeScaleIncludeHour=!0));const r=e.slice().sort(((a,s)=>{a.unit!=="hour"&&a.unit!=="minute"&&a.unit!=="second"||(this.parsedOptions.timeScaleIncludeHour=!0);const l=i.indexOf(a.unit),h=i.indexOf(s.unit);return l===-1?1:h===-1?-1:l-h})),o=e.slice().sort(((a,s)=>{const l=i.indexOf(a.unit),h=i.indexOf(s.unit);return l===-1?1:h===-1?-1:h-l}));this.parsedOptions.sortedTimelineScales=r,this.parsedOptions.reverseSortedTimelineScales=o}}_generateTimeLineDateMap(){if(this.parsedOptions.minDate&&this.parsedOptions.maxDate)for(const t of this.parsedOptions.reverseSortedTimelineScales)t.timelineDates=$Yt(new Date(this.parsedOptions.minDate),this.parsedOptions.maxDate,t)}getRowHeightByIndex(t){return this.taskListTableInstance?this.taskListTableInstance.getRowHeight(t+this.taskListTableInstance.columnHeaderLevelCount):this.parsedOptions.rowHeight}getRowsHeightByIndex(t,e){return this.taskListTableInstance?this.taskListTableInstance.getRowsHeight(t+this.taskListTableInstance.columnHeaderLevelCount,e+this.taskListTableInstance.columnHeaderLevelCount):this.parsedOptions.rowHeight*(e-t+1)}getAllRowsHeight(){return this.taskListTableInstance?this.taskListTableInstance.getAllRowsHeight():this.getAllHeaderRowsHeight()+this.itemCount*this.parsedOptions.rowHeight}getAllHeaderRowsHeight(){return this.parsedOptions.timeLineHeaderRowHeights.reduce(((t,e,i)=>this.parsedOptions.sortedTimelineScales[i].visible===!1?t:t+e),0)}getAllDateColsWidth(){var t,e;return this.parsedOptions.timelineColWidth*((e=(t=this.parsedOptions.reverseSortedTimelineScales[0].timelineDates)===null||t===void 0?void 0:t.length)!==null&&e!==void 0?e:0)}getAllTaskBarsHeight(){return this.taskListTableInstance?this.taskListTableInstance.getRowsHeight(this.taskListTableInstance.columnHeaderLevelCount,this.taskListTableInstance.rowCount-1):this.itemCount*this.parsedOptions.rowHeight}getRecordIndexByTaskShowIndex(t){return this.taskListTableInstance?this.taskListTableInstance.getRecordIndexByCell(0,this.taskListTableInstance.columnHeaderLevelCount+t):t}getTaskShowIndexByRecordIndex(t){return this.taskListTableInstance.getBodyRowIndexByRecordIndex(t)}getRecordByIndex(t,e){var i,r;if(this.taskListTableInstance){if(Y(e)){const o=this.taskListTableInstance.getRecordByCell(0,t+this.taskListTableInstance.columnHeaderLevelCount);if(Array.isArray(e)){const a=this.getRecordIndexByTaskShowIndex(t),s=Array.isArray(a)?a.length:1,l=[...e];l.splice(0,s);let h=o;for(;l.length>0;){const u=l.shift();h=(i=h?.children)===null||i===void 0?void 0:i[u]}return h}return(r=o?.children)===null||r===void 0?void 0:r[e]}return this.taskListTableInstance.getRecordByCell(0,t+this.taskListTableInstance.columnHeaderLevelCount)}return this.records[t]}_refreshTaskBar(t,e){this.scenegraph.taskBar.updateTaskBarNode(t,e),this.scenegraph.refreshRecordLinkNodes(t,void 0,this.scenegraph.taskBar.getTaskBarNodeByIndex(t,e)),this.scenegraph.updateNextFrame()}_updateRecordToListTable(t,e){this.taskListTableInstance.updateRecords([t],[e])}getTaskInfoByTaskListIndex(t,e){const i=this.getRecordByIndex(t,e),r=i?.type,o=this.parsedOptions.startDateField,a=this.parsedOptions.endDateField,s=this.parsedOptions.progressField,l=zi(i?.[o]).getTime(),h=zi(i?.[a]).getTime();if(r&&!i?.[o]||!r&&(h<this.parsedOptions._minDateTime||l>this.parsedOptions._maxDateTime||!i?.[o]||!i?.[a]))return{taskDays:0,progress:0,startDate:null,endDate:null,taskRecord:i};const u=jYt(i[s]);let d,c;return this.parsedOptions.timeScaleIncludeHour?(d=zi(Math.min(Math.max(this.parsedOptions._minDateTime,l),this.parsedOptions._maxDateTime)),c=nlt(Math.max(Math.min(this.parsedOptions._maxDateTime,h),this.parsedOptions._minDateTime),!0)):(d=zi(Math.min(Math.max(this.parsedOptions._minDateTime,l),this.parsedOptions._maxDateTime),!0),c=Tu(Math.max(Math.min(this.parsedOptions._maxDateTime,h),this.parsedOptions._minDateTime),!0)),{taskRecord:i,taskDays:(c.getTime()-d.getTime()+1)/864e5,startDate:d,endDate:c,progress:u}}_updateStartDateToTaskRecord(t,e,i){var r;const o=this.getRecordByIndex(e,i),a=this.parsedOptions.startDateField,s=(r=this.parsedOptions.dateFormat)!==null&&r!==void 0?r:G1(o[a]),l=al(t,s);if(o[a]=l,Y(i))Array.isArray(i)&&this.stateManager.updateProjectTaskTimes(i);else{const h=this.getRecordIndexByTaskShowIndex(e);this._updateRecordToListTable(o,h),Array.isArray(h)&&this.stateManager.updateProjectTaskTimes(h)}}_updateEndDateToTaskRecord(t,e,i){var r;const o=this.getRecordByIndex(e,i),a=this.parsedOptions.endDateField,s=(r=this.parsedOptions.dateFormat)!==null&&r!==void 0?r:G1(o[a]),l=al(t,s);if(o[a]=l,Y(i))Array.isArray(i)&&this.stateManager.updateProjectTaskTimes(i);else{const h=this.getRecordIndexByTaskShowIndex(e);this._updateRecordToListTable(o,h),Array.isArray(h)&&this.stateManager.updateProjectTaskTimes(h)}}_updateStartEndDateToTaskRecord(t,e,i,r){var o;const a=this.getRecordByIndex(i,r),s=this.parsedOptions.startDateField,l=this.parsedOptions.endDateField,h=(o=this.parsedOptions.dateFormat)!==null&&o!==void 0?o:G1(a[s]),u=al(t,h);a[s]=u;const d=al(e,h);if(a[l]=d,Y(r))Array.isArray(r)&&this.stateManager.updateProjectTaskTimes(r);else{const c=this.getRecordIndexByTaskShowIndex(i);this._updateRecordToListTable(a,c),Array.isArray(c)&&this.stateManager.updateProjectTaskTimes(c)}}_updateProgressToTaskRecord(t,e,i){const r=this.getRecordByIndex(e,i),o=this.parsedOptions.progressField;if(o){r[o]=t;const a=this.getRecordIndexByTaskShowIndex(e);this._updateRecordToListTable(r,a),this._refreshTaskBar(e,i)}}_dragOrderTaskRecord(t,e,i,r){this.data.adjustOrder(t,e,i,r)}updateTaskRecord(t,e,i){if(Y(i)){const o=typeof e=="number"?e:e[0];return this._updateRecordToListTable(t,[o,i]),void this._refreshTaskBar(o,i)}if(Array.isArray(e)){const o=e[0],a=e[1];return this._updateRecordToListTable(t,e),void this._refreshTaskBar(o,a)}let r=e;this.taskListTableInstance.rowHierarchyType==="tree"&&(r=this.taskListTableInstance.getRecordIndexByCell(0,e+this.taskListTableInstance.columnHeaderLevelCount)),this._updateRecordToListTable(t,r),this._refreshTaskBar(e,void 0)}setPixelRatio(t){var e;(e=this.taskListTableInstance)===null||e===void 0||e.setPixelRatio(t),this.parsedOptions.pixelRatio=t,this.scenegraph.setPixelRatio(t)}updateTasksShowMode(t){this.options.tasksShowMode=t,this.updateOption(this.options)}_resize(){var t,e,i,r,o;this._updateSize(),(t=this.taskListTableInstance)===null||t===void 0||t.setCanvasSize(this.taskTableWidth,this.tableNoFrameHeight+hs((i=(e=this.parsedOptions.outerFrameStyle)===null||e===void 0?void 0:e.borderLineWidth)!==null&&i!==void 0?i:0)[0]+hs((o=(r=this.parsedOptions.outerFrameStyle)===null||r===void 0?void 0:r.borderLineWidth)!==null&&o!==void 0?o:0)[2]),this._syncPropsFromTable(),this.scenegraph.resize(),Vw(this)}_syncPropsFromTable(){this.itemCount=this.taskListTableInstance?this.taskListTableInstance.rowCount-this.taskListTableInstance.columnHeaderLevelCount:this.records.length,this.headerHeight=this.getAllHeaderRowsHeight(),this.drawHeight=Math.min(this.getAllRowsHeight(),this.tableNoFrameHeight),this.gridHeight=this.drawHeight-this.headerHeight}getContext(){return this.context}release(){var t,e;(t=super.release)===null||t===void 0||t.call(this),this.eventManager.release(),(e=this.taskListTableInstance)===null||e===void 0||e.release();const{parentElement:i}=this.element;i&&(i.removeChild(this.element),this.verticalSplitResizeLine&&i.removeChild(this.verticalSplitResizeLine),this.horizontalSplitLine&&i.removeChild(this.horizontalSplitLine)),this.scenegraph=null,this.pluginManager.release()}updateOption(t){var e,i,r,o,a;if(this.parsedOptions={},this.options=t,this.taskTableWidth=typeof((e=t?.taskListTable)===null||e===void 0?void 0:e.tableWidth)=="number"?(i=t?.taskListTable)===null||i===void 0?void 0:i.tableWidth:-1,this.taskTableColumns=(o=(r=t?.taskListTable)===null||r===void 0?void 0:r.columns)!==null&&o!==void 0?o:[],this.records=(a=t?.records)!==null&&a!==void 0?a:[],this._sortScales(),IU(this),this.data.setRecords(this.records),this._generateTimeLineDateMap(),this.timeLineHeaderLevel=this.parsedOptions.sortedTimelineScales.length,this._updateSize(),this.taskListTableInstance){const s=this._generateListTableOptions();this.taskListTableInstance.updateOption(s),this._updateListTableSize(this.taskListTableInstance)}this._syncPropsFromTable(),this.scenegraph.updateStageBackground(),this.element.style.left=this.taskTableWidth!==-1?`${this.taskTableWidth}px`:"0px",Vw(this),this.scenegraph.updateSceneGraph(),this.scenegraph.afterCreateSceneGraph(),this._scrollToMarkLine()}setRecords(t){this.records=t,this.data.setRecords(t),KYt(this),this.taskListTableInstance.setRecords(t),this._syncPropsFromTable(),this._generateTimeLineDateMap(),this.timeLineHeaderLevel=this.parsedOptions.sortedTimelineScales.length,this._updateSize(),this.scenegraph.refreshAll(),this.verticalSplitResizeLine.style.height=this.drawHeight+"px";const e=this.stateManager.scroll.horizontalBarPos,i=this.stateManager.scroll.verticalBarPos;this.scenegraph.setX(-e),this.scenegraph.setY(-i)}updateScales(t){const e=this.parsedOptions.sortedTimelineScales.length;if(this.options.timelineHeader.scales=t,this._sortScales(),GYt(this),this._generateTimeLineDateMap(),this.timeLineHeaderLevel=this.parsedOptions.sortedTimelineScales.length,this.scenegraph.refreshAll(),Vw(this),this.taskListTableInstance)if(this.taskListTableInstance.columnHeaderLevelCount===this.parsedOptions.timeLineHeaderRowHeights.length)for(let i=0;i<this.taskListTableInstance.columnHeaderLevelCount;i++)this.taskListTableInstance.setRowHeight(i,this.parsedOptions.timeLineHeaderRowHeights[i]);else{const i=this.getAllHeaderRowsHeight()/this.taskListTableInstance.columnHeaderLevelCount;for(let r=0;r<this.taskListTableInstance.columnHeaderLevelCount;r++)this.taskListTableInstance.setRowHeight(r,i)}e!==t.length&&this._resize()}updateDateRange(t,e){this.options.minDate=t,this.options.maxDate=e,ZYt(this),this._generateTimeLineDateMap(),this._updateSize(),this.scenegraph.refreshAll(),this._scrollToMarkLine()}updateMarkLine(t){this.options.markLine=t,Ck(this),this.scenegraph.markLine.refresh(),this.scenegraph.renderSceneGraph()}addMarkLine(t){this.options.markLine=[...this.parsedOptions.markLine,t],Ck(this),this.scenegraph.markLine.refresh(),this.scenegraph.renderSceneGraph(),this.scenegraph.updateNextFrame()}updateCurrentMarkLine(t){const e=this.parsedOptions.markLine.findIndex((i=>i.date===t.date));e!==-1&&(this.options.markLine=[...this.parsedOptions.markLine.slice(0,e),Object.assign(Object.assign({},this.options.markLine[e]),t),...this.parsedOptions.markLine.slice(e+1)],Ck(this),this.scenegraph.markLine.refresh(),this.scenegraph.renderSceneGraph(),this.scenegraph.updateNextFrame())}_scrollToMarkLine(){if(this.parsedOptions.scrollToMarkLineDate&&this.parsedOptions.minDate){const t=this.parsedOptions.minDate,{unit:e,step:i}=this.parsedOptions.reverseSortedTimelineScales[0],r=Xe(this.parsedOptions.scrollToMarkLineDate,t,e,i)*this.parsedOptions.timelineColWidth-this.tableNoFrameWidth/2;this.stateManager.setScrollLeft(r)}}scrollToMarkLine(t){if(!t||!this.parsedOptions.minDate)return;const e=this.parsedOptions.minDate,{unit:i,step:r}=this.parsedOptions.reverseSortedTimelineScales[0],o=Xe(t,e,i,r)*this.parsedOptions.timelineColWidth-this.tableNoFrameWidth/2;this.stateManager.setScrollLeft(o)}addLink(t){this.parsedOptions.dependencyLinks.push(t),this.scenegraph.dependencyLink.initLinkLine(this.parsedOptions.dependencyLinks.length-1),this.scenegraph.updateNextFrame()}deleteLink(t){if(this.parsedOptions.dependencyLinkDeletable){const e=this.parsedOptions.dependencyLinks.findIndex((i=>i.type===t.type&&i.linkedFromTaskKey===t.linkedFromTaskKey&&i.linkedToTaskKey===t.linkedToTaskKey));if(e!==-1){const i=this.parsedOptions.dependencyLinks[e];this.parsedOptions.dependencyLinks.splice(e,1),this.scenegraph.dependencyLink.deleteLink(i),this.scenegraph.updateNextFrame()}}}get scrollTop(){return this.stateManager.scrollTop}set scrollTop(t){this.stateManager.setScrollTop(t)}get scrollLeft(){return this.stateManager.scrollLeft}set scrollLeft(t){this.stateManager.setScrollLeft(t)}getTaskBarRelativeRect(t){const e=this.scenegraph.taskBar.getTaskBarNodeByIndex(t);return{left:e.attribute.x+this.taskListTableInstance.tableNoFrameWidth+this.taskListTableInstance.tableX+this.tableX-this.scrollLeft,top:e.attribute.y+this.tableY+this.headerHeight-this.scrollTop,width:e.attribute.width,height:e.attribute.height}}getDateColWidth(t){return this.parsedOptions.timelineColWidth}getDateColsWidth(t,e){return(e-t+1)*this.parsedOptions.timelineColWidth}getDateRangeByIndex(t){const e=this.parsedOptions.reverseSortedTimelineScales[0];return t<e.timelineDates.length?{startDate:e.timelineDates[t].startDate,endDate:e.timelineDates[t].endDate}:null}parseTimeFormat(t){return G1(t)}getTaskBarStyle(t,e){const{startDate:i,endDate:r,taskRecord:o}=this.getTaskInfoByTaskListIndex(t,e);let a;return a=o.type===ze.PROJECT?this.parsedOptions.projectBarStyle:this.parsedOptions.taskBarStyle,typeof a=="function"?a({index:t,startDate:i,endDate:r,taskRecord:o,ganttInstance:this}):a}formatDate(t,e){return al(t,e)}}const yoe=Object.freeze(Object.defineProperty({__proto__:null,formatDate:al,getTodayNearDay:sYt,getWeekNumber:ilt,getWeekday:dYt},Symbol.toStringTag,{value:"Module"})),boe=Object.freeze(Object.defineProperty({__proto__:null,Arc:H_,Area:Lb,Circle:Ff,Group:_e,Image:ea,Line:O_,Path:Tv,Rect:og,RichText:Fi,Text:tn},Symbol.toStringTag,{value:"Module"})),_oe=Object.freeze(Object.defineProperty({__proto__:null,CustomLayout:Hre,TABLE_EVENT_TYPE:at,TYPES:lXt,register:Mee,themes:sqt},Symbol.toStringTag,{value:"Module"})),Coe=Object.freeze(Object.defineProperty({__proto__:null,PluginManager:gut},Symbol.toStringTag,{value:"Module"})),woe="1.20.0",dae=Object.freeze(Object.defineProperty({__proto__:null,Gantt:moe,TYPES:G3t,VRender:boe,VTable:_oe,plugins:Coe,tools:yoe,version:woe},Symbol.toStringTag,{value:"Module"}));export{Po as G,o_ as L,Moe as _,yH as a,ewt as b,J_ as c,Yyt as d,lxt as e,PSt as f,Aoe as g,nPt as h,Toe as i,c1t as j,k1t as k,$wt as l,gSt as m,FSt as n,eyt as o,hTt as p,j2t as q,BPt as r,Zv as s,bbt as t,ae as u,dae as v};
