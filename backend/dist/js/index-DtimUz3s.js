import{P as B,_ as D}from"./index.vue_vue_type_script_setup_true_lang-BYfZxNJP.js";import{k as F,aE as O,r as l,Q as V,V as i,_ as P,Y as L,K as n,S as c,$ as f,U as _,aF as $,j as G,R as C}from"./vue-vendor-Bom1XEVO.js";import{a as I,l as U,i as Y}from"./index-DMzwf6y-.js";import{u as z}from"./index-CHw-6mH_.js";import{_ as A}from"./Spline.vue_vue_type_script_setup_true_lang-PtOedBRM.js";import W from"./index-Ecw0hEKP.js";import q from"./Typewriter-BbACb5Ha.js";import{aA as J,P as K}from"./ui-vendor-D9aA433m.js";import"./index-DP7nhEPh.js";import"./charts-vendor-PiKWrtPe.js";import"./editor-vendor-CufumsHQ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./spline-vendor-C3Tmx0e7.js";import"./index-COuCnG4I.js";import"./ParentSize.vue_vue_type_script_setup_true_lang-CHreb_9N.js";const{required:v,length:Q}=B,Z=[{type:"input",value:"CHENY",prop:"username",placeholder:"请输入用户名",rules:[v("用户名")],attrs:{clearable:!0,prefixIcon:"user"}},{type:"input",value:"123456",placeholder:"请输入密码",prop:"password",rules:[v("密码"),Q("密码",6,15)],attrs:{type:"password",showPasswordOn:"mousedown",clearable:!0}}],X={class:"login-container bg-[#181818]"},ee={class:"spline-background"},te={class:"login-wrapper"},ve=F({__name:"index",setup(ae){const y=O(),w=I(),p=J(),{loading:k,createSubmit:S}=z(),m=l(!0),g=l(),o=l(!1),s=l(null),r={timeSlots:[{hours:[6,12],greeting:"早上好",emoji:"🌅"},{hours:[12,14],greeting:"中午好",emoji:"☀️"},{hours:[14,18],greeting:"下午好",emoji:"🌤️"},{hours:[18,22],greeting:"晚上好",emoji:"🌆"},{hours:[22,24,0,6],greeting:"夜深了",emoji:"🌙"}],templates:["{greeting}，{username}！欢迎回来～ {emoji}","{emoji} {greeting}，{username}！开始今天的工作吧","欢迎回来，{username}！{greeting} {emoji}","{greeting}，{username}！准备好了吗？ {emoji}"]},j=()=>{const e=new Date().getHours();return r.timeSlots.find(({hours:a})=>a.length===2?e>=a[0]&&e<a[1]:a.includes(e))||r.timeSlots[0]},b=e=>{const t=e.data?.username||"CHENY",{greeting:a,emoji:u}=j();return r.templates[Math.floor(Math.random()*r.templates.length)].replace("{greeting}",a).replace("{username}",t).replace("{emoji}",u)},E=()=>{},M=()=>{m.value=!1},N=e=>{o.value=!0,s.value=e,p.success("人机验证成功")},x=()=>{o.value=!1,s.value=null},H=e=>{o.value=e,e||(s.value=null)},d=()=>{o.value=!1,s.value=null,g.value?.reset()},R=e=>{if(!o.value||!s.value){p.error("请先完成人机验证");return}e.model={...e.model,captcha:{token:s.value.token,timestamp:s.value.timestamp,type:"puzzle-captcha"}},T(e)},T=S(U,{successMsg:"登录成功",meta:b,errorMsg:"账号或密码错误",onSuccess:async e=>{try{const{data:{token:t}}=e;w.handleLoginSuccess(t),await Y(),y.push("/home")}catch{d()}},globalErrorHandler:e=>{d()}});return(e,t)=>{const a=K,u=D;return C(),V("div",X,[t[1]||(t[1]=i("div",{class:"login-logo"},null,-1)),n(m)?(C(),P(q,{key:0,text:"Hey！伙计，欢迎来到泰拉瑞亚面板。",duration:2e3,delay:300,"pause-after":1e3,onComplete:E,onHidden:M})):L("",!0),i("div",ee,[c(A,{scene:"https://prod.spline.design/kZDDjO5HuC9GJUM2/scene.splinecode"})]),i("div",te,[t[0]||(t[0]=i("h3",{class:"login-title"},f("泰拉瑞亚服务器管理面板"),-1)),c(u,{class:"login-form",options:n(Z)},{action:_(h=>[c(a,{class:"login-btn",type:"primary",loading:n(k),disabled:!n(o),onClick:$(oe=>R(h),["prevent"])},{default:_(()=>[G(f(n(o)?"登录":"请先点击下方图标完成人机验证"),1)]),_:1},8,["loading","disabled","onClick"])]),_:1},8,["options"]),c(W,{ref_key:"captchaRef",ref:g,class:"login-captcha","trigger-text":"",theme:"dark",onSuccess:N,onFail:x,onChange:H},null,512)])])}}});export{ve as default};
