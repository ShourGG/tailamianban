import{u as C}from"./index-DMzwf6y-.js";import{n as I}from"./d_menu-DC74b3rG.js";import{k as R,az as A,aE as T,r as x,c as K,w as U,o as b,n as S,_ as N,R as j,K as v}from"./vue-vendor-Bom1XEVO.js";import{aC as q}from"./ui-vendor-D9aA433m.js";const J=R({__name:"index",props:{data:{},mode:{default:"vertical"},collapsed:{type:Boolean,default:!1},collapsedWidth:{default:64},collapsedIconSize:{default:22},inverted:{type:Boolean,default:!1}},setup(c){const m=A(),g=T(),z=C(),E={placement:"right-start",trigger:"hover",arrowStyle:{color:"var(--n-color)"}},l=c,i=x(null),k=K(()=>m.path),p=x([]),B=K(()=>I(l.data)),$=K(()=>z.themeOverrides.Menu||{}),f=t=>t.reduce((n,e)=>[...n,e,...e.children?f(e.children):[]],[]),M=t=>{const n=f(l.data).find(e=>{const o=e.path||"/home";return(o.startsWith("/")?o:`/${o}`)===t});n?.path&&g.push(n.path)},y=(t,n,e=[])=>{for(const o of t)if(o.children?.length){const r=[...e];if(o.path){const s=o.path.startsWith("/")?o.path:`/${o.path}`;r.push(s)}if(o.children.some(s=>(s.path||"")===n||s.children?.length&&y(s.children,n,r).length>0))return r;const a=y(o.children,n,r);if(a.length>0)return a}return[]},O=()=>{const t=m.path.split("/").filter(Boolean),n=new Set;let e="";t.forEach(r=>{e+=`/${r}`;const h=f(l.data).find(a=>(a.path||"")===e);if(h){const a=h.path||"",s=a.startsWith("/")?a:`/${a}`;n.add(s)}}),y(l.data,m.path).forEach(r=>n.add(r)),p.value=Array.from(n)},W=t=>p.value=t,_=()=>{i.value&&i.value.showOption(k.value)};return U(()=>m.path,t=>{const n=t.split("/").filter(Boolean),e=new Set;let o="";n.forEach(d=>{o+=`/${d}`;const P=f(l.data).find(u=>(u.path||"")===o);if(P){const u=P.path||"",w=u.startsWith("/")?u:`/${u}`;e.add(w)}}),y(l.data,t).forEach(d=>e.add(d));const h=t.split("/").filter(Boolean);let a="";h.forEach(d=>{a+=`/${d}`,e.add(a)});const s=new Set([...p.value,...Array.from(e)]);p.value=Array.from(s),S(()=>{i.value&&i.value.showOption(t)})},{immediate:!0}),b(()=>{S(()=>{O(),_()})}),(t,n)=>{const e=q;return j(),N(e,{ref_key:"menuRef",ref:i,options:v(B),"expanded-keys":v(p),value:v(k),mode:c.mode,collapsed:c.collapsed,"collapsed-width":c.collapsedWidth,"collapsed-icon-size":c.collapsedIconSize,inverted:c.inverted,"theme-overrides":v($),"dropdown-props":E,indent:24,"root-indent":16,style:{"--primary-color":"var(--n-color-primary)","--n-item-color-active":"var(--primary-color)"},"onUpdate:value":M,"onUpdate:expandedKeys":W},null,8,["options","expanded-keys","value","mode","collapsed","collapsed-width","collapsed-icon-size","inverted","theme-overrides"])}}});export{J as _};
