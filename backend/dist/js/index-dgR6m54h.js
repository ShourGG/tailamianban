import{I as _}from"./iconify-W0kOH8CK.js";import{g as T,b as V}from"./terraria-CQC2iL6g.js";import{aA as z,ag as A,P as D,L as U,an as F,O as M}from"./ui-vendor-D9aA433m.js";import{k as O,r as u,c as j,o as E,Q as l,R as r,V as s,S as o,j as y,K as v,U as g,$ as f,F as K,N as P,I as Q}from"./vue-vendor-Bom1XEVO.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-DMzwf6y-.js";import"./spline-vendor-C3Tmx0e7.js";import"./charts-vendor-PiKWrtPe.js";import"./editor-vendor-CufumsHQ.js";const q={class:"page-container"},G={class:"page-header"},H={class:"page-title"},J={class:"server-selector"},W={class:"logs-container"},X={key:0,class:"loading-placeholder"},Y={key:1,class:"empty-placeholder"},Z={key:2,class:"logs-list"},ee={class:"log-time"},te={class:"log-level"},se={class:"log-message"},oe=O({name:"TerrariaServerLogs",__name:"index",setup(ae){const p=z(),i=u(!1),a=u(null),c=u([]),d=u([]),x=j(()=>d.value.map(e=>({label:`${e.name} (ID: ${e.id})`,value:e.id}))),S=async()=>{try{const e=await T();e.code==="200"&&(d.value=e.data,d.value.length===1&&(a.value=d.value[0].id,await m()))}catch{p.error("获取服务器列表失败")}},m=async()=>{if(a.value){i.value=!0;try{const e=await V(a.value);e.code==="200"?c.value=e.data:p.error(e.message||"获取日志失败")}catch{p.error("获取日志失败")}finally{i.value=!1}}},N=()=>{m()},L=()=>{c.value=[],a.value&&m()},k=e=>new Date(e).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),w=e=>{switch(e){case"error":return"error";case"warn":return"warning";case"info":return"info";case"debug":return"default";default:return"default"}};return E(()=>{S()}),(e,t)=>{const C=A,b=D,h=U,B=F,I=M;return r(),l("div",q,[s("div",G,[s("h2",H,[o(v(_),{icon:"mdi:text-box-multiple",class:"title-icon"}),t[1]||(t[1]=y(" 服务器日志 ",-1))]),t[2]||(t[2]=s("p",{class:"page-desc"},"实时查看和管理服务器运行日志",-1))]),o(h,{class:"filter-card",title:"服务器选择"},{default:g(()=>[s("div",J,[o(C,{value:a.value,"onUpdate:value":[t[0]||(t[0]=n=>a.value=n),L],options:x.value,placeholder:"选择要查看日志的服务器"},null,8,["value","options"]),o(b,{type:"primary",onClick:N,loading:i.value},{default:g(()=>[o(v(_),{icon:"mdi:refresh"}),t[3]||(t[3]=y(" 刷新日志 ",-1))]),_:1},8,["loading"])])]),_:1}),o(h,{class:"logs-card",title:"服务器日志"},{default:g(()=>[s("div",W,[i.value?(r(),l("div",X,[o(B,{size:"large"}),t[4]||(t[4]=s("p",null,"正在加载日志...",-1))])):c.value.length?(r(),l("div",Z,[(r(!0),l(K,null,P(c.value,(n,$)=>(r(),l("div",{key:$,class:Q(["log-entry",`log-${n.level}`])},[s("div",ee,f(k(n.timestamp)),1),s("div",te,[o(I,{type:w(n.level),value:n.level.toUpperCase()},null,8,["type","value"])]),s("div",se,f(n.message),1)],2))),128))])):(r(),l("div",Y,[o(v(_),{icon:"mdi:text-box-outline",class:"empty-icon"}),t[5]||(t[5]=s("h3",null,"暂无日志",-1)),s("p",null,f(a.value?"该服务器暂无日志记录":"请先选择一个服务器"),1)]))])]),_:1})])}}}),_e=R(oe,[["__scopeId","data-v-462b40db"]]);export{_e as default};
