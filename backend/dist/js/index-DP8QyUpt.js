import{I as L}from"./iconify-W0kOH8CK.js";import{u as R}from"./index-Chx56wke.js";import{k as D,r as b,c,w as K,o as N,a as x,Q as f,R as s,K as a,M as m,I as w,_ as C,Y as I,s as Y,a7 as G,V as $,n as X}from"./vue-vendor-Bom1XEVO.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Q=["title","aria-label","role","tabindex"],T=["width","height","viewBox","fill"],U=["d","fill"],q=["src","alt","width","height"],A=["title"],F=D({__name:"index",props:{name:{default:void 0},type:{default:"iconify"},color:{default:"currentColor"},size:{default:18},svgPath:{default:""},viewBox:{default:"0 0 24 24"},alt:{default:""},clickable:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},fallbackIcon:{default:""},title:{default:""},ariaLabel:{default:""},customClass:{default:""},rotate:{default:0},flip:{default:void 0},componentProps:{default:()=>({})}},emits:["click","error","load"],setup(t,{expose:B,emit:E}){const e=t,d=E,z=b(),i=b(!1),u=b(""),P=c(()=>({fontSize:typeof e.size=="number"?`${e.size}px`:e.size,color:e.color,cursor:e.clickable?"pointer":"default"})),r=c(()=>{const l={display:"inline-flex",justifyContent:"center",alignItems:"center",width:typeof e.size=="number"?`${e.size}px`:e.size,height:typeof e.size=="number"?`${e.size}px`:e.size};if(e.rotate&&(l.transform=`rotate(${e.rotate}deg)`),e.flip){const n=e.flip==="horizontal"||e.flip==="both"?-1:1,k=e.flip==="vertical"||e.flip==="both"?-1:1;l.transform=`${l.transform||""} scaleX(${n}) scaleY(${k})`.trim()}return l}),y=c(()=>typeof e.name=="string"?e.name:e.name&&e.name.__name?e.name.__name:e.name&&e.name.name?e.name.name:"Component Icon"),S=c(()=>[e.customClass,{"c-icon__rotatable":e.rotate!==0,"c-icon__flippable":!!e.flip}]),g=c(()=>e.type!=="component"||!e.name?null:e.name),o=(l,n,k)=>{i.value=!0,u.value=n,d("error",l,k),e.fallbackIcon&&i.value},p=l=>{!e.clickable||e.loading||d("click",l)},M=l=>{!e.clickable||e.loading||(l.key==="Enter"||l.key===" ")&&(l.preventDefault(),d("click",l))},V=()=>{d("load")},h=c(()=>e.type!=="image"||typeof e.name!="string"?"":e.name.startsWith("http://")||e.name.startsWith("https://")||e.name.startsWith("//")||e.name.startsWith("/")?e.name:R(e.name)),W={iconify:()=>{e.name.includes(":")},unocss:()=>{typeof e.name!="string"||e.name.startsWith("i-")},component:()=>!g.value&&"无法解析组件",svg:()=>!e.svgPath&&"SVG路径不能为空",image:()=>!h.value&&"图片路径无效"},v=()=>{if(i.value=!1,u.value="",!e.name)return o("validation","图标名称不能为空");const l=W[e.type];if(!l)return o("type","不支持的图标类型");const n=l();n&&o(e.type,n)};return K(()=>[e.name,e.type,e.svgPath],()=>{X(v)},{immediate:!0}),N(()=>{v(),i.value||d("load")}),B({validate:v,hasError:x(i),errorMessage:x(u),el:z}),(l,n)=>(s(),f("div",{ref_key:"iconRef",ref:z,class:w(["c-icon",[`c-icon--${t.type}`,{"c-icon--clickable":t.clickable,"c-icon--loading":t.loading,"c-icon--error":a(i)}]]),style:m(a(P)),title:t.title||a(y),"aria-label":t.ariaLabel||a(y),role:t.clickable?"button":"img",tabindex:t.clickable?0:-1,onClick:p,onKeydown:M},[(t.type==="iconify"||!t.type)&&!a(i)&&typeof t.name=="string"?(s(),C(a(L),{key:0,icon:t.name,width:t.size,height:t.size,color:t.color,style:m(a(r)),onError:n[0]||(n[0]=()=>o("iconify","Iconify图标加载失败"))},null,8,["icon","width","height","color","style"])):t.type==="unocss"&&!a(i)&&typeof t.name=="string"?(s(),f("div",{key:1,class:w([t.name,a(S)]),style:m(a(r)),onError:n[1]||(n[1]=()=>o("unocss","UnoCSS图标渲染失败"))},null,38)):t.type==="component"&&a(g)&&!a(i)?(s(),C(G(a(g)),Y({key:2,style:a(r)},t.componentProps,{onError:n[2]||(n[2]=()=>o("component","组件图标渲染失败"))}),null,16,["style"])):t.type==="svg"&&t.svgPath&&!a(i)?(s(),f("svg",{key:3,width:t.size,height:t.size,viewBox:t.viewBox,style:m(a(r)),fill:t.color,onError:n[3]||(n[3]=()=>o("svg","SVG图标渲染失败"))},[$("path",{d:t.svgPath,fill:t.color},null,8,U)],44,T)):t.type==="image"&&a(h)&&!a(i)?(s(),f("img",{key:4,src:a(h),alt:t.alt||a(y),width:t.size,height:t.size,style:{display:"inline-block","vertical-align":"middle"},onError:n[4]||(n[4]=()=>o("image","图片图标加载失败")),onLoad:V},null,40,q)):I("",!0),t.loading&&!a(i)?(s(),f("div",{key:5,class:"c-icon__loading",style:m(a(r))},[...n[5]||(n[5]=[$("div",{class:"c-icon__spinner"},null,-1)])],4)):a(i)?(s(),f("div",{key:6,class:"c-icon__error",style:m(a(r)),title:`图标解析失败: ${a(y)} (${a(u)})${t.fallbackIcon?` (fallback: ${t.fallbackIcon})`:""}`}," ⚠️ ",12,A)):I("",!0)],46,Q))}}),_=j(F,[["__scopeId","data-v-209d6171"]]);export{_ as default};
