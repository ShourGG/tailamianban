import{I as U}from"./iconify-W0kOH8CK.js";import{k as V,aE as I,r as f,o as W,Q as h,R as k,V as s,S as e,j as u,U as a,$ as r,F as T,N as j}from"./vue-vendor-Bom1XEVO.js";import{aA as L,L as R,S as $,M as A,U as E,P as F}from"./ui-vendor-lRdd6BJd.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";const z={class:"dashboard-overview"},O={class:"page-header"},Q={class:"page-title"},G={class:"stats-grid"},H={class:"stat-content"},J={class:"stat-icon running"},K={class:"stat-info"},X={class:"stat-value"},Y={class:"stat-content"},Z={class:"stat-icon total"},ss={class:"stat-info"},ts={class:"stat-value"},es={class:"stat-content"},os={class:"stat-icon players"},as={class:"stat-info"},ns={class:"stat-value"},rs={class:"stat-content"},ls={class:"stat-icon worlds"},is={class:"stat-info"},cs={class:"stat-value"},ds={class:"content-grid"},us={class:"server-list"},ps={class:"server-basic"},ms={class:"server-name"},_s={class:"server-metrics"},vs={class:"metric"},ys={class:"metric"},gs={class:"metric"},fs={class:"resource-item"},hs={class:"resource-item"},ks={class:"resource-item"},ws={class:"resource-item"},Ps={class:"network-info"},Ss=V({name:"DashboardOverview",__name:"index",setup(bs){const _=I(),S=L(),m=f({runningServers:0,totalServers:0,onlinePlayers:0,totalWorlds:0}),v=f([]),i=f({cpu:0,memory:0,disk:0,networkUp:0,networkDown:0}),w=async()=>{try{const t=await(await fetch("/api/monitoring/system")).json();t.code==="0"&&(i.value={cpu:Math.round(t.data.cpu*100)/100,memory:Math.round(t.data.memory*100)/100,disk:t.data.disk,networkUp:Math.round(t.data.network*100)/100,networkDown:Math.round(t.data.network*1.5*100)/100})}catch{}},P=async()=>{try{const t=await(await fetch("/api/servers")).json();if(t.code==="0"){const o=t.data||[];v.value=o.map((n,d)=>({id:n.id||d+1,name:n.name||`服务器 ${d+1}`,status:n.status||"stopped",players:n.players||0,maxPlayers:n.maxPlayers||8,memory:n.memory||0,cpu:n.cpu||0}));const c=o.filter(n=>n.status==="running").length,g=o.reduce((n,d)=>n+(d.players||0),0);m.value={runningServers:c,totalServers:o.length,onlinePlayers:g,totalWorlds:o.length}}}catch{v.value=[{id:1,name:"主服务器",status:"running",players:3,maxPlayers:8,memory:512,cpu:25},{id:2,name:"测试服务器",status:"stopped",players:0,maxPlayers:4,memory:0,cpu:0},{id:3,name:"PVP服务器",status:"running",players:2,maxPlayers:16,memory:768,cpu:45}],m.value={runningServers:2,totalServers:3,onlinePlayers:5,totalWorlds:8}}},b=l=>({running:"success",stopped:"default",error:"error"})[l]||"default",x=l=>({running:"运行中",stopped:"已停止",error:"错误"})[l]||"未知",y=l=>l<50?"#18a058":l<80?"#f0a020":"#d03050",M=()=>{_.push("/server/create")},C=()=>{_.push("/world/upload")},B=()=>{S.info("开始备份所有世界...")},N=()=>{_.push("/server/logs")};return W(async()=>{await Promise.all([w(),P()]),setInterval(()=>{w(),P()},3e4)}),(l,t)=>{const o=U,c=R,g=$,n=A,d=F,D=E;return k(),h("div",z,[s("div",O,[s("h2",Q,[e(o,{icon:"mdi:view-dashboard",class:"title-icon"}),t[0]||(t[0]=u(" 服务器概览 ",-1))]),t[1]||(t[1]=s("p",{class:"page-desc"},"泰拉瑞亚服务器运行状态总览",-1))]),s("div",G,[e(c,{class:"stat-card"},{default:a(()=>[s("div",H,[s("div",J,[e(o,{icon:"mdi:server"})]),s("div",K,[s("div",X,r(m.value.runningServers),1),t[2]||(t[2]=s("div",{class:"stat-label"},"运行中服务器",-1))])])]),_:1}),e(c,{class:"stat-card"},{default:a(()=>[s("div",Y,[s("div",Z,[e(o,{icon:"mdi:server-network"})]),s("div",ss,[s("div",ts,r(m.value.totalServers),1),t[3]||(t[3]=s("div",{class:"stat-label"},"总服务器数",-1))])])]),_:1}),e(c,{class:"stat-card"},{default:a(()=>[s("div",es,[s("div",os,[e(o,{icon:"mdi:account-group"})]),s("div",as,[s("div",ns,r(m.value.onlinePlayers),1),t[4]||(t[4]=s("div",{class:"stat-label"},"在线玩家",-1))])])]),_:1}),e(c,{class:"stat-card"},{default:a(()=>[s("div",rs,[s("div",ls,[e(o,{icon:"mdi:earth"})]),s("div",is,[s("div",cs,r(m.value.totalWorlds),1),t[5]||(t[5]=s("div",{class:"stat-label"},"世界总数",-1))])])]),_:1})]),s("div",ds,[e(c,{title:"服务器状态",class:"server-status-card"},{default:a(()=>[s("div",us,[(k(!0),h(T,null,j(v.value,p=>(k(),h("div",{key:p.id,class:"server-item"},[s("div",ps,[s("div",ms,r(p.name),1),e(g,{type:b(p.status),size:"small",round:""},{default:a(()=>[u(r(x(p.status)),1)]),_:2},1032,["type"])]),s("div",_s,[s("span",vs,[e(o,{icon:"mdi:account"}),u(" "+r(p.players)+"/"+r(p.maxPlayers),1)]),s("span",ys,[e(o,{icon:"mdi:memory"}),u(" "+r(p.memory)+"MB ",1)]),s("span",gs,[e(o,{icon:"mdi:speedometer"}),u(" "+r(p.cpu)+"% ",1)])])]))),128))])]),_:1}),e(c,{title:"系统资源",class:"system-resources-card"},{default:a(()=>[s("div",fs,[t[6]||(t[6]=s("div",{class:"resource-label"},"CPU 使用率",-1)),e(n,{type:"line",percentage:i.value.cpu,color:y(i.value.cpu)},null,8,["percentage","color"])]),s("div",hs,[t[7]||(t[7]=s("div",{class:"resource-label"},"内存使用率",-1)),e(n,{type:"line",percentage:i.value.memory,color:y(i.value.memory)},null,8,["percentage","color"])]),s("div",ks,[t[8]||(t[8]=s("div",{class:"resource-label"},"磁盘使用率",-1)),e(n,{type:"line",percentage:i.value.disk,color:y(i.value.disk)},null,8,["percentage","color"])]),s("div",ws,[t[9]||(t[9]=s("div",{class:"resource-label"},"网络流量",-1)),s("div",Ps,[s("span",null,"↑ "+r(i.value.networkUp)+" MB/s",1),s("span",null,"↓ "+r(i.value.networkDown)+" MB/s",1)])])]),_:1})]),e(c,{title:"快速操作",class:"quick-actions-card"},{default:a(()=>[e(D,null,{default:a(()=>[e(d,{type:"primary",onClick:M},{icon:a(()=>[e(o,{icon:"mdi:server-plus"})]),default:a(()=>[t[10]||(t[10]=u(" 创建服务器 ",-1))]),_:1}),e(d,{onClick:C},{icon:a(()=>[e(o,{icon:"mdi:cloud-upload"})]),default:a(()=>[t[11]||(t[11]=u(" 上传世界 ",-1))]),_:1}),e(d,{onClick:B},{icon:a(()=>[e(o,{icon:"mdi:backup-restore"})]),default:a(()=>[t[12]||(t[12]=u(" 备份所有世界 ",-1))]),_:1}),e(d,{onClick:N},{icon:a(()=>[e(o,{icon:"mdi:text-box-multiple"})]),default:a(()=>[t[13]||(t[13]=u(" 查看日志 ",-1))]),_:1})]),_:1})]),_:1})])}}}),Ns=q(Ss,[["__scopeId","data-v-cedb6137"]]);export{Ns as default};
