const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/charts-vendor-CzveNv9z.js","js/ui-vendor-C2DiPTQI.js","js/vue-vendor-B-HGZVTd.js"])))=>i.map(i=>d[i]);
import{_ as I}from"./spline-vendor-CTguZ3V6.js";import $ from"./index-B9RTUJIf.js";import{H as A}from"./ui-vendor-C2DiPTQI.js";import{k as O,r as p,c as M,w as x,o as N,n as u,E as V,Q as L,R as C,Y as F,V as b,$ as z,_ as G,U as _,j,K as y,S as P,M as U}from"./vue-vendor-B-HGZVTd.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./iconify-fz3UakNh.js";const a={headerStyle:{borderColor:"#e1e4e8",borderLineWidth:1,fontSize:14,fontWeight:"bold",bgColor:"#EEF1F5"},bodyStyle:{borderColor:"#e1e4e8",borderLineWidth:[1,0,1,0],fontSize:13,bgColor:"#FFF"}},B={basic:{overscrollBehavior:"none",headerRowHeight:40,rowHeight:40,taskListTable:{columns:[{field:"title",title:"任务名称",width:220,tree:!0},{field:"start",title:"开始时间",width:120},{field:"end",title:"结束时间",width:120},{field:"progress",title:"进度",width:80}],tableWidth:420,minTableWidth:300,theme:a},frame:{outerFrameStyle:{borderLineWidth:1,borderColor:"#e1e4e8",cornerRadius:6},verticalSplitLineMoveable:!0,verticalSplitLine:{lineColor:"#e1e4e8",lineWidth:2}},grid:{weekendBackgroundColor:"#f8f8f8",verticalLine:{lineWidth:1,lineColor:"#e1e4e8"},horizontalLine:{lineWidth:1,lineColor:"#e1e4e8"}},taskBar:{startDateField:"start",endDateField:"end",progressField:"progress",moveable:!0,resizable:!0,labelText:"{title}",labelTextStyle:{fontSize:12,textAlign:"left"},barStyle:{width:18,barColor:"#1890ff",completedBarColor:"#52c41a",cornerRadius:4,borderLineWidth:0},milestoneStyle:{borderColor:"#fa8c16",borderLineWidth:1,fillColor:"#ffd666",width:12}},timelineHeader:{backgroundColor:"#EEF1F5",colWidth:60,horizontalLine:{lineWidth:1,lineColor:"#e1e4e8"},verticalLine:{lineWidth:1,lineColor:"#e1e4e8"},scales:[{unit:"week",step:1,format:e=>`第${e.dateIndex}周`,style:{fontSize:12,fontWeight:"bold"}},{unit:"day",step:1,format:e=>`${e.dateIndex}`,style:{fontSize:11}}]},scrollStyle:{scrollRailColor:"rgba(246,246,246,0.5)",visible:"scrolling",width:6,scrollSliderCornerRadius:2,scrollSliderColor:"#1890ff"}},project:{overscrollBehavior:"none",headerRowHeight:40,rowHeight:40,taskListTable:{columns:[{field:"title",title:"任务名称",width:200,tree:!0,editor:"input"},{field:"start",title:"开始时间",width:120,editor:"date-input"},{field:"end",title:"结束时间",width:120,editor:"date-input"},{field:"priority",title:"优先级",width:80,editor:"input"},{field:"progress",title:"进度%",width:80,editor:"input"}],tableWidth:480,minTableWidth:350,maxTableWidth:800,theme:a,hierarchyExpandLevel:2},frame:{outerFrameStyle:{borderLineWidth:2,borderColor:"#e1e4e8",cornerRadius:8},verticalSplitLineMoveable:!0,verticalSplitLine:{lineColor:"#e1e4e8",lineWidth:3}},grid:{weekendBackgroundColor:"#f8f8f8",verticalLine:{lineWidth:1,lineColor:"#e1e4e8"},horizontalLine:{lineWidth:1,lineColor:"#e1e4e8"}},taskBar:{startDateField:"start",endDateField:"end",progressField:"progress",moveable:!0,resizable:!0,hoverBarStyle:{barOverlayColor:"rgba(24, 144, 255, 0.3)"},labelText:"{title} {progress}%",labelTextStyle:{fontSize:12,textAlign:"left",textOverflow:"ellipsis"},barStyle:{width:20,barColor:"#1890ff",completedBarColor:"#52c41a",cornerRadius:6,borderLineWidth:0}},timelineHeader:{backgroundColor:"#EEF1F5",colWidth:60,horizontalLine:{lineWidth:1,lineColor:"#e1e4e8"},verticalLine:{lineWidth:1,lineColor:"#e1e4e8"},scales:[{unit:"week",step:1,startOfWeek:"monday",format:e=>`第${e.dateIndex}周`,style:{fontSize:13,fontWeight:"bold",textAlign:"center"}},{unit:"day",step:1,format:e=>`${e.dateIndex}`,style:{fontSize:11,textAlign:"center"}}]},rowSeriesNumber:{title:"序号",dragOrder:!0,headerStyle:{bgColor:"#EEF1F5",borderColor:"#e1e4e8"},style:{borderColor:"#e1e4e8"}},scrollStyle:{scrollRailColor:"rgba(246,246,246,0.5)",visible:"scrolling",width:6,scrollSliderCornerRadius:2,scrollSliderColor:"#1890ff"}},timeline:{overscrollBehavior:"none",headerRowHeight:45,rowHeight:40,taskListTable:{columns:[{field:"title",title:"事件名称",width:250,tree:!0},{field:"start",title:"时间",width:150}],tableWidth:400,minTableWidth:300,theme:{headerStyle:{...a.headerStyle,bgColor:"#f0f2f5"},bodyStyle:a.bodyStyle}},frame:{outerFrameStyle:{borderLineWidth:1,borderColor:"#d9d9d9",cornerRadius:4},verticalSplitLineMoveable:!0},grid:{verticalLine:{lineWidth:1,lineColor:"#f0f0f0"},horizontalLine:{lineWidth:1,lineColor:"#f0f0f0"}},taskBar:{startDateField:"start",endDateField:"end",progressField:"progress",moveable:!0,resizable:!0,labelText:"{title}",labelTextStyle:{fontSize:12,textAlign:"left"},barStyle:{width:22,barColor:"#722ed1",completedBarColor:"#b37feb",cornerRadius:8,borderLineWidth:0}},timelineHeader:{backgroundColor:"#f0f2f5",colWidth:60,scales:[{unit:"month",step:1,format:e=>`${e.dateIndex}月`,style:{fontSize:13,fontWeight:"bold"}},{unit:"day",step:1,format:e=>`${e.dateIndex}`,style:{fontSize:11}}]},scrollStyle:{scrollRailColor:"rgba(246,246,246,0.5)",visible:"scrolling",width:6,scrollSliderCornerRadius:2,scrollSliderColor:"#1890ff"}},milestone:{overscrollBehavior:"none",headerRowHeight:40,rowHeight:38,taskListTable:{columns:[{field:"title",title:"里程碑",width:200,tree:!0},{field:"start",title:"目标日期",width:120},{field:"priority",title:"重要性",width:100}],tableWidth:400,minTableWidth:300,theme:{headerStyle:{...a.headerStyle,borderColor:"#ffa940",bgColor:"#fff7e6"},bodyStyle:{...a.bodyStyle,borderColor:"#ffa940"}}},frame:{outerFrameStyle:{borderLineWidth:2,borderColor:"#ffa940",cornerRadius:6},verticalSplitLineMoveable:!0},grid:{verticalLine:{lineWidth:1,lineColor:"#ffe7ba"},horizontalLine:{lineWidth:1,lineColor:"#ffe7ba"}},taskBar:{startDateField:"start",endDateField:"start",labelText:"{title}",labelTextStyle:{fontSize:12,fontWeight:"bold"},barStyle:{width:0,barColor:"transparent"},milestoneStyle:{borderColor:"#fa8c16",borderLineWidth:2,fillColor:"#ffd666",width:16}},timelineHeader:{backgroundColor:"#fff7e6",colWidth:80,scales:[{unit:"month",step:1,format:e=>`${e.dateIndex}月`,style:{fontSize:13,fontWeight:"bold"}},{unit:"week",step:1,format:e=>`第${e.dateIndex}周`,style:{fontSize:11}}]},scrollStyle:{scrollRailColor:"rgba(246,246,246,0.5)",visible:"scrolling",width:6,scrollSliderCornerRadius:2,scrollSliderColor:"#1890ff"}},official:{overscrollBehavior:"none",headerRowHeight:40,rowHeight:40,taskListTable:{columns:[{field:"title",title:"title",width:180,sort:!0,tree:!0,editor:"input"},{field:"start",title:"start",width:120,sort:!0,editor:"date-input"},{field:"end",title:"end",width:120,sort:!0,editor:"date-input"},{field:"priority",title:"priority",width:80,sort:!0,editor:"input"},{field:"progress",title:"progress",width:80,sort:!0,editor:"input"}],tableWidth:460,minTableWidth:350,maxTableWidth:800,theme:{headerStyle:{...a.headerStyle,fontSize:18,color:"red"},bodyStyle:{...a.bodyStyle,fontSize:16,color:"#4D4D4D"}},hierarchyExpandLevel:2},frame:{outerFrameStyle:{borderLineWidth:2,borderColor:"#e1e4e8",cornerRadius:8},verticalSplitLineMoveable:!0,verticalSplitLine:{lineColor:"#e1e4e8",lineWidth:3},horizontalSplitLine:{lineColor:"#e1e4e8",lineWidth:3}},grid:{weekendBackgroundColor:"#f8f8f8",verticalLine:{lineWidth:1,lineColor:"#e1e4e8"},horizontalLine:{lineWidth:1,lineColor:"#e1e4e8"}},taskBar:{startDateField:"start",endDateField:"end",progressField:"progress",moveable:!0,resizable:!0,hoverBarStyle:{barOverlayColor:"rgba(99, 144, 0, 0.4)"},labelText:"{title} {progress}%",labelTextStyle:{fontSize:16,textAlign:"left",textOverflow:"ellipsis"},barStyle:{width:20,barColor:"#ee8800",completedBarColor:"#91e8e0",cornerRadius:8,borderLineWidth:1,borderColor:"black"},milestoneStyle:{borderColor:"red",borderLineWidth:1,fillColor:"green",width:15}},timelineHeader:{backgroundColor:"#EEF1F5",colWidth:60,horizontalLine:{lineWidth:1,lineColor:"#e1e4e8"},verticalLine:{lineWidth:1,lineColor:"#e1e4e8"},scales:[{unit:"week",step:1,startOfWeek:"sunday",format:e=>`Week ${e.dateIndex}`,style:{fontSize:20,fontWeight:"bold",color:"white",strokeColor:"black",textAlign:"right",textBaseline:"bottom",textStick:!0}},{unit:"day",step:1,format:e=>e.dateIndex.toString(),style:{fontSize:20,fontWeight:"bold",color:"white",strokeColor:"black",textAlign:"right",textBaseline:"bottom"}}]},markLine:[{date:"2024-07-28",style:{lineWidth:1,lineColor:"blue",lineDash:[8,4]}},{date:"2024-08-17",style:{lineWidth:2,lineColor:"red",lineDash:[8,4]}}],rowSeriesNumber:{title:"行号",dragOrder:!0,headerStyle:{bgColor:"#EEF1F5",borderColor:"#e1e4e8"},style:{borderColor:"#e1e4e8"}},scrollStyle:{scrollRailColor:"rgba(246,246,246,0.5)",visible:"scrolling",width:6,scrollSliderCornerRadius:2,scrollSliderColor:"#1890ff"}}},K={class:"c-vtable-gantt-wrapper"},Q={key:0,class:"gantt-toolbar"},Y={class:"toolbar-left"},J={class:"gantt-title"},X={class:"toolbar-right"},Z=O({__name:"index",props:{data:{default:()=>[]},options:{default:()=>({})},preset:{default:"basic"},height:{default:"600px"},title:{default:""},showToolbar:{type:Boolean,default:!0},showFullscreenButton:{type:Boolean,default:!0}},emits:["ganttCreated","taskClick","taskChange"],setup(e,{expose:T,emit:R}){const i=e,m=R,c=p(),l=p(),n=p(!1),E=M(()=>typeof i.height=="number"?`${i.height}px`:i.height),v=(t,r)=>{const d={...t};for(const o in r)r[o]&&typeof r[o]=="object"&&!Array.isArray(r[o])?d[o]=v(t[o]||{},r[o]):d[o]=r[o];return d},g=t=>t.map(r=>({...r,title:r.title||`任务${r.id}`,children:r.children?g(r.children):void 0})),S=async()=>{if(c.value)try{const{Gantt:t}=await I(async()=>{const{Gantt:h}=await import("./charts-vendor-CzveNv9z.js").then(s=>s.i);return{Gantt:h}},__vite__mapDeps([0,1,2])),r=B[i.preset]||B.basic,d=v(r,i.options),o=g(i.data||[]);l.value&&l.value.release(),l.value=new t(c.value,{...d,records:o}),l.value.on("click_cell",h=>{const{record:s,event:f}=h||{};s&&m("taskClick",s,f)}),l.value.on("change_data",h=>{const{record:s,changes:f}=h||{};s&&f&&m("taskChange",s,f)}),m("ganttCreated",l.value)}catch{}},w=async()=>{if(c.value)try{document.fullscreenElement?(await document.exitFullscreen(),n.value=!1):(await c.value.requestFullscreen(),n.value=!0),setTimeout(()=>l.value?.resize?.(),100)}catch{n.value=!n.value,u(()=>l.value?.resize?.())}},W=()=>{n.value=!!document.fullscreenElement,u(()=>l.value?.resize?.())},k=t=>{if(l.value&&t)try{const r=g(t);l.value.setRecords(r)}catch{}},D=t=>{if(l.value&&t)try{l.value.updateOption(t)}catch{}},H=()=>{if(l.value)try{l.value.release()}catch{}finally{l.value=void 0}};return x(()=>i.data,t=>{t&&l.value&&k(t)},{deep:!0}),x(()=>[i.options,i.preset],()=>{u(()=>{S()})},{deep:!0}),N(()=>{document.addEventListener("fullscreenchange",W),u(()=>{setTimeout(()=>{S()},100)})}),V(()=>{document.removeEventListener("fullscreenchange",W),H()}),T({ganttInstance:l,updateData:k,updateOptions:D,toggleFullscreen:w}),(t,r)=>{const d=$,o=A;return C(),L("div",K,[e.showToolbar?(C(),L("div",Q,[b("div",Y,[b("span",J,z(e.title||"甘特图"),1)]),b("div",X,[e.showFullscreenButton?(C(),G(o,{key:0,size:"small",onClick:w},{icon:_(()=>[P(d,{name:y(n)?"carbon:minimize":"carbon:maximize",size:16,color:"currentColor"},null,8,["name"])]),default:_(()=>[j(" "+z(y(n)?"退出全屏":"全屏"),1)]),_:1})):F("",!0)])])):F("",!0),b("div",{ref_key:"ganttContainerRef",ref:c,class:"gantt-container",style:U({height:y(E)})},null,4)])}}}),ae=q(Z,[["__scopeId","data-v-9229ffa2"]]);export{ae as default};
