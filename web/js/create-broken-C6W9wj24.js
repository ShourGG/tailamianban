import{k as x,aF as k,r as p,Q as C,R as N,S as e,U as t,K as l,j as m}from"./vue-vendor-B-HGZVTd.js";import{c as U}from"./terraria-rooms-CwNP5Fu0.js";import{am as z,P as S,Q as n,J as v,V as f,a9 as _,K as P,H as g,S as B}from"./ui-vendor-C2DiPTQI.js";import"./index-CZdsPYOi.js";import"./spline-vendor-CTguZ3V6.js";import"./charts-vendor-CzveNv9z.js";import"./editor-vendor-CkYh0R4B.js";const R={style:{padding:"16px"}},D=x({__name:"create-broken",setup(T){const i=k(),r=z(),d=p(!1),a=p({name:"",type:"vanilla",port:7777,maxPlayers:8,worldName:"",worldConfig:{size:"2",difficulty:"0",autoSave:!0,pvp:!1,hardcore:!1,language:"zh-CN",motd:"欢迎！"}}),b=[{label:"原版服务器",value:"vanilla"},{label:"TShock服务器",value:"tshock"},{label:"TModLoader服务器",value:"tmodloader"}],y=[{label:"小型",value:"1"},{label:"中型",value:"2"},{label:"大型",value:"3"}],c=async()=>{if(!a.value.name){r.error("请输入房间名称");return}if(!a.value.worldName){r.error("请输入世界名称");return}try{d.value=!0;const s=await U(a.value);s.code==="0"?(r.success("房间创建成功！"),i.push("/terraria/rooms")):r.error(s.msg||"创建失败")}catch(s){r.error(s.message||"创建失败")}finally{d.value=!1}},w=()=>{i.back()};return(s,o)=>(N(),C("div",R,[e(l(B),{title:"创建房间"},{default:t(()=>[e(l(S),{model:a.value,"label-placement":"left","label-width":"120px"},{default:t(()=>[e(l(n),{label:"房间名称",required:""},{default:t(()=>[e(l(v),{value:a.value.name,"onUpdate:value":o[0]||(o[0]=u=>a.value.name=u),placeholder:"请输入房间名称"},null,8,["value"])]),_:1}),e(l(n),{label:"服务器类型"},{default:t(()=>[e(l(f),{value:a.value.type,"onUpdate:value":o[1]||(o[1]=u=>a.value.type=u),options:b},null,8,["value"])]),_:1}),e(l(n),{label:"端口"},{default:t(()=>[e(l(_),{value:a.value.port,"onUpdate:value":o[2]||(o[2]=u=>a.value.port=u),min:1,max:65535,style:{width:"100%"}},null,8,["value"])]),_:1}),e(l(n),{label:"最大玩家数"},{default:t(()=>[e(l(_),{value:a.value.maxPlayers,"onUpdate:value":o[3]||(o[3]=u=>a.value.maxPlayers=u),min:1,max:255,style:{width:"100%"}},null,8,["value"])]),_:1}),e(l(n),{label:"世界名称",required:""},{default:t(()=>[e(l(v),{value:a.value.worldName,"onUpdate:value":o[4]||(o[4]=u=>a.value.worldName=u),placeholder:"请输入世界名称"},null,8,["value"])]),_:1}),e(l(n),{label:"世界大小"},{default:t(()=>[e(l(f),{value:a.value.worldConfig.size,"onUpdate:value":o[5]||(o[5]=u=>a.value.worldConfig.size=u),options:y},null,8,["value"])]),_:1}),e(l(n),null,{default:t(()=>[e(l(P),null,{default:t(()=>[e(l(g),{type:"primary",onClick:c,loading:d.value},{default:t(()=>[...o[6]||(o[6]=[m(" 创建房间 ",-1)])]),_:1},8,["loading"]),e(l(g),{onClick:w,disabled:d.value},{default:t(()=>[...o[7]||(o[7]=[m(" 取消 ",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]))}});export{D as default};
