import{P as _}from"./spline-vendor-CTguZ3V6.js";import{u as z,_ as D,a as O}from"./ParentSize.vue_vue_type_script_setup_true_lang-Clm6hvFF.js";import{k as V,r as u,c as f,o as B,w as E,E as F,Q as L,F as U,S as C,V as m,s as H,U as R,q,Y as x,M as N,n as P,R as W}from"./vue-vendor-B-HGZVTd.js";const j=V({__name:"Spline",props:{scene:{type:String,required:!0},onLoad:Function,renderOnDemand:{type:Boolean,default:!0},style:Object},emits:["error","spline-mouse-down","spline-mouse-up","spline-mouse-hover","spline-key-down","spline-key-up","spline-start","spline-look-at","spline-follow","spline-scroll"],setup(y,{emit:w}){const k=console.log;console.log=(...n)=>{n.some(l=>typeof l=="string"&&l.includes("updating from"))||k.apply(console,n)};const r=y,o=w,a=u(null),i=u(!1),s=u(null),c=u(!0);let p=()=>{};const h=f(()=>({overflow:"hidden",...r.style})),g=f(()=>({display:"block",width:"100%",height:"100%"})),{stop:S}=z(a,([{isIntersecting:n}])=>{c.value=n,n&&s.value&&P(()=>{a.value&&s.value&&(s.value.requestRender(),s.value.setSize(a.value.clientWidth,a.value.clientHeight))})},{threshold:.1});function t(n,l){if(!l||!s.value)return;const e=O(l,50,{maxWait:100});return s.value.addEventListener(n,e),()=>s.value?.removeEventListener(n,e)}async function b(){if(a.value){i.value=!0;try{s.value&&(s.value.dispose(),s.value=null),s.value=new _(a.value,{renderOnDemand:r.renderOnDemand});const n=console.warn;console.warn=(...e)=>{e.some(v=>typeof v=="string"&&v.includes("updating from"))||n.apply(console,e)},await s.value.load(r.scene),console.warn=n;const l=[t("mouseDown",e=>o("spline-mouse-down",e)),t("mouseUp",e=>o("spline-mouse-up",e)),t("mouseHover",e=>o("spline-mouse-hover",e)),t("keyDown",e=>o("spline-key-down",e)),t("keyUp",e=>o("spline-key-up",e)),t("start",e=>o("spline-start",e)),t("lookAt",e=>o("spline-look-at",e)),t("follow",e=>o("spline-follow",e)),t("scroll",e=>o("spline-scroll",e))].filter(Boolean);return i.value=!1,r.onLoad?.(s.value),()=>{l.forEach(e=>e?.())}}catch(n){return o("error",n),i.value=!1,()=>{}}}}async function d(){p(),p=await b()??(()=>{})}return B(async()=>{await d(),E(c,n=>{n&&d()})}),F(()=>{S(),s.value&&(s.value.dispose(),s.value=null)}),(n,l)=>(W(),L(U,null,[C(D,H({"parent-size-styles":h.value,"debounce-time":50},n.$attrs),{default:R(()=>[m("canvas",{ref_key:"canvasRef",ref:a,style:N(g.value)},null,4),i.value?q(n.$slots,"default",{key:0}):x("",!0)]),_:3},16,["parent-size-styles"]),l[0]||(l[0]=m("div",{class:"login-logo"},null,-1))],64))}});export{j as _};
