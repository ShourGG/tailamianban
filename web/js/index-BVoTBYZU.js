import Y from"./index-B9RTUJIf.js";import{k as $,az as z,aF as D,r as c,c as F,m as r,o as U,w as _,Q as w,R as m,V as L,_ as S,Y as E,F as J,N as W,aE as M,U as R,j as X,$ as j,S as q,K,n as Q}from"./vue-vendor-B-HGZVTd.js";import{d as G}from"./index-CZdsPYOi.js";import{a7 as H,I as Z}from"./ui-vendor-C2DiPTQI.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./iconify-fz3UakNh.js";import"./spline-vendor-CTguZ3V6.js";import"./charts-vendor-CzveNv9z.js";import"./editor-vendor-CkYh0R4B.js";const ee={id:"guide-tags-view",class:"tags-view-container"},te=$({__name:"index",setup(ae){const a=G(),o=z(),d=D(),p=c(!1),k=c(0),x=c(0),u=c(null),l=c(-1),y=e=>e.path===o.path,h=e=>e.meta?.affix,V=c(),f=c(),N=e=>{const t=f.value;t&&(t.scrollLeft+=e.deltaY*.3,t.scrollTo({left:t.scrollLeft+e.deltaY*.3,behavior:"smooth"}))},A=e=>{e.path!==o.path&&d.push(e.path),Q(()=>{const t=f.value,n=t?.querySelector(`[data-path="${e.path}"]`);if(n&&t){const i=t.getBoundingClientRect(),g=n.getBoundingClientRect(),s=n.offsetLeft-i.width/2+g.width/2;t.scrollTo({left:Math.max(0,s),behavior:"smooth"})}})},T=(e,t)=>{if(h(e))return;const n=y(e),i=a.removeTag(t);n&&i&&d.push("/")},I=(e,t,n)=>{e.preventDefault(),u.value=t,l.value=n,p.value=!0,k.value=e.clientX,x.value=e.clientY},C=()=>p.value=!1,B=F(()=>[{type:"option",label:"关闭",key:"close",disabled:h(u.value),icon:()=>r("span",{class:"i-mdi:close"})},{type:"option",label:"关闭其他",key:"closeOthers",icon:()=>r("span",{class:"i-mdi:arrow-left-right-bold"})},{type:"option",label:"关闭左侧",key:"closeLeft",icon:()=>r("span",{class:"i-mdi:align-horizontal-left"})},{type:"option",label:"关闭右侧",key:"closeRight",icon:()=>r("span",{class:"i-mdi:align-horizontal-right"})},{type:"option",label:"关闭所有",key:"closeAll",icon:()=>r("span",{class:"i-mdi:tally-mark-5"})}]),O=e=>{if(!(!u.value||l.value===-1)){switch(e){case"close":T(u.value,l.value);break;case"closeOthers":a.removeOtherTags(l.value);break;case"closeLeft":a.removeLeftTags(l.value);break;case"closeRight":a.removeRightTags(l.value);break;case"closeAll":a.removeAllTags(),d.push("/");break}C()}};return U(()=>{const e=localStorage.getItem("tagsViewList");e&&a.initTags(JSON.parse(e)),a.addTag({path:o.path,title:o.path==="/"?"首页":o.meta.title||"Unnamed Page",icon:o.path==="/"?"mdi:home":o.meta.icon,meta:{affix:o.path==="/"}})}),_(()=>o.path,e=>{a.addTag({path:e,title:e==="/"?"首页":o.meta.title||"Unnamed Page",icon:e==="/"?"mdi:home":o.meta.icon,meta:{affix:e==="/"}}),a.setActiveTag(e)},{immediate:!0}),_(()=>a.tagsViewList,e=>{localStorage.setItem("tagsViewList",JSON.stringify(e))},{deep:!0}),_(()=>a.activeTag,e=>{localStorage.setItem("activeTag",e)}),(e,t)=>{const n=Y,i=H,g=Z;return m(),w("div",ee,[L("div",{class:"tags-track",ref_key:"tagsTrack",ref:V,onWheel:N},[L("div",{class:"tags-container",ref_key:"tagsContainer",ref:f},[(m(!0),w(J,null,W(K(a).tagsViewList,(s,b)=>(m(),S(i,{key:s.path,type:y(s)?"primary":"default",closable:!h(s),"data-path":s.path,onClose:M(v=>T(s,b),["stop"]),onClick:v=>A(s),onContextmenu:M(v=>I(v,s,b),["prevent"])},{icon:R(()=>[q(n,{name:s.icon,size:12},null,8,["name"])]),default:R(()=>[X(" "+j(s.title),1)]),_:2},1032,["type","closable","data-path","onClose","onClick","onContextmenu"]))),128))],512)],544),p.value?(m(),S(g,{key:0,show:p.value,options:B.value,x:k.value,y:x.value,onClickoutside:C,onSelect:O},null,8,["show","options","x","y"])):E("",!0)])}}}),me=P(te,[["__scopeId","data-v-c510c2e3"]]);export{me as default};
