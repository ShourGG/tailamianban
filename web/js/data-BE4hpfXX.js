import h from"./index-B9RTUJIf.js";import{m as d}from"./vue-vendor-B-HGZVTd.js";import{J as s,ag as g,a9 as f,V as C,a5 as y}from"./ui-vendor-C2DiPTQI.js";const b={number:f,switch:g,input:s,email:s,mobile:s,date:e=>d(y,{...e,type:"date",format:"yyyy-MM-dd"}),select:e=>d(C,{...e,options:e.options||[]}),textarea:e=>d(s,{...e,type:"textarea",rows:3})},w=(e,n,t)=>e??n??t,u=e=>(n,t,i)=>{const a={...e};return Object.entries(i).forEach(([o,[l,c]])=>{const r=o;a[r]=w(n[l],t[c],e[r])}),a},m=(e,n)=>({dynamicRows:e.dynamicRows===!0?{enableRadioSelection:!0,enableAdd:!0,enableInsert:!0,enableDelete:!0,enableCopy:!0,enableMove:!0,enablePrint:!0}:e.dynamicRows||n.dynamicRowsOptions}),k=(e,n)=>{if(n.pagination===!1)return{pagination:null};const t={enabled:!0,page:1,pageSize:10,showSizePicker:!0,showQuickJumper:!0,pageSizes:[10,20,50,100],simple:!1,size:"medium"};return e.pagination===!0?{pagination:t}:typeof e.pagination=="object"?{pagination:{...t,...e.pagination}}:n.pagination===!0||!n.pagination?{pagination:t}:typeof n.pagination=="object"?{pagination:{...t,...n.pagination}}:{pagination:t}},x=u({expandable:!1,defaultExpandedKeys:void 0,onLoadExpandData:void 0,renderExpandContent:void 0,rowExpandable:void 0}),E=u({editable:!0,editMode:"both",showRowActions:!0,modalTitle:"编辑数据",modalWidth:600}),S=u({enableSelection:!1,defaultCheckedKeys:void 0,rowCheckable:void 0,maxSelection:void 0,enableChildSelection:!1,childRowCheckable:void 0,enableParentChildLink:!1,parentChildLinkMode:"loose"});function v(e){const n=e.preset||{},t=n.expandable||{},i=n.selection||{},a=n.edit||{},o=i.childSelection||{},l=i.parentChildLink||{};return{...m(n,e),...x(t,e,{expandable:["enabled","expandable"],defaultExpandedKeys:["defaultExpanded","defaultExpandedKeys"],onLoadExpandData:["onLoadData","onLoadExpandData"],renderExpandContent:["renderContent","renderExpandContent"],rowExpandable:["rowExpandable","rowExpandable"]}),...E(a,e,{editable:["enabled","editable"],editMode:["mode","editMode"],showRowActions:["showRowActions","showRowActions"],modalTitle:["modalTitle","modalTitle"],modalWidth:["modalWidth","modalWidth"]}),...S({sel:i,child:o,link:l},e,{enableSelection:["sel.enabled","enableSelection"],defaultCheckedKeys:["sel.defaultChecked","defaultCheckedKeys"],rowCheckable:["sel.rowCheckable","rowCheckable"],maxSelection:["sel.maxSelection","maxSelection"],enableChildSelection:["child.enabled","enableChildSelection"],childRowCheckable:["child.childRowCheckable","childRowCheckable"],enableParentChildLink:["link.enabled","enableParentChildLink"],parentChildLinkMode:["link.mode","parentChildLinkMode"]}),...k(n,e)}}const D=e=>({isNonEditable:n=>!e.editable||n.editable===!1||e.editMode==="none",isRowEditMode:()=>["row","both"].includes(e.editMode),isCellEditMode:()=>["cell","both"].includes(e.editMode)});function _(e,n,t){if(e.editRender)return e.editRender(n,{},0);const i={value:n,"onUpdate:value":t,placeholder:`请输入${e.title}`,style:{width:"100%"},...e.editProps},a=b[e.editType||"input"]||b.input;return d(a,i)}function T(e,n,t,i){return e.render?e.render(n,t)??String(i??""):String(i??"")}function z(e,n,t,i,a){const o=(l,c,r)=>d("button",{class:`cell-action-btn cell-action-${l}`,title:c,type:"button",onClick:p=>{p.stopPropagation(),p.preventDefault(),r(p)}},[d(h,{name:`mdi:${l==="save"?"check":"close"}`,title:`${l==="save"?"保存":"取消"}`,size:12})]);return d("div",{class:"cell-editing-container"},[d("div",{class:"cell-editing-input"},[_(e,n,t)]),d("div",{class:"cell-editing-actions"},[o("save","保存",i),o("cancel","取消",a)])])}function $(e,n,t,i,a){const o=e.render?e.render(n,t)??String(i??""):String(i??"");return d("div",{class:"cell-edit-wrapper"},[d("span",{class:"cell-value"},o),d(h,{name:"mdi:square-edit-outline",title:"编辑",class:"cell-edit-icon",size:14,clickable:!0,onClick:l=>{l.stopPropagation(),a()}})])}const A=e=>{const n={number:"inputNumber",date:"datePicker",textarea:"textarea",select:"select",switch:"switch"};return e.map(t=>{const i=t.required?[{required:!0,message:`请输入${t.title}`,trigger:["blur","input"],validator:async(a,o)=>{if(!o&&o!==0&&o!==!1)throw new Error(`请输入${t.title}`)}}]:[];return{prop:t.key,label:t.title||t.key,type:n[t.editType||"input"]||"input",placeholder:`请输入${t.title}`,rules:i,attrs:t.editProps||{},layout:{span:1},show:!0}})},K=e=>({striped:e.striped,bordered:e.bordered,singleLine:e.singleLine,size:e.size,loading:e.loading,scrollX:e.scrollX,maxHeight:e.maxHeight}),M={switch:e=>e?"是":"否",select:(e,n)=>(n.editProps?.options||[]).find(a=>a.value===e)?.label||String(e),date:e=>e instanceof Date?e.toLocaleDateString("zh-CN"):String(e)},N=(e,n)=>{const t=n[e.key];if(t==null)return"-";const i=M[e.editType];return i?i(t,e):String(t)},O=e=>e.key==="description"||e.editProps?.type==="textarea"?2:1;export{N as a,K as b,v as c,A as d,D as e,_ as f,O as g,z as h,$ as i,T as r};
