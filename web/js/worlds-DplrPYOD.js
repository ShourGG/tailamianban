import{am as q,aG as E,M as g,aF as P,K as _,H as u,S as V,aB as W,a4 as k,P as j,Q as c,J as b,V as z,a7 as y}from"./ui-vendor-C2DiPTQI.js";import{k as K,r as p,Q,R as F,S as a,U as n,K as t,j as d,m as o}from"./vue-vendor-B-HGZVTd.js";const G={class:"p-4"},R=K({__name:"worlds",setup(H){const r=q(),w=E(),C=p(!1),m=p(!1),f=p(!1),v=p([{id:1,name:"MainWorld",size:"2",difficulty:"0",fileSize:"12.5 MB",createTime:"2024-01-15 10:30:00",active:!0},{id:2,name:"ExpertWorld",size:"3",difficulty:"1",fileSize:"18.2 MB",createTime:"2024-01-10 15:20:00",active:!1}]),i=p({name:"",seed:"",size:"2",difficulty:"0"}),x={1:"小型",2:"中型",3:"大型"},M={0:"普通",1:"专家",2:"大师",3:"旅途"},U=[{title:"世界名称",key:"name",width:150},{title:"世界大小",key:"size",width:120,render:l=>o(y,null,()=>x[l.size])},{title:"难度",key:"difficulty",width:100,render:l=>o(y,{type:{0:"default",1:"warning",2:"error",3:"success"}[l.difficulty]},()=>M[l.difficulty])},{title:"文件大小",key:"fileSize",width:120},{title:"创建时间",key:"createTime",width:180},{title:"状态",key:"active",width:100,render:l=>o(y,{type:l.active?"success":"default"},()=>l.active?"当前世界":"未使用")},{title:"操作",key:"actions",width:300,fixed:"right",render:l=>o(_,null,{default:()=>[!l.active&&o(u,{size:"small",type:"primary",onClick:()=>h(l)},()=>"切换"),o(u,{size:"small",type:"success",onClick:()=>T(l)},()=>"下载"),o(u,{size:"small",type:"warning",onClick:()=>B(l)},()=>"备份"),!l.active&&o(u,{size:"small",type:"error",onClick:()=>S(l)},()=>"删除")]})}],h=l=>{w.warning({title:"确认切换",content:`确定要切换到世界 "${l.name}" 吗？需要重启服务器才能生效。`,positiveText:"确定",negativeText:"取消",onPositiveClick:()=>{v.value.forEach(e=>e.active=!1),l.active=!0,r.success("切换成功，请重启服务器")}})},T=l=>{r.success(`正在下载世界: ${l.name}`)},B=l=>{r.success(`正在备份世界: ${l.name}`)},S=l=>{w.error({title:"确认删除",content:`确定要删除世界 "${l.name}" 吗？此操作不可恢复。`,positiveText:"删除",negativeText:"取消",onPositiveClick:()=>{const e=v.value.findIndex(s=>s.id===l.id);e>-1&&v.value.splice(e,1),r.success("删除成功")}})},$=()=>{m.value=!0},D=()=>{f.value=!0},N=()=>{if(!i.value.name){r.error("请输入世界名称");return}r.success("世界创建中，请稍候..."),f.value=!1,i.value={name:"",seed:"",size:"2",difficulty:"0"}};return(l,e)=>(F(),Q("div",G,[a(t(V),{title:"世界管理"},{"header-extra":n(()=>[a(t(_),null,{default:n(()=>[a(t(u),{onClick:$},{default:n(()=>[...e[7]||(e[7]=[d("上传世界",-1)])]),_:1}),a(t(u),{type:"primary",onClick:D},{default:n(()=>[...e[8]||(e[8]=[d("创建新世界",-1)])]),_:1})]),_:1})]),default:n(()=>[a(t(g),{type:"info",class:"mb-4","show-icon":!1},{default:n(()=>[...e[9]||(e[9]=[d(" 泰拉瑞亚世界文件格式为.wld，请确保上传的文件是有效的世界文件。切换世界后需要重启服务器。 ",-1)])]),_:1}),a(t(P),{columns:U,data:v.value,loading:C.value,bordered:!1},null,8,["data","loading"])]),_:1}),a(t(k),{show:m.value,"onUpdate:show":e[0]||(e[0]=s=>m.value=s),preset:"card",title:"上传世界文件",style:{width:"50%"}},{default:n(()=>[a(t(W),{"default-upload":!1,accept:".wld",max:1},{default:n(()=>[a(t(u),null,{default:n(()=>[...e[10]||(e[10]=[d("点击上传世界文件",-1)])]),_:1})]),_:1}),a(t(g),{type:"info",class:"mt-4","show-icon":!1},{default:n(()=>[...e[11]||(e[11]=[d(" 仅支持 .wld 格式的世界文件 ",-1)])]),_:1})]),_:1},8,["show"]),a(t(k),{show:f.value,"onUpdate:show":e[6]||(e[6]=s=>f.value=s),preset:"card",title:"创建新世界",style:{width:"50%"}},{footer:n(()=>[a(t(_),{justify:"end"},{default:n(()=>[a(t(u),{onClick:e[5]||(e[5]=s=>f.value=!1)},{default:n(()=>[...e[12]||(e[12]=[d("取消",-1)])]),_:1}),a(t(u),{type:"primary",onClick:N},{default:n(()=>[...e[13]||(e[13]=[d("创建",-1)])]),_:1})]),_:1})]),default:n(()=>[a(t(j),{model:i.value,"label-placement":"left","label-width":"100px"},{default:n(()=>[a(t(c),{label:"世界名称",required:""},{default:n(()=>[a(t(b),{value:i.value.name,"onUpdate:value":e[1]||(e[1]=s=>i.value.name=s),placeholder:"请输入世界名称"},null,8,["value"])]),_:1}),a(t(c),{label:"世界种子"},{default:n(()=>[a(t(b),{value:i.value.seed,"onUpdate:value":e[2]||(e[2]=s=>i.value.seed=s),placeholder:"留空则随机生成"},null,8,["value"])]),_:1}),a(t(c),{label:"世界大小",required:""},{default:n(()=>[a(t(z),{value:i.value.size,"onUpdate:value":e[3]||(e[3]=s=>i.value.size=s),options:[{label:"小型 (4200×1200)",value:"1"},{label:"中型 (6400×1800)",value:"2"},{label:"大型 (8400×2400)",value:"3"}]},null,8,["value"])]),_:1}),a(t(c),{label:"难度模式",required:""},{default:n(()=>[a(t(z),{value:i.value.difficulty,"onUpdate:value":e[4]||(e[4]=s=>i.value.difficulty=s),options:[{label:"普通模式",value:"0"},{label:"专家模式",value:"1"},{label:"大师模式",value:"2"},{label:"旅途模式",value:"3"}]},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show"])]))}});export{R as default};
