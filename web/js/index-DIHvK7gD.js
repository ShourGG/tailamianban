import k from"./index-BXTAHfaV.js";import B from"./index-CD9u_OzZ.js";import R from"./index-89YooRgz.js";import{k as C,r as T,c as i,w as y,Q as A,R as h,_ as L,s as P,K as u,a7 as E}from"./vue-vendor-B-HGZVTd.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./charts-vendor-CzveNv9z.js";import"./ui-vendor-C2DiPTQI.js";import"./exportUtils-pIheTlXt.js";const M={class:"c-antv-container"},j=C({__name:"index",props:{type:{},data:{},width:{default:"100%"},height:{default:"600px"},readonly:{type:Boolean,default:!1},showToolbar:{type:Boolean,default:!0},theme:{default:"light"}},emits:["ready","data-change"],setup(f,{expose:g,emit:_}){const a=f,d=_,s=T(),w={er:k,bpmn:B,uml:R},x=i(()=>w[a.type]),b=i(()=>{const e={width:a.width,height:a.height,readonly:a.readonly,showToolbar:a.showToolbar,theme:a.theme};let n=a.data;if(a.type==="bpmn"&&a.data){const o=a.data;o&&typeof o=="object"&&"nodes"in o&&"edges"in o&&(n=[...(o.nodes||[]).map(t=>({...t,shape:t.type||t.shape||"rect",x:t.x??0,y:t.y??0})),...(o.edges||[]).map(t=>({...t,shape:"edge",x:0,y:0}))])}return{...e,data:n}}),D=e=>{d("ready",e)},v=e=>{let n;if(a.type==="bpmn"&&Array.isArray(e)){const r=e.filter(t=>t.shape!=="edge").map(t=>{const{shape:p,x:m,y:l,...c}=t;return{...c,type:p==="rect"?"task":p,x:m||0,y:l||0}}),o=e.filter(t=>t.shape==="edge").map(t=>{const{shape:p,x:m,y:l,...c}=t;return c});n={nodes:r,edges:o,flows:[]}}else n=e;d("data-change",n)};return y(()=>a.type,(e,n)=>{},{immediate:!0}),y(()=>a.data,e=>{},{deep:!0}),g({getGraph:()=>s.value?.getGraph?.(),getData:()=>{const e=s.value?.getData?.();if(a.type==="bpmn"&&Array.isArray(e)){const n=e.filter(o=>o.shape!=="edge"),r=e.filter(o=>o.shape==="edge");return{nodes:n,edges:r,flows:[]}}return e}}),(e,n)=>(h(),A("div",M,[(h(),L(E(u(x)),P(u(b),{onReady:D,onDataChange:v,ref_key:"layoutRef",ref:s}),null,16))]))}}),H=G(j,[["__scopeId","data-v-a991cead"]]);export{H as default};
