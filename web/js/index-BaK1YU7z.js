import{K as G,H as U,a9 as Y,a7 as R,ai as H,S as L,M as O,U as Q,T as q}from"./ui-vendor-C2DiPTQI.js";import{k as J,i as P,c as i,Q as p,R as r,Y as W,V as o,K as n,S as a,U as t,j as u,$ as _,F as X,N as Z,_ as I,I as h,a7 as ee}from"./vue-vendor-B-HGZVTd.js";import{_ as ne}from"./_plugin-vue_export-helper-DlAUqK2U.js";const te=Symbol("dynamicFormState"),se={class:"c-form-dynamic"},ae={key:0,class:"dynamic-controls"},oe={class:"max-fields-config"},le={class:"dynamic-stats"},ie={key:1,class:"dynamic-controls-fallback"},de={class:"dynamic-form-items"},me=J({__name:"index",props:{formItems:{},layoutConfig:{default:()=>({})},options:{default:()=>[]},dynamicFormState:{default:null}},emits:["field-add","field-remove","fields-clear"],setup(F,{expose:D}){const m=F,z=P(te,null),s=i(()=>m.dynamicFormState||z),f=i(()=>!!s.value),y=i(()=>m.layoutConfig?.dynamic?.grid?.cols??24),C=i(()=>m.layoutConfig?.dynamic?.grid?.gutter??16),N=i(()=>m.layoutConfig?.dynamic?.controls?.showControls!==!1),S=i(()=>s.value?.state.config.maxFields??m.layoutConfig?.dynamic?.dynamic?.maxFields??50),c=i(()=>s.value?.dynamicFieldsCount.value??0),A=i(()=>s.value?.canAddMoreFields.value??!1),B=i(()=>m.formItems.length),$=(d,e)=>d.key?.toString()||d.props?.path||`dynamic-item-${e}`,M=d=>{const e=m.options?.[d]?.layout?.span;return typeof e=="number"&&e>0&&e<=y.value?e:Math.min(12,y.value)},T=d=>{if(!s.value)return!1;const e=d.props?.path||d.key?.toString()||"";return s.value.state.dynamicFields.some(v=>v.prop===e)};return D({addField:()=>s.value?.addField(),removeField:()=>s.value?.removeField(),clearAllDynamic:()=>s.value?.clearDynamicFields(),isDynamicStateAvailable:f,dynamicState:s}),(d,e)=>{const v=H,g=U,x=G,V=Y,b=R,k=L,j=O,K=Q,E=q;return r(),p("div",se,[n(N)&&n(f)?(r(),p("div",ae,[a(k,{size:"small",title:"动态表单控制",bordered:!1},{"header-extra":t(()=>[a(v,{value:n(c),type:"warning"},{default:t(()=>[...e[4]||(e[4]=[o("div",{class:"i-mdi:layers text-16px"},null,-1)])]),_:1},8,["value"])]),default:t(()=>[a(x,{justify:"space-between",align:"center"},{default:t(()=>[a(x,null,{default:t(()=>[a(g,{size:"small",type:"primary",disabled:!n(A),onClick:e[0]||(e[0]=l=>n(s).addField())},{icon:t(()=>[...e[5]||(e[5]=[o("div",{class:"i-mdi:plus text-14px"},null,-1)])]),default:t(()=>[u(" 添加字段 ("+_(n(c))+"/"+_(n(S))+") ",1)]),_:1},8,["disabled"]),a(g,{size:"small",type:"warning",disabled:n(c)===0,onClick:e[1]||(e[1]=l=>n(s).removeField())},{icon:t(()=>[...e[6]||(e[6]=[o("div",{class:"i-mdi:minus text-14px"},null,-1)])]),default:t(()=>[e[7]||(e[7]=u(" 移除字段 ",-1))]),_:1},8,["disabled"]),a(g,{size:"small",type:"error",disabled:n(c)===0,onClick:e[2]||(e[2]=l=>n(s).clearDynamicFields())},{icon:t(()=>[...e[8]||(e[8]=[o("div",{class:"i-mdi:delete-sweep text-14px"},null,-1)])]),default:t(()=>[e[9]||(e[9]=u(" 清空动态 ",-1))]),_:1},8,["disabled"])]),_:1}),o("div",oe,[e[10]||(e[10]=o("span",null,"最大字段数:",-1)),a(V,{value:n(S),"onUpdate:value":e[3]||(e[3]=l=>l&&n(s).updateConfig({maxFields:l})),min:5,max:50,size:"small",style:{width:"100px"}},null,8,["value"])])]),_:1}),o("div",le,[a(x,null,{default:t(()=>[a(b,{type:"info"},{default:t(()=>[u("总字段: "+_(n(B)),1)]),_:1}),a(b,{type:"warning"},{default:t(()=>[u("动态: "+_(n(c)),1)]),_:1})]),_:1})])]),_:1})])):n(N)&&!n(f)?(r(),p("div",ie,[a(k,{size:"small",title:"动态表单控制 (静态模式)",bordered:!1},{default:t(()=>[a(j,{type:"info","show-icon":""},{icon:t(()=>[...e[11]||(e[11]=[o("div",{class:"i-mdi:information-outline text-16px"},null,-1)])]),default:t(()=>[e[12]||(e[12]=u(" 当前为静态模式，如需动态功能请在父组件中提供动态表单状态。 ",-1))]),_:1})]),_:1})])):W("",!0),o("div",de,[a(E,{cols:n(y),"x-gap":n(C),"y-gap":n(C)},{default:t(()=>[(r(!0),p(X,null,Z(F.formItems,(l,w)=>(r(),I(K,{key:$(l,w),span:M(w)},{default:t(()=>[o("div",{class:h(["dynamic-item-wrapper",{"is-dynamic-field":T(l)}])},[(r(),I(ee(l)))],2)]),_:2},1032,["span"]))),128))]),_:1},8,["cols","x-gap","y-gap"])])])}}}),pe=ne(me,[["__scopeId","data-v-a091ca6c"]]);export{pe as default};
