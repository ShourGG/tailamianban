import{am as K,K as k,S as C,J as R,R as $,a5 as E,W as F,T as O,U as f,aK as m,V as P,H as L}from"./ui-vendor-C2DiPTQI.js";import{k as W,r as u,c as T,w as j,Q as g,R as c,S as l,U as a,K as t,V as s,j as _,M as D,Y as J,F as Q,N as Y,I as q,$ as S,n as A}from"./vue-vendor-B-HGZVTd.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";const X={class:"logs-page"},Z={class:"log-time"},h={class:"log-level"},ee={class:"log-content"},le={key:0,class:"text-center text-gray-500 py-8"},te=W({__name:"logs",setup(ae){const b=K(),r=u("all"),i=u("all"),v=u(""),U=u(null),x=u(!0),V=u(600),d=u(),N=[{label:"全部服务器",value:"all"},{label:"生存服",value:"1"},{label:"Mod服",value:"2"},{label:"PVP服",value:"3"}],z=[{label:"全部级别",value:"all"},{label:"错误",value:"error"},{label:"警告",value:"warn"},{label:"信息",value:"info"},{label:"调试",value:"debug"}],p=u([{time:"2024-01-20 15:30:45",level:"info",content:"服务器启动成功",server:"1"},{time:"2024-01-20 15:30:46",level:"info",content:"加载世界文件: MainWorld.wld",server:"1"},{time:"2024-01-20 15:30:47",level:"info",content:"监听端口: 7777",server:"1"},{time:"2024-01-20 15:31:00",level:"info",content:"玩家 Player1 加入游戏",server:"1"},{time:"2024-01-20 15:31:15",level:"warn",content:"玩家 Player2 尝试使用被禁用的物品",server:"1"},{time:"2024-01-20 15:32:00",level:"info",content:"世界已保存",server:"1"},{time:"2024-01-20 15:32:30",level:"error",content:"插件加载失败: InvalidPlugin.dll",server:"1"},{time:"2024-01-20 15:33:00",level:"info",content:"玩家 Player3 加入游戏",server:"2"},{time:"2024-01-20 15:33:15",level:"debug",content:"Tick: 1000, TPS: 60",server:"2"},{time:"2024-01-20 15:34:00",level:"warn",content:"服务器延迟过高: 150ms",server:"2"}]),y=T(()=>{let o=p.value;return r.value!=="all"&&(o=o.filter(e=>e.server===r.value)),i.value!=="all"&&(o=o.filter(e=>e.level===i.value)),v.value&&(o=o.filter(e=>e.content.toLowerCase().includes(v.value.toLowerCase()))),o}),w=T(()=>{const o={error:0,warn:0,info:0,debug:0};return p.value.forEach(e=>{o[e.level]++}),o}),B=()=>{b.success("日志已刷新")},M=()=>{p.value=[],b.success("日志已清空")},H=()=>{b.success("正在导出日志文件...")};return j(()=>y.value.length,()=>{x.value&&A(()=>{d.value&&(d.value.scrollTop=d.value.scrollHeight)})}),(o,e)=>(c(),g("div",X,[l(t(C),{title:"日志中心",bordered:!1},{"header-extra":a(()=>[l(t(k),null,{default:a(()=>[l(t(P),{value:r.value,"onUpdate:value":e[0]||(e[0]=n=>r.value=n),options:N,style:{width:"200px"},placeholder:"选择服务器"},null,8,["value"]),l(t(P),{value:i.value,"onUpdate:value":e[1]||(e[1]=n=>i.value=n),options:z,style:{width:"150px"}},null,8,["value"]),l(t(L),{onClick:B},{icon:a(()=>[...e[5]||(e[5]=[s("div",{class:"i-mdi:refresh"},null,-1)])]),default:a(()=>[e[6]||(e[6]=_(" 刷新 ",-1))]),_:1}),l(t(L),{onClick:M},{icon:a(()=>[...e[7]||(e[7]=[s("div",{class:"i-mdi:delete-sweep"},null,-1)])]),default:a(()=>[e[8]||(e[8]=_(" 清空日志 ",-1))]),_:1}),l(t(L),{type:"primary",onClick:H},{icon:a(()=>[...e[9]||(e[9]=[s("div",{class:"i-mdi:download"},null,-1)])]),default:a(()=>[e[10]||(e[10]=_(" 导出日志 ",-1))]),_:1})]),_:1})]),default:a(()=>[l(t(k),{vertical:"",size:"large"},{default:a(()=>[l(t(C),{size:"small"},{default:a(()=>[l(t(k),{align:"center"},{default:a(()=>[e[13]||(e[13]=s("span",null,"搜索：",-1)),l(t(R),{value:v.value,"onUpdate:value":e[2]||(e[2]=n=>v.value=n),placeholder:"搜索日志内容...",clearable:"",style:{width:"300px"}},{prefix:a(()=>[...e[11]||(e[11]=[s("div",{class:"i-mdi:magnify"},null,-1)])]),_:1},8,["value"]),l(t($),{vertical:""}),e[14]||(e[14]=s("span",null,"时间范围：",-1)),l(t(E),{value:U.value,"onUpdate:value":e[3]||(e[3]=n=>U.value=n),type:"datetimerange",clearable:""},null,8,["value"]),l(t(F),{checked:x.value,"onUpdate:checked":e[4]||(e[4]=n=>x.value=n)},{default:a(()=>[...e[12]||(e[12]=[_("自动滚动",-1)])]),_:1},8,["checked"])]),_:1})]),_:1}),l(t(C),{size:"small"},{default:a(()=>[s("div",{ref_key:"logContainer",ref:d,class:"log-container bg-black text-green-400 p-4 rounded font-mono text-sm overflow-y-auto",style:D({height:V.value+"px"})},[(c(!0),g(Q,null,Y(y.value,(n,I)=>(c(),g("div",{key:I,class:q(["log-line",`log-${n.level}`])},[s("span",Z,"["+S(n.time)+"]",1),s("span",h,"["+S(n.level.toUpperCase())+"]",1),s("span",ee,S(n.content),1)],2))),128)),y.value.length===0?(c(),g("div",le," 暂无日志 ")):J("",!0)],4)]),_:1}),l(t(O),{cols:4,"x-gap":16},{default:a(()=>[l(t(f),null,{default:a(()=>[l(t(m),{label:"总日志数",value:p.value.length},null,8,["value"])]),_:1}),l(t(f),null,{default:a(()=>[l(t(m),{label:"错误",value:w.value.error},{prefix:a(()=>[...e[15]||(e[15]=[s("div",{class:"i-mdi:alert-circle text-red-500"},null,-1)])]),_:1},8,["value"])]),_:1}),l(t(f),null,{default:a(()=>[l(t(m),{label:"警告",value:w.value.warn},{prefix:a(()=>[...e[16]||(e[16]=[s("div",{class:"i-mdi:alert text-yellow-500"},null,-1)])]),_:1},8,["value"])]),_:1}),l(t(f),null,{default:a(()=>[l(t(m),{label:"信息",value:w.value.info},{prefix:a(()=>[...e[17]||(e[17]=[s("div",{class:"i-mdi:information text-blue-500"},null,-1)])]),_:1},8,["value"])]),_:1})]),_:1})]),_:1})]),_:1})]))}}),ue=G(te,[["__scopeId","data-v-43b280eb"]]);export{ue as default};
