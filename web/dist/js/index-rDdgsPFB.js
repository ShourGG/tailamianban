import{g as I,a as B,b as F}from"./terraria-Bt1YaYlQ.js";import{a0 as M,a1 as v,$ as c,aN as y,ak as m,aA as D,K as R,M as T,ab as U,L as V}from"./ui-vendor-qucRfopV.js";import{k as j,r as _,o as E,E as L,O as f,P as n,Q as t,R as a,J as e,Z as p,F as g,S as i,_ as r,j as x,m as O}from"./vue-vendor-DIhTWhib.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./auth-CkdLDIrH.js";import"./index-DHqb4JDz.js";import"./spline-vendor-BYERog9l.js";import"./charts-vendor-XI8Sg87J.js";import"./editor-vendor-CUlQiixb.js";const J={class:"terraria-dashboard"},K={style:{"margin-top":"12px","font-size":"13px",color:"#666"}},Q={style:{"margin-top":"12px","font-size":"13px",color:"#666"}},Z={style:{"margin-top":"12px","font-size":"13px",color:"#666"}},q={style:{"margin-top":"12px","font-size":"13px",color:"#666"}},G=j({__name:"index",setup(H){const h=_(!0),o=_(null),k=_([]),u=_(null),w=_(null),$=[{title:"玩家ID",key:"id",width:100},{title:"玩家名称",key:"name",width:150},{title:"IP地址",key:"ip",width:150},{title:"加入时间",key:"joinTime",width:180},{title:"队伍",key:"team",width:80,render:l=>{const s={0:"default",1:"error",2:"success",3:"warning",4:"info"},d={0:"无",1:"红队",2:"绿队",3:"蓝队",4:"黄队"};return O(V,{type:s[l.team]||"default"},{default:()=>d[l.team]||"未知"})}},{title:"生命值",key:"health",width:100},{title:"魔力值",key:"mana",width:100}],z=async()=>{h.value=!0;try{const[l,s,d]=await Promise.all([I().catch(()=>null),B().catch(()=>[]),F().catch(()=>null)]);o.value=l,k.value=s||[],u.value=d}catch{window.$message?.error("加载数据失败，请检查服务器连接")}finally{h.value=!1}},N=l=>{const s=Math.floor(l/86400),d=Math.floor(l%86400/3600),S=Math.floor(l%3600/60),b=l%60;return s>0?`${s}天 ${d}小时`:d>0?`${d}小时 ${S}分钟`:S>0?`${S}分钟 ${b}秒`:`${b}秒`},P=l=>({running:"#18a058",stopped:"#d03050",starting:"#f0a020",stopping:"#f0a020",error:"#d03050"})[l]||"#666666",C=l=>({running:"运行中",stopped:"已停止",starting:"启动中",stopping:"停止中",error:"错误"})[l]||"未知";return E(()=>{z(),w.value=window.setInterval(z,5e3)}),L(()=>{w.value&&clearInterval(w.value)}),(l,s)=>(n(),f("div",J,[t(e(U),{show:h.value},{default:a(()=>[t(e(M),{"x-gap":16,"y-gap":16,cols:4,responsive:"screen"},{default:a(()=>[t(e(v),null,{default:a(()=>[t(e(c),{title:"服务器状态",bordered:!1,size:"small"},{default:a(()=>[o.value?(n(),f(g,{key:0},[t(e(y),{value:C(o.value.status),"value-style":{color:P(o.value.status)}},null,8,["value","value-style"]),i("div",K,[i("div",null,"运行时间: "+r(N(o.value.uptime)),1),i("div",null,"端口: "+r(o.value.port),1),i("div",null,"版本: "+r(o.value.version),1)])],64)):(n(),p(e(m),{key:1,description:"无法获取服务器状态",size:"small"}))]),_:1})]),_:1}),t(e(v),null,{default:a(()=>[t(e(c),{title:"在线玩家",bordered:!1,size:"small"},{default:a(()=>[o.value?(n(),f(g,{key:0},[t(e(y),{value:o.value.currentPlayers},{suffix:a(()=>[x(" / "+r(o.value.maxPlayers),1)]),_:1},8,["value"]),i("div",Q,[i("div",null,"世界: "+r(o.value.worldName||"未加载"),1),i("div",null,"难度: "+r(o.value.difficulty||"普通"),1)])],64)):(n(),p(e(m),{key:1,description:"无数据",size:"small"}))]),_:1})]),_:1}),t(e(v),null,{default:a(()=>[t(e(c),{title:"CPU使用率",bordered:!1,size:"small"},{default:a(()=>[u.value?(n(),f(g,{key:0},[t(e(y),{value:u.value.cpu.toFixed(2)},{suffix:a(()=>[...s[0]||(s[0]=[x("%",-1)])]),_:1},8,["value"]),i("div",Z,[i("div",null,"更新时间: "+r(new Date(u.value.timestamp).toLocaleTimeString()),1)])],64)):(n(),p(e(m),{key:1,description:"无数据",size:"small"}))]),_:1})]),_:1}),t(e(v),null,{default:a(()=>[t(e(c),{title:"内存使用率",bordered:!1,size:"small"},{default:a(()=>[u.value?(n(),f(g,{key:0},[t(e(y),{value:u.value.memory.toFixed(2)},{suffix:a(()=>[...s[1]||(s[1]=[x("%",-1)])]),_:1},8,["value"]),i("div",q,[i("div",null,"磁盘: "+r(u.value.disk.toFixed(2))+"%",1)])],64)):(n(),p(e(m),{key:1,description:"无数据",size:"small"}))]),_:1})]),_:1})]),_:1}),t(e(c),{title:"在线玩家列表",bordered:!1,style:{"margin-top":"16px"}},{"header-extra":a(()=>[t(e(R),null,{default:a(()=>[t(e(T),{size:"small",onClick:z},{default:a(()=>[...s[2]||(s[2]=[x("刷新",-1)])]),_:1})]),_:1})]),default:a(()=>[k.value.length>0?(n(),p(e(D),{key:0,columns:$,data:k.value,pagination:!1,bordered:!1,size:"small"},null,8,["data"])):(n(),p(e(m),{key:1,description:"当前无在线玩家"}))]),_:1})]),_:1},8,["show"])]))}}),ne=A(G,[["__scopeId","data-v-cefbeb21"]]);export{ne as default};
