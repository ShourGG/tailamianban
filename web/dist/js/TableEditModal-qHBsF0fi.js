import{_ as V}from"./index.vue_vue_type_script_setup_true_lang-Cjn8YyBW.js";import{ac as B,K as R,M}from"./ui-vendor-qucRfopV.js";import{k as S,r,c as T,w as _,a as j,Z as g,P as b,J as d,a2 as w,R as s,X as E,Q as f,j as k}from"./vue-vendor-DIhTWhib.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";const J=S({__name:"TableEditModal",props:{visible:{type:Boolean},title:{default:"编辑数据"},width:{default:600},formOptions:{},editingData:{},formKey:{}},emits:["update:visible","update:editingData","save","cancel"],setup(o,{expose:h,emit:N}){const m=o,u=N,n=r(),i=r(!1),a=r({}),l=T({get:()=>m.visible,set:e=>u("update:visible",e)});_(()=>m.editingData,e=>{e&&Object.keys(e).length>0&&(a.value=JSON.parse(JSON.stringify(e)))},{immediate:!0,deep:!0}),_(l,e=>{e||setTimeout(()=>{a.value={}},300)});const p=async()=>{if(n.value){i.value=!0;try{await n.value.validate(),u("save",a.value)}catch{}finally{i.value=!1}}},v=()=>{a.value={},u("cancel")};return h({formRef:n,submitLoading:j(i),save:p,cancel:v}),(e,t)=>{const x=V,y=M,C=R,O=B;return b(),g(O,{show:d(l),"onUpdate:show":t[1]||(t[1]=c=>w(l)?l.value=c:null),title:o.title,width:o.width,preset:"card","mask-closable":!1,"close-on-esc":!1,class:"w60%",closable:!1},{action:s(()=>[f(C,{justify:"end"},{default:s(()=>[f(y,{onClick:v},{default:s(()=>[...t[2]||(t[2]=[k("取消",-1)])]),_:1}),f(y,{type:"primary",loading:d(i),onClick:p},{default:s(()=>[...t[3]||(t[3]=[k(" 保存 ",-1)])]),_:1},8,["loading"])]),_:1})]),default:s(()=>[d(l)&&o.formOptions.length?(b(),g(x,{ref_key:"cFormRef",ref:n,key:o.formKey,modelValue:d(a),"onUpdate:modelValue":t[0]||(t[0]=c=>w(a)?a.value=c:null),options:o.formOptions,"layout-type":"grid","layout-config":{grid:{cols:2,xGap:16,yGap:16}},"show-default-actions":!1},null,8,["modelValue","options"])):E("",!0)]),_:1},8,["show","title","width"])}}}),U=F(J,[["__scopeId","data-v-d446a4a3"]]);export{U as default};
