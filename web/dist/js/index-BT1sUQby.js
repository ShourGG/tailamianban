import D from"./index-JSKQswD8.js";import{k as Y,ac as z,ag as J,r as c,c as W,m as r,o as X,w as _,O as w,P as m,S as L,Z as S,X as $,F,W as U,ai as M,R,j,_ as q,Q as E,J as Q,n as Z}from"./vue-vendor-DIhTWhib.js";import{e as G}from"./index-CIpQTZjJ.js";import{L as H,O as K}from"./ui-vendor-qucRfopV.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./iconify-CfW7wLRI.js";import"./index-D3z4ySpN.js";import"./robot-avatar-1-CBzFR956.js";import"./spline-vendor-BYERog9l.js";import"./charts-vendor-XI8Sg87J.js";import"./editor-vendor-CUlQiixb.js";const ee={id:"guide-tags-view",class:"tags-view-container"},te=Y({__name:"index",setup(oe){const o=G(),a=z(),d=J(),p=c(!1),k=c(0),x=c(0),u=c(null),l=c(-1),y=e=>e.path===a.path,h=e=>e.meta?.affix,N=c(),f=c(),V=e=>{const t=f.value;t&&(t.scrollLeft+=e.deltaY*.3,t.scrollTo({left:t.scrollLeft+e.deltaY*.3,behavior:"smooth"}))},O=e=>{e.path!==a.path&&d.push(e.path),Z(()=>{const t=f.value,n=t?.querySelector(`[data-path="${e.path}"]`);if(n&&t){const i=t.getBoundingClientRect(),g=n.getBoundingClientRect(),s=n.offsetLeft-i.width/2+g.width/2;t.scrollTo({left:Math.max(0,s),behavior:"smooth"})}})},T=(e,t)=>{if(h(e))return;const n=y(e),i=o.removeTag(t);n&&i&&d.push("/")},A=(e,t,n)=>{e.preventDefault(),u.value=t,l.value=n,p.value=!0,k.value=e.clientX,x.value=e.clientY},C=()=>p.value=!1,B=W(()=>[{type:"option",label:"关闭",key:"close",disabled:h(u.value),icon:()=>r("span",{class:"i-mdi:close"})},{type:"option",label:"关闭其他",key:"closeOthers",icon:()=>r("span",{class:"i-mdi:arrow-left-right-bold"})},{type:"option",label:"关闭左侧",key:"closeLeft",icon:()=>r("span",{class:"i-mdi:align-horizontal-left"})},{type:"option",label:"关闭右侧",key:"closeRight",icon:()=>r("span",{class:"i-mdi:align-horizontal-right"})},{type:"option",label:"关闭所有",key:"closeAll",icon:()=>r("span",{class:"i-mdi:tally-mark-5"})}]),I=e=>{if(!(!u.value||l.value===-1)){switch(e){case"close":T(u.value,l.value);break;case"closeOthers":o.removeOtherTags(l.value);break;case"closeLeft":o.removeLeftTags(l.value);break;case"closeRight":o.removeRightTags(l.value);break;case"closeAll":o.removeAllTags(),d.push("/");break}C()}};return X(()=>{const e=localStorage.getItem("tagsViewList");e&&o.initTags(JSON.parse(e)),o.addTag({path:a.path,title:a.path==="/"?"首页":a.meta.title||"Unnamed Page",icon:a.path==="/"?"mdi:home":a.meta.icon,meta:{affix:a.path==="/"}})}),_(()=>a.path,e=>{o.addTag({path:e,title:e==="/"?"首页":a.meta.title||"Unnamed Page",icon:e==="/"?"mdi:home":a.meta.icon,meta:{affix:e==="/"}}),o.setActiveTag(e)},{immediate:!0}),_(()=>o.tagsViewList,e=>{localStorage.setItem("tagsViewList",JSON.stringify(e))},{deep:!0}),_(()=>o.activeTag,e=>{localStorage.setItem("activeTag",e)}),(e,t)=>{const n=D,i=H,g=K;return m(),w("div",ee,[L("div",{class:"tags-track",ref_key:"tagsTrack",ref:N,onWheel:V},[L("div",{class:"tags-container",ref_key:"tagsContainer",ref:f},[(m(!0),w(F,null,U(Q(o).tagsViewList,(s,b)=>(m(),S(i,{key:s.path,type:y(s)?"primary":"default",closable:!h(s),"data-path":s.path,onClose:M(v=>T(s,b),["stop"]),onClick:v=>O(s),onContextmenu:M(v=>A(v,s,b),["prevent"])},{icon:R(()=>[E(n,{name:s.icon,size:12},null,8,["name"])]),default:R(()=>[j(" "+q(s.title),1)]),_:2},1032,["type","closable","data-path","onClose","onClick","onContextmenu"]))),128))],512)],544),p.value?(m(),S(g,{key:0,show:p.value,options:B.value,x:k.value,y:x.value,onClickoutside:C,onSelect:I},null,8,["show","options","x","y"])):$("",!0)])}}}),he=P(te,[["__scopeId","data-v-c510c2e3"]]);export{he as default};
