import{I as V}from"./iconify-CfW7wLRI.js";import{u as D}from"./index-D3z4ySpN.js";import{k as N,r as b,c,w as R,o as X,a as x,O as f,P as s,J as n,L as m,H as w,Z as C,X as I,s as G,a6 as K,S as $,n as Y}from"./vue-vendor-DIhTWhib.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./robot-avatar-1-CBzFR956.js";const H=["title","aria-label","role","tabindex"],J=["width","height","viewBox","fill"],O=["d","fill"],T=["src","alt","width","height"],U=["title"],Z=N({__name:"index",props:{name:{default:void 0},type:{default:"iconify"},color:{default:"currentColor"},size:{default:18},svgPath:{default:""},viewBox:{default:"0 0 24 24"},alt:{default:""},clickable:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},fallbackIcon:{default:""},title:{default:""},ariaLabel:{default:""},customClass:{default:""},rotate:{default:0},flip:{default:void 0},componentProps:{default:()=>({})}},emits:["click","error","load"],setup(t,{expose:B,emit:E}){const e=t,d=E,z=b(),l=b(!1),u=b(""),P=c(()=>({fontSize:typeof e.size=="number"?`${e.size}px`:e.size,color:e.color,cursor:e.clickable?"pointer":"default"})),r=c(()=>{const i={display:"inline-flex",justifyContent:"center",alignItems:"center",width:typeof e.size=="number"?`${e.size}px`:e.size,height:typeof e.size=="number"?`${e.size}px`:e.size};if(e.rotate&&(i.transform=`rotate(${e.rotate}deg)`),e.flip){const a=e.flip==="horizontal"||e.flip==="both"?-1:1,k=e.flip==="vertical"||e.flip==="both"?-1:1;i.transform=`${i.transform||""} scaleX(${a}) scaleY(${k})`.trim()}return i}),y=c(()=>typeof e.name=="string"?e.name:e.name&&e.name.__name?e.name.__name:e.name&&e.name.name?e.name.name:"Component Icon"),S=c(()=>[e.customClass,{"c-icon__rotatable":e.rotate!==0,"c-icon__flippable":!!e.flip}]),g=c(()=>e.type!=="component"||!e.name?null:e.name),o=(i,a,k)=>{l.value=!0,u.value=a,d("error",i,k),e.fallbackIcon&&l.value},p=i=>{!e.clickable||e.loading||d("click",i)},L=i=>{!e.clickable||e.loading||(i.key==="Enter"||i.key===" ")&&(i.preventDefault(),d("click",i))},W=()=>{d("load")},h=c(()=>e.type!=="image"||typeof e.name!="string"?"":e.name.startsWith("http://")||e.name.startsWith("https://")||e.name.startsWith("//")||e.name.startsWith("/")?e.name:D(e.name)),M={iconify:()=>{e.name.includes(":")},unocss:()=>{typeof e.name!="string"||e.name.startsWith("i-")},component:()=>!g.value&&"无法解析组件",svg:()=>!e.svgPath&&"SVG路径不能为空",image:()=>!h.value&&"图片路径无效"},v=()=>{if(l.value=!1,u.value="",!e.name)return o("validation","图标名称不能为空");const i=M[e.type];if(!i)return o("type","不支持的图标类型");const a=i();a&&o(e.type,a)};return R(()=>[e.name,e.type,e.svgPath],()=>{Y(v)},{immediate:!0}),X(()=>{v(),l.value||d("load")}),B({validate:v,hasError:x(l),errorMessage:x(u),el:z}),(i,a)=>(s(),f("div",{ref_key:"iconRef",ref:z,class:w(["c-icon",[`c-icon--${t.type}`,{"c-icon--clickable":t.clickable,"c-icon--loading":t.loading,"c-icon--error":n(l)}]]),style:m(n(P)),title:t.title||n(y),"aria-label":t.ariaLabel||n(y),role:t.clickable?"button":"img",tabindex:t.clickable?0:-1,onClick:p,onKeydown:L},[(t.type==="iconify"||!t.type)&&!n(l)&&typeof t.name=="string"?(s(),C(n(V),{key:0,icon:t.name,width:t.size,height:t.size,color:t.color,style:m(n(r)),onError:a[0]||(a[0]=()=>o("iconify","Iconify图标加载失败"))},null,8,["icon","width","height","color","style"])):t.type==="unocss"&&!n(l)&&typeof t.name=="string"?(s(),f("div",{key:1,class:w([t.name,n(S)]),style:m(n(r)),onError:a[1]||(a[1]=()=>o("unocss","UnoCSS图标渲染失败"))},null,38)):t.type==="component"&&n(g)&&!n(l)?(s(),C(K(n(g)),G({key:2,style:n(r)},t.componentProps,{onError:a[2]||(a[2]=()=>o("component","组件图标渲染失败"))}),null,16,["style"])):t.type==="svg"&&t.svgPath&&!n(l)?(s(),f("svg",{key:3,width:t.size,height:t.size,viewBox:t.viewBox,style:m(n(r)),fill:t.color,onError:a[3]||(a[3]=()=>o("svg","SVG图标渲染失败"))},[$("path",{d:t.svgPath,fill:t.color},null,8,O)],44,J)):t.type==="image"&&n(h)&&!n(l)?(s(),f("img",{key:4,src:n(h),alt:t.alt||n(y),width:t.size,height:t.size,style:{display:"inline-block","vertical-align":"middle"},onError:a[4]||(a[4]=()=>o("image","图片图标加载失败")),onLoad:W},null,40,T)):I("",!0),t.loading&&!n(l)?(s(),f("div",{key:5,class:"c-icon__loading",style:m(n(r))},[...a[5]||(a[5]=[$("div",{class:"c-icon__spinner"},null,-1)])],4)):n(l)?(s(),f("div",{key:6,class:"c-icon__error",style:m(n(r)),title:`图标解析失败: ${n(y)} (${n(u)})${t.fallbackIcon?` (fallback: ${t.fallbackIcon})`:""}`}," ⚠️ ",12,U)):I("",!0)],46,H))}}),ee=j(Z,[["__scopeId","data-v-209d6171"]]);export{ee as default};
