# 🎮 泰拉瑞亚服务器管理面板 - 项目规划文档

## 📋 项目功能说明

### 核心功能概述
**泰拉瑞亚面板**是一个专为泰拉瑞亚游戏服务器设计的Web管理面板，提供完整的服务器管理、玩家管理、世界管理和系统监控功能。

### 主要功能模块

#### 🚀 服务器管理
- **一键启动/停止** - 简单的服务器控制操作
- **配置管理** - 可视化编辑服务器配置文件
- **状态监控** - 实时显示服务器运行状态
- **日志查看** - 实时查看服务器运行日志

#### 🌍 世界管理
- **世界列表** - 管理所有世界文件
- **世界上传** - 支持世界文件上传功能
- **备份还原** - 自动备份和一键还原世界
- **世界删除** - 安全删除确认机制

#### 👥 玩家管理
- **在线玩家** - 实时显示在线玩家列表
- **管理员操作** - 踢出、封禁等管理操作
- **玩家统计** - 游戏时间、等级等数据统计
- **聊天记录** - 游戏内聊天记录查看

#### 📊 系统监控
- **系统状态** - CPU、内存、磁盘使用率监控
- **性能图表** - 实时性能监控图表展示
- **告警通知** - 异常情况自动告警
- **操作日志** - 管理员操作记录追踪

## ⚠️ 使用限制和注意事项

### 🔴 强制性系统要求
```
⚠️ 重要提示：本面板仅支持Linux系统运行！

✅ 支持的系统：
- Ubuntu 20.04+ (推荐 Ubuntu 24.04)
- CentOS 7+
- Debian 10+
- 其他主流Linux发行版

❌ 不支持的系统：
- Windows系统 (绝对不支持)
- macOS系统 (不提供支持)
- 任何非Linux系统

⚠️ 硬件最低要求：
- 内存：最低2GB，推荐4GB+
- 存储：最低20GB可用空间
- 网络：需要公网IP访问
```

### 🔴 网络和端口限制
```
⚠️ 端口策略：采用单端口统一入口设计

✅ 正确的端口配置：
- 面板访问：仅开放80/443或8080端口
- 泰拉瑞亚服务器：127.0.0.1:7777 (内网)
- 统一入口：所有功能通过一个端口访问

❌ 禁止的配置：
- 不要开放多个端口给外网
- 不要将泰拉瑞亚端口直接暴露
- 不要使用复杂的端口配置
```

### 🔴 部署和使用限制
```
⚠️ 部署要求：真正的一键部署，无需任何依赖安装

✅ 支持的部署方式：
- 下载二进制文件直接运行
- 使用提供的run.sh脚本一键启动
- Docker容器部署（可选）

❌ 不支持的操作：
- 不需要安装Node.js、Go等开发环境
- 不需要手动构建前端或后端
- 不需要复杂的配置文件修改
- 不支持在Windows上测试或运行

⚠️ 使用限制：
- 必须有root权限或sudo权限
- 需要稳定的网络连接
- 建议使用专用服务器部署
```

## 🐧 Linux部署指南

### 第一步：系统准备
```bash
# 更新系统（推荐但非必须）
sudo apt update && sudo apt upgrade -y

# 检查系统版本
lsb_release -a

# 确保有足够的磁盘空间
df -h
```

### 第二步：一键下载和安装
```bash
# 方式1：使用一键安装脚本（推荐）
curl -fsSL https://raw.githubusercontent.com/ShourGG/tailamianban/main/install.sh | bash

# 方式2：手动下载脚本
cd ~ && wget https://raw.githubusercontent.com/ShourGG/tailamianban/main/run.sh
chmod +x run.sh
./run.sh
```

### 第三步：启动面板
```bash
# 使用脚本启动（推荐）
./run.sh

# 根据菜单选择操作：
# [0]: 下载并启动服务
# [1]: 启动服务
# [2]: 关闭服务
# [3]: 重启服务
# [4]: 更新面板
```

### 第四步：访问面板
```bash
# 默认访问地址
http://你的服务器IP:8080

# 默认登录信息
用户名: admin
密码: admin123

# 首次登录后请立即修改密码！
```

### 第五步：配置泰拉瑞亚服务器
```bash
# 面板会自动下载泰拉瑞亚服务器文件
# 无需手动安装，一切都是自动化的

# 如果需要手动操作：
# 1. 在面板中点击"安装泰拉瑞亚服务器"
# 2. 等待自动下载完成
# 3. 配置世界参数
# 4. 启动服务器
```

## 🏗️ 技术架构

### 核心技术栈
```
后端技术：
├── Go 1.21+ (主要编程语言)
├── Gin框架 (Web框架)
├── SQLite (内置数据库)
├── embed (前端资源内嵌)
└── systemd (系统服务管理)

前端技术：
├── Vue3 + TypeScript (现代化前端)
├── Naive UI (美观的组件库)
├── Vite7 (极速构建工具)
├── UnoCSS (原子化CSS)
└── WebSocket (实时通信)
```

### 架构设计理念
```
设计原则：
├── 简单至上 - 一个文件包含所有功能
├── 零配置启动 - 默认配置即可运行
├── 单端口策略 - 统一入口，安全可靠
├── 内置前端 - 无需单独部署前端
└── 自动化管理 - 最小化人工干预
```

### 参考项目优势融合
```
DST管理平台优势：
├── 一键部署脚本 (run.sh)
├── 单一二进制文件
├── 自动化安装流程
├── 简单的菜单操作
└── 稳定的服务管理

Robot_Admin优势：
├── 现代化Vue3界面
├── TypeScript类型安全
├── Naive UI美观组件
├── 响应式设计
└── 丰富的功能组件
```

## 📦 GitHub仓库管理

### 仓库信息
```
仓库地址：https://github.com/ShourGG/tailamianban
仓库类型：公开仓库
主要分支：main
发布方式：GitHub Releases
```

### 项目结构
```
tailamianban/
├── 📁 backend/              # Go后端源码
├── 📁 frontend/             # Vue3前端源码
├── 📁 scripts/              # 部署脚本
├── 📁 docker/               # Docker配置
├── 📁 docs/                 # 项目文档
├── 📄 install.sh            # 一键安装脚本
├── 📄 run.sh                # 运行管理脚本
├── 📄 README.md             # 项目说明
└── 📄 .github/workflows/    # CI/CD配置
```

### 版本发布流程
```bash
# 1. 开发完成后打标签
git tag -a v1.0.0 -m "Release version 1.0.0"
git push origin v1.0.0

# 2. GitHub Actions自动构建
# - 自动编译Go后端
# - 自动构建Vue前端
# - 自动生成发布包
# - 自动发布到Releases

# 3. 用户下载使用
curl -fsSL https://github.com/ShourGG/tailamianban/releases/latest/download/install.sh | bash
```

### 持续集成配置
```yaml
# .github/workflows/release.yml
name: Build and Release
on:
  push:
    tags: ['v*']
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - name: Build for Linux
      run: |
        # 构建前端
        cd frontend && npm run build
        # 构建后端
        cd backend && go build -o terraria-panel
        # 打包发布
        tar -czf terraria-panel-linux.tar.gz terraria-panel frontend/dist scripts
```

## 🎯 项目特色和优势

### 💡 核心优势
```
1. 真正的一键部署
   ✅ 下载即用，无需安装任何依赖
   ✅ 自动化脚本处理所有配置
   ✅ 30秒内完成部署

2. 现代化用户界面
   ✅ Vue3 + TypeScript + Naive UI
   ✅ 响应式设计，支持移动端
   ✅ 实时数据更新，操作流畅

3. 企业级安全设计
   ✅ 单端口策略，降低攻击面
   ✅ 内网隔离，泰拉瑞亚服务器不对外
   ✅ JWT认证，权限控制完善

4. 运维友好
   ✅ systemd服务管理
   ✅ 日志记录完整
   ✅ 自动备份机制
   ✅ 一键更新升级
```

### 🎮 专为泰拉瑞亚优化
```
游戏特性支持：
├── 世界文件管理
├── 模组支持
├── 玩家权限管理
├── 服务器配置优化
└── 游戏数据统计
```

## 🔧 常见问题解决

### ❓ 部署相关问题

**Q: 下载脚本失败怎么办？**
```bash
# 如果网络问题，可以手动下载
wget https://github.com/ShourGG/tailamianban/releases/latest/download/terraria-panel-linux.tar.gz
tar -xzf terraria-panel-linux.tar.gz
chmod +x terraria-panel
./terraria-panel
```

**Q: 端口被占用怎么办？**
```bash
# 检查端口占用
sudo netstat -tlnp | grep 8080

# 修改端口（编辑run.sh文件）
sed -i 's/PORT=8080/PORT=9999/' run.sh
```

**Q: 权限不足怎么办？**
```bash
# 确保有执行权限
chmod +x run.sh terraria-panel

# 如果需要root权限
sudo ./run.sh
```

### ❓ 使用相关问题

**Q: 忘记管理员密码怎么办？**
```bash
# 停止服务
./run.sh
# 选择 [2] 关闭服务

# 删除数据库文件重置
rm -f data/panel.db

# 重新启动服务
./run.sh
# 选择 [1] 启动服务
# 密码重置为默认：admin123
```

**Q: 泰拉瑞亚服务器启动失败？**
```bash
# 检查日志
tail -f logs/terraria.log

# 检查端口冲突
sudo netstat -tlnp | grep 7777

# 重新安装泰拉瑞亚服务器
# 在面板中点击"重新安装服务器"
```

## 🚀 快速上手指南

### 5分钟快速部署
```bash
# 第1分钟：下载脚本
curl -fsSL https://raw.githubusercontent.com/ShourGG/tailamianban/main/install.sh | bash

# 第2-3分钟：自动安装
# 脚本会自动下载和配置所有组件

# 第4分钟：启动服务
./run.sh
# 选择 [0] 下载并启动服务

# 第5分钟：访问面板
# 打开浏览器访问 http://你的IP:8080
# 用户名: admin, 密码: admin123
```

### 首次使用配置
```bash
1. 登录面板后立即修改密码
2. 在"系统设置"中配置服务器参数
3. 在"世界管理"中创建或上传世界
4. 在"服务器管理"中启动泰拉瑞亚服务器
5. 邀请朋友连接你的服务器IP:7777
```

## 📋 功能清单

### ✅ 已实现功能
- [x] 用户认证和权限管理
- [x] 服务器启停控制
- [x] 实时状态监控
- [x] 日志查看功能
- [x] 世界文件管理
- [x] 玩家管理功能
- [x] 系统监控面板
- [x] 自动备份功能

### 🔄 开发中功能
- [ ] 模组管理系统
- [ ] 高级配置编辑器
- [ ] 数据统计图表
- [ ] 告警通知系统

### 🎯 计划功能
- [ ] 多服务器管理
- [ ] 插件系统支持
- [ ] API接口开放
- [ ] 移动端APP

## 🛡️ 安全说明

### 🔒 安全特性
```
网络安全：
├── 单端口策略 - 减少攻击面
├── 内网隔离 - 游戏服务器不对外
├── 防火墙配置 - 只开放必要端口
└── SSL支持 - HTTPS加密传输

应用安全：
├── JWT认证 - 安全的身份验证
├── 权限控制 - 细粒度权限管理
├── 输入验证 - 防止注入攻击
└── 操作日志 - 完整的审计追踪
```

### 🔐 推荐安全配置
```bash
# 1. 配置防火墙
sudo ufw --force reset
sudo ufw default deny incoming
sudo ufw default allow outgoing
sudo ufw allow ssh
sudo ufw allow 8080/tcp
sudo ufw --force enable

# 2. 修改默认密码
# 登录面板后立即在"用户管理"中修改

# 3. 定期备份
# 面板会自动备份，也可手动备份
cp -r data/ backup/data_$(date +%Y%m%d)

# 4. 监控日志
tail -f logs/panel.log
```

## 📞 支持和反馈

### 🆘 获取帮助
```
GitHub Issues: https://github.com/ShourGG/tailamianban/issues
项目文档: https://github.com/ShourGG/tailamianban/wiki
更新日志: https://github.com/ShourGG/tailamianban/releases
```

### 🐛 问题反馈
```
反馈问题时请提供：
1. 操作系统版本 (uname -a)
2. 面板版本号
3. 错误日志内容
4. 复现步骤
5. 期望结果
```

### 💡 功能建议
```
欢迎提出功能建议：
1. 在GitHub Issues中创建Feature Request
2. 详细描述功能需求和使用场景
3. 说明功能的重要性和紧急程度
```

---

## 🎉 总结

**泰拉瑞亚面板**是一个专为Linux环境设计的现代化游戏服务器管理解决方案。它融合了DST管理平台的简单快捷和Robot_Admin的现代化界面，为用户提供了真正的一键部署体验。

### 🌟 项目亮点
- **真正的一键部署** - 下载即用，无需任何依赖安装
- **现代化界面** - Vue3 + TypeScript + Naive UI
- **企业级安全** - 单端口策略 + 内网隔离
- **运维友好** - 完整的监控、日志、备份功能

### ⚠️ 重要提醒
```
🔴 本项目仅支持Linux系统！
🔴 不支持Windows系统运行或测试！
🔴 部署前请确保系统满足最低要求！
🔴 首次使用请立即修改默认密码！
```

**让我们一起打造最好用的泰拉瑞亚服务器管理面板！** 🚀

---

*老王暴躁技术流出品 - 专治各种不服 - 2025年1月*
